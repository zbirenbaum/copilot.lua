"use strict";var _It=Object.create;var E4=Object.defineProperty;var tDe=Object.getOwnPropertyDescriptor;var RIt=Object.getOwnPropertyNames;var kIt=Object.getPrototypeOf,PIt=Object.prototype.hasOwnProperty;var Z4e=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),eDe=t=>{throw TypeError(t)};var s=(t,e)=>E4(t,"name",{value:e,configurable:!0});var Mm=(t,e)=>()=>(t&&(e=t(t=0)),e);var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),xa=(t,e)=>{for(var r in e)E4(t,r,{get:e[r],enumerable:!0})},rDe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of RIt(e))!PIt.call(t,i)&&i!==r&&E4(t,i,{get:()=>e[i],enumerable:!(n=tDe(e,i))||n.enumerable});return t};var Ne=(t,e,r)=>(r=t!=null?_It(kIt(t)):{},rDe(e||!t||!t.__esModule?E4(r,"default",{value:t,enumerable:!0}):r,t)),DIt=t=>rDe(E4({},"__esModule",{value:!0}),t),af=(t,e,r,n)=>{for(var i=n>1?void 0:n?tDe(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&E4(e,r,i),i},Ea=(t,e)=>(r,n)=>e(r,n,t);var Hde=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&eDe("Object expected");var n,i;r&&(n=e[Z4e("asyncDispose")]),n===void 0&&(n=e[Z4e("dispose")],r&&(i=n)),typeof n!="function"&&eDe("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},$de=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,d=Mm(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var iDe=H(Wde=>{d();var nDe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Wde.encode=function(t){if(0<=t&&t<nDe.length)return nDe[t];throw new TypeError("Must be between 0 and 63: "+t)};Wde.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,f=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+f:t==c?62:t==l?63:-1}});var Vde=H(Gde=>{d();var oDe=iDe(),jde=5,sDe=1<<jde,aDe=sDe-1,cDe=sDe;function BIt(t){return t<0?(-t<<1)+1:(t<<1)+0}s(BIt,"toVLQSigned");function NIt(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(NIt,"fromVLQSigned");Gde.encode=s(function(e){var r="",n,i=BIt(e);do n=i&aDe,i>>>=jde,i>0&&(n|=cDe),r+=oDe.encode(n);while(i>0);return r},"base64VLQ_encode");Gde.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=oDe.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&cDe),l&=aDe,o=o+(l<<a),a+=jde}while(c);n.value=NIt(o),n.rest=r},"base64VLQ_decode")});var T4=H(xd=>{d();function MIt(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(MIt,"getArg");xd.getArg=MIt;var lDe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,LIt=/^data:.+\,.+$/;function v9(t){var e=t.match(lDe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(v9,"urlParse");xd.urlParse=v9;function b4(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(b4,"urlGenerate");xd.urlGenerate=b4;function zde(t){var e=t,r=v9(t);if(r){if(!r.path)return t;e=r.path}for(var n=xd.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,b4(r)):e}s(zde,"normalize");xd.normalize=zde;function uDe(t,e){t===""&&(t="."),e===""&&(e=".");var r=v9(e),n=v9(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),b4(r);if(r||e.match(LIt))return e;if(n&&!n.host&&!n.path)return n.host=e,b4(n);var i=e.charAt(0)==="/"?e:zde(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,b4(n)):i}s(uDe,"join");xd.join=uDe;xd.isAbsolute=function(t){return t.charAt(0)==="/"||lDe.test(t)};function FIt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(FIt,"relative");xd.relative=FIt;var dDe=function(){var t=Object.create(null);return!("__proto__"in t)}();function fDe(t){return t}s(fDe,"identity");function OIt(t){return pDe(t)?"$"+t:t}s(OIt,"toSetString");xd.toSetString=dDe?fDe:OIt;function QIt(t){return pDe(t)?t.slice(1):t}s(QIt,"fromSetString");xd.fromSetString=dDe?fDe:QIt;function pDe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(pDe,"isProtoString");function UIt(t,e,r){var n=I4(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:I4(t.name,e.name)}s(UIt,"compareByOriginalPositions");xd.compareByOriginalPositions=UIt;function qIt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=I4(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:I4(t.name,e.name)}s(qIt,"compareByGeneratedPositionsDeflated");xd.compareByGeneratedPositionsDeflated=qIt;function I4(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(I4,"strcmp");function HIt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=I4(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:I4(t.name,e.name)}s(HIt,"compareByGeneratedPositionsInflated");xd.compareByGeneratedPositionsInflated=HIt;function $It(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s($It,"parseSourceMapInput");xd.parseSourceMapInput=$It;function WIt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=v9(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=uDe(b4(n),e)}return zde(e)}s(WIt,"computeSourceURL");xd.computeSourceURL=WIt});var Jde=H(mDe=>{d();var Kde=T4(),Yde=Object.prototype.hasOwnProperty,B_=typeof Map<"u";function kv(){this._array=[],this._set=B_?new Map:Object.create(null)}s(kv,"ArraySet");kv.fromArray=s(function(e,r){for(var n=new kv,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");kv.prototype.size=s(function(){return B_?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");kv.prototype.add=s(function(e,r){var n=B_?e:Kde.toSetString(e),i=B_?this.has(e):Yde.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(B_?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");kv.prototype.has=s(function(e){if(B_)return this._set.has(e);var r=Kde.toSetString(e);return Yde.call(this._set,r)},"ArraySet_has");kv.prototype.indexOf=s(function(e){if(B_){var r=this._set.get(e);if(r>=0)return r}else{var n=Kde.toSetString(e);if(Yde.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");kv.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");kv.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");mDe.ArraySet=kv});var ADe=H(gDe=>{d();var hDe=T4();function jIt(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||hDe.compareByGeneratedPositionsInflated(t,e)<=0}s(jIt,"generatedPositionAfter");function CW(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(CW,"MappingList");CW.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");CW.prototype.add=s(function(e){jIt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");CW.prototype.toArray=s(function(){return this._sorted||(this._array.sort(hDe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");gDe.MappingList=CW});var Xde=H(yDe=>{d();var x9=Vde(),Yc=T4(),vW=Jde().ArraySet,GIt=ADe().MappingList;function Lm(t){t||(t={}),this._file=Yc.getArg(t,"file",null),this._sourceRoot=Yc.getArg(t,"sourceRoot",null),this._skipValidation=Yc.getArg(t,"skipValidation",!1),this._sources=new vW,this._names=new vW,this._mappings=new GIt,this._sourcesContents=null}s(Lm,"SourceMapGenerator");Lm.prototype._version=3;Lm.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new Lm({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Yc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Yc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");Lm.prototype.addMapping=s(function(e){var r=Yc.getArg(e,"generated"),n=Yc.getArg(e,"original",null),i=Yc.getArg(e,"source",null),o=Yc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");Lm.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=Yc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Yc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Yc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Lm.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Yc.relative(o,i));var a=new vW,c=new vW;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=Yc.join(n,l.source)),o!=null&&(l.source=Yc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var f=l.source;f!=null&&!a.has(f)&&a.add(f);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=Yc.join(n,l)),o!=null&&(l=Yc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");Lm.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");Lm.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,f,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(h>0){if(!Yc.compareByGeneratedPositionsInflated(u,m[h-1]))continue;l+=","}l+=x9.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=x9.encode(p-a),a=p,l+=x9.encode(u.originalLine-1-i),i=u.originalLine-1,l+=x9.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(f=this._names.indexOf(u.name),l+=x9.encode(f-o),o=f)),c+=l}return c},"SourceMapGenerator_serializeMappings");Lm.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Yc.relative(r,n));var i=Yc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Lm.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Lm.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");yDe.SourceMapGenerator=Lm});var CDe=H(N_=>{d();N_.GREATEST_LOWER_BOUND=1;N_.LEAST_UPPER_BOUND=2;function Zde(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?Zde(a,e,r,n,i,o):o==N_.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?Zde(t,a,r,n,i,o):o==N_.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Zde,"recursiveSearch");N_.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=Zde(-1,r.length,e,r,n,i||N_.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var xDe=H(vDe=>{d();function efe(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(efe,"swap");function VIt(t,e){return Math.round(t+Math.random()*(e-t))}s(VIt,"randomIntInRange");function tfe(t,e,r,n){if(r<n){var i=VIt(r,n),o=r-1;efe(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,efe(t,o,c));efe(t,o+1,c);var l=o+1;tfe(t,e,r,l-1),tfe(t,e,l+1,n)}}s(tfe,"doQuickSort");vDe.quickSort=function(t,e){tfe(t,e,0,t.length-1)}});var bDe=H(xW=>{d();var Or=T4(),rfe=CDe(),w4=Jde().ArraySet,zIt=Vde(),E9=xDe().quickSort;function Vs(t,e){var r=t;return typeof t=="string"&&(r=Or.parseSourceMapInput(t)),r.sections!=null?new Gg(r,e):new Mu(r,e)}s(Vs,"SourceMapConsumer");Vs.fromSourceMap=function(t,e){return Mu.fromSourceMap(t,e)};Vs.prototype._version=3;Vs.prototype.__generatedMappings=null;Object.defineProperty(Vs.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Vs.prototype.__originalMappings=null;Object.defineProperty(Vs.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Vs.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Vs.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Vs.GENERATED_ORDER=1;Vs.ORIGINAL_ORDER=2;Vs.GREATEST_LOWER_BOUND=1;Vs.LEAST_UPPER_BOUND=2;Vs.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||Vs.GENERATED_ORDER,a;switch(o){case Vs.GENERATED_ORDER:a=this._generatedMappings;break;case Vs.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=Or.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");Vs.prototype.allGeneratedPositionsFor=s(function(e){var r=Or.getArg(e,"line"),n={source:Or.getArg(e,"source"),originalLine:r,originalColumn:Or.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Or.compareByOriginalPositions,rfe.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:Or.getArg(a,"generatedLine",null),column:Or.getArg(a,"generatedColumn",null),lastColumn:Or.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:Or.getArg(a,"generatedLine",null),column:Or.getArg(a,"generatedColumn",null),lastColumn:Or.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");xW.SourceMapConsumer=Vs;function Mu(t,e){var r=t;typeof t=="string"&&(r=Or.parseSourceMapInput(t));var n=Or.getArg(r,"version"),i=Or.getArg(r,"sources"),o=Or.getArg(r,"names",[]),a=Or.getArg(r,"sourceRoot",null),c=Or.getArg(r,"sourcesContent",null),l=Or.getArg(r,"mappings"),u=Or.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=Or.normalize(a)),i=i.map(String).map(Or.normalize).map(function(f){return a&&Or.isAbsolute(a)&&Or.isAbsolute(f)?Or.relative(a,f):f}),this._names=w4.fromArray(o.map(String),!0),this._sources=w4.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(f){return Or.computeSourceURL(a,f,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(Mu,"BasicSourceMapConsumer");Mu.prototype=Object.create(Vs.prototype);Mu.prototype.consumer=Vs;Mu.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Or.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Mu.fromSourceMap=s(function(e,r){var n=Object.create(Mu.prototype),i=n._names=w4.fromArray(e._names.toArray(),!0),o=n._sources=w4.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return Or.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,f=a.length;u<f;u++){var p=a[u],m=new EDe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),l.push(m)),c.push(m)}return E9(n.__originalMappings,Or.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");Mu.prototype._version=3;Object.defineProperty(Mu.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function EDe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(EDe,"Mapping");Mu.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,f=0,p={},m={},h=[],g=[],A,y,E,b,S;f<u;)if(e.charAt(f)===";")n++,f++,i=0;else if(e.charAt(f)===",")f++;else{for(A=new EDe,A.generatedLine=n,b=f;b<u&&!this._charIsMappingSeparator(e,b);b++);if(y=e.slice(f,b),E=p[y],E)f+=y.length;else{for(E=[];f<b;)zIt.decode(e,f,m),S=m.value,f=m.rest,E.push(S);if(E.length===2)throw new Error("Found a source, but no line and column");if(E.length===3)throw new Error("Found a source and line, but no column");p[y]=E}A.generatedColumn=i+E[0],i=A.generatedColumn,E.length>1&&(A.source=c+E[1],c+=E[1],A.originalLine=o+E[2],o=A.originalLine,A.originalLine+=1,A.originalColumn=a+E[3],a=A.originalColumn,E.length>4&&(A.name=l+E[4],l+=E[4])),g.push(A),typeof A.originalLine=="number"&&h.push(A)}E9(g,Or.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,E9(h,Or.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");Mu.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return rfe.search(e,r,o,a)},"SourceMapConsumer_findMapping");Mu.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Mu.prototype.originalPositionFor=s(function(e){var r={generatedLine:Or.getArg(e,"line"),generatedColumn:Or.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Or.compareByGeneratedPositionsDeflated,Or.getArg(e,"bias",Vs.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Or.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Or.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=Or.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:Or.getArg(i,"originalLine",null),column:Or.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Mu.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Mu.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Or.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Or.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Mu.prototype.generatedPositionFor=s(function(e){var r=Or.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Or.getArg(e,"line"),originalColumn:Or.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Or.compareByOriginalPositions,Or.getArg(e,"bias",Vs.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Or.getArg(o,"generatedLine",null),column:Or.getArg(o,"generatedColumn",null),lastColumn:Or.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");xW.BasicSourceMapConsumer=Mu;function Gg(t,e){var r=t;typeof t=="string"&&(r=Or.parseSourceMapInput(t));var n=Or.getArg(r,"version"),i=Or.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new w4,this._names=new w4;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=Or.getArg(a,"offset"),l=Or.getArg(c,"line"),u=Or.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new Vs(Or.getArg(a,"map"),e)}})}s(Gg,"IndexedSourceMapConsumer");Gg.prototype=Object.create(Vs.prototype);Gg.prototype.constructor=Vs;Gg.prototype._version=3;Object.defineProperty(Gg.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Gg.prototype.originalPositionFor=s(function(e){var r={generatedLine:Or.getArg(e,"line"),generatedColumn:Or.getArg(e,"column")},n=rfe.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Gg.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Gg.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Gg.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Or.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Gg.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=Or.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var f={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}E9(this.__generatedMappings,Or.compareByGeneratedPositionsDeflated),E9(this.__originalMappings,Or.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");xW.IndexedSourceMapConsumer=Gg});var TDe=H(IDe=>{d();var KIt=Xde().SourceMapGenerator,EW=T4(),YIt=/(\r?\n)/,JIt=10,S4="$$$isSourceNode$$$";function lp(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[S4]=!0,n!=null&&this.add(n)}s(lp,"SourceNode");lp.fromStringWithSourceMap=s(function(e,r,n){var i=new lp,o=e.split(YIt),a=0,c=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,f=null;return r.eachMapping(function(m){if(f!==null)if(l<m.generatedLine)p(f,c()),l++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(f,g),f=m;return}for(;l<m.generatedLine;)i.add(c()),l++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}f=m},this),a<o.length&&(f&&p(f,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=EW.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?EW.join(n,m.source):m.source;i.add(new lp(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");lp.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[S4]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");lp.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[S4]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");lp.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[S4]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");lp.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");lp.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[S4]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");lp.prototype.setSourceContent=s(function(e,r){this.sourceContents[EW.toSetString(e)]=r},"SourceNode_setSourceContent");lp.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][S4]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(EW.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");lp.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");lp.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new KIt(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,f){r.code+=u,f.source!==null&&f.line!==null&&f.column!==null?((o!==f.source||a!==f.line||c!==f.column||l!==f.name)&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),o=f.source,a=f.line,c=f.column,l=f.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===JIt?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(u,f){n.setSourceContent(u,f)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");IDe.SourceNode=lp});var wDe=H(bW=>{d();bW.SourceMapGenerator=Xde().SourceMapGenerator;bW.SourceMapConsumer=bDe().SourceMapConsumer;bW.SourceNode=TDe().SourceNode});var _De=H((n5r,SDe)=>{d();var XIt=Object.prototype.toString,nfe=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function ZIt(t){return XIt.call(t).slice(8,-1)==="ArrayBuffer"}s(ZIt,"isArrayBuffer");function eTt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return nfe?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(eTt,"fromArrayBuffer");function tTt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return nfe?Buffer.from(t,e):new Buffer(t,e)}s(tTt,"fromString");function rTt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return ZIt(t)?eTt(t,e,r):typeof t=="string"?tTt(t,e):nfe?Buffer.from(t):new Buffer(t)}s(rTt,"bufferFrom");SDe.exports=rTt});var LDe=H((L_,afe)=>{d();var nTt=wDe().SourceMapConsumer,ife=require("path"),Zy;try{Zy=require("fs"),(!Zy.existsSync||!Zy.readFileSync)&&(Zy=null)}catch{}var iTt=_De();function RDe(t,e){return t.require(e)}s(RDe,"dynamicRequire");var kDe=!1,PDe=!1,ofe=!1,b9="auto",M_={},I9={},oTt=/^data:application\/json[^,]+base64,/,pI=[],mI=[];function cfe(){return b9==="browser"?!0:b9==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(cfe,"isInBrowser");function sTt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(sTt,"hasGlobalProcessEventEmitter");function aTt(){return typeof process=="object"&&process!==null?process.version:""}s(aTt,"globalProcessVersion");function cTt(){if(typeof process=="object"&&process!==null)return process.stderr}s(cTt,"globalProcessStderr");function lTt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(lTt,"globalProcessExit");function IW(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(IW,"handlerExec");var lfe=IW(pI);pI.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in M_)return M_[t];var e="";try{if(Zy)Zy.existsSync(t)&&(e=Zy.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return M_[t]=e});function sfe(t,e){if(!t)return e;var r=ife.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+ife.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+ife.resolve(r.slice(i.length),e)}s(sfe,"supportRelativeURL");function uTt(t){var e;if(cfe())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=lfe(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(uTt,"retrieveSourceMapURL");var ufe=IW(mI);mI.push(function(t){var e=uTt(t);if(!e)return null;var r;if(oTt.test(e)){var n=e.slice(e.indexOf(",")+1);r=iTt(n,"base64").toString(),e=t}else e=sfe(t,e),r=lfe(e);return r?{url:e,map:r}:null});function dfe(t){var e=I9[t.source];if(!e){var r=ufe(t.source);r?(e=I9[t.source]={url:r.url,map:new nTt(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=sfe(e.url,i);M_[c]=a}})):e=I9[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=sfe(e.url,n.source),n}return t}s(dfe,"mapSourcePosition");function BDe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=dfe({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+BDe(e[2])+")":t}s(BDe,"mapEvalOrigin");function dTt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var f=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,f&&o.indexOf("."+f)!=o.length-f.length-1&&(i+=" [as "+f+"]")):i+=u+"."+(f||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(dTt,"CallSiteToString");function DDe(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=dTt,e}s(DDe,"cloneCallSite");function NDe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(aTt())?0:62;n===1&&i>a&&!cfe()&&!t.isEval()&&(i-=a);var c=dfe({source:r,line:n,column:i});e.curPosition=c,t=DDe(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=BDe(u),t=DDe(t),t.getEvalOrigin=function(){return u}),t}s(NDe,"wrapCallSite");function fTt(t,e){ofe&&(M_={},I9={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+NDe(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(fTt,"prepareStackTrace");function MDe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=M_[r];if(!o&&Zy&&Zy.existsSync(r))try{o=Zy.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(MDe,"getErrorSource");function pTt(t){var e=MDe(t),r=cTt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),lTt(1)}s(pTt,"printErrorAndExit");function mTt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return pTt(arguments[1])}return t.apply(this,arguments)}}s(mTt,"shimEmitUncaughtException");var hTt=pI.slice(0),gTt=mI.slice(0);L_.wrapCallSite=NDe;L_.getErrorSource=MDe;L_.mapSourcePosition=dfe;L_.retrieveSourceMap=ufe;L_.install=function(t){if(t=t||{},t.environment&&(b9=t.environment,["node","browser","auto"].indexOf(b9)===-1))throw new Error("environment "+b9+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(pI.length=0),pI.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(mI.length=0),mI.unshift(t.retrieveSourceMap)),t.hookRequire&&!cfe()){var e=RDe(afe,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return M_[a]=o,I9[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(ofe||(ofe="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),kDe||(kDe=!0,Error.prepareStackTrace=fTt),!PDe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=RDe(afe,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&sTt()&&(PDe=!0,mTt())}};L_.resetRetrieveHandlers=function(){pI.length=0,mI.length=0,pI=hTt.slice(0),mI=gTt.slice(0),ufe=IW(mI),lfe=IW(pI)}});var oo=H((wW,QDe)=>{d();(function(t,e){typeof wW=="object"?QDe.exports=wW=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(wW,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function E(){}return s(E,"F"),function(b){var S;return E.prototype=b,S=new E,E.prototype=null,S}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(E){var b=o(this);return E&&b.mixIn(E),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},"extend"),create:s(function(){var E=this.extend();return E.init.apply(E,arguments),E},"create"),init:s(function(){},"init"),mixIn:s(function(E){for(var b in E)E.hasOwnProperty(b)&&(this[b]=E[b]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(E,b){E=this.words=E||[],b!=r?this.sigBytes=b:this.sigBytes=E.length*4},"init"),toString:s(function(E){return(E||p).stringify(this)},"toString"),concat:s(function(E){var b=this.words,S=E.words,R=this.sigBytes,B=E.sigBytes;if(this.clamp(),R%4)for(var L=0;L<B;L++){var O=S[L>>>2]>>>24-L%4*8&255;b[R+L>>>2]|=O<<24-(R+L)%4*8}else for(var Y=0;Y<B;Y+=4)b[R+Y>>>2]=S[Y>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var E=this.words,b=this.sigBytes;E[b>>>2]&=4294967295<<32-b%4*8,E.length=e.ceil(b/4)},"clamp"),clone:s(function(){var E=l.clone.call(this);return E.words=this.words.slice(0),E},"clone"),random:s(function(E){for(var b=[],S=0;S<E;S+=4)b.push(i());return new u.init(b,E)},"random")}),f=a.enc={},p=f.Hex={stringify:s(function(E){for(var b=E.words,S=E.sigBytes,R=[],B=0;B<S;B++){var L=b[B>>>2]>>>24-B%4*8&255;R.push((L>>>4).toString(16)),R.push((L&15).toString(16))}return R.join("")},"stringify"),parse:s(function(E){for(var b=E.length,S=[],R=0;R<b;R+=2)S[R>>>3]|=parseInt(E.substr(R,2),16)<<24-R%8*4;return new u.init(S,b/2)},"parse")},m=f.Latin1={stringify:s(function(E){for(var b=E.words,S=E.sigBytes,R=[],B=0;B<S;B++){var L=b[B>>>2]>>>24-B%4*8&255;R.push(String.fromCharCode(L))}return R.join("")},"stringify"),parse:s(function(E){for(var b=E.length,S=[],R=0;R<b;R++)S[R>>>2]|=(E.charCodeAt(R)&255)<<24-R%4*8;return new u.init(S,b)},"parse")},h=f.Utf8={stringify:s(function(E){try{return decodeURIComponent(escape(m.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(E){return m.parse(unescape(encodeURIComponent(E)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(E){typeof E=="string"&&(E=h.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},"_append"),_process:s(function(E){var b,S=this._data,R=S.words,B=S.sigBytes,L=this.blockSize,O=L*4,Y=B/O;E?Y=e.ceil(Y):Y=e.max((Y|0)-this._minBufferSize,0);var V=Y*L,z=e.min(V*4,B);if(V){for(var Q=0;Q<V;Q+=L)this._doProcessBlock(R,Q);b=R.splice(0,V),S.sigBytes-=z}return new u.init(b,z)},"_process"),clone:s(function(){var E=l.clone.call(this);return E._data=this._data.clone(),E},"clone"),_minBufferSize:0}),A=c.Hasher=g.extend({cfg:l.extend(),init:s(function(E){this.cfg=this.cfg.extend(E),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(E){return this._append(E),this._process(),this},"update"),finalize:s(function(E){E&&this._append(E);var b=this._doFinalize();return b},"finalize"),blockSize:512/32,_createHelper:s(function(E){return function(b,S){return new E.init(S).finalize(b)}},"_createHelper"),_createHmacHelper:s(function(E){return function(b,S){return new y.HMAC.init(E,S).finalize(b)}},"_createHmacHelper")}),y=a.algo={};return a}(Math);return t})});var S9=H((SW,UDe)=>{d();(function(t,e){typeof SW=="object"?UDe.exports=SW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(SW,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,f){this.high=u,this.low=f},"init")}),l=a.WordArray=i.extend({init:s(function(u,f){u=this.words=u||[],f!=e?this.sigBytes=f:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,f=u.length,p=[],m=0;m<f;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),f=u.words=this.words.slice(0),p=f.length,m=0;m<p;m++)f[m]=f[m].clone();return u},"clone")})}(),t})});var HDe=H((_W,qDe)=>{d();(function(t,e){typeof _W=="object"?qDe.exports=_W=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(_W,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var WDe=H((RW,$De)=>{d();(function(t,e){typeof RW=="object"?$De.exports=RW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(RW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=l[p>>>2]>>>16-p%4*8&65535;f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=a(l[p>>>2]>>>16-p%4*8&65535);f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var hI=H((kW,jDe)=>{d();(function(t,e){typeof kW=="object"?jDe.exports=kW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(kW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=l[m>>>2]>>>24-m%4*8&255,g=l[m+1>>>2]>>>24-(m+1)%4*8&255,A=l[m+2>>>2]>>>24-(m+2)%4*8&255,y=h<<16|g<<8|A,E=0;E<4&&m+E*.75<u;E++)p.push(f.charAt(y>>>6*(3-E)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<u.length;p++)f[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=c.indexOf(m);h!==-1&&(l=h)}return a(c,l,f)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;f[p>>>2]|=A<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64})});var VDe=H((PW,GDe)=>{d();(function(t,e){typeof PW=="object"?GDe.exports=PW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(PW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var m=[],h=0;h<f;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,A=u[h+1>>>2]>>>24-(h+1)%4*8&255,y=u[h+2>>>2]>>>24-(h+2)%4*8&255,E=g<<16|A<<8|y,b=0;b<4&&h+b*.75<f;b++)m.push(p.charAt(E>>>6*(3-b)&63));var S=p.charAt(64);if(S)for(;m.length%4;)m.push(S);return m.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<f.length;m++)p[f.charCodeAt(m)]=m}var h=f.charAt(64);if(h){var g=c.indexOf(h);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;f[p>>>2]|=A<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var gI=H((DW,zDe)=>{d();(function(t,e){typeof DW=="object"?zDe.exports=DW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(DW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=e.abs(e.sin(h+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var A=0;A<16;A++){var y=g+A,E=h[y];h[y]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var b=this._hash.words,S=h[g+0],R=h[g+1],B=h[g+2],L=h[g+3],O=h[g+4],Y=h[g+5],V=h[g+6],z=h[g+7],Q=h[g+8],U=h[g+9],Z=h[g+10],J=h[g+11],j=h[g+12],$=h[g+13],X=h[g+14],ie=h[g+15],ae=b[0],te=b[1],pe=b[2],Ae=b[3];ae=u(ae,te,pe,Ae,S,7,c[0]),Ae=u(Ae,ae,te,pe,R,12,c[1]),pe=u(pe,Ae,ae,te,B,17,c[2]),te=u(te,pe,Ae,ae,L,22,c[3]),ae=u(ae,te,pe,Ae,O,7,c[4]),Ae=u(Ae,ae,te,pe,Y,12,c[5]),pe=u(pe,Ae,ae,te,V,17,c[6]),te=u(te,pe,Ae,ae,z,22,c[7]),ae=u(ae,te,pe,Ae,Q,7,c[8]),Ae=u(Ae,ae,te,pe,U,12,c[9]),pe=u(pe,Ae,ae,te,Z,17,c[10]),te=u(te,pe,Ae,ae,J,22,c[11]),ae=u(ae,te,pe,Ae,j,7,c[12]),Ae=u(Ae,ae,te,pe,$,12,c[13]),pe=u(pe,Ae,ae,te,X,17,c[14]),te=u(te,pe,Ae,ae,ie,22,c[15]),ae=f(ae,te,pe,Ae,R,5,c[16]),Ae=f(Ae,ae,te,pe,V,9,c[17]),pe=f(pe,Ae,ae,te,J,14,c[18]),te=f(te,pe,Ae,ae,S,20,c[19]),ae=f(ae,te,pe,Ae,Y,5,c[20]),Ae=f(Ae,ae,te,pe,Z,9,c[21]),pe=f(pe,Ae,ae,te,ie,14,c[22]),te=f(te,pe,Ae,ae,O,20,c[23]),ae=f(ae,te,pe,Ae,U,5,c[24]),Ae=f(Ae,ae,te,pe,X,9,c[25]),pe=f(pe,Ae,ae,te,L,14,c[26]),te=f(te,pe,Ae,ae,Q,20,c[27]),ae=f(ae,te,pe,Ae,$,5,c[28]),Ae=f(Ae,ae,te,pe,B,9,c[29]),pe=f(pe,Ae,ae,te,z,14,c[30]),te=f(te,pe,Ae,ae,j,20,c[31]),ae=p(ae,te,pe,Ae,Y,4,c[32]),Ae=p(Ae,ae,te,pe,Q,11,c[33]),pe=p(pe,Ae,ae,te,J,16,c[34]),te=p(te,pe,Ae,ae,X,23,c[35]),ae=p(ae,te,pe,Ae,R,4,c[36]),Ae=p(Ae,ae,te,pe,O,11,c[37]),pe=p(pe,Ae,ae,te,z,16,c[38]),te=p(te,pe,Ae,ae,Z,23,c[39]),ae=p(ae,te,pe,Ae,$,4,c[40]),Ae=p(Ae,ae,te,pe,S,11,c[41]),pe=p(pe,Ae,ae,te,L,16,c[42]),te=p(te,pe,Ae,ae,V,23,c[43]),ae=p(ae,te,pe,Ae,U,4,c[44]),Ae=p(Ae,ae,te,pe,j,11,c[45]),pe=p(pe,Ae,ae,te,ie,16,c[46]),te=p(te,pe,Ae,ae,B,23,c[47]),ae=m(ae,te,pe,Ae,S,6,c[48]),Ae=m(Ae,ae,te,pe,z,10,c[49]),pe=m(pe,Ae,ae,te,X,15,c[50]),te=m(te,pe,Ae,ae,Y,21,c[51]),ae=m(ae,te,pe,Ae,j,6,c[52]),Ae=m(Ae,ae,te,pe,L,10,c[53]),pe=m(pe,Ae,ae,te,Z,15,c[54]),te=m(te,pe,Ae,ae,R,21,c[55]),ae=m(ae,te,pe,Ae,Q,6,c[56]),Ae=m(Ae,ae,te,pe,ie,10,c[57]),pe=m(pe,Ae,ae,te,V,15,c[58]),te=m(te,pe,Ae,ae,$,21,c[59]),ae=m(ae,te,pe,Ae,O,6,c[60]),Ae=m(Ae,ae,te,pe,J,10,c[61]),pe=m(pe,Ae,ae,te,B,15,c[62]),te=m(te,pe,Ae,ae,U,21,c[63]),b[0]=b[0]+ae|0,b[1]=b[1]+te|0,b[2]=b[2]+pe|0,b[3]=b[3]+Ae|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,A=this._nDataBytes*8,y=h.sigBytes*8;g[y>>>5]|=128<<24-y%32;var E=e.floor(A/4294967296),b=A;g[(y+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var S=this._hash,R=S.words,B=0;B<4;B++){var L=R[B];R[B]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return S},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,A,y,E,b,S){var R=h+(g&A|~g&y)+E+S;return(R<<b|R>>>32-b)+g}s(u,"FF");function f(h,g,A,y,E,b,S){var R=h+(g&y|A&~y)+E+S;return(R<<b|R>>>32-b)+g}s(f,"GG");function p(h,g,A,y,E,b,S){var R=h+(g^A^y)+E+S;return(R<<b|R>>>32-b)+g}s(p,"HH");function m(h,g,A,y,E,b,S){var R=h+(A^(g|~y))+E+S;return(R<<b|R>>>32-b)+g}s(m,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var pfe=H((BW,KDe)=>{d();(function(t,e){typeof BW=="object"?KDe.exports=BW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(BW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var f=this._hash.words,p=f[0],m=f[1],h=f[2],g=f[3],A=f[4],y=0;y<80;y++){if(y<16)a[y]=l[u+y]|0;else{var E=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=E<<1|E>>>31}var b=(p<<5|p>>>27)+A+a[y];y<20?b+=(m&h|~m&g)+1518500249:y<40?b+=(m^h^g)+1859775393:y<60?b+=(m&h|m&g|h&g)-1894007588:b+=(m^h^g)-899497514,A=g,g=h,h=m<<30|m>>>2,m=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+h|0,f[3]=f[3]+g|0,f[4]=f[4]+A|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,f=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(p+64>>>9<<4)+15]=f,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var MW=H((NW,YDe)=>{d();(function(t,e){typeof NW=="object"?YDe.exports=NW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(NW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(A){for(var y=e.sqrt(A),E=2;E<=y;E++)if(!(A%E))return!1;return!0}s(p,"isPrime");function m(A){return(A-(A|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(c[g]=m(e.pow(h,1/2))),l[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],f=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],A=h[1],y=h[2],E=h[3],b=h[4],S=h[5],R=h[6],B=h[7],L=0;L<64;L++){if(L<16)u[L]=p[m+L]|0;else{var O=u[L-15],Y=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,V=u[L-2],z=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;u[L]=Y+u[L-7]+z+u[L-16]}var Q=b&S^~b&R,U=g&A^g&y^A&y,Z=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),J=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),j=B+J+Q+l[L]+u[L],$=Z+U;B=R,R=S,S=b,b=E+j|0,E=y,y=A,A=g,g=j+$|0}h[0]=h[0]+g|0,h[1]=h[1]+A|0,h[2]=h[2]+y|0,h[3]=h[3]+E|0,h[4]=h[4]+b|0,h[5]=h[5]+S|0,h[6]=h[6]+R|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),t.SHA256})});var XDe=H((LW,JDe)=>{d();(function(t,e,r){typeof LW=="object"?JDe.exports=LW=e(oo(),MW()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(LW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var mfe=H((FW,ZDe)=>{d();(function(t,e,r){typeof FW=="object"?ZDe.exports=FW=e(oo(),S9()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(FW,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,A=g[0],y=g[1],E=g[2],b=g[3],S=g[4],R=g[5],B=g[6],L=g[7],O=A.high,Y=A.low,V=y.high,z=y.low,Q=E.high,U=E.low,Z=b.high,J=b.low,j=S.high,$=S.low,X=R.high,ie=R.low,ae=B.high,te=B.low,pe=L.high,Ae=L.low,Oe=O,Te=Y,Je=V,Fe=z,lt=Q,_t=U,xt=Z,ht=J,ue=j,Ue=$,ye=X,$e=ie,se=ae,le=te,qe=pe,Be=Ae,Ee=0;Ee<80;Ee++){var je,tt,pt=f[Ee];if(Ee<16)tt=pt.high=m[h+Ee*2]|0,je=pt.low=m[h+Ee*2+1]|0;else{var Ft=f[Ee-15],Jt=Ft.high,Qt=Ft.low,Vr=(Jt>>>1|Qt<<31)^(Jt>>>8|Qt<<24)^Jt>>>7,Pr=(Qt>>>1|Jt<<31)^(Qt>>>8|Jt<<24)^(Qt>>>7|Jt<<25),ln=f[Ee-2],ve=ln.high,Ge=ln.low,ft=(ve>>>19|Ge<<13)^(ve<<3|Ge>>>29)^ve>>>6,Tt=(Ge>>>19|ve<<13)^(Ge<<3|ve>>>29)^(Ge>>>6|ve<<26),or=f[Ee-7],Zt=or.high,Ir=or.low,ur=f[Ee-16],rr=ur.high,lr=ur.low;je=Pr+Ir,tt=Vr+Zt+(je>>>0<Pr>>>0?1:0),je=je+Tt,tt=tt+ft+(je>>>0<Tt>>>0?1:0),je=je+lr,tt=tt+rr+(je>>>0<lr>>>0?1:0),pt.high=tt,pt.low=je}var nr=ue&ye^~ue&se,Br=Ue&$e^~Ue&le,zr=Oe&Je^Oe&lt^Je&lt,sn=Te&Fe^Te&_t^Fe&_t,Cn=(Oe>>>28|Te<<4)^(Oe<<30|Te>>>2)^(Oe<<25|Te>>>7),ni=(Te>>>28|Oe<<4)^(Te<<30|Oe>>>2)^(Te<<25|Oe>>>7),_n=(ue>>>14|Ue<<18)^(ue>>>18|Ue<<14)^(ue<<23|Ue>>>9),ei=(Ue>>>14|ue<<18)^(Ue>>>18|ue<<14)^(Ue<<23|ue>>>9),an=u[Ee],Yn=an.high,Pe=an.low,K=Be+ei,Ce=qe+_n+(K>>>0<Be>>>0?1:0),K=K+Br,Ce=Ce+nr+(K>>>0<Br>>>0?1:0),K=K+Pe,Ce=Ce+Yn+(K>>>0<Pe>>>0?1:0),K=K+je,Ce=Ce+tt+(K>>>0<je>>>0?1:0),Ie=ni+sn,F=Cn+zr+(Ie>>>0<ni>>>0?1:0);qe=se,Be=le,se=ye,le=$e,ye=ue,$e=Ue,Ue=ht+K|0,ue=xt+Ce+(Ue>>>0<ht>>>0?1:0)|0,xt=lt,ht=_t,lt=Je,_t=Fe,Je=Oe,Fe=Te,Te=K+Ie|0,Oe=Ce+F+(Te>>>0<K>>>0?1:0)|0}Y=A.low=Y+Te,A.high=O+Oe+(Y>>>0<Te>>>0?1:0),z=y.low=z+Fe,y.high=V+Je+(z>>>0<Fe>>>0?1:0),U=E.low=U+_t,E.high=Q+lt+(U>>>0<_t>>>0?1:0),J=b.low=J+ht,b.high=Z+xt+(J>>>0<ht>>>0?1:0),$=S.low=$+Ue,S.high=j+ue+($>>>0<Ue>>>0?1:0),ie=R.low=ie+$e,R.high=X+ye+(ie>>>0<$e>>>0?1:0),te=B.low=te+le,B.high=ae+se+(te>>>0<le>>>0?1:0),Ae=L.low=Ae+Be,L.high=pe+qe+(Ae>>>0<Be>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,A=m.sigBytes*8;h[A>>>5]|=128<<24-A%32,h[(A+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(A+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var y=this._hash.toX32();return y},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var tBe=H((OW,eBe)=>{d();(function(t,e,r){typeof OW=="object"?eBe.exports=OW=e(oo(),S9(),mfe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(OW,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var nBe=H((QW,rBe)=>{d();(function(t,e,r){typeof QW=="object"?rBe.exports=QW=e(oo(),S9()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(QW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],f=[],p=[];(function(){for(var g=1,A=0,y=0;y<24;y++){u[g+5*A]=(y+1)*(y+2)/2%64;var E=A%5,b=(2*g+3*A)%5;g=E,A=b}for(var g=0;g<5;g++)for(var A=0;A<5;A++)f[g+5*A]=A+(2*g+3*A)%5*5;for(var S=1,R=0;R<24;R++){for(var B=0,L=0,O=0;O<7;O++){if(S&1){var Y=(1<<O)-1;Y<32?L^=1<<Y:B^=1<<Y-32}S&128?S=S<<1^113:S<<=1}p[R]=c.create(B,L)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=c.create()})();var h=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],A=0;A<25;A++)g[A]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,A){for(var y=this._state,E=this.blockSize/2,b=0;b<E;b++){var S=g[A+2*b],R=g[A+2*b+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var B=y[b];B.high^=R,B.low^=S}for(var L=0;L<24;L++){for(var O=0;O<5;O++){for(var Y=0,V=0,z=0;z<5;z++){var B=y[O+5*z];Y^=B.high,V^=B.low}var Q=m[O];Q.high=Y,Q.low=V}for(var O=0;O<5;O++)for(var U=m[(O+4)%5],Z=m[(O+1)%5],J=Z.high,j=Z.low,Y=U.high^(J<<1|j>>>31),V=U.low^(j<<1|J>>>31),z=0;z<5;z++){var B=y[O+5*z];B.high^=Y,B.low^=V}for(var $=1;$<25;$++){var Y,V,B=y[$],X=B.high,ie=B.low,ae=u[$];ae<32?(Y=X<<ae|ie>>>32-ae,V=ie<<ae|X>>>32-ae):(Y=ie<<ae-32|X>>>64-ae,V=X<<ae-32|ie>>>64-ae);var te=m[f[$]];te.high=Y,te.low=V}var pe=m[0],Ae=y[0];pe.high=Ae.high,pe.low=Ae.low;for(var O=0;O<5;O++)for(var z=0;z<5;z++){var $=O+5*z,B=y[$],Oe=m[$],Te=m[(O+1)%5+5*z],Je=m[(O+2)%5+5*z];B.high=Oe.high^~Te.high&Je.high,B.low=Oe.low^~Te.low&Je.low}var B=y[0],Fe=p[L];B.high^=Fe.high,B.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,A=g.words,y=this._nDataBytes*8,E=g.sigBytes*8,b=this.blockSize*32;A[E>>>5]|=1<<24-E%32,A[(e.ceil((E+1)/b)*b>>>5)-1]|=128,g.sigBytes=A.length*4,this._process();for(var S=this._state,R=this.cfg.outputLength/8,B=R/8,L=[],O=0;O<B;O++){var Y=S[O],V=Y.high,z=Y.low;V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,L.push(z),L.push(V)}return new i.init(L,R)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),A=g._state=this._state.slice(0),y=0;y<25;y++)A[y]=A[y].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var oBe=H((UW,iBe)=>{d();(function(t,e){typeof UW=="object"?iBe.exports=UW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(UW,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(R,B){for(var L=0;L<16;L++){var O=B+L,Y=R[O];R[O]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}var V=this._hash.words,z=p.words,Q=m.words,U=c.words,Z=l.words,J=u.words,j=f.words,$,X,ie,ae,te,pe,Ae,Oe,Te,Je;pe=$=V[0],Ae=X=V[1],Oe=ie=V[2],Te=ae=V[3],Je=te=V[4];for(var Fe,L=0;L<80;L+=1)Fe=$+R[B+U[L]]|0,L<16?Fe+=g(X,ie,ae)+z[0]:L<32?Fe+=A(X,ie,ae)+z[1]:L<48?Fe+=y(X,ie,ae)+z[2]:L<64?Fe+=E(X,ie,ae)+z[3]:Fe+=b(X,ie,ae)+z[4],Fe=Fe|0,Fe=S(Fe,J[L]),Fe=Fe+te|0,$=te,te=ae,ae=S(ie,10),ie=X,X=Fe,Fe=pe+R[B+Z[L]]|0,L<16?Fe+=b(Ae,Oe,Te)+Q[0]:L<32?Fe+=E(Ae,Oe,Te)+Q[1]:L<48?Fe+=y(Ae,Oe,Te)+Q[2]:L<64?Fe+=A(Ae,Oe,Te)+Q[3]:Fe+=g(Ae,Oe,Te)+Q[4],Fe=Fe|0,Fe=S(Fe,j[L]),Fe=Fe+Je|0,pe=Je,Je=Te,Te=S(Oe,10),Oe=Ae,Ae=Fe;Fe=V[1]+ie+Te|0,V[1]=V[2]+ae+Je|0,V[2]=V[3]+te+pe|0,V[3]=V[4]+$+Ae|0,V[4]=V[0]+X+Oe|0,V[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var R=this._data,B=R.words,L=this._nDataBytes*8,O=R.sigBytes*8;B[O>>>5]|=128<<24-O%32,B[(O+64>>>9<<4)+14]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,R.sigBytes=(B.length+1)*4,this._process();for(var Y=this._hash,V=Y.words,z=0;z<5;z++){var Q=V[z];V[z]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360}return Y},"_doFinalize"),clone:s(function(){var R=o.clone.call(this);return R._hash=this._hash.clone(),R},"clone")});function g(R,B,L){return R^B^L}s(g,"f1");function A(R,B,L){return R&B|~R&L}s(A,"f2");function y(R,B,L){return(R|~B)^L}s(y,"f3");function E(R,B,L){return R&L|B&~L}s(E,"f4");function b(R,B,L){return R^(B|~L)}s(b,"f5");function S(R,B){return R<<B|R>>>32-B}s(S,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var HW=H((qW,sBe)=>{d();(function(t,e){typeof qW=="object"?sBe.exports=qW=e(oo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(qW,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var f=l.blockSize,p=f*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,A=h.words,y=0;y<f;y++)g[y]^=1549556828,A[y]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,f=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(f));return p},"finalize")})})()})});var cBe=H(($W,aBe)=>{d();(function(t,e,r){typeof $W=="object"?aBe.exports=$W=e(oo(),MW(),HW()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})($W,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,f){for(var p=this.cfg,m=c.create(p.hasher,u),h=i.create(),g=i.create([1]),A=h.words,y=g.words,E=p.keySize,b=p.iterations;A.length<E;){var S=m.update(f).finalize(g);m.reset();for(var R=S.words,B=R.length,L=S,O=1;O<b;O++){L=m.finalize(L),m.reset();for(var Y=L.words,V=0;V<B;V++)R[V]^=Y[V]}h.concat(S),y[0]++}return h.sigBytes=E*4,h},"compute")});e.PBKDF2=function(u,f,p){return l.create(p).compute(u,f)}}(),t.PBKDF2})});var Pv=H((WW,lBe)=>{d();(function(t,e,r){typeof WW=="object"?lBe.exports=WW=e(oo(),pfe(),HW()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(WW,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var f,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,A=p.keySize,y=p.iterations;g.length<A;){f&&m.update(f),f=m.update(l).finalize(u),m.reset();for(var E=1;E<y;E++)f=m.finalize(f),m.reset();h.concat(f)}return h.sigBytes=A*4,h},"compute")});e.EvpKDF=function(l,u,f){return c.create(f).compute(l,u)}}(),t.EvpKDF})});var _l=H((jW,uBe)=>{d();(function(t,e,r){typeof jW=="object"?uBe.exports=jW=e(oo(),Pv()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(jW,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,f=r.algo,p=f.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(Q,U){return this.create(this._ENC_XFORM_MODE,Q,U)},"createEncryptor"),createDecryptor:s(function(Q,U){return this.create(this._DEC_XFORM_MODE,Q,U)},"createDecryptor"),init:s(function(Q,U,Z){this.cfg=this.cfg.extend(Z),this._xformMode=Q,this._key=U,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(Q){return this._append(Q),this._process()},"process"),finalize:s(function(Q){Q&&this._append(Q);var U=this._doFinalize();return U},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Q(U){return typeof U=="string"?z:O}return s(Q,"selectCipherStrategy"),function(U){return{encrypt:s(function(Z,J,j){return Q(J).encrypt(U,Z,J,j)},"encrypt"),decrypt:s(function(Z,J,j){return Q(J).decrypt(U,Z,J,j)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var Q=this._process(!0);return Q},"_doFinalize"),blockSize:1}),g=r.mode={},A=n.BlockCipherMode=i.extend({createEncryptor:s(function(Q,U){return this.Encryptor.create(Q,U)},"createEncryptor"),createDecryptor:s(function(Q,U){return this.Decryptor.create(Q,U)},"createDecryptor"),init:s(function(Q,U){this._cipher=Q,this._iv=U},"init")}),y=g.CBC=function(){var Q=A.extend();Q.Encryptor=Q.extend({processBlock:s(function(Z,J){var j=this._cipher,$=j.blockSize;U.call(this,Z,J,$),j.encryptBlock(Z,J),this._prevBlock=Z.slice(J,J+$)},"processBlock")}),Q.Decryptor=Q.extend({processBlock:s(function(Z,J){var j=this._cipher,$=j.blockSize,X=Z.slice(J,J+$);j.decryptBlock(Z,J),U.call(this,Z,J,$),this._prevBlock=X},"processBlock")});function U(Z,J,j){var $,X=this._iv;X?($=X,this._iv=e):$=this._prevBlock;for(var ie=0;ie<j;ie++)Z[J+ie]^=$[ie]}return s(U,"xorBlock"),Q}(),E=r.pad={},b=E.Pkcs7={pad:s(function(Q,U){for(var Z=U*4,J=Z-Q.sigBytes%Z,j=J<<24|J<<16|J<<8|J,$=[],X=0;X<J;X+=4)$.push(j);var ie=o.create($,J);Q.concat(ie)},"pad"),unpad:s(function(Q){var U=Q.words[Q.sigBytes-1>>>2]&255;Q.sigBytes-=U},"unpad")},S=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:y,padding:b}),reset:s(function(){var Q;m.reset.call(this);var U=this.cfg,Z=U.iv,J=U.mode;this._xformMode==this._ENC_XFORM_MODE?Q=J.createEncryptor:(Q=J.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Q?this._mode.init(this,Z&&Z.words):(this._mode=Q.call(J,this,Z&&Z.words),this._mode.__creator=Q)},"reset"),_doProcessBlock:s(function(Q,U){this._mode.processBlock(Q,U)},"_doProcessBlock"),_doFinalize:s(function(){var Q,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),Q=this._process(!0)):(Q=this._process(!0),U.unpad(Q)),Q},"_doFinalize"),blockSize:128/32}),R=n.CipherParams=i.extend({init:s(function(Q){this.mixIn(Q)},"init"),toString:s(function(Q){return(Q||this.formatter).stringify(this)},"toString")}),B=r.format={},L=B.OpenSSL={stringify:s(function(Q){var U,Z=Q.ciphertext,J=Q.salt;return J?U=o.create([1398893684,1701076831]).concat(J).concat(Z):U=Z,U.toString(u)},"stringify"),parse:s(function(Q){var U,Z=u.parse(Q),J=Z.words;return J[0]==1398893684&&J[1]==1701076831&&(U=o.create(J.slice(2,4)),J.splice(0,4),Z.sigBytes-=16),R.create({ciphertext:Z,salt:U})},"parse")},O=n.SerializableCipher=i.extend({cfg:i.extend({format:L}),encrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J);var j=Q.createEncryptor(Z,J),$=j.finalize(U),X=j.cfg;return R.create({ciphertext:$,key:Z,iv:X.iv,algorithm:Q,mode:X.mode,padding:X.padding,blockSize:Q.blockSize,formatter:J.format})},"encrypt"),decrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J),U=this._parse(U,J.format);var j=Q.createDecryptor(Z,J).finalize(U.ciphertext);return j},"decrypt"),_parse:s(function(Q,U){return typeof Q=="string"?U.parse(Q,this):Q},"_parse")}),Y=r.kdf={},V=Y.OpenSSL={execute:s(function(Q,U,Z,J,j){if(J||(J=o.random(64/8)),j)var $=p.create({keySize:U+Z,hasher:j}).compute(Q,J);else var $=p.create({keySize:U+Z}).compute(Q,J);var X=o.create($.words.slice(U),Z*4);return $.sigBytes=U*4,R.create({key:$,iv:X,salt:J})},"execute")},z=n.PasswordBasedCipher=O.extend({cfg:O.cfg.extend({kdf:V}),encrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J);var j=J.kdf.execute(Z,Q.keySize,Q.ivSize,J.salt,J.hasher);J.iv=j.iv;var $=O.encrypt.call(this,Q,U,j.key,J);return $.mixIn(j),$},"encrypt"),decrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J),U=this._parse(U,J.format);var j=J.kdf.execute(Z,Q.keySize,Q.ivSize,U.salt,J.hasher);J.iv=j.iv;var $=O.decrypt.call(this,Q,U,j.key,J);return $},"decrypt")})}()})});var fBe=H((GW,dBe)=>{d();(function(t,e,r){typeof GW=="object"?dBe.exports=GW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(GW,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var mBe=H((VW,pBe)=>{d();(function(t,e,r){typeof VW=="object"?pBe.exports=VW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(VW,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var f=0;f<a;f++)n[i+f]^=u[f]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var gBe=H((zW,hBe)=>{d();(function(t,e,r){typeof zW=="object"?hBe.exports=zW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(zW,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),n(f);var p=f.slice(0);c.encryptBlock(p,0);for(var m=0;m<l;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var yBe=H((KW,ABe)=>{d();(function(t,e,r){typeof KW=="object"?ABe.exports=KW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(KW,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var vBe=H((YW,CBe)=>{d();(function(t,e,r){typeof YW=="object"?CBe.exports=YW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(YW,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var EBe=H((JW,xBe)=>{d();(function(t,e,r){typeof JW=="object"?xBe.exports=JW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(JW,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var IBe=H((XW,bBe)=>{d();(function(t,e,r){typeof XW=="object"?bBe.exports=XW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(XW,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var wBe=H((ZW,TBe)=>{d();(function(t,e,r){typeof ZW=="object"?TBe.exports=ZW=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(ZW,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var _Be=H((ej,SBe)=>{d();(function(t,e,r){typeof ej=="object"?SBe.exports=ej=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(ej,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var kBe=H((tj,RBe)=>{d();(function(t,e,r){typeof tj=="object"?RBe.exports=tj=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(tj,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var DBe=H((rj,PBe)=>{d();(function(t,e,r){typeof rj=="object"?PBe.exports=rj=e(oo(),_l()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(rj,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var f=a.parse(u);return i.create({ciphertext:f})},"parse")}}(),t.format.Hex})});var NBe=H((nj,BBe)=>{d();(function(t,e,r){typeof nj=="object"?BBe.exports=nj=e(oo(),hI(),gI(),Pv(),_l()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(nj,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],f=[],p=[],m=[],h=[],g=[];(function(){for(var E=[],b=0;b<256;b++)b<128?E[b]=b<<1:E[b]=b<<1^283;for(var S=0,R=0,b=0;b<256;b++){var B=R^R<<1^R<<2^R<<3^R<<4;B=B>>>8^B&255^99,o[S]=B,a[B]=S;var L=E[S],O=E[L],Y=E[O],V=E[B]*257^B*16843008;c[S]=V<<24|V>>>8,l[S]=V<<16|V>>>16,u[S]=V<<8|V>>>24,f[S]=V;var V=Y*16843009^O*65537^L*257^S*16843008;p[B]=V<<24|V>>>8,m[B]=V<<16|V>>>16,h[B]=V<<8|V>>>24,g[B]=V,S?(S=L^E[E[E[Y^L]]],R^=E[E[R]]):S=R=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=n.extend({_doReset:s(function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,S=b.words,R=b.sigBytes/4,B=this._nRounds=R+6,L=(B+1)*4,O=this._keySchedule=[],Y=0;Y<L;Y++)Y<R?O[Y]=S[Y]:(E=O[Y-1],Y%R?R>6&&Y%R==4&&(E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255]):(E=E<<8|E>>>24,E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255],E^=A[Y/R|0]<<24),O[Y]=O[Y-R]^E);for(var V=this._invKeySchedule=[],z=0;z<L;z++){var Y=L-z;if(z%4)var E=O[Y];else var E=O[Y-4];z<4||Y<=4?V[z]=E:V[z]=p[o[E>>>24]]^m[o[E>>>16&255]]^h[o[E>>>8&255]]^g[o[E&255]]}}},"_doReset"),encryptBlock:s(function(E,b){this._doCryptBlock(E,b,this._keySchedule,c,l,u,f,o)},"encryptBlock"),decryptBlock:s(function(E,b){var S=E[b+1];E[b+1]=E[b+3],E[b+3]=S,this._doCryptBlock(E,b,this._invKeySchedule,p,m,h,g,a);var S=E[b+1];E[b+1]=E[b+3],E[b+3]=S},"decryptBlock"),_doCryptBlock:s(function(E,b,S,R,B,L,O,Y){for(var V=this._nRounds,z=E[b]^S[0],Q=E[b+1]^S[1],U=E[b+2]^S[2],Z=E[b+3]^S[3],J=4,j=1;j<V;j++){var $=R[z>>>24]^B[Q>>>16&255]^L[U>>>8&255]^O[Z&255]^S[J++],X=R[Q>>>24]^B[U>>>16&255]^L[Z>>>8&255]^O[z&255]^S[J++],ie=R[U>>>24]^B[Z>>>16&255]^L[z>>>8&255]^O[Q&255]^S[J++],ae=R[Z>>>24]^B[z>>>16&255]^L[Q>>>8&255]^O[U&255]^S[J++];z=$,Q=X,U=ie,Z=ae}var $=(Y[z>>>24]<<24|Y[Q>>>16&255]<<16|Y[U>>>8&255]<<8|Y[Z&255])^S[J++],X=(Y[Q>>>24]<<24|Y[U>>>16&255]<<16|Y[Z>>>8&255]<<8|Y[z&255])^S[J++],ie=(Y[U>>>24]<<24|Y[Z>>>16&255]<<16|Y[z>>>8&255]<<8|Y[Q&255])^S[J++],ae=(Y[Z>>>24]<<24|Y[z>>>16&255]<<16|Y[Q>>>8&255]<<8|Y[U&255])^S[J++];E[b]=$,E[b+1]=X,E[b+2]=ie,E[b+3]=ae},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(y)}(),t.AES})});var LBe=H((ij,MBe)=>{d();(function(t,e,r){typeof ij=="object"?MBe.exports=ij=e(oo(),hI(),gI(),Pv(),_l()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(ij,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var A=this._key,y=A.words,E=[],b=0;b<56;b++){var S=a[b]-1;E[b]=y[S>>>5]>>>31-S%32&1}for(var R=this._subKeys=[],B=0;B<16;B++){for(var L=R[B]=[],O=l[B],b=0;b<24;b++)L[b/6|0]|=E[(c[b]-1+O)%28]<<31-b%6,L[4+(b/6|0)]|=E[28+(c[b+24]-1+O)%28]<<31-b%6;L[0]=L[0]<<1|L[0]>>>31;for(var b=1;b<7;b++)L[b]=L[b]>>>(b-1)*4+3;L[7]=L[7]<<5|L[7]>>>27}for(var Y=this._invSubKeys=[],b=0;b<16;b++)Y[b]=R[15-b]},"_doReset"),encryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._subKeys)},"encryptBlock"),decryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(A,y,E){this._lBlock=A[y],this._rBlock=A[y+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var b=0;b<16;b++){for(var S=E[b],R=this._lBlock,B=this._rBlock,L=0,O=0;O<8;O++)L|=u[O][((B^S[O])&f[O])>>>0];this._lBlock=B,this._rBlock=R^L}var Y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Y,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),A[y]=this._lBlock,A[y+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(A,y){var E=(this._lBlock>>>A^this._rBlock)&y;this._rBlock^=E,this._lBlock^=E<<A}s(m,"exchangeLR");function h(A,y){var E=(this._rBlock>>>A^this._lBlock)&y;this._lBlock^=E,this._rBlock^=E<<A}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var A=this._key,y=A.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=y.slice(0,2),b=y.length<4?y.slice(0,2):y.slice(2,4),S=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=p.createEncryptor(n.create(E)),this._des2=p.createEncryptor(n.create(b)),this._des3=p.createEncryptor(n.create(S))},"_doReset"),encryptBlock:s(function(A,y){this._des1.encryptBlock(A,y),this._des2.decryptBlock(A,y),this._des3.encryptBlock(A,y)},"encryptBlock"),decryptBlock:s(function(A,y){this._des3.decryptBlock(A,y),this._des2.encryptBlock(A,y),this._des1.decryptBlock(A,y)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var OBe=H((oj,FBe)=>{d();(function(t,e,r){typeof oj=="object"?FBe.exports=oj=e(oo(),hI(),gI(),Pv(),_l()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(oj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,f=l.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%f,A=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+A)%256;var y=p[m];p[m]=p[h],p[h]=y}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,f=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,f=(f+l[u])%256;var h=l[u];l[u]=l[f],l[f]=h,p|=l[(l[u]+l[f])%256]<<24-m*8}return this._i=u,this._j=f,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var UBe=H((sj,QBe)=>{d();(function(t,e,r){typeof sj=="object"?QBe.exports=sj=e(oo(),hI(),gI(),Pv(),_l()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(sj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var h=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=b>>>16|S&4294901760,B=S<<16|b&65535;g[0]^=b,g[1]^=R,g[2]^=S,g[3]^=B,g[4]^=b,g[5]^=R,g[6]^=S,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var HBe=H((aj,qBe)=>{d();(function(t,e,r){typeof aj=="object"?qBe.exports=aj=e(oo(),hI(),gI(),Pv(),_l()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(aj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],h=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=b>>>16|S&4294901760,B=S<<16|b&65535;h[0]^=b,h[1]^=R,h[2]^=S,h[3]^=B,h[4]^=b,h[5]^=R,h[6]^=S,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var WBe=H((cj,$Be)=>{d();(function(t,e,r){typeof cj=="object"?$Be.exports=cj=e(oo(),hI(),gI(),Pv(),_l()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(cj,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,A){let y=A>>24&255,E=A>>16&255,b=A>>8&255,S=A&255,R=g.sbox[0][y]+g.sbox[1][E];return R=R^g.sbox[2][b],R=R+g.sbox[3][S],R}s(u,"F");function f(g,A,y){let E=A,b=y,S;for(let R=0;R<o;++R)E=E^g.pbox[R],b=u(g,E)^b,S=E,E=b,b=S;return S=E,E=b,b=S,b=b^g.pbox[o],E=E^g.pbox[o+1],{left:E,right:b}}s(f,"BlowFish_Encrypt");function p(g,A,y){let E=A,b=y,S;for(let R=o+1;R>1;--R)E=E^g.pbox[R],b=u(g,E)^b,S=E,E=b,b=S;return S=E,E=b,b=S,b=b^g.pbox[1],E=E^g.pbox[0],{left:E,right:b}}s(p,"BlowFish_Decrypt");function m(g,A,y){for(let B=0;B<4;B++){g.sbox[B]=[];for(let L=0;L<256;L++)g.sbox[B][L]=c[B][L]}let E=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^A[E],E++,E>=y&&(E=0);let b=0,S=0,R=0;for(let B=0;B<o+2;B+=2)R=f(g,b,S),b=R.left,S=R.right,g.pbox[B]=b,g.pbox[B+1]=S;for(let B=0;B<4;B++)for(let L=0;L<256;L+=2)R=f(g,b,S),b=R.left,S=R.right,g.sbox[B][L]=b,g.sbox[B][L+1]=S;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,A=g.words,y=g.sigBytes/4;m(l,A,y)}},"_doReset"),encryptBlock:s(function(g,A){var y=f(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"encryptBlock"),decryptBlock:s(function(g,A){var y=p(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var AI=H((lj,jBe)=>{d();(function(t,e,r){typeof lj=="object"?jBe.exports=lj=e(oo(),S9(),HDe(),WDe(),hI(),VDe(),gI(),pfe(),MW(),XDe(),mfe(),tBe(),nBe(),oBe(),HW(),cBe(),Pv(),_l(),fBe(),mBe(),gBe(),yBe(),vBe(),EBe(),IBe(),wBe(),_Be(),kBe(),DBe(),NBe(),LBe(),OBe(),UBe(),HBe(),WBe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(lj,function(t){return t})});var rD=H(Sd=>{"use strict";d();Object.defineProperty(Sd,"__esModule",{value:!0});Sd.stringArray=Sd.array=Sd.func=Sd.error=Sd.number=Sd.string=Sd.boolean=void 0;function RPt(t){return t===!0||t===!1}s(RPt,"boolean");Sd.boolean=RPt;function T8e(t){return typeof t=="string"||t instanceof String}s(T8e,"string");Sd.string=T8e;function kPt(t){return typeof t=="number"||t instanceof Number}s(kPt,"number");Sd.number=kPt;function PPt(t){return t instanceof Error}s(PPt,"error");Sd.error=PPt;function DPt(t){return typeof t=="function"}s(DPt,"func");Sd.func=DPt;function w8e(t){return Array.isArray(t)}s(w8e,"array");Sd.array=w8e;function BPt(t){return w8e(t)&&t.every(e=>T8e(e))}s(BPt,"stringArray");Sd.stringArray=BPt});var U0e=H(dn=>{"use strict";d();Object.defineProperty(dn,"__esModule",{value:!0});dn.Message=dn.NotificationType9=dn.NotificationType8=dn.NotificationType7=dn.NotificationType6=dn.NotificationType5=dn.NotificationType4=dn.NotificationType3=dn.NotificationType2=dn.NotificationType1=dn.NotificationType0=dn.NotificationType=dn.RequestType9=dn.RequestType8=dn.RequestType7=dn.RequestType6=dn.RequestType5=dn.RequestType4=dn.RequestType3=dn.RequestType2=dn.RequestType1=dn.RequestType=dn.RequestType0=dn.AbstractMessageSignature=dn.ParameterStructures=dn.ResponseError=dn.ErrorCodes=void 0;var Y_=rD(),g0e;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(g0e||(dn.ErrorCodes=g0e={}));var A0e=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=Y_.number(e)?e:g0e.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};dn.ResponseError=A0e;var o0=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};dn.ParameterStructures=o0;o0.auto=new o0("auto");o0.byPosition=new o0("byPosition");o0.byName=new o0("byName");var Zs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return o0.auto}};dn.AbstractMessageSignature=Zs;var y0e=class extends Zs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};dn.RequestType0=y0e;var C0e=class extends Zs{static{s(this,"RequestType")}constructor(e,r=o0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.RequestType=C0e;var v0e=class extends Zs{static{s(this,"RequestType1")}constructor(e,r=o0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.RequestType1=v0e;var x0e=class extends Zs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};dn.RequestType2=x0e;var E0e=class extends Zs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};dn.RequestType3=E0e;var b0e=class extends Zs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};dn.RequestType4=b0e;var I0e=class extends Zs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};dn.RequestType5=I0e;var T0e=class extends Zs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};dn.RequestType6=T0e;var w0e=class extends Zs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};dn.RequestType7=w0e;var S0e=class extends Zs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};dn.RequestType8=S0e;var _0e=class extends Zs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};dn.RequestType9=_0e;var R0e=class extends Zs{static{s(this,"NotificationType")}constructor(e,r=o0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.NotificationType=R0e;var k0e=class extends Zs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};dn.NotificationType0=k0e;var P0e=class extends Zs{static{s(this,"NotificationType1")}constructor(e,r=o0.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};dn.NotificationType1=P0e;var D0e=class extends Zs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};dn.NotificationType2=D0e;var B0e=class extends Zs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};dn.NotificationType3=B0e;var N0e=class extends Zs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};dn.NotificationType4=N0e;var M0e=class extends Zs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};dn.NotificationType5=M0e;var L0e=class extends Zs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};dn.NotificationType6=L0e;var F0e=class extends Zs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};dn.NotificationType7=F0e;var O0e=class extends Zs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};dn.NotificationType8=O0e;var Q0e=class extends Zs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};dn.NotificationType9=Q0e;var S8e;(function(t){function e(i){let o=i;return o&&Y_.string(o.method)&&(Y_.string(o.id)||Y_.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&Y_.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(Y_.string(o.id)||Y_.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(S8e||(dn.Message=S8e={}))});var H0e=H(_I=>{"use strict";d();var _8e;Object.defineProperty(_I,"__esModule",{value:!0});_I.LRUCache=_I.LinkedMap=_I.Touch=void 0;var _d;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(_d||(_I.Touch=_d={}));var Vj=class{static{s(this,"LinkedMap")}constructor(){this[_8e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=_d.None){let n=this._map.get(e);if(n)return r!==_d.None&&this.touch(n,r),n.value}set(e,r,n=_d.None){let i=this._map.get(e);if(i)i.value=r,n!==_d.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case _d.None:this.addItemLast(i);break;case _d.First:this.addItemFirst(i);break;case _d.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(_8e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==_d.First&&r!==_d.Last)){if(r===_d.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===_d.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};_I.LinkedMap=Vj;var q0e=class extends Vj{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=_d.AsNew){return super.get(e,r)}peek(e){return super.get(e,_d.None)}set(e,r){return super.set(e,r,_d.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};_I.LRUCache=q0e});var k8e=H(zj=>{"use strict";d();Object.defineProperty(zj,"__esModule",{value:!0});zj.Disposable=void 0;var R8e;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(R8e||(zj.Disposable=R8e={}))});var RI=H(j0e=>{"use strict";d();Object.defineProperty(j0e,"__esModule",{value:!0});var $0e;function W0e(){if($0e===void 0)throw new Error("No runtime abstraction layer installed");return $0e}s(W0e,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");$0e=r}s(e,"install"),t.install=e})(W0e||(W0e={}));j0e.default=W0e});var iD=H(nD=>{"use strict";d();Object.defineProperty(nD,"__esModule",{value:!0});nD.Emitter=nD.Event=void 0;var NPt=RI(),P8e;(function(t){let e={dispose(){}};t.None=function(){return e}})(P8e||(nD.Event=P8e={}));var G0e=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,NPt.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Kj=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new G0e),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};nD.Emitter=Kj;Kj._noop=function(){}});var Xj=H(oD=>{"use strict";d();Object.defineProperty(oD,"__esModule",{value:!0});oD.CancellationTokenSource=oD.CancellationToken=void 0;var MPt=RI(),LPt=rD(),V0e=iD(),Yj;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:V0e.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:V0e.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||LPt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(Yj||(oD.CancellationToken=Yj={}));var FPt=Object.freeze(function(t,e){let r=(0,MPt.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),Jj=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?FPt:(this._emitter||(this._emitter=new V0e.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},z0e=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new Jj),this._token}cancel(){this._token?this._token.cancel():this._token=Yj.Cancelled}dispose(){this._token?this._token instanceof Jj&&this._token.dispose():this._token=Yj.None}};oD.CancellationTokenSource=z0e});var D8e=H(sD=>{"use strict";d();Object.defineProperty(sD,"__esModule",{value:!0});sD.SharedArrayReceiverStrategy=sD.SharedArraySenderStrategy=void 0;var OPt=Xj(),V9;(function(t){t.Continue=0,t.Cancelled=1})(V9||(V9={}));var K0e=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=V9.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,V9.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};sD.SharedArraySenderStrategy=K0e;var Y0e=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===V9.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},J0e=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new Y0e(e)}cancel(){}dispose(){}},X0e=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new OPt.CancellationTokenSource:new J0e(r)}};sD.SharedArrayReceiverStrategy=X0e});var epe=H(Zj=>{"use strict";d();Object.defineProperty(Zj,"__esModule",{value:!0});Zj.Semaphore=void 0;var QPt=RI(),Z0e=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,QPt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};Zj.Semaphore=Z0e});var N8e=H(kI=>{"use strict";d();Object.defineProperty(kI,"__esModule",{value:!0});kI.ReadableStreamMessageReader=kI.AbstractMessageReader=kI.MessageReader=void 0;var rpe=RI(),aD=rD(),tpe=iD(),UPt=epe(),B8e;(function(t){function e(r){let n=r;return n&&aD.func(n.listen)&&aD.func(n.dispose)&&aD.func(n.onError)&&aD.func(n.onClose)&&aD.func(n.onPartialMessage)}s(e,"is"),t.is=e})(B8e||(kI.MessageReader=B8e={}));var eG=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new tpe.Emitter,this.closeEmitter=new tpe.Emitter,this.partialMessageEmitter=new tpe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${aD.string(e.message)?e.message:"unknown"}`)}};kI.AbstractMessageReader=eG;var npe;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,rpe.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(npe||(npe={}));var ipe=class extends eG{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=npe.fromOptions(r),this.buffer=(0,rpe.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new UPt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,rpe.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};kI.ReadableStreamMessageReader=ipe});var Q8e=H(PI=>{"use strict";d();Object.defineProperty(PI,"__esModule",{value:!0});PI.WriteableStreamMessageWriter=PI.AbstractMessageWriter=PI.MessageWriter=void 0;var M8e=RI(),z9=rD(),qPt=epe(),L8e=iD(),HPt="Content-Length: ",F8e=`\r
`,O8e;(function(t){function e(r){let n=r;return n&&z9.func(n.dispose)&&z9.func(n.onClose)&&z9.func(n.onError)&&z9.func(n.write)}s(e,"is"),t.is=e})(O8e||(PI.MessageWriter=O8e={}));var tG=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new L8e.Emitter,this.closeEmitter=new L8e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${z9.string(e.message)?e.message:"unknown"}`)}};PI.AbstractMessageWriter=tG;var ope;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,M8e.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,M8e.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(ope||(ope={}));var spe=class extends tG{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=ope.fromOptions(r),this.errorCount=0,this.writeSemaphore=new qPt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(HPt,n.byteLength.toString(),F8e),i.push(F8e),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};PI.WriteableStreamMessageWriter=spe});var U8e=H(rG=>{"use strict";d();Object.defineProperty(rG,"__esModule",{value:!0});rG.AbstractMessageBuffer=void 0;var $Pt=13,WPt=10,jPt=`\r
`,ape=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case $Pt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case WPt:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split(jPt);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let f=l[u],p=f.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let m=f.substr(0,p),h=f.substr(p+1).trim();c.set(e?m.toLowerCase():m,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};rG.AbstractMessageBuffer=ape});var j8e=H(pi=>{"use strict";d();Object.defineProperty(pi,"__esModule",{value:!0});pi.createMessageConnection=pi.ConnectionOptions=pi.MessageStrategy=pi.CancellationStrategy=pi.CancellationSenderStrategy=pi.CancellationReceiverStrategy=pi.RequestCancellationReceiverStrategy=pi.IdCancellationReceiverStrategy=pi.ConnectionStrategy=pi.ConnectionError=pi.ConnectionErrors=pi.LogTraceNotification=pi.SetTraceNotification=pi.TraceFormat=pi.TraceValues=pi.Trace=pi.NullLogger=pi.ProgressType=pi.ProgressToken=void 0;var q8e=RI(),Wa=rD(),Un=U0e(),H8e=H0e(),K9=iD(),cpe=Xj(),X9;(function(t){t.type=new Un.NotificationType("$/cancelRequest")})(X9||(X9={}));var lpe;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(lpe||(pi.ProgressToken=lpe={}));var Y9;(function(t){t.type=new Un.NotificationType("$/progress")})(Y9||(Y9={}));var upe=class{static{s(this,"ProgressType")}constructor(){}};pi.ProgressType=upe;var dpe;(function(t){function e(r){return Wa.func(r)}s(e,"is"),t.is=e})(dpe||(dpe={}));pi.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var zo;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(zo||(pi.Trace=zo={}));var $8e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})($8e||(pi.TraceValues=$8e={}));(function(t){function e(n){if(!Wa.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(zo||(pi.Trace=zo={}));var yp;(function(t){t.Text="text",t.JSON="json"})(yp||(pi.TraceFormat=yp={}));(function(t){function e(r){return Wa.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(yp||(pi.TraceFormat=yp={}));var fpe;(function(t){t.type=new Un.NotificationType("$/setTrace")})(fpe||(pi.SetTraceNotification=fpe={}));var nG;(function(t){t.type=new Un.NotificationType("$/logTrace")})(nG||(pi.LogTraceNotification=nG={}));var J9;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(J9||(pi.ConnectionErrors=J9={}));var cD=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};pi.ConnectionError=cD;var ppe;(function(t){function e(r){let n=r;return n&&Wa.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(ppe||(pi.ConnectionStrategy=ppe={}));var iG;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Wa.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Wa.func(n.dispose))}s(e,"is"),t.is=e})(iG||(pi.IdCancellationReceiverStrategy=iG={}));var mpe;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Wa.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Wa.func(n.dispose))}s(e,"is"),t.is=e})(mpe||(pi.RequestCancellationReceiverStrategy=mpe={}));var oG;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new cpe.CancellationTokenSource}});function e(r){return iG.is(r)||mpe.is(r)}s(e,"is"),t.is=e})(oG||(pi.CancellationReceiverStrategy=oG={}));var sG;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(X9.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Wa.func(n.sendCancellation)&&Wa.func(n.cleanup)}s(e,"is"),t.is=e})(sG||(pi.CancellationSenderStrategy=sG={}));var aG;(function(t){t.Message=Object.freeze({receiver:oG.Message,sender:sG.Message});function e(r){let n=r;return n&&oG.is(n.receiver)&&sG.is(n.sender)}s(e,"is"),t.is=e})(aG||(pi.CancellationStrategy=aG={}));var cG;(function(t){function e(r){let n=r;return n&&Wa.func(n.handleMessage)}s(e,"is"),t.is=e})(cG||(pi.MessageStrategy=cG={}));var W8e;(function(t){function e(r){let n=r;return n&&(aG.is(n.cancellationStrategy)||ppe.is(n.connectionStrategy)||cG.is(n.messageStrategy))}s(e,"is"),t.is=e})(W8e||(pi.ConnectionOptions=W8e={}));var aA;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(aA||(aA={}));function GPt(t,e,r,n){let i=r!==void 0?r:pi.NullLogger,o=0,a=0,c=0,l="2.0",u,f=new Map,p,m=new Map,h=new Map,g,A=new H8e.LinkedMap,y=new Map,E=new Set,b=new Map,S=zo.Off,R=yp.Text,B,L=aA.New,O=new K9.Emitter,Y=new K9.Emitter,V=new K9.Emitter,z=new K9.Emitter,Q=new K9.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:aG.Message;function Z(ve){if(ve===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+ve.toString()}s(Z,"createRequestQueueKey");function J(ve){return ve===null?"res-unknown-"+(++c).toString():"res-"+ve.toString()}s(J,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function $(ve,Ge){Un.Message.isRequest(Ge)?ve.set(Z(Ge.id),Ge):Un.Message.isResponse(Ge)?ve.set(J(Ge.id),Ge):ve.set(j(),Ge)}s($,"addMessageToQueue");function X(ve){}s(X,"cancelUndispatched");function ie(){return L===aA.Listening}s(ie,"isListening");function ae(){return L===aA.Closed}s(ae,"isClosed");function te(){return L===aA.Disposed}s(te,"isDisposed");function pe(){(L===aA.New||L===aA.Listening)&&(L=aA.Closed,Y.fire(void 0))}s(pe,"closeHandler");function Ae(ve){O.fire([ve,void 0,void 0])}s(Ae,"readErrorHandler");function Oe(ve){O.fire(ve)}s(Oe,"writeErrorHandler"),t.onClose(pe),t.onError(Ae),e.onClose(pe),e.onError(Oe);function Te(){g||A.size===0||(g=(0,q8e.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(Te,"triggerMessageQueue");function Je(ve){Un.Message.isRequest(ve)?_t(ve):Un.Message.isNotification(ve)?ht(ve):Un.Message.isResponse(ve)?xt(ve):ue(ve)}s(Je,"handleMessage");function Fe(){if(A.size===0)return;let ve=A.shift();try{let Ge=n?.messageStrategy;cG.is(Ge)?Ge.handleMessage(ve,Je):Je(ve)}finally{Te()}}s(Fe,"processMessageQueue");let lt=s(ve=>{try{if(Un.Message.isNotification(ve)&&ve.method===X9.type.method){let Ge=ve.params.id,ft=Z(Ge),Tt=A.get(ft);if(Un.Message.isRequest(Tt)){let Zt=n?.connectionStrategy,Ir=Zt&&Zt.cancelUndispatched?Zt.cancelUndispatched(Tt,X):void 0;if(Ir&&(Ir.error!==void 0||Ir.result!==void 0)){A.delete(ft),b.delete(Ge),Ir.id=Tt.id,se(Ir,ve.method,Date.now()),e.write(Ir).catch(()=>i.error("Sending response for canceled message failed."));return}}let or=b.get(Ge);if(or!==void 0){or.cancel(),qe(ve);return}else E.add(Ge)}$(A,ve)}finally{Te()}},"callback");function _t(ve){if(te())return;function Ge(rr,lr,nr){let Br={jsonrpc:l,id:ve.id};rr instanceof Un.ResponseError?Br.error=rr.toJson():Br.result=rr===void 0?null:rr,se(Br,lr,nr),e.write(Br).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(rr,lr,nr){let Br={jsonrpc:l,id:ve.id,error:rr.toJson()};se(Br,lr,nr),e.write(Br).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function Tt(rr,lr,nr){rr===void 0&&(rr=null);let Br={jsonrpc:l,id:ve.id,result:rr};se(Br,lr,nr),e.write(Br).catch(()=>i.error("Sending response failed."))}s(Tt,"replySuccess"),le(ve);let or=f.get(ve.method),Zt,Ir;or&&(Zt=or.type,Ir=or.handler);let ur=Date.now();if(Ir||u){let rr=ve.id??String(Date.now()),lr=iG.is(U.receiver)?U.receiver.createCancellationTokenSource(rr):U.receiver.createCancellationTokenSource(ve);ve.id!==null&&E.has(ve.id)&&lr.cancel(),ve.id!==null&&b.set(rr,lr);try{let nr;if(Ir)if(ve.params===void 0){if(Zt!==void 0&&Zt.numberOfParams!==0){ft(new Un.ResponseError(Un.ErrorCodes.InvalidParams,`Request ${ve.method} defines ${Zt.numberOfParams} params but received none.`),ve.method,ur);return}nr=Ir(lr.token)}else if(Array.isArray(ve.params)){if(Zt!==void 0&&Zt.parameterStructures===Un.ParameterStructures.byName){ft(new Un.ResponseError(Un.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by name but received parameters by position`),ve.method,ur);return}nr=Ir(...ve.params,lr.token)}else{if(Zt!==void 0&&Zt.parameterStructures===Un.ParameterStructures.byPosition){ft(new Un.ResponseError(Un.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by position but received parameters by name`),ve.method,ur);return}nr=Ir(ve.params,lr.token)}else u&&(nr=u(ve.method,ve.params,lr.token));let Br=nr;nr?Br.then?Br.then(zr=>{b.delete(rr),Ge(zr,ve.method,ur)},zr=>{b.delete(rr),zr instanceof Un.ResponseError?ft(zr,ve.method,ur):zr&&Wa.string(zr.message)?ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${zr.message}`),ve.method,ur):ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,ur)}):(b.delete(rr),Ge(nr,ve.method,ur)):(b.delete(rr),Tt(nr,ve.method,ur))}catch(nr){b.delete(rr),nr instanceof Un.ResponseError?Ge(nr,ve.method,ur):nr&&Wa.string(nr.message)?ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${nr.message}`),ve.method,ur):ft(new Un.ResponseError(Un.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,ur)}}else ft(new Un.ResponseError(Un.ErrorCodes.MethodNotFound,`Unhandled method ${ve.method}`),ve.method,ur)}s(_t,"handleRequest");function xt(ve){if(!te())if(ve.id===null)ve.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(ve.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=ve.id,ft=y.get(Ge);if(Be(ve,ft),ft!==void 0){y.delete(Ge);try{if(ve.error){let Tt=ve.error;ft.reject(new Un.ResponseError(Tt.code,Tt.message,Tt.data))}else if(ve.result!==void 0)ft.resolve(ve.result);else throw new Error("Should never happen.")}catch(Tt){Tt.message?i.error(`Response handler '${ft.method}' failed with message: ${Tt.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(xt,"handleResponse");function ht(ve){if(te())return;let Ge,ft;if(ve.method===X9.type.method){let Tt=ve.params.id;E.delete(Tt),qe(ve);return}else{let Tt=m.get(ve.method);Tt&&(ft=Tt.handler,Ge=Tt.type)}if(ft||p)try{if(qe(ve),ft)if(ve.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Un.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(ve.params)){let Tt=ve.params;ve.method===Y9.type.method&&Tt.length===2&&lpe.is(Tt[0])?ft({token:Tt[0],value:Tt[1]}):(Ge!==void 0&&(Ge.parameterStructures===Un.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==ve.params.length&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received ${Tt.length} arguments`)),ft(...Tt))}else Ge!==void 0&&Ge.parameterStructures===Un.ParameterStructures.byPosition&&i.error(`Notification ${ve.method} defines parameters by position but received parameters by name`),ft(ve.params);else p&&p(ve.method,ve.params)}catch(Tt){Tt.message?i.error(`Notification handler '${ve.method}' failed with message: ${Tt.message}`):i.error(`Notification handler '${ve.method}' failed unexpectedly.`)}else V.fire(ve)}s(ht,"handleNotification");function ue(ve){if(!ve){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(ve,null,4)}`);let Ge=ve;if(Wa.string(Ge.id)||Wa.number(Ge.id)){let ft=Ge.id,Tt=y.get(ft);Tt&&Tt.reject(new Error("The received response has neither a result nor an error property."))}}s(ue,"handleInvalidMessage");function Ue(ve){if(ve!=null)switch(S){case zo.Verbose:return JSON.stringify(ve,null,4);case zo.Compact:return JSON.stringify(ve);default:return}}s(Ue,"stringifyTrace");function ye(ve){if(!(S===zo.Off||!B))if(R===yp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),B.log(`Sending request '${ve.method} - (${ve.id})'.`,Ge)}else Ee("send-request",ve)}s(ye,"traceSendingRequest");function $e(ve){if(!(S===zo.Off||!B))if(R===yp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),B.log(`Sending notification '${ve.method}'.`,Ge)}else Ee("send-notification",ve)}s($e,"traceSendingNotification");function se(ve,Ge,ft){if(!(S===zo.Off||!B))if(R===yp.Text){let Tt;(S===zo.Verbose||S===zo.Compact)&&(ve.error&&ve.error.data?Tt=`Error data: ${Ue(ve.error.data)}

`:ve.result?Tt=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(Tt=`No result returned.

`)),B.log(`Sending response '${Ge} - (${ve.id})'. Processing request took ${Date.now()-ft}ms`,Tt)}else Ee("send-response",ve)}s(se,"traceSendingResponse");function le(ve){if(!(S===zo.Off||!B))if(R===yp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),B.log(`Received request '${ve.method} - (${ve.id})'.`,Ge)}else Ee("receive-request",ve)}s(le,"traceReceivedRequest");function qe(ve){if(!(S===zo.Off||!B||ve.method===nG.type.method))if(R===yp.Text){let Ge;(S===zo.Verbose||S===zo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),B.log(`Received notification '${ve.method}'.`,Ge)}else Ee("receive-notification",ve)}s(qe,"traceReceivedNotification");function Be(ve,Ge){if(!(S===zo.Off||!B))if(R===yp.Text){let ft;if((S===zo.Verbose||S===zo.Compact)&&(ve.error&&ve.error.data?ft=`Error data: ${Ue(ve.error.data)}

`:ve.result?ft=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(ft=`No result returned.

`)),Ge){let Tt=ve.error?` Request failed: ${ve.error.message} (${ve.error.code}).`:"";B.log(`Received response '${Ge.method} - (${ve.id})' in ${Date.now()-Ge.timerStart}ms.${Tt}`,ft)}else B.log(`Received response ${ve.id} without active response promise.`,ft)}else Ee("receive-response",ve)}s(Be,"traceReceivedResponse");function Ee(ve,Ge){if(!B||S===zo.Off)return;let ft={isLSPMessage:!0,type:ve,message:Ge,timestamp:Date.now()};B.log(ft)}s(Ee,"logLSPMessage");function je(){if(ae())throw new cD(J9.Closed,"Connection is closed.");if(te())throw new cD(J9.Disposed,"Connection is disposed.")}s(je,"throwIfClosedOrDisposed");function tt(){if(ie())throw new cD(J9.AlreadyListening,"Connection is already listening")}s(tt,"throwIfListening");function pt(){if(!ie())throw new Error("Call listen() first.")}s(pt,"throwIfNotListening");function Ft(ve){return ve===void 0?null:ve}s(Ft,"undefinedToNull");function Jt(ve){if(ve!==null)return ve}s(Jt,"nullToUndefined");function Qt(ve){return ve!=null&&!Array.isArray(ve)&&typeof ve=="object"}s(Qt,"isNamedParam");function Vr(ve,Ge){switch(ve){case Un.ParameterStructures.auto:return Qt(Ge)?Jt(Ge):[Ft(Ge)];case Un.ParameterStructures.byName:if(!Qt(Ge))throw new Error("Received parameters by name but param is not an object literal.");return Jt(Ge);case Un.ParameterStructures.byPosition:return[Ft(Ge)];default:throw new Error(`Unknown parameter structure ${ve.toString()}`)}}s(Vr,"computeSingleParam");function Pr(ve,Ge){let ft,Tt=ve.numberOfParams;switch(Tt){case 0:ft=void 0;break;case 1:ft=Vr(ve.parameterStructures,Ge[0]);break;default:ft=[];for(let or=0;or<Ge.length&&or<Tt;or++)ft.push(Ft(Ge[or]));if(Ge.length<Tt)for(let or=Ge.length;or<Tt;or++)ft.push(null);break}return ft}s(Pr,"computeMessageParams");let ln={sendNotification:s((ve,...Ge)=>{je();let ft,Tt;if(Wa.string(ve)){ft=ve;let Zt=Ge[0],Ir=0,ur=Un.ParameterStructures.auto;Un.ParameterStructures.is(Zt)&&(Ir=1,ur=Zt);let rr=Ge.length,lr=rr-Ir;switch(lr){case 0:Tt=void 0;break;case 1:Tt=Vr(ur,Ge[Ir]);break;default:if(ur===Un.ParameterStructures.byName)throw new Error(`Received ${lr} parameters for 'by Name' notification parameter structure.`);Tt=Ge.slice(Ir,rr).map(nr=>Ft(nr));break}}else{let Zt=Ge;ft=ve.method,Tt=Pr(ve,Zt)}let or={jsonrpc:l,method:ft,params:Tt};return $e(or),e.write(or).catch(Zt=>{throw i.error("Sending notification failed."),Zt})},"sendNotification"),onNotification:s((ve,Ge)=>{je();let ft;return Wa.func(ve)?p=ve:Ge&&(Wa.string(ve)?(ft=ve,m.set(ve,{type:void 0,handler:Ge})):(ft=ve.method,m.set(ve.method,{type:ve,handler:Ge}))),{dispose:s(()=>{ft!==void 0?m.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((ve,Ge,ft)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ft),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((ve,Ge,ft)=>ln.sendNotification(Y9.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:z.event,sendRequest:s((ve,...Ge)=>{je(),pt();let ft,Tt,or;if(Wa.string(ve)){ft=ve;let rr=Ge[0],lr=Ge[Ge.length-1],nr=0,Br=Un.ParameterStructures.auto;Un.ParameterStructures.is(rr)&&(nr=1,Br=rr);let zr=Ge.length;cpe.CancellationToken.is(lr)&&(zr=zr-1,or=lr);let sn=zr-nr;switch(sn){case 0:Tt=void 0;break;case 1:Tt=Vr(Br,Ge[nr]);break;default:if(Br===Un.ParameterStructures.byName)throw new Error(`Received ${sn} parameters for 'by Name' request parameter structure.`);Tt=Ge.slice(nr,zr).map(Cn=>Ft(Cn));break}}else{let rr=Ge;ft=ve.method,Tt=Pr(ve,rr);let lr=ve.numberOfParams;or=cpe.CancellationToken.is(rr[lr])?rr[lr]:void 0}let Zt=o++,Ir;or&&(Ir=or.onCancellationRequested(()=>{let rr=U.sender.sendCancellation(ln,Zt);return rr===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Zt}`),Promise.resolve()):rr.catch(()=>{i.log(`Sending cancellation messages for id ${Zt} failed`)})}));let ur={jsonrpc:l,id:Zt,method:ft,params:Tt};return ye(ur),typeof U.sender.enableCancellation=="function"&&U.sender.enableCancellation(ur),new Promise(async(rr,lr)=>{let nr=s(sn=>{rr(sn),U.sender.cleanup(Zt),Ir?.dispose()},"resolveWithCleanup"),Br=s(sn=>{lr(sn),U.sender.cleanup(Zt),Ir?.dispose()},"rejectWithCleanup"),zr={method:ft,timerStart:Date.now(),resolve:nr,reject:Br};try{await e.write(ur),y.set(Zt,zr)}catch(sn){throw i.error("Sending request failed."),zr.reject(new Un.ResponseError(Un.ErrorCodes.MessageWriteError,sn.message?sn.message:"Unknown reason")),sn}})},"sendRequest"),onRequest:s((ve,Ge)=>{je();let ft=null;return dpe.is(ve)?(ft=void 0,u=ve):Wa.string(ve)?(ft=null,Ge!==void 0&&(ft=ve,f.set(ve,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=ve.method,f.set(ve.method,{type:ve,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?f.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>y.size>0,"hasPendingResponse"),trace:s(async(ve,Ge,ft)=>{let Tt=!1,or=yp.Text;ft!==void 0&&(Wa.boolean(ft)?Tt=ft:(Tt=ft.sendNotification||!1,or=ft.traceFormat||yp.Text)),S=ve,R=or,S===zo.Off?B=void 0:B=Ge,Tt&&!ae()&&!te()&&await ln.sendNotification(fpe.type,{value:zo.toString(ve)})},"trace"),onError:O.event,onClose:Y.event,onUnhandledNotification:V.event,onDispose:Q.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(te())return;L=aA.Disposed,Q.fire(void 0);let ve=new Un.ResponseError(Un.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of y.values())Ge.reject(ve);y=new Map,b=new Map,E=new Set,A=new H8e.LinkedMap,Wa.func(e.dispose)&&e.dispose(),Wa.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{je(),tt(),L=aA.Listening,t.listen(lt)},"listen"),inspect:s(()=>{(0,q8e.default)().console.log("inspect")},"inspect")};return ln.onNotification(nG.type,ve=>{if(S===zo.Off||!B)return;let Ge=S===zo.Verbose||S===zo.Compact;B.log(ve.message,Ge?ve.verbose:void 0)}),ln.onNotification(Y9.type,ve=>{let Ge=h.get(ve.token);Ge?Ge(ve.value):z.fire(ve)}),ln}s(GPt,"createMessageConnection");pi.createMessageConnection=GPt});var lG=H(At=>{"use strict";d();Object.defineProperty(At,"__esModule",{value:!0});At.ProgressType=At.ProgressToken=At.createMessageConnection=At.NullLogger=At.ConnectionOptions=At.ConnectionStrategy=At.AbstractMessageBuffer=At.WriteableStreamMessageWriter=At.AbstractMessageWriter=At.MessageWriter=At.ReadableStreamMessageReader=At.AbstractMessageReader=At.MessageReader=At.SharedArrayReceiverStrategy=At.SharedArraySenderStrategy=At.CancellationToken=At.CancellationTokenSource=At.Emitter=At.Event=At.Disposable=At.LRUCache=At.Touch=At.LinkedMap=At.ParameterStructures=At.NotificationType9=At.NotificationType8=At.NotificationType7=At.NotificationType6=At.NotificationType5=At.NotificationType4=At.NotificationType3=At.NotificationType2=At.NotificationType1=At.NotificationType0=At.NotificationType=At.ErrorCodes=At.ResponseError=At.RequestType9=At.RequestType8=At.RequestType7=At.RequestType6=At.RequestType5=At.RequestType4=At.RequestType3=At.RequestType2=At.RequestType1=At.RequestType0=At.RequestType=At.Message=At.RAL=void 0;At.MessageStrategy=At.CancellationStrategy=At.CancellationSenderStrategy=At.CancellationReceiverStrategy=At.ConnectionError=At.ConnectionErrors=At.LogTraceNotification=At.SetTraceNotification=At.TraceFormat=At.TraceValues=At.Trace=void 0;var Ms=U0e();Object.defineProperty(At,"Message",{enumerable:!0,get:s(function(){return Ms.Message},"get")});Object.defineProperty(At,"RequestType",{enumerable:!0,get:s(function(){return Ms.RequestType},"get")});Object.defineProperty(At,"RequestType0",{enumerable:!0,get:s(function(){return Ms.RequestType0},"get")});Object.defineProperty(At,"RequestType1",{enumerable:!0,get:s(function(){return Ms.RequestType1},"get")});Object.defineProperty(At,"RequestType2",{enumerable:!0,get:s(function(){return Ms.RequestType2},"get")});Object.defineProperty(At,"RequestType3",{enumerable:!0,get:s(function(){return Ms.RequestType3},"get")});Object.defineProperty(At,"RequestType4",{enumerable:!0,get:s(function(){return Ms.RequestType4},"get")});Object.defineProperty(At,"RequestType5",{enumerable:!0,get:s(function(){return Ms.RequestType5},"get")});Object.defineProperty(At,"RequestType6",{enumerable:!0,get:s(function(){return Ms.RequestType6},"get")});Object.defineProperty(At,"RequestType7",{enumerable:!0,get:s(function(){return Ms.RequestType7},"get")});Object.defineProperty(At,"RequestType8",{enumerable:!0,get:s(function(){return Ms.RequestType8},"get")});Object.defineProperty(At,"RequestType9",{enumerable:!0,get:s(function(){return Ms.RequestType9},"get")});Object.defineProperty(At,"ResponseError",{enumerable:!0,get:s(function(){return Ms.ResponseError},"get")});Object.defineProperty(At,"ErrorCodes",{enumerable:!0,get:s(function(){return Ms.ErrorCodes},"get")});Object.defineProperty(At,"NotificationType",{enumerable:!0,get:s(function(){return Ms.NotificationType},"get")});Object.defineProperty(At,"NotificationType0",{enumerable:!0,get:s(function(){return Ms.NotificationType0},"get")});Object.defineProperty(At,"NotificationType1",{enumerable:!0,get:s(function(){return Ms.NotificationType1},"get")});Object.defineProperty(At,"NotificationType2",{enumerable:!0,get:s(function(){return Ms.NotificationType2},"get")});Object.defineProperty(At,"NotificationType3",{enumerable:!0,get:s(function(){return Ms.NotificationType3},"get")});Object.defineProperty(At,"NotificationType4",{enumerable:!0,get:s(function(){return Ms.NotificationType4},"get")});Object.defineProperty(At,"NotificationType5",{enumerable:!0,get:s(function(){return Ms.NotificationType5},"get")});Object.defineProperty(At,"NotificationType6",{enumerable:!0,get:s(function(){return Ms.NotificationType6},"get")});Object.defineProperty(At,"NotificationType7",{enumerable:!0,get:s(function(){return Ms.NotificationType7},"get")});Object.defineProperty(At,"NotificationType8",{enumerable:!0,get:s(function(){return Ms.NotificationType8},"get")});Object.defineProperty(At,"NotificationType9",{enumerable:!0,get:s(function(){return Ms.NotificationType9},"get")});Object.defineProperty(At,"ParameterStructures",{enumerable:!0,get:s(function(){return Ms.ParameterStructures},"get")});var hpe=H0e();Object.defineProperty(At,"LinkedMap",{enumerable:!0,get:s(function(){return hpe.LinkedMap},"get")});Object.defineProperty(At,"LRUCache",{enumerable:!0,get:s(function(){return hpe.LRUCache},"get")});Object.defineProperty(At,"Touch",{enumerable:!0,get:s(function(){return hpe.Touch},"get")});var VPt=k8e();Object.defineProperty(At,"Disposable",{enumerable:!0,get:s(function(){return VPt.Disposable},"get")});var G8e=iD();Object.defineProperty(At,"Event",{enumerable:!0,get:s(function(){return G8e.Event},"get")});Object.defineProperty(At,"Emitter",{enumerable:!0,get:s(function(){return G8e.Emitter},"get")});var V8e=Xj();Object.defineProperty(At,"CancellationTokenSource",{enumerable:!0,get:s(function(){return V8e.CancellationTokenSource},"get")});Object.defineProperty(At,"CancellationToken",{enumerable:!0,get:s(function(){return V8e.CancellationToken},"get")});var z8e=D8e();Object.defineProperty(At,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return z8e.SharedArraySenderStrategy},"get")});Object.defineProperty(At,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return z8e.SharedArrayReceiverStrategy},"get")});var gpe=N8e();Object.defineProperty(At,"MessageReader",{enumerable:!0,get:s(function(){return gpe.MessageReader},"get")});Object.defineProperty(At,"AbstractMessageReader",{enumerable:!0,get:s(function(){return gpe.AbstractMessageReader},"get")});Object.defineProperty(At,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return gpe.ReadableStreamMessageReader},"get")});var Ape=Q8e();Object.defineProperty(At,"MessageWriter",{enumerable:!0,get:s(function(){return Ape.MessageWriter},"get")});Object.defineProperty(At,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return Ape.AbstractMessageWriter},"get")});Object.defineProperty(At,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return Ape.WriteableStreamMessageWriter},"get")});var zPt=U8e();Object.defineProperty(At,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return zPt.AbstractMessageBuffer},"get")});var qu=j8e();Object.defineProperty(At,"ConnectionStrategy",{enumerable:!0,get:s(function(){return qu.ConnectionStrategy},"get")});Object.defineProperty(At,"ConnectionOptions",{enumerable:!0,get:s(function(){return qu.ConnectionOptions},"get")});Object.defineProperty(At,"NullLogger",{enumerable:!0,get:s(function(){return qu.NullLogger},"get")});Object.defineProperty(At,"createMessageConnection",{enumerable:!0,get:s(function(){return qu.createMessageConnection},"get")});Object.defineProperty(At,"ProgressToken",{enumerable:!0,get:s(function(){return qu.ProgressToken},"get")});Object.defineProperty(At,"ProgressType",{enumerable:!0,get:s(function(){return qu.ProgressType},"get")});Object.defineProperty(At,"Trace",{enumerable:!0,get:s(function(){return qu.Trace},"get")});Object.defineProperty(At,"TraceValues",{enumerable:!0,get:s(function(){return qu.TraceValues},"get")});Object.defineProperty(At,"TraceFormat",{enumerable:!0,get:s(function(){return qu.TraceFormat},"get")});Object.defineProperty(At,"SetTraceNotification",{enumerable:!0,get:s(function(){return qu.SetTraceNotification},"get")});Object.defineProperty(At,"LogTraceNotification",{enumerable:!0,get:s(function(){return qu.LogTraceNotification},"get")});Object.defineProperty(At,"ConnectionErrors",{enumerable:!0,get:s(function(){return qu.ConnectionErrors},"get")});Object.defineProperty(At,"ConnectionError",{enumerable:!0,get:s(function(){return qu.ConnectionError},"get")});Object.defineProperty(At,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return qu.CancellationReceiverStrategy},"get")});Object.defineProperty(At,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return qu.CancellationSenderStrategy},"get")});Object.defineProperty(At,"CancellationStrategy",{enumerable:!0,get:s(function(){return qu.CancellationStrategy},"get")});Object.defineProperty(At,"MessageStrategy",{enumerable:!0,get:s(function(){return qu.MessageStrategy},"get")});var KPt=RI();At.RAL=KPt.default});var J8e=H(xpe=>{"use strict";d();Object.defineProperty(xpe,"__esModule",{value:!0});var K8e=require("util"),Gv=lG(),uG=class t extends Gv.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new K8e.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};uG.emptyBuffer=Buffer.allocUnsafe(0);var ype=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Gv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Gv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Gv.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Gv.Disposable.create(()=>this.stream.off("data",e))}},Cpe=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Gv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Gv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Gv.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},Y8e=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new uG(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new K8e.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new ype(t),"asReadableStream"),asWritableStream:s(t=>new Cpe(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function vpe(){return Y8e}s(vpe,"RIL");(function(t){function e(){Gv.RAL.install(Y8e)}s(e,"install"),t.install=e})(vpe||(vpe={}));xpe.default=vpe});var Z_=H(vo=>{"use strict";d();var YPt=vo&&vo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),JPt=vo&&vo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&YPt(e,t,r)};Object.defineProperty(vo,"__esModule",{value:!0});vo.createMessageConnection=vo.createServerSocketTransport=vo.createClientSocketTransport=vo.createServerPipeTransport=vo.createClientPipeTransport=vo.generateRandomPipeName=vo.StreamMessageWriter=vo.StreamMessageReader=vo.SocketMessageWriter=vo.SocketMessageReader=vo.PortMessageWriter=vo.PortMessageReader=vo.IPCMessageWriter=vo.IPCMessageReader=void 0;var lD=J8e();lD.default.install();var X8e=require("path"),XPt=require("os"),ZPt=require("crypto"),pG=require("net"),Cp=lG();JPt(lG(),vo);var Epe=class extends Cp.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Cp.Disposable.create(()=>this.process.off("message",e))}};vo.IPCMessageReader=Epe;var bpe=class extends Cp.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};vo.IPCMessageWriter=bpe;var Ipe=class extends Cp.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new Cp.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};vo.PortMessageReader=Ipe;var Tpe=class extends Cp.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};vo.PortMessageWriter=Tpe;var J_=class extends Cp.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,lD.default)().stream.asReadableStream(e),r)}};vo.SocketMessageReader=J_;var X_=class extends Cp.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,lD.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};vo.SocketMessageWriter=X_;var dG=class extends Cp.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,lD.default)().stream.asReadableStream(e),r)}};vo.StreamMessageReader=dG;var fG=class extends Cp.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,lD.default)().stream.asWritableStream(e),r)}};vo.StreamMessageWriter=fG;var Z8e=process.env.XDG_RUNTIME_DIR,e5t=new Map([["linux",107],["darwin",103]]);function t5t(){let t=(0,ZPt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Z8e?e=X8e.join(Z8e,`vscode-ipc-${t}.sock`):e=X8e.join(XPt.tmpdir(),`vscode-${t}.sock`);let r=e5t.get(process.platform);return r!==void 0&&e.length>r&&(0,lD.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(t5t,"generateRandomPipeName");vo.generateRandomPipeName=t5t;function r5t(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,pG.createServer)(c=>{a.close(),r([new J_(c,e),new X_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(r5t,"createClientPipeTransport");vo.createClientPipeTransport=r5t;function n5t(t,e="utf-8"){let r=(0,pG.createConnection)(t);return[new J_(r,e),new X_(r,e)]}s(n5t,"createServerPipeTransport");vo.createServerPipeTransport=n5t;function i5t(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,pG.createServer)(c=>{a.close(),r([new J_(c,e),new X_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(i5t,"createClientSocketTransport");vo.createClientSocketTransport=i5t;function o5t(t,e="utf-8"){let r=(0,pG.createConnection)(t,"127.0.0.1");return[new J_(r,e),new X_(r,e)]}s(o5t,"createServerSocketTransport");vo.createServerSocketTransport=o5t;function s5t(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(s5t,"isReadableStream");function a5t(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(a5t,"isWritableStream");function c5t(t,e,r,n){r||(r=Cp.NullLogger);let i=s5t(t)?new dG(t):t,o=a5t(e)?new fG(e):e;return Cp.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Cp.createMessageConnection)(i,o,r,n)}s(c5t,"createMessageConnection");vo.createMessageConnection=c5t});var wpe=H((ljr,eMe)=>{"use strict";d();eMe.exports=Z_()});var hG=H((tMe,mG)=>{d();(function(t){if(typeof mG=="object"&&typeof mG.exports=="object"){var e=t(require,tMe);e!==void 0&&(mG.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(K){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),K.is=Ce})(r||(e.DocumentUri=r={}));var n;(function(K){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),K.is=Ce})(n||(e.URI=n={}));var i;(function(K){K.MIN_VALUE=-2147483648,K.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&K.MIN_VALUE<=Ie&&Ie<=K.MAX_VALUE}s(Ce,"is"),K.is=Ce})(i||(e.integer=i={}));var o;(function(K){K.MIN_VALUE=0,K.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&K.MIN_VALUE<=Ie&&Ie<=K.MAX_VALUE}s(Ce,"is"),K.is=Ce})(o||(e.uinteger=o={}));var a;(function(K){function Ce(F,D){return F===Number.MAX_VALUE&&(F=o.MAX_VALUE),D===Number.MAX_VALUE&&(D=o.MAX_VALUE),{line:F,character:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.uinteger(D.line)&&Pe.uinteger(D.character)}s(Ie,"is"),K.is=Ie})(a||(e.Position=a={}));var c;(function(K){function Ce(F,D,ee,ge){if(Pe.uinteger(F)&&Pe.uinteger(D)&&Pe.uinteger(ee)&&Pe.uinteger(ge))return{start:a.create(F,D),end:a.create(ee,ge)};if(a.is(F)&&a.is(D))return{start:F,end:D};throw new Error("Range#create called with invalid arguments[".concat(F,", ").concat(D,", ").concat(ee,", ").concat(ge,"]"))}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&a.is(D.start)&&a.is(D.end)}s(Ie,"is"),K.is=Ie})(c||(e.Range=c={}));var l;(function(K){function Ce(F,D){return{uri:F,range:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&(Pe.string(D.uri)||Pe.undefined(D.uri))}s(Ie,"is"),K.is=Ie})(l||(e.Location=l={}));var u;(function(K){function Ce(F,D,ee,ge){return{targetUri:F,targetRange:D,targetSelectionRange:ee,originSelectionRange:ge}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.targetRange)&&Pe.string(D.targetUri)&&c.is(D.targetSelectionRange)&&(c.is(D.originSelectionRange)||Pe.undefined(D.originSelectionRange))}s(Ie,"is"),K.is=Ie})(u||(e.LocationLink=u={}));var f;(function(K){function Ce(F,D,ee,ge){return{red:F,green:D,blue:ee,alpha:ge}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.numberRange(D.red,0,1)&&Pe.numberRange(D.green,0,1)&&Pe.numberRange(D.blue,0,1)&&Pe.numberRange(D.alpha,0,1)}s(Ie,"is"),K.is=Ie})(f||(e.Color=f={}));var p;(function(K){function Ce(F,D){return{range:F,color:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&f.is(D.color)}s(Ie,"is"),K.is=Ie})(p||(e.ColorInformation=p={}));var m;(function(K){function Ce(F,D,ee){return{label:F,textEdit:D,additionalTextEdits:ee}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.undefined(D.textEdit)||B.is(D))&&(Pe.undefined(D.additionalTextEdits)||Pe.typedArray(D.additionalTextEdits,B.is))}s(Ie,"is"),K.is=Ie})(m||(e.ColorPresentation=m={}));var h;(function(K){K.Comment="comment",K.Imports="imports",K.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(K){function Ce(F,D,ee,ge,_e,ut){var St={startLine:F,endLine:D};return Pe.defined(ee)&&(St.startCharacter=ee),Pe.defined(ge)&&(St.endCharacter=ge),Pe.defined(_e)&&(St.kind=_e),Pe.defined(ut)&&(St.collapsedText=ut),St}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.uinteger(D.startLine)&&Pe.uinteger(D.startLine)&&(Pe.undefined(D.startCharacter)||Pe.uinteger(D.startCharacter))&&(Pe.undefined(D.endCharacter)||Pe.uinteger(D.endCharacter))&&(Pe.undefined(D.kind)||Pe.string(D.kind))}s(Ie,"is"),K.is=Ie})(g||(e.FoldingRange=g={}));var A;(function(K){function Ce(F,D){return{location:F,message:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&l.is(D.location)&&Pe.string(D.message)}s(Ie,"is"),K.is=Ie})(A||(e.DiagnosticRelatedInformation=A={}));var y;(function(K){K.Error=1,K.Warning=2,K.Information=3,K.Hint=4})(y||(e.DiagnosticSeverity=y={}));var E;(function(K){K.Unnecessary=1,K.Deprecated=2})(E||(e.DiagnosticTag=E={}));var b;(function(K){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&Pe.string(F.href)}s(Ce,"is"),K.is=Ce})(b||(e.CodeDescription=b={}));var S;(function(K){function Ce(F,D,ee,ge,_e,ut){var St={range:F,message:D};return Pe.defined(ee)&&(St.severity=ee),Pe.defined(ge)&&(St.code=ge),Pe.defined(_e)&&(St.source=_e),Pe.defined(ut)&&(St.relatedInformation=ut),St}s(Ce,"create"),K.create=Ce;function Ie(F){var D,ee=F;return Pe.defined(ee)&&c.is(ee.range)&&Pe.string(ee.message)&&(Pe.number(ee.severity)||Pe.undefined(ee.severity))&&(Pe.integer(ee.code)||Pe.string(ee.code)||Pe.undefined(ee.code))&&(Pe.undefined(ee.codeDescription)||Pe.string((D=ee.codeDescription)===null||D===void 0?void 0:D.href))&&(Pe.string(ee.source)||Pe.undefined(ee.source))&&(Pe.undefined(ee.relatedInformation)||Pe.typedArray(ee.relatedInformation,A.is))}s(Ie,"is"),K.is=Ie})(S||(e.Diagnostic=S={}));var R;(function(K){function Ce(F,D){for(var ee=[],ge=2;ge<arguments.length;ge++)ee[ge-2]=arguments[ge];var _e={title:F,command:D};return Pe.defined(ee)&&ee.length>0&&(_e.arguments=ee),_e}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.title)&&Pe.string(D.command)}s(Ie,"is"),K.is=Ie})(R||(e.Command=R={}));var B;(function(K){function Ce(ee,ge){return{range:ee,newText:ge}}s(Ce,"replace"),K.replace=Ce;function Ie(ee,ge){return{range:{start:ee,end:ee},newText:ge}}s(Ie,"insert"),K.insert=Ie;function F(ee){return{range:ee,newText:""}}s(F,"del"),K.del=F;function D(ee){var ge=ee;return Pe.objectLiteral(ge)&&Pe.string(ge.newText)&&c.is(ge.range)}s(D,"is"),K.is=D})(B||(e.TextEdit=B={}));var L;(function(K){function Ce(F,D,ee){var ge={label:F};return D!==void 0&&(ge.needsConfirmation=D),ee!==void 0&&(ge.description=ee),ge}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.boolean(D.needsConfirmation)||D.needsConfirmation===void 0)&&(Pe.string(D.description)||D.description===void 0)}s(Ie,"is"),K.is=Ie})(L||(e.ChangeAnnotation=L={}));var O;(function(K){function Ce(Ie){var F=Ie;return Pe.string(F)}s(Ce,"is"),K.is=Ce})(O||(e.ChangeAnnotationIdentifier=O={}));var Y;(function(K){function Ce(ee,ge,_e){return{range:ee,newText:ge,annotationId:_e}}s(Ce,"replace"),K.replace=Ce;function Ie(ee,ge,_e){return{range:{start:ee,end:ee},newText:ge,annotationId:_e}}s(Ie,"insert"),K.insert=Ie;function F(ee,ge){return{range:ee,newText:"",annotationId:ge}}s(F,"del"),K.del=F;function D(ee){var ge=ee;return B.is(ge)&&(L.is(ge.annotationId)||O.is(ge.annotationId))}s(D,"is"),K.is=D})(Y||(e.AnnotatedTextEdit=Y={}));var V;(function(K){function Ce(F,D){return{textDocument:F,edits:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&ae.is(D.textDocument)&&Array.isArray(D.edits)}s(Ie,"is"),K.is=Ie})(V||(e.TextDocumentEdit=V={}));var z;(function(K){function Ce(F,D,ee){var ge={kind:"create",uri:F};return D!==void 0&&(D.overwrite!==void 0||D.ignoreIfExists!==void 0)&&(ge.options=D),ee!==void 0&&(ge.annotationId=ee),ge}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D&&D.kind==="create"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),K.is=Ie})(z||(e.CreateFile=z={}));var Q;(function(K){function Ce(F,D,ee,ge){var _e={kind:"rename",oldUri:F,newUri:D};return ee!==void 0&&(ee.overwrite!==void 0||ee.ignoreIfExists!==void 0)&&(_e.options=ee),ge!==void 0&&(_e.annotationId=ge),_e}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D&&D.kind==="rename"&&Pe.string(D.oldUri)&&Pe.string(D.newUri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),K.is=Ie})(Q||(e.RenameFile=Q={}));var U;(function(K){function Ce(F,D,ee){var ge={kind:"delete",uri:F};return D!==void 0&&(D.recursive!==void 0||D.ignoreIfNotExists!==void 0)&&(ge.options=D),ee!==void 0&&(ge.annotationId=ee),ge}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D&&D.kind==="delete"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.recursive===void 0||Pe.boolean(D.options.recursive))&&(D.options.ignoreIfNotExists===void 0||Pe.boolean(D.options.ignoreIfNotExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),K.is=Ie})(U||(e.DeleteFile=U={}));var Z;(function(K){function Ce(Ie){var F=Ie;return F&&(F.changes!==void 0||F.documentChanges!==void 0)&&(F.documentChanges===void 0||F.documentChanges.every(function(D){return Pe.string(D.kind)?z.is(D)||Q.is(D)||U.is(D):V.is(D)}))}s(Ce,"is"),K.is=Ce})(Z||(e.WorkspaceEdit=Z={}));var J=function(){function K(Ce,Ie){this.edits=Ce,this.changeAnnotations=Ie}return s(K,"TextEditChangeImpl"),K.prototype.insert=function(Ce,Ie,F){var D,ee;if(F===void 0?D=B.insert(Ce,Ie):O.is(F)?(ee=F,D=Y.insert(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),ee=this.changeAnnotations.manage(F),D=Y.insert(Ce,Ie,ee)),this.edits.push(D),ee!==void 0)return ee},K.prototype.replace=function(Ce,Ie,F){var D,ee;if(F===void 0?D=B.replace(Ce,Ie):O.is(F)?(ee=F,D=Y.replace(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),ee=this.changeAnnotations.manage(F),D=Y.replace(Ce,Ie,ee)),this.edits.push(D),ee!==void 0)return ee},K.prototype.delete=function(Ce,Ie){var F,D;if(Ie===void 0?F=B.del(Ce):O.is(Ie)?(D=Ie,F=Y.del(Ce,Ie)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(Ie),F=Y.del(Ce,D)),this.edits.push(F),D!==void 0)return D},K.prototype.add=function(Ce){this.edits.push(Ce)},K.prototype.all=function(){return this.edits},K.prototype.clear=function(){this.edits.splice(0,this.edits.length)},K.prototype.assertChangeAnnotations=function(Ce){if(Ce===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},K}(),j=function(){function K(Ce){this._annotations=Ce===void 0?Object.create(null):Ce,this._counter=0,this._size=0}return s(K,"ChangeAnnotations"),K.prototype.all=function(){return this._annotations},Object.defineProperty(K.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),K.prototype.manage=function(Ce,Ie){var F;if(O.is(Ce)?F=Ce:(F=this.nextId(),Ie=Ce),this._annotations[F]!==void 0)throw new Error("Id ".concat(F," is already in use."));if(Ie===void 0)throw new Error("No annotation provided for id ".concat(F));return this._annotations[F]=Ie,this._size++,F},K.prototype.nextId=function(){return this._counter++,this._counter.toString()},K}(),$=function(){function K(Ce){var Ie=this;this._textEditChanges=Object.create(null),Ce!==void 0?(this._workspaceEdit=Ce,Ce.documentChanges?(this._changeAnnotations=new j(Ce.changeAnnotations),Ce.changeAnnotations=this._changeAnnotations.all(),Ce.documentChanges.forEach(function(F){if(V.is(F)){var D=new J(F.edits,Ie._changeAnnotations);Ie._textEditChanges[F.textDocument.uri]=D}})):Ce.changes&&Object.keys(Ce.changes).forEach(function(F){var D=new J(Ce.changes[F]);Ie._textEditChanges[F]=D})):this._workspaceEdit={}}return s(K,"WorkspaceChange"),Object.defineProperty(K.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),K.prototype.getTextEditChange=function(Ce){if(ae.is(Ce)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Ie={uri:Ce.uri,version:Ce.version},F=this._textEditChanges[Ie.uri];if(!F){var D=[],ee={textDocument:Ie,edits:D};this._workspaceEdit.documentChanges.push(ee),F=new J(D,this._changeAnnotations),this._textEditChanges[Ie.uri]=F}return F}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var F=this._textEditChanges[Ce];if(!F){var D=[];this._workspaceEdit.changes[Ce]=D,F=new J(D),this._textEditChanges[Ce]=F}return F}},K.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},K.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},K.prototype.createFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;L.is(Ie)||O.is(Ie)?D=Ie:F=Ie;var ee,ge;if(D===void 0?ee=z.create(Ce,F):(ge=O.is(D)?D:this._changeAnnotations.manage(D),ee=z.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(ee),ge!==void 0)return ge},K.prototype.renameFile=function(Ce,Ie,F,D){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ee;L.is(F)||O.is(F)?ee=F:D=F;var ge,_e;if(ee===void 0?ge=Q.create(Ce,Ie,D):(_e=O.is(ee)?ee:this._changeAnnotations.manage(ee),ge=Q.create(Ce,Ie,D,_e)),this._workspaceEdit.documentChanges.push(ge),_e!==void 0)return _e},K.prototype.deleteFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;L.is(Ie)||O.is(Ie)?D=Ie:F=Ie;var ee,ge;if(D===void 0?ee=U.create(Ce,F):(ge=O.is(D)?D:this._changeAnnotations.manage(D),ee=U.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(ee),ge!==void 0)return ge},K}();e.WorkspaceChange=$;var X;(function(K){function Ce(F){return{uri:F}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)}s(Ie,"is"),K.is=Ie})(X||(e.TextDocumentIdentifier=X={}));var ie;(function(K){function Ce(F,D){return{uri:F,version:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.integer(D.version)}s(Ie,"is"),K.is=Ie})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var ae;(function(K){function Ce(F,D){return{uri:F,version:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&(D.version===null||Pe.integer(D.version))}s(Ie,"is"),K.is=Ie})(ae||(e.OptionalVersionedTextDocumentIdentifier=ae={}));var te;(function(K){function Ce(F,D,ee,ge){return{uri:F,languageId:D,version:ee,text:ge}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.string(D.languageId)&&Pe.integer(D.version)&&Pe.string(D.text)}s(Ie,"is"),K.is=Ie})(te||(e.TextDocumentItem=te={}));var pe;(function(K){K.PlainText="plaintext",K.Markdown="markdown";function Ce(Ie){var F=Ie;return F===K.PlainText||F===K.Markdown}s(Ce,"is"),K.is=Ce})(pe||(e.MarkupKind=pe={}));var Ae;(function(K){function Ce(Ie){var F=Ie;return Pe.objectLiteral(Ie)&&pe.is(F.kind)&&Pe.string(F.value)}s(Ce,"is"),K.is=Ce})(Ae||(e.MarkupContent=Ae={}));var Oe;(function(K){K.Text=1,K.Method=2,K.Function=3,K.Constructor=4,K.Field=5,K.Variable=6,K.Class=7,K.Interface=8,K.Module=9,K.Property=10,K.Unit=11,K.Value=12,K.Enum=13,K.Keyword=14,K.Snippet=15,K.Color=16,K.File=17,K.Reference=18,K.Folder=19,K.EnumMember=20,K.Constant=21,K.Struct=22,K.Event=23,K.Operator=24,K.TypeParameter=25})(Oe||(e.CompletionItemKind=Oe={}));var Te;(function(K){K.PlainText=1,K.Snippet=2})(Te||(e.InsertTextFormat=Te={}));var Je;(function(K){K.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Fe;(function(K){function Ce(F,D,ee){return{newText:F,insert:D,replace:ee}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.newText)&&c.is(D.insert)&&c.is(D.replace)}s(Ie,"is"),K.is=Ie})(Fe||(e.InsertReplaceEdit=Fe={}));var lt;(function(K){K.asIs=1,K.adjustIndentation=2})(lt||(e.InsertTextMode=lt={}));var _t;(function(K){function Ce(Ie){var F=Ie;return F&&(Pe.string(F.detail)||F.detail===void 0)&&(Pe.string(F.description)||F.description===void 0)}s(Ce,"is"),K.is=Ce})(_t||(e.CompletionItemLabelDetails=_t={}));var xt;(function(K){function Ce(Ie){return{label:Ie}}s(Ce,"create"),K.create=Ce})(xt||(e.CompletionItem=xt={}));var ht;(function(K){function Ce(Ie,F){return{items:Ie||[],isIncomplete:!!F}}s(Ce,"create"),K.create=Ce})(ht||(e.CompletionList=ht={}));var ue;(function(K){function Ce(F){return F.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(Ce,"fromPlainText"),K.fromPlainText=Ce;function Ie(F){var D=F;return Pe.string(D)||Pe.objectLiteral(D)&&Pe.string(D.language)&&Pe.string(D.value)}s(Ie,"is"),K.is=Ie})(ue||(e.MarkedString=ue={}));var Ue;(function(K){function Ce(Ie){var F=Ie;return!!F&&Pe.objectLiteral(F)&&(Ae.is(F.contents)||ue.is(F.contents)||Pe.typedArray(F.contents,ue.is))&&(Ie.range===void 0||c.is(Ie.range))}s(Ce,"is"),K.is=Ce})(Ue||(e.Hover=Ue={}));var ye;(function(K){function Ce(Ie,F){return F?{label:Ie,documentation:F}:{label:Ie}}s(Ce,"create"),K.create=Ce})(ye||(e.ParameterInformation=ye={}));var $e;(function(K){function Ce(Ie,F){for(var D=[],ee=2;ee<arguments.length;ee++)D[ee-2]=arguments[ee];var ge={label:Ie};return Pe.defined(F)&&(ge.documentation=F),Pe.defined(D)?ge.parameters=D:ge.parameters=[],ge}s(Ce,"create"),K.create=Ce})($e||(e.SignatureInformation=$e={}));var se;(function(K){K.Text=1,K.Read=2,K.Write=3})(se||(e.DocumentHighlightKind=se={}));var le;(function(K){function Ce(Ie,F){var D={range:Ie};return Pe.number(F)&&(D.kind=F),D}s(Ce,"create"),K.create=Ce})(le||(e.DocumentHighlight=le={}));var qe;(function(K){K.File=1,K.Module=2,K.Namespace=3,K.Package=4,K.Class=5,K.Method=6,K.Property=7,K.Field=8,K.Constructor=9,K.Enum=10,K.Interface=11,K.Function=12,K.Variable=13,K.Constant=14,K.String=15,K.Number=16,K.Boolean=17,K.Array=18,K.Object=19,K.Key=20,K.Null=21,K.EnumMember=22,K.Struct=23,K.Event=24,K.Operator=25,K.TypeParameter=26})(qe||(e.SymbolKind=qe={}));var Be;(function(K){K.Deprecated=1})(Be||(e.SymbolTag=Be={}));var Ee;(function(K){function Ce(Ie,F,D,ee,ge){var _e={name:Ie,kind:F,location:{uri:ee,range:D}};return ge&&(_e.containerName=ge),_e}s(Ce,"create"),K.create=Ce})(Ee||(e.SymbolInformation=Ee={}));var je;(function(K){function Ce(Ie,F,D,ee){return ee!==void 0?{name:Ie,kind:F,location:{uri:D,range:ee}}:{name:Ie,kind:F,location:{uri:D}}}s(Ce,"create"),K.create=Ce})(je||(e.WorkspaceSymbol=je={}));var tt;(function(K){function Ce(F,D,ee,ge,_e,ut){var St={name:F,detail:D,kind:ee,range:ge,selectionRange:_e};return ut!==void 0&&(St.children=ut),St}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.name)&&Pe.number(D.kind)&&c.is(D.range)&&c.is(D.selectionRange)&&(D.detail===void 0||Pe.string(D.detail))&&(D.deprecated===void 0||Pe.boolean(D.deprecated))&&(D.children===void 0||Array.isArray(D.children))&&(D.tags===void 0||Array.isArray(D.tags))}s(Ie,"is"),K.is=Ie})(tt||(e.DocumentSymbol=tt={}));var pt;(function(K){K.Empty="",K.QuickFix="quickfix",K.Refactor="refactor",K.RefactorExtract="refactor.extract",K.RefactorInline="refactor.inline",K.RefactorRewrite="refactor.rewrite",K.Source="source",K.SourceOrganizeImports="source.organizeImports",K.SourceFixAll="source.fixAll"})(pt||(e.CodeActionKind=pt={}));var Ft;(function(K){K.Invoked=1,K.Automatic=2})(Ft||(e.CodeActionTriggerKind=Ft={}));var Jt;(function(K){function Ce(F,D,ee){var ge={diagnostics:F};return D!=null&&(ge.only=D),ee!=null&&(ge.triggerKind=ee),ge}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.typedArray(D.diagnostics,S.is)&&(D.only===void 0||Pe.typedArray(D.only,Pe.string))&&(D.triggerKind===void 0||D.triggerKind===Ft.Invoked||D.triggerKind===Ft.Automatic)}s(Ie,"is"),K.is=Ie})(Jt||(e.CodeActionContext=Jt={}));var Qt;(function(K){function Ce(F,D,ee){var ge={title:F},_e=!0;return typeof D=="string"?(_e=!1,ge.kind=D):R.is(D)?ge.command=D:ge.edit=D,_e&&ee!==void 0&&(ge.kind=ee),ge}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.title)&&(D.diagnostics===void 0||Pe.typedArray(D.diagnostics,S.is))&&(D.kind===void 0||Pe.string(D.kind))&&(D.edit!==void 0||D.command!==void 0)&&(D.command===void 0||R.is(D.command))&&(D.isPreferred===void 0||Pe.boolean(D.isPreferred))&&(D.edit===void 0||Z.is(D.edit))}s(Ie,"is"),K.is=Ie})(Qt||(e.CodeAction=Qt={}));var Vr;(function(K){function Ce(F,D){var ee={range:F};return Pe.defined(D)&&(ee.data=D),ee}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.command)||R.is(D.command))}s(Ie,"is"),K.is=Ie})(Vr||(e.CodeLens=Vr={}));var Pr;(function(K){function Ce(F,D){return{tabSize:F,insertSpaces:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.uinteger(D.tabSize)&&Pe.boolean(D.insertSpaces)}s(Ie,"is"),K.is=Ie})(Pr||(e.FormattingOptions=Pr={}));var ln;(function(K){function Ce(F,D,ee){return{range:F,target:D,data:ee}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.target)||Pe.string(D.target))}s(Ie,"is"),K.is=Ie})(ln||(e.DocumentLink=ln={}));var ve;(function(K){function Ce(F,D){return{range:F,parent:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&(D.parent===void 0||K.is(D.parent))}s(Ie,"is"),K.is=Ie})(ve||(e.SelectionRange=ve={}));var Ge;(function(K){K.namespace="namespace",K.type="type",K.class="class",K.enum="enum",K.interface="interface",K.struct="struct",K.typeParameter="typeParameter",K.parameter="parameter",K.variable="variable",K.property="property",K.enumMember="enumMember",K.event="event",K.function="function",K.method="method",K.macro="macro",K.keyword="keyword",K.modifier="modifier",K.comment="comment",K.string="string",K.number="number",K.regexp="regexp",K.operator="operator",K.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(K){K.declaration="declaration",K.definition="definition",K.readonly="readonly",K.static="static",K.deprecated="deprecated",K.abstract="abstract",K.async="async",K.modification="modification",K.documentation="documentation",K.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var Tt;(function(K){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&(F.resultId===void 0||typeof F.resultId=="string")&&Array.isArray(F.data)&&(F.data.length===0||typeof F.data[0]=="number")}s(Ce,"is"),K.is=Ce})(Tt||(e.SemanticTokens=Tt={}));var or;(function(K){function Ce(F,D){return{range:F,text:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&Pe.string(D.text)}s(Ie,"is"),K.is=Ie})(or||(e.InlineValueText=or={}));var Zt;(function(K){function Ce(F,D,ee){return{range:F,variableName:D,caseSensitiveLookup:ee}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&Pe.boolean(D.caseSensitiveLookup)&&(Pe.string(D.variableName)||D.variableName===void 0)}s(Ie,"is"),K.is=Ie})(Zt||(e.InlineValueVariableLookup=Zt={}));var Ir;(function(K){function Ce(F,D){return{range:F,expression:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&(Pe.string(D.expression)||D.expression===void 0)}s(Ie,"is"),K.is=Ie})(Ir||(e.InlineValueEvaluatableExpression=Ir={}));var ur;(function(K){function Ce(F,D){return{frameId:F,stoppedLocation:D}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(F.stoppedLocation)}s(Ie,"is"),K.is=Ie})(ur||(e.InlineValueContext=ur={}));var rr;(function(K){K.Type=1,K.Parameter=2;function Ce(Ie){return Ie===1||Ie===2}s(Ce,"is"),K.is=Ce})(rr||(e.InlayHintKind=rr={}));var lr;(function(K){function Ce(F){return{value:F}}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.location===void 0||l.is(D.location))&&(D.command===void 0||R.is(D.command))}s(Ie,"is"),K.is=Ie})(lr||(e.InlayHintLabelPart=lr={}));var nr;(function(K){function Ce(F,D,ee){var ge={position:F,label:D};return ee!==void 0&&(ge.kind=ee),ge}s(Ce,"create"),K.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&a.is(D.position)&&(Pe.string(D.label)||Pe.typedArray(D.label,lr.is))&&(D.kind===void 0||rr.is(D.kind))&&D.textEdits===void 0||Pe.typedArray(D.textEdits,B.is)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.paddingLeft===void 0||Pe.boolean(D.paddingLeft))&&(D.paddingRight===void 0||Pe.boolean(D.paddingRight))}s(Ie,"is"),K.is=Ie})(nr||(e.InlayHint=nr={}));var Br;(function(K){function Ce(Ie){return{kind:"snippet",value:Ie}}s(Ce,"createSnippet"),K.createSnippet=Ce})(Br||(e.StringValue=Br={}));var zr;(function(K){function Ce(Ie,F,D,ee){return{insertText:Ie,filterText:F,range:D,command:ee}}s(Ce,"create"),K.create=Ce})(zr||(e.InlineCompletionItem=zr={}));var sn;(function(K){function Ce(Ie){return{items:Ie}}s(Ce,"create"),K.create=Ce})(sn||(e.InlineCompletionList=sn={}));var Cn;(function(K){K.Invoked=0,K.Automatic=1})(Cn||(e.InlineCompletionTriggerKind=Cn={}));var ni;(function(K){function Ce(Ie,F){return{range:Ie,text:F}}s(Ce,"create"),K.create=Ce})(ni||(e.SelectedCompletionInfo=ni={}));var _n;(function(K){function Ce(Ie,F){return{triggerKind:Ie,selectedCompletionInfo:F}}s(Ce,"create"),K.create=Ce})(_n||(e.InlineCompletionContext=_n={}));var ei;(function(K){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&n.is(F.uri)&&Pe.string(F.name)}s(Ce,"is"),K.is=Ce})(ei||(e.WorkspaceFolder=ei={})),e.EOL=[`
`,`\r
`,"\r"];var an;(function(K){function Ce(ee,ge,_e,ut){return new Yn(ee,ge,_e,ut)}s(Ce,"create"),K.create=Ce;function Ie(ee){var ge=ee;return!!(Pe.defined(ge)&&Pe.string(ge.uri)&&(Pe.undefined(ge.languageId)||Pe.string(ge.languageId))&&Pe.uinteger(ge.lineCount)&&Pe.func(ge.getText)&&Pe.func(ge.positionAt)&&Pe.func(ge.offsetAt))}s(Ie,"is"),K.is=Ie;function F(ee,ge){for(var _e=ee.getText(),ut=D(ge,function(yr,ui){var ro=yr.range.start.line-ui.range.start.line;return ro===0?yr.range.start.character-ui.range.start.character:ro}),St=_e.length,Kt=ut.length-1;Kt>=0;Kt--){var er=ut[Kt],Yt=ee.offsetAt(er.range.start),bt=ee.offsetAt(er.range.end);if(bt<=St)_e=_e.substring(0,Yt)+er.newText+_e.substring(bt,_e.length);else throw new Error("Overlapping edit");St=Yt}return _e}s(F,"applyEdits"),K.applyEdits=F;function D(ee,ge){if(ee.length<=1)return ee;var _e=ee.length/2|0,ut=ee.slice(0,_e),St=ee.slice(_e);D(ut,ge),D(St,ge);for(var Kt=0,er=0,Yt=0;Kt<ut.length&&er<St.length;){var bt=ge(ut[Kt],St[er]);bt<=0?ee[Yt++]=ut[Kt++]:ee[Yt++]=St[er++]}for(;Kt<ut.length;)ee[Yt++]=ut[Kt++];for(;er<St.length;)ee[Yt++]=St[er++];return ee}s(D,"mergeSort")})(an||(e.TextDocument=an={}));var Yn=function(){function K(Ce,Ie,F,D){this._uri=Ce,this._languageId=Ie,this._version=F,this._content=D,this._lineOffsets=void 0}return s(K,"FullTextDocument"),Object.defineProperty(K.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),K.prototype.getText=function(Ce){if(Ce){var Ie=this.offsetAt(Ce.start),F=this.offsetAt(Ce.end);return this._content.substring(Ie,F)}return this._content},K.prototype.update=function(Ce,Ie){this._content=Ce.text,this._version=Ie,this._lineOffsets=void 0},K.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var Ce=[],Ie=this._content,F=!0,D=0;D<Ie.length;D++){F&&(Ce.push(D),F=!1);var ee=Ie.charAt(D);F=ee==="\r"||ee===`
`,ee==="\r"&&D+1<Ie.length&&Ie.charAt(D+1)===`
`&&D++}F&&Ie.length>0&&Ce.push(Ie.length),this._lineOffsets=Ce}return this._lineOffsets},K.prototype.positionAt=function(Ce){Ce=Math.max(Math.min(Ce,this._content.length),0);var Ie=this.getLineOffsets(),F=0,D=Ie.length;if(D===0)return a.create(0,Ce);for(;F<D;){var ee=Math.floor((F+D)/2);Ie[ee]>Ce?D=ee:F=ee+1}var ge=F-1;return a.create(ge,Ce-Ie[ge])},K.prototype.offsetAt=function(Ce){var Ie=this.getLineOffsets();if(Ce.line>=Ie.length)return this._content.length;if(Ce.line<0)return 0;var F=Ie[Ce.line],D=Ce.line+1<Ie.length?Ie[Ce.line+1]:this._content.length;return Math.max(Math.min(F+Ce.character,D),F)},Object.defineProperty(K.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),K}(),Pe;(function(K){var Ce=Object.prototype.toString;function Ie(bt){return typeof bt<"u"}s(Ie,"defined"),K.defined=Ie;function F(bt){return typeof bt>"u"}s(F,"undefined"),K.undefined=F;function D(bt){return bt===!0||bt===!1}s(D,"boolean"),K.boolean=D;function ee(bt){return Ce.call(bt)==="[object String]"}s(ee,"string"),K.string=ee;function ge(bt){return Ce.call(bt)==="[object Number]"}s(ge,"number"),K.number=ge;function _e(bt,yr,ui){return Ce.call(bt)==="[object Number]"&&yr<=bt&&bt<=ui}s(_e,"numberRange"),K.numberRange=_e;function ut(bt){return Ce.call(bt)==="[object Number]"&&-2147483648<=bt&&bt<=2147483647}s(ut,"integer"),K.integer=ut;function St(bt){return Ce.call(bt)==="[object Number]"&&0<=bt&&bt<=2147483647}s(St,"uinteger"),K.uinteger=St;function Kt(bt){return Ce.call(bt)==="[object Function]"}s(Kt,"func"),K.func=Kt;function er(bt){return bt!==null&&typeof bt=="object"}s(er,"objectLiteral"),K.objectLiteral=er;function Yt(bt,yr){return Array.isArray(bt)&&bt.every(yr)}s(Yt,"typedArray"),K.typedArray=Yt})(Pe||(Pe={}))})});var Sa=H(s0=>{"use strict";d();Object.defineProperty(s0,"__esModule",{value:!0});s0.ProtocolNotificationType=s0.ProtocolNotificationType0=s0.ProtocolRequestType=s0.ProtocolRequestType0=s0.RegistrationType=s0.MessageDirection=void 0;var uD=Z_(),rMe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(rMe||(s0.MessageDirection=rMe={}));var Spe=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};s0.RegistrationType=Spe;var _pe=class extends uD.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};s0.ProtocolRequestType0=_pe;var Rpe=class extends uD.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,uD.ParameterStructures.byName)}};s0.ProtocolRequestType=Rpe;var kpe=class extends uD.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};s0.ProtocolNotificationType0=kpe;var Ppe=class extends uD.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,uD.ParameterStructures.byName)}};s0.ProtocolNotificationType=Ppe});var gG=H(tl=>{"use strict";d();Object.defineProperty(tl,"__esModule",{value:!0});tl.objectLiteral=tl.typedArray=tl.stringArray=tl.array=tl.func=tl.error=tl.number=tl.string=tl.boolean=void 0;function l5t(t){return t===!0||t===!1}s(l5t,"boolean");tl.boolean=l5t;function nMe(t){return typeof t=="string"||t instanceof String}s(nMe,"string");tl.string=nMe;function u5t(t){return typeof t=="number"||t instanceof Number}s(u5t,"number");tl.number=u5t;function d5t(t){return t instanceof Error}s(d5t,"error");tl.error=d5t;function f5t(t){return typeof t=="function"}s(f5t,"func");tl.func=f5t;function iMe(t){return Array.isArray(t)}s(iMe,"array");tl.array=iMe;function p5t(t){return iMe(t)&&t.every(e=>nMe(e))}s(p5t,"stringArray");tl.stringArray=p5t;function m5t(t,e){return Array.isArray(t)&&t.every(e)}s(m5t,"typedArray");tl.typedArray=m5t;function h5t(t){return t!==null&&typeof t=="object"}s(h5t,"objectLiteral");tl.objectLiteral=h5t});var aMe=H(AG=>{"use strict";d();Object.defineProperty(AG,"__esModule",{value:!0});AG.ImplementationRequest=void 0;var oMe=Sa(),sMe;(function(t){t.method="textDocument/implementation",t.messageDirection=oMe.MessageDirection.clientToServer,t.type=new oMe.ProtocolRequestType(t.method)})(sMe||(AG.ImplementationRequest=sMe={}))});var uMe=H(yG=>{"use strict";d();Object.defineProperty(yG,"__esModule",{value:!0});yG.TypeDefinitionRequest=void 0;var cMe=Sa(),lMe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=cMe.MessageDirection.clientToServer,t.type=new cMe.ProtocolRequestType(t.method)})(lMe||(yG.TypeDefinitionRequest=lMe={}))});var pMe=H(dD=>{"use strict";d();Object.defineProperty(dD,"__esModule",{value:!0});dD.DidChangeWorkspaceFoldersNotification=dD.WorkspaceFoldersRequest=void 0;var CG=Sa(),dMe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=CG.MessageDirection.serverToClient,t.type=new CG.ProtocolRequestType0(t.method)})(dMe||(dD.WorkspaceFoldersRequest=dMe={}));var fMe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=CG.MessageDirection.clientToServer,t.type=new CG.ProtocolNotificationType(t.method)})(fMe||(dD.DidChangeWorkspaceFoldersNotification=fMe={}))});var gMe=H(vG=>{"use strict";d();Object.defineProperty(vG,"__esModule",{value:!0});vG.ConfigurationRequest=void 0;var mMe=Sa(),hMe;(function(t){t.method="workspace/configuration",t.messageDirection=mMe.MessageDirection.serverToClient,t.type=new mMe.ProtocolRequestType(t.method)})(hMe||(vG.ConfigurationRequest=hMe={}))});var CMe=H(fD=>{"use strict";d();Object.defineProperty(fD,"__esModule",{value:!0});fD.ColorPresentationRequest=fD.DocumentColorRequest=void 0;var xG=Sa(),AMe;(function(t){t.method="textDocument/documentColor",t.messageDirection=xG.MessageDirection.clientToServer,t.type=new xG.ProtocolRequestType(t.method)})(AMe||(fD.DocumentColorRequest=AMe={}));var yMe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=xG.MessageDirection.clientToServer,t.type=new xG.ProtocolRequestType(t.method)})(yMe||(fD.ColorPresentationRequest=yMe={}))});var EMe=H(pD=>{"use strict";d();Object.defineProperty(pD,"__esModule",{value:!0});pD.FoldingRangeRefreshRequest=pD.FoldingRangeRequest=void 0;var EG=Sa(),vMe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=EG.MessageDirection.clientToServer,t.type=new EG.ProtocolRequestType(t.method)})(vMe||(pD.FoldingRangeRequest=vMe={}));var xMe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=EG.MessageDirection.serverToClient,t.type=new EG.ProtocolRequestType0(t.method)})(xMe||(pD.FoldingRangeRefreshRequest=xMe={}))});var TMe=H(bG=>{"use strict";d();Object.defineProperty(bG,"__esModule",{value:!0});bG.DeclarationRequest=void 0;var bMe=Sa(),IMe;(function(t){t.method="textDocument/declaration",t.messageDirection=bMe.MessageDirection.clientToServer,t.type=new bMe.ProtocolRequestType(t.method)})(IMe||(bG.DeclarationRequest=IMe={}))});var _Me=H(IG=>{"use strict";d();Object.defineProperty(IG,"__esModule",{value:!0});IG.SelectionRangeRequest=void 0;var wMe=Sa(),SMe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=wMe.MessageDirection.clientToServer,t.type=new wMe.ProtocolRequestType(t.method)})(SMe||(IG.SelectionRangeRequest=SMe={}))});var DMe=H(DI=>{"use strict";d();Object.defineProperty(DI,"__esModule",{value:!0});DI.WorkDoneProgressCancelNotification=DI.WorkDoneProgressCreateRequest=DI.WorkDoneProgress=void 0;var g5t=Z_(),TG=Sa(),RMe;(function(t){t.type=new g5t.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(RMe||(DI.WorkDoneProgress=RMe={}));var kMe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=TG.MessageDirection.serverToClient,t.type=new TG.ProtocolRequestType(t.method)})(kMe||(DI.WorkDoneProgressCreateRequest=kMe={}));var PMe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=TG.MessageDirection.clientToServer,t.type=new TG.ProtocolNotificationType(t.method)})(PMe||(DI.WorkDoneProgressCancelNotification=PMe={}))});var LMe=H(BI=>{"use strict";d();Object.defineProperty(BI,"__esModule",{value:!0});BI.CallHierarchyOutgoingCallsRequest=BI.CallHierarchyIncomingCallsRequest=BI.CallHierarchyPrepareRequest=void 0;var mD=Sa(),BMe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=mD.MessageDirection.clientToServer,t.type=new mD.ProtocolRequestType(t.method)})(BMe||(BI.CallHierarchyPrepareRequest=BMe={}));var NMe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=mD.MessageDirection.clientToServer,t.type=new mD.ProtocolRequestType(t.method)})(NMe||(BI.CallHierarchyIncomingCallsRequest=NMe={}));var MMe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=mD.MessageDirection.clientToServer,t.type=new mD.ProtocolRequestType(t.method)})(MMe||(BI.CallHierarchyOutgoingCallsRequest=MMe={}))});var HMe=H(a0=>{"use strict";d();Object.defineProperty(a0,"__esModule",{value:!0});a0.SemanticTokensRefreshRequest=a0.SemanticTokensRangeRequest=a0.SemanticTokensDeltaRequest=a0.SemanticTokensRequest=a0.SemanticTokensRegistrationType=a0.TokenFormat=void 0;var Vv=Sa(),FMe;(function(t){t.Relative="relative"})(FMe||(a0.TokenFormat=FMe={}));var Z9;(function(t){t.method="textDocument/semanticTokens",t.type=new Vv.RegistrationType(t.method)})(Z9||(a0.SemanticTokensRegistrationType=Z9={}));var OMe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Vv.MessageDirection.clientToServer,t.type=new Vv.ProtocolRequestType(t.method),t.registrationMethod=Z9.method})(OMe||(a0.SemanticTokensRequest=OMe={}));var QMe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Vv.MessageDirection.clientToServer,t.type=new Vv.ProtocolRequestType(t.method),t.registrationMethod=Z9.method})(QMe||(a0.SemanticTokensDeltaRequest=QMe={}));var UMe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Vv.MessageDirection.clientToServer,t.type=new Vv.ProtocolRequestType(t.method),t.registrationMethod=Z9.method})(UMe||(a0.SemanticTokensRangeRequest=UMe={}));var qMe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Vv.MessageDirection.serverToClient,t.type=new Vv.ProtocolRequestType0(t.method)})(qMe||(a0.SemanticTokensRefreshRequest=qMe={}))});var jMe=H(wG=>{"use strict";d();Object.defineProperty(wG,"__esModule",{value:!0});wG.ShowDocumentRequest=void 0;var $Me=Sa(),WMe;(function(t){t.method="window/showDocument",t.messageDirection=$Me.MessageDirection.serverToClient,t.type=new $Me.ProtocolRequestType(t.method)})(WMe||(wG.ShowDocumentRequest=WMe={}))});var zMe=H(SG=>{"use strict";d();Object.defineProperty(SG,"__esModule",{value:!0});SG.LinkedEditingRangeRequest=void 0;var GMe=Sa(),VMe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=GMe.MessageDirection.clientToServer,t.type=new GMe.ProtocolRequestType(t.method)})(VMe||(SG.LinkedEditingRangeRequest=VMe={}))});var rLe=H(Rd=>{"use strict";d();Object.defineProperty(Rd,"__esModule",{value:!0});Rd.WillDeleteFilesRequest=Rd.DidDeleteFilesNotification=Rd.DidRenameFilesNotification=Rd.WillRenameFilesRequest=Rd.DidCreateFilesNotification=Rd.WillCreateFilesRequest=Rd.FileOperationPatternKind=void 0;var zm=Sa(),KMe;(function(t){t.file="file",t.folder="folder"})(KMe||(Rd.FileOperationPatternKind=KMe={}));var YMe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=zm.MessageDirection.clientToServer,t.type=new zm.ProtocolRequestType(t.method)})(YMe||(Rd.WillCreateFilesRequest=YMe={}));var JMe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=zm.MessageDirection.clientToServer,t.type=new zm.ProtocolNotificationType(t.method)})(JMe||(Rd.DidCreateFilesNotification=JMe={}));var XMe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=zm.MessageDirection.clientToServer,t.type=new zm.ProtocolRequestType(t.method)})(XMe||(Rd.WillRenameFilesRequest=XMe={}));var ZMe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=zm.MessageDirection.clientToServer,t.type=new zm.ProtocolNotificationType(t.method)})(ZMe||(Rd.DidRenameFilesNotification=ZMe={}));var eLe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=zm.MessageDirection.clientToServer,t.type=new zm.ProtocolNotificationType(t.method)})(eLe||(Rd.DidDeleteFilesNotification=eLe={}));var tLe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=zm.MessageDirection.clientToServer,t.type=new zm.ProtocolRequestType(t.method)})(tLe||(Rd.WillDeleteFilesRequest=tLe={}))});var aLe=H(NI=>{"use strict";d();Object.defineProperty(NI,"__esModule",{value:!0});NI.MonikerRequest=NI.MonikerKind=NI.UniquenessLevel=void 0;var nLe=Sa(),iLe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(iLe||(NI.UniquenessLevel=iLe={}));var oLe;(function(t){t.$import="import",t.$export="export",t.local="local"})(oLe||(NI.MonikerKind=oLe={}));var sLe;(function(t){t.method="textDocument/moniker",t.messageDirection=nLe.MessageDirection.clientToServer,t.type=new nLe.ProtocolRequestType(t.method)})(sLe||(NI.MonikerRequest=sLe={}))});var dLe=H(MI=>{"use strict";d();Object.defineProperty(MI,"__esModule",{value:!0});MI.TypeHierarchySubtypesRequest=MI.TypeHierarchySupertypesRequest=MI.TypeHierarchyPrepareRequest=void 0;var hD=Sa(),cLe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=hD.MessageDirection.clientToServer,t.type=new hD.ProtocolRequestType(t.method)})(cLe||(MI.TypeHierarchyPrepareRequest=cLe={}));var lLe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=hD.MessageDirection.clientToServer,t.type=new hD.ProtocolRequestType(t.method)})(lLe||(MI.TypeHierarchySupertypesRequest=lLe={}));var uLe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=hD.MessageDirection.clientToServer,t.type=new hD.ProtocolRequestType(t.method)})(uLe||(MI.TypeHierarchySubtypesRequest=uLe={}))});var mLe=H(gD=>{"use strict";d();Object.defineProperty(gD,"__esModule",{value:!0});gD.InlineValueRefreshRequest=gD.InlineValueRequest=void 0;var _G=Sa(),fLe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=_G.MessageDirection.clientToServer,t.type=new _G.ProtocolRequestType(t.method)})(fLe||(gD.InlineValueRequest=fLe={}));var pLe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=_G.MessageDirection.serverToClient,t.type=new _G.ProtocolRequestType0(t.method)})(pLe||(gD.InlineValueRefreshRequest=pLe={}))});var yLe=H(LI=>{"use strict";d();Object.defineProperty(LI,"__esModule",{value:!0});LI.InlayHintRefreshRequest=LI.InlayHintResolveRequest=LI.InlayHintRequest=void 0;var AD=Sa(),hLe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=AD.MessageDirection.clientToServer,t.type=new AD.ProtocolRequestType(t.method)})(hLe||(LI.InlayHintRequest=hLe={}));var gLe;(function(t){t.method="inlayHint/resolve",t.messageDirection=AD.MessageDirection.clientToServer,t.type=new AD.ProtocolRequestType(t.method)})(gLe||(LI.InlayHintResolveRequest=gLe={}));var ALe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=AD.MessageDirection.serverToClient,t.type=new AD.ProtocolRequestType0(t.method)})(ALe||(LI.InlayHintRefreshRequest=ALe={}))});var TLe=H(Km=>{"use strict";d();Object.defineProperty(Km,"__esModule",{value:!0});Km.DiagnosticRefreshRequest=Km.WorkspaceDiagnosticRequest=Km.DocumentDiagnosticRequest=Km.DocumentDiagnosticReportKind=Km.DiagnosticServerCancellationData=void 0;var ILe=Z_(),A5t=gG(),yD=Sa(),CLe;(function(t){function e(r){let n=r;return n&&A5t.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(CLe||(Km.DiagnosticServerCancellationData=CLe={}));var vLe;(function(t){t.Full="full",t.Unchanged="unchanged"})(vLe||(Km.DocumentDiagnosticReportKind=vLe={}));var xLe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=yD.MessageDirection.clientToServer,t.type=new yD.ProtocolRequestType(t.method),t.partialResult=new ILe.ProgressType})(xLe||(Km.DocumentDiagnosticRequest=xLe={}));var ELe;(function(t){t.method="workspace/diagnostic",t.messageDirection=yD.MessageDirection.clientToServer,t.type=new yD.ProtocolRequestType(t.method),t.partialResult=new ILe.ProgressType})(ELe||(Km.WorkspaceDiagnosticRequest=ELe={}));var bLe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=yD.MessageDirection.serverToClient,t.type=new yD.ProtocolRequestType0(t.method)})(bLe||(Km.DiagnosticRefreshRequest=bLe={}))});var DLe=H(rc=>{"use strict";d();Object.defineProperty(rc,"__esModule",{value:!0});rc.DidCloseNotebookDocumentNotification=rc.DidSaveNotebookDocumentNotification=rc.DidChangeNotebookDocumentNotification=rc.NotebookCellArrayChange=rc.DidOpenNotebookDocumentNotification=rc.NotebookDocumentSyncRegistrationType=rc.NotebookDocument=rc.NotebookCell=rc.ExecutionSummary=rc.NotebookCellKind=void 0;var e6=hG(),cA=gG(),lC=Sa(),Dpe;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Dpe||(rc.NotebookCellKind=Dpe={}));var Bpe;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return cA.objectLiteral(o)&&e6.uinteger.is(o.executionOrder)&&(o.success===void 0||cA.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Bpe||(rc.ExecutionSummary=Bpe={}));var RG;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return cA.objectLiteral(a)&&Dpe.is(a.kind)&&e6.DocumentUri.is(a.document)&&(a.metadata===void 0||cA.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Bpe.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(cA.objectLiteral(o)&&cA.objectLiteral(a)){let u=Object.keys(o),f=Object.keys(a);if(u.length!==f.length||(u.sort(),f.sort(),!i(u,f)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(RG||(rc.NotebookCell=RG={}));var wLe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return cA.objectLiteral(i)&&cA.string(i.uri)&&e6.integer.is(i.version)&&cA.typedArray(i.cells,RG.is)}s(r,"is"),t.is=r})(wLe||(rc.NotebookDocument=wLe={}));var CD;(function(t){t.method="notebookDocument/sync",t.messageDirection=lC.MessageDirection.clientToServer,t.type=new lC.RegistrationType(t.method)})(CD||(rc.NotebookDocumentSyncRegistrationType=CD={}));var SLe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=lC.MessageDirection.clientToServer,t.type=new lC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(SLe||(rc.DidOpenNotebookDocumentNotification=SLe={}));var _Le;(function(t){function e(n){let i=n;return cA.objectLiteral(i)&&e6.uinteger.is(i.start)&&e6.uinteger.is(i.deleteCount)&&(i.cells===void 0||cA.typedArray(i.cells,RG.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(_Le||(rc.NotebookCellArrayChange=_Le={}));var RLe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=lC.MessageDirection.clientToServer,t.type=new lC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(RLe||(rc.DidChangeNotebookDocumentNotification=RLe={}));var kLe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=lC.MessageDirection.clientToServer,t.type=new lC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(kLe||(rc.DidSaveNotebookDocumentNotification=kLe={}));var PLe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=lC.MessageDirection.clientToServer,t.type=new lC.ProtocolNotificationType(t.method),t.registrationMethod=CD.method})(PLe||(rc.DidCloseNotebookDocumentNotification=PLe={}))});var MLe=H(kG=>{"use strict";d();Object.defineProperty(kG,"__esModule",{value:!0});kG.InlineCompletionRequest=void 0;var BLe=Sa(),NLe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=BLe.MessageDirection.clientToServer,t.type=new BLe.ProtocolRequestType(t.method)})(NLe||(kG.InlineCompletionRequest=NLe={}))});var z9e=H(be=>{"use strict";d();Object.defineProperty(be,"__esModule",{value:!0});be.WorkspaceSymbolRequest=be.CodeActionResolveRequest=be.CodeActionRequest=be.DocumentSymbolRequest=be.DocumentHighlightRequest=be.ReferencesRequest=be.DefinitionRequest=be.SignatureHelpRequest=be.SignatureHelpTriggerKind=be.HoverRequest=be.CompletionResolveRequest=be.CompletionRequest=be.CompletionTriggerKind=be.PublishDiagnosticsNotification=be.WatchKind=be.RelativePattern=be.FileChangeType=be.DidChangeWatchedFilesNotification=be.WillSaveTextDocumentWaitUntilRequest=be.WillSaveTextDocumentNotification=be.TextDocumentSaveReason=be.DidSaveTextDocumentNotification=be.DidCloseTextDocumentNotification=be.DidChangeTextDocumentNotification=be.TextDocumentContentChangeEvent=be.DidOpenTextDocumentNotification=be.TextDocumentSyncKind=be.TelemetryEventNotification=be.LogMessageNotification=be.ShowMessageRequest=be.ShowMessageNotification=be.MessageType=be.DidChangeConfigurationNotification=be.ExitNotification=be.ShutdownRequest=be.InitializedNotification=be.InitializeErrorCodes=be.InitializeRequest=be.WorkDoneProgressOptions=be.TextDocumentRegistrationOptions=be.StaticRegistrationOptions=be.PositionEncodingKind=be.FailureHandlingKind=be.ResourceOperationKind=be.UnregistrationRequest=be.RegistrationRequest=be.DocumentSelector=be.NotebookCellTextDocumentFilter=be.NotebookDocumentFilter=be.TextDocumentFilter=void 0;be.MonikerRequest=be.MonikerKind=be.UniquenessLevel=be.WillDeleteFilesRequest=be.DidDeleteFilesNotification=be.WillRenameFilesRequest=be.DidRenameFilesNotification=be.WillCreateFilesRequest=be.DidCreateFilesNotification=be.FileOperationPatternKind=be.LinkedEditingRangeRequest=be.ShowDocumentRequest=be.SemanticTokensRegistrationType=be.SemanticTokensRefreshRequest=be.SemanticTokensRangeRequest=be.SemanticTokensDeltaRequest=be.SemanticTokensRequest=be.TokenFormat=be.CallHierarchyPrepareRequest=be.CallHierarchyOutgoingCallsRequest=be.CallHierarchyIncomingCallsRequest=be.WorkDoneProgressCancelNotification=be.WorkDoneProgressCreateRequest=be.WorkDoneProgress=be.SelectionRangeRequest=be.DeclarationRequest=be.FoldingRangeRefreshRequest=be.FoldingRangeRequest=be.ColorPresentationRequest=be.DocumentColorRequest=be.ConfigurationRequest=be.DidChangeWorkspaceFoldersNotification=be.WorkspaceFoldersRequest=be.TypeDefinitionRequest=be.ImplementationRequest=be.ApplyWorkspaceEditRequest=be.ExecuteCommandRequest=be.PrepareRenameRequest=be.RenameRequest=be.PrepareSupportDefaultBehavior=be.DocumentOnTypeFormattingRequest=be.DocumentRangesFormattingRequest=be.DocumentRangeFormattingRequest=be.DocumentFormattingRequest=be.DocumentLinkResolveRequest=be.DocumentLinkRequest=be.CodeLensRefreshRequest=be.CodeLensResolveRequest=be.CodeLensRequest=be.WorkspaceSymbolResolveRequest=void 0;be.InlineCompletionRequest=be.DidCloseNotebookDocumentNotification=be.DidSaveNotebookDocumentNotification=be.DidChangeNotebookDocumentNotification=be.NotebookCellArrayChange=be.DidOpenNotebookDocumentNotification=be.NotebookDocumentSyncRegistrationType=be.NotebookDocument=be.NotebookCell=be.ExecutionSummary=be.NotebookCellKind=be.DiagnosticRefreshRequest=be.WorkspaceDiagnosticRequest=be.DocumentDiagnosticRequest=be.DocumentDiagnosticReportKind=be.DiagnosticServerCancellationData=be.InlayHintRefreshRequest=be.InlayHintResolveRequest=be.InlayHintRequest=be.InlineValueRefreshRequest=be.InlineValueRequest=be.TypeHierarchySupertypesRequest=be.TypeHierarchySubtypesRequest=be.TypeHierarchyPrepareRequest=void 0;var jt=Sa(),LLe=hG(),Zl=gG(),y5t=aMe();Object.defineProperty(be,"ImplementationRequest",{enumerable:!0,get:s(function(){return y5t.ImplementationRequest},"get")});var C5t=uMe();Object.defineProperty(be,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return C5t.TypeDefinitionRequest},"get")});var W9e=pMe();Object.defineProperty(be,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return W9e.WorkspaceFoldersRequest},"get")});Object.defineProperty(be,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return W9e.DidChangeWorkspaceFoldersNotification},"get")});var v5t=gMe();Object.defineProperty(be,"ConfigurationRequest",{enumerable:!0,get:s(function(){return v5t.ConfigurationRequest},"get")});var j9e=CMe();Object.defineProperty(be,"DocumentColorRequest",{enumerable:!0,get:s(function(){return j9e.DocumentColorRequest},"get")});Object.defineProperty(be,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return j9e.ColorPresentationRequest},"get")});var G9e=EMe();Object.defineProperty(be,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return G9e.FoldingRangeRequest},"get")});Object.defineProperty(be,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return G9e.FoldingRangeRefreshRequest},"get")});var x5t=TMe();Object.defineProperty(be,"DeclarationRequest",{enumerable:!0,get:s(function(){return x5t.DeclarationRequest},"get")});var E5t=_Me();Object.defineProperty(be,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return E5t.SelectionRangeRequest},"get")});var Ope=DMe();Object.defineProperty(be,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Ope.WorkDoneProgress},"get")});Object.defineProperty(be,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Ope.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(be,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Ope.WorkDoneProgressCancelNotification},"get")});var Qpe=LMe();Object.defineProperty(be,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return Qpe.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return Qpe.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Qpe.CallHierarchyPrepareRequest},"get")});var vD=HMe();Object.defineProperty(be,"TokenFormat",{enumerable:!0,get:s(function(){return vD.TokenFormat},"get")});Object.defineProperty(be,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensRequest},"get")});Object.defineProperty(be,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensDeltaRequest},"get")});Object.defineProperty(be,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensRangeRequest},"get")});Object.defineProperty(be,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return vD.SemanticTokensRefreshRequest},"get")});Object.defineProperty(be,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return vD.SemanticTokensRegistrationType},"get")});var b5t=jMe();Object.defineProperty(be,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return b5t.ShowDocumentRequest},"get")});var I5t=zMe();Object.defineProperty(be,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return I5t.LinkedEditingRangeRequest},"get")});var e2=rLe();Object.defineProperty(be,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return e2.FileOperationPatternKind},"get")});Object.defineProperty(be,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return e2.DidCreateFilesNotification},"get")});Object.defineProperty(be,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return e2.WillCreateFilesRequest},"get")});Object.defineProperty(be,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return e2.DidRenameFilesNotification},"get")});Object.defineProperty(be,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return e2.WillRenameFilesRequest},"get")});Object.defineProperty(be,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return e2.DidDeleteFilesNotification},"get")});Object.defineProperty(be,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return e2.WillDeleteFilesRequest},"get")});var Upe=aLe();Object.defineProperty(be,"UniquenessLevel",{enumerable:!0,get:s(function(){return Upe.UniquenessLevel},"get")});Object.defineProperty(be,"MonikerKind",{enumerable:!0,get:s(function(){return Upe.MonikerKind},"get")});Object.defineProperty(be,"MonikerRequest",{enumerable:!0,get:s(function(){return Upe.MonikerRequest},"get")});var qpe=dLe();Object.defineProperty(be,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return qpe.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(be,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return qpe.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(be,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return qpe.TypeHierarchySupertypesRequest},"get")});var V9e=mLe();Object.defineProperty(be,"InlineValueRequest",{enumerable:!0,get:s(function(){return V9e.InlineValueRequest},"get")});Object.defineProperty(be,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return V9e.InlineValueRefreshRequest},"get")});var Hpe=yLe();Object.defineProperty(be,"InlayHintRequest",{enumerable:!0,get:s(function(){return Hpe.InlayHintRequest},"get")});Object.defineProperty(be,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return Hpe.InlayHintResolveRequest},"get")});Object.defineProperty(be,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return Hpe.InlayHintRefreshRequest},"get")});var t6=TLe();Object.defineProperty(be,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return t6.DiagnosticServerCancellationData},"get")});Object.defineProperty(be,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return t6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(be,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return t6.DocumentDiagnosticRequest},"get")});Object.defineProperty(be,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return t6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(be,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return t6.DiagnosticRefreshRequest},"get")});var uC=DLe();Object.defineProperty(be,"NotebookCellKind",{enumerable:!0,get:s(function(){return uC.NotebookCellKind},"get")});Object.defineProperty(be,"ExecutionSummary",{enumerable:!0,get:s(function(){return uC.ExecutionSummary},"get")});Object.defineProperty(be,"NotebookCell",{enumerable:!0,get:s(function(){return uC.NotebookCell},"get")});Object.defineProperty(be,"NotebookDocument",{enumerable:!0,get:s(function(){return uC.NotebookDocument},"get")});Object.defineProperty(be,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return uC.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(be,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return uC.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(be,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return uC.NotebookCellArrayChange},"get")});Object.defineProperty(be,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return uC.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return uC.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return uC.DidCloseNotebookDocumentNotification},"get")});var T5t=MLe();Object.defineProperty(be,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return T5t.InlineCompletionRequest},"get")});var Npe;(function(t){function e(r){let n=r;return Zl.string(n)||Zl.string(n.language)||Zl.string(n.scheme)||Zl.string(n.pattern)}s(e,"is"),t.is=e})(Npe||(be.TextDocumentFilter=Npe={}));var Mpe;(function(t){function e(r){let n=r;return Zl.objectLiteral(n)&&(Zl.string(n.notebookType)||Zl.string(n.scheme)||Zl.string(n.pattern))}s(e,"is"),t.is=e})(Mpe||(be.NotebookDocumentFilter=Mpe={}));var Lpe;(function(t){function e(r){let n=r;return Zl.objectLiteral(n)&&(Zl.string(n.notebook)||Mpe.is(n.notebook))&&(n.language===void 0||Zl.string(n.language))}s(e,"is"),t.is=e})(Lpe||(be.NotebookCellTextDocumentFilter=Lpe={}));var Fpe;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Zl.string(n)&&!Npe.is(n)&&!Lpe.is(n))return!1;return!0}s(e,"is"),t.is=e})(Fpe||(be.DocumentSelector=Fpe={}));var FLe;(function(t){t.method="client/registerCapability",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType(t.method)})(FLe||(be.RegistrationRequest=FLe={}));var OLe;(function(t){t.method="client/unregisterCapability",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType(t.method)})(OLe||(be.UnregistrationRequest=OLe={}));var QLe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(QLe||(be.ResourceOperationKind=QLe={}));var ULe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(ULe||(be.FailureHandlingKind=ULe={}));var qLe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(qLe||(be.PositionEncodingKind=qLe={}));var HLe;(function(t){function e(r){let n=r;return n&&Zl.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(HLe||(be.StaticRegistrationOptions=HLe={}));var $Le;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Fpe.is(n.documentSelector))}s(e,"is"),t.is=e})($Le||(be.TextDocumentRegistrationOptions=$Le={}));var WLe;(function(t){function e(n){let i=n;return Zl.objectLiteral(i)&&(i.workDoneProgress===void 0||Zl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&Zl.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(WLe||(be.WorkDoneProgressOptions=WLe={}));var jLe;(function(t){t.method="initialize",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(jLe||(be.InitializeRequest=jLe={}));var GLe;(function(t){t.unknownProtocolVersion=1})(GLe||(be.InitializeErrorCodes=GLe={}));var VLe;(function(t){t.method="initialized",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(VLe||(be.InitializedNotification=VLe={}));var zLe;(function(t){t.method="shutdown",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType0(t.method)})(zLe||(be.ShutdownRequest=zLe={}));var KLe;(function(t){t.method="exit",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType0(t.method)})(KLe||(be.ExitNotification=KLe={}));var YLe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(YLe||(be.DidChangeConfigurationNotification=YLe={}));var JLe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(JLe||(be.MessageType=JLe={}));var XLe;(function(t){t.method="window/showMessage",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(XLe||(be.ShowMessageNotification=XLe={}));var ZLe;(function(t){t.method="window/showMessageRequest",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType(t.method)})(ZLe||(be.ShowMessageRequest=ZLe={}));var e9e;(function(t){t.method="window/logMessage",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(e9e||(be.LogMessageNotification=e9e={}));var t9e;(function(t){t.method="telemetry/event",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(t9e||(be.TelemetryEventNotification=t9e={}));var r9e;(function(t){t.None=0,t.Full=1,t.Incremental=2})(r9e||(be.TextDocumentSyncKind=r9e={}));var n9e;(function(t){t.method="textDocument/didOpen",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(n9e||(be.DidOpenTextDocumentNotification=n9e={}));var i9e;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(i9e||(be.TextDocumentContentChangeEvent=i9e={}));var o9e;(function(t){t.method="textDocument/didChange",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(o9e||(be.DidChangeTextDocumentNotification=o9e={}));var s9e;(function(t){t.method="textDocument/didClose",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(s9e||(be.DidCloseTextDocumentNotification=s9e={}));var a9e;(function(t){t.method="textDocument/didSave",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(a9e||(be.DidSaveTextDocumentNotification=a9e={}));var c9e;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(c9e||(be.TextDocumentSaveReason=c9e={}));var l9e;(function(t){t.method="textDocument/willSave",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(l9e||(be.WillSaveTextDocumentNotification=l9e={}));var u9e;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(u9e||(be.WillSaveTextDocumentWaitUntilRequest=u9e={}));var d9e;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolNotificationType(t.method)})(d9e||(be.DidChangeWatchedFilesNotification=d9e={}));var f9e;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(f9e||(be.FileChangeType=f9e={}));var p9e;(function(t){function e(r){let n=r;return Zl.objectLiteral(n)&&(LLe.URI.is(n.baseUri)||LLe.WorkspaceFolder.is(n.baseUri))&&Zl.string(n.pattern)}s(e,"is"),t.is=e})(p9e||(be.RelativePattern=p9e={}));var m9e;(function(t){t.Create=1,t.Change=2,t.Delete=4})(m9e||(be.WatchKind=m9e={}));var h9e;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolNotificationType(t.method)})(h9e||(be.PublishDiagnosticsNotification=h9e={}));var g9e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(g9e||(be.CompletionTriggerKind=g9e={}));var A9e;(function(t){t.method="textDocument/completion",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(A9e||(be.CompletionRequest=A9e={}));var y9e;(function(t){t.method="completionItem/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(y9e||(be.CompletionResolveRequest=y9e={}));var C9e;(function(t){t.method="textDocument/hover",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(C9e||(be.HoverRequest=C9e={}));var v9e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(v9e||(be.SignatureHelpTriggerKind=v9e={}));var x9e;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(x9e||(be.SignatureHelpRequest=x9e={}));var E9e;(function(t){t.method="textDocument/definition",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(E9e||(be.DefinitionRequest=E9e={}));var b9e;(function(t){t.method="textDocument/references",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(b9e||(be.ReferencesRequest=b9e={}));var I9e;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(I9e||(be.DocumentHighlightRequest=I9e={}));var T9e;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(T9e||(be.DocumentSymbolRequest=T9e={}));var w9e;(function(t){t.method="textDocument/codeAction",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(w9e||(be.CodeActionRequest=w9e={}));var S9e;(function(t){t.method="codeAction/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(S9e||(be.CodeActionResolveRequest=S9e={}));var _9e;(function(t){t.method="workspace/symbol",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(_9e||(be.WorkspaceSymbolRequest=_9e={}));var R9e;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(R9e||(be.WorkspaceSymbolResolveRequest=R9e={}));var k9e;(function(t){t.method="textDocument/codeLens",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(k9e||(be.CodeLensRequest=k9e={}));var P9e;(function(t){t.method="codeLens/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(P9e||(be.CodeLensResolveRequest=P9e={}));var D9e;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType0(t.method)})(D9e||(be.CodeLensRefreshRequest=D9e={}));var B9e;(function(t){t.method="textDocument/documentLink",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(B9e||(be.DocumentLinkRequest=B9e={}));var N9e;(function(t){t.method="documentLink/resolve",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(N9e||(be.DocumentLinkResolveRequest=N9e={}));var M9e;(function(t){t.method="textDocument/formatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(M9e||(be.DocumentFormattingRequest=M9e={}));var L9e;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(L9e||(be.DocumentRangeFormattingRequest=L9e={}));var F9e;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(F9e||(be.DocumentRangesFormattingRequest=F9e={}));var O9e;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(O9e||(be.DocumentOnTypeFormattingRequest=O9e={}));var Q9e;(function(t){t.Identifier=1})(Q9e||(be.PrepareSupportDefaultBehavior=Q9e={}));var U9e;(function(t){t.method="textDocument/rename",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(U9e||(be.RenameRequest=U9e={}));var q9e;(function(t){t.method="textDocument/prepareRename",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(q9e||(be.PrepareRenameRequest=q9e={}));var H9e;(function(t){t.method="workspace/executeCommand",t.messageDirection=jt.MessageDirection.clientToServer,t.type=new jt.ProtocolRequestType(t.method)})(H9e||(be.ExecuteCommandRequest=H9e={}));var $9e;(function(t){t.method="workspace/applyEdit",t.messageDirection=jt.MessageDirection.serverToClient,t.type=new jt.ProtocolRequestType("workspace/applyEdit")})($9e||(be.ApplyWorkspaceEditRequest=$9e={}))});var Y9e=H(PG=>{"use strict";d();Object.defineProperty(PG,"__esModule",{value:!0});PG.createProtocolConnection=void 0;var K9e=Z_();function w5t(t,e,r,n){return K9e.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,K9e.createMessageConnection)(t,e,r,n)}s(w5t,"createProtocolConnection");PG.createProtocolConnection=w5t});var X9e=H(c0=>{"use strict";d();var S5t=c0&&c0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),DG=c0&&c0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&S5t(e,t,r)};Object.defineProperty(c0,"__esModule",{value:!0});c0.LSPErrorCodes=c0.createProtocolConnection=void 0;DG(Z_(),c0);DG(hG(),c0);DG(Sa(),c0);DG(z9e(),c0);var _5t=Y9e();Object.defineProperty(c0,"createProtocolConnection",{enumerable:!0,get:s(function(){return _5t.createProtocolConnection},"get")});var J9e;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(J9e||(c0.LSPErrorCodes=J9e={}))});var mi=H(dC=>{"use strict";d();var R5t=dC&&dC.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Z9e=dC&&dC.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&R5t(e,t,r)};Object.defineProperty(dC,"__esModule",{value:!0});dC.createProtocolConnection=void 0;var k5t=wpe();Z9e(wpe(),dC);Z9e(X9e(),dC);function P5t(t,e,r,n){return(0,k5t.createMessageConnection)(t,e,r,n)}s(P5t,"createProtocolConnection");dC.createProtocolConnection=P5t});var U6e=H((VG,Q6e)=>{d();(function(t,e){typeof VG=="object"&&typeof Q6e<"u"?e(VG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(VG,function(t){"use strict";function e(w,P){return w||P}s(e,"_pureAssign");function r(w,P){return w[P]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),S=r(b,l),R=e(String),B=r(R,l),L=e(Math),O=e(Array),Y=r(O,l),V=r(Y,"slice");function z(w,P){try{return{v:w.apply(this,P)}}catch(N){return{e:N}}}s(z,"safe");function Q(w){return function(P){return typeof P===w}}s(Q,"_createIs");function U(w){var P="[object "+w+"]";return function(N){return!!(N&&Z(N)===P)}}s(U,"_createObjIs");function Z(w){return S[E].call(w)}s(Z,"objToString");function J(w){return typeof w===f||w===f}s(J,"isUndefined");function j(w){return!X(w)}s(j,"isStrictUndefined");function $(w){return w===i||J(w)}s($,"isNullOrUndefined");function X(w){return!!w||w!==n}s(X,"isDefined");var ie=Q("string"),ae=Q(a);function te(w){return!w&&$(w)?!1:!!w&&typeof w===c}s(te,"isObject");var pe=r(O,"isArray"),Ae=U("Error"),Oe=r(b,"getOwnPropertyDescriptor");function Te(w,P){return!!w&&S.hasOwnProperty[y](w,P)}s(Te,"objHasOwnProperty");var Je=e(r(b,"hasOwn"),Fe);function Fe(w,P){return Te(w,P)||!!Oe(w,P)}s(Fe,"polyObjHasOwn");function lt(w,P,N){if(w&&te(w)){for(var W in w)if(Je(w,W)&&P[y](N||w,W,w[W])===-1)break}}s(lt,"objForEachKey");var _t={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function xt(w){var P={};if(P[_t.c]=!0,P[_t.e]=!0,w.l){P.get=function(){return w.l.v};var N=Oe(w.l,"v");N&&N.set&&(P.set=function(W){w.l.v=W})}return lt(w,function(W,de){P[_t[W]]=j(de)?P[_t[W]]:de}),P}s(xt,"_createProp");var ht=r(b,"defineProperty");function ue(w,P,N){return ht(w,P,xt(N))}s(ue,"objDefine");function Ue(w,P,N,W,de){var we={};return lt(w,function(ke,We){ye(we,ke,P?We:ke),ye(we,We,N?We:ke)}),W?W(we):we}s(Ue,"_createKeyValueMap");function ye(w,P,N,W){ht(w,P,{value:N,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var $e=e(R),se="[object Error]";function le(w,P){var N=o,W=S[E][y](w);W===se&&(w={stack:$e(w.stack),message:$e(w.message),name:$e(w.name)});try{N=JSON.stringify(w,i,P?typeof P=="number"?P:4:n),N=(N?N.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||$e(w)}catch(de){N=" - "+le(de,P)}return W+": "+N}s(le,"dumpObj");function qe(w){throw new Error(w)}s(qe,"throwError");function Be(w){throw new TypeError(w)}s(Be,"throwTypeError");var Ee=r(b,"freeze");function je(w){return w}s(je,"_doNothing");function tt(w){return w[u]||i}s(tt,"_getProto");var pt=r(b,"assign"),Ft=r(b,"keys"),Jt=e(Ee,je),Qt=e(r(b,"getPrototypeOf"),tt);function Vr(w){return Ue(w,1,0,Jt)}s(Vr,"createEnum");function Pr(w){var P={};return lt(w,function(N,W){ye(P,N,W[1]),ye(P,W[0],W[1])}),Jt(P)}s(Pr,"createSimpleMap");function ln(w){return Pr(w)}s(ln,"createTypeMap");var ve="__tsUtils$gblCfg",Ge;function ft(){var w;return typeof globalThis!==f&&(w=globalThis),!w&&typeof self!==f&&(w=self),!w&&typeof window!==f&&(w=window),!w&&typeof global!==f&&(w=global),w}s(ft,"_getGlobalValue");function Tt(){if(!Ge){var w=z(ft).v||{};Ge=w[ve]=w[ve]||{}}return Ge}s(Tt,"_getGlobalConfig");var or=Zt;function Zt(w,P,N){var W=P?P[w]:i;return function(de){var we=(de?de[w]:i)||W;if(we||N){var ke=arguments;return(we||N).apply(de,we?V[y](ke,1):ke)}Be('"'+$e(w)+'" not defined for '+le(de))}}s(Zt,"_unwrapFunctionWithPoly");var Ir=r(L,"min"),ur=r(L,"max"),rr=or("slice",B),lr=or("substring",B),nr=Zt("substr",B,Br);function Br(w,P,N){return $(w)&&Be("Invalid "+le(w)),N<0?o:(P=P||0,P<0&&(P=ur(P+w[g],0)),J(N)?rr(w,P):rr(w,P,P+N))}s(Br,"polyStrSubstr");function zr(w,P){return lr(w,0,P)}s(zr,"strLeft");var sn="_urid",Cn;function ni(){if(!Cn){var w=Tt();Cn=w.gblSym=w.gblSym||{k:{},s:{}}}return Cn}s(ni,"_globalSymbolRegistry");function _n(w){var P={description:$e(w),toString:s(function(){return m+"("+w+")"},"toString")};return P[h]=!0,P}s(_n,"polyNewSymbol");function ei(w){var P=ni();if(!Je(P.k,w)){var N=_n(w),W=Ft(P.s).length;N[sn]=function(){return W+"_"+N[E]()},P.k[w]=N,P.s[N[sn]()]=$e(w)}return P.k[w]}s(ei,"polySymbolFor");var an;function Yn(){an=Tt()}s(Yn,"_initTestHooks");function Pe(w){return ht({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(Pe,"createCachedValue");var K="window",Ce;function Ie(w,P){var N;return function(){return!an&&Yn(),(!N||an.lzy)&&(N=Pe(z(w,P).v)),N.v}}s(Ie,"_getGlobalInstFn");function F(w){return!an&&Yn(),(!Ce||w===!1||an.lzy)&&(Ce=Pe(z(ft).v||i)),Ce.v}s(F,"getGlobal");function D(w,P){var N;if(!Ce||P===!1?N=F(P):N=Ce.v,N&&N[w])return N[w];if(w===K)try{return window}catch{}return i}s(D,"getInst");var ee=Ie(D,["document"]);function ge(){return!!_e()}s(ge,"hasWindow");var _e=Ie(D,[K]);function ut(){return!!St()}s(ut,"hasNavigator");var St=Ie(D,["navigator"]),Kt,er;function Yt(){return Kt=Pe(z(D,[m]).v),Kt}s(Yt,"_initSymbol");function bt(w){var P=(an.lzy?0:Kt)||Yt();return P.v?P.v[w]:n}s(bt,"_getSymbolKey");function yr(w,P){!an&&Yn();var N=(an.lzy?0:Kt)||Yt();return N.v?N.v(w):P?i:_n(w)}s(yr,"newSymbol");function ui(w){return!an&&Yn(),er=(an.lzy?0:er)||Pe(z(bt,["for"]).v),(er.v||ei)(w)}s(ui,"symbolFor");function ro(w,P,N){return w.apply(P,N)}s(ro,"fnApply");function Tn(w,P,N){if(w)for(var W=w[g]>>>0,de=0;de<W&&!(de in w&&P[y](N||w,w[de],de,w)===-1);de++);}s(Tn,"arrForEach");var Ao=or("indexOf",Y),vi=or("map",Y),Xo=or("reduce",Y),Aa=e(r(b,"create"),vc);function vc(w){if(!w)return{};var P=typeof w;P!==c&&P!==a&&Be("Prototype must be an Object or function: "+le(w));function N(){}return s(N,"tempFunc"),N[l]=w,new N}s(vc,"polyObjCreate");var Mo;function Ws(w,P){var N=b.setPrototypeOf||function(W,de){var we;!Mo&&(Mo=Pe((we={},we[u]=[],we instanceof Array))),Mo.v?W[u]=de:lt(de,function(ke,We){return W[ke]=We})};return N(w,P)}s(Ws,"objSetPrototypeOf");function pd(w,P,N){z(ue,[P,A,{v:w,c:!0,e:!1}]),P=Ws(P,N);function W(){this[p]=P,z(ue,[this,A,{v:w,c:!0,e:!1}])}return s(W,"__"),P[l]=N===i?Aa(N):(W[l]=N[l],new W),P}s(pd,"_createCustomError");function xc(w,P){P&&(w[A]=P)}s(xc,"_setName");function bg(w,P,N){var W=N||Error,de=W[l][A],we=Error.captureStackTrace;return pd(w,function(){var ke=this,We=arguments;try{z(xc,[W,w]);var it=ro(W,ke,V[y](We))||ke;if(it!==ke){var Et=Qt(ke);Et!==Qt(it)&&Ws(it,Et)}return we&&we(it,ke[p]),P&&P(it,We),it}finally{z(xc,[W,de])}},W)}s(bg,"createCustomError");function Il(){return(Date.now||Ig)()}s(Il,"utcNow");function Ig(){return new Date().getTime()}s(Ig,"polyUtcNow");function Tg(w){return s(function(N){return $(N)&&Be("strTrim called ["+le(N)+"]"),N&&N.replace&&(N=N.replace(w,o)),N},"_doTrim")}s(Tg,"_createTrimFn");var YE=Tg(/^\s+|(?=\s)\s+$/g),Fa=Zt("trim",B,YE),_u=r(L,"floor"),Ru,md,wg;function $l(w){if(!w||typeof w!==c)return!1;wg||(wg=ge()?_e():!0);var P=!1;if(w!==wg){md||(Ru=Function[l][E],md=Ru[y](b));try{var N=Qt(w);P=!N,P||(Te(N,p)&&(N=N[p]),P=!!(N&&typeof N===a&&Ru[y](N)===md))}catch{}}return P}s($l,"isPlainObject");var JE;function ov(){return!an&&Yn(),(!JE||an.lzy)&&(JE=Pe(z(D,["performance"]).v)),JE.v}s(ov,"getPerformance");var XE=r(L,"round"),$f=Zt("endsWith",B,Wf);function Wf(w,P,N){ie(w)||Be("'"+le(w)+"' is not a string");var W=ie(P)?P:$e(P),de=!J(N)&&N<w[g]?N:w[g];return lr(w,de-W[g],de)===W}s(Wf,"polyStrEndsWith");var Kr=or("indexOf",B),Ec="ref",Sg="unref",_g="hasRef",XM="enabled";function jc(w,P,N){var W=!0,de=w?P(i):i,we;function ke(){return W=!1,de&&de[Sg]&&de[Sg](),we}s(ke,"_unref");function We(){de&&N(de),de=i}s(We,"_cancel");function it(){return de=P(de),W||ke(),we}s(it,"_refresh");function Et(gr){!gr&&de&&We(),gr&&!de&&it()}return s(Et,"_setEnabled"),we={cancel:We,refresh:it},we[_g]=function(){return de&&de[_g]?de[_g]():W},we[Ec]=function(){return W=!0,de&&de[Ec]&&de[Ec](),we},we[Sg]=ke,we=ht(we,XM,{get:s(function(){return!!de},"get"),set:Et}),{h:we,dn:s(function(){de=i},"dn")}}s(jc,"_createTimerHandler");function Iy(w,P,N){var W=pe(P),de=W?P.length:0,we=(de>0?P[0]:W?n:P)||setTimeout,ke=(de>1?P[1]:n)||clearTimeout,We=N[0];N[0]=function(){it.dn(),ro(We,n,V[y](arguments))};var it=jc(w,function(Et){if(Et){if(Et.refresh)return Et.refresh(),Et;ro(ke,n,[Et])}return ro(we,n,N)},function(Et){ro(ke,n,[Et])});return it.h}s(Iy,"_createTimeoutWith");function sv(w,P){return Iy(!0,n,V[y](arguments))}s(sv,"scheduleTimeout");var vm=Vr,Ty=ln,ZE="toLowerCase",Es="length",hd="warnToConsole",wy="throwInternal",s5="watch",ZM="apply",no="push",Sy="splice",Rg="logger",a5="cancel",eb="name",gd="unload",eL="version",tL="loggingLevelConsole",rL="messageId",av="message",nL="diagLog",HH="userAgent",iL="split",tb="replace",_y="type",$H="evtName",c5="traceFlags",oL="getAttribute",l5;function mue(w,P){l5||(l5=bg("AggregationError",function(W,de){de[Es]>1&&(W.errors=de[1])}));var N=w||"One or more errors occurred.";throw Tn(P,function(W,de){N+=`
`.concat(de," > ").concat(le(W))}),new l5(N,P||[])}s(mue,"throwAggregationError");var hue="function",WH="object",gue="undefined",kg="prototype",u5=Object,sL=u5[kg];(F()||{}).Symbol,(F()||{}).Reflect;var d5="hasOwnProperty",Aue=s(function(w){for(var P,N=1,W=arguments.length;N<W;N++){P=arguments[N];for(var de in P)sL[d5].call(P,de)&&(w[de]=P[de])}return w},"__objAssignFnImpl"),f5=pt||Aue,p5=s(function(w,P){return p5=u5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,W){N.__proto__=W}||function(N,W){for(var de in W)W[d5](de)&&(N[de]=W[de])},p5(w,P)},"extendStaticsFn");function Ry(w,P){typeof P!==hue&&P!==null&&Be("Class extends value "+String(P)+" is not a constructor or null"),p5(w,P);function N(){this.constructor=w}s(N,"__"),w[kg]=P===null?Aa(P):(N[kg]=P[kg],new N)}s(Ry,"__extendsFn");var m5,cv="constructor",jf="prototype",Gf="function",lv="_dynInstFuncs",rb="_isDynProxy",ky="_dynClass",nb="_dynCls$",aL="_dynInstChk",uv=aL,ib="_dfOpts",cL="_unknown_",h5="__proto__",ob="_dyn"+h5,HS="__dynProto$Gbl",g5="_dynInstProto",sb="useBaseInst",ab="setInstFuncs",$S=Object,dv=$S.getPrototypeOf,cb=$S.getOwnPropertyNames,lL=F(),A5=lL[HS]||(lL[HS]={o:(m5={},m5[ab]=!0,m5[sb]=!0,m5),n:1e3});function lb(w){return w&&(w===$S[jf]||w===Array[jf])}s(lb,"_isObjectOrArrayPrototype");function ub(w){return lb(w)||w===Function[jf]}s(ub,"_isObjectArrayOrFunctionPrototype");function Pg(w){var P;if(w){if(dv)return dv(w);var N=w[h5]||w[jf]||(w[cv]?w[cv][jf]:null);P=w[ob]||N,Te(w,ob)||(delete w[g5],P=w[ob]=w[g5]||w[ob],w[g5]=N)}return P}s(Pg,"_getObjProto");function xm(w,P){var N=[];if(cb)N=cb(w);else for(var W in w)typeof W=="string"&&Te(w,W)&&N.push(W);if(N&&N.length>0)for(var de=0;de<N.length;de++)P(N[de])}s(xm,"_forEachProp");function db(w,P,N){return P!==cv&&typeof w[P]===Gf&&(N||Te(w,P))&&P!==h5&&P!==jf}s(db,"_isDynamicCandidate");function fb(w){Be("DynamicProto: "+w)}s(fb,"_throwTypeError");function y5(w){var P=Aa(null);return xm(w,function(N){!P[N]&&db(w,N,!1)&&(P[N]=w[N])}),P}s(y5,"_getInstanceFuncs");function uL(w,P){for(var N=w.length-1;N>=0;N--)if(w[N]===P)return!0;return!1}s(uL,"_hasVisited");function dL(w,P,N,W){function de(it,Et,gr){var Fn=Et[gr];if(Fn[rb]&&W){var ti=it[lv]||{};ti[uv]!==!1&&(Fn=(ti[Et[ky]]||{})[gr]||Fn)}return function(){return Fn.apply(it,arguments)}}s(de,"_instFuncProxy");var we=Aa(null);xm(N,function(it){we[it]=de(P,N,it)});for(var ke=Pg(w),We=[];ke&&!ub(ke)&&!uL(We,ke);)xm(ke,function(it){!we[it]&&db(ke,it,!dv)&&(we[it]=de(P,ke,it))}),We.push(ke),ke=Pg(ke);return we}s(dL,"_getBaseFuncs");function yue(w,P,N,W){var de=null;if(w&&Te(N,ky)){var we=w[lv]||Aa(null);if(de=(we[N[ky]]||Aa(null))[P],de||fb("Missing ["+P+"] "+Gf),!de[aL]&&we[uv]!==!1){for(var ke=!Te(w,P),We=Pg(w),it=[];ke&&We&&!ub(We)&&!uL(it,We);){var Et=We[P];if(Et){ke=Et===W;break}it.push(We),We=Pg(We)}try{ke&&(w[P]=de),de[aL]=1}catch{we[uv]=!1}}}return de}s(yue,"_getInstFunc");function Cue(w,P,N){var W=P[w];return W===N&&(W=Pg(P)[w]),typeof W!==Gf&&fb("["+w+"] is not a "+Gf),W}s(Cue,"_getProtoFunc");function vue(w,P,N,W,de){function we(it,Et){var gr=s(function(){var Fn=yue(this,Et,it,gr)||Cue(Et,it,gr);return Fn.apply(this,arguments)},"dynProtoProxy");return gr[rb]=1,gr}if(s(we,"_createDynamicPrototype"),!lb(w)){var ke=N[lv]=N[lv]||Aa(null);if(!lb(ke)){var We=ke[P]=ke[P]||Aa(null);ke[uv]!==!1&&(ke[uv]=!!de),lb(We)||xm(N,function(it){db(N,it,!1)&&N[it]!==W[it]&&(We[it]=N[it],delete N[it],(!Te(w,it)||w[it]&&!w[it][rb])&&(w[it]=we(w,it)))})}}}s(vue,"_populatePrototype");function xue(w,P){if(dv){for(var N=[],W=Pg(P);W&&!ub(W)&&!uL(N,W);){if(W===w)return!0;N.push(W),W=Pg(W)}return!1}return!0}s(xue,"_checkPrototype");function fL(w,P){return Te(w,jf)?w.name||P||cL:((w||{})[cv]||{}).name||P||cL}s(fL,"_getObjName");function WS(w,P,N,W){Te(w,jf)||fb("theClass is an invalid class definition.");var de=w[jf];xue(de,P)||fb("["+fL(w)+"] not in hierarchy of ["+fL(P)+"]");var we=null;Te(de,ky)?we=de[ky]:(we=nb+fL(w,"_")+"$"+A5.n,A5.n++,de[ky]=we);var ke=WS[ib],We=!!ke[sb];We&&W&&W[sb]!==void 0&&(We=!!W[sb]);var it=y5(P),Et=dL(de,P,it,We);N(P,Et);var gr=!!dv&&!!ke[ab];gr&&W&&(gr=!!W[ab]),vue(de,we,P,it,gr!==!1)}s(WS,"dynamicProto"),WS[ib]=A5.o;var ku=void 0,Oa="",jH="Not dynamic - ",GH=/-([a-z])/g,jS=/([^\w\d_$])/g,pL=/^(\d+[\w\d_$])/;function mL(w){return!$(w)}s(mL,"isNotNullOrUndefined");function C5(w){var P=w;return P&&ie(P)&&(P=P[tb](GH,function(N,W){return W.toUpperCase()}),P=P[tb](jS,"_"),P=P[tb](pL,function(N,W){return"_"+W})),P}s(C5,"normalizeJsName");function VH(w,P){return w&&P?Kr(w,P)!==-1:!1}s(VH,"strContains");function Dg(w){return w&&w.toISOString()||""}s(Dg,"toISOString");function Py(w){return Ae(w)?w[eb]:Oa}s(Py,"getExceptionName");function GS(w){return function(){function P(){var N=this;w&&lt(w,function(W,de){N[W]=de})}return s(P,"class_1"),P}()}s(GS,"createClassFromInterface");var zH="console",v5="JSON",Eue="crypto",Dy="msCrypto",pb="msie",di="trident/",mb=null,fv=null,Bg=null;function x5(){return typeof console!==gue?console:D(zH)}s(x5,"getConsole");function Eo(){return!!(typeof JSON===WH&&JSON||D(v5)!==null)}s(Eo,"hasJSON");function hb(){return Eo()?JSON||D(v5):null}s(hb,"getJSON");function bc(){return D(Eue)}s(bc,"getCrypto");function gb(){return D(Dy)}s(gb,"getMsCrypto");function VS(){var w=St();if(w&&(w[HH]!==fv||mb===null)){fv=w[HH];var P=(fv||Oa)[ZE]();mb=VH(P,pb)||VH(P,di)}return mb}s(VS,"isIE");function By(w){return(Bg===null||w===!1)&&(Bg=ut()&&!!St().sendBeacon),Bg}s(By,"isBeaconsSupported");function zS(w,P){if(w)for(var N=0;N<w[Es];N++){var W=w[N];if(W[eb]&&W[eb]===P)return W}return{}}s(zS,"_getNamedValue");function E5(w){var P=ee();return P&&w?zS(P.querySelectorAll("meta"),w).content:null}s(E5,"findMetaTag");function Em(w){var P,N=ov();if(N){var W=N.getEntriesByType("navigation")||[];P=zS((W[Es]>0?W[0]:{}).serverTiming,w).description}return P}s(Em,"findNamedServerTiming");var Ab=4294967296,rp=4294967295,yb=123456789,Ny=987654321,Wl=!1,Cb=yb,bm=Ny;function KH(w){w<0&&(w>>>=0),Cb=yb+w&rp,bm=Ny-w&rp,Wl=!0}s(KH,"_mwcSeed");function pv(){try{var w=Il()&2147483647;KH((Math.random()*Ab^w)+w)}catch{}}s(pv,"_autoSeedMwc");function b5(w){return w>0?_u(vb()/rp*(w+1))>>>0:0}s(b5,"randomValue");function vb(w){var P=0,N=bc()||gb();return N&&N.getRandomValues&&(P=N.getRandomValues(new Uint32Array(1))[0]&rp),P===0&&VS()&&(Wl||pv(),P=YH()&rp),P===0&&(P=_u(Ab*Math.random()|0)),w||(P>>>=0),P}s(vb,"random32");function YH(w){bm=36969*(bm&65535)+(bm>>16)&rp,Cb=18e3*(Cb&65535)+(Cb>>16)&rp;var P=(bm<<16)+(Cb&65535)>>>0&rp|0;return w||(P>>>=0),P}s(YH,"mwcRandom32");function mv(w){w===void 0&&(w=22);for(var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=vb()>>>0,W=0,de=Oa;de[Es]<w;)W++,de+=P.charAt(N&63),N>>>=6,W===5&&(N=(vb()<<2&4294967295|N&3)>>>0,W=0);return de}s(mv,"newId");var Im="3.3.6",I5="."+mv(6),hv=0;function Tm(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(Tm,"_canAcceptData");function T5(w,P){var N=P[w.id];if(!N){N={};try{Tm(P)&&ue(P,w.id,{e:!1,v:N})}catch{}}return N}s(T5,"_getCache");function Ng(w,P){return P===void 0&&(P=!1),C5(w+hv+++(P?"."+Im:Oa)+I5)}s(Ng,"createUniqueNamespace");function wm(w){var P={id:Ng("_aiData-"+(w||Oa)+"."+Im),accept:s(function(N){return Tm(N)},"accept"),get:s(function(N,W,de,we){var ke=N[P.id];return ke?ke[C5(W)]:(we&&(ke=T5(P,N),ke[C5(W)]=de),de)},"get"),kill:s(function(N,W){if(N&&N[W])try{delete N[W]}catch{}},"kill")};return P}s(wm,"createElmNodeData");function My(w){return w&&te(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(My,"_isConfigDefaults");function w5(w,P,N){var W,de=N.dfVal||X;if(P&&N.fb){var we=N.fb;pe(we)||(we=[we]);for(var ke=0;ke<we[Es];ke++){var We=we[ke],it=P[We];if(de(it)?W=it:w&&(it=w.cfg[We],de(it)&&(W=it),w.set(w.cfg,$e(We),it)),de(W))break}}return!de(W)&&de(N.v)&&(W=N.v),W}s(w5,"_getDefault");function Ly(w,P,N){var W=N;if(N&&My(N)&&(W=w5(w,P,N)),W){My(W)&&(W=Ly(w,P,W));var de;pe(W)?(de=[],de[Es]=W[Es]):$l(W)&&(de={}),de&&(lt(W,function(we,ke){ke&&My(ke)&&(ke=Ly(w,P,ke)),de[we]=ke}),W=de)}return W}s(Ly,"_resolveDefaultValue");function Fy(w,P,N,W){var de,we,ke,We=W,it,Et,gr,Fn;My(We)?(de=We.isVal,we=We.set,gr=We.rdOnly,Fn=We.blkVal,it=We.mrg,Et=We.ref,!Et&&J(Et)&&(Et=!!it),ke=w5(w,P,We)):ke=W,Fn&&w.blkVal(P,N);var ti,xr=!0,Mr=P[N];(Mr||!$(Mr))&&(ti=Mr,xr=!1,de&&ti!==ke&&!de(ti)&&(ti=ke,xr=!0),we&&(ti=we(ti,ke,P),xr=ti===ke)),xr?ke?ti=Ly(w,P,ke):ti=ke:($l(ti)||pe(ke))&&it&&ke&&($l(ke)||pe(ke))&&lt(ke,function(Jn,On){Fy(w,ti,Jn,On)}),w.set(P,N,ti),Et&&w.ref(P,N),gr&&w.rdOnly(P,N)}s(Fy,"_applyDefaultValue");var Pu=ui("[[ai_dynCfg_1]]"),hL=ui("[[ai_blkDynCfg_1]]"),KS=ui("[[ai_frcDynCfg_1]]");function gL(w){if(w){var P;if(pe(w)?(P=[],P[Es]=w[Es]):$l(w)&&(P={}),P)return lt(w,function(N,W){P[N]=gL(W)}),P}return w}s(gL,"_cfgDeepCopy");function AL(w){if(w){var P=w[Pu]||w;if(P.cfg&&(P.cfg===w||P.cfg[Pu]===P))return P}return null}s(AL,"getDynamicConfigHandler");function xb(w){if(w&&($l(w)||pe(w)))try{w[hL]=!0}catch{}return w}s(xb,"blockDynamicConversion");function Oy(w,P,N){var W=!1;return N&&!w[P.blkVal]&&(W=N[KS],!W&&!N[hL]&&(W=$l(N)||pe(N))),W}s(Oy,"_canMakeDynamic");function np(w){Be("InvalidAccess:"+w)}s(np,"throwInvalidAccess");var JH=["push","pop","shift","unshift","splice"],Mg=s(function(w,P,N,W){w&&w[wy](3,108,"".concat(N," [").concat(P,"] failed - ")+le(W))},"_throwDynamicError");function yL(w,P,N){pe(P)&&Tn(JH,function(W){var de=P[W];P[W]=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];var We=de[ZM](this,we);return gv(w,P,N,"Patching"),We}})}s(yL,"_patchArray");function Lg(w,P){var N=Oe(w,P);return N&&N.get}s(Lg,"_getOwnPropGetter");function XH(w,P,N,W){var de={n:N,h:[],trk:s(function(Et){Et&&Et.fn&&(Ao(de.h,Et)===-1&&de.h[no](Et),w.trk(Et,de))},"trk"),clr:s(function(Et){var gr=Ao(de.h,Et);gr!==-1&&de.h[Sy](gr,1)},"clr")},we=!0,ke=!1;function We(){we&&(ke=ke||Oy(We,w,W),W&&!W[Pu]&&ke&&(W=gv(w,W,N,"Converting")),we=!1);var Et=w.act;return Et&&de.trk(Et),W}s(We,"_getProperty"),We[w.prop]={chng:s(function(){w.add(de)},"chng")};function it(Et){if(W!==Et){We[w.ro]&&!w.upd&&np("["+N+"] is read-only:"+le(P)),we&&(ke=ke||Oy(We,w,W),we=!1);var gr=ke&&We[w.rf];if(ke)if(gr){lt(W,function(ti){W[ti]=Et?Et[ti]:ku});try{lt(Et,function(ti,xr){Eb(w,W,ti,xr)}),Et=W}catch(ti){Mg((w.hdlr||{})[Rg],N,"Assigning",ti),ke=!1}}else W&&W[Pu]&&lt(W,function(ti){var xr=Lg(W,ti);if(xr){var Mr=xr[w.prop];Mr&&Mr.chng()}});if(Et!==W){var Fn=Et&&Oy(We,w,Et);!gr&&Fn&&(Et=gv(w,Et,N,"Converting")),W=Et,ke=Fn}w.add(de)}}s(it,"_setProperty"),ue(P,de.n,{g:We,s:it})}s(XH,"_createDynamicProperty");function Eb(w,P,N,W){if(P){var de=Lg(P,N),we=de&&!!de[w.prop];we?P[N]=W:XH(w,P,N,W)}return P}s(Eb,"_setDynamicProperty");function CL(w,P,N,W){if(P){var de=Lg(P,N),we=de&&!!de[w.prop],ke=W&&W[0],We=W&&W[1],it=W&&W[2];if(!we){if(it)try{xb(P)}catch(Et){Mg((w.hdlr||{})[Rg],N,"Blocking",Et)}try{Eb(w,P,N,P[N]),de=Lg(P,N)}catch(Et){Mg((w.hdlr||{})[Rg],N,"State",Et)}}ke&&(de[w.rf]=ke),We&&(de[w.ro]=We),it&&(de[w.blkVal]=!0)}return P}s(CL,"_setDynamicPropertyState");function gv(w,P,N,W){try{lt(P,function(de,we){Eb(w,P,de,we)}),P[Pu]||(ht(P,Pu,{get:s(function(){return w.hdlr},"get")}),yL(w,P,N))}catch(de){Mg((w.hdlr||{})[Rg],N,W,de)}return P}s(gv,"_makeDynamicObject");var Av="[[ai_",Vf="]]";function ZH(w){var P=yr(Av+"get"+w.uid+Vf),N=yr(Av+"ro"+w.uid+Vf),W=yr(Av+"rf"+w.uid+Vf),de=yr(Av+"blkVal"+w.uid+Vf),we=yr(Av+"dtl"+w.uid+Vf),ke=null,We=null,it;function Et(xr,Mr){var Jn=it.act;try{it.act=xr,xr&&xr[we]&&(Tn(xr[we],function(Oi){Oi.clr(xr)}),xr[we]=[]),Mr({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(Oi){var On=w[Rg];throw On&&On[wy](1,107,le(Oi)),Oi}finally{it.act=Jn||null}}s(Et,"_useHandler");function gr(){if(ke){var xr=ke;ke=null,We&&We[a5](),We=null;var Mr=[];if(Tn(xr,function(Jn){if(Jn&&(Jn[we]&&(Tn(Jn[we],function(On){On.clr(Jn)}),Jn[we]=null),Jn.fn))try{Et(Jn,Jn.fn)}catch(On){Mr[no](On)}}),ke)try{gr()}catch(Jn){Mr[no](Jn)}Mr[Es]>0&&mue("Watcher error(s): ",Mr)}}s(gr,"_notifyWatchers");function Fn(xr){if(xr&&xr.h[Es]>0){ke||(ke=[]),We||(We=sv(function(){We=null,gr()},0));for(var Mr=0;Mr<xr.h[Es];Mr++){var Jn=xr.h[Mr];Jn&&Ao(ke,Jn)===-1&&ke[no](Jn)}}}s(Fn,"_addWatcher");function ti(xr,Mr){if(xr){var Jn=xr[we]=xr[we]||[];Ao(Jn,Mr)===-1&&Jn[no](Mr)}}return s(ti,"_trackHandler"),it={prop:P,ro:N,rf:W,blkVal:de,hdlr:w,add:Fn,notify:gr,use:Et,trk:ti},it}s(ZH,"_createState");function bue(w,P){var N={fn:P,rm:s(function(){N.fn=null,w=null,P=null},"rm")};return ue(N,"toJSON",{v:s(function(){return"WatcherHandler"+(N.fn?"":"[X]")},"v")}),w.use(N,P),N}s(bue,"_createAndUseHandler");function e$(w,P,N){var W=AL(P);if(W)return W;var de=Ng("dyncfg",!0),we=P&&N!==!1?P:gL(P),ke;function We(){ke.notify()}s(We,"_notifyWatchers");function it(On,Oi,Lo){try{On=Eb(ke,On,Oi,Lo)}catch(io){Mg(w,Oi,"Setting value",io)}return On[Oi]}s(it,"_setValue");function Et(On){return bue(ke,On)}s(Et,"_watch");function gr(On,Oi){ke.use(null,function(Lo){var io=ke.upd;try{J(Oi)||(ke.upd=Oi),On(Lo)}finally{ke.upd=io}})}s(gr,"_block");function Fn(On,Oi){var Lo;return CL(ke,On,Oi,(Lo={},Lo[0]=!0,Lo))[Oi]}s(Fn,"_ref");function ti(On,Oi){var Lo;return CL(ke,On,Oi,(Lo={},Lo[1]=!0,Lo))[Oi]}s(ti,"_rdOnly");function xr(On,Oi){var Lo;return CL(ke,On,Oi,(Lo={},Lo[2]=!0,Lo))[Oi]}s(xr,"_blkPropValue");function Mr(On,Oi){return Oi&&lt(Oi,function(Lo,io){Fy(Jn,On,Lo,io)}),On}s(Mr,"_applyDefaults");var Jn={uid:null,cfg:we,logger:w,notify:We,set:it,setDf:Mr,watch:Et,ref:Fn,rdOnly:ti,blkVal:xr,_block:gr};return ue(Jn,"uid",{c:!1,e:!1,w:!1,v:de}),ke=ZH(Jn),gv(ke,we,"config","Creating"),Jn}s(e$,"_createDynamicHandler");function t$(w,P){w?(w[hd](P),w[wy](2,108,P)):np(P)}s(t$,"_logInvalidAccess");function YS(w,P,N,W){var de=e$(N,w||{},W);return P&&de.setDf(de.cfg,P),de}s(YS,"createDynamicConfig");function r$(w,P,N){var W=w[Pu]||w;return W.cfg&&(W.cfg===w||W.cfg[Pu]===W)?W[s5](P):(t$(N,jH+le(w)),YS(w,null,N)[s5](P))}s(r$,"onConfigChange");var S5=null;function n$(){var w=D("Microsoft");return w&&(S5=w.ApplicationInsights),S5}s(n$,"_getExtensionNamespace");function Iue(w){var P=S5;return!P&&w.disableDbgExt!==!0&&(P=S5||n$()),P?P.ChromeDbgExt:null}s(Iue,"getDebugExt");var bb,_5="warnToConsole",i$="AI (Internal): ",o$="AI: ",Tue="AITR_",wue={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},s$=(bb={},bb[0]=null,bb[1]="errorToConsole",bb[2]=_5,bb[3]="debugToConsole",bb);function a$(w){return w?'"'+w[tb](/\"/g,Oa)+'"':Oa}s(a$,"_sanitizeDiagnosticText");function R5(w,P){var N=x5();if(N){var W="log";N[w]&&(W=w),ae(N[W])&&N[W](P)}}s(R5,"_logToConsole");var k5=function(){function w(P,N,W,de){W===void 0&&(W=!1);var we=this;we[rL]=P,we[av]=(W?o$:i$)+P;var ke=Oa;Eo()&&(ke=hb().stringify(de));var We=(N?" message:"+a$(N):Oa)+(de?" props:"+a$(ke):Oa);we[av]+=We}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function Sue(w,P){return(w||{})[Rg]||new P5(P)}s(Sue,"safeGetLogger");var P5=function(){function w(P){this.identifier="DiagnosticLogger",this.queue=[];var N=0,W={},de,we,ke,We,it;WS(w,this,function(Et){it=Fn(P||{}),Et.consoleLoggingLevel=function(){return de},Et[wy]=function(Mr,Jn,On,Oi,Lo){Lo===void 0&&(Lo=!1);var io=new k5(Jn,On,Lo,Oi);if(We)throw le(io);var Gc=s$[Mr]||_5;if(J(io[av]))xr("throw"+(Mr===1?"Critical":"Warning"),io);else{if(Lo){var eI=+io[rL];!W[eI]&&de>=Mr&&(Et[Gc](io[av]),W[eI]=!0)}else de>=Mr&&Et[Gc](io[av]);gr(Mr,io)}},Et.debugToConsole=function(Mr){R5("debug",Mr),xr("warning",Mr)},Et[hd]=function(Mr){R5("warn",Mr),xr("warning",Mr)},Et.errorToConsole=function(Mr){R5("error",Mr),xr("error",Mr)},Et.resetInternalMessageCount=function(){N=0,W={}},Et.logInternalMessage=gr,Et[gd]=function(Mr){it&&it.rm(),it=null};function gr(Mr,Jn){if(!ti()){var On=!0,Oi=Tue+Jn[rL];if(W[Oi]?On=!1:W[Oi]=!0,On&&(Mr<=we&&(Et.queue[no](Jn),N++,xr(Mr===1?"error":"warn",Jn)),N===ke)){var Lo="Internal events throttle limit per PageView reached for this app.",io=new k5(23,Lo,!1);Et.queue[no](io),Mr===1?Et.errorToConsole(Lo):Et[hd](Lo)}}}s(gr,"_logInternalMessage");function Fn(Mr){return r$(YS(Mr,wue,Et).cfg,function(Jn){var On=Jn.cfg;de=On[tL],we=On.loggingLevelTelemetry,ke=On.maxMessageLimit,We=On.enableDebug})}s(Fn,"_setDefaultsFromConfig");function ti(){return N>=ke}s(ti,"_areInternalMessagesThrottled");function xr(Mr,Jn){var On=Iue(P||{});On&&On[nL]&&On[nL](Mr,Jn)}s(xr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function D5(w){return w||new P5}s(D5,"_getLogger");function rf(w,P,N,W,de,we){we===void 0&&(we=!1),D5(w)[wy](P,N,W,de,we)}s(rf,"_throwInternal");function B5(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],P=Oa,N,W=0;W<4;W++)N=vb(),P+=w[N&15]+w[N>>4&15]+w[N>>8&15]+w[N>>12&15]+w[N>>16&15]+w[N>>20&15]+w[N>>24&15]+w[N>>28&15];var de=w[8+(vb()&3)|0];return nr(P,0,8)+nr(P,9,4)+"4"+nr(P,13,3)+de+nr(P,16,3)+nr(P,19,12)}s(B5,"generateW3CId");var Ib=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,vL="00",zf="ff",Fi="00000000000000000000000000000000",Fg="0000000000000000",Ic=1;function ip(w,P,N){return w&&w[Es]===P&&w!==N?!!w.match(/^[\da-f]*$/i):!1}s(ip,"_isValid");function N5(w,P,N){return ip(w,P)?w:N}s(N5,"_formatValue");function yv(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var P=w.toString(16);P[Es]<2;)P="0"+P;return P}s(yv,"_formatFlags");function Tb(w,P,N,W){return{version:ip(W,2,zf)?W:vL,traceId:wb(w)?w:B5(),spanId:Sb(P)?P:zr(B5(),16),traceFlags:N>=0&&N<=255?N:1}}s(Tb,"createTraceParent");function Kf(w,P){if(!w||(pe(w)&&(w=w[0]||""),!w||!ie(w)||w[Es]>8192))return null;if(w.indexOf(",")!==-1){var N=w[iL](",");w=N[P>0&&N[Es]>P?P:0]}var W=Ib.exec(Fa(w));return!W||W[1]===zf||W[2]===Fi||W[3]===Fg?null:{version:(W[1]||Oa)[ZE](),traceId:(W[2]||Oa)[ZE](),spanId:(W[3]||Oa)[ZE](),traceFlags:parseInt(W[4],16)}}s(Kf,"parseTraceParent");function wb(w){return ip(w,32,Fi)}s(wb,"isValidTraceId");function Sb(w){return ip(w,16,Fg)}s(Sb,"isValidSpanId");function _b(w){return!(!w||!ip(w[eL],2,zf)||!ip(w.traceId,32,Fi)||!ip(w.spanId,16,Fg)||!ip(yv(w[c5]),2))}s(_b,"isValidTraceParent");function M5(w){return _b(w)?(w[c5]&Ic)===Ic:!1}s(M5,"isSampledFlag");function Cv(w){if(w){var P=yv(w[c5]);ip(P,2)||(P="01");var N=w[eL]||vL;return N!=="00"&&N!=="ff"&&(N=vL),"".concat(N.toLowerCase(),"-").concat(N5(w.traceId,32,Fi).toLowerCase(),"-").concat(N5(w.spanId,16,Fg).toLowerCase(),"-").concat(P.toLowerCase())}return""}s(Cv,"formatTraceParent");function xL(w){var P="traceparent",N=Kf(E5(P),w);return N||(N=Kf(Em(P),w)),N}s(xL,"findW3cTraceParent");function EL(w){var P=w.getElementsByTagName("script"),N=[];return Tn(P,function(W){var de=W[oL]("src");if(de){var we=W[oL]("crossorigin"),ke=W.hasAttribute("async")===!0,We=W.hasAttribute("defer")===!0,it=W[oL]("referrerpolicy"),Et={url:de};we&&(Et.crossOrigin=we),ke&&(Et.async=ke),We&&(Et.defer=We),it&&(Et.referrerPolicy=it),N[no](Et)}}),N}s(EL,"findAllScripts");var L5="on",JS="attachEvent",F5="addEventListener",O5="detachEvent",c$="removeEventListener",bL="events";Ng("aiEvtPageHide"),Ng("aiEvtPageShow");var _ue=/\.[\.]+/g,Rue=/[\.]+$/,Q5=1,Rb=wm("events"),jl=/^([^.]*)(?:\.(.+)|)/;function XS(w){return w&&w[tb]?w[tb](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Oa):w}s(XS,"_normalizeNamespace");function Tl(w,P){if(P){var N=Oa;pe(P)?(N=Oa,Tn(P,function(de){de=XS(de),de&&(de[0]!=="."&&(de="."+de),N+=de)})):N=XS(P),N&&(N[0]!=="."&&(N="."+N),w=(w||Oa)+N)}var W=jl.exec(w||Oa)||[];return{type:W[1],ns:(W[2]||Oa).replace(_ue,".").replace(Rue,Oa)[iL](".").sort().join(".")}}s(Tl,"_getEvtNamespace");function Qy(w,P,N){N===void 0&&(N=!0);var W=Rb.get(w,bL,{},N),de=W[P];return de||(de=W[P]=[]),de}s(Qy,"_getRegisteredEvents");function l$(w,P,N,W){w&&P&&P[_y]&&(w[c$]?w[c$](P[_y],N,W):w[O5]&&w[O5](L5+P[_y],N))}s(l$,"_doDetach");function kue(w,P,N,W){var de=!1;return w&&P&&P[_y]&&N&&(w[F5]?(w[F5](P[_y],N,W),de=!0):w[JS]&&(w[JS](L5+P[_y],N),de=!0)),de}s(kue,"_doAttach");function ZS(w,P,N,W){for(var de=P[Es];de--;){var we=P[de];we&&(!N.ns||N.ns===we[$H].ns)&&(!W||W(we))&&(l$(w,we[$H],we.handler,we.capture),P[Sy](de,1))}}s(ZS,"_doUnregister");function IL(w,P,N){if(P[_y])ZS(w,Qy(w,P[_y]),P,N);else{var W=Rb.get(w,bL,{});lt(W,function(de,we){ZS(w,we,P,N)}),Ft(W)[Es]===0&&Rb.kill(w,bL)}}s(IL,"_unregisterEvents");function Pue(w,P){var N;return P?(pe(P)?N=[w].concat(P):N=[w,P],N=Tl("xx",N).ns[iL](".")):N=w,N}s(Pue,"mergeEvtNamespace");function TL(w,P,N,W,de){de===void 0&&(de=!1);var we=!1;if(w)try{var ke=Tl(P,W);if(we=kue(w,ke,N,de),we&&Rb.accept(w)){var We={guid:Q5++,evtName:ke,handler:N,capture:de};Qy(w,ke.type)[no](We)}}catch{}return we}s(TL,"eventOn");function u$(w,P,N,W,de){if(de===void 0&&(de=!1),w)try{var we=Tl(P,W),ke=!1;IL(w,we,function(We){return we.ns&&!N||We.handler===N?(ke=!0,!0):!1}),ke||l$(w,we,N,de)}catch{}}s(u$,"eventOff");var U5="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",d$="sampleRate",q5="ProcessLegacy",f$="http.method",wL="https://dc.services.visualstudio.com",e_="/v2/track",Sm="not_specified",SL="iKey",p$=Ty({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Uy="split",Ln="length",kb="toLowerCase",vv="ingestionendpoint",xv="toString",_L="removeItem",t_="message",Pb="count",H5="preTriggerDate",RL="getUTCDate",$5="stringify",Db="pathname",Ev="match",kL="correlationHeaderExcludePatterns",Yf="name",Bb="extensionConfig",_m="properties",Ad="measurements",Nb="sizeInBytes",r_="typeName",Mb="exceptions",n_="severityLevel",Lb="problemGroup",nf="parsedStack",W5="hasFullStack",j5="assembly",op="fileName",Fb="line",qy="aiDataContract",i_="duration";function PL(w,P,N){var W=P[Ln],de=DL(w,P);if(de[Ln]!==W){for(var we=0,ke=de;N[ke]!==void 0;)we++,ke=lr(de,0,147)+m$(we);de=ke}return de}s(PL,"dataSanitizeKeyAndAddUniqueness");function DL(w,P){var N;return P&&(P=Fa($e(P)),P[Ln]>150&&(N=lr(P,0,150),rf(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:P},!0))),N||P}s(DL,"dataSanitizeKey");function wl(w,P,N){N===void 0&&(N=1024);var W;return P&&(N=N||1024,P=Fa($e(P)),P[Ln]>N&&(W=lr(P,0,N),rf(w,2,61,"string value is too long. It has been truncated to "+N+" characters.",{value:P},!0))),W||P}s(wl,"dataSanitizeString");function Rm(w,P){return NL(w,P,2048,66)}s(Rm,"dataSanitizeUrl");function G5(w,P){var N;return P&&P[Ln]>32768&&(N=lr(P,0,32768),rf(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:P},!0)),N||P}s(G5,"dataSanitizeMessage");function BL(w,P){var N;if(P){var W=""+P;W[Ln]>32768&&(N=lr(W,0,32768),rf(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:P},!0))}return N||P}s(BL,"dataSanitizeException");function Og(w,P){if(P){var N={};lt(P,function(W,de){if(te(de)&&Eo())try{de=hb()[$5](de)}catch(we){rf(w,2,49,"custom property is not valid",{exception:we},!0)}de=wl(w,de,8192),W=PL(w,W,N),N[W]=de}),P=N}return P}s(Og,"dataSanitizeProperties");function Jf(w,P){if(P){var N={};lt(P,function(W,de){W=PL(w,W,N),N[W]=de}),P=N}return P}s(Jf,"dataSanitizeMeasurements");function Ob(w,P){return P&&NL(w,P,128,69)[xv]()}s(Ob,"dataSanitizeId");function NL(w,P,N,W){var de;return P&&(P=Fa($e(P)),P[Ln]>N&&(de=lr(P,0,N),rf(w,2,W,"input is too long, it has been truncated to "+N+" characters.",{data:P},!0))),de||P}s(NL,"dataSanitizeInput");function m$(w){var P="00"+w;return nr(P,P[Ln]-3)}s(m$,"dsPadNumber");var ML=ee()||{},h$=0,Due=[null,null,null,null,null];function Qb(w){var P=h$,N=Due,W=N[P];return ML.createElement?N[P]||(W=N[P]=ML.createElement("a")):W={host:A$(w,!0)},W.href=w,P++,P>=N[Ln]&&(P=0),h$=P,W}s(Qb,"urlParseUrl");function Bue(w){var P,N=Qb(w);return N&&(P=N.href),P}s(Bue,"urlGetAbsoluteUrl");function Nue(w){var P,N=Qb(w);return N&&(P=N[Db]),P}s(Nue,"urlGetPathName");function g$(w,P){return w?w.toUpperCase()+" "+P:P}s(g$,"urlGetCompleteUrl");function A$(w,P){var N=Qg(w,P)||"";if(N){var W=N[Ev](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[Ln]>3&&ie(W[2])&&W[2][Ln]>0)return W[2]+(W[3]||"")}return N}s(A$,"urlParseHost");function Qg(w,P){var N=null;if(w){var W=w[Ev](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[Ln]>2&&ie(W[2])&&W[2][Ln]>0&&(N=W[2]||"",P&&W[Ln]>2)){var de=(W[1]||"")[kb](),we=W[3]||"";(de==="http"&&we===":80"||de==="https"&&we===":443")&&(we=""),N+=we}}return N}s(Qg,"urlParseFullHost");var y$=[wL+e_,"https://breeze.aimon.applicationinsights.io"+e_,"https://dc-int.services.visualstudio.com"+e_],Ub="cid-v1:";function C$(w){return Ao(y$,w[kb]())!==-1}s(C$,"isInternalApplicationInsightsEndpoint");function LL(w){Ub=w}s(LL,"correlationIdSetPrefix");function FL(){return Ub}s(FL,"correlationIdGetPrefix");function Hy(w,P,N){if(!P||w&&w.disableCorrelationHeaders)return!1;if(w&&w[kL]){for(var W=0;W<w.correlationHeaderExcludePatterns[Ln];W++)if(w[kL][W].test(P))return!1}var de=Qb(P).host[kb]();if(de&&(Kr(de,":443")!==-1||Kr(de,":80")!==-1)&&(de=(Qg(P,!0)||"")[kb]()),(!w||!w.enableCorsCorrelation)&&de&&de!==N)return!1;var we=w&&w.correlationHeaderDomains;if(we){var ke;if(Tn(we,function(Et){var gr=new RegExp(Et.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));ke=ke||gr.test(de)}),!ke)return!1}var We=w&&w.correlationHeaderExcludedDomains;if(!We||We[Ln]===0)return!0;for(var W=0;W<We[Ln];W++){var it=new RegExp(We[W].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(it.test(de))return!1}return de&&de[Ln]>0}s(Hy,"correlationIdCanIncludeCorrelationHeader");function v$(w){if(w){var P=x$(w,p$[1]);if(P&&P!==Ub)return P}}s(v$,"correlationIdGetCorrelationContext");function x$(w,P){if(w)for(var N=w[Uy](","),W=0;W<N[Ln];++W){var de=N[W][Uy]("=");if(de[Ln]===2&&de[0]===P)return de[1]}}s(x$,"correlationIdGetCorrelationContextValue");function E$(w,P,N,W){var de,we=W,ke=W;if(P&&P[Ln]>0){var We=Qb(P);if(de=We.host,!we)if(We[Db]!=null){var it=We.pathname[Ln]===0?"/":We[Db];it.charAt(0)!=="/"&&(it="/"+it),ke=We[Db],we=wl(w,N?N+" "+it:it)}else we=wl(w,P)}else de=W,we=W;return{target:de,name:we,data:ke}}s(E$,"AjaxHelperParseDependencyPath");function Mue(){var w=ov();if(w&&w.now&&w.timing){var P=w.now()+w.timing.navigationStart;if(P>0)return P}return Il()}s(Mue,"dateTimeUtilsNow");function Lue(w,P){var N=null;return w!==0&&P!==0&&!$(w)&&!$(P)&&(N=P-w),N}s(Lue,"dateTimeUtilsDuration");function OL(w,P){var N=w||{};return{getName:s(function(){return N[Yf]},"getName"),setName:s(function(W){P&&P.setName(W),N[Yf]=W},"setName"),getTraceId:s(function(){return N.traceID},"getTraceId"),setTraceId:s(function(W){P&&P.setTraceId(W),wb(W)&&(N.traceID=W)},"setTraceId"),getSpanId:s(function(){return N.parentID},"getSpanId"),setSpanId:s(function(W){P&&P.setSpanId(W),Sb(W)&&(N.parentID=W)},"setSpanId"),getTraceFlags:s(function(){return N.traceFlags},"getTraceFlags"),setTraceFlags:s(function(W){P&&P.setTraceFlags(W),N.traceFlags=W},"setTraceFlags")}}s(OL,"createDistributedTraceContextFromTrace");var qb=vm({LocalStorage:0,SessionStorage:1}),Fue=vm({AI:0,AI_AND_W3C:1,W3C:2}),o_=vm({Normal:1,Critical:2}),$y=void 0,sp=void 0,b$="";function Hb(){return V5()?$b(qb.LocalStorage):null}s(Hb,"_getLocalStorageObject");function $b(w){try{if($(F()))return null;var P=new Date()[xv](),N=D(w===qb.LocalStorage?"localStorage":"sessionStorage"),W=b$+P;N.setItem(W,P);var de=N.getItem(W)!==P;if(N[_L](W),!de)return N}catch{}return null}s($b,"_getVerifiedStorageObject");function Wb(){return Ug()?$b(qb.SessionStorage):null}s(Wb,"_getSessionStorageObject");function s_(){$y=!1,sp=!1}s(s_,"utlDisableStorage");function a_(w){b$=w||""}s(a_,"utlSetStoragePrefix");function Oue(){$y=V5(!0),sp=Ug(!0)}s(Oue,"utlEnableStorage");function V5(w){return(w||$y===void 0)&&($y=!!$b(qb.LocalStorage)),$y}s(V5,"utlCanUseLocalStorage");function I$(w,P){var N=Hb();if(N!==null)try{return N.getItem(P)}catch(W){$y=!1,rf(w,2,1,"Browser failed read of local storage. "+Py(W),{exception:le(W)})}return null}s(I$,"utlGetLocalStorage");function T$(w,P,N){var W=Hb();if(W!==null)try{return W.setItem(P,N),!0}catch(de){$y=!1,rf(w,2,3,"Browser failed write to local storage. "+Py(de),{exception:le(de)})}return!1}s(T$,"utlSetLocalStorage");function Xf(w,P){var N=Hb();if(N!==null)try{return N[_L](P),!0}catch(W){$y=!1,rf(w,2,5,"Browser failed removal of local storage item. "+Py(W),{exception:le(W)})}return!1}s(Xf,"utlRemoveStorage");function Ug(w){return(w||sp===void 0)&&(sp=!!$b(qb.SessionStorage)),sp}s(Ug,"utlCanUseSessionStorage");function jb(){var w=[];return Ug()&&lt(D("sessionStorage"),function(P){w.push(P)}),w}s(jb,"utlGetSessionStorageKeys");function w$(w,P){var N=Wb();if(N!==null)try{return N.getItem(P)}catch(W){sp=!1,rf(w,2,2,"Browser failed read of session storage. "+Py(W),{exception:le(W)})}return null}s(w$,"utlGetSessionStorage");function Que(w,P,N){var W=Wb();if(W!==null)try{return W.setItem(P,N),!0}catch(de){sp=!1,rf(w,2,4,"Browser failed write to session storage. "+Py(de),{exception:le(de)})}return!1}s(Que,"utlSetSessionStorage");function S$(w,P){var N=Wb();if(N!==null)try{return N[_L](P),!0}catch(W){sp=!1,rf(w,2,6,"Browser failed removal of session storage item. "+Py(W),{exception:le(W)})}return!1}s(S$,"utlRemoveSessionStorage");var Uue="appInsightsThrottle",que=function(){function w(P,N){var W=this,de,we,ke,We,it,Et,gr,Fn=!1,ti=!1;Mr(),W._getDbgPlgTargets=function(){return[gr]},W.getConfig=function(){return ke},W.canThrottle=function(Nt){var Yr=XL(Nt),vn=Jn(Nt);return Lo(vn,de,Yr)},W.isTriggered=function(Nt){return W$(Nt)},W.isReady=function(){return Fn},W.flush=function(Nt){try{var Yr=j$(Nt);if(Yr&&Yr[Ln]>0){var vn=Yr.slice(0);return gr[Nt]=[],Tn(vn,function(gs){xr(gs.msgID,gs[t_],gs.severity,!1)}),!0}}catch{}return!1},W.flushAll=function(){try{if(gr){var Nt=!0;return lt(gr,function(Yr){var vn=W.flush(parseInt(Yr));Nt=Nt&&vn}),Nt}}catch{}return!1},W.onReadyState=function(Nt,Yr){return Yr===void 0&&(Yr=!0),Fn=$(Nt)?!0:Nt,Fn&&Yr?W.flushAll():null},W.sendMessage=function(Nt,Yr,vn){return xr(Nt,Yr,vn,!0)};function xr(Nt,Yr,vn,gs){if(Fn){var Vc=ode(Nt);if(!Vc)return;var Qa=Jn(Nt),zc=XL(Nt),Iv=Lo(Qa,de,zc),zy=!1,tI=0,G$=W$(Nt);try{Iv&&!G$?(tI=Ir(Qa.limit.maxSendNumber,zc[Pb]+1),zc[Pb]=0,zy=!0,it[Nt]=!0,zc[H5]=new Date):(it[Nt]=Iv,zc[Pb]+=1);var V$=io(Nt);JL(we,V$,zc);for(var a4=0;a4<tI;a4++)$$(Nt,we,Yr,vn)}catch{}return{isThrottled:zy,throttleNum:tI}}else if(gs){var sde=j$(Nt);sde.push({msgID:Nt,message:Yr,severity:vn})}return null}s(xr,"_flushMessage");function Mr(){we=Sue(P),it={},We={},gr={},ke={},On(109),Et=mL(N)?N:"",P.addUnloadHook(r$(P.config,function(Nt){var Yr=Nt.cfg;de=V5();var vn=Yr.throttleMgrCfg||{};lt(vn,function(gs,Vc){On(parseInt(gs),Vc)})}))}s(Mr,"_initConfig");function Jn(Nt){return ke[Nt]||ke[109]}s(Jn,"_getCfgByKey");function On(Nt,Yr){var vn,gs;try{var Vc=Yr||{},Qa={};Qa.disabled=!!Vc.disabled;var zc=Vc.interval||{};ti=zc?.daysOfMonth&&zc?.daysOfMonth[Ln]>0,Qa.interval=Oi(zc);var Iv={samplingRate:((vn=Vc.limit)===null||vn===void 0?void 0:vn.samplingRate)||100,maxSendNumber:((gs=Vc.limit)===null||gs===void 0?void 0:gs.maxSendNumber)||1};Qa.limit=Iv,ke[Nt]=Qa}catch{}}s(On,"_setCfgByKey");function Oi(Nt){Nt=Nt||{};var Yr=Nt?.monthInterval,vn=Nt?.dayInterval;return $(Yr)&&$(vn)&&(Nt.monthInterval=3,ti||(Nt.daysOfMonth=[28],ti=!0)),Nt={monthInterval:Nt?.monthInterval,dayInterval:Nt?.dayInterval,daysOfMonth:Nt?.daysOfMonth},Nt}s(Oi,"_getIntervalConfig");function Lo(Nt,Yr,vn){if(Nt&&!Nt.disabled&&Yr&&mL(vn)){var gs=h_(),Vc=vn.date,Qa=Nt.interval,zc=1;if(Qa?.monthInterval){var Iv=(gs.getUTCFullYear()-Vc.getUTCFullYear())*12+gs.getUTCMonth()-Vc.getUTCMonth();zc=s4(Qa.monthInterval,0,Iv)}var zy=1;if(ti)zy=Ao(Qa.daysOfMonth,gs[RL]());else if(Qa?.dayInterval){var tI=_u((gs.getTime()-Vc.getTime())/864e5);zy=s4(Qa.dayInterval,0,tI)}return zc>=0&&zy>=0}return!1}s(Lo,"_canThrottle");function io(Nt,Yr){var vn=mL(Yr)?Yr:"";return Nt?Uue+vn+"-"+Nt:null}s(io,"_getLocalStorageName");function Gc(Nt){try{if(Nt){var Yr=new Date;return Nt.getUTCFullYear()===Yr.getUTCFullYear()&&Nt.getUTCMonth()===Yr.getUTCMonth()&&Nt[RL]()===Yr[RL]()}}catch{}return!1}s(Gc,"_isTriggeredOnCurDate");function eI(Nt,Yr,vn){try{var gs={date:h_(),count:0};if(Nt){var Vc=JSON.parse(Nt),Qa={date:h_(Vc.date)||gs.date,count:Vc[Pb]||gs[Pb],preTriggerDate:Vc.preTriggerDate?h_(Vc[H5]):void 0};return Qa}else return JL(Yr,vn,gs),gs}catch{}return null}s(eI,"_getLocalStorageObj");function h_(Nt){try{if(Nt){var Yr=new Date(Nt);if(!isNaN(Yr.getDate()))return Yr}else return new Date}catch{}return null}s(h_,"_getThrottleDate");function JL(Nt,Yr,vn){try{return T$(Nt,Yr,Fa(JSON[$5](vn)))}catch{}return!1}s(JL,"_resetLocalStorage");function s4(Nt,Yr,vn){return Nt<=0?1:vn>=Yr&&(vn-Yr)%Nt==0?_u((vn-Yr)/Nt)+1:-1}s(s4,"_checkInterval");function $$(Nt,Yr,vn,gs){rf(Yr,gs||1,Nt,vn)}s($$,"_sendMessage");function ode(Nt){try{var Yr=Jn(Nt);return b5(1e6)<=Yr.limit.samplingRate}catch{}return!1}s(ode,"_canSampledIn");function XL(Nt){try{var Yr=We[Nt];if(!Yr){var vn=io(Nt,Et);Yr=eI(I$(we,vn),we,vn),We[Nt]=Yr}return We[Nt]}catch{}return null}s(XL,"_getLocalStorageObjByKey");function W$(Nt){var Yr=it[Nt];if($(Yr)){Yr=!1;var vn=XL(Nt);vn&&(Yr=Gc(vn[H5])),it[Nt]=Yr}return it[Nt]}s(W$,"_isTrigger");function j$(Nt){return gr=gr||{},$(gr[Nt])&&(gr[Nt]=[]),gr[Nt]}s(j$,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),QL=";",km="=";function z5(w){if(!w)return{};var P=w[Uy](QL),N=Xo(P,function(de,we){var ke=we[Uy](km);if(ke[Ln]===2){var We=ke[0][kb](),it=ke[1];de[We]=it}return de},{});if(Ft(N)[Ln]>0){if(N.endpointsuffix){var W=N.location?N.location+".":"";N[vv]=N[vv]||"https://"+W+"dc."+N.endpointsuffix}N[vv]=N[vv]||wL,$f(N[vv],"/")&&(N[vv]=N[vv].slice(0,-1))}return N}s(z5,"parseConnectionString");var K5={parse:z5},Y5=function(){function w(P,N,W){var de=this,we=this;we.ver=1,we.sampleRate=100,we.tags={},we[Yf]=wl(P,W)||Sm,we.data=N,we.time=Dg(new Date),we[qy]={time:1,iKey:1,name:1,sampleRate:s(function(){return de.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),Hue=function(){function w(P,N,W,de){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var we=this;we.ver=2,we[Yf]=wl(P,N)||Sm,we[_m]=Og(P,W),we[Ad]=Jf(P,de)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),$ue=58,_$=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Wue=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Gb=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,R$=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,jue=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Gue=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Vue=/([^\(\s\n]+):([0-9]+)$/,k$="<no_method>",Vb="error",of="stack",c_="stackDetails",J5="errorSrc",l_="message",u_="description",UL=[{re:Wue,len:5,m:1,fn:2,ln:3,col:4},{chk:X5,pre:Fr,re:Gb,len:4,m:1,fn:2,ln:3},{re:R$,len:3,m:1,fn:2,hdl:HL},{re:jue,len:2,fn:1,hdl:HL}];function Fr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Fr,"_scrubAnonymous");function X5(w){return Kr(w,"[native")<0}s(X5,"_ignoreNative");function d_(w,P){var N=w;return N&&!ie(N)&&(JSON&&JSON[$5]?(N=JSON[$5](w),P&&(!N||N==="{}")&&(ae(w[xv])?N=w[xv]():N=""+w)):N=""+w+" - (Missing JSON.stringify)"),N||""}s(d_,"_stringify");function Wy(w,P){var N=w;return w&&(N&&!ie(N)&&(N=w[l_]||w[u_]||N),N&&!ie(N)&&(N=d_(N,!0)),w.filename&&(N=N+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),P&&P!=="String"&&P!=="Object"&&P!=="Error"&&Kr(N||"",P)===-1&&(N=P+": "+N),N||""}s(Wy,"_formatMessage");function P$(w){try{if(te(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(P$,"_isExceptionDetailsInternal");function D$(w){try{if(te(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(D$,"_isExceptionInternal");function Z5(w){return w&&w.src&&ie(w.src)&&w.obj&&pe(w.obj)}s(Z5,"_isStackDetails");function qg(w){var P=w||"";ie(P)||(ie(P[of])?P=P[of]:P=""+P);var N=P[Uy](`
`);return{src:P,obj:N}}s(qg,"_convertStackObj");function B$(w){for(var P=[],N=w[Uy](`
`),W=0;W<N[Ln];W++){var de=N[W];N[W+1]&&(de+="@"+N[W+1],W++),P.push(de)}return{src:w,obj:P}}s(B$,"_getOperaStack");function e4(w){var P=null;if(w)try{if(w[of])P=qg(w[of]);else if(w[Vb]&&w[Vb][of])P=qg(w[Vb][of]);else if(w.exception&&w.exception[of])P=qg(w.exception[of]);else if(Z5(w))P=w;else if(Z5(w[c_]))P=w[c_];else if(_e()&&_e().opera&&w[l_])P=B$(w[t_]);else if(w.reason&&w.reason[of])P=qg(w.reason[of]);else if(ie(w))P=qg(w);else{var N=w[l_]||w[u_]||"";ie(w[J5])&&(N&&(N+=`
`),N+=" from "+w[J5]),N&&(P=qg(N))}}catch(W){P=qg(W)}return P||{src:"",obj:null}}s(e4,"_getStackFromErrorObj");function N$(w){var P="";return w&&(w.obj?P=w.obj.join(`
`):P=w.src||""),P}s(N$,"_formatStackTrace");function t4(w){var P,N=w.obj;if(N&&N[Ln]>0){P=[];var W=0,de=!1,we=0;Tn(N,function(Jn){if(de||zue(Jn)){var On=$e(Jn);de=!0;var Oi=Kue(On,W);Oi&&(we+=Oi[Nb],P.push(Oi),W++)}});var ke=32*1024;if(we>ke)for(var We=0,it=P[Ln]-1,Et=0,gr=We,Fn=it;We<it;){var ti=P[We][Nb],xr=P[it][Nb];if(Et+=ti+xr,Et>ke){var Mr=Fn-gr+1;P.splice(gr,Mr);break}gr=We,Fn=it,We++,it--}}return P}s(t4,"_parseStack");function zb(w){var P="";if(w&&(P=w.typeName||w[Yf]||"",!P))try{var N=/function (.{1,200})\(/,W=N.exec(w.constructor[xv]());P=W&&W[Ln]>1?W[1]:""}catch{}return P}s(zb,"_getErrorType");function r4(w){if(w)try{if(!ie(w)){var P=zb(w),N=d_(w,!1);return(!N||N==="{}")&&(w[Vb]&&(w=w[Vb],P=zb(w)),N=d_(w,!0)),Kr(N,P)!==0&&P!=="String"?P+":"+N:N}}catch{}return""+(w||"")}s(r4,"_formatErrorCode");var Pm=function(){function w(P,N,W,de,we,ke){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var We=this;We.ver=2,D$(N)?(We[Mb]=N[Mb]||[],We[_m]=N[_m],We[Ad]=N[Ad],N[n_]&&(We[n_]=N[n_]),N.id&&(We.id=N.id,N[_m].id=N.id),N[Lb]&&(We[Lb]=N[Lb]),$(N.isManual)||(We.isManual=N.isManual)):(W||(W={}),ke&&(W.id=ke),We[Mb]=[F$(P,N,W)],We[_m]=Og(P,W),We[Ad]=Jf(P,de),we&&(We[n_]=we),ke&&(We.id=ke))}return s(w,"Exception"),w.CreateAutoException=function(P,N,W,de,we,ke,We,it){var Et=zb(we||ke||P);return{message:Wy(P,Et),url:N,lineNumber:W,columnNumber:de,error:r4(we||ke||P),evt:r4(ke||P),typeName:Et,stackDetails:e4(We||we||ke),errorSrc:it}},w.CreateFromInterface=function(P,N,W,de){var we=N[Mb]&&vi(N[Mb],function(We){return qL(P,We)}),ke=new w(P,f5(f5({},N),{exceptions:we}),W,de);return ke},w.prototype.toInterface=function(){var P=this,N=P.exceptions,W=P.properties,de=P.measurements,we=P.severityLevel,ke=P.problemGroup,We=P.id,it=P.isManual,Et=N instanceof Array&&vi(N,function(gr){return gr.toInterface()})||void 0;return{ver:"4.0",exceptions:Et,severityLevel:we,properties:W,measurements:de,problemGroup:ke,id:We,isManual:it}},w.CreateSimpleException=function(P,N,W,de,we,ke){var We;return{exceptions:[(We={},We[W5]=!0,We.message=P,We.stack=we,We.typeName=N,We)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=r4,w}(),M$=Jt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function L$(){var w=this,P=pe(w[nf])&&vi(w[nf],function(W){return Q$(W)}),N={id:w.id,outerId:w.outerId,typeName:w[r_],message:w[t_],hasFullStack:w[W5],stack:w[of],parsedStack:P||void 0};return N}s(L$,"_toInterface");function F$(w,P,N){var W,de,we,ke,We,it,Et,gr;if(P$(P))ke=P[r_],We=P[t_],Et=P[of],gr=P[nf]||[],it=P[W5];else{var Fn=P,ti=Fn&&Fn.evt;Ae(Fn)||(Fn=Fn[Vb]||ti||Fn),ke=wl(w,zb(Fn))||Sm,We=G5(w,Wy(P||Fn,ke))||Sm;var xr=P[c_]||e4(P);gr=t4(xr),pe(gr)&&vi(gr,function(Mr){Mr[j5]=wl(w,Mr[j5]),Mr[op]=wl(w,Mr[op])}),Et=BL(w,N$(xr)),it=pe(gr)&&gr[Ln]>0,N&&(N[r_]=N[r_]||ke)}return W={},W[qy]=M$,W.id=de,W.outerId=we,W.typeName=ke,W.message=We,W[W5]=it,W.stack=Et,W.parsedStack=gr,W.toInterface=L$,W}s(F$,"_createExceptionDetails");function qL(w,P){var N=pe(P[nf])&&vi(P[nf],function(de){return O$(de)})||P[nf],W=F$(w,f5(f5({},P),{parsedStack:N}));return W}s(qL,"_createExDetailsFromInterface");function f_(w,P){var N=P[Ev](Gue);if(N&&N[Ln]>=4)w[op]=N[1],w[Fb]=parseInt(N[2]);else{var W=P[Ev](Vue);W&&W[Ln]>=3?(w[op]=W[1],w[Fb]=parseInt(W[2])):w[op]=P}}s(f_,"_parseFilename");function HL(w,P,N){var W=w[op];P.fn&&N&&N[Ln]>P.fn&&(P.ln&&N[Ln]>P.ln?(W=Fa(N[P.fn]||""),w[Fb]=parseInt(Fa(N[P.ln]||""))||0):W=Fa(N[P.fn]||"")),W&&f_(w,W)}s(HL,"_handleFilename");function zue(w){var P=!1;if(w&&ie(w)){var N=Fa(w);N&&(P=_$.test(N))}return P}s(zue,"_isStackFrame");var $L=Jt({level:1,method:1,assembly:0,fileName:0,line:0});function Kue(w,P){var N,W;if(w&&ie(w)&&Fa(w)){W=(N={},N[qy]=$L,N.level=P,N.assembly=Fa(w),N.method=k$,N.fileName="",N.line=0,N.sizeInBytes=0,N);for(var de=0;de<UL[Ln];){var we=UL[de];if(we.chk&&!we.chk(w))break;we.pre&&(w=we.pre(w));var ke=w[Ev](we.re);if(ke&&ke[Ln]>=we.len){we.m&&(W.method=Fa(ke[we.m]||k$)),we.hdl?we.hdl(W,we,ke):we.fn&&(we.ln?(W[op]=Fa(ke[we.fn]||""),W[Fb]=parseInt(Fa(ke[we.ln]||""))||0):f_(W,ke[we.fn]||""));break}de++}}return WL(W)}s(Kue,"_extractStackFrame");function O$(w){var P,N=(P={},P[qy]=$L,P.level=w.level,P.method=w.method,P.assembly=w[j5],P.fileName=w[op],P.line=w[Fb],P.sizeInBytes=0,P);return WL(N)}s(O$,"_stackFrameFromInterface");function WL(w){var P=$ue;return w&&(P+=w.method[Ln],P+=w.assembly[Ln],P+=w.fileName[Ln],P+=w.level.toString()[Ln],P+=w.line.toString()[Ln],w[Nb]=P),w}s(WL,"_populateFrameSizeInBytes");function Q$(w){return{level:w.level,method:w.method,assembly:w[j5],fileName:w[op],line:w[Fb]}}s(Q$,"_parsedFrameToInterface");var U$=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),Yue=function(){function w(P,N,W,de,we,ke,We,it,Et){this.aiDataContract={ver:1,metrics:1,properties:0};var gr=this;gr.ver=2;var Fn=new U$;Fn[Pb]=de>0?de:void 0,Fn.max=isNaN(ke)||ke===null?void 0:ke,Fn.min=isNaN(we)||we===null?void 0:we,Fn[Yf]=wl(P,N)||Sm,Fn.value=W,Fn.stdDev=isNaN(We)||We===null?void 0:We,gr.metrics=[Fn],gr[_m]=Og(P,it),gr[Ad]=Jf(P,Et)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),Kb="";function Jue(w,P){return P===void 0&&(P=!1),w==null?P:w.toString()[kb]()==="true"}s(Jue,"stringToBoolOrDefault");function jL(w){(isNaN(w)||w<0)&&(w=0),w=XE(w);var P=Kb+w%1e3,N=Kb+_u(w/1e3)%60,W=Kb+_u(w/(1e3*60))%60,de=Kb+_u(w/(1e3*60*60))%24,we=_u(w/(1e3*60*60*24));return P=P[Ln]===1?"00"+P:P[Ln]===2?"0"+P:P,N=N[Ln]<2?"0"+N:N,W=W[Ln]<2?"0"+W:W,de=de[Ln]<2?"0"+de:de,(we>0?we+".":Kb)+de+":"+W+":"+N+"."+P}s(jL,"msToTimeSpan");function Xue(w,P){var N=null;return Tn(w,function(W){if(W.identifier===P)return N=W,-1}),N}s(Xue,"getExtensionByName");function jy(w,P,N,W,de){return!de&&ie(w)&&(w==="Script error."||w==="Script error")}s(jy,"isCrossOriginError");var Zue=function(){function w(P,N,W,de,we,ke,We){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var it=this;it.ver=2,it.id=Ob(P,We),it.url=Rm(P,W),it[Yf]=wl(P,N)||Sm,isNaN(de)||(it[i_]=jL(de)),it[_m]=Og(P,we),it[Ad]=Jf(P,ke)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),Yb=function(){function w(P,N,W,de,we,ke,We,it,Et,gr,Fn,ti){Et===void 0&&(Et="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var xr=this;xr.ver=2,xr.id=N,xr[i_]=jL(we),xr.success=ke,xr.resultCode=We+"",xr.type=wl(P,Et);var Mr=E$(P,W,it,de);xr.data=Rm(P,de)||Mr.data,xr.target=wl(P,Mr.target),gr&&(xr.target="".concat(xr.target," | ").concat(gr)),xr[Yf]=wl(P,Mr[Yf]),xr[_m]=Og(P,Fn),xr[Ad]=Jf(P,ti)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),GL=function(){function w(P,N,W,de,we){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var ke=this;ke.ver=2,N=N||Sm,ke[t_]=G5(P,N),ke[_m]=Og(P,de),ke[Ad]=Jf(P,we),W&&(ke[n_]=W)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),p_=function(){function w(P,N,W,de,we,ke,We){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var it=this;it.ver=2,it.url=Rm(P,W),it[Yf]=wl(P,N)||Sm,it[_m]=Og(P,we),it[Ad]=Jf(P,ke),We&&(it.domProcessing=We.domProcessing,it[i_]=We[i_],it.networkConnect=We.networkConnect,it.perfTotal=We.perfTotal,it.receivedResponse=We.receivedResponse,it.sentRequest=We.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),ede=function(){function w(P,N){this.aiDataContract={baseType:1,baseData:1},this.baseType=P,this.baseData=N}return s(w,"Data"),w}(),n4=vm({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),tde=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(P,N,W,de){de===void 0&&(de=!1);var we;return W&&P[Bb]&&P[Bb][W]&&!$(P[Bb][W][N])?we=P[Bb][W][N]:we=P[N],$(we)?de:we},w}();function Dm(w){var P="ai."+w+".";return function(N){return P+N}}s(Dm,"_aiNameFunc");var Jb=Dm("application"),Tc=Dm("device"),i4=Dm("location"),Xb=Dm("operation"),o4=Dm("session"),Gy=Dm("user"),bv=Dm("cloud"),m_=Dm("internal"),Vy=function(w){Ry(P,w);function P(){return w.call(this)||this}return s(P,"ContextTagKeys"),P}(GS({applicationVersion:Jb("ver"),applicationBuild:Jb("build"),applicationTypeId:Jb("typeId"),applicationId:Jb("applicationId"),applicationLayer:Jb("layer"),deviceId:Tc("id"),deviceIp:Tc("ip"),deviceLanguage:Tc("language"),deviceLocale:Tc("locale"),deviceModel:Tc("model"),deviceFriendlyName:Tc("friendlyName"),deviceNetwork:Tc("network"),deviceNetworkName:Tc("networkName"),deviceOEMName:Tc("oemName"),deviceOS:Tc("os"),deviceOSVersion:Tc("osVersion"),deviceRoleInstance:Tc("roleInstance"),deviceRoleName:Tc("roleName"),deviceScreenResolution:Tc("screenResolution"),deviceType:Tc("type"),deviceMachineName:Tc("machineName"),deviceVMName:Tc("vmName"),deviceBrowser:Tc("browser"),deviceBrowserVersion:Tc("browserVersion"),locationIp:i4("ip"),locationCountry:i4("country"),locationProvince:i4("province"),locationCity:i4("city"),operationId:Xb("id"),operationName:Xb("name"),operationParentId:Xb("parentId"),operationRootId:Xb("rootId"),operationSyntheticSource:Xb("syntheticSource"),operationCorrelationVector:Xb("correlationVector"),sessionId:o4("id"),sessionIsFirst:o4("isFirst"),sessionIsNew:o4("isNew"),userAccountAcquisitionDate:Gy("accountAcquisitionDate"),userAccountId:Gy("accountId"),userAgent:Gy("userAgent"),userId:Gy("id"),userStoreRegion:Gy("storeRegion"),userAuthUserId:Gy("authUserId"),userAnonymousUserAcquisitionDate:Gy("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Gy("authUserAcquisitionDate"),cloudName:bv("name"),cloudRole:bv("role"),cloudRoleVer:bv("roleVer"),cloudRoleInstance:bv("roleInstance"),cloudEnvironment:bv("environment"),cloudLocation:bv("location"),cloudDeploymentUnit:bv("deploymentUnit"),internalNodeName:m_("nodeName"),internalSdkVersion:m_("sdkVersion"),internalAgentVersion:m_("agentVersion"),internalSnippet:m_("snippet"),internalSdkSrc:m_("sdkSrc")}));function VL(w,P,N,W,de,we){N=wl(W,N)||Sm,($(w)||$(P)||$(N))&&qe("Input doesn't contain all required fields");var ke="";w[SL]&&(ke=w[SL],delete w[SL]);var We={name:N,time:Dg(new Date),iKey:ke,ext:we||{},tags:[],data:{},baseType:P,baseData:w};return $(de)||lt(de,function(it,Et){We.data[it]=Et}),We}s(VL,"createTelemetryItem");var zL=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=VL,w}(),rde={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},nde=new Vy;function q$(w){var P=null;if(ae(Event))P=new Event(w);else{var N=ee();N&&N.createEvent&&(P=N.createEvent("Event"),P.initEvent(w,!0,!0))}return P}s(q$,"createDomEvent");function KL(w,P){u$(w,null,null,P)}s(KL,"_disableEvents");function H$(w){var P=ee(),N=St(),W=!1,de=[],we=1;N&&!$(N.onLine)&&!N.onLine&&(we=2);var ke=0,We=ti(),it=Pue(Ng("OfflineListener"),w);try{if(gr(_e())&&(W=!0),P){var Et=P.body||P;Et.ononline&&gr(Et)&&(W=!0)}}catch{W=!1}function gr(io){var Gc=!1;return io&&(Gc=TL(io,"online",Jn,it),Gc&&TL(io,"offline",On,it)),Gc}s(gr,"_enableEvents");function Fn(){return We}s(Fn,"_isOnline");function ti(){return!(ke===2||we===2)}s(ti,"calCurrentState");function xr(){var io=ti();We!==io&&(We=io,Tn(de,function(Gc){var eI={isOnline:We,rState:we,uState:ke};try{Gc(eI)}catch{}}))}s(xr,"listnerNoticeCheck");function Mr(io){ke=io,xr()}s(Mr,"setOnlineState");function Jn(){we=1,xr()}s(Jn,"_setOnline");function On(){we=2,xr()}s(On,"_setOffline");function Oi(){var io=_e();if(io&&W){if(KL(io,it),P){var Gc=P.body||P;J(Gc.ononline)||KL(Gc,it)}W=!1}}s(Oi,"_unload");function Lo(io){return de.push(io),{rm:s(function(){var Gc=de.indexOf(io);if(Gc>-1)return de.splice(Gc,1)},"rm")}}return s(Lo,"addListener"),{isOnline:Fn,isListening:s(function(){return W},"isListening"),unload:Oi,addListener:Lo,setOnlineState:Mr}}s(H$,"createOfflineListener");var ide="AppInsightsPropertiesPlugin",YL="AppInsightsChannelPlugin",Zb="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Zb,t.BreezeChannelIdentifier=YL,t.ConfigurationManager=tde,t.ConnectionStringParser=K5,t.ContextTagKeys=Vy,t.CtxTagKeys=nde,t.DEFAULT_BREEZE_ENDPOINT=wL,t.DEFAULT_BREEZE_PATH=e_,t.Data=ede,t.DisabledPropertyName=U5,t.DistributedTracingModes=Fue,t.Envelope=Y5,t.Event=Hue,t.EventPersistence=o_,t.Exception=Pm,t.Extensions=rde,t.HttpMethod=f$,t.Metric=Yue,t.PageView=Zue,t.PageViewPerformance=p_,t.ProcessLegacy=q5,t.PropertiesPluginIdentifier=ide,t.RemoteDependencyData=Yb,t.RequestHeaders=p$,t.SampleRate=d$,t.SeverityLevel=n4,t.TelemetryItemCreator=zL,t.ThrottleMgr=que,t.Trace=GL,t.correlationIdCanIncludeCorrelationHeader=Hy,t.correlationIdGetCorrelationContext=v$,t.correlationIdGetCorrelationContextValue=x$,t.correlationIdGetPrefix=FL,t.correlationIdSetPrefix=LL,t.createDistributedTraceContextFromTrace=OL,t.createDomEvent=q$,t.createOfflineListener=H$,t.createTelemetryItem=VL,t.createTraceParent=Tb,t.dataSanitizeException=BL,t.dataSanitizeId=Ob,t.dataSanitizeInput=NL,t.dataSanitizeKey=DL,t.dataSanitizeKeyAndAddUniqueness=PL,t.dataSanitizeMeasurements=Jf,t.dataSanitizeMessage=G5,t.dataSanitizeProperties=Og,t.dataSanitizeString=wl,t.dataSanitizeUrl=Rm,t.dateTimeUtilsDuration=Lue,t.dateTimeUtilsNow=Mue,t.dsPadNumber=m$,t.findAllScripts=EL,t.findW3cTraceParent=xL,t.formatTraceParent=Cv,t.getExtensionByName=Xue,t.isBeaconApiSupported=By,t.isCrossOriginError=jy,t.isInternalApplicationInsightsEndpoint=C$,t.isSampledFlag=M5,t.isValidSpanId=Sb,t.isValidTraceId=wb,t.isValidTraceParent=_b,t.msToTimeSpan=jL,t.parseConnectionString=z5,t.parseTraceParent=Kf,t.strNotSpecified=Sm,t.stringToBoolOrDefault=Jue,t.urlGetAbsoluteUrl=Bue,t.urlGetCompleteUrl=g$,t.urlGetPathName=Nue,t.urlParseFullHost=Qg,t.urlParseHost=A$,t.urlParseUrl=Qb,t.utlCanUseLocalStorage=V5,t.utlCanUseSessionStorage=Ug,t.utlDisableStorage=s_,t.utlEnableStorage=Oue,t.utlGetLocalStorage=I$,t.utlGetSessionStorage=w$,t.utlGetSessionStorageKeys=jb,t.utlRemoveSessionStorage=S$,t.utlRemoveStorage=Xf,t.utlSetLocalStorage=T$,t.utlSetSessionStorage=Que,t.utlSetStoragePrefix=a_})});var H6e=H((zG,q6e)=>{d();(function(t,e){typeof zG=="object"&&typeof q6e<"u"?e(zG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(zG,function(t){"use strict";function e(v,I){return v||I}s(e,"_pureAssign");function r(v,I){return v[I]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),S=r(b,l),R=e(String),B=r(R,l),L=e(Math),O=e(Array),Y=r(O,l),V=r(Y,"slice");function z(v,I){try{return{v:v.apply(this,I)}}catch(T){return{e:T}}}s(z,"safe");function Q(v,I){var T=z(v);return T.e?I:T.v}s(Q,"safeGet");var U;function Z(v){return function(I){return typeof I===v}}s(Z,"_createIs");function J(v){var I="[object "+v+"]";return function(T){return!!(T&&j(T)===I)}}s(J,"_createObjIs");function j(v){return S[E].call(v)}s(j,"objToString");function $(v){return typeof v===f||v===f}s($,"isUndefined");function X(v){return!te(v)}s(X,"isStrictUndefined");function ie(v){return v===i||$(v)}s(ie,"isNullOrUndefined");function ae(v){return v===i||!te(v)}s(ae,"isStrictNullOrUndefined");function te(v){return!!v||v!==n}s(te,"isDefined");function pe(v){return!U&&(U=["string","number","boolean",f,"symbol","bigint"]),v!==c&&U.indexOf(v)!==-1}s(pe,"isPrimitiveType");var Ae=Z("string"),Oe=Z(a);function Te(v){return!v&&ie(v)?!1:!!v&&typeof v===c}s(Te,"isObject");var Je=r(O,"isArray"),Fe=J("Date"),lt=Z("number"),_t=Z("boolean"),xt=J("Error");function ht(v){return!!(v&&v.then&&Oe(v.then))}s(ht,"isPromiseLike");function ue(v){return!(!v||Q(function(){return!(v&&0+v)},!v))}s(ue,"isTruthy");var Ue=r(b,"getOwnPropertyDescriptor");function ye(v,I){return!!v&&S.hasOwnProperty[y](v,I)}s(ye,"objHasOwnProperty");var $e=e(r(b,"hasOwn"),se);function se(v,I){return ye(v,I)||!!Ue(v,I)}s(se,"polyObjHasOwn");function le(v,I,T){if(v&&Te(v)){for(var k in v)if($e(v,k)&&I[y](T||v,k,v[k])===-1)break}}s(le,"objForEachKey");var qe={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Be(v){var I={};if(I[qe.c]=!0,I[qe.e]=!0,v.l){I.get=function(){return v.l.v};var T=Ue(v.l,"v");T&&T.set&&(I.set=function(k){v.l.v=k})}return le(v,function(k,M){I[qe[k]]=X(M)?I[qe[k]]:M}),I}s(Be,"_createProp");var Ee=r(b,"defineProperty");function je(v,I,T){return Ee(v,I,Be(T))}s(je,"objDefine");function tt(v,I,T,k,M){var q={};return le(v,function(G,ce){pt(q,G,I?ce:G),pt(q,ce,T?ce:G)}),k?k(q):q}s(tt,"_createKeyValueMap");function pt(v,I,T,k){Ee(v,I,{value:T,enumerable:!0,writable:!1})}s(pt,"_assignMapValue");var Ft=e(R),Jt="[object Error]";function Qt(v,I){var T=o,k=S[E][y](v);k===Jt&&(v={stack:Ft(v.stack),message:Ft(v.message),name:Ft(v.name)});try{T=JSON.stringify(v,i,I?typeof I=="number"?I:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ft(v)}catch(M){T=" - "+Qt(M,I)}return k+": "+T}s(Qt,"dumpObj");function Vr(v){throw new Error(v)}s(Vr,"throwError");function Pr(v){throw new TypeError(v)}s(Pr,"throwTypeError");var ln=r(b,"freeze");function ve(v){return v}s(ve,"_doNothing");function Ge(v){return v[u]||i}s(Ge,"_getProto");var ft=r(b,"assign"),Tt=r(b,"keys");function or(v){return ln&&le(v,function(I,T){(Je(T)||Te(T))&&or(T)}),Zt(v)}s(or,"objDeepFreeze");var Zt=e(ln,ve),Ir=e(r(b,"getPrototypeOf"),Ge);function ur(v){return tt(v,1,0,Zt)}s(ur,"createEnum");function rr(v){return tt(v,0,0,Zt)}s(rr,"createEnumKeyMap");function lr(v){var I={};return le(v,function(T,k){pt(I,T,k[1]),pt(I,k[0],k[1])}),Zt(I)}s(lr,"createSimpleMap");function nr(v){return lr(v)}s(nr,"createTypeMap");var Br=rr({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),zr="__tsUtils$gblCfg",sn;function Cn(){var v;return typeof globalThis!==f&&(v=globalThis),!v&&typeof self!==f&&(v=self),!v&&typeof window!==f&&(v=window),!v&&typeof global!==f&&(v=global),v}s(Cn,"_getGlobalValue");function ni(){if(!sn){var v=z(Cn).v||{};sn=v[zr]=v[zr]||{}}return sn}s(ni,"_getGlobalConfig");var _n=ei;function ei(v,I,T){var k=I?I[v]:i;return function(M){var q=(M?M[v]:i)||k;if(q||T){var G=arguments;return(q||T).apply(M,q?V[y](G,1):G)}Pr('"'+Ft(v)+'" not defined for '+Qt(M))}}s(ei,"_unwrapFunctionWithPoly");function an(v){return function(I){return I[v]}}s(an,"_unwrapProp");var Yn=r(L,"min"),Pe=r(L,"max"),K=_n("slice",B),Ce=_n("substring",B),Ie=ei("substr",B,F);function F(v,I,T){return ie(v)&&Pr("Invalid "+Qt(v)),T<0?o:(I=I||0,I<0&&(I=Pe(I+v[g],0)),$(T)?K(v,I):K(v,I,I+T))}s(F,"polyStrSubstr");function D(v,I){return Ce(v,0,I)}s(D,"strLeft");var ee="_urid",ge;function _e(){if(!ge){var v=ni();ge=v.gblSym=v.gblSym||{k:{},s:{}}}return ge}s(_e,"_globalSymbolRegistry");var ut;function St(v){var I={description:Ft(v),toString:s(function(){return m+"("+v+")"},"toString")};return I[h]=!0,I}s(St,"polyNewSymbol");function Kt(v){var I=_e();if(!$e(I.k,v)){var T=St(v),k=Tt(I.s).length;T[ee]=function(){return k+"_"+T[E]()},I.k[v]=T,I.s[T[ee]()]=Ft(v)}return I.k[v]}s(Kt,"polySymbolFor");function er(v){!ut&&(ut={});var I,T=Br[v];return T&&(I=ut[T]=ut[T]||St(m+"."+T)),I}s(er,"polyGetKnownSymbol");var Yt;function bt(){Yt=ni()}s(bt,"_initTestHooks");function yr(v){var I={};return!Yt&&bt(),I.b=Yt.lzy,Ee(I,"v",{configurable:!0,get:s(function(){var T=v();return Yt.lzy||Ee(I,"v",{value:T}),I.b=Yt.lzy,T},"get")}),I}s(yr,"getLazy");function ui(v){return Ee({toJSON:s(function(){return v},"toJSON")},"v",{value:v})}s(ui,"createCachedValue");var ro="window",Tn;function Ao(v,I){var T;return function(){return!Yt&&bt(),(!T||Yt.lzy)&&(T=ui(z(v,I).v)),T.v}}s(Ao,"_getGlobalInstFn");function vi(v){return!Yt&&bt(),(!Tn||v===!1||Yt.lzy)&&(Tn=ui(z(Cn).v||i)),Tn.v}s(vi,"getGlobal");function Xo(v,I){var T;if(!Tn||I===!1?T=vi(I):T=Tn.v,T&&T[v])return T[v];if(v===ro)try{return window}catch{}return i}s(Xo,"getInst");function Aa(){return!!vc()}s(Aa,"hasDocument");var vc=Ao(Xo,["document"]);function Mo(){return!!Ws()}s(Mo,"hasWindow");var Ws=Ao(Xo,[ro]);function pd(){return!!xc()}s(pd,"hasNavigator");var xc=Ao(Xo,["navigator"]),bg=Ao(function(){return!!z(function(){return process&&(process.versions||{}).node}).v}),Il,Ig;function Tg(){return Il=ui(z(Xo,[m]).v),Il}s(Tg,"_initSymbol");function YE(v){var I=(Yt.lzy?0:Il)||Tg();return I.v?I.v[v]:n}s(YE,"_getSymbolKey");function Fa(){return!!_u()}s(Fa,"hasSymbol");function _u(){return!Yt&&bt(),((Yt.lzy?0:Il)||Tg()).v}s(_u,"getSymbol");function Ru(v,I){var T=Br[v];!Yt&&bt();var k=(Yt.lzy?0:Il)||Tg();return k.v?k.v[T||v]:I?n:er(v)}s(Ru,"getKnownSymbol");function md(v,I){!Yt&&bt();var T=(Yt.lzy?0:Il)||Tg();return T.v?T.v(v):I?i:St(v)}s(md,"newSymbol");function wg(v){return!Yt&&bt(),Ig=(Yt.lzy?0:Ig)||ui(z(YE,["for"]).v),(Ig.v||Kt)(v)}s(wg,"symbolFor");function $l(v){return!!v&&Oe(v.next)}s($l,"isIterator");function JE(v){return!ae(v)&&Oe(v[Ru(3)])}s(JE,"isIterable");var ov;function XE(v,I,T){if(v&&($l(v)||(!ov&&(ov=ui(Ru(3))),v=v[ov.v]?v[ov.v]():i),$l(v))){var k=n,M=n;try{for(var q=0;!(M=v.next()).done&&I[y](T||v,M.value,q,v)!==-1;)q++}catch(G){k={e:G},v.throw&&(M=i,v.throw(k))}finally{try{M&&!M.done&&v.return&&v.return(M)}finally{if(k)throw k.e}}}}s(XE,"iterForOf");function $f(v,I,T){return v.apply(I,T)}s($f,"fnApply");function Wf(v,I){return!$(I)&&v&&(Je(I)?$f(v.push,v,I):$l(I)||JE(I)?XE(I,function(T){v.push(T)}):v.push(I)),v}s(Wf,"arrAppend");function Kr(v,I,T){if(v)for(var k=v[g]>>>0,M=0;M<k&&!(M in v&&I[y](T||v,v[M],M,v)===-1);M++);}s(Kr,"arrForEach");var Ec=_n("indexOf",Y),Sg=_n("map",Y);function _g(v,I,T){return((v?v.slice:i)||V).apply(v,V[y](arguments,1))}s(_g,"arrSlice");var XM=_n("reduce",Y),jc=e(r(b,"create"),Iy);function Iy(v){if(!v)return{};var I=typeof v;I!==c&&I!==a&&Pr("Prototype must be an Object or function: "+Qt(v));function T(){}return s(T,"tempFunc"),T[l]=v,new T}s(Iy,"polyObjCreate");var sv;function vm(v,I){var T=b.setPrototypeOf||function(k,M){var q;!sv&&(sv=ui((q={},q[u]=[],q instanceof Array))),sv.v?k[u]=M:le(M,function(G,ce){return k[G]=ce})};return T(v,I)}s(vm,"objSetPrototypeOf");function Ty(v,I,T){z(je,[I,A,{v,c:!0,e:!1}]),I=vm(I,T);function k(){this[p]=I,z(je,[this,A,{v,c:!0,e:!1}])}return s(k,"__"),I[l]=T===i?jc(T):(k[l]=T[l],new k),I}s(Ty,"_createCustomError");function ZE(v,I){I&&(v[A]=I)}s(ZE,"_setName");function Es(v,I,T){var k=T||Error,M=k[l][A],q=Error.captureStackTrace;return Ty(v,function(){var G=this,ce=arguments;try{z(ZE,[k,v]);var fe=$f(k,G,V[y](ce))||G;if(fe!==G){var xe=Ir(G);xe!==Ir(fe)&&vm(fe,xe)}return q&&q(fe,G[p]),I&&I(fe,ce),fe}finally{z(ZE,[k,M])}},k)}s(Es,"createCustomError");function hd(){return(Date.now||wy)()}s(hd,"utcNow");function wy(){return new Date().getTime()}s(wy,"polyUtcNow");function s5(v){return s(function(T){return ie(T)&&Pr("strTrim called ["+Qt(T)+"]"),T&&T.replace&&(T=T.replace(v,o)),T},"_doTrim")}s(s5,"_createTrimFn");var ZM=s5(/^\s+|(?=\s)\s+$/g),no=ei("trim",B,ZM),Sy=r(L,"floor"),Rg,a5,eb;function gd(v){if(!v||typeof v!==c)return!1;eb||(eb=Mo()?Ws():!0);var I=!1;if(v!==eb){a5||(Rg=Function[l][E],a5=Rg[y](b));try{var T=Ir(v);I=!T,I||(ye(T,p)&&(T=T[p]),I=!!(T&&typeof T===a&&Rg[y](T)===a5))}catch{}}return I}s(gd,"isPlainObject");function eL(v){return v.value&&c5(v),!0}s(eL,"_defaultDeepCopyHandler");var tL=[tb,c5,$H,_y];function rL(v,I,T,k){var M;return Kr(v,function(q){if(q.k===I)return M=q,-1}),M||(M={k:I,v:I},v.push(M),k(M)),M.v}s(rL,"_getSetVisited");function av(v,I,T,k){var M=T.handler,q=T.path?k?T.path.concat(k):T.path:[],G={handler:T.handler,src:T.src,path:q},ce=typeof I,fe=!1,xe=I===i;xe||(I&&ce===c?fe=gd(I):xe=pe(ce));var Re={type:ce,isPrim:xe,isPlain:fe,value:I,result:I,path:q,origin:T.src,copy:s(function(Qe,et){return av(v,Qe,et?G:T,et)},"copy"),copyTo:s(function(Qe,et){return nL(v,Qe,et,G)},"copyTo")};return Re.isPrim?M&&M[y](T,Re)?Re.result:I:rL(v,I,q,function(Qe){je(Re,"result",{g:s(function(){return Qe.v},"g"),s:s(function(Ke){Qe.v=Ke},"s")});for(var et=0,He=M;!(He||(et<tL.length?tL[et++]:eL))[y](T,Re);)He=i})}s(av,"_deepCopy");function nL(v,I,T,k){if(!ie(T))for(var M in T)I[M]=av(v,T[M],k,M);return I}s(nL,"_copyProps");function HH(v,I,T){var k={handler:T,src:I,path:[]};return nL([],v,I,k)}s(HH,"objCopyProps");function iL(v,I){var T={handler:I,src:v};return av([],v,T)}s(iL,"objDeepCopy");function tb(v){var I=v.value;if(Je(I)){var T=v.result=[];return T.length=I.length,v.copyTo(T,I),!0}return!1}s(tb,"arrayDeepCopyHandler");function _y(v){var I=v.value;return Fe(I)?(v.result=new Date(I.getTime()),!0):!1}s(_y,"dateDeepCopyHandler");function $H(v){return v.type===a}s($H,"functionDeepCopyHandler");function c5(v){var I=v.value;if(I&&v.isPlain){var T=v.result={};return v.copyTo(T,I),!0}return!1}s(c5,"plainObjDeepCopyHandler");function oL(v,I){return Kr(I,function(T){HH(v,T)}),v}s(oL,"_doExtend");function l5(v,I,T,k,M,q,G){return oL(iL(v)||{},V[y](arguments))}s(l5,"deepExtend");var mue=an(g),hue=r(L,"round"),WH=ei("endsWith",B,gue);function gue(v,I,T){Ae(v)||Pr("'"+Qt(v)+"' is not a string");var k=Ae(I)?I:Ft(I),M=!$(T)&&T<v[g]?T:v[g];return Ce(v,M-k[g],M)===k}s(gue,"polyStrEndsWith");var kg=_n("indexOf",B),u5="ref",sL="unref",d5="hasRef",Aue="enabled";function f5(v,I,T){var k=!0,M=v?I(i):i,q;function G(){return k=!1,M&&M[sL]&&M[sL](),q}s(G,"_unref");function ce(){M&&T(M),M=i}s(ce,"_cancel");function fe(){return M=I(M),k||G(),q}s(fe,"_refresh");function xe(Re){!Re&&M&&ce(),Re&&!M&&fe()}return s(xe,"_setEnabled"),q={cancel:ce,refresh:fe},q[d5]=function(){return M&&M[d5]?M[d5]():k},q[u5]=function(){return k=!0,M&&M[u5]&&M[u5](),q},q[sL]=G,q=Ee(q,Aue,{get:s(function(){return!!M},"get"),set:xe}),{h:q,dn:s(function(){M=i},"dn")}}s(f5,"_createTimerHandler");function p5(v,I,T){var k=Je(I),M=k?I.length:0,q=(M>0?I[0]:k?n:I)||setTimeout,G=(M>1?I[1]:n)||clearTimeout,ce=T[0];T[0]=function(){fe.dn(),$f(ce,n,V[y](arguments))};var fe=f5(v,function(xe){if(xe){if(xe.refresh)return xe.refresh(),xe;$f(G,n,[xe])}return $f(q,n,T)},function(xe){$f(G,n,[xe])});return fe.h}s(p5,"_createTimeoutWith");function Ry(v,I){return p5(!0,n,V[y](arguments))}s(Ry,"scheduleTimeout");function m5(v,I){return p5(!1,n,V[y](arguments))}s(m5,"createTimeout");var cv,jf="constructor",Gf="prototype",lv="function",rb="_dynInstFuncs",ky="_isDynProxy",nb="_dynClass",aL="_dynCls$",uv="_dynInstChk",ib=uv,cL="_dfOpts",h5="_unknown_",ob="__proto__",HS="_dyn"+ob,g5="__dynProto$Gbl",sb="_dynInstProto",ab="useBaseInst",$S="setInstFuncs",dv=Object,cb=dv.getPrototypeOf,lL=dv.getOwnPropertyNames,A5=vi(),lb=A5[g5]||(A5[g5]={o:(cv={},cv[$S]=!0,cv[ab]=!0,cv),n:1e3});function ub(v){return v&&(v===dv[Gf]||v===Array[Gf])}s(ub,"_isObjectOrArrayPrototype");function Pg(v){return ub(v)||v===Function[Gf]}s(Pg,"_isObjectArrayOrFunctionPrototype");function xm(v){var I;if(v){if(cb)return cb(v);var T=v[ob]||v[Gf]||(v[jf]?v[jf][Gf]:null);I=v[HS]||T,ye(v,HS)||(delete v[sb],I=v[HS]=v[sb]||v[HS],v[sb]=T)}return I}s(xm,"_getObjProto");function db(v,I){var T=[];if(lL)T=lL(v);else for(var k in v)typeof k=="string"&&ye(v,k)&&T.push(k);if(T&&T.length>0)for(var M=0;M<T.length;M++)I(T[M])}s(db,"_forEachProp");function fb(v,I,T){return I!==jf&&typeof v[I]===lv&&(T||ye(v,I))&&I!==ob&&I!==Gf}s(fb,"_isDynamicCandidate");function y5(v){Pr("DynamicProto: "+v)}s(y5,"_throwTypeError");function uL(v){var I=jc(null);return db(v,function(T){!I[T]&&fb(v,T,!1)&&(I[T]=v[T])}),I}s(uL,"_getInstanceFuncs");function dL(v,I){for(var T=v.length-1;T>=0;T--)if(v[T]===I)return!0;return!1}s(dL,"_hasVisited");function yue(v,I,T,k){function M(fe,xe,Re){var Qe=xe[Re];if(Qe[ky]&&k){var et=fe[rb]||{};et[ib]!==!1&&(Qe=(et[xe[nb]]||{})[Re]||Qe)}return function(){return Qe.apply(fe,arguments)}}s(M,"_instFuncProxy");var q=jc(null);db(T,function(fe){q[fe]=M(I,T,fe)});for(var G=xm(v),ce=[];G&&!Pg(G)&&!dL(ce,G);)db(G,function(fe){!q[fe]&&fb(G,fe,!cb)&&(q[fe]=M(I,G,fe))}),ce.push(G),G=xm(G);return q}s(yue,"_getBaseFuncs");function Cue(v,I,T,k){var M=null;if(v&&ye(T,nb)){var q=v[rb]||jc(null);if(M=(q[T[nb]]||jc(null))[I],M||y5("Missing ["+I+"] "+lv),!M[uv]&&q[ib]!==!1){for(var G=!ye(v,I),ce=xm(v),fe=[];G&&ce&&!Pg(ce)&&!dL(fe,ce);){var xe=ce[I];if(xe){G=xe===k;break}fe.push(ce),ce=xm(ce)}try{G&&(v[I]=M),M[uv]=1}catch{q[ib]=!1}}}return M}s(Cue,"_getInstFunc");function vue(v,I,T){var k=I[v];return k===T&&(k=xm(I)[v]),typeof k!==lv&&y5("["+v+"] is not a "+lv),k}s(vue,"_getProtoFunc");function xue(v,I,T,k,M){function q(fe,xe){var Re=s(function(){var Qe=Cue(this,xe,fe,Re)||vue(xe,fe,Re);return Qe.apply(this,arguments)},"dynProtoProxy");return Re[ky]=1,Re}if(s(q,"_createDynamicPrototype"),!ub(v)){var G=T[rb]=T[rb]||jc(null);if(!ub(G)){var ce=G[I]=G[I]||jc(null);G[ib]!==!1&&(G[ib]=!!M),ub(ce)||db(T,function(fe){fb(T,fe,!1)&&T[fe]!==k[fe]&&(ce[fe]=T[fe],delete T[fe],(!ye(v,fe)||v[fe]&&!v[fe][ky])&&(v[fe]=q(v,fe)))})}}}s(xue,"_populatePrototype");function fL(v,I){if(cb){for(var T=[],k=xm(I);k&&!Pg(k)&&!dL(T,k);){if(k===v)return!0;T.push(k),k=xm(k)}return!1}return!0}s(fL,"_checkPrototype");function WS(v,I){return ye(v,Gf)?v.name||I||h5:((v||{})[jf]||{}).name||I||h5}s(WS,"_getObjName");function ku(v,I,T,k){ye(v,Gf)||y5("theClass is an invalid class definition.");var M=v[Gf];fL(M,I)||y5("["+WS(v)+"] not in hierarchy of ["+WS(I)+"]");var q=null;ye(M,nb)?q=M[nb]:(q=aL+WS(v,"_")+"$"+lb.n,lb.n++,M[nb]=q);var G=ku[cL],ce=!!G[ab];ce&&k&&k[ab]!==void 0&&(ce=!!k[ab]);var fe=uL(I),xe=yue(M,I,fe,ce);T(I,xe);var Re=!!cb&&!!G[$S];Re&&k&&(Re=!!k[$S]),xue(M,q,I,fe,Re!==!1)}s(ku,"dynamicProto"),ku[cL]=lb.o;var Oa="function",jH="object",GH="undefined",jS="prototype",pL=Object,mL=pL[jS];(vi()||{}).Symbol,(vi()||{}).Reflect;var C5="hasOwnProperty",VH=s(function(v){for(var I,T=1,k=arguments.length;T<k;T++){I=arguments[T];for(var M in I)mL[C5].call(I,M)&&(v[M]=I[M])}return v},"__objAssignFnImpl"),Dg=ft||VH,Py=s(function(v,I){return Py=pL.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,k){T.__proto__=k}||function(T,k){for(var M in k)k[C5](M)&&(T[M]=k[M])},Py(v,I)},"extendStaticsFn");function GS(v,I){typeof I!==Oa&&I!==null&&Pr("Class extends value "+String(I)+" is not a constructor or null"),Py(v,I);function T(){this.constructor=v}s(T,"__"),v[jS]=I===null?jc(I):(T[jS]=I[jS],new T)}s(GS,"__extendsFn");function zH(v,I){for(var T=0,k=I.length,M=v.length;T<k;T++,M++)v[M]=I[T];return v}s(zH,"__spreadArrayFn");var v5=ur,Eue=nr,Dy=v5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),pb="toLowerCase",di="length",mb="warnToConsole",fv="throwInternal",Bg="watch",x5="apply",Eo="push",hb="splice",bc="logger",gb="cancel",VS="initialize",By="identifier",zS="removeNotificationListener",E5="addNotificationListener",Em="isInitialized",Ab="value",rp="getNotifyMgr",yb="getPlugin",Ny="name",Wl="processNext",Cb="getProcessTelContext",bm="enabled",KH="stopPollingInternalLogs",pv="unload",b5="onComplete",vb="version",YH="loggingLevelConsole",mv="createNew",Im="teardown",I5="messageId",hv="message",Tm="diagLog",T5="_doTeardown",Ng="update",wm="getNext",My="setNextPlugin",w5="userAgent",Ly="split",Fy="replace",Pu="type",hL="evtName",KS="status",gL="getAllResponseHeaders",AL="isChildEvt",xb="data",Oy="getCtx",np="setCtx",JH="itemsReceived",Mg="urlString",yL="headers",Lg="timeout",XH="traceFlags",Eb;function CL(v,I){Eb||(Eb=Es("AggregationError",function(k,M){M[di]>1&&(k.errors=M[1])}));var T=v||"One or more errors occurred.";throw Kr(I,function(k,M){T+=`
`.concat(M," > ").concat(Qt(k))}),new Eb(T,I||[])}s(CL,"throwAggregationError");var gv="Promise",Av="rejected";function Vf(v,I){return ZH(v,function(T){return I?I({status:"fulfilled",rejected:!1,value:T}):T},function(T){return I?I({status:Av,rejected:!0,reason:T}):T})}s(Vf,"doAwaitResponse");function ZH(v,I,T,k){var M=v;try{if(ht(v))(I||T)&&(M=v.then(I,T));else try{I&&(M=I(v))}catch(q){if(T)M=T(q);else throw q}}finally{k&&bue(M,k)}return M}s(ZH,"doAwait");function bue(v,I){var T=v;return I&&(ht(v)?v.finally?T=v.finally(I):T=v.then(function(k){return I(),k},function(k){throw I(),k}):I()),T}s(bue,"doFinally");var e$=["pending","resolving","resolved",Av],t$="dispatchEvent",YS;function r$(v){var I;return v&&v.createEvent&&(I=v.createEvent("Event")),!!I&&I.initEvent}s(r$,"_hasInitEventFn");function S5(v,I,T,k){var M=vc();!YS&&(YS=ui(!!z(r$,[M]).v));var q=YS.v?M.createEvent("Event"):k?new Event(I):{};if(T&&T(q),YS.v&&q.initEvent(I,!1,!0),q&&v[t$])v[t$](q);else{var G=v["on"+I];if(G)G(q);else{var ce=Xo("console");ce&&(ce.error||ce.log)(I,Qt(q))}}}s(S5,"emitEvent");var n$="unhandledRejection",Iue=n$.toLowerCase(),bb=10,_5;function i$(v){return Oe(v)?v.toString():Qt(v)}s(i$,"dumpFnObj");function o$(v,I,T){var k=_g(arguments,3),M=0,q=!1,G,ce=[],fe=!1,xe=null,Re;function Qe(sr,_r){try{fe=!0,xe&&xe.cancel(),xe=null;var ii=v(function(Hi,$i){ce.push(function(){try{var Go=M===2?sr:_r,wn=$(Go)?G:Oe(Go)?Go(G):Go;ht(wn)?wn.then(Hi,$i):Go?Hi(wn):M===3?$i(wn):Hi(wn)}catch(tn){$i(tn)}}),q&&gt()},k);return ii}finally{}}s(Qe,"_then");function et(sr){return Qe(void 0,sr)}s(et,"_catch");function He(sr){var _r=sr,ii=sr;return Oe(sr)&&(_r=s(function(Hi){return sr&&sr(),Hi},"thenFinally"),ii=s(function(Hi){throw sr&&sr(),Hi},"catchFinally")),Qe(_r,ii)}s(He,"_finally");function Ke(){return e$[M]}s(Ke,"_strState");function gt(){if(ce.length>0){var sr=ce.slice();ce=[],fe=!0,xe&&xe.cancel(),xe=null,I(sr)}}s(gt,"_processQueue");function st(sr,_r){return function(ii){if(M===_r){if(sr===2&&ht(ii)){M=1,ii.then(st(2,1),st(3,1));return}M=sr,q=!0,G=ii,gt(),!fe&&sr===3&&!xe&&(xe=Ry(wt,bb))}}}s(st,"_createSettleIfFn");function wt(){if(!fe)if(fe=!0,bg())process.emit(n$,G,Re);else{var sr=Ws()||vi();!_5&&(_5=ui(z(Xo,[gv+"RejectionEvent"]).v)),S5(sr,Iue,function(_r){return je(_r,"promise",{g:s(function(){return Re},"g")}),_r.reason=G,_r},!!_5.v)}}s(wt,"_notifyUnhandledRejection"),Re={then:Qe,catch:et,finally:He},Ee(Re,"state",{get:Ke}),Fa()&&(Re[Ru(11)]="IPromise");function $t(){return"IPromise "+Ke()+(q?" - "+i$(G):"")}return s($t,"_toString"),Re.toString=$t,s(function(){Oe(T)||Pr(gv+": executor is not a function - "+i$(T));var _r=st(3,0);try{T.call(Re,st(2,0),_r)}catch(ii){_r(ii)}},"_initialize")(),Re}s(o$,"_createPromise");function Tue(v){return function(I){var T=_g(arguments,1);return v(function(k,M){try{var q=[],G=1;XE(I,function(ce,fe){ce&&(G++,ZH(ce,function(xe){q[fe]=xe,--G===0&&k(q)},M))}),G--,G===0&&k(q)}catch(ce){M(ce)}},T)}}s(Tue,"_createAllPromise");function wue(v){return ui(function(I){var T=_g(arguments,1);return v(function(k,M){var q=[],G=1;function ce(fe,xe){G++,Vf(fe,function(Re){Re.rejected?q[xe]={status:Av,reason:Re.reason}:q[xe]={status:"fulfilled",value:Re.value},--G===0&&k(q)})}s(ce,"processItem");try{Je(I)?Kr(I,ce):JE(I)?XE(I,ce):Pr("Input is not an iterable"),G--,G===0&&k(q)}catch(fe){M(fe)}},T)})}s(wue,"_createAllSettledPromise");function s$(v){Kr(v,function(I){try{I()}catch{}})}s(s$,"syncItemProcessor");function a$(v){var I=lt(v)?v:0;return function(T){Ry(function(){s$(T)},I)}}s(a$,"timeoutItemProcessor");function R5(v,I){return o$(R5,a$(I),v,I)}s(R5,"createAsyncPromise");var k5;function Sue(v,I){!k5&&(k5=ui(z(Xo,[gv]).v||null));var T=k5.v;if(!T)return R5(v);Oe(v)||Pr(gv+": executor is not a function - "+Qt(v));var k=0;function M(){return e$[k]}s(M,"_strState");var q=new T(function(G,ce){function fe(Re){k=2,G(Re)}s(fe,"_resolve");function xe(Re){k=3,ce(Re)}s(xe,"_reject"),v(fe,xe)});return Ee(q,"state",{get:M}),q}s(Sue,"createNativePromise");var P5;function D5(v){return o$(D5,s$,v)}s(D5,"createSyncPromise");function rf(v,I){return!P5&&(P5=wue(D5)),P5.v(v,I)}s(rf,"createSyncAllSettledPromise");var B5;function Ib(v,I){return!B5&&(B5=ui(Sue)),B5.v.call(this,v,I)}s(Ib,"createPromise");var vL=Tue(Ib),zf=void 0,Fi="",Fg="channels",Ic="core",ip="createPerfMgr",N5="disabled",yv="extensionConfig",Tb="extensions",Kf="processTelemetry",wb="priority",Sb="eventsSent",_b="eventsDiscarded",M5="eventsSendRequest",Cv="perfEvent",xL="offlineEventsStored",EL="offlineBatchSent",L5="offlineBatchDrop",JS="getPerfMgr",F5="domain",O5="path",c$="Not dynamic - ",bL=/-([a-z])/g,_ue=/([^\w\d_$])/g,Rue=/^(\d+[\w\d_$])/;function Q5(v){return!ie(v)}s(Q5,"isNotNullOrUndefined");function Rb(v){var I=v;return I&&Ae(I)&&(I=I[Fy](bL,function(T,k){return k.toUpperCase()}),I=I[Fy](_ue,"_"),I=I[Fy](Rue,function(T,k){return"_"+k})),I}s(Rb,"normalizeJsName");function jl(v,I){return v&&I?kg(v,I)!==-1:!1}s(jl,"strContains");function XS(v){return v&&v.toISOString()||""}s(XS,"toISOString");function Tl(v){return xt(v)?v[Ny]:Fi}s(Tl,"getExceptionName");function Qy(v,I,T,k,M){var q=T;return v&&(q=v[I],q!==T&&(!M||M(q))&&(!k||k(T))&&(q=T,v[I]=q)),q}s(Qy,"setValue");function l$(v,I,T){var k;return v?(k=v[I],!k&&ie(k)&&(k=$(T)?{}:T,v[I]=k)):k=$(T)?{}:T,k}s(l$,"getSetValue");function kue(v,I){var T=null,k=null;return Oe(v)?T=v:k=v,function(){var M=arguments;if(T&&(k=T()),k)return k[I][x5](k,M)}}s(kue,"_createProxyFunction");function ZS(v,I,T,k,M){v&&I&&T&&(M!==!1||$(v[I]))&&(v[I]=kue(T,k))}s(ZS,"proxyFunctionAs");function IL(v,I,T,k){return v&&I&&Te(v)&&Je(T)&&Kr(T,function(M){Ae(M)&&ZS(v,M,I,M,k)}),v}s(IL,"proxyFunctions");function Pue(v){return function(){function I(){var T=this;v&&le(v,function(k,M){T[k]=M})}return s(I,"class_1"),I}()}s(Pue,"createClassFromInterface");function TL(v){return v&&ft&&(v=pL(ft({},v))),v}s(TL,"optimizeObject");function u$(v,I,T,k,M,q){var G=arguments,ce=G[0]||{},fe=G[di],xe=!1,Re=1;for(fe>0&&_t(ce)&&(xe=ce,ce=G[Re]||{},Re++),Te(ce)||(ce={});Re<fe;Re++){var Qe=G[Re],et=Je(Qe),He=Te(Qe);for(var Ke in Qe){var gt=et&&Ke in Qe||He&&$e(Qe,Ke);if(gt){var st=Qe[Ke],wt=void 0;if(xe&&st&&((wt=Je(st))||gd(st))){var $t=ce[Ke];wt?Je($t)||($t=[]):gd($t)||($t={}),st=u$(xe,$t,st)}st!==void 0&&(ce[Ke]=st)}}}return ce}s(u$,"objExtend");function U5(v){try{return v.responseText}catch{}return null}s(U5,"getResponseText");function d$(v,I){return v?"XDomainRequest,Response:"+U5(v)||"":I}s(d$,"formatErrorMessageXdr");function q5(v,I){return v?"XMLHttpRequest,Status:"+v[KS]+",Response:"+U5(v)||v.response||"":I}s(q5,"formatErrorMessageXhr");function f$(v,I){return I&&(lt(I)?v=[I].concat(v):Je(I)&&(v=I.concat(v))),v}s(f$,"prependTransports");var wL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",e_="withCredentials",Sm="timeout";function SL(v,I,T,k,M,q){k===void 0&&(k=!1),M===void 0&&(M=!1);function G(fe,xe,Re){try{fe[xe]=Re}catch{}}s(G,"_wrapSetXhrProp");var ce=new XMLHttpRequest;return k&&G(ce,wL,k),T&&G(ce,e_,T),ce.open(v,I,!M),T&&G(ce,e_,T),!M&&q&&G(ce,Sm,q),ce}s(SL,"openXhr");function p$(v){var I={};if(Ae(v)){var T=no(v)[Ly](/[\r\n]+/);Kr(T,function(k){if(k){var M=k.indexOf(": ");if(M!==-1){var q=no(k.substring(0,M))[pb](),G=no(k.substring(M+1));I[q]=G}else I[no(k)]=1}})}return I}s(p$,"convertAllHeadersToMap");function Uy(v,I,T){if(!v[T]&&I&&I.getResponseHeader){var k=I.getResponseHeader(T);k&&(v[T]=no(k))}return v}s(Uy,"_appendHeader");var Ln="kill-duration",kb="kill-duration-seconds",vv="time-delta-millis";function xv(v,I){var T={};return v[gL]?T=p$(v[gL]()):I&&(T=Uy(T,v,vv),T=Uy(T,v,Ln),T=Uy(T,v,kb)),T}s(xv,"_getAllResponseHeaders");var _L="documentMode",t_="location",Pb="console",H5="JSON",RL="crypto",$5="msCrypto",Db="msie",Ev="trident/",kL="XMLHttpRequest",Yf=null,Bb=null,_m=!1,Ad=null,Nb=null;function r_(v,I){var T=!1;if(v){try{if(T=I in v,!T){var k=v[jS];k&&(T=I in k)}}catch{}if(!T)try{var M=new v;T=!$(M[I])}catch{}}return T}s(r_,"_hasProperty");function Mb(v){if(v&&_m){var I=Xo("__mockLocation");if(I)return I}return typeof location===jH&&location?location:Xo(t_)}s(Mb,"getLocation");function n_(){return typeof console!==GH?console:Xo(Pb)}s(n_,"getConsole");function Lb(){return!!(typeof JSON===jH&&JSON||Xo(H5)!==null)}s(Lb,"hasJSON");function nf(){return Lb()?JSON||Xo(H5):null}s(nf,"getJSON");function W5(){return Xo(RL)}s(W5,"getCrypto");function j5(){return Xo($5)}s(j5,"getMsCrypto");function op(){var v=xc();if(v&&(v[w5]!==Bb||Yf===null)){Bb=v[w5];var I=(Bb||Fi)[pb]();Yf=jl(I,Db)||jl(I,Ev)}return Yf}s(op,"isIE");function Fb(v){if(v===void 0&&(v=null),!v){var I=xc()||{};v=I?(I.userAgent||Fi)[pb]():Fi}var T=(v||Fi)[pb]();if(jl(T,Db)){var k=vc()||{};return Pe(parseInt(T[Ly](Db)[1]),k[_L]||0)}else if(jl(T,Ev)){var M=parseInt(T[Ly](Ev)[1]);if(M)return M+4}return null}s(Fb,"getIEVersion");function qy(v){return(Nb===null||v===!1)&&(Nb=pd()&&!!xc().sendBeacon),Nb}s(qy,"isBeaconsSupported");function i_(v){var I=!1;try{I=!!Xo("fetch");var T=Xo("Request");I&&v&&T&&(I=r_(T,"keepalive"))}catch{}return I}s(i_,"isFetchSupported");function PL(){return Ad===null&&(Ad=typeof XDomainRequest!==GH,Ad&&DL()&&(Ad=Ad&&!r_(Xo(kL),"withCredentials"))),Ad}s(PL,"useXDomainRequest");function DL(){var v=!1;try{var I=Xo(kL);v=!!I}catch{}return v}s(DL,"isXhrSupported");var wl=4294967296,Rm=4294967295,G5=123456789,BL=987654321,Og=!1,Jf=G5,Ob=BL;function NL(v){v<0&&(v>>>=0),Jf=G5+v&Rm,Ob=BL-v&Rm,Og=!0}s(NL,"_mwcSeed");function m$(){try{var v=hd()&2147483647;NL((Math.random()*wl^v)+v)}catch{}}s(m$,"_autoSeedMwc");function ML(v){var I=0,T=W5()||j5();return T&&T.getRandomValues&&(I=T.getRandomValues(new Uint32Array(1))[0]&Rm),I===0&&op()&&(Og||m$(),I=h$()&Rm),I===0&&(I=Sy(wl*Math.random()|0)),v||(I>>>=0),I}s(ML,"random32");function h$(v){Ob=36969*(Ob&65535)+(Ob>>16)&Rm,Jf=18e3*(Jf&65535)+(Jf>>16)&Rm;var I=(Ob<<16)+(Jf&65535)>>>0&Rm|0;return v||(I>>>=0),I}s(h$,"mwcRandom32");function Due(v){v===void 0&&(v=22);for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=ML()>>>0,k=0,M=Fi;M[di]<v;)k++,M+=I.charAt(T&63),T>>>=6,k===5&&(T=(ML()<<2&4294967295|T&3)>>>0,k=0);return M}s(Due,"newId");var Qb="3.3.6",Bue="."+Due(6),Nue=0;function g$(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType}s(g$,"_canAcceptData");function A$(v,I){var T=I[v.id];if(!T){T={};try{g$(I)&&je(I,v.id,{e:!1,v:T})}catch{}}return T}s(A$,"_getCache");function Qg(v,I){return I===void 0&&(I=!1),Rb(v+Nue+++(I?"."+Qb:Fi)+Bue)}s(Qg,"createUniqueNamespace");function y$(v){var I={id:Qg("_aiData-"+(v||Fi)+"."+Qb),accept:s(function(T){return g$(T)},"accept"),get:s(function(T,k,M,q){var G=T[I.id];return G?G[Rb(k)]:(q&&(G=A$(I,T),G[Rb(k)]=M),M)},"get"),kill:s(function(T,k){if(T&&T[k])try{delete T[k]}catch{}},"kill")};return I}s(y$,"createElmNodeData");function Ub(v){return v&&Te(v)&&(v.isVal||v.fb||$e(v,"v")||$e(v,"mrg")||$e(v,"ref")||v.set)}s(Ub,"_isConfigDefaults");function C$(v,I,T){var k,M=T.dfVal||te;if(I&&T.fb){var q=T.fb;Je(q)||(q=[q]);for(var G=0;G<q[di];G++){var ce=q[G],fe=I[ce];if(M(fe)?k=fe:v&&(fe=v.cfg[ce],M(fe)&&(k=fe),v.set(v.cfg,Ft(ce),fe)),M(k))break}}return!M(k)&&M(T.v)&&(k=T.v),k}s(C$,"_getDefault");function LL(v,I,T){var k=T;if(T&&Ub(T)&&(k=C$(v,I,T)),k){Ub(k)&&(k=LL(v,I,k));var M;Je(k)?(M=[],M[di]=k[di]):gd(k)&&(M={}),M&&(le(k,function(q,G){G&&Ub(G)&&(G=LL(v,I,G)),M[q]=G}),k=M)}return k}s(LL,"_resolveDefaultValue");function FL(v,I,T,k){var M,q,G,ce=k,fe,xe,Re,Qe;Ub(ce)?(M=ce.isVal,q=ce.set,Re=ce.rdOnly,Qe=ce.blkVal,fe=ce.mrg,xe=ce.ref,!xe&&$(xe)&&(xe=!!fe),G=C$(v,I,ce)):G=k,Qe&&v.blkVal(I,T);var et,He=!0,Ke=I[T];(Ke||!ie(Ke))&&(et=Ke,He=!1,M&&et!==G&&!M(et)&&(et=G,He=!0),q&&(et=q(et,G,I),He=et===G)),He?G?et=LL(v,I,G):et=G:(gd(et)||Je(G))&&fe&&G&&(gd(G)||Je(G))&&le(G,function(gt,st){FL(v,et,gt,st)}),v.set(I,T,et),xe&&v.ref(I,T),Re&&v.rdOnly(I,T)}s(FL,"_applyDefaultValue");var Hy=wg("[[ai_dynCfg_1]]"),v$=wg("[[ai_blkDynCfg_1]]"),x$=wg("[[ai_frcDynCfg_1]]");function E$(v){if(v){var I;if(Je(v)?(I=[],I[di]=v[di]):gd(v)&&(I={}),I)return le(v,function(T,k){I[T]=E$(k)}),I}return v}s(E$,"_cfgDeepCopy");function Mue(v){if(v){var I=v[Hy]||v;if(I.cfg&&(I.cfg===v||I.cfg[Hy]===I))return I}return null}s(Mue,"getDynamicConfigHandler");function Lue(v){if(v&&(gd(v)||Je(v)))try{v[v$]=!0}catch{}return v}s(Lue,"blockDynamicConversion");function OL(v,I,T){var k=!1;return T&&!v[I.blkVal]&&(k=T[x$],!k&&!T[v$]&&(k=gd(T)||Je(T))),k}s(OL,"_canMakeDynamic");function qb(v){Pr("InvalidAccess:"+v)}s(qb,"throwInvalidAccess");var Fue=["push","pop","shift","unshift","splice"],o_=s(function(v,I,T,k){v&&v[fv](3,108,"".concat(T," [").concat(I,"] failed - ")+Qt(k))},"_throwDynamicError");function $y(v,I,T){Je(I)&&Kr(Fue,function(k){var M=I[k];I[k]=function(){for(var q=[],G=0;G<arguments.length;G++)q[G]=arguments[G];var ce=M[x5](this,q);return Wb(v,I,T,"Patching"),ce}})}s($y,"_patchArray");function sp(v,I){var T=Ue(v,I);return T&&T.get}s(sp,"_getOwnPropGetter");function b$(v,I,T,k){var M={n:T,h:[],trk:s(function(xe){xe&&xe.fn&&(Ec(M.h,xe)===-1&&M.h[Eo](xe),v.trk(xe,M))},"trk"),clr:s(function(xe){var Re=Ec(M.h,xe);Re!==-1&&M.h[hb](Re,1)},"clr")},q=!0,G=!1;function ce(){q&&(G=G||OL(ce,v,k),k&&!k[Hy]&&G&&(k=Wb(v,k,T,"Converting")),q=!1);var xe=v.act;return xe&&M.trk(xe),k}s(ce,"_getProperty"),ce[v.prop]={chng:s(function(){v.add(M)},"chng")};function fe(xe){if(k!==xe){ce[v.ro]&&!v.upd&&qb("["+T+"] is read-only:"+Qt(I)),q&&(G=G||OL(ce,v,k),q=!1);var Re=G&&ce[v.rf];if(G)if(Re){le(k,function(et){k[et]=xe?xe[et]:zf});try{le(xe,function(et,He){Hb(v,k,et,He)}),xe=k}catch(et){o_((v.hdlr||{})[bc],T,"Assigning",et),G=!1}}else k&&k[Hy]&&le(k,function(et){var He=sp(k,et);if(He){var Ke=He[v.prop];Ke&&Ke.chng()}});if(xe!==k){var Qe=xe&&OL(ce,v,xe);!Re&&Qe&&(xe=Wb(v,xe,T,"Converting")),k=xe,G=Qe}v.add(M)}}s(fe,"_setProperty"),je(I,M.n,{g:ce,s:fe})}s(b$,"_createDynamicProperty");function Hb(v,I,T,k){if(I){var M=sp(I,T),q=M&&!!M[v.prop];q?I[T]=k:b$(v,I,T,k)}return I}s(Hb,"_setDynamicProperty");function $b(v,I,T,k){if(I){var M=sp(I,T),q=M&&!!M[v.prop],G=k&&k[0],ce=k&&k[1],fe=k&&k[2];if(!q){if(fe)try{Lue(I)}catch(xe){o_((v.hdlr||{})[bc],T,"Blocking",xe)}try{Hb(v,I,T,I[T]),M=sp(I,T)}catch(xe){o_((v.hdlr||{})[bc],T,"State",xe)}}G&&(M[v.rf]=G),ce&&(M[v.ro]=ce),fe&&(M[v.blkVal]=!0)}return I}s($b,"_setDynamicPropertyState");function Wb(v,I,T,k){try{le(I,function(M,q){Hb(v,I,M,q)}),I[Hy]||(Ee(I,Hy,{get:s(function(){return v.hdlr},"get")}),$y(v,I,T))}catch(M){o_((v.hdlr||{})[bc],T,k,M)}return I}s(Wb,"_makeDynamicObject");var s_="[[ai_",a_="]]";function Oue(v){var I=md(s_+"get"+v.uid+a_),T=md(s_+"ro"+v.uid+a_),k=md(s_+"rf"+v.uid+a_),M=md(s_+"blkVal"+v.uid+a_),q=md(s_+"dtl"+v.uid+a_),G=null,ce=null,fe;function xe(He,Ke){var gt=fe.act;try{fe.act=He,He&&He[q]&&(Kr(He[q],function(wt){wt.clr(He)}),He[q]=[]),Ke({cfg:v.cfg,set:v.set.bind(v),setDf:v.setDf.bind(v),ref:v.ref.bind(v),rdOnly:v.rdOnly.bind(v)})}catch(wt){var st=v[bc];throw st&&st[fv](1,107,Qt(wt)),wt}finally{fe.act=gt||null}}s(xe,"_useHandler");function Re(){if(G){var He=G;G=null,ce&&ce[gb](),ce=null;var Ke=[];if(Kr(He,function(gt){if(gt&&(gt[q]&&(Kr(gt[q],function(st){st.clr(gt)}),gt[q]=null),gt.fn))try{xe(gt,gt.fn)}catch(st){Ke[Eo](st)}}),G)try{Re()}catch(gt){Ke[Eo](gt)}Ke[di]>0&&CL("Watcher error(s): ",Ke)}}s(Re,"_notifyWatchers");function Qe(He){if(He&&He.h[di]>0){G||(G=[]),ce||(ce=Ry(function(){ce=null,Re()},0));for(var Ke=0;Ke<He.h[di];Ke++){var gt=He.h[Ke];gt&&Ec(G,gt)===-1&&G[Eo](gt)}}}s(Qe,"_addWatcher");function et(He,Ke){if(He){var gt=He[q]=He[q]||[];Ec(gt,Ke)===-1&&gt[Eo](Ke)}}return s(et,"_trackHandler"),fe={prop:I,ro:T,rf:k,blkVal:M,hdlr:v,add:Qe,notify:Re,use:xe,trk:et},fe}s(Oue,"_createState");function V5(v,I){var T={fn:I,rm:s(function(){T.fn=null,v=null,I=null},"rm")};return je(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),v.use(T,I),T}s(V5,"_createAndUseHandler");function I$(v,I,T){var k=Mue(I);if(k)return k;var M=Qg("dyncfg",!0),q=I&&T!==!1?I:E$(I),G;function ce(){G.notify()}s(ce,"_notifyWatchers");function fe(st,wt,$t){try{st=Hb(G,st,wt,$t)}catch(sr){o_(v,wt,"Setting value",sr)}return st[wt]}s(fe,"_setValue");function xe(st){return V5(G,st)}s(xe,"_watch");function Re(st,wt){G.use(null,function($t){var sr=G.upd;try{$(wt)||(G.upd=wt),st($t)}finally{G.upd=sr}})}s(Re,"_block");function Qe(st,wt){var $t;return $b(G,st,wt,($t={},$t[0]=!0,$t))[wt]}s(Qe,"_ref");function et(st,wt){var $t;return $b(G,st,wt,($t={},$t[1]=!0,$t))[wt]}s(et,"_rdOnly");function He(st,wt){var $t;return $b(G,st,wt,($t={},$t[2]=!0,$t))[wt]}s(He,"_blkPropValue");function Ke(st,wt){return wt&&le(wt,function($t,sr){FL(gt,st,$t,sr)}),st}s(Ke,"_applyDefaults");var gt={uid:null,cfg:q,logger:v,notify:ce,set:fe,setDf:Ke,watch:xe,ref:Qe,rdOnly:et,blkVal:He,_block:Re};return je(gt,"uid",{c:!1,e:!1,w:!1,v:M}),G=Oue(gt),Wb(G,q,"config","Creating"),gt}s(I$,"_createDynamicHandler");function T$(v,I){v?(v[mb](I),v[fv](2,108,I)):qb(I)}s(T$,"_logInvalidAccess");function Xf(v,I,T,k){var M=I$(T,v||{},k);return I&&M.setDf(M.cfg,I),M}s(Xf,"createDynamicConfig");function Ug(v,I,T){var k=v[Hy]||v;return k.cfg&&(k.cfg===v||k.cfg[Hy]===k)?k[Bg](I):(T$(T,c$+Qt(v)),Xf(v,null,T)[Bg](I))}s(Ug,"onConfigChange");function jb(v,I){if(v&&v[pv])return v[pv](I)}s(jb,"runTargetUnload");function w$(v,I,T){var k;return T||(k=Ib(function(M){T=M})),v&&mue(v)>0?Vf(jb(v[0],I),function(){w$(_g(v,1),I,T)}):T(),k}s(w$,"doUnloadAll");var Que=500,S$="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Uue(v,I,T){return!v&&ie(v)?I:_t(v)?v:Ft(v)[pb]()==="true"}s(Uue,"_stringToBoolOrDefault");function que(v){return{mrg:!0,v}}s(que,"cfgDfMerge");function QL(v,I,T){return{fb:T,isVal:v,v:I}}s(QL,"cfgDfValidate");function km(v,I){return{fb:I,set:Uue,v:!!v}}s(km,"cfgDfBoolean");var z5=[Sb,_b,M5,Cv],K5=null,Y5;function Hue(v,I){return function(){var T=arguments,k=_$(I);if(k){var M=k.listener;M&&M[v]&&M[v][x5](M,T)}}}s(Hue,"_listenerProxyFunc");function $ue(){var v=Xo("Microsoft");return v&&(K5=v.ApplicationInsights),K5}s($ue,"_getExtensionNamespace");function _$(v){var I=K5;return!I&&v.disableDbgExt!==!0&&(I=K5||$ue()),I?I.ChromeDbgExt:null}s(_$,"getDebugExt");function Wue(v){if(!Y5){Y5={};for(var I=0;I<z5[di];I++)Y5[z5[I]]=Hue(z5[I],v)}return Y5}s(Wue,"getDebugListener");var Gb,R$="warnToConsole",jue="AI (Internal): ",Gue="AI: ",Vue="AITR_",k$={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Vb=(Gb={},Gb[0]=null,Gb[1]="errorToConsole",Gb[2]=R$,Gb[3]="debugToConsole",Gb);function of(v){return v?'"'+v[Fy](/\"/g,Fi)+'"':Fi}s(of,"_sanitizeDiagnosticText");function c_(v,I){var T=n_();if(T){var k="log";T[v]&&(k=v),Oe(T[k])&&T[k](I)}}s(c_,"_logToConsole");var J5=function(){function v(I,T,k,M){k===void 0&&(k=!1);var q=this;q[I5]=I,q[hv]=(k?Gue:jue)+I;var G=Fi;Lb()&&(G=nf().stringify(M));var ce=(T?" message:"+of(T):Fi)+(M?" props:"+of(G):Fi);q[hv]+=ce}return s(v,"_InternalLogMessage"),v.dataType="MessageData",v}();function l_(v,I){return(v||{})[bc]||new u_(I)}s(l_,"safeGetLogger");var u_=function(){function v(I){this.identifier="DiagnosticLogger",this.queue=[];var T=0,k={},M,q,G,ce,fe;ku(v,this,function(xe){fe=Qe(I||{}),xe.consoleLoggingLevel=function(){return M},xe[fv]=function(Ke,gt,st,wt,$t){$t===void 0&&($t=!1);var sr=new J5(gt,st,$t,wt);if(ce)throw Qt(sr);var _r=Vb[Ke]||R$;if($(sr[hv]))He("throw"+(Ke===1?"Critical":"Warning"),sr);else{if($t){var ii=+sr[I5];!k[ii]&&M>=Ke&&(xe[_r](sr[hv]),k[ii]=!0)}else M>=Ke&&xe[_r](sr[hv]);Re(Ke,sr)}},xe.debugToConsole=function(Ke){c_("debug",Ke),He("warning",Ke)},xe[mb]=function(Ke){c_("warn",Ke),He("warning",Ke)},xe.errorToConsole=function(Ke){c_("error",Ke),He("error",Ke)},xe.resetInternalMessageCount=function(){T=0,k={}},xe.logInternalMessage=Re,xe[pv]=function(Ke){fe&&fe.rm(),fe=null};function Re(Ke,gt){if(!et()){var st=!0,wt=Vue+gt[I5];if(k[wt]?st=!1:k[wt]=!0,st&&(Ke<=q&&(xe.queue[Eo](gt),T++,He(Ke===1?"error":"warn",gt)),T===G)){var $t="Internal events throttle limit per PageView reached for this app.",sr=new J5(23,$t,!1);xe.queue[Eo](sr),Ke===1?xe.errorToConsole($t):xe[mb]($t)}}}s(Re,"_logInternalMessage");function Qe(Ke){return Ug(Xf(Ke,k$,xe).cfg,function(gt){var st=gt.cfg;M=st[YH],q=st.loggingLevelTelemetry,G=st.maxMessageLimit,ce=st.enableDebug})}s(Qe,"_setDefaultsFromConfig");function et(){return T>=G}s(et,"_areInternalMessagesThrottled");function He(Ke,gt){var st=_$(I||{});st&&st[Tm]&&st[Tm](Ke,gt)}s(He,"_debugExtMsg")})}return s(v,"DiagnosticLogger"),v.__ieDyn=1,v}();function UL(v){return v||new u_}s(UL,"_getLogger");function Fr(v,I,T,k,M,q){q===void 0&&(q=!1),UL(v)[fv](I,T,k,M,q)}s(Fr,"_throwInternal");function X5(v,I){UL(v)[mb](I)}s(X5,"_warnToConsole");var d_,Wy,P$="toGMTString",D$="toUTCString",Z5="cookie",qg="expires",B$="isCookieUseDisabled",e4="disableCookiesUsage",N$="_ckMgr",t4=null,zb=null,r4=null,Pm,M$={},L$={},F$=(d_={cookieCfg:que((Wy={},Wy[F5]={fb:"cookieDomain",dfVal:Q5},Wy.path={fb:"cookiePath",dfVal:Q5},Wy.enabled=zf,Wy.ignoreCookies=zf,Wy.blockedCookies=zf,Wy)),cookieDomain:zf,cookiePath:zf},d_[e4]=zf,d_);function qL(){!Pm&&(Pm=yr(function(){return vc()}))}s(qL,"_getDoc");function f_(v){return v?v.isEnabled():!0}s(f_,"_isMgrEnabled");function HL(v,I){return I&&v&&Je(v.ignoreCookies)?Ec(v.ignoreCookies,I)!==-1:!1}s(HL,"_isIgnoredCookie");function zue(v,I){return I&&v&&Je(v.blockedCookies)&&Ec(v.blockedCookies,I)!==-1?!0:HL(v,I)}s(zue,"_isBlockedCookie");function $L(v,I){var T=I[bm];if(ie(T)){var k=void 0;$(v[B$])||(k=!v[B$]),$(v[e4])||(k=!v[e4]),T=k}return T}s($L,"_isCfgEnabled");function Kue(v,I){var T,k,M,q,G,ce,fe,xe;v=Xf(v||L$,null,I).cfg,q=Ug(v,function(Qe){Qe.setDf(Qe.cfg,F$),T=Qe.ref(Qe.cfg,"cookieCfg"),k=T[O5]||"/",M=T[F5],G=$L(v,T)!==!1,ce=T.getCookie||Yue,fe=T.setCookie||Kb,xe=T.delCookie||Kb},I);var Re={isEnabled:s(function(){var Qe=$L(v,T)!==!1&&G&&O$(I),et=L$[N$];return Qe&&et&&Re!==et&&(Qe=f_(et)),Qe},"isEnabled"),setEnabled:s(function(Qe){G=Qe!==!1,T[bm]=Qe},"setEnabled"),set:s(function(Qe,et,He,Ke,gt){var st=!1;if(f_(Re)&&!zue(T,Qe)){var wt={},$t=no(et||Fi),sr=kg($t,";");if(sr!==-1&&($t=no(D(et,sr)),wt=WL(Ce(et,sr+1))),Qy(wt,F5,Ke||M,ue,$),!ie(He)){var _r=op();if($(wt[qg])){var ii=hd(),Hi=ii+He*1e3;if(Hi>0){var $i=new Date;$i.setTime(Hi),Qy(wt,qg,Q$($i,_r?P$:D$)||Q$($i,_r?P$:D$)||Fi,ue)}}_r||Qy(wt,"max-age",Fi+He,null,$)}var Go=Mb();Go&&Go.protocol==="https:"&&(Qy(wt,"secure",null,null,$),zb===null&&(zb=!Jue((xc()||{})[w5])),zb&&Qy(wt,"SameSite","None",null,$)),Qy(wt,O5,gt||k,null,$),fe(Qe,U$($t,wt)),st=!0}return st},"set"),get:s(function(Qe){var et=Fi;return f_(Re)&&!HL(T,Qe)&&(et=ce(Qe)),et},"get"),del:s(function(Qe,et){var He=!1;return f_(Re)&&(He=Re.purge(Qe,et)),He},"del"),purge:s(function(Qe,et){var He,Ke=!1;if(O$(I)){var gt=(He={},He[O5]=et||"/",He[qg]="Thu, 01 Jan 1970 00:00:01 GMT",He);op()||(gt["max-age"]="0"),xe(Qe,U$(Fi,gt)),Ke=!0}return Ke},"purge"),unload:s(function(Qe){q&&q.rm(),q=null},"unload")};return Re[N$]=Re,Re}s(Kue,"createCookieMgr");function O$(v){if(t4===null){t4=!1,!Pm&&qL();try{var I=Pm.v||{};t4=I[Z5]!==void 0}catch(T){Fr(v,2,68,"Cannot access document.cookie - "+Tl(T),{exception:Qt(T)})}}return t4}s(O$,"areCookiesSupported");function WL(v){var I={};if(v&&v[di]){var T=no(v)[Ly](";");Kr(T,function(k){if(k=no(k||Fi),k){var M=kg(k,"=");M===-1?I[k]=null:I[no(D(k,M))]=no(Ce(k,M+1))}})}return I}s(WL,"_extractParts");function Q$(v,I){return Oe(v[I])?v[I]():null}s(Q$,"_formatDate");function U$(v,I){var T=v||Fi;return le(I,function(k,M){T+="; "+k+(ie(M)?Fi:"="+M)}),T}s(U$,"_formatCookieValue");function Yue(v){var I=Fi;if(!Pm&&qL(),Pm.v){var T=Pm.v[Z5]||Fi;r4!==T&&(M$=WL(T),r4=T),I=no(M$[v]||Fi)}return I}s(Yue,"_getCookieValue");function Kb(v,I){!Pm&&qL(),Pm.v&&(Pm.v[Z5]=v+"="+I)}s(Kb,"_setCookieValue");function Jue(v){return Ae(v)?!!(jl(v,"CPU iPhone OS 12")||jl(v,"iPad; CPU OS 12")||jl(v,"Macintosh; Intel Mac OS X 10_14")&&jl(v,"Version/")&&jl(v,"Safari")||jl(v,"Macintosh; Intel Mac OS X 10_14")&&WH(v,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||jl(v,"Chrome/5")||jl(v,"Chrome/6")||jl(v,"UnrealEngine")&&!jl(v,"Chrome")||jl(v,"UCBrowser/12")||jl(v,"UCBrowser/11")):!1}s(Jue,"uaDisallowsSameSiteNone");var jL={perfEvtsSendAll:!1};function Xue(v){v.h=null;var I=v.cb;v.cb=[],Kr(I,function(T){z(T.fn,[T.arg])})}s(Xue,"_runScheduledListeners");function jy(v,I,T,k){Kr(v,function(M){M&&M[I]&&(T?(T.cb[Eo]({fn:k,arg:M}),T.h=T.h||Ry(Xue,0,T)):z(k,[M]))})}s(jy,"_runListeners");var Zue=function(){function v(I){this.listeners=[];var T,k,M=[],q={h:null,cb:[]},G=Xf(I,jL);k=G[Bg](function(ce){T=!!ce.cfg.perfEvtsSendAll}),ku(v,this,function(ce){je(ce,"listeners",{g:s(function(){return M},"g")}),ce[E5]=function(fe){M[Eo](fe)},ce[zS]=function(fe){for(var xe=Ec(M,fe);xe>-1;)M[hb](xe,1),xe=Ec(M,fe)},ce[Sb]=function(fe){jy(M,Sb,q,function(xe){xe[Sb](fe)})},ce[_b]=function(fe,xe){jy(M,_b,q,function(Re){Re[_b](fe,xe)})},ce[M5]=function(fe,xe){jy(M,M5,xe?q:null,function(Re){Re[M5](fe,xe)})},ce[Cv]=function(fe){fe&&(T||!fe[AL]())&&jy(M,Cv,null,function(xe){fe.isAsync?Ry(function(){return xe[Cv](fe)},0):xe[Cv](fe)})},ce[xL]=function(fe){fe&&fe[di]&&jy(M,xL,q,function(xe){xe[xL](fe)})},ce[EL]=function(fe){fe&&fe[xb]&&jy(M,EL,q,function(xe){xe[EL](fe)})},ce[L5]=function(fe,xe){if(fe>0){var Re=xe||0;jy(M,L5,q,function(Qe){Qe[L5](fe,Re)})}},ce[pv]=function(fe){var xe=s(function(){k&&k.rm(),k=null,M=[],q.h&&q.h[gb](),q.h=null,q.cb=[]},"_finishUnload"),Re;if(jy(M,"unload",null,function(Qe){var et=Qe[pv](fe);et&&(Re||(Re=[]),Re[Eo](et))}),Re)return Ib(function(Qe){return Vf(vL(Re),function(){xe(),Qe()})});xe()}})}return s(v,"NotificationManager"),v.__ieDyn=1,v}(),Yb="ctx",GL="ParentContextKey",p_="ChildrenContextKey",ede=null,n4=function(){function v(I,T,k){var M=this;if(M.start=hd(),M[Ny]=I,M.isAsync=k,M[AL]=function(){return!1},Oe(T)){var q;je(M,"payload",{g:s(function(){return!q&&Oe(T)&&(q=T(),T=null),q},"g")})}M[Oy]=function(G){return G?G===v[GL]||G===v[p_]?M[G]:(M[Yb]||{})[G]:null},M[np]=function(G,ce){if(G)if(G===v[GL])M[G]||(M[AL]=function(){return!0}),M[G]=ce;else if(G===v[p_])M[G]=ce;else{var fe=M[Yb]=M[Yb]||{};fe[G]=ce}},M.complete=function(){var G=0,ce=M[Oy](v[p_]);if(Je(ce))for(var fe=0;fe<ce[di];fe++){var xe=ce[fe];xe&&(G+=xe.time)}M.time=hd()-M.start,M.exTime=M.time-G,M.complete=function(){}}}return s(v,"PerfEvent"),v.ParentContextKey="parent",v.ChildrenContextKey="childEvts",v}(),tde=function(){function v(I){this.ctx={},ku(v,this,function(T){T.create=function(k,M,q){return new n4(k,M,q)},T.fire=function(k){k&&(k.complete(),I&&Oe(I[Cv])&&I[Cv](k))},T[np]=function(k,M){if(k){var q=T[Yb]=T[Yb]||{};q[k]=M}},T[Oy]=function(k){return(T[Yb]||{})[k]}})}return s(v,"PerfManager"),v.__ieDyn=1,v}(),Dm="CoreUtils.doPerf";function Jb(v,I,T,k,M){if(v){var q=v;if(q[JS]&&(q=q[JS]()),q){var G=void 0,ce=q[Oy](Dm);try{if(G=q.create(I(),k,M),G){if(ce&&G[np]&&(G[np](n4[GL],ce),ce[Oy]&&ce[np])){var fe=ce[Oy](n4[p_]);fe||(fe=[],ce[np](n4[p_],fe)),fe[Eo](G)}return q[np](Dm,G),T(G)}}catch(xe){G&&G[np]&&G[np]("exception",xe)}finally{G&&q.fire(G),q[np](Dm,ce)}}}return T()}s(Jb,"doPerf");function Tc(){return ede}s(Tc,"getGblPerfMgr");var i4="00000000000000000000000000000000",Xb="0000000000000000";function o4(v,I,T){return v&&v[di]===I&&v!==T?!!v.match(/^[\da-f]*$/i):!1}s(o4,"_isValid");function Gy(v){return o4(v,32,i4)}s(Gy,"isValidTraceId");function bv(v){return o4(v,16,Xb)}s(bv,"isValidSpanId");var m_=y$("plugin");function Vy(v){return m_.get(v,"state",{},!0)}s(Vy,"_getPluginState");function VL(v,I){for(var T=[],k=null,M=v[wm](),q;M;){var G=M[yb]();if(G){k&&k[My]&&G[Kf]&&k[My](G),q=Vy(G);var ce=!!q[Em];G[Em]&&(ce=G[Em]()),ce||T[Eo](G),k=G,M=M[wm]()}}Kr(T,function(fe){var xe=v[Ic]();fe[VS](v.getCfg(),xe,I,v[wm]()),q=Vy(fe),!fe[Ic]&&!q[Ic]&&(q[Ic]=xe),q[Em]=!0,delete q[Im]})}s(VL,"initializePlugins");function zL(v){return v.sort(function(I,T){var k=0;if(T){var M=T[Kf];I[Kf]?k=M?I[wb]-T[wb]:1:M&&(k=-1)}else k=I?1:-1;return k})}s(zL,"sortPlugins");function rde(v){var I={};return{getName:s(function(){return I[Ny]},"getName"),setName:s(function(T){v&&v.setName(T),I[Ny]=T},"setName"),getTraceId:s(function(){return I.traceId},"getTraceId"),setTraceId:s(function(T){v&&v.setTraceId(T),Gy(T)&&(I.traceId=T)},"setTraceId"),getSpanId:s(function(){return I.spanId},"getSpanId"),setSpanId:s(function(T){v&&v.setSpanId(T),bv(T)&&(I.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return I[XH]},"getTraceFlags"),setTraceFlags:s(function(T){v&&v.setTraceFlags(T),I[XH]=T},"setTraceFlags")}}s(rde,"createDistributedTraceContext");var nde="TelemetryPluginChain",q$="_hasRun",KL="_getTelCtx",H$=0;function ide(v,I,T){for(;v;){if(v[yb]()===T)return v;v=v[wm]()}return N([T],I.config||{},I)}s(ide,"_getNextProxyStart");function YL(v,I,T,k){var M=null,q=[];I||(I=Xf({},null,T[bc])),k!==null&&(M=k?ide(v,T,k):v);var G={_next:fe,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return l_(T,I.cfg)},"diagLog"),getCfg:s(function(){return I.cfg},"getCfg"),getExtCfg:Re,getConfig:Qe,hasNext:s(function(){return!!M},"hasNext"),getNext:s(function(){return M},"getNext"),setNext:s(function(He){M=He},"setNext"),iterate:et,onComplete:ce}};function ce(He,Ke){for(var gt=[],st=2;st<arguments.length;st++)gt[st-2]=arguments[st];He&&q[Eo]({func:He,self:$(Ke)?G.ctx:Ke,args:gt})}s(ce,"_addOnComplete");function fe(){var He=M;if(M=He?He[wm]():null,!He){var Ke=q;Ke&&Ke[di]>0&&(Kr(Ke,function(gt){try{gt.func.call(gt.self,gt.args)}catch(st){Fr(T[bc],2,73,"Unexpected Exception during onComplete - "+Qt(st))}}),q=[])}return He}s(fe,"_moveNext");function xe(He,Ke){var gt=null,st=I.cfg;if(st&&He){var wt=st[yv];!wt&&Ke&&(wt={}),st[yv]=wt,wt=I.ref(st,yv),wt&&(gt=wt[He],!gt&&Ke&&(gt={}),wt[He]=gt,gt=I.ref(wt,He))}return gt}s(xe,"_getExtCfg");function Re(He,Ke){var gt=xe(He,!0);return Ke&&le(Ke,function(st,wt){if(ie(gt[st])){var $t=I.cfg[st];($t||!ie($t))&&(gt[st]=$t)}FL(I,gt,st,wt)}),I.setDf(gt,Ke)}s(Re,"_resolveExtCfg");function Qe(He,Ke,gt){gt===void 0&&(gt=!1);var st,wt=xe(He,!1),$t=I.cfg;return wt&&(wt[Ke]||!ie(wt[Ke]))?st=wt[Ke]:($t[Ke]||!ie($t[Ke]))&&(st=$t[Ke]),st||!ie(st)?st:gt}s(Qe,"_getConfig");function et(He){for(var Ke;Ke=G._next();){var gt=Ke[yb]();gt&&He(gt)}}return s(et,"_iterateChain"),G}s(YL,"_createInternalContext");function Zb(v,I,T,k){var M=Xf(I),q=YL(v,M,T,k),G=q.ctx;function ce(xe){var Re=q._next();return Re&&Re[Kf](xe,G),!Re}s(ce,"_processNext");function fe(xe,Re){return xe===void 0&&(xe=null),Je(xe)&&(xe=N(xe,M.cfg,T,Re)),Zb(xe||G[wm](),M.cfg,T,Re)}return s(fe,"_createNew"),G[Wl]=ce,G[mv]=fe,G}s(Zb,"createProcessTelemetryContext");function w(v,I,T){var k=Xf(I.config),M=YL(v,k,I,T),q=M.ctx;function G(fe){var xe=M._next();return xe&&xe[pv](q,fe),!xe}s(G,"_processNext");function ce(fe,xe){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,k.cfg,I,xe)),w(fe||q[wm](),I,xe)}return s(ce,"_createNew"),q[Wl]=G,q[mv]=ce,q}s(w,"createProcessTelemetryUnloadContext");function P(v,I,T){var k=Xf(I.config),M=YL(v,k,I,T),q=M.ctx;function G(fe){return q.iterate(function(xe){Oe(xe[Ng])&&xe[Ng](q,fe)})}s(G,"_processNext");function ce(fe,xe){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,k.cfg,I,xe)),P(fe||q[wm](),I,xe)}return s(ce,"_createNew"),q[Wl]=G,q[mv]=ce,q}s(P,"createProcessTelemetryUpdateContext");function N(v,I,T,k){var M=null,q=!k;if(Je(v)&&v[di]>0){var G=null;Kr(v,function(ce){if(!q&&k===ce&&(q=!0),q&&ce&&Oe(ce[Kf])){var fe=W(ce,I,T);M||(M=fe),G&&G._setNext(fe),G=fe}})}return k&&!M?N([k],I,T):M}s(N,"createTelemetryProxyChain");function W(v,I,T){var k=null,M=Oe(v[Kf]),q=Oe(v[My]),G;v?G=v[By]+"-"+v[wb]+"-"+H$++:G="Unknown-0-"+H$++;var ce={getPlugin:s(function(){return v},"getPlugin"),getNext:s(function(){return k},"getNext"),processTelemetry:Re,unload:Qe,update:et,_id:G,_setNext:s(function(He){k=He},"_setNext")};function fe(){var He;return v&&Oe(v[KL])&&(He=v[KL]()),He||(He=Zb(ce,I,T)),He}s(fe,"_getTelCtx");function xe(He,Ke,gt,st,wt){var $t=!1,sr=v?v[By]:nde,_r=He[q$];return _r||(_r=He[q$]={}),He.setNext(k),v&&Jb(He[Ic](),function(){return sr+":"+gt},function(){_r[G]=!0;try{var ii=k?k._id:Fi;ii&&(_r[ii]=!1),$t=Ke(He)}catch($i){var Hi=k?_r[k._id]:!0;Hi&&($t=!0),(!k||!Hi)&&Fr(He[Tm](),1,73,"Plugin ["+sr+"] failed during "+gt+" - "+Qt($i)+", run flags: "+Qt(_r))}},st,wt),$t}s(xe,"_processChain");function Re(He,Ke){Ke=Ke||fe();function gt(st){if(!v||!M)return!1;var wt=Vy(v);return wt[Im]||wt[N5]?!1:(q&&v[My](k),v[Kf](He,st),!0)}s(gt,"_callProcessTelemetry"),xe(Ke,gt,"processTelemetry",function(){return{item:He}},!He.sync)||Ke[Wl](He)}s(Re,"_processTelemetry");function Qe(He,Ke){function gt(){var st=!1;if(v){var wt=Vy(v),$t=v[Ic]||wt[Ic];v&&(!$t||$t===He.core())&&!wt[Im]&&(wt[Ic]=null,wt[Im]=!0,wt[Em]=!1,v[Im]&&v[Im](He,Ke)===!0&&(st=!0))}return st}s(gt,"_callTeardown"),xe(He,gt,"unload",function(){},Ke.isAsync)||He[Wl](Ke)}s(Qe,"_unloadPlugin");function et(He,Ke){function gt(){var st=!1;if(v){var wt=Vy(v),$t=v[Ic]||wt[Ic];v&&(!$t||$t===He.core())&&!wt[Im]&&v[Ng]&&v[Ng](He,Ke)===!0&&(st=!0)}return st}s(gt,"_callUpdate"),xe(He,gt,"update",function(){},!1)||He[Wl](Ke)}return s(et,"_updatePlugin"),Zt(ce)}s(W,"createTelemetryPluginProxy");function de(){var v=[];function I(k){k&&v[Eo](k)}s(I,"_addHandler");function T(k,M){Kr(v,function(q){try{q(k,M)}catch(G){Fr(k[Tm](),2,73,"Unexpected error calling unload handler - "+Qt(G))}}),v=[]}return s(T,"_runHandlers"),{add:I,run:T}}s(de,"createUnloadHandlerContainer");function we(){var v=[];function I(k){var M=v;v=[],Kr(M,function(q){try{(q.rm||q.remove).call(q)}catch(G){Fr(k,2,73,"Unloading:"+Qt(G))}})}s(I,"_doUnload");function T(k){k&&Wf(v,k)}return s(T,"_addHook"),{run:I,add:T}}s(we,"createUnloadHookContainer");var ke,We="getPlugin",it=(ke={},ke[yv]={isVal:Q5,v:{}},ke),Et=function(){function v(){var I=this,T,k,M,q,G;xe(),ku(v,I,function(Re){Re[VS]=function(Qe,et,He,Ke){fe(Qe,et,Ke),T=!0},Re[Im]=function(Qe,et){var He=Re[Ic];if(!He||Qe&&He!==Qe[Ic]())return;var Ke,gt=!1,st=Qe||w(null,He,M&&M[We]?M[We]():M),wt=et||{reason:0,isAsync:!1};function $t(){gt||(gt=!0,q.run(st,et),G.run(st[Tm]()),Ke===!0&&st[Wl](wt),xe())}return s($t,"_unloadCallback"),!Re[T5]||Re[T5](st,wt,$t)!==!0?$t():Ke=!0,Ke},Re[Ng]=function(Qe,et){var He=Re[Ic];if(!He||Qe&&He!==Qe[Ic]())return;var Ke,gt=!1,st=Qe||P(null,He,M&&M[We]?M[We]():M),wt=et||{reason:0};function $t(){gt||(gt=!0,fe(st.getCfg(),st.core(),st[wm]()))}return s($t,"_updateCallback"),!Re._doUpdate||Re._doUpdate(st,wt,$t)!==!0?$t():Ke=!0,Ke},ZS(Re,"_addUnloadCb",function(){return q},"add"),ZS(Re,"_addHook",function(){return G},"add"),je(Re,"_unloadHooks",{g:s(function(){return G},"g")})}),I[Tm]=function(Re){return ce(Re)[Tm]()},I[Em]=function(){return T},I.setInitialized=function(Re){T=Re},I[My]=function(Re){M=Re},I[Wl]=function(Re,Qe){Qe?Qe[Wl](Re):M&&Oe(M[Kf])&&M[Kf](Re,null)},I._getTelCtx=ce;function ce(Re){Re===void 0&&(Re=null);var Qe=Re;if(!Qe){var et=k||Zb(null,{},I[Ic]);M&&M[We]?Qe=et[mv](null,M[We]):Qe=et[mv](null,M)}return Qe}s(ce,"_getTelCtx");function fe(Re,Qe,et){Xf(Re,it,l_(Qe)),!et&&Qe&&(et=Qe[Cb]()[wm]());var He=M;M&&M[We]&&(He=M[We]()),I[Ic]=Qe,k=Zb(et,Re,Qe,He)}s(fe,"_setDefaults");function xe(){T=!1,I[Ic]=null,k=null,M=null,G=we(),q=de()}s(xe,"_initDefaults")}return s(v,"BaseTelemetryPlugin"),v.__ieDyn=1,v}();function gr(v,I,T){var k={id:I,fn:T};Wf(v,k);var M={remove:s(function(){Kr(v,function(q,G){if(q.id===k.id)return v[hb](G,1),-1})},"remove")};return M}s(gr,"_addInitializer");function Fn(v,I,T){for(var k=!1,M=v[di],q=0;q<M;++q){var G=v[q];if(G)try{if(G.fn[x5](null,[I])===!1){k=!0;break}}catch(ce){Fr(T,2,64,"Telemetry initializer failed: "+Tl(ce),{exception:Qt(ce)},!0)}}return!k}s(Fn,"_runInitializers");var ti=function(v){GS(I,v);function I(){var T=v.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var k,M;q(),ku(I,T,function(G,ce){G.addTelemetryInitializer=function(fe){return gr(M,k++,fe)},G[Kf]=function(fe,xe){Fn(M,fe,xe?xe[Tm]():G[Tm]())&&G[Wl](fe,xe)},G[T5]=function(){q()}});function q(){k=0,M=[]}return s(q,"_initDefaults"),T}return s(I,"TelemetryInitializerPlugin"),I.__ieDyn=1,I}(Et),xr,Mr="Plugins must provide initialize method",Jn="_notificationManager",On="SDK is still unloading...",Oi="SDK is not initialized",Lo=100,io=5e4,Gc=or((xr={cookieCfg:{}},xr[Tb]={rdOnly:!0,ref:!0,v:[]},xr[Fg]={rdOnly:!0,ref:!0,v:[]},xr[yv]={ref:!0,v:{}},xr[ip]=zf,xr.loggingLevelConsole=0,xr.diagnosticLogInterval=zf,xr));function eI(v,I){return new tde(I)}s(eI,"_createPerfManager");function h_(v,I,T){var k=[],M=[],q={};return Kr(T,function(G){(ie(G)||ie(G[VS]))&&Vr(Mr);var ce=G[wb],fe=G[By];G&&ce&&(ie(q[ce])?q[ce]=fe:X5(v,"Two extensions have same priority #"+ce+" - "+q[ce]+", "+fe)),!ce||ce<I?k[Eo](G):M[Eo](G)}),{core:k,channels:M}}s(h_,"_validateExtensions");function JL(v,I){var T=!1;return Kr(I,function(k){if(k===v)return T=!0,-1}),T}s(JL,"_isPluginPresent");function s4(v,I,T,k){T&&le(T,function(M,q){k&&gd(q)&&gd(I[M])&&s4(v,I[M],q,k),k&&gd(q)&&gd(I[M])?s4(v,I[M],q,k):v.set(I,M,q)})}s(s4,"_deepMergeConfig");function $$(v,I){var T=null,k=-1;return Kr(v,function(M,q){if(M.w===I)return T=M,k=q,-1}),{i:k,l:T}}s($$,"_findWatcher");function ode(v,I){var T=$$(v,I).l;return T||(T={w:I,rm:s(function(){var k=$$(v,I);k.i!==-1&&v[hb](k.i,1)},"rm")},v[Eo](T)),T}s(ode,"_addDelayedCfgListener");function XL(v,I,T){Kr(I,function(k){var M=Ug(v,k.w,T);delete k.w,k.rm=function(){M.rm()}})}s(XL,"_registerDelayedCfgListener");function W$(v,I,T,k){return I.add(v[Bg](function(M){var q=M.cfg.disableDbgExt;q===!0&&k&&(T[zS](k),k=null),T&&!k&&q!==!0&&(k=Wue(M.cfg),T[E5](k))})),k}s(W$,"_initDebugListener");function j$(v){return je({rm:s(function(){v.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(v)+">"},"v")})}s(j$,"_createUnloadHook");var Nt=function(){function v(){var I,T,k,M,q,G,ce,fe,xe,Re,Qe,et,He,Ke,gt,st,wt,$t,sr,_r,ii,Hi,$i,Go,wn,tn,Wi,Ca,bs,Wt,rn,Fo;ku(v,this,function(Dt){dt(),Dt._getDbgPlgTargets=function(){return[$i,M]},Dt[Em]=function(){return T},Dt.activeStatus=function(){return tn},Dt._setPendingStatus=function(){tn=3},Dt[VS]=function(yt,Tr,Wn,Jr){He&&Vr(On),Dt[Em]()&&Vr("Core cannot be initialized more than once"),I=Xf(yt,Gc,Wn||Dt[bc],!1),yt=I.cfg,Bu(I[Bg](function(os){var Gs=os.cfg,vd=tn===3;if(!vd){Ca=Gs.initInMemoMaxSize||Lo;var Zf=Gs.instrumentationKey,Wg=Gs.endpointUrl;if(ie(Zf)){ii=null,tn=Dy.INACTIVE;var jg="Please provide instrumentation key";T?(Fr(k,1,100,jg),Ua()):Vr(jg);return}var C4=[];if(ht(Zf)?(C4[Eo](Zf),ii=null):ii=Zf,ht(Wg)?(C4[Eo](Wg),Wi=null):Wi=Wg,C4[di]){bs=!1,tn=3;var y9=Q5(Gs.initTimeOut)?Gs.initTimeOut:io,Fde=rf(C4);Ry(function(){bs||Qn()},y9),Vf(Fde,function(dI){try{if(bs)return;if(!dI.rejected){var fI=dI[Ab];if(fI&&fI[di]){var hW=fI[0];if(ii=hW&&hW[Ab],fI[di]>1){var gW=fI[1];Wi=gW&&gW[Ab]}}ii&&(yt.instrumentationKey=ii,yt.endpointUrl=Wi)}Qn()}catch{bs||Qn()}})}else Qn();var v4=os.ref(os.cfg,yv);le(v4,function(dI){os.ref(v4,dI)})}})),q=Jr,sr=W$(I,$t,q&&Dt[rp](),sr),lI(),Dt[bc]=Wn;var jn=yt[Tb];if(Re=[],Re[Eo].apply(Re,zH(zH([],Tr,!1),jn)),Qe=yt[Fg],qa(null),(!et||et[di]===0)&&Vr("No "+Fg+" available"),Qe&&Qe[di]>1){var Zo=Dt[yb]("TeeChannelController");(!Zo||!Zo.plugin)&&Fr(k,1,28,"TeeChannel required")}XL(yt,Hi,k),Hi=null,T=!0,tn===Dy.ACTIVE&&Ua()},Dt.getChannels=function(){var yt=[];return et&&Kr(et,function(Tr){yt[Eo](Tr)}),Zt(yt)},Dt.track=function(yt){Jb(Dt[JS](),function(){return"AppInsightsCore:track"},function(){yt===null&&(va(yt),Vr("Invalid telemetry item")),!yt[Ny]&&ie(yt[Ny])&&(va(yt),Vr("telemetry name required")),yt.iKey=yt.iKey||ii,yt.time=yt.time||XS(new Date),yt.ver=yt.ver||"4.0",!He&&Dt[Em]()&&tn===Dy.ACTIVE?Kc()[Wl](yt):tn!==Dy.INACTIVE&&M[di]<=Ca&&M[Eo](yt)},function(){return{item:yt}},!yt.sync)},Dt[Cb]=Kc,Dt[rp]=function(){return q||(q=new Zue(I.cfg),Dt[Jn]=q),q},Dt[E5]=function(yt){Dt.getNotifyMgr()[E5](yt)},Dt[zS]=function(yt){q&&q[zS](yt)},Dt.getCookieMgr=function(){return fe||(fe=Kue(I.cfg,Dt[bc])),fe},Dt.setCookieMgr=function(yt){fe!==yt&&(jb(fe,!1),fe=yt)},Dt[JS]=function(){return G||ce||Tc()},Dt.setPerfMgr=function(yt){G=yt},Dt.eventCnt=function(){return M[di]},Dt.releaseQueue=function(){if(T&&M[di]>0){var yt=M;M=[],tn===2?Kr(yt,function(Tr){Tr.iKey=Tr.iKey||ii,Kc()[Wl](Tr)}):Fr(k,2,20,"core init status is not active")}},Dt.pollInternalLogs=function(yt){return gt=yt||null,Fo=!1,Wt&&Wt[gb](),Vo(!0)};function Qn(){bs=!0,ie(ii)?(tn=Dy.INACTIVE,Fr(k,1,112,"ikey can't be resolved from promises")):tn=Dy.ACTIVE,Ua()}s(Qn,"_setStatus");function Ua(){T&&(Dt.releaseQueue(),Dt.pollInternalLogs())}s(Ua,"_releaseQueues");function Vo(yt){if((!Wt||!Wt[bm])&&!Fo){var Tr=yt||k&&k.queue[di]>0;Tr&&(rn||(rn=!0,Bu(I[Bg](function(Wn){var Jr=Wn.cfg.diagnosticLogInterval;(!Jr||!(Jr>0))&&(Jr=1e4);var jn=!1;Wt&&(jn=Wt[bm],Wt[gb]()),Wt=m5(cI,Jr),Wt.unref(),Wt[bm]=jn}))),Wt[bm]=!0)}return Wt}s(Vo,"_startLogPoller"),Dt[KH]=function(){Fo=!0,Wt&&Wt[gb](),cI()},IL(Dt,function(){return Ke},["addTelemetryInitializer"]),Dt[pv]=function(yt,Tr,Wn){yt===void 0&&(yt=!0),T||Vr(Oi),He&&Vr(On);var Jr={reason:50,isAsync:yt,flushComplete:!1},jn;yt&&!Tr&&(jn=Ib(function(Gs){Tr=Gs}));var Zo=w(Nm(),Dt);Zo[b5](function(){$t.run(Dt[bc]),w$([fe,q,k],yt,function(){dt(),Tr&&Tr(Jr)})},Dt);function os(Gs){Jr.flushComplete=Gs,He=!0,wt.run(Zo,Jr),Dt[KH](),Zo[Wl](Jr)}return s(os,"_doUnload"),cI(),Hg(yt,os,6,Wn),jn},Dt[yb]=Kl,Dt.addPlugin=function(yt,Tr,Wn,Jr){if(!yt){Jr&&Jr(!1),uI(Mr);return}var jn=Kl(yt[By]);if(jn&&!Tr){Jr&&Jr(!1),uI("Plugin ["+yt[By]+"] is already loaded!");return}var Zo={reason:16};function os(Zf){Re[Eo](yt),Zo.added=[yt],qa(Zo),Jr&&Jr(!0)}if(s(os,"_addPlugin"),jn){var Gs=[jn.plugin],vd={reason:2,isAsync:!!Wn};sf(Gs,vd,function(Zf){Zf?(Zo.removed=Gs,Zo.reason|=32,os()):Jr&&Jr(!1)})}else os()},Dt.updateCfg=function(yt,Tr){Tr===void 0&&(Tr=!0);var Wn;if(Dt[Em]()){Wn={reason:1,cfg:I.cfg,oldCfg:l5({},I.cfg),newConfig:l5({},yt),merge:Tr},yt=Wn.newConfig;var Jr=I.cfg;yt[Tb]=Jr[Tb],yt[Fg]=Jr[Fg]}I._block(function(jn){var Zo=jn.cfg;s4(jn,Zo,yt,Tr),Tr||le(Zo,function(os){$e(yt,os)||jn.set(Zo,os,zf)}),jn.setDf(Zo,Gc)},!0),I.notify(),Wn&&$g(Wn)},Dt.evtNamespace=function(){return st},Dt.flush=Hg,Dt.getTraceCtx=function(yt){return _r||(_r=rde()),_r},Dt.setTraceCtx=function(yt){_r=yt||null},Dt.addUnloadHook=Bu,ZS(Dt,"addUnloadCb",function(){return wt},"add"),Dt.onCfgChange=function(yt){var Tr;return T?Tr=Ug(I.cfg,yt,Dt[bc]):Tr=ode(Hi,yt),j$(Tr)},Dt.getWParam=function(){return Aa()||I.cfg.enableWParam?0:-1};function zl(){var yt={};Go=[];var Tr=s(function(Wn){Wn&&Kr(Wn,function(Jr){if(Jr[By]&&Jr[vb]&&!yt[Jr.identifier]){var jn=Jr[By]+"="+Jr[vb];Go[Eo](jn),yt[Jr.identifier]=Jr}})},"_addPluginVersions");Tr(et),Qe&&Kr(Qe,function(Wn){Tr(Wn)}),Tr(Re)}s(zl,"_setPluginVersions");function dt(){T=!1,I=Xf({},Gc,Dt[bc]),I.cfg[YH]=1,je(Dt,"config",{g:s(function(){return I.cfg},"g"),s:s(function(Tr){Dt.updateCfg(Tr,!1)},"s")}),je(Dt,"pluginVersionStringArr",{g:s(function(){return Go||zl(),Go},"g")}),je(Dt,"pluginVersionString",{g:s(function(){return wn||(Go||zl(),wn=Go.join(";")),wn||Fi},"g")}),je(Dt,"logger",{g:s(function(){return k||(k=new u_(I.cfg),I[bc]=k),k},"g"),s:s(function(Tr){I[bc]=Tr,k!==Tr&&(jb(k,!1),k=Tr)},"s")}),Dt[bc]=new u_(I.cfg),$i=[];var yt=Dt.config[Tb]||[];yt.splice(0,yt[di]),Wf(yt,$i),Ke=new ti,M=[],jb(q,!1),q=null,G=null,ce=null,jb(fe,!1),fe=null,xe=null,Re=[],Qe=null,et=null,He=!1,gt=null,st=Qg("AIBaseCore",!0),wt=de(),_r=null,ii=null,$t=we(),Hi=[],wn=null,Go=null,Fo=!1,Wt=null,rn=!1,tn=0,Wi=null,Ca=null,bs=!1}s(dt,"_initDefaults");function Kc(){var yt=Zb(Nm(),I.cfg,Dt);return yt[b5](Vo),yt}s(Kc,"_createTelCtx");function qa(yt){var Tr=h_(Dt[bc],Que,Re);xe=null,wn=null,Go=null,et=(Qe||[])[0]||[],et=zL(Wf(et,Tr[Fg]));var Wn=Wf(zL(Tr[Ic]),et);$i=Zt(Wn);var Jr=Dt.config[Tb]||[];Jr.splice(0,Jr[di]),Wf(Jr,$i);var jn=Kc();et&&et[di]>0&&VL(jn[mv](et),Wn),VL(jn,Wn),yt&&$g(yt)}s(qa,"_initPluginChain");function Kl(yt){var Tr=null,Wn=null,Jr=[];return Kr($i,function(jn){if(jn[By]===yt&&jn!==Ke)return Wn=jn,-1;jn.getChannel&&Jr[Eo](jn)}),!Wn&&Jr[di]>0&&Kr(Jr,function(jn){if(Wn=jn.getChannel(yt),!Wn)return-1}),Wn&&(Tr={plugin:Wn,setEnabled:s(function(jn){Vy(Wn)[N5]=!jn},"setEnabled"),isEnabled:s(function(){var jn=Vy(Wn);return!jn[Im]&&!jn[N5]},"isEnabled"),remove:s(function(jn,Zo){jn===void 0&&(jn=!0);var os=[Wn],Gs={reason:1,isAsync:jn};sf(os,Gs,function(vd){vd&&qa({reason:32,removed:os}),Zo&&Zo(vd)})},"remove")}),Tr}s(Kl,"_getPlugin");function Nm(){if(!xe){var yt=($i||[]).slice();Ec(yt,Ke)===-1&&yt[Eo](Ke),xe=N(zL(yt),I.cfg,Dt)}return xe}s(Nm,"_getPluginChain");function sf(yt,Tr,Wn){if(yt&&yt[di]>0){var Jr=N(yt,I.cfg,Dt),jn=w(Jr,Dt);jn[b5](function(){var Zo=!1,os=[];Kr(Re,function(vd,Zf){JL(vd,yt)?Zo=!0:os[Eo](vd)}),Re=os,wn=null,Go=null;var Gs=[];Qe&&(Kr(Qe,function(vd,Zf){var Wg=[];Kr(vd,function(jg){JL(jg,yt)?Zo=!0:Wg[Eo](jg)}),Gs[Eo](Wg)}),Qe=Gs),Wn&&Wn(Zo),Vo()}),jn[Wl](Tr)}else Wn(!1)}s(sf,"_removePlugins");function cI(){if(k&&k.queue){var yt=k.queue.slice(0);k.queue[di]=0,Kr(yt,function(Tr){var Wn={name:gt||"InternalMessageId: "+Tr[I5],iKey:ii,time:XS(new Date),baseType:J5.dataType,baseData:{message:Tr[hv]}};Dt.track(Wn)})}}s(cI,"_flushInternalLogs");function Hg(yt,Tr,Wn,Jr){var jn=1,Zo=!1,os=null;Jr=Jr||5e3;function Gs(){jn--,Zo&&jn===0&&(os&&os[gb](),os=null,Tr&&Tr(Zo),Tr=null)}if(s(Gs,"doCallback"),et&&et[di]>0){var vd=Kc()[mv](et);vd.iterate(function(Zf){if(Zf.flush){jn++;var Wg=!1;Zf.flush(yt,function(){Wg=!0,Gs()},Wn)||Wg||(yt&&os==null?os=Ry(function(){os=null,Gs()},Jr):Gs())}})}return Zo=!0,Gs(),!0}s(Hg,"_flushChannels");function lI(){var yt;Bu(I[Bg](function(Tr){var Wn=Tr.cfg.enablePerfMgr;if(Wn){var Jr=Tr.cfg[ip];(yt!==Jr||!yt)&&(Jr||(Jr=eI),l$(Tr.cfg,ip,Jr),yt=Jr,ce=null),!G&&!ce&&Oe(Jr)&&(ce=Jr(Dt,Dt[rp]()))}else ce=null,yt=null}))}s(lI,"_initPerfManager");function $g(yt){var Tr=P(Nm(),Dt);Tr[b5](Vo),(!Dt._updateHook||Dt._updateHook(Tr,yt)!==!0)&&Tr[Wl](yt)}s($g,"_doUpdate");function uI(yt){var Tr=Dt[bc];Tr?(Fr(Tr,2,73,yt),Vo()):Vr(yt)}s(uI,"_logOrThrowError");function va(yt){var Tr=Dt[rp]();Tr&&Tr[_b]([yt],2)}s(va,"_notifyInvalidEvent");function Bu(yt){$t.add(yt)}s(Bu,"_addUnloadHook")})}return s(v,"AppInsightsCore"),v.__ieDyn=1,v}();function Yr(v,I){try{if(v&&v!==""){var T=nf().parse(v);if(T&&T[JH]&&T[JH]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[di])return T}}catch(k){Fr(I,1,43,"Cannot parse the response. "+(k[Ny]||Qt(k)),{response:v})}return null}s(Yr,"parseResponse");var vn="",gs="NoResponseBody",Vc="&"+gs+"=true",Qa="POST",zc=function(){function v(){var I=0,T,k,M,q,G,ce,fe,xe,Re,Qe,et,He,Ke,gt;ku(v,this,function(st,wt){var $t=!0;bs(),st[VS]=function(Wt,rn){M=rn,k&&Fr(M,1,28,"Sender is already initialized"),st.SetConfig(Wt),k=!0},st._getDbgPlgTargets=function(){return[k,q,ce,T]},st.SetConfig=function(Wt){try{if(G=Wt.senderOnCompleteCallBack||{},ce=!!Wt.disableCredentials,fe=Wt.fetchCredentials,q=!!Wt.isOneDs,T=!!Wt.enableSendPromise,Re=!!Wt.disableXhr,Qe=!!Wt.disableBeacon,et=!!Wt.disableBeaconSync,gt=Wt.timeWrapper,Ke=!!Wt.addNoResponse,He=!!Wt.disableFetchKeepAlive,xe={sendPOST:tn},q||($t=!1),ce){var rn=Mb();rn&&rn.protocol&&rn.protocol[pb]()==="file:"&&($t=!1)}return!0}catch{}return!1},st.getSyncFetchPayload=function(){return I},st.getSenderInst=function(Wt,rn){return Wt&&Wt[di]?Hi(Wt,rn):null},st.getFallbackInst=function(){return xe},st[T5]=function(Wt,rn){bs()};function sr(Wt,rn){$i(rn,200,{},Wt)}s(sr,"_onSuccess");function _r(Wt,rn){Fr(M,2,26,"Failed to send telemetry.",{message:Wt}),$i(rn,400,{})}s(_r,"_onError");function ii(Wt){_r("No endpoint url is provided for the batch",Wt)}s(ii,"_onNoPayloadUrl");function Hi(Wt,rn){for(var Fo=0,Dt=null,Qn=0;Dt==null&&Qn<Wt[di];)Fo=Wt[Qn],!Re&&Fo===1?PL()?Dt=Ca:DL()&&(Dt=tn):Fo===2&&i_(rn)&&(!rn||!He)?Dt=Wi:Fo===3&&qy()&&(rn?!et:!Qe)&&(Dt=wn),Qn++;return Dt?{_transport:Fo,_isSync:rn,sendPOST:Dt}:null}s(Hi,"_getSenderInterface");function $i(Wt,rn,Fo,Dt){try{Wt&&Wt(rn,Fo,Dt)}catch{}}s($i,"_doOnComplete");function Go(Wt,rn){var Fo=xc(),Dt=Wt[Mg];if(!Dt)return ii(rn),!0;Dt=Wt[Mg]+(Ke?Vc:vn);var Qn=Wt[xb],Ua=q?Qn:new Blob([Qn],{type:"text/plain;charset=UTF-8"}),Vo=Fo.sendBeacon(Dt,Ua);return Vo}s(Go,"_doBeaconSend");function wn(Wt,rn,Fo){var Dt=Wt[xb];try{if(Dt)if(Go(Wt,rn))sr(vn,rn);else{var Qn=G&&G.beaconOnRetry;Qn&&Oe(Qn)?Qn(Wt,rn,Go):(xe&&xe.sendPOST(Wt,rn,!0),Fr(M,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ua){q&&X5(M,"Failed to send telemetry using sendBeacon API. Ex:"+Qt(Ua)),$i(rn,q?0:400,{},vn)}}s(wn,"_beaconSender");function tn(Wt,rn,Fo){var Dt,Qn,Ua,Vo=Wt[yL]||{};!Fo&&T&&(Dt=Ib(function(qa,Kl){Qn=qa,Ua=Kl})),q&&Fo&&Wt.disableXhrSync&&(Fo=!1);var zl=Wt[Mg];if(!zl){ii(rn),Qn&&Qn(!1);return}var dt=SL(Qa,zl,$t,!0,Fo,Wt[Lg]);q||dt.setRequestHeader("Content-type","application/json"),Kr(Tt(Vo),function(qa){dt.setRequestHeader(qa,Vo[qa])}),dt.onreadystatechange=function(){q||(Kc(dt),dt.readyState===4&&Qn&&Qn(!0))},dt.onload=function(){q&&Kc(dt)};function Kc(qa){var Kl=G&&G.xhrOnComplete,Nm=Kl&&Oe(Kl);if(Nm)Kl(qa,rn,Wt);else{var sf=U5(qa);$i(rn,qa[KS],xv(qa,q),sf)}}return s(Kc,"_doOnReadyFunc"),dt.onerror=function(qa){$i(rn,q?dt[KS]:400,xv(dt,q),q?vn:q5(dt)),Ua&&Ua(qa)},dt.ontimeout=function(){$i(rn,q?dt[KS]:500,xv(dt,q),q?vn:q5(dt)),Qn&&Qn(!1)},dt.send(Wt[xb]),Dt}s(tn,"_xhrSender");function Wi(Wt,rn,Fo){var Dt,Qn=Wt[Mg],Ua=Wt[xb],Vo=q?Ua:new Blob([Ua],{type:"application/json"}),zl,dt,Kc,qa=new Headers,Kl=Ua[di],Nm=!1,sf=!1,cI=Wt[yL]||{},Hg=(Dt={method:Qa,body:Vo},Dt[S$]=!0,Dt);Wt.headers&&Tt(Wt.headers)[di]>0&&(Kr(Tt(cI),function(va){qa.append(va,cI[va])}),Hg[yL]=qa),fe?Hg.credentials=fe:$t&&q&&(Hg.credentials="include"),Fo&&(Hg.keepalive=!0,I+=Kl,q?Wt._sendReason===2&&(Nm=!0,Ke&&(Qn+=Vc)):Nm=!0);var lI=new Request(Qn,Hg);try{lI[S$]=!0}catch{}if(!Fo&&T&&(zl=Ib(function(va,Bu){dt=va,Kc=Bu})),!Qn){ii(rn),dt&&dt(!1);return}function $g(va){$i(rn,q?0:400,{},q?vn:va)}s($g,"_handleError");function uI(va,Bu,yt){var Tr=va[KS],Wn=G.fetchOnComplete;Wn&&Oe(Wn)?Wn(va,rn,yt||vn,Bu):$i(rn,Tr,{},yt||vn)}s(uI,"_onFetchComplete");try{Vf(fetch(q?Qn:lI,q?Hg:null),function(va){if(Fo&&(I-=Kl,Kl=0),!sf)if(sf=!0,va.rejected)$g(va.reason&&va.reason[hv]),Kc&&Kc(va.reason);else{var Bu=va[Ab];try{!q&&!Bu.ok?($g(Bu.statusText),dt&&dt(!1)):q&&!Bu.body?(uI(Bu,null,vn),dt&&dt(!0)):Vf(Bu.text(),function(yt){uI(Bu,Wt,yt[Ab]),dt&&dt(!0)})}catch(yt){$g(Qt(yt)),Kc&&Kc(yt)}}})}catch(va){sf||($g(Qt(va)),Kc&&Kc(va))}return Nm&&!sf&&(sf=!0,$i(rn,200,{}),dt&&dt(!0)),q&&!sf&&Wt[Lg]>0&&gt&&gt.set(function(){sf||(sf=!0,$i(rn,500,{}),dt&&dt(!0))},Wt[Lg]),zl}s(Wi,"_doFetchSender");function Ca(Wt,rn,Fo){var Dt=Ws(),Qn=new XDomainRequest,Ua=Wt[xb];Qn.onload=function(){var qa=U5(Qn),Kl=G&&G.xdrOnComplete;Kl&&Oe(Kl)?Kl(Qn,rn,Wt):$i(rn,200,{},qa)},Qn.onerror=function(){$i(rn,400,{},q?vn:d$(Qn))},Qn.ontimeout=function(){$i(rn,500,{})},Qn.onprogress=function(){};var Vo=Dt&&Dt.location&&Dt.location.protocol||"",zl=Wt[Mg];if(!zl){ii(rn);return}if(!q&&zl.lastIndexOf(Vo,0)!==0){var dt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Fr(M,2,40,". "+dt),_r(dt,rn);return}var Kc=q?zl:zl[Fy](/^(https?:)/,"");Qn.open(Qa,Kc),Wt[Lg]&&(Qn[Lg]=Wt[Lg]),Qn.send(Ua),q&&Fo?gt&&gt.set(function(){Qn.send(Ua)},0):Qn.send(Ua)}s(Ca,"_xdrSender");function bs(){I=0,k=!1,T=!1,M=null,q=null,G=null,ce=null,fe=null,xe=null,Re=!1,Qe=!1,et=!1,He=!1,Ke=!1,gt=null}s(bs,"_initDefaults")})}return s(v,"SenderPostManager"),v.__ieDyn=1,v}(),Iv="on",zy="attachEvent",tI="addEventListener",G$="detachEvent",V$="removeEventListener",a4="events";Qg("aiEvtPageHide"),Qg("aiEvtPageShow");var sde=/\.[\.]+/g,e4e=/[\.]+$/,lbt=1,z$=y$("events"),ubt=/^([^.]*)(?:\.(.+)|)/;function t4e(v){return v&&v[Fy]?v[Fy](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Fi):v}s(t4e,"_normalizeNamespace");function ade(v,I){if(I){var T=Fi;Je(I)?(T=Fi,Kr(I,function(M){M=t4e(M),M&&(M[0]!=="."&&(M="."+M),T+=M)})):T=t4e(I),T&&(T[0]!=="."&&(T="."+T),v=(v||Fi)+T)}var k=ubt.exec(v||Fi)||[];return{type:k[1],ns:(k[2]||Fi).replace(sde,".").replace(e4e,Fi)[Ly](".").sort().join(".")}}s(ade,"_getEvtNamespace");function r4e(v,I,T){T===void 0&&(T=!0);var k=z$.get(v,a4,{},T),M=k[I];return M||(M=k[I]=[]),M}s(r4e,"_getRegisteredEvents");function n4e(v,I,T,k){v&&I&&I[Pu]&&(v[V$]?v[V$](I[Pu],T,k):v[G$]&&v[G$](Iv+I[Pu],T))}s(n4e,"_doDetach");function dbt(v,I,T,k){var M=!1;return v&&I&&I[Pu]&&T&&(v[tI]?(v[tI](I[Pu],T,k),M=!0):v[zy]&&(v[zy](Iv+I[Pu],T),M=!0)),M}s(dbt,"_doAttach");function i4e(v,I,T,k){for(var M=I[di];M--;){var q=I[M];q&&(!T.ns||T.ns===q[hL].ns)&&(!k||k(q))&&(n4e(v,q[hL],q.handler,q.capture),I[hb](M,1))}}s(i4e,"_doUnregister");function fbt(v,I,T){if(I[Pu])i4e(v,r4e(v,I[Pu]),I,T);else{var k=z$.get(v,a4,{});le(k,function(M,q){i4e(v,q,I,T)}),Tt(k)[di]===0&&z$.kill(v,a4)}}s(fbt,"_unregisterEvents");function o4e(v,I){var T;return I?(Je(I)?T=[v].concat(I):T=[v,I],T=ade("xx",T).ns[Ly](".")):T=v,T}s(o4e,"mergeEvtNamespace");function s4e(v,I,T,k,M){M===void 0&&(M=!1);var q=!1;if(v)try{var G=ade(I,k);if(q=dbt(v,G,T,M),q&&z$.accept(v)){var ce={guid:lbt++,evtName:G,handler:T,capture:M};r4e(v,G.type)[Eo](ce)}}catch{}return q}s(s4e,"eventOn");function pbt(v,I,T,k,M){if(M===void 0&&(M=!1),v)try{var q=ade(I,k),G=!1;fbt(v,q,function(ce){return q.ns&&!T||ce.handler===T?(G=!0,!0):!1}),G||n4e(v,q,T,M)}catch{}}s(pbt,"eventOff");var a4e="sampleRate",cde="ProcessLegacy",c4e="http.method",lde="https://dc.services.visualstudio.com",c4="/v2/track",rI="not_specified",l4e=Eue({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),K$="split",Ri="length",ude="toLowerCase",g_="ingestionendpoint",ZL="toString",u4e="removeItem",Y$="message",mbt="count",dde="stringify",fde="pathname",e9="match",nI="name",Ky="properties",Tv="measurements",J$="sizeInBytes",X$="typeName",t9="exceptions",r9="severityLevel",pde="problemGroup",l4="parsedStack",Z$="hasFullStack",eW="assembly",wv="fileName",u4="line",tW="aiDataContract",rW="duration";function d4e(v,I,T){var k=I[Ri],M=hbt(v,I);if(M[Ri]!==k){for(var q=0,G=M;T[G]!==void 0;)q++,G=Ce(M,0,147)+ybt(q);M=G}return M}s(d4e,"dataSanitizeKeyAndAddUniqueness");function hbt(v,I){var T;return I&&(I=no(Ft(I)),I[Ri]>150&&(T=Ce(I,0,150),Fr(v,2,57,"name is too long.  It has been truncated to 150 characters.",{name:I},!0))),T||I}s(hbt,"dataSanitizeKey");function yd(v,I,T){T===void 0&&(T=1024);var k;return I&&(T=T||1024,I=no(Ft(I)),I[Ri]>T&&(k=Ce(I,0,T),Fr(v,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:I},!0))),k||I}s(yd,"dataSanitizeString");function mde(v,I){return p4e(v,I,2048,66)}s(mde,"dataSanitizeUrl");function f4e(v,I){var T;return I&&I[Ri]>32768&&(T=Ce(I,0,32768),Fr(v,2,56,"message is too long, it has been truncated to 32768 characters.",{message:I},!0)),T||I}s(f4e,"dataSanitizeMessage");function gbt(v,I){var T;if(I){var k=""+I;k[Ri]>32768&&(T=Ce(k,0,32768),Fr(v,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:I},!0))}return T||I}s(gbt,"dataSanitizeException");function A_(v,I){if(I){var T={};le(I,function(k,M){if(Te(M)&&Lb())try{M=nf()[dde](M)}catch(q){Fr(v,2,49,"custom property is not valid",{exception:q},!0)}M=yd(v,M,8192),k=d4e(v,k,T),T[k]=M}),I=T}return I}s(A_,"dataSanitizeProperties");function y_(v,I){if(I){var T={};le(I,function(k,M){k=d4e(v,k,T),T[k]=M}),I=T}return I}s(y_,"dataSanitizeMeasurements");function Abt(v,I){return I&&p4e(v,I,128,69)[ZL]()}s(Abt,"dataSanitizeId");function p4e(v,I,T,k){var M;return I&&(I=no(Ft(I)),I[Ri]>T&&(M=Ce(I,0,T),Fr(v,2,k,"input is too long, it has been truncated to "+T+" characters.",{data:I},!0))),M||I}s(p4e,"dataSanitizeInput");function ybt(v){var I="00"+v;return Ie(I,I[Ri]-3)}s(ybt,"dsPadNumber");var m4e=vc()||{},h4e=0,Cbt=[null,null,null,null,null];function vbt(v){var I=h4e,T=Cbt,k=T[I];return m4e.createElement?T[I]||(k=T[I]=m4e.createElement("a")):k={host:xbt(v,!0)},k.href=v,I++,I>=T[Ri]&&(I=0),h4e=I,k}s(vbt,"urlParseUrl");function xbt(v,I){var T=Ebt(v,I)||"";if(T){var k=T[e9](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ri]>3&&Ae(k[2])&&k[2][Ri]>0)return k[2]+(k[3]||"")}return T}s(xbt,"urlParseHost");function Ebt(v,I){var T=null;if(v){var k=v[e9](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ri]>2&&Ae(k[2])&&k[2][Ri]>0&&(T=k[2]||"",I&&k[Ri]>2)){var M=(k[1]||"")[ude](),q=k[3]||"";(M==="http"&&q===":80"||M==="https"&&q===":443")&&(q=""),T+=q}}return T}s(Ebt,"urlParseFullHost");var bbt=[lde+c4,"https://breeze.aimon.applicationinsights.io"+c4,"https://dc-int.services.visualstudio.com"+c4];function g4e(v){return Ec(bbt,v[ude]())!==-1}s(g4e,"isInternalApplicationInsightsEndpoint");function Ibt(v,I,T,k){var M,q=k,G=k;if(I&&I[Ri]>0){var ce=vbt(I);if(M=ce.host,!q)if(ce[fde]!=null){var fe=ce.pathname[Ri]===0?"/":ce[fde];fe.charAt(0)!=="/"&&(fe="/"+fe),G=ce[fde],q=yd(v,T?T+" "+fe:fe)}else q=yd(v,I)}else M=k,q=k;return{target:M,name:q,data:G}}s(Ibt,"AjaxHelperParseDependencyPath");var hde=v5({LocalStorage:0,SessionStorage:1}),d4=void 0,A4e="";function y4e(v){try{if(ie(vi()))return null;var I=new Date()[ZL](),T=Xo(v===hde.LocalStorage?"localStorage":"sessionStorage"),k=A4e+I;T.setItem(k,I);var M=T.getItem(k)!==I;if(T[u4e](k),!M)return T}catch{}return null}s(y4e,"_getVerifiedStorageObject");function gde(){return C4e()?y4e(hde.SessionStorage):null}s(gde,"_getSessionStorageObject");function Tbt(v){A4e=v||""}s(Tbt,"utlSetStoragePrefix");function C4e(v){return(v||d4===void 0)&&(d4=!!y4e(hde.SessionStorage)),d4}s(C4e,"utlCanUseSessionStorage");function wbt(v,I){var T=gde();if(T!==null)try{return T.getItem(I)}catch(k){d4=!1,Fr(v,2,2,"Browser failed read of session storage. "+Tl(k),{exception:Qt(k)})}return null}s(wbt,"utlGetSessionStorage");function Sbt(v,I,T){var k=gde();if(k!==null)try{return k.setItem(I,T),!0}catch(M){d4=!1,Fr(v,2,4,"Browser failed write to session storage. "+Tl(M),{exception:Qt(M)})}return!1}s(Sbt,"utlSetSessionStorage");function _bt(v,I){var T=gde();if(T!==null)try{return T[u4e](I),!0}catch(k){d4=!1,Fr(v,2,6,"Browser failed removal of session storage item. "+Tl(k),{exception:Qt(k)})}return!1}s(_bt,"utlRemoveSessionStorage");var Rbt=";",kbt="=";function Ade(v){if(!v)return{};var I=v[K$](Rbt),T=XM(I,function(M,q){var G=q[K$](kbt);if(G[Ri]===2){var ce=G[0][ude](),fe=G[1];M[ce]=fe}return M},{});if(Tt(T)[Ri]>0){if(T.endpointsuffix){var k=T.location?T.location+".":"";T[g_]=T[g_]||"https://"+k+"dc."+T.endpointsuffix}T[g_]=T[g_]||lde,WH(T[g_],"/")&&(T[g_]=T[g_].slice(0,-1))}return T}s(Ade,"parseConnectionString");var Pbt=function(){function v(I,T,k){var M=this,q=this;q.ver=1,q.sampleRate=100,q.tags={},q[nI]=yd(I,k)||rI,q.data=T,q.time=XS(new Date),q[tW]={time:1,iKey:1,name:1,sampleRate:s(function(){return M.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(v,"Envelope"),v}(),f4=function(){function v(I,T,k,M){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var q=this;q.ver=2,q[nI]=yd(I,T)||rI,q[Ky]=A_(I,k),q[Tv]=y_(I,M)}return s(v,"Event"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Event",v.dataType="EventData",v}(),Dbt=58,Bbt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Nbt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Mbt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,Lbt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Fbt=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Obt=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Qbt=/([^\(\s\n]+):([0-9]+)$/,v4e="<no_method>",p4="error",Bm="stack",yde="stackDetails",x4e="errorSrc",Cde="message",E4e="description",b4e=[{re:Nbt,len:5,m:1,fn:2,ln:3,col:4},{chk:qbt,pre:Ubt,re:Mbt,len:4,m:1,fn:2,ln:3},{re:Lbt,len:3,m:1,fn:2,hdl:R4e},{re:Fbt,len:2,fn:1,hdl:R4e}];function Ubt(v){return v.replace(/(\(anonymous\))/,"<anonymous>")}s(Ubt,"_scrubAnonymous");function qbt(v){return kg(v,"[native")<0}s(qbt,"_ignoreNative");function vde(v,I){var T=v;return T&&!Ae(T)&&(JSON&&JSON[dde]?(T=JSON[dde](v),I&&(!T||T==="{}")&&(Oe(v[ZL])?T=v[ZL]():T=""+v)):T=""+v+" - (Missing JSON.stringify)"),T||""}s(vde,"_stringify");function I4e(v,I){var T=v;return v&&(T&&!Ae(T)&&(T=v[Cde]||v[E4e]||T),T&&!Ae(T)&&(T=vde(T,!0)),v.filename&&(T=T+" @"+(v.filename||"")+":"+(v.lineno||"?")+":"+(v.colno||"?"))),I&&I!=="String"&&I!=="Object"&&I!=="Error"&&kg(T||"",I)===-1&&(T=I+": "+T),T||""}s(I4e,"_formatMessage");function Hbt(v){try{if(Te(v))return"hasFullStack"in v&&"typeName"in v}catch{}return!1}s(Hbt,"_isExceptionDetailsInternal");function $bt(v){try{if(Te(v))return"ver"in v&&"exceptions"in v&&"properties"in v}catch{}return!1}s($bt,"_isExceptionInternal");function T4e(v){return v&&v.src&&Ae(v.src)&&v.obj&&Je(v.obj)}s(T4e,"_isStackDetails");function C_(v){var I=v||"";Ae(I)||(Ae(I[Bm])?I=I[Bm]:I=""+I);var T=I[K$](`
`);return{src:I,obj:T}}s(C_,"_convertStackObj");function Wbt(v){for(var I=[],T=v[K$](`
`),k=0;k<T[Ri];k++){var M=T[k];T[k+1]&&(M+="@"+T[k+1],k++),I.push(M)}return{src:v,obj:I}}s(Wbt,"_getOperaStack");function w4e(v){var I=null;if(v)try{if(v[Bm])I=C_(v[Bm]);else if(v[p4]&&v[p4][Bm])I=C_(v[p4][Bm]);else if(v.exception&&v.exception[Bm])I=C_(v.exception[Bm]);else if(T4e(v))I=v;else if(T4e(v[yde]))I=v[yde];else if(Ws()&&Ws().opera&&v[Cde])I=Wbt(v[Y$]);else if(v.reason&&v.reason[Bm])I=C_(v.reason[Bm]);else if(Ae(v))I=C_(v);else{var T=v[Cde]||v[E4e]||"";Ae(v[x4e])&&(T&&(T+=`
`),T+=" from "+v[x4e]),T&&(I=C_(T))}}catch(k){I=C_(k)}return I||{src:"",obj:null}}s(w4e,"_getStackFromErrorObj");function jbt(v){var I="";return v&&(v.obj?I=v.obj.join(`
`):I=v.src||""),I}s(jbt,"_formatStackTrace");function Gbt(v){var I,T=v.obj;if(T&&T[Ri]>0){I=[];var k=0,M=!1,q=0;Kr(T,function(gt){if(M||Ybt(gt)){var st=Ft(gt);M=!0;var wt=Jbt(st,k);wt&&(q+=wt[J$],I.push(wt),k++)}});var G=32*1024;if(q>G)for(var ce=0,fe=I[Ri]-1,xe=0,Re=ce,Qe=fe;ce<fe;){var et=I[ce][J$],He=I[fe][J$];if(xe+=et+He,xe>G){var Ke=Qe-Re+1;I.splice(Re,Ke);break}Re=ce,Qe=fe,ce++,fe--}}return I}s(Gbt,"_parseStack");function nW(v){var I="";if(v&&(I=v.typeName||v[nI]||"",!I))try{var T=/function (.{1,200})\(/,k=T.exec(v.constructor[ZL]());I=k&&k[Ri]>1?k[1]:""}catch{}return I}s(nW,"_getErrorType");function xde(v){if(v)try{if(!Ae(v)){var I=nW(v),T=vde(v,!1);return(!T||T==="{}")&&(v[p4]&&(v=v[p4],I=nW(v)),T=vde(v,!0)),kg(T,I)!==0&&I!=="String"?I+":"+T:T}}catch{}return""+(v||"")}s(xde,"_formatErrorCode");var iW=function(){function v(I,T,k,M,q,G){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ce=this;ce.ver=2,$bt(T)?(ce[t9]=T[t9]||[],ce[Ky]=T[Ky],ce[Tv]=T[Tv],T[r9]&&(ce[r9]=T[r9]),T.id&&(ce.id=T.id,T[Ky].id=T.id),T[pde]&&(ce[pde]=T[pde]),ie(T.isManual)||(ce.isManual=T.isManual)):(k||(k={}),G&&(k.id=G),ce[t9]=[S4e(I,T,k)],ce[Ky]=A_(I,k),ce[Tv]=y_(I,M),q&&(ce[r9]=q),G&&(ce.id=G))}return s(v,"Exception"),v.CreateAutoException=function(I,T,k,M,q,G,ce,fe){var xe=nW(q||G||I);return{message:I4e(I,xe),url:T,lineNumber:k,columnNumber:M,error:xde(q||G||I),evt:xde(G||I),typeName:xe,stackDetails:w4e(ce||q||G),errorSrc:fe}},v.CreateFromInterface=function(I,T,k,M){var q=T[t9]&&Sg(T[t9],function(ce){return Kbt(I,ce)}),G=new v(I,Dg(Dg({},T),{exceptions:q}),k,M);return G},v.prototype.toInterface=function(){var I=this,T=I.exceptions,k=I.properties,M=I.measurements,q=I.severityLevel,G=I.problemGroup,ce=I.id,fe=I.isManual,xe=T instanceof Array&&Sg(T,function(Re){return Re.toInterface()})||void 0;return{ver:"4.0",exceptions:xe,severityLevel:q,properties:k,measurements:M,problemGroup:G,id:ce,isManual:fe}},v.CreateSimpleException=function(I,T,k,M,q,G){var ce;return{exceptions:[(ce={},ce[Z$]=!0,ce.message=I,ce.stack=q,ce.typeName=T,ce)]}},v.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",v.dataType="ExceptionData",v.formatError=xde,v}(),Vbt=Zt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function zbt(){var v=this,I=Je(v[l4])&&Sg(v[l4],function(k){return Zbt(k)}),T={id:v.id,outerId:v.outerId,typeName:v[X$],message:v[Y$],hasFullStack:v[Z$],stack:v[Bm],parsedStack:I||void 0};return T}s(zbt,"_toInterface");function S4e(v,I,T){var k,M,q,G,ce,fe,xe,Re;if(Hbt(I))G=I[X$],ce=I[Y$],xe=I[Bm],Re=I[l4]||[],fe=I[Z$];else{var Qe=I,et=Qe&&Qe.evt;xt(Qe)||(Qe=Qe[p4]||et||Qe),G=yd(v,nW(Qe))||rI,ce=f4e(v,I4e(I||Qe,G))||rI;var He=I[yde]||w4e(I);Re=Gbt(He),Je(Re)&&Sg(Re,function(Ke){Ke[eW]=yd(v,Ke[eW]),Ke[wv]=yd(v,Ke[wv])}),xe=gbt(v,jbt(He)),fe=Je(Re)&&Re[Ri]>0,T&&(T[X$]=T[X$]||G)}return k={},k[tW]=Vbt,k.id=M,k.outerId=q,k.typeName=G,k.message=ce,k[Z$]=fe,k.stack=xe,k.parsedStack=Re,k.toInterface=zbt,k}s(S4e,"_createExceptionDetails");function Kbt(v,I){var T=Je(I[l4])&&Sg(I[l4],function(M){return Xbt(M)})||I[l4],k=S4e(v,Dg(Dg({},I),{parsedStack:T}));return k}s(Kbt,"_createExDetailsFromInterface");function _4e(v,I){var T=I[e9](Obt);if(T&&T[Ri]>=4)v[wv]=T[1],v[u4]=parseInt(T[2]);else{var k=I[e9](Qbt);k&&k[Ri]>=3?(v[wv]=k[1],v[u4]=parseInt(k[2])):v[wv]=I}}s(_4e,"_parseFilename");function R4e(v,I,T){var k=v[wv];I.fn&&T&&T[Ri]>I.fn&&(I.ln&&T[Ri]>I.ln?(k=no(T[I.fn]||""),v[u4]=parseInt(no(T[I.ln]||""))||0):k=no(T[I.fn]||"")),k&&_4e(v,k)}s(R4e,"_handleFilename");function Ybt(v){var I=!1;if(v&&Ae(v)){var T=no(v);T&&(I=Bbt.test(T))}return I}s(Ybt,"_isStackFrame");var k4e=Zt({level:1,method:1,assembly:0,fileName:0,line:0});function Jbt(v,I){var T,k;if(v&&Ae(v)&&no(v)){k=(T={},T[tW]=k4e,T.level=I,T.assembly=no(v),T.method=v4e,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var M=0;M<b4e[Ri];){var q=b4e[M];if(q.chk&&!q.chk(v))break;q.pre&&(v=q.pre(v));var G=v[e9](q.re);if(G&&G[Ri]>=q.len){q.m&&(k.method=no(G[q.m]||v4e)),q.hdl?q.hdl(k,q,G):q.fn&&(q.ln?(k[wv]=no(G[q.fn]||""),k[u4]=parseInt(no(G[q.ln]||""))||0):_4e(k,G[q.fn]||""));break}M++}}return P4e(k)}s(Jbt,"_extractStackFrame");function Xbt(v){var I,T=(I={},I[tW]=k4e,I.level=v.level,I.method=v.method,I.assembly=v[eW],I.fileName=v[wv],I.line=v[u4],I.sizeInBytes=0,I);return P4e(T)}s(Xbt,"_stackFrameFromInterface");function P4e(v){var I=Dbt;return v&&(I+=v.method[Ri],I+=v.assembly[Ri],I+=v.fileName[Ri],I+=v.level.toString()[Ri],I+=v.line.toString()[Ri],v[J$]=I),v}s(P4e,"_populateFrameSizeInBytes");function Zbt(v){return{level:v.level,method:v.method,assembly:v[eW],fileName:v[wv],line:v[u4]}}s(Zbt,"_parsedFrameToInterface");var eIt=function(){function v(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(v,"DataPoint"),v}(),n9=function(){function v(I,T,k,M,q,G,ce,fe,xe){this.aiDataContract={ver:1,metrics:1,properties:0};var Re=this;Re.ver=2;var Qe=new eIt;Qe[mbt]=M>0?M:void 0,Qe.max=isNaN(G)||G===null?void 0:G,Qe.min=isNaN(q)||q===null?void 0:q,Qe[nI]=yd(I,T)||rI,Qe.value=k,Qe.stdDev=isNaN(ce)||ce===null?void 0:ce,Re.metrics=[Qe],Re[Ky]=A_(I,fe),Re[Tv]=y_(I,xe)}return s(v,"Metric"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",v.dataType="MetricData",v}(),i9="";function D4e(v){(isNaN(v)||v<0)&&(v=0),v=hue(v);var I=i9+v%1e3,T=i9+Sy(v/1e3)%60,k=i9+Sy(v/(1e3*60))%60,M=i9+Sy(v/(1e3*60*60))%24,q=Sy(v/(1e3*60*60*24));return I=I[Ri]===1?"00"+I:I[Ri]===2?"0"+I:I,T=T[Ri]<2?"0"+T:T,k=k[Ri]<2?"0"+k:k,M=M[Ri]<2?"0"+M:M,(q>0?q+".":i9)+M+":"+k+":"+T+"."+I}s(D4e,"msToTimeSpan");var oW=function(){function v(I,T,k,M,q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var fe=this;fe.ver=2,fe.id=Abt(I,ce),fe.url=mde(I,k),fe[nI]=yd(I,T)||rI,isNaN(M)||(fe[rW]=D4e(M)),fe[Ky]=A_(I,q),fe[Tv]=y_(I,G)}return s(v,"PageView"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",v.dataType="PageviewData",v}(),sW=function(){function v(I,T,k,M,q,G,ce,fe,xe,Re,Qe,et){xe===void 0&&(xe="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var He=this;He.ver=2,He.id=T,He[rW]=D4e(q),He.success=G,He.resultCode=ce+"",He.type=yd(I,xe);var Ke=Ibt(I,k,fe,M);He.data=mde(I,M)||Ke.data,He.target=yd(I,Ke.target),Re&&(He.target="".concat(He.target," | ").concat(Re)),He[nI]=yd(I,Ke[nI]),He[Ky]=A_(I,Qe),He[Tv]=y_(I,et)}return s(v,"RemoteDependencyData"),v.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",v.dataType="RemoteDependencyData",v}(),aW=function(){function v(I,T,k,M,q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var G=this;G.ver=2,T=T||rI,G[Y$]=f4e(I,T),G[Ky]=A_(I,M),G[Tv]=y_(I,q),k&&(G[r9]=k)}return s(v,"Trace"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Message",v.dataType="MessageData",v}(),cW=function(){function v(I,T,k,M,q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var fe=this;fe.ver=2,fe.url=mde(I,k),fe[nI]=yd(I,T)||rI,fe[Ky]=A_(I,q),fe[Tv]=y_(I,G),ce&&(fe.domProcessing=ce.domProcessing,fe[rW]=ce[rW],fe.networkConnect=ce.networkConnect,fe.perfTotal=ce.perfTotal,fe.receivedResponse=ce.receivedResponse,fe.sentRequest=ce.sentRequest)}return s(v,"PageViewPerformance"),v.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",v.dataType="PageviewPerformanceData",v}(),v_=function(){function v(I,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=I,this.baseData=T}return s(v,"Data"),v}(),tIt=v5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function iI(v){var I="ai."+v+".";return function(T){return I+T}}s(iI,"_aiNameFunc");var o9=iI("application"),Sl=iI("device"),lW=iI("location"),m4=iI("operation"),Ede=iI("session"),oI=iI("user"),x_=iI("cloud"),s9=iI("internal"),B4e=function(v){GS(I,v);function I(){return v.call(this)||this}return s(I,"ContextTagKeys"),I}(Pue({applicationVersion:o9("ver"),applicationBuild:o9("build"),applicationTypeId:o9("typeId"),applicationId:o9("applicationId"),applicationLayer:o9("layer"),deviceId:Sl("id"),deviceIp:Sl("ip"),deviceLanguage:Sl("language"),deviceLocale:Sl("locale"),deviceModel:Sl("model"),deviceFriendlyName:Sl("friendlyName"),deviceNetwork:Sl("network"),deviceNetworkName:Sl("networkName"),deviceOEMName:Sl("oemName"),deviceOS:Sl("os"),deviceOSVersion:Sl("osVersion"),deviceRoleInstance:Sl("roleInstance"),deviceRoleName:Sl("roleName"),deviceScreenResolution:Sl("screenResolution"),deviceType:Sl("type"),deviceMachineName:Sl("machineName"),deviceVMName:Sl("vmName"),deviceBrowser:Sl("browser"),deviceBrowserVersion:Sl("browserVersion"),locationIp:lW("ip"),locationCountry:lW("country"),locationProvince:lW("province"),locationCity:lW("city"),operationId:m4("id"),operationName:m4("name"),operationParentId:m4("parentId"),operationRootId:m4("rootId"),operationSyntheticSource:m4("syntheticSource"),operationCorrelationVector:m4("correlationVector"),sessionId:Ede("id"),sessionIsFirst:Ede("isFirst"),sessionIsNew:Ede("isNew"),userAccountAcquisitionDate:oI("accountAcquisitionDate"),userAccountId:oI("accountId"),userAgent:oI("userAgent"),userId:oI("id"),userStoreRegion:oI("storeRegion"),userAuthUserId:oI("authUserId"),userAnonymousUserAcquisitionDate:oI("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:oI("authUserAcquisitionDate"),cloudName:x_("name"),cloudRole:x_("role"),cloudRoleVer:x_("roleVer"),cloudRoleInstance:x_("roleInstance"),cloudEnvironment:x_("environment"),cloudLocation:x_("location"),cloudDeploymentUnit:x_("deploymentUnit"),internalNodeName:s9("nodeName"),internalSdkVersion:s9("sdkVersion"),internalAgentVersion:s9("agentVersion"),internalSnippet:s9("snippet"),internalSdkSrc:s9("sdkSrc")})),Gl=new B4e;function N4e(v,I){pbt(v,null,null,I)}s(N4e,"_disableEvents");function rIt(v){var I=vc(),T=xc(),k=!1,M=[],q=1;T&&!ie(T.onLine)&&!T.onLine&&(q=2);var G=0,ce=et(),fe=o4e(Qg("OfflineListener"),v);try{if(Re(Ws())&&(k=!0),I){var xe=I.body||I;xe.ononline&&Re(xe)&&(k=!0)}}catch{k=!1}function Re(sr){var _r=!1;return sr&&(_r=s4e(sr,"online",gt,fe),_r&&s4e(sr,"offline",st,fe)),_r}s(Re,"_enableEvents");function Qe(){return ce}s(Qe,"_isOnline");function et(){return!(G===2||q===2)}s(et,"calCurrentState");function He(){var sr=et();ce!==sr&&(ce=sr,Kr(M,function(_r){var ii={isOnline:ce,rState:q,uState:G};try{_r(ii)}catch{}}))}s(He,"listnerNoticeCheck");function Ke(sr){G=sr,He()}s(Ke,"setOnlineState");function gt(){q=1,He()}s(gt,"_setOnline");function st(){q=2,He()}s(st,"_setOffline");function wt(){var sr=Ws();if(sr&&k){if(N4e(sr,fe),I){var _r=I.body||I;$(_r.ononline)||N4e(_r,fe)}k=!1}}s(wt,"_unload");function $t(sr){return M.push(sr),{rm:s(function(){var _r=M.indexOf(sr);if(_r>-1)return M.splice(_r,1)},"rm")}}return s($t,"addListener"),{isOnline:Qe,isListening:s(function(){return k},"isListening"),unload:wt,addListener:$t,setOnlineState:Ke}}s(rIt,"createOfflineListener");var nIt="AppInsightsChannelPlugin",E_="duration",Du="tags",bde="deviceType",ap="data",Sv="name",a9="traceID",Qi="length",c9="stringify",b_="measurements",Yy="dataType",I_="envelopeType",T_="toString",w_="enqueue",S_="count",_v="push",Ide="emitLineDelimitedJson",h4="clear",uW="markAsSent",l9="clearSent",Tde="bufferOverride",u9="BUFFER_KEY",sI="SENT_BUFFER_KEY",g4="concat",d9="MAX_BUFFER_SIZE",f9="triggerSend",Cd="diagLog",wde="initialize",p9="_sender",m9="endpointUrl",h9="instrumentationKey",Sde="customHeaders",M4e="maxBatchSizeInBytes",_de="onunloadDisableBeacon",Rde="isBeaconApiDisabled",L4e="alwaysUseXhrOverride",F4e="enableSessionStorageBuffer",Jy="_buffer",O4e="onunloadDisableFetch",Q4e="disableSendBeaconSplit",dW="getSenderInst",__="_onError",kde="_onPartialSuccess",fW="_onSuccess",Pde="itemsReceived",Dde="itemsAccepted",Bde="baseType",pW="sampleRate",iIt="getHashCodeScore",Nde="baseType",ya="baseData",Vl="properties",U4e="true";function wc(v,I,T){return Qy(v,I,T,ue)}s(wc,"_setValueIf");function oIt(v,I,T){var k=T[Du]=T[Du]||{},M=I.ext=I.ext||{},q=I[Du]=I[Du]||[],G=M.user;G&&(wc(k,Gl.userAuthUserId,G.authId),wc(k,Gl.userId,G.id||G.localId));var ce=M.app;ce&&wc(k,Gl.sessionId,ce.sesId);var fe=M.device;fe&&(wc(k,Gl.deviceId,fe.id||fe.localId),wc(k,Gl[bde],fe.deviceClass),wc(k,Gl.deviceIp,fe.ip),wc(k,Gl.deviceModel,fe.model),wc(k,Gl[bde],fe[bde]));var xe=I.ext.web;if(xe){wc(k,Gl.deviceLanguage,xe.browserLang),wc(k,Gl.deviceBrowserVersion,xe.browserVer),wc(k,Gl.deviceBrowser,xe.browser);var Re=T[ap]=T[ap]||{},Qe=Re[ya]=Re[ya]||{},et=Qe[Vl]=Qe[Vl]||{};wc(et,"domain",xe.domain),wc(et,"isManual",xe.isManual?U4e:null),wc(et,"screenRes",xe.screenRes),wc(et,"userConsent",xe.userConsent?U4e:null)}var He=M.os;He&&(wc(k,Gl.deviceOS,He[Sv]),wc(k,Gl.deviceOSVersion,He.osVer));var Ke=M.trace;Ke&&(wc(k,Gl.operationParentId,Ke.parentID),wc(k,Gl.operationName,yd(v,Ke[Sv])),wc(k,Gl.operationId,Ke[a9]));for(var gt={},st=q[Qi]-1;st>=0;st--){var wt=q[st];le(wt,function(sr,_r){gt[sr]=_r}),q.splice(st,1)}le(q,function(sr,_r){gt[sr]=_r});var $t=Dg(Dg({},k),gt);$t[Gl.internalSdkVersion]||($t[Gl.internalSdkVersion]=yd(v,"javascript:".concat(sIt.Version),64)),T[Du]=TL($t)}s(oIt,"_extractPartAExtensions");function aI(v,I,T){ie(v)||le(v,function(k,M){lt(M)?T[k]=M:Ae(M)?I[k]=M:Lb()&&(I[k]=nf()[c9](M))})}s(aI,"_extractPropsAndMeasurements");function R_(v,I){ie(v)||le(v,function(T,k){v[T]=k||I})}s(R_,"_convertPropsUndefinedToCustomDefinedValue");function k_(v,I,T,k){var M=new Pbt(v,k,I);wc(M,"sampleRate",T[a4e]),(T[ya]||{}).startTime&&(M.time=XS(T[ya].startTime)),M.iKey=T.iKey;var q=T.iKey.replace(/-/g,"");return M[Sv]=M[Sv].replace("{0}",q),oIt(v,T,M),T[Du]=T[Du]||[],TL(M)}s(k_,"_createEnvelope");function P_(v,I){ie(I[ya])&&Fr(v,1,46,"telemetryItem.baseData cannot be null.")}s(P_,"EnvelopeCreatorInit");var sIt={Version:"3.3.6"};function aIt(v,I,T){P_(v,I);var k=I[ya][b_]||{},M=I[ya][Vl]||{};aI(I[ap],M,k),ie(T)||R_(M,T);var q=I[ya];if(ie(q))return X5(v,"Invalid input for dependency data"),null;var G=q[Vl]&&q[Vl][c4e]?q[Vl][c4e]:"GET",ce=new sW(v,q.id,q.target,q[Sv],q[E_],q.success,q.responseCode,G,q.type,q.correlationContext,M,k),fe=new v_(sW[Yy],ce);return k_(v,sW[I_],I,fe)}s(aIt,"DependencyEnvelopeCreator");function q4e(v,I,T){P_(v,I);var k={},M={};I[Nde]!==f4[Yy]&&(k.baseTypeSource=I[Nde]),I[Nde]===f4[Yy]?(k=I[ya][Vl]||{},M=I[ya][b_]||{}):I[ya]&&aI(I[ya],k,M),aI(I[ap],k,M),ie(T)||R_(k,T);var q=I[ya][Sv],G=new f4(v,q,k,M),ce=new v_(f4[Yy],G);return k_(v,f4[I_],I,ce)}s(q4e,"EventEnvelopeCreator");function cIt(v,I,T){P_(v,I);var k=I[ya][b_]||{},M=I[ya][Vl]||{};aI(I[ap],M,k),ie(T)||R_(M,T);var q=I[ya],G=iW.CreateFromInterface(v,q,M,k),ce=new v_(iW[Yy],G);return k_(v,iW[I_],I,ce)}s(cIt,"ExceptionEnvelopeCreator");function lIt(v,I,T){P_(v,I);var k=I[ya],M=k[Vl]||{},q=k[b_]||{};aI(I[ap],M,q),ie(T)||R_(M,T);var G=new n9(v,k[Sv],k.average,k.sampleCount,k.min,k.max,k.stdDev,M,q),ce=new v_(n9[Yy],G);return k_(v,n9[I_],I,ce)}s(lIt,"MetricEnvelopeCreator");function uIt(v,I,T){P_(v,I);var k,M=I[ya];!ie(M)&&!ie(M[Vl])&&!ie(M[Vl][E_])?(k=M[Vl][E_],delete M[Vl][E_]):!ie(I[ap])&&!ie(I[ap][E_])&&(k=I[ap][E_],delete I[ap][E_]);var q=I[ya],G;((I.ext||{}).trace||{})[a9]&&(G=I.ext.trace[a9]);var ce=q.id||G,fe=q[Sv],xe=q.uri,Re=q[Vl]||{},Qe=q[b_]||{};if(ie(q.refUri)||(Re.refUri=q.refUri),ie(q.pageType)||(Re.pageType=q.pageType),ie(q.isLoggedIn)||(Re.isLoggedIn=q.isLoggedIn[T_]()),!ie(q[Vl])){var et=q[Vl];le(et,function(gt,st){Re[gt]=st})}aI(I[ap],Re,Qe),ie(T)||R_(Re,T);var He=new oW(v,fe,xe,k,Re,Qe,ce),Ke=new v_(oW[Yy],He);return k_(v,oW[I_],I,Ke)}s(uIt,"PageViewEnvelopeCreator");function dIt(v,I,T){P_(v,I);var k=I[ya],M=k[Sv],q=k.uri||k.url,G=k[Vl]||{},ce=k[b_]||{};aI(I[ap],G,ce),ie(T)||R_(G,T);var fe=new cW(v,M,q,void 0,G,ce,k),xe=new v_(cW[Yy],fe);return k_(v,cW[I_],I,xe)}s(dIt,"PageViewPerformanceEnvelopeCreator");function fIt(v,I,T){P_(v,I);var k=I[ya].message,M=I[ya].severityLevel,q=I[ya][Vl]||{},G=I[ya][b_]||{};aI(I[ap],q,G),ie(T)||R_(q,T);var ce=new aW(v,k,M,q,G),fe=new v_(aW[Yy],ce);return k_(v,aW[I_],I,fe)}s(fIt,"TraceEnvelopeCreator");var H4e=function(){function v(I,T){var k=[],M=!1,q=T.maxRetryCnt;this._get=function(){return k},this._set=function(G){return k=G,k},ku(v,this,function(G){G[w_]=function(ce){if(G[S_]()>=T.eventsLimitInMem){M||(Fr(I,2,105,"Maximum in-memory buffer size reached: "+G[S_](),!0),M=!0);return}ce.cnt=ce.cnt||0,!(!ie(q)&&ce.cnt>q)&&k[_v](ce)},G[S_]=function(){return k[Qi]},G.size=function(){for(var ce=k[Qi],fe=0;fe<k[Qi];fe++)ce+=k[fe].item[Qi];return T[Ide]||(ce+=2),ce},G[h4]=function(){k=[],M=!1},G.getItems=function(){return k.slice(0)},G.batchPayloads=function(ce){if(ce&&ce[Qi]>0){var fe=[];Kr(ce,function(Re){fe[_v](Re.item)});var xe=T[Ide]?fe.join(`
`):"["+fe.join(",")+"]";return xe}return null},G.createNew=function(ce,fe,xe){var Re=k.slice(0);ce=ce||I,fe=fe||{};var Qe=xe?new $4e(ce,fe):new Mde(ce,fe);return Kr(Re,function(et){Qe[w_](et)}),Qe}})}return s(v,"BaseSendBuffer"),v.__ieDyn=1,v}(),Mde=function(v){GS(I,v);function I(T,k){var M=v.call(this,T,k)||this;return ku(I,M,function(q,G){q[uW]=function(ce){G[h4]()},q[l9]=function(ce){}}),M}return s(I,"ArraySendBuffer"),I.__ieDyn=1,I}(H4e),pIt=["AI_buffer","AI_sentBuffer"],$4e=function(v){GS(I,v);function I(k,M){var q=v.call(this,k,M)||this,G=!1,ce=M?.namePrefix,fe=M[Tde]||{getItem:wbt,setItem:Sbt},xe=fe.getItem,Re=fe.setItem,Qe=M.maxRetryCnt;return ku(I,q,function(et,He){var Ke=_r(I[u9]),gt=_r(I[sI]),st=$i(),wt=gt[g4](st),$t=et._set(Ke[g4](wt));$t[Qi]>I[d9]&&($t[Qi]=I[d9]),Hi(I[sI],[]),Hi(I[u9],$t),et[w_]=function(wn){if(et[S_]()>=I[d9]){G||(Fr(k,2,67,"Maximum buffer size reached: "+et[S_](),!0),G=!0);return}wn.cnt=wn.cnt||0,!(!ie(Qe)&&wn.cnt>Qe)&&(He[w_](wn),Hi(I[u9],et._get()))},et[h4]=function(){He[h4](),Hi(I[u9],et._get()),Hi(I[sI],[]),G=!1},et[uW]=function(wn){Hi(I[u9],et._set(sr(wn,et._get())));var tn=_r(I[sI]);tn instanceof Array&&wn instanceof Array&&(tn=tn[g4](wn),tn[Qi]>I[d9]&&(Fr(k,1,67,"Sent buffer reached its maximum size: "+tn[Qi],!0),tn[Qi]=I[d9]),Hi(I[sI],tn))},et[l9]=function(wn){var tn=_r(I[sI]);tn=sr(wn,tn),Hi(I[sI],tn)},et.createNew=function(wn,tn,Wi){Wi=!!Wi;var Ca=et._get().slice(0),bs=_r(I[sI]).slice(0);wn=wn||k,tn=tn||{},et[h4]();var Wt=Wi?new I(wn,tn):new Mde(wn,tn);return Kr(Ca,function(rn){Wt[w_](rn)}),Wi&&Wt[uW](bs),Wt};function sr(wn,tn){var Wi=[],Ca=[];return Kr(wn,function(bs){Ca[_v](bs.item)}),Kr(tn,function(bs){!Oe(bs)&&Ec(Ca,bs.item)===-1&&Wi[_v](bs)}),Wi}s(sr,"_removePayloadsFromBuffer");function _r(wn){var tn=wn;return tn=ce?ce+"_"+tn:tn,ii(tn)}s(_r,"_getBuffer");function ii(wn){try{var tn=xe(k,wn);if(tn){var Wi=nf().parse(tn);if(Ae(Wi)&&(Wi=nf().parse(Wi)),Wi&&Je(Wi))return Wi}}catch(Ca){Fr(k,1,42," storage key: "+wn+", "+Tl(Ca),{exception:Qt(Ca)})}return[]}s(ii,"_getBufferBase");function Hi(wn,tn){var Wi=wn;try{Wi=ce?ce+"_"+Wi:Wi;var Ca=JSON[c9](tn);Re(k,Wi,Ca)}catch(bs){Re(k,Wi,JSON[c9]([])),Fr(k,2,41," storage key: "+Wi+", "+Tl(bs)+". Buffer cleared",{exception:Qt(bs)})}}s(Hi,"_setBuffer");function $i(){var wn=[];try{return Kr(pIt,function(tn){var Wi=Go(tn);if(wn=wn[g4](Wi),ce){var Ca=ce+"_"+tn,bs=Go(Ca);wn=wn[g4](bs)}}),wn}catch(tn){Fr(k,2,41,"Transfer events from previous buffers: "+Tl(tn)+". previous Buffer items can not be removed",{exception:Qt(tn)})}return[]}s($i,"_getPreviousEvents");function Go(wn){try{var tn=ii(wn),Wi=[];return Kr(tn,function(Ca){var bs={item:Ca,cnt:0};Wi[_v](bs)}),_bt(k,wn),Wi}catch{}return[]}s(Go,"_getItemsFromPreviousKey")}),q}s(I,"SessionStorageSendBuffer");var T;return T=I,I.VERSION="_1",I.BUFFER_KEY="AI_buffer"+T.VERSION,I.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,I.MAX_BUFFER_SIZE=2e3,I}(H4e),mIt=function(){function v(I){ku(v,this,function(T){T.serialize=function(G){var ce=k(G,"root");try{return nf()[c9](ce)}catch(fe){Fr(I,1,48,fe&&Oe(fe[T_])?fe[T_]():"Error serializing object",null,!0)}};function k(G,ce){var fe="__aiCircularRefCheck",xe={};if(!G)return Fr(I,1,48,"cannot serialize object because it is null or undefined",{name:ce},!0),xe;if(G[fe])return Fr(I,2,50,"Circular reference detected while serializing object",{name:ce},!0),xe;if(!G.aiDataContract){if(ce==="measurements")xe=q(G,"number",ce);else if(ce==="properties")xe=q(G,"string",ce);else if(ce==="tags")xe=q(G,"string",ce);else if(Je(G))xe=M(G,ce);else{Fr(I,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:ce},!0);try{nf()[c9](G),xe=G}catch(Re){Fr(I,1,48,Re&&Oe(Re[T_])?Re[T_]():"Error serializing object",null,!0)}}return xe}return G[fe]=!0,le(G.aiDataContract,function(Re,Qe){var et=Oe(Qe)?Qe()&1:Qe&1,He=Oe(Qe)?Qe()&4:Qe&4,Ke=Qe&2,gt=G[Re]!==void 0,st=Te(G[Re])&&G[Re]!==null;if(et&&!gt&&!Ke)Fr(I,1,24,"Missing required field specification. The field is required but not present on source",{field:Re,name:ce});else if(!He){var wt=void 0;st?Ke?wt=M(G[Re],Re):wt=k(G[Re],Re):wt=G[Re],wt!==void 0&&(xe[Re]=wt)}}),delete G[fe],xe}s(k,"_serializeObject");function M(G,ce){var fe;if(G)if(!Je(G))Fr(I,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:ce},!0);else{fe=[];for(var xe=0;xe<G[Qi];xe++){var Re=G[xe],Qe=k(Re,ce+"["+xe+"]");fe[_v](Qe)}}return fe}s(M,"_serializeArray");function q(G,ce,fe){var xe;return G&&(xe={},le(G,function(Re,Qe){if(ce==="string")Qe===void 0?xe[Re]="undefined":Qe===null?xe[Re]="null":Qe[T_]?xe[Re]=Qe[T_]():xe[Re]="invalid field: toString() is not defined.";else if(ce==="number")if(Qe===void 0)xe[Re]="undefined";else if(Qe===null)xe[Re]="null";else{var et=parseFloat(Qe);xe[Re]=et}else xe[Re]="invalid field: "+fe+" is of unknown type.",Fr(I,1,xe[Re],null,!0)})),xe}s(q,"_serializeStringMap")})}return s(v,"Serializer"),v.__ieDyn=1,v}(),hIt=8,gIt=function(){function v(){}return s(v,"HashCodeScoreGenerator"),v.prototype.getHashCodeScore=function(I){var T=this.getHashCode(I)/v.INT_MAX_VALUE;return T*100},v.prototype.getHashCode=function(I){if(I==="")return 0;for(;I[Qi]<hIt;)I=I[g4](I);for(var T=5381,k=0;k<I[Qi];++k)T=(T<<5)+T+I.charCodeAt(k),T=T&T;return Math.abs(T)},v.INT_MAX_VALUE=2147483647,v}(),AIt=function(){function v(){var I=this,T=new gIt,k=new B4e;I.getSamplingScore=function(M){var q=0;return M[Du]&&M[Du][k.userId]?q=T.getHashCodeScore(M[Du][k.userId]):M.ext&&M.ext.user&&M.ext.user.id?q=T[iIt](M.ext.user.id):M[Du]&&M[Du][k.operationId]?q=T.getHashCodeScore(M[Du][k.operationId]):M.ext&&M.ext.telemetryTrace&&M.ext.telemetryTrace[a9]?q=T.getHashCodeScore(M.ext.telemetryTrace[a9]):q=Math.random()*100,q}}return s(v,"SamplingScoreGenerator"),v}(),yIt=function(){function v(I,T){this.INT_MAX_VALUE=2147483647;var k=T||l_(null);(I>100||I<0)&&(k.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:I},!0),I=100),this[pW]=I,this.samplingScoreGenerator=new AIt}return s(v,"Sample"),v.prototype.isSampledIn=function(I){var T=this[pW],k=!1;return T==null||T>=100||I.baseType===n9[Yy]?!0:(k=this.samplingScoreGenerator.getSamplingScore(I)<T,k)},v}(),js,Rv,Xy=void 0,W4e="",CIt=65e3;function j4e(v){try{return v.responseText}catch{}return null}s(j4e,"_getResponseText");function vIt(v){return v&&v.sendPOST}s(vIt,"isOverrideFn");var G4e=or((js={endpointUrl:QL(ue,lde+c4)},js[Ide]=km(),js.maxBatchInterval=15e3,js[M4e]=102400,js.disableTelemetry=km(),js[F4e]=km(!0),js.isRetryDisabled=km(),js[Rde]=km(!0),js[Q4e]=km(!0),js.disableXhr=km(),js[O4e]=km(),js[_de]=km(),js[h9]=Xy,js.namePrefix=Xy,js.samplingPercentage=QL(xIt,100),js[Sde]=Xy,js.convertUndefined=Xy,js.eventsLimitInMem=1e4,js[Tde]=!1,js.httpXHROverride={isVal:vIt,v:Xy},js[L4e]=km(),js.transports=Xy,js.retryCodes=Xy,js.maxRetryCnt={isVal:lt,v:10},js));function xIt(v){return!isNaN(v)&&v>0&&v<=100}s(xIt,"_chkSampling");var EIt=(Rv={},Rv[f4.dataType]=q4e,Rv[aW.dataType]=fIt,Rv[oW.dataType]=uIt,Rv[cW.dataType]=dIt,Rv[iW.dataType]=cIt,Rv[n9.dataType]=lIt,Rv[sW.dataType]=aIt,Rv),V4e=function(v){GS(I,v);function I(){var T=v.call(this)||this;T.priority=1001,T.identifier=nIt;var k,M,q,G,ce,fe,xe,Re=0,Qe,et,He,Ke,gt,st,wt,$t,sr,_r,ii,Hi,$i,Go,wn,tn,Wi,Ca,bs,Wt,rn,Fo,Dt,Qn,Ua,Vo,zl;return ku(I,T,function(dt,Kc){K4e(),dt.pause=function(){dI(),q=!0},dt.resume=function(){q&&(q=!1,M=null,os(),v4())},dt.flush=function(Ve,It,dr){if(Ve===void 0&&(Ve=!0),!q){dI();try{return dt[f9](Ve,null,dr||1)}catch(jr){Fr(dt[Cd](),1,22,"flush failed, telemetry will not be collected: "+Tl(jr),{exception:Qt(jr)})}}},dt.onunloadFlush=function(){if(!q)if(wt||Wt)try{return dt[f9](!0,Zf,2)}catch(Ve){Fr(dt[Cd](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Tl(Ve),{exception:Qt(Ve)})}else dt.flush(!1)},dt.addHeader=function(Ve,It){xe[Ve]=It},dt[wde]=function(Ve,It,dr,jr){dt.isInitialized()&&Fr(dt[Cd](),1,28,"Sender is already initialized"),Kc[wde](Ve,It,dr,jr);var Gn=dt.identifier;ce=new mIt(It.logger),k=0,M=null,dt[p9]=null,fe=0;var Rn=dt[Cd]();He=o4e(Qg("Sender"),It.evtNamespace&&It.evtNamespace()),et=rIt(He),dt._addHook(Ug(Ve,function(bo){var Sc=bo.cfg;Sc.storagePrefix&&Tbt(Sc.storagePrefix);var cp=Zb(null,Sc,It),wi=cp.getExtCfg(Gn,G4e),Y4e=wi[m9];if(Ke&&Y4e===Ke){var Ode=Sc[m9];Ode&&Ode!==Y4e&&(wi[m9]=Ode)}ht(wi[h9])&&(wi[h9]=Sc[h9]),je(dt,"_senderConfig",{g:s(function(){return wi},"g")}),gt!==wi[m9]&&(Ke=gt=wi[m9]),It.activeStatus()===Dy.PENDING?dt.pause():It.activeStatus()===Dy.ACTIVE&&dt.resume(),_r&&_r!==wi[Sde]&&Kr(_r,function(Nu){delete xe[Nu.header]}),st=wi[M4e],wt=(wi[_de]===!1||wi[Rde]===!1)&&qy(),$t=wi[_de]===!1&&qy(),sr=wi[Rde]===!1&&qy(),Wt=wi[L4e],rn=!!wi.disableXhr,zl=wi.retryCodes;var Qde=wi[Tde],x4=!!wi[F4e]&&(!!Qde||C4e()),J4e=wi.namePrefix,wIt=x4!==tn||x4&&Ca!==J4e||x4&&Wi!==Qde;if(dt[Jy]){if(wIt)try{dt[Jy]=dt[Jy].createNew(Rn,wi,x4)}catch(Nu){Fr(dt[Cd](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Tl(Nu),{exception:Qt(Nu)})}os()}else dt[Jy]=x4?new $4e(Rn,wi):new Mde(Rn,wi);Ca=J4e,tn=x4,Wi=Qde,Fo=!wi[O4e]&&i_(!0),Ua=!!wi[Q4e],dt._sample=new yIt(wi.samplingPercentage,Rn),Hi=wi[h9],!ht(Hi)&&!z4e(Hi,Sc)&&Fr(Rn,1,100,"Invalid Instrumentation key "+Hi),_r=wi[Sde],Ae(Ke)&&!g4e(Ke)&&_r&&_r[Qi]>0?Kr(_r,function(Nu){T.addHeader(Nu.header,Nu.value)}):_r=null,bs=wi.enableSendPromise;var X4e=Kl();Vo?Vo.SetConfig(X4e):(Vo=new zc,Vo[wde](X4e,Rn));var AW=wi.httpXHROverride,yW=null,C9=null,SIt=f$([3,1,2],wi.transports);yW=Vo&&Vo[dW](SIt,!1);var Ude=Vo&&Vo.getFallbackInst();Dt=s(function(Nu,D_){return Jr(Ude,Nu,D_)},"_xhrSend"),Qn=s(function(Nu,D_){return Jr(Ude,Nu,D_,!1)},"_fallbackSend"),yW=Wt?AW:yW||AW||Ude,dt[p9]=function(Nu,D_){return Jr(yW,Nu,D_)},Fo&&(Qe=C4);var qde=f$([3,1],wi.unloadTransports);Fo||(qde=qde.filter(function(Nu){return Nu!==2})),C9=Vo&&Vo[dW](qde,!0),C9=Wt?AW:C9||AW,(Wt||wi.unloadTransports||!Qe)&&C9&&(Qe=s(function(Nu,D_){return Jr(C9,Nu,D_)},"_syncUnloadSender")),Qe||(Qe=Dt),ii=wi.disableTelemetry,$i=wi.convertUndefined||Xy,Go=wi.isRetryDisabled,wn=wi.maxBatchInterval}))},dt.processTelemetry=function(Ve,It){It=dt._getTelCtx(It);var dr=It[Cd]();try{var jr=$g(Ve,dr);if(!jr)return;var Gn=uI(Ve,dr);if(!Gn)return;var Rn=ce.serialize(Gn),bo=dt[Jy];os(Rn);var Sc={item:Rn,cnt:0};bo[w_](Sc),v4()}catch(cp){Fr(dr,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Tl(cp),{exception:Qt(cp)})}dt.processNext(Ve,It)},dt.isCompletelyIdle=function(){return!q&&Re===0&&dt._buffer[S_]()===0},dt.getOfflineListener=function(){return et},dt._xhrReadyStateChange=function(Ve,It,dr){if(!jg(It))return Nm(Ve,It,dr)},dt[f9]=function(Ve,It,dr){Ve===void 0&&(Ve=!0);var jr;if(!q)try{var Gn=dt[Jy];if(ii)Gn[h4]();else if(Gn[S_]()>0){var Rn=Gn.getItems();gW(dr||0,Ve),It?jr=It.call(dt,Rn,Ve):jr=dt[p9](Rn,Ve)}dI()}catch(Sc){var bo=Fb();(!bo||bo>9)&&Fr(dt[Cd](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Tl(Sc),{exception:Qt(Sc)})}return jr},dt.getOfflineSupport=function(){return{getUrl:s(function(){return Ke},"getUrl"),createPayload:yt,serialize:va,batch:Bu,shouldProcess:s(function(Ve){return!!$g(Ve)},"shouldProcess")}},dt._doTeardown=function(Ve,It){dt.onunloadFlush(),jb(et,!1),K4e()},dt[__]=function(Ve,It,dr){if(!jg(Ve))return sf(Ve,It)},dt[kde]=function(Ve,It){if(!jg(Ve))return cI(Ve,It)},dt[fW]=function(Ve,It){if(!jg(Ve))return Hg(Ve)},dt._xdrOnLoad=function(Ve,It){if(!jg(It))return qa(Ve,It)};function qa(Ve,It){var dr=j4e(Ve);if(Ve&&(dr+""=="200"||dr===""))k=0,dt[fW](It,0);else{var jr=Yr(dr);jr&&jr[Pde]&&jr[Pde]>jr[Dde]&&!Go?dt[kde](It,jr):dt[__](It,d$(Ve))}}s(qa,"_xdrOnLoad");function Kl(){try{var Ve={xdrOnComplete:s(function(dr,jr,Gn){var Rn=lI(Gn);if(Rn)return qa(dr,Rn)},"xdrOnComplete"),fetchOnComplete:s(function(dr,jr,Gn,Rn){var bo=lI(Rn);if(bo)return Gs(dr.status,bo,dr.url,bo[Qi],dr.statusText,Gn||"")},"fetchOnComplete"),xhrOnComplete:s(function(dr,jr,Gn){var Rn=lI(Gn);if(Rn)return Nm(dr,Rn,Rn[Qi])},"xhrOnComplete"),beaconOnRetry:s(function(dr,jr,Gn){return Wg(dr,jr,Gn)},"beaconOnRetry")},It={enableSendPromise:bs,isOneDs:!1,disableCredentials:!1,disableXhr:rn,disableBeacon:!sr,disableBeaconSync:!$t,senderOnCompleteCallBack:Ve};return It}catch{}return null}s(Kl,"_getSendPostMgrConfig");function Nm(Ve,It,dr){Ve.readyState===4&&Gs(Ve.status,It,Ve.responseURL,dr,q5(Ve),j4e(Ve)||Ve.response)}s(Nm,"_xhrReadyStateChange");function sf(Ve,It,dr){Fr(dt[Cd](),2,26,"Failed to send telemetry.",{message:It}),dt._buffer&&dt._buffer[l9](Ve)}s(sf,"_onError");function cI(Ve,It){for(var dr=[],jr=[],Gn=It.errors.reverse(),Rn=0,bo=Gn;Rn<bo.length;Rn++){var Sc=bo[Rn],cp=Ve.splice(Sc.index,1)[0];fI(Sc.statusCode)?jr[_v](cp):dr[_v](cp)}Ve[Qi]>0&&dt[fW](Ve,It[Dde]),dr[Qi]>0&&dt[__](dr,q5(null,["partial success",It[Dde],"of",It.itemsReceived].join(" "))),jr[Qi]>0&&(y9(jr),Fr(dt[Cd](),2,40,"Partial success. Delivered: "+Ve[Qi]+", Failed: "+dr[Qi]+". Will retry to send "+jr[Qi]+" our of "+It[Pde]+" items"))}s(cI,"_onPartialSuccess");function Hg(Ve,It){dt._buffer&&dt._buffer[l9](Ve)}s(Hg,"_onSuccess");function lI(Ve){try{if(Ve){var It=Ve,dr=It.oriPayload;return dr&&dr[Qi]?dr:null}}catch{}return null}s(lI,"_getPayloadArr");function $g(Ve,It){if(ii)return!1;if(!Ve)return It&&Fr(It,1,7,"Cannot send empty telemetry"),!1;if(Ve.baseData&&!Ve[Bde])return It&&Fr(It,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ve[Bde]||(Ve[Bde]="EventData"),!dt[p9])return It&&Fr(It,1,28,"Sender was not initialized"),!1;if(Tr(Ve))Ve[a4e]=dt._sample[pW];else return It&&Fr(It,2,33,"Telemetry item was sampled out and not sent",{SampleRate:dt._sample[pW]}),!1;return!0}s($g,"_validate");function uI(Ve,It){var dr=Ve.iKey||Hi,jr=I.constructEnvelope(Ve,dr,It,$i);if(!jr){Fr(It,1,47,"Unable to create an AppInsights envelope");return}var Gn=!1;if(Ve[Du]&&Ve[Du][cde]&&(Kr(Ve[Du][cde],function(Rn){try{Rn&&Rn(jr)===!1&&(Gn=!0,X5(It,"Telemetry processor check returns false"))}catch(bo){Fr(It,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Tl(bo),{exception:Qt(bo)},!0)}}),delete Ve[Du][cde]),!Gn)return jr}s(uI,"_getEnvelope");function va(Ve){var It=W4e,dr=dt[Cd]();try{var jr=$g(Ve,dr),Gn=null;jr&&(Gn=uI(Ve,dr)),Gn&&(It=ce.serialize(Gn))}catch{}return It}s(va,"_serialize");function Bu(Ve){var It=W4e;return Ve&&Ve[Qi]&&(It="["+Ve.join(",")+"]"),It}s(Bu,"_batch");function yt(Ve){var It=Zo();return{urlString:Ke,data:Ve,headers:It}}s(yt,"_createPayload");function Tr(Ve){return dt._sample.isSampledIn(Ve)}s(Tr,"_isSampledIn");function Wn(Ve,It,dr,jr){It===200&&Ve?dt._onSuccess(Ve,Ve[Qi]):jr&&dt[__](Ve,jr)}s(Wn,"_getOnComplete");function Jr(Ve,It,dr,jr){jr===void 0&&(jr=!0);var Gn=s(function(Sc,cp,wi){return Wn(It,Sc,cp,wi)},"onComplete"),Rn=jn(It),bo=Ve&&Ve.sendPOST;return bo&&Rn?(jr&&dt._buffer[uW](It),bo(Rn,Gn,!dr)):null}s(Jr,"_doSend");function jn(Ve){if(Je(Ve)&&Ve[Qi]>0){var It=dt[Jy].batchPayloads(Ve),dr=Zo(),jr={data:It,urlString:Ke,headers:dr,disableXhrSync:rn,disableFetchKeepAlive:!Fo,oriPayload:Ve};return jr}return null}s(jn,"_getPayload");function Zo(){try{var Ve=xe||{};return g4e(Ke)&&(Ve[l4e[6]]=l4e[7]),Ve}catch{}return null}s(Zo,"_getHeaders");function os(Ve){var It=Ve?Ve[Qi]:0;return dt[Jy].size()+It>st?((!et||et.isOnline())&&dt[f9](!0,null,10),!0):!1}s(os,"_checkMaxSize");function Gs(Ve,It,dr,jr,Gn,Rn){var bo=null;if(dt._appId||(bo=Yr(Rn),bo&&bo.appId&&(dt._appId=bo.appId)),(Ve<200||Ve>=300)&&Ve!==0){if((Ve===301||Ve===307||Ve===308)&&!vd(dr)){dt[__](It,Gn);return}if(et&&!et.isOnline()){if(!Go){var Sc=10;y9(It,Sc),Fr(dt[Cd](),2,40,". Offline - Response Code: ".concat(Ve,". Offline status: ").concat(!et.isOnline(),". Will retry to send ").concat(It.length," items."))}return}!Go&&fI(Ve)?(y9(It),Fr(dt[Cd](),2,40,". Response code "+Ve+". Will retry to send "+It[Qi]+" items.")):dt[__](It,Gn)}else vd(dr),Ve===206?(bo||(bo=Yr(Rn)),bo&&!Go?dt[kde](It,bo):dt[__](It,Gn)):(k=0,dt[fW](It,jr))}s(Gs,"_checkResponsStatus");function vd(Ve){return fe>=10?!1:!ie(Ve)&&Ve!==""&&Ve!==Ke?(Ke=Ve,++fe,!0):!1}s(vd,"_checkAndUpdateEndPointUrl");function Zf(Ve,It){if(Qe)Qe(Ve,!1);else{var dr=Vo&&Vo[dW]([3],!0);return Jr(dr,Ve,It)}}s(Zf,"_doUnloadSend");function Wg(Ve,It,dr){var jr=Ve,Gn=jr&&jr.oriPayload;if(Ua)Qn&&Qn(Gn,!0),Fr(dt[Cd](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Rn=[],bo=0;bo<Gn[Qi];bo++){var Sc=Gn[bo],cp=[Sc],wi=jn(cp);dr(wi,It)?dt._onSuccess(cp,cp[Qi]):Rn[_v](Sc)}Rn[Qi]>0&&(Qn&&Qn(Rn,!0),Fr(dt[Cd](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Wg,"_onBeaconRetry");function jg(Ve){try{if(Ve&&Ve[Qi])return Ae(Ve[0])}catch{}return null}s(jg,"_isStringArr");function C4(Ve,It){var dr=null;if(Je(Ve)){for(var jr=Ve[Qi],Gn=0;Gn<Ve[Qi];Gn++)jr+=Ve[Gn].item[Qi];var Rn=Vo.getSyncFetchPayload();Rn+jr<=CIt?dr=2:qy()?dr=3:(dr=1,Fr(dt[Cd](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var bo=Vo&&Vo[dW]([dr],!0);return Jr(bo,Ve,It)}return null}s(C4,"_fetchKeepAliveSender");function y9(Ve,It){if(It===void 0&&(It=1),!(!Ve||Ve[Qi]===0)){var dr=dt[Jy];dr[l9](Ve),k++;for(var jr=0,Gn=Ve;jr<Gn.length;jr++){var Rn=Gn[jr];Rn.cnt=Rn.cnt||0,Rn.cnt++,dr[w_](Rn)}Fde(It),v4()}}s(y9,"_resendPayload");function Fde(Ve){var It=10,dr;if(k<=1)dr=It;else{var jr=(Math.pow(2,k)-1)/2,Gn=Sy(Math.random()*jr*It)+1;Gn=Ve*Gn,dr=Pe(Yn(Gn,3600),It)}var Rn=hd()+dr*1e3;M=Rn}s(Fde,"_setRetryTime");function v4(){if(!G&&!q){var Ve=M?Pe(0,M-hd()):0,It=Pe(wn,Ve);G=Ry(function(){G=null,dt[f9](!0,null,1)},It)}}s(v4,"_setupTimer");function dI(){G&&G.cancel(),G=null,M=null}s(dI,"_clearScheduledTimer");function fI(Ve){return ie(zl)?Ve===401||Ve===408||Ve===429||Ve===500||Ve===502||Ve===503||Ve===504:zl[Qi]&&zl.indexOf(Ve)>-1}s(fI,"_isRetriable");function hW(){var Ve="getNotifyMgr";return dt.core[Ve]?dt.core[Ve]():dt.core._notificationManager}s(hW,"_getNotifyMgr");function gW(Ve,It){var dr=hW();if(dr&&dr.eventsSendRequest)try{dr.eventsSendRequest(Ve,It)}catch(jr){Fr(dt[Cd](),1,74,"send request notification failed: "+Tl(jr),{exception:Qt(jr)})}}s(gW,"_notifySendRequest");function z4e(Ve,It){var dr=It.disableInstrumentationKeyValidation,jr=ie(dr)?!1:dr;if(jr)return!0;var Gn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Rn=new RegExp(Gn);return Rn.test(Ve)}s(z4e,"_validateInstrumentationKey");function K4e(){dt[p9]=null,dt[Jy]=null,dt._appId=null,dt._sample=null,xe={},et=null,k=0,M=null,q=!1,G=null,ce=null,fe=0,Re=0,Qe=null,He=null,Ke=null,gt=null,st=0,wt=!1,_r=null,ii=!1,Hi=null,$i=Xy,Go=!1,tn=null,Ca=Xy,rn=!1,Fo=!1,Ua=!1,Dt=null,Qn=null,Vo=null,je(dt,"_senderConfig",{g:s(function(){return u$({},G4e)},"g")})}s(K4e,"_initDefaults")}),T}return s(I,"Sender"),I.constructEnvelope=function(T,k,M,q){var G;k!==T.iKey&&!ie(k)?G=Dg(Dg({},T),{iKey:k}):G=T;var ce=EIt[G.baseType]||q4e;return ce(M,G,q)},I}(Et),A4="instrumentationKey",mW="connectionString",g9="endpointUrl",A9="userOverrideEndpointUrl",y4,Lde=void 0,bIt=(y4={diagnosticLogInterval:QL(IIt,1e4)},y4[mW]=Lde,y4.endpointUrl=Lde,y4[A4]=Lde,y4.extensionConfig={},y4);function IIt(v){return v&&v>0}s(IIt,"_chkDiagLevel");var TIt=function(){function v(I){var T=new Nt,k;(ie(I)||ie(I[A4])&&ie(I[mW]))&&Vr("Invalid input configuration"),ku(v,this,function(q){je(q,"config",{g:s(function(){return k},"g")}),G(),q.initialize=G,q.track=M,IL(q,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function G(){var ce=Xf(I||{},bIt);k=ce.cfg,T.addUnloadHook(Ug(ce,function(){var fe=k[mW];if(ht(fe)){var xe=D5(function(He,Ke){Vf(fe,function(gt){var st=gt.value,wt=k[A4];if(!gt.rejected&&st){k[mW]=st;var $t=Ade(st);wt=$t.instrumentationkey||wt}He(wt)})}),Re=D5(function(He,Ke){Vf(fe,function(gt){var st=gt.value,wt=k[g9];if(!gt.rejected&&st){var $t=Ade(st),sr=$t.ingestionendpoint;wt=sr?sr+c4:wt}He(wt)})});k[A4]=xe,k[g9]=k[A9]||Re}if(Ae(fe)){var Qe=Ade(fe),et=Qe.ingestionendpoint;k[g9]=k[A9]?k[A9]:et+c4,k[A4]=Qe.instrumentationkey||k[A4]}k[g9]=k[A9]?k[A9]:k[g9]})),T.initialize(k,[new V4e])}s(G,"_initialize")});function M(q){q&&(q.baseData=q.baseData||{},q.baseType=q.baseType||"EventData"),T.track(q)}s(M,"_track")}return s(v,"ApplicationInsights"),v.__ieDyn=1,v}();t.AppInsightsCore=Nt,t.ApplicationInsights=TIt,t.Sender=V4e,t.SeverityLevel=tIt,t.arrForEach=Kr,t.isNullOrUndefined=ie,t.proxyFunctions=IL,t.throwError=Vr})});var IFe=H(dV=>{"use strict";d();Object.defineProperty(dV,"__esModule",{value:!0});dV.state=void 0;dV.state={instrumenterImplementation:void 0}});var VD=H((Vhe,hOe)=>{d();var iz=require("buffer"),bC=iz.Buffer;function mOe(t,e){for(var r in t)e[r]=t[r]}s(mOe,"copyProps");bC.from&&bC.alloc&&bC.allocUnsafe&&bC.allocUnsafeSlow?hOe.exports=iz:(mOe(iz,Vhe),Vhe.Buffer=K2);function K2(t,e,r){return bC(t,e,r)}s(K2,"SafeBuffer");K2.prototype=Object.create(bC.prototype);mOe(bC,K2);K2.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return bC(t,e,r)};K2.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=bC(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};K2.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return bC(t)};K2.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return iz.SlowBuffer(t)}});var zhe=H((yan,gOe)=>{d();var oz=VD().Buffer,PDt=require("stream"),DDt=require("util");function sz(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=oz.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=oz.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(sz,"DataStream");DDt.inherits(sz,PDt);sz.prototype.write=s(function(e){this.buffer=oz.concat([this.buffer,oz.from(e)]),this.emit("data",e)},"write");sz.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");gOe.exports=sz});var yOe=H((xan,AOe)=>{"use strict";d();function Khe(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(Khe,"getParamSize");var BDt={ES256:Khe(256),ES384:Khe(384),ES512:Khe(521)};function NDt(t){var e=BDt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(NDt,"getParamBytesForAlg");AOe.exports=NDt});var TOe=H((Ian,IOe)=>{"use strict";d();var az=VD().Buffer,vOe=yOe(),cz=128,xOe=0,MDt=32,LDt=16,FDt=2,EOe=LDt|MDt|xOe<<6,lz=FDt|xOe<<6;function ODt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(ODt,"base64Url");function bOe(t){if(az.isBuffer(t))return t;if(typeof t=="string")return az.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(bOe,"signatureAsBuffer");function QDt(t,e){t=bOe(t);var r=vOe(e),n=r+1,i=t.length,o=0;if(t[o++]!==EOe)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(cz|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==lz)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==lz)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var f=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,m=r-u,h=az.allocUnsafe(p+c+m+u);for(o=0;o<p;++o)h[o]=0;t.copy(h,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+m;++o)h[o]=0;return t.copy(h,o,f+Math.max(-m,0),f+u),h=h.toString("base64"),h=ODt(h),h}s(QDt,"derToJose");function COe(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=cz;return i&&--n,n}s(COe,"countPadding");function UDt(t,e){t=bOe(t);var r=vOe(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=COe(t,0,r),o=COe(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<cz,f=az.allocUnsafe((u?2:3)+l),p=0;return f[p++]=EOe,u?f[p++]=l:(f[p++]=cz|1,f[p++]=l&255),f[p++]=lz,f[p++]=a,i<0?(f[p++]=0,p+=t.copy(f,p,0,r)):p+=t.copy(f,p,i,r),f[p++]=lz,f[p++]=c,o<0?(f[p++]=0,t.copy(f,p,r)):t.copy(f,p,r+o),f}s(UDt,"joseToDer");IOe.exports={derToJose:QDt,joseToDer:UDt}});var SOe=H((San,wOe)=>{"use strict";d();var EF=require("buffer").Buffer,Yhe=require("buffer").SlowBuffer;wOe.exports=uz;function uz(t,e){if(!EF.isBuffer(t)||!EF.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(uz,"bufferEq");uz.install=function(){EF.prototype.equal=Yhe.prototype.equal=s(function(e){return uz(this,e)},"equal")};var qDt=EF.prototype.equal,HDt=Yhe.prototype.equal;uz.restore=function(){EF.prototype.equal=qDt,Yhe.prototype.equal=HDt}});var ege=H((kan,LOe)=>{d();var KD=VD().Buffer,th=require("crypto"),ROe=TOe(),_Oe=require("util"),$Dt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,bF="secret must be a string or buffer",zD="key must be a string or a buffer",WDt="key must be a string, a buffer or an object",Xhe=typeof th.createPublicKey=="function";Xhe&&(zD+=" or a KeyObject",bF+="or a KeyObject");function kOe(t){if(!KD.isBuffer(t)&&typeof t!="string"&&(!Xhe||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw hA(zD)}s(kOe,"checkIsPublicKey");function POe(t){if(!KD.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw hA(WDt)}s(POe,"checkIsPrivateKey");function jDt(t){if(!KD.isBuffer(t)){if(typeof t=="string")return t;if(!Xhe||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw hA(bF)}}s(jDt,"checkIsSecretKey");function Zhe(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(Zhe,"fromBase64");function DOe(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(DOe,"toBase64");function hA(t){var e=[].slice.call(arguments,1),r=_Oe.format.bind(_Oe,t).apply(null,e);return new TypeError(r)}s(hA,"typeError");function GDt(t){return KD.isBuffer(t)||typeof t=="string"}s(GDt,"bufferOrString");function IF(t){return GDt(t)||(t=JSON.stringify(t)),t}s(IF,"normalizeInput");function BOe(t){return s(function(r,n){jDt(n),r=IF(r);var i=th.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return Zhe(o)},"sign")}s(BOe,"createHmacSigner");var Jhe,VDt="timingSafeEqual"in th?s(function(e,r){return e.byteLength!==r.byteLength?!1:th.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return Jhe||(Jhe=SOe()),Jhe(e,r)},"timingSafeEqual");function zDt(t){return s(function(r,n,i){var o=BOe(t)(r,i);return VDt(KD.from(n),KD.from(o))},"verify")}s(zDt,"createHmacVerifier");function NOe(t){return s(function(r,n){POe(n),r=IF(r);var i=th.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return Zhe(o)},"sign")}s(NOe,"createKeySigner");function MOe(t){return s(function(r,n,i){kOe(i),r=IF(r),n=DOe(n);var o=th.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(MOe,"createKeyVerifier");function KDt(t){return s(function(r,n){POe(n),r=IF(r);var i=th.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:th.constants.RSA_PKCS1_PSS_PADDING,saltLength:th.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Zhe(o)},"sign")}s(KDt,"createPSSKeySigner");function YDt(t){return s(function(r,n,i){kOe(i),r=IF(r),n=DOe(n);var o=th.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:th.constants.RSA_PKCS1_PSS_PADDING,saltLength:th.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(YDt,"createPSSKeyVerifier");function JDt(t){var e=NOe(t);return s(function(){var n=e.apply(null,arguments);return n=ROe.derToJose(n,"ES"+t),n},"sign")}s(JDt,"createECDSASigner");function XDt(t){var e=MOe(t);return s(function(n,i,o){i=ROe.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(XDt,"createECDSAVerifer");function ZDt(){return s(function(){return""},"sign")}s(ZDt,"createNoneSigner");function eBt(){return s(function(e,r){return r===""},"verify")}s(eBt,"createNoneVerifier");LOe.exports=s(function(e){var r={hs:BOe,rs:NOe,ps:KDt,es:JDt,none:ZDt},n={hs:zDt,rs:MOe,ps:YDt,es:XDt,none:eBt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw hA($Dt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var tge=H((Ban,FOe)=>{d();var tBt=require("buffer").Buffer;FOe.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||tBt.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var $Oe=H((Lan,HOe)=>{d();var rBt=VD().Buffer,OOe=zhe(),nBt=ege(),iBt=require("stream"),QOe=tge(),rge=require("util");function UOe(t,e){return rBt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(UOe,"base64url");function oBt(t,e,r){r=r||"utf8";var n=UOe(QOe(t),"binary"),i=UOe(QOe(e),r);return rge.format("%s.%s",n,i)}s(oBt,"jwsSecuredInput");function qOe(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=nBt(e.alg),a=oBt(e,r,i),c=o.sign(a,n);return rge.format("%s.%s",a,c)}s(qOe,"jwsSign");function dz(t){var e=t.secret||t.privateKey||t.key,r=new OOe(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new OOe(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(dz,"SignStream");rge.inherits(dz,iBt);dz.prototype.sign=s(function(){try{var e=qOe({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");dz.sign=qOe;HOe.exports=dz});var ZOe=H((Qan,XOe)=>{d();var jOe=VD().Buffer,WOe=zhe(),sBt=ege(),aBt=require("stream"),GOe=tge(),cBt=require("util"),lBt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function uBt(t){return Object.prototype.toString.call(t)==="[object Object]"}s(uBt,"isObject");function dBt(t){if(uBt(t))return t;try{return JSON.parse(t)}catch{return}}s(dBt,"safeJsonParse");function VOe(t){var e=t.split(".",1)[0];return dBt(jOe.from(e,"base64").toString("binary"))}s(VOe,"headerFromJWS");function fBt(t){return t.split(".",2).join(".")}s(fBt,"securedInputFromJWS");function zOe(t){return t.split(".")[2]}s(zOe,"signatureFromJWS");function pBt(t,e){e=e||"utf8";var r=t.split(".")[1];return jOe.from(r,"base64").toString(e)}s(pBt,"payloadFromJWS");function KOe(t){return lBt.test(t)&&!!VOe(t)}s(KOe,"isValidJws");function YOe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=GOe(t);var i=zOe(t),o=fBt(t),a=sBt(e);return a.verify(o,i,r)}s(YOe,"jwsVerify");function JOe(t,e){if(e=e||{},t=GOe(t),!KOe(t))return null;var r=VOe(t);if(!r)return null;var n=pBt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:zOe(t)}}s(JOe,"jwsDecode");function YD(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new WOe(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new WOe(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(YD,"VerifyStream");cBt.inherits(YD,aBt);YD.prototype.verify=s(function(){try{var e=YOe(this.signature.buffer,this.algorithm,this.key.buffer),r=JOe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");YD.decode=JOe;YD.isValid=KOe;YD.verify=YOe;XOe.exports=YD});var pz=H(sT=>{d();var e7e=$Oe(),fz=ZOe(),mBt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];sT.ALGORITHMS=mBt;sT.sign=e7e.sign;sT.verify=fz.verify;sT.decode=fz.decode;sT.isValid=fz.isValid;sT.createSign=s(function(e){return new e7e(e)},"createSign");sT.createVerify=s(function(e){return new fz(e)},"createVerify")});var nge=H((jan,t7e)=>{d();var hBt=pz();t7e.exports=function(t,e){e=e||{};var r=hBt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var TF=H((Van,r7e)=>{d();var mz=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");mz.prototype=Object.create(Error.prototype);mz.prototype.constructor=mz;r7e.exports=mz});var ige=H((Yan,i7e)=>{d();var n7e=TF(),hz=s(function(t,e){n7e.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");hz.prototype=Object.create(n7e.prototype);hz.prototype.constructor=hz;i7e.exports=hz});var oge=H((Zan,s7e)=>{d();var o7e=TF(),gz=s(function(t,e){o7e.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");gz.prototype=Object.create(o7e.prototype);gz.prototype.constructor=gz;s7e.exports=gz});var sge=H((rcn,a7e)=>{d();var JD=1e3,XD=JD*60,ZD=XD*60,Y2=ZD*24,gBt=Y2*7,ABt=Y2*365.25;a7e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return yBt(t);if(r==="number"&&isFinite(t))return e.long?vBt(t):CBt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function yBt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ABt;case"weeks":case"week":case"w":return r*gBt;case"days":case"day":case"d":return r*Y2;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ZD;case"minutes":case"minute":case"mins":case"min":case"m":return r*XD;case"seconds":case"second":case"secs":case"sec":case"s":return r*JD;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(yBt,"parse");function CBt(t){var e=Math.abs(t);return e>=Y2?Math.round(t/Y2)+"d":e>=ZD?Math.round(t/ZD)+"h":e>=XD?Math.round(t/XD)+"m":e>=JD?Math.round(t/JD)+"s":t+"ms"}s(CBt,"fmtShort");function vBt(t){var e=Math.abs(t);return e>=Y2?Az(t,e,Y2,"day"):e>=ZD?Az(t,e,ZD,"hour"):e>=XD?Az(t,e,XD,"minute"):e>=JD?Az(t,e,JD,"second"):t+" ms"}s(vBt,"fmtLong");function Az(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(Az,"plural")});var age=H((ocn,c7e)=>{d();var xBt=sge();c7e.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=xBt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var wF=H((acn,l7e)=>{"use strict";d();var EBt="2.0.0",bBt=Number.MAX_SAFE_INTEGER||9007199254740991,IBt=16,TBt=250,wBt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];l7e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:IBt,MAX_SAFE_BUILD_LENGTH:TBt,MAX_SAFE_INTEGER:bBt,RELEASE_TYPES:wBt,SEMVER_SPEC_VERSION:EBt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var SF=H((lcn,u7e)=>{"use strict";d();var SBt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};u7e.exports=SBt});var eB=H((IC,d7e)=>{"use strict";d();var{MAX_SAFE_COMPONENT_LENGTH:cge,MAX_SAFE_BUILD_LENGTH:_Bt,MAX_LENGTH:RBt}=wF(),kBt=SF();IC=d7e.exports={};var PBt=IC.re=[],DBt=IC.safeRe=[],Rr=IC.src=[],BBt=IC.safeSrc=[],kr=IC.t={},NBt=0,lge="[a-zA-Z0-9-]",MBt=[["\\s",1],["\\d",RBt],[lge,_Bt]],LBt=s(t=>{for(let[e,r]of MBt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),hi=s((t,e,r)=>{let n=LBt(e),i=NBt++;kBt(t,i,e),kr[t]=i,Rr[i]=e,BBt[i]=n,PBt[i]=new RegExp(e,r?"g":void 0),DBt[i]=new RegExp(n,r?"g":void 0)},"createToken");hi("NUMERICIDENTIFIER","0|[1-9]\\d*");hi("NUMERICIDENTIFIERLOOSE","\\d+");hi("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${lge}*`);hi("MAINVERSION",`(${Rr[kr.NUMERICIDENTIFIER]})\\.(${Rr[kr.NUMERICIDENTIFIER]})\\.(${Rr[kr.NUMERICIDENTIFIER]})`);hi("MAINVERSIONLOOSE",`(${Rr[kr.NUMERICIDENTIFIERLOOSE]})\\.(${Rr[kr.NUMERICIDENTIFIERLOOSE]})\\.(${Rr[kr.NUMERICIDENTIFIERLOOSE]})`);hi("PRERELEASEIDENTIFIER",`(?:${Rr[kr.NONNUMERICIDENTIFIER]}|${Rr[kr.NUMERICIDENTIFIER]})`);hi("PRERELEASEIDENTIFIERLOOSE",`(?:${Rr[kr.NONNUMERICIDENTIFIER]}|${Rr[kr.NUMERICIDENTIFIERLOOSE]})`);hi("PRERELEASE",`(?:-(${Rr[kr.PRERELEASEIDENTIFIER]}(?:\\.${Rr[kr.PRERELEASEIDENTIFIER]})*))`);hi("PRERELEASELOOSE",`(?:-?(${Rr[kr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Rr[kr.PRERELEASEIDENTIFIERLOOSE]})*))`);hi("BUILDIDENTIFIER",`${lge}+`);hi("BUILD",`(?:\\+(${Rr[kr.BUILDIDENTIFIER]}(?:\\.${Rr[kr.BUILDIDENTIFIER]})*))`);hi("FULLPLAIN",`v?${Rr[kr.MAINVERSION]}${Rr[kr.PRERELEASE]}?${Rr[kr.BUILD]}?`);hi("FULL",`^${Rr[kr.FULLPLAIN]}$`);hi("LOOSEPLAIN",`[v=\\s]*${Rr[kr.MAINVERSIONLOOSE]}${Rr[kr.PRERELEASELOOSE]}?${Rr[kr.BUILD]}?`);hi("LOOSE",`^${Rr[kr.LOOSEPLAIN]}$`);hi("GTLT","((?:<|>)?=?)");hi("XRANGEIDENTIFIERLOOSE",`${Rr[kr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);hi("XRANGEIDENTIFIER",`${Rr[kr.NUMERICIDENTIFIER]}|x|X|\\*`);hi("XRANGEPLAIN",`[v=\\s]*(${Rr[kr.XRANGEIDENTIFIER]})(?:\\.(${Rr[kr.XRANGEIDENTIFIER]})(?:\\.(${Rr[kr.XRANGEIDENTIFIER]})(?:${Rr[kr.PRERELEASE]})?${Rr[kr.BUILD]}?)?)?`);hi("XRANGEPLAINLOOSE",`[v=\\s]*(${Rr[kr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Rr[kr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Rr[kr.XRANGEIDENTIFIERLOOSE]})(?:${Rr[kr.PRERELEASELOOSE]})?${Rr[kr.BUILD]}?)?)?`);hi("XRANGE",`^${Rr[kr.GTLT]}\\s*${Rr[kr.XRANGEPLAIN]}$`);hi("XRANGELOOSE",`^${Rr[kr.GTLT]}\\s*${Rr[kr.XRANGEPLAINLOOSE]}$`);hi("COERCEPLAIN",`(^|[^\\d])(\\d{1,${cge}})(?:\\.(\\d{1,${cge}}))?(?:\\.(\\d{1,${cge}}))?`);hi("COERCE",`${Rr[kr.COERCEPLAIN]}(?:$|[^\\d])`);hi("COERCEFULL",Rr[kr.COERCEPLAIN]+`(?:${Rr[kr.PRERELEASE]})?(?:${Rr[kr.BUILD]})?(?:$|[^\\d])`);hi("COERCERTL",Rr[kr.COERCE],!0);hi("COERCERTLFULL",Rr[kr.COERCEFULL],!0);hi("LONETILDE","(?:~>?)");hi("TILDETRIM",`(\\s*)${Rr[kr.LONETILDE]}\\s+`,!0);IC.tildeTrimReplace="$1~";hi("TILDE",`^${Rr[kr.LONETILDE]}${Rr[kr.XRANGEPLAIN]}$`);hi("TILDELOOSE",`^${Rr[kr.LONETILDE]}${Rr[kr.XRANGEPLAINLOOSE]}$`);hi("LONECARET","(?:\\^)");hi("CARETTRIM",`(\\s*)${Rr[kr.LONECARET]}\\s+`,!0);IC.caretTrimReplace="$1^";hi("CARET",`^${Rr[kr.LONECARET]}${Rr[kr.XRANGEPLAIN]}$`);hi("CARETLOOSE",`^${Rr[kr.LONECARET]}${Rr[kr.XRANGEPLAINLOOSE]}$`);hi("COMPARATORLOOSE",`^${Rr[kr.GTLT]}\\s*(${Rr[kr.LOOSEPLAIN]})$|^$`);hi("COMPARATOR",`^${Rr[kr.GTLT]}\\s*(${Rr[kr.FULLPLAIN]})$|^$`);hi("COMPARATORTRIM",`(\\s*)${Rr[kr.GTLT]}\\s*(${Rr[kr.LOOSEPLAIN]}|${Rr[kr.XRANGEPLAIN]})`,!0);IC.comparatorTrimReplace="$1$2$3";hi("HYPHENRANGE",`^\\s*(${Rr[kr.XRANGEPLAIN]})\\s+-\\s+(${Rr[kr.XRANGEPLAIN]})\\s*$`);hi("HYPHENRANGELOOSE",`^\\s*(${Rr[kr.XRANGEPLAINLOOSE]})\\s+-\\s+(${Rr[kr.XRANGEPLAINLOOSE]})\\s*$`);hi("STAR","(<|>)?=?\\s*\\*");hi("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");hi("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var yz=H((pcn,f7e)=>{"use strict";d();var FBt=Object.freeze({loose:!0}),OBt=Object.freeze({}),QBt=s(t=>t?typeof t!="object"?FBt:t:OBt,"parseOptions");f7e.exports=QBt});var uge=H((gcn,h7e)=>{"use strict";d();var p7e=/^[0-9]+$/,m7e=s((t,e)=>{let r=p7e.test(t),n=p7e.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),UBt=s((t,e)=>m7e(e,t),"rcompareIdentifiers");h7e.exports={compareIdentifiers:m7e,rcompareIdentifiers:UBt}});var Nd=H((Ccn,A7e)=>{"use strict";d();var Cz=SF(),{MAX_LENGTH:g7e,MAX_SAFE_INTEGER:vz}=wF(),{safeRe:xz,t:Ez}=eB(),qBt=yz(),{compareIdentifiers:tB}=uge(),dge=class t{static{s(this,"SemVer")}constructor(e,r){if(r=qBt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>g7e)throw new TypeError(`version is longer than ${g7e} characters`);Cz("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?xz[Ez.LOOSE]:xz[Ez.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>vz||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vz||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vz||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<vz)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Cz("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),tB(this.major,e.major)||tB(this.minor,e.minor)||tB(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Cz("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return tB(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Cz("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return tB(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?xz[Ez.PRERELEASELOOSE]:xz[Ez.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),tB(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};A7e.exports=dge});var J2=H((Ecn,C7e)=>{"use strict";d();var y7e=Nd(),HBt=s((t,e,r=!1)=>{if(t instanceof y7e)return t;try{return new y7e(t,e)}catch(n){if(!r)return null;throw n}},"parse");C7e.exports=HBt});var x7e=H((Tcn,v7e)=>{"use strict";d();var $Bt=J2(),WBt=s((t,e)=>{let r=$Bt(t,e);return r?r.version:null},"valid");v7e.exports=WBt});var b7e=H((_cn,E7e)=>{"use strict";d();var jBt=J2(),GBt=s((t,e)=>{let r=jBt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");E7e.exports=GBt});var w7e=H((Pcn,T7e)=>{"use strict";d();var I7e=Nd(),VBt=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new I7e(t instanceof I7e?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");T7e.exports=VBt});var R7e=H((Ncn,_7e)=>{"use strict";d();var S7e=J2(),zBt=s((t,e)=>{let r=S7e(t,null,!0),n=S7e(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let f=l?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"},"diff");_7e.exports=zBt});var P7e=H((Fcn,k7e)=>{"use strict";d();var KBt=Nd(),YBt=s((t,e)=>new KBt(t,e).major,"major");k7e.exports=YBt});var B7e=H((Ucn,D7e)=>{"use strict";d();var JBt=Nd(),XBt=s((t,e)=>new JBt(t,e).minor,"minor");D7e.exports=XBt});var M7e=H(($cn,N7e)=>{"use strict";d();var ZBt=Nd(),e3t=s((t,e)=>new ZBt(t,e).patch,"patch");N7e.exports=e3t});var F7e=H((Gcn,L7e)=>{"use strict";d();var t3t=J2(),r3t=s((t,e)=>{let r=t3t(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");L7e.exports=r3t});var rh=H((Kcn,Q7e)=>{"use strict";d();var O7e=Nd(),n3t=s((t,e,r)=>new O7e(t,r).compare(new O7e(e,r)),"compare");Q7e.exports=n3t});var q7e=H((Xcn,U7e)=>{"use strict";d();var i3t=rh(),o3t=s((t,e,r)=>i3t(e,t,r),"rcompare");U7e.exports=o3t});var $7e=H((tln,H7e)=>{"use strict";d();var s3t=rh(),a3t=s((t,e)=>s3t(t,e,!0),"compareLoose");H7e.exports=a3t});var bz=H((iln,j7e)=>{"use strict";d();var W7e=Nd(),c3t=s((t,e,r)=>{let n=new W7e(t,r),i=new W7e(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");j7e.exports=c3t});var V7e=H((aln,G7e)=>{"use strict";d();var l3t=bz(),u3t=s((t,e)=>t.sort((r,n)=>l3t(r,n,e)),"sort");G7e.exports=u3t});var K7e=H((uln,z7e)=>{"use strict";d();var d3t=bz(),f3t=s((t,e)=>t.sort((r,n)=>d3t(n,r,e)),"rsort");z7e.exports=f3t});var _F=H((pln,Y7e)=>{"use strict";d();var p3t=rh(),m3t=s((t,e,r)=>p3t(t,e,r)>0,"gt");Y7e.exports=m3t});var Iz=H((gln,J7e)=>{"use strict";d();var h3t=rh(),g3t=s((t,e,r)=>h3t(t,e,r)<0,"lt");J7e.exports=g3t});var fge=H((Cln,X7e)=>{"use strict";d();var A3t=rh(),y3t=s((t,e,r)=>A3t(t,e,r)===0,"eq");X7e.exports=y3t});var pge=H((Eln,Z7e)=>{"use strict";d();var C3t=rh(),v3t=s((t,e,r)=>C3t(t,e,r)!==0,"neq");Z7e.exports=v3t});var Tz=H((Tln,eQe)=>{"use strict";d();var x3t=rh(),E3t=s((t,e,r)=>x3t(t,e,r)>=0,"gte");eQe.exports=E3t});var wz=H((_ln,tQe)=>{"use strict";d();var b3t=rh(),I3t=s((t,e,r)=>b3t(t,e,r)<=0,"lte");tQe.exports=I3t});var mge=H((Pln,rQe)=>{"use strict";d();var T3t=fge(),w3t=pge(),S3t=_F(),_3t=Tz(),R3t=Iz(),k3t=wz(),P3t=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return T3t(t,r,n);case"!=":return w3t(t,r,n);case">":return S3t(t,r,n);case">=":return _3t(t,r,n);case"<":return R3t(t,r,n);case"<=":return k3t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");rQe.exports=P3t});var iQe=H((Nln,nQe)=>{"use strict";d();var D3t=Nd(),B3t=J2(),{safeRe:Sz,t:_z}=eB(),N3t=s((t,e)=>{if(t instanceof D3t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Sz[_z.COERCEFULL]:Sz[_z.COERCE]);else{let l=e.includePrerelease?Sz[_z.COERCERTLFULL]:Sz[_z.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return B3t(`${n}.${i}.${o}${a}${c}`,e)},"coerce");nQe.exports=N3t});var sQe=H((Fln,oQe)=>{"use strict";d();var hge=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};oQe.exports=hge});var nh=H((Uln,uQe)=>{"use strict";d();var M3t=/\s+/g,gge=class t{static{s(this,"Range")}constructor(e,r){if(r=F3t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Age)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(M3t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!cQe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&W3t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&H3t)|(this.options.loose&&$3t))+":"+e,i=aQe.get(n);if(i)return i;let o=this.options.loose,a=o?g0[Af.HYPHENRANGELOOSE]:g0[Af.HYPHENRANGE];e=e.replace(a,eNt(this.options.includePrerelease)),ra("hyphen replace",e),e=e.replace(g0[Af.COMPARATORTRIM],Q3t),ra("comparator trim",e),e=e.replace(g0[Af.TILDETRIM],U3t),ra("tilde trim",e),e=e.replace(g0[Af.CARETTRIM],q3t),ra("caret trim",e);let c=e.split(" ").map(p=>j3t(p,this.options)).join(" ").split(/\s+/).map(p=>Z3t(p,this.options));o&&(c=c.filter(p=>(ra("loose invalid filter",p,this.options),!!p.match(g0[Af.COMPARATORLOOSE])))),ra("range list",c);let l=new Map,u=c.map(p=>new Age(p,this.options));for(let p of u){if(cQe(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return aQe.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>lQe(n,r)&&e.set.some(i=>lQe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new O3t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(tNt(this.set[r],e,this.options))return!0;return!1}};uQe.exports=gge;var L3t=sQe(),aQe=new L3t,F3t=yz(),Age=RF(),ra=SF(),O3t=Nd(),{safeRe:g0,t:Af,comparatorTrimReplace:Q3t,tildeTrimReplace:U3t,caretTrimReplace:q3t}=eB(),{FLAG_INCLUDE_PRERELEASE:H3t,FLAG_LOOSE:$3t}=wF(),cQe=s(t=>t.value==="<0.0.0-0","isNullSet"),W3t=s(t=>t.value==="","isAny"),lQe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),j3t=s((t,e)=>(ra("comp",t,e),t=z3t(t,e),ra("caret",t),t=G3t(t,e),ra("tildes",t),t=Y3t(t,e),ra("xrange",t),t=X3t(t,e),ra("stars",t),t),"parseComparator"),yf=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),G3t=s((t,e)=>t.trim().split(/\s+/).map(r=>V3t(r,e)).join(" "),"replaceTildes"),V3t=s((t,e)=>{let r=e.loose?g0[Af.TILDELOOSE]:g0[Af.TILDE];return t.replace(r,(n,i,o,a,c)=>{ra("tilde",t,n,i,o,a,c);let l;return yf(i)?l="":yf(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:yf(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(ra("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,ra("tilde return",l),l})},"replaceTilde"),z3t=s((t,e)=>t.trim().split(/\s+/).map(r=>K3t(r,e)).join(" "),"replaceCarets"),K3t=s((t,e)=>{ra("caret",t,e);let r=e.loose?g0[Af.CARETLOOSE]:g0[Af.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{ra("caret",t,i,o,a,c,l);let u;return yf(o)?u="":yf(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:yf(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(ra("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(ra("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),ra("caret return",u),u})},"replaceCaret"),Y3t=s((t,e)=>(ra("replaceXRanges",t,e),t.split(/\s+/).map(r=>J3t(r,e)).join(" ")),"replaceXRanges"),J3t=s((t,e)=>{t=t.trim();let r=e.loose?g0[Af.XRANGELOOSE]:g0[Af.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{ra("xRange",t,n,i,o,a,c,l);let u=yf(o),f=u||yf(a),p=f||yf(c),m=p;return i==="="&&m&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(f&&(a=0),c=0,i===">"?(i=">=",f?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",f?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):f?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),ra("xRange return",n),n})},"replaceXRange"),X3t=s((t,e)=>(ra("replaceStars",t,e),t.trim().replace(g0[Af.STAR],"")),"replaceStars"),Z3t=s((t,e)=>(ra("replaceGTE0",t,e),t.trim().replace(g0[e.includePrerelease?Af.GTE0PRE:Af.GTE0],"")),"replaceGTE0"),eNt=s(t=>(e,r,n,i,o,a,c,l,u,f,p,m)=>(yf(n)?r="":yf(i)?r=`>=${n}.0.0${t?"-0":""}`:yf(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,yf(u)?l="":yf(f)?l=`<${+u+1}.0.0-0`:yf(p)?l=`<${u}.${+f+1}.0-0`:m?l=`<=${u}.${f}.${p}-${m}`:t?l=`<${u}.${f}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),tNt=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(ra(t[n].semver),t[n].semver!==Age.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var RF=H(($ln,gQe)=>{"use strict";d();var kF=Symbol("SemVer ANY"),vge=class t{static{s(this,"Comparator")}static get ANY(){return kF}constructor(e,r){if(r=dQe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Cge("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===kF?this.value="":this.value=this.operator+this.semver.version,Cge("comp",this)}parse(e){let r=this.options.loose?fQe[pQe.COMPARATORLOOSE]:fQe[pQe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new mQe(n[2],this.options.loose):this.semver=kF}toString(){return this.value}test(e){if(Cge("Comparator.test",e,this.options.loose),this.semver===kF||e===kF)return!0;if(typeof e=="string")try{e=new mQe(e,this.options)}catch{return!1}return yge(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new hQe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new hQe(this.value,r).test(e.semver):(r=dQe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||yge(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||yge(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};gQe.exports=vge;var dQe=yz(),{safeRe:fQe,t:pQe}=eB(),yge=mge(),Cge=SF(),mQe=Nd(),hQe=nh()});var PF=H((Gln,AQe)=>{"use strict";d();var rNt=nh(),nNt=s((t,e,r)=>{try{e=new rNt(e,r)}catch{return!1}return e.test(t)},"satisfies");AQe.exports=nNt});var CQe=H((Kln,yQe)=>{"use strict";d();var iNt=nh(),oNt=s((t,e)=>new iNt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");yQe.exports=oNt});var xQe=H((Xln,vQe)=>{"use strict";d();var sNt=Nd(),aNt=nh(),cNt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new aNt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new sNt(n,r))}),n},"maxSatisfying");vQe.exports=cNt});var bQe=H((tun,EQe)=>{"use strict";d();var lNt=Nd(),uNt=nh(),dNt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new uNt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new lNt(n,r))}),n},"minSatisfying");EQe.exports=dNt});var wQe=H((oun,TQe)=>{"use strict";d();var xge=Nd(),fNt=nh(),IQe=_F(),pNt=s((t,e)=>{t=new fNt(t,e);let r=new xge("0.0.0");if(t.test(r)||(r=new xge("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new xge(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||IQe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||IQe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");TQe.exports=pNt});var _Qe=H((cun,SQe)=>{"use strict";d();var mNt=nh(),hNt=s((t,e)=>{try{return new mNt(t,e).range||"*"}catch{return null}},"validRange");SQe.exports=hNt});var Rz=H((dun,DQe)=>{"use strict";d();var gNt=Nd(),PQe=RF(),{ANY:ANt}=PQe,yNt=nh(),CNt=PF(),RQe=_F(),kQe=Iz(),vNt=wz(),xNt=Tz(),ENt=s((t,e,r,n)=>{t=new gNt(t,n),e=new yNt(e,n);let i,o,a,c,l;switch(r){case">":i=RQe,o=vNt,a=kQe,c=">",l=">=";break;case"<":i=kQe,o=xNt,a=RQe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(CNt(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],p=null,m=null;if(f.forEach(h=>{h.semver===ANt&&(h=new PQe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===c||p.operator===l||(!m.operator||m.operator===c)&&o(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0},"outside");DQe.exports=ENt});var NQe=H((mun,BQe)=>{"use strict";d();var bNt=Rz(),INt=s((t,e,r)=>bNt(t,e,">",r),"gtr");BQe.exports=INt});var LQe=H((Aun,MQe)=>{"use strict";d();var TNt=Rz(),wNt=s((t,e,r)=>TNt(t,e,"<",r),"ltr");MQe.exports=wNt});var QQe=H((vun,OQe)=>{"use strict";d();var FQe=nh(),SNt=s((t,e,r)=>(t=new FQe(t,r),e=new FQe(e,r),t.intersects(e,r)),"intersects");OQe.exports=SNt});var qQe=H((bun,UQe)=>{"use strict";d();var _Nt=PF(),RNt=rh();UQe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((f,p)=>RNt(f,p,r));for(let f of a)_Nt(f,e,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[f,p]of n)f===p?c.push(f):!p&&f===a[0]?c.push("*"):p?f===a[0]?c.push(`<=${p}`):c.push(`${f} - ${p}`):c.push(`>=${f}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var VQe=H((Tun,GQe)=>{"use strict";d();var HQe=nh(),bge=RF(),{ANY:Ege}=bge,DF=PF(),Ige=rh(),kNt=s((t,e,r={})=>{if(t===e)return!0;t=new HQe(t,r),e=new HQe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=DNt(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),PNt=[new bge(">=0.0.0-0")],$Qe=[new bge(">=0.0.0")],DNt=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Ege){if(e.length===1&&e[0].semver===Ege)return!0;r.includePrerelease?t=PNt:t=$Qe}if(e.length===1&&e[0].semver===Ege){if(r.includePrerelease)return!0;e=$Qe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=WQe(i,h,r):h.operator==="<"||h.operator==="<="?o=jQe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=Ige(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!DF(h,String(i),r)||o&&!DF(h,String(o),r))return null;for(let g of e)if(!DF(h,String(g),r))return!1;return!0}let c,l,u,f,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(f=f||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(c=WQe(i,h,r),c===h&&c!==i)return!1}else if(i.operator===">="&&!DF(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=jQe(o,h,r),l===h&&l!==o)return!1}else if(o.operator==="<="&&!DF(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&f&&!i&&a!==0||m||p)},"simpleSubset"),WQe=s((t,e,r)=>{if(!t)return e;let n=Ige(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),jQe=s((t,e,r)=>{if(!t)return e;let n=Ige(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");GQe.exports=kNt});var rB=H((_un,YQe)=>{"use strict";d();var Tge=eB(),zQe=wF(),BNt=Nd(),KQe=uge(),NNt=J2(),MNt=x7e(),LNt=b7e(),FNt=w7e(),ONt=R7e(),QNt=P7e(),UNt=B7e(),qNt=M7e(),HNt=F7e(),$Nt=rh(),WNt=q7e(),jNt=$7e(),GNt=bz(),VNt=V7e(),zNt=K7e(),KNt=_F(),YNt=Iz(),JNt=fge(),XNt=pge(),ZNt=Tz(),e8t=wz(),t8t=mge(),r8t=iQe(),n8t=RF(),i8t=nh(),o8t=PF(),s8t=CQe(),a8t=xQe(),c8t=bQe(),l8t=wQe(),u8t=_Qe(),d8t=Rz(),f8t=NQe(),p8t=LQe(),m8t=QQe(),h8t=qQe(),g8t=VQe();YQe.exports={parse:NNt,valid:MNt,clean:LNt,inc:FNt,diff:ONt,major:QNt,minor:UNt,patch:qNt,prerelease:HNt,compare:$Nt,rcompare:WNt,compareLoose:jNt,compareBuild:GNt,sort:VNt,rsort:zNt,gt:KNt,lt:YNt,eq:JNt,neq:XNt,gte:ZNt,lte:e8t,cmp:t8t,coerce:r8t,Comparator:n8t,Range:i8t,satisfies:o8t,toComparators:s8t,maxSatisfying:a8t,minSatisfying:c8t,minVersion:l8t,validRange:u8t,outside:d8t,gtr:f8t,ltr:p8t,intersects:m8t,simplifyRange:h8t,subset:g8t,SemVer:BNt,re:Tge.re,src:Tge.src,tokens:Tge.t,SEMVER_SPEC_VERSION:zQe.SEMVER_SPEC_VERSION,RELEASE_TYPES:zQe.RELEASE_TYPES,compareIdentifiers:KQe.compareIdentifiers,rcompareIdentifiers:KQe.rcompareIdentifiers}});var XQe=H((kun,JQe)=>{d();var A8t=rB();JQe.exports=A8t.satisfies(process.version,">=15.7.0")});var eUe=H((Dun,ZQe)=>{d();var y8t=rB();ZQe.exports=y8t.satisfies(process.version,">=16.9.0")});var wge=H((Mun,tUe)=>{d();var C8t=XQe(),v8t=eUe(),x8t={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},E8t={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};tUe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=x8t[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(C8t)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=E8t[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(v8t){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var Sge=H((Fun,rUe)=>{d();var b8t=rB();rUe.exports=b8t.satisfies(process.version,"^6.12.0 || >=8.0.0")});var oUe=H((Qun,iUe)=>{d();var Fs=TF(),I8t=ige(),nUe=oge(),T8t=nge(),w8t=age(),S8t=wge(),_8t=Sge(),R8t=pz(),{KeyObject:k8t,createSecretKey:P8t,createPublicKey:D8t}=require("crypto"),_ge=["RS256","RS384","RS512"],B8t=["ES256","ES384","ES512"],Rge=["RS256","RS384","RS512"],N8t=["HS256","HS384","HS512"];_8t&&(_ge.splice(_ge.length,0,"PS256","PS384","PS512"),Rge.splice(Rge.length,0,"PS256","PS384","PS512"));iUe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(f,p){if(f)throw f;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new Fs("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new Fs("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new Fs("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new Fs("jwt must be provided"));if(typeof t!="string")return i(new Fs("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new Fs("jwt malformed"));let c;try{c=T8t(t,{complete:!0})}catch(f){return i(f)}if(!c)return i(new Fs("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new Fs("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(f,p){return p(null,e)},"getSecret");return u(l,function(f,p){if(f)return i(new Fs("error in secret or public key callback: "+f.message));let m=a[2].trim()!=="";if(!m&&p)return i(new Fs("jwt signature is required"));if(m&&!p)return i(new Fs("secret or public key must be provided"));if(!m&&!r.algorithms)return i(new Fs('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof k8t))try{p=D8t(p)}catch{try{p=P8t(typeof p=="string"?Buffer.from(p):p)}catch{return i(new Fs("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=N8t:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=Rge:p.asymmetricKeyType==="ec"?r.algorithms=B8t:r.algorithms=_ge),r.algorithms.indexOf(c.header.alg)===-1)return i(new Fs("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new Fs(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new Fs(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{S8t(l.alg,p)}catch(A){return i(A)}let h;try{h=R8t.verify(t,c.header.alg,p)}catch(A){return i(A)}if(!h)return i(new Fs("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new Fs("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new I8t("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new Fs("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new nUe("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let A=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(b){return A.some(function(S){return S instanceof RegExp?S.test(b):S===b})}))return i(new Fs("jwt audience invalid. expected: "+A.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new Fs("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new Fs("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new Fs("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new Fs("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new Fs("iat required when maxAge is specified"));let A=w8t(r.maxAge,g.iat);if(typeof A>"u")return i(new Fs('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=A+(r.clockTolerance||0))return i(new nUe("maxAge exceeded",new Date(A*1e3)))}if(r.complete===!0){let A=c.signature;return i(null,{header:l,payload:g,signature:A})}return i(null,g)})}});var dUe=H((Hun,uUe)=>{d();var sUe=1/0,cUe=9007199254740991,M8t=17976931348623157e292,aUe=NaN,L8t="[object Arguments]",F8t="[object Function]",O8t="[object GeneratorFunction]",Q8t="[object String]",U8t="[object Symbol]",q8t=/^\s+|\s+$/g,H8t=/^[-+]0x[0-9a-f]+$/i,$8t=/^0b[01]+$/i,W8t=/^0o[0-7]+$/i,j8t=/^(?:0|[1-9]\d*)$/,G8t=parseInt;function V8t(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(V8t,"arrayMap");function z8t(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(z8t,"baseFindIndex");function K8t(t,e,r){if(e!==e)return z8t(t,Y8t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(K8t,"baseIndexOf");function Y8t(t){return t!==t}s(Y8t,"baseIsNaN");function J8t(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s(J8t,"baseTimes");function X8t(t,e){return V8t(e,function(r){return t[r]})}s(X8t,"baseValues");function Z8t(t,e){return function(r){return t(e(r))}}s(Z8t,"overArg");var kz=Object.prototype,Pge=kz.hasOwnProperty,Pz=kz.toString,eMt=kz.propertyIsEnumerable,tMt=Z8t(Object.keys,Object),rMt=Math.max;function nMt(t,e){var r=lUe(t)||cMt(t)?J8t(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||Pge.call(t,o))&&!(i&&(o=="length"||oMt(o,n)))&&r.push(o);return r}s(nMt,"arrayLikeKeys");function iMt(t){if(!sMt(t))return tMt(t);var e=[];for(var r in Object(t))Pge.call(t,r)&&r!="constructor"&&e.push(r);return e}s(iMt,"baseKeys");function oMt(t,e){return e=e??cUe,!!e&&(typeof t=="number"||j8t.test(t))&&t>-1&&t%1==0&&t<e}s(oMt,"isIndex");function sMt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||kz;return t===r}s(sMt,"isPrototype");function aMt(t,e,r,n){t=Dge(t)?t:yMt(t),r=r&&!n?hMt(r):0;var i=t.length;return r<0&&(r=rMt(i+r,0)),fMt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&K8t(t,e,r)>-1}s(aMt,"includes");function cMt(t){return lMt(t)&&Pge.call(t,"callee")&&(!eMt.call(t,"callee")||Pz.call(t)==L8t)}s(cMt,"isArguments");var lUe=Array.isArray;function Dge(t){return t!=null&&dMt(t.length)&&!uMt(t)}s(Dge,"isArrayLike");function lMt(t){return Bge(t)&&Dge(t)}s(lMt,"isArrayLikeObject");function uMt(t){var e=kge(t)?Pz.call(t):"";return e==F8t||e==O8t}s(uMt,"isFunction");function dMt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=cUe}s(dMt,"isLength");function kge(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(kge,"isObject");function Bge(t){return!!t&&typeof t=="object"}s(Bge,"isObjectLike");function fMt(t){return typeof t=="string"||!lUe(t)&&Bge(t)&&Pz.call(t)==Q8t}s(fMt,"isString");function pMt(t){return typeof t=="symbol"||Bge(t)&&Pz.call(t)==U8t}s(pMt,"isSymbol");function mMt(t){if(!t)return t===0?t:0;if(t=gMt(t),t===sUe||t===-sUe){var e=t<0?-1:1;return e*M8t}return t===t?t:0}s(mMt,"toFinite");function hMt(t){var e=mMt(t),r=e%1;return e===e?r?e-r:e:0}s(hMt,"toInteger");function gMt(t){if(typeof t=="number")return t;if(pMt(t))return aUe;if(kge(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=kge(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(q8t,"");var r=$8t.test(t);return r||W8t.test(t)?G8t(t.slice(2),r?2:8):H8t.test(t)?aUe:+t}s(gMt,"toNumber");function AMt(t){return Dge(t)?nMt(t):iMt(t)}s(AMt,"keys");function yMt(t){return t?X8t(t,AMt(t)):[]}s(yMt,"values");uUe.exports=aMt});var pUe=H((jun,fUe)=>{d();var CMt="[object Boolean]",vMt=Object.prototype,xMt=vMt.toString;function EMt(t){return t===!0||t===!1||bMt(t)&&xMt.call(t)==CMt}s(EMt,"isBoolean");function bMt(t){return!!t&&typeof t=="object"}s(bMt,"isObjectLike");fUe.exports=EMt});var yUe=H((zun,AUe)=>{d();var mUe=1/0,IMt=17976931348623157e292,hUe=NaN,TMt="[object Symbol]",wMt=/^\s+|\s+$/g,SMt=/^[-+]0x[0-9a-f]+$/i,_Mt=/^0b[01]+$/i,RMt=/^0o[0-7]+$/i,kMt=parseInt,PMt=Object.prototype,DMt=PMt.toString;function BMt(t){return typeof t=="number"&&t==FMt(t)}s(BMt,"isInteger");function gUe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(gUe,"isObject");function NMt(t){return!!t&&typeof t=="object"}s(NMt,"isObjectLike");function MMt(t){return typeof t=="symbol"||NMt(t)&&DMt.call(t)==TMt}s(MMt,"isSymbol");function LMt(t){if(!t)return t===0?t:0;if(t=OMt(t),t===mUe||t===-mUe){var e=t<0?-1:1;return e*IMt}return t===t?t:0}s(LMt,"toFinite");function FMt(t){var e=LMt(t),r=e%1;return e===e?r?e-r:e:0}s(FMt,"toInteger");function OMt(t){if(typeof t=="number")return t;if(MMt(t))return hUe;if(gUe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gUe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(wMt,"");var r=_Mt.test(t);return r||RMt.test(t)?kMt(t.slice(2),r?2:8):SMt.test(t)?hUe:+t}s(OMt,"toNumber");AUe.exports=BMt});var vUe=H((Jun,CUe)=>{d();var QMt="[object Number]",UMt=Object.prototype,qMt=UMt.toString;function HMt(t){return!!t&&typeof t=="object"}s(HMt,"isObjectLike");function $Mt(t){return typeof t=="number"||HMt(t)&&qMt.call(t)==QMt}s($Mt,"isNumber");CUe.exports=$Mt});var IUe=H((edn,bUe)=>{d();var WMt="[object Object]";function jMt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s(jMt,"isHostObject");function GMt(t,e){return function(r){return t(e(r))}}s(GMt,"overArg");var VMt=Function.prototype,xUe=Object.prototype,EUe=VMt.toString,zMt=xUe.hasOwnProperty,KMt=EUe.call(Object),YMt=xUe.toString,JMt=GMt(Object.getPrototypeOf,Object);function XMt(t){return!!t&&typeof t=="object"}s(XMt,"isObjectLike");function ZMt(t){if(!XMt(t)||YMt.call(t)!=WMt||jMt(t))return!1;var e=JMt(t);if(e===null)return!0;var r=zMt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&EUe.call(r)==KMt}s(ZMt,"isPlainObject");bUe.exports=ZMt});var wUe=H((ndn,TUe)=>{d();var eLt="[object String]",tLt=Object.prototype,rLt=tLt.toString,nLt=Array.isArray;function iLt(t){return!!t&&typeof t=="object"}s(iLt,"isObjectLike");function oLt(t){return typeof t=="string"||!nLt(t)&&iLt(t)&&rLt.call(t)==eLt}s(oLt,"isString");TUe.exports=oLt});var PUe=H((sdn,kUe)=>{d();var sLt="Expected a function",SUe=1/0,aLt=17976931348623157e292,_Ue=NaN,cLt="[object Symbol]",lLt=/^\s+|\s+$/g,uLt=/^[-+]0x[0-9a-f]+$/i,dLt=/^0b[01]+$/i,fLt=/^0o[0-7]+$/i,pLt=parseInt,mLt=Object.prototype,hLt=mLt.toString;function gLt(t,e){var r;if(typeof e!="function")throw new TypeError(sLt);return t=xLt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(gLt,"before");function ALt(t){return gLt(2,t)}s(ALt,"once");function RUe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(RUe,"isObject");function yLt(t){return!!t&&typeof t=="object"}s(yLt,"isObjectLike");function CLt(t){return typeof t=="symbol"||yLt(t)&&hLt.call(t)==cLt}s(CLt,"isSymbol");function vLt(t){if(!t)return t===0?t:0;if(t=ELt(t),t===SUe||t===-SUe){var e=t<0?-1:1;return e*aLt}return t===t?t:0}s(vLt,"toFinite");function xLt(t){var e=vLt(t),r=e%1;return e===e?r?e-r:e:0}s(xLt,"toInteger");function ELt(t){if(typeof t=="number")return t;if(CLt(t))return _Ue;if(RUe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=RUe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(lLt,"");var r=dLt.test(t);return r||fLt.test(t)?pLt(t.slice(2),r?2:8):uLt.test(t)?_Ue:+t}s(ELt,"toNumber");kUe.exports=ALt});var UUe=H((ldn,QUe)=>{d();var DUe=age(),bLt=Sge(),ILt=wge(),BUe=pz(),TLt=dUe(),Dz=pUe(),NUe=yUe(),Nge=vUe(),LUe=IUe(),aT=wUe(),wLt=PUe(),{KeyObject:SLt,createSecretKey:_Lt,createPrivateKey:RLt}=require("crypto"),FUe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];bLt&&FUe.splice(3,0,"PS256","PS384","PS512");var kLt={expiresIn:{isValid:s(function(t){return NUe(t)||aT(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return NUe(t)||aT(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return aT(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:TLt.bind(null,FUe),message:'"algorithm" must be a valid string enum value'},header:{isValid:LUe,message:'"header" must be an object'},encoding:{isValid:aT,message:'"encoding" must be a string'},issuer:{isValid:aT,message:'"issuer" must be a string'},subject:{isValid:aT,message:'"subject" must be a string'},jwtid:{isValid:aT,message:'"jwtid" must be a string'},noTimestamp:{isValid:Dz,message:'"noTimestamp" must be a boolean'},keyid:{isValid:aT,message:'"keyid" must be a string'},mutatePayload:{isValid:Dz,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Dz,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Dz,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},PLt={iat:{isValid:Nge,message:'"iat" should be a number of seconds'},exp:{isValid:Nge,message:'"exp" should be a number of seconds'},nbf:{isValid:Nge,message:'"nbf" should be a number of seconds'}};function OUe(t,e,r,n){if(!LUe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(OUe,"validate");function DLt(t){return OUe(kLt,!1,t,"options")}s(DLt,"validateOptions");function BLt(t){return OUe(PLt,!0,t,"payload")}s(BLt,"validatePayload");var MUe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},NLt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];QUe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof SLt))try{e=RLt(e)}catch{try{e=_Lt(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{BLt(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=NLt.filter(function(f){return typeof r[f]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{DLt(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{ILt(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=DUe(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=DUe(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(MUe).forEach(function(u){let f=MUe[u];if(typeof r[u]<"u"){if(typeof t[f]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+f+'" property.'));t[f]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&wLt(n),BUe.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=BUe.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var HUe=H((fdn,qUe)=>{d();qUe.exports={decode:nge(),verify:oUe(),sign:UUe(),JsonWebTokenError:TF(),NotBeforeError:ige(),TokenExpiredError:oge()}});var uAe=H((GAn,Lqe)=>{d();function N9t(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=sge(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(f){let p,m=null,h,g;function A(...y){if(!A.enabled)return;let E=A,b=Number(new Date),S=b-(p||b);E.diff=S,E.prev=p,E.curr=b,p=b,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let R=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(L,O)=>{if(L==="%%")return"%";R++;let Y=r.formatters[O];if(typeof Y=="function"){let V=y[R];L=Y.call(E,V),y.splice(R,1),R--}return L}),r.formatArgs.call(E,y),(E.log||r.log).apply(E,y)}return s(A,"debug"),A.namespace=f,A.useColors=r.useColors(),A.color=r.selectColor(f),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(f)),g),"get"),set:s(y=>{m=y},"set")}),typeof r.init=="function"&&r.init(A),A}s(r,"createDebug");function n(f,p){let m=r(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}s(n,"extend");function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let p,m=(typeof f=="string"?f:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(f=m[p].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}s(i,"enable");function o(){let f=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),f}s(o,"disable");function a(f){if(f[f.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(f))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(f))return!0;return!1}s(a,"enabled");function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(f){return f instanceof Error?f.stack||f.message:f}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(N9t,"setup");Lqe.exports=N9t});var Fqe=H((Bp,aK)=>{d();Bp.formatArgs=L9t;Bp.save=F9t;Bp.load=O9t;Bp.useColors=M9t;Bp.storage=Q9t();Bp.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Bp.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function M9t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(M9t,"useColors");function L9t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+aK.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(L9t,"formatArgs");Bp.log=console.debug||console.log||(()=>{});function F9t(t){try{t?Bp.storage.setItem("debug",t):Bp.storage.removeItem("debug")}catch{}}s(F9t,"save");function O9t(){let t;try{t=Bp.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(O9t,"load");function Q9t(){try{return localStorage}catch{}}s(Q9t,"localstorage");aK.exports=uAe()(Bp);var{formatters:U9t}=aK.exports;U9t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Qqe=H((JAn,Oqe)=>{"use strict";d();Oqe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Hqe=H((ZAn,qqe)=>{"use strict";d();var q9t=require("os"),Uqe=require("tty"),oh=Qqe(),{env:ou}=process,fT;oh("no-color")||oh("no-colors")||oh("color=false")||oh("color=never")?fT=0:(oh("color")||oh("colors")||oh("color=true")||oh("color=always"))&&(fT=1);"FORCE_COLOR"in ou&&(ou.FORCE_COLOR==="true"?fT=1:ou.FORCE_COLOR==="false"?fT=0:fT=ou.FORCE_COLOR.length===0?1:Math.min(parseInt(ou.FORCE_COLOR,10),3));function dAe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(dAe,"translateLevel");function fAe(t,e){if(fT===0)return 0;if(oh("color=16m")||oh("color=full")||oh("color=truecolor"))return 3;if(oh("color=256"))return 2;if(t&&!e&&fT===void 0)return 0;let r=fT||0;if(ou.TERM==="dumb")return r;if(process.platform==="win32"){let n=q9t.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ou)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ou)||ou.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in ou)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ou.TEAMCITY_VERSION)?1:0;if(ou.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ou){let n=parseInt((ou.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ou.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ou.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ou.TERM)||"COLORTERM"in ou?1:r}s(fAe,"supportsColor");function H9t(t){let e=fAe(t,t&&t.isTTY);return dAe(e)}s(H9t,"getSupportLevel");qqe.exports={supportsColor:H9t,stdout:dAe(fAe(!0,Uqe.isatty(1))),stderr:dAe(fAe(!0,Uqe.isatty(2)))}});var Wqe=H((Yu,lK)=>{d();var $9t=require("tty"),cK=require("util");Yu.init=Y9t;Yu.log=V9t;Yu.formatArgs=j9t;Yu.save=z9t;Yu.load=K9t;Yu.useColors=W9t;Yu.destroy=cK.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Yu.colors=[6,2,3,4,5,1];try{let t=Hqe();t&&(t.stderr||t).level>=2&&(Yu.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Yu.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function W9t(){return"colors"in Yu.inspectOpts?!!Yu.inspectOpts.colors:$9t.isatty(process.stderr.fd)}s(W9t,"useColors");function j9t(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+lK.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=G9t()+e+" "+t[0]}s(j9t,"formatArgs");function G9t(){return Yu.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(G9t,"getDate");function V9t(...t){return process.stderr.write(cK.format(...t)+`
`)}s(V9t,"log");function z9t(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(z9t,"save");function K9t(){return process.env.DEBUG}s(K9t,"load");function Y9t(t){t.inspectOpts={};let e=Object.keys(Yu.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Yu.inspectOpts[e[r]]}s(Y9t,"init");lK.exports=uAe()(Yu);var{formatters:$qe}=lK.exports;$qe.o=function(t){return this.inspectOpts.colors=this.useColors,cK.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};$qe.O=function(t){return this.inspectOpts.colors=this.useColors,cK.inspect(t,this.inspectOpts)}});var SC=H((iyn,pAe)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?pAe.exports=Fqe():pAe.exports=Wqe()});var Vqe=H(C0=>{"use strict";d();var J9t=C0&&C0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),X9t=C0&&C0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jqe=C0&&C0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&J9t(e,t,r);return X9t(e,t),e};Object.defineProperty(C0,"__esModule",{value:!0});C0.req=C0.json=C0.toBuffer=void 0;var Z9t=jqe(require("http")),e6t=jqe(require("https"));async function Gqe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(Gqe,"toBuffer");C0.toBuffer=Gqe;async function t6t(t){let r=(await Gqe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(t6t,"json");C0.json=t6t;function r6t(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?e6t:Z9t).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(r6t,"req");C0.req=r6t});var hAe=H(Np=>{"use strict";d();var Kqe=Np&&Np.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),n6t=Np&&Np.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Yqe=Np&&Np.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Kqe(e,t,r);return n6t(e,t),e},i6t=Np&&Np.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kqe(e,t,r)};Object.defineProperty(Np,"__esModule",{value:!0});Np.Agent=void 0;var o6t=Yqe(require("net")),zqe=Yqe(require("http")),s6t=require("https");i6t(Vqe(),Np);var _C=Symbol("AgentBaseInternalState"),mAe=class extends zqe.Agent{static{s(this,"Agent")}constructor(e){super(e),this[_C]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new o6t.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?s6t.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof zqe.Agent)return c.addRequest(e,i);this[_C].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[_C].currentSocket;if(this[_C].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[_C].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[_C]&&(this[_C].defaultPort=e)}get protocol(){return this[_C].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[_C]&&(this[_C].protocol=e)}};Np.Agent=mAe});var Jqe=H(gB=>{"use strict";d();var a6t=gB&&gB.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gB,"__esModule",{value:!0});gB.parseProxyResponse=void 0;var c6t=a6t(SC()),uK=(0,c6t.default)("https-proxy-agent:parse-proxy-response");function l6t(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let f=t.read();f?u(f):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),uK("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(f){a(),uK("onerror %o",f),r(f)}s(l,"onerror");function u(f){i.push(f),n+=f.length;let p=Buffer.concat(i,n),m=p.indexOf(`\r
\r
`);if(m===-1){uK("have not received end of HTTP headers yet..."),o();return}let h=p.slice(0,m).toString("ascii").split(`\r
`),g=h.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let A=g.split(" "),y=+A[1],E=A.slice(2).join(" "),b={};for(let S of h){if(!S)continue;let R=S.indexOf(":");if(R===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${S}"`));let B=S.slice(0,R).toLowerCase(),L=S.slice(R+1).trimStart(),O=b[B];typeof O=="string"?b[B]=[O,L]:Array.isArray(O)?O.push(L):b[B]=L}uK("got proxy server response: %o %o",g,b),a(),e({connect:{statusCode:y,statusText:E,headers:b},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(l6t,"parseProxyResponse");gB.parseProxyResponse=l6t});var rHe=H(sh=>{"use strict";d();var u6t=sh&&sh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),d6t=sh&&sh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eHe=sh&&sh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&u6t(e,t,r);return d6t(e,t),e},tHe=sh&&sh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sh,"__esModule",{value:!0});sh.HttpsProxyAgent=void 0;var gAe=eHe(require("net")),Xqe=eHe(require("tls")),f6t=tHe(require("assert")),p6t=tHe(SC()),m6t=hAe(),h6t=require("url"),g6t=Jqe(),jF=(0,p6t.default)("https-proxy-agent"),dK=class extends m6t.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new h6t.URL(e):e,this.proxyHeaders=r?.headers??{},jF("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?Zqe(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){jF("Creating `tls.Socket`: %o",this.connectOpts);let m=this.connectOpts.servername||this.connectOpts.host;i=Xqe.connect({...this.connectOpts,servername:m})}else jF("Creating `net.Socket`: %o",this.connectOpts),i=gAe.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=gAe.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(o))c+=`${m}: ${o[m]}\r
`;let l=(0,g6t.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:f}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",A6t),r.secureEndpoint){jF("Upgrading socket connection to TLS");let m=r.servername||r.host;return Xqe.connect({...Zqe(r,"host","path","port"),socket:i,servername:m})}return i}i.destroy();let p=new gAe.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{jF("Replaying proxy buffer for failed request"),(0,f6t.default)(m.listenerCount("data")>0),m.push(f),m.push(null)}),p}};dK.protocols=["http","https"];sh.HttpsProxyAgent=dK;function A6t(t){t.resume()}s(A6t,"resume");function Zqe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(Zqe,"omit")});var oHe=H(ah=>{"use strict";d();var y6t=ah&&ah.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),C6t=ah&&ah.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iHe=ah&&ah.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&y6t(e,t,r);return C6t(e,t),e},v6t=ah&&ah.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ah,"__esModule",{value:!0});ah.HttpProxyAgent=void 0;var x6t=iHe(require("net")),E6t=iHe(require("tls")),b6t=v6t(SC()),I6t=require("events"),T6t=hAe(),nHe=require("url"),AB=(0,b6t.default)("http-proxy-agent"),fK=class extends T6t.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new nHe.URL(e):e,this.proxyHeaders=r?.headers??{},AB("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?w6t(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new nHe.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let f=l[u];f&&e.setHeader(u,f)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;AB("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(AB("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),AB("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(AB("Creating `tls.Socket`: %o",this.connectOpts),o=E6t.connect(this.connectOpts)):(AB("Creating `net.Socket`: %o",this.connectOpts),o=x6t.connect(this.connectOpts)),await(0,I6t.once)(o,"connect"),o}};fK.protocols=["http","https"];ah.HttpProxyAgent=fK;function w6t(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(w6t,"omit")});var PHe=H(_K=>{"use strict";d();Object.defineProperty(_K,"__esModule",{value:!0});_K.state=void 0;_K.state={operationRequestMap:new WeakMap}});function LFt(){try{return VAe.default.statSync("/.dockerenv"),!0}catch{return!1}}function FFt(){try{return VAe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function zAe(){return GAe===void 0&&(GAe=LFt()||FFt()),GAe}var VAe,GAe,GHe=Mm(()=>{d();VAe=Ne(require("node:fs"),1);s(LFt,"hasDockerEnv");s(FFt,"hasDockerCGroup");s(zAe,"isDocker")});function xB(){return KAe===void 0&&(KAe=OFt()||zAe()),KAe}var VHe,KAe,OFt,YAe=Mm(()=>{d();VHe=Ne(require("node:fs"),1);GHe();OFt=s(()=>{try{return VHe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(xB,"isInsideContainer")});var JAe,KHe,YHe,zHe,gT,XAe=Mm(()=>{d();JAe=Ne(require("node:process"),1),KHe=Ne(require("node:os"),1),YHe=Ne(require("node:fs"),1);YAe();zHe=s(()=>{if(JAe.default.platform!=="linux")return!1;if(KHe.default.release().toLowerCase().includes("microsoft"))return!xB();try{return YHe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!xB():!1}catch{return!1}},"isWsl"),gT=JAe.default.env.__IS_WSL_TEST__?zHe:zHe()});var ZAe,JF,QFt,UFt,eye,JHe=Mm(()=>{d();ZAe=Ne(require("node:process"),1),JF=Ne(require("node:fs/promises"),1);XAe();XAe();QFt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await JF.default.access(r,JF.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await JF.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),UFt=s(async()=>`${await QFt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"powerShellPathFromWsl"),eye=s(async()=>gT?UFt():`${ZAe.default.env.SYSTEMROOT||ZAe.default.env.windir||String.raw`C:\Windows`}\\System32\\WindowsPowerShell\\v1.0\\powershell.exe`,"powerShellPath")});function AT(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var XHe=Mm(()=>{d();s(AT,"defineLazyProperty")});async function tye(){if(e$e.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await qFt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var ZHe,e$e,t$e,qFt,r$e=Mm(()=>{d();ZHe=require("node:util"),e$e=Ne(require("node:process"),1),t$e=require("node:child_process"),qFt=(0,ZHe.promisify)(t$e.execFile);s(tye,"defaultBrowserId")});async function o$e(t,{humanReadableOutput:e=!0}={}){if(n$e.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await HFt("osascript",["-e",t,r]);return n.trim()}var n$e,i$e,rye,HFt,s$e=Mm(()=>{d();n$e=Ne(require("node:process"),1),i$e=require("node:util"),rye=require("node:child_process"),HFt=(0,i$e.promisify)(rye.execFile);s(o$e,"runAppleScript")});async function nye(t){return o$e(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var a$e=Mm(()=>{d();s$e();s(nye,"bundleName")});async function iye(t=$Ft){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new kK(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=WFt[n];if(!i)throw new kK(`Unknown browser ID: ${n}`);return i}var c$e,l$e,$Ft,WFt,kK,u$e=Mm(()=>{d();c$e=require("node:util"),l$e=require("node:child_process"),$Ft=(0,c$e.promisify)(l$e.execFile),WFt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},kK=class extends Error{static{s(this,"UnknownBrowserError")}};s(iye,"defaultBrowser")});async function oye(){if(PK.default.platform==="darwin"){let t=await tye();return{name:await nye(t),id:t}}if(PK.default.platform==="linux"){let{stdout:t}=await jFt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:GFt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(PK.default.platform==="win32")return iye();throw new Error("Only macOS, Linux, and Windows are supported")}var d$e,PK,f$e,jFt,GFt,p$e=Mm(()=>{d();d$e=require("node:util"),PK=Ne(require("node:process"),1),f$e=require("node:child_process");r$e();a$e();u$e();jFt=(0,d$e.promisify)(f$e.execFile),GFt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(oye,"defaultBrowser")});var v$e={};xa(v$e,{apps:()=>yT,default:()=>ZF,openApp:()=>YFt});async function zFt(){let t=await eye(),e=String.raw`(Get-ItemProperty -Path "HKCU:\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice").ProgId`,r=cye.Buffer.from(e,"utf16le").toString("base64"),{stdout:n}=await VFt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",BraveHTML:"com.brave.Browser",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function A$e(t){if(typeof t=="string"||Array.isArray(t))return t;let{[h$e]:e}=t;if(!e)throw new Error(`${h$e} is not supported`);return e}function BK({[EB]:t},{wsl:e}){if(e&&gT)return A$e(e);if(!t)throw new Error(`${EB} is not supported`);return A$e(t)}var aye,cye,lye,y$e,C$e,uye,DK,VFt,sye,m$e,EB,h$e,g$e,XF,KFt,YFt,yT,ZF,NK=Mm(()=>{d();aye=Ne(require("node:process"),1),cye=require("node:buffer"),lye=Ne(require("node:path"),1),y$e=require("node:url"),C$e=require("node:util"),uye=Ne(require("node:child_process"),1),DK=Ne(require("node:fs/promises"),1);JHe();XHe();p$e();YAe();VFt=(0,C$e.promisify)(uye.default.execFile),sye=lye.default.dirname((0,y$e.fileURLToPath)(importMetaUrlShim)),m$e=lye.default.join(sye,"xdg-open"),{platform:EB,arch:h$e}=aye.default;s(zFt,"getWindowsDefaultBrowserFromWsl");g$e=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),XF=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return g$e(t.app,c=>XF({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return g$e(e,c=>XF({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","com.brave.Browser":"brave","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",brave:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=gT?await zFt():await oye();if(u.id in c){let f=c[u.id];return e==="browserPrivate"&&r.push(l[f]),XF({...t,app:{name:yT[f],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(EB==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(EB==="win32"||gT&&!xB()&&!e){n=await eye(),i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),gT||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=cye.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!sye||sye==="/",l=!1;try{await DK.default.access(m$e,DK.constants.X_OK),l=!0}catch{}n=aye.default.versions.electron??(EB==="android"||c||!l)?"xdg-open":m$e}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}EB==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=uye.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),KFt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return XF({...e,target:t})},"open"),YFt=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return XF({...e,app:{name:t,arguments:r}})},"openApp");s(A$e,"detectArchBinary");s(BK,"detectPlatformBinary");yT={};AT(yT,"chrome",()=>BK({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));AT(yT,"brave",()=>BK({darwin:"brave browser",win32:"brave",linux:["brave-browser","brave"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe",x64:["/mnt/c/Program Files/BraveSoftware/Brave-Browser/Application/brave.exe","/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe"]}}));AT(yT,"firefox",()=>BK({darwin:"firefox",win32:String.raw`C:\Program Files\Mozilla Firefox\firefox.exe`,linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));AT(yT,"edge",()=>BK({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));AT(yT,"browser",()=>"browser");AT(yT,"browserPrivate",()=>"browserPrivate");ZF=KFt});var z$e=H(NC=>{"use strict";d();Object.defineProperty(NC,"__esModule",{value:!0});NC.bytePairEncode=NC.BinaryMap=NC.binaryMapKey=void 0;var bOt=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");NC.binaryMapKey=bOt;var wye=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,NC.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,NC.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};NC.BinaryMap=wye;var BC=new Int32Array(128),Ef=new Int32Array(128);function IOt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;BC.length<r*2;)Ef=new Int32Array(Ef.length*2),BC=new Int32Array(BC.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),Ef[l]=l,BC[l]=u}Ef[r-1]=r-1,BC[r-1]=2147483647,Ef[r]=r,BC[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let f=e.get(t,Ef[l],Ef[l+u+2]);if(f!==void 0)return f}return 2147483647}for(s(a,"getRank");n!==2147483647;){BC[Ef[i]]=a(i,1),i>0&&(BC[Ef[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)Ef[l]=Ef[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=BC[Ef[l]];BC[Ef[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,Ef[l],Ef[l+1]));return c}s(IOt,"bytePairEncode");NC.bytePairEncode=IOt});var K$e=H(jK=>{"use strict";d();Object.defineProperty(jK,"__esModule",{value:!0});jK.makeTextEncoder=void 0;var Sye=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},_ye=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},TOt=s(()=>typeof Buffer<"u"?new _ye:new Sye,"makeTextEncoder");jK.makeTextEncoder=TOt});var Y$e=H(GK=>{"use strict";d();Object.defineProperty(GK,"__esModule",{value:!0});GK.LRUCache=void 0;var Rye=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new kye(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};GK.LRUCache=Rye;var kye=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var Dye=H(zK=>{"use strict";d();Object.defineProperty(zK,"__esModule",{value:!0});zK.TikTokenizer=void 0;var VK=z$e(),wOt=K$e(),SOt=Y$e();function _Ot(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(_Ot,"loadTikTokenBpe");function ROt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(ROt,"escapeRegExp");var Pye=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,wOt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new SOt.LRUCache(i);let o=typeof e=="string"?_Ot(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new VK.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>ROt(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let f=(0,VK.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of f)r.push(p);this.cache.set(o[0],f)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let f=l[0],p=this.cache.get(f);if(p)if(a+p.length<=o)a+=p.length,c+=f.length,r.push(...p);else{let m=o-a;a+=m,c+=f.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(f),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(f,[h]),a+1<=o)a++,c+=f.length,r.push(h);else break;else{let g=(0,VK.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(f,g),a+g.length<=o){a+=g.length,c+=f.length;for(let A of g)r.push(A)}else{let A=o-a;a+=A,c+=f.length;for(let y=0;y<A;y++)r.push(g[y]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,f;if([u,f]=this.findNextSpecialToken(e,o,n),f>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,f,r,a,c);if(a=p,c=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,A=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(A);){let y=g[0],E=this.cache.get(y);if(E)a+=E.length,c+=y.length,i.push(...E),l.set(a,c);else{let b=this.textEncoder.encode(y),S=this.encoder.get(b);if(S!==void 0)this.cache.set(y,[S]),a++,c+=y.length,i.push(S),l.set(a,c);else{let R=(0,VK.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(y,R),a+=R.length,c+=y.length;for(let B of R)i.push(B);l.set(a,c)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,c+=m[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,f=0,p=0;for(let[m,h]of l)if(m>=u){f=m,p=h;break}if(f>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(f),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};zK.TikTokenizer=Pye});var sWe=H(il=>{"use strict";d();Object.defineProperty(il,"__esModule",{value:!0});il.createTokenizer=il.createByEncoderName=il.createByModelName=il.getRegexByModel=il.getRegexByEncoder=il.getSpecialTokensByModel=il.getSpecialTokensByEncoder=il.MODEL_TO_ENCODING=void 0;var kOt=Dye(),POt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);il.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var KK="<|endoftext|>",J$e="<|fim_prefix|>",X$e="<|fim_middle|>",Z$e="<|fim_suffix|>",eWe="<|endofprompt|>",dO="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",tWe="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",DOt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],rWe=DOt.join("|");function Bye(t){let e="";if(il.MODEL_TO_ENCODING.has(t))e=il.MODEL_TO_ENCODING.get(t);else for(let[r,n]of POt)if(t.startsWith(r)){e=n;break}return e}s(Bye,"getEncoderFromModelName");async function BOt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(BOt,"fetchAndSaveFile");function Nye(t){let e=new Map([[KK,50256]]);switch(t){case"o200k_base":e=new Map([[KK,199999],[eWe,200018]]);break;case"cl100k_base":e=new Map([[KK,100257],[J$e,100258],[X$e,100259],[Z$e,100260],[eWe,100276]]);break;case"p50k_edit":e=new Map([[KK,50256],[J$e,50281],[X$e,50282],[Z$e,50283]]);break;default:break}return e}s(Nye,"getSpecialTokensByEncoder");il.getSpecialTokensByEncoder=Nye;function NOt(t){let e=Bye(t);return Nye(e)}s(NOt,"getSpecialTokensByModel");il.getSpecialTokensByModel=NOt;function nWe(t){switch(t){case"o200k_base":return rWe;case"cl100k_base":return tWe;default:break}return dO}s(nWe,"getRegexByEncoder");il.getRegexByEncoder=nWe;function MOt(t){let e=Bye(t);return nWe(e)}s(MOt,"getRegexByModel");il.getRegexByModel=MOt;async function LOt(t,e=null){return iWe(Bye(t),e)}s(LOt,"createByModelName");il.createByModelName=LOt;async function iWe(t,e=null){let r,n,i=Nye(t);switch(t){case"o200k_base":r=rWe,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=tWe,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=dO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=dO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=dO,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=dO,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await BOt(n,u),console.log(`Saved file to ${u}`)),oWe(u,i,r)}s(iWe,"createByEncoderName");il.createByEncoderName=iWe;function oWe(t,e,r,n=8192){return new kOt.TikTokenizer(t,e,r,n)}s(oWe,"createTokenizer");il.createTokenizer=oWe});var aWe=H(ol=>{"use strict";d();Object.defineProperty(ol,"__esModule",{value:!0});ol.createTokenizer=ol.createByEncoderName=ol.createByModelName=ol.getSpecialTokensByModel=ol.getSpecialTokensByEncoder=ol.getRegexByModel=ol.getRegexByEncoder=ol.MODEL_TO_ENCODING=ol.TikTokenizer=void 0;var FOt=Dye();Object.defineProperty(ol,"TikTokenizer",{enumerable:!0,get:s(function(){return FOt.TikTokenizer},"get")});var vT=sWe();Object.defineProperty(ol,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return vT.MODEL_TO_ENCODING},"get")});Object.defineProperty(ol,"getRegexByEncoder",{enumerable:!0,get:s(function(){return vT.getRegexByEncoder},"get")});Object.defineProperty(ol,"getRegexByModel",{enumerable:!0,get:s(function(){return vT.getRegexByModel},"get")});Object.defineProperty(ol,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return vT.getSpecialTokensByEncoder},"get")});Object.defineProperty(ol,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return vT.getSpecialTokensByModel},"get")});Object.defineProperty(ol,"createByModelName",{enumerable:!0,get:s(function(){return vT.createByModelName},"get")});Object.defineProperty(ol,"createByEncoderName",{enumerable:!0,get:s(function(){return vT.createByEncoderName},"get")});Object.defineProperty(ol,"createTokenizer",{enumerable:!0,get:s(function(){return vT.createTokenizer},"get")})});var $ye=H((RBn,kWe)=>{"use strict";d();kWe.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var DWe=H((DBn,PWe)=>{"use strict";d();var hUt=$ye();function gUt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=hUt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(gUt,"parsePath");PWe.exports=gUt});var OWe=H((MBn,FWe)=>{"use strict";d();var AUt=DWe();function yUt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(yUt,"_interopDefaultLegacy");var CUt=yUt(AUt);function vUt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(vUt,"getAugmentedNamespace");var NWe={},xUt="text/plain",EUt="us-ascii",BWe=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),bUt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),f=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===EUt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return c&&f.push("base64"),(f.length>0||l&&l!==xUt)&&f.unshift(l),`data:${f.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function IUt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return bUt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let f=a.exec(i.pathname);if(!f)break;let p=f[0],m=f.index,h=i.pathname.slice(c,m);l+=h.replace(/\/{2,}/g,"/"),l+=p,c=m+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];BWe(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])BWe(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(IUt,"normalizeUrl");var TUt=Object.freeze({__proto__:null,default:IUt}),wUt=vUt(TUt);Object.defineProperty(NWe,"__esModule",{value:!0});var SUt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_Ut=wUt,RUt=MWe(_Ut),kUt=CUt.default,PUt=MWe(kUt);function MWe(t){return t&&t.__esModule?t:{default:t}}s(MWe,"_interopRequireDefault");var LWe=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":SUt(r))!=="object"&&(r={stripHash:!1}),e=(0,RUt.default)(e,r));var o=(0,PUt.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");LWe.MAX_INPUT_LENGTH=2048;var DUt=NWe.default=LWe;FWe.exports=DUt});var qWe=H((OBn,UWe)=>{"use strict";d();var BUt=$ye();function QWe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=BUt(t);if(t=t.substring(t.indexOf("://")+3),QWe(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(QWe,"isSsh");UWe.exports=QWe});var WWe=H((qBn,$We)=>{"use strict";d();var NUt=OWe(),HWe=qWe();function MUt(t){let e=NUt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),HWe(e.protocols)||e.protocols.length===0&&HWe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(MUt,"gitUp");$We.exports=MUt});var GWe=H((WBn,jWe)=>{"use strict";d();var LUt=WWe();function Wye(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(b){return typeof b=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=LUt(t),i=n.resource.split("."),o=null;switch(n.toString=function(b){return Wye.stringify(this,b)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),f=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:f>0?f-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],f&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var A=o.length>a&&o[a+1]==="-"?a+1:a;o.length>A+2&&["raw","src","blob","tree","edit"].indexOf(o[A+1])>=0&&(n.filepathtype=o[A+1],n.ref=o[A+2],o.length>A+3&&(n.filepath=o.slice(A+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var y=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,E=y.exec(n.pathname);return E!=null&&(n.source="bitbucket-server",E[1]==="users"?n.owner="~"+E[2]:n.owner=E[2],n.organization=n.owner,n.name=E[3],o=E[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=QUt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(Wye,"gitUrlParse");Wye.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?FUt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+OUt(t)+i;default:return t.href}};function FUt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(FUt,"buildToken");function OUt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(OUt,"buildPath");function QUt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(QUt,"findLongestMatchingSubstring");jWe.exports=Wye});var ZWe=H((exports,module)=>{d();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var E=0,b=1;;){var S=t[e++];if(E+=(127&S)*b,b*=128,!(128&S))break}return E}s(n,"_");function i(){var E=n();return UTF8ArrayToString(t,(e+=E)-E,E)}s(i,"n");function o(E,b){if(E)throw new Error(b)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var f=n(),p=0;p<f;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(f=n(),p=0;p<f;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var A=n();A--;){var y=i();256&n()&&u.tlsExports.add(y)}else if(h===4)for(A=n();A--;)i(),y=i(),(3&n())==1&&u.weakImports.add(y);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,f){readAsync(c,p=>u(new Uint8Array(p)),f)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,f)=>e.slice(l,f),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let f=0,p=o.length;f<p;f++)e.includes(o[f])&&i.push(f);let a=C._malloc(SIZE_OF_INT*i.length);for(let f=0,p=i.length;f<p;f++)setValue(a+f*SIZE_OF_INT,i[f],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let f=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,f),f+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let A=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),y=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,E=e.substr(y,100).split(`
`)[0],b,S=E.match(QUERY_WORD_REGEX)[0];switch(A){case 2:b=new RangeError(`Bad node name '${S}'`);break;case 3:b=new RangeError(`Bad field name '${S}'`);break;case 4:b=new RangeError(`Bad capture name @${S}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${y}: '${E}'...`),S="";break;default:b=new SyntaxError(`Bad syntax at offset ${y}: '${E}'...`),S=""}throw b.index=y,b.length=S.length,C._free(n),b}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let A=0;A<a;A++){let y=C._ts_query_capture_name_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");l[A]=UTF8ToString(y,E)}for(let A=0;A<o;A++){let y=C._ts_query_string_value_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");u[A]=UTF8ToString(y,E)}let f=new Array(c),p=new Array(c),m=new Array(c),h=new Array(c),g=new Array(c);for(let A=0;A<c;A++){let y=C._ts_query_predicates_for_pattern(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");h[A]=[],g[A]=[];let b=[],S=y;for(let R=0;R<E;R++){let B=getValue(S,"i32");S+=SIZE_OF_INT;let L=getValue(S,"i32");if(S+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:l[L]});else if(B===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[L]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let O=b[0].value,Y=!0;switch(O){case"not-eq?":Y=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let U=b[1].name,Z=b[2].name;g[A].push(function(J){let j,$;for(let X of J)X.name===U&&(j=X.node),X.name===Z&&($=X.node);return j===void 0||$===void 0||j.text===$.text===Y})}else{let U=b[1].name,Z=b[2].value;g[A].push(function(J){for(let j of J)if(j.name===U)return j.node.text===Z===Y;return!0})}break;case"not-match?":Y=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let V=b[1].name,z=new RegExp(b[2].value);g[A].push(function(U){for(let Z of U)if(Z.name===V)return z.test(Z.node.text)===Y;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');f[A]||(f[A]={}),f[A][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);let Q=O==="is?"?p:m;Q[A]||(Q[A]={}),Q[A][b[1].value]=b[2]?b[2].value:null;break;default:h[A].push({operator:O,operands:b.slice(1)})}b.length=0}}Object.freeze(f[A]),Object.freeze(p[A]),Object.freeze(m[A])}return C._free(n),new Query(INTERNAL,i,l,g,h,Object.freeze(f),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let f=0,p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,A),this.textPredicates[h].every(y=>y(A))){u[f++]={pattern:h,captures:A};let y=this.setProperties[h];y&&(u[m].setProperties=y);let E=this.assertedProperties[h];E&&(u[m].assertedProperties=E);let b=this.refutedProperties[h];b&&(u[m].refutedProperties=b)}}return u.length=f,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let f=[],p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=getValue(p,"i32");if(p+=SIZE_OF_INT,f.length=g,p=unmarshalCaptures(this,e.tree,p,f),this.textPredicates[h].every(y=>y(f))){let y=f[A],E=this.setProperties[h];E&&(y.setProperties=E);let b=this.assertedProperties[h];b&&(y.assertedProperties=b);let S=this.refutedProperties[h];S&&(y.refutedProperties=S),u.push(y)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var kCe=H((JLn,Nje)=>{d();var RCe=require("fs"),HY=require("path"),MO=HY.join,xHt=HY.dirname,Dje=RCe.accessSync&&function(t){try{RCe.accessSync(t)}catch{return!1}return!0}||RCe.existsSync||HY.existsSync,Bje={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function EHt(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(Bje).map(function(l){l in t||(t[l]=Bje[l])}),t.module_root||(t.module_root=bHt(__filename)),HY.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=MO.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s(EHt,"bindings");Nje.exports=EHt;function bHt(t){for(var e=xHt(t),r;;){if(e==="."&&(e=process.cwd()),Dje(MO(e,"dist")))return MO(e,"dist");if(Dje(MO(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=MO(e,"..")}}s(bHt,"getRoot")});var Lje=H((e9n,Mje)=>{d();Mje.exports=kCe()("node_sqlite3.node")});var Qje=H(Oje=>{d();var IHt=require("util");function THt(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return IHt.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=Fje(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+Fje(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(THt,"extendTrace");Oje.extendTrace=THt;function Fje(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(Fje,"filter")});var $je=H((qje,Hje)=>{d();var wHt=require("path"),mh=Lje(),QB=require("events").EventEmitter;Hje.exports=qje=mh;function UB(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new $Y(this,e,r);return t.call(this,i,n)}}s(UB,"normalizeMethod");function DCe(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(DCe,"inherits");mh.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new If(t,e,r);let n;if(t=wHt.resolve(t),!mh.cached.objects[t])n=mh.cached.objects[t]=new If(t,e,r);else{n=mh.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var If=mh.Database,$Y=mh.Statement,PCe=mh.Backup;DCe(If,QB);DCe($Y,QB);DCe(PCe,QB);If.prototype.prepare=UB(function(t,e){return e.length?t.bind.apply(t,e):t});If.prototype.run=UB(function(t,e){return t.run.apply(t,e).finalize(),this});If.prototype.get=UB(function(t,e){return t.get.apply(t,e).finalize(),this});If.prototype.all=UB(function(t,e){return t.all.apply(t,e).finalize(),this});If.prototype.each=UB(function(t,e){return t.each.apply(t,e).finalize(),this});If.prototype.map=UB(function(t,e){return t.map.apply(t,e).finalize(),this});If.prototype.backup=function(){let t;return arguments.length<=2?t=new PCe(this,arguments[0],"main","main",!0,arguments[1]):t=new PCe(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[mh.BUSY,mh.LOCKED],t};$Y.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var Uje=!1,BCe=["trace","profile","change"];If.prototype.addListener=If.prototype.on=function(t){let e=QB.prototype.addListener.apply(this,arguments);return BCe.indexOf(t)>=0&&this.configure(t,!0),e};If.prototype.removeListener=function(t){let e=QB.prototype.removeListener.apply(this,arguments);return BCe.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};If.prototype.removeAllListeners=function(t){let e=QB.prototype.removeAllListeners.apply(this,arguments);return BCe.indexOf(t)>=0&&this.configure(t,!1),e};mh.verbose=function(){if(!Uje){let t=Qje();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(If.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace($Y.prototype,e)}),Uje=!0}return mh}});var rJ=H(cl=>{"use strict";d();Object.defineProperty(cl,"__esModule",{value:!0});cl.thenable=cl.typedArray=cl.stringArray=cl.array=cl.func=cl.error=cl.number=cl.string=cl.boolean=void 0;function _Ht(t){return t===!0||t===!1}s(_Ht,"boolean");cl.boolean=_Ht;function zje(t){return typeof t=="string"||t instanceof String}s(zje,"string");cl.string=zje;function RHt(t){return typeof t=="number"||t instanceof Number}s(RHt,"number");cl.number=RHt;function kHt(t){return t instanceof Error}s(kHt,"error");cl.error=kHt;function Kje(t){return typeof t=="function"}s(Kje,"func");cl.func=Kje;function Yje(t){return Array.isArray(t)}s(Yje,"array");cl.array=Yje;function PHt(t){return Yje(t)&&t.every(e=>zje(e))}s(PHt,"stringArray");cl.stringArray=PHt;function DHt(t,e){return Array.isArray(t)&&t.every(e)}s(DHt,"typedArray");cl.typedArray=DHt;function BHt(t){return t&&Kje(t.then)}s(BHt,"thenable");cl.thenable=BHt});var LCe=H(hh=>{"use strict";d();Object.defineProperty(hh,"__esModule",{value:!0});hh.generateUuid=hh.parse=hh.isUUID=hh.v4=hh.empty=void 0;var OO=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},QO=class t extends OO{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};QO._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];QO._timeHighBits=["8","9","a","b"];hh.empty=new OO("00000000-0000-0000-0000-000000000000");function Jje(){return new QO}s(Jje,"v4");hh.v4=Jje;var NHt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Xje(t){return NHt.test(t)}s(Xje,"isUUID");hh.isUUID=Xje;function MHt(t){if(!Xje(t))throw new Error("invalid uuid");return new OO(t)}s(MHt,"parse");hh.parse=MHt;function LHt(){return Jje().asHex()}s(LHt,"generateUuid");hh.generateUuid=LHt});var Zje=H(PT=>{"use strict";d();Object.defineProperty(PT,"__esModule",{value:!0});PT.attachPartialResult=PT.ProgressFeature=PT.attachWorkDone=void 0;var kT=mi(),FHt=LCe(),yR=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(kT.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(kT.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(kT.WorkDoneProgress.type,this._token,{kind:"end"})}};yR.Instances=new Map;var nJ=class extends yR{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new kT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},UO=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},iJ=class extends UO{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new kT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function OHt(t,e){if(e===void 0||e.workDoneToken===void 0)return new UO;let r=e.workDoneToken;return delete e.workDoneToken,new yR(t,r)}s(OHt,"attachWorkDone");PT.attachWorkDone=OHt;var QHt=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(kT.WorkDoneProgressCancelNotification.type,r=>{let n=yR.Instances.get(r.token);(n instanceof nJ||n instanceof iJ)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new UO:new yR(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,FHt.generateUuid)();return this.connection.sendRequest(kT.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new nJ(this.connection,e))}else return Promise.resolve(new iJ)}},"ProgressFeature");PT.ProgressFeature=QHt;var FCe;(function(t){t.type=new kT.ProgressType})(FCe||(FCe={}));var OCe=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(FCe.type,this._token,e)}};function UHt(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new OCe(t,r)}s(UHt,"attachPartialResult");PT.attachPartialResult=UHt});var eGe=H(oJ=>{"use strict";d();Object.defineProperty(oJ,"__esModule",{value:!0});oJ.ConfigurationFeature=void 0;var qHt=mi(),HHt=rJ(),$Ht=s(t=>class extends t{getConfiguration(e){return e?HHt.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(qHt.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");oJ.ConfigurationFeature=$Ht});var tGe=H(aJ=>{"use strict";d();Object.defineProperty(aJ,"__esModule",{value:!0});aJ.WorkspaceFoldersFeature=void 0;var sJ=mi(),WHt=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new sJ.Emitter,this.connection.onNotification(sJ.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(sJ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(sJ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");aJ.WorkspaceFoldersFeature=WHt});var rGe=H(cJ=>{"use strict";d();Object.defineProperty(cJ,"__esModule",{value:!0});cJ.CallHierarchyFeature=void 0;var QCe=mi(),jHt=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(QCe.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=QCe.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=QCe.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");cJ.CallHierarchyFeature=jHt});var qCe=H(DT=>{"use strict";d();Object.defineProperty(DT,"__esModule",{value:!0});DT.SemanticTokensBuilder=DT.SemanticTokensDiff=DT.SemanticTokensFeature=void 0;var lJ=mi(),GHt=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(lJ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=lJ.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=lJ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=lJ.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");DT.SemanticTokensFeature=GHt;var uJ=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};DT.SemanticTokensDiff=uJ;var UCe=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new uJ(this._prevData,this._data).computeDiff()}:this.build()}};DT.SemanticTokensBuilder=UCe});var nGe=H(dJ=>{"use strict";d();Object.defineProperty(dJ,"__esModule",{value:!0});dJ.ShowDocumentFeature=void 0;var VHt=mi(),zHt=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(VHt.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");dJ.ShowDocumentFeature=zHt});var iGe=H(fJ=>{"use strict";d();Object.defineProperty(fJ,"__esModule",{value:!0});fJ.FileOperationsFeature=void 0;var HB=mi(),KHt=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(HB.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(HB.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(HB.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(HB.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(HB.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(HB.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");fJ.FileOperationsFeature=KHt});var oGe=H(pJ=>{"use strict";d();Object.defineProperty(pJ,"__esModule",{value:!0});pJ.LinkedEditingRangeFeature=void 0;var YHt=mi(),JHt=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(YHt.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");pJ.LinkedEditingRangeFeature=JHt});var sGe=H(mJ=>{"use strict";d();Object.defineProperty(mJ,"__esModule",{value:!0});mJ.TypeHierarchyFeature=void 0;var HCe=mi(),XHt=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(HCe.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=HCe.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=HCe.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");mJ.TypeHierarchyFeature=XHt});var cGe=H(hJ=>{"use strict";d();Object.defineProperty(hJ,"__esModule",{value:!0});hJ.InlineValueFeature=void 0;var aGe=mi(),ZHt=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(aGe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(aGe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");hJ.InlineValueFeature=ZHt});var uGe=H(gJ=>{"use strict";d();Object.defineProperty(gJ,"__esModule",{value:!0});gJ.FoldingRangeFeature=void 0;var lGe=mi(),e$t=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(lGe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=lGe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");gJ.FoldingRangeFeature=e$t});var dGe=H(AJ=>{"use strict";d();Object.defineProperty(AJ,"__esModule",{value:!0});AJ.InlayHintFeature=void 0;var $Ce=mi(),t$t=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest($Ce.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest($Ce.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest($Ce.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");AJ.InlayHintFeature=t$t});var fGe=H(yJ=>{"use strict";d();Object.defineProperty(yJ,"__esModule",{value:!0});yJ.DiagnosticFeature=void 0;var qO=mi(),r$t=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(qO.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(qO.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(qO.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(qO.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(qO.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");yJ.DiagnosticFeature=r$t});var jCe=H(CJ=>{"use strict";d();Object.defineProperty(CJ,"__esModule",{value:!0});CJ.TextDocuments=void 0;var CR=mi(),WCe=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new CR.Emitter,this._onDidOpen=new CR.Emitter,this._onDidClose=new CR.Emitter,this._onDidSave=new CR.Emitter,this._onWillSave=new CR.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=CR.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),CR.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};CJ.TextDocuments=WCe});var VCe=H($B=>{"use strict";d();Object.defineProperty($B,"__esModule",{value:!0});$B.NotebookDocuments=$B.NotebookSyncFeature=void 0;var gh=mi(),pGe=jCe(),n$t=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(gh.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(gh.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(gh.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(gh.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");$B.NotebookSyncFeature=n$t;var vJ=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,gh.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,gh.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,gh.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};vJ.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var GCe=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof pGe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new pGe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new gh.Emitter,this._onDidChange=new gh.Emitter,this._onDidSave=new gh.Emitter,this._onDidClose=new gh.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new vJ,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],f=[],p=[],m=[];if(l.cells!==void 0){let E=l.cells;if(E.structure!==void 0){let b=E.structure.array;if(o.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),E.structure.didOpen!==void 0)for(let S of E.structure.didOpen)r.openTextDocument({textDocument:S}),u.push(S.uri);if(E.structure.didClose)for(let S of E.structure.didClose)r.closeTextDocument({textDocument:S}),f.push(S.uri)}if(E.data!==void 0){let b=new Map(E.data.map(S=>[S.document,S]));for(let S=0;S<=o.cells.length;S++){let R=b.get(o.cells[S].document);if(R!==void 0){let B=o.cells.splice(S,1,R);if(p.push({old:B[0],new:R}),b.delete(R.document),b.size===0)break}}}if(E.textContent!==void 0)for(let b of E.textContent)r.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),m.push(b.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};c&&(h.metadata={old:a,new:o.metadata});let g=[];for(let E of u)g.push(this.getNotebookCell(E));let A=[];for(let E of f)A.push(this.getNotebookCell(E));let y=[];for(let E of m)y.push(this.getNotebookCell(E));(g.length>0||A.length>0||p.length>0||y.length>0)&&(h.cells={added:g,removed:A,changed:{data:p,textContent:y}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),gh.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};$B.NotebookDocuments=GCe});var mGe=H(xJ=>{"use strict";d();Object.defineProperty(xJ,"__esModule",{value:!0});xJ.MonikerFeature=void 0;var i$t=mi(),o$t=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=i$t.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");xJ.MonikerFeature=o$t});var ZCe=H($o=>{"use strict";d();Object.defineProperty($o,"__esModule",{value:!0});$o.createConnection=$o.combineFeatures=$o.combineNotebooksFeatures=$o.combineLanguagesFeatures=$o.combineWorkspaceFeatures=$o.combineWindowFeatures=$o.combineClientFeatures=$o.combineTracerFeatures=$o.combineTelemetryFeatures=$o.combineConsoleFeatures=$o._NotebooksImpl=$o._LanguagesImpl=$o.BulkUnregistration=$o.BulkRegistration=$o.ErrorMessageTracker=void 0;var ar=mi(),Ah=rJ(),KCe=LCe(),fi=Zje(),s$t=eGe(),a$t=tGe(),c$t=rGe(),l$t=qCe(),u$t=nGe(),d$t=iGe(),f$t=oGe(),p$t=sGe(),m$t=cGe(),h$t=uGe(),g$t=dGe(),A$t=fGe(),y$t=VCe(),C$t=mGe();function zCe(t){if(t!==null)return t}s(zCe,"null2Undefined");var YCe=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};$o.ErrorMessageTracker=YCe;var EJ=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(ar.MessageType.Error,e)}warn(e){this.send(ar.MessageType.Warning,e)}info(e){this.send(ar.MessageType.Info,e)}log(e){this.send(ar.MessageType.Log,e)}debug(e){this.send(ar.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(ar.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,ar.RAL)().console.error("Sending log message failed")})}},JCe=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:ar.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(ar.ShowMessageRequest.type,n).then(zCe)}showWarningMessage(e,...r){let n={type:ar.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(ar.ShowMessageRequest.type,n).then(zCe)}showInformationMessage(e,...r){let n={type:ar.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(ar.ShowMessageRequest.type,n).then(zCe)}},hGe=(0,u$t.ShowDocumentFeature)((0,fi.ProgressFeature)(JCe)),gGe;(function(t){function e(){return new bJ}s(e,"create"),t.create=e})(gGe||($o.BulkRegistration=gGe={}));var bJ=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Ah.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=KCe.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},AGe;(function(t){function e(){return new HO(void 0,[])}s(e,"create"),t.create=e})(AGe||($o.BulkUnregistration=AGe={}));var HO=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(ar.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Ah.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(ar.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},IJ=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof bJ?this.registerMany(e):e instanceof HO?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Ah.string(r)?r:r.method,o=KCe.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(ar.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=Ah.string(e)?e:e.method,i=KCe.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(ar.RegistrationRequest.type,o).then(a=>ar.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(ar.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(ar.RegistrationRequest.type,r).then(()=>new HO(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},XCe=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(ar.ApplyWorkspaceEditRequest.type,n)}},yGe=(0,d$t.FileOperationsFeature)((0,a$t.WorkspaceFoldersFeature)((0,s$t.ConfigurationFeature)(XCe))),TJ=class{static{s(this,"TracerImpl")}constructor(){this._trace=ar.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==ar.Trace.Off&&this.connection.sendNotification(ar.LogTraceNotification.type,{message:e,verbose:this._trace===ar.Trace.Verbose?r:void 0}).catch(()=>{})}},wJ=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(ar.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},SJ=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,fi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,fi.attachPartialResult)(this.connection,r)}};$o._LanguagesImpl=SJ;var CGe=(0,h$t.FoldingRangeFeature)((0,C$t.MonikerFeature)((0,A$t.DiagnosticFeature)((0,g$t.InlayHintFeature)((0,m$t.InlineValueFeature)((0,p$t.TypeHierarchyFeature)((0,f$t.LinkedEditingRangeFeature)((0,l$t.SemanticTokensFeature)((0,c$t.CallHierarchyFeature)(SJ))))))))),_J=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,fi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,fi.attachPartialResult)(this.connection,r)}};$o._NotebooksImpl=_J;var vGe=(0,y$t.NotebookSyncFeature)(_J);function xGe(t,e){return function(r){return e(t(r))}}s(xGe,"combineConsoleFeatures");$o.combineConsoleFeatures=xGe;function EGe(t,e){return function(r){return e(t(r))}}s(EGe,"combineTelemetryFeatures");$o.combineTelemetryFeatures=EGe;function bGe(t,e){return function(r){return e(t(r))}}s(bGe,"combineTracerFeatures");$o.combineTracerFeatures=bGe;function IGe(t,e){return function(r){return e(t(r))}}s(IGe,"combineClientFeatures");$o.combineClientFeatures=IGe;function TGe(t,e){return function(r){return e(t(r))}}s(TGe,"combineWindowFeatures");$o.combineWindowFeatures=TGe;function wGe(t,e){return function(r){return e(t(r))}}s(wGe,"combineWorkspaceFeatures");$o.combineWorkspaceFeatures=wGe;function SGe(t,e){return function(r){return e(t(r))}}s(SGe,"combineLanguagesFeatures");$o.combineLanguagesFeatures=SGe;function _Ge(t,e){return function(r){return e(t(r))}}s(_Ge,"combineNotebooksFeatures");$o.combineNotebooksFeatures=_Ge;function v$t(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,xGe),tracer:r(t.tracer,e.tracer,bGe),telemetry:r(t.telemetry,e.telemetry,EGe),client:r(t.client,e.client,IGe),window:r(t.window,e.window,TGe),workspace:r(t.workspace,e.workspace,wGe),languages:r(t.languages,e.languages,SGe),notebooks:r(t.notebooks,e.notebooks,_Ge)}}s(v$t,"combineFeatures");$o.combineFeatures=v$t;function x$t(t,e,r){let n=r&&r.console?new(r.console(EJ)):new EJ,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(TJ)):new TJ,a=r&&r.telemetry?new(r.telemetry(wJ)):new wJ,c=r&&r.client?new(r.client(IJ)):new IJ,l=r&&r.window?new(r.window(hGe)):new hGe,u=r&&r.workspace?new(r.workspace(yGe)):new yGe,f=r&&r.languages?new(r.languages(CGe)):new CGe,p=r&&r.notebooks?new(r.notebooks(vGe)):new vGe,m=[n,o,a,c,l,u,f,p];function h(b){return b instanceof Promise?b:Ah.thenable(b)?new Promise((S,R)=>{b.then(B=>S(B),B=>R(B))}):Promise.resolve(b)}s(h,"asPromise");let g,A,y,E={listen:s(()=>i.listen(),"listen"),sendRequest:s((b,...S)=>i.sendRequest(Ah.string(b)?b:b.method,...S),"sendRequest"),onRequest:s((b,S)=>i.onRequest(b,S),"onRequest"),sendNotification:s((b,S)=>{let R=Ah.string(b)?b:b.method;return i.sendNotification(R,S)},"sendNotification"),onNotification:s((b,S)=>i.onNotification(b,S),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(b=>(A=b,{dispose:s(()=>{A=void 0},"dispose")}),"onInitialize"),onInitialized:s(b=>i.onNotification(ar.InitializedNotification.type,b),"onInitialized"),onShutdown:s(b=>(g=b,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(b=>(y=b,{dispose:s(()=>{y=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return f},get notebooks(){return p},onDidChangeConfiguration:s(b=>i.onNotification(ar.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(b=>i.onNotification(ar.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(b=>i.onNotification(ar.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:s(b=>i.onNotification(ar.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:s(b=>i.onNotification(ar.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:s(b=>i.onNotification(ar.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(b=>i.onRequest(ar.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(b=>i.onNotification(ar.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:s(b=>i.sendNotification(ar.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:s(b=>i.onRequest(ar.HoverRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),void 0)),"onHover"),onCompletion:s(b=>i.onRequest(ar.CompletionRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onCompletion"),onCompletionResolve:s(b=>i.onRequest(ar.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:s(b=>i.onRequest(ar.SignatureHelpRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),void 0)),"onSignatureHelp"),onDeclaration:s(b=>i.onRequest(ar.DeclarationRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onDeclaration"),onDefinition:s(b=>i.onRequest(ar.DefinitionRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onDefinition"),onTypeDefinition:s(b=>i.onRequest(ar.TypeDefinitionRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onTypeDefinition"),onImplementation:s(b=>i.onRequest(ar.ImplementationRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onImplementation"),onReferences:s(b=>i.onRequest(ar.ReferencesRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onReferences"),onDocumentHighlight:s(b=>i.onRequest(ar.DocumentHighlightRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onDocumentHighlight"),onDocumentSymbol:s(b=>i.onRequest(ar.DocumentSymbolRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onDocumentSymbol"),onWorkspaceSymbol:s(b=>i.onRequest(ar.WorkspaceSymbolRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(b=>i.onRequest(ar.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:s(b=>i.onRequest(ar.CodeActionRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onCodeAction"),onCodeActionResolve:s(b=>i.onRequest(ar.CodeActionResolveRequest.type,(S,R)=>b(S,R)),"onCodeActionResolve"),onCodeLens:s(b=>i.onRequest(ar.CodeLensRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onCodeLens"),onCodeLensResolve:s(b=>i.onRequest(ar.CodeLensResolveRequest.type,(S,R)=>b(S,R)),"onCodeLensResolve"),onDocumentFormatting:s(b=>i.onRequest(ar.DocumentFormattingRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(b=>i.onRequest(ar.DocumentRangeFormattingRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(b=>i.onRequest(ar.DocumentOnTypeFormattingRequest.type,(S,R)=>b(S,R)),"onDocumentOnTypeFormatting"),onRenameRequest:s(b=>i.onRequest(ar.RenameRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),void 0)),"onRenameRequest"),onPrepareRename:s(b=>i.onRequest(ar.PrepareRenameRequest.type,(S,R)=>b(S,R)),"onPrepareRename"),onDocumentLinks:s(b=>i.onRequest(ar.DocumentLinkRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onDocumentLinks"),onDocumentLinkResolve:s(b=>i.onRequest(ar.DocumentLinkResolveRequest.type,(S,R)=>b(S,R)),"onDocumentLinkResolve"),onDocumentColor:s(b=>i.onRequest(ar.DocumentColorRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onDocumentColor"),onColorPresentation:s(b=>i.onRequest(ar.ColorPresentationRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onColorPresentation"),onFoldingRanges:s(b=>i.onRequest(ar.FoldingRangeRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onFoldingRanges"),onSelectionRanges:s(b=>i.onRequest(ar.SelectionRangeRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),(0,fi.attachPartialResult)(i,S))),"onSelectionRanges"),onExecuteCommand:s(b=>i.onRequest(ar.ExecuteCommandRequest.type,(S,R)=>b(S,R,(0,fi.attachWorkDone)(i,S),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let b of m)b.attach(E);return i.onRequest(ar.InitializeRequest.type,b=>{e.initialize(b),Ah.string(b.trace)&&(o.trace=ar.Trace.fromString(b.trace));for(let S of m)S.initialize(b.capabilities);if(A){let S=A(b,new ar.CancellationTokenSource().token,(0,fi.attachWorkDone)(i,b),void 0);return h(S).then(R=>{if(R instanceof ar.ResponseError)return R;let B=R;B||(B={capabilities:{}});let L=B.capabilities;L||(L={},B.capabilities=L),L.textDocumentSync===void 0||L.textDocumentSync===null?L.textDocumentSync=Ah.number(E.__textDocumentSync)?E.__textDocumentSync:ar.TextDocumentSyncKind.None:!Ah.number(L.textDocumentSync)&&!Ah.number(L.textDocumentSync.change)&&(L.textDocumentSync.change=Ah.number(E.__textDocumentSync)?E.__textDocumentSync:ar.TextDocumentSyncKind.None);for(let O of m)O.fillServerCapabilities(L);return B})}else{let S={capabilities:{textDocumentSync:ar.TextDocumentSyncKind.None}};for(let R of m)R.fillServerCapabilities(S.capabilities);return S}}),i.onRequest(ar.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new ar.CancellationTokenSource().token)}),i.onNotification(ar.ExitNotification.type,()=>{try{y&&y()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(ar.SetTraceNotification.type,b=>{o.trace=ar.Trace.fromString(b.value)}),E}s(x$t,"createConnection");$o.createConnection=x$t});var RGe=H(I0=>{"use strict";d();Object.defineProperty(I0,"__esModule",{value:!0});I0.resolveModulePath=I0.FileSystem=I0.resolveGlobalYarnPath=I0.resolveGlobalNodePath=I0.resolve=I0.uriToFilePath=void 0;var E$t=require("url"),IA=require("path"),e1e=require("fs"),i1e=require("child_process");function b$t(t){let e=E$t.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return IA.normalize(r.join("/"))}s(b$t,"uriToFilePath");I0.uriToFilePath=b$t;function t1e(){return process.platform==="win32"}s(t1e,"isWindows");function RJ(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(f=>u[f]=l[f]),e&&e1e.existsSync(e)&&(u[i]?u[i]=e+IA.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let f=(0,i1e.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(f.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",m=>{c(m)}),f.on("message",m=>{m.c==="r"&&(f.send({c:"e"}),m.s?a(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};f.send(p)}catch(f){c(f)}})}s(RJ,"resolve");I0.resolve=RJ;function r1e(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};t1e()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,i1e.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?t1e()?IA.join(a,"node_modules"):IA.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(r1e,"resolveGlobalNodePath");I0.resolveGlobalNodePath=r1e;function I$t(t){let e="yarn",r={encoding:"utf8"};t1e()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,i1e.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return IA.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(I$t,"resolveGlobalYarnPath");I0.resolveGlobalYarnPath=I$t;var n1e;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!e1e.existsSync(__filename.toUpperCase())||!e1e.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?IA.normalize(o).indexOf(IA.normalize(i))===0:IA.normalize(o).toLowerCase().indexOf(IA.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(n1e||(I0.FileSystem=n1e={}));function T$t(t,e,r,n){return r?(IA.isAbsolute(r)||(r=IA.join(t,r)),RJ(e,r,r,n).then(i=>n1e.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>RJ(e,r1e(n),t,n))):RJ(e,r1e(n),t,n)}s(T$t,"resolveModulePath");I0.resolveModulePath=T$t});var o1e=H((gFn,kGe)=>{"use strict";d();kGe.exports=mi()});var PGe=H(kJ=>{"use strict";d();Object.defineProperty(kJ,"__esModule",{value:!0});kJ.InlineCompletionFeature=void 0;var w$t=mi(),S$t=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(w$t.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");kJ.InlineCompletionFeature=S$t});var NGe=H(Od=>{"use strict";d();var _$t=Od&&Od.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BGe=Od&&Od.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_$t(e,t,r)};Object.defineProperty(Od,"__esModule",{value:!0});Od.ProposedFeatures=Od.NotebookDocuments=Od.TextDocuments=Od.SemanticTokensBuilder=void 0;var R$t=qCe();Object.defineProperty(Od,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return R$t.SemanticTokensBuilder},"get")});var k$t=PGe();BGe(mi(),Od);var P$t=jCe();Object.defineProperty(Od,"TextDocuments",{enumerable:!0,get:s(function(){return P$t.TextDocuments},"get")});var D$t=VCe();Object.defineProperty(Od,"NotebookDocuments",{enumerable:!0,get:s(function(){return D$t.NotebookDocuments},"get")});BGe(ZCe(),Od);var DGe;(function(t){t.all={__brand:"features",languages:k$t.InlineCompletionFeature}})(DGe||(Od.ProposedFeatures=DGe={}))});var ll=H(yh=>{"use strict";d();var B$t=yh&&yh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OGe=yh&&yh.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&B$t(e,t,r)};Object.defineProperty(yh,"__esModule",{value:!0});yh.createConnection=yh.Files=void 0;var MGe=require("node:util"),s1e=rJ(),N$t=ZCe(),$O=RGe(),vR=o1e();OGe(o1e(),yh);OGe(NGe(),yh);var LGe;(function(t){t.uriToFilePath=$O.uriToFilePath,t.resolveGlobalNodePath=$O.resolveGlobalNodePath,t.resolveGlobalYarnPath=$O.resolveGlobalYarnPath,t.resolve=$O.resolve,t.resolveModulePath=$O.resolveModulePath})(LGe||(yh.Files=LGe={}));var FGe;function PJ(){if(FGe!==void 0)try{FGe.end()}catch{}}s(PJ,"endProtocolConnection");var WB=!1,QGe;function M$t(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(QGe=setInterval(()=>{try{process.kill(n,0)}catch{PJ(),process.exit(WB?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(M$t,"setupExitTimer");M$t();var L$t={initialize:s(t=>{let e=t.processId;s1e.number(e)&&QGe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(WB?0:1)}},3e3)},"initialize"),get shutdownReceived(){return WB},set shutdownReceived(t){WB=t},exit:s(t=>{PJ(),process.exit(t)},"exit")};function F$t(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),vR.ConnectionStrategy.is(t)||vR.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),O$t(o,a,c,i)}s(F$t,"createConnection");yh.createConnection=F$t;function O$t(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,f=process.argv.slice(2);for(let p=0;p<f.length;p++){let m=f[p];if(m==="--node-ipc"){t=new vR.IPCMessageReader(process),e=new vR.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){l=parseInt(f[p+1]);break}else if(m==="--pipe"){u=f[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,vR.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,vR.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(s1e.func(t.read)&&s1e.func(t.on)){let l=t;l.on("end",()=>{PJ(),process.exit(WB?0:1)}),l.on("close",()=>{PJ(),process.exit(WB?0:1)})}let c=s(l=>{let u=(0,vR.createProtocolConnection)(t,e,l,r);return i&&Q$t(l),u},"connectionFactory");return(0,N$t.createConnection)(c,L$t,n)}s(O$t,"_createConnection");function Q$t(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,MGe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,MGe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(Q$t,"patchConsole")});var TA=H((_Fn,UGe)=>{"use strict";d();UGe.exports=ll()});var SKe=H((Oqn,wKe)=>{"use strict";d();wKe.exports=IKe;function IKe(t,e,r){t instanceof RegExp&&(t=bKe(t,r)),e instanceof RegExp&&(e=bKe(e,r));var n=TKe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(IKe,"balanced");function bKe(t,e){var r=e.match(t);return r?r[0]:null}s(bKe,"maybeMatch");IKe.range=TKe;function TKe(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),f=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;f>=0&&!c;)f==l?(n.push(f),l=r.indexOf(t,f+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,f+1)),f=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(TKe,"range")});var MKe=H((qqn,NKe)=>{d();var _Ke=SKe();NKe.exports=kWt;var RKe="\0SLASH"+Math.random()+"\0",kKe="\0OPEN"+Math.random()+"\0",cve="\0CLOSE"+Math.random()+"\0",PKe="\0COMMA"+Math.random()+"\0",DKe="\0PERIOD"+Math.random()+"\0";function ave(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(ave,"numeric");function _Wt(t){return t.split("\\\\").join(RKe).split("\\{").join(kKe).split("\\}").join(cve).split("\\,").join(PKe).split("\\.").join(DKe)}s(_Wt,"escapeBraces");function RWt(t){return t.split(RKe).join("\\").split(kKe).join("{").split(cve).join("}").split(PKe).join(",").split(DKe).join(".")}s(RWt,"unescapeBraces");function BKe(t){if(!t)return[""];var e=[],r=_Ke("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=BKe(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(BKe,"parseCommaParts");function kWt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),e7(_Wt(t),!0).map(RWt)):[]}s(kWt,"expandTop");function PWt(t){return"{"+t+"}"}s(PWt,"embrace");function DWt(t){return/^-?0\d/.test(t)}s(DWt,"isPadded");function BWt(t,e){return t<=e}s(BWt,"lte");function NWt(t,e){return t>=e}s(NWt,"gte");function e7(t,e){var r=[],n=_Ke("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?e7(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),f=l||u,p=n.body.indexOf(",")>=0;if(!f&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+cve+n.post,e7(t)):[t];var m;if(f)m=n.body.split(/\.\./);else if(m=BKe(n.body),m.length===1&&(m=e7(m[0],!1).map(PWt),m.length===1))return o.map(function(z){return n.pre+m[0]+z});var h;if(f){var g=ave(m[0]),A=ave(m[1]),y=Math.max(m[0].length,m[1].length),E=m.length==3?Math.abs(ave(m[2])):1,b=BWt,S=A<g;S&&(E*=-1,b=NWt);var R=m.some(DWt);h=[];for(var B=g;b(B,A);B+=E){var L;if(u)L=String.fromCharCode(B),L==="\\"&&(L="");else if(L=String(B),R){var O=y-L.length;if(O>0){var Y=new Array(O+1).join("0");B<0?L="-"+Y+L.slice(1):L=Y+L}}h.push(L)}}else{h=[];for(var V=0;V<m.length;V++)h.push.apply(h,e7(m[V],!1))}for(var V=0;V<h.length;V++)for(var a=0;a<o.length;a++){var c=i+h[V]+o[a];(!e||f||c)&&r.push(c)}}return r}s(e7,"expand")});var Da=H((fdi,YXe)=>{d();YXe.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Ko=H((mdi,JXe)=>{"use strict";d();var Ja=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Qxe=class extends Ja{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Uxe=class extends Ja{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},qxe=class extends Ja{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Hxe=class extends Ja{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},$xe=class extends Ja{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},Wxe=class extends Ja{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},jxe=class extends Ja{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Aee=class extends Ja{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},Gxe=class extends Aee{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Vxe=class extends Ja{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},zxe=class extends Ja{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Kxe=class extends Ja{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Yxe=class extends Ja{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Jxe=class extends Ja{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Xxe=class extends Ja{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},Zxe=class extends Ja{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},eEe=class extends Ja{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},tEe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},rEe=class extends Ja{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},nEe=class extends Ja{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},iEe=class extends Ja{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},oEe=class extends Ja{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};JXe.exports={AbortError:Aee,HTTPParserError:tEe,UndiciError:Ja,HeadersTimeoutError:Uxe,HeadersOverflowError:qxe,BodyTimeoutError:Hxe,RequestContentLengthMismatchError:zxe,ConnectTimeoutError:Qxe,ResponseStatusCodeError:$xe,InvalidArgumentError:Wxe,InvalidReturnValueError:jxe,RequestAbortedError:Gxe,ClientDestroyedError:Yxe,ClientClosedError:Jxe,InformationalError:Vxe,SocketError:Xxe,NotSupportedError:Zxe,ResponseContentLengthMismatchError:Kxe,BalancedPoolMissingUpstreamError:eEe,ResponseExceededMaxSizeError:rEe,RequestRetryError:nEe,ResponseError:iEe,SecureProxyConnectionError:oEe}});var Cee=H((Adi,XXe)=>{"use strict";d();var yee={},sEe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<sEe.length;++t){let e=sEe[t],r=e.toLowerCase();yee[e]=yee[r]=r}Object.setPrototypeOf(yee,null);XXe.exports={wellknownHeaderNames:sEe,headerNameLowerCasedRecord:yee}});var rZe=H((Cdi,tZe)=>{"use strict";d();var{wellknownHeaderNames:ZXe,headerNameLowerCasedRecord:$zt}=Cee(),aEe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},vee=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new aEe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},eZe=new vee;for(let t=0;t<ZXe.length;++t){let e=$zt[ZXe[t]];eZe.insert(e,e)}tZe.exports={TernarySearchTree:vee,tree:eZe}});var qi=H((Edi,yZe)=>{"use strict";d();var P7=require("node:assert"),{kDestroyed:iZe,kBodyUsed:U3,kListeners:cEe,kBody:nZe}=Da(),{IncomingMessage:Wzt}=require("node:http"),bee=require("node:stream"),jzt=require("node:net"),{Blob:Gzt}=require("node:buffer"),Vzt=require("node:util"),{stringify:zzt}=require("node:querystring"),{EventEmitter:Kzt}=require("node:events"),{InvalidArgumentError:pu}=Ko(),{headerNameLowerCasedRecord:Yzt}=Cee(),{tree:oZe}=rZe(),[Jzt,Xzt]=process.versions.node.split(".").map(t=>Number(t)),Eee=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[nZe]=e,this[U3]=!1}async*[Symbol.asyncIterator](){P7(!this[U3],"disturbed"),this[U3]=!0,yield*this[nZe]}};function Zzt(t){return Iee(t)?(uZe(t)===0&&t.on("data",function(){P7(!1)}),typeof t.readableDidRead!="boolean"&&(t[U3]=!1,Kzt.prototype.on.call(t,"data",function(){this[U3]=!0})),t):t&&typeof t.pipeTo=="function"?new Eee(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&lZe(t)?new Eee(t):t}s(Zzt,"wrapRequestBody");function eKt(){}s(eKt,"nop");function Iee(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(Iee,"isStream");function sZe(t){if(t===null)return!1;if(t instanceof Gzt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(sZe,"isBlobLike");function tKt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=zzt(e);return r&&(t+="?"+r),t}s(tKt,"buildURL");function aZe(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(aZe,"isValidPort");function xee(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(xee,"isHttpOrHttpsPrefixed");function cZe(t){if(typeof t=="string"){if(t=new URL(t),!xee(t.origin||t.protocol))throw new pu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new pu("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&aZe(t.port)===!1)throw new pu("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new pu("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new pu("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new pu("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new pu("Invalid URL origin: the origin must be a string or null/undefined.");if(!xee(t.origin||t.protocol))throw new pu("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!xee(t.origin||t.protocol))throw new pu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(cZe,"parseURL");function rKt(t){if(t=cZe(t),t.pathname!=="/"||t.search||t.hash)throw new pu("invalid url");return t}s(rKt,"parseOrigin");function nKt(t){if(t[0]==="["){let r=t.indexOf("]");return P7(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(nKt,"getHostname");function iKt(t){if(!t)return null;P7(typeof t=="string");let e=nKt(t);return jzt.isIP(e)?"":e}s(iKt,"getServerName");function oKt(t){return JSON.parse(JSON.stringify(t))}s(oKt,"deepClone");function sKt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(sKt,"isAsyncIterable");function lZe(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(lZe,"isIterable");function uZe(t){if(t==null)return 0;if(Iee(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(sZe(t))return t.size!=null?t.size:null;if(pZe(t))return t.byteLength}return null}s(uZe,"bodyLength");function dZe(t){return t&&!!(t.destroyed||t[iZe]||bee.isDestroyed?.(t))}s(dZe,"isDestroyed");function aKt(t,e){t==null||!Iee(t)||dZe(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===Wzt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[iZe]=!0))}s(aKt,"destroy");var cKt=/timeout=(\d+)/;function lKt(t){let e=t.toString().match(cKt);return e?parseInt(e[1],10)*1e3:null}s(lKt,"parseKeepAliveTimeout");function fZe(t){return typeof t=="string"?Yzt[t]??t.toLowerCase():oZe.lookup(t)??t.toString("latin1").toLowerCase()}s(fZe,"headerNameToString");function uKt(t){return oZe.lookup(t)??t.toString("latin1").toLowerCase()}s(uKt,"bufferToLowerCasedHeaderName");function dKt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=fZe(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(dKt,"parseHeaders");function fKt(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(fKt,"parseRawHeaders");function pZe(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(pZe,"isBuffer");function pKt(t,e,r){if(!t||typeof t!="object")throw new pu("handler must be an object");if(typeof t.onConnect!="function")throw new pu("invalid onConnect method");if(typeof t.onError!="function")throw new pu("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new pu("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new pu("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new pu("invalid onHeaders method");if(typeof t.onData!="function")throw new pu("invalid onData method");if(typeof t.onComplete!="function")throw new pu("invalid onComplete method")}}s(pKt,"validateHandler");function mKt(t){return!!(t&&(bee.isDisturbed(t)||t[U3]))}s(mKt,"isDisturbed");function hKt(t){return!!(t&&bee.isErrored(t))}s(hKt,"isErrored");function gKt(t){return!!(t&&bee.isReadable(t))}s(gKt,"isReadable");function AKt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(AKt,"getSocketInfo");function yKt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(yKt,"ReadableStreamFrom");function CKt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(CKt,"isFormDataLike");function vKt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(vKt,"addAbortListener");var xKt=typeof String.prototype.toWellFormed=="function",EKt=typeof String.prototype.isWellFormed=="function";function mZe(t){return xKt?`${t}`.toWellFormed():Vzt.toUSVString(t)}s(mZe,"toUSVString");function bKt(t){return EKt?`${t}`.isWellFormed():mZe(t)===`${t}`}s(bKt,"isUSVString");function hZe(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(hZe,"isTokenCharCode");function IKt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!hZe(t.charCodeAt(e)))return!1;return!0}s(IKt,"isValidHTTPToken");var TKt=/[^\t\x20-\x7e\x80-\xff]/;function wKt(t){return!TKt.test(t)}s(wKt,"isValidHeaderValue");function SKt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(SKt,"parseRangeHeader");function _Kt(t,e,r){return(t[cEe]??=[]).push([e,r]),t.on(e,r),t}s(_Kt,"addListener");function RKt(t){for(let[e,r]of t[cEe]??[])t.removeListener(e,r);t[cEe]=null}s(RKt,"removeAllListeners");function kKt(t,e,r){try{e.onError(r),P7(e.aborted)}catch(n){t.emit("error",n)}}s(kKt,"errorRequest");var gZe=Object.create(null);gZe.enumerable=!0;var lEe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},AZe={...lEe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(lEe,null);Object.setPrototypeOf(AZe,null);yZe.exports={kEnumerableProperty:gZe,nop:eKt,isDisturbed:mKt,isErrored:hKt,isReadable:gKt,toUSVString:mZe,isUSVString:bKt,isBlobLike:sZe,parseOrigin:rKt,parseURL:cZe,getServerName:iKt,isStream:Iee,isIterable:lZe,isAsyncIterable:sKt,isDestroyed:dZe,headerNameToString:fZe,bufferToLowerCasedHeaderName:uKt,addListener:_Kt,removeAllListeners:RKt,errorRequest:kKt,parseRawHeaders:fKt,parseHeaders:dKt,parseKeepAliveTimeout:lKt,destroy:aKt,bodyLength:uZe,deepClone:oKt,ReadableStreamFrom:yKt,isBuffer:pZe,validateHandler:pKt,getSocketInfo:AKt,isFormDataLike:CKt,buildURL:tKt,addAbortListener:vKt,isValidHTTPToken:IKt,isValidHeaderValue:wKt,isTokenCharCode:hZe,parseRangeHeader:SKt,normalizedMethodRecordsBase:lEe,normalizedMethodRecords:AZe,isValidPort:aZe,isHttpOrHttpsPrefixed:xee,nodeMajor:Jzt,nodeMinor:Xzt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:Zzt}});var q3=H((Tdi,vZe)=>{"use strict";d();var rs=require("node:diagnostics_channel"),dEe=require("node:util"),Tee=dEe.debuglog("undici"),uEe=dEe.debuglog("fetch"),ZR=dEe.debuglog("websocket"),CZe=!1,PKt={beforeConnect:rs.channel("undici:client:beforeConnect"),connected:rs.channel("undici:client:connected"),connectError:rs.channel("undici:client:connectError"),sendHeaders:rs.channel("undici:client:sendHeaders"),create:rs.channel("undici:request:create"),bodySent:rs.channel("undici:request:bodySent"),headers:rs.channel("undici:request:headers"),trailers:rs.channel("undici:request:trailers"),error:rs.channel("undici:request:error"),open:rs.channel("undici:websocket:open"),close:rs.channel("undici:websocket:close"),socketError:rs.channel("undici:websocket:socket_error"),ping:rs.channel("undici:websocket:ping"),pong:rs.channel("undici:websocket:pong")};if(Tee.enabled||uEe.enabled){let t=uEe.enabled?uEe:Tee;rs.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),rs.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),rs.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),rs.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),rs.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),rs.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),rs.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),CZe=!0}if(ZR.enabled){if(!CZe){let t=Tee.enabled?Tee:ZR;rs.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),rs.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),rs.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),rs.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}rs.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;ZR("connection opened %s%s",e,r?`:${r}`:"")}),rs.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;ZR("closed connection to %s - %s %s",e.url,r,n)}),rs.channel("undici:websocket:socket_error").subscribe(t=>{ZR("connection errored - %s",t.message)}),rs.channel("undici:websocket:ping").subscribe(t=>{ZR("ping received")}),rs.channel("undici:websocket:pong").subscribe(t=>{ZR("pong received")})}vZe.exports={channels:PKt}});var TZe=H((Sdi,IZe)=>{"use strict";d();var{InvalidArgumentError:Xa,NotSupportedError:DKt}=Ko(),Qx=require("node:assert"),{isValidHTTPToken:bZe,isValidHeaderValue:xZe,isStream:BKt,destroy:NKt,isBuffer:MKt,isFormDataLike:LKt,isIterable:FKt,isBlobLike:OKt,buildURL:QKt,validateHandler:UKt,getServerName:qKt,normalizedMethodRecords:HKt}=qi(),{channels:JC}=q3(),{headerNameLowerCasedRecord:EZe}=Cee(),$Kt=/[^\u0021-\u00ff]/,Lh=Symbol("handler"),fEe=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:f,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:A},y){if(typeof r!="string")throw new Xa("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new Xa("path must be an absolute URL or start with a slash");if($Kt.test(r))throw new Xa("invalid request path");if(typeof n!="string")throw new Xa("method must be a string");if(HKt[n]===void 0&&!bZe(n))throw new Xa("invalid request method");if(u&&typeof u!="string")throw new Xa("upgrade must be a string");if(f!=null&&(!Number.isFinite(f)||f<0))throw new Xa("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new Xa("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new Xa("invalid reset");if(g!=null&&typeof g!="boolean")throw new Xa("invalid expectContinue");if(this.headersTimeout=f,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(BKt(i)){this.body=i;let E=this.body._readableState;(!E||!E.autoDestroy)&&(this.endHandler=s(function(){NKt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(MKt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(LKt(i)||FKt(i)||OKt(i))this.body=i;else throw new Xa("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?QKt(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new Xa("headers array must be even");for(let E=0;E<o.length;E+=2)wee(this,o[E],o[E+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let E of o){if(!Array.isArray(E)||E.length!==2)throw new Xa("headers must be in key-value pair format");wee(this,E[0],E[1])}else{let E=Object.keys(o);for(let b=0;b<E.length;++b)wee(this,E[b],o[E[b]])}else if(o!=null)throw new Xa("headers must be an object or an array");UKt(y,n,u),this.servername=A||qKt(this.host),this[Lh]=y,JC.create.hasSubscribers&&JC.create.publish({request:this})}onBodySent(e){if(this[Lh].onBodySent)try{return this[Lh].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(JC.bodySent.hasSubscribers&&JC.bodySent.publish({request:this}),this[Lh].onRequestSent)try{return this[Lh].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(Qx(!this.aborted),Qx(!this.completed),this.error)e(this.error);else return this.abort=e,this[Lh].onConnect(e)}onResponseStarted(){return this[Lh].onResponseStarted?.()}onHeaders(e,r,n,i){Qx(!this.aborted),Qx(!this.completed),JC.headers.hasSubscribers&&JC.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[Lh].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){Qx(!this.aborted),Qx(!this.completed);try{return this[Lh].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return Qx(!this.aborted),Qx(!this.completed),this[Lh].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),Qx(!this.aborted),this.completed=!0,JC.trailers.hasSubscribers&&JC.trailers.publish({request:this,trailers:e});try{return this[Lh].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),JC.error.hasSubscribers&&JC.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Lh].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return wee(this,e,r),this}};function wee(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new Xa(`invalid ${e} header`);if(r===void 0)return;let n=EZe[e];if(n===void 0&&(n=e.toLowerCase(),EZe[n]===void 0&&!bZe(n)))throw new Xa("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!xZe(r[o]))throw new Xa(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new Xa(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!xZe(r))throw new Xa(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new Xa("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new Xa("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new Xa(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new Xa("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new DKt("expect header not supported");t.headers.push(e,r)}}}s(wee,"processHeader");IZe.exports=fEe});var D7=H((kdi,wZe)=>{"use strict";d();var WKt=require("node:events"),See=class extends WKt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new pEe(this,n)}},pEe=class extends See{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};wZe.exports=See});var j3=H((Bdi,SZe)=>{"use strict";d();var jKt=D7(),{ClientDestroyedError:mEe,ClientClosedError:GKt,InvalidArgumentError:H3}=Ko(),{kDestroy:VKt,kClose:zKt,kClosed:B7,kDestroyed:$3,kDispatch:hEe,kInterceptors:ek}=Da(),Ux=Symbol("onDestroyed"),W3=Symbol("onClosed"),_ee=Symbol("Intercepted Dispatch"),gEe=class extends jKt{static{s(this,"DispatcherBase")}constructor(){super(),this[$3]=!1,this[Ux]=null,this[B7]=!1,this[W3]=[]}get destroyed(){return this[$3]}get closed(){return this[B7]}get interceptors(){return this[ek]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[ek][r]!="function")throw new H3("interceptor must be an function")}this[ek]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new H3("invalid callback");if(this[$3]){queueMicrotask(()=>e(new mEe,null));return}if(this[B7]){this[W3]?this[W3].push(e):queueMicrotask(()=>e(null,null));return}this[B7]=!0,this[W3].push(e);let r=s(()=>{let n=this[W3];this[W3]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[zKt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new H3("invalid callback");if(this[$3]){this[Ux]?this[Ux].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new mEe),this[$3]=!0,this[Ux]=this[Ux]||[],this[Ux].push(r);let n=s(()=>{let i=this[Ux];this[Ux]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[VKt](e).then(()=>{queueMicrotask(n)})}[_ee](e,r){if(!this[ek]||this[ek].length===0)return this[_ee]=this[hEe],this[hEe](e,r);let n=this[hEe].bind(this);for(let i=this[ek].length-1;i>=0;i--)n=this[ek][i](n);return this[_ee]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new H3("handler must be an object");try{if(!e||typeof e!="object")throw new H3("opts must be an object.");if(this[$3]||this[Ux])throw new mEe;if(this[B7])throw new GKt;return this[_ee](e,r)}catch(n){if(typeof r.onError!="function")throw new H3("invalid onError method");return r.onError(n),!1}}};SZe.exports=gEe});var bEe=H((Ldi,PZe)=>{"use strict";d();var G3=0,AEe=1e3,yEe=(AEe>>1)-1,qx,CEe=Symbol("kFastTimer"),Hx=[],vEe=-2,xEe=-1,RZe=0,_Ze=1;function EEe(){G3+=yEe;let t=0,e=Hx.length;for(;t<e;){let r=Hx[t];r._state===RZe?(r._idleStart=G3-yEe,r._state=_Ze):r._state===_Ze&&G3>=r._idleStart+r._idleTimeout&&(r._state=xEe,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===xEe?(r._state=vEe,--e!==0&&(Hx[t]=Hx[e])):++t}Hx.length=e,Hx.length!==0&&kZe()}s(EEe,"onTick");function kZe(){qx?qx.refresh():(clearTimeout(qx),qx=setTimeout(EEe,yEe),qx.unref&&qx.unref())}s(kZe,"refreshTimeout");var Ree=class{static{s(this,"FastTimer")}[CEe]=!0;_state=vEe;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===vEe&&Hx.push(this),(!qx||Hx.length===1)&&kZe(),this._state=RZe}clear(){this._state=xEe,this._idleStart=-1}};PZe.exports={setTimeout(t,e,r){return e<=AEe?setTimeout(t,e,r):new Ree(t,e,r)},clearTimeout(t){t[CEe]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new Ree(t,e,r)},clearFastTimeout(t){t.clear()},now(){return G3},tick(t=0){G3+=t-AEe+1,EEe(),EEe()},reset(){G3=0,Hx.length=0,clearTimeout(qx),qx=null},kFastTimer:CEe}});var N7=H((qdi,LZe)=>{"use strict";d();var KKt=require("node:net"),DZe=require("node:assert"),MZe=qi(),{InvalidArgumentError:YKt,ConnectTimeoutError:JKt}=Ko(),kee=bEe();function BZe(){}s(BZe,"noop");var IEe,TEe;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?TEe=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:TEe=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function XKt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new YKt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new TEe(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:f,protocol:p,port:m,servername:h,localAddress:g,httpSocket:A},y){let E;if(p==="https:"){IEe||(IEe=require("node:tls")),h=h||a.servername||MZe.getServerName(f)||null;let S=h||u;DZe(S);let R=i||c.get(S)||null;m=m||443,E=IEe.connect({highWaterMark:16384,...a,servername:h,session:R,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:A,port:m,host:u}),E.on("session",function(B){c.set(S,B)})}else DZe(!A,"httpSocket can only be sent on TLS update"),m=m||80,E=KKt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let S=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;E.setKeepAlive(!0,S)}let b=ZKt(new WeakRef(E),{timeout:n,hostname:u,port:m});return E.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),y){let S=y;y=null,S(null,this)}}).on("error",function(S){if(queueMicrotask(b),y){let R=y;y=null,R(S)}}),E},"connect")}s(XKt,"buildConnector");var ZKt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return BZe;let r=null,n=null,i=kee.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>NZe(t.deref(),e))})},e.timeout);return()=>{kee.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return BZe;let r=null,n=kee.setFastTimeout(()=>{r=setImmediate(()=>{NZe(t.deref(),e)})},e.timeout);return()=>{kee.clearFastTimeout(n),clearImmediate(r)}};function NZe(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,MZe.destroy(t,new JKt(r))}s(NZe,"onConnectTimeout");LZe.exports=XKt});var FZe=H(Pee=>{"use strict";d();Object.defineProperty(Pee,"__esModule",{value:!0});Pee.enumToMap=void 0;function eYt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(eYt,"enumToMap");Pee.enumToMap=eYt});var OZe=H(zt=>{"use strict";d();Object.defineProperty(zt,"__esModule",{value:!0});zt.SPECIAL_HEADERS=zt.HEADER_STATE=zt.MINOR=zt.MAJOR=zt.CONNECTION_TOKEN_CHARS=zt.HEADER_CHARS=zt.TOKEN=zt.STRICT_TOKEN=zt.HEX=zt.URL_CHAR=zt.STRICT_URL_CHAR=zt.USERINFO_CHARS=zt.MARK=zt.ALPHANUM=zt.NUM=zt.HEX_MAP=zt.NUM_MAP=zt.ALPHA=zt.FINISH=zt.H_METHOD_MAP=zt.METHOD_MAP=zt.METHODS_RTSP=zt.METHODS_ICE=zt.METHODS_HTTP=zt.METHODS=zt.LENIENT_FLAGS=zt.FLAGS=zt.TYPE=zt.ERROR=void 0;var tYt=FZe(),rYt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(rYt=zt.ERROR||(zt.ERROR={}));var nYt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(nYt=zt.TYPE||(zt.TYPE={}));var iYt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(iYt=zt.FLAGS||(zt.FLAGS={}));var oYt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(oYt=zt.LENIENT_FLAGS||(zt.LENIENT_FLAGS={}));var bn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(bn=zt.METHODS||(zt.METHODS={}));zt.METHODS_HTTP=[bn.DELETE,bn.GET,bn.HEAD,bn.POST,bn.PUT,bn.CONNECT,bn.OPTIONS,bn.TRACE,bn.COPY,bn.LOCK,bn.MKCOL,bn.MOVE,bn.PROPFIND,bn.PROPPATCH,bn.SEARCH,bn.UNLOCK,bn.BIND,bn.REBIND,bn.UNBIND,bn.ACL,bn.REPORT,bn.MKACTIVITY,bn.CHECKOUT,bn.MERGE,bn["M-SEARCH"],bn.NOTIFY,bn.SUBSCRIBE,bn.UNSUBSCRIBE,bn.PATCH,bn.PURGE,bn.MKCALENDAR,bn.LINK,bn.UNLINK,bn.PRI,bn.SOURCE];zt.METHODS_ICE=[bn.SOURCE];zt.METHODS_RTSP=[bn.OPTIONS,bn.DESCRIBE,bn.ANNOUNCE,bn.SETUP,bn.PLAY,bn.PAUSE,bn.TEARDOWN,bn.GET_PARAMETER,bn.SET_PARAMETER,bn.REDIRECT,bn.RECORD,bn.FLUSH,bn.GET,bn.POST];zt.METHOD_MAP=tYt.enumToMap(bn);zt.H_METHOD_MAP={};Object.keys(zt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(zt.H_METHOD_MAP[t]=zt.METHOD_MAP[t])});var sYt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(sYt=zt.FINISH||(zt.FINISH={}));zt.ALPHA=[];for(let t=65;t<=90;t++)zt.ALPHA.push(String.fromCharCode(t)),zt.ALPHA.push(String.fromCharCode(t+32));zt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};zt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};zt.NUM=["0","1","2","3","4","5","6","7","8","9"];zt.ALPHANUM=zt.ALPHA.concat(zt.NUM);zt.MARK=["-","_",".","!","~","*","'","(",")"];zt.USERINFO_CHARS=zt.ALPHANUM.concat(zt.MARK).concat(["%",";",":","&","=","+","$",","]);zt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(zt.ALPHANUM);zt.URL_CHAR=zt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)zt.URL_CHAR.push(t);zt.HEX=zt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);zt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(zt.ALPHANUM);zt.TOKEN=zt.STRICT_TOKEN.concat([" "]);zt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&zt.HEADER_CHARS.push(t);zt.CONNECTION_TOKEN_CHARS=zt.HEADER_CHARS.filter(t=>t!==44);zt.MAJOR=zt.NUM_MAP;zt.MINOR=zt.MAJOR;var V3;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(V3=zt.HEADER_STATE||(zt.HEADER_STATE={}));zt.SPECIAL_HEADERS={connection:V3.CONNECTION,"content-length":V3.CONTENT_LENGTH,"proxy-connection":V3.CONNECTION,"transfer-encoding":V3.TRANSFER_ENCODING,upgrade:V3.UPGRADE}});var wEe=H((Kdi,QZe)=>{"use strict";d();var{Buffer:aYt}=require("node:buffer");QZe.exports=aYt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var qZe=H((Jdi,UZe)=>{"use strict";d();var{Buffer:cYt}=require("node:buffer");UZe.exports=cYt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var M7=H((Zdi,KZe)=>{"use strict";d();var HZe=["GET","HEAD","POST"],lYt=new Set(HZe),uYt=[101,204,205,304],$Ze=[301,302,303,307,308],dYt=new Set($Ze),WZe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],fYt=new Set(WZe),jZe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],pYt=new Set(jZe),mYt=["follow","manual","error"],GZe=["GET","HEAD","OPTIONS","TRACE"],hYt=new Set(GZe),gYt=["navigate","same-origin","no-cors","cors"],AYt=["omit","same-origin","include"],yYt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],CYt=["content-encoding","content-language","content-location","content-type","content-length"],vYt=["half"],VZe=["CONNECT","TRACE","TRACK"],xYt=new Set(VZe),zZe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],EYt=new Set(zZe);KZe.exports={subresource:zZe,forbiddenMethods:VZe,requestBodyHeader:CYt,referrerPolicy:jZe,requestRedirect:mYt,requestMode:gYt,requestCredentials:AYt,requestCache:yYt,redirectStatus:$Ze,corsSafeListedMethods:HZe,nullBodyStatus:uYt,safeMethods:GZe,badPorts:WZe,requestDuplex:vYt,subresourceSet:EYt,badPortsSet:fYt,redirectStatusSet:dYt,corsSafeListedMethodsSet:lYt,safeMethodsSet:hYt,forbiddenMethodsSet:xYt,referrerPolicySet:pYt}});var _Ee=H((tfi,YZe)=>{"use strict";d();var SEe=Symbol.for("undici.globalOrigin.1");function bYt(){return globalThis[SEe]}s(bYt,"getGlobalOrigin");function IYt(t){if(t===void 0){Object.defineProperty(globalThis,SEe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,SEe,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(IYt,"setGlobalOrigin");YZe.exports={getGlobalOrigin:bYt,setGlobalOrigin:IYt}});var D0=H((ifi,net)=>{"use strict";d();var Bee=require("node:assert"),TYt=new TextEncoder,L7=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,wYt=/[\u000A\u000D\u0009\u0020]/,SYt=/[\u0009\u000A\u000C\u000D\u0020]/g,_Yt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function RYt(t){Bee(t.protocol==="data:");let e=ZZe(t,!0);e=e.slice(5);let r={position:0},n=z3(",",e,r),i=n.length;if(n=MYt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=eet(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=ret(a);if(a=PYt(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=REe(n);return c==="failure"&&(c=REe("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(RYt,"dataURLProcessor");function ZZe(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(ZZe,"URLSerializer");function Nee(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(Nee,"collectASequenceOfCodePoints");function z3(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(z3,"collectASequenceOfCodePointsFast");function eet(t){let e=TYt.encode(t);return kYt(e)}s(eet,"stringPercentDecode");function JZe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(JZe,"isHexCharByte");function XZe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(XZe,"hexByteToNumber");function kYt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(JZe(t[i+1])&&JZe(t[i+2]))?r[n++]=37:(r[n++]=XZe(t[i+1])<<4|XZe(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(kYt,"percentDecode");function REe(t){t=Dee(t,!0,!0);let e={position:0},r=z3("/",t,e);if(r.length===0||!L7.test(r)||e.position>t.length)return"failure";e.position++;let n=z3(";",t,e);if(n=Dee(n,!1,!0),n.length===0||!L7.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,Nee(u=>wYt.test(u),t,e);let c=Nee(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=tet(t,e,!0),z3(";",t,e);else if(l=z3(";",t,e),l=Dee(l,!1,!0),l.length===0)continue;c.length!==0&&L7.test(c)&&(l.length===0||_Yt.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(REe,"parseMIMEType");function PYt(t){t=t.replace(SYt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(PYt,"forgivingBase64");function tet(t,e,r){let n=e.position,i="";for(Bee(t[e.position]==='"'),e.position++;i+=Nee(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{Bee(o==='"');break}}return r?i:t.slice(n,e.position)}s(tet,"collectAnHTTPQuotedString");function DYt(t){Bee(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",L7.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(DYt,"serializeAMimeType");function BYt(t){return t===13||t===10||t===9||t===32}s(BYt,"isHTTPWhiteSpace");function Dee(t,e=!0,r=!0){return kEe(t,e,r,BYt)}s(Dee,"removeHTTPWhitespace");function NYt(t){return t===13||t===10||t===9||t===12||t===32}s(NYt,"isASCIIWhitespace");function MYt(t,e=!0,r=!0){return kEe(t,e,r,NYt)}s(MYt,"removeASCIIWhitespace");function kEe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(kEe,"removeChars");function ret(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(ret,"isomorphicDecode");function LYt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(LYt,"minimizeSupportedMimeType");net.exports={dataURLProcessor:RYt,URLSerializer:ZZe,collectASequenceOfCodePoints:Nee,collectASequenceOfCodePointsFast:z3,stringPercentDecode:eet,parseMIMEType:REe,collectAnHTTPQuotedString:tet,serializeAMimeType:DYt,removeChars:kEe,removeHTTPWhitespace:Dee,minimizeSupportedMimeType:LYt,HTTP_TOKEN_CODEPOINTS:L7,isomorphicDecode:ret}});var td=H((afi,iet)=>{"use strict";d();var{types:XC,inspect:FYt}=require("node:util"),{markAsUncloneable:OYt}=require("node:worker_threads"),{toUSVString:QYt}=qi(),qt={};qt.converters={};qt.util={};qt.errors={};qt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};qt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return qt.errors.exception({header:t.prefix,message:r})};qt.errors.invalidArgument=function(t){return qt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};qt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};qt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw qt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};qt.illegalConstructor=function(){throw qt.errors.exception({header:"TypeError",message:"Illegal constructor"})};qt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};qt.util.markAsUncloneable=OYt||(()=>{});qt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw qt.errors.exception({header:"Integer conversion",message:`Could not convert ${qt.util.Stringify(t)} to an integer.`});if(a=qt.util.IntegerPart(a),a<o||a>i)throw qt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=qt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};qt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};qt.util.Stringify=function(t){switch(qt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return FYt(t);case"String":return`"${t}"`;default:return`${t}`}};qt.sequenceConverter=function(t){return(e,r,n,i)=>{if(qt.util.Type(e)!=="Object")throw qt.errors.exception({header:r,message:`${n} (${qt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw qt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};qt.recordConverter=function(t,e){return(r,n,i)=>{if(qt.util.Type(r)!=="Object")throw qt.errors.exception({header:n,message:`${i} ("${qt.util.Type(r)}") is not an Object.`});let o={};if(!XC.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),f=e(r[l],n,i);o[u]=f}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),f=e(r[c],n,i);o[u]=f}return o}};qt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw qt.errors.exception({header:r,message:`Expected ${n} ("${qt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};qt.dictionaryConverter=function(t){return(e,r,n)=>{let i=qt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw qt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:f}=a;if(u===!0&&!Object.hasOwn(e,c))throw qt.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=l()),u||m||p!==void 0){if(p=f(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw qt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};qt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};qt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw qt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};qt.converters.ByteString=function(t,e,r){let n=qt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};qt.converters.USVString=QYt;qt.converters.boolean=function(t){return!!t};qt.converters.any=function(t){return t};qt.converters["long long"]=function(t,e,r){return qt.util.ConvertToInt(t,64,"signed",void 0,e,r)};qt.converters["unsigned long long"]=function(t,e,r){return qt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};qt.converters["unsigned long"]=function(t,e,r){return qt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};qt.converters["unsigned short"]=function(t,e,r,n){return qt.util.ConvertToInt(t,16,"unsigned",n,e,r)};qt.converters.ArrayBuffer=function(t,e,r,n){if(qt.util.Type(t)!=="Object"||!XC.isAnyArrayBuffer(t))throw qt.errors.conversionFailed({prefix:e,argument:`${r} ("${qt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&XC.isSharedArrayBuffer(t))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.TypedArray=function(t,e,r,n,i){if(qt.util.Type(t)!=="Object"||!XC.isTypedArray(t)||t.constructor.name!==e.name)throw qt.errors.conversionFailed({prefix:r,argument:`${n} ("${qt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&XC.isSharedArrayBuffer(t.buffer))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.DataView=function(t,e,r,n){if(qt.util.Type(t)!=="Object"||!XC.isDataView(t))throw qt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&XC.isSharedArrayBuffer(t.buffer))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.BufferSource=function(t,e,r,n){if(XC.isAnyArrayBuffer(t))return qt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(XC.isTypedArray(t))return qt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(XC.isDataView(t))return qt.converters.DataView(t,e,r,{...n,allowShared:!1});throw qt.errors.conversionFailed({prefix:e,argument:`${r} ("${qt.util.Stringify(t)}")`,types:["BufferSource"]})};qt.converters["sequence<ByteString>"]=qt.sequenceConverter(qt.converters.ByteString);qt.converters["sequence<sequence<ByteString>>"]=qt.sequenceConverter(qt.converters["sequence<ByteString>"]);qt.converters["record<ByteString, ByteString>"]=qt.recordConverter(qt.converters.ByteString,qt.converters.ByteString);iet.exports={webidl:qt}});var Vp=H((lfi,Cet)=>{"use strict";d();var{Transform:UYt}=require("node:stream"),oet=require("node:zlib"),{redirectStatusSet:qYt,referrerPolicySet:HYt,badPortsSet:$Yt}=M7(),{getGlobalOrigin:set}=_Ee(),{collectASequenceOfCodePoints:tk,collectAnHTTPQuotedString:WYt,removeChars:jYt,parseMIMEType:GYt}=D0(),{performance:VYt}=require("node:perf_hooks"),{isBlobLike:zYt,ReadableStreamFrom:KYt,isValidHTTPToken:aet,normalizedMethodRecordsBase:YYt}=qi(),rk=require("node:assert"),{isUint8Array:JYt}=require("node:util/types"),{webidl:F7}=td(),cet=[],Lee;try{Lee=require("node:crypto");let t=["sha256","sha384","sha512"];cet=Lee.getHashes().filter(e=>t.includes(e))}catch{}function uet(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(uet,"responseURL");function XYt(t,e){if(!qYt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&fet(r)&&(det(r)||(r=ZYt(r)),r=new URL(r,uet(t))),r&&!r.hash&&(r.hash=e),r}s(XYt,"responseLocationURL");function det(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(det,"isValidEncodedURL");function ZYt(t){return Buffer.from(t,"binary").toString("utf8")}s(ZYt,"normalizeBinaryStringToUtf8");function Q7(t){return t.urlList[t.urlList.length-1]}s(Q7,"requestCurrentURL");function eJt(t){let e=Q7(t);return Aet(e)&&$Yt.has(e.port)?"blocked":"allowed"}s(eJt,"requestBadPort");function tJt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(tJt,"isErrorLike");function rJt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(rJt,"isValidReasonPhrase");var nJt=aet;function fet(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(fet,"isValidHeaderValue");function iJt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(HYt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(iJt,"setRequestReferrerPolicyOnRedirect");function oJt(){return"allowed"}s(oJt,"crossOriginResourcePolicyCheck");function sJt(){return"success"}s(sJt,"corsCheck");function aJt(){return"success"}s(aJt,"TAOCheck");function cJt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(cJt,"appendFetchMetadata");function lJt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&DEe(t.origin)&&!DEe(Q7(t))&&(e=null);break;case"same-origin":Fee(t,Q7(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(lJt,"appendRequestOriginHeader");function K3(t,e){return t}s(K3,"coarsenTime");function uJt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:K3(t.domainLookupStartTime,r),domainLookupEndTime:K3(t.domainLookupEndTime,r),connectionStartTime:K3(t.connectionStartTime,r),connectionEndTime:K3(t.connectionEndTime,r),secureConnectionStartTime:K3(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(uJt,"clampAndCoarsenConnectionTimingInfo");function dJt(t){return K3(VYt.now(),t)}s(dJt,"coarsenedSharedCurrentTime");function fJt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(fJt,"createOpaqueTimingInfo");function pet(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(pet,"makePolicyContainer");function pJt(t){return{referrerPolicy:t.referrerPolicy}}s(pJt,"clonePolicyContainer");function mJt(t){let e=t.referrerPolicy;rk(e);let r=null;if(t.referrer==="client"){let c=set();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=PEe(r),i=PEe(r,!0);n.toString().length>4096&&(n=i);let o=Fee(t,n),a=O7(n)&&!O7(t.url);switch(e){case"origin":return i??PEe(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=Q7(t);return Fee(n,c)?n:O7(n)&&!O7(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(mJt,"determineRequestsReferrer");function PEe(t,e){return rk(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(PEe,"stripURLForReferrer");function O7(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(O7,"isURLPotentiallyTrustworthy");function hJt(t,e){if(Lee===void 0)return!0;let r=met(e);if(r==="no metadata"||r.length===0)return!0;let n=AJt(r),i=yJt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=Lee.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),CJt(l,c))return!0}return!1}s(hJt,"bytesMatch");var gJt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function met(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=gJt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();cet.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(met,"parseMetadata");function AJt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(AJt,"getStrongestMetadata");function yJt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(yJt,"filterMetadataListByAlgorithm");function CJt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(CJt,"compareBase64Mixed");function vJt(t){}s(vJt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function Fee(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(Fee,"sameOrigin");function xJt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(xJt,"createDeferredPromise");function EJt(t){return t.controller.state==="aborted"}s(EJt,"isAborted");function bJt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(bJt,"isCancelled");function IJt(t){return YYt[t.toLowerCase()]??t}s(IJt,"normalizeMethod");function TJt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return rk(typeof e=="string"),e}s(TJt,"serializeJavascriptValueToJSONString");var wJt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function het(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:f}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=f;break;case"key+value":p=[u,f];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,wJt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(het,"createIterator");function SJt(t,e,r,n=0,i=1){let o=het(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return F7.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return F7.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return F7.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(F7.brandCheck(this,e),F7.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:f,1:p}of o(this,"key+value"))l.call(u,p,f,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(SJt,"iteratorMixin");async function _Jt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await get(o))}catch(a){i(a)}}s(_Jt,"fullyReadBody");function RJt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(RJt,"isReadableStreamLike");function kJt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(kJt,"readableStreamClose");var PJt=/[^\x00-\xFF]/;function Mee(t){return rk(!PJt.test(t)),t}s(Mee,"isomorphicEncode");async function get(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!JYt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(get,"readAllBytes");function DJt(t){rk("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(DJt,"urlIsLocal");function DEe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(DEe,"urlHasHttpsScheme");function Aet(t){rk("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(Aet,"urlIsHttpHttpsScheme");function BJt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&tk(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&tk(l=>l==="	"||l===" ",r,n);let i=tk(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&tk(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&tk(l=>l==="	"||l===" ",r,n);let a=tk(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(BJt,"simpleRangeHeaderValue");function NJt(t,e,r){let n="bytes ";return n+=Mee(`${t}`),n+="-",n+=Mee(`${e}`),n+="/",n+=Mee(`${r}`),n}s(NJt,"buildContentRange");var BEe=class extends UYt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?oet.createInflate(this.#e):oet.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function MJt(t){return new BEe(t)}s(MJt,"createInflate");function LJt(t){let e=null,r=null,n=null,i=yet("content-type",t);if(i===null)return"failure";for(let o of i){let a=GYt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(LJt,"extractMimeType");function FJt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=tk(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=WYt(e,r),r.position<e.length)continue}else rk(e.charCodeAt(r.position)===44),r.position++;i=jYt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(FJt,"gettingDecodingSplitting");function yet(t,e){let r=e.get(t,!0);return r===null?null:FJt(r)}s(yet,"getDecodeSplit");var OJt=new TextDecoder;function QJt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),OJt.decode(t))}s(QJt,"utf8DecodeBytes");var NEe=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return set()}get origin(){return this.baseUrl?.origin}policyContainer=pet()},MEe=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new NEe},UJt=new MEe;Cet.exports={isAborted:EJt,isCancelled:bJt,isValidEncodedURL:det,createDeferredPromise:xJt,ReadableStreamFrom:KYt,tryUpgradeRequestToAPotentiallyTrustworthyURL:vJt,clampAndCoarsenConnectionTimingInfo:uJt,coarsenedSharedCurrentTime:dJt,determineRequestsReferrer:mJt,makePolicyContainer:pet,clonePolicyContainer:pJt,appendFetchMetadata:cJt,appendRequestOriginHeader:lJt,TAOCheck:aJt,corsCheck:sJt,crossOriginResourcePolicyCheck:oJt,createOpaqueTimingInfo:fJt,setRequestReferrerPolicyOnRedirect:iJt,isValidHTTPToken:aet,requestBadPort:eJt,requestCurrentURL:Q7,responseURL:uet,responseLocationURL:XYt,isBlobLike:zYt,isURLPotentiallyTrustworthy:O7,isValidReasonPhrase:rJt,sameOrigin:Fee,normalizeMethod:IJt,serializeJavascriptValueToJSONString:TJt,iteratorMixin:SJt,createIterator:het,isValidHeaderName:nJt,isValidHeaderValue:fet,isErrorLike:tJt,fullyReadBody:_Jt,bytesMatch:hJt,isReadableStreamLike:RJt,readableStreamClose:kJt,isomorphicEncode:Mee,urlIsLocal:DJt,urlHasHttpsScheme:DEe,urlIsHttpHttpsScheme:Aet,readAllBytes:get,simpleRangeHeaderValue:BJt,buildContentRange:NJt,parseMetadata:met,createInflate:MJt,extractMimeType:LJt,getDecodeSplit:yet,utf8DecodeBytes:QJt,environmentSettingsObject:UJt}});var ew=H((ffi,vet)=>{"use strict";d();vet.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var FEe=H((mfi,xet)=>{"use strict";d();var{Blob:qJt,File:HJt}=require("node:buffer"),{kState:$x}=ew(),{webidl:ZC}=td(),LEe=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[$x]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return ZC.brandCheck(this,t),this[$x].blobLike.stream(...e)}arrayBuffer(...e){return ZC.brandCheck(this,t),this[$x].blobLike.arrayBuffer(...e)}slice(...e){return ZC.brandCheck(this,t),this[$x].blobLike.slice(...e)}text(...e){return ZC.brandCheck(this,t),this[$x].blobLike.text(...e)}get size(){return ZC.brandCheck(this,t),this[$x].blobLike.size}get type(){return ZC.brandCheck(this,t),this[$x].blobLike.type}get name(){return ZC.brandCheck(this,t),this[$x].name}get lastModified(){return ZC.brandCheck(this,t),this[$x].lastModified}get[Symbol.toStringTag](){return"File"}};ZC.converters.Blob=ZC.interfaceConverter(qJt);function $Jt(t){return t instanceof HJt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s($Jt,"isFileLike");xet.exports={FileLike:LEe,isFileLike:$Jt}});var q7=H((Afi,wet)=>{"use strict";d();var{isBlobLike:Oee,iteratorMixin:WJt}=Vp(),{kState:Pf}=ew(),{kEnumerableProperty:Y3}=qi(),{FileLike:Eet,isFileLike:jJt}=FEe(),{webidl:Us}=td(),{File:Tet}=require("node:buffer"),bet=require("node:util"),Iet=globalThis.File??Tet,U7=class t{static{s(this,"FormData")}constructor(e){if(Us.util.markAsUncloneable(this),e!==void 0)throw Us.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Pf]=[]}append(e,r,n=void 0){Us.brandCheck(this,t);let i="FormData.append";if(Us.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Oee(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Us.converters.USVString(e,i,"name"),r=Oee(r)?Us.converters.Blob(r,i,"value",{strict:!1}):Us.converters.USVString(r,i,"value"),n=arguments.length===3?Us.converters.USVString(n,i,"filename"):void 0;let o=OEe(e,r,n);this[Pf].push(o)}delete(e){Us.brandCheck(this,t);let r="FormData.delete";Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name"),this[Pf]=this[Pf].filter(n=>n.name!==e)}get(e){Us.brandCheck(this,t);let r="FormData.get";Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name");let n=this[Pf].findIndex(i=>i.name===e);return n===-1?null:this[Pf][n].value}getAll(e){Us.brandCheck(this,t);let r="FormData.getAll";return Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name"),this[Pf].filter(n=>n.name===e).map(n=>n.value)}has(e){Us.brandCheck(this,t);let r="FormData.has";return Us.argumentLengthCheck(arguments,1,r),e=Us.converters.USVString(e,r,"name"),this[Pf].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Us.brandCheck(this,t);let i="FormData.set";if(Us.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Oee(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Us.converters.USVString(e,i,"name"),r=Oee(r)?Us.converters.Blob(r,i,"name",{strict:!1}):Us.converters.USVString(r,i,"name"),n=arguments.length===3?Us.converters.USVString(n,i,"name"):void 0;let o=OEe(e,r,n),a=this[Pf].findIndex(c=>c.name===e);a!==-1?this[Pf]=[...this[Pf].slice(0,a),o,...this[Pf].slice(a+1).filter(c=>c.name!==e)]:this[Pf].push(o)}[bet.inspect.custom](e,r){let n=this[Pf].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=bet.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};WJt("FormData",U7,Pf,"name","value");Object.defineProperties(U7.prototype,{append:Y3,delete:Y3,get:Y3,getAll:Y3,has:Y3,set:Y3,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function OEe(t,e,r){if(typeof e!="string"){if(jJt(e)||(e=e instanceof Blob?new Iet([e],"blob",{type:e.type}):new Eet(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof Tet?new Iet([e],r,n):new Eet(e,r,n)}}return{name:t,value:e}}s(OEe,"makeEntry");wet.exports={FormData:U7,makeEntry:OEe}});var Bet=H((vfi,Det)=>{"use strict";d();var{isUSVString:_et,bufferToLowerCasedHeaderName:GJt}=qi(),{utf8DecodeBytes:VJt}=Vp(),{HTTP_TOKEN_CODEPOINTS:zJt,isomorphicDecode:Ret}=D0(),{isFileLike:KJt}=FEe(),{makeEntry:YJt}=q7(),Qee=require("node:assert"),{File:JJt}=require("node:buffer"),XJt=globalThis.File??JJt,ZJt=Buffer.from('form-data; name="'),ket=Buffer.from("; filename"),eXt=Buffer.from("--"),tXt=Buffer.from(`--\r
`);function rXt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(rXt,"isAsciiString");function nXt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(nXt,"validateBoundary");function iXt(t,e){Qee(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&Uee(t,eXt,o)||o.position===t.length-4&&Uee(t,tXt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=oXt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:f,encoding:p}=c;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(f??="text/plain",rXt(f)||(f=""),h=new XJt([m],u,{type:f})):h=VJt(Buffer.from(m)),Qee(_et(l)),Qee(typeof h=="string"&&_et(h)||KJt(h)),i.push(YJt(l,h,u))}}s(iXt,"multipartFormDataParser");function oXt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=J3(c=>c!==10&&c!==13&&c!==58,t,e);if(a=QEe(a,!0,!0,c=>c===9||c===32),!zJt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,J3(c=>c===32||c===9,t,e),GJt(a)){case"content-disposition":{if(r=n=null,!Uee(t,ZJt,e)||(e.position+=17,r=Pet(t,e),r===null))return"failure";if(Uee(t,ket,e)){let c=e.position+ket.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=Pet(t,e),n===null))return"failure"}break}case"content-type":{let c=J3(l=>l!==10&&l!==13,t,e);c=QEe(c,!1,!0,l=>l===9||l===32),i=Ret(c);break}case"content-transfer-encoding":{let c=J3(l=>l!==10&&l!==13,t,e);c=QEe(c,!1,!0,l=>l===9||l===32),o=Ret(c);break}default:J3(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(oXt,"parseMultipartFormDataHeaders");function Pet(t,e){Qee(t[e.position-1]===34);let r=J3(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(Pet,"parseMultipartFormDataName");function J3(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(J3,"collectASequenceOfBytes");function QEe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(QEe,"removeChars");function Uee(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(Uee,"bufferStartsWith");Det.exports={multipartFormDataParser:iXt,validateBoundary:nXt}});var eN=H((bfi,qet)=>{"use strict";d();var H7=qi(),{ReadableStreamFrom:sXt,isBlobLike:Net,isReadableStreamLike:aXt,readableStreamClose:cXt,createDeferredPromise:lXt,fullyReadBody:uXt,extractMimeType:dXt,utf8DecodeBytes:Fet}=Vp(),{FormData:Met}=q7(),{kState:Z3}=ew(),{webidl:fXt}=td(),{Blob:pXt}=require("node:buffer"),UEe=require("node:assert"),{isErrored:Oet,isDisturbed:mXt}=require("node:stream"),{isArrayBuffer:hXt}=require("node:util/types"),{serializeAMimeType:gXt}=D0(),{multipartFormDataParser:AXt}=Bet(),qEe;try{let t=require("node:crypto");qEe=s(e=>t.randomInt(0,e),"random")}catch{qEe=s(t=>Math.floor(Math.random(t)),"random")}var qee=new TextEncoder;function yXt(){}s(yXt,"noop");var HEe=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,$Ee;HEe&&($Ee=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!mXt(e)&&!Oet(e)&&e.cancel("Response object has been garbage collected").catch(yXt)}));function Qet(t,e=!1){let r=null;t instanceof ReadableStream?r=t:Net(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?qee.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>cXt(l))},start(){},type:"bytes"}),UEe(aXt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(hXt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(H7.isFormDataLike(t)){let l=`----formdata-undici-0${`${qEe(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let f=s(y=>y.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(y=>y.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[y,E]of t)if(typeof E=="string"){let b=qee.encode(u+`; name="${f(p(y))}"\r
\r
${p(E)}\r
`);m.push(b),o+=b.byteLength}else{let b=qee.encode(`${u}; name="${f(p(y))}"`+(E.name?`; filename="${f(E.name)}"`:"")+`\r
Content-Type: ${E.type||"application/octet-stream"}\r
\r
`);m.push(b,E,h),typeof E.size=="number"?o+=b.byteLength+E.size+h.byteLength:g=!0}let A=qee.encode(`--${l}--\r
`);m.push(A),o+=A.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let y of m)y.stream?yield*y.stream():yield y},"action"),a=`multipart/form-data; boundary=${l}`}else if(Net(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(H7.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:sXt(t)}if((typeof i=="string"||H7.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:f,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!Oet(r)){let m=new Uint8Array(f);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(Qet,"extractBody");function CXt(t,e=!1){return t instanceof ReadableStream&&(UEe(!H7.isDisturbed(t),"The body has already been consumed."),UEe(!t.locked,"The stream is locked.")),Qet(t,e)}s(CXt,"safelyExtractBody");function vXt(t,e){let[r,n]=e.stream.tee();return HEe&&$Ee.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(vXt,"cloneBody");function xXt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(xXt,"throwIfAborted");function EXt(t){return{blob(){return X3(this,r=>{let n=Let(this);return n===null?n="":n&&(n=gXt(n)),new pXt([r],{type:n})},t)},arrayBuffer(){return X3(this,r=>new Uint8Array(r).buffer,t)},text(){return X3(this,Fet,t)},json(){return X3(this,IXt,t)},formData(){return X3(this,r=>{let n=Let(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=AXt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new Met;return o[Z3]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new Met;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return X3(this,r=>new Uint8Array(r),t)}}}s(EXt,"bodyMixinMethods");function bXt(t){Object.assign(t.prototype,EXt(t))}s(bXt,"mixinBody");async function X3(t,e,r){if(fXt.brandCheck(t,r),Uet(t))throw new TypeError("Body is unusable: Body has already been read");xXt(t[Z3]);let n=lXt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[Z3].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await uXt(t[Z3].body,o,i),n.promise)}s(X3,"consumeBody");function Uet(t){let e=t[Z3].body;return e!=null&&(e.stream.locked||H7.isDisturbed(e.stream))}s(Uet,"bodyUnusable");function IXt(t){return JSON.parse(Fet(t))}s(IXt,"parseJSONFromBytes");function Let(t){let e=t[Z3].headersList,r=dXt(e);return r==="failure"?null:r}s(Let,"bodyMimeType");qet.exports={extractBody:Qet,safelyExtractBody:CXt,cloneBody:vXt,mixinBody:bXt,streamRegistry:$Ee,hasFinalizationRegistry:HEe,bodyUnusable:Uet}});var Xet=H((wfi,Jet)=>{"use strict";d();var Bn=require("node:assert"),li=qi(),{channels:Het}=q3(),WEe=bEe(),{RequestContentLengthMismatchError:nk,ResponseContentLengthMismatchError:TXt,RequestAbortedError:zet,HeadersTimeoutError:wXt,HeadersOverflowError:SXt,SocketError:Vee,InformationalError:tN,BodyTimeoutError:_Xt,HTTPParserError:RXt,ResponseExceededMaxSizeError:kXt}=Ko(),{kUrl:Ket,kReset:B0,kClient:zEe,kParser:dc,kBlocking:j7,kRunning:Ud,kPending:PXt,kSize:$et,kWriting:rw,kQueue:FA,kNoRef:$7,kKeepAliveDefaultTimeout:DXt,kHostHeader:BXt,kPendingIdx:NXt,kRunningIdx:Fh,kError:Oh,kPipelining:jee,kSocket:rN,kKeepAliveTimeoutValue:zee,kMaxHeadersSize:jEe,kKeepAliveMaxTimeout:MXt,kKeepAliveTimeoutThreshold:LXt,kHeadersTimeout:FXt,kBodyTimeout:OXt,kStrictContentLength:KEe,kMaxRequests:Wet,kCounter:QXt,kMaxResponseSize:UXt,kOnError:qXt,kResume:tw,kHTTPContext:Yet}=Da(),e1=OZe(),HXt=Buffer.alloc(0),Hee=Buffer[Symbol.species],$ee=li.addListener,$Xt=li.removeAllListeners,GEe;async function WXt(){let t=process.env.JEST_WORKER_ID?wEe():void 0,e;try{e=await WebAssembly.compile(qZe())}catch{e=await WebAssembly.compile(t||wEe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{Bn(Ol.ptr===r);let o=n-r1+t1.byteOffset;return Ol.onStatus(new Hee(t1.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(Bn(Ol.ptr===r),Ol.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{Bn(Ol.ptr===r);let o=n-r1+t1.byteOffset;return Ol.onHeaderField(new Hee(t1.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{Bn(Ol.ptr===r);let o=n-r1+t1.byteOffset;return Ol.onHeaderValue(new Hee(t1.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(Bn(Ol.ptr===r),Ol.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{Bn(Ol.ptr===r);let o=n-r1+t1.byteOffset;return Ol.onBody(new Hee(t1.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(Bn(Ol.ptr===r),Ol.onMessageComplete()||0),"wasm_on_message_complete")}})}s(WXt,"lazyllhttp");var VEe=null,YEe=WXt();YEe.catch();var Ol=null,t1=null,Wee=0,r1=null,jXt=0,W7=1,nN=2|W7,Gee=4|W7,JEe=8|jXt,XEe=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){Bn(Number.isFinite(e[jEe])&&e[jEe]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(e1.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[jEe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[UXt]}setTimeout(e,r){e!==this.timeoutValue||r&W7^this.timeoutType&W7?(this.timeout&&(WEe.clearTimeout(this.timeout),this.timeout=null),e&&(r&W7?this.timeout=WEe.setFastTimeout(jet,e,new WeakRef(this)):(this.timeout=setTimeout(jet,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Bn(this.ptr!=null),Bn(Ol==null),this.llhttp.llhttp_resume(this.ptr),Bn(this.timeoutType===Gee),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||HXt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Bn(this.ptr!=null),Bn(Ol==null),Bn(!this.paused);let{socket:r,llhttp:n}=this;e.length>Wee&&(r1&&n.free(r1),Wee=Math.ceil(e.length/4096)*4096,r1=n.malloc(Wee)),new Uint8Array(n.memory.buffer,r1,Wee).set(e);try{let i;try{t1=e,Ol=this,i=n.llhttp_execute(this.ptr,r1,e.length)}catch(a){throw a}finally{Ol=null,t1=null}let o=n.llhttp_get_error_pos(this.ptr)-r1;if(i===e1.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===e1.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==e1.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new RXt(c,e1.ERROR[i],e.slice(o))}}catch(i){li.destroy(r,i)}}destroy(){Bn(this.ptr!=null),Bn(Ol==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&WEe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[FA][r[Fh]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=li.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&li.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&li.destroy(this.socket,new SXt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;Bn(r),Bn(n[rN]===i),Bn(!i.destroyed),Bn(!this.paused),Bn((o.length&1)===0);let c=n[FA][n[Fh]];Bn(c),Bn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[dc].destroy(),i[dc]=null,i[zEe]=null,i[Oh]=null,$Xt(i),n[rN]=null,n[Yet]=null,n[FA][n[Fh]++]=null,n.emit("disconnect",n[Ket],[n],new tN("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){li.destroy(i,l)}n[tw]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[FA][i[Fh]];if(!l)return-1;if(Bn(!this.upgrade),Bn(this.statusCode<200),e===100)return li.destroy(o,new Vee("bad response",li.getSocketInfo(o))),-1;if(r&&!l.upgrade)return li.destroy(o,new Vee("bad upgrade",li.getSocketInfo(o))),-1;if(Bn(this.timeoutType===nN),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[B0]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let f=l.bodyTimeout!=null?l.bodyTimeout:i[OXt];this.setTimeout(f,Gee)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return Bn(i[Ud]===1),this.upgrade=!0,2;if(r)return Bn(i[Ud]===1),this.upgrade=!0,2;if(Bn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[jee]){let f=this.keepAlive?li.parseKeepAliveTimeout(this.keepAlive):null;if(f!=null){let p=Math.min(f-i[LXt],i[MXt]);p<=0?o[B0]=!0:i[zee]=p}else i[zee]=i[DXt]}else o[B0]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[j7]&&(o[j7]=!1,i[tw]()),u?e1.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[FA][r[Fh]];if(Bn(a),Bn(this.timeoutType===Gee),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Bn(i>=200),o>-1&&this.bytesRead+e.length>o)return li.destroy(n,new kXt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return e1.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;Bn(n>=100),Bn((this.headers.length&1)===0);let u=e[FA][e[Fh]];if(Bn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return li.destroy(r,new TXt),-1;if(u.onComplete(o),e[FA][e[Fh]++]=null,r[rw])return Bn(e[Ud]===0),li.destroy(r,new tN("reset")),e1.ERROR.PAUSED;if(l){if(r[B0]&&e[Ud]===0)return li.destroy(r,new tN("reset")),e1.ERROR.PAUSED;e[jee]==null||e[jee]===1?setImmediate(()=>e[tw]()):e[tw]()}else return li.destroy(r,new tN("reset")),e1.ERROR.PAUSED}}};function jet(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===nN?(!e[rw]||e.writableNeedDrain||n[Ud]>1)&&(Bn(!i,"cannot be paused while waiting for headers"),li.destroy(e,new wXt)):r===Gee?i||li.destroy(e,new _Xt):r===JEe&&(Bn(n[Ud]===0&&n[zee]),li.destroy(e,new tN("socket idle timeout")))}s(jet,"onParserTimeout");async function GXt(t,e){t[rN]=e,VEe||(VEe=await YEe,YEe=null),e[$7]=!1,e[rw]=!1,e[B0]=!1,e[j7]=!1,e[dc]=new XEe(t,e,VEe),$ee(e,"error",function(n){Bn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[dc];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[Oh]=n,this[zEe][qXt](n)}),$ee(e,"readable",function(){let n=this[dc];n&&n.readMore()}),$ee(e,"end",function(){let n=this[dc];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}li.destroy(this,new Vee("other side closed",li.getSocketInfo(this)))}),$ee(e,"close",function(){let n=this[zEe],i=this[dc];i&&(!this[Oh]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[dc].destroy(),this[dc]=null);let o=this[Oh]||new Vee("closed",li.getSocketInfo(this));if(n[rN]=null,n[Yet]=null,n.destroyed){Bn(n[PXt]===0);let a=n[FA].splice(n[Fh]);for(let c=0;c<a.length;c++){let l=a[c];li.errorRequest(n,l,o)}}else if(n[Ud]>0&&o.code!=="UND_ERR_INFO"){let a=n[FA][n[Fh]];n[FA][n[Fh]++]=null,li.errorRequest(n,a,o)}n[NXt]=n[Fh],Bn(n[Ud]===0),n.emit("disconnect",n[Ket],[n],o),n[tw]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return KXt(t,...n)},resume(){VXt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[rw]||e[B0]||e[j7]||n&&(t[Ud]>0&&!n.idempotent||t[Ud]>0&&(n.upgrade||n.method==="CONNECT")||t[Ud]>0&&li.bodyLength(n.body)!==0&&(li.isStream(n.body)||li.isAsyncIterable(n.body)||li.isFormDataLike(n.body))))}}}s(GXt,"connectH1");function VXt(t){let e=t[rN];if(e&&!e.destroyed){if(t[$et]===0?!e[$7]&&e.unref&&(e.unref(),e[$7]=!0):e[$7]&&e.ref&&(e.ref(),e[$7]=!1),t[$et]===0)e[dc].timeoutType!==JEe&&e[dc].setTimeout(t[zee],JEe);else if(t[Ud]>0&&e[dc].statusCode<200&&e[dc].timeoutType!==nN){let r=t[FA][t[Fh]],n=r.headersTimeout!=null?r.headersTimeout:t[FXt];e[dc].setTimeout(n,nN)}}}s(VXt,"resumeH1");function zXt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(zXt,"shouldSendContentLength");function KXt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:f}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(li.isFormDataLike(l)){GEe||(GEe=eN().extractBody);let[y,E]=GEe(l);e.contentType==null&&u.push("content-type",E),l=y.stream,f=y.length}else li.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let m=li.bodyLength(l);if(f=m??f,f===null&&(f=e.contentLength),f===0&&!p&&(f=null),zXt(r)&&f>0&&e.contentLength!==null&&e.contentLength!==f){if(t[KEe])return li.errorRequest(t,e,new nk),!1;process.emitWarning(new nk)}let h=t[rN],g=s(y=>{e.aborted||e.completed||(li.errorRequest(t,e,y||new zet),li.destroy(l),li.destroy(h,new tN("aborted")))},"abort");try{e.onConnect(g)}catch(y){li.errorRequest(t,e,y)}if(e.aborted)return!1;r==="HEAD"&&(h[B0]=!0),(o||r==="CONNECT")&&(h[B0]=!0),c!=null&&(h[B0]=c),t[Wet]&&h[QXt]++>=t[Wet]&&(h[B0]=!0),a&&(h[j7]=!0);let A=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?A+=`host: ${i}\r
`:A+=t[BXt],o?A+=`connection: upgrade\r
upgrade: ${o}\r
`:t[jee]&&!h[B0]?A+=`connection: keep-alive\r
`:A+=`connection: close\r
`,Array.isArray(u))for(let y=0;y<u.length;y+=2){let E=u[y+0],b=u[y+1];if(Array.isArray(b))for(let S=0;S<b.length;S++)A+=`${E}: ${b[S]}\r
`;else A+=`${E}: ${b}\r
`}return Het.sendHeaders.hasSubscribers&&Het.sendHeaders.publish({request:e,headers:A,socket:h}),!l||m===0?Get(g,null,t,e,h,f,A,p):li.isBuffer(l)?Get(g,l,t,e,h,f,A,p):li.isBlobLike(l)?typeof l.stream=="function"?Vet(g,l.stream(),t,e,h,f,A,p):JXt(g,l,t,e,h,f,A,p):li.isStream(l)?YXt(g,l,t,e,h,f,A,p):li.isIterable(l)?Vet(g,l,t,e,h,f,A,p):Bn(!1),!0}s(KXt,"writeH1");function YXt(t,e,r,n,i,o,a,c){Bn(o!==0||r[Ud]===0,"stream body cannot be pipelined");let l=!1,u=new Kee({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),f=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(A){li.destroy(this,A)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!l){let g=new zet;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!l){if(l=!0,Bn(i.destroyed||i[rw]&&r[Ud]<=1),i.off("drain",p).off("error",h),e.removeListener("data",f).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(A){g=A}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?li.destroy(e,g):li.destroy(e)}},"onFinished");e.on("data",f).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(YXt,"writeStream");function Get(t,e,r,n,i,o,a,c){try{e?li.isBuffer(e)&&(Bn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[B0]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Bn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[tw]()}catch(l){t(l)}}s(Get,"writeBuffer");async function JXt(t,e,r,n,i,o,a,c){Bn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new nk;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[B0]=!0),r[tw]()}catch(l){t(l)}}s(JXt,"writeBlob");async function Vet(t,e,r,n,i,o,a,c){Bn(o!==0||r[Ud]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let m=l;l=null,m()}}s(u,"onDrain");let f=s(()=>new Promise((m,h)=>{Bn(l===null),i[Oh]?h(i[Oh]):l=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new Kee({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let m of e){if(i[Oh])throw i[Oh];p.write(m)||await f()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(Vet,"writeIterable");var Kee=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[rw]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[Oh])throw r[Oh];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[KEe])throw new nk;process.emitWarning(new nk)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[B0]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let f=r.write(e);return r.uncork(),n.onBodySent(e),f||r[dc].timeout&&r[dc].timeoutType===nN&&r[dc].timeout.refresh&&r[dc].timeout.refresh(),f}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[rw]=!1,e[Oh])throw e[Oh];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[KEe])throw new nk;process.emitWarning(new nk)}e[dc].timeout&&e[dc].timeoutType===nN&&e[dc].timeout.refresh&&e[dc].timeout.refresh(),n[tw]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[rw]=!1,e&&(Bn(n[Ud]<=1,"pipeline should only contain this request"),i(e))}};Jet.exports=GXt});var stt=H((Rfi,ott)=>{"use strict";d();var Qh=require("node:assert"),{pipeline:XXt}=require("node:stream"),fo=qi(),{RequestContentLengthMismatchError:ZEe,RequestAbortedError:Zet,SocketError:G7,InformationalError:ebe}=Ko(),{kUrl:Yee,kReset:Xee,kClient:iN,kRunning:Zee,kPending:ZXt,kQueue:nw,kPendingIdx:tbe,kRunningIdx:OA,kError:UA,kSocket:mu,kStrictContentLength:eZt,kOnError:rbe,kMaxConcurrentStreams:itt,kHTTP2Session:QA,kResume:iw,kSize:tZt,kHTTPContext:rZt}=Da(),Wx=Symbol("open streams"),ett,ttt=!1,Jee;try{Jee=require("node:http2")}catch{Jee={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:nZt,HTTP2_HEADER_METHOD:iZt,HTTP2_HEADER_PATH:oZt,HTTP2_HEADER_SCHEME:sZt,HTTP2_HEADER_CONTENT_LENGTH:aZt,HTTP2_HEADER_EXPECT:cZt,HTTP2_HEADER_STATUS:lZt}}=Jee;function uZt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(uZt,"parseH2Headers");async function dZt(t,e){t[mu]=e,ttt||(ttt=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=Jee.connect(t[Yee],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[itt]});r[Wx]=0,r[iN]=t,r[mu]=e,fo.addListener(r,"error",pZt),fo.addListener(r,"frameError",mZt),fo.addListener(r,"end",hZt),fo.addListener(r,"goaway",gZt),fo.addListener(r,"close",function(){let{[iN]:i}=this,{[mu]:o}=i,a=this[mu][UA]||this[UA]||new G7("closed",fo.getSocketInfo(o));if(i[QA]=null,i.destroyed){Qh(i[ZXt]===0);let c=i[nw].splice(i[OA]);for(let l=0;l<c.length;l++){let u=c[l];fo.errorRequest(i,u,a)}}}),r.unref(),t[QA]=r,e[QA]=r,fo.addListener(e,"error",function(i){Qh(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[UA]=i,this[iN][rbe](i)}),fo.addListener(e,"end",function(){fo.destroy(this,new G7("other side closed",fo.getSocketInfo(this)))}),fo.addListener(e,"close",function(){let i=this[UA]||new G7("closed",fo.getSocketInfo(this));t[mu]=null,this[QA]!=null&&this[QA].destroy(i),t[tbe]=t[OA],Qh(t[Zee]===0),t.emit("disconnect",t[Yee],[t],i),t[iw]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return yZt(t,...i)},resume(){fZt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(dZt,"connectH2");function fZt(t){let e=t[mu];e?.destroyed===!1&&(t[tZt]===0&&t[itt]===0?(e.unref(),t[QA].unref()):(e.ref(),t[QA].ref()))}s(fZt,"resumeH2");function pZt(t){Qh(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[mu][UA]=t,this[iN][rbe](t)}s(pZt,"onHttp2SessionError");function mZt(t,e,r){if(r===0){let n=new ebe(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[mu][UA]=n,this[iN][rbe](n)}}s(mZt,"onHttp2FrameError");function hZt(){let t=new G7("other side closed",fo.getSocketInfo(this[mu]));this.destroy(t),fo.destroy(this[mu],t)}s(hZt,"onHttp2SessionEnd");function gZt(t){let e=this[UA]||new G7(`HTTP/2: "GOAWAY" frame received with code ${t}`,fo.getSocketInfo(this)),r=this[iN];if(r[mu]=null,r[rZt]=null,this[QA]!=null&&(this[QA].destroy(e),this[QA]=null),fo.destroy(this[mu],e),r[OA]<r[nw].length){let n=r[nw][r[OA]];r[nw][r[OA]++]=null,fo.errorRequest(r,n,e),r[tbe]=r[OA]}Qh(r[Zee]===0),r.emit("disconnect",r[Yee],[r],e),r[iw]()}s(gZt,"onHTTP2GoAway");function AZt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(AZt,"shouldSendContentLength");function yZt(t,e){let r=t[QA],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:f}=e;if(a)return fo.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let R=0;R<u.length;R+=2){let B=u[R+0],L=u[R+1];if(Array.isArray(L))for(let O=0;O<L.length;O++)p[B]?p[B]+=`,${L[O]}`:p[B]=L[O];else p[B]=L}let m,{hostname:h,port:g}=t[Yee];p[nZt]=o||`${h}${g?`:${g}`:""}`,p[iZt]=n;let A=s(R=>{e.aborted||e.completed||(R=R||new Zet,fo.errorRequest(t,e,R),m!=null&&fo.destroy(m,R),fo.destroy(f,R),t[nw][t[OA]++]=null,t[iw]())},"abort");try{e.onConnect(A)}catch(R){fo.errorRequest(t,e,R)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:l}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[Wx],t[nw][t[OA]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[Wx],t[nw][t[OA]++]=null}),m.once("close",()=>{r[Wx]-=1,r[Wx]===0&&r.unref()}),!0;p[oZt]=i,p[sZt]="https";let y=n==="PUT"||n==="POST"||n==="PATCH";f&&typeof f.read=="function"&&f.read(0);let E=fo.bodyLength(f);if(fo.isFormDataLike(f)){ett??=eN().extractBody;let[R,B]=ett(f);p["content-type"]=B,f=R.stream,E=R.length}if(E==null&&(E=e.contentLength),(E===0||!y)&&(E=null),AZt(n)&&E>0&&e.contentLength!=null&&e.contentLength!==E){if(t[eZt])return fo.errorRequest(t,e,new ZEe),!1;process.emitWarning(new ZEe)}E!=null&&(Qh(f,"no body must not have content length"),p[aZt]=`${E}`),r.ref();let b=n==="GET"||n==="HEAD"||f===null;return c?(p[cZt]="100-continue",m=r.request(p,{endStream:b,signal:l}),m.once("continue",S)):(m=r.request(p,{endStream:b,signal:l}),S()),++r[Wx],m.once("response",R=>{let{[lZt]:B,...L}=R;if(e.onResponseStarted(),e.aborted){let O=new Zet;fo.errorRequest(t,e,O),fo.destroy(m,O);return}e.onHeaders(Number(B),uZt(L),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",O=>{e.onData(O)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[Wx]===0&&r.unref(),A(new ebe("HTTP/2: stream half-closed (remote)")),t[nw][t[OA]++]=null,t[tbe]=t[OA],t[iw]()}),m.once("close",()=>{r[Wx]-=1,r[Wx]===0&&r.unref()}),m.once("error",function(R){A(R)}),m.once("frameError",(R,B)=>{A(new ebe(`HTTP/2: "frameError" received - type ${R}, code ${B}`))}),!0;function S(){!f||E===0?rtt(A,m,null,t,e,t[mu],E,y):fo.isBuffer(f)?rtt(A,m,f,t,e,t[mu],E,y):fo.isBlobLike(f)?typeof f.stream=="function"?ntt(A,m,f.stream(),t,e,t[mu],E,y):vZt(A,m,f,t,e,t[mu],E,y):fo.isStream(f)?CZt(A,t[mu],y,m,f,t,e,E):fo.isIterable(f)?ntt(A,m,f,t,e,t[mu],E,y):Qh(!1)}s(S,"writeBodyH2")}s(yZt,"writeH2");function rtt(t,e,r,n,i,o,a,c){try{r!=null&&fo.isBuffer(r)&&(Qh(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[Xee]=!0),i.onRequestSent(),n[iw]()}catch(l){t(l)}}s(rtt,"writeBuffer");function CZt(t,e,r,n,i,o,a,c){Qh(c!==0||o[Zee]===0,"stream body cannot be pipelined");let l=XXt(i,n,f=>{f?(fo.destroy(l,f),t(f)):(fo.removeAllListeners(l),a.onRequestSent(),r||(e[Xee]=!0),o[iw]())});fo.addListener(l,"data",u);function u(f){a.onBodySent(f)}s(u,"onPipeData")}s(CZt,"writeStream");async function vZt(t,e,r,n,i,o,a,c){Qh(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new ZEe;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[Xee]=!0),n[iw]()}catch(l){t(l)}}s(vZt,"writeBlob");async function ntt(t,e,r,n,i,o,a,c){Qh(a!==0||n[Zee]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let f=s(()=>new Promise((p,m)=>{Qh(l===null),o[UA]?m(o[UA]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[UA])throw o[UA];let m=e.write(p);i.onBodySent(p),m||await f()}e.end(),i.onRequestSent(),c||(o[Xee]=!0),n[iw]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(ntt,"writeIterable");ott.exports=dZt});var tte=H((Dfi,ltt)=>{"use strict";d();var n1=qi(),{kBodyUsed:V7}=Da(),ibe=require("node:assert"),{InvalidArgumentError:xZt}=Ko(),EZt=require("node:events"),bZt=[300,301,302,303,307,308],att=Symbol("body"),ete=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[att]=e,this[V7]=!1}async*[Symbol.asyncIterator](){ibe(!this[V7],"disturbed"),this[V7]=!0,yield*this[att]}},nbe=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new xZt("maxRedirections must be a positive number");n1.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,n1.isStream(this.opts.body)?(n1.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){ibe(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[V7]=!1,EZt.prototype.on.call(this.opts.body,"data",function(){this[V7]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new ete(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&n1.isIterable(this.opts.body)&&(this.opts.body=new ete(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||n1.isDisturbed(this.opts.body)?null:IZt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=n1.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=TZt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function IZt(t,e){if(bZt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&n1.headerNameToString(e[r])==="location")return e[r+1]}s(IZt,"parseLocation");function ctt(t,e,r){if(t.length===4)return n1.headerNameToString(t)==="host";if(e&&n1.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=n1.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(ctt,"shouldRemoveHeader");function TZt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)ctt(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))ctt(i,e,r)||n.push(i,t[i]);else ibe(t==null,"headers must be an object or an array");return n}s(TZt,"cleanRequestHeaders");ltt.exports=nbe});var rte=H((Mfi,utt)=>{"use strict";d();var wZt=tte();function SZt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new wZt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(SZt,"createRedirectInterceptor");utt.exports=SZt});var eQ=H((Ofi,vtt)=>{"use strict";d();var jx=require("node:assert"),gtt=require("node:net"),_Zt=require("node:http"),ik=qi(),{channels:oN}=q3(),RZt=TZe(),kZt=j3(),{InvalidArgumentError:Uc,InformationalError:PZt,ClientDestroyedError:DZt}=Ko(),BZt=N7(),{kUrl:i1,kServerName:ow,kClient:NZt,kBusy:obe,kConnect:MZt,kResuming:ok,kRunning:X7,kPending:Z7,kSize:J7,kQueue:qA,kConnected:LZt,kConnecting:sN,kNeedDrain:aw,kKeepAliveDefaultTimeout:dtt,kHostHeader:FZt,kPendingIdx:HA,kRunningIdx:Gx,kError:OZt,kPipelining:nte,kKeepAliveTimeoutValue:QZt,kMaxHeadersSize:UZt,kKeepAliveMaxTimeout:qZt,kKeepAliveTimeoutThreshold:HZt,kHeadersTimeout:$Zt,kBodyTimeout:WZt,kStrictContentLength:jZt,kConnector:z7,kMaxRedirections:GZt,kMaxRequests:sbe,kCounter:VZt,kClose:zZt,kDestroy:KZt,kDispatch:YZt,kInterceptors:ftt,kLocalAddress:K7,kMaxResponseSize:JZt,kOnError:XZt,kHTTPContext:qc,kMaxConcurrentStreams:ZZt,kResume:Y7}=Da(),eer=Xet(),ter=stt(),ptt=!1,sw=Symbol("kClosedResolve"),mtt=s(()=>{},"noop");function Att(t){return t[nte]??t[qc]?.defaultPipelining??1}s(Att,"getPipelining");var abe=class extends kZt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:f,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:A,pipelining:y,tls:E,strictContentLength:b,maxCachedSessions:S,maxRedirections:R,connect:B,maxRequestsPerClient:L,localAddress:O,maxResponseSize:Y,autoSelectFamily:V,autoSelectFamilyAttemptTimeout:z,maxConcurrentStreams:Q,allowH2:U}={}){if(super(),f!==void 0)throw new Uc("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Uc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Uc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Uc("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Uc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Uc("invalid maxHeaderSize");if(A!=null&&typeof A!="string")throw new Uc("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new Uc("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Uc("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Uc("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Uc("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Uc("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new Uc("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Uc("connect must be a function or an object");if(R!=null&&(!Number.isInteger(R)||R<0))throw new Uc("maxRedirections must be a positive number");if(L!=null&&(!Number.isInteger(L)||L<0))throw new Uc("maxRequestsPerClient must be a positive number");if(O!=null&&(typeof O!="string"||gtt.isIP(O)===0))throw new Uc("localAddress must be valid string IP address");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new Uc("maxResponseSize must be a positive number");if(z!=null&&(!Number.isInteger(z)||z<-1))throw new Uc("autoSelectFamilyAttemptTimeout must be a positive number");if(U!=null&&typeof U!="boolean")throw new Uc("allowH2 must be a valid boolean value");if(Q!=null&&(typeof Q!="number"||Q<1))throw new Uc("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=BZt({...E,maxCachedSessions:S,allowH2:U,socketPath:A,timeout:c,...V?{autoSelectFamily:V,autoSelectFamilyAttemptTimeout:z}:void 0,...B})),r?.Client&&Array.isArray(r.Client)?(this[ftt]=r.Client,ptt||(ptt=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[ftt]=[rer({maxRedirections:R})],this[i1]=ik.parseOrigin(e),this[z7]=B,this[nte]=y??1,this[UZt]=n||_Zt.maxHeaderSize,this[dtt]=p??4e3,this[qZt]=h??6e5,this[HZt]=g??2e3,this[QZt]=this[dtt],this[ow]=null,this[K7]=O??null,this[ok]=0,this[aw]=0,this[FZt]=`host: ${this[i1].hostname}${this[i1].port?`:${this[i1].port}`:""}\r
`,this[WZt]=l??3e5,this[$Zt]=i??3e5,this[jZt]=b??!0,this[GZt]=R,this[sbe]=L,this[sw]=null,this[JZt]=Y>-1?Y:-1,this[ZZt]=Q??100,this[qc]=null,this[qA]=[],this[Gx]=0,this[HA]=0,this[Y7]=Z=>cbe(this,Z),this[XZt]=Z=>ytt(this,Z)}get pipelining(){return this[nte]}set pipelining(e){this[nte]=e,this[Y7](!0)}get[Z7](){return this[qA].length-this[HA]}get[X7](){return this[HA]-this[Gx]}get[J7](){return this[qA].length-this[Gx]}get[LZt](){return!!this[qc]&&!this[sN]&&!this[qc].destroyed}get[obe](){return!!(this[qc]?.busy(null)||this[J7]>=(Att(this)||1)||this[Z7]>0)}[MZt](e){Ctt(this),this.once("connect",e)}[YZt](e,r){let n=e.origin||this[i1].origin,i=new RZt(n,e,r);return this[qA].push(i),this[ok]||(ik.bodyLength(i.body)==null&&ik.isIterable(i.body)?(this[ok]=1,queueMicrotask(()=>cbe(this))):this[Y7](!0)),this[ok]&&this[aw]!==2&&this[obe]&&(this[aw]=2),this[aw]<2}async[zZt](){return new Promise(e=>{this[J7]?this[sw]=e:e(null)})}async[KZt](e){return new Promise(r=>{let n=this[qA].splice(this[HA]);for(let o=0;o<n.length;o++){let a=n[o];ik.errorRequest(this,a,e)}let i=s(()=>{this[sw]&&(this[sw](),this[sw]=null),r(null)},"callback");this[qc]?(this[qc].destroy(e,i),this[qc]=null):queueMicrotask(i),this[Y7]()})}},rer=rte();function ytt(t,e){if(t[X7]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){jx(t[HA]===t[Gx]);let r=t[qA].splice(t[Gx]);for(let n=0;n<r.length;n++){let i=r[n];ik.errorRequest(t,i,e)}jx(t[J7]===0)}}s(ytt,"onError");async function Ctt(t){jx(!t[sN]),jx(!t[qc]);let{host:e,hostname:r,protocol:n,port:i}=t[i1];if(r[0]==="["){let o=r.indexOf("]");jx(o!==-1);let a=r.substring(1,o);jx(gtt.isIP(a)),r=a}t[sN]=!0,oN.beforeConnect.hasSubscribers&&oN.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[qc]?.version,servername:t[ow],localAddress:t[K7]},connector:t[z7]});try{let o=await new Promise((a,c)=>{t[z7]({host:e,hostname:r,protocol:n,port:i,servername:t[ow],localAddress:t[K7]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){ik.destroy(o.on("error",mtt),new DZt);return}jx(o);try{t[qc]=o.alpnProtocol==="h2"?await ter(t,o):await eer(t,o)}catch(a){throw o.destroy().on("error",mtt),a}t[sN]=!1,o[VZt]=0,o[sbe]=t[sbe],o[NZt]=t,o[OZt]=null,oN.connected.hasSubscribers&&oN.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[qc]?.version,servername:t[ow],localAddress:t[K7]},connector:t[z7],socket:o}),t.emit("connect",t[i1],[t])}catch(o){if(t.destroyed)return;if(t[sN]=!1,oN.connectError.hasSubscribers&&oN.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[qc]?.version,servername:t[ow],localAddress:t[K7]},connector:t[z7],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(jx(t[X7]===0);t[Z7]>0&&t[qA][t[HA]].servername===t[ow];){let a=t[qA][t[HA]++];ik.errorRequest(t,a,o)}else ytt(t,o);t.emit("connectionError",t[i1],[t],o)}t[Y7]()}s(Ctt,"connect");function htt(t){t[aw]=0,t.emit("drain",t[i1],[t])}s(htt,"emitDrain");function cbe(t,e){t[ok]!==2&&(t[ok]=2,ner(t,e),t[ok]=0,t[Gx]>256&&(t[qA].splice(0,t[Gx]),t[HA]-=t[Gx],t[Gx]=0))}s(cbe,"resume");function ner(t,e){for(;;){if(t.destroyed){jx(t[Z7]===0);return}if(t[sw]&&!t[J7]){t[sw](),t[sw]=null;return}if(t[qc]&&t[qc].resume(),t[obe])t[aw]=2;else if(t[aw]===2){e?(t[aw]=1,queueMicrotask(()=>htt(t))):htt(t);continue}if(t[Z7]===0||t[X7]>=(Att(t)||1))return;let r=t[qA][t[HA]];if(t[i1].protocol==="https:"&&t[ow]!==r.servername){if(t[X7]>0)return;t[ow]=r.servername,t[qc]?.destroy(new PZt("servername changed"),()=>{t[qc]=null,cbe(t)})}if(t[sN])return;if(!t[qc]){Ctt(t);return}if(t[qc].destroyed||t[qc].busy(r))return;!r.aborted&&t[qc].write(r)?t[HA]++:t[qA].splice(t[HA],1)}}s(ner,"_resume");vtt.exports=abe});var lbe=H((Hfi,xtt)=>{"use strict";d();var ite=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};xtt.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new ite}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new ite),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var btt=H((jfi,Ett)=>{d();var{kFree:ier,kConnected:oer,kPending:ser,kQueued:aer,kRunning:cer,kSize:ler}=Da(),sk=Symbol("pool"),ube=class{static{s(this,"PoolStats")}constructor(e){this[sk]=e}get connected(){return this[sk][oer]}get free(){return this[sk][ier]}get pending(){return this[sk][ser]}get queued(){return this[sk][aer]}get running(){return this[sk][cer]}get size(){return this[sk][ler]}};Ett.exports=ube});var gbe=H((zfi,Btt)=>{"use strict";d();var uer=j3(),der=lbe(),{kConnected:dbe,kSize:Itt,kRunning:Ttt,kPending:wtt,kQueued:tQ,kBusy:fer,kFree:per,kUrl:mer,kClose:her,kDestroy:ger,kDispatch:Aer}=Da(),yer=btt(),N0=Symbol("clients"),Df=Symbol("needDrain"),rQ=Symbol("queue"),fbe=Symbol("closed resolve"),pbe=Symbol("onDrain"),Stt=Symbol("onConnect"),_tt=Symbol("onDisconnect"),Rtt=Symbol("onConnectionError"),mbe=Symbol("get dispatcher"),Ptt=Symbol("add client"),Dtt=Symbol("remove client"),ktt=Symbol("stats"),hbe=class extends uer{static{s(this,"PoolBase")}constructor(){super(),this[rQ]=new der,this[N0]=[],this[tQ]=0;let e=this;this[pbe]=s(function(n,i){let o=e[rQ],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[tQ]--,a=!this.dispatch(c.opts,c.handler)}this[Df]=a,!this[Df]&&e[Df]&&(e[Df]=!1,e.emit("drain",n,[e,...i])),e[fbe]&&o.isEmpty()&&Promise.all(e[N0].map(c=>c.close())).then(e[fbe])},"onDrain"),this[Stt]=(r,n)=>{e.emit("connect",r,[e,...n])},this[_tt]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[Rtt]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[ktt]=new yer(this)}get[fer](){return this[Df]}get[dbe](){return this[N0].filter(e=>e[dbe]).length}get[per](){return this[N0].filter(e=>e[dbe]&&!e[Df]).length}get[wtt](){let e=this[tQ];for(let{[wtt]:r}of this[N0])e+=r;return e}get[Ttt](){let e=0;for(let{[Ttt]:r}of this[N0])e+=r;return e}get[Itt](){let e=this[tQ];for(let{[Itt]:r}of this[N0])e+=r;return e}get stats(){return this[ktt]}async[her](){this[rQ].isEmpty()?await Promise.all(this[N0].map(e=>e.close())):await new Promise(e=>{this[fbe]=e})}async[ger](e){for(;;){let r=this[rQ].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[N0].map(r=>r.destroy(e)))}[Aer](e,r){let n=this[mbe]();return n?n.dispatch(e,r)||(n[Df]=!0,this[Df]=!this[mbe]()):(this[Df]=!0,this[rQ].push({opts:e,handler:r}),this[tQ]++),!this[Df]}[Ptt](e){return e.on("drain",this[pbe]).on("connect",this[Stt]).on("disconnect",this[_tt]).on("connectionError",this[Rtt]),this[N0].push(e),this[Df]&&queueMicrotask(()=>{this[Df]&&this[pbe](e[mer],[this,e])}),this}[Dtt](e){e.close(()=>{let r=this[N0].indexOf(e);r!==-1&&this[N0].splice(r,1)}),this[Df]=this[N0].some(r=>!r[Df]&&r.closed!==!0&&r.destroyed!==!0)}};Btt.exports={PoolBase:hbe,kClients:N0,kNeedDrain:Df,kAddClient:Ptt,kRemoveClient:Dtt,kGetDispatcher:mbe}});var aN=H((Jfi,Ftt)=>{"use strict";d();var{PoolBase:Cer,kClients:ote,kNeedDrain:ver,kAddClient:xer,kGetDispatcher:Eer}=gbe(),ber=eQ(),{InvalidArgumentError:Abe}=Ko(),Ntt=qi(),{kUrl:Mtt,kInterceptors:Ier}=Da(),Ter=N7(),ybe=Symbol("options"),Cbe=Symbol("connections"),Ltt=Symbol("factory");function wer(t,e){return new ber(t,e)}s(wer,"defaultFactory");var vbe=class extends Cer{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=wer,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new Abe("invalid connections");if(typeof n!="function")throw new Abe("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new Abe("connect must be a function or an object");typeof i!="function"&&(i=Ter({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f}:void 0,...i})),this[Ier]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[Cbe]=r||null,this[Mtt]=Ntt.parseOrigin(e),this[ybe]={...Ntt.deepClone(m),connect:i,allowH2:p},this[ybe].interceptors=m.interceptors?{...m.interceptors}:void 0,this[Ltt]=n,this.on("connectionError",(h,g,A)=>{for(let y of g){let E=this[ote].indexOf(y);E!==-1&&this[ote].splice(E,1)}})}[Eer](){for(let e of this[ote])if(!e[ver])return e;if(!this[Cbe]||this[ote].length<this[Cbe]){let e=this[Ltt](this[Mtt],this[ybe]);return this[xer](e),e}}};Ftt.exports=vbe});var Htt=H((e0i,qtt)=>{"use strict";d();var{BalancedPoolMissingUpstreamError:Ser,InvalidArgumentError:_er}=Ko(),{PoolBase:Rer,kClients:qd,kNeedDrain:nQ,kAddClient:ker,kRemoveClient:Per,kGetDispatcher:Der}=gbe(),Ber=aN(),{kUrl:xbe,kInterceptors:Ner}=Da(),{parseOrigin:Ott}=qi(),Qtt=Symbol("factory"),ste=Symbol("options"),Utt=Symbol("kGreatestCommonDivisor"),ak=Symbol("kCurrentWeight"),ck=Symbol("kIndex"),Uh=Symbol("kWeight"),ate=Symbol("kMaxWeightPerServer"),cte=Symbol("kErrorPenalty");function Mer(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(Mer,"getGreatestCommonDivisor");function Ler(t,e){return new Ber(t,e)}s(Ler,"defaultFactory");var Ebe=class extends Rer{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=Ler,...n}={}){if(super(),this[ste]=n,this[ck]=-1,this[ak]=0,this[ate]=this[ste].maxWeightPerServer||100,this[cte]=this[ste].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new _er("factory must be a function.");this[Ner]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[Qtt]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=Ott(e).origin;if(this[qd].find(i=>i[xbe].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[Qtt](r,Object.assign({},this[ste]));this[ker](n),n.on("connect",()=>{n[Uh]=Math.min(this[ate],n[Uh]+this[cte])}),n.on("connectionError",()=>{n[Uh]=Math.max(1,n[Uh]-this[cte]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[Uh]=Math.max(1,n[Uh]-this[cte]),this._updateBalancedPoolStats())});for(let i of this[qd])i[Uh]=this[ate];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[qd].length;r++)e=Mer(this[qd][r][Uh],e);this[Utt]=e}removeUpstream(e){let r=Ott(e).origin,n=this[qd].find(i=>i[xbe].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[Per](n),this}get upstreams(){return this[qd].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[xbe].origin)}[Der](){if(this[qd].length===0)throw new Ser;if(!this[qd].find(o=>!o[nQ]&&o.closed!==!0&&o.destroyed!==!0)||this[qd].map(o=>o[nQ]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[qd].findIndex(o=>!o[nQ]);for(;n++<this[qd].length;){this[ck]=(this[ck]+1)%this[qd].length;let o=this[qd][this[ck]];if(o[Uh]>this[qd][i][Uh]&&!o[nQ]&&(i=this[ck]),this[ck]===0&&(this[ak]=this[ak]-this[Utt],this[ak]<=0&&(this[ak]=this[ate])),o[Uh]>=this[ak]&&!o[nQ])return o}return this[ak]=this[qd][i][Uh],this[ck]=i,this[qd][i]}};qtt.exports=Ebe});var cN=H((n0i,Ktt)=>{"use strict";d();var{InvalidArgumentError:lte}=Ko(),{kClients:cw,kRunning:$tt,kClose:Fer,kDestroy:Oer,kDispatch:Qer,kInterceptors:Uer}=Da(),qer=j3(),Her=aN(),$er=eQ(),Wer=qi(),jer=rte(),Wtt=Symbol("onConnect"),jtt=Symbol("onDisconnect"),Gtt=Symbol("onConnectionError"),Ger=Symbol("maxRedirections"),Vtt=Symbol("onDrain"),ztt=Symbol("factory"),bbe=Symbol("options");function Ver(t,e){return e&&e.connections===1?new $er(t,e):new Her(t,e)}s(Ver,"defaultFactory");var Ibe=class extends qer{static{s(this,"Agent")}constructor({factory:e=Ver,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new lte("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new lte("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new lte("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[Uer]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[jer({maxRedirections:r})],this[bbe]={...Wer.deepClone(i),connect:n},this[bbe].interceptors=i.interceptors?{...i.interceptors}:void 0,this[Ger]=r,this[ztt]=e,this[cw]=new Map,this[Vtt]=(o,a)=>{this.emit("drain",o,[this,...a])},this[Wtt]=(o,a)=>{this.emit("connect",o,[this,...a])},this[jtt]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[Gtt]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[$tt](){let e=0;for(let r of this[cw].values())e+=r[$tt];return e}[Qer](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new lte("opts.origin must be a non-empty string or URL.");let i=this[cw].get(n);return i||(i=this[ztt](e.origin,this[bbe]).on("drain",this[Vtt]).on("connect",this[Wtt]).on("disconnect",this[jtt]).on("connectionError",this[Gtt]),this[cw].set(n,i)),i.dispatch(e,r)}async[Fer](){let e=[];for(let r of this[cw].values())e.push(r.close());this[cw].clear(),await Promise.all(e)}async[Oer](e){let r=[];for(let n of this[cw].values())r.push(n.destroy(e));this[cw].clear(),await Promise.all(r)}};Ktt.exports=Ibe});var Sbe=H((s0i,Ztt)=>{"use strict";d();var{kProxy:zer,kClose:Ker,kDestroy:Yer,kInterceptors:Jer}=Da(),{URL:iQ}=require("node:url"),Xer=cN(),Zer=aN(),etr=j3(),{InvalidArgumentError:fte,RequestAbortedError:ttr,SecureProxyConnectionError:rtr}=Ko(),Ytt=N7(),ute=Symbol("proxy agent"),dte=Symbol("proxy client"),oQ=Symbol("proxy headers"),Tbe=Symbol("request tls settings"),Jtt=Symbol("proxy tls settings"),Xtt=Symbol("connect endpoint function");function ntr(t){return t==="https:"?443:80}s(ntr,"defaultProtocolPort");function itr(t,e){return new Zer(t,e)}s(itr,"defaultFactory");var otr=s(()=>{},"noop"),wbe=class extends etr{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof iQ)&&!e.uri)throw new fte("Proxy uri is mandatory");let{clientFactory:r=itr}=e;if(typeof r!="function")throw new fte("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:f}=n;if(this[zer]={uri:i,protocol:c},this[Jer]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[Tbe]=e.requestTls,this[Jtt]=e.proxyTls,this[oQ]=e.headers||{},e.auth&&e.token)throw new fte("opts.auth cannot be used in combination with opts.token");e.auth?this[oQ]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[oQ]["proxy-authorization"]=e.token:l&&u&&(this[oQ]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=Ytt({...e.proxyTls});this[Xtt]=Ytt({...e.requestTls}),this[dte]=r(n,{connect:p}),this[ute]=new Xer({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${ntr(m.protocol)}`);try{let{socket:A,statusCode:y}=await this[dte].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[oQ],host:m.host},servername:this[Jtt]?.servername||f});if(y!==200&&(A.on("error",otr).destroy(),h(new ttr(`Proxy response (${y}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,A);return}let E;this[Tbe]?E=this[Tbe].servername:E=m.servername,this[Xtt]({...m,servername:E,httpSocket:A},h)}catch(A){A.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new rtr(A)):h(A)}},"connect")})}dispatch(e,r){let n=str(e.headers);if(atr(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new iQ(e.origin);n.host=i}return this[ute].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new iQ(e):e instanceof iQ?e:new iQ(e.uri)}async[Ker](){await this[ute].close(),await this[dte].close()}async[Yer](){await this[ute].destroy(),await this[dte].destroy()}};function str(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(str,"buildHeaders");function atr(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new fte("Proxy-Authorization should be sent in ProxyAgent constructor")}s(atr,"throwIfProxyAuthIsSent");Ztt.exports=wbe});var ort=H((l0i,irt)=>{"use strict";d();var ctr=j3(),{kClose:ltr,kDestroy:utr,kClosed:ert,kDestroyed:trt,kDispatch:dtr,kNoProxyAgent:sQ,kHttpProxyAgent:lw,kHttpsProxyAgent:lk}=Da(),rrt=Sbe(),ftr=cN(),ptr={"http:":80,"https:":443},nrt=!1,_be=class extends ctr{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,nrt||(nrt=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[sQ]=new ftr(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[lw]=new rrt({...o,uri:a}):this[lw]=this[sQ];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[lk]=new rrt({...o,uri:c}):this[lk]=this[lw],this.#o()}[dtr](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[ltr](){await this[sQ].close(),this[lw][ert]||await this[lw].close(),this[lk][ert]||await this[lk].close()}async[utr](e){await this[sQ].destroy(e),this[lw][trt]||await this[lw].destroy(e),this[lk][trt]||await this[lk].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||ptr[r]||0,this.#r(n,i)?r==="https:"?this[lk]:this[lw]:this[sQ]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};irt.exports=_be});var pte=H((f0i,lrt)=>{"use strict";d();var lN=require("node:assert"),{kRetryHandlerDefaultRetry:srt}=Da(),{RequestRetryError:aQ}=Ko(),{isDisturbed:art,parseHeaders:mtr,parseRangeHeader:crt,wrapRequestBody:htr}=qi();function gtr(t){let e=Date.now();return new Date(t).getTime()-e}s(gtr,"calculateRetryAfterHeader");var Rbe=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:f,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:htr(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[srt],retryAfter:m??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:f??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[srt](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:f,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:A,methods:y}=u,{counter:E}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!A.includes(a)){i(e);return}if(Array.isArray(y)&&!y.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(E>f){i(e);return}let b=c?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?gtr(b):b*1e3);let S=b>0?Math.min(b,m):Math.min(p*h**(E-1),m);setTimeout(()=>i(null),S)}onHeaders(e,r,n,i){let o=mtr(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new aQ("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new aQ("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=crt(o["content-range"]);if(!c)return this.abort(new aQ("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new aQ("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:f=u-1}=c;return lN(this.start===l,"content-range mismatch"),lN(this.end==null||this.end===f,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=crt(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:f=u-1}=c;lN(l!=null&&Number.isFinite(l),"content-range mismatch"),lN(f!=null&&Number.isFinite(f),"invalid content-length"),this.start=l,this.end=f}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return lN(Number.isFinite(this.start)),lN(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new aQ("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||art(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||art(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};lrt.exports=Rbe});var drt=H((h0i,urt)=>{"use strict";d();var Atr=D7(),ytr=pte(),kbe=class extends Atr{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new ytr({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};urt.exports=kbe});var Lbe=H((y0i,vrt)=>{"use strict";d();var grt=require("node:assert"),{Readable:Ctr}=require("node:stream"),{RequestAbortedError:Art,NotSupportedError:vtr,InvalidArgumentError:xtr,AbortError:Pbe}=Ko(),yrt=qi(),{ReadableStreamFrom:Etr}=qi(),zp=Symbol("kConsume"),cQ=Symbol("kReading"),uw=Symbol("kBody"),frt=Symbol("kAbort"),Crt=Symbol("kContentType"),prt=Symbol("kContentLength"),btr=s(()=>{},"noop"),Dbe=class extends Ctr{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[frt]=r,this[zp]=null,this[uw]=null,this[Crt]=n,this[prt]=i,this[cQ]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new Art),e&&this[frt](),super.destroy(e)}_destroy(e,r){this[cQ]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[cQ]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[cQ]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[zp]&&e!==null?(Nbe(this[zp],e),this[cQ]?super.push(e):!0):super.push(e)}async text(){return lQ(this,"text")}async json(){return lQ(this,"json")}async blob(){return lQ(this,"blob")}async bytes(){return lQ(this,"bytes")}async arrayBuffer(){return lQ(this,"arrayBuffer")}async formData(){throw new vtr}get bodyUsed(){return yrt.isDisturbed(this)}get body(){return this[uw]||(this[uw]=Etr(this),this[zp]&&(this[uw].getReader(),grt(this[uw].locked))),this[uw]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new xtr("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[prt]>r&&this.destroy(new Pbe);let a=s(()=>{this.destroy(n.reason??new Pbe)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new Pbe):i(null)}).on("error",btr).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function Itr(t){return t[uw]&&t[uw].locked===!0||t[zp]}s(Itr,"isLocked");function Ttr(t){return yrt.isDisturbed(t)||Itr(t)}s(Ttr,"isUnusable");async function lQ(t,e){return grt(!t[zp]),new Promise((r,n)=>{if(Ttr(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[zp]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){Mbe(this[zp],i)}).on("close",function(){this[zp].body!==null&&Mbe(this[zp],new Art)}),wtr(t[zp])})})}s(lQ,"consume");function wtr(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)Nbe(t,e.buffer[i])}else for(let r of e.buffer)Nbe(t,r);for(e.endEmitted?hrt(this[zp]):t.stream.on("end",function(){hrt(this[zp])}),t.stream.resume();t.stream.read()!=null;);}s(wtr,"consumeStart");function Bbe(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(Bbe,"chunksDecode");function mrt(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(mrt,"chunksConcat");function hrt(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(Bbe(r,o)):e==="json"?n(JSON.parse(Bbe(r,o))):e==="arrayBuffer"?n(mrt(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[Crt]})):e==="bytes"&&n(mrt(r,o)),Mbe(t)}catch(a){i.destroy(a)}}s(hrt,"consumeEnd");function Nbe(t,e){t.length+=e.length,t.body.push(e)}s(Nbe,"consumePush");function Mbe(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(Mbe,"consumeFinish");vrt.exports={Readable:Dbe,chunksDecode:Bbe}});var Fbe=H((x0i,Trt)=>{d();var Str=require("node:assert"),{ResponseStatusCodeError:xrt}=Ko(),{chunksDecode:Ert}=Lbe(),_tr=128*1024;async function Rtr({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){Str(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>_tr){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new xrt(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let f;try{brt(r)?f=JSON.parse(Ert(a,c)):Irt(r)&&(f=Ert(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new xrt(l,n,o,f)))}s(Rtr,"getResolveErrorBodyCallback");var brt=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),Irt=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");Trt.exports={getResolveErrorBodyCallback:Rtr,isContentTypeApplicationJson:brt,isContentTypeText:Irt}});var _rt=H((I0i,Obe)=>{"use strict";d();var ktr=require("node:assert"),{Readable:Ptr}=Lbe(),{InvalidArgumentError:uN,RequestAbortedError:wrt}=Ko(),Kp=qi(),{getResolveErrorBodyCallback:Dtr}=Fbe(),{AsyncResource:Btr}=require("node:async_hooks"),mte=class extends Btr{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new uN("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:f}=e;try{if(typeof r!="function")throw new uN("invalid callback");if(f&&(typeof f!="number"||f<0))throw new uN("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new uN("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new uN("invalid method");if(c&&typeof c!="function")throw new uN("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw Kp.isStream(a)&&Kp.destroy(a.on("error",Kp.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=f,this.signal=n,this.reason=null,this.removeAbortListener=null,Kp.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new wrt:this.removeAbortListener=Kp.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new wrt,this.res?Kp.destroy(this.res.on("error",Kp.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}ktr(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:f}=this,p=u==="raw"?Kp.parseRawHeaders(r):Kp.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?Kp.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],A=new Ptr({resume:n,abort:c,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:f});this.removeAbortListener&&A.on("close",this.removeAbortListener),this.callback=null,this.res=A,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(Dtr,null,{callback:o,body:A,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:A,context:l}))}onData(e){return this.res.push(e)}onComplete(e){Kp.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{Kp.destroy(r,e)})),i&&(this.body=null,Kp.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function Srt(t,e){if(e===void 0)return new Promise((r,n)=>{Srt.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new mte(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(Srt,"request");Obe.exports=Srt;Obe.exports.RequestHandler=mte});var uQ=H((S0i,Prt)=>{d();var{addAbortListener:Ntr}=qi(),{RequestAbortedError:Mtr}=Ko(),dN=Symbol("kListener"),o1=Symbol("kSignal");function Rrt(t){t.abort?t.abort(t[o1]?.reason):t.reason=t[o1]?.reason??new Mtr,krt(t)}s(Rrt,"abort");function Ltr(t,e){if(t.reason=null,t[o1]=null,t[dN]=null,!!e){if(e.aborted){Rrt(t);return}t[o1]=e,t[dN]=()=>{Rrt(t)},Ntr(t[o1],t[dN])}}s(Ltr,"addSignal");function krt(t){t[o1]&&("removeEventListener"in t[o1]?t[o1].removeEventListener("abort",t[dN]):t[o1].removeListener("abort",t[dN]),t[o1]=null,t[dN]=null)}s(krt,"removeSignal");Prt.exports={addSignal:Ltr,removeSignal:krt}});var Mrt=H((k0i,Nrt)=>{"use strict";d();var Ftr=require("node:assert"),{finished:Otr,PassThrough:Qtr}=require("node:stream"),{InvalidArgumentError:fN,InvalidReturnValueError:Utr}=Ko(),$A=qi(),{getResolveErrorBodyCallback:qtr}=Fbe(),{AsyncResource:Htr}=require("node:async_hooks"),{addSignal:$tr,removeSignal:Drt}=uQ(),Qbe=class extends Htr{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new fN("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:f}=e;try{if(typeof n!="function")throw new fN("invalid callback");if(typeof r!="function")throw new fN("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new fN("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new fN("invalid method");if(l&&typeof l!="function")throw new fN("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw $A.isStream(c)&&$A.destroy(c.on("error",$A.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=f||!1,$A.isStream(c)&&c.on("error",p=>{this.onError(p)}),$tr(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}Ftr(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,f=u==="raw"?$A.parseRawHeaders(r):$A.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:f});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?$A.parseHeaders(r):f)["content-type"];p=new Qtr,this.callback=null,this.runInAsyncScope(qtr,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:f})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:f,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new Utr("expected Writable");Otr(p,{readable:!1},h=>{let{callback:g,res:A,opaque:y,trailers:E,abort:b}=this;this.res=null,(h||!A.readable)&&$A.destroy(A,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:y,trailers:E}),h&&b()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;Drt(this),r&&(this.trailers=$A.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;Drt(this),this.factory=null,r?(this.res=null,$A.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,$A.destroy(o,e))}};function Brt(t,e,r){if(r===void 0)return new Promise((n,i)=>{Brt.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new Qbe(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(Brt,"stream");Nrt.exports=Brt});var Qrt=H((B0i,Ort)=>{"use strict";d();var{Readable:Frt,Duplex:Wtr,PassThrough:jtr}=require("node:stream"),{InvalidArgumentError:dQ,InvalidReturnValueError:Gtr,RequestAbortedError:Ube}=Ko(),qh=qi(),{AsyncResource:Vtr}=require("node:async_hooks"),{addSignal:ztr,removeSignal:Ktr}=uQ(),Lrt=require("node:assert"),pN=Symbol("resume"),qbe=class extends Frt{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[pN]=null}_read(){let{[pN]:e}=this;e&&(this[pN]=null,e())}_destroy(e,r){this._read(),r(e)}},Hbe=class extends Frt{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[pN]=e}_read(){this[pN]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new Ube),r(e)}},$be=class extends Vtr{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new dQ("invalid opts");if(typeof r!="function")throw new dQ("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new dQ("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new dQ("invalid method");if(a&&typeof a!="function")throw new dQ("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new qbe().on("error",qh.nop),this.ret=new Wtr({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,f)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?f():p[pN]=f},"write"),destroy:s((l,u)=>{let{body:f,req:p,res:m,ret:h,abort:g}=this;!l&&!h._readableState.endEmitted&&(l=new Ube),g&&l&&g(),qh.destroy(f,l),qh.destroy(p,l),qh.destroy(m,l),Ktr(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,ztr(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}Lrt(!i,"pipeline cannot be retried"),Lrt(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?qh.parseRawHeaders(r):qh.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new Hbe(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?qh.parseRawHeaders(r):qh.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",qh.nop),l}if(!c||typeof c.on!="function")throw new Gtr("expected Readable");c.on("data",l=>{let{ret:u,body:f}=this;!u.push(l)&&f.pause&&f.pause()}).on("error",l=>{let{ret:u}=this;qh.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||qh.destroy(l,new Ube)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,qh.destroy(r,e)}};function Ytr(t,e){try{let r=new $be(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new jtr().destroy(r)}}s(Ytr,"pipeline");Ort.exports=Ytr});var jrt=H((L0i,Wrt)=>{"use strict";d();var{InvalidArgumentError:Wbe,SocketError:Jtr}=Ko(),{AsyncResource:Xtr}=require("node:async_hooks"),Urt=qi(),{addSignal:Ztr,removeSignal:qrt}=uQ(),Hrt=require("node:assert"),jbe=class extends Xtr{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Wbe("invalid opts");if(typeof r!="function")throw new Wbe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Wbe("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,Ztr(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}Hrt(this.callback),this.abort=e,this.context=null}onHeaders(){throw new Jtr("bad upgrade",null)}onUpgrade(e,r,n){Hrt(e===101);let{callback:i,opaque:o,context:a}=this;qrt(this),this.callback=null;let c=this.responseHeaders==="raw"?Urt.parseRawHeaders(r):Urt.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;qrt(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function $rt(t,e){if(e===void 0)return new Promise((r,n)=>{$rt.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new jbe(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s($rt,"upgrade");Wrt.exports=$rt});var Yrt=H((Q0i,Krt)=>{"use strict";d();var trr=require("node:assert"),{AsyncResource:rrr}=require("node:async_hooks"),{InvalidArgumentError:Gbe,SocketError:nrr}=Ko(),Grt=qi(),{addSignal:irr,removeSignal:Vrt}=uQ(),Vbe=class extends rrr{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Gbe("invalid opts");if(typeof r!="function")throw new Gbe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Gbe("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,irr(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}trr(this.callback),this.abort=e,this.context=r}onHeaders(){throw new nrr("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;Vrt(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?Grt.parseRawHeaders(r):Grt.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;Vrt(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function zrt(t,e){if(e===void 0)return new Promise((r,n)=>{zrt.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Vbe(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(zrt,"connect");Krt.exports=zrt});var Jrt=H((H0i,mN)=>{"use strict";d();mN.exports.request=_rt();mN.exports.stream=Mrt();mN.exports.pipeline=Qrt();mN.exports.upgrade=jrt();mN.exports.connect=Yrt()});var Kbe=H((W0i,Xrt)=>{"use strict";d();var{UndiciError:orr}=Ko(),zbe=class t extends orr{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};Xrt.exports={MockNotMatchedError:zbe}});var hN=H((V0i,Zrt)=>{"use strict";d();Zrt.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var fQ=H((K0i,unt)=>{"use strict";d();var{MockNotMatchedError:uk}=Kbe(),{kDispatches:hte,kMockAgent:srr,kOriginalDispatch:arr,kOrigin:crr,kGetNetConnect:lrr}=hN(),{buildURL:urr}=qi(),{STATUS_CODES:drr}=require("node:http"),{types:{isPromise:frr}}=require("node:util");function Vx(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(Vx,"matchValue");function tnt(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(tnt,"lowerCaseEntries");function rnt(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):tnt(t)[e.toLocaleLowerCase()]}s(rnt,"getHeaderByName");function Xbe(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(Xbe,"buildHeadersFromArray");function nnt(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Xbe(e)),t.headers(e?tnt(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=rnt(e,r);if(!Vx(n,i))return!1}return!0}s(nnt,"matchHeaders");function ent(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(ent,"safeUrl");function prr(t,{path:e,method:r,body:n,headers:i}){let o=Vx(t.path,e),a=Vx(t.method,r),c=typeof t.body<"u"?Vx(t.body,n):!0,l=nnt(t,i);return o&&a&&c&&l}s(prr,"matchKey");function int(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(int,"getResponseData");function ont(t,e){let r=e.query?urr(e.path,e.query):e.path,n=typeof r=="string"?ent(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>Vx(ent(o),n));if(i.length===0)throw new uk(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>Vx(o,e.method)),i.length===0)throw new uk(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?Vx(o,e.body):!0),i.length===0)throw new uk(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>nnt(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new uk(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(ont,"getMockDispatch");function mrr(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(mrr,"addMockDispatch");function Ybe(t,e){let r=t.findIndex(n=>n.consumed?prr(n,e):!1);r!==-1&&t.splice(r,1)}s(Ybe,"deleteMockDispatch");function snt(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(snt,"buildKey");function Jbe(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(Jbe,"generateKeyValues");function ant(t){return drr[t]||"unknown"}s(ant,"getStatusText");async function hrr(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(hrr,"getResponse");function cnt(t,e){let r=snt(t),n=ont(this[hte],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:f}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!f&&p>=m,n.pending=p<m,l!==null)return Ybe(this[hte],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[hte])},u):h(this[hte]);function h(A,y=o){let E=Array.isArray(t.headers)?Xbe(t.headers):t.headers,b=typeof y=="function"?y({...t,headers:E}):y;if(frr(b)){b.then(L=>h(A,L));return}let S=int(b),R=Jbe(a),B=Jbe(c);e.onConnect?.(L=>e.onError(L),null),e.onHeaders?.(i,R,g,ant(i)),e.onData?.(Buffer.from(S)),e.onComplete?.(B),Ybe(A,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(cnt,"mockDispatch");function grr(){let t=this[srr],e=this[crr],r=this[arr];return s(function(i,o){if(t.isMockActive)try{cnt.call(this,i,o)}catch(a){if(a instanceof uk){let c=t[lrr]();if(c===!1)throw new uk(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(lnt(c,e))r.call(this,i,o);else throw new uk(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(grr,"buildMockDispatch");function lnt(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>Vx(n,r.host)))}s(lnt,"checkNetConnect");function Arr(t){if(t){let{agent:e,...r}=t;return r}}s(Arr,"buildMockOptions");unt.exports={getResponseData:int,getMockDispatch:ont,addMockDispatch:mrr,deleteMockDispatch:Ybe,buildKey:snt,generateKeyValues:Jbe,matchValue:Vx,getResponse:hrr,getStatusText:ant,mockDispatch:cnt,buildMockDispatch:grr,checkNetConnect:lnt,buildMockOptions:Arr,getHeaderByName:rnt,buildHeadersFromArray:Xbe}});var oIe=H((X0i,iIe)=>{"use strict";d();var{getResponseData:yrr,buildKey:Crr,addMockDispatch:Zbe}=fQ(),{kDispatches:gte,kDispatchKey:Ate,kDefaultHeaders:eIe,kDefaultTrailers:tIe,kContentLength:rIe,kMockDispatch:yte}=hN(),{InvalidArgumentError:s1}=Ko(),{buildURL:vrr}=qi(),gN=class{static{s(this,"MockScope")}constructor(e){this[yte]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new s1("waitInMs must be a valid integer > 0");return this[yte].delay=e,this}persist(){return this[yte].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new s1("repeatTimes must be a valid integer > 0");return this[yte].times=e,this}},nIe=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new s1("opts must be an object");if(typeof e.path>"u")throw new s1("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=vrr(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[Ate]=Crr(e),this[gte]=r,this[eIe]={},this[tIe]={},this[rIe]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=yrr(r),o=this[rIe]?{"content-length":i.length}:{},a={...this[eIe],...o,...n.headers},c={...this[tIe],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new s1("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new s1("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new s1("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=Zbe(this[gte],this[Ate],o);return new gN(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=Zbe(this[gte],this[Ate],n);return new gN(i)}replyWithError(e){if(typeof e>"u")throw new s1("error must be defined");let r=Zbe(this[gte],this[Ate],{error:e});return new gN(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new s1("headers must be defined");return this[eIe]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new s1("trailers must be defined");return this[tIe]=e,this}replyContentLength(){return this[rIe]=!0,this}};iIe.exports.MockInterceptor=nIe;iIe.exports.MockScope=gN});var cIe=H((tpi,Ant)=>{"use strict";d();var{promisify:xrr}=require("node:util"),Err=eQ(),{buildMockDispatch:brr}=fQ(),{kDispatches:dnt,kMockAgent:fnt,kClose:pnt,kOriginalClose:mnt,kOrigin:hnt,kOriginalDispatch:Irr,kConnected:sIe}=hN(),{MockInterceptor:Trr}=oIe(),gnt=Da(),{InvalidArgumentError:wrr}=Ko(),aIe=class extends Err{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new wrr("Argument opts.agent must implement Agent");this[fnt]=r.agent,this[hnt]=e,this[dnt]=[],this[sIe]=1,this[Irr]=this.dispatch,this[mnt]=this.close.bind(this),this.dispatch=brr.call(this),this.close=this[pnt]}get[gnt.kConnected](){return this[sIe]}intercept(e){return new Trr(e,this[dnt])}async[pnt](){await xrr(this[mnt])(),this[sIe]=0,this[fnt][gnt.kClients].delete(this[hnt])}};Ant.exports=aIe});var dIe=H((ipi,Int)=>{"use strict";d();var{promisify:Srr}=require("node:util"),_rr=aN(),{buildMockDispatch:Rrr}=fQ(),{kDispatches:ynt,kMockAgent:Cnt,kClose:vnt,kOriginalClose:xnt,kOrigin:Ent,kOriginalDispatch:krr,kConnected:lIe}=hN(),{MockInterceptor:Prr}=oIe(),bnt=Da(),{InvalidArgumentError:Drr}=Ko(),uIe=class extends _rr{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new Drr("Argument opts.agent must implement Agent");this[Cnt]=r.agent,this[Ent]=e,this[ynt]=[],this[lIe]=1,this[krr]=this.dispatch,this[xnt]=this.close.bind(this),this.dispatch=Rrr.call(this),this.close=this[vnt]}get[bnt.kConnected](){return this[lIe]}intercept(e){return new Prr(e,this[ynt])}async[vnt](){await Srr(this[xnt])(),this[lIe]=0,this[Cnt][bnt.kClients].delete(this[Ent])}};Int.exports=uIe});var wnt=H((cpi,Tnt)=>{"use strict";d();var Brr={pronoun:"it",is:"is",was:"was",this:"this"},Nrr={pronoun:"they",is:"are",was:"were",this:"these"};Tnt.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?Brr:Nrr,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var _nt=H((fpi,Snt)=>{"use strict";d();var{Transform:Mrr}=require("node:stream"),{Console:Lrr}=require("node:console"),Frr=process.versions.icu?"\u2705":"Y ",Orr=process.versions.icu?"\u274C":"N ";Snt.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new Mrr({transform(r,n,i){i(null,r)}}),this.logger=new Lrr({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?Frr:Orr,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var Dnt=H((hpi,Pnt)=>{"use strict";d();var{kClients:dk}=Da(),Qrr=cN(),{kAgent:fIe,kMockAgentSet:Cte,kMockAgentGet:Rnt,kDispatches:pIe,kIsMockActive:vte,kNetConnect:fk,kGetNetConnect:Urr,kOptions:xte,kFactory:Ete}=hN(),qrr=cIe(),Hrr=dIe(),{matchValue:$rr,buildMockOptions:Wrr}=fQ(),{InvalidArgumentError:knt,UndiciError:jrr}=Ko(),Grr=D7(),Vrr=wnt(),zrr=_nt(),mIe=class extends Grr{static{s(this,"MockAgent")}constructor(e){if(super(e),this[fk]=!0,this[vte]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new knt("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new Qrr(e);this[fIe]=r,this[dk]=r[dk],this[xte]=Wrr(e)}get(e){let r=this[Rnt](e);return r||(r=this[Ete](e),this[Cte](e,r)),r}dispatch(e,r){return this.get(e.origin),this[fIe].dispatch(e,r)}async close(){await this[fIe].close(),this[dk].clear()}deactivate(){this[vte]=!1}activate(){this[vte]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[fk])?this[fk].push(e):this[fk]=[e];else if(typeof e>"u")this[fk]=!0;else throw new knt("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[fk]=!1}get isMockActive(){return this[vte]}[Cte](e,r){this[dk].set(e,r)}[Ete](e){let r=Object.assign({agent:this},this[xte]);return this[xte]&&this[xte].connections===1?new qrr(e,r):new Hrr(e,r)}[Rnt](e){let r=this[dk].get(e);if(r)return r;if(typeof e!="string"){let n=this[Ete]("http://localhost:9999");return this[Cte](e,n),n}for(let[n,i]of Array.from(this[dk]))if(i&&typeof n!="string"&&$rr(n,e)){let o=this[Ete](e);return this[Cte](e,o),o[pIe]=i[pIe],o}}[Urr](){return this[fk]}pendingInterceptors(){let e=this[dk];return Array.from(e.entries()).flatMap(([r,n])=>n[pIe].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new zrr}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new Vrr("interceptor","interceptors").pluralize(r.length);throw new jrr(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};Pnt.exports=mIe});var bte=H((ypi,Lnt)=>{"use strict";d();var Bnt=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:Krr}=Ko(),Yrr=cN();Mnt()===void 0&&Nnt(new Yrr);function Nnt(t){if(!t||typeof t.dispatch!="function")throw new Krr("Argument agent must implement Agent");Object.defineProperty(globalThis,Bnt,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(Nnt,"setGlobalDispatcher");function Mnt(){return globalThis[Bnt]}s(Mnt,"getGlobalDispatcher");Lnt.exports={setGlobalDispatcher:Nnt,getGlobalDispatcher:Mnt}});var Ite=H((Epi,Fnt)=>{"use strict";d();Fnt.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var Qnt=H((Tpi,Ont)=>{"use strict";d();var Jrr=tte();Ont.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new Jrr(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var qnt=H((_pi,Unt)=>{"use strict";d();var Xrr=pte();Unt.exports=t=>e=>s(function(n,i){return e(n,new Xrr({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var $nt=H((Ppi,Hnt)=>{"use strict";d();var Zrr=qi(),{InvalidArgumentError:enr,RequestAbortedError:tnr}=Ko(),rnr=Ite(),hIe=class extends rnr{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new enr("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=Zrr.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new tnr(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function nnr({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new hIe({maxSize:o},i);return e(n,a)},"Intercept")}s(nnr,"createDumpInterceptor");Hnt.exports=nnr});var Gnt=H((Npi,jnt)=>{"use strict";d();var{isIP:inr}=require("node:net"),{lookup:onr}=require("node:dns"),snr=Ite(),{InvalidArgumentError:AN,InformationalError:anr}=Ko(),Wnt=Math.pow(2,31)-1,gIe=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new anr("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),f;typeof u.port=="number"?f=`:${u.port}`:e.port!==""?f=`:${e.port}`:f="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${f}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){onr(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===Wnt?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===Wnt?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new AIe(this,e,r)}},AIe=class extends snr{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};jnt.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new AN("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new AN("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new AN("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new AN("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new AN("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new AN("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new gIe(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return inr(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(f,p)=>{if(f)return l.onError(f);let m=null;m={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var pk=H((Fpi,Znt)=>{"use strict";d();var{kConstruct:cnr}=Da(),{kEnumerableProperty:yN}=qi(),{iteratorMixin:lnr,isValidHeaderName:pQ,isValidHeaderValue:znt}=Vp(),{webidl:Po}=td(),yIe=require("node:assert"),Tte=require("node:util"),fl=Symbol("headers map"),Yp=Symbol("headers map sorted");function Vnt(t){return t===10||t===13||t===9||t===32}s(Vnt,"isHTTPWhiteSpaceCharCode");function Knt(t){let e=0,r=t.length;for(;r>e&&Vnt(t.charCodeAt(r-1));)--r;for(;r>e&&Vnt(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(Knt,"headerValueNormalize");function Ynt(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Po.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});CIe(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)CIe(t,r[n],e[r[n]])}else throw Po.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(Ynt,"fill");function CIe(t,e,r){if(r=Knt(r),pQ(e)){if(!znt(r))throw Po.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Po.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(Xnt(t)==="immutable")throw new TypeError("immutable");return vIe(t).append(e,r,!1)}s(CIe,"appendHeader");function Jnt(t,e){return t[0]<e[0]?-1:1}s(Jnt,"compareHeaderName");var wte=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[fl]=new Map(e[fl]),this[Yp]=e[Yp],this.cookies=e.cookies===null?null:[...e.cookies]):(this[fl]=new Map(e),this[Yp]=null)}contains(e,r){return this[fl].has(r?e:e.toLowerCase())}clear(){this[fl].clear(),this[Yp]=null,this.cookies=null}append(e,r,n){this[Yp]=null;let i=n?e:e.toLowerCase(),o=this[fl].get(i);if(o){let a=i==="cookie"?"; ":", ";this[fl].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[fl].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[Yp]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[fl].set(i,{name:e,value:r})}delete(e,r){this[Yp]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[fl].delete(e)}get(e,r){return this[fl].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[fl])yield[e,r]}get entries(){let e={};if(this[fl].size!==0)for(let{name:r,value:n}of this[fl].values())e[r]=n;return e}rawValues(){return this[fl].values()}get entriesList(){let e=[];if(this[fl].size!==0)for(let{0:r,1:{name:n,value:i}}of this[fl])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[fl].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[fl][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],yIe(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,f,p;o<e;++o){for(p=n.next().value,f=r[o]=[p[0],p[1].value],yIe(f[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=f[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=f}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[fl])r[n++]=[i,o],yIe(o!==null);return r.sort(Jnt)}}},WA=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Po.util.markAsUncloneable(this),e!==cnr&&(this.#t=new wte,this.#e="none",e!==void 0&&(e=Po.converters.HeadersInit(e,"Headers contructor","init"),Ynt(this,e)))}append(e,r){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Po.converters.ByteString(e,n,"name"),r=Po.converters.ByteString(r,n,"value"),CIe(this,e,r)}delete(e){if(Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,1,"Headers.delete"),e=Po.converters.ByteString(e,"Headers.delete","name"),!pQ(e))throw Po.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Po.converters.ByteString(e,r,"name"),!pQ(e))throw Po.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Po.converters.ByteString(e,r,"name"),!pQ(e))throw Po.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Po.brandCheck(this,t),Po.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Po.converters.ByteString(e,n,"name"),r=Po.converters.ByteString(r,n,"value"),r=Knt(r),pQ(e)){if(!znt(r))throw Po.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Po.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Po.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[Yp](){if(this.#t[Yp])return this.#t[Yp];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[Yp]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[Yp]=e}[Tte.inspect.custom](e,r){return r.depth??=e,`Headers ${Tte.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:Xnt,setHeadersGuard:unr,getHeadersList:vIe,setHeadersList:dnr}=WA;Reflect.deleteProperty(WA,"getHeadersGuard");Reflect.deleteProperty(WA,"setHeadersGuard");Reflect.deleteProperty(WA,"getHeadersList");Reflect.deleteProperty(WA,"setHeadersList");lnr("Headers",WA,Yp,0,1);Object.defineProperties(WA.prototype,{append:yN,delete:yN,get:yN,has:yN,set:yN,getSetCookie:yN,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[Tte.inspect.custom]:{enumerable:!1}});Po.converters.HeadersInit=function(t,e,r){if(Po.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!Tte.types.isProxy(t)&&n===WA.prototype.entries)try{return vIe(t).entriesList}catch{}return typeof n=="function"?Po.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Po.converters["record<ByteString, ByteString>"](t,e,r)}throw Po.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};Znt.exports={fill:Ynt,compareHeaderName:Jnt,Headers:WA,HeadersList:wte,getHeadersGuard:Xnt,setHeadersGuard:unr,setHeadersList:dnr,getHeadersList:vIe}});var hQ=H((Upi,lit)=>{"use strict";d();var{Headers:oit,HeadersList:eit,fill:fnr,getHeadersGuard:pnr,setHeadersGuard:sit,setHeadersList:ait}=pk(),{extractBody:tit,cloneBody:mnr,mixinBody:hnr,hasFinalizationRegistry:gnr,streamRegistry:Anr,bodyUnusable:ynr}=eN(),xIe=qi(),rit=require("node:util"),{kEnumerableProperty:Jp}=xIe,{isValidReasonPhrase:Cnr,isCancelled:vnr,isAborted:xnr,isBlobLike:Enr,serializeJavascriptValueToJSONString:bnr,isErrorLike:Inr,isomorphicEncode:Tnr,environmentSettingsObject:wnr}=Vp(),{redirectStatusSet:Snr,nullBodyStatus:_nr}=M7(),{kState:fc,kHeaders:zx}=ew(),{webidl:Ei}=td(),{FormData:Rnr}=q7(),{URLSerializer:nit}=D0(),{kConstruct:_te}=Da(),EIe=require("node:assert"),{types:knr}=require("node:util"),Pnr=new TextEncoder("utf-8"),mk=class t{static{s(this,"Response")}static error(){return mQ(Rte(),"immutable")}static json(e,r={}){Ei.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=Ei.converters.ResponseInit(r));let n=Pnr.encode(bnr(e)),i=tit(n),o=mQ(CN({}),"response");return iit(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){Ei.argumentLengthCheck(arguments,1,"Response.redirect"),e=Ei.converters.USVString(e),r=Ei.converters["unsigned short"](r);let n;try{n=new URL(e,wnr.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!Snr.has(r))throw new RangeError(`Invalid status code ${r}`);let i=mQ(CN({}),"immutable");i[fc].status=r;let o=Tnr(nit(n));return i[fc].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(Ei.util.markAsUncloneable(this),e===_te)return;e!==null&&(e=Ei.converters.BodyInit(e)),r=Ei.converters.ResponseInit(r),this[fc]=CN({}),this[zx]=new oit(_te),sit(this[zx],"response"),ait(this[zx],this[fc].headersList);let n=null;if(e!=null){let[i,o]=tit(e);n={body:i,type:o}}iit(this,r,n)}get type(){return Ei.brandCheck(this,t),this[fc].type}get url(){Ei.brandCheck(this,t);let e=this[fc].urlList,r=e[e.length-1]??null;return r===null?"":nit(r,!0)}get redirected(){return Ei.brandCheck(this,t),this[fc].urlList.length>1}get status(){return Ei.brandCheck(this,t),this[fc].status}get ok(){return Ei.brandCheck(this,t),this[fc].status>=200&&this[fc].status<=299}get statusText(){return Ei.brandCheck(this,t),this[fc].statusText}get headers(){return Ei.brandCheck(this,t),this[zx]}get body(){return Ei.brandCheck(this,t),this[fc].body?this[fc].body.stream:null}get bodyUsed(){return Ei.brandCheck(this,t),!!this[fc].body&&xIe.isDisturbed(this[fc].body.stream)}clone(){if(Ei.brandCheck(this,t),ynr(this))throw Ei.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=bIe(this[fc]);return mQ(e,pnr(this[zx]))}[rit.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${rit.formatWithOptions(r,n)}`}};hnr(mk);Object.defineProperties(mk.prototype,{type:Jp,url:Jp,status:Jp,ok:Jp,redirected:Jp,statusText:Jp,headers:Jp,clone:Jp,body:Jp,bodyUsed:Jp,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(mk,{json:Jp,redirect:Jp,error:Jp});function bIe(t){if(t.internalResponse)return cit(bIe(t.internalResponse),t.type);let e=CN({...t,body:null});return t.body!=null&&(e.body=mnr(e,t.body)),e}s(bIe,"cloneResponse");function CN(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new eit(t?.headersList):new eit,urlList:t?.urlList?[...t.urlList]:[]}}s(CN,"makeResponse");function Rte(t){let e=Inr(t);return CN({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(Rte,"makeNetworkError");function Dnr(t){return t.type==="error"&&t.status===0}s(Dnr,"isNetworkError");function Ste(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return EIe(!(n in e)),r[n]=i,!0}})}s(Ste,"makeFilteredResponse");function cit(t,e){if(e==="basic")return Ste(t,{type:"basic",headersList:t.headersList});if(e==="cors")return Ste(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return Ste(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return Ste(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});EIe(!1)}s(cit,"filterResponse");function Bnr(t,e=null){return EIe(vnr(t)),xnr(t)?Rte(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):Rte(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(Bnr,"makeAppropriateNetworkError");function iit(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!Cnr(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[fc].status=e.status),"statusText"in e&&e.statusText!=null&&(t[fc].statusText=e.statusText),"headers"in e&&e.headers!=null&&fnr(t[zx],e.headers),r){if(_nr.includes(t.status))throw Ei.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[fc].body=r.body,r.type!=null&&!t[fc].headersList.contains("content-type",!0)&&t[fc].headersList.append("content-type",r.type,!0)}}s(iit,"initializeResponse");function mQ(t,e){let r=new mk(_te);return r[fc]=t,r[zx]=new oit(_te),ait(r[zx],t.headersList),sit(r[zx],e),gnr&&t.body?.stream&&Anr.register(r,new WeakRef(t.body.stream)),r}s(mQ,"fromInnerResponse");Ei.converters.ReadableStream=Ei.interfaceConverter(ReadableStream);Ei.converters.FormData=Ei.interfaceConverter(Rnr);Ei.converters.URLSearchParams=Ei.interfaceConverter(URLSearchParams);Ei.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?Ei.converters.USVString(t,e,r):Enr(t)?Ei.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||knr.isArrayBuffer(t)?Ei.converters.BufferSource(t,e,r):xIe.isFormDataLike(t)?Ei.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?Ei.converters.URLSearchParams(t,e,r):Ei.converters.DOMString(t,e,r)};Ei.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?Ei.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:Ei.converters.XMLHttpRequestBodyInit(t,e,r)};Ei.converters.ResponseInit=Ei.dictionaryConverter([{key:"status",converter:Ei.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:Ei.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:Ei.converters.HeadersInit}]);lit.exports={isNetworkError:Dnr,makeNetworkError:Rte,makeResponse:CN,makeAppropriateNetworkError:Bnr,filterResponse:cit,Response:mk,cloneResponse:bIe,fromInnerResponse:mQ}});var pit=H(($pi,fit)=>{"use strict";d();var{kConnected:uit,kSize:dit}=Da(),IIe=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[uit]===0&&this.value[dit]===0?void 0:this.value}},TIe=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[uit]===0&&e[dit]===0&&this.finalizer(r)})}unregister(e){}};fit.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:IIe,FinalizationRegistry:TIe}):{WeakRef,FinalizationRegistry}}});var vN=H((Gpi,_it)=>{"use strict";d();var{extractBody:Nnr,mixinBody:Mnr,cloneBody:Lnr,bodyUnusable:mit}=eN(),{Headers:bit,fill:Fnr,HeadersList:Bte,setHeadersGuard:SIe,getHeadersGuard:Onr,setHeadersList:Iit,getHeadersList:hit}=pk(),{FinalizationRegistry:Qnr}=pit()(),Pte=qi(),git=require("node:util"),{isValidHTTPToken:Unr,sameOrigin:Ait,environmentSettingsObject:kte}=Vp(),{forbiddenMethodsSet:qnr,corsSafeListedMethodsSet:Hnr,referrerPolicy:$nr,requestRedirect:Wnr,requestMode:jnr,requestCredentials:Gnr,requestCache:Vnr,requestDuplex:znr}=M7(),{kEnumerableProperty:pl,normalizedMethodRecordsBase:Knr,normalizedMethodRecords:Ynr}=Pte,{kHeaders:Xp,kSignal:Dte,kState:aa,kDispatcher:wIe}=ew(),{webidl:Nn}=td(),{URLSerializer:Jnr}=D0(),{kConstruct:Nte}=Da(),Xnr=require("node:assert"),{getMaxListeners:yit,setMaxListeners:Cit,getEventListeners:Znr,defaultMaxListeners:vit}=require("node:events"),eir=Symbol("abortController"),Tit=new Qnr(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),Mte=new WeakMap;function xit(t){return e;function e(){let r=t.deref();if(r!==void 0){Tit.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=Mte.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}Mte.delete(r.signal)}}}}s(xit,"buildAbort");var Eit=!1,dw=class t{static{s(this,"Request")}constructor(e,r={}){if(Nn.util.markAsUncloneable(this),e===Nte)return;let n="Request constructor";Nn.argumentLengthCheck(arguments,1,n),e=Nn.converters.RequestInfo(e,n,"input"),r=Nn.converters.RequestInit(r,n,"init");let i=null,o=null,a=kte.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[wIe]=r.dispatcher;let E;try{E=new URL(e,a)}catch(b){throw new TypeError("Failed to parse URL from "+e,{cause:b})}if(E.username||E.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=Lte({urlList:[E]}),o="cors"}else this[wIe]=r.dispatcher||e[wIe],Xnr(e instanceof t),i=e[aa],c=e[Dte];let l=kte.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&Ait(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=Lte({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:kte.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let f=Object.keys(r).length!==0;if(f&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let E=r.referrer;if(E==="")i.referrer="no-referrer";else{let b;try{b=new URL(E,a)}catch(S){throw new TypeError(`Referrer "${E}" is not a valid URL.`,{cause:S})}b.protocol==="about:"&&b.hostname==="client"||l&&!Ait(b,kte.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw Nn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let E=r.method,b=Ynr[E];if(b!==void 0)i.method=b;else{if(!Unr(E))throw new TypeError(`'${E}' is not a valid HTTP method.`);let S=E.toUpperCase();if(qnr.has(S))throw new TypeError(`'${E}' HTTP method is unsupported.`);E=Knr[S]??E,i.method=E}!Eit&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),Eit=!0)}r.signal!==void 0&&(c=r.signal),this[aa]=i;let m=new AbortController;if(this[Dte]=m.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)m.abort(c.reason);else{this[eir]=m;let E=new WeakRef(m),b=xit(E);try{(typeof yit=="function"&&yit(c)===vit||Znr(c,"abort").length>=vit)&&Cit(1500,c)}catch{}Pte.addAbortListener(c,b),Tit.register(m,{signal:c,abort:b},b)}}if(this[Xp]=new bit(Nte),Iit(this[Xp],i.headersList),SIe(this[Xp],"request"),p==="no-cors"){if(!Hnr.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);SIe(this[Xp],"request-no-cors")}if(f){let E=hit(this[Xp]),b=r.headers!==void 0?r.headers:new Bte(E);if(E.clear(),b instanceof Bte){for(let{name:S,value:R}of b.rawValues())E.append(S,R,!1);E.cookies=b.cookies}else Fnr(this[Xp],b)}let h=e instanceof t?e[aa].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[E,b]=Nnr(r.body,i.keepalive);g=E,b&&!hit(this[Xp]).contains("content-type",!0)&&this[Xp].append("content-type",b)}let A=g??h;if(A!=null&&A.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let y=A;if(g==null&&h!=null){if(mit(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let E=new TransformStream;h.stream.pipeThrough(E),y={source:h.source,length:h.length,stream:E.readable}}this[aa].body=y}get method(){return Nn.brandCheck(this,t),this[aa].method}get url(){return Nn.brandCheck(this,t),Jnr(this[aa].url)}get headers(){return Nn.brandCheck(this,t),this[Xp]}get destination(){return Nn.brandCheck(this,t),this[aa].destination}get referrer(){return Nn.brandCheck(this,t),this[aa].referrer==="no-referrer"?"":this[aa].referrer==="client"?"about:client":this[aa].referrer.toString()}get referrerPolicy(){return Nn.brandCheck(this,t),this[aa].referrerPolicy}get mode(){return Nn.brandCheck(this,t),this[aa].mode}get credentials(){return this[aa].credentials}get cache(){return Nn.brandCheck(this,t),this[aa].cache}get redirect(){return Nn.brandCheck(this,t),this[aa].redirect}get integrity(){return Nn.brandCheck(this,t),this[aa].integrity}get keepalive(){return Nn.brandCheck(this,t),this[aa].keepalive}get isReloadNavigation(){return Nn.brandCheck(this,t),this[aa].reloadNavigation}get isHistoryNavigation(){return Nn.brandCheck(this,t),this[aa].historyNavigation}get signal(){return Nn.brandCheck(this,t),this[Dte]}get body(){return Nn.brandCheck(this,t),this[aa].body?this[aa].body.stream:null}get bodyUsed(){return Nn.brandCheck(this,t),!!this[aa].body&&Pte.isDisturbed(this[aa].body.stream)}get duplex(){return Nn.brandCheck(this,t),"half"}clone(){if(Nn.brandCheck(this,t),mit(this))throw new TypeError("unusable");let e=wit(this[aa]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=Mte.get(this.signal);n===void 0&&(n=new Set,Mte.set(this.signal,n));let i=new WeakRef(r);n.add(i),Pte.addAbortListener(r.signal,xit(i))}return Sit(e,r.signal,Onr(this[Xp]))}[git.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${git.formatWithOptions(r,n)}`}};Mnr(dw);function Lte(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new Bte(t.headersList):new Bte}}s(Lte,"makeRequest");function wit(t){let e=Lte({...t,body:null});return t.body!=null&&(e.body=Lnr(e,t.body)),e}s(wit,"cloneRequest");function Sit(t,e,r){let n=new dw(Nte);return n[aa]=t,n[Dte]=e,n[Xp]=new bit(Nte),Iit(n[Xp],t.headersList),SIe(n[Xp],r),n}s(Sit,"fromInnerRequest");Object.defineProperties(dw.prototype,{method:pl,url:pl,headers:pl,redirect:pl,clone:pl,signal:pl,duplex:pl,destination:pl,body:pl,bodyUsed:pl,isHistoryNavigation:pl,isReloadNavigation:pl,keepalive:pl,integrity:pl,cache:pl,credentials:pl,attribute:pl,referrerPolicy:pl,referrer:pl,mode:pl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Nn.converters.Request=Nn.interfaceConverter(dw);Nn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?Nn.converters.USVString(t,e,r):t instanceof dw?Nn.converters.Request(t,e,r):Nn.converters.USVString(t,e,r)};Nn.converters.AbortSignal=Nn.interfaceConverter(AbortSignal);Nn.converters.RequestInit=Nn.dictionaryConverter([{key:"method",converter:Nn.converters.ByteString},{key:"headers",converter:Nn.converters.HeadersInit},{key:"body",converter:Nn.nullableConverter(Nn.converters.BodyInit)},{key:"referrer",converter:Nn.converters.USVString},{key:"referrerPolicy",converter:Nn.converters.DOMString,allowedValues:$nr},{key:"mode",converter:Nn.converters.DOMString,allowedValues:jnr},{key:"credentials",converter:Nn.converters.DOMString,allowedValues:Gnr},{key:"cache",converter:Nn.converters.DOMString,allowedValues:Vnr},{key:"redirect",converter:Nn.converters.DOMString,allowedValues:Wnr},{key:"integrity",converter:Nn.converters.DOMString},{key:"keepalive",converter:Nn.converters.boolean},{key:"signal",converter:Nn.nullableConverter(t=>Nn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Nn.converters.any},{key:"duplex",converter:Nn.converters.DOMString,allowedValues:znr},{key:"dispatcher",converter:Nn.converters.any}]);_it.exports={Request:dw,makeRequest:Lte,fromInnerRequest:Sit,cloneRequest:wit}});var AQ=H((Kpi,$it)=>{"use strict";d();var{makeNetworkError:ps,makeAppropriateNetworkError:Fte,filterResponse:_Ie,makeResponse:Ote,fromInnerResponse:tir}=hQ(),{HeadersList:Rit}=pk(),{Request:rir,cloneRequest:nir}=vN(),fw=require("node:zlib"),{bytesMatch:iir,makePolicyContainer:oir,clonePolicyContainer:sir,requestBadPort:air,TAOCheck:cir,appendRequestOriginHeader:lir,responseLocationURL:uir,requestCurrentURL:a1,setRequestReferrerPolicyOnRedirect:dir,tryUpgradeRequestToAPotentiallyTrustworthyURL:fir,createOpaqueTimingInfo:BIe,appendFetchMetadata:pir,corsCheck:mir,crossOriginResourcePolicyCheck:hir,determineRequestsReferrer:gir,coarsenedSharedCurrentTime:gQ,createDeferredPromise:Air,isBlobLike:yir,sameOrigin:DIe,isCancelled:hk,isAborted:kit,isErrorLike:Cir,fullyReadBody:vir,readableStreamClose:xir,isomorphicEncode:Qte,urlIsLocal:Eir,urlIsHttpHttpsScheme:NIe,urlHasHttpsScheme:bir,clampAndCoarsenConnectionTimingInfo:Iir,simpleRangeHeaderValue:Tir,buildContentRange:wir,createInflate:Sir,extractMimeType:_ir}=Vp(),{kState:Nit,kDispatcher:Rir}=ew(),gk=require("node:assert"),{safelyExtractBody:MIe,extractBody:Pit}=eN(),{redirectStatusSet:Mit,nullBodyStatus:Lit,safeMethodsSet:kir,requestBodyHeader:Pir,subresourceSet:Dir}=M7(),Bir=require("node:events"),{Readable:Nir,pipeline:Mir,finished:Lir}=require("node:stream"),{addAbortListener:Fir,isErrored:Oir,isReadable:Ute,bufferToLowerCasedHeaderName:Dit}=qi(),{dataURLProcessor:Qir,serializeAMimeType:Uir,minimizeSupportedMimeType:qir}=D0(),{getGlobalDispatcher:Hir}=bte(),{webidl:$ir}=td(),{STATUS_CODES:Wir}=require("node:http"),jir=["GET","HEAD"],Gir=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",RIe,qte=class extends Bir{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Vir(t){Fit(t,"fetch")}s(Vir,"handleFetchDone");function zir(t,e=void 0){$ir.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=Air(),n;try{n=new rir(t,e)}catch(f){return r.reject(f),r.promise}let i=n[Nit];if(n.signal.aborted)return kIe(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return Fir(n.signal,()=>{c=!0,gk(l!=null),l.abort(n.signal.reason);let f=a?.deref();kIe(r,i,f,n.signal.reason)}),l=Qit({request:i,processResponseEndOfBody:Vir,processResponse:s(f=>{if(!c){if(f.aborted){kIe(r,i,a,l.serializedAbortReason);return}if(f.type==="error"){r.reject(new TypeError("fetch failed",{cause:f.error}));return}a=new WeakRef(tir(f,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[Rir]}),r.promise}s(zir,"fetch");function Fit(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;NIe(r)&&n!==null&&(t.timingAllowPassed||(n=BIe({startTime:n.startTime}),i=""),n.endTime=gQ(),t.timingInfo=n,Oit(n,r.href,e,globalThis,i))}s(Fit,"finalizeAndReportTiming");var Oit=performance.markResourceTiming;function kIe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&Ute(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[Nit];i.body!=null&&Ute(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(kIe,"abortFetch");function Qit({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=Hir()}){gk(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let f=gQ(u),p=BIe({startTime:f}),m={controller:new qte(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return gk(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=sir(t.client.policyContainer):t.policyContainer=oir()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,Dir.has(t.destination),Uit(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(Qit,"fetching");async function Uit(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!Eir(a1(r))&&(n=ps("local URLs only")),fir(r),air(r)==="blocked"&&(n=ps("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=gir(r)),n===null&&(n=await(async()=>{let o=a1(r);return DIe(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await Bit(t)):r.mode==="same-origin"?ps('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?ps('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await Bit(t)):NIe(a1(r))?(r.responseTainting="cors",await qit(t)):ps("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=_Ie(n,"basic"):r.responseTainting==="cors"?n=_Ie(n,"cors"):r.responseTainting==="opaque"?n=_Ie(n,"opaque"):gk(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=ps()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Lit.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>PIe(t,ps(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!iir(c,r.integrity)){o("integrity mismatch");return}n.body=MIe(c)[0],PIe(t,n)},"processBody");await vir(n.body,a,o)}else PIe(t,n)}s(Uit,"mainFetch");function Bit(t){if(hk(t)&&t.request.redirectCount===0)return Promise.resolve(Fte(t));let{request:e}=t,{protocol:r}=a1(e);switch(r){case"about:":return Promise.resolve(ps("about scheme is not supported"));case"blob:":{RIe||(RIe=require("node:buffer").resolveObjectURL);let n=a1(e);if(n.search.length!==0)return Promise.resolve(ps("NetworkError when attempting to fetch resource."));let i=RIe(n.toString());if(e.method!=="GET"||!yir(i))return Promise.resolve(ps("invalid method"));let o=Ote(),a=i.size,c=Qte(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),f=Tir(u,!0);if(f==="failure")return Promise.resolve(ps("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=f;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(ps("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,l),g=Pit(h);o.body=g[0];let A=Qte(`${h.size}`),y=wir(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",A,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",y,!0)}else{let u=Pit(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=a1(e),i=Qir(n);if(i==="failure")return Promise.resolve(ps("failed to fetch the data URL"));let o=Uir(i.mimeType);return Promise.resolve(Ote({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:MIe(i.body)[0]}))}case"file:":return Promise.resolve(ps("not implemented... yet..."));case"http:":case"https:":return qit(t).catch(n=>ps(n));default:return Promise.resolve(ps("unknown scheme"))}}s(Bit,"schemeFetch");function Kir(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(Kir,"finalizeResponse");function PIe(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=BIe(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let f=_ir(e.headersList);f!=="failure"&&(l.contentType=qir(f))}t.request.initiatorType!=null&&Oit(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():Lir(i.body.stream,()=>{n()})}s(PIe,"fetchFinale");async function qit(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await Hit(t),e.responseTainting==="cors"&&mir(e,r)==="failure")return ps("cors failure");cir(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&hir(e.origin,e.client,e.destination,n)==="blocked"?ps("blocked"):(Mit.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=ps("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await Yir(t,r):gk(!1)),r.timingInfo=i,r)}s(qit,"httpFetch");function Yir(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=uir(n,a1(r).hash),i==null)return e}catch(a){return Promise.resolve(ps(a))}if(!NIe(i))return Promise.resolve(ps("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(ps("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!DIe(r,i))return Promise.resolve(ps('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(ps('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(ps());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!jir.includes(r.method)){r.method="GET",r.body=null;for(let a of Pir)r.headersList.delete(a)}DIe(a1(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(gk(r.body.source!=null),r.body=MIe(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=gQ(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),dir(r,n),Uit(t,!0)}s(Yir,"httpRedirectFetch");async function Hit(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=nir(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",f=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),f!=null&&(p=Qte(`${f}`)),p!=null&&o.headersList.append("content-length",p,!0),f!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",Qte(o.referrer.href),!0),lir(o),pir(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",Gir),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(bir(a1(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return ps("only if cached");let m=await Jir(i,u,r);!kir.has(o.method)&&m.status>=200&&m.status<=399,l&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?ps():hk(t)?Fte(t):ps("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(hk(t))return Fte(t);t.controller.connection.destroy(),a=await Hit(t,e,!0)}return a}s(Hit,"httpNetworkOrCacheFetch");async function Jir(t,e=!1,r=!1){gk(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,A=!0){this.destroyed||(this.destroyed=!0,A&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(E){hk(t)||(yield E,t.processRequestBodyChunkLength?.(E.byteLength))},"processBodyChunk"),A=s(()=>{hk(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),y=s(E=>{hk(t)||(E.name==="AbortError"?t.controller.abort():t.controller.terminate(E))},"processBodyError");l=async function*(){try{for await(let E of n.body.stream)yield*g(E);A()}catch(E){y(E)}}()}try{let{body:g,status:A,statusText:y,headersList:E,socket:b}=await h({body:l});if(b)i=Ote({status:A,statusText:y,headersList:E,socket:b});else{let S=g[Symbol.asyncIterator]();t.controller.next=()=>S.next(),i=Ote({status:A,statusText:y,headersList:E})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),Fte(t,g)):ps(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),f=s(g=>{hk(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await f(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,A;try{let{done:E,value:b}=await t.controller.next();if(kit(t))break;g=E?void 0:b}catch(E){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=E,A=!0)}if(g===void 0){xir(t.controller.controller),Kir(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,A){t.controller.terminate(g);return}let y=new Uint8Array(g);if(y.byteLength&&t.controller.controller.enqueue(y),Oir(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){kit(t)?(i.aborted=!0,Ute(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):Ute(p)&&t.controller.controller.error(new TypeError("terminated",{cause:Cir(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let A=a1(n),y=t.controller.dispatcher;return new Promise((E,b)=>y.dispatch({path:A.pathname+A.search,origin:A.origin,method:n.method,body:y.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(S){let{connection:R}=t.controller;o.finalConnectionTimingInfo=Iir(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),R.destroyed?S(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",S),this.abort=R.abort=S),o.finalNetworkRequestStartTime=gQ(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=gQ(t.crossOriginIsolatedCapability)},onHeaders(S,R,B,L){if(S<200)return;let O=[],Y="",V=new Rit;for(let J=0;J<R.length;J+=2)V.append(Dit(R[J]),R[J+1].toString("latin1"),!0);let z=V.get("content-encoding",!0);z&&(O=z.toLowerCase().split(",").map(J=>J.trim())),Y=V.get("location",!0),this.body=new Nir({read:B});let Q=[],U=Y&&n.redirect==="follow"&&Mit.has(S);if(O.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Lit.includes(S)&&!U)for(let J=O.length-1;J>=0;--J){let j=O[J];if(j==="x-gzip"||j==="gzip")Q.push(fw.createGunzip({flush:fw.constants.Z_SYNC_FLUSH,finishFlush:fw.constants.Z_SYNC_FLUSH}));else if(j==="deflate")Q.push(Sir({flush:fw.constants.Z_SYNC_FLUSH,finishFlush:fw.constants.Z_SYNC_FLUSH}));else if(j==="br")Q.push(fw.createBrotliDecompress({flush:fw.constants.BROTLI_OPERATION_FLUSH,finishFlush:fw.constants.BROTLI_OPERATION_FLUSH}));else{Q.length=0;break}}let Z=this.onError.bind(this);return E({status:S,statusText:L,headersList:V,body:Q.length?Mir(this.body,...Q,J=>{J&&this.onError(J)}).on("error",Z):this.body.on("error",Z)}),!0},onData(S){if(t.controller.dump)return;let R=S;return o.encodedBodySize+=R.byteLength,this.body.push(R)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(S){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(S),t.controller.terminate(S),b(S)},onUpgrade(S,R,B){if(S!==101)return;let L=new Rit;for(let O=0;O<R.length;O+=2)L.append(Dit(R[O]),R[O+1].toString("latin1"),!0);return E({status:S,statusText:Wir[S],headersList:L,socket:B}),!0}}))}s(h,"dispatch")}s(Jir,"httpNetworkFetch");$it.exports={fetch:zir,Fetch:qte,fetching:Qit,finalizeAndReportTiming:Fit}});var LIe=H((Xpi,Wit)=>{"use strict";d();Wit.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var Git=H((emi,jit)=>{"use strict";d();var{webidl:Zp}=td(),Hte=Symbol("ProgressEvent state"),FIe=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=Zp.converters.DOMString(e,"ProgressEvent constructor","type"),r=Zp.converters.ProgressEventInit(r??{}),super(e,r),this[Hte]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return Zp.brandCheck(this,t),this[Hte].lengthComputable}get loaded(){return Zp.brandCheck(this,t),this[Hte].loaded}get total(){return Zp.brandCheck(this,t),this[Hte].total}};Zp.converters.ProgressEventInit=Zp.dictionaryConverter([{key:"lengthComputable",converter:Zp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:Zp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:Zp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:Zp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Zp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Zp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);jit.exports={ProgressEvent:FIe}});var zit=H((nmi,Vit)=>{"use strict";d();function Xir(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(Xir,"getEncoding");Vit.exports={getEncoding:Xir}});var rot=H((smi,tot)=>{"use strict";d();var{kState:xN,kError:OIe,kResult:Kit,kAborted:yQ,kLastProgressEventFired:QIe}=LIe(),{ProgressEvent:Zir}=Git(),{getEncoding:Yit}=zit(),{serializeAMimeType:eor,parseMIMEType:Jit}=D0(),{types:tor}=require("node:util"),{StringDecoder:Xit}=require("string_decoder"),{btoa:Zit}=require("node:buffer"),ror={enumerable:!0,writable:!1,configurable:!1};function nor(t,e,r,n){if(t[xN]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[xN]="loading",t[Kit]=null,t[OIe]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[yQ];)try{let{done:u,value:f}=await c;if(l&&!t[yQ]&&queueMicrotask(()=>{pw("loadstart",t)}),l=!1,!u&&tor.isUint8Array(f))a.push(f),(t[QIe]===void 0||Date.now()-t[QIe]>=50)&&!t[yQ]&&(t[QIe]=Date.now(),queueMicrotask(()=>{pw("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[xN]="done";try{let p=ior(a,r,e.type,n);if(t[yQ])return;t[Kit]=p,pw("load",t)}catch(p){t[OIe]=p,pw("error",t)}t[xN]!=="loading"&&pw("loadend",t)});break}}catch(u){if(t[yQ])return;queueMicrotask(()=>{t[xN]="done",t[OIe]=u,pw("error",t),t[xN]!=="loading"&&pw("loadend",t)});break}})()}s(nor,"readOperation");function pw(t,e){let r=new Zir(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(pw,"fireAProgressEvent");function ior(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=Jit(r||"application/octet-stream");o!=="failure"&&(i+=eor(o)),i+=";base64,";let a=new Xit("latin1");for(let c of t)i+=Zit(a.write(c));return i+=Zit(a.end()),i}case"Text":{let i="failure";if(n&&(i=Yit(n)),i==="failure"&&r){let o=Jit(r);o!=="failure"&&(i=Yit(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),oor(t,i)}case"ArrayBuffer":return eot(t).buffer;case"BinaryString":{let i="",o=new Xit("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(ior,"packageData");function oor(t,e){let r=eot(t),n=sor(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(oor,"decode");function sor(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(sor,"BOMSniffing");function eot(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(eot,"combineByteSequences");tot.exports={staticPropertyDescriptors:ror,readOperation:nor,fireAProgressEvent:pw}});var sot=H((lmi,oot)=>{"use strict";d();var{staticPropertyDescriptors:EN,readOperation:$te,fireAProgressEvent:not}=rot(),{kState:Ak,kError:iot,kResult:Wte,kEvents:Yo,kAborted:aor}=LIe(),{webidl:xs}=td(),{kEnumerableProperty:M0}=qi(),jA=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[Ak]="empty",this[Wte]=null,this[iot]=null,this[Yo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=xs.converters.Blob(e,{strict:!1}),$te(this,e,"ArrayBuffer")}readAsBinaryString(e){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=xs.converters.Blob(e,{strict:!1}),$te(this,e,"BinaryString")}readAsText(e,r=void 0){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=xs.converters.Blob(e,{strict:!1}),r!==void 0&&(r=xs.converters.DOMString(r,"FileReader.readAsText","encoding")),$te(this,e,"Text",r)}readAsDataURL(e){xs.brandCheck(this,t),xs.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=xs.converters.Blob(e,{strict:!1}),$te(this,e,"DataURL")}abort(){if(this[Ak]==="empty"||this[Ak]==="done"){this[Wte]=null;return}this[Ak]==="loading"&&(this[Ak]="done",this[Wte]=null),this[aor]=!0,not("abort",this),this[Ak]!=="loading"&&not("loadend",this)}get readyState(){switch(xs.brandCheck(this,t),this[Ak]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return xs.brandCheck(this,t),this[Wte]}get error(){return xs.brandCheck(this,t),this[iot]}get onloadend(){return xs.brandCheck(this,t),this[Yo].loadend}set onloadend(e){xs.brandCheck(this,t),this[Yo].loadend&&this.removeEventListener("loadend",this[Yo].loadend),typeof e=="function"?(this[Yo].loadend=e,this.addEventListener("loadend",e)):this[Yo].loadend=null}get onerror(){return xs.brandCheck(this,t),this[Yo].error}set onerror(e){xs.brandCheck(this,t),this[Yo].error&&this.removeEventListener("error",this[Yo].error),typeof e=="function"?(this[Yo].error=e,this.addEventListener("error",e)):this[Yo].error=null}get onloadstart(){return xs.brandCheck(this,t),this[Yo].loadstart}set onloadstart(e){xs.brandCheck(this,t),this[Yo].loadstart&&this.removeEventListener("loadstart",this[Yo].loadstart),typeof e=="function"?(this[Yo].loadstart=e,this.addEventListener("loadstart",e)):this[Yo].loadstart=null}get onprogress(){return xs.brandCheck(this,t),this[Yo].progress}set onprogress(e){xs.brandCheck(this,t),this[Yo].progress&&this.removeEventListener("progress",this[Yo].progress),typeof e=="function"?(this[Yo].progress=e,this.addEventListener("progress",e)):this[Yo].progress=null}get onload(){return xs.brandCheck(this,t),this[Yo].load}set onload(e){xs.brandCheck(this,t),this[Yo].load&&this.removeEventListener("load",this[Yo].load),typeof e=="function"?(this[Yo].load=e,this.addEventListener("load",e)):this[Yo].load=null}get onabort(){return xs.brandCheck(this,t),this[Yo].abort}set onabort(e){xs.brandCheck(this,t),this[Yo].abort&&this.removeEventListener("abort",this[Yo].abort),typeof e=="function"?(this[Yo].abort=e,this.addEventListener("abort",e)):this[Yo].abort=null}};jA.EMPTY=jA.prototype.EMPTY=0;jA.LOADING=jA.prototype.LOADING=1;jA.DONE=jA.prototype.DONE=2;Object.defineProperties(jA.prototype,{EMPTY:EN,LOADING:EN,DONE:EN,readAsArrayBuffer:M0,readAsBinaryString:M0,readAsText:M0,readAsDataURL:M0,abort:M0,readyState:M0,result:M0,error:M0,onloadstart:M0,onprogress:M0,onload:M0,onabort:M0,onerror:M0,onloadend:M0,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(jA,{EMPTY:EN,LOADING:EN,DONE:EN});oot.exports={FileReader:jA}});var jte=H((fmi,aot)=>{"use strict";d();aot.exports={kConstruct:Da().kConstruct}});var uot=H((mmi,lot)=>{"use strict";d();var cor=require("node:assert"),{URLSerializer:cot}=D0(),{isValidHeaderName:lor}=Vp();function uor(t,e,r=!1){let n=cot(t,r),i=cot(e,r);return n===i}s(uor,"urlEquals");function dor(t){cor(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),lor(r)&&e.push(r);return e}s(dor,"getFieldValues");lot.exports={urlEquals:uor,getFieldValues:dor}});var pot=H((Ami,fot)=>{"use strict";d();var{kConstruct:por}=jte(),{urlEquals:mor,getFieldValues:UIe}=uot(),{kEnumerableProperty:yk,isDisturbed:hor}=qi(),{webidl:gn}=td(),{Response:gor,cloneResponse:Aor,fromInnerResponse:yor}=hQ(),{Request:Kx,fromInnerRequest:Cor}=vN(),{kState:GA}=ew(),{fetching:vor}=AQ(),{urlIsHttpHttpsScheme:Gte,createDeferredPromise:bN,readAllBytes:xor}=Vp(),qIe=require("node:assert"),Vte=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==por&&gn.illegalConstructor(),gn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){gn.brandCheck(this,t);let n="Cache.match";gn.argumentLengthCheck(arguments,1,n),e=gn.converters.RequestInfo(e,n,"request"),r=gn.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){gn.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=gn.converters.RequestInfo(e,n,"request")),r=gn.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){gn.brandCheck(this,t);let r="Cache.add";gn.argumentLengthCheck(arguments,1,r),e=gn.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){gn.brandCheck(this,t);let r="Cache.addAll";gn.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw gn.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=gn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[GA];if(!Gte(h.url)||h.method!=="GET")throw gn.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new Kx(m)[GA];if(!Gte(h.url))throw gn.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=bN();o.push(vor({request:h,processResponse(A){if(A.type==="error"||A.status===206||A.status<200||A.status>299)g.reject(gn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(A.headersList.contains("vary")){let y=UIe(A.headersList.get("vary"));for(let E of y)if(E==="*"){g.reject(gn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of o)b.abort();return}}},processResponseEndOfBody(A){if(A.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(A)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let m of c){let h={type:"put",request:i[u],response:m};l.push(h),u++}let f=bN(),p=null;try{this.#t(l)}catch(m){p=m}return queueMicrotask(()=>{p===null?f.resolve(void 0):f.reject(p)}),f.promise}async put(e,r){gn.brandCheck(this,t);let n="Cache.put";gn.argumentLengthCheck(arguments,2,n),e=gn.converters.RequestInfo(e,n,"request"),r=gn.converters.Response(r,n,"response");let i=null;if(e instanceof Kx?i=e[GA]:i=new Kx(e)[GA],!Gte(i.url)||i.method!=="GET")throw gn.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[GA];if(o.status===206)throw gn.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=UIe(o.headersList.get("vary"));for(let g of h)if(g==="*")throw gn.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(hor(o.body.stream)||o.body.stream.locked))throw gn.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=Aor(o),c=bN();if(o.body!=null){let g=o.body.stream.getReader();xor(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let f=await c.promise;a.body!=null&&(a.body.source=f);let p=bN(),m=null;try{this.#t(l)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){gn.brandCheck(this,t);let n="Cache.delete";gn.argumentLengthCheck(arguments,1,n),e=gn.converters.RequestInfo(e,n,"request"),r=gn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof Kx){if(i=e[GA],i.method!=="GET"&&!r.ignoreMethod)return!1}else qIe(typeof e=="string"),i=new Kx(e)[GA];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=bN(),l=null,u;try{u=this.#t(o)}catch(f){l=f}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){gn.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=gn.converters.RequestInfo(e,n,"request")),r=gn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof Kx){if(i=e[GA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new Kx(e)[GA]);let o=bN(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=Cor(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw gn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw gn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);qIe(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw gn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!Gte(l.url))throw gn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw gn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw gn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let f=r.indexOf(u);qIe(f!==-1),r.splice(f,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!mor(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=UIe(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),f=e.headersList.get(l);if(u!==f)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof Kx){if(i=e[GA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new Kx(e)[GA]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=yor(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(Vte.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:yk,matchAll:yk,add:yk,addAll:yk,put:yk,delete:yk,keys:yk});var dot=[{key:"ignoreSearch",converter:gn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:gn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:gn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];gn.converters.CacheQueryOptions=gn.dictionaryConverter(dot);gn.converters.MultiCacheQueryOptions=gn.dictionaryConverter([...dot,{key:"cacheName",converter:gn.converters.DOMString}]);gn.converters.Response=gn.interfaceConverter(gor);gn.converters["sequence<RequestInfo>"]=gn.sequenceConverter(gn.converters.RequestInfo);fot.exports={Cache:Vte}});var hot=H((vmi,mot)=>{"use strict";d();var{kConstruct:CQ}=jte(),{Cache:zte}=pot(),{webidl:Hd}=td(),{kEnumerableProperty:vQ}=qi(),Kte=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==CQ&&Hd.illegalConstructor(),Hd.util.markAsUncloneable(this)}async match(e,r={}){if(Hd.brandCheck(this,t),Hd.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=Hd.converters.RequestInfo(e),r=Hd.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new zte(CQ,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new zte(CQ,n).match(e,r);if(o!==void 0)return o}}async has(e){Hd.brandCheck(this,t);let r="CacheStorage.has";return Hd.argumentLengthCheck(arguments,1,r),e=Hd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){Hd.brandCheck(this,t);let r="CacheStorage.open";if(Hd.argumentLengthCheck(arguments,1,r),e=Hd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new zte(CQ,i)}let n=[];return this.#e.set(e,n),new zte(CQ,n)}async delete(e){Hd.brandCheck(this,t);let r="CacheStorage.delete";return Hd.argumentLengthCheck(arguments,1,r),e=Hd.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return Hd.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(Kte.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:vQ,has:vQ,open:vQ,delete:vQ,keys:vQ});mot.exports={CacheStorage:Kte}});var Aot=H((bmi,got)=>{"use strict";d();got.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var HIe=H((Tmi,Eot)=>{"use strict";d();function Eor(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(Eor,"isCTLExcludingHtab");function yot(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(yot,"validateCookieName");function Cot(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(Cot,"validateCookieValue");function vot(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(vot,"validateCookiePath");function bor(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(bor,"validateCookieDomain");var Ior=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Tor=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Yte=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function xot(t){return typeof t=="number"&&(t=new Date(t)),`${Ior[t.getUTCDay()]}, ${Yte[t.getUTCDate()]} ${Tor[t.getUTCMonth()]} ${t.getUTCFullYear()} ${Yte[t.getUTCHours()]}:${Yte[t.getUTCMinutes()]}:${Yte[t.getUTCSeconds()]} GMT`}s(xot,"toIMFDate");function wor(t){if(t<0)throw new Error("Invalid cookie max-age")}s(wor,"validateCookieMaxAge");function Sor(t){if(t.name.length===0)return null;yot(t.name),Cot(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(wor(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(bor(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(vot(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${xot(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(Sor,"stringify");Eot.exports={isCTLExcludingHtab:Eor,validateCookieName:yot,validateCookiePath:vot,validateCookieValue:Cot,toIMFDate:xot,stringify:Sor}});var Iot=H((_mi,bot)=>{"use strict";d();var{maxNameValuePairSize:_or,maxAttributeValueSize:Ror}=Aot(),{isCTLExcludingHtab:kor}=HIe(),{collectASequenceOfCodePointsFast:Jte}=D0(),Por=require("node:assert");function Dor(t){if(kor(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=Jte(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=Jte("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>_or?null:{name:n,value:i,...IN(r)}}s(Dor,"parseSetCookie");function IN(t,e={}){if(t.length===0)return e;Por(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=Jte(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=Jte("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>Ror)return IN(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return IN(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return IN(t,e)}s(IN,"parseUnparsedAttributes");bot.exports={parseSetCookie:Dor,parseUnparsedAttributes:IN}});var Sot=H((Pmi,wot)=>{"use strict";d();var{parseSetCookie:Bor}=Iot(),{stringify:Nor}=HIe(),{webidl:po}=td(),{Headers:Xte}=pk();function Mor(t){po.argumentLengthCheck(arguments,1,"getCookies"),po.brandCheck(t,Xte,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(Mor,"getCookies");function Lor(t,e,r){po.brandCheck(t,Xte,{strict:!1});let n="deleteCookie";po.argumentLengthCheck(arguments,2,n),e=po.converters.DOMString(e,n,"name"),r=po.converters.DeleteCookieAttributes(r),Tot(t,{name:e,value:"",expires:new Date(0),...r})}s(Lor,"deleteCookie");function For(t){po.argumentLengthCheck(arguments,1,"getSetCookies"),po.brandCheck(t,Xte,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>Bor(r)):[]}s(For,"getSetCookies");function Tot(t,e){po.argumentLengthCheck(arguments,2,"setCookie"),po.brandCheck(t,Xte,{strict:!1}),e=po.converters.Cookie(e);let r=Nor(e);r&&t.append("Set-Cookie",r)}s(Tot,"setCookie");po.converters.DeleteCookieAttributes=po.dictionaryConverter([{converter:po.nullableConverter(po.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);po.converters.Cookie=po.dictionaryConverter([{converter:po.converters.DOMString,key:"name"},{converter:po.converters.DOMString,key:"value"},{converter:po.nullableConverter(t=>typeof t=="number"?po.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:po.nullableConverter(po.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:po.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:po.sequenceConverter(po.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);wot.exports={getCookies:Mor,deleteCookie:Lor,getSetCookies:For,setCookie:Tot}});var wN=H((Nmi,Rot)=>{"use strict";d();var{webidl:fn}=td(),{kEnumerableProperty:L0}=qi(),{kConstruct:_ot}=Da(),{MessagePort:Oor}=require("node:worker_threads"),TN=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===_ot){super(arguments[1],arguments[2]),fn.util.markAsUncloneable(this);return}let n="MessageEvent constructor";fn.argumentLengthCheck(arguments,1,n),e=fn.converters.DOMString(e,n,"type"),r=fn.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,fn.util.markAsUncloneable(this)}get data(){return fn.brandCheck(this,t),this.#e.data}get origin(){return fn.brandCheck(this,t),this.#e.origin}get lastEventId(){return fn.brandCheck(this,t),this.#e.lastEventId}get source(){return fn.brandCheck(this,t),this.#e.source}get ports(){return fn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return fn.brandCheck(this,t),fn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(_ot,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:Qor}=TN;delete TN.createFastMessageEvent;var Zte=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";fn.argumentLengthCheck(arguments,1,n),e=fn.converters.DOMString(e,n,"type"),r=fn.converters.CloseEventInit(r),super(e,r),this.#e=r,fn.util.markAsUncloneable(this)}get wasClean(){return fn.brandCheck(this,t),this.#e.wasClean}get code(){return fn.brandCheck(this,t),this.#e.code}get reason(){return fn.brandCheck(this,t),this.#e.reason}},ere=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";fn.argumentLengthCheck(arguments,1,n),super(e,r),fn.util.markAsUncloneable(this),e=fn.converters.DOMString(e,n,"type"),r=fn.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return fn.brandCheck(this,t),this.#e.message}get filename(){return fn.brandCheck(this,t),this.#e.filename}get lineno(){return fn.brandCheck(this,t),this.#e.lineno}get colno(){return fn.brandCheck(this,t),this.#e.colno}get error(){return fn.brandCheck(this,t),this.#e.error}};Object.defineProperties(TN.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:L0,origin:L0,lastEventId:L0,source:L0,ports:L0,initMessageEvent:L0});Object.defineProperties(Zte.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:L0,code:L0,wasClean:L0});Object.defineProperties(ere.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:L0,filename:L0,lineno:L0,colno:L0,error:L0});fn.converters.MessagePort=fn.interfaceConverter(Oor);fn.converters["sequence<MessagePort>"]=fn.sequenceConverter(fn.converters.MessagePort);var $Ie=[{key:"bubbles",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];fn.converters.MessageEventInit=fn.dictionaryConverter([...$Ie,{key:"data",converter:fn.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:fn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:fn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:fn.nullableConverter(fn.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:fn.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);fn.converters.CloseEventInit=fn.dictionaryConverter([...$Ie,{key:"wasClean",converter:fn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:fn.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:fn.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);fn.converters.ErrorEventInit=fn.dictionaryConverter([...$Ie,{key:"message",converter:fn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:fn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:fn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:fn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:fn.converters.any}]);Rot.exports={MessageEvent:TN,CloseEvent:Zte,ErrorEvent:ere,createFastMessageEvent:Qor}});var Ck=H((Fmi,kot)=>{"use strict";d();var Uor="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",qor={enumerable:!0,writable:!1,configurable:!1},Hor={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},$or={NOT_SENT:0,PROCESSING:1,SENT:2},Wor={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},jor=2**16-1,Gor={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},Vor=Buffer.allocUnsafe(0),zor={string:1,typedArray:2,arrayBuffer:3,blob:4};kot.exports={uid:Uor,sentCloseFrameState:$or,staticPropertyDescriptors:qor,states:Hor,opcodes:Wor,maxUnsigned16Bit:jor,parserStates:Gor,emptyBuffer:Vor,sendHints:zor}});var xQ=H((Qmi,Pot)=>{"use strict";d();Pot.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var IQ=H((qmi,Uot)=>{"use strict";d();var{kReadyState:EQ,kController:Kor,kResponse:Yor,kBinaryType:Jor,kWebSocketURL:Xor}=xQ(),{states:bQ,opcodes:mw}=Ck(),{ErrorEvent:Zor,createFastMessageEvent:esr}=wN(),{isUtf8:tsr}=require("node:buffer"),{collectASequenceOfCodePointsFast:rsr,removeHTTPWhitespace:Dot}=D0();function nsr(t){return t[EQ]===bQ.CONNECTING}s(nsr,"isConnecting");function isr(t){return t[EQ]===bQ.OPEN}s(isr,"isEstablished");function osr(t){return t[EQ]===bQ.CLOSING}s(osr,"isClosing");function ssr(t){return t[EQ]===bQ.CLOSED}s(ssr,"isClosed");function WIe(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(WIe,"fireEvent");function asr(t,e,r){if(t[EQ]!==bQ.OPEN)return;let n;if(e===mw.TEXT)try{n=Qot(r)}catch{Not(t,"Received invalid UTF-8 in text frame.");return}else e===mw.BINARY&&(t[Jor]==="blob"?n=new Blob([r]):n=csr(r));WIe("message",t,esr,{origin:t[Xor].origin,data:n})}s(asr,"websocketMessageReceived");function csr(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(csr,"toArrayBuffer");function lsr(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(lsr,"isValidSubprotocol");function usr(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(usr,"isValidStatusCode");function Not(t,e){let{[Kor]:r,[Yor]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&WIe("error",t,(i,o)=>new Zor(i,o),{error:new Error(e),message:e})}s(Not,"failWebsocketConnection");function Mot(t){return t===mw.CLOSE||t===mw.PING||t===mw.PONG}s(Mot,"isControlFrame");function Lot(t){return t===mw.CONTINUATION}s(Lot,"isContinuationFrame");function Fot(t){return t===mw.TEXT||t===mw.BINARY}s(Fot,"isTextBinaryFrame");function dsr(t){return Fot(t)||Lot(t)||Mot(t)}s(dsr,"isValidOpcode");function fsr(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=rsr(";",t,e),[i,o=""]=n.split("=");r.set(Dot(i,!0,!1),Dot(o,!1,!0)),e.position++}return r}s(fsr,"parseExtensions");function psr(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(psr,"isValidClientWindowBits");var Oot=typeof process.versions.icu=="string",Bot=Oot?new TextDecoder("utf-8",{fatal:!0}):void 0,Qot=Oot?Bot.decode.bind(Bot):function(t){if(tsr(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};Uot.exports={isConnecting:nsr,isEstablished:isr,isClosing:osr,isClosed:ssr,fireEvent:WIe,isValidSubprotocol:lsr,isValidStatusCode:usr,failWebsocketConnection:Not,websocketMessageReceived:asr,utf8Decode:Qot,isControlFrame:Mot,isContinuationFrame:Lot,isTextBinaryFrame:Fot,isValidOpcode:dsr,parseExtensions:fsr,isValidClientWindowBits:psr}});var rre=H((Wmi,qot)=>{"use strict";d();var{maxUnsigned16Bit:msr}=Ck(),tre=16386,jIe,TQ=null,SN=tre;try{jIe=require("node:crypto")}catch{jIe={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function hsr(){return SN===tre&&(SN=0,jIe.randomFillSync(TQ??=Buffer.allocUnsafe(tre),0,tre)),[TQ[SN++],TQ[SN++],TQ[SN++],TQ[SN++]]}s(hsr,"generateMask");var GIe=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=hsr(),i=r?.byteLength??0,o=i,a=6;i>msr?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};qot.exports={WebsocketFrameSend:GIe}});var zIe=H((Vmi,zot)=>{"use strict";d();var{uid:gsr,states:wQ,sentCloseFrameState:nre,emptyBuffer:Asr,opcodes:ysr}=Ck(),{kReadyState:SQ,kSentClose:ire,kByteParser:$ot,kReceivedClose:Hot,kResponse:Wot}=xQ(),{fireEvent:Csr,failWebsocketConnection:hw,isClosing:vsr,isClosed:xsr,isEstablished:Esr,parseExtensions:bsr}=IQ(),{channels:_N}=q3(),{CloseEvent:Isr}=wN(),{makeRequest:Tsr}=vN(),{fetching:wsr}=AQ(),{Headers:Ssr,getHeadersList:_sr}=pk(),{getDecodeSplit:Rsr}=Vp(),{WebsocketFrameSend:ksr}=rre(),VIe;try{VIe=require("node:crypto")}catch{}function Psr(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=Tsr({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=_sr(new Ssr(o.headers));c.headersList=p}let l=VIe.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),wsr({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){hw(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){hw(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){hw(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){hw(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=VIe.createHash("sha1").update(l+gsr).digest("base64");if(m!==h){hw(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),A;if(g!==null&&(A=bsr(g),!A.has("permessage-deflate"))){hw(n,"Sec-WebSocket-Extensions header does not match.");return}let y=p.headersList.get("Sec-WebSocket-Protocol");if(y!==null&&!Rsr("sec-websocket-protocol",c.headersList).includes(y)){hw(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",jot),p.socket.on("close",Got),p.socket.on("error",Vot),_N.open.hasSubscribers&&_N.open.publish({address:p.socket.address(),protocol:y,extensions:g}),i(p,A)}})}s(Psr,"establishWebSocketConnection");function Dsr(t,e,r,n){if(!(vsr(t)||xsr(t)))if(!Esr(t))hw(t,"Connection was closed before it was established."),t[SQ]=wQ.CLOSING;else if(t[ire]===nre.NOT_SENT){t[ire]=nre.PROCESSING;let i=new ksr;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=Asr,t[Wot].socket.write(i.createFrame(ysr.CLOSE)),t[ire]=nre.SENT,t[SQ]=wQ.CLOSING}else t[SQ]=wQ.CLOSING}s(Dsr,"closeWebSocketConnection");function jot(t){this.ws[$ot].write(t)||this.pause()}s(jot,"onSocketData");function Got(){let{ws:t}=this,{[Wot]:e}=t;e.socket.off("data",jot),e.socket.off("close",Got),e.socket.off("error",Vot);let r=t[ire]===nre.SENT&&t[Hot],n=1005,i="",o=t[$ot].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[Hot]||(n=1006),t[SQ]=wQ.CLOSED,Csr("close",t,(a,c)=>new Isr(a,c),{wasClean:r,code:n,reason:i}),_N.close.hasSubscribers&&_N.close.publish({websocket:t,code:n,reason:i})}s(Got,"onSocketClose");function Vot(t){let{ws:e}=this;e[SQ]=wQ.CLOSING,_N.socketError.hasSubscribers&&_N.socketError.publish(t),this.destroy()}s(Vot,"onSocketError");zot.exports={establishWebSocketConnection:Psr,closeWebSocketConnection:Dsr}});var Yot=H((Ymi,Kot)=>{"use strict";d();var{createInflateRaw:Bsr,Z_DEFAULT_WINDOWBITS:Nsr}=require("node:zlib"),{isValidClientWindowBits:Msr}=IQ(),Lsr=Buffer.from([0,0,255,255]),ore=Symbol("kBuffer"),sre=Symbol("kLength"),KIe=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=Nsr;if(this.#t.serverMaxWindowBits){if(!Msr(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=Bsr({windowBits:i}),this.#e[ore]=[],this.#e[sre]=0,this.#e.on("data",o=>{this.#e[ore].push(o),this.#e[sre]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(Lsr),this.#e.flush(()=>{let i=Buffer.concat(this.#e[ore],this.#e[sre]);this.#e[ore].length=0,this.#e[sre]=0,n(null,i)})}};Kot.exports={PerMessageDeflate:KIe}});var ast=H((Zmi,sst)=>{"use strict";d();var{Writable:Fsr}=require("node:stream"),Osr=require("node:assert"),{parserStates:F0,opcodes:RN,states:Qsr,emptyBuffer:Jot,sentCloseFrameState:Xot}=Ck(),{kReadyState:Usr,kSentClose:Zot,kResponse:est,kReceivedClose:tst}=xQ(),{channels:are}=q3(),{isValidStatusCode:qsr,isValidOpcode:Hsr,failWebsocketConnection:Hh,websocketMessageReceived:rst,utf8Decode:$sr,isControlFrame:nst,isTextBinaryFrame:YIe,isContinuationFrame:Wsr}=IQ(),{WebsocketFrameSend:ist}=rre(),{closeWebSocketConnection:ost}=zIe(),{PerMessageDeflate:jsr}=Yot(),JIe=class extends Fsr{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=F0.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new jsr(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===F0.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==RN.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,f=r[0]&16;if(!Hsr(i))return Hh(this.ws,"Invalid opcode received"),e();if(o)return Hh(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){Hh(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||f!==0){Hh(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!YIe(i)){Hh(this.ws,"Invalid frame type was fragmented.");return}if(YIe(i)&&this.#o.length>0){Hh(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){Hh(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&nst(i)){Hh(this.ws,"Control frame either too large or fragmented");return}if(Wsr(i)&&this.#o.length===0&&!this.#r.compressed){Hh(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=F0.READ_DATA):c===126?this.#n=F0.PAYLOADLENGTH_16:c===127&&(this.#n=F0.PAYLOADLENGTH_64),YIe(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===F0.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=F0.READ_DATA}else if(this.#n===F0.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){Hh(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=F0.READ_DATA}else if(this.#n===F0.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(nst(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=F0.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){ost(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=F0.INFO,this.#i=!0,this.run(e);return}rst(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=F0.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);rst(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=F0.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return Jot;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){Osr(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!qsr(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=$sr(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===RN.CLOSE){if(n===1)return Hh(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return ost(this.ws,i,o,o.length),Hh(this.ws,o),!1}if(this.ws[Zot]!==Xot.SENT){let i=Jot;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new ist(i);this.ws[est].socket.write(o.createFrame(RN.CLOSE),a=>{a||(this.ws[Zot]=Xot.SENT)})}return this.ws[Usr]=Qsr.CLOSING,this.ws[tst]=!0,!1}else if(r===RN.PING){if(!this.ws[tst]){let i=new ist(e);this.ws[est].socket.write(i.createFrame(RN.PONG)),are.ping.hasSubscribers&&are.ping.publish({payload:e})}}else r===RN.PONG&&are.pong.hasSubscribers&&are.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};sst.exports={ByteParser:JIe}});var fst=H((rhi,dst)=>{"use strict";d();var{WebsocketFrameSend:Gsr}=rre(),{opcodes:cst,sendHints:kN}=Ck(),Vsr=lbe(),lst=Buffer[Symbol.species],XIe=class{static{s(this,"SendQueue")}#e=new Vsr;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==kN.blob){let o=ust(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=ust(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function ust(t,e){return new Gsr(zsr(t,e)).createFrame(e===kN.string?cst.TEXT:cst.BINARY)}s(ust,"createFrame");function zsr(t,e){switch(e){case kN.string:return Buffer.from(t);case kN.arrayBuffer:case kN.blob:return new lst(t);case kN.typedArray:return new lst(t.buffer,t.byteOffset,t.byteLength)}}s(zsr,"toBuffer");dst.exports={SendQueue:XIe}});var xst=H((ohi,vst)=>{"use strict";d();var{webidl:Zn}=td(),{URLSerializer:Ksr}=D0(),{environmentSettingsObject:pst}=Vp(),{staticPropertyDescriptors:gw,states:_Q,sentCloseFrameState:Ysr,sendHints:cre}=Ck(),{kWebSocketURL:mst,kReadyState:ZIe,kController:Jsr,kBinaryType:lre,kResponse:hst,kSentClose:Xsr,kByteParser:Zsr}=xQ(),{isConnecting:ear,isEstablished:tar,isClosing:rar,isValidSubprotocol:nar,fireEvent:gst}=IQ(),{establishWebSocketConnection:iar,closeWebSocketConnection:Ast}=zIe(),{ByteParser:oar}=ast(),{kEnumerableProperty:$h,isBlobLike:yst}=qi(),{getGlobalDispatcher:sar}=bte(),{types:Cst}=require("node:util"),{ErrorEvent:aar,CloseEvent:car}=wN(),{SendQueue:lar}=fst(),em=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),Zn.util.markAsUncloneable(this);let n="WebSocket constructor";Zn.argumentLengthCheck(arguments,1,n);let i=Zn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=Zn.converters.USVString(e,n,"url"),r=i.protocols;let o=pst.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>nar(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[mst]=new URL(a.href);let c=pst.settingsObject;this[Jsr]=iar(a,r,c,this,(l,u)=>this.#o(l,u),i),this[ZIe]=t.CONNECTING,this[Xsr]=Ysr.NOT_SENT,this[lre]="blob"}close(e=void 0,r=void 0){Zn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=Zn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=Zn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");Ast(this,e,r,i)}send(e){Zn.brandCheck(this,t);let r="WebSocket.send";if(Zn.argumentLengthCheck(arguments,1,r),e=Zn.converters.WebSocketSendData(e,r,"data"),ear(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!tar(this)||rar(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},cre.string)}else Cst.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},cre.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},cre.typedArray)):yst(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},cre.blob))}get readyState(){return Zn.brandCheck(this,t),this[ZIe]}get bufferedAmount(){return Zn.brandCheck(this,t),this.#t}get url(){return Zn.brandCheck(this,t),Ksr(this[mst])}get extensions(){return Zn.brandCheck(this,t),this.#n}get protocol(){return Zn.brandCheck(this,t),this.#i}get onopen(){return Zn.brandCheck(this,t),this.#e.open}set onopen(e){Zn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Zn.brandCheck(this,t),this.#e.error}set onerror(e){Zn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Zn.brandCheck(this,t),this.#e.close}set onclose(e){Zn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Zn.brandCheck(this,t),this.#e.message}set onmessage(e){Zn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Zn.brandCheck(this,t),this[lre]}set binaryType(e){Zn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[lre]="blob":this[lre]=e}#o(e,r){this[hst]=e;let n=new oar(this,r);n.on("drain",uar),n.on("error",dar.bind(this)),e.socket.ws=this,this[Zsr]=n,this.#r=new lar(e.socket),this[ZIe]=_Q.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),gst("open",this)}};em.CONNECTING=em.prototype.CONNECTING=_Q.CONNECTING;em.OPEN=em.prototype.OPEN=_Q.OPEN;em.CLOSING=em.prototype.CLOSING=_Q.CLOSING;em.CLOSED=em.prototype.CLOSED=_Q.CLOSED;Object.defineProperties(em.prototype,{CONNECTING:gw,OPEN:gw,CLOSING:gw,CLOSED:gw,url:$h,readyState:$h,bufferedAmount:$h,onopen:$h,onerror:$h,onclose:$h,close:$h,onmessage:$h,binaryType:$h,send:$h,extensions:$h,protocol:$h,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(em,{CONNECTING:gw,OPEN:gw,CLOSING:gw,CLOSED:gw});Zn.converters["sequence<DOMString>"]=Zn.sequenceConverter(Zn.converters.DOMString);Zn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return Zn.util.Type(t)==="Object"&&Symbol.iterator in t?Zn.converters["sequence<DOMString>"](t):Zn.converters.DOMString(t,e,r)};Zn.converters.WebSocketInit=Zn.dictionaryConverter([{key:"protocols",converter:Zn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Zn.converters.any,defaultValue:s(()=>sar(),"defaultValue")},{key:"headers",converter:Zn.nullableConverter(Zn.converters.HeadersInit)}]);Zn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Zn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Zn.converters.WebSocketInit(t):{protocols:Zn.converters["DOMString or sequence<DOMString>"](t)}};Zn.converters.WebSocketSendData=function(t){if(Zn.util.Type(t)==="Object"){if(yst(t))return Zn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||Cst.isArrayBuffer(t))return Zn.converters.BufferSource(t)}return Zn.converters.USVString(t)};function uar(){this.ws[hst].socket.resume()}s(uar,"onParserDrain");function dar(t){let e,r;t instanceof car?(e=t.reason,r=t.code):e=t.message,gst("error",this,()=>new aar("error",{error:t,message:e})),Ast(this,r)}s(dar,"onParserError");vst.exports={WebSocket:em}});var eTe=H((chi,Est)=>{"use strict";d();function far(t){return t.indexOf("\0")===-1}s(far,"isValidLastEventId");function par(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(par,"isASCIINumber");function mar(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(mar,"delay");Est.exports={isValidLastEventId:far,isASCIINumber:par,delay:mar}});var wst=H((dhi,Tst)=>{"use strict";d();var{Transform:har}=require("node:stream"),{isASCIINumber:bst,isValidLastEventId:Ist}=eTe(),Yx=[239,187,191],tTe=10,ure=13,gar=58,Aar=32,rTe=class extends har{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===Yx[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===Yx[0]&&this.buffer[1]===Yx[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===Yx[0]&&this.buffer[1]===Yx[1]&&this.buffer[2]===Yx[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===Yx[0]&&this.buffer[1]===Yx[1]&&this.buffer[2]===Yx[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===tTe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===tTe||this.buffer[this.pos]===ure){this.buffer[this.pos]===ure&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===tTe||this.buffer[this.pos]===ure){this.buffer[this.pos]===ure&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(gar);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===Aar&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":bst(o)&&(r[i]=o);break;case"id":Ist(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&bst(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&Ist(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Tst.exports={EventSourceStream:rTe}});var Nst=H((mhi,Bst)=>{"use strict";d();var{pipeline:yar}=require("node:stream"),{fetching:Car}=AQ(),{makeRequest:xar}=vN(),{webidl:Jx}=td(),{EventSourceStream:Ear}=wst(),{parseMIMEType:bar}=D0(),{createFastMessageEvent:Iar}=wN(),{isNetworkError:Sst}=hQ(),{delay:Tar}=eTe(),{kEnumerableProperty:vk}=qi(),{environmentSettingsObject:_st}=Vp(),Rst=!1,kst=3e3,RQ=0,Pst=1,kQ=2,war="anonymous",Sar="use-credentials",PN=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=RQ;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),Jx.util.markAsUncloneable(this);let n="EventSource constructor";Jx.argumentLengthCheck(arguments,1,n),Rst||(Rst=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=Jx.converters.USVString(e,n,"url"),r=Jx.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:kst};let i=_st,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=war;r.withCredentials&&(a=Sar,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=_st.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=xar(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===kQ)return;this.#n=RQ;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{Sst(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(Sst(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?bar(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=Pst,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new Ear({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent(Iar(l.type,l.options))},"push")});yar(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=Car(e)}async#l(){this.#n!==kQ&&(this.#n=RQ,this.dispatchEvent(new Event("error")),await Tar(this.#a.reconnectionTime),this.#n===RQ&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){Jx.brandCheck(this,t),this.#n!==kQ&&(this.#n=kQ,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},Dst={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:RQ,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:Pst,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:kQ,writable:!1}};Object.defineProperties(PN,Dst);Object.defineProperties(PN.prototype,Dst);Object.defineProperties(PN.prototype,{close:vk,onerror:vk,onmessage:vk,onopen:vk,readyState:vk,url:vk,withCredentials:vk});Jx.converters.EventSourceInitDict=Jx.dictionaryConverter([{key:"withCredentials",converter:Jx.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:Jx.converters.any}]);Bst.exports={EventSource:PN,defaultReconnectionTime:kst}});var Ost=H((Ahi,Hn)=>{"use strict";d();var _ar=eQ(),Mst=D7(),Rar=aN(),kar=Htt(),Par=cN(),Dar=Sbe(),Bar=ort(),Nar=drt(),Lst=Ko(),fre=qi(),{InvalidArgumentError:dre}=Lst,DN=Jrt(),Mar=N7(),Lar=cIe(),Far=Dnt(),Oar=dIe(),Qar=Kbe(),Uar=pte(),{getGlobalDispatcher:Fst,setGlobalDispatcher:qar}=bte(),Har=Ite(),$ar=tte(),War=rte();Object.assign(Mst.prototype,DN);Hn.exports.Dispatcher=Mst;Hn.exports.Client=_ar;Hn.exports.Pool=Rar;Hn.exports.BalancedPool=kar;Hn.exports.Agent=Par;Hn.exports.ProxyAgent=Dar;Hn.exports.EnvHttpProxyAgent=Bar;Hn.exports.RetryAgent=Nar;Hn.exports.RetryHandler=Uar;Hn.exports.DecoratorHandler=Har;Hn.exports.RedirectHandler=$ar;Hn.exports.createRedirectInterceptor=War;Hn.exports.interceptors={redirect:Qnt(),retry:qnt(),dump:$nt(),dns:Gnt()};Hn.exports.buildConnector=Mar;Hn.exports.errors=Lst;Hn.exports.util={parseHeaders:fre.parseHeaders,headerNameToString:fre.headerNameToString};function PQ(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new dre("invalid url");if(r!=null&&typeof r!="object")throw new dre("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new dre("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(fre.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=fre.parseURL(e);let{agent:i,dispatcher:o=Fst()}=r;if(i)throw new dre("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(PQ,"makeDispatcher");Hn.exports.setGlobalDispatcher=qar;Hn.exports.getGlobalDispatcher=Fst;var jar=AQ().fetch;Hn.exports.fetch=s(async function(e,r=void 0){try{return await jar(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Hn.exports.Headers=pk().Headers;Hn.exports.Response=hQ().Response;Hn.exports.Request=vN().Request;Hn.exports.FormData=q7().FormData;Hn.exports.File=globalThis.File??require("node:buffer").File;Hn.exports.FileReader=sot().FileReader;var{setGlobalOrigin:Gar,getGlobalOrigin:Var}=_Ee();Hn.exports.setGlobalOrigin=Gar;Hn.exports.getGlobalOrigin=Var;var{CacheStorage:zar}=hot(),{kConstruct:Kar}=jte();Hn.exports.caches=new zar(Kar);var{deleteCookie:Yar,getCookies:Jar,getSetCookies:Xar,setCookie:Zar}=Sot();Hn.exports.deleteCookie=Yar;Hn.exports.getCookies=Jar;Hn.exports.getSetCookies=Xar;Hn.exports.setCookie=Zar;var{parseMIMEType:ecr,serializeAMimeType:tcr}=D0();Hn.exports.parseMIMEType=ecr;Hn.exports.serializeAMimeType=tcr;var{CloseEvent:rcr,ErrorEvent:ncr,MessageEvent:icr}=wN();Hn.exports.WebSocket=xst().WebSocket;Hn.exports.CloseEvent=rcr;Hn.exports.ErrorEvent=ncr;Hn.exports.MessageEvent=icr;Hn.exports.request=PQ(DN.request);Hn.exports.stream=PQ(DN.stream);Hn.exports.pipeline=PQ(DN.pipeline);Hn.exports.connect=PQ(DN.connect);Hn.exports.upgrade=PQ(DN.upgrade);Hn.exports.MockClient=Lar;Hn.exports.MockPool=Oar;Hn.exports.MockAgent=Far;Hn.exports.mockErrors=Qar;var{EventSource:ocr}=Nst();Hn.exports.EventSource=ocr});var _i=H((vhi,Qst)=>{d();Qst.exports={options:{usePureJavaScript:!1}}});var Hst=H((Ehi,qst)=>{d();var nTe={};qst.exports=nTe;var Ust={};nTe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=scr(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};nTe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Ust[e];if(!r){r=Ust[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function scr(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s(scr,"_encodeWithByteBuffer")});var qo=H((Thi,Gst)=>{d();var $st=_i(),Wst=Hst(),Me=Gst.exports=$st.util=$st.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Me.nextTick=process.nextTick,typeof setImmediate=="function"?Me.setImmediate=setImmediate:Me.setImmediate=Me.nextTick;return}if(typeof setImmediate=="function"){Me.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Me.nextTick=function(c){return setImmediate(c)};return}if(Me.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Me.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Me.setImmediate;Me.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Me.nextTick=Me.setImmediate})();Me.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Me.globalScope=function(){return Me.isNodejs?global:typeof self>"u"?window:self}();Me.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Me.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Me.isArrayBufferView=function(t){return t&&Me.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function DQ(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(DQ,"_checkBitsParam");Me.ByteBuffer=iTe;function iTe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Me.isArrayBuffer(t)||Me.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof iTe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(iTe,"ByteStringBuffer");Me.ByteStringBuffer=iTe;var acr=4096;Me.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>acr&&(this.data.substr(0,1),this._constructedStringLength=0)};Me.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Me.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Me.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Me.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Me.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Me.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Me.encodeUtf8(t))};Me.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Me.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Me.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Me.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Me.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Me.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Me.ByteStringBuffer.prototype.putInt=function(t,e){DQ(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Me.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Me.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Me.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Me.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Me.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Me.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Me.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Me.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Me.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Me.ByteStringBuffer.prototype.getInt=function(t){DQ(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Me.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Me.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Me.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Me.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Me.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Me.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Me.ByteStringBuffer.prototype.copy=function(){var t=Me.createBuffer(this.data);return t.read=this.read,t};Me.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Me.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Me.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Me.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Me.ByteStringBuffer.prototype.toString=function(){return Me.decodeUtf8(this.bytes())};function ccr(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Me.isArrayBuffer(t),n=Me.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(ccr,"DataBuffer");Me.DataBuffer=ccr;Me.DataBuffer.prototype.length=function(){return this.write-this.read};Me.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Me.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Me.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Me.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Me.DataBuffer.prototype.putBytes=function(t,e){if(Me.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Me.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Me.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Me.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Me.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Me.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Me.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Me.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Me.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Me.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Me.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Me.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Me.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Me.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Me.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Me.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Me.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Me.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Me.DataBuffer.prototype.putInt=function(t,e){DQ(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Me.DataBuffer.prototype.putSignedInt=function(t,e){return DQ(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Me.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Me.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Me.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Me.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Me.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Me.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Me.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Me.DataBuffer.prototype.getInt=function(t){DQ(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Me.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Me.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Me.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Me.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Me.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Me.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Me.DataBuffer.prototype.copy=function(){return new Me.DataBuffer(this)};Me.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Me.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Me.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Me.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Me.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Me.binary.raw.encode(e);if(t==="hex")return Me.binary.hex.encode(e);if(t==="base64")return Me.binary.base64.encode(e);if(t==="utf8")return Me.text.utf8.decode(e);if(t==="utf16")return Me.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Me.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Me.encodeUtf8(t)),new Me.ByteBuffer(t)};Me.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Me.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Me.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Me.bytesToHex=function(t){return Me.createBuffer(t).toHex()};Me.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Aw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yw=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],jst="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Me.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=Aw.charAt(i>>2),r+=Aw.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Aw.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Aw.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Me.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=yw[t.charCodeAt(a++)-43],n=yw[t.charCodeAt(a++)-43],i=yw[t.charCodeAt(a++)-43],o=yw[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Me.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Me.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Me.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Wst.encode,decode:Wst.decode}};Me.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Me.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Me.binary.hex.encode=Me.bytesToHex;Me.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Me.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=Aw.charAt(i>>2),r+=Aw.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Aw.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":Aw.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Me.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=yw[t.charCodeAt(l++)-43],o=yw[t.charCodeAt(l++)-43],a=yw[t.charCodeAt(l++)-43],c=yw[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Me.binary.base58.encode=function(t,e){return Me.binary.baseN.encode(t,jst,e)};Me.binary.base58.decode=function(t,e){return Me.binary.baseN.decode(t,jst,e)};Me.text={utf8:{},utf16:{}};Me.text.utf8.encode=function(t,e,r){t=Me.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Me.text.utf8.decode=function(t){return Me.decodeUtf8(String.fromCharCode.apply(null,t))};Me.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Me.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Me.deflate=function(t,e,r){if(e=Me.decode64(t.deflate(Me.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Me.inflate=function(t,e,r){var n=t.inflate(Me.encode64(e)).rval;return n===null?null:Me.decode64(n)};var oTe=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Me.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),sTe=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Me.decode64(r))),r},"_getStorageObject"),lcr=s(function(t,e,r,n){var i=sTe(t,e);i===null&&(i={}),i[r]=n,oTe(t,e,i)},"_setItem"),ucr=s(function(t,e,r){var n=sTe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),dcr=s(function(t,e,r){var n=sTe(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),oTe(t,e,n)}},"_removeItem"),fcr=s(function(t,e){oTe(t,e,null)},"_clearItems"),pre=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Me.setItem=function(t,e,r,n,i){pre(lcr,arguments,i)};Me.getItem=function(t,e,r,n){return pre(ucr,arguments,n)};Me.removeItem=function(t,e,r,n){pre(dcr,arguments,n)};Me.clearItems=function(t,e,r){pre(fcr,arguments,r)};Me.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Me.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Me.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return l+(f?u.substr(0,f)+c:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Me.formatSize=function(t){return t>=1073741824?t=Me.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Me.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Me.formatNumber(t/1024,0)+" KiB":t=Me.formatNumber(t,0)+" bytes",t};Me.bytesFromIP=function(t){return t.indexOf(".")!==-1?Me.bytesFromIPv4(t):t.indexOf(":")!==-1?Me.bytesFromIPv6(t):null};Me.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Me.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Me.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Me.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Me.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Me.bytesToIP=function(t){return t.length===4?Me.bytesToIPv4(t):t.length===16?Me.bytesToIPv6(t):null};Me.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Me.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Me.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Me.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Me&&!t.update)return e(null,Me.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Me.cores=navigator.hardwareConcurrency,e(null,Me.cores);if(typeof Worker>"u")return Me.cores=1,e(null,Me.cores);if(typeof Blob>"u")return Me.cores=2,e(null,Me.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(f,p){return f+p},0)/a.length);return Me.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Me.cores)}i(l,function(f,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],f=0;f<a;++f){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)l[h].terminate();c(null,u)}}),l.push(p)}for(var f=0;f<a;++f)l[f].postMessage(f)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var f=c[u],p=l[u]=[],m=0;m<a;++m)if(u!==m){var h=c[m];(f.st>h.st&&f.st<h.et||h.st>f.st&&h.st<f.et)&&p.push(m)}return l.reduce(function(g,A){return Math.max(g,A.length)},0)}s(o,"reduce")}});var mre=H((_hi,Vst)=>{d();var hu=_i();qo();Vst.exports=hu.cipher=hu.cipher||{};hu.cipher.algorithms=hu.cipher.algorithms||{};hu.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=hu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new hu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};hu.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=hu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new hu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};hu.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),hu.cipher.algorithms[t]=e};hu.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in hu.cipher.algorithms?hu.cipher.algorithms[t]:null};var aTe=hu.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};aTe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=hu.util.createBuffer(),this.output=t.output||hu.util.createBuffer(),this.mode.start(e)};aTe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};aTe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var lTe=H((khi,zst)=>{d();var gu=_i();qo();gu.cipher=gu.cipher||{};var Yi=zst.exports=gu.cipher.modes=gu.cipher.modes||{};Yi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Yi.ecb.prototype.start=function(t){};Yi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Yi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Yi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Yi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Yi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Yi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=hre(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Yi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Yi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Yi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Yi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Yi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=gu.util.createBuffer(),this._partialBytes=0};Yi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Yi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Yi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Yi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=gu.util.createBuffer(),this._partialBytes=0};Yi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Yi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Yi.ofb.prototype.decrypt=Yi.ofb.prototype.encrypt;Yi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=gu.util.createBuffer(),this._partialBytes=0};Yi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=hre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Yi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}gre(this._inBlock)};Yi.ctr.prototype.decrypt=Yi.ctr.prototype.encrypt;Yi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=gu.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Yi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=gu.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=gu.util.createBuffer(t.additionalData):r=gu.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=gu.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(cTe(n*8)))}this._inBlock=this._j0.slice(0),gre(this._inBlock),this._partialBytes=0,r=gu.util.createBuffer(r),this._aDataLength=cTe(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Yi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),gre(this._inBlock)};Yi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),gre(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Yi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=gu.util.createBuffer();var n=this._aDataLength.concat(cTe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Yi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Yi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Yi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Yi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Yi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};Yi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function hre(t,e){if(typeof t=="string"&&(t=gu.util.createBuffer(t)),gu.util.isArray(t)&&t.length>4){var r=t;t=gu.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!gu.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(hre,"transformIV");function gre(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(gre,"inc32");function cTe(t){return[t/4294967296|0,t&4294967295]}s(cTe,"from64To32")});var Cw=H((Bhi,Xst)=>{d();var qs=_i();mre();lTe();qo();Xst.exports=qs.aes=qs.aes||{};qs.aes.startEncrypting=function(t,e,r,n){var i=Are({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};qs.aes.createEncryptionCipher=function(t,e){return Are({key:t,output:null,decrypt:!1,mode:e})};qs.aes.startDecrypting=function(t,e,r,n){var i=Are({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};qs.aes.createDecryptionCipher=function(t,e){return Are({key:t,output:null,decrypt:!0,mode:e})};qs.aes.Algorithm=function(t,e){fTe||Yst();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return dTe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return dTe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};qs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=qs.util.createBuffer(e);else if(qs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=qs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!qs.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!qs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=Jst(e,t.decrypt&&!a),this._init=!0}};qs.aes._expandKey=function(t,e){return fTe||Yst(),Jst(t,e)};qs.aes._updateBlock=dTe;NN("AES-ECB",qs.cipher.modes.ecb);NN("AES-CBC",qs.cipher.modes.cbc);NN("AES-CFB",qs.cipher.modes.cfb);NN("AES-OFB",qs.cipher.modes.ofb);NN("AES-CTR",qs.cipher.modes.ctr);NN("AES-GCM",qs.cipher.modes.gcm);function NN(t,e){var r=s(function(){return new qs.aes.Algorithm(t,e)},"factory");qs.cipher.registerAlgorithm(t,r)}s(NN,"registerAlgorithm");var fTe=!1,BN=4,Bf,uTe,Kst,xk,VA;function Yst(){fTe=!0,Kst=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Bf=new Array(256),uTe=new Array(256),xk=new Array(4),VA=new Array(4);for(var e=0;e<4;++e)xk[e]=new Array(256),VA[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,f,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,Bf[r]=c,uTe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),f=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)xk[p][r]=u,VA[p][c]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(Yst,"initialize");function Jst(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=BN*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=Bf[n>>>16&255]<<24^Bf[n>>>8&255]<<16^Bf[n&255]<<8^Bf[n>>>24]^Kst[i]<<24,i++):o>6&&l%o===4&&(n=Bf[n>>>24]<<24^Bf[n>>>16&255]<<16^Bf[n>>>8&255]<<8^Bf[n&255]),r[l]=r[l-o]^n;if(e){var u,f=VA[0],p=VA[1],m=VA[2],h=VA[3],g=r.slice(0);c=r.length;for(var l=0,A=c-BN;l<c;l+=BN,A-=BN)if(l===0||l===c-BN)g[l]=r[A],g[l+1]=r[A+3],g[l+2]=r[A+2],g[l+3]=r[A+1];else for(var y=0;y<BN;++y)u=r[A+y],g[l+(3&-y)]=f[Bf[u>>>24]]^p[Bf[u>>>16&255]]^m[Bf[u>>>8&255]]^h[Bf[u&255]];r=g}return r}s(Jst,"_expandKey");function dTe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=VA[0],a=VA[1],c=VA[2],l=VA[3],u=uTe):(o=xk[0],a=xk[1],c=xk[2],l=xk[3],u=Bf);var f,p,m,h,g,A,y;f=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var E=3,b=1;b<i;++b)g=o[f>>>24]^a[p>>>16&255]^c[m>>>8&255]^l[h&255]^t[++E],A=o[p>>>24]^a[m>>>16&255]^c[h>>>8&255]^l[f&255]^t[++E],y=o[m>>>24]^a[h>>>16&255]^c[f>>>8&255]^l[p&255]^t[++E],h=o[h>>>24]^a[f>>>16&255]^c[p>>>8&255]^l[m&255]^t[++E],f=g,p=A,m=y;r[0]=u[f>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++E],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[f&255]^t[++E],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[f>>>8&255]<<8^u[p&255]^t[++E],r[n?1:3]=u[h>>>24]<<24^u[f>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++E]}s(dTe,"_updateBlock");function Are(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=qs.cipher.createDecipher(r,t.key):n=qs.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof qs.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(Are,"_createCipher")});var vw=H((Lhi,Zst)=>{d();var BQ=_i();BQ.pki=BQ.pki||{};var pTe=Zst.exports=BQ.pki.oids=BQ.oids=BQ.oids||{};function Lt(t,e){pTe[t]=e,pTe[e]=t}s(Lt,"_IN");function ns(t,e){pTe[t]=e}s(ns,"_I_");Lt("1.2.840.113549.1.1.1","rsaEncryption");Lt("1.2.840.113549.1.1.4","md5WithRSAEncryption");Lt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Lt("1.2.840.113549.1.1.7","RSAES-OAEP");Lt("1.2.840.113549.1.1.8","mgf1");Lt("1.2.840.113549.1.1.9","pSpecified");Lt("1.2.840.113549.1.1.10","RSASSA-PSS");Lt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Lt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Lt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Lt("1.3.101.112","EdDSA25519");Lt("1.2.840.10040.4.3","dsa-with-sha1");Lt("1.3.14.3.2.7","desCBC");Lt("1.3.14.3.2.26","sha1");Lt("1.3.14.3.2.29","sha1WithRSASignature");Lt("2.16.840.1.101.3.4.2.1","sha256");Lt("2.16.840.1.101.3.4.2.2","sha384");Lt("2.16.840.1.101.3.4.2.3","sha512");Lt("2.16.840.1.101.3.4.2.4","sha224");Lt("2.16.840.1.101.3.4.2.5","sha512-224");Lt("2.16.840.1.101.3.4.2.6","sha512-256");Lt("1.2.840.113549.2.2","md2");Lt("1.2.840.113549.2.5","md5");Lt("1.2.840.113549.1.7.1","data");Lt("1.2.840.113549.1.7.2","signedData");Lt("1.2.840.113549.1.7.3","envelopedData");Lt("1.2.840.113549.1.7.4","signedAndEnvelopedData");Lt("1.2.840.113549.1.7.5","digestedData");Lt("1.2.840.113549.1.7.6","encryptedData");Lt("1.2.840.113549.1.9.1","emailAddress");Lt("1.2.840.113549.1.9.2","unstructuredName");Lt("1.2.840.113549.1.9.3","contentType");Lt("1.2.840.113549.1.9.4","messageDigest");Lt("1.2.840.113549.1.9.5","signingTime");Lt("1.2.840.113549.1.9.6","counterSignature");Lt("1.2.840.113549.1.9.7","challengePassword");Lt("1.2.840.113549.1.9.8","unstructuredAddress");Lt("1.2.840.113549.1.9.14","extensionRequest");Lt("1.2.840.113549.1.9.20","friendlyName");Lt("1.2.840.113549.1.9.21","localKeyId");Lt("1.2.840.113549.1.9.22.1","x509Certificate");Lt("1.2.840.113549.1.12.10.1.1","keyBag");Lt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Lt("1.2.840.113549.1.12.10.1.3","certBag");Lt("1.2.840.113549.1.12.10.1.4","crlBag");Lt("1.2.840.113549.1.12.10.1.5","secretBag");Lt("1.2.840.113549.1.12.10.1.6","safeContentsBag");Lt("1.2.840.113549.1.5.13","pkcs5PBES2");Lt("1.2.840.113549.1.5.12","pkcs5PBKDF2");Lt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Lt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Lt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Lt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Lt("1.2.840.113549.2.7","hmacWithSHA1");Lt("1.2.840.113549.2.8","hmacWithSHA224");Lt("1.2.840.113549.2.9","hmacWithSHA256");Lt("1.2.840.113549.2.10","hmacWithSHA384");Lt("1.2.840.113549.2.11","hmacWithSHA512");Lt("1.2.840.113549.3.7","des-EDE3-CBC");Lt("2.16.840.1.101.3.4.1.2","aes128-CBC");Lt("2.16.840.1.101.3.4.1.22","aes192-CBC");Lt("2.16.840.1.101.3.4.1.42","aes256-CBC");Lt("2.5.4.3","commonName");Lt("2.5.4.4","surname");Lt("2.5.4.5","serialNumber");Lt("2.5.4.6","countryName");Lt("2.5.4.7","localityName");Lt("2.5.4.8","stateOrProvinceName");Lt("2.5.4.9","streetAddress");Lt("2.5.4.10","organizationName");Lt("2.5.4.11","organizationalUnitName");Lt("2.5.4.12","title");Lt("2.5.4.13","description");Lt("2.5.4.15","businessCategory");Lt("2.5.4.17","postalCode");Lt("2.5.4.42","givenName");Lt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Lt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Lt("2.16.840.1.113730.1.1","nsCertType");Lt("2.16.840.1.113730.1.13","nsComment");ns("2.5.29.1","authorityKeyIdentifier");ns("2.5.29.2","keyAttributes");ns("2.5.29.3","certificatePolicies");ns("2.5.29.4","keyUsageRestriction");ns("2.5.29.5","policyMapping");ns("2.5.29.6","subtreesConstraint");ns("2.5.29.7","subjectAltName");ns("2.5.29.8","issuerAltName");ns("2.5.29.9","subjectDirectoryAttributes");ns("2.5.29.10","basicConstraints");ns("2.5.29.11","nameConstraints");ns("2.5.29.12","policyConstraints");ns("2.5.29.13","basicConstraints");Lt("2.5.29.14","subjectKeyIdentifier");Lt("2.5.29.15","keyUsage");ns("2.5.29.16","privateKeyUsagePeriod");Lt("2.5.29.17","subjectAltName");Lt("2.5.29.18","issuerAltName");Lt("2.5.29.19","basicConstraints");ns("2.5.29.20","cRLNumber");ns("2.5.29.21","cRLReason");ns("2.5.29.22","expirationDate");ns("2.5.29.23","instructionCode");ns("2.5.29.24","invalidityDate");ns("2.5.29.25","cRLDistributionPoints");ns("2.5.29.26","issuingDistributionPoint");ns("2.5.29.27","deltaCRLIndicator");ns("2.5.29.28","issuingDistributionPoint");ns("2.5.29.29","certificateIssuer");ns("2.5.29.30","nameConstraints");Lt("2.5.29.31","cRLDistributionPoints");Lt("2.5.29.32","certificatePolicies");ns("2.5.29.33","policyMappings");ns("2.5.29.34","policyConstraints");Lt("2.5.29.35","authorityKeyIdentifier");ns("2.5.29.36","policyConstraints");Lt("2.5.29.37","extKeyUsage");ns("2.5.29.46","freshestCRL");ns("2.5.29.54","inhibitAnyPolicy");Lt("1.3.6.1.4.1.11129.2.4.2","timestampList");Lt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Lt("1.3.6.1.5.5.7.3.1","serverAuth");Lt("1.3.6.1.5.5.7.3.2","clientAuth");Lt("1.3.6.1.5.5.7.3.3","codeSigning");Lt("1.3.6.1.5.5.7.3.4","emailProtection");Lt("1.3.6.1.5.5.7.3.8","timeStamping")});var zA=H((Qhi,tat)=>{d();var ca=_i();qo();vw();var hr=tat.exports=ca.asn1=ca.asn1||{};hr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};hr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};hr.create=function(t,e,r,n,i){if(ca.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||ca.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=hr.copy(c)),c};hr.copy=function(t,e){var r;if(ca.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(hr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:hr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};hr.equals=function(t,e,r){if(ca.util.isArray(t)){if(!ca.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!hr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&hr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};hr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function NQ(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(NQ,"_checkBufferLength");var pcr=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;NQ(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");hr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=ca.util.createBuffer(t));var r=t.length(),n=yre(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function yre(t,e,r,n){var i;NQ(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=pcr(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var f,p,m=(o&32)===32;if(m)if(f=[],l===void 0)for(;;){if(NQ(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),f.push(yre(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),f.push(yre(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(f===void 0&&a===hr.Class.UNIVERSAL&&c===hr.Type.BITSTRING&&(p=t.bytes(l)),f===void 0&&n.decodeBitStrings&&a===hr.Class.UNIVERSAL&&c===hr.Type.BITSTRING&&l>1){var h=t.read,g=e,A=0;if(c===hr.Type.BITSTRING&&(NQ(t,e,1),A=t.getByte(),e--),A===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},E=yre(t,e,r+1,y),b=i-t.length();e-=b,c==hr.Type.BITSTRING&&b++;var S=E.tagClass;b===l&&(S===hr.Class.UNIVERSAL||S===hr.Class.CONTEXT_SPECIFIC)&&(f=[E])}catch{}f===void 0&&(t.read=h,e=g)}if(f===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===hr.Type.BMPSTRING)for(f="";l>0;l-=2)NQ(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(l),e-=l}var R=p===void 0?null:{bitStringContents:p};return hr.create(a,c,m,f,R)}s(yre,"_fromDer");hr.toDer=function(t){var e=ca.util.createBuffer(),r=t.tagClass|t.type,n=ca.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=hr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(hr.toDer(t.value[o]))}else if(t.type===hr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===hr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};hr.oidToDer=function(t){var e=t.split("."),r=ca.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};hr.derToOid=function(t){var e;typeof t=="string"&&(t=ca.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};hr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var f=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=f*60+p;m*=6e4,l==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};hr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};hr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};hr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};hr.integerToDer=function(t){var e=ca.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};hr.derToInteger=function(t){typeof t=="string"&&(t=ca.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};hr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&ca.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=hr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var eat=/[^\\u0000-\\u00ff]/;hr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case hr.Class.UNIVERSAL:n+="Universal:";break;case hr.Class.APPLICATION:n+="Application:";break;case hr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case hr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===hr.Class.UNIVERSAL)switch(n+=t.type,t.type){case hr.Type.NONE:n+=" (None)";break;case hr.Type.BOOLEAN:n+=" (Boolean)";break;case hr.Type.INTEGER:n+=" (Integer)";break;case hr.Type.BITSTRING:n+=" (Bit string)";break;case hr.Type.OCTETSTRING:n+=" (Octet string)";break;case hr.Type.NULL:n+=" (Null)";break;case hr.Type.OID:n+=" (Object Identifier)";break;case hr.Type.ODESC:n+=" (Object Descriptor)";break;case hr.Type.EXTERNAL:n+=" (External or Instance of)";break;case hr.Type.REAL:n+=" (Real)";break;case hr.Type.ENUMERATED:n+=" (Enumerated)";break;case hr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case hr.Type.UTF8:n+=" (UTF8)";break;case hr.Type.ROID:n+=" (Relative Object Identifier)";break;case hr.Type.SEQUENCE:n+=" (Sequence)";break;case hr.Type.SET:n+=" (Set)";break;case hr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case hr.Type.IA5String:n+=" (IA5String (ASCII))";break;case hr.Type.UTCTIME:n+=" (UTC time)";break;case hr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case hr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=hr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===hr.Type.OID){var l=hr.derToOid(t.value);n+=l,ca.pki&&ca.pki.oids&&l in ca.pki.oids&&(n+=" ("+ca.pki.oids[l]+") ")}if(t.type===hr.Type.INTEGER)try{n+=hr.derToInteger(t.value)}catch{n+="0x"+ca.util.bytesToHex(t.value)}else if(t.type===hr.Type.BITSTRING){if(t.value.length>1?n+="0x"+ca.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===hr.Type.OCTETSTRING)eat.test(t.value)||(n+="("+t.value+") "),n+="0x"+ca.util.bytesToHex(t.value);else if(t.type===hr.Type.UTF8)try{n+=ca.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+ca.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===hr.Type.PRINTABLESTRING||t.type===hr.Type.IA5String?n+=t.value:eat.test(t.value)?n+="0x"+ca.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var c1=H((Hhi,rat)=>{d();var Cre=_i();rat.exports=Cre.md=Cre.md||{};Cre.md.algorithms=Cre.md.algorithms||{}});var MN=H((Whi,nat)=>{d();var Xx=_i();c1();qo();var mcr=nat.exports=Xx.hmac=Xx.hmac||{};mcr.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in Xx.md.algorithms)e=Xx.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=Xx.util.createBuffer(a);else if(Xx.util.isArray(a)){var c=a;a=Xx.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=Xx.util.createBuffer(),n=Xx.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var xre=H((Ghi,aat)=>{d();var l1=_i();c1();qo();var oat=aat.exports=l1.md5=l1.md5||{};l1.md.md5=l1.md.algorithms.md5=oat;oat.create=function(){sat||hcr();var t=null,e=l1.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=l1.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=l1.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),iat(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=l1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(mTe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};iat(f,r,i);var p=l1.util.createBuffer();return p.putInt32Le(f.h0),p.putInt32Le(f.h1),p.putInt32Le(f.h2),p.putInt32Le(f.h3),p},n};var mTe=null,vre=null,MQ=null,LN=null,sat=!1;function hcr(){mTe="\x80",mTe+=l1.util.fillString("\0",64),vre=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],MQ=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],LN=new Array(64);for(var t=0;t<64;++t)LN[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);sat=!0}s(hcr,"_init");function iat(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),l=c^o&(a^c),n=i+l+LN[f]+e[f],u=MQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<32;++f)l=a^c&(o^a),n=i+l+LN[f]+e[vre[f]],u=MQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<48;++f)l=o^a^c,n=i+l+LN[f]+e[vre[f]],u=MQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<64;++f)l=a^(o|~c),n=i+l+LN[f]+e[vre[f]],u=MQ[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(iat,"_update")});var Ek=H((Khi,lat)=>{d();var bre=_i();qo();var cat=lat.exports=bre.pem=bre.pem||{};cat.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Ere(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Ere(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Ere(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Ere(t.headers[i]);return t.procType&&(r+=`\r
`),r+=bre.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};cat.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:bre.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var f=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var m=l[p];if(!/\s/.test(m[0]))break;f+=m,u=p}if(o=f.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),A=0;A<g.length;++A)h.values.push(gcr(g[A]));if(c.procType)if(!c.contentDomain&&h.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Ere(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(Ere,"foldHeader");function gcr(t){return t.replace(/^\s+/,"")}s(gcr,"ltrim")});var LQ=H((Xhi,dat)=>{d();var Ba=_i();mre();lTe();qo();dat.exports=Ba.des=Ba.des||{};Ba.des.startEncrypting=function(t,e,r,n){var i=Ire({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ba.des.createEncryptionCipher=function(t,e){return Ire({key:t,output:null,decrypt:!1,mode:e})};Ba.des.startDecrypting=function(t,e,r,n){var i=Ire({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ba.des.createDecryptionCipher=function(t,e){return Ire({key:t,output:null,decrypt:!0,mode:e})};Ba.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return uat(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return uat(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};Ba.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ba.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Tcr(e),this._init=!0}};u1("DES-ECB",Ba.cipher.modes.ecb);u1("DES-CBC",Ba.cipher.modes.cbc);u1("DES-CFB",Ba.cipher.modes.cfb);u1("DES-OFB",Ba.cipher.modes.ofb);u1("DES-CTR",Ba.cipher.modes.ctr);u1("3DES-ECB",Ba.cipher.modes.ecb);u1("3DES-CBC",Ba.cipher.modes.cbc);u1("3DES-CFB",Ba.cipher.modes.cfb);u1("3DES-OFB",Ba.cipher.modes.ofb);u1("3DES-CTR",Ba.cipher.modes.ctr);function u1(t,e){var r=s(function(){return new Ba.des.Algorithm(t,e)},"factory");Ba.cipher.registerAlgorithm(t,r)}s(u1,"registerAlgorithm");var Acr=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ycr=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Ccr=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],vcr=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],xcr=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Ecr=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],bcr=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Icr=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Tcr(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],A=t.length()>8?3:1,y=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,S,R=0;R<A;R++){var B=t.getInt32(),L=t.getInt32();S=(B>>>4^L)&252645135,L^=S,B^=S<<4,S=(L>>>-16^B)&65535,B^=S,L^=S<<-16,S=(B>>>2^L)&858993459,L^=S,B^=S<<2,S=(L>>>-16^B)&65535,B^=S,L^=S<<-16,S=(B>>>1^L)&1431655765,L^=S,B^=S<<1,S=(L>>>8^B)&16711935,B^=S,L^=S<<8,S=(B>>>1^L)&1431655765,L^=S,B^=S<<1,S=B<<8|L>>>20&240,B=L<<24|L<<8&16711680|L>>>8&65280|L>>>24&240,L=S;for(var O=0;O<E.length;++O){E[O]?(B=B<<2|B>>>26,L=L<<2|L>>>26):(B=B<<1|B>>>27,L=L<<1|L>>>27),B&=-15,L&=-15;var Y=e[B>>>28]|r[B>>>24&15]|n[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|c[B>>>4&15],V=l[L>>>28]|u[L>>>24&15]|f[L>>>20&15]|p[L>>>16&15]|m[L>>>12&15]|h[L>>>8&15]|g[L>>>4&15];S=(V>>>16^Y)&65535,y[b++]=Y^S,y[b++]=V^S<<16}}return y}s(Tcr,"_createKeys");function uat(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],p=o[u+2],m=o[u];m!=f;m+=p){var h=l^t[m],g=(l>>>4|l<<28)^t[m+1];a=c,c=l,l=a^(ycr[h>>>24&63]|vcr[h>>>16&63]|Ecr[h>>>8&63]|Icr[h&63]|Acr[g>>>24&63]|Ccr[g>>>16&63]|xcr[g>>>8&63]|bcr[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(uat,"_updateBlock");function Ire(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Ba.cipher.createDecipher(r,t.key):n=Ba.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof Ba.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(Ire,"_createCipher")});var Tre=H((tgi,fat)=>{d();var Nf=_i();MN();c1();qo();var wcr=Nf.pkcs5=Nf.pkcs5||{},Zx;Nf.util.isNodejs&&!Nf.options.usePureJavaScript&&(Zx=require("crypto"));fat.exports=Nf.pbkdf2=wcr.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Nf.util.isNodejs&&!Nf.options.usePureJavaScript&&Zx.pbkdf2&&(i===null||typeof i!="object")&&(Zx.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?Zx.pbkdf2Sync.length===4?Zx.pbkdf2(t,e,r,n,function(S,R){if(S)return o(S);o(null,R.toString("binary"))}):Zx.pbkdf2(t,e,r,n,i,function(S,R){if(S)return o(S);o(null,R.toString("binary"))}):Zx.pbkdf2Sync.length===4?Zx.pbkdf2Sync(t,e,r,n).toString("binary"):Zx.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Nf.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Nf.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,f=Nf.hmac.create();f.start(i,t);var p="",m,h,g;if(!o){for(var A=1;A<=l;++A){f.start(null,null),f.update(e),f.update(Nf.util.int32ToBytes(A)),m=g=f.digest().getBytes();for(var y=2;y<=r;++y)f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Nf.util.xorBytes(m,h,a),g=h;p+=A<l?m:m.substr(0,u)}return p}var A=1,y;function E(){if(A>l)return o(null,p);f.start(null,null),f.update(e),f.update(Nf.util.int32ToBytes(A)),m=g=f.digest().getBytes(),y=2,b()}s(E,"outer");function b(){if(y<=r)return f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Nf.util.xorBytes(m,h,a),g=h,++y,Nf.util.setImmediate(b);p+=A<l?m:m.substr(0,u),++A,E()}s(b,"inner"),E()}});var gTe=H((igi,Aat)=>{d();var d1=_i();c1();qo();var mat=Aat.exports=d1.sha256=d1.sha256||{};d1.md.sha256=d1.md.algorithms.sha256=mat;mat.create=function(){hat||Scr();var t=null,e=d1.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=d1.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=d1.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),pat(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=d1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(hTe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};pat(p,r,i);var m=d1.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var hTe=null,hat=!1,gat=null;function Scr(){hTe="\x80",hTe+=d1.util.fillString("\0",64),gat=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],hat=!0}s(Scr,"_init");function pat(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,A,y,E,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,A=t.h5,y=t.h6,E=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=y^g&(A^y),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),l=f&p|m&(f^p),n=E+a+c+gat[u]+e[u],i=o+l,E=y,y=A,A=g,g=h+n>>>0,h=m,m=p,p=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+A|0,t.h6=t.h6+y|0,t.h7=t.h7+E|0,b-=64}}s(pat,"_update")});var ATe=H((agi,yat)=>{d();var f1=_i();qo();var wre=null;f1.util.isNodejs&&!f1.options.usePureJavaScript&&!process.versions["node-webkit"]&&(wre=require("crypto"));var _cr=yat.exports=f1.prng=f1.prng||{};_cr.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,A=f1.util.createBuffer();e.key=null,y();function y(E){if(E)return f(E);if(A.length()>=u)return f(null,A.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return f1.util.nextTick(function(){o(y)});var b=p(e.key,e.seed);e.generated+=b.length,A.putBytes(b),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),f1.util.setImmediate(y)}s(y,"generate")},e.generateSync=function(u){var f=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=f1.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var A=f(e.key,e.seed);e.generated+=A.length,g.putBytes(A),e.key=m(f(e.key,p(e.seed))),e.seed=h(f(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(p,m){if(p)return u(p);e.collect(m),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,p=0;p<32;++p)e.reseeds%f===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(c,"_seed");function l(u){var f=null,p=f1.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(f=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=f1.util.createBuffer();if(f)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),A=new Uint32Array(Math.floor(g));try{f(A);for(var y=0;y<A.length;++y)h.putInt32(A[y])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var E,b,S,R=Math.floor(Math.random()*65536);h.length()<u;){b=16807*(R&65535),E=16807*(R>>16),b+=(E&32767)<<16,b+=E>>15,b=(b&2147483647)+(b>>31),R=b&4294967295;for(var y=0;y<3;++y)S=R>>>(y<<3),S^=Math.floor(Math.random()*256),h.putByte(S&255)}return h.getBytes(u)}return s(l,"defaultSeedFile"),wre?(e.seedFile=function(u,f){wre.randomBytes(u,function(p,m){if(p)return f(p);f(null,m.toString())})},e.seedFileSync=function(u){return wre.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,l(u))}catch(p){f(p)}},e.seedFileSync=l),e.collect=function(u){for(var f=u.length,p=0;p<f;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var p="",m=0;m<f;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var A=g.data;A.forge&&A.forge.prng&&(self.removeEventListener("message",h),m(A.forge.prng.err,A.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var f=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",f)}},e}});var Wh=H((ugi,yTe)=>{d();var Au=_i();Cw();gTe();ATe();qo();(function(){if(Au.random&&Au.random.getBytes){yTe.exports=Au.random;return}(function(t){var e={},r=new Array(4),n=Au.util.createBuffer();e.formatKey=function(p){var m=Au.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),Au.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=Au.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return Au.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=Au.md.sha256;function i(){var p=Au.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,c=Au.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),Au.options.usePureJavaScript||!Au.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Au.random)Au.random=o;else for(var f in o)Au.random[f]=o[f];Au.random.createInstance=i,yTe.exports=Au.random})(typeof jQuery<"u"?jQuery:null)})()});var vTe=H((pgi,xat)=>{d();var O0=_i();qo();var CTe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Cat=[1,2,3,5],Rcr=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),kcr=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");xat.exports=O0.rc2=O0.rc2||{};O0.rc2.expandKey=function(t,e){typeof t=="string"&&(t=O0.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(CTe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,CTe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,CTe[r.at(c+1)^r.at(c+o)]);return r};var vat=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,f,p=[];for(t=O0.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=Rcr(g[u],Cat[u]),f++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=kcr(g[u],Cat[u]),g[u]-=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),f--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var A=[];for(u=0;u<4;u++){var y=i.getInt16Le();a!==null&&(r?y^=a.getInt16Le():a.putInt16Le(y)),A.push(y&65535)}f=r?0:63;for(var E=0;E<g.length;E++)for(var b=0;b<g[E][0];b++)g[E][1](A);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(A[u]):A[u]^=a.getInt16Le()),o.putInt16Le(A[u])},"runPlan"),h=null;return h={start:s(function(g,A){g&&typeof g=="string"&&(g=O0.util.createBuffer(g)),n=!1,i=O0.util.createBuffer(),o=A||new O0.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var A=!0;if(r)if(g)A=g(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(A&&(n=!0,h.update()),!r&&(A=i.length()===0,A))if(g)A=g(8,o,!r);else{var E=o.length(),b=o.at(E-1);b>E?A=!1:o.truncate(b)}return A},"finish")},h},"createCipher");O0.rc2.startEncrypting=function(t,e,r){var n=O0.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};O0.rc2.createEncryptionCipher=function(t,e){return vat(t,e,!0)};O0.rc2.startDecrypting=function(t,e,r){var n=O0.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};O0.rc2.createDecryptionCipher=function(t,e){return vat(t,e,!1)}});var OQ=H((ggi,Rat)=>{d();var xTe=_i();Rat.exports=xTe.jsbn=xTe.jsbn||{};var eE,Pcr=0xdeadbeefcafe,Eat=(Pcr&16777215)==15715070;function kt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(kt,"BigInteger");xTe.jsbn.BigInteger=kt;function Ho(){return new kt(null)}s(Ho,"nbi");function Dcr(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(Dcr,"am1");function Bcr(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,f=c*l+u*a;l=a*l+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(f>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s(Bcr,"am2");function bat(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,f=c*l+u*a;l=a*l+((f&16383)<<14)+r.data[n]+i,i=(l>>28)+(f>>14)+c*u,r.data[n++]=l&268435455}return i}s(bat,"am3");typeof navigator>"u"?(kt.prototype.am=bat,eE=28):Eat&&navigator.appName=="Microsoft Internet Explorer"?(kt.prototype.am=Bcr,eE=30):Eat&&navigator.appName!="Netscape"?(kt.prototype.am=Dcr,eE=26):(kt.prototype.am=bat,eE=28);kt.prototype.DB=eE;kt.prototype.DM=(1<<eE)-1;kt.prototype.DV=1<<eE;var ETe=52;kt.prototype.FV=Math.pow(2,ETe);kt.prototype.F1=ETe-eE;kt.prototype.F2=2*eE-ETe;var Ncr="0123456789abcdefghijklmnopqrstuvwxyz",Sre=new Array,FN,jh;FN=48;for(jh=0;jh<=9;++jh)Sre[FN++]=jh;FN=97;for(jh=10;jh<36;++jh)Sre[FN++]=jh;FN=65;for(jh=10;jh<36;++jh)Sre[FN++]=jh;function Iat(t){return Ncr.charAt(t)}s(Iat,"int2char");function Tat(t,e){var r=Sre[t.charCodeAt(e)];return r??-1}s(Tat,"intAt");function Mcr(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(Mcr,"bnpCopyTo");function Lcr(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(Lcr,"bnpFromInt");function xw(t){var e=Ho();return e.fromInt(t),e}s(xw,"nbv");function Fcr(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:Tat(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&kt.ZERO.subTo(this,this)}s(Fcr,"bnpFromString");function Ocr(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(Ocr,"bnpClamp");function Qcr(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=Iat(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=Iat(n));return i?o:"0"}s(Qcr,"bnToString");function Ucr(){var t=Ho();return kt.ZERO.subTo(this,t),t}s(Ucr,"bnNegate");function qcr(){return this.s<0?this.negate():this}s(qcr,"bnAbs");function Hcr(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(Hcr,"bnCompareTo");function _re(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(_re,"nbits");function $cr(){return this.t<=0?0:this.DB*(this.t-1)+_re(this.data[this.t-1]^this.s&this.DM)}s($cr,"bnBitLength");function Wcr(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(Wcr,"bnpDLShiftTo");function jcr(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(jcr,"bnpDRShiftTo");function Gcr(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(Gcr,"bnpLShiftTo");function Vcr(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(Vcr,"bnpRShiftTo");function zcr(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(zcr,"bnpSubTo");function Kcr(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&kt.ZERO.subTo(e,e)}s(Kcr,"bnpMultiplyTo");function Ycr(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(Ycr,"bnpSquareTo");function Jcr(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ho());var o=Ho(),a=this.s,c=t.s,l=this.DB-_re(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var p=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,A=r.t,y=A-u,E=e??Ho();for(o.dlShiftTo(y,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),kt.ONE.dlShiftTo(u,E),E.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--y>=0;){var b=r.data[--A]==f?this.DM:Math.floor(r.data[A]*m+(r.data[A-1]+g)*h);if((r.data[A]+=o.am(0,b,r,y,0,u))<b)for(o.dlShiftTo(y,E),r.subTo(E,r);r.data[A]<--b;)r.subTo(E,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&kt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&kt.ZERO.subTo(r,r)}}}s(Jcr,"bnpDivRemTo");function Xcr(t){var e=Ho();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(kt.ZERO)>0&&t.subTo(e,e),e}s(Xcr,"bnMod");function bk(t){this.m=t}s(bk,"Classic");function Zcr(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(Zcr,"cConvert");function elr(t){return t}s(elr,"cRevert");function tlr(t){t.divRemTo(this.m,null,t)}s(tlr,"cReduce");function rlr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(rlr,"cMulTo");function nlr(t,e){t.squareTo(e),this.reduce(e)}s(nlr,"cSqrTo");bk.prototype.convert=Zcr;bk.prototype.revert=elr;bk.prototype.reduce=tlr;bk.prototype.mulTo=rlr;bk.prototype.sqrTo=nlr;function ilr(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(ilr,"bnpInvDigit");function Ik(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(Ik,"Montgomery");function olr(t){var e=Ho();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(kt.ZERO)>0&&this.m.subTo(e,e),e}s(olr,"montConvert");function slr(t){var e=Ho();return t.copyTo(e),this.reduce(e),e}s(slr,"montRevert");function alr(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(alr,"montReduce");function clr(t,e){t.squareTo(e),this.reduce(e)}s(clr,"montSqrTo");function llr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(llr,"montMulTo");Ik.prototype.convert=olr;Ik.prototype.revert=slr;Ik.prototype.reduce=alr;Ik.prototype.mulTo=llr;Ik.prototype.sqrTo=clr;function ulr(){return(this.t>0?this.data[0]&1:this.s)==0}s(ulr,"bnpIsEven");function dlr(t,e){if(t>4294967295||t<1)return kt.ONE;var r=Ho(),n=Ho(),i=e.convert(this),o=_re(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(dlr,"bnpExp");function flr(t,e){var r;return t<256||e.isEven()?r=new bk(e):r=new Ik(e),this.exp(t,r)}s(flr,"bnModPowInt");kt.prototype.copyTo=Mcr;kt.prototype.fromInt=Lcr;kt.prototype.fromString=Fcr;kt.prototype.clamp=Ocr;kt.prototype.dlShiftTo=Wcr;kt.prototype.drShiftTo=jcr;kt.prototype.lShiftTo=Gcr;kt.prototype.rShiftTo=Vcr;kt.prototype.subTo=zcr;kt.prototype.multiplyTo=Kcr;kt.prototype.squareTo=Ycr;kt.prototype.divRemTo=Jcr;kt.prototype.invDigit=ilr;kt.prototype.isEven=ulr;kt.prototype.exp=dlr;kt.prototype.toString=Qcr;kt.prototype.negate=Ucr;kt.prototype.abs=qcr;kt.prototype.compareTo=Hcr;kt.prototype.bitLength=$cr;kt.prototype.mod=Xcr;kt.prototype.modPowInt=flr;kt.ZERO=xw(0);kt.ONE=xw(1);function plr(){var t=Ho();return this.copyTo(t),t}s(plr,"bnClone");function mlr(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(mlr,"bnIntValue");function hlr(){return this.t==0?this.s:this.data[0]<<24>>24}s(hlr,"bnByteValue");function glr(){return this.t==0?this.s:this.data[0]<<16>>16}s(glr,"bnShortValue");function Alr(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(Alr,"bnpChunkSize");function ylr(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(ylr,"bnSigNum");function Clr(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=xw(r),i=Ho(),o=Ho(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(Clr,"bnpToRadix");function vlr(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=Tat(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&kt.ZERO.subTo(this,this)}s(vlr,"bnpFromRadix");function xlr(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(kt.ONE.shiftLeft(t-1),bTe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(kt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(xlr,"bnpFromNumber");function Elr(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(Elr,"bnToByteArray");function blr(t){return this.compareTo(t)==0}s(blr,"bnEquals");function Ilr(t){return this.compareTo(t)<0?this:t}s(Ilr,"bnMin");function Tlr(t){return this.compareTo(t)>0?this:t}s(Tlr,"bnMax");function wlr(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(wlr,"bnpBitwiseTo");function Slr(t,e){return t&e}s(Slr,"op_and");function _lr(t){var e=Ho();return this.bitwiseTo(t,Slr,e),e}s(_lr,"bnAnd");function bTe(t,e){return t|e}s(bTe,"op_or");function Rlr(t){var e=Ho();return this.bitwiseTo(t,bTe,e),e}s(Rlr,"bnOr");function wat(t,e){return t^e}s(wat,"op_xor");function klr(t){var e=Ho();return this.bitwiseTo(t,wat,e),e}s(klr,"bnXor");function Sat(t,e){return t&~e}s(Sat,"op_andnot");function Plr(t){var e=Ho();return this.bitwiseTo(t,Sat,e),e}s(Plr,"bnAndNot");function Dlr(){for(var t=Ho(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(Dlr,"bnNot");function Blr(t){var e=Ho();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(Blr,"bnShiftLeft");function Nlr(t){var e=Ho();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(Nlr,"bnShiftRight");function Mlr(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(Mlr,"lbit");function Llr(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Mlr(this.data[t]);return this.s<0?this.t*this.DB:-1}s(Llr,"bnGetLowestSetBit");function Flr(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(Flr,"cbit");function Olr(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Flr(this.data[r]^e);return t}s(Olr,"bnBitCount");function Qlr(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(Qlr,"bnTestBit");function Ulr(t,e){var r=kt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(Ulr,"bnpChangeBit");function qlr(t){return this.changeBit(t,bTe)}s(qlr,"bnSetBit");function Hlr(t){return this.changeBit(t,Sat)}s(Hlr,"bnClearBit");function $lr(t){return this.changeBit(t,wat)}s($lr,"bnFlipBit");function Wlr(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(Wlr,"bnpAddTo");function jlr(t){var e=Ho();return this.addTo(t,e),e}s(jlr,"bnAdd");function Glr(t){var e=Ho();return this.subTo(t,e),e}s(Glr,"bnSubtract");function Vlr(t){var e=Ho();return this.multiplyTo(t,e),e}s(Vlr,"bnMultiply");function zlr(t){var e=Ho();return this.divRemTo(t,e,null),e}s(zlr,"bnDivide");function Klr(t){var e=Ho();return this.divRemTo(t,null,e),e}s(Klr,"bnRemainder");function Ylr(t){var e=Ho(),r=Ho();return this.divRemTo(t,e,r),new Array(e,r)}s(Ylr,"bnDivideAndRemainder");function Jlr(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(Jlr,"bnpDMultiply");function Xlr(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(Xlr,"bnpDAddOffset");function FQ(){}s(FQ,"NullExp");function _at(t){return t}s(_at,"nNop");function Zlr(t,e,r){t.multiplyTo(e,r)}s(Zlr,"nMulTo");function eur(t,e){t.squareTo(e)}s(eur,"nSqrTo");FQ.prototype.convert=_at;FQ.prototype.revert=_at;FQ.prototype.mulTo=Zlr;FQ.prototype.sqrTo=eur;function tur(t){return this.exp(t,new FQ)}s(tur,"bnPow");function rur(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(rur,"bnpMultiplyLowerTo");function nur(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(nur,"bnpMultiplyUpperTo");function ON(t){this.r2=Ho(),this.q3=Ho(),kt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(ON,"Barrett");function iur(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ho();return t.copyTo(e),this.reduce(e),e}s(iur,"barrettConvert");function our(t){return t}s(our,"barrettRevert");function sur(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(sur,"barrettReduce");function aur(t,e){t.squareTo(e),this.reduce(e)}s(aur,"barrettSqrTo");function cur(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(cur,"barrettMulTo");ON.prototype.convert=iur;ON.prototype.revert=our;ON.prototype.reduce=sur;ON.prototype.mulTo=cur;ON.prototype.sqrTo=aur;function lur(t,e){var r=t.bitLength(),n,i=xw(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new bk(e):e.isEven()?o=new ON(e):o=new Ik(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var f=Ho();for(o.sqrTo(a[1],f);c<=u;)a[c]=Ho(),o.mulTo(f,a[c-2],a[c]),c+=2}var p=t.t-1,m,h=!0,g=Ho(),A;for(r=_re(t.data[p])-1;p>=0;){for(r>=l?m=t.data[p]>>r-l&u:(m=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(m|=t.data[p-1]>>this.DB+r-l)),c=n;(m&1)==0;)m>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(A=i,i=g,g=A),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),A=i,i=g,g=A,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(lur,"bnModPow");function uur(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(uur,"bnGCD");function dur(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(dur,"bnpModInt");function fur(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return kt.ZERO;for(var r=t.clone(),n=this.clone(),i=xw(1),o=xw(0),a=xw(0),c=xw(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(kt.ONE)!=0)return kt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(fur,"bnModInverse");var KA=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],pur=(1<<26)/KA[KA.length-1];function mur(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=KA[KA.length-1]){for(e=0;e<KA.length;++e)if(r.data[0]==KA[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<KA.length;){for(var n=KA[e],i=e+1;i<KA.length&&n<pur;)n*=KA[i++];for(n=r.modInt(n);e<i;)if(n%KA[e++]==0)return!1}return r.millerRabin(t)}s(mur,"bnIsProbablePrime");function hur(t){var e=this.subtract(kt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=gur(),o,a=0;a<t;++a){do o=new kt(this.bitLength(),i);while(o.compareTo(kt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(kt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(kt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(hur,"bnpMillerRabin");function gur(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(gur,"bnGetPrng");kt.prototype.chunkSize=Alr;kt.prototype.toRadix=Clr;kt.prototype.fromRadix=vlr;kt.prototype.fromNumber=xlr;kt.prototype.bitwiseTo=wlr;kt.prototype.changeBit=Ulr;kt.prototype.addTo=Wlr;kt.prototype.dMultiply=Jlr;kt.prototype.dAddOffset=Xlr;kt.prototype.multiplyLowerTo=rur;kt.prototype.multiplyUpperTo=nur;kt.prototype.modInt=dur;kt.prototype.millerRabin=hur;kt.prototype.clone=plr;kt.prototype.intValue=mlr;kt.prototype.byteValue=hlr;kt.prototype.shortValue=glr;kt.prototype.signum=ylr;kt.prototype.toByteArray=Elr;kt.prototype.equals=blr;kt.prototype.min=Ilr;kt.prototype.max=Tlr;kt.prototype.and=_lr;kt.prototype.or=Rlr;kt.prototype.xor=klr;kt.prototype.andNot=Plr;kt.prototype.not=Dlr;kt.prototype.shiftLeft=Blr;kt.prototype.shiftRight=Nlr;kt.prototype.getLowestSetBit=Llr;kt.prototype.bitCount=Olr;kt.prototype.testBit=Qlr;kt.prototype.setBit=qlr;kt.prototype.clearBit=Hlr;kt.prototype.flipBit=$lr;kt.prototype.add=jlr;kt.prototype.subtract=Glr;kt.prototype.multiply=Vlr;kt.prototype.divide=zlr;kt.prototype.remainder=Klr;kt.prototype.divideAndRemainder=Ylr;kt.prototype.modPow=lur;kt.prototype.modInverse=fur;kt.prototype.pow=tur;kt.prototype.gcd=uur;kt.prototype.isProbablePrime=mur});var QN=H((Cgi,Bat)=>{d();var p1=_i();c1();qo();var Pat=Bat.exports=p1.sha1=p1.sha1||{};p1.md.sha1=p1.md.algorithms.sha1=Pat;Pat.create=function(){Dat||Aur();var t=null,e=p1.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=p1.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=p1.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),kat(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=p1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(ITe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};kat(p,r,i);var m=p1.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var ITe=null,Dat=!1;function Aur(){ITe="\x80",ITe+=p1.util.fillString("\0",64),Dat=!0}s(Aur,"_init");function kat(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s(kat,"_update")});var TTe=H((Egi,Mat)=>{d();var m1=_i();qo();Wh();QN();var Nat=Mat.exports=m1.pkcs1=m1.pkcs1||{};Nat.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=m1.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),p="",m=l-e.length,h=0;h<m;h++)p+="\0";var g=f.getBytes()+p+""+e;if(!i)i=m1.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var A=Rre(i,c-o.digestLength-1,a),y=m1.util.xorBytes(g,A,g.length),E=Rre(y,o.digestLength,a),b=m1.util.xorBytes(i,E,i.length);return"\0"+b+y};Nat.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=a,y}if(i===void 0?i=m1.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),p=Rre(f,i.digestLength,o),m=m1.util.xorBytes(u,p,u.length),h=Rre(m,a-i.digestLength-1,o),g=m1.util.xorBytes(f,h,f.length),A=g.substring(0,i.digestLength),y=l!=="\0",E=0;E<i.digestLength;++E)y|=c.charAt(E)!==A.charAt(E);for(var b=1,S=i.digestLength,R=i.digestLength;R<g.length;R++){var B=g.charCodeAt(R),L=B&1^1,O=b?65534:0;y|=B&O,b=b&L,S+=b}if(y||g.charCodeAt(S)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(S+1)};function Rre(t,e,r){r||(r=m1.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(Rre,"rsa_mgf1")});var STe=H((Tgi,wTe)=>{d();var Ew=_i();qo();OQ();Wh();(function(){if(Ew.prime){wTe.exports=Ew.prime;return}var t=wTe.exports=Ew.prime=Ew.prime||{},e=Ew.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var A=m.prng||Ew.random,y={nextBytes:s(function(E){for(var b=A.getBytesSync(E.length),S=0;S<E.length;++S)E[S]=b.charCodeAt(S)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,y,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?l(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var A=u(p,m),y=0,E=f(A.bitLength());"millerRabinTests"in h&&(E=h.millerRabinTests);var b=10;"maxBlockTime"in h&&(b=h.maxBlockTime),c(A,p,m,y,E,b,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,m,h,g,A,y,E){var b=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(A))return E(null,p);p.dAddOffset(r[g++%8],0)}while(y<0||+new Date-b<y);Ew.util.setImmediate(function(){c(p,m,h,g,A,y,E)})}s(c,"_primeinc");function l(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var A=u(p,m),y=h.workers,E=h.workLoad||100,b=E*30/8,S=h.workerScript||"forge/prime.worker.js";if(y===-1)return Ew.util.estimateCores(function(B,L){B&&(L=2),y=L-1,R()});R();function R(){y=Math.max(1,y);for(var B=[],L=0;L<y;++L)B[L]=new Worker(S);for(var O=y,L=0;L<y;++L)B[L].addEventListener("message",V);var Y=!1;function V(z){if(!Y){--O;var Q=z.data;if(Q.found){for(var U=0;U<B.length;++U)B[U].terminate();return Y=!0,g(null,new e(Q.prime,16))}A.bitLength()>p&&(A=u(p,m));var Z=A.toString(16);z.target.postMessage({hex:Z,workLoad:E}),A.dAddOffset(b,0)}}s(V,"workerMessage")}s(R,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function f(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(f,"getMillerRabinTests")})()});var QQ=H((_gi,Hat)=>{d();var An=_i();zA();OQ();vw();TTe();STe();Wh();qo();typeof Do>"u"&&(Do=An.jsbn.BigInteger);var Do,_Te=An.util.isNodejs?require("crypto"):null,ze=An.asn1,Gh=An.util;An.pki=An.pki||{};Hat.exports=An.pki.rsa=An.rsa=An.rsa||{};var gi=An.pki,yur=[6,4,2,4,2,4,6,2],Cur={name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},vur={name:"RSAPrivateKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},xur={name:"RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Eur=An.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},bur={name:"DigestInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ze.Class.UNIVERSAL,type:ze.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Iur=s(function(t){var e;if(t.algorithm in gi.oids)e=gi.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ze.oidToDer(e).getBytes(),i=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]),o=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]);o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,n)),o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,""));var a=ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),ze.toDer(i).getBytes()},"emsaPkcs1v15encode"),Uat=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Do.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Do.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Do(An.util.bytesToHex(An.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Do.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");gi.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=qat(t,e,r)):(i=An.util.createBuffer(),i.putBytes(t));for(var a=new Do(i.toHex(),16),c=Uat(a,e,n),l=c.toString(16),u=An.util.createBuffer(),f=o-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(An.util.hexToBytes(l)),u.getBytes()};gi.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new Do(An.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=Uat(a,e,r),l=c.toString(16),u=An.util.createBuffer(),f=i-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(An.util.hexToBytes(l)),n!==!1?kre(u.getBytes(),e,r):u.getBytes()};gi.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||An.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Do(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};gi.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Do(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new Do(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Do.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(wur(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(yur[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Do.ONE).gcd(t.e).compareTo(Do.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Do.ONE),t.q1=t.q.subtract(Do.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Do.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:gi.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:gi.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};gi.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!An.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Lat("generateKeyPair"))return _Te.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:gi.privateKeyFromPem(u),publicKey:gi.publicKeyFromPem(l)})});if(Fat("generateKey")&&Fat("exportKey"))return Gh.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Qat(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return Gh.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=gi.privateKeyFromAsn1(ze.fromDer(An.util.createBuffer(c)));n(null,{privateKey:l,publicKey:gi.setRsaPublicKey(l.n,l.e)})}});if(Oat("generateKey")&&Oat("exportKey")){var i=Gh.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Qat(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=Gh.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(f){var p=f.target.result,m=gi.privateKeyFromAsn1(ze.fromDer(An.util.createBuffer(p)));n(null,{privateKey:m,publicKey:gi.setRsaPublicKey(m.n,m.e)})},u.onerror=function(f){n(f)}},i.onerror=function(c){n(c)};return}}else if(Lat("generateKeyPairSync")){var o=_Te.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:gi.privateKeyFromPem(o.privateKey),publicKey:gi.publicKeyFromPem(o.publicKey)}}}var a=gi.rsa.createKeyPairGenerationState(t,e,r);if(!n)return gi.rsa.stepKeyPairGenerationState(a,0),a.keys;Tur(a,r,n)};gi.setRsaPublicKey=gi.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return qat(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return An.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return gi.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=kre(u,r,!0);var f=ze.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!ze.validate(f,bur,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=ze.derToOid(p.algorithmIdentifier);if(!(g===An.oids.md2||g===An.oids.md5||g===An.oids.sha1||g===An.oids.sha224||g===An.oids.sha256||g===An.oids.sha384||g===An.oids.sha512||g===An.oids["sha512-224"]||g===An.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===An.oids.md2||g===An.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=kre(u,r,!0),l===u},"verify")});var c=gi.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};gi.setRsaPrivateKey=gi.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,f,p){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var m=gi.rsa.decrypt(u,l,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:kre};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:s(function(h,g){return An.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(m,l,!1)},l.sign=function(u,f){var p=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:Iur},p=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:s(function(){return u},"encode")},p=1);var m=f.encode(u,l.n.bitLength());return gi.rsa.encrypt(m,l,p)},l};gi.wrapRsaPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(gi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,ze.toDer(t).getBytes())])};gi.privateKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,Cur,e,r)&&(t=ze.fromDer(An.util.createBuffer(e.privateKey))),e={},r=[],!ze.validate(t,vur,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,f,p;return i=An.util.createBuffer(e.privateKeyModulus).toHex(),o=An.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=An.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=An.util.createBuffer(e.privateKeyPrime1).toHex(),l=An.util.createBuffer(e.privateKeyPrime2).toHex(),u=An.util.createBuffer(e.privateKeyExponent1).toHex(),f=An.util.createBuffer(e.privateKeyExponent2).toHex(),p=An.util.createBuffer(e.privateKeyCoefficient).toHex(),gi.setRsaPrivateKey(new Do(i,16),new Do(o,16),new Do(a,16),new Do(c,16),new Do(l,16),new Do(u,16),new Do(f,16),new Do(p,16))};gi.privateKeyToAsn1=gi.privateKeyToRSAPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.e)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.d)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.p)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.q)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.dP)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.dQ)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.qInv))])};gi.publicKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,Eur,e,r)){var n=ze.derToOid(e.publicKeyOid);if(n!==gi.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ze.validate(t,xur,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=An.util.createBuffer(e.publicKeyModulus).toHex(),a=An.util.createBuffer(e.publicKeyExponent).toHex();return gi.setRsaPublicKey(new Do(o,16),new Do(a,16))};gi.publicKeyToAsn1=gi.publicKeyToSubjectPublicKeyInfo=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(gi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.BITSTRING,!1,[gi.publicKeyToRSAPublicKey(t)])])};gi.publicKeyToRSAPublicKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,h1(t.e))])};function qat(t,e,r){var n=An.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,f=An.random.getBytes(a),l=0;l<a;++l)c=f.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(qat,"_encodePkcs1_v1_5");function kre(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=An.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var f=o.getByte();if(f!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(kre,"_decodePkcs1_v1_5");function Tur(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){An.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Do.ONE).gcd(t.e).compareTo(Do.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Do.ONE).gcd(t.e).compareTo(Do.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(Do.ONE),t.q1=t.q.subtract(Do.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Do.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:gi.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:gi.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(Tur,"_generateKeyPair");function h1(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=An.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(h1,"_bnToBytes");function wur(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(wur,"_getMillerRabinTests");function Lat(t){return An.util.isNodejs&&typeof _Te[t]=="function"}s(Lat,"_detectNodeCrypto");function Fat(t){return typeof Gh.globalScope<"u"&&typeof Gh.globalScope.crypto=="object"&&typeof Gh.globalScope.crypto.subtle=="object"&&typeof Gh.globalScope.crypto.subtle[t]=="function"}s(Fat,"_detectSubtleCrypto");function Oat(t){return typeof Gh.globalScope<"u"&&typeof Gh.globalScope.msCrypto=="object"&&typeof Gh.globalScope.msCrypto.subtle=="object"&&typeof Gh.globalScope.msCrypto.subtle[t]=="function"}s(Oat,"_detectSubtleMsCrypto");function Qat(t){for(var e=An.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(Qat,"_intToUint8Array")});var RTe=H((Pgi,Vat)=>{d();var br=_i();Cw();zA();LQ();c1();vw();Tre();Ek();Wh();vTe();QQ();qo();typeof $at>"u"&&($at=br.jsbn.BigInteger);var $at,mt=br.asn1,bi=br.pki=br.pki||{};Vat.exports=bi.pbe=br.pbe=br.pbe||{};var Tk=bi.oids,Sur={name:"EncryptedPrivateKeyInfo",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},_ur={name:"PBES2Algorithms",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Rur={name:"pkcs-12PbeParams",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"iterations"}]};bi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=br.random.getBytesSync(r.saltSize),i=r.count,o=mt.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,p;switch(r.algorithm){case"aes128":a=16,u=16,f=Tk["aes128-CBC"],p=br.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,f=Tk["aes192-CBC"],p=br.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,f=Tk["aes256-CBC"],p=br.aes.createEncryptionCipher;break;case"des":a=8,u=8,f=Tk.desCBC,p=br.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=Gat(h),A=br.pkcs5.pbkdf2(e,n,i,a,g),y=br.random.getBytesSync(u),E=p(A);E.start(y),E.update(mt.toDer(t)),E.finish(),l=E.output.getBytes();var b=kur(n,o,a,h);c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(Tk.pkcs5PBES2).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(Tk.pkcs5PBKDF2).getBytes()),b]),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(f).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){a=24;var S=new br.util.ByteBuffer(n),A=bi.pbe.generatePkcs12Key(e,S,1,i,a),y=bi.pbe.generatePkcs12Key(e,S,2,i,a),E=br.des.createEncryptionCipher(A);E.start(y),E.update(mt.toDer(t)),E.finish(),l=E.output.getBytes(),c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(Tk["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,n),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var R=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[c,mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,l)]);return R};bi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!mt.validate(t,Sur,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=mt.derToOid(n.encryptionOid),c=bi.pbe.getCipher(a,n.encryptionParams,e),l=br.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=mt.fromDer(c.output)),r};bi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:mt.toDer(t).getBytes()};return br.pem.encode(r,{maxline:e})};bi.encryptedPrivateKeyFromPem=function(t){var e=br.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return mt.fromDer(e.body)};bi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=bi.wrapRsaPrivateKey(bi.privateKeyToAsn1(t));return n=bi.encryptPrivateKeyInfo(n,e,r),bi.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=br.random.getBytesSync(16),c=br.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=br.random.getBytesSync(16),c=br.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=br.random.getBytesSync(16),c=br.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=br.random.getBytesSync(8),c=br.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=br.random.getBytesSync(8),c=br.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=br.pbe.opensslDeriveBytes(e,o.substr(0,8),a),f=c(u);f.start(o),f.update(mt.toDer(bi.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:br.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return br.pem.encode(p)};bi.decryptRsaPrivateKey=function(t,e){var r=null,n=br.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=br.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=br.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=br.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=br.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=br.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return br.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return br.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return br.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=br.util.hexToBytes(n.dekInfo.parameters),l=br.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(br.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=bi.decryptPrivateKeyInfo(mt.fromDer(r),e):r=mt.fromDer(r),r!==null&&(r=bi.privateKeyFromAsn1(r)),r};bi.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in br.md))throw new Error('"sha1" hash algorithm unavailable.');o=br.md.sha1.create()}var l=o.digestLength,u=o.blockLength,f=new br.util.ByteBuffer,p=new br.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var m=p.length(),h=e.length(),g=new br.util.ByteBuffer;g.fillWithByte(r,u);var A=u*Math.ceil(h/u),y=new br.util.ByteBuffer;for(c=0;c<A;c++)y.putByte(e.at(c%h));var E=u*Math.ceil(m/u),b=new br.util.ByteBuffer;for(c=0;c<E;c++)b.putByte(p.at(c%m));var S=y;S.putBuffer(b);for(var R=Math.ceil(i/l),B=1;B<=R;B++){var L=new br.util.ByteBuffer;L.putBytes(g.bytes()),L.putBytes(S.bytes());for(var O=0;O<n;O++)o.start(),o.update(L.getBytes()),L=o.digest();var Y=new br.util.ByteBuffer;for(c=0;c<u;c++)Y.putByte(L.at(c%l));var V=Math.ceil(h/u)+Math.ceil(m/u),z=new br.util.ByteBuffer;for(a=0;a<V;a++){var Q=new br.util.ByteBuffer(S.getBytes(u)),U=511;for(c=Y.length()-1;c>=0;c--)U=U>>8,U+=Y.at(c)+Q.at(c),Q.setAt(c,U&255);z.putBuffer(Q)}S=z,f.putBuffer(L)}return f.truncate(f.length()-i),f};bi.pbe.getCipher=function(t,e,r){switch(t){case bi.oids.pkcs5PBES2:return bi.pbe.getCipherForPBES2(t,e,r);case bi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case bi.oids["pbewithSHAAnd40BitRC2-CBC"]:return bi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};bi.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!mt.validate(e,_ur,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=mt.derToOid(n.kdfOid),t!==bi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=mt.derToOid(n.encOid),t!==bi.oids["aes128-CBC"]&&t!==bi.oids["aes192-CBC"]&&t!==bi.oids["aes256-CBC"]&&t!==bi.oids["des-EDE3-CBC"]&&t!==bi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=br.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(bi.oids[t]){case"aes128-CBC":l=16,u=br.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=br.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=br.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=br.des.createDecryptionCipher;break;case"desCBC":l=8,u=br.des.createDecryptionCipher;break}var f=jat(n.prfOid),p=br.pkcs5.pbkdf2(r,a,c,l,f),m=n.encIv,h=u(p);return h.start(m),h};bi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!mt.validate(e,Rur,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=br.util.createBuffer(n.salt),c=br.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,f;switch(t){case bi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,f=br.des.startDecrypting;break;case bi.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,f=s(function(A,y){var E=br.rc2.createDecryptionCipher(A,40);return E.start(y,null),E},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=jat(n.prfOid),m=bi.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var h=bi.pbe.generatePkcs12Key(r,a,2,c,u,p);return f(m,h)};bi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in br.md))throw new Error('"md5" hash algorithm unavailable.');n=br.md.md5.create()}e===null&&(e="");for(var i=[Wat(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(Wat(n,i[a-1]+t+e));return i.join("").substr(0,r)};function Wat(t,e){return t.start().update(e).digest().getBytes()}s(Wat,"hash");function jat(t){var e;if(!t)e="hmacWithSHA1";else if(e=bi.oids[mt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Gat(e)}s(jat,"prfOidToMessageDigest");function Gat(t){var e=br.md;switch(t){case"hmacWithSHA224":e=br.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(Gat,"prfAlgorithmToMessageDigest");function kur(t,e,r,n){var i=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,t),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,br.util.hexToBytes(r.toString(16))),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(bi.oids[n]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.NULL,!1,"")])),i}s(kur,"createPbkdf2Params")});var kTe=H((Ngi,Yat)=>{d();var UN=_i();zA();qo();var Ar=UN.asn1,qN=Yat.exports=UN.pkcs7asn1=UN.pkcs7asn1||{};UN.pkcs7=UN.pkcs7||{};UN.pkcs7.asn1=qN;var zat={name:"ContentInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};qN.contentInfoValidator=zat;var Kat={name:"EncryptedContentInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ar.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};qN.envelopedDataValidator={name:"EnvelopedData",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Kat)};qN.encryptedDataValidator={name:"EncryptedData",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"}].concat(Kat)};var Pur={name:"SignerInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};qN.signedDataValidator={name:"SignedData",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},zat,{name:"SignedData.Certificates",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ar.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SET,capture:"signerInfos",optional:!0,value:[Pur]}]};qN.recipientInfoValidator={name:"RecipientInfo",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ar.Class.UNIVERSAL,type:Ar.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var PTe=H((Lgi,Jat)=>{d();var wk=_i();qo();wk.mgf=wk.mgf||{};var Dur=Jat.exports=wk.mgf.mgf1=wk.mgf1=wk.mgf1||{};Dur.create=function(t){var e={generate:s(function(r,n){for(var i=new wk.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new wk.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var Zat=H((Qgi,Xat)=>{d();var Pre=_i();PTe();Xat.exports=Pre.mgf=Pre.mgf||{};Pre.mgf.mgf1=Pre.mgf1});var Dre=H((qgi,ect)=>{d();var Sk=_i();Wh();qo();var Bur=ect.exports=Sk.pss=Sk.pss||{};Bur.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Sk.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||Sk.random,c={};return c.encode=function(l,u){var f,p=u-1,m=Math.ceil(p/8),h=l.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var A=new Sk.util.ByteBuffer;A.fillWithByte(0,8),A.putBytes(h),A.putBytes(g),e.start(),e.update(A.getBytes());var y=e.digest().getBytes(),E=new Sk.util.ByteBuffer;E.fillWithByte(0,m-o-n-2),E.putByte(1),E.putBytes(g);var b=E.getBytes(),S=m-n-1,R=r.generate(y,S),B="";for(f=0;f<S;f++)B+=String.fromCharCode(b.charCodeAt(f)^R.charCodeAt(f));var L=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~L)+B.substr(1),B+y+"\xBC"},c.verify=function(l,u,f){var p,m=f-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,A=u.substr(0,g),y=u.substr(g,n),E=65280>>8*h-m&255;if((A.charCodeAt(0)&E)!==0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(y,g),S="";for(p=0;p<g;p++)S+=String.fromCharCode(A.charCodeAt(p)^b.charCodeAt(p));S=String.fromCharCode(S.charCodeAt(0)&~E)+S.substr(1);var R=h-n-o-2;for(p=0;p<R;p++)if(S.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(S.charCodeAt(R)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=S.substr(-o),L=new Sk.util.ByteBuffer;L.fillWithByte(0,8),L.putBytes(l),L.putBytes(B),e.start(),e.update(L.getBytes());var O=e.digest().getBytes();return y===O},c}});var Mre=H(($gi,oct)=>{d();var yn=_i();Cw();zA();LQ();c1();Zat();vw();Ek();Dre();QQ();qo();var re=yn.asn1,Xt=oct.exports=yn.pki=yn.pki||{},Bo=Xt.oids,pc={};pc.CN=Bo.commonName;pc.commonName="CN";pc.C=Bo.countryName;pc.countryName="C";pc.L=Bo.localityName;pc.localityName="L";pc.ST=Bo.stateOrProvinceName;pc.stateOrProvinceName="ST";pc.O=Bo.organizationName;pc.organizationName="O";pc.OU=Bo.organizationalUnitName;pc.organizationalUnitName="OU";pc.E=Bo.emailAddress;pc.emailAddress="E";var rct=yn.pki.rsa.publicKeyValidator,Nur={name:"Certificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},rct,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Mur={name:"rsapss",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Lur={name:"CertificationRequestInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},rct,{name:"CertificationRequestInfo.attributes",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:re.Class.UNIVERSAL,type:re.Type.SET,constructed:!0}]}]}]},Fur={name:"CertificationRequest",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Lur,{name:"CertificationRequest.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Xt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=re.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in Bo&&(o.name=Bo[o.type],o.name in pc&&(o.shortName=pc[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Xt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=re.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in Bo&&(c.name=Bo[c.type],c.name in pc&&(c.shortName=pc[c.name])),c.type===Bo.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(Xt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function bw(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(bw,"_getAttribute");var Bre=s(function(t,e,r){var n={};if(t!==Bo["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Bo.sha1},mgf:{algorithmOid:Bo.mgf1,hash:{algorithmOid:Bo.sha1}},saltLength:20});var i={},o=[];if(!re.validate(e,Mur,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=re.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=re.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=re.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),Nre=s(function(t){switch(Bo[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return yn.md.sha1.create();case"md5WithRSAEncryption":return yn.md.md5.create();case"sha256WithRSAEncryption":return yn.md.sha256.create();case"sha384WithRSAEncryption":return yn.md.sha384.create();case"sha512WithRSAEncryption":return yn.md.sha512.create();case"RSASSA-PSS":return yn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),nct=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case Bo.sha1WithRSAEncryption:case Bo.sha1WithRSASignature:break;case Bo["RSASSA-PSS"]:var n,i;if(n=Bo[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||yn.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=Bo[e.signatureParameters.mgf.algorithmOid],i===void 0||yn.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=yn.mgf[i].create(yn.md[n].create()),n=Bo[e.signatureParameters.hash.algorithmOid],n===void 0||yn.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=yn.pss.create(yn.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Xt.certificateFromPem=function(t,e,r){var n=yn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Xt.certificateFromAsn1(o,e)};Xt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:re.toDer(Xt.certificateToAsn1(t)).getBytes()};return yn.pem.encode(r,{maxline:e})};Xt.publicKeyFromPem=function(t){var e=yn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=re.fromDer(e.body);return Xt.publicKeyFromAsn1(n)};Xt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:re.toDer(Xt.publicKeyToAsn1(t)).getBytes()};return yn.pem.encode(r,{maxline:e})};Xt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:re.toDer(Xt.publicKeyToRSAPublicKey(t)).getBytes()};return yn.pem.encode(r,{maxline:e})};Xt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||yn.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=re.toDer(Xt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=re.toDer(Xt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Xt.certificationRequestFromPem=function(t,e,r){var n=yn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Xt.certificationRequestFromAsn1(o,e)};Xt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:re.toDer(Xt.certificationRequestToAsn1(t)).getBytes()};return yn.pem.encode(r,{maxline:e})};Xt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return bw(t.issuer,e)},t.issuer.addField=function(e){Vh([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return bw(t.subject,e)},t.subject.addField=function(e){Vh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Vh(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Vh(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)ict(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||yn.md.sha1.create();var n=Bo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Xt.getTBSCertificate(t);var o=re.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=Nre({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||Xt.getTBSCertificate(e),l=re.toDer(c);a.update(l.getBytes())}return a!==null&&(r=nct({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Xt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Bo.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return yn.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Xt.certificateFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Nur,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Xt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Xt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=yn.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=yn.asn1.derToOid(r.certSignatureOid),a.signatureParameters=Bre(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=yn.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=Bre(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=Nre({signatureOid:a.signatureOid,type:"certificate"});var u=re.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var f=yn.md.sha1.create(),p=re.toDer(r.certIssuer);f.update(p.getBytes()),a.issuer.getField=function(g){return bw(a.issuer,g)},a.issuer.addField=function(g){Vh([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Xt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=f.digest().toHex();var m=yn.md.sha1.create(),h=re.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return bw(a.subject,g)},a.subject.addField=function(g){Vh([g]),a.subject.attributes.push(g)},a.subject.attributes=Xt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=Xt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Xt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Xt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Xt.certificateExtensionFromAsn1(n.value[i]));return e};Xt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=re.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===re.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Bo){if(e.name=Bo[e.id],e.name==="keyUsage"){var r=re.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=re.fromDer(e.value);r.value.length>0&&r.value[0].type===re.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===re.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=re.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=re.fromDer(e.value),a=0;a<r.value.length;++a){var c=re.derToOid(r.value[a].value);c in Bo?e[Bo[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=re.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=re.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var f={type:l.type,value:l.value};switch(e.altNames.push(f),l.type){case 1:case 2:case 6:break;case 7:f.ip=yn.util.bytesToIP(l.value);break;case 8:f.oid=re.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=re.fromDer(e.value);e.subjectKeyIdentifier=yn.util.bytesToHex(r.value)}}return e};Xt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Fur,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Xt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Xt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=yn.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=Bre(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=yn.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=Bre(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=Nre({signatureOid:a.signatureOid,type:"certification request"});var c=re.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=yn.md.sha1.create();return a.subject.getField=function(u){return bw(a.subject,u)},a.subject.addField=function(u){Vh([u]),a.subject.attributes.push(u)},a.subject.attributes=Xt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=Xt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return bw(a,u)},a.addAttribute=function(u){Vh([u]),a.attributes.push(u)},a.attributes=Xt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Xt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return bw(t.subject,e)},t.subject.addField=function(e){Vh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return bw(t,e)},t.addAttribute=function(e){Vh([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Vh(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Vh(e),t.attributes=e},t.sign=function(e,r){t.md=r||yn.md.sha1.create();var n=Bo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Xt.getCertificationRequestInfo(t);var o=re.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=Nre({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Xt.getCertificationRequestInfo(t),i=re.toDer(n);r.update(i.getBytes())}return r!==null&&(e=nct({certificate:t,md:r,signature:t.signature})),e},t};function HN(t){for(var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=re.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===re.Type.UTF8&&(a=yn.util.encodeUtf8(a))),n=re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(r.type).getBytes()),re.create(re.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(HN,"_dnToAsn1");function Vh(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Xt.oids?e.name=Xt.oids[e.type]:e.shortName&&e.shortName in pc&&(e.name=Xt.oids[pc[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Xt.oids)e.type=Xt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in pc&&(e.shortName=pc[e.name]),e.type===Bo.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=re.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Xt.certificateExtensionToAsn1(ict(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(Vh,"_fillMissingFields");function ict(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Xt.oids&&(t.name=Xt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Xt.oids)t.id=Xt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in Bo?c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(Bo[l]).getBytes())):l.indexOf(".")!==-1&&c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=yn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));t.value.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=re.create(re.Class.UNIVERSAL,re.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[re.create(re.Class.CONTEXT_SPECIFIC,4,!0,[HN(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=yn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var c=t.value.value,A=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),y=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=yn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));y.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}A.value.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[y])),c.push(A)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(ict,"_fillMissingExtensionFields");function DTe(t,e){switch(t){case Bo["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(e.saltLength).getBytes())])),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,r);default:return re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")}}s(DTe,"_signatureParametersToAsn1");function Our(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=re.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===re.Type.UTF8&&(o=yn.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(i.type).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(Our,"_CRIAttributesToAsn1");var Qur=new Date("1950-01-01T00:00:00Z"),Uur=new Date("2050-01-01T00:00:00Z");function tct(t){return t>=Qur&&t<Uur?re.create(re.Class.UNIVERSAL,re.Type.UTCTIME,!1,re.dateToUtcTime(t)):re.create(re.Class.UNIVERSAL,re.Type.GENERALIZEDTIME,!1,re.dateToGeneralizedTime(t))}s(tct,"_dateToAsn1");Xt.getTBSCertificate=function(t){var e=tct(t.validity.notBefore),r=tct(t.validity.notAfter),n=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes())]),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,yn.util.hexToBytes(t.serialNumber)),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.siginfo.algorithmOid).getBytes()),DTe(t.siginfo.algorithmOid,t.siginfo.parameters)]),HN(t.issuer),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,r]),HN(t.subject),Xt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Xt.certificateExtensionsToAsn1(t.extensions)),n};Xt.getCertificationRequestInfo=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes()),HN(t.subject),Xt.publicKeyToAsn1(t.publicKey),Our(t)]);return e};Xt.distinguishedNameToAsn1=function(t){return HN(t)};Xt.certificateToAsn1=function(t){var e=t.tbsCertificate||Xt.getTBSCertificate(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),DTe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Xt.certificateExtensionsToAsn1=function(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,3,!0,[]),r=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Xt.certificateExtensionToAsn1(t[n]));return e};Xt.certificateExtensionToAsn1=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.id).getBytes())),t.critical&&e.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=re.toDer(r).getBytes()),e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,r)),e};Xt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Xt.getCertificationRequestInfo(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),DTe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Xt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=yn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];yn.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=yn.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;yn.util.isArray(c)||(c=[c]);for(var l=re.toDer(Xt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=re.toDer(Xt.certificateToAsn1(c[u])).getBytes();if(l===f)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!yn.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=yn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!yn.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=re.toDer(Xt.certificateToAsn1(a)).getBytes(),f=0;f<l.length;++f){var p=re.toDer(Xt.certificateToAsn1(l[f])).getBytes();u===p&&(c=l[f],l.splice(f,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=yn.md.sha1.create();a.attributes=Xt.RDNAttributesAsArray(HN(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Xt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Xt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,f=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Xt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(f=!0,u=l),u){var p=u;yn.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(l)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Xt.certificateError.bad_certificate})}a===null&&(!u||f)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:Xt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Xt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var A=l.extensions[g];A.critical&&!(A.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Xt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||f))){var y=l.getExtension("basicConstraints"),E=l.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||y===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Xt.certificateError.bad_certificate}),a===null&&y!==null&&!y.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Xt.certificateError.bad_certificate}),a===null&&E!==null&&"pathLenConstraint"in y){var b=c-1;b>y.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Xt.certificateError.bad_certificate})}}var S=a===null?!0:a.error,R=r.verify?r.verify(S,c,n):S;if(R===!0)a=null;else throw S===!0&&(a={message:"The application rejected the certificate.",error:Xt.certificateError.bad_certificate}),(R||R===0)&&(typeof R=="object"&&!yn.util.isArray(R)?(R.message&&(a.message=R.message),R.error&&(a.error=R.error)):typeof R=="string"&&(a.error=R)),a;o=!1,++c}while(e.length>0);return!0}});var NTe=H((Ggi,act)=>{d();var Hs=_i();zA();MN();vw();kTe();RTe();Wh();QQ();QN();qo();Mre();var Se=Hs.asn1,Ji=Hs.pki,qQ=act.exports=Hs.pkcs12=Hs.pkcs12||{},sct={name:"ContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},qur={name:"PFX",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},sct,{name:"PFX.macData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Se.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Hur={name:"SafeBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},$ur={name:"Attribute",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,capture:"values"}]},Wur={name:"CertBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Se.Class.UNIVERSAL,type:Se.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function UQ(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(UQ,"_getBagsByAttribute");qQ.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Se.validate(t,qur,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(y){var E={},b;return"localKeyId"in y?b=y.localKeyId:"localKeyIdHex"in y&&(b=Hs.util.hexToBytes(y.localKeyIdHex)),b===void 0&&!("friendlyName"in y)&&"bagType"in y&&(E[y.bagType]=UQ(a.safeContents,null,null,y.bagType)),b!==void 0&&(E.localKeyId=UQ(a.safeContents,"localKeyId",b,y.bagType)),"friendlyName"in y&&(E.friendlyName=UQ(a.safeContents,"friendlyName",y.friendlyName,y.bagType)),E},"getBags"),getBagsByFriendlyName:s(function(y,E){return UQ(a.safeContents,"friendlyName",y,E)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(y,E){return UQ(a.safeContents,"localKeyId",y,E)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Se.derToOid(n.contentType)!==Ji.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Se.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==Se.Class.UNIVERSAL||c.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=BTe(c),n.mac){var l=null,u=0,f=Se.derToOid(n.macAlgorithm);switch(f){case Ji.oids.sha1:l=Hs.md.sha1.create(),u=20;break;case Ji.oids.sha256:l=Hs.md.sha256.create(),u=32;break;case Ji.oids.sha384:l=Hs.md.sha384.create(),u=48;break;case Ji.oids.sha512:l=Hs.md.sha512.create(),u=64;break;case Ji.oids.md5:l=Hs.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+f);var p=new Hs.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(Hs.util.bytesToHex(n.macIterations),16):1,h=qQ.generateKey(r,p,3,m,u,l),g=Hs.hmac.create();g.start(l,h),g.update(c.value);var A=g.getMac();if(A.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return jur(a,c.value,e,r),a};function BTe(t){if(t.composed||t.constructed){for(var e=Hs.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(BTe,"_decodePkcs7Data");function jur(t,e,r,n){if(e=Se.fromDer(e,r),e.tagClass!==Se.Class.UNIVERSAL||e.type!==Se.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!Se.validate(o,sct,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},f=null,p=a.content.value[0];switch(Se.derToOid(a.contentType)){case Ji.oids.data:if(p.tagClass!==Se.Class.UNIVERSAL||p.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=BTe(p).value;break;case Ji.oids.encryptedData:f=Gur(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=Se.derToOid(a.contentType),l}u.safeBags=Vur(f,r,n),t.safeContents.push(u)}}s(jur,"_decodeAuthenticatedSafe");function Gur(t,e){var r={},n=[];if(!Se.validate(t,Hs.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Se.derToOid(r.contentType);if(o!==Ji.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Se.derToOid(r.encAlgorithm);var a=Ji.pbe.getCipher(o,r.encParameter,e),c=BTe(r.encryptedContentAsn1),l=Hs.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(Gur,"_decryptSafeContents");function Vur(t,e,r){if(!e&&t.length===0)return[];if(t=Se.fromDer(t,e),t.tagClass!==Se.Class.UNIVERSAL||t.type!==Se.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!Se.validate(o,Hur,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:Se.derToOid(a.bagId),attributes:zur(a.bagAttributes)};n.push(u);var f,p,m=a.bagValue.value[0];switch(u.type){case Ji.oids.pkcs8ShroudedKeyBag:if(m=Ji.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ji.oids.keyBag:try{u.key=Ji.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case Ji.oids.certBag:f=Wur,p=s(function(){if(Se.derToOid(a.certId)!==Ji.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Se.derToOid(a.certId),g}var A=Se.fromDer(a.cert,e);try{u.cert=Ji.certificateFromAsn1(A,!0)}catch{u.cert=null,u.asn1=A}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(f!==void 0&&!Se.validate(m,f,a,c)){var l=new Error("Cannot read PKCS#12 "+f.name);throw l.errors=c,l}p()}return n}s(Vur,"_decodeSafeContents");function zur(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Se.validate(t[r],$ur,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Se.derToOid(n.oid);if(Ji.oids[a]!==void 0){e[Ji.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Ji.oids[a]].push(n.values[c].value)}}return e}s(zur,"_decodeBagAttributes");qQ.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=Hs.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=Hs.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Ji.certificateFromPem(a));var c=Hs.md.sha1.create();c.update(Se.toDer(Ji.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=Hs.random.getBytes(20);var l=[];i!==null&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.localKeyId).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.friendlyName).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,l));var u=[],f=[];e!==null&&(Hs.util.isArray(e)?f=e:f=[e]);for(var p=[],m=0;m<f.length;++m){e=f[m],typeof e=="string"&&(e=Ji.certificateFromPem(e));var h=m===0?o:void 0,g=Ji.certificateToAsn1(e),A=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.certBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.x509Certificate).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(g).getBytes())])])]),h]);p.push(A)}if(p.length>0){var y=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,p),E=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(y).getBytes())])]);u.push(E)}var b=null;if(t!==null){var S=Ji.wrapRsaPrivateKey(Ji.privateKeyToAsn1(t));r===null?b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.keyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[S]),o]):b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.pkcs8ShroudedKeyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Ji.encryptPrivateKeyInfo(S,r,n)]),o]);var R=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[b]),B=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(R).getBytes())])]);u.push(B)}var L=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,u),O;if(n.useMac){var c=Hs.md.sha1.create(),Y=new Hs.util.ByteBuffer(Hs.random.getBytes(n.saltSize)),V=n.count,t=qQ.generateKey(r,Y,3,V,20),z=Hs.hmac.create();z.start(c,t),z.update(Se.toDer(L).getBytes());var Q=z.getMac();O=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.sha1).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Q.getBytes())]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Y.getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(V).getBytes())])}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(3).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Ji.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(L).getBytes())])]),O])};qQ.generateKey=Hs.pbe.generatePkcs12Key});var LTe=H((Kgi,cct)=>{d();var Iw=_i();zA();vw();RTe();Ek();Tre();NTe();Dre();QQ();qo();Mre();var MTe=Iw.asn1,$N=cct.exports=Iw.pki=Iw.pki||{};$N.pemToDer=function(t){var e=Iw.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Iw.util.createBuffer(e.body)};$N.privateKeyFromPem=function(t){var e=Iw.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=MTe.fromDer(e.body);return $N.privateKeyFromAsn1(n)};$N.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:MTe.toDer($N.privateKeyToAsn1(t)).getBytes()};return Iw.pem.encode(r,{maxline:e})};$N.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:MTe.toDer(t).getBytes()};return Iw.pem.encode(r,{maxline:e})}});var HTe=H((Jgi,gct)=>{d();var Pt=_i();zA();MN();xre();Ek();LTe();Wh();QN();qo();var Qre=s(function(t,e,r,n){var i=Pt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=Pt.util.createBuffer(),f=Pt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);f.start("MD5",c);var h=Pt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),h.putBuffer(f.digest());f.start("SHA1",l);var A=Pt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),A.putBuffer(f.digest());return i.putBytes(Pt.util.xorBytes(h.getBytes(),A.getBytes(),n)),i},"prf_TLS1"),Kur=s(function(t,e,r){var n=Pt.hmac.create();n.start("SHA1",t);var i=Pt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),Yur=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=Pt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),Jur=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=Pt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),tm=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return Pt.util.createBuffer(t.getBytes(r))},"readVector"),zh=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),oe={};oe.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};oe.SupportedVersions=[oe.Versions.TLS_1_1,oe.Versions.TLS_1_0];oe.Version=oe.SupportedVersions[0];oe.MaxFragment=15360;oe.ConnectionEnd={server:0,client:1};oe.PRFAlgorithm={tls_prf_sha256:0};oe.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};oe.CipherType={stream:0,block:1,aead:2};oe.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};oe.CompressionMethod={none:0,deflate:1};oe.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};oe.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};oe.Alert={};oe.Alert.Level={warning:1,fatal:2};oe.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};oe.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};oe.CipherSuites={};oe.getCipherSuite=function(t){var e=null;for(var r in oe.CipherSuites){var n=oe.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};oe.handleUnexpected=function(t,e){var r=!t.open&&t.entity===oe.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})};oe.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(oe.queue(t,oe.createAlert(t,{level:oe.Alert.Level.warning,description:oe.Alert.Description.no_renegotiation})),oe.flush(t)),t.process()};oe.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===oe.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:Pt.util.createBuffer(o.getBytes(32)),session_id:tm(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=tm(o,2),n.compression_methods=tm(o,1)),a=r-(a-o.length()),a>0){for(var c=tm(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:tm(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var f=tm(u.data,2);f.length()>0;){var p=f.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(tm(f,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=oe.getCipherSuite(n.cipher_suite);else for(var m=Pt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=oe.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure},cipherSuite:Pt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=oe.CompressionMethod.none}return n};oe.createSecurityParameters=function(t,e){var r=t.entity===oe.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:oe.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:oe.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};oe.handleServerHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=dct,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Zur,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.session.id=i,t.process()}};oe.handleClientHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=Pt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<oe.SupportedVersions.length&&(a=oe.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=UTe,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?sdr:QTe,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.open=!0,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHello(t)})),t.session.resuming?(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.pending=oe.createConnectionState(t),t.state.current.write=t.state.pending.write,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))):(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)})),t.fail||(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerKeyExchange(t)})),t.verifyClient!==!1&&oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificateRequest(t)})),oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHelloDone(t)})))),oe.flush(t),t.process()}};oe.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:tm(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=tm(i.certificate_list,3),a=Pt.asn1.fromDer(o),o=Pt.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var l=t.entity===oe.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?lct:QTe:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],oe.verifyCertificateChain(t,c)&&(t.expect=l?lct:QTe)),t.process()};oe.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});t.expect=edr,t.process()};oe.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:tm(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=Pt.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=Pt.random.getBytes(48)}t.expect=UTe,t.session.clientCertificate!==null&&(t.expect=adr),t.process()};oe.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:tm(n,1),certificate_authorities:tm(n,2)};t.session.certificateRequest=i,t.expect=tdr,t.process()};oe.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:tm(n,2).getBytes()},a=Pt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure}})}t.expect=UTe,t.process()};oe.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!Pt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)}),oe.queue(t,e)),e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createClientKeyExchange(t)}),oe.queue(t,e),t.expect=idr;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createCertificateVerify(c,l)})),oe.queue(c,oe.createRecord(c,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),c.state.pending=oe.createConnectionState(c),c.state.current.write=c.state.pending.write,oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createFinished(c)})),c.expect=dct,oe.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);oe.getClientSignature(t,a)};oe.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var r=t.entity===oe.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=oe.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?rdr:cdr,t.process()};oe.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=Pt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===oe.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,f=Qre;if(n=f(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))),t.expect=a?ndr:ldr,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,oe.flush(t),t.isConnected=!0,t.connected(t),t.process()};oe.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case oe.Alert.Description.close_notify:i="Connection closed.";break;case oe.Alert.Description.unexpected_message:i="Unexpected message.";break;case oe.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case oe.Alert.Description.decryption_failed:i="Decryption failed.";break;case oe.Alert.Description.record_overflow:i="Record overflow.";break;case oe.Alert.Description.decompression_failure:i="Decompression failed.";break;case oe.Alert.Description.handshake_failure:i="Handshake failure.";break;case oe.Alert.Description.bad_certificate:i="Bad certificate.";break;case oe.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case oe.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case oe.Alert.Description.certificate_expired:i="Certificate expired.";break;case oe.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case oe.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case oe.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case oe.Alert.Description.access_denied:i="Access denied.";break;case oe.Alert.Description.decode_error:i="Decode error.";break;case oe.Alert.Description.decrypt_error:i="Decrypt error.";break;case oe.Alert.Description.export_restriction:i="Export restriction.";break;case oe.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case oe.Alert.Description.insufficient_security:i="Insufficient security.";break;case oe.Alert.Description.internal_error:i="Internal error.";break;case oe.Alert.Description.user_canceled:i="User canceled.";break;case oe.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===oe.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===oe.ConnectionEnd.client?"server":"client",alert:n}),t.process()};oe.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=Pt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in Ore[t.entity][t.expect]?(t.entity===oe.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:Pt.md.md5.create(),sha1:Pt.md.sha1.create()}),n!==oe.HandshakeType.hello_request&&n!==oe.HandshakeType.certificate_verify&&n!==oe.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),Ore[t.entity][t.expect][n](t,e,i)):oe.handleUnexpected(t,e)};oe.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};oe.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===oe.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();oe.queue(t,oe.createRecord(t,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_response,o)})),oe.flush(t)}else if(n===oe.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,Pt.util.createBuffer(o))}t.process()};var Xur=0,Zur=1,lct=2,edr=3,tdr=4,dct=5,rdr=6,ndr=7,idr=8,odr=0,sdr=1,QTe=2,adr=3,UTe=4,cdr=5,ldr=6,ne=oe.handleUnexpected,fct=oe.handleChangeCipherSpec,rd=oe.handleAlert,Mf=oe.handleHandshake,pct=oe.handleApplicationData,nd=oe.handleHeartbeat,qTe=[];qTe[oe.ConnectionEnd.client]=[[ne,rd,Mf,ne,nd],[ne,rd,Mf,ne,nd],[ne,rd,Mf,ne,nd],[ne,rd,Mf,ne,nd],[ne,rd,Mf,ne,nd],[fct,rd,ne,ne,nd],[ne,rd,Mf,ne,nd],[ne,rd,Mf,pct,nd],[ne,rd,Mf,ne,nd]];qTe[oe.ConnectionEnd.server]=[[ne,rd,Mf,ne,nd],[ne,rd,Mf,ne,nd],[ne,rd,Mf,ne,nd],[ne,rd,Mf,ne,nd],[fct,rd,ne,ne,nd],[ne,rd,Mf,ne,nd],[ne,rd,Mf,pct,nd],[ne,rd,Mf,ne,nd]];var Tw=oe.handleHelloRequest,udr=oe.handleServerHello,mct=oe.handleCertificate,uct=oe.handleServerKeyExchange,FTe=oe.handleCertificateRequest,Lre=oe.handleServerHelloDone,hct=oe.handleFinished,Ore=[];Ore[oe.ConnectionEnd.client]=[[ne,ne,udr,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,mct,uct,FTe,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,uct,FTe,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,FTe,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Lre,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,hct],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[Tw,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];var ddr=oe.handleClientHello,fdr=oe.handleClientKeyExchange,pdr=oe.handleCertificateVerify;Ore[oe.ConnectionEnd.server]=[[ne,ddr,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,mct,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,fdr,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,pdr,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,hct],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];oe.generateKeys=function(t,e){var r=Qre,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===oe.Versions.TLS_1_0.major&&t.version.minor===oe.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};oe.createConnectionState=function(t){var e=t.entity===oe.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=oe.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case oe.CompressionMethod.none:break;case oe.CompressionMethod.deflate:n.read.compressFunction=Jur,n.write.compressFunction=Yur;break;default:throw new Error("Unsupported compression algorithm.")}}return n};oe.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=Pt.util.createBuffer();return r.putInt32(e),r.putBytes(Pt.random.getBytes(28)),r};oe.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};oe.createAlert=function(t,e){var r=Pt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),oe.createRecord(t,{type:oe.ContentType.alert,data:r})};oe.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=Pt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=Pt.util.createBuffer();o.putByte(oe.CompressionMethod.none);var a=o.length(),c=Pt.util.createBuffer();if(t.virtualHost){var l=Pt.util.createBuffer();l.putByte(0),l.putByte(0);var u=Pt.util.createBuffer();u.putByte(0),zh(u,2,Pt.util.createBuffer(t.virtualHost));var f=Pt.util.createBuffer();zh(f,2,u),zh(l,2,f),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=Pt.util.createBuffer();return g.putByte(oe.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),zh(g,1,Pt.util.createBuffer(m)),zh(g,2,e),zh(g,1,o),p>0&&zh(g,2,c),g};oe.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=Pt.util.createBuffer();return n.putByte(oe.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),zh(n,1,Pt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};oe.createCertificate=function(t){var e=t.entity===oe.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=Pt.util.createBuffer();if(r!==null)try{Pt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=Pt.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=Pt.util.createBuffer(c.body);o===null&&(o=Pt.asn1.fromDer(u.bytes(),!1));var f=Pt.util.createBuffer();zh(f,3,u),i.putBuffer(f)}r=Pt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var p=3+i.length(),m=Pt.util.createBuffer();return m.putByte(oe.HandshakeType.certificate),m.putInt24(p),zh(m,3,i),m};oe.createClientKeyExchange=function(t){var e=Pt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(Pt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=Pt.util.createBuffer();return o.putByte(oe.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};oe.createServerKeyExchange=function(t){var e=0,r=Pt.util.createBuffer();return e>0&&(r.putByte(oe.HandshakeType.server_key_exchange),r.putInt24(e)),r};oe.getClientSignature=function(t,e){var r=Pt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=Pt.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};oe.createCertificateVerify=function(t,e){var r=e.length+2,n=Pt.util.createBuffer();return n.putByte(oe.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};oe.createCertificateRequest=function(t){var e=Pt.util.createBuffer();e.putByte(1);var r=Pt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=Pt.pki.distinguishedNameToAsn1(i.subject),a=Pt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=Pt.util.createBuffer();return l.putByte(oe.HandshakeType.certificate_request),l.putInt24(c),zh(l,1,e),zh(l,2,r),l};oe.createServerHelloDone=function(t){var e=Pt.util.createBuffer();return e.putByte(oe.HandshakeType.server_hello_done),e.putInt24(0),e};oe.createChangeCipherSpec=function(){var t=Pt.util.createBuffer();return t.putByte(1),t};oe.createFinished=function(t){var e=Pt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===oe.ConnectionEnd.client,n=t.session.sp,i=12,o=Qre,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=Pt.util.createBuffer();return c.putByte(oe.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};oe.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=Pt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(Pt.random.getBytes(o)),n};oe.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===oe.ContentType.handshake||e.type===oe.ContentType.alert||e.type===oe.ContentType.change_cipher_spec))){if(e.type===oe.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=oe.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>oe.MaxFragment;)n.push(oe.createRecord(t,{type:e.type,data:Pt.util.createBuffer(i.slice(0,oe.MaxFragment))})),i=i.slice(oe.MaxFragment);i.length>0&&n.push(oe.createRecord(t,{type:e.type,data:Pt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};oe.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var OTe=s(function(t){switch(t){case!0:return!0;case Pt.pki.certificateError.bad_certificate:return oe.Alert.Description.bad_certificate;case Pt.pki.certificateError.unsupported_certificate:return oe.Alert.Description.unsupported_certificate;case Pt.pki.certificateError.certificate_revoked:return oe.Alert.Description.certificate_revoked;case Pt.pki.certificateError.certificate_expired:return oe.Alert.Description.certificate_expired;case Pt.pki.certificateError.certificate_unknown:return oe.Alert.Description.certificate_unknown;case Pt.pki.certificateError.unknown_ca:return oe.Alert.Description.unknown_ca;default:return oe.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),mdr=s(function(t){switch(t){case!0:return!0;case oe.Alert.Description.bad_certificate:return Pt.pki.certificateError.bad_certificate;case oe.Alert.Description.unsupported_certificate:return Pt.pki.certificateError.unsupported_certificate;case oe.Alert.Description.certificate_revoked:return Pt.pki.certificateError.certificate_revoked;case oe.Alert.Description.certificate_expired:return Pt.pki.certificateError.certificate_expired;case oe.Alert.Description.certificate_unknown:return Pt.pki.certificateError.certificate_unknown;case oe.Alert.Description.unknown_ca:return Pt.pki.certificateError.unknown_ca;default:return Pt.pki.certificateError.bad_certificate}},"_alertDescToCertError");oe.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=OTe(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!Pt.util.isArray(u)){var f=new Error("The application rejected the certificate.");throw f.send=!0,f.alert={level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate},u.message&&(f.message=u.message),u.alert&&(f.alert.description=u.alert),f}u!==o&&(u=mdr(u))}return u},Pt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||Pt.util.isArray(i))&&(i={send:!0,alert:{level:oe.Alert.Level.fatal,description:OTe(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:oe.Alert.Level.fatal,description:OTe(i.error)}),t.error(t,i)}return!t.fail};oe.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=Pt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=Pt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};oe.createConnection=function(t){var e=null;t.caStore?Pt.util.isArray(t.caStore)?e=Pt.pki.createCaStore(t.caStore):e=t.caStore:e=Pt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in oe.CipherSuites)r.push(oe.CipherSuites[n])}var i=t.server?oe.ConnectionEnd.server:oe.ConnectionEnd.client,o=t.sessionCache?oe.createSessionCache(t.sessionCache):null,a={version:{major:oe.Version.major,minor:oe.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(f,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:Pt.util.createBuffer(),tlsData:Pt.util.createBuffer(),data:Pt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(f,p){p.origin=p.origin||(f.entity===oe.ConnectionEnd.client?"client":"server"),p.send&&(oe.queue(f,oe.createAlert(f,p.alert)),oe.flush(f));var m=p.fatal!==!1;m&&(f.fail=!0),t.error(f,p),m&&f.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(f){a.version={major:oe.Version.major,minor:oe.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===oe.ConnectionEnd.client?Xur:odr,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(f||typeof f>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=oe.createConnectionState(a)},a.reset();var c=s(function(f,p){var m=p.type-oe.ContentType.change_cipher_spec,h=qTe[f.entity][f.expect];m in h?h[m](f,p):oe.handleUnexpected(f,p)},"_update"),l=s(function(f){var p=0,m=f.input,h=m.length();if(h<5)p=5-h;else{f.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:Pt.util.createBuffer(),ready:!1};var g=f.record.version.major===f.version.major;g&&f.session&&f.session.version&&(g=f.record.version.minor===f.version.minor),g||f.error(f,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(f){var p=0,m=f.input,h=m.length();if(h<f.record.length)p=f.record.length-h;else{f.record.fragment.putBytes(m.getBytes(f.record.length)),m.compact();var g=f.state.current.read;g.update(f,f.record)&&(f.fragmented!==null&&(f.fragmented.type===f.record.type?(f.fragmented.fragment.putBuffer(f.record.fragment),f.record=f.fragmented):f.error(f,{message:"Invalid fragmented record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})),f.record.ready=!0)}return p},"_readRecord");return a.handshake=function(f){if(a.entity!==oe.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,f=f||"";var p=null;f.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(f)),p===null&&(f="")),f.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(f=p.id)),a.session={id:f,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:Pt.md.md5.create(),sha1:Pt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=oe.createRandom().getBytes(),a.open=!0,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.handshake,data:oe.createClientHello(a)})),oe.flush(a)}},a.process=function(f){var p=0;return f&&a.input.putBytes(f),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(f){return oe.queue(a,oe.createRecord(a,{type:oe.ContentType.application_data,data:Pt.util.createBuffer(f)})),oe.flush(a)},a.prepareHeartbeatRequest=function(f,p){return f instanceof Pt.util.ByteBuffer&&(f=f.bytes()),typeof p>"u"&&(p=f.length),a.expectedHeartbeatPayload=f,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_request,f,p)})),oe.flush(a)},a.close=function(f){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,oe.queue(a,oe.createAlert(a,{level:oe.Alert.Level.warning,description:oe.Alert.Description.close_notify})),oe.flush(a)),a.closed(a)),a.reset(f)},a};gct.exports=Pt.tls=Pt.tls||{};for(Fre in oe)typeof oe[Fre]!="function"&&(Pt.tls[Fre]=oe[Fre]);var Fre;Pt.tls.prf_tls1=Qre;Pt.tls.hmac_sha1=Kur;Pt.tls.createSessionCache=oe.createSessionCache;Pt.tls.createConnection=oe.createConnection});var Cct=H((eAi,yct)=>{d();var ww=_i();Cw();HTe();var Kh=yct.exports=ww.tls;Kh.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Kh.BulkCipherAlgorithm.aes,t.cipher_type=Kh.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Kh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Act};Kh.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Kh.BulkCipherAlgorithm.aes,t.cipher_type=Kh.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Kh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Act};function Act(t,e,r){var n=e.entity===ww.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:ww.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:ww.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=ydr,t.write.cipherFunction=hdr,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Kh.hmac_sha1}s(Act,"initConnectionState");function hdr(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Kh.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=ww.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Kh.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(gdr)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(hdr,"encrypt_aes_cbc_sha1");function gdr(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(gdr,"encrypt_aes_cbc_sha1_padding");function Adr(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(Adr,"decrypt_aes_cbc_sha1_padding");function ydr(t,e){var r=!1,n;t.version.minor===Kh.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Adr);var o=e.macLength,a=ww.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=ww.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Cdr(e.macKey,a,l)&&r,r}s(ydr,"decrypt_aes_cbc_sha1");function Cdr(t,e,r){var n=ww.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(Cdr,"compareMacs")});var jTe=H((nAi,bct)=>{d();var la=_i();c1();qo();var HQ=bct.exports=la.sha512=la.sha512||{};la.md.sha512=la.md.algorithms.sha512=HQ;var xct=la.sha384=la.sha512.sha384=la.sha512.sha384||{};xct.create=function(){return HQ.create("SHA-384")};la.md.sha384=la.md.algorithms.sha384=xct;la.sha512.sha256=la.sha512.sha256||{create:s(function(){return HQ.create("SHA-512/256")},"create")};la.md["sha512/256"]=la.md.algorithms["sha512/256"]=la.sha512.sha256;la.sha512.sha224=la.sha512.sha224||{create:s(function(){return HQ.create("SHA-512/224")},"create")};la.md["sha512/224"]=la.md.algorithms["sha512/224"]=la.sha512.sha224;HQ.create=function(t){if(Ect||vdr(),typeof t>"u"&&(t="SHA-512"),!(t in _k))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=_k[t],r=null,n=la.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=la.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=la.util.encodeUtf8(l));var f=l.length;c.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=f[1],f[1]=f[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(l),vct(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=la.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,f=u&c.blockLength-1;l.putBytes($Te.substr(0,c.blockLength-f));for(var p,m,h=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,l.putInt32(h>>>0),h=p>>>0;l.putInt32(h);for(var A=new Array(r.length),g=0;g<r.length;++g)A[g]=r[g].slice(0);vct(A,i,l);var y=la.util.createBuffer(),E;t==="SHA-512"?E=A.length:t==="SHA-384"?E=A.length-2:E=A.length-4;for(var g=0;g<E;++g)y.putInt32(A[g][0]),(g!==E-1||t!=="SHA-512/224")&&y.putInt32(A[g][1]);return y},c};var $Te=null,Ect=!1,WTe=null,_k=null;function vdr(){$Te="\x80",$Te+=la.util.fillString("\0",128),WTe=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_k={},_k["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_k["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_k["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_k["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Ect=!0}s(vdr,"_init");function vct(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,A,y,E,b,S,R,B,L,O,Y,V,z,Q,U,Z,J,j,$,X,ie,ae,te,pe,Ae=r.length();Ae>=128;){for(j=0;j<16;++j)e[j][0]=r.getInt32()>>>0,e[j][1]=r.getInt32()>>>0;for(;j<80;++j)ie=e[j-2],$=ie[0],X=ie[1],n=(($>>>19|X<<13)^(X>>>29|$<<3)^$>>>6)>>>0,i=(($<<13|X>>>19)^(X<<3|$>>>29)^($<<26|X>>>6))>>>0,te=e[j-15],$=te[0],X=te[1],o=(($>>>1|X<<31)^($>>>8|X<<24)^$>>>7)>>>0,a=(($<<31|X>>>1)^($<<24|X>>>8)^($<<25|X>>>7))>>>0,ae=e[j-7],pe=e[j-16],X=i+ae[1]+a+pe[1],e[j][0]=n+ae[0]+o+pe[0]+(X/4294967296>>>0)>>>0,e[j][1]=X>>>0;for(A=t[0][0],y=t[0][1],E=t[1][0],b=t[1][1],S=t[2][0],R=t[2][1],B=t[3][0],L=t[3][1],O=t[4][0],Y=t[4][1],V=t[5][0],z=t[5][1],Q=t[6][0],U=t[6][1],Z=t[7][0],J=t[7][1],j=0;j<80;++j)u=((O>>>14|Y<<18)^(O>>>18|Y<<14)^(Y>>>9|O<<23))>>>0,f=((O<<18|Y>>>14)^(O<<14|Y>>>18)^(Y<<23|O>>>9))>>>0,p=(Q^O&(V^Q))>>>0,m=(U^Y&(z^U))>>>0,c=((A>>>28|y<<4)^(y>>>2|A<<30)^(y>>>7|A<<25))>>>0,l=((A<<4|y>>>28)^(y<<30|A>>>2)^(y<<25|A>>>7))>>>0,h=(A&E|S&(A^E))>>>0,g=(y&b|R&(y^b))>>>0,X=J+f+m+WTe[j][1]+e[j][1],n=Z+u+p+WTe[j][0]+e[j][0]+(X/4294967296>>>0)>>>0,i=X>>>0,X=l+g,o=c+h+(X/4294967296>>>0)>>>0,a=X>>>0,Z=Q,J=U,Q=V,U=z,V=O,z=Y,X=L+i,O=B+n+(X/4294967296>>>0)>>>0,Y=X>>>0,B=S,L=R,S=E,R=b,E=A,b=y,X=i+a,A=n+o+(X/4294967296>>>0)>>>0,y=X>>>0;X=t[0][1]+y,t[0][0]=t[0][0]+A+(X/4294967296>>>0)>>>0,t[0][1]=X>>>0,X=t[1][1]+b,t[1][0]=t[1][0]+E+(X/4294967296>>>0)>>>0,t[1][1]=X>>>0,X=t[2][1]+R,t[2][0]=t[2][0]+S+(X/4294967296>>>0)>>>0,t[2][1]=X>>>0,X=t[3][1]+L,t[3][0]=t[3][0]+B+(X/4294967296>>>0)>>>0,t[3][1]=X>>>0,X=t[4][1]+Y,t[4][0]=t[4][0]+O+(X/4294967296>>>0)>>>0,t[4][1]=X>>>0,X=t[5][1]+z,t[5][0]=t[5][0]+V+(X/4294967296>>>0)>>>0,t[5][1]=X>>>0,X=t[6][1]+U,t[6][0]=t[6][0]+Q+(X/4294967296>>>0)>>>0,t[6][1]=X>>>0,X=t[7][1]+J,t[7][0]=t[7][0]+Z+(X/4294967296>>>0)>>>0,t[7][1]=X>>>0,Ae-=128}}s(vct,"_update")});var Ict=H(GTe=>{d();var xdr=_i();zA();var yu=xdr.asn1;GTe.privateKeyValidator={name:"PrivateKeyInfo",tagClass:yu.Class.UNIVERSAL,type:yu.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:yu.Class.UNIVERSAL,type:yu.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:yu.Class.UNIVERSAL,type:yu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:yu.Class.UNIVERSAL,type:yu.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:yu.Class.UNIVERSAL,type:yu.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};GTe.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:yu.Class.UNIVERSAL,type:yu.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:yu.Class.UNIVERSAL,type:yu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:yu.Class.UNIVERSAL,type:yu.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:yu.Class.UNIVERSAL,type:yu.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Fct=H((cAi,Lct)=>{d();var id=_i();OQ();Wh();jTe();qo();var kct=Ict(),Edr=kct.publicKeyValidator,bdr=kct.privateKeyValidator;typeof Tct>"u"&&(Tct=id.jsbn.BigInteger);var Tct,KTe=id.util.ByteBuffer,Q0=typeof Buffer>"u"?Uint8Array:Buffer;id.pki=id.pki||{};Lct.exports=id.pki.ed25519=id.ed25519=id.ed25519||{};var Xi=id.ed25519;Xi.constants={};Xi.constants.PUBLIC_KEY_BYTE_LENGTH=32;Xi.constants.PRIVATE_KEY_BYTE_LENGTH=64;Xi.constants.SEED_BYTE_LENGTH=32;Xi.constants.SIGN_BYTE_LENGTH=64;Xi.constants.HASH_BYTE_LENGTH=64;Xi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=id.random.getBytesSync(Xi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Xi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Xi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=tE({message:e,encoding:"binary"});for(var r=new Q0(Xi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Q0(Xi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Sdr(r,n),{publicKey:r,privateKey:n}};Xi.privateKeyFromAsn1=function(t){var e={},r=[],n=id.asn1.validate(t,bdr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=id.asn1.derToOid(e.privateKeyOid),a=id.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=tE({message:id.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};Xi.publicKeyFromAsn1=function(t){var e={},r=[],n=id.asn1.validate(t,Edr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=id.asn1.derToOid(e.publicKeyOid),a=id.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==Xi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return tE({message:c,encoding:"binary"})};Xi.publicKeyFromPrivateKey=function(t){t=t||{};var e=tE({message:t.privateKey,encoding:"binary"});if(e.length!==Xi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Xi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Q0(Xi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Xi.sign=function(t){t=t||{};var e=tE(t),r=tE({message:t.privateKey,encoding:"binary"});if(r.length===Xi.constants.SEED_BYTE_LENGTH){var n=Xi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Xi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Xi.constants.SEED_BYTE_LENGTH+" or "+Xi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Q0(Xi.constants.SIGN_BYTE_LENGTH+e.length);_dr(i,e,e.length,r);for(var o=new Q0(Xi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Xi.verify=function(t){t=t||{};var e=tE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=tE({message:t.signature,encoding:"binary"});if(r.length!==Xi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Xi.constants.SIGN_BYTE_LENGTH);var n=tE({message:t.publicKey,encoding:"binary"});if(n.length!==Xi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Xi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Q0(Xi.constants.SIGN_BYTE_LENGTH+e.length),o=new Q0(Xi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Xi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+Xi.constants.SIGN_BYTE_LENGTH]=e[a];return Rdr(o,i,i.length,n)>=0};function tE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Q0)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new KTe(e,r)}else if(!(e instanceof KTe))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Q0(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(tE,"messageToNativeBuffer");var YTe=Mn(),Ure=Mn([1]),Idr=Mn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Tdr=Mn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),wct=Mn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Sct=Mn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),VTe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),wdr=Mn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function $Q(t,e){var r=id.md.sha512.create(),n=new KTe(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Q0(Xi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s($Q,"sha512");function Sdr(t,e){var r=[Mn(),Mn(),Mn(),Mn()],n,i=$Q(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,ewe(r,i),ZTe(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(Sdr,"crypto_sign_keypair");function _dr(t,e,r,n){var i,o,a=new Float64Array(64),c=[Mn(),Mn(),Mn(),Mn()],l=$Q(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var f=$Q(t.subarray(32),r+32);for(JTe(f),ewe(c,f),ZTe(t,c),i=32;i<64;++i)t[i]=n[i];var p=$Q(t,r+64);for(JTe(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=f[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return Pct(t.subarray(32),a),u}s(_dr,"crypto_sign");function Rdr(t,e,r,n){var i,o,a=new Q0(32),c=[Mn(),Mn(),Mn(),Mn()],l=[Mn(),Mn(),Mn(),Mn()];if(o=-1,r<64||kdr(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=$Q(t,r);if(JTe(u),Nct(c,l,u),ewe(l,e.subarray(32)),XTe(c,l),ZTe(a,c),r-=64,Dct(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(Rdr,"crypto_sign_open");function Pct(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*VTe[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*VTe[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*VTe[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(Pct,"modL");function JTe(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;Pct(t,e)}s(JTe,"reduce");function XTe(t,e){var r=Mn(),n=Mn(),i=Mn(),o=Mn(),a=Mn(),c=Mn(),l=Mn(),u=Mn(),f=Mn();jN(r,t[1],t[0]),jN(f,e[1],e[0]),_s(r,r,f),WN(n,t[0],t[1]),WN(f,e[0],e[1]),_s(n,n,f),_s(i,t[3],e[3]),_s(i,i,Tdr),_s(o,t[2],e[2]),WN(o,o,o),jN(a,n,r),jN(c,o,i),WN(l,o,i),WN(u,n,r),_s(t[0],a,c),_s(t[1],u,l),_s(t[2],l,c),_s(t[3],a,u)}s(XTe,"add");function _ct(t,e,r){for(var n=0;n<4;++n)Mct(t[n],e[n],r)}s(_ct,"cswap");function ZTe(t,e){var r=Mn(),n=Mn(),i=Mn();Ndr(i,e[2]),_s(r,e[0],i),_s(n,e[1],i),qre(t,n),t[31]^=Bct(r)<<7}s(ZTe,"pack");function qre(t,e){var r,n,i,o=Mn(),a=Mn();for(r=0;r<16;++r)a[r]=e[r];for(zTe(a),zTe(a),zTe(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,Mct(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(qre,"pack25519");function kdr(t,e){var r=Mn(),n=Mn(),i=Mn(),o=Mn(),a=Mn(),c=Mn(),l=Mn();return Sw(t[2],Ure),Pdr(t[1],e),Rk(i,t[1]),_s(o,i,Idr),jN(i,i,t[2]),WN(o,t[2],o),Rk(a,o),Rk(c,a),_s(l,c,a),_s(r,l,i),_s(r,r,o),Ddr(r,r),_s(r,r,i),_s(r,r,o),_s(r,r,o),_s(t[0],r,o),Rk(n,t[0]),_s(n,n,o),Rct(n,i)&&_s(t[0],t[0],wdr),Rk(n,t[0]),_s(n,n,o),Rct(n,i)?-1:(Bct(t[0])===e[31]>>7&&jN(t[0],YTe,t[0]),_s(t[3],t[0],t[1]),0)}s(kdr,"unpackneg");function Pdr(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(Pdr,"unpack25519");function Ddr(t,e){var r=Mn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Rk(r,r),n!==1&&_s(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Ddr,"pow2523");function Rct(t,e){var r=new Q0(32),n=new Q0(32);return qre(r,t),qre(n,e),Dct(r,0,n,0)}s(Rct,"neq25519");function Dct(t,e,r,n){return Bdr(t,e,r,n,32)}s(Dct,"crypto_verify_32");function Bdr(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(Bdr,"vn");function Bct(t){var e=new Q0(32);return qre(e,t),e[0]&1}s(Bct,"par25519");function Nct(t,e,r){var n,i;for(Sw(t[0],YTe),Sw(t[1],Ure),Sw(t[2],Ure),Sw(t[3],YTe),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,_ct(t,e,n),XTe(e,t),XTe(t,t),_ct(t,e,n)}s(Nct,"scalarmult");function ewe(t,e){var r=[Mn(),Mn(),Mn(),Mn()];Sw(r[0],wct),Sw(r[1],Sct),Sw(r[2],Ure),_s(r[3],wct,Sct),Nct(t,r,e)}s(ewe,"scalarbase");function Sw(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(Sw,"set25519");function Ndr(t,e){var r=Mn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Rk(r,r),n!==2&&n!==4&&_s(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Ndr,"inv25519");function zTe(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(zTe,"car25519");function Mct(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(Mct,"sel25519");function Mn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(Mn,"gf");function WN(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(WN,"A");function jN(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(jN,"Z");function Rk(t,e){_s(t,e,e)}s(Rk,"S");function _s(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=0,g=0,A=0,y=0,E=0,b=0,S=0,R=0,B=0,L=0,O=0,Y=0,V=0,z=0,Q=0,U=0,Z=0,J=0,j=0,$=0,X=0,ie=0,ae=0,te=r[0],pe=r[1],Ae=r[2],Oe=r[3],Te=r[4],Je=r[5],Fe=r[6],lt=r[7],_t=r[8],xt=r[9],ht=r[10],ue=r[11],Ue=r[12],ye=r[13],$e=r[14],se=r[15];n=e[0],o+=n*te,a+=n*pe,c+=n*Ae,l+=n*Oe,u+=n*Te,f+=n*Je,p+=n*Fe,m+=n*lt,h+=n*_t,g+=n*xt,A+=n*ht,y+=n*ue,E+=n*Ue,b+=n*ye,S+=n*$e,R+=n*se,n=e[1],a+=n*te,c+=n*pe,l+=n*Ae,u+=n*Oe,f+=n*Te,p+=n*Je,m+=n*Fe,h+=n*lt,g+=n*_t,A+=n*xt,y+=n*ht,E+=n*ue,b+=n*Ue,S+=n*ye,R+=n*$e,B+=n*se,n=e[2],c+=n*te,l+=n*pe,u+=n*Ae,f+=n*Oe,p+=n*Te,m+=n*Je,h+=n*Fe,g+=n*lt,A+=n*_t,y+=n*xt,E+=n*ht,b+=n*ue,S+=n*Ue,R+=n*ye,B+=n*$e,L+=n*se,n=e[3],l+=n*te,u+=n*pe,f+=n*Ae,p+=n*Oe,m+=n*Te,h+=n*Je,g+=n*Fe,A+=n*lt,y+=n*_t,E+=n*xt,b+=n*ht,S+=n*ue,R+=n*Ue,B+=n*ye,L+=n*$e,O+=n*se,n=e[4],u+=n*te,f+=n*pe,p+=n*Ae,m+=n*Oe,h+=n*Te,g+=n*Je,A+=n*Fe,y+=n*lt,E+=n*_t,b+=n*xt,S+=n*ht,R+=n*ue,B+=n*Ue,L+=n*ye,O+=n*$e,Y+=n*se,n=e[5],f+=n*te,p+=n*pe,m+=n*Ae,h+=n*Oe,g+=n*Te,A+=n*Je,y+=n*Fe,E+=n*lt,b+=n*_t,S+=n*xt,R+=n*ht,B+=n*ue,L+=n*Ue,O+=n*ye,Y+=n*$e,V+=n*se,n=e[6],p+=n*te,m+=n*pe,h+=n*Ae,g+=n*Oe,A+=n*Te,y+=n*Je,E+=n*Fe,b+=n*lt,S+=n*_t,R+=n*xt,B+=n*ht,L+=n*ue,O+=n*Ue,Y+=n*ye,V+=n*$e,z+=n*se,n=e[7],m+=n*te,h+=n*pe,g+=n*Ae,A+=n*Oe,y+=n*Te,E+=n*Je,b+=n*Fe,S+=n*lt,R+=n*_t,B+=n*xt,L+=n*ht,O+=n*ue,Y+=n*Ue,V+=n*ye,z+=n*$e,Q+=n*se,n=e[8],h+=n*te,g+=n*pe,A+=n*Ae,y+=n*Oe,E+=n*Te,b+=n*Je,S+=n*Fe,R+=n*lt,B+=n*_t,L+=n*xt,O+=n*ht,Y+=n*ue,V+=n*Ue,z+=n*ye,Q+=n*$e,U+=n*se,n=e[9],g+=n*te,A+=n*pe,y+=n*Ae,E+=n*Oe,b+=n*Te,S+=n*Je,R+=n*Fe,B+=n*lt,L+=n*_t,O+=n*xt,Y+=n*ht,V+=n*ue,z+=n*Ue,Q+=n*ye,U+=n*$e,Z+=n*se,n=e[10],A+=n*te,y+=n*pe,E+=n*Ae,b+=n*Oe,S+=n*Te,R+=n*Je,B+=n*Fe,L+=n*lt,O+=n*_t,Y+=n*xt,V+=n*ht,z+=n*ue,Q+=n*Ue,U+=n*ye,Z+=n*$e,J+=n*se,n=e[11],y+=n*te,E+=n*pe,b+=n*Ae,S+=n*Oe,R+=n*Te,B+=n*Je,L+=n*Fe,O+=n*lt,Y+=n*_t,V+=n*xt,z+=n*ht,Q+=n*ue,U+=n*Ue,Z+=n*ye,J+=n*$e,j+=n*se,n=e[12],E+=n*te,b+=n*pe,S+=n*Ae,R+=n*Oe,B+=n*Te,L+=n*Je,O+=n*Fe,Y+=n*lt,V+=n*_t,z+=n*xt,Q+=n*ht,U+=n*ue,Z+=n*Ue,J+=n*ye,j+=n*$e,$+=n*se,n=e[13],b+=n*te,S+=n*pe,R+=n*Ae,B+=n*Oe,L+=n*Te,O+=n*Je,Y+=n*Fe,V+=n*lt,z+=n*_t,Q+=n*xt,U+=n*ht,Z+=n*ue,J+=n*Ue,j+=n*ye,$+=n*$e,X+=n*se,n=e[14],S+=n*te,R+=n*pe,B+=n*Ae,L+=n*Oe,O+=n*Te,Y+=n*Je,V+=n*Fe,z+=n*lt,Q+=n*_t,U+=n*xt,Z+=n*ht,J+=n*ue,j+=n*Ue,$+=n*ye,X+=n*$e,ie+=n*se,n=e[15],R+=n*te,B+=n*pe,L+=n*Ae,O+=n*Oe,Y+=n*Te,V+=n*Je,z+=n*Fe,Q+=n*lt,U+=n*_t,Z+=n*xt,J+=n*ht,j+=n*ue,$+=n*Ue,X+=n*ye,ie+=n*$e,ae+=n*se,o+=38*B,a+=38*L,c+=38*O,l+=38*Y,u+=38*V,f+=38*z,p+=38*Q,m+=38*U,h+=38*Z,g+=38*J,A+=38*j,y+=38*$,E+=38*X,b+=38*ie,S+=38*ae,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=A,t[11]=y,t[12]=E,t[13]=b,t[14]=S,t[15]=R}s(_s,"M")});var qct=H((dAi,Uct)=>{d();var rm=_i();qo();Wh();OQ();Uct.exports=rm.kem=rm.kem||{};var Oct=rm.jsbn.BigInteger;rm.kem.rsa={};rm.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||rm.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new Oct(rm.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(Oct.ONE)<=0);c=rm.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=rm.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),f=t.generate(c,o);return{encapsulation:u,key:f}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};rm.kem.kdf1=function(t,e){Qct(this,t,0,e||t.digestLength)};rm.kem.kdf2=function(t,e){Qct(this,t,1,e||t.digestLength)};function Qct(t,e,r,n){t.generate=function(i,o){for(var a=new rm.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new rm.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var f=e.digest();a.putBytes(f.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(Qct,"_createKDF")});var jct=H((mAi,Wct)=>{d();var mo=_i();qo();Wct.exports=mo.log=mo.log||{};mo.log.levels=["none","error","warning","info","debug","verbose","max"];var Hre={},nwe=[],jQ=null;mo.log.LEVEL_LOCKED=2;mo.log.NO_LEVEL_CHECK=4;mo.log.INTERPOLATE=8;for(g1=0;g1<mo.log.levels.length;++g1)twe=mo.log.levels[g1],Hre[twe]={index:g1,name:twe.toUpperCase()};var twe,g1;mo.log.logMessage=function(t){for(var e=Hre[t.level].index,r=0;r<nwe.length;++r){var n=nwe[r];if(n.flags&mo.log.NO_LEVEL_CHECK)n.f(t);else{var i=Hre[n.level].index;e<=i&&n.f(n,t)}}};mo.log.prepareStandard=function(t){"standard"in t||(t.standard=Hre[t.level].name+" ["+t.category+"] "+t.message)};mo.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=mo.util.format.apply(this,e)}};mo.log.prepareStandardFull=function(t){"standardFull"in t||(mo.log.prepareStandard(t),t.standardFull=t.standard)};for(rwe=["error","warning","info","debug","verbose"],g1=0;g1<rwe.length;++g1)(function(e){mo.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};mo.log.logMessage(o)}})(rwe[g1]);var rwe,g1;mo.log.makeLogger=function(t){var e={flags:0,f:t};return mo.log.setLevel(e,"none"),e};mo.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&mo.log.LEVEL_LOCKED))for(var n=0;n<mo.log.levels.length;++n){var i=mo.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};mo.log.lock=function(t,e){typeof e>"u"||e?t.flags|=mo.log.LEVEL_LOCKED:t.flags&=~mo.log.LEVEL_LOCKED};mo.log.addLogger=function(t){nwe.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Hct={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},GQ=s(function(t,e){mo.log.prepareStandard(e);var r=Hct[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),GN=mo.log.makeLogger(GQ)):(GQ=s(function(e,r){mo.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),GN=mo.log.makeLogger(GQ)),mo.log.setLevel(GN,"debug"),mo.log.addLogger(GN),jQ=GN):console={log:s(function(){},"log")};var GN,Hct,GQ;jQ!==null&&typeof window<"u"&&window.location&&(WQ=new URL(window.location.href).searchParams,WQ.has("console.level")&&mo.log.setLevel(jQ,WQ.get("console.level").slice(-1)[0]),WQ.has("console.lock")&&($ct=WQ.get("console.lock").slice(-1)[0],$ct=="true"&&mo.log.lock(jQ)));var WQ,$ct;mo.log.consoleLogger=jQ});var Vct=H((AAi,Gct)=>{d();Gct.exports=c1();xre();QN();gTe();jTe()});var Yct=H((CAi,Kct)=>{d();var cr=_i();Cw();zA();LQ();vw();Ek();kTe();Wh();qo();Mre();var De=cr.asn1,Lf=Kct.exports=cr.pkcs7=cr.pkcs7||{};Lf.messageFromPem=function(t){var e=cr.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=De.fromDer(e.body);return Lf.messageFromAsn1(n)};Lf.messageToPem=function(t,e){var r={type:"PKCS7",body:De.toDer(t.toAsn1()).getBytes()};return cr.pem.encode(r,{maxline:e})};Lf.messageFromAsn1=function(t){var e={},r=[];if(!De.validate(t,Lf.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=De.derToOid(e.contentType),o;switch(i){case cr.pki.oids.envelopedData:o=Lf.createEnvelopedData();break;case cr.pki.oids.encryptedData:o=Lf.createEncryptedData();break;case cr.pki.oids.signedData:o=Lf.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Lf.createSignedData=function(){var t=null;return t={type:cr.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(owe(t,n,Lf.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(cr.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(cr.pki.certificateToAsn1(t.certificates[i]));var o=[],a=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.signerInfos)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=cr.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=cr.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||cr.pki.oids.sha1;switch(l){case cr.pki.oids.sha1:case cr.pki.oids.sha256:case cr.pki.oids.sha384:case cr.pki.oids.sha512:case cr.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var f=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!f&&h.type===cr.pki.oids.contentType){if(f=!0,p)break;continue}if(!p&&h.type===cr.pki.oids.messageDigest){if(p=!0,f)break;continue}}if(!f||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:cr.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(cr.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof cr.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=cr.util.encodeUtf8(t.content)),n.detached?t.detachedContent=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=cr.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=cr.md[cr.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=cr.md[cr.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(a).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=De.derToOid(t.contentInfo.value[0].value),a=De.toDer(i);a.getByte(),De.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(o!==cr.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[]),m=0;m<f.authenticatedAttributes.length;++m){var h=f.authenticatedAttributes[m];h.type===cr.pki.oids.messageDigest?h.value=n[f.digestAlgorithm].digest():h.type===cr.pki.oids.signingTime&&(h.value||(h.value=l)),p.value.push(iwe(h)),f.authenticatedAttributesAsn1.value.push(iwe(h))}a=De.toDer(p).getBytes(),f.md.start().update(a)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=Udr(t.signers)}s(r,"addSignerInfos")};Lf.createEncryptedData=function(){var t=null;return t={type:cr.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:cr.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){owe(t,e,Lf.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),zct(t)},"decrypt")},t};Lf.createEnvelopedData=function(){var t=null;return t={type:cr.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:cr.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=owe(t,e,Lf.asn1.envelopedDataValidator);t.recipients=Fdr(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,Odr(t.recipients)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,qdr(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case cr.pki.oids.rsaEncryption:case cr.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=cr.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}zct(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:cr.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case cr.pki.oids["aes128-CBC"]:n=16,i=16,o=cr.aes.createEncryptionCipher;break;case cr.pki.oids["aes192-CBC"]:n=24,i=16,o=cr.aes.createEncryptionCipher;break;case cr.pki.oids["aes256-CBC"]:n=32,i=16,o=cr.aes.createEncryptionCipher;break;case cr.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=cr.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=cr.util.createBuffer(cr.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=cr.util.createBuffer(cr.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case cr.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function Mdr(t){var e={},r=[];if(!De.validate(t,Lf.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:cr.pki.RDNAttributesAsArray(e.issuer),serialNumber:cr.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:De.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(Mdr,"_recipientFromAsn1");function Ldr(t){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[cr.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,cr.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.encryptedContent.algorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]),De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(Ldr,"_recipientToAsn1");function Fdr(t){for(var e=[],r=0;r<t.length;++r)e.push(Mdr(t[r]));return e}s(Fdr,"_recipientsFromAsn1");function Odr(t){for(var e=[],r=0;r<t.length;++r)e.push(Ldr(t[r]));return e}s(Odr,"_recipientsToAsn1");function Qdr(t){var e=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[cr.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,cr.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.digestAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.signatureAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=De.create(De.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(iwe(i))}e.value.push(r)}return e}s(Qdr,"_signerToAsn1");function Udr(t){for(var e=[],r=0;r<t.length;++r)e.push(Qdr(t[r]));return e}s(Udr,"_signersToAsn1");function iwe(t){var e;if(t.type===cr.pki.oids.contentType)e=De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.value).getBytes());else if(t.type===cr.pki.oids.messageDigest)e=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===cr.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=De.utcTimeToDate(i):i=De.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=De.create(De.Class.UNIVERSAL,De.Type.UTCTIME,!1,De.dateToUtcTime(i)):e=De.create(De.Class.UNIVERSAL,De.Type.GENERALIZEDTIME,!1,De.dateToGeneralizedTime(i))}return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[e])])}s(iwe,"_attributeToAsn1");function qdr(t){return[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(cr.pki.oids.data).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.algorithm).getBytes()),t.parameter?De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(qdr,"_encryptedContentToAsn1");function owe(t,e,r){var n={},i=[];if(!De.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=De.derToOid(n.contentType);if(a!==cr.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(cr.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:De.derToOid(n.encAlgorithm),parameter:cr.util.createBuffer(n.encParameter.value),content:cr.util.createBuffer(c)}}if(n.content){var c="";if(cr.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=cr.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(owe,"_fromAsn1");function zct(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case cr.pki.oids["aes128-CBC"]:case cr.pki.oids["aes192-CBC"]:case cr.pki.oids["aes256-CBC"]:e=cr.aes.createDecryptionCipher(t.encryptedContent.key);break;case cr.pki.oids.desCBC:case cr.pki.oids["des-EDE3-CBC"]:e=cr.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(zct,"_decryptContent")});var Xct=H((EAi,Jct)=>{d();var ml=_i();Cw();MN();xre();QN();qo();var Wre=Jct.exports=ml.ssh=ml.ssh||{};Wre.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=ml.util.createBuffer();VN(a,n),A1(a,t.e),A1(a,t.n);var c=ml.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=ml.util.createBuffer();A1(u,t.d),A1(u,t.p),A1(u,t.q),A1(u,t.qInv);var f;if(!e)f=ml.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=$re(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=ml.util.createBuffer();h.putBuffer($re("\0\0\0\0",e)),h.putBuffer($re("\0\0\0",e));var g=ml.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(ml.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var A=g.output;A.truncate(16),f=ml.util.encode64(A.bytes(),64)}l=Math.floor(f.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=f;var y=$re("putty-private-key-file-mac-key",e),E=ml.util.createBuffer();VN(E,n),VN(E,i),VN(E,r),E.putInt32(a.length()),E.putBuffer(a),E.putInt32(u.length()),E.putBuffer(u);var b=ml.hmac.create();return b.start("sha1",y),b.update(E.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};Wre.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=ml.util.createBuffer();return VN(n,r),A1(n,t.e),A1(n,t.n),r+" "+ml.util.encode64(n.bytes())+" "+e};Wre.privateKeyToOpenSSH=function(t,e){return e?ml.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):ml.pki.privateKeyToPem(t)};Wre.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||ml.md.md5.create(),n="ssh-rsa",i=ml.util.createBuffer();VN(i,n),A1(i,t.e),A1(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function A1(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=ml.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(A1,"_addBigIntegerToBuffer");function VN(t,e){t.putInt32(e.length),t.putString(e)}s(VN,"_addStringToBuffer");function $re(){for(var t=ml.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s($re,"_sha1")});var elt=H((TAi,Zct)=>{d();Zct.exports=_i();Cw();Cct();zA();mre();LQ();Fct();MN();qct();jct();Vct();PTe();Tre();Ek();TTe();NTe();Yct();LTe();STe();ATe();Dre();Wh();vTe();Xct();HTe();qo()});var nlt=H(kk=>{"use strict";d();Object.defineProperty(kk,"__esModule",{value:!0});kk.convert=kk.Format=void 0;var VQ=elt(),_w;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(_w=kk.Format||(kk.Format={}));function tlt(t){var e=VQ.pki.pemToDer(t),r=VQ.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(tlt,"myASN");function Hdr(t){var e=tlt(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(Hdr,"txtFormat");function rlt(t,e){switch(e){case _w.der:return VQ.pki.pemToDer(t);case _w.pem:return t;case _w.txt:return Hdr(t);case _w.asn1:return tlt(t);case _w.fingerprint:var r=VQ.md.sha1.create(),n=rlt(t,_w.der);return r.update(n.getBytes()),r.digest().toHex();case _w.x509:return VQ.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(rlt,"convert");kk.convert=rlt});var llt=H(U0=>{"use strict";d();var Rw=U0&&U0.__assign||function(){return Rw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Rw.apply(this,arguments)},jre=U0&&U0.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(U0,"__esModule",{value:!0});U0.convert=U0.Format=U0.addToGlobalAgent=U0.get=void 0;var swe=require("https"),$dr=require("tls"),ilt=require("child_process"),olt=Ost(),rE=nlt();Object.defineProperty(U0,"Format",{enumerable:!0,get:s(function(){return rE.Format},"get")});Object.defineProperty(U0,"convert",{enumerable:!0,get:s(function(){return rE.convert},"get")});var slt=process.platform==="darwin",alt=swe.globalAgent,Vre={keychain:"all",unique:!0,excludeBundled:!0,format:rE.Format.pem};function clt(t){if(t===void 0&&(t=Vre),!slt)return[];t=Rw(Rw({},Vre),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,ilt.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=jre(jre([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,ilt.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=jre(jre([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,rE.convert)(u,rE.Format.fingerprint)}),l=t.excludeBundled?$dr.rootCertificates.map(function(u){return(0,rE.convert)(u,rE.Format.fingerprint)}):[];n=n.filter(function(u,f){var p=c[f];return!(t.unique&&f!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,rE.convert)(u,t.format)})}s(clt,"get");U0.get=clt;var Gre=alt.options.ca,Wdr=s(function(t){if(t===void 0&&(t=Vre),!!slt){var e;Array.isArray(Gre)?e=Array.from(Gre):e=typeof Gre<"u"?[Gre]:[],clt(Rw(Rw(Rw({},Vre),t),{format:rE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),alt.options.ca=e,swe.Agent=function(r){var n=s(function(i){var o=typeof i<"u"?Rw({},i):{};return typeof o.ca>"u"&&(o.ca=e),r.call(this,o)},"newAgent");return n.prototype=r.prototype,n}(swe.Agent),(0,olt.setGlobalDispatcher)(new olt.Agent({connect:{ca:e}}))}},"addToGlobalAgent");U0.addToGlobalAgent=Wdr});var ult=H((BAi,awe)=>{d();function jdr(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=process.arch==="arm64"?"crypt32-arm64.node":"crypt32.node",i=r(e(__dirname,n)),o=[],a=new i.Crypt32;try{let c;for(;c=a.next();){let l=new t(c);o.push(l.toString())}}finally{a.done()}return Array.from(new Set(o))}s(jdr,"all");process.platform!=="win32"?awe.exports.all=()=>[]:awe.exports.all=jdr});var ylt=H((UAi,Alt)=>{"use strict";d();function glt(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(glt,"validateParameter");function Vdr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(Vdr,"hasOwnProperty");function zdr(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];Vdr(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),glt(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(zdr,"defineOperation");Alt.exports={defineOperation:zdr,validateParameter:glt}});var gwe=H(($Ai,xlt)=>{"use strict";d();var YN=kCe()("kerberos"),KN=YN.KerberosClient,Clt=YN.KerberosServer,kw=ylt().defineOperation,Kdr=1,Ydr=2,Jdr=4,Xdr=8,Zdr=16,efr=32,tfr=64,rfr=128,nfr=256,vlt=0,ifr=9,ofr=6;KN.prototype.step=kw(KN.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);KN.prototype.wrap=kw(KN.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);KN.prototype.unwrap=kw(KN.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);Clt.prototype.step=kw(Clt.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var sfr=kw(YN.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),afr=kw(YN.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),cfr=kw(YN.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:vlt}},{name:"callback",type:"function",required:!1}]),lfr=kw(YN.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);xlt.exports={initializeClient:cfr,initializeServer:lfr,principalDetails:afr,checkPassword:sfr,GSS_C_DELEG_FLAG:Kdr,GSS_C_MUTUAL_FLAG:Ydr,GSS_C_REPLAY_FLAG:Jdr,GSS_C_SEQUENCE_FLAG:Xdr,GSS_C_CONF_FLAG:Zdr,GSS_C_INTEG_FLAG:efr,GSS_C_ANON_FLAG:tfr,GSS_C_PROT_READY_FLAG:rfr,GSS_C_TRANS_FLAG:nfr,GSS_C_NO_OID:vlt,GSS_MECH_OID_KRB5:ifr,GSS_MECH_OID_SPNEGO:ofr}});var Elt=H((jAi,ufr)=>{ufr.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var Ilt=H((GAi,blt)=>{"use strict";d();var dfr=require("dns"),ffr=gwe(),Awe=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=pfr(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();dfr.resolveCname(c,(u,f)=>{if(u)return l(u);Array.isArray(f)&&f.length>0&&(i.host=f[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;ffr.initializeClient(l,c,(u,f)=>{if(u)return n(u,null);i.client=f,n(null,f)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function pfr(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=mfr(t),r(null,i)})}}s(pfr,"firstTransition");function mfr(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=hfr(t),r(null,i||"")})}}s(mfr,"secondTransition");function hfr(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=gfr(t),r(null,a)})})}}s(hfr,"thirdTransition");function gfr(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(gfr,"fourthTransition");blt.exports={MongoAuthProcess:Awe}});var wlt=H((KAi,zQ)=>{"use strict";d();var Tlt=gwe();zQ.exports=Tlt;zQ.exports.Kerberos=Tlt;zQ.exports.version=Elt().version;zQ.exports.processes={MongoAuthProcess:Ilt().MongoAuthProcess}});var Qut=H(Jwe=>{"use strict";d();Object.defineProperty(Jwe,"__esModule",{value:!0});Jwe.assertNever=epr;function epr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(epr,"assertNever")});var vU=H(mE=>{"use strict";d();Object.defineProperty(mE,"__esModule",{value:!0});mE.ChatCompletionContentPartOpaque=mE.ChatCompletionContentPartKind=mE.ChatRole=void 0;var tpr=Qut(),Kne;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(Kne||(mE.ChatRole=Kne={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,tpr.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(Kne||(mE.ChatRole=Kne={}));var Uut;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Uut||(mE.ChatCompletionContentPartKind=Uut={}));var qut;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(qut||(mE.ChatCompletionContentPartOpaque=qut={}))});var Xwe=H(_1=>{"use strict";d();Object.defineProperty(_1,"__esModule",{value:!0});_1.BaseTokensPerName=_1.BaseTokensPerMessage=_1.BaseTokensPerCompletion=_1.ChatRole=void 0;var Hut;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Hut||(_1.ChatRole=Hut={}));_1.BaseTokensPerCompletion=3;_1.BaseTokensPerMessage=3;_1.BaseTokensPerName=1});var Wut=H(Jne=>{"use strict";d();Object.defineProperty(Jne,"__esModule",{value:!0});Jne.toOpenAiChatMessage=$ut;Jne.toOpenAIChatMessages=ipr;var hE=vU(),Yne=Xwe(),rpr=qw();function Zwe(t){return t.filter(e=>e.type===hE.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Zwe,"onlyStringContent");function npr(t){let e=t.map(r=>{if(r.type===hE.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===hE.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===hE.ChatCompletionContentPartKind.Opaque&&hE.ChatCompletionContentPartOpaque.usableIn(r,rpr.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(npr,"stringAndImageContent");function $ut(t){switch(t.role){case hE.ChatRole.System:return{role:Yne.ChatRole.System,content:Zwe(t.content),name:t.name};case hE.ChatRole.User:return{role:Yne.ChatRole.User,content:npr(t.content),name:t.name};case hE.ChatRole.Assistant:return{role:Yne.ChatRole.Assistant,content:Zwe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case hE.ChatRole.Tool:return{role:Yne.ChatRole.Tool,content:Zwe(t.content),tool_call_id:t.toolCallId};default:return}}s($ut,"toOpenAiChatMessage");function ipr(t){return t.map($ut).filter(e=>!!e)}s(ipr,"toOpenAIChatMessages")});var Gut=H(eie=>{"use strict";d();Object.defineProperty(eie,"__esModule",{value:!0});eie.toVsCodeChatMessage=jut;eie.toVsCodeChatMessages=opr;var Zne=vU();function Xne(t){return t.filter(e=>e.type===Zne.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Xne,"onlyStringContent");var Hw;function jut(t){switch(Hw??=require("vscode"),t.role){case Zne.ChatRole.Assistant:let e=Hw.LanguageModelChatMessage.Assistant(Xne(t.content),t.name);return t.toolCalls&&(e.content=[new Hw.LanguageModelTextPart(Xne(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new Hw.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case Zne.ChatRole.User:return Hw.LanguageModelChatMessage.User(Xne(t.content),t.name);case Zne.ChatRole.Tool:{let r=Hw.LanguageModelChatMessage.User("");return r.content=[new Hw.LanguageModelToolResultPart(t.toolCallId,[new Hw.LanguageModelTextPart(Xne(t.content))])],r}default:return}}s(jut,"toVsCodeChatMessage");function opr(t){return t.map(jut).filter(e=>!!e)}s(opr,"toVsCodeChatMessages")});var qw=H(ry=>{"use strict";d();Object.defineProperty(ry,"__esModule",{value:!0});ry.OutputMode=ry.Raw=ry.OpenAI=void 0;ry.toMode=eSe;ry.toVSCode=spr;ry.toOpenAI=apr;var Vut=Wut(),zut=Gut();ry.OpenAI=Xwe();ry.Raw=vU();var qk;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(qk||(ry.OutputMode=qk={}));function eSe(t,e){switch(t){case qk.Raw:return e;case qk.VSCode:return e instanceof Array?(0,zut.toVsCodeChatMessages)(e):(0,zut.toVsCodeChatMessage)(e);case qk.OpenAI:return e instanceof Array?(0,Vut.toOpenAIChatMessages)(e):(0,Vut.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(eSe,"toMode");function spr(t){return eSe(qk.VSCode,t)}s(spr,"toVSCode");function apr(t){return eSe(qk.OpenAI,t)}s(apr,"toOpenAI")});var tSe=H(xU=>{"use strict";d();Object.defineProperty(xU,"__esModule",{value:!0});xU.jsonRetainedProps=void 0;xU.forEachNode=Kut;xU.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Kut(t,e){if(e(t),t.type===1)for(let r of t.children)Kut(r,e)}s(Kut,"forEachNode")});var Yut=H(rSe=>{"use strict";d();Object.defineProperty(rSe,"__esModule",{value:!0});rSe.once=cpr;function cpr(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(cpr,"once")});var sSe=H(Vd=>{"use strict";d();Object.defineProperty(Vd,"__esModule",{value:!0});Vd.BudgetExceededError=Vd.MaterializedChatMessageImage=Vd.MaterializedChatMessageBreakpoint=Vd.MaterializedChatMessageOpaque=Vd.MaterializedChatMessage=Vd.MaterializedChatMessageTextChunk=Vd.GenericMaterializedContainer=void 0;var p8=Yut(),am=qw(),gE=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=Ww(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return odt(e,this.children,r)}allMetadata(){return idt(this)}findById(e){return oSe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)lpr(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof iy&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof iy||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return iSe(this,e),e}};Vd.GenericMaterializedContainer=gE;var EU=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,p8.once)(async e=>await e.tokenLength({type:am.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};Vd.MaterializedChatMessageTextChunk=EU;var iy=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=odt(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return iSe(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return oSe(e,this)}_tokenCount=(0,p8.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,am.toMode)(e.mode,r))});_upperBound=(0,p8.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,p8.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===am.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===am.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,am.toMode)(e.mode,r))});_text=(0,p8.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of rdt(this)){if(r instanceof Hk||r instanceof $w){e.push(r);continue}if(r instanceof ny){e.at(-1)instanceof ny?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:am.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof Hk)return{type:am.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:sdt(r.src),detail:r.detail}};if(r instanceof $w)return r.value;if(r instanceof ny)return r.part;throw new Error("Unexpected element type")});if(this.role===am.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===am.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===am.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===am.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};Vd.MaterializedChatMessage=iy;var $w=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&am.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};Vd.MaterializedChatMessageOpaque=$w;var ny=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};Vd.MaterializedChatMessageBreakpoint=ny;var Hk=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,p8.once)(async e=>e.tokenLength({type:am.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:sdt(this.src),detail:this.detail}}));isEmpty=!1};Vd.MaterializedChatMessageImage=Hk;function Ww(t){return t instanceof gE||t instanceof iy}s(Ww,"isContainerType");function tdt(t){return t instanceof EU||t instanceof Hk||t instanceof $w||t instanceof ny}s(tdt,"isContentType");function lpr(t){if(!Ww(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(lpr,"assertContainerOrChatMessage");function*rdt(t,e=!1){for(let r of t.children)r instanceof EU?(yield{content:r,isTextSibling:e},e=!0):r instanceof Hk||r instanceof $w||r instanceof ny?yield{content:r,isTextSibling:!1}:r instanceof $w?yield{content:r,isTextSibling:!0}:(r&&(yield*rdt(r,e)),e=!1)}s(rdt,"contentChunks");function upr(t,e){let r;function n(i,o){if(tdt(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");bU(r.node,e)}s(upr,"removeLowestPriorityLegacy");var Jut=new WeakMap;function ndt(t){let e=Jut.get(t);if(e!==void 0)return e;let r=!1;return t instanceof ny?r=!0:t instanceof iy?r=t.children.some(n=>n instanceof ny):t instanceof gE&&(r=t.children.some(ndt)),Jut.set(t,r),r}s(ndt,"hasCachePoint");function dpr(t){if(t instanceof iy)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof iy)return!1;return!0}s(dpr,"shouldLookForCachePointInNode");function iSe(t,e){let r;if(t instanceof gE&&t.has(1)){upr(t,e);return}let n=dpr(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&ndt(l)&&(r=void 0,l instanceof ny))){if(l instanceof gE&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((f,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=Xut(r.value);let u=Xut(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new tie(t);tdt(r.value)||r.value instanceof gE&&r.value.has(2)||Ww(r.value)&&!r.value.children.length?bU(r.value,e):iSe(r.value,e)}s(iSe,"removeLowestPriorityChild");var tie=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof iy?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};Vd.BudgetExceededError=tie;function Xut(t){if(!Ww(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(Xut,"getLowestPriorityAmongChildren");function*idt(t){yield*t.metadata;for(let e of t.children)Ww(e)?yield*idt(e):yield*e.metadata}s(idt,"allMetadata");function odt(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(Ww(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(odt,"replaceNode");function*Zut(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,Ww(r)&&e.push(...r.children)}}s(Zut,"forEachNode");function fpr(t){let e=t;for(;e.parent;)e=e.parent;return e}s(fpr,"getRoot");function edt(t){return t instanceof gE&&t.keepWithId!==void 0}s(edt,"isKeepWith");var nSe=new Set;function ppr(t,e){let r=new Set;for(let n of Zut(t))edt(n)&&!nSe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)nSe.add(n);try{let n=fpr(t);for(let i of Zut(n))edt(i)&&r.has(i.keepWithId)?bU(i,e):i instanceof iy&&i.toolCalls&&(i.toolCalls=mpr(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&bU(i,e))}finally{for(let n of r)nSe.delete(n)}}s(ppr,"removeOtherKeepWiths");function oSe(t,e){if(e.id===t)return e;for(let r of e.children)if(Ww(r)){let n=oSe(t,r);if(n)return n}}s(oSe,"findNodeById");function bU(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),ppr(t,e),r.isEmpty?bU(r,e):r.onChunksChange())}s(bU,"removeNode");function sdt(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(sdt,"getEncodedBase64");function mpr(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(mpr,"filterIfDifferent")});var cdt=H(()=>{"use strict";d();function hpr(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(hpr,"_vscpp");function adt(){throw new Error("This should not be invoked!")}s(adt,"_vscppf");adt.isFragment=!0;globalThis.vscpp=hpr;globalThis.vscppf=adt});var cSe=H(rie=>{"use strict";d();Object.defineProperty(rie,"__esModule",{value:!0});rie.PromptElement=void 0;cdt();var aSe=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};rie.PromptElement=aSe});var ySe=H(ho=>{"use strict";d();Object.defineProperty(ho,"__esModule",{value:!0});ho.LogicalWrapper=ho.IfEmpty=ho.AbstractKeepWith=ho.TokenLimit=ho.Expandable=ho.Chunk=ho.LegacyPrioritization=ho.ToolResult=ho.PrioritizedList=ho.Image=ho.TextChunk=ho.ToolMessage=ho.AssistantMessage=ho.UserMessage=ho.SystemMessage=ho.BaseChatMessage=void 0;ho.isChatMessagePromptElement=gpr;ho.useKeepWith=vpr;var TU=$c(),rg=cSe();function gpr(t){return t instanceof nie||t instanceof iie||t instanceof oie}s(gpr,"isChatMessagePromptElement");var $k=class extends rg.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};ho.BaseChatMessage=$k;var nie=class extends $k{static{s(this,"SystemMessage")}constructor(e){e.role=TU.Raw.ChatRole.System,super(e)}};ho.SystemMessage=nie;var iie=class extends $k{static{s(this,"UserMessage")}constructor(e){e.role=TU.Raw.ChatRole.User,super(e)}};ho.UserMessage=iie;var oie=class extends $k{static{s(this,"AssistantMessage")}constructor(e){e.role=TU.Raw.ChatRole.Assistant,super(e)}};ho.AssistantMessage=oie;var Apr=/\s+/g,lSe=class extends $k{static{s(this,"ToolMessage")}constructor(e){e.role=TU.Raw.ChatRole.Tool,super(e)}};ho.ToolMessage=lSe;var sie=class extends rg.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?Apr:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await ypr(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};ho.TextChunk=sie;async function ypr(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:TU.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(ypr,"getTextContentBelowBudget");var uSe=class extends rg.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};ho.Image=uSe;var dSe=class extends rg.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(sie,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};ho.PrioritizedList=dSe;var fSe=class extends rg.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};ho.ToolResult=fSe;var pSe=class extends rg.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};ho.LegacyPrioritization=pSe;var mSe=class extends rg.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};ho.Chunk=mSe;var hSe=class extends rg.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};ho.Expandable=hSe;var gSe=class extends rg.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};ho.TokenLimit=gSe;var aie=class extends rg.PromptElement{static{s(this,"AbstractKeepWith")}};ho.AbstractKeepWith=aie;var Cpr=0;function vpr(){let t=Cpr++;return class extends aie{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(vpr,"useKeepWith");var ASe=class extends rg.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(IU,null,this.props.alt),vscpp(IU,{flexGrow:1},this.props.children))}};ho.IfEmpty=ASe;var IU=class extends rg.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};ho.LogicalWrapper=IU});var udt=H(wU=>{"use strict";d();Object.defineProperty(wU,"__esModule",{value:!0});wU.localize=xpr;wU.localize2=Epr;wU.getConfiguredDefaultLocale=bpr;function ldt(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(ldt,"_format");function xpr(t,e,...r){return ldt(e,r)}s(xpr,"localize");function Epr(t,e,...r){let n=ldt(e,r);return{original:n,value:n}}s(Epr,"localize2");function bpr(t){}s(bpr,"getConfiguredDefaultLocale")});var ESe=H(Gt=>{"use strict";d();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.isAndroid=Gt.isEdge=Gt.isSafari=Gt.isFirefox=Gt.isChrome=Gt.OS=Gt.setTimeout0=Gt.setTimeout0IsFaster=Gt.translationsConfigFile=Gt.platformLocale=Gt.locale=Gt.Language=Gt.language=Gt.userAgent=Gt.platform=Gt.isCI=Gt.isMobile=Gt.isIOS=Gt.webWorkerOrigin=Gt.isWebWorker=Gt.isWeb=Gt.isElectron=Gt.isNative=Gt.isLinuxSnap=Gt.isLinux=Gt.isMacintosh=Gt.isWindows=Gt.LANGUAGE_DEFAULT=void 0;Gt.PlatformToString=Tpr;Gt.isLittleEndian=wpr;Gt.isBigSurOrNewer=Spr;var ddt=udt();Gt.LANGUAGE_DEFAULT="en";var RU=!1,kU=!1,_U=!1,hdt=!1,gdt=!1,vSe=!1,Adt=!1,xSe=!1,ydt=!1,Cdt=!1,SU,cie=Gt.LANGUAGE_DEFAULT,CSe=Gt.LANGUAGE_DEFAULT,vdt,AE,yE=globalThis,cm;typeof yE.vscode<"u"&&typeof yE.vscode.process<"u"?cm=yE.vscode.process:typeof process<"u"&&(cm=process);var xdt=typeof cm?.versions?.electron=="string",Ipr=xdt&&cm?.type==="renderer";if(typeof cm=="object"){RU=cm.platform==="win32",kU=cm.platform==="darwin",_U=cm.platform==="linux",hdt=_U&&!!cm.env.SNAP&&!!cm.env.SNAP_REVISION,Adt=xdt,ydt=!!cm.env.CI||!!cm.env.BUILD_ARTIFACTSTAGINGDIRECTORY,SU=Gt.LANGUAGE_DEFAULT,cie=Gt.LANGUAGE_DEFAULT;let t=cm.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];SU=e.locale,CSe=e.osLocale,cie=r||Gt.LANGUAGE_DEFAULT,vdt=e._translationsConfigFile}catch{}gdt=!0}else typeof navigator=="object"&&!Ipr?(AE=navigator.userAgent,RU=AE.indexOf("Windows")>=0,kU=AE.indexOf("Macintosh")>=0,xSe=(AE.indexOf("Macintosh")>=0||AE.indexOf("iPad")>=0||AE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_U=AE.indexOf("Linux")>=0,Cdt=AE?.indexOf("Mobi")>=0,vSe=!0,SU=ddt.getConfiguredDefaultLocale(ddt.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Gt.LANGUAGE_DEFAULT,cie=SU,CSe=navigator.language):console.error("Unable to resolve platform.");function Tpr(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(Tpr,"PlatformToString");var lie=0;kU?lie=1:RU?lie=3:_U&&(lie=2);Gt.isWindows=RU;Gt.isMacintosh=kU;Gt.isLinux=_U;Gt.isLinuxSnap=hdt;Gt.isNative=gdt;Gt.isElectron=Adt;Gt.isWeb=vSe;Gt.isWebWorker=vSe&&typeof yE.importScripts=="function";Gt.webWorkerOrigin=Gt.isWebWorker?yE.origin:void 0;Gt.isIOS=xSe;Gt.isMobile=Cdt;Gt.isCI=ydt;Gt.platform=lie;Gt.userAgent=AE;Gt.language=cie;var fdt;(function(t){function e(){return Gt.language}s(e,"value"),t.value=e;function r(){return Gt.language.length===2?Gt.language==="en":Gt.language.length>=3?Gt.language[0]==="e"&&Gt.language[1]==="n"&&Gt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Gt.language==="en"}s(n,"isDefault"),t.isDefault=n})(fdt||(Gt.Language=fdt={}));Gt.locale=SU;Gt.platformLocale=CSe;Gt.translationsConfigFile=vdt;Gt.setTimeout0IsFaster=typeof yE.postMessage=="function"&&!yE.importScripts;Gt.setTimeout0=(()=>{if(Gt.setTimeout0IsFaster){let t=[];yE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),yE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Gt.OS=kU||xSe?2:RU?1:3;var pdt=!0,mdt=!1;function wpr(){if(!mdt){mdt=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,pdt=new Uint16Array(t.buffer)[0]===513}return pdt}s(wpr,"isLittleEndian");Gt.isChrome=!!(Gt.userAgent&&Gt.userAgent.indexOf("Chrome")>=0);Gt.isFirefox=!!(Gt.userAgent&&Gt.userAgent.indexOf("Firefox")>=0);Gt.isSafari=!!(!Gt.isChrome&&Gt.userAgent&&Gt.userAgent.indexOf("Safari")>=0);Gt.isEdge=!!(Gt.userAgent&&Gt.userAgent.indexOf("Edg/")>=0);Gt.isAndroid=!!(Gt.userAgent&&Gt.userAgent.indexOf("Android")>=0);function Spr(t){return parseFloat(t)>=20}s(Spr,"isBigSurOrNewer")});var bdt=H(R1=>{"use strict";d();Object.defineProperty(R1,"__esModule",{value:!0});R1.arch=R1.platform=R1.env=R1.cwd=void 0;var Edt=ESe(),Wk,bSe=globalThis.vscode;if(typeof bSe<"u"&&typeof bSe.process<"u"){let t=bSe.process;Wk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?Wk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Wk={get platform(){return Edt.isWindows?"win32":Edt.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};R1.cwd=Wk.cwd;R1.env=Wk.env;R1.platform=Wk.platform;R1.arch=Wk.arch});var Tdt=H(vr=>{"use strict";d();Object.defineProperty(vr,"__esModule",{value:!0});vr.delimiter=vr.sep=vr.toNamespacedPath=vr.parse=vr.format=vr.extname=vr.basename=vr.dirname=vr.relative=vr.resolve=vr.join=vr.isAbsolute=vr.normalize=vr.posix=vr.win32=void 0;var m8=bdt(),_pr=65,Rpr=97,kpr=90,Ppr=122,Vw=46,vu=47,W0=92,jw=58,Dpr=63,uie=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Bpr(t,e){if(t===null||typeof t!="object")throw new uie(e,"Object",t)}s(Bpr,"validateObject");function gc(t,e){if(typeof t!="string")throw new uie(e,"string",t)}s(gc,"validateString");var j0=m8.platform==="win32";function Ti(t){return t===vu||t===W0}s(Ti,"isPathSeparator");function ISe(t){return t===vu}s(ISe,"isPosixPathSeparator");function Gw(t){return t>=_pr&&t<=kpr||t>=Rpr&&t<=Ppr}s(Gw,"isWindowsDeviceRoot");function die(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=vu}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Vw||i.charCodeAt(i.length-2)!==Vw){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===Vw&&c!==-1?++c:c=-1}return i}s(die,"normalizeString");function Idt(t,e){Bpr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(Idt,"_format");vr.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],gc(o,"path"),o.length===0)continue}else e.length===0?o=m8.cwd():(o=m8.env[`=${e}`]||m8.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===W0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ti(f)&&(c=1,u=!0);else if(Ti(f))if(u=!0,Ti(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ti(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ti(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ti(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else Gw(f)&&o.charCodeAt(1)===jw&&(l=o.slice(0,2),c=2,a>2&&Ti(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=die(r,!n,"\\",Ti),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){gc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return ISe(o)?"\\":t;if(Ti(o))if(i=!0,Ti(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ti(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else Gw(o)&&t.charCodeAt(1)===jw&&(n=t.slice(0,2),r=2,e>2&&Ti(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?die(t.slice(r),!i,"\\",Ti):"";return a.length===0&&!i&&(a="."),a.length>0&&Ti(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){gc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ti(r)||e>2&&Gw(r)&&t.charCodeAt(1)===jw&&Ti(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];gc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ti(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ti(r.charCodeAt(1))&&(++i,o>2&&(Ti(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ti(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return vr.win32.normalize(e)},relative(t,e){if(gc(t,"from"),gc(e,"to"),t===e)return"";let r=vr.win32.resolve(t),n=vr.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===W0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===W0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===W0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===W0;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===W0&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===W0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===W0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===W0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===W0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=vr.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===W0){if(e.charCodeAt(1)===W0){let r=e.charCodeAt(2);if(r!==Dpr&&r!==Vw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Gw(e.charCodeAt(0))&&e.charCodeAt(1)===jw&&e.charCodeAt(2)===W0)return`\\\\?\\${e}`;return t},dirname(t){gc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ti(i)?t:".";if(Ti(i)){if(r=n=1,Ti(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ti(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ti(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else Gw(i)&&t.charCodeAt(1)===jw&&(r=e>2&&Ti(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ti(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&gc(e,"ext"),gc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Gw(t.charCodeAt(0))&&t.charCodeAt(1)===jw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ti(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ti(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){gc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===jw&&Gw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ti(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===Vw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:Idt.bind(null,"\\"),parse(t){gc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ti(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ti(i)){if(n=1,Ti(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ti(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ti(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ti(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(Gw(i)&&t.charCodeAt(1)===jw){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ti(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ti(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===Vw?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var Npr=(()=>{if(j0){let t=/\\/g;return()=>{let e=m8.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>m8.cwd()})();vr.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:Npr();gc(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===vu)}return e=die(e,!r,"/",ISe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(gc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===vu,r=t.charCodeAt(t.length-1)===vu;return t=die(t,!e,"/",ISe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return gc(t,"path"),t.length>0&&t.charCodeAt(0)===vu},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];gc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":vr.posix.normalize(e)},relative(t,e){if(gc(t,"from"),gc(e,"to"),t===e||(t=vr.posix.resolve(t),e=vr.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===vu&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===vu)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===vu?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===vu)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(gc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===vu,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===vu){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&gc(e,"ext"),gc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===vu){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===vu){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){gc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===vu){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===Vw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Idt.bind(null,"/"),parse(t){gc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===vu,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===vu){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===Vw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};vr.posix.win32=vr.win32.win32=vr.win32;vr.posix.posix=vr.win32.posix=vr.posix;vr.normalize=j0?vr.win32.normalize:vr.posix.normalize;vr.isAbsolute=j0?vr.win32.isAbsolute:vr.posix.isAbsolute;vr.join=j0?vr.win32.join:vr.posix.join;vr.resolve=j0?vr.win32.resolve:vr.posix.resolve;vr.relative=j0?vr.win32.relative:vr.posix.relative;vr.dirname=j0?vr.win32.dirname:vr.posix.dirname;vr.basename=j0?vr.win32.basename:vr.posix.basename;vr.extname=j0?vr.win32.extname:vr.posix.extname;vr.format=j0?vr.win32.format:vr.posix.format;vr.parse=j0?vr.win32.parse:vr.posix.parse;vr.toNamespacedPath=j0?vr.win32.toNamespacedPath:vr.posix.toNamespacedPath;vr.sep=j0?vr.win32.sep:vr.posix.sep;vr.delimiter=j0?vr.win32.delimiter:vr.posix.delimiter});var Ddt=H(h8=>{"use strict";d();Object.defineProperty(h8,"__esModule",{value:!0});h8.URI=void 0;h8.isUriComponents=Hpr;h8.uriToFsPath=hie;var wdt=Tdt(),pie=ESe(),Mpr=/^\w[\w\d+.-]*$/,Lpr=/^\//,Fpr=/^\/\//;function Opr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Mpr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Lpr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Fpr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Opr,"_validateUri");function Qpr(t,e){return!t&&!e?"file":t}s(Qpr,"_schemeFix");function Upr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==oy&&(e=oy+e):e=oy;break}return e}s(Upr,"_referenceResolution");var Rs="",oy="/",qpr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,mie=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Rs,this.authority=e.authority||Rs,this.path=e.path||Rs,this.query=e.query||Rs,this.fragment=e.fragment||Rs):(this.scheme=Qpr(e,a),this.authority=r||Rs,this.path=Upr(this.scheme,n||Rs),this.query=i||Rs,this.fragment=o||Rs,Opr(this,a))}get fsPath(){return hie(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Rs),n===void 0?n=this.authority:n===null&&(n=Rs),i===void 0?i=this.path:i===null&&(i=Rs),o===void 0?o=this.query:o===null&&(o=Rs),a===void 0?a=this.fragment:a===null&&(a=Rs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new zw(r,n,i,o,a)}static parse(e,r=!1){let n=qpr.exec(e);return n?new zw(n[2]||Rs,fie(n[4]||Rs),fie(n[5]||Rs),fie(n[7]||Rs),fie(n[9]||Rs),r):new zw(Rs,Rs,Rs,Rs,Rs)}static file(e){let r=Rs;if(pie.isWindows&&(e=e.replace(/\\/g,oy)),e[0]===oy&&e[1]===oy){let n=e.indexOf(oy,2);n===-1?(r=e.substring(2),e=oy):(r=e.substring(2,n),e=e.substring(n)||oy)}return new zw("file",r,e,Rs,Rs)}static from(e,r){return new zw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return pie.isWindows&&e.scheme==="file"?n=t.file(wdt.win32.join(hie(e,!0),...r)).path:n=wdt.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return TSe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new zw(e);return r._formatted=e.external??null,r._fsPath=e._sep===Rdt?e.fsPath??null:null,r}}else return e}};h8.URI=mie;function Hpr(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Hpr,"isUriComponents");var Rdt=pie.isWindows?1:void 0,zw=class extends mie{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=hie(this,!1)),this._fsPath}toString(e=!1){return e?TSe(this,!0):(this._formatted||(this._formatted=TSe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Rdt),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},kdt={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Sdt(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=kdt[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(Sdt,"encodeURIComponentFast");function $pr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=kdt[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s($pr,"encodeURIComponentMinimal");function hie(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,pie.isWindows&&(r=r.replace(/\//g,"\\")),r}s(hie,"uriToFsPath");function TSe(t,e){let r=e?$pr:Sdt,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=oy,n+=oy),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:Sdt(l,!1,!1)),n}s(TSe,"_asFormatted");function Pdt(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Pdt(t.substr(3)):t}}s(Pdt,"decodeURIComponentGraceful");var _dt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fie(t){return t.match(_dt)?t.replace(_dt,e=>Pdt(e)):t}s(fie,"percentDecode")});var _Se=H(Kw=>{"use strict";d();Object.defineProperty(Kw,"__esModule",{value:!0});Kw.PromptReference=Kw.ChatResponseReferencePartStatusKind=Kw.PromptMetadata=void 0;var PU=Ddt(),wSe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};Kw.PromptMetadata=wSe;var Bdt;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(Bdt||(Kw.ChatResponseReferencePartStatusKind=Bdt={}));var SSe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?PU.URI.from(n):{uri:PU.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?PU.URI.from(e.iconPath):"light"in e.iconPath?{light:PU.URI.from(e.iconPath.light),dark:PU.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};Kw.PromptReference=SSe});var FSe=H(A8=>{"use strict";d();Object.defineProperty(A8,"__esModule",{value:!0});A8.PromptRenderer=A8.MetadataMap=void 0;var Wpr=tSe(),DU=sSe(),g8=qw(),Wc=ySe(),LSe=_Se(),Ndt;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(Ndt||(A8.MetadataMap=Ndt={}));var kSe=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new Aie(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=Odt(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let f=this.createElement(u),p;f instanceof Wc.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(f);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:f,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let f=l+1;f<a.length;f++)for(let{element:p}of a[f]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let f=c(l),p=0;for(let{element:y}of u)p+=y.props.flexBasis??1;let m=0,h=u.map(y=>{if(y.tokenLimit===void 0)return!1;let E=y.element.props.flexBasis??1,b=E/p;return Math.floor(e.remainingTokenBudget*b)<y.tokenLimit?!1:(p-=E,m+=y.tokenLimit,!0)}),g=u.map((y,E)=>{let b=(y.element.props.flexBasis??1)/p;return{tokenBudget:h[E]?y.tokenLimit:Math.floor((e.remainingTokenBudget-m)*b),endpoint:e.endpoint,countTokens:s((S,R)=>this._tokenizer.tokenLength(typeof S=="string"?{type:g8.Raw.ChatCompletionContentPartKind.Text,text:S}:S,R),"countTokens")}});e.consume(-f),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:f,elements:u.map((y,E)=>({id:y.element.node.id,tokenBudget:g[E].tokenBudget}))}),await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let S=await Ldt(y,()=>E.prepare?.(g[b],n,i));y.node.setState(S)}));let A=await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let S=g[b];return await Ldt(y,()=>E.render(y.node.getState(),S,n,i))}));for(let[y,{element:E,promptElementInstance:b}]of u.entries()){let S=g[y],R=A[y];if(!R)continue;let B=await this._processPromptRenderPiece(new jk(S.tokenBudget,this._endpoint),E,b,R,n,i);b instanceof Wc.Expandable&&this._growables.push({initialConsume:B,elem:E.node}),e.consume(B)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=Fdt(i),l=new jk(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await jpr(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new jk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,g8.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new jk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,f=l.map(m=>{if(!(m instanceof k1))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(yie),p=i.map(m=>{if(!(m instanceof k1)||l.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(yie);return{metadata:{get:s(m=>l.find(h=>h instanceof m),"get"),getAll:s(m=>l.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:f,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let f=await u.tokenCount(this._tokenizer);if(f<l.limit&&!await this._grow(u,f,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Wc.Expandable))throw new Error("unreachable: expected growable");let c=new Aie(null,0,o.elem.id),l=new jk(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:g8.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),f=c.materialize();if(!e.replaceNode(o.elem.id,f))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===Wc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},gie(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new k1(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new k1(l));else this._handleIntrinsic(e,c.name,c.props,gie(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};A8.PromptRenderer=kSe;async function jpr(t,e,r,n){let i=0;if((0,Wc.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,g8.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:g8.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(jpr,"computeTokensConsumedByLiterals");function Fdt(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new BSe(String(t))):Gpr(t)?gie(t.children,e):Vpr(t)?gie(t,e):typeof t.ctor=="string"?e.push(new PSe(t.ctor,t.props,t.children)):e.push(new DSe(t.ctor,t.props,t.children)),e)}s(Fdt,"flattenAndReduce");function gie(t,e=[]){for(let r of t)Fdt(r,e);return e}s(gie,"flattenAndReduceArr");var PSe=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},DSe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},BSe=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},jk=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},Aie=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new k1(LSe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return BU.fromJSON(i,a,o);default:}}).filter(yie),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new Wc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,Wc.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new Wc.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new Wc.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Wc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Wc.Chunk&&(this._objFlags|=2),this._obj instanceof Wc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new BU(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new BU(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(yie),props:{},references:this._metadata.filter(r=>r instanceof k1).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=RSe(this._obj.props,Wpr.jsonRetainedProps)),this._obj instanceof Wc.BaseChatMessage)e.ctor=1,Object.assign(e.props,RSe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Wc.Image)return{...e,ctor:3,props:{...e.props,...RSe(this._obj.props,["src","detail"])}};this._obj instanceof Wc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Wc.Image)return new DU.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Wc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new DU.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Wc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Wc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new DU.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Wc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Wc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new NSe({type:g8.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},NSe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new DU.MaterializedChatMessageBreakpoint(e,this.part)}},BU=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new k1(LSe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new DU.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof k1).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Gpr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Gpr,"isFragmentCtor");function yie(t){return t!==void 0}s(yie,"isDefined");var MSe=class extends LSe.PromptMetadata{static{s(this,"InternalMetadata")}},k1=class extends MSe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function Vpr(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(Vpr,"isIterable");function RSe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(RSe,"pickProps");function Odt(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(Odt,"atPath");var Mdt=new WeakSet;async function Ldt(t,e){try{return await e()}catch(r){throw r instanceof Error&&!Mdt.has(r)&&r.constructor.name!=="CancellationError"&&(Mdt.add(r),r.message+=` (at tsx element ${Odt(t.path)})`),r}}s(Ldt,"annotateError")});var Qdt=H(Cie=>{"use strict";d();Object.defineProperty(Cie,"__esModule",{value:!0});Cie.VSCodeTokenizer=void 0;var OSe=qw(),QSe=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=OSe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==OSe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===OSe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};Cie.VSCodeTokenizer=QSe});var Udt=H(y8=>{"use strict";d();Object.defineProperty(y8,"__esModule",{value:!0});y8.tracerCss=y8.tracerSrc=void 0;y8.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';y8.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var jdt=H(xie=>{"use strict";d();Object.defineProperty(xie,"__esModule",{value:!0});xie.HTMLTracer=void 0;var qdt=Udt(),Gk=sSe(),zpr=qw(),USe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return qSe.create({epochs:this.epochs,traceData:$dt(this.traceData)})}serveRouter(e){return new vie({baseAddress:e,epochs:this.epochs,traceData:$dt(this.traceData)})}};xie.HTMLTracer=USe;var vie=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${qdt.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Hdt(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${qdt.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Hdt(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},qSe=class t extends vie{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Hdt(t,e){return{container:await Wdt(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Hdt,"serializeRenderData");async function Wdt(t,e,r){let n={metadata:e.metadata.map(Ypr),priority:e.priority};if(e instanceof Gk.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof Gk.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof Gk.MaterializedChatMessageOpaque||e instanceof Gk.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>Wdt(t,o,r||e instanceof Gk.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof Gk.GenericMaterializedContainer)return{...i,type:0};if(e instanceof Gk.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:zpr.Raw.ChatRole.display(e.role),text:o}}}Kpr(e)}s(Wdt,"serializeMaterialized");function Kpr(t){throw new Error("unreachable")}s(Kpr,"assertNever");function Ypr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(Ypr,"serializeMetadata");var $dt=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var Vdt=H(Gdt=>{"use strict";d();Object.defineProperty(Gdt,"__esModule",{value:!0})});var Kdt=H(zdt=>{"use strict";d();Object.defineProperty(zdt,"__esModule",{value:!0})});var Jdt=H(Ydt=>{"use strict";d();Object.defineProperty(Ydt,"__esModule",{value:!0})});var $c=H(ma=>{"use strict";d();var Jpr=ma&&ma.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vk=ma&&ma.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jpr(e,t,r)};Object.defineProperty(ma,"__esModule",{value:!0});ma.contentType=ma.PromptRenderer=ma.MetadataMap=ma.PromptElement=ma.JSONTree=void 0;ma.renderPrompt=emr;ma.renderElementJSON=tmr;var HSe=qw(),Xdt=FSe(),Xpr=Qdt();Vk(jdt(),ma);ma.JSONTree=tSe();Vk(qw(),ma);Vk(ySe(),ma);Vk(_Se(),ma);Vk(Vdt(),ma);Vk(Kdt(),ma);Vk(Jdt(),ma);var Zpr=cSe();Object.defineProperty(ma,"PromptElement",{enumerable:!0,get:s(function(){return Zpr.PromptElement},"get")});var Zdt=FSe();Object.defineProperty(ma,"MetadataMap",{enumerable:!0,get:s(function(){return Zdt.MetadataMap},"get")});Object.defineProperty(ma,"PromptRenderer",{enumerable:!0,get:s(function(){return Zdt.PromptRenderer},"get")});async function emr(t,e,r,n,i,o,a=HSe.OutputMode.VSCode){let c="countTokens"in n?new Xpr.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,l=new Xdt.PromptRenderer(r,t,e,c),u=await l.render(i,o),f=l.getUsedContext();return{...u,usedContext:f}}s(emr,"renderPrompt");ma.contentType="application/vnd.codechat.prompt+json.1";function tmr(t,e,r,n){return new Xdt.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:HSe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===HSe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(tmr,"renderElementJSON")});var pm=H(Eq=>{"use strict";d();Object.defineProperty(Eq,"__esModule",{value:!0});Eq.dedent=void 0;function kpt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(f){var p,m;return(m=(p=f.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),f=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(m,h){return h===0?m:""+f+m}).join(`
`)),a+=p+n[l+1]}),a}s(kpt,"dedent");Eq.dedent=kpt;Eq.default=kpt});var Opt=H(P2e=>{"use strict";d();Object.defineProperty(P2e,"__esModule",{value:!0});P2e.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var Wpt=H(B2e=>{"use strict";d();Object.defineProperty(B2e,"__esModule",{value:!0});var Qpt=require("worker_threads"),Vgr=require("v8"),zgr=require("os"),Upt=Opt(),pse="ready",qpt="spawning",Kgr="busy",mse="off",Hpt=zgr.cpus().length,$pt=process.version.replace("v","").split("."),Ygr=parseInt($pt[0]),Jgr=parseInt($pt[1]),D2e=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=Hpt,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new Qpt.Worker(Upt.workerFile,{eval:!0});e.status=qpt,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=pse,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=mse,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===mse).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===pse){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=Kgr;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}l+=`let ${m} = ${h}
`}let u=Vgr.serialize(o.data),f=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${f}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,c(h)}),n.once("error",m=>{e.status=mse,c(m),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=pse,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:Hpt,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new Qpt.Worker(Upt.workerFile,{eval:!0});this.workers.push({status:qpt,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=pse,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=mse,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(Ygr>=12&&Jgr>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};B2e.default=new D2e});var hse=H(hP=>{"use strict";d();var Xgr=hP&&hP.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hP,"__esModule",{value:!0});var bq=Xgr(Wpt()),Zgr=`job needs a function.
Try with:
> job(() => {...}, config)`,eAr=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function tAr(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(Zgr));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(eAr));bq.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(tAr,"job");hP.job=tAr;hP.stop=bq.default.teardown.bind(bq.default);hP.start=bq.default.setup.bind(bq.default)});var amt=H(gP=>{"use strict";d();var j1=gP&&gP.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},$2e=gP&&gP.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},DE,gS;Object.defineProperty(gP,"__esModule",{value:!0});var W2e=class{static{s(this,"AwaitLock")}constructor(){DE.set(this,!1),gS.set(this,new Set)}get acquired(){return j1(this,DE,"f")}acquireAsync({timeout:e}={}){if(!j1(this,DE,"f"))return $2e(this,DE,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{j1(this,gS,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),j1(this,gS,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{j1(this,gS,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return j1(this,DE,"f")?!1:($2e(this,DE,!0,"f"),!0)}release(){if(!j1(this,DE,"f"))throw new Error("Cannot release an unacquired lock");if(j1(this,gS,"f").size>0){let[e]=j1(this,gS,"f");j1(this,gS,"f").delete(e),e()}else $2e(this,DE,!1,"f")}};gP.default=W2e;DE=new WeakMap,gS=new WeakMap});var wke=H((J1o,DAt)=>{d();var Yq=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ebr=typeof AbortController=="function",rce=ebr?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new RAt}abort(){this.signal.dispatchEvent("abort")}},tbr=typeof AbortSignal=="function",rbr=typeof rce.AbortSignal=="function",RAt=tbr?AbortSignal:rbr?rce.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},Ike=new Set,xke=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;nce(r)&&Tke(r,`${t} option`,`options.${e}`,TM)},"deprecatedOption"),Eke=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(nce(r)){let{prototype:n}=TM,{get:i}=Object.getOwnPropertyDescriptor(n,t);Tke(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),nbr=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(nce(r)){let{prototype:n}=TM,{get:i}=Object.getOwnPropertyDescriptor(n,t);Tke(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),kAt=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),nce=s(t=>!Ike.has(t),"shouldWarn"),Tke=s((t,e,r,n)=>{Ike.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;kAt(i,"DeprecationWarning",t,n)},"warn"),_P=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),PAt=s(t=>_P(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?IM:null:null,"getUintArray"),IM=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},bke=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=PAt(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},TM=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:f,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:A,fetchContext:y,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:b}=e,{length:S,maxAge:R,stale:B}=e instanceof t?{}:e;if(r!==0&&!_P(r))throw new TypeError("max option must be a nonnegative integer");let L=r?PAt(r):Array;if(!L)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||S,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=A||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=y,!this.fetchMethod&&y!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new L(r),this.prev=new L(r),this.head=0,this.tail=0,this.free=new bke(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof f=="function"?(this.disposeAfter=f,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!E,this.maxSize!==0){if(!_P(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!B,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=_P(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||R||0,this.ttl){if(!_P(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let O="LRU_CACHE_UNBOUNDED";nce(O)&&(Ike.add(O),kAt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}B&&xke("stale","allowStale"),R&&xke("maxAge","ttl"),S&&xke("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new IM(this.max),this.starts=new IM(this.max),this.setItemTTL=(n,i,o=Yq.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?Yq.now():0};let e=0,r=s(()=>{let n=Yq.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new IM(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!_P(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!_P(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return Eke("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=Yq.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Yq.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let f=this.valList[u];r!==f&&(this.isBackgroundFetch(f)?f.__abortController.abort():o||(this.dispose(f,e,"set"),this.disposeAfter&&this.disposed.push([f,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new rce,c={signal:a.signal,options:n,context:i},l=s(m=>(a.signal.aborted||this.set(e,m,c.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),f=s(m=>m(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(f).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f},g=this.keyMap.get(e);if(g===void 0){let A=this.backgroundFetch(e,g,h,p);return A.__returned=A}else{let A=this.valList[g];if(this.isBackgroundFetch(A))return r&&A.__staleWhileFetching!==void 0?A.__staleWhileFetching:A.__returned=A;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),A;let y=this.backgroundFetch(e,g,h,p);return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Eke("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Eke("reset","clear"),this.clear}get length(){return nbr("length","size"),this.size}static get AbortController(){return rce}static get AbortSignal(){return RAt}};DAt.exports=TM});var Rke=H((evo,BAt)=>{"use strict";d();var Jq=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},Ske=class extends Jq{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},_ke=class extends Jq{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};BAt.exports={FetchBaseError:Jq,FetchError:Ske,AbortError:_ke}});var QE=H((nvo,MAt)=>{"use strict";d();var{constants:{MAX_LENGTH:ibr}}=require("buffer"),{pipeline:ice,PassThrough:obr}=require("stream"),{promisify:sbr}=require("util"),{createGunzip:abr,createInflate:cbr,createBrotliDecompress:lbr,constants:{Z_SYNC_FLUSH:NAt}}=require("zlib"),ubr=SC()("helix-fetch:utils"),dbr=sbr(ice),fbr=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),pbr=s((t,e,r,n)=>{if(!fbr(t,e))return r;let i=s(o=>{o&&(ubr(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return ice(r,abr({flush:NAt,finishFlush:NAt}),i);case"deflate":case"x-deflate":return ice(r,cbr(),i);case"br":return ice(r,lbr(),i);default:return r}},"decodeStream"),mbr=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),oce=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?hbr(t,e):gbr(t,e);default:return 0}},"calcSize"),hbr=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:oce(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),gbr=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=oce(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=oce(t[i],e)}),r},"calcObjectSize"),Abr=s(t=>oce(t,new WeakSet),"sizeof"),ybr=s(async t=>{let e=new obr,r=0,n=[];return e.on("data",i=>{if(r+i.length>ibr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await dbr(t,e),Buffer.concat(n,r)},"streamToBuffer");MAt.exports={decodeStream:pbr,isPlainObject:mbr,sizeof:Abr,streamToBuffer:ybr}});var ace=H((svo,QAt)=>{"use strict";d();var{PassThrough:LAt,Readable:UE}=require("stream"),{types:{isAnyArrayBuffer:OAt}}=require("util"),{FetchError:Cbr,FetchBaseError:vbr}=Rke(),{streamToBuffer:xbr}=QE(),Ebr=Buffer.alloc(0),pg=Symbol("Body internals"),bbr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),FAt=s(async t=>{if(t[pg].disturbed)throw new TypeError("Already read");if(t[pg].error)throw new TypeError(`Stream had error: ${t[pg].error.message}`);t[pg].disturbed=!0;let{stream:e}=t[pg];return e===null?Ebr:xbr(e)},"consume"),sce=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=UE.from(e.toString()):e instanceof UE?r=e:Buffer.isBuffer(e)?r=UE.from(e):OAt(e)?r=UE.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=UE.from(e):r=UE.from(String(e)),this[pg]={stream:r,disturbed:!1,error:null},e instanceof UE&&r.on("error",n=>{let i=n instanceof vbr?n:new Cbr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[pg].error=i})}get body(){return this[pg].stream}get bodyUsed(){return this[pg].disturbed}async buffer(){return FAt(this)}async arrayBuffer(){return bbr(await this.buffer())}async text(){return(await FAt(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(sce.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Ibr=s(t=>{if(t[pg].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[pg],r=e;if(e instanceof UE){r=new LAt;let n=new LAt;e.pipe(r),e.pipe(n),t[pg].stream=n}return r},"cloneStream"),Tbr=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||OAt(t)||t instanceof UE?null:"text/plain; charset=utf-8","guessContentType");QAt.exports={Body:sce,cloneStream:Ibr,guessContentType:Tbr}});var wM=H((lvo,$At)=>{"use strict";d();var{validateHeaderName:UAt,validateHeaderValue:qAt}=require("http"),{isPlainObject:wbr}=QE(),qE=Symbol("Headers internals"),Xq=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof UAt=="function")UAt(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),HAt=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof qAt=="function")qAt(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),cce=class t{static{s(this,"Headers")}constructor(e={}){if(this[qE]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(wbr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[qE].map.set(Xq(e),HAt(r,e))}has(e){return this[qE].map.has(Xq(e))}get(e){let r=this[qE].map.get(Xq(e));return r===void 0?null:r}append(e,r){let n=Xq(e),i=HAt(r,e),o=this[qE].map.get(n);this[qE].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[qE].map.delete(Xq(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[qE].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[qE].map)}};Object.defineProperties(cce.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));$At.exports={Headers:cce}});var kke=H((fvo,WAt)=>{"use strict";d();var{EventEmitter:Sbr}=require("events"),vy=Symbol("AbortSignal internals"),SM=class{static{s(this,"AbortSignal")}constructor(){this[vy]={eventEmitter:new Sbr,onabort:null,aborted:!1}}get aborted(){return this[vy].aborted}get onabort(){return this[vy].onabort}set onabort(e){this[vy].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[vy].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[vy].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[vy][n]=="function"&&this[n](r),this[vy].eventEmitter.emit(e,r)}fire(){this[vy].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(SM.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var uce=class extends SM{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[vy].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[vy].timerId)}};Object.defineProperties(uce.prototype,{clear:{enumerable:!0}});var lce=Symbol("AbortController internals"),dce=class{static{s(this,"AbortController")}constructor(){this[lce]={signal:new SM}}get signal(){return this[lce].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[lce].signal.aborted||this[lce].signal.fire()}};Object.defineProperties(dce.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});WAt.exports={AbortController:dce,AbortSignal:SM,TimeoutSignal:uce}});var Zq=H((hvo,VAt)=>{"use strict";d();var{randomBytes:_br}=require("crypto"),{Readable:Rbr}=require("stream"),Dke=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),kbr=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),jAt=s(t=>`--${t}--\r
\r
`,"getFooter"),GAt=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,Dke(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*Pbr(t,e){for(let[r,n]of t)yield GAt(e,r,n),Dke(n)?yield*n.stream():yield n,yield`\r
`;yield jAt(e)}s(Pbr,"formDataIterator");var Dbr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(GAt(e,n,i)),r+=Dke(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(jAt(e)),r},"getFormDataLength"),Pke=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=_br(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=Dbr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Rbr.from(Pbr(this.fd,this.boundary))}};VAt.exports={isFormData:kbr,FormDataSerializer:Pke}});var KAt=H((Cvo,zAt)=>{"use strict";d();var{AbortSignal:yvo}=kke(),{Body:Bbr,cloneStream:Nbr,guessContentType:Mbr}=ace(),{Headers:Lbr}=wM(),{isPlainObject:Fbr}=QE(),{isFormData:Obr,FormDataSerializer:Qbr}=Zq(),Ubr=20,SS=Symbol("Request internals"),fce=class t extends Bbr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?Nbr(n):null),c=new Lbr(r.headers||n&&n.headers||{});if(Obr(a)&&!c.has("content-type")){let p=new Qbr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if(Fbr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=Mbr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let f=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(f))throw new TypeError(`'${f}' is not a valid cache option`);this[SS]={init:{...r},method:o,redirect:u,cache:f,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=Ubr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[SS].method}get url(){return this[SS].parsedURL.toString()}get headers(){return this[SS].headers}get redirect(){return this[SS].redirect}get cache(){return this[SS].cache}get signal(){return this[SS].signal}clone(){return new t(this)}get init(){return this[SS].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(fce.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});zAt.exports={Request:fce}});var Bke=H((Evo,YAt)=>{"use strict";d();var{Body:qbr,cloneStream:Hbr,guessContentType:$br}=ace(),{Headers:Wbr}=wM(),{isPlainObject:jbr}=QE(),{isFormData:Gbr,FormDataSerializer:Vbr}=Zq(),xy=Symbol("Response internals"),pce=class t extends qbr{static{s(this,"Response")}constructor(e=null,r={}){let n=new Wbr(r.headers),i=e;if(Gbr(i)&&!n.has("content-type")){let o=new Vbr(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(jbr(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=$br(i);o&&n.set("content-type",o)}super(i),this[xy]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[xy].url||""}get status(){return this[xy].status}get statusText(){return this[xy].statusText}get ok(){return this[xy].status>=200&&this[xy].status<300}get redirected(){return this[xy].counter>0}get headers(){return this[xy].headers}get httpVersion(){return this[xy].httpVersion}get decoded(){return this[xy].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(Hbr(this),{...this[xy]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(pce.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});YAt.exports={Response:pce}});var XAt=H((wvo,JAt)=>{"use strict";d();var zbr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Kbr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Ybr=new Set([500,502,503,504]),Jbr={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Xbr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function RP(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(RP,"toNumberOrZero");function Zbr(t){return t?Ybr.has(t.status):!0}s(Zbr,"isErrorResponse");function Nke(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(Nke,"parseCacheControl");function eIr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(eIr,"formatCacheControl");JAt.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=Nke(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=Nke(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":eIr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Kbr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||zbr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=Nke(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Jbr[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return RP(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return RP(this._rescc["s-maxage"])}if(this._rescc["max-age"])return RP(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+RP(this._rescc["stale-if-error"]),n=e+RP(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+RP(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+RP(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Zbr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!Xbr[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var ryt=H((Rvo,tyt)=>{"use strict";d();var tIr=XAt(),{Headers:rIr}=wM(),ZAt=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),eyt=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),Mke=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new tIr(ZAt(e),eyt(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(ZAt(e))}responseHeaders(e){return new rIr(this.policy.responseHeaders(eyt(e)))}timeToLive(){return this.policy.timeToLive()}};tyt.exports=Mke});var oyt=H((Dvo,iyt)=>{"use strict";d();var{Readable:nIr}=require("stream"),{Headers:nyt}=wM(),{Response:iIr}=Bke(),_S=Symbol("CacheableResponse internals"),oIr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Lke=class t extends iIr{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new nyt(r.headers);this[_S]={headers:n,bufferedBody:e}}get headers(){return this[_S].headers}set headers(e){if(e instanceof nyt)this[_S].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return nIr.from(this[_S].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[_S].bufferedBody}async arrayBuffer(){return oIr(this[_S].bufferedBody)}async text(){return this[_S].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[_S].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},sIr=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new Lke(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");iyt.exports={cacheableResponse:sIr}});var mce=H((Mvo,syt)=>{"use strict";d();var Fke=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};syt.exports={RequestAbortedError:Fke}});var dyt=H((Ovo,uyt)=>{"use strict";d();var cyt=require("http"),lyt=require("https"),{Readable:aIr}=require("stream"),HE=SC()("helix-fetch:h1"),{RequestAbortedError:ayt}=mce(),{decodeStream:cIr}=QE(),lIr=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new lyt.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new cyt.Agent(n),r.httpAgent):void 0},"getAgent"),uIr=s(t=>{t.h1={}},"setupContext"),dIr=s(async({h1:t})=>{t.httpAgent&&(HE("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(HE("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),fIr=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?cIr(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),pIr=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?lyt:cyt,i=lIr(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(f,p)=>{HE(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{HE(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{HE(`${o.method} ${e.href}`);let f,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(HE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new ayt),f&&f.abort()},"onAbortSignal");if(p){if(p.aborted){u(new ayt);return}p.addEventListener("abort",m)}f=n(e,o),f.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(HE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(fIr(h,o.decode,u))}),f.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(HE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),f.aborted||(HE(`${o.method} ${e.href} failed with: ${h.message}`),f.abort(),u(h))}),c instanceof aIr?c.pipe(f):(c&&f.write(c),f.end())})},"h1Request");uyt.exports={request:pIr,setupContext:uIr,resetContext:dIr}});var hyt=H((qvo,myt)=>{"use strict";d();var{connect:mIr,constants:hIr}=require("http2"),{Readable:gIr}=require("stream"),ga=SC()("helix-fetch:h2"),{RequestAbortedError:fyt}=mce(),{decodeStream:AIr}=QE(),{NGHTTP2_CANCEL:eH}=hIr,yIr=300*1e3,CIr=5e3,vIr=s(t=>{t.h2={sessionCache:{}}},"setupContext"),xIr=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),ga(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),pyt=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?AIr(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),EIr=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=CIr}}}=t,u=i[":path"],f=`${e}${u}`;ga(`received PUSH_PROMISE: ${f}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(f,i,s(()=>{n.close(eH)},"rejectPush")),n.on("push",(p,m)=>{ga(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(l,()=>{ga(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(eH)}),c&&c(f,i,pyt(p,n,r))}),n.on("aborted",()=>{ga(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{ga(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{ga(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),bIr=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:f=yIr,pushPromiseHandler:p,pushHandler:m}=l,h={...r},{method:g,headers:A,socket:y,body:E,decode:b}=h;return y&&delete h.socket,A.host&&(A[":authority"]=A.host,delete A.host),new Promise((S,R)=>{let B=u[n];if(!B||B.closed||B.destroyed){let z=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),Q={...l,rejectUnauthorized:z};y&&!y.inUse&&(Q.createConnection=()=>(ga(`reusing socket #${y.id} (${y.servername})`),y.inUse=!0,y)),B=mIr(n,{...Q,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(f,()=>{ga(`closing session ${n} after ${f} ms of inactivity`),B.close()}),B.once("connect",()=>{ga(`session ${n} established`),ga(`caching session ${n}`),u[n]=B}),B.on("localSettings",Z=>{ga(`session ${n} localSettings: ${JSON.stringify(Z)}`)}),B.on("remoteSettings",Z=>{ga(`session ${n} remoteSettings: ${JSON.stringify(Z)}`)}),B.once("close",()=>{ga(`session ${n} closed`),u[n]===B&&(ga(`discarding cached session ${n}`),delete u[n])}),B.once("error",Z=>{ga(`session ${n} encountered error: ${Z}`),u[n]===B&&(ga(`discarding cached session ${n}`),delete u[n])}),B.on("frameError",(Z,J,j)=>{ga(`session ${n} encountered frameError: type: ${Z}, code: ${J}, id: ${j}`)}),B.once("goaway",(Z,J,j)=>{ga(`session ${n} received GOAWAY frame: errorCode: ${Z}, lastStreamID: ${J}, opaqueData: ${j?j.toString():void 0}`)}),B.on("stream",(Z,J,j)=>{EIr(t,n,b,Z,J,j)})}else y&&y.id!==B.socket.id&&!y.inUse&&(ga(`discarding redundant socket used for ALPN: #${y.id} ${y.servername}`),y.destroy());ga(`${g} ${e.host}${c}`);let L,{signal:O}=h,Y=s(()=>{O.removeEventListener("abort",Y),R(new fyt),L&&L.close(eH)},"onAbortSignal");if(O){if(O.aborted){R(new fyt);return}O.addEventListener("abort",Y)}let V=s(z=>{ga(`session ${n} encountered error during ${h.method} ${e.href}: ${z}`),R(z)},"onSessionError");B.once("error",V),L=B.request({":method":g,":path":c,...A}),L.once("response",z=>{B.off("error",V),O&&O.removeEventListener("abort",Y),S(pyt(z,L,h.decode,R))}),L.once("error",z=>{B.off("error",V),O&&O.removeEventListener("abort",Y),L.rstCode!==eH&&(ga(`${h.method} ${e.href} failed with: ${z.message}`),L.close(eH),R(z))}),L.once("frameError",(z,Q,U)=>{B.off("error",V),ga(`encountered frameError during ${h.method} ${e.href}: type: ${z}, code: ${Q}, id: ${U}`)}),L.on("push",(z,Q)=>{ga(`received 'push' event: headers: ${JSON.stringify(z)}, flags: ${Q}`)}),E instanceof gIr?E.pipe(L):(E&&L.write(E),L.end())})},"request");myt.exports={request:bIr,setupContext:vIr,resetContext:xIr}});var Ayt=H((Wvo,gyt)=>{"use strict";d();var{EventEmitter:IIr}=require("events"),TIr=s(()=>{let t={},e=new IIr;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");gyt.exports=TIr});var yyt=H((Vvo,wIr)=>{wIr.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var byt=H((zvo,Eyt)=>{"use strict";d();var{Readable:SIr}=require("stream"),_Ir=require("tls"),{types:{isAnyArrayBuffer:RIr}}=require("util"),kIr=wke(),Oke=SC()("helix-fetch:core"),{RequestAbortedError:hce}=mce(),Qke=dyt(),gce=hyt(),PIr=Ayt(),{isPlainObject:DIr}=QE(),{isFormData:BIr,FormDataSerializer:NIr}=Zq(),{version:MIr}=yyt(),Uke="h2",qke="h2c",Hke="http/1.0",kP="http/1.1",LIr=100,FIr=3600*1e3,OIr=[Uke,kP,Hke],QIr=`helix-fetch/${MIr}`,UIr={method:"GET",compress:!0,decode:!0},Cyt=0,vyt=PIr(),xyt=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new hce;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new hce);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof hce||(Oke(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=_Ir.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),Cyt+=1,o.id=Cyt,o.secureConnecting=!1,Oke(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),qIr=s(async(t,e)=>{let r=await vyt.acquire(t.origin);try{return r||(r=await xyt(t,e)),r}finally{vyt.release(t.origin,r)}},"connect"),HIr=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=kP,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=qke,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let f=await qIr(e,u);return i=f.alpnProtocol,i||(i=kP),t.alpnCache.set(n,i),{protocol:i,socket:f}},"determineProtocol"),$Ir=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),WIr=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let f=await xyt(e,u);return{protocol:f.alpnProtocol||kP,socket:f}}return{protocol:c.alpnProtocol||kP,socket:c}},"getProtocolAndSocketFromFactory"),jIr=s(async(t,e,r)=>{let n=new URL(e),i={...UIr,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=$Ir(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(BIr(i.body)){let u=new NIr(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":DIr(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):RIr(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof SIr||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await WIr(t.socketFactory,n,i,t.alpnProtocols):await HIr(t,n,a);switch(Oke(`${n.host} -> ${c}`),c){case Uke:try{return await gce.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:f,message:p}=u;throw f==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case qke:return gce.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case Hke:case kP:return Qke.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),GIr=s(async t=>(t.alpnCache.clear(),Promise.all([Qke.resetContext(t),gce.resetContext(t)])),"resetContext"),VIr=s(t=>{let{options:{alpnProtocols:e=OIr,alpnCacheTTL:r=FIr,alpnCacheSize:n=LIr,userAgent:i=QIr,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new kIr({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,Qke.setupContext(t),gce.setupContext(t)},"setupContext");Eyt.exports={request:jIr,setupContext:VIr,resetContext:GIr,RequestAbortedError:hce,ALPN_HTTP2:Uke,ALPN_HTTP2C:qke,ALPN_HTTP1_1:kP,ALPN_HTTP1_0:Hke}});var Tyt=H((Jvo,Iyt)=>{"use strict";d();var zIr=SC()("helix-fetch:core"),{request:KIr,setupContext:YIr,resetContext:JIr,RequestAbortedError:XIr,ALPN_HTTP2:ZIr,ALPN_HTTP2C:eTr,ALPN_HTTP1_1:tTr,ALPN_HTTP1_0:rTr}=byt(),$ke=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},YIr(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:XIr,ALPN_HTTP2:ZIr,ALPN_HTTP2C:eTr,ALPN_HTTP1_1:tTr,ALPN_HTTP1_0:rTr}}async request(e,r){return KIr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return zIr("resetting context"),JIr(this)}};Iyt.exports=new $ke().api()});var kyt=H((exo,Ryt)=>{"use strict";d();var{EventEmitter:nTr}=require("events"),{Readable:tH}=require("stream"),Wke=SC()("helix-fetch"),iTr=wke(),{Body:oTr}=ace(),{Headers:zke}=wM(),{Request:PP}=KAt(),{Response:Gke}=Bke(),{FetchBaseError:sTr,FetchError:rH,AbortError:Ace}=Rke(),{AbortController:aTr,AbortSignal:cTr,TimeoutSignal:lTr}=kke(),uTr=ryt(),{cacheableResponse:dTr}=oyt(),{sizeof:fTr}=QE(),{isFormData:pTr}=Zq(),{context:mTr,RequestAbortedError:hTr}=Tyt(),wyt=["GET","HEAD"],gTr=500,ATr=100*1024*1024,jke="push",Syt=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof PP&&typeof r>"u"?e:new PP(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:f,redirect:p,init:{body:m}}=i,h;if(c&&c.aborted){let B=new Ace("The operation was aborted.");throw i.init.body instanceof tH&&i.init.body.destroy(B),B}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof tH)&&!pTr(m)?m:a,compress:l,decode:u,follow:f,redirect:p,signal:c})}catch(B){throw m instanceof tH&&m.destroy(B),B instanceof TypeError?B:B instanceof hTr?new Ace("The operation was aborted."):new rH(B.message,"system",B)}let g=s(()=>{c.removeEventListener("abort",g);let B=new Ace("The operation was aborted.");i.init.body instanceof tH&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:A,statusText:y,httpVersion:E,headers:b,readable:S,decoded:R}=h;if([301,302,303,307,308].includes(A)){let{location:B}=b,L=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new rH(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(L===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new rH(`maximum redirect reached at: ${i.url}`,"max-redirect");let O={headers:new zke(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(A!==303&&i.body&&i.init.body instanceof tH)throw c&&c.removeEventListener("abort",g),new rH("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(A===303||(A===301||A===302)&&i.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length")),c&&c.removeEventListener("abort",g),Syt(t,new PP(L,O))}default:}}return c&&(S.once("end",()=>{c.removeEventListener("abort",g)}),S.once("error",()=>{c.removeEventListener("abort",g)})),new Gke(S,{url:i.url,status:A,statusText:y,headers:b,httpVersion:E,decoded:R,counter:i.counter})},"fetch"),_yt=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!wyt.includes(e.method))return r;let n=new uTr(e,r,{shared:!1});if(n.storable()){let i=await dTr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),yTr=s(async(t,e,r)=>{let n=new PP(e,r);if(t.options.maxCacheSize!==0&&wyt.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new zke(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await Syt(t,n);return n.cache!=="no-store"?_yt(t,n,o):o},"cachingFetch"),CTr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),vTr=s(t=>new lTr(t),"timeoutSignal"),Vke=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:ATr,i=gTr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>fTr(c),"sizeCalculation");this.cache=new iTr({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new nTr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(p=>p.startsWith(":")).forEach(p=>delete f[p]),this.pushPromiseHandler(c,f,u)},this.options.h2.pushHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(E=>E.startsWith(":")).forEach(E=>delete f[E]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:A,decoded:y}=u;this.pushHandler(c,f,new Gke(A,{url:c,status:p,statusText:m,headers:g,httpVersion:h,decoded:y}))}),this.context=mTr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:oTr,Headers:zke,Request:PP,Response:Gke,AbortController:aTr,AbortSignal:cTr,FetchBaseError:sTr,FetchError:rH,AbortError:Ace,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:CTr,timeoutSignal:vTr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return yTr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(jke,e)}offPush(e){return this.eventEmitter.off(jke,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){Wke(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new PP(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Wke(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){Wke(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await _yt(this,new PP(e,{headers:r}),n);this.eventEmitter.emit(jke,e,i)}};Ryt.exports=new Vke().api()});var Dyt=H((nxo,Pyt)=>{"use strict";d();Pyt.exports=kyt()});var q1t=H((Cle,U1t)=>{d();(function(t,e){typeof Cle=="object"&&typeof U1t<"u"?e(Cle):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Cle,function(t){"use strict";function e(){for(var F=arguments.length,D=Array(F),ee=0;ee<F;ee++)D[ee]=arguments[ee];if(D.length>1){D[0]=D[0].slice(0,-1);for(var ge=D.length-1,_e=1;_e<ge;++_e)D[_e]=D[_e].slice(1,-1);return D[ge]=D[ge].slice(1),D.join("")}else return D[0]}s(e,"merge");function r(F){return"(?:"+F+")"}s(r,"subexp");function n(F){return F===void 0?"undefined":F===null?"null":Object.prototype.toString.call(F).split(" ").pop().split("]").shift().toLowerCase()}s(n,"typeOf");function i(F){return F.toUpperCase()}s(i,"toUpperCase");function o(F){return F!=null?F instanceof Array?F:typeof F.length!="number"||F.split||F.setInterval||F.call?[F]:Array.prototype.slice.call(F):[]}s(o,"toArray");function a(F,D){var ee=F;if(D)for(var ge in D)ee[ge]=D[ge];return ee}s(a,"assign");function c(F){var D="[A-Za-z]",ee="[\\x0D]",ge="[0-9]",_e="[\\x22]",ut=e(ge,"[A-Fa-f]"),St="[\\x0A]",Kt="[\\x20]",er=r(r("%[EFef]"+ut+"%"+ut+ut+"%"+ut+ut)+"|"+r("%[89A-Fa-f]"+ut+"%"+ut+ut)+"|"+r("%"+ut+ut)),Yt="[\\:\\/\\?\\#\\[\\]\\@]",bt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",yr=e(Yt,bt),ui=F?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ro=F?"[\\uE000-\\uF8FF]":"[]",Tn=e(D,ge,"[\\-\\.\\_\\~]",ui),Ao=r(D+e(D,ge,"[\\+\\-\\.]")+"*"),vi=r(r(er+"|"+e(Tn,bt,"[\\:]"))+"*"),Xo=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("[1-9]"+ge)+"|"+ge),Aa=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("0?[1-9]"+ge)+"|0?0?"+ge),vc=r(Aa+"\\."+Aa+"\\."+Aa+"\\."+Aa),Mo=r(ut+"{1,4}"),Ws=r(r(Mo+"\\:"+Mo)+"|"+vc),pd=r(r(Mo+"\\:")+"{6}"+Ws),xc=r("\\:\\:"+r(Mo+"\\:")+"{5}"+Ws),bg=r(r(Mo)+"?\\:\\:"+r(Mo+"\\:")+"{4}"+Ws),Il=r(r(r(Mo+"\\:")+"{0,1}"+Mo)+"?\\:\\:"+r(Mo+"\\:")+"{3}"+Ws),Ig=r(r(r(Mo+"\\:")+"{0,2}"+Mo)+"?\\:\\:"+r(Mo+"\\:")+"{2}"+Ws),Tg=r(r(r(Mo+"\\:")+"{0,3}"+Mo)+"?\\:\\:"+Mo+"\\:"+Ws),YE=r(r(r(Mo+"\\:")+"{0,4}"+Mo)+"?\\:\\:"+Ws),Fa=r(r(r(Mo+"\\:")+"{0,5}"+Mo)+"?\\:\\:"+Mo),_u=r(r(r(Mo+"\\:")+"{0,6}"+Mo)+"?\\:\\:"),Ru=r([pd,xc,bg,Il,Ig,Tg,YE,Fa,_u].join("|")),md=r(r(Tn+"|"+er)+"+"),wg=r(Ru+"\\%25"+md),$l=r(Ru+r("\\%25|\\%(?!"+ut+"{2})")+md),JE=r("[vV]"+ut+"+\\."+e(Tn,bt,"[\\:]")+"+"),ov=r("\\["+r($l+"|"+Ru+"|"+JE)+"\\]"),XE=r(r(er+"|"+e(Tn,bt))+"*"),$f=r(ov+"|"+vc+"(?!"+XE+")|"+XE),Wf=r(ge+"*"),Kr=r(r(vi+"@")+"?"+$f+r("\\:"+Wf)+"?"),Ec=r(er+"|"+e(Tn,bt,"[\\:\\@]")),Sg=r(Ec+"*"),_g=r(Ec+"+"),XM=r(r(er+"|"+e(Tn,bt,"[\\@]"))+"+"),jc=r(r("\\/"+Sg)+"*"),Iy=r("\\/"+r(_g+jc)+"?"),sv=r(XM+jc),vm=r(_g+jc),Ty="(?!"+Ec+")",ZE=r(jc+"|"+Iy+"|"+sv+"|"+vm+"|"+Ty),Es=r(r(Ec+"|"+e("[\\/\\?]",ro))+"*"),hd=r(r(Ec+"|[\\/\\?]")+"*"),wy=r(r("\\/\\/"+Kr+jc)+"|"+Iy+"|"+vm+"|"+Ty),s5=r(Ao+"\\:"+wy+r("\\?"+Es)+"?"+r("\\#"+hd)+"?"),ZM=r(r("\\/\\/"+Kr+jc)+"|"+Iy+"|"+sv+"|"+Ty),no=r(ZM+r("\\?"+Es)+"?"+r("\\#"+hd)+"?"),Sy=r(s5+"|"+no),Rg=r(Ao+"\\:"+wy+r("\\?"+Es)+"?"),a5="^("+Ao+")\\:"+r(r("\\/\\/("+r("("+vi+")@")+"?("+$f+")"+r("\\:("+Wf+")")+"?)")+"?("+jc+"|"+Iy+"|"+vm+"|"+Ty+")")+r("\\?("+Es+")")+"?"+r("\\#("+hd+")")+"?$",eb="^(){0}"+r(r("\\/\\/("+r("("+vi+")@")+"?("+$f+")"+r("\\:("+Wf+")")+"?)")+"?("+jc+"|"+Iy+"|"+sv+"|"+Ty+")")+r("\\?("+Es+")")+"?"+r("\\#("+hd+")")+"?$",gd="^("+Ao+")\\:"+r(r("\\/\\/("+r("("+vi+")@")+"?("+$f+")"+r("\\:("+Wf+")")+"?)")+"?("+jc+"|"+Iy+"|"+vm+"|"+Ty+")")+r("\\?("+Es+")")+"?$",eL="^"+r("\\#("+hd+")")+"?$",tL="^"+r("("+vi+")@")+"?("+$f+")"+r("\\:("+Wf+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",D,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Tn,bt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Tn,bt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Tn,bt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Tn,bt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Tn,bt,"[\\:\\@\\/\\?]",ro),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Tn,bt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Tn,bt),"g"),UNRESERVED:new RegExp(Tn,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Tn,yr),"g"),PCT_ENCODED:new RegExp(er,"g"),IPV4ADDRESS:new RegExp("^("+vc+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ru+")"+r(r("\\%25|\\%(?!"+ut+"{2})")+"("+md+")")+"?\\]?$")}}s(c,"buildExps");var l=c(!1),u=c(!0),f=function(){function F(D,ee){var ge=[],_e=!0,ut=!1,St=void 0;try{for(var Kt=D[Symbol.iterator](),er;!(_e=(er=Kt.next()).done)&&(ge.push(er.value),!(ee&&ge.length===ee));_e=!0);}catch(Yt){ut=!0,St=Yt}finally{try{!_e&&Kt.return&&Kt.return()}finally{if(ut)throw St}}return ge}return s(F,"sliceIterator"),function(D,ee){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return F(D,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=s(function(F){if(Array.isArray(F)){for(var D=0,ee=Array(F.length);D<F.length;D++)ee[D]=F[D];return ee}else return Array.from(F)},"toConsumableArray"),m=2147483647,h=36,g=1,A=26,y=38,E=700,b=72,S=128,R="-",B=/^xn--/,L=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=h-g,z=Math.floor,Q=String.fromCharCode;function U(F){throw new RangeError(Y[F])}s(U,"error$1");function Z(F,D){for(var ee=[],ge=F.length;ge--;)ee[ge]=D(F[ge]);return ee}s(Z,"map");function J(F,D){var ee=F.split("@"),ge="";ee.length>1&&(ge=ee[0]+"@",F=ee[1]),F=F.replace(O,".");var _e=F.split("."),ut=Z(_e,D).join(".");return ge+ut}s(J,"mapDomain");function j(F){for(var D=[],ee=0,ge=F.length;ee<ge;){var _e=F.charCodeAt(ee++);if(_e>=55296&&_e<=56319&&ee<ge){var ut=F.charCodeAt(ee++);(ut&64512)==56320?D.push(((_e&1023)<<10)+(ut&1023)+65536):(D.push(_e),ee--)}else D.push(_e)}return D}s(j,"ucs2decode");var $=s(function(D){return String.fromCodePoint.apply(String,p(D))},"ucs2encode"),X=s(function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:h},"basicToDigit"),ie=s(function(D,ee){return D+22+75*(D<26)-((ee!=0)<<5)},"digitToBasic"),ae=s(function(D,ee,ge){var _e=0;for(D=ge?z(D/E):D>>1,D+=z(D/ee);D>V*A>>1;_e+=h)D=z(D/V);return z(_e+(V+1)*D/(D+y))},"adapt"),te=s(function(D){var ee=[],ge=D.length,_e=0,ut=S,St=b,Kt=D.lastIndexOf(R);Kt<0&&(Kt=0);for(var er=0;er<Kt;++er)D.charCodeAt(er)>=128&&U("not-basic"),ee.push(D.charCodeAt(er));for(var Yt=Kt>0?Kt+1:0;Yt<ge;){for(var bt=_e,yr=1,ui=h;;ui+=h){Yt>=ge&&U("invalid-input");var ro=X(D.charCodeAt(Yt++));(ro>=h||ro>z((m-_e)/yr))&&U("overflow"),_e+=ro*yr;var Tn=ui<=St?g:ui>=St+A?A:ui-St;if(ro<Tn)break;var Ao=h-Tn;yr>z(m/Ao)&&U("overflow"),yr*=Ao}var vi=ee.length+1;St=ae(_e-bt,vi,bt==0),z(_e/vi)>m-ut&&U("overflow"),ut+=z(_e/vi),_e%=vi,ee.splice(_e++,0,ut)}return String.fromCodePoint.apply(String,ee)},"decode"),pe=s(function(D){var ee=[];D=j(D);var ge=D.length,_e=S,ut=0,St=b,Kt=!0,er=!1,Yt=void 0;try{for(var bt=D[Symbol.iterator](),yr;!(Kt=(yr=bt.next()).done);Kt=!0){var ui=yr.value;ui<128&&ee.push(Q(ui))}}catch($l){er=!0,Yt=$l}finally{try{!Kt&&bt.return&&bt.return()}finally{if(er)throw Yt}}var ro=ee.length,Tn=ro;for(ro&&ee.push(R);Tn<ge;){var Ao=m,vi=!0,Xo=!1,Aa=void 0;try{for(var vc=D[Symbol.iterator](),Mo;!(vi=(Mo=vc.next()).done);vi=!0){var Ws=Mo.value;Ws>=_e&&Ws<Ao&&(Ao=Ws)}}catch($l){Xo=!0,Aa=$l}finally{try{!vi&&vc.return&&vc.return()}finally{if(Xo)throw Aa}}var pd=Tn+1;Ao-_e>z((m-ut)/pd)&&U("overflow"),ut+=(Ao-_e)*pd,_e=Ao;var xc=!0,bg=!1,Il=void 0;try{for(var Ig=D[Symbol.iterator](),Tg;!(xc=(Tg=Ig.next()).done);xc=!0){var YE=Tg.value;if(YE<_e&&++ut>m&&U("overflow"),YE==_e){for(var Fa=ut,_u=h;;_u+=h){var Ru=_u<=St?g:_u>=St+A?A:_u-St;if(Fa<Ru)break;var md=Fa-Ru,wg=h-Ru;ee.push(Q(ie(Ru+md%wg,0))),Fa=z(md/wg)}ee.push(Q(ie(Fa,0))),St=ae(ut,pd,Tn==ro),ut=0,++Tn}}}catch($l){bg=!0,Il=$l}finally{try{!xc&&Ig.return&&Ig.return()}finally{if(bg)throw Il}}++ut,++_e}return ee.join("")},"encode"),Ae=s(function(D){return J(D,function(ee){return B.test(ee)?te(ee.slice(4).toLowerCase()):ee})},"toUnicode"),Oe=s(function(D){return J(D,function(ee){return L.test(ee)?"xn--"+pe(ee):ee})},"toASCII"),Te={version:"2.1.0",ucs2:{decode:j,encode:$},decode:te,encode:pe,toASCII:Oe,toUnicode:Ae},Je={};function Fe(F){var D=F.charCodeAt(0),ee=void 0;return D<16?ee="%0"+D.toString(16).toUpperCase():D<128?ee="%"+D.toString(16).toUpperCase():D<2048?ee="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():ee="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),ee}s(Fe,"pctEncChar");function lt(F){for(var D="",ee=0,ge=F.length;ee<ge;){var _e=parseInt(F.substr(ee+1,2),16);if(_e<128)D+=String.fromCharCode(_e),ee+=3;else if(_e>=194&&_e<224){if(ge-ee>=6){var ut=parseInt(F.substr(ee+4,2),16);D+=String.fromCharCode((_e&31)<<6|ut&63)}else D+=F.substr(ee,6);ee+=6}else if(_e>=224){if(ge-ee>=9){var St=parseInt(F.substr(ee+4,2),16),Kt=parseInt(F.substr(ee+7,2),16);D+=String.fromCharCode((_e&15)<<12|(St&63)<<6|Kt&63)}else D+=F.substr(ee,9);ee+=9}else D+=F.substr(ee,3),ee+=3}return D}s(lt,"pctDecChars");function _t(F,D){function ee(ge){var _e=lt(ge);return _e.match(D.UNRESERVED)?_e:ge}return s(ee,"decodeUnreserved"),F.scheme&&(F.scheme=String(F.scheme).replace(D.PCT_ENCODED,ee).toLowerCase().replace(D.NOT_SCHEME,"")),F.userinfo!==void 0&&(F.userinfo=String(F.userinfo).replace(D.PCT_ENCODED,ee).replace(D.NOT_USERINFO,Fe).replace(D.PCT_ENCODED,i)),F.host!==void 0&&(F.host=String(F.host).replace(D.PCT_ENCODED,ee).toLowerCase().replace(D.NOT_HOST,Fe).replace(D.PCT_ENCODED,i)),F.path!==void 0&&(F.path=String(F.path).replace(D.PCT_ENCODED,ee).replace(F.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,Fe).replace(D.PCT_ENCODED,i)),F.query!==void 0&&(F.query=String(F.query).replace(D.PCT_ENCODED,ee).replace(D.NOT_QUERY,Fe).replace(D.PCT_ENCODED,i)),F.fragment!==void 0&&(F.fragment=String(F.fragment).replace(D.PCT_ENCODED,ee).replace(D.NOT_FRAGMENT,Fe).replace(D.PCT_ENCODED,i)),F}s(_t,"_normalizeComponentEncoding");function xt(F){return F.replace(/^0*(.*)/,"$1")||"0"}s(xt,"_stripLeadingZeros");function ht(F,D){var ee=F.match(D.IPV4ADDRESS)||[],ge=f(ee,2),_e=ge[1];return _e?_e.split(".").map(xt).join("."):F}s(ht,"_normalizeIPv4");function ue(F,D){var ee=F.match(D.IPV6ADDRESS)||[],ge=f(ee,3),_e=ge[1],ut=ge[2];if(_e){for(var St=_e.toLowerCase().split("::").reverse(),Kt=f(St,2),er=Kt[0],Yt=Kt[1],bt=Yt?Yt.split(":").map(xt):[],yr=er.split(":").map(xt),ui=D.IPV4ADDRESS.test(yr[yr.length-1]),ro=ui?7:8,Tn=yr.length-ro,Ao=Array(ro),vi=0;vi<ro;++vi)Ao[vi]=bt[vi]||yr[Tn+vi]||"";ui&&(Ao[ro-1]=ht(Ao[ro-1],D));var Xo=Ao.reduce(function(pd,xc,bg){if(!xc||xc==="0"){var Il=pd[pd.length-1];Il&&Il.index+Il.length===bg?Il.length++:pd.push({index:bg,length:1})}return pd},[]),Aa=Xo.sort(function(pd,xc){return xc.length-pd.length})[0],vc=void 0;if(Aa&&Aa.length>1){var Mo=Ao.slice(0,Aa.index),Ws=Ao.slice(Aa.index+Aa.length);vc=Mo.join(":")+"::"+Ws.join(":")}else vc=Ao.join(":");return ut&&(vc+="%"+ut),vc}else return F}s(ue,"_normalizeIPv6");var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ye="".match(/(){0}/)[1]===void 0;function $e(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee={},ge=D.iri!==!1?u:l;D.reference==="suffix"&&(F=(D.scheme?D.scheme+":":"")+"//"+F);var _e=F.match(Ue);if(_e){ye?(ee.scheme=_e[1],ee.userinfo=_e[3],ee.host=_e[4],ee.port=parseInt(_e[5],10),ee.path=_e[6]||"",ee.query=_e[7],ee.fragment=_e[8],isNaN(ee.port)&&(ee.port=_e[5])):(ee.scheme=_e[1]||void 0,ee.userinfo=F.indexOf("@")!==-1?_e[3]:void 0,ee.host=F.indexOf("//")!==-1?_e[4]:void 0,ee.port=parseInt(_e[5],10),ee.path=_e[6]||"",ee.query=F.indexOf("?")!==-1?_e[7]:void 0,ee.fragment=F.indexOf("#")!==-1?_e[8]:void 0,isNaN(ee.port)&&(ee.port=F.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?_e[4]:void 0)),ee.host&&(ee.host=ue(ht(ee.host,ge),ge)),ee.scheme===void 0&&ee.userinfo===void 0&&ee.host===void 0&&ee.port===void 0&&!ee.path&&ee.query===void 0?ee.reference="same-document":ee.scheme===void 0?ee.reference="relative":ee.fragment===void 0?ee.reference="absolute":ee.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==ee.reference&&(ee.error=ee.error||"URI is not a "+D.reference+" reference.");var ut=Je[(D.scheme||ee.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!ut||!ut.unicodeSupport)){if(ee.host&&(D.domainHost||ut&&ut.domainHost))try{ee.host=Te.toASCII(ee.host.replace(ge.PCT_ENCODED,lt).toLowerCase())}catch(St){ee.error=ee.error||"Host's domain name can not be converted to ASCII via punycode: "+St}_t(ee,l)}else _t(ee,ge);ut&&ut.parse&&ut.parse(ee,D)}else ee.error=ee.error||"URI can not be parsed.";return ee}s($e,"parse");function se(F,D){var ee=D.iri!==!1?u:l,ge=[];return F.userinfo!==void 0&&(ge.push(F.userinfo),ge.push("@")),F.host!==void 0&&ge.push(ue(ht(String(F.host),ee),ee).replace(ee.IPV6ADDRESS,function(_e,ut,St){return"["+ut+(St?"%25"+St:"")+"]"})),(typeof F.port=="number"||typeof F.port=="string")&&(ge.push(":"),ge.push(String(F.port))),ge.length?ge.join(""):void 0}s(se,"_recomposeAuthority");var le=/^\.\.?\//,qe=/^\/\.(\/|$)/,Be=/^\/\.\.(\/|$)/,Ee=/^\/?(?:.|\n)*?(?=\/|$)/;function je(F){for(var D=[];F.length;)if(F.match(le))F=F.replace(le,"");else if(F.match(qe))F=F.replace(qe,"/");else if(F.match(Be))F=F.replace(Be,"/"),D.pop();else if(F==="."||F==="..")F="";else{var ee=F.match(Ee);if(ee){var ge=ee[0];F=F.slice(ge.length),D.push(ge)}else throw new Error("Unexpected dot segment condition")}return D.join("")}s(je,"removeDotSegments");function tt(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=D.iri?u:l,ge=[],_e=Je[(D.scheme||F.scheme||"").toLowerCase()];if(_e&&_e.serialize&&_e.serialize(F,D),F.host&&!ee.IPV6ADDRESS.test(F.host)){if(D.domainHost||_e&&_e.domainHost)try{F.host=D.iri?Te.toUnicode(F.host):Te.toASCII(F.host.replace(ee.PCT_ENCODED,lt).toLowerCase())}catch(Kt){F.error=F.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+Kt}}_t(F,ee),D.reference!=="suffix"&&F.scheme&&(ge.push(F.scheme),ge.push(":"));var ut=se(F,D);if(ut!==void 0&&(D.reference!=="suffix"&&ge.push("//"),ge.push(ut),F.path&&F.path.charAt(0)!=="/"&&ge.push("/")),F.path!==void 0){var St=F.path;!D.absolutePath&&(!_e||!_e.absolutePath)&&(St=je(St)),ut===void 0&&(St=St.replace(/^\/\//,"/%2F")),ge.push(St)}return F.query!==void 0&&(ge.push("?"),ge.push(F.query)),F.fragment!==void 0&&(ge.push("#"),ge.push(F.fragment)),ge.join("")}s(tt,"serialize");function pt(F,D){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ge=arguments[3],_e={};return ge||(F=$e(tt(F,ee),ee),D=$e(tt(D,ee),ee)),ee=ee||{},!ee.tolerant&&D.scheme?(_e.scheme=D.scheme,_e.userinfo=D.userinfo,_e.host=D.host,_e.port=D.port,_e.path=je(D.path||""),_e.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(_e.userinfo=D.userinfo,_e.host=D.host,_e.port=D.port,_e.path=je(D.path||""),_e.query=D.query):(D.path?(D.path.charAt(0)==="/"?_e.path=je(D.path):((F.userinfo!==void 0||F.host!==void 0||F.port!==void 0)&&!F.path?_e.path="/"+D.path:F.path?_e.path=F.path.slice(0,F.path.lastIndexOf("/")+1)+D.path:_e.path=D.path,_e.path=je(_e.path)),_e.query=D.query):(_e.path=F.path,D.query!==void 0?_e.query=D.query:_e.query=F.query),_e.userinfo=F.userinfo,_e.host=F.host,_e.port=F.port),_e.scheme=F.scheme),_e.fragment=D.fragment,_e}s(pt,"resolveComponents");function Ft(F,D,ee){var ge=a({scheme:"null"},ee);return tt(pt($e(F,ge),$e(D,ge),ge,!0),ge)}s(Ft,"resolve");function Jt(F,D){return typeof F=="string"?F=tt($e(F,D),D):n(F)==="object"&&(F=$e(tt(F,D),D)),F}s(Jt,"normalize");function Qt(F,D,ee){return typeof F=="string"?F=tt($e(F,ee),ee):n(F)==="object"&&(F=tt(F,ee)),typeof D=="string"?D=tt($e(D,ee),ee):n(D)==="object"&&(D=tt(D,ee)),F===D}s(Qt,"equal");function Vr(F,D){return F&&F.toString().replace(!D||!D.iri?l.ESCAPE:u.ESCAPE,Fe)}s(Vr,"escapeComponent");function Pr(F,D){return F&&F.toString().replace(!D||!D.iri?l.PCT_ENCODED:u.PCT_ENCODED,lt)}s(Pr,"unescapeComponent");var ln={scheme:"http",domainHost:!0,parse:s(function(D,ee){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},"parse"),serialize:s(function(D,ee){var ge=String(D.scheme).toLowerCase()==="https";return(D.port===(ge?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D},"serialize")},ve={scheme:"https",domainHost:ln.domainHost,parse:ln.parse,serialize:ln.serialize};function Ge(F){return typeof F.secure=="boolean"?F.secure:String(F.scheme).toLowerCase()==="wss"}s(Ge,"isSecure");var ft={scheme:"ws",domainHost:!0,parse:s(function(D,ee){var ge=D;return ge.secure=Ge(ge),ge.resourceName=(ge.path||"/")+(ge.query?"?"+ge.query:""),ge.path=void 0,ge.query=void 0,ge},"parse"),serialize:s(function(D,ee){if((D.port===(Ge(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var ge=D.resourceName.split("?"),_e=f(ge,2),ut=_e[0],St=_e[1];D.path=ut&&ut!=="/"?ut:void 0,D.query=St,D.resourceName=void 0}return D.fragment=void 0,D},"serialize")},Tt={scheme:"wss",domainHost:ft.domainHost,parse:ft.parse,serialize:ft.serialize},or={},Zt=!0,Ir="[A-Za-z0-9\\-\\.\\_\\~"+(Zt?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",ur="[0-9A-Fa-f]",rr=r(r("%[EFef]"+ur+"%"+ur+ur+"%"+ur+ur)+"|"+r("%[89A-Fa-f]"+ur+"%"+ur+ur)+"|"+r("%"+ur+ur)),lr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",nr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Br=e(nr,'[\\"\\\\]'),zr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",sn=new RegExp(Ir,"g"),Cn=new RegExp(rr,"g"),ni=new RegExp(e("[^]",lr,"[\\.]",'[\\"]',Br),"g"),_n=new RegExp(e("[^]",Ir,zr),"g"),ei=_n;function an(F){var D=lt(F);return D.match(sn)?D:F}s(an,"decodeUnreserved");var Yn={scheme:"mailto",parse:s(function(D,ee){var ge=D,_e=ge.to=ge.path?ge.path.split(","):[];if(ge.path=void 0,ge.query){for(var ut=!1,St={},Kt=ge.query.split("&"),er=0,Yt=Kt.length;er<Yt;++er){var bt=Kt[er].split("=");switch(bt[0]){case"to":for(var yr=bt[1].split(","),ui=0,ro=yr.length;ui<ro;++ui)_e.push(yr[ui]);break;case"subject":ge.subject=Pr(bt[1],ee);break;case"body":ge.body=Pr(bt[1],ee);break;default:ut=!0,St[Pr(bt[0],ee)]=Pr(bt[1],ee);break}}ut&&(ge.headers=St)}ge.query=void 0;for(var Tn=0,Ao=_e.length;Tn<Ao;++Tn){var vi=_e[Tn].split("@");if(vi[0]=Pr(vi[0]),ee.unicodeSupport)vi[1]=Pr(vi[1],ee).toLowerCase();else try{vi[1]=Te.toASCII(Pr(vi[1],ee).toLowerCase())}catch(Xo){ge.error=ge.error||"Email address's domain name can not be converted to ASCII via punycode: "+Xo}_e[Tn]=vi.join("@")}return ge},"parse$$1"),serialize:s(function(D,ee){var ge=D,_e=o(D.to);if(_e){for(var ut=0,St=_e.length;ut<St;++ut){var Kt=String(_e[ut]),er=Kt.lastIndexOf("@"),Yt=Kt.slice(0,er).replace(Cn,an).replace(Cn,i).replace(ni,Fe),bt=Kt.slice(er+1);try{bt=ee.iri?Te.toUnicode(bt):Te.toASCII(Pr(bt,ee).toLowerCase())}catch(Tn){ge.error=ge.error||"Email address's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Tn}_e[ut]=Yt+"@"+bt}ge.path=_e.join(",")}var yr=D.headers=D.headers||{};D.subject&&(yr.subject=D.subject),D.body&&(yr.body=D.body);var ui=[];for(var ro in yr)yr[ro]!==or[ro]&&ui.push(ro.replace(Cn,an).replace(Cn,i).replace(_n,Fe)+"="+yr[ro].replace(Cn,an).replace(Cn,i).replace(ei,Fe));return ui.length&&(ge.query=ui.join("&")),ge},"serialize$$1")},Pe=/^([^\:]+)\:(.*)/,K={scheme:"urn",parse:s(function(D,ee){var ge=D.path&&D.path.match(Pe),_e=D;if(ge){var ut=ee.scheme||_e.scheme||"urn",St=ge[1].toLowerCase(),Kt=ge[2],er=ut+":"+(ee.nid||St),Yt=Je[er];_e.nid=St,_e.nss=Kt,_e.path=void 0,Yt&&(_e=Yt.parse(_e,ee))}else _e.error=_e.error||"URN can not be parsed.";return _e},"parse$$1"),serialize:s(function(D,ee){var ge=ee.scheme||D.scheme||"urn",_e=D.nid,ut=ge+":"+(ee.nid||_e),St=Je[ut];St&&(D=St.serialize(D,ee));var Kt=D,er=D.nss;return Kt.path=(_e||ee.nid)+":"+er,Kt},"serialize$$1")},Ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ie={scheme:"urn:uuid",parse:s(function(D,ee){var ge=D;return ge.uuid=ge.nss,ge.nss=void 0,!ee.tolerant&&(!ge.uuid||!ge.uuid.match(Ce))&&(ge.error=ge.error||"UUID is not valid."),ge},"parse"),serialize:s(function(D,ee){var ge=D;return ge.nss=(D.uuid||"").toLowerCase(),ge},"serialize")};Je[ln.scheme]=ln,Je[ve.scheme]=ve,Je[ft.scheme]=ft,Je[Tt.scheme]=Tt,Je[Yn.scheme]=Yn,Je[K.scheme]=K,Je[Ie.scheme]=Ie,t.SCHEMES=Je,t.pctEncChar=Fe,t.pctDecChars=lt,t.parse=$e,t.removeDotSegments=je,t.serialize=tt,t.resolveComponents=pt,t.resolve=Ft,t.normalize=Jt,t.equal=Qt,t.escapeComponent=Vr,t.unescapeComponent=Pr,Object.defineProperty(t,"__esModule",{value:!0})})});var vle=H((cBo,H1t)=>{"use strict";d();H1t.exports=s(function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},"equal")});var W1t=H((dBo,$1t)=>{"use strict";d();$1t.exports=s(function(e){for(var r=0,n=e.length,i=0,o;i<n;)r++,o=e.charCodeAt(i++),o>=55296&&o<=56319&&i<n&&(o=e.charCodeAt(i),(o&64512)==56320&&i++);return r},"ucs2length")});var ZP=H((mBo,V1t)=>{"use strict";d();V1t.exports={copy:B2r,checkDataType:KPe,checkDataTypes:N2r,coerceToTypes:M2r,toHash:JPe,getProperty:XPe,escapeQuotes:ZPe,equal:vle(),ucs2length:W1t(),varOccurences:O2r,varReplace:Q2r,schemaHasRules:U2r,schemaHasRulesExcept:q2r,schemaUnknownRules:H2r,toQuotedString:YPe,getPathExpr:$2r,getPath:W2r,getData:V2r,unescapeFragment:z2r,unescapeJsonPointer:t5e,escapeFragment:K2r,escapeJsonPointer:e5e};function B2r(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}s(B2r,"copy");function KPe(t,e,r,n){var i=n?" !== ":" === ",o=n?" || ":" && ",a=n?"!":"",c=n?"":"!";switch(t){case"null":return e+i+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+o+"typeof "+e+i+'"object"'+o+c+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+i+'"number"'+o+c+"("+e+" % 1)"+o+e+i+e+(r?o+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+i+'"'+t+'"'+(r?o+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+i+'"'+t+'"'}}s(KPe,"checkDataType");function N2r(t,e,r){switch(t.length){case 1:return KPe(t[0],e,r,!0);default:var n="",i=JPe(t);i.array&&i.object&&(n=i.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var o in i)n+=(n?" && ":"")+KPe(o,e,r,!0);return n}}s(N2r,"checkDataTypes");var j1t=JPe(["string","number","integer","boolean","null"]);function M2r(t,e){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var i=e[n];(j1t[i]||t==="array"&&i==="array")&&(r[r.length]=i)}if(r.length)return r}else{if(j1t[e])return[e];if(t==="array"&&e==="array")return["array"]}}s(M2r,"coerceToTypes");function JPe(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return e}s(JPe,"toHash");var L2r=/^[a-z$_][a-z$_0-9]*$/i,F2r=/'|\\/g;function XPe(t){return typeof t=="number"?"["+t+"]":L2r.test(t)?"."+t:"['"+ZPe(t)+"']"}s(XPe,"getProperty");function ZPe(t){return t.replace(F2r,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}s(ZPe,"escapeQuotes");function O2r(t,e){e+="[^0-9]";var r=t.match(new RegExp(e,"g"));return r?r.length:0}s(O2r,"varOccurences");function Q2r(t,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),r+"$1")}s(Q2r,"varReplace");function U2r(t,e){if(typeof t=="boolean")return!t;for(var r in t)if(e[r])return!0}s(U2r,"schemaHasRules");function q2r(t,e,r){if(typeof t=="boolean")return!t&&r!="not";for(var n in t)if(n!=r&&e[n])return!0}s(q2r,"schemaHasRulesExcept");function H2r(t,e){if(typeof t!="boolean"){for(var r in t)if(!e[r])return r}}s(H2r,"schemaUnknownRules");function YPe(t){return"'"+ZPe(t)+"'"}s(YPe,"toQuotedString");function $2r(t,e,r,n){var i=r?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return G1t(t,i)}s($2r,"getPathExpr");function W2r(t,e,r){var n=YPe(r?"/"+e5e(e):XPe(e));return G1t(t,n)}s(W2r,"getPath");var j2r=/^\/(?:[^~]|~0|~1)*$/,G2r=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function V2r(t,e,r){var n,i,o,a;if(t==="")return"rootData";if(t[0]=="/"){if(!j2r.test(t))throw new Error("Invalid JSON-pointer: "+t);i=t,o="rootData"}else{if(a=t.match(G2r),!a)throw new Error("Invalid JSON-pointer: "+t);if(n=+a[1],i=a[2],i=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return r[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(o="data"+(e-n||""),!i)return o}for(var c=o,l=i.split("/"),u=0;u<l.length;u++){var f=l[u];f&&(o+=XPe(t5e(f)),c+=" && "+o)}return c}s(V2r,"getData");function G1t(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}s(G1t,"joinPaths");function z2r(t){return t5e(decodeURIComponent(t))}s(z2r,"unescapeFragment");function K2r(t){return encodeURIComponent(e5e(t))}s(K2r,"escapeFragment");function e5e(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(e5e,"escapeJsonPointer");function t5e(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}s(t5e,"unescapeJsonPointer")});var r5e=H((ABo,z1t)=>{"use strict";d();var Y2r=ZP();z1t.exports=J2r;function J2r(t){Y2r.copy(t,this)}s(J2r,"SchemaObject")});var Y1t=H((vBo,K1t)=>{"use strict";d();var MS=K1t.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};xle(e,n,i,t,"",t)};MS.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};MS.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};MS.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};MS.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function xle(t,e,r,n,i,o,a,c,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,o,a,c,l,u);for(var f in n){var p=n[f];if(Array.isArray(p)){if(f in MS.arrayKeywords)for(var m=0;m<p.length;m++)xle(t,e,r,p[m],i+"/"+f+"/"+m,o,i,f,n,m)}else if(f in MS.propsKeywords){if(p&&typeof p=="object")for(var h in p)xle(t,e,r,p[h],i+"/"+f+"/"+X2r(h),o,i,f,n,h)}else(f in MS.keywords||t.allKeys&&!(f in MS.skipKeywords))&&xle(t,e,r,p,i+"/"+f,o,i,f,n)}r(n,i,o,a,c,l,u)}}s(xle,"_traverse");function X2r(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(X2r,"escapeJsonPtr")});var Sle=H((bBo,evt)=>{"use strict";d();var vH=q1t(),J1t=vle(),Tle=ZP(),Ele=r5e(),Z2r=Y1t();evt.exports=OS;OS.normalizeId=LS;OS.fullPath=ble;OS.url=Ile;OS.ids=iRr;OS.inlineRef=n5e;OS.schema=wle;function OS(t,e,r){var n=this._refs[r];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return OS.call(this,t,e,n);if(n=n||this._schemas[r],n instanceof Ele)return n5e(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i=wle.call(this,e,r),o,a,c;return i&&(o=i.schema,e=i.root,c=i.baseId),o instanceof Ele?a=o.validate||t.call(this,o.schema,e,void 0,c):o!==void 0&&(a=n5e(o,this._opts.inlineRefs)?o:t.call(this,o,e,void 0,c)),a}s(OS,"resolve");function wle(t,e){var r=vH.parse(e),n=Z1t(r),i=ble(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==i){var o=LS(n),a=this._refs[o];if(typeof a=="string")return eRr.call(this,t,a,r);if(a instanceof Ele)a.validate||this._compile(a),t=a;else if(a=this._schemas[o],a instanceof Ele){if(a.validate||this._compile(a),o==LS(e))return{schema:a,root:t,baseId:i};t=a}else return;if(!t.schema)return;i=ble(this._getId(t.schema))}return X1t.call(this,r,i,t.schema,t)}s(wle,"resolveSchema");function eRr(t,e,r){var n=wle.call(this,t,e);if(n){var i=n.schema,o=n.baseId;t=n.root;var a=this._getId(i);return a&&(o=Ile(o,a)),X1t.call(this,r,o,i,t)}}s(eRr,"resolveRecursive");var tRr=Tle.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function X1t(t,e,r,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var i=t.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(a=Tle.unescapeFragment(a),r=r[a],r===void 0)break;var c;if(!tRr[a]&&(c=this._getId(r),c&&(e=Ile(e,c)),r.$ref)){var l=Ile(e,r.$ref),u=wle.call(this,n,l);u&&(r=u.schema,n=u.root,e=u.baseId)}}}if(r!==void 0&&r!==n.schema)return{schema:r,root:n,baseId:e}}}s(X1t,"getJsonPointer");var rRr=Tle.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function n5e(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return i5e(t);if(e)return o5e(t)<=e}s(n5e,"inlineRef");function i5e(t){var e;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(e=t[r],typeof e=="object"&&!i5e(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!i5e(e)))return!1;return!0}s(i5e,"checkNoRef");function o5e(t){var e=0,r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r=t[n],typeof r=="object"&&(e+=o5e(r)),e==1/0)return 1/0}else for(var i in t){if(i=="$ref")return 1/0;if(rRr[i])e++;else if(r=t[i],typeof r=="object"&&(e+=o5e(r)+1),e==1/0)return 1/0}return e}s(o5e,"countKeys");function ble(t,e){e!==!1&&(t=LS(t));var r=vH.parse(t);return Z1t(r)}s(ble,"getFullPath");function Z1t(t){return vH.serialize(t).split("#")[0]+"#"}s(Z1t,"_getFullPath");var nRr=/#\/?$/;function LS(t){return t?t.replace(nRr,""):""}s(LS,"normalizeId");function Ile(t,e){return e=LS(e),vH.resolve(t,e)}s(Ile,"resolveUrl");function iRr(t){var e=LS(this._getId(t)),r={"":e},n={"":ble(e,!1)},i={},o=this;return Z2r(t,{allKeys:!0},function(a,c,l,u,f,p,m){if(c!==""){var h=o._getId(a),g=r[u],A=n[u]+"/"+f;if(m!==void 0&&(A+="/"+(typeof m=="number"?m:Tle.escapeFragment(m))),typeof h=="string"){h=g=LS(g?vH.resolve(g,h):h);var y=o._refs[h];if(typeof y=="string"&&(y=o._refs[y]),y&&y.schema){if(!J1t(a,y.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=LS(A))if(h[0]=="#"){if(i[h]&&!J1t(a,i[h]))throw new Error('id "'+h+'" resolves to more than one schema');i[h]=a}else o._refs[h]=A}r[c]=g,n[c]=A}}),i}s(iRr,"resolveIds")});var _le=H((wBo,rvt)=>{"use strict";d();var s5e=Sle();rvt.exports={Validation:tvt(oRr),MissingRef:tvt(a5e)};function oRr(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}s(oRr,"ValidationError");a5e.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function a5e(t,e,r){this.message=r||a5e.message(t,e),this.missingRef=s5e.url(t,e),this.missingSchema=s5e.normalizeId(s5e.fullPath(this.missingRef))}s(a5e,"MissingRefError");function tvt(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}s(tvt,"errorSubclass")});var c5e=H((RBo,nvt)=>{"use strict";d();nvt.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(o){return function(a){return function(c,l){var u={key:c,value:a[c]},f={key:l,value:a[l]};return o(u,f)}}}(e.cmp),i=[];return s(function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var c,l;if(Array.isArray(a)){for(l="[",c=0;c<a.length;c++)c&&(l+=","),l+=o(a[c])||"null";return l+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(a)-1,f=Object.keys(a).sort(n&&n(a));for(l="",c=0;c<f.length;c++){var p=f[c],m=o(a[p]);m&&(l&&(l+=","),l+=JSON.stringify(p)+":"+m)}return i.splice(u,1),"{"+l+"}"}},"stringify")(t)}});var l5e=H((DBo,ivt)=>{"use strict";d();ivt.exports=s(function(e,r,n){var i="",o=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),c=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var u="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(i+=" var validate = ",o&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",c&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" "+("/*# sourceURL="+c+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var r="false schema",f=e.level,p=e.dataLevel,m=e.schema[r],h=e.schemaPath+e.util.getProperty(r),g=e.errSchemaPath+"/"+r,B=!e.opts.allErrors,Y,A="data"+(p||""),R="valid"+f;if(e.schema===!1){e.isTop?B=!0:i+=" var "+R+" = false; ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?i+=" return data; ":i+=" validate.errors = null; return true; ":i+=" var "+R+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var b=e.isTop,f=e.level=0,p=e.dataLevel=0,A="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var S="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,p=e.dataLevel,A="data"+(p||"");if(c&&(e.baseId=e.resolve.url(e.baseId,c)),o&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+f+" = errors;"}var R="valid"+f,B=!e.opts.allErrors,L="",O="",Y,V=e.schema.type,z=Array.isArray(V);if(V&&e.opts.nullable&&e.schema.nullable===!0&&(z?V.indexOf("null")==-1&&(V=V.concat("null")):V!="null"&&(V=[V,"null"],z=!0)),z&&V.length==1&&(V=V[0],z=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),V){if(e.opts.coerceTypes)var Q=e.util.coerceToTypes(e.opts.coerceTypes,V);var U=e.RULES.types[V];if(Q||z||U===!0||U&&!Ee(U)){var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",h=e.schemaPath+".type",g=e.errSchemaPath+"/type",Z=z?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[Z](V,A,e.opts.strictNumbers,!0)+") { ",Q){var J="dataType"+f,j="coerced"+f;i+=" var "+J+" = typeof "+A+"; var "+j+" = undefined; ",e.opts.coerceTypes=="array"&&(i+=" if ("+J+" == 'object' && Array.isArray("+A+") && "+A+".length == 1) { "+A+" = "+A+"[0]; "+J+" = typeof "+A+"; if ("+e.util.checkDataType(e.schema.type,A,e.opts.strictNumbers)+") "+j+" = "+A+"; } "),i+=" if ("+j+" !== undefined) ; ";var $=Q;if($)for(var X,ie=-1,ae=$.length-1;ie<ae;)X=$[ie+=1],X=="string"?i+=" else if ("+J+" == 'number' || "+J+" == 'boolean') "+j+" = '' + "+A+"; else if ("+A+" === null) "+j+" = ''; ":X=="number"||X=="integer"?(i+=" else if ("+J+" == 'boolean' || "+A+" === null || ("+J+" == 'string' && "+A+" && "+A+" == +"+A+" ",X=="integer"&&(i+=" && !("+A+" % 1)"),i+=")) "+j+" = +"+A+"; "):X=="boolean"?i+=" else if ("+A+" === 'false' || "+A+" === 0 || "+A+" === null) "+j+" = false; else if ("+A+" === 'true' || "+A+" === 1) "+j+" = true; ":X=="null"?i+=" else if ("+A+" === '' || "+A+" === 0 || "+A+" === false) "+j+" = null; ":e.opts.coerceTypes=="array"&&X=="array"&&(i+=" else if ("+J+" == 'string' || "+J+" == 'number' || "+J+" == 'boolean' || "+A+" == null) "+j+" = ["+A+"]; ");i+=" else {   ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+j+" !== undefined) {  ";var te=p?"data"+(p-1||""):"parentData",pe=p?e.dataPathArr[p]:"parentDataProperty";i+=" "+A+" = "+j+"; ",p||(i+="if ("+te+" !== undefined)"),i+=" "+te+"["+pe+"] = "+j+"; } "}else{var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!a)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",B&&(i+=" } if (errors === ",b?i+="0":i+="errs_"+f,i+=") { ",O+="}");else{var Ae=e.RULES;if(Ae){for(var U,Oe=-1,Te=Ae.length-1;Oe<Te;)if(U=Ae[Oe+=1],Ee(U)){if(U.type&&(i+=" if ("+e.util.checkDataType(U.type,A,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(U.type=="object"&&e.schema.properties){var m=e.schema.properties,Je=Object.keys(m),Fe=Je;if(Fe)for(var lt,_t=-1,xt=Fe.length-1;_t<xt;){lt=Fe[_t+=1];var ht=m[lt];if(ht.default!==void 0){var ue=A+e.util.getProperty(lt);if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}else if(U.type=="array"&&Array.isArray(e.schema.items)){var Ue=e.schema.items;if(Ue){for(var ht,ie=-1,ye=Ue.length-1;ie<ye;)if(ht=Ue[ie+=1],ht.default!==void 0){var ue=A+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}}var $e=U.rules;if($e){for(var se,le=-1,qe=$e.length-1;le<qe;)if(se=$e[le+=1],je(se)){var Be=se.code(e,se.keyword,U.type);Be&&(i+=" "+Be+" ",B&&(L+="}"))}}if(B&&(i+=" "+L+" ",L=""),U.type&&(i+=" } ",V&&V===U.type&&!Q)){i+=" else { ";var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}B&&(i+=" if (errors === ",b?i+="0":i+="errs_"+f,i+=") { ",O+="}")}}}B&&(i+=" "+O+" "),b?(o?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+R+" = errors === errs_"+f+";";function Ee(pt){for(var Ft=pt.rules,Jt=0;Jt<Ft.length;Jt++)if(je(Ft[Jt]))return!0}s(Ee,"$shouldUseGroup");function je(pt){return e.schema[pt.keyword]!==void 0||pt.implements&&tt(pt)}s(je,"$shouldUseRule");function tt(pt){for(var Ft=pt.implements,Jt=0;Jt<Ft.length;Jt++)if(e.schema[Ft[Jt]]!==void 0)return!0}return s(tt,"$ruleImplementsSomeKeyword"),i},"generate_validate")});var lvt=H((MBo,cvt)=>{"use strict";d();var Rle=Sle(),Ple=ZP(),svt=_le(),sRr=c5e(),ovt=l5e(),aRr=Ple.ucs2length,cRr=vle(),lRr=svt.Validation;cvt.exports=u5e;function u5e(t,e,r,n){var i=this,o=this._opts,a=[void 0],c={},l=[],u={},f=[],p={},m=[];e=e||{schema:t,refVal:a,refs:c};var h=uRr.call(this,t,e,n),g=this._compilations[h.index];if(h.compiling)return g.callValidate=S;var A=this._formats,y=this.RULES;try{var E=R(t,e,r,n);g.validate=E;var b=g.callValidate;return b&&(b.schema=E.schema,b.errors=null,b.refs=E.refs,b.refVal=E.refVal,b.root=E.root,b.$async=E.$async,o.sourceCode&&(b.source=E.source)),E}finally{dRr.call(this,t,e,n)}function S(){var Z=g.validate,J=Z.apply(this,arguments);return S.errors=Z.errors,J}s(S,"callValidate");function R(Z,J,j,$){var X=!J||J&&J.schema==Z;if(J.schema!=e.schema)return u5e.call(i,Z,J,j,$);var ie=Z.$async===!0,ae=ovt({isTop:!0,schema:Z,isRoot:X,baseId:$,root:J,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:svt.MissingRef,RULES:y,validate:ovt,util:Ple,resolve:Rle,resolveRef:B,usePattern:z,useDefault:Q,useCustomRule:U,opts:o,formats:A,logger:i.logger,self:i});ae=kle(a,mRr)+kle(l,fRr)+kle(f,pRr)+kle(m,hRr)+ae,o.processCode&&(ae=o.processCode(ae,Z));var te;try{var pe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ae);te=pe(i,y,A,e,a,f,m,cRr,aRr,lRr),a[0]=te}catch(Ae){throw i.logger.error("Error compiling schema, function code:",ae),Ae}return te.schema=Z,te.errors=null,te.refs=c,te.refVal=a,te.root=X?te:J,ie&&(te.$async=!0),o.sourceCode===!0&&(te.source={code:ae,patterns:l,defaults:f}),te}s(R,"localCompile");function B(Z,J,j){J=Rle.url(Z,J);var $=c[J],X,ie;if($!==void 0)return X=a[$],ie="refVal["+$+"]",V(X,ie);if(!j&&e.refs){var ae=e.refs[J];if(ae!==void 0)return X=e.refVal[ae],ie=L(J,X),V(X,ie)}ie=L(J);var te=Rle.call(i,R,e,J);if(te===void 0){var pe=r&&r[J];pe&&(te=Rle.inlineRef(pe,o.inlineRefs)?pe:u5e.call(i,pe,e,r,Z))}if(te===void 0)O(J);else return Y(J,te),V(te,ie)}s(B,"resolveRef");function L(Z,J){var j=a.length;return a[j]=J,c[Z]=j,"refVal"+j}s(L,"addLocalRef");function O(Z){delete c[Z]}s(O,"removeLocalRef");function Y(Z,J){var j=c[Z];a[j]=J}s(Y,"replaceLocalRef");function V(Z,J){return typeof Z=="object"||typeof Z=="boolean"?{code:J,schema:Z,inline:!0}:{code:J,$async:Z&&!!Z.$async}}s(V,"resolvedRef");function z(Z){var J=u[Z];return J===void 0&&(J=u[Z]=l.length,l[J]=Z),"pattern"+J}s(z,"usePattern");function Q(Z){switch(typeof Z){case"boolean":case"number":return""+Z;case"string":return Ple.toQuotedString(Z);case"object":if(Z===null)return"null";var J=sRr(Z),j=p[J];return j===void 0&&(j=p[J]=f.length,f[j]=Z),"default"+j}}s(Q,"useDefault");function U(Z,J,j,$){if(i._opts.validateSchema!==!1){var X=Z.definition.dependencies;if(X&&!X.every(function(Fe){return Object.prototype.hasOwnProperty.call(j,Fe)}))throw new Error("parent schema must have all required keywords: "+X.join(","));var ie=Z.definition.validateSchema;if(ie){var ae=ie(J);if(!ae){var te="keyword schema is invalid: "+i.errorsText(ie.errors);if(i._opts.validateSchema=="log")i.logger.error(te);else throw new Error(te)}}}var pe=Z.definition.compile,Ae=Z.definition.inline,Oe=Z.definition.macro,Te;if(pe)Te=pe.call(i,J,j,$);else if(Oe)Te=Oe.call(i,J,j,$),o.validateSchema!==!1&&i.validateSchema(Te,!0);else if(Ae)Te=Ae.call(i,$,Z.keyword,J,j);else if(Te=Z.definition.validate,!Te)return;if(Te===void 0)throw new Error('custom keyword "'+Z.keyword+'"failed to compile');var Je=m.length;return m[Je]=Te,{code:"customRule"+Je,validate:Te}}s(U,"useCustomRule")}s(u5e,"compile");function uRr(t,e,r){var n=avt.call(this,t,e,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:r},{index:n,compiling:!1})}s(uRr,"checkCompiling");function dRr(t,e,r){var n=avt.call(this,t,e,r);n>=0&&this._compilations.splice(n,1)}s(dRr,"endCompiling");function avt(t,e,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==t&&i.root==e&&i.baseId==r)return n}return-1}s(avt,"compIndex");function fRr(t,e){return"var pattern"+t+" = new RegExp("+Ple.toQuotedString(e[t])+");"}s(fRr,"patternCode");function pRr(t){return"var default"+t+" = defaults["+t+"];"}s(pRr,"defaultCode");function mRr(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}s(mRr,"refValCode");function hRr(t){return"var customRule"+t+" = customRules["+t+"];"}s(hRr,"customRuleCode");function kle(t,e){if(!t.length)return"";for(var r="",n=0;n<t.length;n++)r+=e(n,t);return r}s(kle,"vars")});var dvt=H((OBo,uvt)=>{"use strict";d();var Dle=uvt.exports=s(function(){this._cache={}},"Cache");Dle.prototype.put=s(function(e,r){this._cache[e]=r},"Cache_put");Dle.prototype.get=s(function(e){return this._cache[e]},"Cache_get");Dle.prototype.del=s(function(e){delete this._cache[e]},"Cache_del");Dle.prototype.clear=s(function(){this._cache={}},"Cache_clear")});var bvt=H((qBo,Evt)=>{"use strict";d();var gRr=ZP(),ARr=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,yRr=[0,31,28,31,30,31,30,31,31,30,31,30,31],CRr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,fvt=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,vRr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,xRr=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,pvt=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,mvt=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,hvt=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,gvt=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Avt=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,yvt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Evt.exports=Ble;function Ble(t){return t=t=="full"?"full":"fast",gRr.copy(Ble[t])}s(Ble,"formats");Ble.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":pvt,url:mvt,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:fvt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:xvt,uuid:hvt,"json-pointer":gvt,"json-pointer-uri-fragment":Avt,"relative-json-pointer":yvt};Ble.full={date:Cvt,time:vvt,"date-time":IRr,uri:wRr,"uri-reference":xRr,"uri-template":pvt,url:mvt,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:fvt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:xvt,uuid:hvt,"json-pointer":gvt,"json-pointer-uri-fragment":Avt,"relative-json-pointer":yvt};function ERr(t){return t%4===0&&(t%100!==0||t%400===0)}s(ERr,"isLeapYear");function Cvt(t){var e=t.match(ARr);if(!e)return!1;var r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&ERr(r)?29:yRr[n])}s(Cvt,"date");function vvt(t,e){var r=t.match(CRr);if(!r)return!1;var n=r[1],i=r[2],o=r[3],a=r[5];return(n<=23&&i<=59&&o<=59||n==23&&i==59&&o==60)&&(!e||a)}s(vvt,"time");var bRr=/t|\s/i;function IRr(t){var e=t.split(bRr);return e.length==2&&Cvt(e[0])&&vvt(e[1],!0)}s(IRr,"date_time");var TRr=/\/|:/;function wRr(t){return TRr.test(t)&&vRr.test(t)}s(wRr,"uri");var SRr=/[^\\]\\Z/;function xvt(t){if(SRr.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}s(xvt,"regex")});var Tvt=H((WBo,Ivt)=>{"use strict";d();Ivt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,f="data"+(a||""),p="valid"+o,m,h;if(c=="#"||c=="#/")e.isRoot?(m=e.async,h="validate"):(m=e.root.schema.$async===!0,h="root.refVal[0]");else{var g=e.resolveRef(e.baseId,c,e.isRoot);if(g===void 0){var A=e.MissingRefError.message(e.baseId,c);if(e.opts.missingRefs=="fail"){e.logger.error(A);var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",e.opts.messages!==!1&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(A),u&&(i+=" if (true) { ");else throw new e.MissingRefError(e.baseId,c,A)}else if(g.inline){var b=e.util.copy(e);b.level++;var S="valid"+b.level;b.schema=g.schema,b.schemaPath="",b.errSchemaPath=c;var R=e.validate(b).replace(/validate\.schema/g,g.code);i+=" "+R+" ",u&&(i+=" if ("+S+") { ")}else m=g.$async===!0||e.async&&g.$async!==!1,h=g.code}if(h){var y=y||[];y.push(i),i="",e.opts.passContext?i+=" "+h+".call(this, ":i+=" "+h+"( ",i+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var B=a?"data"+(a-1||""):"parentData",L=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+B+" , "+L+", rootData)  ";var O=i;if(i=y.pop(),m){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+p+"; "),i+=" try { await "+O+"; ",u&&(i+=" "+p+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+p+" = false; "),i+=" } ",u&&(i+=" if ("+p+") { ")}else i+=" if (!"+O+") { if (vErrors === null) vErrors = "+h+".errors; else vErrors = vErrors.concat("+h+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i},"generate_ref")});var Svt=H((VBo,wvt)=>{"use strict";d();wvt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.copy(e),f="";u.level++;var p="valid"+u.level,m=u.baseId,h=!0,g=o;if(g)for(var A,y=-1,E=g.length-1;y<E;)A=g[y+=1],(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))&&(h=!1,u.schema=A,u.schemaPath=a+"["+y+"]",u.errSchemaPath=c+"/"+y,i+="  "+e.validate(u)+" ",u.baseId=m,l&&(i+=" if ("+p+") { ",f+="}"));return l&&(h?i+=" if (true) { ":i+=" "+f.slice(0,-1)+" "),i},"generate_allOf")});var Rvt=H((YBo,_vt)=>{"use strict";d();_vt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=c.every(function(Y){return e.opts.strictKeywords?typeof Y=="object"&&Object.keys(Y).length>0||Y===!1:e.util.schemaHasRules(Y,e.RULES.all)});if(E){var b=g.baseId;i+=" var "+h+" = errors; var "+m+" = false;  ";var S=e.compositeRule;e.compositeRule=g.compositeRule=!0;var R=c;if(R)for(var B,L=-1,O=R.length-1;L<O;)B=R[L+=1],g.schema=B,g.schemaPath=l+"["+L+"]",g.errSchemaPath=u+"/"+L,i+="  "+e.validate(g)+" ",g.baseId=b,i+=" "+m+" = "+m+" || "+y+"; if (!"+m+") { ",A+="}";e.compositeRule=g.compositeRule=S,i+=" "+A+" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else f&&(i+=" if (true) { ");return i},"generate_anyOf")});var Pvt=H((ZBo,kvt)=>{"use strict";d();kvt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,l=e.util.toQuotedString(o);return e.opts.$comment===!0?i+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(i+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),i},"generate_comment")});var Bvt=H((r3o,Dvt)=>{"use strict";d();Dvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,h||(i+=" var schema"+o+" = validate.schema"+l+";"),i+="var "+m+" = equal("+p+", schema"+o+"); if (!"+m+") {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",f&&(i+=" else { "),i},"generate_const")});var Mvt=H((o3o,Nvt)=>{"use strict";d();Nvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,S="data"+b,R=e.baseId,B=e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all);if(i+="var "+h+" = errors;var "+m+";",B){var L=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+y+" = false; for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var O=p+"["+E+"]";g.dataPathArr[b]=E;var Y=e.validate(g);g.baseId=R,e.util.varOccurences(Y,S)<2?i+=" "+e.util.varReplace(Y,S,O)+" ":i+=" var "+S+" = "+O+"; "+Y+" ",i+=" if ("+y+") break; }  ",e.compositeRule=g.compositeRule=L,i+=" "+A+" if (!"+y+") {"}else i+=" if ("+p+".length == 0) {";var V=V||[];V.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var z=i;return i=V.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+z+"]); ":i+=" validate.errors = ["+z+"]; return false; ":i+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",B&&(i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},"generate_contains")});var Fvt=H((c3o,Lvt)=>{"use strict";d();Lvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y={},E={},b=e.opts.ownProperties;for(L in c)if(L!="__proto__"){var S=c[L],R=Array.isArray(S)?E:y;R[L]=S}i+="var "+m+" = errors;";var B=e.errorPath;i+="var missing"+o+";";for(var L in E)if(R=E[L],R.length){if(i+=" if ( "+p+e.util.getProperty(L)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(L)+"') "),f){i+=" && ( ";var O=R;if(O)for(var Y,V=-1,z=O.length-1;V<z;){Y=O[V+=1],V&&(i+=" || ");var Q=e.util.getProperty(Y),U=p+Q;i+=" ( ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Y)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?Y:Q)+") ) "}i+=")) {  ";var Z="missing"+o,J="' + "+Z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(B,Z,!0):B+" + "+Z);var j=j||[];j.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+J+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var $=i;i=j.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+$+"]); ":i+=" validate.errors = ["+$+"]; return false; ":i+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var X=R;if(X)for(var Y,ie=-1,ae=X.length-1;ie<ae;){Y=X[ie+=1];var Q=e.util.getProperty(Y),J=e.util.escapeQuotes(Y),U=p+Q;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,Y,e.opts.jsonPointers)),i+=" if ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Y)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+J+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",f&&(g+="}",i+=" else { ")}e.errorPath=B;var te=h.baseId;for(var L in y){var S=y[L];(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))&&(i+=" "+A+" = true; if ( "+p+e.util.getProperty(L)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(L)+"') "),i+=") { ",h.schema=S,h.schemaPath=l+e.util.getProperty(L),h.errSchemaPath=u+"/"+e.util.escapeFragment(L),i+="  "+e.validate(h)+" ",h.baseId=te,i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}"))}return f&&(i+="   "+g+" if ("+m+" == errors) {"),i},"generate_dependencies")});var Qvt=H((d3o,Ovt)=>{"use strict";d();Ovt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="i"+o,y="schema"+o;h||(i+=" var "+y+" = validate.schema"+l+";"),i+="var "+m+";",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=""+m+" = false;for (var "+A+"=0; "+A+"<"+y+".length; "+A+"++) if (equal("+p+", "+y+"["+A+"])) { "+m+" = true; break; }",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;return i=E.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",f&&(i+=" else { "),i},"generate_enum")});var qvt=H((m3o,Uvt)=>{"use strict";d();Uvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||"");if(e.opts.format===!1)return f&&(i+=" if (true) { "),i;var m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=e.opts.unknownFormats,A=Array.isArray(g);if(m){var y="format"+o,E="isObject"+o,b="formatType"+o;i+=" var "+y+" = formats["+h+"]; var "+E+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+b+" = "+E+" && "+y+".type || 'string'; if ("+E+") { ",e.async&&(i+=" var async"+o+" = "+y+".async; "),i+=" "+y+" = "+y+".validate; } if (  ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" (",g!="ignore"&&(i+=" ("+h+" && !"+y+" ",A&&(i+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),i+=") || "),i+=" ("+y+" && "+b+" == '"+n+"' && !(typeof "+y+" == 'function' ? ",e.async?i+=" (async"+o+" ? await "+y+"("+p+") : "+y+"("+p+")) ":i+=" "+y+"("+p+") ",i+=" : "+y+".test("+p+"))))) {"}else{var y=e.formats[c];if(!y){if(g=="ignore")return e.logger.warn('unknown format "'+c+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(i+=" if (true) { "),i;if(A&&g.indexOf(c)>=0)return f&&(i+=" if (true) { "),i;throw new Error('unknown format "'+c+'" is used in schema at path "'+e.errSchemaPath+'"')}var E=typeof y=="object"&&!(y instanceof RegExp)&&y.validate,b=E&&y.type||"string";if(E){var S=y.async===!0;y=y.validate}if(b!=n)return f&&(i+=" if (true) { "),i;if(S){if(!e.async)throw new Error("async format in sync schema");var R="formats"+e.util.getProperty(c)+".validate";i+=" if (!(await "+R+"("+p+"))) { "}else{i+=" if (! ";var R="formats"+e.util.getProperty(c);E&&(R+=".validate"),typeof y=="function"?i+=" "+R+"("+p+") ":i+=" "+R+".test("+p+") ",i+=") { "}}var B=B||[];B.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match format "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var L=i;return i=B.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+L+"]); ":i+=" validate.errors = ["+L+"]; return false; ":i+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { "),i},"generate_format")});var $vt=H((A3o,Hvt)=>{"use strict";d();Hvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e);g.level++;var A="valid"+g.level,y=e.schema.then,E=e.schema.else,b=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),S=E!==void 0&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all)),R=g.baseId;if(b||S){var B;g.createErrors=!1,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+h+" = errors; var "+m+" = true;  ";var L=e.compositeRule;e.compositeRule=g.compositeRule=!0,i+="  "+e.validate(g)+" ",g.baseId=R,g.createErrors=!0,i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=g.compositeRule=L,b?(i+=" if ("+A+") {  ",g.schema=e.schema.then,g.schemaPath=e.schemaPath+".then",g.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",b&&S?(B="ifClause"+o,i+=" var "+B+" = 'then'; "):B="'then'",i+=" } ",S&&(i+=" else { ")):i+=" if (!"+A+") { ",S&&(g.schema=e.schema.else,g.schemaPath=e.schemaPath+".else",g.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",b&&S?(B="ifClause"+o,i+=" var "+B+" = 'else'; "):B="'else'",i+=" } "),i+=" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+B+" } ",e.opts.messages!==!1&&(i+=` , message: 'should match "' + `+B+` + '" schema' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",f&&(i+=" else { ")}else f&&(i+=" if (true) { ");return i},"generate_if")});var jvt=H((v3o,Wvt)=>{"use strict";d();Wvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,S="data"+b,R=e.baseId;if(i+="var "+h+" = errors;var "+m+";",Array.isArray(c)){var B=e.schema.additionalItems;if(B===!1){i+=" "+m+" = "+p+".length <= "+c.length+"; ";var L=u;u=e.errSchemaPath+"/additionalItems",i+="  if (!"+m+") {   ";var O=O||[];O.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c.length+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have more than "+c.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Y=i;i=O.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Y+"]); ":i+=" validate.errors = ["+Y+"]; return false; ":i+=" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u=L,f&&(A+="}",i+=" else { ")}var V=c;if(V){for(var z,Q=-1,U=V.length-1;Q<U;)if(z=V[Q+=1],e.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:e.util.schemaHasRules(z,e.RULES.all)){i+=" "+y+" = true; if ("+p+".length > "+Q+") { ";var Z=p+"["+Q+"]";g.schema=z,g.schemaPath=l+"["+Q+"]",g.errSchemaPath=u+"/"+Q,g.errorPath=e.util.getPathExpr(e.errorPath,Q,e.opts.jsonPointers,!0),g.dataPathArr[b]=Q;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",i+=" }  ",f&&(i+=" if ("+y+") { ",A+="}")}}if(typeof B=="object"&&(e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all))){g.schema=B,g.schemaPath=e.schemaPath+".additionalItems",g.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+y+" = true; if ("+p+".length > "+c.length+") {  for (var "+E+" = "+c.length+"; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var Z=p+"["+E+"]";g.dataPathArr[b]=E;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",f&&(i+=" if (!"+y+") break; "),i+=" } }  ",f&&(i+=" if ("+y+") { ",A+="}")}}else if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+="  for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var Z=p+"["+E+"]";g.dataPathArr[b]=E;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",f&&(i+=" if (!"+y+") break; "),i+=" }"}return f&&(i+=" "+A+" if ("+h+" == errors) {"),i},"generate_items")});var d5e=H((b3o,Gvt)=>{"use strict";d();Gvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,R,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=r=="maximum",A=g?"exclusiveMaximum":"exclusiveMinimum",y=e.schema[A],E=e.opts.$data&&y&&y.$data,b=g?"<":">",S=g?">":"<",R=void 0;if(!(m||typeof c=="number"||c===void 0))throw new Error(r+" must be number");if(!(E||y===void 0||typeof y=="number"||typeof y=="boolean"))throw new Error(A+" must be number or boolean");if(E){var B=e.util.getData(y.$data,a,e.dataPathArr),L="exclusive"+o,O="exclType"+o,Y="exclIsNumber"+o,V="op"+o,z="' + "+V+" + '";i+=" var schemaExcl"+o+" = "+B+"; ",B="schemaExcl"+o,i+=" var "+L+"; var "+O+" = typeof "+B+"; if ("+O+" != 'boolean' && "+O+" != 'undefined' && "+O+" != 'number') { ";var R=A,Q=Q||[];Q.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: '"+A+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;i=Q.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+O+" == 'number' ? ( ("+L+" = "+h+" === undefined || "+B+" "+b+"= "+h+") ? "+p+" "+S+"= "+B+" : "+p+" "+S+" "+h+" ) : ( ("+L+" = "+B+" === true) ? "+p+" "+S+"= "+h+" : "+p+" "+S+" "+h+" ) || "+p+" !== "+p+") { var op"+o+" = "+L+" ? '"+b+"' : '"+b+"='; ",c===void 0&&(R=A,u=e.errSchemaPath+"/"+A,h=B,m=E)}else{var Y=typeof y=="number",z=b;if(Y&&m){var V="'"+z+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" ( "+h+" === undefined || "+y+" "+b+"= "+h+" ? "+p+" "+S+"= "+y+" : "+p+" "+S+" "+h+" ) || "+p+" !== "+p+") { "}else{Y&&c===void 0?(L=!0,R=A,u=e.errSchemaPath+"/"+A,h=y,S+="="):(Y&&(h=Math[g?"min":"max"](y,c)),y===(Y?h:!0)?(L=!0,R=A,u=e.errSchemaPath+"/"+A,S+="="):(L=!1,z+="="));var V="'"+z+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+" "+S+" "+h+" || "+p+" !== "+p+") { "}}R=R||r;var Q=Q||[];Q.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+V+", limit: "+h+", exclusive: "+L+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be "+z+" ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;return i=Q.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { "),i},"generate__limit")});var f5e=H((w3o,Vvt)=>{"use strict";d();Vvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxItems"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+".length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxItems"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitItems")});var p5e=H((R3o,zvt)=>{"use strict";d();zvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxLength"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),e.opts.unicode===!1?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be ",r=="maxLength"?i+="longer":i+="shorter",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitLength")});var m5e=H((D3o,Kvt)=>{"use strict";d();Kvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxProperties"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" Object.keys("+p+").length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxProperties"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitProperties")});var Jvt=H((M3o,Yvt)=>{"use strict";d();Yvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");i+="var division"+o+";if (",m&&(i+=" "+h+" !== undefined && ( typeof "+h+" != 'number' || "),i+=" (division"+o+" = "+p+" / "+h+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",m&&(i+="  )  "),i+=" ) {   ";var g=g||[];g.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be multiple of ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var A=i;return i=g.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+A+"]); ":i+=" validate.errors = ["+A+"]; return false; ":i+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate_multipleOf")});var Zvt=H((O3o,Xvt)=>{"use strict";d();Xvt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e);h.level++;var g="valid"+h.level;if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u,i+=" var "+m+" = errors;  ";var A=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1;var y;h.opts.allErrors&&(y=h.opts.allErrors,h.opts.allErrors=!1),i+=" "+e.validate(h)+" ",h.createErrors=!0,y&&(h.opts.allErrors=y),e.compositeRule=h.compositeRule=A,i+=" if ("+g+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;i=E.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(i+=" if (false) { ");return i},"generate_not")});var txt=H((q3o,ext)=>{"use strict";d();ext.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=g.baseId,b="prevValid"+o,S="passingSchemas"+o;i+="var "+h+" = errors , "+b+" = false , "+m+" = false , "+S+" = null; ";var R=e.compositeRule;e.compositeRule=g.compositeRule=!0;var B=c;if(B)for(var L,O=-1,Y=B.length-1;O<Y;)L=B[O+=1],(e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all))?(g.schema=L,g.schemaPath=l+"["+O+"]",g.errSchemaPath=u+"/"+O,i+="  "+e.validate(g)+" ",g.baseId=E):i+=" var "+y+" = true; ",O&&(i+=" if ("+y+" && "+b+") { "+m+" = false; "+S+" = ["+S+", "+O+"]; } else { ",A+="}"),i+=" if ("+y+") { "+m+" = "+b+" = true; "+S+" = "+O+"; }";return e.compositeRule=g.compositeRule=R,i+=""+A+"if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+S+" } ",e.opts.messages!==!1&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},"generate_oneOf")});var nxt=H((W3o,rxt)=>{"use strict";d();rxt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=m?"(new RegExp("+h+"))":e.usePattern(c);i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" !"+g+".test("+p+") ) {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match pattern "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate_pattern")});var oxt=H((V3o,ixt)=>{"use strict";d();ixt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y="key"+o,E="idx"+o,b=h.dataLevel=e.dataLevel+1,S="data"+b,R="dataProperties"+o,B=Object.keys(c||{}).filter(ie),L=e.schema.patternProperties||{},O=Object.keys(L).filter(ie),Y=e.schema.additionalProperties,V=B.length||O.length,z=Y===!1,Q=typeof Y=="object"&&Object.keys(Y).length,U=e.opts.removeAdditional,Z=z||Q||U,J=e.opts.ownProperties,j=e.baseId,$=e.schema.required;if($&&!(e.opts.$data&&$.$data)&&$.length<e.opts.loopRequired)var X=e.util.toHash($);function ie(Pr){return Pr!=="__proto__"}if(s(ie,"notProto"),i+="var "+m+" = errors;var "+A+" = true;",J&&(i+=" var "+R+" = undefined;"),Z){if(J?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+R+".length; "+E+"++) { var "+y+" = "+R+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",V){if(i+=" var isAdditional"+o+" = !(false ",B.length)if(B.length>8)i+=" || validate.schema"+l+".hasOwnProperty("+y+") ";else{var ae=B;if(ae)for(var te,pe=-1,Ae=ae.length-1;pe<Ae;)te=ae[pe+=1],i+=" || "+y+" == "+e.util.toQuotedString(te)+" "}if(O.length){var Oe=O;if(Oe)for(var Te,Je=-1,Fe=Oe.length-1;Je<Fe;)Te=Oe[Je+=1],i+=" || "+e.usePattern(Te)+".test("+y+") "}i+=" ); if (isAdditional"+o+") { "}if(U=="all")i+=" delete "+p+"["+y+"]; ";else{var lt=e.errorPath,_t="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),z)if(U)i+=" delete "+p+"["+y+"]; ";else{i+=" "+A+" = false; ";var xt=u;u=e.errSchemaPath+"/additionalProperties";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+_t+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=xt,f&&(i+=" break; ")}else if(Q)if(U=="failing"){i+=" var "+m+" = errors;  ";var Ue=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=Y,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",i+=" if (!"+A+") { errors = "+m+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+y+"]; }  ",e.compositeRule=h.compositeRule=Ue}else{h.schema=Y,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",f&&(i+=" if (!"+A+") break; ")}e.errorPath=lt}V&&(i+=" } "),i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}")}var se=e.opts.useDefaults&&!e.compositeRule;if(B.length){var le=B;if(le)for(var te,qe=-1,Be=le.length-1;qe<Be;){te=le[qe+=1];var Ee=c[te];if(e.opts.strictKeywords?typeof Ee=="object"&&Object.keys(Ee).length>0||Ee===!1:e.util.schemaHasRules(Ee,e.RULES.all)){var je=e.util.getProperty(te),ye=p+je,tt=se&&Ee.default!==void 0;h.schema=Ee,h.schemaPath=l+je,h.errSchemaPath=u+"/"+e.util.escapeFragment(te),h.errorPath=e.util.getPath(e.errorPath,te,e.opts.jsonPointers),h.dataPathArr[b]=e.util.toQuotedString(te);var $e=e.validate(h);if(h.baseId=j,e.util.varOccurences($e,S)<2){$e=e.util.varReplace($e,S,ye);var pt=ye}else{var pt=S;i+=" var "+S+" = "+ye+"; "}if(tt)i+=" "+$e+" ";else{if(X&&X[te]){i+=" if ( "+pt+" === undefined ",J&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = false; ";var lt=e.errorPath,xt=u,Ft=e.util.escapeQuotes(te);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(lt,te,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Ft+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Ft+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=xt,e.errorPath=lt,i+=" } else { "}else f?(i+=" if ( "+pt+" === undefined ",J&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = true; } else { "):(i+=" if ("+pt+" !== undefined ",J&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=" ) { ");i+=" "+$e+" } "}}f&&(i+=" if ("+A+") { ",g+="}")}}if(O.length){var Jt=O;if(Jt)for(var Te,Qt=-1,Vr=Jt.length-1;Qt<Vr;){Te=Jt[Qt+=1];var Ee=L[Te];if(e.opts.strictKeywords?typeof Ee=="object"&&Object.keys(Ee).length>0||Ee===!1:e.util.schemaHasRules(Ee,e.RULES.all)){h.schema=Ee,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Te),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Te),J?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+R+".length; "+E+"++) { var "+y+" = "+R+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" if ("+e.usePattern(Te)+".test("+y+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[b]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",f&&(i+=" if (!"+A+") break; "),i+=" } ",f&&(i+=" else "+A+" = true; "),i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}")}}}return f&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_properties")});var axt=H((Y3o,sxt)=>{"use strict";d();sxt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level;if(i+="var "+m+" = errors;",e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u;var y="key"+o,E="idx"+o,b="i"+o,S="' + "+y+" + '",R=h.dataLevel=e.dataLevel+1,B="data"+R,L="dataProperties"+o,O=e.opts.ownProperties,Y=e.baseId;O&&(i+=" var "+L+" = undefined; "),O?i+=" "+L+" = "+L+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+L+".length; "+E+"++) { var "+y+" = "+L+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" var startErrs"+o+" = errors; ";var V=y,z=e.compositeRule;e.compositeRule=h.compositeRule=!0;var Q=e.validate(h);h.baseId=Y,e.util.varOccurences(Q,B)<2?i+=" "+e.util.varReplace(Q,B,V)+" ":i+=" var "+B+" = "+V+"; "+Q+" ",e.compositeRule=h.compositeRule=z,i+=" if (!"+A+") { for (var "+b+"=startErrs"+o+"; "+b+"<errors; "+b+"++) { vErrors["+b+"].propertyName = "+y+"; }   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+S+"' } ",e.opts.messages!==!1&&(i+=" , message: 'property name \\'"+S+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),f&&(i+=" break; "),i+=" } }"}return f&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_propertyNames")});var lxt=H((Z3o,cxt)=>{"use strict";d();cxt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="schema"+o;if(!h)if(c.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var y=[],E=c;if(E)for(var b,S=-1,R=E.length-1;S<R;){b=E[S+=1];var B=e.schema.properties[b];B&&(e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all))||(y[y.length]=b)}}else var y=c;if(h||y.length){var L=e.errorPath,O=h||y.length>=e.opts.loopRequired,Y=e.opts.ownProperties;if(f)if(i+=" var missing"+o+"; ",O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var V="i"+o,z="schema"+o+"["+V+"]",Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(L,z,e.opts.jsonPointers)),i+=" var "+m+" = true; ",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=" for (var "+V+" = 0; "+V+" < "+A+".length; "+V+"++) { "+m+" = "+p+"["+A+"["+V+"]] !== undefined ",Y&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+A+"["+V+"]) "),i+="; if (!"+m+") break; } ",h&&(i+="  }  "),i+="  if (!"+m+") {   ";var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Z=i;i=U.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Z+"]); ":i+=" validate.errors = ["+Z+"]; return false; ":i+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var J=y;if(J)for(var j,V=-1,$=J.length-1;V<$;){j=J[V+=1],V&&(i+=" || ");var X=e.util.getProperty(j),ie=p+X;i+=" ( ( "+ie+" === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:X)+") ) "}i+=") {  ";var z="missing"+o,Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(L,z,!0):L+" + "+z);var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Z=i;i=U.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Z+"]); ":i+=" validate.errors = ["+Z+"]; return false; ":i+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var V="i"+o,z="schema"+o+"["+V+"]",Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(L,z,e.opts.jsonPointers)),h&&(i+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "),i+=" for (var "+V+" = 0; "+V+" < "+A+".length; "+V+"++) { if ("+p+"["+A+"["+V+"]] === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+A+"["+V+"]) "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(i+="  }  ")}else{var ae=y;if(ae)for(var j,te=-1,pe=ae.length-1;te<pe;){j=ae[te+=1];var X=e.util.getProperty(j),Q=e.util.escapeQuotes(j),ie=p+X;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(L,j,e.opts.jsonPointers)),i+=" if ( "+ie+" === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=L}else f&&(i+=" if (true) {");return i},"generate_required")});var dxt=H((rNo,uxt)=>{"use strict";d();uxt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,(c||h)&&e.opts.uniqueItems!==!1){h&&(i+=" var "+m+"; if ("+g+" === false || "+g+" === undefined) "+m+" = true; else if (typeof "+g+" != 'boolean') "+m+" = false; else { "),i+=" var i = "+p+".length , "+m+" = true , j; if (i > 1) { ";var A=e.schema.items&&e.schema.items.type,y=Array.isArray(A);if(!A||A=="object"||A=="array"||y&&(A.indexOf("object")>=0||A.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+m+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var E="checkDataType"+(y?"s":"");i+=" if ("+e.util[E](A,"item",e.opts.strictNumbers,!0)+") continue; ",y&&(i+=` if (typeof item == 'string') item = '"' + item; `),i+=" if (typeof itemIndices[item] == 'number') { "+m+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var b=b||[];b.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var S=i;i=b.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { ")}else f&&(i+=" if (true) { ");return i},"generate_uniqueItems")});var pxt=H((oNo,fxt)=>{"use strict";d();fxt.exports={$ref:Tvt(),allOf:Svt(),anyOf:Rvt(),$comment:Pvt(),const:Bvt(),contains:Mvt(),dependencies:Fvt(),enum:Qvt(),format:qvt(),if:$vt(),items:jvt(),maximum:d5e(),minimum:d5e(),maxItems:f5e(),minItems:f5e(),maxLength:p5e(),minLength:p5e(),maxProperties:m5e(),minProperties:m5e(),multipleOf:Jvt(),not:Zvt(),oneOf:txt(),pattern:nxt(),properties:oxt(),propertyNames:axt(),required:lxt(),uniqueItems:dxt(),validate:l5e()}});var gxt=H((aNo,hxt)=>{"use strict";d();var mxt=pxt(),h5e=ZP().toHash;hxt.exports=s(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],i=["number","integer","string","array","object","boolean","null"];return e.all=h5e(r),e.types=h5e(i),e.forEach(function(o){o.rules=o.rules.map(function(a){var c;if(typeof a=="object"){var l=Object.keys(a)[0];c=a[l],a=l,c.forEach(function(f){r.push(f),e.all[f]=!0})}r.push(a);var u=e.all[a]={keyword:a,code:mxt[a],implements:c};return u}),e.all.$comment={keyword:"$comment",code:mxt.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=h5e(r.concat(n)),e.custom={},e},"rules")});var Cxt=H((uNo,yxt)=>{"use strict";d();var Axt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];yxt.exports=function(t,e){for(var r=0;r<e.length;r++){t=JSON.parse(JSON.stringify(t));var n=e[r].split("/"),i=t,o;for(o=1;o<n.length;o++)i=i[n[o]];for(o=0;o<Axt.length;o++){var a=Axt[o],c=i[a];c&&(i[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}});var Ext=H((fNo,xxt)=>{"use strict";d();var _Rr=_le().MissingRef;xxt.exports=vxt;function vxt(t,e,r){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var i=o(t).then(function(){var c=n._addSchema(t,void 0,e);return c.validate||a(c)});return r&&i.then(function(c){r(null,c)},r),i;function o(c){var l=c.$schema;return l&&!n.getSchema(l)?vxt.call(n,{$ref:l},!0):Promise.resolve()}s(o,"loadMetaSchemaOf");function a(c){try{return n._compile(c)}catch(u){if(u instanceof _Rr)return l(u);throw u}function l(u){var f=u.missingSchema;if(h(f))throw new Error("Schema "+f+" is loaded but "+u.missingRef+" cannot be resolved");var p=n._loadingSchemas[f];return p||(p=n._loadingSchemas[f]=n._opts.loadSchema(f),p.then(m,m)),p.then(function(g){if(!h(f))return o(g).then(function(){h(f)||n.addSchema(g,f,void 0,e)})}).then(function(){return a(c)});function m(){delete n._loadingSchemas[f]}s(m,"removePromise");function h(g){return n._refs[g]||n._schemas[g]}s(h,"added")}s(l,"loadMissingSchema")}s(a,"_compileAsync")}s(vxt,"compileAsync")});var Ixt=H((hNo,bxt)=>{"use strict";d();bxt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p,m="data"+(a||""),h="valid"+o,g="errs__"+o,A=e.opts.$data&&c&&c.$data,y;A?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",y="schema"+o):y=c;var E=this,b="definition"+o,S=E.definition,R="",B,L,O,Y,V;if(A&&S.$data){V="keywordValidate"+o;var z=S.validateSchema;i+=" var "+b+" = RULES.custom['"+r+"'].definition; var "+V+" = "+b+".validate;"}else{if(Y=e.useCustomRule(E,c,e.schema,e),!Y)return;y="validate.schema"+l,V=Y.code,B=S.compile,L=S.inline,O=S.macro}var Q=V+".errors",U="i"+o,Z="ruleErr"+o,J=S.async;if(J&&!e.async)throw new Error("async keyword in sync schema");if(L||O||(i+=""+Q+" = null;"),i+="var "+g+" = errors;var "+h+";",A&&S.$data&&(R+="}",i+=" if ("+y+" === undefined) { "+h+" = true; } else { ",z&&(R+="}",i+=" "+h+" = "+b+".validateSchema("+y+"); if ("+h+") { ")),L)S.statements?i+=" "+Y.validate+" ":i+=" "+h+" = "+Y.validate+"; ";else if(O){var j=e.util.copy(e),R="";j.level++;var $="valid"+j.level;j.schema=Y.validate,j.schemaPath="";var X=e.compositeRule;e.compositeRule=j.compositeRule=!0;var ie=e.validate(j).replace(/validate\.schema/g,V);e.compositeRule=j.compositeRule=X,i+=" "+ie}else{var ae=ae||[];ae.push(i),i="",i+="  "+V+".call( ",e.opts.passContext?i+="this":i+="self",B||S.schema===!1?i+=" , "+m+" ":i+=" , "+y+" , "+m+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var te=a?"data"+(a-1||""):"parentData",pe=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+te+" , "+pe+" , rootData )  ";var Ae=i;i=ae.pop(),S.errors===!1?(i+=" "+h+" = ",J&&(i+="await "),i+=""+Ae+"; "):J?(Q="customErrors"+o,i+=" var "+Q+" = null; try { "+h+" = await "+Ae+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+Q+" = e.errors; else throw e; } "):i+=" "+Q+" = null; "+h+" = "+Ae+"; "}if(S.modifying&&(i+=" if ("+te+") "+m+" = "+te+"["+pe+"];"),i+=""+R,S.valid)f&&(i+=" if (true) { ");else{i+=" if ( ",S.valid===void 0?(i+=" !",O?i+=""+$:i+=""+h):i+=" "+!S.valid+" ",i+=") { ",p=E.keyword;var ae=ae||[];ae.push(i),i="";var ae=ae||[];ae.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";var Oe=i;i=ae.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Oe+"]); ":i+=" validate.errors = ["+Oe+"]; return false; ":i+=" var err = "+Oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Te=i;i=ae.pop(),L?S.errors?S.errors!="full"&&(i+="  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+Z+".schemaPath === undefined) { "+Z+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } "):S.errors===!1?i+=" "+Te+" ":(i+=" if ("+g+" == errors) { "+Te+" } else {  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+Z+".schemaPath === undefined) { "+Z+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } } "):O?(i+="   var err =   ",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):S.errors===!1?i+=" "+Te+" ":(i+=" if (Array.isArray("+Q+")) { if (vErrors === null) vErrors = "+Q+"; else vErrors = vErrors.concat("+Q+"); errors = vErrors.length;  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+";  "+Z+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } } else { "+Te+" } "),i+=" } ",f&&(i+=" else { ")}return i},"generate_custom")});var g5e=H((yNo,RRr)=>{RRr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Sxt=H((CNo,wxt)=>{"use strict";d();var Txt=g5e();wxt.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Txt.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Txt.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var Rxt=H((xNo,_xt)=>{"use strict";d();var kRr=/^[a-z_$][a-z0-9_$-]*$/i,PRr=Ixt(),DRr=Sxt();_xt.exports={add:BRr,get:NRr,remove:MRr,validate:A5e};function BRr(t,e){var r=this.RULES;if(r.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!kRr.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var i=0;i<n.length;i++)a(t,n[i],e);else a(t,n,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}r.keywords[t]=r.all[t]=!0;function a(c,l,u){for(var f,p=0;p<r.length;p++){var m=r[p];if(m.type==l){f=m;break}}f||(f={type:l,rules:[]},r.push(f));var h={keyword:c,definition:u,custom:!0,code:PRr,implements:u.implements};f.rules.push(h),r.custom[c]=h}return s(a,"_addRule"),this}s(BRr,"addKeyword");function NRr(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}s(NRr,"getKeyword");function MRr(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var r=0;r<e.length;r++)for(var n=e[r].rules,i=0;i<n.length;i++)if(n[i].keyword==t){n.splice(i,1);break}return this}s(MRr,"removeKeyword");function A5e(t,e){A5e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(DRr,!0);if(r(t))return!0;if(A5e.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}s(A5e,"validateKeyword")});var kxt=H((INo,LRr)=>{LRr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Uxt=H((TNo,Qxt)=>{"use strict";d();var Dxt=lvt(),e5=Sle(),FRr=dvt(),Bxt=r5e(),ORr=c5e(),QRr=bvt(),URr=gxt(),Nxt=Cxt(),Mxt=ZP();Qxt.exports=Cc;Cc.prototype.validate=HRr;Cc.prototype.compile=$Rr;Cc.prototype.addSchema=WRr;Cc.prototype.addMetaSchema=jRr;Cc.prototype.validateSchema=GRr;Cc.prototype.getSchema=zRr;Cc.prototype.removeSchema=YRr;Cc.prototype.addFormat=ikr;Cc.prototype.errorsText=nkr;Cc.prototype._addSchema=JRr;Cc.prototype._compile=XRr;Cc.prototype.compileAsync=Ext();var Lle=Rxt();Cc.prototype.addKeyword=Lle.add;Cc.prototype.getKeyword=Lle.get;Cc.prototype.removeKeyword=Lle.remove;Cc.prototype.validateKeyword=Lle.validate;var Lxt=_le();Cc.ValidationError=Lxt.Validation;Cc.MissingRefError=Lxt.MissingRef;Cc.$dataMetaSchema=Nxt;var Mle="http://json-schema.org/draft-07/schema",Pxt=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],qRr=["/properties"];function Cc(t){if(!(this instanceof Cc))return new Cc(t);t=this._opts=Mxt.copy(t)||{},ukr(this),this._schemas={},this._refs={},this._fragments={},this._formats=QRr(t.format),this._cache=t.cache||new FRr,this._loadingSchemas={},this._compilations=[],this.RULES=URr(),this._getId=ZRr(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=ORr),this._metaOpts=lkr(this),t.formats&&akr(this),t.keywords&&ckr(this),okr(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),skr(this)}s(Cc,"Ajv");function HRr(t,e){var r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);r=n.validate||this._compile(n)}var i=r(e);return r.$async!==!0&&(this.errors=r.errors),i}s(HRr,"validate");function $Rr(t,e){var r=this._addSchema(t,void 0,e);return r.validate||this._compile(r)}s($Rr,"compile");function WRr(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.addSchema(t[i],void 0,r,n);return this}var o=this._getId(t);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=e5.normalizeId(e||o),Oxt(this,e),this._schemas[e]=this._addSchema(t,r,n,!0),this}s(WRr,"addSchema");function jRr(t,e,r){return this.addSchema(t,e,r,!0),this}s(jRr,"addMetaSchema");function GRr(t,e){var r=t.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||VRr(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,t);if(!n&&e){var i="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(i);else throw new Error(i)}return n}s(GRr,"validateSchema");function VRr(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(Mle)?Mle:void 0,t._opts.defaultMeta}s(VRr,"defaultMeta");function zRr(t){var e=Fxt(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return KRr(this,t)}}s(zRr,"getSchema");function KRr(t,e){var r=e5.schema.call(t,{schema:{}},e);if(r){var n=r.schema,i=r.root,o=r.baseId,a=Dxt.call(t,n,i,void 0,o);return t._fragments[e]=new Bxt({ref:e,fragment:!0,schema:n,root:i,baseId:o,validate:a}),a}}s(KRr,"_getSchemaFragment");function Fxt(t,e){return e=e5.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}s(Fxt,"_getSchemaObj");function YRr(t){if(t instanceof RegExp)return Nle(this,this._schemas,t),Nle(this,this._refs,t),this;switch(typeof t){case"undefined":return Nle(this,this._schemas),Nle(this,this._refs),this._cache.clear(),this;case"string":var e=Fxt(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var r=this._opts.serialize,n=r?r(t):t;this._cache.del(n);var i=this._getId(t);i&&(i=e5.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this}s(YRr,"removeSchema");function Nle(t,e,r){for(var n in e){var i=e[n];!i.meta&&(!r||r.test(n))&&(t._cache.del(i.cacheKey),delete e[n])}}s(Nle,"_removeAllSchemas");function JRr(t,e,r,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(t):t,a=this._cache.get(o);if(a)return a;n=n||this._opts.addUsedSchema!==!1;var c=e5.normalizeId(this._getId(t));c&&n&&Oxt(this,c);var l=this._opts.validateSchema!==!1&&!e,u;l&&!(u=c&&c==e5.normalizeId(t.$schema))&&this.validateSchema(t,!0);var f=e5.ids.call(this,t),p=new Bxt({id:c,schema:t,localRefs:f,cacheKey:o,meta:r});return c[0]!="#"&&n&&(this._refs[c]=p),this._cache.put(o,p),l&&u&&this.validateSchema(t,!0),p}s(JRr,"_addSchema");function XRr(t,e){if(t.compiling)return t.validate=i,i.schema=t.schema,i.errors=null,i.root=e||i,t.schema.$async===!0&&(i.$async=!0),i;t.compiling=!0;var r;t.meta&&(r=this._opts,this._opts=this._metaOpts);var n;try{n=Dxt.call(this,t.schema,e,t.localRefs)}catch(o){throw delete t.validate,o}finally{t.compiling=!1,t.meta&&(this._opts=r)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function i(){var o=t.validate,a=o.apply(this,arguments);return i.errors=o.errors,a}s(i,"callValidate")}s(XRr,"_compile");function ZRr(t){switch(t.schemaId){case"auto":return rkr;case"id":return ekr;default:return tkr}}s(ZRr,"chooseGetId");function ekr(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}s(ekr,"_getId");function tkr(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}s(tkr,"_get$Id");function rkr(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}s(rkr,"_get$IdOrId");function nkr(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,i="",o=0;o<t.length;o++){var a=t[o];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)}s(nkr,"errorsText");function ikr(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}s(ikr,"addFormat");function okr(t){var e;if(t._opts.$data&&(e=kxt(),t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var r=g5e();t._opts.$data&&(r=Nxt(r,qRr)),t.addMetaSchema(r,Mle,!0),t._refs["http://json-schema.org/schema"]=Mle}}s(okr,"addDefaultMetaSchema");function skr(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var r in e)t.addSchema(e[r],r)}s(skr,"addInitialSchemas");function akr(t){for(var e in t._opts.formats){var r=t._opts.formats[e];t.addFormat(e,r)}}s(akr,"addInitialFormats");function ckr(t){for(var e in t._opts.keywords){var r=t._opts.keywords[e];t.addKeyword(e,r)}}s(ckr,"addInitialKeywords");function Oxt(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}s(Oxt,"checkUnique");function lkr(t){for(var e=Mxt.copy(t._opts),r=0;r<Pxt.length;r++)delete e[Pxt[r]];return e}s(lkr,"getMetaSchemaOptions");function ukr(t){var e=t._opts.logger;if(e===!1)t.logger={log:y5e,warn:y5e,error:y5e};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}s(ukr,"setLogger");function y5e(){}s(y5e,"noop")});var sEt=H((W8o,oEt)=>{d();oEt.exports=iEt;iEt.sync=Fkr;var rEt=require("fs");function Lkr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(Lkr,"checkPathExt");function nEt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:Lkr(e,r)}s(nEt,"checkStat");function iEt(t,e,r){rEt.stat(t,function(n,i){r(n,n?!1:nEt(i,t,e))})}s(iEt,"isexe");function Fkr(t,e){return nEt(rEt.statSync(t),t,e)}s(Fkr,"sync")});var dEt=H((V8o,uEt)=>{d();uEt.exports=cEt;cEt.sync=Okr;var aEt=require("fs");function cEt(t,e,r){aEt.stat(t,function(n,i){r(n,n?!1:lEt(i,e))})}s(cEt,"isexe");function Okr(t,e){return lEt(aEt.statSync(t),e)}s(Okr,"sync");function lEt(t,e){return t.isFile()&&Qkr(t,e)}s(lEt,"checkStat");function Qkr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),f=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&f&&o===0;return p}s(Qkr,"checkMode")});var pEt=H((J8o,fEt)=>{d();var Y8o=require("fs"),Gle;process.platform==="win32"||global.TESTING_WINDOWS?Gle=sEt():Gle=dEt();fEt.exports=F5e;F5e.sync=Ukr;function F5e(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){F5e(t,e||{},function(o,a){o?i(o):n(a)})})}Gle(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(F5e,"isexe");function Ukr(t,e){try{return Gle.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(Ukr,"sync")});var vEt=H((eMo,CEt)=>{d();var zM=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",mEt=require("path"),qkr=zM?";":":",hEt=pEt(),gEt=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),AEt=s((t,e)=>{let r=e.colon||qkr,n=t.match(/\//)||zM&&t.match(/\\/)?[""]:[...zM?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=zM?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=zM?i.split(r):[""];return zM&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),yEt=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=AEt(t,e),a=[],c=s(u=>new Promise((f,p)=>{if(u===n.length)return e.all&&a.length?f(a):p(gEt(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=mEt.join(h,t),A=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;f(l(A,u,0))}),"step"),l=s((u,f,p)=>new Promise((m,h)=>{if(p===i.length)return m(c(f+1));let g=i[p];hEt(u+g,{pathExt:o},(A,y)=>{if(!A&&y)if(e.all)a.push(u+g);else return m(u+g);return m(l(u,f,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),Hkr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=AEt(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=mEt.join(l,t),f=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=f+n[p];try{if(hEt.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw gEt(t)},"whichSync");CEt.exports=yEt;yEt.sync=Hkr});var EEt=H((nMo,O5e)=>{"use strict";d();var xEt=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");O5e.exports=xEt;O5e.exports.default=xEt});var wEt=H((sMo,TEt)=>{"use strict";d();var bEt=require("path"),$kr=vEt(),Wkr=EEt();function IEt(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=$kr.sync(t.command,{path:r[Wkr({env:r})],pathExt:e?bEt.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=bEt.resolve(i?t.options.cwd:"",a)),a}s(IEt,"resolveCommandAttempt");function jkr(t){return IEt(t)||IEt(t,!0)}s(jkr,"resolveCommand");TEt.exports=jkr});var SEt=H((lMo,U5e)=>{"use strict";d();var Q5e=/([()\][%!^"`<>&|;, *?])/g;function Gkr(t){return t=t.replace(Q5e,"^$1"),t}s(Gkr,"escapeCommand");function Vkr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(Q5e,"^$1"),e&&(t=t.replace(Q5e,"^$1")),t}s(Vkr,"escapeArgument");U5e.exports.command=Gkr;U5e.exports.argument=Vkr});var REt=H((fMo,_Et)=>{"use strict";d();_Et.exports=/^#!(.*)/});var PEt=H((mMo,kEt)=>{"use strict";d();var zkr=REt();kEt.exports=(t="")=>{let e=t.match(zkr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var BEt=H((gMo,DEt)=>{"use strict";d();var q5e=require("fs"),Kkr=PEt();function Ykr(t){let r=Buffer.alloc(150),n;try{n=q5e.openSync(t,"r"),q5e.readSync(n,r,0,150,0),q5e.closeSync(n)}catch{}return Kkr(r.toString())}s(Ykr,"readShebang");DEt.exports=Ykr});var FEt=H((CMo,LEt)=>{"use strict";d();var Jkr=require("path"),NEt=wEt(),MEt=SEt(),Xkr=BEt(),Zkr=process.platform==="win32",ePr=/\.(?:com|exe)$/i,tPr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function rPr(t){t.file=NEt(t);let e=t.file&&Xkr(t.file);return e?(t.args.unshift(t.file),t.command=e,NEt(t)):t.file}s(rPr,"detectShebang");function nPr(t){if(!Zkr)return t;let e=rPr(t),r=!ePr.test(e);if(t.options.forceShell||r){let n=tPr.test(e);t.command=Jkr.normalize(t.command),t.command=MEt.command(t.command),t.args=t.args.map(o=>MEt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(nPr,"parseNonShell");function iPr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:nPr(n)}s(iPr,"parse");LEt.exports=iPr});var UEt=H((EMo,QEt)=>{"use strict";d();var H5e=process.platform==="win32";function $5e(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s($5e,"notFoundError");function oPr(t,e){if(!H5e)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=OEt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(oPr,"hookChildProcess");function OEt(t,e){return H5e&&t===1&&!e.file?$5e(e.original,"spawn"):null}s(OEt,"verifyENOENT");function sPr(t,e){return H5e&&t===1&&!e.file?$5e(e.original,"spawnSync"):null}s(sPr,"verifyENOENTSync");QEt.exports={hookChildProcess:oPr,verifyENOENT:OEt,verifyENOENTSync:sPr,notFoundError:$5e}});var $Et=H((TMo,KM)=>{"use strict";d();var qEt=require("child_process"),W5e=FEt(),j5e=UEt();function HEt(t,e,r){let n=W5e(t,e,r),i=qEt.spawn(n.command,n.args,n.options);return j5e.hookChildProcess(i,n),i}s(HEt,"spawn");function aPr(t,e,r){let n=W5e(t,e,r),i=qEt.spawnSync(n.command,n.args,n.options);return i.error=i.error||j5e.verifyENOENTSync(i.status,n),i}s(aPr,"spawnSync");KM.exports=HEt;KM.exports.spawn=HEt;KM.exports.sync=aPr;KM.exports._parse=W5e;KM.exports._enoent=j5e});var bPr={};xa(bPr,{getTokenizer:()=>Ni,getTokenizerAsync:()=>lWe,main:()=>cbt});module.exports=DIt(bPr);d();d();LDe().install();d();d();d();var F_=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(F_||{}),Jc=class{static{s(this,"LogTarget")}},eC=class{static{s(this,"TelemetryLogSender")}},Ct=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Jc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(eC).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(eC).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},un=new Ct("default");d();d();d();var T9="github.copilot",FDe="github-enterprise";d();d();d();d();d();d();var ba=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};d();d();var Fm=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return TW(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};d();var Om="X-Copilot-RelatedPluginVersion-",w9=($=>($.Market="X-MSEdge-Market",$.CorpNet="X-FD-Corpnet",$.Build="X-VSCode-Build",$.ApplicationVersion="X-VSCode-AppVersion",$.TargetPopulation="X-VSCode-TargetPopulation",$.ClientId="X-MSEdge-ClientId",$.ExtensionName="X-VSCode-ExtensionName",$.ExtensionVersion="X-VSCode-ExtensionVersion",$.ExtensionRelease="X-VSCode-ExtensionRelease",$.Language="X-VSCode-Language",$.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",$.CopilotEngine="X-Copilot-Engine",$.CopilotOverrideEngine="X-Copilot-OverrideEngine",$.CopilotRepository="X-Copilot-Repository",$.CopilotFileType="X-Copilot-FileType",$.CopilotUserKind="X-Copilot-UserKind",$.CopilotDogfood="X-Copilot-Dogfood",$.CopilotCustomModel="X-Copilot-CustomModel",$.CopilotOrgs="X-Copilot-Orgs",$.CopilotCustomModelNames="X-Copilot-CustomModelNames",$.CopilotTrackingId="X-Copilot-CopilotTrackingId",$.CopilotClientVersion="X-Copilot-ClientVersion",$.CopilotRelatedPluginVersionCppTools=Om+"msvscodecpptools",$.CopilotRelatedPluginVersionCMakeTools=Om+"msvscodecmaketools",$.CopilotRelatedPluginVersionMakefileTools=Om+"msvscodemakefiletools",$.CopilotRelatedPluginVersionCSharpDevKit=Om+"msdotnettoolscsdevkit",$.CopilotRelatedPluginVersionPython=Om+"mspythonpython",$.CopilotRelatedPluginVersionPylance=Om+"mspythonvscodepylance",$.CopilotRelatedPluginVersionJavaPack=Om+"vscjavavscodejavapack",$.CopilotRelatedPluginVersionTypescript=Om+"vscodetypescriptlanguagefeatures",$.CopilotRelatedPluginVersionTypescriptNext=Om+"msvscodevscodetypescriptnext",$.CopilotRelatedPluginVersionCSharp=Om+"msdotnettoolscsharp",$))(w9||{});var ATt={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},O_=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=ATt[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};d();d();function ffe(t){let e=t.getTokenValue("tid"),r=t.organization_list,n=t.enterprise_list,i=t.getTokenValue("sku");if(!e)return;let o={copilot_trackingId:e};return r&&(o.organizations_list=r.toString()),n&&(o.enterprise_list=n.toString()),i&&(o.sku=i),o}s(ffe,"propertiesFromCopilotToken");var Lu=class{static{s(this,"TelemetryUserConfig")}#e={};constructor(e,r,n,i){r&&(this.#e={copilot_trackingId:r}),this.optedIn=n??!1,this.ftFlag=i??"",Ps(e,o=>this.updateFromToken(o))}getProperties(){return this.#e}get trackingId(){return this.#e.copilot_trackingId}updateFromToken(e){let r=ffe(e);r&&(this.#e=r,this.optedIn=e.getTokenValue("rt")==="1",this.ftFlag=e.getTokenValue("ft")??"")}};var uj=Ne(AI()),dj=Ne(require("os"));var yTt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function CTt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(yTt),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(CTt,"buildExceptionDetail");function hfe(t,e){let r=t.get(hn),n=r.getEditorInfo(),i=t.get(Lu),o={"#editor":n.devName??n.name,"#editor_version":tC({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":tC(r.getEditorPluginInfo()),"#session_id":t.get(Ds).sessionId,"#machine_id":t.get(Ds).machineId,"#architecture":dj.arch(),"#os_platform":dj.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(hfe,"buildContext");function GBe(t,e){let r=t.get(Io),n=t.get(hn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:hfe(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let f=CTt(l);o.exception_detail.unshift(f),a.unshift([l,f]),c+=1,l=l.cause}let u=[];for(let[f,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${f.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,uj.SHA256)(uj.enc.Utf16.parse(u.join(`
`))).toString()),o}s(GBe,"buildPayload");d();var _9=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};d();d();var zBe=Ne(AI());var wr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},Q_=class extends wr{constructor(r,n=120*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},pj=class extends wr{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}dispose(){this.clear()}};var rC=class{constructor(e=5){this.perTenMinutes=e;this.cache=new wr}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};d();var Qm=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:YBe(r,n),verboseLogging:xTt(r,n),testMode:e,simulation:vTt(n)})}};function Vg(t){return t.get(Qm).flags.testMode}s(Vg,"isRunningInTest");function _4(t){return Vg(t)}s(_4,"shouldFailForDebugPurposes");function R9(t){return t.get(Qm).flags.debug}s(R9,"isDebugEnabled");function KBe(t){return t.get(Qm).flags.verboseLogging}s(KBe,"isVerboseLoggingEnabled");function YBe(t,e){return t.includes("--debug")||gfe(e,"DEBUG")}s(YBe,"determineDebugFlag");function vTt(t){return gfe(t,"SIMULATION")}s(vTt,"determineSimulationFlag");function mj(t){return t.get(Qm).flags.simulation}s(mj,"isRunningInSimulation");function xTt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||gfe(e,"VERBOSE")||YBe(t,e)}s(xTt,"determineVerboseLoggingEnabled");function gfe(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(gfe,"determineEnvFlagEnabled");d();var Xc=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};d();var ZBe=require("os"),e3e=Ne(require("path"));function k9(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(k9,"redactPaths");var ETt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),bTt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function yfe(t){if(ETt.has(t))return t;for(let e of bTt)if(e.test(t))return t;return k9(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(yfe,"redactMessage");function hj(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(hj,"escapeForRegExp");var ITt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+hj((0,ZBe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function Afe(t){return t.replace(ITt,"~")}s(Afe,"redactHomeDir");var t3e="[\\\\/]?([^:)]*)(?=:\\d)",JBe=new RegExp(hj(e3e.sep),"g"),XBe=new RegExp(hj(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+t3e,"gi");function Cfe(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if(XBe.test(c))i.stack+=`
${k9(c.replace(XBe,(l,u)=>"./"+u.replace(JBe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${k9(c)}`;else{let l=!1;for(let{prefix:u,path:f}of n){let p=new RegExp(hj(f.replace(/[\\/]$/,""))+t3e,"gi");if(p.test(c)){i.stack+=`
${k9(c.replace(p,(m,h)=>u+h.replace(JBe,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${Afe(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=Afe(o));return t.cause instanceof Error&&(i.cause=Cfe(t.cause,e,r,n)),i}s(Cfe,"cloneError");function r3e(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(r3e,"errorMessageWithoutPath");function n3e(t,e){return Cfe(t,s(function(n){return Afe(r3e(n))},"prepareMessage"),!0,e)}s(n3e,"prepareErrorForRestrictedTelemetry");function i3e(t,e,r=!1){return Cfe(t,s(function(i){if(r)return yfe(r3e(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=k9(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(i3e,"redactError");d();d();var Ed={};xa(Ed,{HasPropertyKey:()=>gj,IsArray:()=>_c,IsAsyncIterator:()=>vfe,IsBigInt:()=>P9,IsBoolean:()=>Dv,IsDate:()=>U_,IsFunction:()=>xfe,IsIterator:()=>Efe,IsNull:()=>bfe,IsNumber:()=>up,IsObject:()=>ss,IsRegExp:()=>D9,IsString:()=>Is,IsSymbol:()=>Ife,IsUint8Array:()=>Bv,IsUndefined:()=>Rc});d();function gj(t,e){return e in t}s(gj,"HasPropertyKey");function vfe(t){return ss(t)&&!_c(t)&&!Bv(t)&&Symbol.asyncIterator in t}s(vfe,"IsAsyncIterator");function _c(t){return Array.isArray(t)}s(_c,"IsArray");function P9(t){return typeof t=="bigint"}s(P9,"IsBigInt");function Dv(t){return typeof t=="boolean"}s(Dv,"IsBoolean");function U_(t){return t instanceof globalThis.Date}s(U_,"IsDate");function xfe(t){return typeof t=="function"}s(xfe,"IsFunction");function Efe(t){return ss(t)&&!_c(t)&&!Bv(t)&&Symbol.iterator in t}s(Efe,"IsIterator");function bfe(t){return t===null}s(bfe,"IsNull");function up(t){return typeof t=="number"}s(up,"IsNumber");function ss(t){return typeof t=="object"&&t!==null}s(ss,"IsObject");function D9(t){return t instanceof globalThis.RegExp}s(D9,"IsRegExp");function Is(t){return typeof t=="string"}s(Is,"IsString");function Ife(t){return typeof t=="symbol"}s(Ife,"IsSymbol");function Bv(t){return t instanceof globalThis.Uint8Array}s(Bv,"IsUint8Array");function Rc(t){return t===void 0}s(Rc,"IsUndefined");function TTt(t){return t.map(e=>Aj(e))}s(TTt,"ArrayType");function wTt(t){return new Date(t.getTime())}s(wTt,"DateType");function STt(t){return new Uint8Array(t)}s(STt,"Uint8ArrayType");function _Tt(t){return new RegExp(t.source,t.flags)}s(_Tt,"RegExpType");function RTt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Aj(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Aj(t[r]);return e}s(RTt,"ObjectType");function Aj(t){return _c(t)?TTt(t):U_(t)?wTt(t):Bv(t)?STt(t):D9(t)?_Tt(t):ss(t)?RTt(t):t}s(Aj,"Visit");function zs(t){return Aj(t)}s(zs,"Clone");function R4(t,e){return e===void 0?zs(t):zs({...e,...t})}s(R4,"CloneType");d();d();d();function yj(t){return Si(t)&&globalThis.Symbol.asyncIterator in t}s(yj,"IsAsyncIterator");function Cj(t){return Si(t)&&globalThis.Symbol.iterator in t}s(Cj,"IsIterator");function Tfe(t){return Si(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(Tfe,"IsStandardObject");function vj(t){return t instanceof globalThis.Promise}s(vj,"IsPromise");function cf(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(cf,"IsDate");function o3e(t){return t instanceof globalThis.Map}s(o3e,"IsMap");function s3e(t){return t instanceof globalThis.Set}s(s3e,"IsSet");function Um(t){return globalThis.ArrayBuffer.isView(t)}s(Um,"IsTypedArray");function k4(t){return t instanceof globalThis.Uint8Array}s(k4,"IsUint8Array");function kn(t,e){return e in t}s(kn,"HasPropertyKey");function Si(t){return t!==null&&typeof t=="object"}s(Si,"IsObject");function Pn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(Pn,"IsArray");function Ks(t){return t===void 0}s(Ks,"IsUndefined");function Nv(t){return t===null}s(Nv,"IsNull");function nC(t){return typeof t=="boolean"}s(nC,"IsBoolean");function cn(t){return typeof t=="number"}s(cn,"IsNumber");function xj(t){return globalThis.Number.isInteger(t)}s(xj,"IsInteger");function Fu(t){return typeof t=="bigint"}s(Fu,"IsBigInt");function yo(t){return typeof t=="string"}s(yo,"IsString");function yI(t){return typeof t=="function"}s(yI,"IsFunction");function Mv(t){return typeof t=="symbol"}s(Mv,"IsSymbol");function dp(t){return Fu(t)||nC(t)||Nv(t)||cn(t)||yo(t)||Mv(t)||Ks(t)}s(dp,"IsValueType");var Bs;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=Si(a);return t.AllowArrayObject?c:c&&!Pn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?cn(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=Ks(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(Bs||(Bs={}));d();function kTt(t){return globalThis.Object.freeze(t).map(e=>B9(e))}s(kTt,"ImmutableArray");function PTt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=B9(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=B9(t[r]);return globalThis.Object.freeze(e)}s(PTt,"ImmutableObject");function B9(t){return _c(t)?kTt(t):U_(t)?t:Bv(t)?t:D9(t)?t:ss(t)?PTt(t):t}s(B9,"Immutable");function at(t,e){let r=e!==void 0?{...e,...t}:t;switch(Bs.InstanceMode){case"freeze":return B9(r);case"clone":return zs(r);default:return r}}s(at,"CreateType");d();var Dn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};d();d();d();var Ia=Symbol.for("TypeBox.Transform"),zg=Symbol.for("TypeBox.Readonly"),Ou=Symbol.for("TypeBox.Optional"),qm=Symbol.for("TypeBox.Hint"),ot=Symbol.for("TypeBox.Kind");function P4(t){return ss(t)&&t[zg]==="Readonly"}s(P4,"IsReadonly");function e0(t){return ss(t)&&t[Ou]==="Optional"}s(e0,"IsOptional");function wfe(t){return so(t,"Any")}s(wfe,"IsAny");function Sfe(t){return so(t,"Argument")}s(Sfe,"IsArgument");function Kg(t){return so(t,"Array")}s(Kg,"IsArray");function q_(t){return so(t,"AsyncIterator")}s(q_,"IsAsyncIterator");function H_(t){return so(t,"BigInt")}s(H_,"IsBigInt");function Lv(t){return so(t,"Boolean")}s(Lv,"IsBoolean");function Yg(t){return so(t,"Computed")}s(Yg,"IsComputed");function Jg(t){return so(t,"Constructor")}s(Jg,"IsConstructor");function DTt(t){return so(t,"Date")}s(DTt,"IsDate");function Xg(t){return so(t,"Function")}s(Xg,"IsFunction");function Zg(t){return so(t,"Integer")}s(Zg,"IsInteger");function Ha(t){return so(t,"Intersect")}s(Ha,"IsIntersect");function $_(t){return so(t,"Iterator")}s($_,"IsIterator");function so(t,e){return ss(t)&&ot in t&&t[ot]===e}s(so,"IsKindOf");function Ej(t){return Dv(t)||up(t)||Is(t)}s(Ej,"IsLiteralValue");function fp(t){return so(t,"Literal")}s(fp,"IsLiteral");function pp(t){return so(t,"MappedKey")}s(pp,"IsMappedKey");function Ys(t){return so(t,"MappedResult")}s(Ys,"IsMappedResult");function CI(t){return so(t,"Never")}s(CI,"IsNever");function BTt(t){return so(t,"Not")}s(BTt,"IsNot");function N9(t){return so(t,"Null")}s(N9,"IsNull");function eA(t){return so(t,"Number")}s(eA,"IsNumber");function kc(t){return so(t,"Object")}s(kc,"IsObject");function W_(t){return so(t,"Promise")}s(W_,"IsPromise");function j_(t){return so(t,"Record")}s(j_,"IsRecord");function tc(t){return so(t,"Ref")}s(tc,"IsRef");function _fe(t){return so(t,"RegExp")}s(_fe,"IsRegExp");function Fv(t){return so(t,"String")}s(Fv,"IsString");function M9(t){return so(t,"Symbol")}s(M9,"IsSymbol");function mp(t){return so(t,"TemplateLiteral")}s(mp,"IsTemplateLiteral");function NTt(t){return so(t,"This")}s(NTt,"IsThis");function Oo(t){return ss(t)&&Ia in t}s(Oo,"IsTransform");function hp(t){return so(t,"Tuple")}s(hp,"IsTuple");function Ov(t){return so(t,"Undefined")}s(Ov,"IsUndefined");function Co(t){return so(t,"Union")}s(Co,"IsUnion");function MTt(t){return so(t,"Uint8Array")}s(MTt,"IsUint8Array");function LTt(t){return so(t,"Unknown")}s(LTt,"IsUnknown");function FTt(t){return so(t,"Unsafe")}s(FTt,"IsUnsafe");function OTt(t){return so(t,"Void")}s(OTt,"IsVoid");function vI(t){return ss(t)&&ot in t&&Is(t[ot])}s(vI,"IsKind");function Ta(t){return wfe(t)||Sfe(t)||Kg(t)||Lv(t)||H_(t)||q_(t)||Yg(t)||Jg(t)||DTt(t)||Xg(t)||Zg(t)||Ha(t)||$_(t)||fp(t)||pp(t)||Ys(t)||CI(t)||BTt(t)||N9(t)||eA(t)||kc(t)||W_(t)||j_(t)||tc(t)||_fe(t)||Fv(t)||M9(t)||mp(t)||NTt(t)||hp(t)||Ov(t)||Co(t)||MTt(t)||LTt(t)||FTt(t)||OTt(t)||vI(t)}s(Ta,"IsSchema");var Le={};xa(Le,{IsAny:()=>u3e,IsArgument:()=>d3e,IsArray:()=>f3e,IsAsyncIterator:()=>p3e,IsBigInt:()=>m3e,IsBoolean:()=>h3e,IsComputed:()=>g3e,IsConstructor:()=>A3e,IsDate:()=>y3e,IsFunction:()=>C3e,IsImport:()=>WTt,IsInteger:()=>v3e,IsIntersect:()=>x3e,IsIterator:()=>E3e,IsKind:()=>z3e,IsKindOf:()=>Ui,IsLiteral:()=>F9,IsLiteralBoolean:()=>jTt,IsLiteralNumber:()=>I3e,IsLiteralString:()=>b3e,IsLiteralValue:()=>T3e,IsMappedKey:()=>w3e,IsMappedResult:()=>S3e,IsNever:()=>_3e,IsNot:()=>R3e,IsNull:()=>k3e,IsNumber:()=>P3e,IsObject:()=>D3e,IsOptional:()=>$Tt,IsPromise:()=>B3e,IsProperties:()=>bj,IsReadonly:()=>HTt,IsRecord:()=>N3e,IsRecursive:()=>GTt,IsRef:()=>M3e,IsRegExp:()=>L3e,IsSchema:()=>Js,IsString:()=>F3e,IsSymbol:()=>O3e,IsTemplateLiteral:()=>Q3e,IsThis:()=>U3e,IsTransform:()=>q3e,IsTuple:()=>H3e,IsUint8Array:()=>W3e,IsUndefined:()=>$3e,IsUnion:()=>Dfe,IsUnionLiteral:()=>VTt,IsUnknown:()=>j3e,IsUnsafe:()=>G3e,IsVoid:()=>V3e,TypeGuardUnknownTypeError:()=>Rfe});d();var Rfe=class extends Dn{static{s(this,"TypeGuardUnknownTypeError")}},QTt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function a3e(t){try{return new RegExp(t),!0}catch{return!1}}s(a3e,"IsPattern");function kfe(t){if(!Is(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(kfe,"IsControlCharacterFree");function c3e(t){return Pfe(t)||Js(t)}s(c3e,"IsAdditionalProperties");function L9(t){return Rc(t)||P9(t)}s(L9,"IsOptionalBigInt");function Ts(t){return Rc(t)||up(t)}s(Ts,"IsOptionalNumber");function Pfe(t){return Rc(t)||Dv(t)}s(Pfe,"IsOptionalBoolean");function as(t){return Rc(t)||Is(t)}s(as,"IsOptionalString");function UTt(t){return Rc(t)||Is(t)&&kfe(t)&&a3e(t)}s(UTt,"IsOptionalPattern");function qTt(t){return Rc(t)||Is(t)&&kfe(t)}s(qTt,"IsOptionalFormat");function l3e(t){return Rc(t)||Js(t)}s(l3e,"IsOptionalSchema");function HTt(t){return ss(t)&&t[zg]==="Readonly"}s(HTt,"IsReadonly");function $Tt(t){return ss(t)&&t[Ou]==="Optional"}s($Tt,"IsOptional");function u3e(t){return Ui(t,"Any")&&as(t.$id)}s(u3e,"IsAny");function d3e(t){return Ui(t,"Argument")&&up(t.index)}s(d3e,"IsArgument");function f3e(t){return Ui(t,"Array")&&t.type==="array"&&as(t.$id)&&Js(t.items)&&Ts(t.minItems)&&Ts(t.maxItems)&&Pfe(t.uniqueItems)&&l3e(t.contains)&&Ts(t.minContains)&&Ts(t.maxContains)}s(f3e,"IsArray");function p3e(t){return Ui(t,"AsyncIterator")&&t.type==="AsyncIterator"&&as(t.$id)&&Js(t.items)}s(p3e,"IsAsyncIterator");function m3e(t){return Ui(t,"BigInt")&&t.type==="bigint"&&as(t.$id)&&L9(t.exclusiveMaximum)&&L9(t.exclusiveMinimum)&&L9(t.maximum)&&L9(t.minimum)&&L9(t.multipleOf)}s(m3e,"IsBigInt");function h3e(t){return Ui(t,"Boolean")&&t.type==="boolean"&&as(t.$id)}s(h3e,"IsBoolean");function g3e(t){return Ui(t,"Computed")&&Is(t.target)&&_c(t.parameters)&&t.parameters.every(e=>Js(e))}s(g3e,"IsComputed");function A3e(t){return Ui(t,"Constructor")&&t.type==="Constructor"&&as(t.$id)&&_c(t.parameters)&&t.parameters.every(e=>Js(e))&&Js(t.returns)}s(A3e,"IsConstructor");function y3e(t){return Ui(t,"Date")&&t.type==="Date"&&as(t.$id)&&Ts(t.exclusiveMaximumTimestamp)&&Ts(t.exclusiveMinimumTimestamp)&&Ts(t.maximumTimestamp)&&Ts(t.minimumTimestamp)&&Ts(t.multipleOfTimestamp)}s(y3e,"IsDate");function C3e(t){return Ui(t,"Function")&&t.type==="Function"&&as(t.$id)&&_c(t.parameters)&&t.parameters.every(e=>Js(e))&&Js(t.returns)}s(C3e,"IsFunction");function WTt(t){return Ui(t,"Import")&&gj(t,"$defs")&&ss(t.$defs)&&bj(t.$defs)&&gj(t,"$ref")&&Is(t.$ref)&&t.$ref in t.$defs}s(WTt,"IsImport");function v3e(t){return Ui(t,"Integer")&&t.type==="integer"&&as(t.$id)&&Ts(t.exclusiveMaximum)&&Ts(t.exclusiveMinimum)&&Ts(t.maximum)&&Ts(t.minimum)&&Ts(t.multipleOf)}s(v3e,"IsInteger");function bj(t){return ss(t)&&Object.entries(t).every(([e,r])=>kfe(e)&&Js(r))}s(bj,"IsProperties");function x3e(t){return Ui(t,"Intersect")&&!(Is(t.type)&&t.type!=="object")&&_c(t.allOf)&&t.allOf.every(e=>Js(e)&&!q3e(e))&&as(t.type)&&(Pfe(t.unevaluatedProperties)||l3e(t.unevaluatedProperties))&&as(t.$id)}s(x3e,"IsIntersect");function E3e(t){return Ui(t,"Iterator")&&t.type==="Iterator"&&as(t.$id)&&Js(t.items)}s(E3e,"IsIterator");function Ui(t,e){return ss(t)&&ot in t&&t[ot]===e}s(Ui,"IsKindOf");function b3e(t){return F9(t)&&Is(t.const)}s(b3e,"IsLiteralString");function I3e(t){return F9(t)&&up(t.const)}s(I3e,"IsLiteralNumber");function jTt(t){return F9(t)&&Dv(t.const)}s(jTt,"IsLiteralBoolean");function F9(t){return Ui(t,"Literal")&&as(t.$id)&&T3e(t.const)}s(F9,"IsLiteral");function T3e(t){return Dv(t)||up(t)||Is(t)}s(T3e,"IsLiteralValue");function w3e(t){return Ui(t,"MappedKey")&&_c(t.keys)&&t.keys.every(e=>up(e)||Is(e))}s(w3e,"IsMappedKey");function S3e(t){return Ui(t,"MappedResult")&&bj(t.properties)}s(S3e,"IsMappedResult");function _3e(t){return Ui(t,"Never")&&ss(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(_3e,"IsNever");function R3e(t){return Ui(t,"Not")&&Js(t.not)}s(R3e,"IsNot");function k3e(t){return Ui(t,"Null")&&t.type==="null"&&as(t.$id)}s(k3e,"IsNull");function P3e(t){return Ui(t,"Number")&&t.type==="number"&&as(t.$id)&&Ts(t.exclusiveMaximum)&&Ts(t.exclusiveMinimum)&&Ts(t.maximum)&&Ts(t.minimum)&&Ts(t.multipleOf)}s(P3e,"IsNumber");function D3e(t){return Ui(t,"Object")&&t.type==="object"&&as(t.$id)&&bj(t.properties)&&c3e(t.additionalProperties)&&Ts(t.minProperties)&&Ts(t.maxProperties)}s(D3e,"IsObject");function B3e(t){return Ui(t,"Promise")&&t.type==="Promise"&&as(t.$id)&&Js(t.item)}s(B3e,"IsPromise");function N3e(t){return Ui(t,"Record")&&t.type==="object"&&as(t.$id)&&c3e(t.additionalProperties)&&ss(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&a3e(r[0])&&ss(e.patternProperties)&&Js(e.patternProperties[r[0]])})(t)}s(N3e,"IsRecord");function GTt(t){return ss(t)&&qm in t&&t[qm]==="Recursive"}s(GTt,"IsRecursive");function M3e(t){return Ui(t,"Ref")&&as(t.$id)&&Is(t.$ref)}s(M3e,"IsRef");function L3e(t){return Ui(t,"RegExp")&&as(t.$id)&&Is(t.source)&&Is(t.flags)&&Ts(t.maxLength)&&Ts(t.minLength)}s(L3e,"IsRegExp");function F3e(t){return Ui(t,"String")&&t.type==="string"&&as(t.$id)&&Ts(t.minLength)&&Ts(t.maxLength)&&UTt(t.pattern)&&qTt(t.format)}s(F3e,"IsString");function O3e(t){return Ui(t,"Symbol")&&t.type==="symbol"&&as(t.$id)}s(O3e,"IsSymbol");function Q3e(t){return Ui(t,"TemplateLiteral")&&t.type==="string"&&Is(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(Q3e,"IsTemplateLiteral");function U3e(t){return Ui(t,"This")&&as(t.$id)&&Is(t.$ref)}s(U3e,"IsThis");function q3e(t){return ss(t)&&Ia in t}s(q3e,"IsTransform");function H3e(t){return Ui(t,"Tuple")&&t.type==="array"&&as(t.$id)&&up(t.minItems)&&up(t.maxItems)&&t.minItems===t.maxItems&&(Rc(t.items)&&Rc(t.additionalItems)&&t.minItems===0||_c(t.items)&&t.items.every(e=>Js(e)))}s(H3e,"IsTuple");function $3e(t){return Ui(t,"Undefined")&&t.type==="undefined"&&as(t.$id)}s($3e,"IsUndefined");function VTt(t){return Dfe(t)&&t.anyOf.every(e=>b3e(e)||I3e(e))}s(VTt,"IsUnionLiteral");function Dfe(t){return Ui(t,"Union")&&as(t.$id)&&ss(t)&&_c(t.anyOf)&&t.anyOf.every(e=>Js(e))}s(Dfe,"IsUnion");function W3e(t){return Ui(t,"Uint8Array")&&t.type==="Uint8Array"&&as(t.$id)&&Ts(t.minByteLength)&&Ts(t.maxByteLength)}s(W3e,"IsUint8Array");function j3e(t){return Ui(t,"Unknown")&&as(t.$id)}s(j3e,"IsUnknown");function G3e(t){return Ui(t,"Unsafe")}s(G3e,"IsUnsafe");function V3e(t){return Ui(t,"Void")&&t.type==="void"&&as(t.$id)}s(V3e,"IsVoid");function z3e(t){return ss(t)&&ot in t&&Is(t[ot])&&!QTt.includes(t[ot])}s(z3e,"IsKind");function Js(t){return ss(t)&&(u3e(t)||d3e(t)||f3e(t)||h3e(t)||m3e(t)||p3e(t)||g3e(t)||A3e(t)||y3e(t)||C3e(t)||v3e(t)||x3e(t)||E3e(t)||F9(t)||w3e(t)||S3e(t)||_3e(t)||R3e(t)||k3e(t)||P3e(t)||D3e(t)||B3e(t)||N3e(t)||M3e(t)||L3e(t)||F3e(t)||O3e(t)||Q3e(t)||U3e(t)||H3e(t)||$3e(t)||Dfe(t)||W3e(t)||j3e(t)||G3e(t)||V3e(t)||z3e(t))}s(Js,"IsSchema");d();var Bfe="(true|false)",O9="(0|[1-9][0-9]*)",Nfe="(.*)",zTt="(?!.*)",rBr=`^${Bfe}$`,iC=`^${O9}$`,oC=`^${Nfe}$`,K3e=`^${zTt}$`;d();var tA={};xa(tA,{Clear:()=>YTt,Delete:()=>JTt,Entries:()=>KTt,Get:()=>ewt,Has:()=>XTt,Set:()=>ZTt});d();var D4=new Map;function KTt(){return new Map(D4)}s(KTt,"Entries");function YTt(){return D4.clear()}s(YTt,"Clear");function JTt(t){return D4.delete(t)}s(JTt,"Delete");function XTt(t){return D4.has(t)}s(XTt,"Has");function ZTt(t,e){D4.set(t,e)}s(ZTt,"Set");function ewt(t){return D4.get(t)}s(ewt,"Get");var lf={};xa(lf,{Clear:()=>rwt,Delete:()=>nwt,Entries:()=>twt,Get:()=>swt,Has:()=>iwt,Set:()=>owt});d();var B4=new Map;function twt(){return new Map(B4)}s(twt,"Entries");function rwt(){return B4.clear()}s(rwt,"Clear");function nwt(t){return B4.delete(t)}s(nwt,"Delete");function iwt(t){return B4.has(t)}s(iwt,"Has");function owt(t,e){B4.set(t,e)}s(owt,"Set");function swt(t){return B4.get(t)}s(swt,"Get");d();function Y3e(t,e){return t.includes(e)}s(Y3e,"SetIncludes");function J3e(t){return[...new Set(t)]}s(J3e,"SetDistinct");function awt(t,e){return t.filter(r=>e.includes(r))}s(awt,"SetIntersect");function cwt(t,e){return t.reduce((r,n)=>awt(r,n),e)}s(cwt,"SetIntersectManyResolve");function X3e(t){return t.length===1?t[0]:t.length>1?cwt(t.slice(1),t[0]):[]}s(X3e,"SetIntersectMany");function Z3e(t){let e=[];for(let r of t)e.push(...r);return e}s(Z3e,"SetUnionMany");d();function xI(t){return at({[ot]:"Any"},t)}s(xI,"Any");d();function N4(t,e){return at({[ot]:"Array",type:"array",items:t},e)}s(N4,"Array");d();function eNe(t){return at({[ot]:"Argument",index:t})}s(eNe,"Argument");d();function M4(t,e){return at({[ot]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(M4,"AsyncIterator");d();d();function Ns(t,e,r){return at({[ot]:"Computed",target:t,parameters:e},r)}s(Ns,"Computed");d();d();function lwt(t,e){let{[e]:r,...n}=t;return n}s(lwt,"DiscardKey");function $a(t,e){return e.reduce((r,n)=>lwt(r,n),t)}s($a,"Discard");d();function xi(t){return at({[ot]:"Never",not:{}},t)}s(xi,"Never");d();d();function To(t){return at({[ot]:"MappedResult",properties:t})}s(To,"MappedResult");d();d();function L4(t,e,r){return at({[ot]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(L4,"Constructor");d();function sC(t,e,r){return at({[ot]:"Function",type:"Function",parameters:t,returns:e},r)}s(sC,"Function");d();d();d();d();function Q9(t,e){return at({[ot]:"Union",anyOf:t},e)}s(Q9,"UnionCreate");function uwt(t){return t.some(e=>e0(e))}s(uwt,"IsUnionOptional");function tNe(t){return t.map(e=>e0(e)?dwt(e):e)}s(tNe,"RemoveOptionalFromRest");function dwt(t){return $a(t,[Ou])}s(dwt,"RemoveOptionalFromType");function fwt(t,e){return uwt(t)?bd(Q9(tNe(t),e)):Q9(tNe(t),e)}s(fwt,"ResolveUnion");function aC(t,e){return t.length===1?at(t[0],e):t.length===0?xi(e):fwt(t,e)}s(aC,"UnionEvaluated");d();function Qo(t,e){return t.length===0?xi(e):t.length===1?at(t[0],e):Q9(t,e)}s(Qo,"Union");d();d();d();var Ij=class extends Dn{static{s(this,"TemplateLiteralParserError")}};function pwt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(pwt,"Unescape");function Mfe(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(Mfe,"IsNonEscaped");function Uv(t,e){return Mfe(t,e,"(")}s(Uv,"IsOpenParen");function U9(t,e){return Mfe(t,e,")")}s(U9,"IsCloseParen");function rNe(t,e){return Mfe(t,e,"|")}s(rNe,"IsSeparator");function mwt(t){if(!(Uv(t,0)&&U9(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(Uv(t,r)&&(e+=1),U9(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(mwt,"IsGroup");function hwt(t){return t.slice(1,t.length-1)}s(hwt,"InGroup");function gwt(t){let e=0;for(let r=0;r<t.length;r++)if(Uv(t,r)&&(e+=1),U9(t,r)&&(e-=1),rNe(t,r)&&e===0)return!0;return!1}s(gwt,"IsPrecedenceOr");function Awt(t){for(let e=0;e<t.length;e++)if(Uv(t,e))return!0;return!1}s(Awt,"IsPrecedenceAnd");function ywt(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(Uv(t,o)&&(e+=1),U9(t,o)&&(e-=1),rNe(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(F4(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(F4(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(ywt,"Or");function Cwt(t){function e(i,o){if(!Uv(i,o))throw new Ij("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(Uv(i,c)&&(a+=1),U9(i,c)&&(a-=1),a===0)return[o,c];throw new Ij("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(Uv(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(Uv(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(F4(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(F4(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(Cwt,"And");function F4(t){return mwt(t)?F4(hwt(t)):gwt(t)?ywt(t):Awt(t)?Cwt(t):{type:"const",const:pwt(t)}}s(F4,"TemplateLiteralParse");function O4(t){return F4(t.slice(1,t.length-1))}s(O4,"TemplateLiteralParseExact");var Lfe=class extends Dn{static{s(this,"TemplateLiteralFiniteError")}};function vwt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(vwt,"IsNumberExpression");function xwt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(xwt,"IsBooleanExpression");function Ewt(t){return t.type==="const"&&t.const===".*"}s(Ewt,"IsStringExpression");function G_(t){return vwt(t)||Ewt(t)?!1:xwt(t)?!0:t.type==="and"?t.expr.every(e=>G_(e)):t.type==="or"?t.expr.every(e=>G_(e)):t.type==="const"?!0:(()=>{throw new Lfe("Unknown expression type")})()}s(G_,"IsTemplateLiteralExpressionFinite");function Tj(t){let e=O4(t.pattern);return G_(e)}s(Tj,"IsTemplateLiteralFinite");d();var Ffe=class extends Dn{static{s(this,"TemplateLiteralGenerateError")}};function*nNe(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of nNe(t.slice(1)))yield`${e}${r}`}s(nNe,"GenerateReduce");function*bwt(t){return yield*nNe(t.expr.map(e=>[...q9(e)]))}s(bwt,"GenerateAnd");function*Iwt(t){for(let e of t.expr)yield*q9(e)}s(Iwt,"GenerateOr");function*Twt(t){return yield t.const}s(Twt,"GenerateConst");function*q9(t){return t.type==="and"?yield*bwt(t):t.type==="or"?yield*Iwt(t):t.type==="const"?yield*Twt(t):(()=>{throw new Ffe("Unknown expression")})()}s(q9,"TemplateLiteralExpressionGenerate");function Q4(t){let e=O4(t.pattern);return G_(e)?[...q9(e)]:[]}s(Q4,"TemplateLiteralGenerate");d();d();function ao(t,e){return at({[ot]:"Literal",const:t,type:typeof t},e)}s(ao,"Literal");d();function wj(t){return at({[ot]:"Boolean",type:"boolean"},t)}s(wj,"Boolean");d();function U4(t){return at({[ot]:"BigInt",type:"bigint"},t)}s(U4,"BigInt");d();function Hm(t){return at({[ot]:"Number",type:"number"},t)}s(Hm,"Number");d();function uf(t){return at({[ot]:"String",type:"string"},t)}s(uf,"String");function*wwt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield wj():e==="number"?yield Hm():e==="bigint"?yield U4():e==="string"?yield uf():yield(()=>{let r=e.split("|").map(n=>ao(n.trim()));return r.length===0?xi():r.length===1?r[0]:aC(r)})()}s(wwt,"FromUnion");function*Swt(t){if(t[1]!=="{"){let e=ao("$"),r=Ofe(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=wwt(t.slice(2,e)),n=Ofe(t.slice(e+1));return yield*[...r,...n]}yield ao(t)}s(Swt,"FromTerminal");function*Ofe(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=ao(t.slice(0,e)),n=Swt(t.slice(e));return yield*[r,...n]}yield ao(t)}s(Ofe,"FromSyntax");function iNe(t){return[...Ofe(t)]}s(iNe,"TemplateLiteralSyntax");d();var Qfe=class extends Dn{static{s(this,"TemplateLiteralPatternError")}};function _wt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(_wt,"Escape");function oNe(t,e){return mp(t)?t.pattern.slice(1,t.pattern.length-1):Co(t)?`(${t.anyOf.map(r=>oNe(r,e)).join("|")})`:eA(t)?`${e}${O9}`:Zg(t)?`${e}${O9}`:H_(t)?`${e}${O9}`:Fv(t)?`${e}${Nfe}`:fp(t)?`${e}${_wt(t.const.toString())}`:Lv(t)?`${e}${Bfe}`:(()=>{throw new Qfe(`Unexpected Kind '${t[ot]}'`)})()}s(oNe,"Visit");function Ufe(t){return`^${t.map(e=>oNe(e,"")).join("")}$`}s(Ufe,"TemplateLiteralPattern");d();function V_(t){let r=Q4(t).map(n=>ao(n));return aC(r)}s(V_,"TemplateLiteralToUnion");d();function Sj(t,e){let r=Is(t)?Ufe(iNe(t)):Ufe(t);return at({[ot]:"TemplateLiteral",type:"string",pattern:r},e)}s(Sj,"TemplateLiteral");function Rwt(t){return Q4(t).map(r=>r.toString())}s(Rwt,"FromTemplateLiteral");function kwt(t){let e=[];for(let r of t)e.push(...t0(r));return e}s(kwt,"FromUnion");function Pwt(t){return[t.toString()]}s(Pwt,"FromLiteral");function t0(t){return[...new Set(mp(t)?Rwt(t):Co(t)?kwt(t.anyOf):fp(t)?Pwt(t.const):eA(t)?["[number]"]:Zg(t)?["[number]"]:[])]}s(t0,"IndexPropertyKeys");d();function Dwt(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=EI(t,t0(e[i]),r);return n}s(Dwt,"FromProperties");function Bwt(t,e,r){return Dwt(t,e.properties,r)}s(Bwt,"FromMappedResult");function sNe(t,e,r){let n=Bwt(t,e,r);return To(n)}s(sNe,"IndexFromMappedResult");function cNe(t,e){return t.map(r=>lNe(r,e))}s(cNe,"FromRest");function Nwt(t){return t.filter(e=>!CI(e))}s(Nwt,"FromIntersectRest");function Mwt(t,e){return _j(Nwt(cNe(t,e)))}s(Mwt,"FromIntersect");function Lwt(t){return t.some(e=>CI(e))?[]:t}s(Lwt,"FromUnionRest");function Fwt(t,e){return aC(Lwt(cNe(t,e)))}s(Fwt,"FromUnion");function Owt(t,e){return e in t?t[e]:e==="[number]"?aC(t):xi()}s(Owt,"FromTuple");function Qwt(t,e){return e==="[number]"?t:xi()}s(Qwt,"FromArray");function Uwt(t,e){return e in t?t[e]:xi()}s(Uwt,"FromProperty");function lNe(t,e){return Ha(t)?Mwt(t.allOf,e):Co(t)?Fwt(t.anyOf,e):hp(t)?Owt(t.items??[],e):Kg(t)?Qwt(t.items,e):kc(t)?Uwt(t.properties,e):xi()}s(lNe,"IndexFromPropertyKey");function H9(t,e){return e.map(r=>lNe(t,r))}s(H9,"IndexFromPropertyKeys");function aNe(t,e){return aC(H9(t,e))}s(aNe,"FromSchema");function EI(t,e,r){if(tc(t)||tc(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ta(t)||!Ta(e))throw new Dn(n);return Ns("Index",[t,e])}return Ys(e)?sNe(t,e,r):pp(e)?uNe(t,e,r):at(Ta(e)?aNe(t,t0(e)):aNe(t,e),r)}s(EI,"Index");function qwt(t,e,r){return{[e]:EI(t,[e],zs(r))}}s(qwt,"MappedIndexPropertyKey");function Hwt(t,e,r){return e.reduce((n,i)=>({...n,...qwt(t,i,r)}),{})}s(Hwt,"MappedIndexPropertyKeys");function $wt(t,e,r){return Hwt(t,e.keys,r)}s($wt,"MappedIndexProperties");function uNe(t,e,r){let n=$wt(t,e,r);return To(n)}s(uNe,"IndexFromMappedKey");d();function q4(t,e){return at({[ot]:"Iterator",type:"Iterator",items:t},e)}s(q4,"Iterator");d();function Wwt(t){let e=[];for(let r in t)e0(t[r])||e.push(r);return e}s(Wwt,"RequiredKeys");function jwt(t,e){let r=Wwt(t),n=r.length>0?{[ot]:"Object",type:"object",properties:t,required:r}:{[ot]:"Object",type:"object",properties:t};return at(n,e)}s(jwt,"_Object");var Uo=jwt;d();function Rj(t,e){return at({[ot]:"Promise",type:"Promise",item:t},e)}s(Rj,"Promise");d();d();function Gwt(t){return at($a(t,[zg]))}s(Gwt,"RemoveReadonly");function Vwt(t){return at({...t,[zg]:"Readonly"})}s(Vwt,"AddReadonly");function zwt(t,e){return e===!1?Gwt(t):Vwt(t)}s(zwt,"ReadonlyWithFlag");function r0(t,e){let r=e??!0;return Ys(t)?dNe(t,r):zwt(t,r)}s(r0,"Readonly");function Kwt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=r0(t[n],e);return r}s(Kwt,"FromProperties");function Ywt(t,e){return Kwt(t.properties,e)}s(Ywt,"FromMappedResult");function dNe(t,e){let r=Ywt(t,e);return To(r)}s(dNe,"ReadonlyFromMappedResult");d();function $m(t,e){return at(t.length>0?{[ot]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[ot]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s($m,"Tuple");function fNe(t,e){return t in e?Wm(t,e[t]):To(e)}s(fNe,"FromMappedResult");function Jwt(t){return{[t]:ao(t)}}s(Jwt,"MappedKeyToKnownMappedResultProperties");function Xwt(t){let e={};for(let r of t)e[r]=ao(r);return e}s(Xwt,"MappedKeyToUnknownMappedResultProperties");function Zwt(t,e){return Y3e(e,t)?Jwt(t):Xwt(e)}s(Zwt,"MappedKeyToMappedResultProperties");function eSt(t,e){let r=Zwt(t,e);return fNe(t,r)}s(eSt,"FromMappedKey");function $9(t,e){return e.map(r=>Wm(t,r))}s($9,"FromRest");function tSt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Wm(t,e[n]);return r}s(tSt,"FromProperties");function Wm(t,e){let r={...e};return e0(e)?bd(Wm(t,$a(e,[Ou]))):P4(e)?r0(Wm(t,$a(e,[zg]))):Ys(e)?fNe(t,e.properties):pp(e)?eSt(t,e.keys):Jg(e)?L4($9(t,e.parameters),Wm(t,e.returns),r):Xg(e)?sC($9(t,e.parameters),Wm(t,e.returns),r):q_(e)?M4(Wm(t,e.items),r):$_(e)?q4(Wm(t,e.items),r):Ha(e)?Id($9(t,e.allOf),r):Co(e)?Qo($9(t,e.anyOf),r):hp(e)?$m($9(t,e.items??[]),r):kc(e)?Uo(tSt(t,e.properties),r):Kg(e)?N4(Wm(t,e.items),r):W_(e)?Rj(Wm(t,e.item),r):e}s(Wm,"FromSchemaType");function rSt(t,e){let r={};for(let n of t)r[n]=Wm(n,e);return r}s(rSt,"MappedFunctionReturnType");function pNe(t,e,r){let n=Ta(t)?t0(t):t,i=e({[ot]:"MappedKey",keys:n}),o=rSt(n,i);return Uo(o,r)}s(pNe,"Mapped");d();function nSt(t){return at($a(t,[Ou]))}s(nSt,"RemoveOptional");function iSt(t){return at({...t,[Ou]:"Optional"})}s(iSt,"AddOptional");function oSt(t,e){return e===!1?nSt(t):iSt(t)}s(oSt,"OptionalWithFlag");function bd(t,e){let r=e??!0;return Ys(t)?mNe(t,r):oSt(t,r)}s(bd,"Optional");function sSt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=bd(t[n],e);return r}s(sSt,"FromProperties");function aSt(t,e){return sSt(t.properties,e)}s(aSt,"FromMappedResult");function mNe(t,e){let r=aSt(t,e);return To(r)}s(mNe,"OptionalFromMappedResult");d();function W9(t,e={}){let r=t.every(i=>kc(i)),n=Ta(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return at(e.unevaluatedProperties===!1||Ta(e.unevaluatedProperties)||r?{...n,[ot]:"Intersect",type:"object",allOf:t}:{...n,[ot]:"Intersect",allOf:t},e)}s(W9,"IntersectCreate");function cSt(t){return t.every(e=>e0(e))}s(cSt,"IsIntersectOptional");function lSt(t){return $a(t,[Ou])}s(lSt,"RemoveOptionalFromType");function hNe(t){return t.map(e=>e0(e)?lSt(e):e)}s(hNe,"RemoveOptionalFromRest");function uSt(t,e){return cSt(t)?bd(W9(hNe(t),e)):W9(hNe(t),e)}s(uSt,"ResolveIntersect");function _j(t,e={}){if(t.length===1)return at(t[0],e);if(t.length===0)return xi(e);if(t.some(r=>Oo(r)))throw new Error("Cannot intersect transform types");return uSt(t,e)}s(_j,"IntersectEvaluated");d();function Id(t,e){if(t.length===1)return at(t[0],e);if(t.length===0)return xi(e);if(t.some(r=>Oo(r)))throw new Error("Cannot intersect transform types");return W9(t,e)}s(Id,"Intersect");d();function jm(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Dn("Ref: $ref must be a string");return at({[ot]:"Ref",$ref:e},r)}s(jm,"Ref");function dSt(t,e){return Ns("Awaited",[Ns(t,e)])}s(dSt,"FromComputed");function fSt(t){return Ns("Awaited",[jm(t)])}s(fSt,"FromRef");function pSt(t){return Id(gNe(t))}s(pSt,"FromIntersect");function mSt(t){return Qo(gNe(t))}s(mSt,"FromUnion");function hSt(t){return H4(t)}s(hSt,"FromPromise");function gNe(t){return t.map(e=>H4(e))}s(gNe,"FromRest");function H4(t,e){return at(Yg(t)?dSt(t.target,t.parameters):Ha(t)?pSt(t.allOf):Co(t)?mSt(t.anyOf):W_(t)?hSt(t.item):tc(t)?fSt(t.$ref):t,e)}s(H4,"Awaited");d();d();d();d();function ANe(t){let e=[];for(let r of t)e.push(n0(r));return e}s(ANe,"FromRest");function gSt(t){let e=ANe(t);return Z3e(e)}s(gSt,"FromIntersect");function ASt(t){let e=ANe(t);return X3e(e)}s(ASt,"FromUnion");function ySt(t){return t.map((e,r)=>r.toString())}s(ySt,"FromTuple");function CSt(t){return["[number]"]}s(CSt,"FromArray");function vSt(t){return globalThis.Object.getOwnPropertyNames(t)}s(vSt,"FromProperties");function xSt(t){return qfe?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(xSt,"FromPatternProperties");function n0(t){return Ha(t)?gSt(t.allOf):Co(t)?ASt(t.anyOf):hp(t)?ySt(t.items??[]):Kg(t)?CSt(t.items):kc(t)?vSt(t.properties):j_(t)?xSt(t.patternProperties):[]}s(n0,"KeyOfPropertyKeys");var qfe=!1;function qv(t){qfe=!0;let e=n0(t);return qfe=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(qv,"KeyOfPattern");function ESt(t,e){return Ns("KeyOf",[Ns(t,e)])}s(ESt,"FromComputed");function bSt(t){return Ns("KeyOf",[jm(t)])}s(bSt,"FromRef");function ISt(t,e){let r=n0(t),n=TSt(r),i=aC(n);return at(i,e)}s(ISt,"KeyOfFromType");function TSt(t){return t.map(e=>e==="[number]"?Hm():ao(e))}s(TSt,"KeyOfPropertyKeysToRest");function $4(t,e){return Yg(t)?ESt(t.target,t.parameters):tc(t)?bSt(t.$ref):Ys(t)?yNe(t,e):ISt(t,e)}s($4,"KeyOf");function wSt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=$4(t[n],zs(e));return r}s(wSt,"FromProperties");function SSt(t,e){return wSt(t.properties,e)}s(SSt,"FromMappedResult");function yNe(t,e){let r=SSt(t,e);return To(r)}s(yNe,"KeyOfFromMappedResult");d();function kj(t){let e=n0(t),r=H9(t,e);return e.map((n,i)=>[e[i],r[i]])}s(kj,"KeyOfPropertyEntries");function _St(t){let e=[];for(let r of t)e.push(...n0(r));return J3e(e)}s(_St,"CompositeKeys");function RSt(t){return t.filter(e=>!CI(e))}s(RSt,"FilterNever");function kSt(t,e){let r=[];for(let n of t)r.push(...H9(n,[e]));return RSt(r)}s(kSt,"CompositeProperty");function PSt(t,e){let r={};for(let n of e)r[n]=_j(kSt(t,n));return r}s(PSt,"CompositeProperties");function CNe(t,e){let r=_St(t),n=PSt(t,r);return Uo(n,e)}s(CNe,"Composite");d();d();function Pj(t){return at({[ot]:"Date",type:"Date"},t)}s(Pj,"Date");d();function Dj(t){return at({[ot]:"Null",type:"null"},t)}s(Dj,"Null");d();function Bj(t){return at({[ot]:"Symbol",type:"symbol"},t)}s(Bj,"Symbol");d();function Nj(t){return at({[ot]:"Undefined",type:"undefined"},t)}s(Nj,"Undefined");d();function Mj(t){return at({[ot]:"Uint8Array",type:"Uint8Array"},t)}s(Mj,"Uint8Array");d();function rA(t){return at({[ot]:"Unknown"},t)}s(rA,"Unknown");function DSt(t){return t.map(e=>Hfe(e,!1))}s(DSt,"FromArray");function BSt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=r0(Hfe(t[r],!1));return e}s(BSt,"FromProperties");function Lj(t,e){return e===!0?t:r0(t)}s(Lj,"ConditionalReadonly");function Hfe(t,e){return vfe(t)?Lj(xI(),e):Efe(t)?Lj(xI(),e):_c(t)?r0($m(DSt(t))):Bv(t)?Mj():U_(t)?Pj():ss(t)?Lj(Uo(BSt(t)),e):xfe(t)?Lj(sC([],rA()),e):Rc(t)?Nj():bfe(t)?Dj():Ife(t)?Bj():P9(t)?U4():up(t)?ao(t):Dv(t)?ao(t):Is(t)?ao(t):Uo({})}s(Hfe,"FromValue");function vNe(t,e){return at(Hfe(t,!0),e)}s(vNe,"Const");d();function xNe(t,e){return Jg(t)?$m(t.parameters,e):xi(e)}s(xNe,"ConstructorParameters");d();function ENe(t,e){if(Rc(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>ao(o));return Qo(i,{...e,[qm]:"Enum"})}s(ENe,"Enum");d();d();d();var Wfe=class extends Dn{static{s(this,"ExtendsResolverError")}},ct;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(ct||(ct={}));function Gm(t){return t===ct.False?t:ct.True}s(Gm,"IntoBooleanResult");function W4(t){throw new Wfe(t)}s(W4,"Throw");function Zc(t){return Le.IsNever(t)||Le.IsIntersect(t)||Le.IsUnion(t)||Le.IsUnknown(t)||Le.IsAny(t)}s(Zc,"IsStructuralRight");function el(t,e){return Le.IsNever(e)?RNe(t,e):Le.IsIntersect(e)?Fj(t,e):Le.IsUnion(e)?zfe(t,e):Le.IsUnknown(e)?BNe(t,e):Le.IsAny(e)?Vfe(t,e):W4("StructuralRight")}s(el,"StructuralRight");function Vfe(t,e){return ct.True}s(Vfe,"FromAnyRight");function NSt(t,e){return Le.IsIntersect(e)?Fj(t,e):Le.IsUnion(e)&&e.anyOf.some(r=>Le.IsAny(r)||Le.IsUnknown(r))?ct.True:Le.IsUnion(e)?ct.Union:Le.IsUnknown(e)||Le.IsAny(e)?ct.True:ct.Union}s(NSt,"FromAny");function MSt(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)?ct.True:ct.False}s(MSt,"FromArrayRight");function LSt(t,e){return Le.IsObject(e)&&Oj(e)?ct.True:Zc(e)?el(t,e):Le.IsArray(e)?Gm(cs(t.items,e.items)):ct.False}s(LSt,"FromArray");function FSt(t,e){return Zc(e)?el(t,e):Le.IsAsyncIterator(e)?Gm(cs(t.items,e.items)):ct.False}s(FSt,"FromAsyncIterator");function OSt(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsBigInt(e)?ct.True:ct.False}s(OSt,"FromBigInt");function SNe(t,e){return Le.IsLiteralBoolean(t)||Le.IsBoolean(t)?ct.True:ct.False}s(SNe,"FromBooleanRight");function QSt(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsBoolean(e)?ct.True:ct.False}s(QSt,"FromBoolean");function USt(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsConstructor(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Gm(cs(e.parameters[n],r))===ct.True)?Gm(cs(t.returns,e.returns)):ct.False:ct.False}s(USt,"FromConstructor");function qSt(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsDate(e)?ct.True:ct.False}s(qSt,"FromDate");function HSt(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsFunction(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Gm(cs(e.parameters[n],r))===ct.True)?Gm(cs(t.returns,e.returns)):ct.False:ct.False}s(HSt,"FromFunction");function _Ne(t,e){return Le.IsLiteral(t)&&Ed.IsNumber(t.const)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s(_Ne,"FromIntegerRight");function $St(t,e){return Le.IsInteger(e)||Le.IsNumber(e)?ct.True:Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):ct.False}s($St,"FromInteger");function Fj(t,e){return e.allOf.every(r=>cs(t,r)===ct.True)?ct.True:ct.False}s(Fj,"FromIntersectRight");function WSt(t,e){return t.allOf.some(r=>cs(r,e)===ct.True)?ct.True:ct.False}s(WSt,"FromIntersect");function jSt(t,e){return Zc(e)?el(t,e):Le.IsIterator(e)?Gm(cs(t.items,e.items)):ct.False}s(jSt,"FromIterator");function GSt(t,e){return Le.IsLiteral(e)&&e.const===t.const?ct.True:Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsString(e)?DNe(t,e):Le.IsNumber(e)?kNe(t,e):Le.IsInteger(e)?_Ne(t,e):Le.IsBoolean(e)?SNe(t,e):ct.False}s(GSt,"FromLiteral");function RNe(t,e){return ct.False}s(RNe,"FromNeverRight");function VSt(t,e){return ct.True}s(VSt,"FromNever");function bNe(t){let[e,r]=[t,0];for(;Le.IsNot(e);)e=e.not,r+=1;return r%2===0?e:rA()}s(bNe,"UnwrapTNot");function zSt(t,e){return Le.IsNot(t)?cs(bNe(t),e):Le.IsNot(e)?cs(t,bNe(e)):W4("Invalid fallthrough for Not")}s(zSt,"FromNot");function KSt(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsNull(e)?ct.True:ct.False}s(KSt,"FromNull");function kNe(t,e){return Le.IsLiteralNumber(t)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s(kNe,"FromNumberRight");function YSt(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsInteger(e)||Le.IsNumber(e)?ct.True:ct.False}s(YSt,"FromNumber");function i0(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(i0,"IsObjectPropertyCount");function INe(t){return Oj(t)}s(INe,"IsObjectStringLike");function TNe(t){return i0(t,0)||i0(t,1)&&"description"in t.properties&&Le.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Le.IsString(t.properties.description.anyOf[0])&&Le.IsUndefined(t.properties.description.anyOf[1])||Le.IsString(t.properties.description.anyOf[1])&&Le.IsUndefined(t.properties.description.anyOf[0]))}s(TNe,"IsObjectSymbolLike");function $fe(t){return i0(t,0)}s($fe,"IsObjectNumberLike");function wNe(t){return i0(t,0)}s(wNe,"IsObjectBooleanLike");function JSt(t){return i0(t,0)}s(JSt,"IsObjectBigIntLike");function XSt(t){return i0(t,0)}s(XSt,"IsObjectDateLike");function ZSt(t){return Oj(t)}s(ZSt,"IsObjectUint8ArrayLike");function e_t(t){let e=Hm();return i0(t,0)||i0(t,1)&&"length"in t.properties&&Gm(cs(t.properties.length,e))===ct.True}s(e_t,"IsObjectFunctionLike");function t_t(t){return i0(t,0)}s(t_t,"IsObjectConstructorLike");function Oj(t){let e=Hm();return i0(t,0)||i0(t,1)&&"length"in t.properties&&Gm(cs(t.properties.length,e))===ct.True}s(Oj,"IsObjectArrayLike");function r_t(t){let e=sC([xI()],xI());return i0(t,0)||i0(t,1)&&"then"in t.properties&&Gm(cs(t.properties.then,e))===ct.True}s(r_t,"IsObjectPromiseLike");function PNe(t,e){return cs(t,e)===ct.False||Le.IsOptional(t)&&!Le.IsOptional(e)?ct.False:ct.True}s(PNe,"Property");function Td(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)||Le.IsLiteralString(t)&&INe(e)||Le.IsLiteralNumber(t)&&$fe(e)||Le.IsLiteralBoolean(t)&&wNe(e)||Le.IsSymbol(t)&&TNe(e)||Le.IsBigInt(t)&&JSt(e)||Le.IsString(t)&&INe(e)||Le.IsSymbol(t)&&TNe(e)||Le.IsNumber(t)&&$fe(e)||Le.IsInteger(t)&&$fe(e)||Le.IsBoolean(t)&&wNe(e)||Le.IsUint8Array(t)&&ZSt(e)||Le.IsDate(t)&&XSt(e)||Le.IsConstructor(t)&&t_t(e)||Le.IsFunction(t)&&e_t(e)?ct.True:Le.IsRecord(t)&&Le.IsString(jfe(t))?e[qm]==="Record"?ct.True:ct.False:Le.IsRecord(t)&&Le.IsNumber(jfe(t))?i0(e,0)?ct.True:ct.False:ct.False}s(Td,"FromObjectRight");function n_t(t,e){return Zc(e)?el(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Le.IsOptional(e.properties[r]))return ct.False;if(Le.IsOptional(e.properties[r]))return ct.True;if(PNe(t.properties[r],e.properties[r])===ct.False)return ct.False}return ct.True})():ct.False}s(n_t,"FromObject");function i_t(t,e){return Zc(e)?el(t,e):Le.IsObject(e)&&r_t(e)?ct.True:Le.IsPromise(e)?Gm(cs(t.item,e.item)):ct.False}s(i_t,"FromPromise");function jfe(t){return iC in t.patternProperties?Hm():oC in t.patternProperties?uf():W4("Unknown record key pattern")}s(jfe,"RecordKey");function Gfe(t){return iC in t.patternProperties?t.patternProperties[iC]:oC in t.patternProperties?t.patternProperties[oC]:W4("Unable to get record value schema")}s(Gfe,"RecordValue");function Vm(t,e){let[r,n]=[jfe(e),Gfe(e)];return Le.IsLiteralString(t)&&Le.IsNumber(r)&&Gm(cs(t,n))===ct.True?ct.True:Le.IsUint8Array(t)&&Le.IsNumber(r)||Le.IsString(t)&&Le.IsNumber(r)||Le.IsArray(t)&&Le.IsNumber(r)?cs(t,n):Le.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(PNe(n,t.properties[i])===ct.False)return ct.False;return ct.True})():ct.False}s(Vm,"FromRecordRight");function o_t(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?cs(Gfe(t),Gfe(e)):ct.False}s(o_t,"FromRecord");function s_t(t,e){let r=Le.IsRegExp(t)?uf():t,n=Le.IsRegExp(e)?uf():e;return cs(r,n)}s(s_t,"FromRegExp");function DNe(t,e){return Le.IsLiteral(t)&&Ed.IsString(t.const)||Le.IsString(t)?ct.True:ct.False}s(DNe,"FromStringRight");function a_t(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsString(e)?ct.True:ct.False}s(a_t,"FromString");function c_t(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsSymbol(e)?ct.True:ct.False}s(c_t,"FromSymbol");function l_t(t,e){return Le.IsTemplateLiteral(t)?cs(V_(t),e):Le.IsTemplateLiteral(e)?cs(t,V_(e)):W4("Invalid fallthrough for TemplateLiteral")}s(l_t,"FromTemplateLiteral");function u_t(t,e){return Le.IsArray(e)&&t.items!==void 0&&t.items.every(r=>cs(r,e.items)===ct.True)}s(u_t,"IsArrayOfTuple");function d_t(t,e){return Le.IsNever(t)?ct.True:Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:ct.False}s(d_t,"FromTupleRight");function f_t(t,e){return Zc(e)?el(t,e):Le.IsObject(e)&&Oj(e)||Le.IsArray(e)&&u_t(t,e)?ct.True:Le.IsTuple(e)?Ed.IsUndefined(t.items)&&!Ed.IsUndefined(e.items)||!Ed.IsUndefined(t.items)&&Ed.IsUndefined(e.items)?ct.False:Ed.IsUndefined(t.items)&&!Ed.IsUndefined(e.items)||t.items.every((r,n)=>cs(r,e.items[n])===ct.True)?ct.True:ct.False:ct.False}s(f_t,"FromTuple");function p_t(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsUint8Array(e)?ct.True:ct.False}s(p_t,"FromUint8Array");function m_t(t,e){return Zc(e)?el(t,e):Le.IsObject(e)?Td(t,e):Le.IsRecord(e)?Vm(t,e):Le.IsVoid(e)?A_t(t,e):Le.IsUndefined(e)?ct.True:ct.False}s(m_t,"FromUndefined");function zfe(t,e){return e.anyOf.some(r=>cs(t,r)===ct.True)?ct.True:ct.False}s(zfe,"FromUnionRight");function h_t(t,e){return t.anyOf.every(r=>cs(r,e)===ct.True)?ct.True:ct.False}s(h_t,"FromUnion");function BNe(t,e){return ct.True}s(BNe,"FromUnknownRight");function g_t(t,e){return Le.IsNever(e)?RNe(t,e):Le.IsIntersect(e)?Fj(t,e):Le.IsUnion(e)?zfe(t,e):Le.IsAny(e)?Vfe(t,e):Le.IsString(e)?DNe(t,e):Le.IsNumber(e)?kNe(t,e):Le.IsInteger(e)?_Ne(t,e):Le.IsBoolean(e)?SNe(t,e):Le.IsArray(e)?MSt(t,e):Le.IsTuple(e)?d_t(t,e):Le.IsObject(e)?Td(t,e):Le.IsUnknown(e)?ct.True:ct.False}s(g_t,"FromUnknown");function A_t(t,e){return Le.IsUndefined(t)||Le.IsUndefined(t)?ct.True:ct.False}s(A_t,"FromVoidRight");function y_t(t,e){return Le.IsIntersect(e)?Fj(t,e):Le.IsUnion(e)?zfe(t,e):Le.IsUnknown(e)?BNe(t,e):Le.IsAny(e)?Vfe(t,e):Le.IsObject(e)?Td(t,e):Le.IsVoid(e)?ct.True:ct.False}s(y_t,"FromVoid");function cs(t,e){return Le.IsTemplateLiteral(t)||Le.IsTemplateLiteral(e)?l_t(t,e):Le.IsRegExp(t)||Le.IsRegExp(e)?s_t(t,e):Le.IsNot(t)||Le.IsNot(e)?zSt(t,e):Le.IsAny(t)?NSt(t,e):Le.IsArray(t)?LSt(t,e):Le.IsBigInt(t)?OSt(t,e):Le.IsBoolean(t)?QSt(t,e):Le.IsAsyncIterator(t)?FSt(t,e):Le.IsConstructor(t)?USt(t,e):Le.IsDate(t)?qSt(t,e):Le.IsFunction(t)?HSt(t,e):Le.IsInteger(t)?$St(t,e):Le.IsIntersect(t)?WSt(t,e):Le.IsIterator(t)?jSt(t,e):Le.IsLiteral(t)?GSt(t,e):Le.IsNever(t)?VSt(t,e):Le.IsNull(t)?KSt(t,e):Le.IsNumber(t)?YSt(t,e):Le.IsObject(t)?n_t(t,e):Le.IsRecord(t)?o_t(t,e):Le.IsString(t)?a_t(t,e):Le.IsSymbol(t)?c_t(t,e):Le.IsTuple(t)?f_t(t,e):Le.IsPromise(t)?i_t(t,e):Le.IsUint8Array(t)?p_t(t,e):Le.IsUndefined(t)?m_t(t,e):Le.IsUnion(t)?h_t(t,e):Le.IsUnknown(t)?g_t(t,e):Le.IsVoid(t)?y_t(t,e):W4(`Unknown left type operand '${t[ot]}'`)}s(cs,"Visit");function bI(t,e){return cs(t,e)}s(bI,"ExtendsCheck");d();d();d();function C_t(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=j4(t[a],e,r,n,zs(i));return o}s(C_t,"FromProperties");function v_t(t,e,r,n,i){return C_t(t.properties,e,r,n,i)}s(v_t,"FromMappedResult");function NNe(t,e,r,n,i){let o=v_t(t,e,r,n,i);return To(o)}s(NNe,"ExtendsFromMappedResult");function x_t(t,e,r,n){let i=bI(t,e);return i===ct.Union?Qo([r,n]):i===ct.True?r:n}s(x_t,"ExtendsResolve");function j4(t,e,r,n,i){return Ys(t)?NNe(t,e,r,n,i):pp(t)?at(MNe(t,e,r,n,i)):at(x_t(t,e,r,n),i)}s(j4,"Extends");function E_t(t,e,r,n,i){return{[t]:j4(ao(t),e,r,n,zs(i))}}s(E_t,"FromPropertyKey");function b_t(t,e,r,n,i){return t.reduce((o,a)=>({...o,...E_t(a,e,r,n,i)}),{})}s(b_t,"FromPropertyKeys");function I_t(t,e,r,n,i){return b_t(t.keys,e,r,n,i)}s(I_t,"FromMappedKey");function MNe(t,e,r,n,i){let o=I_t(t,e,r,n,i);return To(o)}s(MNe,"ExtendsFromMappedKey");d();function T_t(t){return t.allOf.every(e=>Hv(e))}s(T_t,"Intersect");function w_t(t){return t.anyOf.some(e=>Hv(e))}s(w_t,"Union");function S_t(t){return!Hv(t.not)}s(S_t,"Not");function Hv(t){return t[ot]==="Intersect"?T_t(t):t[ot]==="Union"?w_t(t):t[ot]==="Not"?S_t(t):t[ot]==="Undefined"}s(Hv,"ExtendsUndefinedCheck");d();function LNe(t,e){return G4(V_(t),e)}s(LNe,"ExcludeFromTemplateLiteral");function __t(t,e){let r=t.filter(n=>bI(n,e)===ct.False);return r.length===1?r[0]:Qo(r)}s(__t,"ExcludeRest");function G4(t,e,r={}){return mp(t)?at(LNe(t,e),r):Ys(t)?at(FNe(t,e),r):at(Co(t)?__t(t.anyOf,e):bI(t,e)!==ct.False?xi():t,r)}s(G4,"Exclude");function R_t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=G4(t[n],e);return r}s(R_t,"FromProperties");function k_t(t,e){return R_t(t.properties,e)}s(k_t,"FromMappedResult");function FNe(t,e){let r=k_t(t,e);return To(r)}s(FNe,"ExcludeFromMappedResult");d();d();d();function ONe(t,e){return V4(V_(t),e)}s(ONe,"ExtractFromTemplateLiteral");function P_t(t,e){let r=t.filter(n=>bI(n,e)!==ct.False);return r.length===1?r[0]:Qo(r)}s(P_t,"ExtractRest");function V4(t,e,r){return mp(t)?at(ONe(t,e),r):Ys(t)?at(QNe(t,e),r):at(Co(t)?P_t(t.anyOf,e):bI(t,e)!==ct.False?t:xi(),r)}s(V4,"Extract");function D_t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=V4(t[n],e);return r}s(D_t,"FromProperties");function B_t(t,e){return D_t(t.properties,e)}s(B_t,"FromMappedResult");function QNe(t,e){let r=B_t(t,e);return To(r)}s(QNe,"ExtractFromMappedResult");d();function UNe(t,e){return Jg(t)?at(t.returns,e):xi(e)}s(UNe,"InstanceType");d();d();function Qj(t){return r0(bd(t))}s(Qj,"ReadonlyOptional");d();function z_(t,e,r){return at({[ot]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(z_,"RecordCreateFromPattern");function Kfe(t,e,r){let n={};for(let i of t)n[i]=e;return Uo(n,{...r,[qm]:"Record"})}s(Kfe,"RecordCreateFromKeys");function N_t(t,e,r){return Tj(t)?Kfe(t0(t),e,r):z_(t.pattern,e,r)}s(N_t,"FromTemplateLiteralKey");function M_t(t,e,r){return Kfe(t0(Qo(t)),e,r)}s(M_t,"FromUnionKey");function L_t(t,e,r){return Kfe([t.toString()],e,r)}s(L_t,"FromLiteralKey");function F_t(t,e,r){return z_(t.source,e,r)}s(F_t,"FromRegExpKey");function O_t(t,e,r){let n=Rc(t.pattern)?oC:t.pattern;return z_(n,e,r)}s(O_t,"FromStringKey");function Q_t(t,e,r){return z_(oC,e,r)}s(Q_t,"FromAnyKey");function U_t(t,e,r){return z_(K3e,e,r)}s(U_t,"FromNeverKey");function q_t(t,e,r){return Uo({true:e,false:e},r)}s(q_t,"FromBooleanKey");function H_t(t,e,r){return z_(iC,e,r)}s(H_t,"FromIntegerKey");function $_t(t,e,r){return z_(iC,e,r)}s($_t,"FromNumberKey");function Uj(t,e,r={}){return Co(t)?M_t(t.anyOf,e,r):mp(t)?N_t(t,e,r):fp(t)?L_t(t.const,e,r):Lv(t)?q_t(t,e,r):Zg(t)?H_t(t,e,r):eA(t)?$_t(t,e,r):_fe(t)?F_t(t,e,r):Fv(t)?O_t(t,e,r):wfe(t)?Q_t(t,e,r):CI(t)?U_t(t,e,r):xi(r)}s(Uj,"Record");function qj(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(qj,"RecordPattern");function qNe(t){let e=qj(t);return e===oC?uf():e===iC?Hm():uf({pattern:e})}s(qNe,"RecordKey");function Hj(t){return t.patternProperties[qj(t)]}s(Hj,"RecordValue");function W_t(t,e){return e.parameters=j9(t,e.parameters),e.returns=nA(t,e.returns),e}s(W_t,"FromConstructor");function j_t(t,e){return e.parameters=j9(t,e.parameters),e.returns=nA(t,e.returns),e}s(j_t,"FromFunction");function G_t(t,e){return e.allOf=j9(t,e.allOf),e}s(G_t,"FromIntersect");function V_t(t,e){return e.anyOf=j9(t,e.anyOf),e}s(V_t,"FromUnion");function z_t(t,e){return Rc(e.items)||(e.items=j9(t,e.items)),e}s(z_t,"FromTuple");function K_t(t,e){return e.items=nA(t,e.items),e}s(K_t,"FromArray");function Y_t(t,e){return e.items=nA(t,e.items),e}s(Y_t,"FromAsyncIterator");function J_t(t,e){return e.items=nA(t,e.items),e}s(J_t,"FromIterator");function X_t(t,e){return e.item=nA(t,e.item),e}s(X_t,"FromPromise");function Z_t(t,e){let r=n2t(t,e.properties);return{...e,...Uo(r)}}s(Z_t,"FromObject");function e2t(t,e){let r=nA(t,qNe(e)),n=nA(t,Hj(e)),i=Uj(r,n);return{...e,...i}}s(e2t,"FromRecord");function t2t(t,e){return e.index in t?t[e.index]:rA()}s(t2t,"FromArgument");function r2t(t,e){let r=P4(e),n=e0(e),i=nA(t,e);return r&&n?Qj(i):r&&!n?r0(i):!r&&n?bd(i):i}s(r2t,"FromProperty");function n2t(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:r2t(t,e[n])}),{})}s(n2t,"FromProperties");function j9(t,e){return e.map(r=>nA(t,r))}s(j9,"FromTypes");function nA(t,e){return Jg(e)?W_t(t,e):Xg(e)?j_t(t,e):Ha(e)?G_t(t,e):Co(e)?V_t(t,e):hp(e)?z_t(t,e):Kg(e)?K_t(t,e):q_(e)?Y_t(t,e):$_(e)?J_t(t,e):W_(e)?X_t(t,e):kc(e)?Z_t(t,e):j_(e)?e2t(t,e):Sfe(e)?t2t(t,e):e}s(nA,"FromType");function HNe(t,e){return nA(e,R4(t))}s(HNe,"Instantiate");d();function $Ne(t){return at({[ot]:"Integer",type:"integer"},t)}s($Ne,"Integer");d();d();d();function i2t(t,e,r){return{[t]:iA(ao(t),e,zs(r))}}s(i2t,"MappedIntrinsicPropertyKey");function o2t(t,e,r){return t.reduce((i,o)=>({...i,...i2t(o,e,r)}),{})}s(o2t,"MappedIntrinsicPropertyKeys");function s2t(t,e,r){return o2t(t.keys,e,r)}s(s2t,"MappedIntrinsicProperties");function WNe(t,e,r){let n=s2t(t,e,r);return To(n)}s(WNe,"IntrinsicFromMappedKey");function a2t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(a2t,"ApplyUncapitalize");function c2t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(c2t,"ApplyCapitalize");function l2t(t){return t.toUpperCase()}s(l2t,"ApplyUppercase");function u2t(t){return t.toLowerCase()}s(u2t,"ApplyLowercase");function d2t(t,e,r){let n=O4(t.pattern);if(!G_(n))return{...t,pattern:jNe(t.pattern,e)};let a=[...q9(n)].map(u=>ao(u)),c=GNe(a,e),l=Qo(c);return Sj([l],r)}s(d2t,"FromTemplateLiteral");function jNe(t,e){return typeof t=="string"?e==="Uncapitalize"?a2t(t):e==="Capitalize"?c2t(t):e==="Uppercase"?l2t(t):e==="Lowercase"?u2t(t):t:t.toString()}s(jNe,"FromLiteralValue");function GNe(t,e){return t.map(r=>iA(r,e))}s(GNe,"FromRest");function iA(t,e,r={}){return pp(t)?WNe(t,e,r):mp(t)?d2t(t,e,r):Co(t)?Qo(GNe(t.anyOf,e),r):fp(t)?ao(jNe(t.const,e),r):at(t,r)}s(iA,"Intrinsic");function VNe(t,e={}){return iA(t,"Capitalize",e)}s(VNe,"Capitalize");d();function zNe(t,e={}){return iA(t,"Lowercase",e)}s(zNe,"Lowercase");d();function KNe(t,e={}){return iA(t,"Uncapitalize",e)}s(KNe,"Uncapitalize");d();function YNe(t,e={}){return iA(t,"Uppercase",e)}s(YNe,"Uppercase");d();d();d();d();d();function f2t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=II(t[i],e,zs(r));return n}s(f2t,"FromProperties");function p2t(t,e,r){return f2t(t.properties,e,r)}s(p2t,"FromMappedResult");function JNe(t,e,r){let n=p2t(t,e,r);return To(n)}s(JNe,"OmitFromMappedResult");function m2t(t,e){return t.map(r=>Yfe(r,e))}s(m2t,"FromIntersect");function h2t(t,e){return t.map(r=>Yfe(r,e))}s(h2t,"FromUnion");function g2t(t,e){let{[e]:r,...n}=t;return n}s(g2t,"FromProperty");function A2t(t,e){return e.reduce((r,n)=>g2t(r,n),t)}s(A2t,"FromProperties");function y2t(t,e){let r=$a(t,[Ia,"$id","required","properties"]),n=A2t(t.properties,e);return Uo(n,r)}s(y2t,"FromObject");function C2t(t){let e=t.reduce((r,n)=>Ej(n)?[...r,ao(n)]:r,[]);return Qo(e)}s(C2t,"UnionFromPropertyKeys");function Yfe(t,e){return Ha(t)?Id(m2t(t.allOf,e)):Co(t)?Qo(h2t(t.anyOf,e)):kc(t)?y2t(t,e):Uo({})}s(Yfe,"OmitResolve");function II(t,e,r){let n=_c(e)?C2t(e):e,i=Ta(e)?t0(e):e,o=tc(t),a=tc(e);return Ys(t)?JNe(t,i,r):pp(e)?XNe(t,e,r):o&&a?Ns("Omit",[t,n],r):!o&&a?Ns("Omit",[t,n],r):o&&!a?Ns("Omit",[t,n],r):at({...Yfe(t,i),...r})}s(II,"Omit");function v2t(t,e,r){return{[e]:II(t,[e],zs(r))}}s(v2t,"FromPropertyKey");function x2t(t,e,r){return e.reduce((n,i)=>({...n,...v2t(t,i,r)}),{})}s(x2t,"FromPropertyKeys");function E2t(t,e,r){return x2t(t,e.keys,r)}s(E2t,"FromMappedKey");function XNe(t,e,r){let n=E2t(t,e,r);return To(n)}s(XNe,"OmitFromMappedKey");d();d();d();function b2t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=TI(t[i],e,zs(r));return n}s(b2t,"FromProperties");function I2t(t,e,r){return b2t(t.properties,e,r)}s(I2t,"FromMappedResult");function ZNe(t,e,r){let n=I2t(t,e,r);return To(n)}s(ZNe,"PickFromMappedResult");function T2t(t,e){return t.map(r=>Jfe(r,e))}s(T2t,"FromIntersect");function w2t(t,e){return t.map(r=>Jfe(r,e))}s(w2t,"FromUnion");function S2t(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(S2t,"FromProperties");function _2t(t,e){let r=$a(t,[Ia,"$id","required","properties"]),n=S2t(t.properties,e);return Uo(n,r)}s(_2t,"FromObject");function R2t(t){let e=t.reduce((r,n)=>Ej(n)?[...r,ao(n)]:r,[]);return Qo(e)}s(R2t,"UnionFromPropertyKeys");function Jfe(t,e){return Ha(t)?Id(T2t(t.allOf,e)):Co(t)?Qo(w2t(t.anyOf,e)):kc(t)?_2t(t,e):Uo({})}s(Jfe,"PickResolve");function TI(t,e,r){let n=_c(e)?R2t(e):e,i=Ta(e)?t0(e):e,o=tc(t),a=tc(e);return Ys(t)?ZNe(t,i,r):pp(e)?e8e(t,e,r):o&&a?Ns("Pick",[t,n],r):!o&&a?Ns("Pick",[t,n],r):o&&!a?Ns("Pick",[t,n],r):at({...Jfe(t,i),...r})}s(TI,"Pick");function k2t(t,e,r){return{[e]:TI(t,[e],zs(r))}}s(k2t,"FromPropertyKey");function P2t(t,e,r){return e.reduce((n,i)=>({...n,...k2t(t,i,r)}),{})}s(P2t,"FromPropertyKeys");function D2t(t,e,r){return P2t(t,e.keys,r)}s(D2t,"FromMappedKey");function e8e(t,e,r){let n=D2t(t,e,r);return To(n)}s(e8e,"PickFromMappedKey");d();d();function B2t(t,e){return Ns("Partial",[Ns(t,e)])}s(B2t,"FromComputed");function N2t(t){return Ns("Partial",[jm(t)])}s(N2t,"FromRef");function M2t(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=bd(t[r]);return e}s(M2t,"FromProperties");function L2t(t){let e=$a(t,[Ia,"$id","required","properties"]),r=M2t(t.properties);return Uo(r,e)}s(L2t,"FromObject");function t8e(t){return t.map(e=>r8e(e))}s(t8e,"FromRest");function r8e(t){return Yg(t)?B2t(t.target,t.parameters):tc(t)?N2t(t.$ref):Ha(t)?Id(t8e(t.allOf)):Co(t)?Qo(t8e(t.anyOf)):kc(t)?L2t(t):H_(t)||Lv(t)||Zg(t)||fp(t)||N9(t)||eA(t)||Fv(t)||M9(t)||Ov(t)?t:Uo({})}s(r8e,"PartialResolve");function z4(t,e){return Ys(t)?n8e(t,e):at({...r8e(t),...e})}s(z4,"Partial");function F2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=z4(t[n],zs(e));return r}s(F2t,"FromProperties");function O2t(t,e){return F2t(t.properties,e)}s(O2t,"FromMappedResult");function n8e(t,e){let r=O2t(t,e);return To(r)}s(n8e,"PartialFromMappedResult");d();d();function Q2t(t,e){return Ns("Required",[Ns(t,e)])}s(Q2t,"FromComputed");function U2t(t){return Ns("Required",[jm(t)])}s(U2t,"FromRef");function q2t(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=$a(t[r],[Ou]);return e}s(q2t,"FromProperties");function H2t(t){let e=$a(t,[Ia,"$id","required","properties"]),r=q2t(t.properties);return Uo(r,e)}s(H2t,"FromObject");function i8e(t){return t.map(e=>o8e(e))}s(i8e,"FromRest");function o8e(t){return Yg(t)?Q2t(t.target,t.parameters):tc(t)?U2t(t.$ref):Ha(t)?Id(i8e(t.allOf)):Co(t)?Qo(i8e(t.anyOf)):kc(t)?H2t(t):H_(t)||Lv(t)||Zg(t)||fp(t)||N9(t)||eA(t)||Fv(t)||M9(t)||Ov(t)?t:Uo({})}s(o8e,"RequiredResolve");function K4(t,e){return Ys(t)?s8e(t,e):at({...o8e(t),...e})}s(K4,"Required");function $2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=K4(t[n],e);return r}s($2t,"FromProperties");function W2t(t,e){return $2t(t.properties,e)}s(W2t,"FromMappedResult");function s8e(t,e){let r=W2t(t,e);return To(r)}s(s8e,"RequiredFromMappedResult");function j2t(t,e){return e.map(r=>tc(r)?Xfe(t,r.$ref):gp(t,r))}s(j2t,"DereferenceParameters");function Xfe(t,e){return e in t?tc(t[e])?Xfe(t,t[e].$ref):gp(t,t[e]):xi()}s(Xfe,"Dereference");function G2t(t){return H4(t[0])}s(G2t,"FromAwaited");function V2t(t){return EI(t[0],t[1])}s(V2t,"FromIndex");function z2t(t){return $4(t[0])}s(z2t,"FromKeyOf");function K2t(t){return z4(t[0])}s(K2t,"FromPartial");function Y2t(t){return II(t[0],t[1])}s(Y2t,"FromOmit");function J2t(t){return TI(t[0],t[1])}s(J2t,"FromPick");function X2t(t){return K4(t[0])}s(X2t,"FromRequired");function Z2t(t,e,r){let n=j2t(t,r);return e==="Awaited"?G2t(n):e==="Index"?V2t(n):e==="KeyOf"?z2t(n):e==="Partial"?K2t(n):e==="Omit"?Y2t(n):e==="Pick"?J2t(n):e==="Required"?X2t(n):xi()}s(Z2t,"FromComputed");function eRt(t,e){return N4(gp(t,e))}s(eRt,"FromArray");function tRt(t,e){return M4(gp(t,e))}s(tRt,"FromAsyncIterator");function rRt(t,e,r){return L4(G9(t,e),gp(t,r))}s(rRt,"FromConstructor");function nRt(t,e,r){return sC(G9(t,e),gp(t,r))}s(nRt,"FromFunction");function iRt(t,e){return Id(G9(t,e))}s(iRt,"FromIntersect");function oRt(t,e){return q4(gp(t,e))}s(oRt,"FromIterator");function sRt(t,e){return Uo(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:gp(t,e[n])}),{}))}s(sRt,"FromObject");function aRt(t,e){let[r,n]=[gp(t,Hj(e)),qj(e)],i=R4(e);return i.patternProperties[n]=r,i}s(aRt,"FromRecord");function cRt(t,e){return tc(e)?{...Xfe(t,e.$ref),[Ia]:e[Ia]}:e}s(cRt,"FromTransform");function lRt(t,e){return $m(G9(t,e))}s(lRt,"FromTuple");function uRt(t,e){return Qo(G9(t,e))}s(uRt,"FromUnion");function G9(t,e){return e.map(r=>gp(t,r))}s(G9,"FromTypes");function gp(t,e){return e0(e)?at(gp(t,$a(e,[Ou])),e):P4(e)?at(gp(t,$a(e,[zg])),e):Oo(e)?at(cRt(t,e),e):Kg(e)?at(eRt(t,e.items),e):q_(e)?at(tRt(t,e.items),e):Yg(e)?at(Z2t(t,e.target,e.parameters)):Jg(e)?at(rRt(t,e.parameters,e.returns),e):Xg(e)?at(nRt(t,e.parameters,e.returns),e):Ha(e)?at(iRt(t,e.allOf),e):$_(e)?at(oRt(t,e.items),e):kc(e)?at(sRt(t,e.properties),e):j_(e)?at(aRt(t,e)):hp(e)?at(lRt(t,e.items||[]),e):Co(e)?at(uRt(t,e.anyOf),e):e}s(gp,"FromType");function dRt(t,e){return e in t?gp(t,t[e]):xi()}s(dRt,"ComputeType");function a8e(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:dRt(t,r)}),{})}s(a8e,"ComputeModuleProperties");var Zfe=class{static{s(this,"TModule")}constructor(e){let r=a8e(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:at(this.$defs[e],r)};return at({[ot]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function c8e(t){return new Zfe(t)}s(c8e,"Module");d();function l8e(t,e){return at({[ot]:"Not",not:t},e)}s(l8e,"Not");d();function u8e(t,e){return Xg(t)?$m(t.parameters,e):xi()}s(u8e,"Parameters");d();var fRt=0;function d8e(t,e={}){Rc(e.$id)&&(e.$id=`T${fRt++}`);let r=R4(t({[ot]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,at({[qm]:"Recursive",...r},e)}s(d8e,"Recursive");d();function f8e(t,e){let r=Is(t)?new globalThis.RegExp(t):t;return at({[ot]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(f8e,"RegExp");d();function pRt(t){return Ha(t)?t.allOf:Co(t)?t.anyOf:hp(t)?t.items??[]:[]}s(pRt,"RestResolve");function p8e(t){return pRt(t)}s(p8e,"Rest");d();function m8e(t,e){return Xg(t)?at(t.returns,e):xi(e)}s(m8e,"ReturnType");d();var e0e=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new t0e(this.schema,e)}},t0e=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[Ia].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[Ia].Decode(a)),"Decode")};return{...r,[Ia]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Ia]:n}}Encode(e){return Oo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function h8e(t){return new e0e(t)}s(h8e,"Transform");d();function g8e(t={}){return at({[ot]:t[ot]??"Unsafe"},t)}s(g8e,"Unsafe");d();function A8e(t){return at({[ot]:"Void",type:"void"},t)}s(A8e,"Void");d();var r0e={};xa(r0e,{Any:()=>xI,Argument:()=>eNe,Array:()=>N4,AsyncIterator:()=>M4,Awaited:()=>H4,BigInt:()=>U4,Boolean:()=>wj,Capitalize:()=>VNe,Composite:()=>CNe,Const:()=>vNe,Constructor:()=>L4,ConstructorParameters:()=>xNe,Date:()=>Pj,Enum:()=>ENe,Exclude:()=>G4,Extends:()=>j4,Extract:()=>V4,Function:()=>sC,Index:()=>EI,InstanceType:()=>UNe,Instantiate:()=>HNe,Integer:()=>$Ne,Intersect:()=>Id,Iterator:()=>q4,KeyOf:()=>$4,Literal:()=>ao,Lowercase:()=>zNe,Mapped:()=>pNe,Module:()=>c8e,Never:()=>xi,Not:()=>l8e,Null:()=>Dj,Number:()=>Hm,Object:()=>Uo,Omit:()=>II,Optional:()=>bd,Parameters:()=>u8e,Partial:()=>z4,Pick:()=>TI,Promise:()=>Rj,Readonly:()=>r0,ReadonlyOptional:()=>Qj,Record:()=>Uj,Recursive:()=>d8e,Ref:()=>jm,RegExp:()=>f8e,Required:()=>K4,Rest:()=>p8e,ReturnType:()=>m8e,String:()=>uf,Symbol:()=>Bj,TemplateLiteral:()=>Sj,Transform:()=>h8e,Tuple:()=>$m,Uint8Array:()=>Mj,Uncapitalize:()=>KNe,Undefined:()=>Nj,Union:()=>Qo,Unknown:()=>rA,Unsafe:()=>g8e,Uppercase:()=>YNe,Void:()=>A8e});d();var x=r0e;d();d();function mRt(t){switch(t.errorType){case nt.ArrayContains:return"Expected array to contain at least one matching value";case nt.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case nt.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case nt.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case nt.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case nt.ArrayUniqueItems:return"Expected array elements to be unique";case nt.Array:return"Expected array";case nt.AsyncIterator:return"Expected AsyncIterator";case nt.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case nt.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case nt.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case nt.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case nt.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case nt.BigInt:return"Expected bigint";case nt.Boolean:return"Expected boolean";case nt.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case nt.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case nt.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case nt.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case nt.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case nt.Date:return"Expected Date";case nt.Function:return"Expected function";case nt.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case nt.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case nt.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case nt.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case nt.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case nt.Integer:return"Expected integer";case nt.IntersectUnevaluatedProperties:return"Unexpected property";case nt.Intersect:return"Expected all values to match";case nt.Iterator:return"Expected Iterator";case nt.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case nt.Never:return"Never";case nt.Not:return"Value should not match";case nt.Null:return"Expected null";case nt.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case nt.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case nt.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case nt.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case nt.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case nt.Number:return"Expected number";case nt.Object:return"Expected object";case nt.ObjectAdditionalProperties:return"Unexpected property";case nt.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case nt.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case nt.ObjectRequiredProperty:return"Expected required property";case nt.Promise:return"Expected Promise";case nt.RegExp:return"Expected string to match regular expression";case nt.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case nt.StringFormat:return`Expected string to match '${t.schema.format}' format`;case nt.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case nt.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case nt.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case nt.String:return"Expected string";case nt.Symbol:return"Expected symbol";case nt.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case nt.Tuple:return"Expected tuple";case nt.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case nt.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case nt.Uint8Array:return"Expected Uint8Array";case nt.Undefined:return"Expected undefined";case nt.Union:return"Expected union value";case nt.Void:return"Expected void";case nt.Kind:return`Expected kind '${t.schema[ot]}'`;default:return"Unknown error type"}}s(mRt,"DefaultErrorFunction");var hRt=mRt;function y8e(){return hRt}s(y8e,"GetErrorFunction");d();var n0e=class extends Dn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function gRt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new n0e(t);return wo(r,e)}s(gRt,"Resolve");function Yl(t,e){return!yo(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(Yl,"Pushref");function wo(t,e){return t[ot]==="This"||t[ot]==="Ref"?gRt(t,e):t}s(wo,"Deref");d();var i0e=class extends Dn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},Ap;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(Ap||(Ap={}));var Y4=BigInt("14695981039346656037"),[ARt,yRt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],CRt=Array.from({length:256}).map((t,e)=>BigInt(e)),C8e=new Float64Array(1),v8e=new DataView(C8e.buffer),x8e=new Uint8Array(C8e.buffer);function*vRt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(vRt,"NumberToBytes");function xRt(t){wd(Ap.Array);for(let e of t)J4(e)}s(xRt,"ArrayType");function ERt(t){wd(Ap.Boolean),wd(t?1:0)}s(ERt,"BooleanType");function bRt(t){wd(Ap.BigInt),v8e.setBigInt64(0,t);for(let e of x8e)wd(e)}s(bRt,"BigIntType");function IRt(t){wd(Ap.Date),J4(t.getTime())}s(IRt,"DateType");function TRt(t){wd(Ap.Null)}s(TRt,"NullType");function wRt(t){wd(Ap.Number),v8e.setFloat64(0,t);for(let e of x8e)wd(e)}s(wRt,"NumberType");function SRt(t){wd(Ap.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())J4(e),J4(t[e])}s(SRt,"ObjectType");function _Rt(t){wd(Ap.String);for(let e=0;e<t.length;e++)for(let r of vRt(t.charCodeAt(e)))wd(r)}s(_Rt,"StringType");function RRt(t){wd(Ap.Symbol),J4(t.description)}s(RRt,"SymbolType");function kRt(t){wd(Ap.Uint8Array);for(let e=0;e<t.length;e++)wd(t[e])}s(kRt,"Uint8ArrayType");function PRt(t){return wd(Ap.Undefined)}s(PRt,"UndefinedType");function J4(t){if(Pn(t))return xRt(t);if(nC(t))return ERt(t);if(Fu(t))return bRt(t);if(cf(t))return IRt(t);if(Nv(t))return TRt(t);if(cn(t))return wRt(t);if(Si(t))return SRt(t);if(yo(t))return _Rt(t);if(Mv(t))return RRt(t);if(k4(t))return kRt(t);if(Ks(t))return PRt(t);throw new i0e(t)}s(J4,"Visit");function wd(t){Y4=Y4^CRt[t],Y4=Y4*ARt%yRt}s(wd,"FNV1A64");function wI(t){return Y4=BigInt("14695981039346656037"),J4(t),Y4}s(wI,"Hash");d();var o0e=class extends Dn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function DRt(t){return t[ot]==="Any"||t[ot]==="Unknown"}s(DRt,"IsAnyOrUnknown");function ji(t){return t!==void 0}s(ji,"IsDefined");function BRt(t,e,r){return!0}s(BRt,"FromAny");function NRt(t,e,r){return!0}s(NRt,"FromArgument");function MRt(t,e,r){if(!Pn(r)||ji(t.minItems)&&!(r.length>=t.minItems)||ji(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Jl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=wI(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(ji(t.contains)||cn(t.minContains)||cn(t.maxContains)))return!0;let n=ji(t.contains)?t.contains:xi(),i=r.reduce((o,a)=>Jl(n,e,a)?o+1:o,0);return!(i===0||cn(t.minContains)&&i<t.minContains||cn(t.maxContains)&&i>t.maxContains)}s(MRt,"FromArray");function LRt(t,e,r){return yj(r)}s(LRt,"FromAsyncIterator");function FRt(t,e,r){return!(!Fu(r)||ji(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||ji(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||ji(t.maximum)&&!(r<=t.maximum)||ji(t.minimum)&&!(r>=t.minimum)||ji(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(FRt,"FromBigInt");function ORt(t,e,r){return nC(r)}s(ORt,"FromBoolean");function QRt(t,e,r){return Jl(t.returns,e,r.prototype)}s(QRt,"FromConstructor");function URt(t,e,r){return!(!cf(r)||ji(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||ji(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||ji(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||ji(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||ji(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(URt,"FromDate");function qRt(t,e,r){return yI(r)}s(qRt,"FromFunction");function HRt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Jl(i,[...e,...n],r)}s(HRt,"FromImport");function $Rt(t,e,r){return!(!xj(r)||ji(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||ji(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||ji(t.maximum)&&!(r<=t.maximum)||ji(t.minimum)&&!(r>=t.minimum)||ji(t.multipleOf)&&r%t.multipleOf!==0)}s($Rt,"FromInteger");function WRt(t,e,r){let n=t.allOf.every(i=>Jl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(qv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(Ta(t.unevaluatedProperties)){let i=new RegExp(qv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Jl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(WRt,"FromIntersect");function jRt(t,e,r){return Cj(r)}s(jRt,"FromIterator");function GRt(t,e,r){return r===t.const}s(GRt,"FromLiteral");function VRt(t,e,r){return!1}s(VRt,"FromNever");function zRt(t,e,r){return!Jl(t.not,e,r)}s(zRt,"FromNot");function KRt(t,e,r){return Nv(r)}s(KRt,"FromNull");function YRt(t,e,r){return!(!Bs.IsNumberLike(r)||ji(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||ji(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||ji(t.minimum)&&!(r>=t.minimum)||ji(t.maximum)&&!(r<=t.maximum)||ji(t.multipleOf)&&r%t.multipleOf!==0)}s(YRt,"FromNumber");function JRt(t,e,r){if(!Bs.IsObjectLike(r)||ji(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||ji(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Jl(o,e,r[i])||(Hv(o)||DRt(o))&&!(i in r))return!1}else if(Bs.IsExactOptionalProperty(r,i)&&!Jl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Jl(t.additionalProperties,e,r[o])):!0}s(JRt,"FromObject");function XRt(t,e,r){return vj(r)}s(XRt,"FromPromise");function ZRt(t,e,r){if(!Bs.IsRecordLike(r)||ji(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||ji(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,f])=>o.test(u)?Jl(i,e,f):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,f])=>o.test(u)?!0:Jl(t.additionalProperties,e,f)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(ZRt,"FromRecord");function ekt(t,e,r){return Jl(wo(t,e),e,r)}s(ekt,"FromRef");function tkt(t,e,r){let n=new RegExp(t.source,t.flags);return ji(t.minLength)&&!(r.length>=t.minLength)||ji(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(tkt,"FromRegExp");function rkt(t,e,r){return!yo(r)||ji(t.minLength)&&!(r.length>=t.minLength)||ji(t.maxLength)&&!(r.length<=t.maxLength)||ji(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:ji(t.format)?tA.Has(t.format)?tA.Get(t.format)(r):!1:!0}s(rkt,"FromString");function nkt(t,e,r){return Mv(r)}s(nkt,"FromSymbol");function ikt(t,e,r){return yo(r)&&new RegExp(t.pattern).test(r)}s(ikt,"FromTemplateLiteral");function okt(t,e,r){return Jl(wo(t,e),e,r)}s(okt,"FromThis");function skt(t,e,r){if(!Pn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Jl(t.items[n],e,r[n]))return!1;return!0}s(skt,"FromTuple");function akt(t,e,r){return Ks(r)}s(akt,"FromUndefined");function ckt(t,e,r){return t.anyOf.some(n=>Jl(n,e,r))}s(ckt,"FromUnion");function lkt(t,e,r){return!(!k4(r)||ji(t.maxByteLength)&&!(r.length<=t.maxByteLength)||ji(t.minByteLength)&&!(r.length>=t.minByteLength))}s(lkt,"FromUint8Array");function ukt(t,e,r){return!0}s(ukt,"FromUnknown");function dkt(t,e,r){return Bs.IsVoidLike(r)}s(dkt,"FromVoid");function fkt(t,e,r){return lf.Has(t[ot])?lf.Get(t[ot])(t,r):!1}s(fkt,"FromKind");function Jl(t,e,r){let n=ji(t.$id)?Yl(t,e):e,i=t;switch(i[ot]){case"Any":return BRt(i,n,r);case"Argument":return NRt(i,n,r);case"Array":return MRt(i,n,r);case"AsyncIterator":return LRt(i,n,r);case"BigInt":return FRt(i,n,r);case"Boolean":return ORt(i,n,r);case"Constructor":return QRt(i,n,r);case"Date":return URt(i,n,r);case"Function":return qRt(i,n,r);case"Import":return HRt(i,n,r);case"Integer":return $Rt(i,n,r);case"Intersect":return WRt(i,n,r);case"Iterator":return jRt(i,n,r);case"Literal":return GRt(i,n,r);case"Never":return VRt(i,n,r);case"Not":return zRt(i,n,r);case"Null":return KRt(i,n,r);case"Number":return YRt(i,n,r);case"Object":return JRt(i,n,r);case"Promise":return XRt(i,n,r);case"Record":return ZRt(i,n,r);case"Ref":return ekt(i,n,r);case"RegExp":return tkt(i,n,r);case"String":return rkt(i,n,r);case"Symbol":return nkt(i,n,r);case"TemplateLiteral":return ikt(i,n,r);case"This":return okt(i,n,r);case"Tuple":return skt(i,n,r);case"Undefined":return akt(i,n,r);case"Union":return ckt(i,n,r);case"Uint8Array":return lkt(i,n,r);case"Unknown":return ukt(i,n,r);case"Void":return dkt(i,n,r);default:if(!lf.Has(i[ot]))throw new o0e(i);return fkt(i,n,r)}}s(Jl,"Visit");function ki(...t){return t.length===3?Jl(t[0],t[1],t[2]):Jl(t[0],[],t[1])}s(ki,"Check");var nt;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(nt||(nt={}));var s0e=class extends Dn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function $v(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s($v,"EscapeKey");function Gi(t){return t!==void 0}s(Gi,"IsDefined");var SI=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function fr(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:y8e()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(fr,"Create");function*pkt(t,e,r,n){}s(pkt,"FromAny");function*mkt(t,e,r,n){}s(mkt,"FromArgument");function*hkt(t,e,r,n){if(!Pn(n))return yield fr(nt.Array,t,r,n);Gi(t.minItems)&&!(n.length>=t.minItems)&&(yield fr(nt.ArrayMinItems,t,r,n)),Gi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield fr(nt.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Xl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=wI(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield fr(nt.ArrayUniqueItems,t,r,n)),!(Gi(t.contains)||Gi(t.minContains)||Gi(t.maxContains)))return;let i=Gi(t.contains)?t.contains:xi(),o=n.reduce((a,c,l)=>Xl(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield fr(nt.ArrayContains,t,r,n)),cn(t.minContains)&&o<t.minContains&&(yield fr(nt.ArrayMinContains,t,r,n)),cn(t.maxContains)&&o>t.maxContains&&(yield fr(nt.ArrayMaxContains,t,r,n))}s(hkt,"FromArray");function*gkt(t,e,r,n){yj(n)||(yield fr(nt.AsyncIterator,t,r,n))}s(gkt,"FromAsyncIterator");function*Akt(t,e,r,n){if(!Fu(n))return yield fr(nt.BigInt,t,r,n);Gi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield fr(nt.BigIntExclusiveMaximum,t,r,n)),Gi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield fr(nt.BigIntExclusiveMinimum,t,r,n)),Gi(t.maximum)&&!(n<=t.maximum)&&(yield fr(nt.BigIntMaximum,t,r,n)),Gi(t.minimum)&&!(n>=t.minimum)&&(yield fr(nt.BigIntMinimum,t,r,n)),Gi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield fr(nt.BigIntMultipleOf,t,r,n))}s(Akt,"FromBigInt");function*ykt(t,e,r,n){nC(n)||(yield fr(nt.Boolean,t,r,n))}s(ykt,"FromBoolean");function*Ckt(t,e,r,n){yield*Xl(t.returns,e,r,n.prototype)}s(Ckt,"FromConstructor");function*vkt(t,e,r,n){if(!cf(n))return yield fr(nt.Date,t,r,n);Gi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield fr(nt.DateExclusiveMaximumTimestamp,t,r,n)),Gi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield fr(nt.DateExclusiveMinimumTimestamp,t,r,n)),Gi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield fr(nt.DateMaximumTimestamp,t,r,n)),Gi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield fr(nt.DateMinimumTimestamp,t,r,n)),Gi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield fr(nt.DateMultipleOfTimestamp,t,r,n))}s(vkt,"FromDate");function*xkt(t,e,r,n){yI(n)||(yield fr(nt.Function,t,r,n))}s(xkt,"FromFunction");function*Ekt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Xl(o,[...e,...i],r,n)}s(Ekt,"FromImport");function*bkt(t,e,r,n){if(!xj(n))return yield fr(nt.Integer,t,r,n);Gi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield fr(nt.IntegerExclusiveMaximum,t,r,n)),Gi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield fr(nt.IntegerExclusiveMinimum,t,r,n)),Gi(t.maximum)&&!(n<=t.maximum)&&(yield fr(nt.IntegerMaximum,t,r,n)),Gi(t.minimum)&&!(n>=t.minimum)&&(yield fr(nt.IntegerMinimum,t,r,n)),Gi(t.multipleOf)&&n%t.multipleOf!==0&&(yield fr(nt.IntegerMultipleOf,t,r,n))}s(bkt,"FromInteger");function*Ikt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Xl(o,e,r,n))i=!0,yield a;if(i)return yield fr(nt.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(qv(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield fr(nt.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(qv(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=Xl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(Ikt,"FromIntersect");function*Tkt(t,e,r,n){Cj(n)||(yield fr(nt.Iterator,t,r,n))}s(Tkt,"FromIterator");function*wkt(t,e,r,n){n!==t.const&&(yield fr(nt.Literal,t,r,n))}s(wkt,"FromLiteral");function*Skt(t,e,r,n){yield fr(nt.Never,t,r,n)}s(Skt,"FromNever");function*_kt(t,e,r,n){Xl(t.not,e,r,n).next().done===!0&&(yield fr(nt.Not,t,r,n))}s(_kt,"FromNot");function*Rkt(t,e,r,n){Nv(n)||(yield fr(nt.Null,t,r,n))}s(Rkt,"FromNull");function*kkt(t,e,r,n){if(!Bs.IsNumberLike(n))return yield fr(nt.Number,t,r,n);Gi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield fr(nt.NumberExclusiveMaximum,t,r,n)),Gi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield fr(nt.NumberExclusiveMinimum,t,r,n)),Gi(t.maximum)&&!(n<=t.maximum)&&(yield fr(nt.NumberMaximum,t,r,n)),Gi(t.minimum)&&!(n>=t.minimum)&&(yield fr(nt.NumberMinimum,t,r,n)),Gi(t.multipleOf)&&n%t.multipleOf!==0&&(yield fr(nt.NumberMultipleOf,t,r,n))}s(kkt,"FromNumber");function*Pkt(t,e,r,n){if(!Bs.IsObjectLike(n))return yield fr(nt.Object,t,r,n);Gi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield fr(nt.ObjectMinProperties,t,r,n)),Gi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield fr(nt.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield fr(nt.ObjectRequiredProperty,t.properties[c],`${r}/${$v(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield fr(nt.ObjectAdditionalProperties,t,`${r}/${$v(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*Xl(t.additionalProperties,e,`${r}/${$v(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*Xl(l,e,`${r}/${$v(c)}`,n[c]),Hv(t)&&!(c in n)&&(yield fr(nt.ObjectRequiredProperty,l,`${r}/${$v(c)}`,void 0))):Bs.IsExactOptionalProperty(n,c)&&(yield*Xl(l,e,`${r}/${$v(c)}`,n[c]))}}s(Pkt,"FromObject");function*Dkt(t,e,r,n){vj(n)||(yield fr(nt.Promise,t,r,n))}s(Dkt,"FromPromise");function*Bkt(t,e,r,n){if(!Bs.IsRecordLike(n))return yield fr(nt.Object,t,r,n);Gi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield fr(nt.ObjectMinProperties,t,r,n)),Gi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield fr(nt.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*Xl(o,e,`${r}/${$v(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*Xl(t.additionalProperties,e,`${r}/${$v(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield fr(nt.ObjectAdditionalProperties,t,`${r}/${$v(c)}`,l)}}s(Bkt,"FromRecord");function*Nkt(t,e,r,n){yield*Xl(wo(t,e),e,r,n)}s(Nkt,"FromRef");function*Mkt(t,e,r,n){if(!yo(n))return yield fr(nt.String,t,r,n);if(Gi(t.minLength)&&!(n.length>=t.minLength)&&(yield fr(nt.StringMinLength,t,r,n)),Gi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield fr(nt.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield fr(nt.RegExp,t,r,n)}s(Mkt,"FromRegExp");function*Lkt(t,e,r,n){if(!yo(n))return yield fr(nt.String,t,r,n);Gi(t.minLength)&&!(n.length>=t.minLength)&&(yield fr(nt.StringMinLength,t,r,n)),Gi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield fr(nt.StringMaxLength,t,r,n)),yo(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield fr(nt.StringPattern,t,r,n))),yo(t.format)&&(tA.Has(t.format)?tA.Get(t.format)(n)||(yield fr(nt.StringFormat,t,r,n)):yield fr(nt.StringFormatUnknown,t,r,n))}s(Lkt,"FromString");function*Fkt(t,e,r,n){Mv(n)||(yield fr(nt.Symbol,t,r,n))}s(Fkt,"FromSymbol");function*Okt(t,e,r,n){if(!yo(n))return yield fr(nt.String,t,r,n);new RegExp(t.pattern).test(n)||(yield fr(nt.StringPattern,t,r,n))}s(Okt,"FromTemplateLiteral");function*Qkt(t,e,r,n){yield*Xl(wo(t,e),e,r,n)}s(Qkt,"FromThis");function*Ukt(t,e,r,n){if(!Pn(n))return yield fr(nt.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield fr(nt.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield fr(nt.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Xl(t.items[i],e,`${r}/${i}`,n[i])}s(Ukt,"FromTuple");function*qkt(t,e,r,n){Ks(n)||(yield fr(nt.Undefined,t,r,n))}s(qkt,"FromUndefined");function*Hkt(t,e,r,n){if(ki(t,e,n))return;let i=t.anyOf.map(o=>new SI(Xl(o,e,r,n)));yield fr(nt.Union,t,r,n,i)}s(Hkt,"FromUnion");function*$kt(t,e,r,n){if(!k4(n))return yield fr(nt.Uint8Array,t,r,n);Gi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield fr(nt.Uint8ArrayMaxByteLength,t,r,n)),Gi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield fr(nt.Uint8ArrayMinByteLength,t,r,n))}s($kt,"FromUint8Array");function*Wkt(t,e,r,n){}s(Wkt,"FromUnknown");function*jkt(t,e,r,n){Bs.IsVoidLike(n)||(yield fr(nt.Void,t,r,n))}s(jkt,"FromVoid");function*Gkt(t,e,r,n){lf.Get(t[ot])(t,n)||(yield fr(nt.Kind,t,r,n))}s(Gkt,"FromKind");function*Xl(t,e,r,n){let i=Gi(t.$id)?[...e,t]:e,o=t;switch(o[ot]){case"Any":return yield*pkt(o,i,r,n);case"Argument":return yield*mkt(o,i,r,n);case"Array":return yield*hkt(o,i,r,n);case"AsyncIterator":return yield*gkt(o,i,r,n);case"BigInt":return yield*Akt(o,i,r,n);case"Boolean":return yield*ykt(o,i,r,n);case"Constructor":return yield*Ckt(o,i,r,n);case"Date":return yield*vkt(o,i,r,n);case"Function":return yield*xkt(o,i,r,n);case"Import":return yield*Ekt(o,i,r,n);case"Integer":return yield*bkt(o,i,r,n);case"Intersect":return yield*Ikt(o,i,r,n);case"Iterator":return yield*Tkt(o,i,r,n);case"Literal":return yield*wkt(o,i,r,n);case"Never":return yield*Skt(o,i,r,n);case"Not":return yield*_kt(o,i,r,n);case"Null":return yield*Rkt(o,i,r,n);case"Number":return yield*kkt(o,i,r,n);case"Object":return yield*Pkt(o,i,r,n);case"Promise":return yield*Dkt(o,i,r,n);case"Record":return yield*Bkt(o,i,r,n);case"Ref":return yield*Nkt(o,i,r,n);case"RegExp":return yield*Mkt(o,i,r,n);case"String":return yield*Lkt(o,i,r,n);case"Symbol":return yield*Fkt(o,i,r,n);case"TemplateLiteral":return yield*Okt(o,i,r,n);case"This":return yield*Qkt(o,i,r,n);case"Tuple":return yield*Ukt(o,i,r,n);case"Undefined":return yield*qkt(o,i,r,n);case"Union":return yield*Hkt(o,i,r,n);case"Uint8Array":return yield*$kt(o,i,r,n);case"Unknown":return yield*Wkt(o,i,r,n);case"Void":return yield*jkt(o,i,r,n);default:if(!lf.Has(o[ot]))throw new s0e(t);return yield*Gkt(o,i,r,n)}}s(Xl,"Visit");function cC(...t){let e=t.length===3?Xl(t[0],t[1],"",t[2]):Xl(t[0],[],"",t[1]);return new SI(e)}s(cC,"Errors");d();d();var X4=class extends Dn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},a0e=class extends Dn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function wa(t,e,r){try{return Oo(t)?t[Ia].Decode(r):r}catch(n){throw new a0e(t,e,r,n)}}s(wa,"Default");function Vkt(t,e,r,n){return Pn(n)?wa(t,r,n.map((i,o)=>oA(t.items,e,`${r}/${o}`,i))):wa(t,r,n)}s(Vkt,"FromArray");function zkt(t,e,r,n){if(!Si(n)||dp(n))return wa(t,r,n);let i=kj(t),o=i.map(f=>f[0]),a={...n};for(let[f,p]of i)f in a&&(a[f]=oA(p,e,`${r}/${f}`,a[f]));if(!Oo(t.unevaluatedProperties))return wa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=wa(l,`${r}/${f}`,u[f]));return wa(t,r,u)}s(zkt,"FromIntersect");function Kkt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=oA(o,[...e,...i],r,n);return wa(t,r,a)}s(Kkt,"FromImport");function Ykt(t,e,r,n){return wa(t,r,oA(t.not,e,r,n))}s(Ykt,"FromNot");function Jkt(t,e,r,n){if(!Si(n))return wa(t,r,n);let i=n0(t),o={...n};for(let u of i)kn(o,u)&&(Ks(o[u])&&(!Ov(t.properties[u])||Bs.IsExactOptionalProperty(o,u))||(o[u]=oA(t.properties[u],e,`${r}/${u}`,o[u])));if(!Ta(t.additionalProperties))return wa(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=wa(c,`${r}/${u}`,l[u]));return wa(t,r,l)}s(Jkt,"FromObject");function Xkt(t,e,r,n){if(!Si(n))return wa(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let f of Object.getOwnPropertyNames(n))o.test(f)&&(a[f]=oA(t.patternProperties[i],e,`${r}/${f}`,a[f]));if(!Ta(t.additionalProperties))return wa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.test(f)||(u[f]=wa(l,`${r}/${f}`,u[f]));return wa(t,r,u)}s(Xkt,"FromRecord");function Zkt(t,e,r,n){let i=wo(t,e);return wa(t,r,oA(i,e,r,n))}s(Zkt,"FromRef");function ePt(t,e,r,n){let i=wo(t,e);return wa(t,r,oA(i,e,r,n))}s(ePt,"FromThis");function tPt(t,e,r,n){return Pn(n)&&Pn(t.items)?wa(t,r,t.items.map((i,o)=>oA(i,e,`${r}/${o}`,n[o]))):wa(t,r,n)}s(tPt,"FromTuple");function rPt(t,e,r,n){for(let i of t.anyOf){if(!ki(i,e,n))continue;let o=oA(i,e,r,n);return wa(t,r,o)}return wa(t,r,n)}s(rPt,"FromUnion");function oA(t,e,r,n){let i=Yl(t,e),o=t;switch(t[ot]){case"Array":return Vkt(o,i,r,n);case"Import":return Kkt(o,i,r,n);case"Intersect":return zkt(o,i,r,n);case"Not":return Ykt(o,i,r,n);case"Object":return Jkt(o,i,r,n);case"Record":return Xkt(o,i,r,n);case"Ref":return Zkt(o,i,r,n);case"Symbol":return wa(o,r,n);case"This":return ePt(o,i,r,n);case"Tuple":return tPt(o,i,r,n);case"Union":return rPt(o,i,r,n);default:return wa(o,r,n)}}s(oA,"Visit");function Z4(t,e,r){return oA(t,e,"",r)}s(Z4,"TransformDecode");d();var eD=class extends Dn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},c0e=class extends Dn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function Qu(t,e,r){try{return Oo(t)?t[Ia].Encode(r):r}catch(n){throw new c0e(t,e,r,n)}}s(Qu,"Default");function nPt(t,e,r,n){let i=Qu(t,r,n);return Pn(i)?i.map((o,a)=>sA(t.items,e,`${r}/${a}`,o)):i}s(nPt,"FromArray");function iPt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=Qu(t,r,n);return sA(o,[...e,...i],r,a)}s(iPt,"FromImport");function oPt(t,e,r,n){let i=Qu(t,r,n);if(!Si(n)||dp(n))return i;let o=kj(t),a=o.map(p=>p[0]),c={...i};for(let[p,m]of o)p in c&&(c[p]=sA(m,e,`${r}/${p}`,c[p]));if(!Oo(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,f={...c};for(let p of l)a.includes(p)||(f[p]=Qu(u,`${r}/${p}`,f[p]));return f}s(oPt,"FromIntersect");function sPt(t,e,r,n){return Qu(t.not,r,Qu(t,r,n))}s(sPt,"FromNot");function aPt(t,e,r,n){let i=Qu(t,r,n);if(!Si(i))return i;let o=n0(t),a={...i};for(let f of o)kn(a,f)&&(Ks(a[f])&&(!Ov(t.properties[f])||Bs.IsExactOptionalProperty(a,f))||(a[f]=sA(t.properties[f],e,`${r}/${f}`,a[f])));if(!Ta(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=Qu(l,`${r}/${f}`,u[f]));return u}s(aPt,"FromObject");function cPt(t,e,r,n){let i=Qu(t,r,n);if(!Si(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=sA(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!Ta(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,f={...c};for(let p of l)a.test(p)||(f[p]=Qu(u,`${r}/${p}`,f[p]));return f}s(cPt,"FromRecord");function lPt(t,e,r,n){let i=wo(t,e),o=sA(i,e,r,n);return Qu(t,r,o)}s(lPt,"FromRef");function uPt(t,e,r,n){let i=wo(t,e),o=sA(i,e,r,n);return Qu(t,r,o)}s(uPt,"FromThis");function dPt(t,e,r,n){let i=Qu(t,r,n);return Pn(t.items)?t.items.map((o,a)=>sA(o,e,`${r}/${a}`,i[a])):[]}s(dPt,"FromTuple");function fPt(t,e,r,n){for(let i of t.anyOf){if(!ki(i,e,n))continue;let o=sA(i,e,r,n);return Qu(t,r,o)}for(let i of t.anyOf){let o=sA(i,e,r,n);if(ki(t,e,o))return Qu(t,r,o)}return Qu(t,r,n)}s(fPt,"FromUnion");function sA(t,e,r,n){let i=Yl(t,e),o=t;switch(t[ot]){case"Array":return nPt(o,i,r,n);case"Import":return iPt(o,i,r,n);case"Intersect":return oPt(o,i,r,n);case"Not":return sPt(o,i,r,n);case"Object":return aPt(o,i,r,n);case"Record":return cPt(o,i,r,n);case"Ref":return lPt(o,i,r,n);case"This":return uPt(o,i,r,n);case"Tuple":return dPt(o,i,r,n);case"Union":return fPt(o,i,r,n);default:return Qu(o,r,n)}}s(sA,"Visit");function tD(t,e,r){return sA(t,e,"",r)}s(tD,"TransformEncode");d();function pPt(t,e){return Oo(t)||Rl(t.items,e)}s(pPt,"FromArray");function mPt(t,e){return Oo(t)||Rl(t.items,e)}s(mPt,"FromAsyncIterator");function hPt(t,e){return Oo(t)||Rl(t.returns,e)||t.parameters.some(r=>Rl(r,e))}s(hPt,"FromConstructor");function gPt(t,e){return Oo(t)||Rl(t.returns,e)||t.parameters.some(r=>Rl(r,e))}s(gPt,"FromFunction");function APt(t,e){return Oo(t)||Oo(t.unevaluatedProperties)||t.allOf.some(r=>Rl(r,e))}s(APt,"FromIntersect");function yPt(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return Oo(t)||Rl(n,[...r,...e])}s(yPt,"FromImport");function CPt(t,e){return Oo(t)||Rl(t.items,e)}s(CPt,"FromIterator");function vPt(t,e){return Oo(t)||Rl(t.not,e)}s(vPt,"FromNot");function xPt(t,e){return Oo(t)||Object.values(t.properties).some(r=>Rl(r,e))||Ta(t.additionalProperties)&&Rl(t.additionalProperties,e)}s(xPt,"FromObject");function EPt(t,e){return Oo(t)||Rl(t.item,e)}s(EPt,"FromPromise");function bPt(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Oo(t)||Rl(n,e)||Ta(t.additionalProperties)&&Oo(t.additionalProperties)}s(bPt,"FromRecord");function IPt(t,e){return Oo(t)?!0:Rl(wo(t,e),e)}s(IPt,"FromRef");function TPt(t,e){return Oo(t)?!0:Rl(wo(t,e),e)}s(TPt,"FromThis");function wPt(t,e){return Oo(t)||!Ks(t.items)&&t.items.some(r=>Rl(r,e))}s(wPt,"FromTuple");function SPt(t,e){return Oo(t)||t.anyOf.some(r=>Rl(r,e))}s(SPt,"FromUnion");function Rl(t,e){let r=Yl(t,e),n=t;if(t.$id&&l0e.has(t.$id))return!1;switch(t.$id&&l0e.add(t.$id),t[ot]){case"Array":return pPt(n,r);case"AsyncIterator":return mPt(n,r);case"Constructor":return hPt(n,r);case"Function":return gPt(n,r);case"Import":return yPt(n,r);case"Intersect":return APt(n,r);case"Iterator":return CPt(n,r);case"Not":return vPt(n,r);case"Object":return xPt(n,r);case"Promise":return EPt(n,r);case"Record":return bPt(n,r);case"Ref":return IPt(n,r);case"This":return TPt(n,r);case"Tuple":return wPt(n,r);case"Union":return SPt(n,r);default:return Oo(t)}}s(Rl,"Visit");var l0e=new Set;function Wv(t,e){return l0e.clear(),Rl(t,e)}s(Wv,"HasTransform");var u0e=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=Wv(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return cC(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new X4(this.schema,e,this.Errors(e).First());return this.hasTransform?Z4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?tD(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new eD(this.schema,e,this.Errors(e).First());return r}},jv;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(jv||(jv={}));var $j;(function(t){function e(o){return o.length===0?!1:jv.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(jv.IsAlpha(c)||jv.IsNumeric(c)||jv.DollarSign(c)||jv.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})($j||($j={}));var d0e;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);jv.IsNumeric(o)||jv.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(d0e||(d0e={}));var f0e;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(f0e||(f0e={}));var p0e=class extends Dn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},Wj=class extends Dn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},K_;(function(t){function e(a,c,l){return Bs.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${$j.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return Bs.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return Bs.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return Bs.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Bs.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(K_||(K_={}));var Xs;(function(t){function e(ue){return ue[ot]==="Any"||ue[ot]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ue,Ue,ye){yield"true"}s(r,"FromAny");function*n(ue,Ue,ye){yield"true"}s(n,"FromArgument");function*i(ue,Ue,ye){yield`Array.isArray(${ye})`;let[$e,se]=[Fe("value","any"),Fe("acc","number")];cn(ue.maxItems)&&(yield`${ye}.length <= ${ue.maxItems}`),cn(ue.minItems)&&(yield`${ye}.length >= ${ue.minItems}`);let le=Ae(ue.items,Ue,"value");if(yield`${ye}.every((${$e}) => ${le})`,Js(ue.contains)||cn(ue.minContains)||cn(ue.maxContains)){let qe=Js(ue.contains)?ue.contains:xi(),Be=Ae(qe,Ue,"value"),Ee=cn(ue.minContains)?[`(count >= ${ue.minContains})`]:[],je=cn(ue.maxContains)?[`(count <= ${ue.maxContains})`]:[],tt=`const count = value.reduce((${se}, ${$e}) => ${Be} ? acc + 1 : acc, 0)`,pt=["(count > 0)",...Ee,...je].join(" && ");yield`((${$e}) => { ${tt}; return ${pt}})(${ye})`}ue.uniqueItems===!0&&(yield`((${$e}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ue,Ue,ye){yield`(typeof ${ye} === 'bigint')`,Fu(ue.exclusiveMaximum)&&(yield`${ye} < BigInt(${ue.exclusiveMaximum})`),Fu(ue.exclusiveMinimum)&&(yield`${ye} > BigInt(${ue.exclusiveMinimum})`),Fu(ue.maximum)&&(yield`${ye} <= BigInt(${ue.maximum})`),Fu(ue.minimum)&&(yield`${ye} >= BigInt(${ue.minimum})`),Fu(ue.multipleOf)&&(yield`(${ye} % BigInt(${ue.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(ue,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(ue,Ue,ye){yield*te(ue.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(ue,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,cn(ue.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ue.exclusiveMaximumTimestamp}`),cn(ue.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ue.exclusiveMinimumTimestamp}`),cn(ue.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ue.maximumTimestamp}`),cn(ue.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ue.minimumTimestamp}`),cn(ue.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ue.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*f(ue,Ue,ye){yield`(typeof ${ye} === 'function')`}s(f,"FromFunction");function*p(ue,Ue,ye){let $e=globalThis.Object.getOwnPropertyNames(ue.$defs).reduce((se,le)=>[...se,ue.$defs[le]],[]);yield*te(jm(ue.$ref),[...Ue,...$e],ye)}s(p,"FromImport");function*m(ue,Ue,ye){yield`Number.isInteger(${ye})`,cn(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),cn(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),cn(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),cn(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),cn(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ue,Ue,ye){let $e=ue.allOf.map(se=>Ae(se,Ue,ye)).join(" && ");if(ue.unevaluatedProperties===!1){let se=Te(`${new RegExp(qv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key))`;yield`(${$e} && ${le})`}else if(Js(ue.unevaluatedProperties)){let se=Te(`${new RegExp(qv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key) || ${Ae(ue.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${$e} && ${le})`}else yield`(${$e})`}s(h,"FromIntersect");function*g(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*A(ue,Ue,ye){typeof ue.const=="number"||typeof ue.const=="boolean"?yield`(${ye} === ${ue.const})`:yield`(${ye} === '${f0e.Escape(ue.const)}')`}s(A,"FromLiteral");function*y(ue,Ue,ye){yield"false"}s(y,"FromNever");function*E(ue,Ue,ye){yield`(!${Ae(ue.not,Ue,ye)})`}s(E,"FromNot");function*b(ue,Ue,ye){yield`(${ye} === null)`}s(b,"FromNull");function*S(ue,Ue,ye){yield K_.IsNumberLike(ye),cn(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),cn(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),cn(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),cn(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),cn(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(S,"FromNumber");function*R(ue,Ue,ye){yield K_.IsObjectLike(ye),cn(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),cn(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let $e=Object.getOwnPropertyNames(ue.properties);for(let se of $e){let le=$j.Encode(ye,se),qe=ue.properties[se];if(ue.required&&ue.required.includes(se))yield*te(qe,Ue,le),(Hv(qe)||e(qe))&&(yield`('${se}' in ${ye})`);else{let Be=Ae(qe,Ue,le);yield K_.IsExactOptionalProperty(ye,se,Be)}}if(ue.additionalProperties===!1)if(ue.required&&ue.required.length===$e.length)yield`Object.getOwnPropertyNames(${ye}).length === ${$e.length}`;else{let se=`[${$e.map(le=>`'${le}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${se}.includes(key))`}if(typeof ue.additionalProperties=="object"){let se=Ae(ue.additionalProperties,Ue,`${ye}[key]`),le=`[${$e.map(qe=>`'${qe}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${le}.includes(key) || ${se}))`}}s(R,"FromObject");function*B(ue,Ue,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*L(ue,Ue,ye){yield K_.IsRecordLike(ye),cn(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),cn(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let[$e,se]=Object.entries(ue.patternProperties)[0],le=Te(`${new RegExp($e)}`),qe=Ae(se,Ue,"value"),Be=Js(ue.additionalProperties)?Ae(ue.additionalProperties,Ue,ye):ue.additionalProperties===!1?"false":"true",Ee=`(${le}.test(key) ? ${qe} : ${Be})`;yield`(Object.entries(${ye}).every(([key, value]) => ${Ee}))`}s(L,"FromRecord");function*O(ue,Ue,ye){let $e=wo(ue,Ue);if(pe.functions.has(ue.$ref))return yield`${Oe(ue.$ref)}(${ye})`;yield*te($e,Ue,ye)}s(O,"FromRef");function*Y(ue,Ue,ye){let $e=Te(`${new RegExp(ue.source,ue.flags)};`);yield`(typeof ${ye} === 'string')`,cn(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),cn(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),yield`${$e}.test(${ye})`}s(Y,"FromRegExp");function*V(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,cn(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),cn(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),ue.pattern!==void 0&&(yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`),ue.format!==void 0&&(yield`format('${ue.format}', ${ye})`)}s(V,"FromString");function*z(ue,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(z,"FromSymbol");function*Q(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`}s(Q,"FromTemplateLiteral");function*U(ue,Ue,ye){yield`${Oe(ue.$ref)}(${ye})`}s(U,"FromThis");function*Z(ue,Ue,ye){if(yield`Array.isArray(${ye})`,ue.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ue.maxItems})`;for(let $e=0;$e<ue.items.length;$e++)yield`${Ae(ue.items[$e],Ue,`${ye}[${$e}]`)}`}s(Z,"FromTuple");function*J(ue,Ue,ye){yield`${ye} === undefined`}s(J,"FromUndefined");function*j(ue,Ue,ye){yield`(${ue.anyOf.map(se=>Ae(se,Ue,ye)).join(" || ")})`}s(j,"FromUnion");function*$(ue,Ue,ye){yield`${ye} instanceof Uint8Array`,cn(ue.maxByteLength)&&(yield`(${ye}.length <= ${ue.maxByteLength})`),cn(ue.minByteLength)&&(yield`(${ye}.length >= ${ue.minByteLength})`)}s($,"FromUint8Array");function*X(ue,Ue,ye){yield"true"}s(X,"FromUnknown");function*ie(ue,Ue,ye){yield K_.IsVoidLike(ye)}s(ie,"FromVoid");function*ae(ue,Ue,ye){let $e=pe.instances.size;pe.instances.set($e,ue),yield`kind('${ue[ot]}', ${$e}, ${ye})`}s(ae,"FromKind");function*te(ue,Ue,ye,$e=!0){let se=yo(ue.$id)?[...Ue,ue]:Ue,le=ue;if($e&&yo(ue.$id)){let qe=Oe(ue.$id);if(pe.functions.has(qe))return yield`${qe}(${ye})`;{pe.functions.set(qe,"<deferred>");let Be=Je(qe,ue,Ue,"value",!1);return pe.functions.set(qe,Be),yield`${qe}(${ye})`}}switch(le[ot]){case"Any":return yield*r(le,se,ye);case"Argument":return yield*n(le,se,ye);case"Array":return yield*i(le,se,ye);case"AsyncIterator":return yield*o(le,se,ye);case"BigInt":return yield*a(le,se,ye);case"Boolean":return yield*c(le,se,ye);case"Constructor":return yield*l(le,se,ye);case"Date":return yield*u(le,se,ye);case"Function":return yield*f(le,se,ye);case"Import":return yield*p(le,se,ye);case"Integer":return yield*m(le,se,ye);case"Intersect":return yield*h(le,se,ye);case"Iterator":return yield*g(le,se,ye);case"Literal":return yield*A(le,se,ye);case"Never":return yield*y(le,se,ye);case"Not":return yield*E(le,se,ye);case"Null":return yield*b(le,se,ye);case"Number":return yield*S(le,se,ye);case"Object":return yield*R(le,se,ye);case"Promise":return yield*B(le,se,ye);case"Record":return yield*L(le,se,ye);case"Ref":return yield*O(le,se,ye);case"RegExp":return yield*Y(le,se,ye);case"String":return yield*V(le,se,ye);case"Symbol":return yield*z(le,se,ye);case"TemplateLiteral":return yield*Q(le,se,ye);case"This":return yield*U(le,se,ye);case"Tuple":return yield*Z(le,se,ye);case"Undefined":return yield*J(le,se,ye);case"Union":return yield*j(le,se,ye);case"Uint8Array":return yield*$(le,se,ye);case"Unknown":return yield*X(le,se,ye);case"Void":return yield*ie(le,se,ye);default:if(!lf.Has(le[ot]))throw new p0e(ue);return yield*ae(le,se,ye)}}s(te,"Visit");let pe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Ae(ue,Ue,ye,$e=!0){return`(${[...te(ue,Ue,ye,$e)].join(" && ")})`}s(Ae,"CreateExpression");function Oe(ue){return`check_${d0e.Encode(ue)}`}s(Oe,"CreateFunctionName");function Te(ue){let Ue=`local_${pe.variables.size}`;return pe.variables.set(Ue,`const ${Ue} = ${ue}`),Ue}s(Te,"CreateVariable");function Je(ue,Ue,ye,$e,se=!0){let[le,qe]=[`
`,tt=>"".padStart(tt," ")],Be=Fe("value","any"),Ee=lt("boolean"),je=[...te(Ue,ye,$e,se)].map(tt=>`${qe(4)}${tt}`).join(` &&${le}`);return`function ${ue}(${Be})${Ee} {${le}${qe(2)}return (${le}${je}${le}${qe(2)})
}`}s(Je,"CreateFunction");function Fe(ue,Ue){let ye=pe.language==="typescript"?`: ${Ue}`:"";return`${ue}${ye}`}s(Fe,"CreateParameter");function lt(ue){return pe.language==="typescript"?`: ${ue}`:""}s(lt,"CreateReturns");function _t(ue,Ue,ye){let $e=Je("check",ue,Ue,"value"),se=Fe("value","any"),le=lt("boolean"),qe=[...pe.functions.values()],Be=[...pe.variables.values()],Ee=yo(ue.$id)?`return function check(${se})${le} {
  return ${Oe(ue.$id)}(value)
}`:`return ${$e}`;return[...Be,...qe,Ee].join(`
`)}s(_t,"Build");function xt(...ue){let Ue={language:"javascript"},[ye,$e,se]=ue.length===2&&Pn(ue[1])?[ue[0],ue[1],Ue]:ue.length===2&&!Pn(ue[1])?[ue[0],[],ue[1]]:ue.length===3?[ue[0],ue[1],ue[2]]:ue.length===1?[ue[0],[],Ue]:[null,[],Ue];if(pe.language=se.language,pe.variables.clear(),pe.functions.clear(),pe.instances.clear(),!Js(ye))throw new Wj(ye);for(let le of $e)if(!Js(le))throw new Wj(le);return _t(ye,$e,se)}s(xt,"Code"),t.Code=xt;function ht(ue,Ue=[]){let ye=xt(ue,Ue,{language:"javascript"}),$e=globalThis.Function("kind","format","hash",ye),se=new Map(pe.instances);function le(je,tt,pt){if(!lf.Has(je)||!se.has(tt))return!1;let Ft=lf.Get(je),Jt=se.get(tt);return Ft(Jt,pt)}s(le,"typeRegistryFunction");function qe(je,tt){return tA.Has(je)?tA.Get(je)(tt):!1}s(qe,"formatRegistryFunction");function Be(je){return wI(je)}s(Be,"hashFunction");let Ee=$e(le,qe,Be);return new u0e(ue,Ue,Ee,ye)}s(ht,"Compile"),t.Compile=ht})(Xs||(Xs={}));var BG=Ne(AI());d();d();var Uu=[];for(let t=0;t<256;++t)Uu.push((t+256).toString(16).slice(1));function E8e(t,e=0){return(Uu[t[e+0]]+Uu[t[e+1]]+Uu[t[e+2]]+Uu[t[e+3]]+"-"+Uu[t[e+4]]+Uu[t[e+5]]+"-"+Uu[t[e+6]]+Uu[t[e+7]]+"-"+Uu[t[e+8]]+Uu[t[e+9]]+"-"+Uu[t[e+10]]+Uu[t[e+11]]+Uu[t[e+12]]+Uu[t[e+13]]+Uu[t[e+14]]+Uu[t[e+15]]).toLowerCase()}s(E8e,"unsafeStringify");d();var b8e=require("crypto");var Gj=new Uint8Array(256),jj=Gj.length;function m0e(){return jj>Gj.length-16&&((0,b8e.randomFillSync)(Gj),jj=0),Gj.slice(jj,jj+=16)}s(m0e,"rng");d();d();var I8e=require("crypto"),h0e={randomUUID:I8e.randomUUID};function _Pt(t,e,r){if(h0e.randomUUID&&!e&&!t)return h0e.randomUUID();t=t||{};let n=t.random??t.rng?.()??m0e();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return E8e(n)}s(_Pt,"v4");var Er=_Pt;var NG=Ne(mi());function xD(t){return t===1}s(xD,"isRestricted");var D5t=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],r6=8192,B5t=21;var Hu=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return xD(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(bD(e))return this.reporterRestricted;if(_4(e))return new _9}getFTReporter(e){if(e6e(e))return this.reporterFT;if(_4(e))return new _9}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},N5t=x.Object({},{additionalProperties:x.String()}),M5t=x.Object({meanLogProb:x.Optional(x.Number()),meanAlternativeLogProb:x.Optional(x.Number())},{additionalProperties:x.Number()}),L5t=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function F5t(t){return L5t.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(F5t,"isOomError");function O5t(t){return i6(t)?"network":F5t(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(O5t,"getErrorType");var Gr=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=Xs.Compile(N5t)}static{this.validateTelemetryMeasurements=Xs.Compile(M5t)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},_a())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=_a())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Mt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=tC(e.get(hn).getEditorInfo()),this.properties.editor_plugin_version=tC(e.get(hn).getEditorPluginInfo());let r=e.get(Ds);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${t2(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(hn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=tC(n.getEditorInfo());let i=e.get(Hr);this.properties.fetcher=i.name;let o=e.get(Pc).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=o6e(e);r["copilot.build"]=s6e(e),r["copilot.buildType"]=pC(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(xD(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>r6){let a=0,c=0;for(;o>0&&c<B5t;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+r6;o<r6&&(u=a+o),r[l]=i.slice(a,u),o-=r6,a+=r6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=q5t(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(_4(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return lA(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),xD(r)&&lA(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,t6e(e))}},fC=class t extends Gr{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}extendWithExpTelemetry(){return this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this),Promise.resolve()}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new O_({}),exp:Fm.createEmptyConfig()})}};function n6(t,e,r,n){t.get(Hu).getReporter(t,e)?.sendTelemetryEvent(r,Gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(n6,"sendTelemetryEvent");function Q5t(t,e,r,n){t.get(Hu).getReporter(t,e)?.sendTelemetryErrorEvent(r,Gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(Q5t,"sendTelemetryErrorEvent");function U5t(t,e,r,n){t.get(Hu).getFTReporter(t)?.sendTelemetryEvent(r,Gr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(U5t,"sendFTTelemetryEvent");function ED(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(ED,"telemetrizePromptLength");function _a(){return performance.now()}s(_a,"now");function q5t(t){return Math.floor(t/1e3)}s(q5t,"nowSeconds");function bD(t){return t.get(Lu).optedIn}s(bD,"shouldSendRestricted");function e6e(t){return t.get(Lu).ftFlag!==""}s(e6e,"shouldSendFinetuningTelemetry");function Bt(t,e,r,n){return t.get(Xc).register(H5t(t,e,_a(),r?.extendedBy(),n))}s(Bt,"telemetry");async function H5t(t,e,r,n,i=0){let o=n||Gr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!xD(i)||bD(t))&&n6(t,i,e,o),xD(i)&&D5t.includes(e)&&e6e(t)&&U5t(t,i,e,o)}s(H5t,"_telemetry");function TW(t,e){return t.get(Xc).register($5t(t,e,_a()))}s(TW,"telemetryExpProblem");async function $5t(t,e,r){let n="expProblem",i=Gr.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),n6(t,0,n,i)}s($5t,"_telemetryExpProblem");function Wpe(t,e,r,n){let i={...r,...t6e(t)};n6(t,0,e,{properties:i,measurements:n})}s(Wpe,"telemetryRaw");function t6e(t){let e=t.get(hn),r={unique_id:Er(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:tC(e.getEditorInfo())};return{...t.get(Lu).getProperties(),...r}}s(t6e,"createRequiredProperties");var $pe=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,BG.SHA256)(BG.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function ja(t,e,r,n,i){return t.get(Xc).register(r6e(t,e,_a(),r,{...n},i))}s(ja,"telemetryException");async function r6e(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||kd(a)||a instanceof ba||a instanceof NG.ConnectionError||a instanceof NG.ResponseError)return}else{if(a=new $pe(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let A=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(A[0]??"")&&A.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(A[0]??"")&&A.shift(),a.stack=`${a}
${A.join(`
`)}`}}let c=t.get(hn).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=bD(t),f=i3e(a,l,u),p=O5t(a),m=p==="exception",h=Gr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:f.stack||f.toString(),message:f.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let A of o.exception_detail)A.value&&(u?A.value=yfe(A.value):A.value="[redacted]");if(o??=GBe(t,f),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let A=n3e(a,l),y=Gr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:A.stack||A.toString(),message:A.message,...i});o.rollup_id!=="auto"&&(y.properties.errno=o.rollup_id),await y.makeReadyForSending(t,1,"IncludeExp",r),y.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=y.properties.unique_id,n6(t,1,`error.${p}`,y)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(rC).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),n6(t,0,`error.${p}`,h)}s(r6e,"_telemetryException");function eu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await r6e(t,a,_a(),r,n)}},"wrapped");return(...o)=>t.get(Xc).register(i(...o))}s(eu,"telemetryCatch");function lA(t,e,r,n){return t.get(Xc).register(W5t(t,e,_a(),r?.extendedBy(),n))}s(lA,"telemetryError");async function W5t(t,e,r,n,i=0){if(xD(i)&&!bD(t))return;let o=n||Gr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),Q5t(t,i,e,o)}s(W5t,"_telemetryError");function n6e(t,e,r,n,i){let o=Gr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Bt(t,"engine.completion",o,1)}s(n6e,"logEngineCompletion");function i6e(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Bt(t,"engine.prompt",i,1)}s(i6e,"logEnginePrompt");d();d();var a6e=Ne(mi()),c6e=x.Object({accessToken:x.Optional(x.String({minLength:1})),handle:x.Optional(x.String({minLength:1})),login:x.Optional(x.String({minLength:1})),githubAppId:x.Optional(x.String({minLength:1})),apiUrl:x.Optional(x.String({})),serverUrl:x.Optional(x.String({})),tokenEndpoint:x.Optional(x.String({}))}),jpe;(r=>(r.method="github/didChangeAuth",r.type=new a6e.ProtocolNotificationType(r.method)))(jpe||={});d();var l6e=Ne(mi()),Gpe;(r=>(r.method="copilot/ipCodeCitation",r.type=new l6e.NotificationType(r.method)))(Gpe||={});d();var u6e=Ne(mi()),MG;(r=>(r.method="context/update",r.type=new u6e.ProtocolRequestType(r.method)))(MG||={});d();d();var FI="Cancelled";d();var mn=Ne(mi()),o6=x.String(),l0=x.Object({uri:o6}),r2=x.Intersect([l0,x.Object({version:x.Optional(x.Integer())})]),tVr=x.Required(r2),tu=x.Object({line:x.Integer({minimum:0}),character:x.Integer({minimum:0})}),Dc=x.Object({start:tu,end:tu}),Vpe=x.Union([x.Integer(),x.String()]),rVr=x.Object({isCancellationRequested:x.Boolean(),onCancellationRequested:x.Any()});d();var d6e=Ne(mi()),zpe;(r=>(r.method="textDocument/didFocus",r.type=new d6e.ProtocolNotificationType(r.method)))(zpe||={});d();var j5t=x.Object({didChangeFeatureFlags:x.Boolean(),fetch:x.Boolean(),ipCodeCitation:x.Boolean(),redirectedTelemetry:x.Boolean(),related:x.Boolean(),token:x.Boolean(),watchedFiles:x.Boolean(),showPanelMessage:x.Boolean()}),G5t=x.Object({name:x.String(),version:x.String(),readableName:x.Optional(x.String())}),f6e=x.Object({name:x.String(),version:x.Optional(x.String()),readableName:x.Optional(x.String())}),p6e=x.Object({editorInfo:x.Optional(f6e),editorPluginInfo:x.Optional(f6e),relatedPluginInfo:x.Optional(x.Array(G5t)),copilotIntegrationId:x.Optional(x.String()),copilotCapabilities:x.Optional(x.Partial(j5t)),githubAppId:x.Optional(x.String())});d();var s6=Ne(mi());var LG=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(LG||{}),V5t=x.Enum(LG),z5t=x.Object({triggerKind:V5t,selectedCompletionInfo:x.Optional(x.Object({text:x.String(),range:Dc,tooltipSignature:x.Optional(x.String())}))}),m6e=x.Object({textDocument:r2,position:tu,formattingOptions:x.Optional(x.Object({tabSize:x.Optional(x.Union([x.Integer({minimum:1}),x.String()])),insertSpaces:x.Optional(x.Union([x.Boolean(),x.String()]))})),context:z5t,data:x.Optional(x.Unknown())}),Kpe;(r=>(r.method="textDocument/inlineCompletion",r.type=new s6.ProtocolRequestType(r.method)))(Kpe||={});var h6e=x.Object({command:x.Object({arguments:x.Tuple([x.String({minLength:1})])})}),g6e=x.Object({item:h6e}),Ype;(r=>(r.method="textDocument/didShowCompletion",r.type=new s6.ProtocolNotificationType(r.method)))(Ype||={});var A6e=x.Object({item:h6e,acceptedLength:x.Integer({minimum:1})}),Jpe;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new s6.ProtocolNotificationType(r.method)))(Jpe||={});d();var y6e=Ne(mi()),Xpe;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new y6e.ProtocolRequestType(r.method)))(Xpe||={});d();var C6e=Ne(mi()),v6e=x.Object({textDocument:r2,position:tu}),K5t=x.Object({command:x.Object({arguments:x.Tuple([x.String({minLength:1})])})}),x6e=x.Object({item:K5t}),Zpe;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new C6e.ProtocolNotificationType(r.method)))(Zpe||={});d();var FG=Ne(mi());var E6e=x.Object({textDocument:r2,position:tu,partialResultToken:x.Optional(Vpe),workDoneToken:x.Optional(Vpe)}),OG;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new FG.ProtocolRequestType(n.method),n.partialResult=new FG.ProgressType))(OG||={});d();var b6e=Ne(mi()),eme;(r=>(r.method="copilot/related",r.type=new b6e.ProtocolRequestType(r.method)))(eme||={});d();var I6e=Ne(mi()),tme;(r=>(r.method="statusNotification",r.type=new I6e.ProtocolNotificationType(r.method)))(tme||={});var T6e=Ne(require("events"));var uA=class{static{s(this,"CopilotTokenNotifier")}#e=new T6e.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=eu(e,n,`event.${r}`);return this.#e.on(r,i),mn.Disposable.create(()=>this.#e.off(r,i))}};function Ps(t,e){return t.get(uA).on(t,"CopilotToken",e)}s(Ps,"onCopilotToken");function a6(t,e){return t.get(uA).emitToken(e)}s(a6,"emitCopilotToken");function QG(t){return t.get(uA).lastToken}s(QG,"getLastCopilotToken");d();var UG=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};d();function rme(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(rme,"findKnownOrg");function w6e(t){let e=t.organization_list??[];return rme(e)??""}s(w6e,"getUserKind");d();d();var c6=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function kd(t){return!t||typeof t!="object"?!1:t instanceof c6||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(kd,"isAbortError");var ID=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},mC=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},Y5t=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function i6(t,e=!0){return t instanceof Error?e&&"cause"in t&&i6(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof ID||t instanceof mC||t?.message?.startsWith("net::")||Y5t.has(t.code??""):!1}s(i6,"isNetworkError");var OI=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new ID(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new ID(`Response body truncated: actualLength=${o}`,"Truncated"):new ID(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};d();function qG(){return typeof process>"u"}s(qG,"isWeb");function l6(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(l6,"isMsBenchModeEnabled");function S6e(){return typeof process<"u"&&process.env.SIMULATOR_MODE==="true"}s(S6e,"isSimulatorModeEnabled");var nme=class extends mC{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Ym(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...qG()?{}:vp(t),...n.headers}};let i=await t.get(Hr).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new mC(i);if(!i.headers.get("x-github-request-id"))throw new nme(i);return i}s(Ym,"apiFetch");d();d();var Ra=class{constructor(){this.recentNotifications=new wr(100)}static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showWarningMessage(r,...n)}async showInformationMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showInformationMessage(r,...n)}};d();var k6e=require("os"),HG=require("path");d();var _6e;(()=>{"use strict";var t={975:Q=>{function U(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(U,"e");function Z(j,$){for(var X,ie="",ae=0,te=-1,pe=0,Ae=0;Ae<=j.length;++Ae){if(Ae<j.length)X=j.charCodeAt(Ae);else{if(X===47)break;X=47}if(X===47){if(!(te===Ae-1||pe===1))if(te!==Ae-1&&pe===2){if(ie.length<2||ae!==2||ie.charCodeAt(ie.length-1)!==46||ie.charCodeAt(ie.length-2)!==46){if(ie.length>2){var Oe=ie.lastIndexOf("/");if(Oe!==ie.length-1){Oe===-1?(ie="",ae=0):ae=(ie=ie.slice(0,Oe)).length-1-ie.lastIndexOf("/"),te=Ae,pe=0;continue}}else if(ie.length===2||ie.length===1){ie="",ae=0,te=Ae,pe=0;continue}}$&&(ie.length>0?ie+="/..":ie="..",ae=2)}else ie.length>0?ie+="/"+j.slice(te+1,Ae):ie=j.slice(te+1,Ae),ae=Ae-te-1;te=Ae,pe=0}else X===46&&pe!==-1?++pe:pe=-1}return ie}s(Z,"r");var J={resolve:s(function(){for(var j,$="",X=!1,ie=arguments.length-1;ie>=-1&&!X;ie--){var ae;ie>=0?ae=arguments[ie]:(j===void 0&&(j=process.cwd()),ae=j),U(ae),ae.length!==0&&($=ae+"/"+$,X=ae.charCodeAt(0)===47)}return $=Z($,!X),X?$.length>0?"/"+$:"/":$.length>0?$:"."},"resolve"),normalize:s(function(j){if(U(j),j.length===0)return".";var $=j.charCodeAt(0)===47,X=j.charCodeAt(j.length-1)===47;return(j=Z(j,!$)).length!==0||$||(j="."),j.length>0&&X&&(j+="/"),$?"/"+j:j},"normalize"),isAbsolute:s(function(j){return U(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,$=0;$<arguments.length;++$){var X=arguments[$];U(X),X.length>0&&(j===void 0?j=X:j+="/"+X)}return j===void 0?".":J.normalize(j)},"join"),relative:s(function(j,$){if(U(j),U($),j===$||(j=J.resolve(j))===($=J.resolve($)))return"";for(var X=1;X<j.length&&j.charCodeAt(X)===47;++X);for(var ie=j.length,ae=ie-X,te=1;te<$.length&&$.charCodeAt(te)===47;++te);for(var pe=$.length-te,Ae=ae<pe?ae:pe,Oe=-1,Te=0;Te<=Ae;++Te){if(Te===Ae){if(pe>Ae){if($.charCodeAt(te+Te)===47)return $.slice(te+Te+1);if(Te===0)return $.slice(te+Te)}else ae>Ae&&(j.charCodeAt(X+Te)===47?Oe=Te:Te===0&&(Oe=0));break}var Je=j.charCodeAt(X+Te);if(Je!==$.charCodeAt(te+Te))break;Je===47&&(Oe=Te)}var Fe="";for(Te=X+Oe+1;Te<=ie;++Te)Te!==ie&&j.charCodeAt(Te)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+$.slice(te+Oe):(te+=Oe,$.charCodeAt(te)===47&&++te,$.slice(te))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(U(j),j.length===0)return".";for(var $=j.charCodeAt(0),X=$===47,ie=-1,ae=!0,te=j.length-1;te>=1;--te)if(($=j.charCodeAt(te))===47){if(!ae){ie=te;break}}else ae=!1;return ie===-1?X?"/":".":X&&ie===1?"//":j.slice(0,ie)},"dirname"),basename:s(function(j,$){if($!==void 0&&typeof $!="string")throw new TypeError('"ext" argument must be a string');U(j);var X,ie=0,ae=-1,te=!0;if($!==void 0&&$.length>0&&$.length<=j.length){if($.length===j.length&&$===j)return"";var pe=$.length-1,Ae=-1;for(X=j.length-1;X>=0;--X){var Oe=j.charCodeAt(X);if(Oe===47){if(!te){ie=X+1;break}}else Ae===-1&&(te=!1,Ae=X+1),pe>=0&&(Oe===$.charCodeAt(pe)?--pe==-1&&(ae=X):(pe=-1,ae=Ae))}return ie===ae?ae=Ae:ae===-1&&(ae=j.length),j.slice(ie,ae)}for(X=j.length-1;X>=0;--X)if(j.charCodeAt(X)===47){if(!te){ie=X+1;break}}else ae===-1&&(te=!1,ae=X+1);return ae===-1?"":j.slice(ie,ae)},"basename"),extname:s(function(j){U(j);for(var $=-1,X=0,ie=-1,ae=!0,te=0,pe=j.length-1;pe>=0;--pe){var Ae=j.charCodeAt(pe);if(Ae!==47)ie===-1&&(ae=!1,ie=pe+1),Ae===46?$===-1?$=pe:te!==1&&(te=1):$!==-1&&(te=-1);else if(!ae){X=pe+1;break}}return $===-1||ie===-1||te===0||te===1&&$===ie-1&&$===X+1?"":j.slice($,ie)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function($,X){var ie=X.dir||X.root,ae=X.base||(X.name||"")+(X.ext||"");return ie?ie===X.root?ie+ae:ie+"/"+ae:ae}(0,j)},"format"),parse:s(function(j){U(j);var $={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return $;var X,ie=j.charCodeAt(0),ae=ie===47;ae?($.root="/",X=1):X=0;for(var te=-1,pe=0,Ae=-1,Oe=!0,Te=j.length-1,Je=0;Te>=X;--Te)if((ie=j.charCodeAt(Te))!==47)Ae===-1&&(Oe=!1,Ae=Te+1),ie===46?te===-1?te=Te:Je!==1&&(Je=1):te!==-1&&(Je=-1);else if(!Oe){pe=Te+1;break}return te===-1||Ae===-1||Je===0||Je===1&&te===Ae-1&&te===pe+1?Ae!==-1&&($.base=$.name=pe===0&&ae?j.slice(1,Ae):j.slice(pe,Ae)):(pe===0&&ae?($.name=j.slice(1,te),$.base=j.slice(1,Ae)):($.name=j.slice(pe,te),$.base=j.slice(pe,Ae)),$.ext=j.slice(te,Ae)),pe>0?$.dir=j.slice(0,pe-1):ae&&($.dir="/"),$},"parse"),sep:"/",delimiter:":",win32:null,posix:null};J.posix=J,Q.exports=J}},e={};function r(Q){var U=e[Q];if(U!==void 0)return U.exports;var Z=e[Q]={exports:{}};return t[Q](Z,Z.exports,r),Z.exports}s(r,"r"),r.d=(Q,U)=>{for(var Z in U)r.o(U,Z)&&!r.o(Q,Z)&&Object.defineProperty(Q,Z,{enumerable:!0,get:U[Z]})},r.o=(Q,U)=>Object.prototype.hasOwnProperty.call(Q,U),r.r=Q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>z,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(Q,U){if(!Q.scheme&&U)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${Q.authority}", path: "${Q.path}", query: "${Q.query}", fragment: "${Q.fragment}"}`);if(Q.scheme&&!o.test(Q.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(Q.path){if(Q.authority){if(!a.test(Q.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(Q.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",f="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(U){return U instanceof m||!!U&&typeof U.authority=="string"&&typeof U.fragment=="string"&&typeof U.path=="string"&&typeof U.query=="string"&&typeof U.scheme=="string"&&typeof U.fsPath=="string"&&typeof U.with=="function"&&typeof U.toString=="function"}scheme;authority;path;query;fragment;constructor(U,Z,J,j,$,X=!1){typeof U=="object"?(this.scheme=U.scheme||u,this.authority=U.authority||u,this.path=U.path||u,this.query=U.query||u,this.fragment=U.fragment||u):(this.scheme=function(ie,ae){return ie||ae?ie:"file"}(U,X),this.authority=Z||u,this.path=function(ie,ae){switch(ie){case"https":case"http":case"file":ae?ae[0]!==f&&(ae=f+ae):ae=f}return ae}(this.scheme,J||u),this.query=j||u,this.fragment=$||u,l(this,X))}get fsPath(){return b(this,!1)}with(U){if(!U)return this;let{scheme:Z,authority:J,path:j,query:$,fragment:X}=U;return Z===void 0?Z=this.scheme:Z===null&&(Z=u),J===void 0?J=this.authority:J===null&&(J=u),j===void 0?j=this.path:j===null&&(j=u),$===void 0?$=this.query:$===null&&($=u),X===void 0?X=this.fragment:X===null&&(X=u),Z===this.scheme&&J===this.authority&&j===this.path&&$===this.query&&X===this.fragment?this:new g(Z,J,j,$,X)}static parse(U,Z=!1){let J=p.exec(U);return J?new g(J[2]||u,L(J[4]||u),L(J[5]||u),L(J[7]||u),L(J[9]||u),Z):new g(u,u,u,u,u)}static file(U){let Z=u;if(i&&(U=U.replace(/\\/g,f)),U[0]===f&&U[1]===f){let J=U.indexOf(f,2);J===-1?(Z=U.substring(2),U=f):(Z=U.substring(2,J),U=U.substring(J)||f)}return new g("file",Z,U,u,u)}static from(U){let Z=new g(U.scheme,U.authority,U.path,U.query,U.fragment);return l(Z,!0),Z}toString(U=!1){return S(this,U)}toJSON(){return this}static revive(U){if(U){if(U instanceof m)return U;{let Z=new g(U);return Z._formatted=U.external,Z._fsPath=U._sep===h?U.fsPath:null,Z}}return U}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(U=!1){return U?S(this,!0):(this._formatted||(this._formatted=S(this,!1)),this._formatted)}toJSON(){let U={$mid:1};return this._fsPath&&(U.fsPath=this._fsPath,U._sep=h),this._formatted&&(U.external=this._formatted),this.path&&(U.path=this.path),this.scheme&&(U.scheme=this.scheme),this.authority&&(U.authority=this.authority),this.query&&(U.query=this.query),this.fragment&&(U.fragment=this.fragment),U}}let A={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function y(Q,U,Z){let J,j=-1;for(let $=0;$<Q.length;$++){let X=Q.charCodeAt($);if(X>=97&&X<=122||X>=65&&X<=90||X>=48&&X<=57||X===45||X===46||X===95||X===126||U&&X===47||Z&&X===91||Z&&X===93||Z&&X===58)j!==-1&&(J+=encodeURIComponent(Q.substring(j,$)),j=-1),J!==void 0&&(J+=Q.charAt($));else{J===void 0&&(J=Q.substr(0,$));let ie=A[X];ie!==void 0?(j!==-1&&(J+=encodeURIComponent(Q.substring(j,$)),j=-1),J+=ie):j===-1&&(j=$)}}return j!==-1&&(J+=encodeURIComponent(Q.substring(j))),J!==void 0?J:Q}s(y,"m");function E(Q){let U;for(let Z=0;Z<Q.length;Z++){let J=Q.charCodeAt(Z);J===35||J===63?(U===void 0&&(U=Q.substr(0,Z)),U+=A[J]):U!==void 0&&(U+=Q[Z])}return U!==void 0?U:Q}s(E,"y");function b(Q,U){let Z;return Z=Q.authority&&Q.path.length>1&&Q.scheme==="file"?`//${Q.authority}${Q.path}`:Q.path.charCodeAt(0)===47&&(Q.path.charCodeAt(1)>=65&&Q.path.charCodeAt(1)<=90||Q.path.charCodeAt(1)>=97&&Q.path.charCodeAt(1)<=122)&&Q.path.charCodeAt(2)===58?U?Q.path.substr(1):Q.path[1].toLowerCase()+Q.path.substr(2):Q.path,i&&(Z=Z.replace(/\//g,"\\")),Z}s(b,"v");function S(Q,U){let Z=U?E:y,J="",{scheme:j,authority:$,path:X,query:ie,fragment:ae}=Q;if(j&&(J+=j,J+=":"),($||j==="file")&&(J+=f,J+=f),$){let te=$.indexOf("@");if(te!==-1){let pe=$.substr(0,te);$=$.substr(te+1),te=pe.lastIndexOf(":"),te===-1?J+=Z(pe,!1,!1):(J+=Z(pe.substr(0,te),!1,!1),J+=":",J+=Z(pe.substr(te+1),!1,!0)),J+="@"}$=$.toLowerCase(),te=$.lastIndexOf(":"),te===-1?J+=Z($,!1,!0):(J+=Z($.substr(0,te),!1,!0),J+=$.substr(te))}if(X){if(X.length>=3&&X.charCodeAt(0)===47&&X.charCodeAt(2)===58){let te=X.charCodeAt(1);te>=65&&te<=90&&(X=`/${String.fromCharCode(te+32)}:${X.substr(3)}`)}else if(X.length>=2&&X.charCodeAt(1)===58){let te=X.charCodeAt(0);te>=65&&te<=90&&(X=`${String.fromCharCode(te+32)}:${X.substr(2)}`)}J+=Z(X,!0,!1)}return ie&&(J+="?",J+=Z(ie,!1,!1)),ae&&(J+="#",J+=U?ae:y(ae,!1,!1)),J}s(S,"b");function R(Q){try{return decodeURIComponent(Q)}catch{return Q.length>3?Q.substr(0,3)+R(Q.substr(3)):Q}}s(R,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function L(Q){return Q.match(B)?Q.replace(B,U=>R(U)):Q}s(L,"w");var O=r(975);let Y=O.posix||O,V="/";var z;(function(Q){Q.joinPath=function(U,...Z){return U.with({path:Y.join(U.path,...Z)})},Q.resolvePath=function(U,...Z){let J=U.path,j=!1;J[0]!==V&&(J=V+J,j=!0);let $=Y.resolve(J,...Z);return j&&$[0]===V&&!U.authority&&($=$.substring(1)),U.with({path:$})},Q.dirname=function(U){if(U.path.length===0||U.path===V)return U;let Z=Y.dirname(U.path);return Z.length===1&&Z.charCodeAt(0)===46&&(Z=""),U.with({path:Z})},Q.basename=function(U){return Y.basename(U.path)},Q.extname=function(U){return Y.extname(U.path)}})(z||(z={})),_6e=n})();var{URI:QI,Utils:u6}=_6e;function P6e(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+P6e(t.substring(3)):t}}s(P6e,"decodeURIComponentGraceful");var R6e=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ime(t){return t.match(R6e)?t.replace(R6e,e=>P6e(e)):t}s(ime,"percentDecode");function kl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return QI.file(t).toString()}s(kl,"makeFsUri");function n2(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?QI.parse(e[1]+e[2],!0):QI.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(n2,"parseUri");function $G(t){return n2(t),t}s($G,"validateUri");function Pl(t){try{return n2(t).toString()}catch{return t}}s(Pl,"normalizeUri");var D6e=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function nc(t){let e=n2(t);if(!D6e.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,k6e.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,HG.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(nc,"fsPath");function es(t){try{return nc(t)}catch{return}}s(es,"getFsPath");function B6e(t){let e=es(t);if(e)return QI.file(e).toString()}s(B6e,"getFsUri");function i2(t,...e){let r,n=es(t);return n?r=kl((0,HG.resolve)(n,...e)):r=u6.resolvePath(n2(t),...e.map(i=>N6e(i))).toString(),typeof t=="string"?r:{uri:r}}s(i2,"resolveFilePath");function Vi(t,...e){let r=u6.joinPath(n2(t),...e.map(N6e)).toString();return typeof t=="string"?r:{uri:r}}s(Vi,"joinPath");function N6e(t){return J5t(t)?t.replaceAll("\\","/"):t}s(N6e,"pathToURIPath");function J5t(t){return/^[^/\\]*\\/.test(t)}s(J5t,"isWinPath");function Pi(t){return ime((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Pi,"basename");function Pd(t){let e=u6.dirname(n2(t)),r;return D6e.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(Pd,"dirname");function M6e(t){return u6.extname(n2(t))}s(M6e,"extname");var df=class{static{s(this,"NetworkConfiguration")}};function WG(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!sme(t)&&r.protocol==="http:")return r.href}catch{}}s(WG,"ensurePermittedUrl");var o2={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function ome(t,e,r){if(r&&Vg(t)){for(let n of r){let i=zi(t,n);if(i)return i}return}for(let n of e){let i=zi(t,n);if(i)return i}}s(ome,"urlConfigOverride");function X5t(t,e){switch(e){case"api":return ome(t,[Ht.DebugOverrideCapiUrl,Ht.DebugOverrideCapiUrlLegacy],[Ht.DebugTestOverrideCapiUrl,Ht.DebugTestOverrideCapiUrlLegacy]);case"proxy":return ome(t,[Ht.DebugOverrideProxyUrl,Ht.DebugOverrideProxyUrlLegacy],[Ht.DebugTestOverrideProxyUrl,Ht.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!sme(t))return ome(t,[Ht.DebugSnippyOverrideUrl])}}s(X5t,"getEndpointOverrideUrl");function Jm(t,e,r,...n){let i=X5t(t,r)??e.endpoints[r];return Vi(i,...n)}s(Jm,"getEndpointUrl");function TD(t){return QG(t)?.endpoints??o2}s(TD,"getLastKnownEndpoints");function L6e(t,e){if(e&&!WG(t,e)){t.get(Ra).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(df).setConfiguredUrls(t,{serverUrl:e})}s(L6e,"updateServerUrl");d();var $u=class{static{s(this,"UrlOpener")}};var xp=new Ct("auth"),GG=60;function Ep(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(Ep,"fillGitHubUrls");function F6e(){return Math.floor(Date.now()/1e3)}s(F6e,"nowSeconds");async function ame(t,e,r){let n=Gr.createAndMarkAsIssued({},{});Bt(t,"auth.new_login");let i={"X-GitHub-Api-Version":"2024-12-15"};r?.hasKnownOrg&&(i["X-GitHub-Staff-Request"]="1");let o=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token",a=await Ym(t,e,o,{timeout:12e4,headers:i}),c=await a.json(),l=c.user_notification;if(O6e(t,l,e),a.status===401){let h="Failed to get copilot token due to 401 status. Please sign out and try again.";return xp.info(t,h),lA(t,"auth.unknown_401",n),{failureKind:"HTTP401",message:h}}if(!a.ok||!c.token){xp.info(t,`Invalid copilot token: missing token: ${a.status} ${a.statusText}`),lA(t,"auth.invalid_token",n.extendedBy({status:a.status.toString(),status_text:a.statusText}));let h=c.error_details;return h?.notification_id!=="not_signed_up"&&O6e(t,h,e),{failureKind:"NotAuthorized",message:h?.message??"Could not retrieve token",canSignUpForLimited:c.can_signup_for_limited}}let u=F6e()+c.refresh_in+GG,f=await cme(t,e),p;f.ok&&(p=await f.json());let m=new s2(c,p,u);return a6(t,m),Bt(t,"auth.new_token",n.extendedBy({...ffe(m)},{adjusted_expires_at:m.expiresAt,expires_at:c.expires_at,current_time:F6e()})),{copilotToken:m}}s(ame,"authFromGitHubSession");var ru=class{static{s(this,"CopilotTokenFetcher")}},jG=class extends ru{static{s(this,"NetworkCopilotTokenFetcher")}async fetchTokenResult(e,r,n){return r.accessToken?await ame(e,r,n):{failureKind:"HTTP401"}}};async function cme(t,e){let r={"X-GitHub-Api-Version":"2025-05-01"},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";return await Ym(t,e,n,{timeout:12e4,headers:r})}s(cme,"fetchCopilotUserInfo");function O6e(t,e,r){e&&t.get(Ra).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(hn).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get($u).open(c)}e.notification_id&&o&&await Z5t(t,e.notification_id,r)}).catch(n=>{xp.exception(t,n,"copilotToken.notification")})}s(O6e,"notifyUser");async function Z5t(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Ym(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&xp.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Z5t,"sendNotificationResultToGitHub");var s2=class{constructor(e,r,n){this.envelope=e;this.expiresAt=n;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new UG(r)}static{s(this,"CopilotToken")}get endpoints(){return{...o2,...this.envelope.endpoints??{}}}needsRefresh(){return(this.expiresAt-GG)*1e3<Date.now()}isExpired(){return this.expiresAt*1e3<Date.now()}get hasKnownOrg(){return rme(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}get isCopilotCodeReviewEnabled(){return this.getTokenValue("ccr")==="1"}};d();d();var d6="apps",lme="hosts",dA=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(d6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=bp,i=await this.persistenceManager.read(d6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(nu).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(lme,e);if(r)return{...r,githubAppId:bp}}async saveAuthRecord(e){await this.persistenceManager.update(d6,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===bp&&await this.persistenceManager.delete(lme,r),await this.persistenceManager.delete(d6,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(d6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:bp})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(lme)}authRecordKey(e,r){let n=r.githubAppId??e.get(nu).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};d();d();d();var $6e=Ne(U6e()),W6e=Ne(H6e()),Ip=Ne(require("os"));var wD=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(Hr).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{un.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new W6e.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[$6e.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=e4t(e),this.commonProperties=t4t(e),this.#e=Ps(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function e4t(t){let e={},r=t.get(Ds);e["ai.session.id"]=r.sessionId;let n=t.get(Lu);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${Ip.type()} ${Ip.release()}`,e["ai.device.osArchitecture"]=Ip.arch(),e["ai.device.osPlatform"]=Ip.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(Io).getVersion(),e}s(e4t,"getTags");function t4t(t){let e={};e.common_os=Ip.platform(),e.common_platformversion=Ip.release(),e.common_arch=Ip.arch(),e.common_cpu=Array.from(new Set(Ip.cpus().map(n=>n.model))).join();let r=t.get(Ds);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(t4t,"getCommonProperties");var r4t="7d7048df-6dd0-4048-bb23-b716c1461f8f",n4t="3fdd7f28-937a-48c8-9a21-ba337db23bd1",i4t="f0000000-0000-0000-0000-000000000000";function j6e(t){return new URL(t).hostname==="github.com"?o2.telemetry:t.replace("://","://copilot-telemetry-service.")}s(j6e,"getEndpointForServerUrl");var Dd=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=j6e(this.serverUrl);this.shuttingDown=new Set;Ps(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(Hu);i.setReporter(new wD(r,this.namespace,n,r4t)),i.setRestrictedReporter(new wD(r,this.namespace,n,n4t)),i.setFTReporter(new wD(r,this.namespace,n,i4t,!0))}}setCustomReporters(e,r){this.shutdownWithoutWaiting();let n=this.ctx.get(Hu);n.setReporter(e),n.setRestrictedReporter(r)}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Hu).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=j6e(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};async function o4t(t,e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Ym(t,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":"2025-05-01"},body:JSON.stringify({restricted_telemetry:t.get(Dd).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json()).subscribed}catch(n){return xp.exception(t,n,"signUpLimited failed"),!1}}s(o4t,"apiFetchSignUpLimited");async function dme(t,e,r){let n=await t.get($r).getTokenResult();switch(n.failureKind){case void 0:return"OK";case"HTTP401":case"NotSignedIn":return"NotSignedIn";case"NotAuthorized":return r&&n.canSignUpForLimited&&await o4t(t,e)?dme(t,e,!1):"NotAuthorized"}}s(dme,"getTokenWithSignUpLimited");var Ki=class{constructor(e,r){this.ctx=e;this.env=r}static{s(this,"AuthManager")}hasTransientSession(){return this.transientSession!==void 0}get _copilotTokenManager(){return this.ctx.get($r)}getConfiguredUrls(){return this.ctx.get(df).getConfiguredUrls()}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await dme(this.ctx,n,e?.freshSignIn??!1),user:n.login})}async getSession(){await this.ctx.get(Pc).requireReady();let e=fme(this.env)??await this.transientSession;if(!(e&&e.accessToken===void 0))return e?{...e,...Ep(e)}:await this.getPersistedSession()}setTransientSession(e){this.transientSession=e&&Promise.resolve(e),this._copilotTokenManager.resetToken()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}},KG=class extends Ki{static{s(this,"PersistentAuthManager")}get authPersistence(){return this.ctx.get(dA)}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&pC(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}};function fme(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{...Ep({apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL}),login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{...Ep({apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL}),login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{...Ep({apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL}),login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(fme,"getSessionFromEnv");d();var s4t=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],G6e="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",V6e="https://gh.io/copilot-network-errors",u0=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&s4t.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new Ct("certificates").error(e,`${G6e} Please visit ${V6e} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(Ra).showWarningMessage(G6e,n).then(i=>{if(i?.title===n.title)return e.get($u).open(V6e)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};d();var So=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},YG=class extends So{static{s(this,"NoOpStatusReporter")}didChange(){}};var pme=class extends ba{constructor(r){super(r.message??`${r.failureKind}`);this.result=r}static{s(this,"TokenResultError")}},$r=class{constructor(e,r=!1){this.ctx=e;this.primed=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManager")}async getGitHubSession(){return await this.ctx.get(Ki).getSession()}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}async fetchTokenResult(e){return await this.ctx.get(ru).fetchTokenResult(this.ctx,e,this.token)}async getTokenResult(){if(!this.primed){let e=new Error("Token requested before initialization");if(z6e(this.ctx))throw e;xp.exception(this.ctx,e,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let e=this.getGitHubSession().then(async i=>i?await this.fetchTokenResult(i):{failureKind:"NotSignedIn"}),r=this.ctx.get(So),n=e.then(i=>{if(this.tokenPromise!==n)return i;if(this.tokenPromise=void 0,i.copilotToken)this.token=i.copilotToken,this.ctx.get(So).forceNormal();else switch(i.failureKind){case"NotSignedIn":r.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":r.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":r.setError(i.message||"No access to Copilot found.");break}return i},i=>{throw this.tokenPromise!==n||(this.tokenPromise=void 0,r.setWarning(String(i)),this.ctx.get(u0).notifyUser(this.ctx,i)),i});this.tokenPromise=n}return this.token&&!this.token.isExpired()?{copilotToken:this.token}:await this.tokenPromise}async getToken(){let e=await this.getTokenResult();if(e.copilotToken)return e.copilotToken;throw new pme(e)}resetToken(e){e!==void 0?(Bt(this.ctx,"auth.reset_token_"+e),xp.debug(this.ctx,`Resetting copilot token on HTTP error ${e}`)):xp.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}};d();var hC=class{static{s(this,"Clock")}now(){return new Date}};d();var fA=class{static{s(this,"ExpConfigMaker")}},f6=class extends fA{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(Hr),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(m){return Fm.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!l.ok)return Fm.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(m){if(m instanceof SyntaxError)return ja(r,m,"fetchExperiments"),Fm.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let f=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(f.Parameters).map(([m,h])=>m+(h?"":"cf"));return new Fm(f.Parameters,u.AssignmentContext,p.join(";"))}},JG=class extends fA{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(Fm.createEmptyConfig())}};d();d();var XG=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},mme=class extends XG{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},K6e=s(t=>new mme(t),"DEFAULT_GRANULARITY"),ZG=class extends XG{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var Y6e="X-Copilot-ClientTimeBucket",eV=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=K6e(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new ZG(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(Y6e,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(Y6e,o))}}};d();d();d();d();d();d();d();var rV="4.11.0",a2="04b07795-8ddb-461a-bbee-02f9e1bf7b46",J6e="common",tV;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(tV||(tV={}));var p6=tV.AzurePublicCloud,X6e="login.microsoftonline.com",Z6e=["*"],eFe="cae",tFe="nocae",rFe="msal.cache";var hme;var nFe,nV,gme;function iFe(){return nV!==void 0&&gme!==void 0}s(iFe,"hasVSCodePlugin");function a4t(t){let e={cache:{},broker:{...t.brokerOptions,isEnabled:t.brokerOptions?.enabled??!1,enableMsaPassthrough:t.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(t.tokenCachePersistenceOptions?.enabled){if(hme===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let r=t.tokenCachePersistenceOptions.name||rFe;e.cache.cachePlugin=hme({name:`${r}.${tFe}`,...t.tokenCachePersistenceOptions}),e.cache.cachePluginCae=hme({name:`${r}.${eFe}`,...t.tokenCachePersistenceOptions})}if(t.brokerOptions?.enabled)if(t.isVSCodeCredential){if(gme===void 0)throw new Error(["Visual Studio Code Credential was requested, but no plugin was configured or no authentication record was found.","You must install the identity-vscode plugin package (`npm install --save @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=gme.broker}else{if(nFe===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(brokerPlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=nFe.broker}return e}s(a4t,"generatePluginConfiguration");var oFe={generatePluginConfiguration:a4t};d();d();d();function c4t(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(c4t,"isErrorResponse");var aFe="CredentialUnavailableError",Qr=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=aFe}},iV="AuthenticationError",UI=class extends Error{static{s(this,"AuthenticationError")}statusCode;errorResponse;constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(c4t(r))i=sFe(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=sFe(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=iV}},cFe="AggregateAuthenticationError",m6=class extends Error{static{s(this,"AggregateAuthenticationError")}errors;constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=cFe}};function sFe(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(sFe,"convertOAuthErrorResponseToErrorResponse");var Xm=class extends Error{static{s(this,"AuthenticationRequiredError")}scopes;getTokenOptions;constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};d();d();d();d();var lFe=require("node:os"),uFe=Ne(require("node:util"),1),dFe=Ne(require("node:process"),1);function fFe(t,...e){dFe.stderr.write(`${uFe.default.format(t,...e)}${lFe.EOL}`)}s(fFe,"log");var pFe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,mFe,Ame=[],yme=[],oV=[];pFe&&Cme(pFe);var hFe=Object.assign(t=>gFe(t),{enable:Cme,enabled:vme,disable:l4t,log:fFe});function Cme(t){mFe=t,Ame=[],yme=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?yme.push(new RegExp(`^${n.substr(1)}$`)):Ame.push(new RegExp(`^${n}$`));for(let n of oV)n.enabled=vme(n.namespace)}s(Cme,"enable");function vme(t){if(t.endsWith("*"))return!0;for(let e of yme)if(e.test(t))return!1;for(let e of Ame)if(e.test(t))return!0;return!1}s(vme,"enabled");function l4t(){let t=mFe||"";return Cme(""),t}s(l4t,"disable");function gFe(t){let e=Object.assign(r,{enabled:vme(t),destroy:u4t,log:hFe.log,namespace:t,extend:d4t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),oV.push(e),e}s(gFe,"createDebugger");function u4t(){let t=oV.indexOf(this);return t>=0?(oV.splice(t,1),!0):!1}s(u4t,"destroy");function d4t(t){let e=gFe(`${this.namespace}:${t}`);return e.log=this.log,e}s(d4t,"extend");var SD=hFe;var yFe=new Set,sV=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,cV,xme=SD("azure");xme.log=(...t)=>{SD.log(...t)};var Eme=["verbose","info","warning","error"];sV&&(xFe(sV)?f4t(sV):console.error(`AZURE_LOG_LEVEL set to unknown log level '${sV}'; logging is not enabled. Acceptable values: ${Eme.join(", ")}.`));function f4t(t){if(t&&!xFe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${Eme.join(",")}`);cV=t;let e=[];for(let r of yFe)vFe(r)&&e.push(r.namespace);SD.enable(e.join(","))}s(f4t,"setLogLevel");function lV(){return cV}s(lV,"getLogLevel");var AFe={verbose:400,info:300,warning:200,error:100};function qI(t){let e=xme.extend(t);return CFe(xme,e),{error:aV(e,"error"),warning:aV(e,"warning"),info:aV(e,"info"),verbose:aV(e,"verbose")}}s(qI,"createClientLogger");function CFe(t,e){e.log=(...r)=>{t.log(...r)}}s(CFe,"patchLogMethod");function aV(t,e){let r=Object.assign(t.extend(e),{level:e});if(CFe(t,r),vFe(r)){let n=SD.disable();SD.enable(n+","+r.namespace)}return yFe.add(r),r}s(aV,"createLogger");function vFe(t){return!!(cV&&AFe[t.level]<=AFe[cV])}s(vFe,"shouldEnable");function xFe(t){return Eme.includes(t)}s(xFe,"isAzureLogLevel");var Tp=qI("identity");function uV(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(uV,"processEnvVars");function Dl(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(Dl,"formatSuccess");function xo(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(xo,"formatError");function EFe(t,e,r=Tp){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(EFe,"credentialLoggerInstance");function ri(t,e=Tp){let r=EFe(t,void 0,e);return{...r,parent:e,getToken:EFe("=> getToken()",r,e)}}s(ri,"credentialLogger");d();d();d();d();var _D={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function bFe(t={}){let e=new bme(t.parentContext);return t.span&&(e=e.setValue(_D.span,t.span)),t.namespace&&(e=e.setValue(_D.namespace,t.namespace)),e}s(bFe,"createTracingContext");var bme=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};d();var TFe=Ne(IFe(),1),fV=TFe.state;function p4t(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(p4t,"createDefaultTracingSpan");function m4t(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:p4t(),tracingContext:bFe({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(m4t,"createDefaultInstrumenter");function h6(){return fV.instrumenterImplementation||(fV.instrumenterImplementation=m4t()),fV.instrumenterImplementation}s(h6,"getInstrumenter");d();function g6(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,f,p){var m;let h=h6().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(m=f?.tracingOptions)===null||m===void 0?void 0:m.tracingContext})),g=h.tracingContext,A=h.span;g.getValue(_D.namespace)||(g=g.setValue(_D.namespace,e)),A.setAttribute("az.namespace",g.getValue(_D.namespace));let y=Object.assign({},f,{tracingOptions:Object.assign(Object.assign({},f?.tracingOptions),{tracingContext:g})});return{span:A,updatedOptions:y}}s(i,"startSpan");async function o(u,f,p,m){let{span:h,updatedOptions:g}=i(u,f,m);try{let A=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,h)));return h.setStatus({status:"success"}),A}catch(A){throw h.setStatus({status:"error",error:A}),A}finally{h.end()}}s(o,"withSpan");function a(u,f,...p){return h6().withContext(u,f,...p)}s(a,"withContext");function c(u){return h6().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return h6().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(g6,"createTracingClient");var ts=g6({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:rV});var Ime=ri("ChainedTokenCredential"),A6=class{static{s(this,"ChainedTokenCredential")}_sources=[];constructor(...e){this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return ts.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw Ime.getToken.info(xo(e,l)),l}if(!n&&o.length>0){let c=new m6(o,"ChainedTokenCredential authentication failed.");throw Ime.getToken.info(xo(e,c)),c}if(Ime.getToken.info(`Result for ${i.constructor.name}: ${Dl(e)}`),n===null)throw new Qr("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};d();d();d();d();var Pp={};xa(Pp,{AuthError:()=>si,AuthErrorCodes:()=>DD,AuthErrorMessage:()=>wme,AzureCloudInstance:()=>Zv,ClientApplication:()=>cT,ClientAssertion:()=>ax,ClientAuthError:()=>KI,ClientAuthErrorCodes:()=>As,ClientAuthErrorMessage:()=>_me,ClientConfigurationError:()=>OD,ClientConfigurationErrorCodes:()=>FD,ClientConfigurationErrorMessage:()=>Bme,ClientCredentialClient:()=>lT,ConfidentialClientApplication:()=>aB,CryptoProvider:()=>EC,DeviceCodeClient:()=>iB,DistributedCachePlugin:()=>qz,InteractionRequiredAuthError:()=>_p,InteractionRequiredAuthErrorCodes:()=>LV,InteractionRequiredAuthErrorMessage:()=>Qhe,LogLevel:()=>Ga,Logger:()=>wp,ManagedIdentityApplication:()=>cB,ManagedIdentitySourceNames:()=>Xn,OnBehalfOfClient:()=>sB,PromptValue:()=>$I,ProtocolMode:()=>Bd,PublicClientApplication:()=>oB,ResponseMode:()=>gC,ServerError:()=>hf,TokenCache:()=>GD,TokenCacheContext:()=>Rp,UsernamePasswordClient:()=>nB,internals:()=>Uhe,version:()=>gA});d();var Uhe={};xa(Uhe,{Deserializer:()=>ox,Serializer:()=>HI});d();d();var HI=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};d();d();d();d();d();d();d();d();d();var rt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},oi={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},d0=[rt.OPENID_SCOPE,rt.PROFILE_SCOPE,rt.OFFLINE_ACCESS_SCOPE],Tme=[...d0,rt.EMAIL_SCOPE],Ls={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var f0={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},c2={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},$I={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},pV={PLAIN:"plain",S256:"S256"},RD={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var gC={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},p0={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},l2={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},ic={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},_o={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var y6="appmetadata",wFe="client_info",zv="1",kD={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},ff={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Bl={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},co={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},AC={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},C6={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},v6={username:"username",password:"password"},u2={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},mV={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ws={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var PD=300,Wu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var DD={};xa(DD,{postRequestFailed:()=>E6,unexpectedError:()=>x6});d();var x6="unexpected_error",E6="post_request_failed";var hV={[x6]:"Unexpected error in authentication.",[E6]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},wme={unexpectedError:{code:x6,desc:hV[x6]},postRequestFailed:{code:E6,desc:hV[E6]}},si=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||rt.EMPTY_STRING,this.errorMessage=r||rt.EMPTY_STRING,this.subError=n||rt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Sme(t,e){return new si(t,e?`${hV[t]} ${e}`:hV[t])}s(Sme,"createAuthError");var As={};xa(As,{authTimeNotFound:()=>Kv,authorizationCodeMissingFromServerResponse:()=>T2,bindingKeyNotRemoved:()=>B6,cannotAppendScopeSet:()=>E2,cannotRemoveEmptyScope:()=>x2,clientInfoDecodingError:()=>WI,clientInfoEmptyError:()=>d2,deviceCodeExpired:()=>w6,deviceCodePollingCancelled:()=>T6,deviceCodeUnknownError:()=>S6,emptyInputScopeSet:()=>VI,endSessionEndpointNotSupported:()=>w2,endpointResolutionError:()=>pf,hashNotDeserialized:()=>h2,invalidAssertion:()=>k6,invalidCacheEnvironment:()=>Jv,invalidCacheRecord:()=>b2,invalidClientCredential:()=>P6,invalidState:()=>pA,keyIdMissing:()=>S2,maxAgeTranspired:()=>y2,methodNotImplemented:()=>Di,missingTenantIdError:()=>L6,multipleMatchingAccounts:()=>I6,multipleMatchingAppMetadata:()=>C2,multipleMatchingTokens:()=>b6,nestedAppAuthBridgeDisabled:()=>F6,networkError:()=>p2,noAccountFound:()=>_6,noAccountInSilentRequest:()=>Yv,noCryptoObject:()=>zI,noNetworkConnectivity:()=>N6,nonceMismatch:()=>A2,nullOrEmptyToken:()=>f2,openIdConfigError:()=>m2,requestCannotBeMade:()=>v2,stateMismatch:()=>g2,stateNotFound:()=>GI,tokenClaimsCnfRequiredForSignedJwt:()=>I2,tokenParsingError:()=>jI,tokenRefreshRequired:()=>Xv,unexpectedCredentialType:()=>R6,userCanceled:()=>M6,userTimeoutReached:()=>D6});d();var WI="client_info_decoding_error",d2="client_info_empty_error",jI="token_parsing_error",f2="null_or_empty_token",pf="endpoints_resolution_error",p2="network_error",m2="openid_config_error",h2="hash_not_deserialized",pA="invalid_state",g2="state_mismatch",GI="state_not_found",A2="nonce_mismatch",Kv="auth_time_not_found",y2="max_age_transpired",b6="multiple_matching_tokens",I6="multiple_matching_accounts",C2="multiple_matching_appMetadata",v2="request_cannot_be_made",x2="cannot_remove_empty_scope",E2="cannot_append_scopeset",VI="empty_input_scopeset",T6="device_code_polling_cancelled",w6="device_code_expired",S6="device_code_unknown_error",Yv="no_account_in_silent_request",b2="invalid_cache_record",Jv="invalid_cache_environment",_6="no_account_found",zI="no_crypto_object",R6="unexpected_credential_type",k6="invalid_assertion",P6="invalid_client_credential",Xv="token_refresh_required",D6="user_timeout_reached",I2="token_claims_cnf_required_for_signedjwt",T2="authorization_code_missing_from_server_response",B6="binding_key_not_removed",w2="end_session_endpoint_not_supported",S2="key_id_missing",N6="no_network_connectivity",M6="user_canceled",L6="missing_tenant_id_error",Di="method_not_implemented",F6="nested_app_auth_bridge_disabled";var ai={[WI]:"The client info could not be parsed/decoded correctly",[d2]:"The client info was empty",[jI]:"Token cannot be parsed",[f2]:"The token is null or empty",[pf]:"Endpoints cannot be resolved",[p2]:"Network request failed",[m2]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[h2]:"The hash parameters could not be deserialized",[pA]:"State was not the expected format",[g2]:"State mismatch error",[GI]:"State not found",[A2]:"Nonce mismatch error",[Kv]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[y2]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[b6]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[I6]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[C2]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[v2]:"Token request cannot be made without authorization code or refresh token.",[x2]:"Cannot remove null or empty scope from ScopeSet",[E2]:"Cannot append ScopeSet",[VI]:"Empty input ScopeSet cannot be processed",[T6]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[w6]:"Device code is expired.",[S6]:"Device code stopped polling for unknown reasons.",[Yv]:"Please pass an account object, silent flow is not supported without account information",[b2]:"Cache record object was null or undefined.",[Jv]:"Invalid environment when attempting to create cache entry",[_6]:"No account found in cache for given key.",[zI]:"No crypto object detected.",[R6]:"Unexpected credential type.",[k6]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[P6]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Xv]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[D6]:"User defined timeout for device code polling reached",[I2]:"Cannot generate a POP jwt if the token_claims are not populated",[T2]:"Server response does not contain an authorization code to proceed",[B6]:"Could not remove the credential's binding key from storage.",[w2]:"The provided authority does not support logout",[S2]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[N6]:"No network connectivity. Check your internet connection.",[M6]:"User cancelled the flow.",[L6]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Di]:"This method has not been implemented",[F6]:"The nested app auth bridge is disabled"},_me={clientInfoDecodingError:{code:WI,desc:ai[WI]},clientInfoEmptyError:{code:d2,desc:ai[d2]},tokenParsingError:{code:jI,desc:ai[jI]},nullOrEmptyToken:{code:f2,desc:ai[f2]},endpointResolutionError:{code:pf,desc:ai[pf]},networkError:{code:p2,desc:ai[p2]},unableToGetOpenidConfigError:{code:m2,desc:ai[m2]},hashNotDeserialized:{code:h2,desc:ai[h2]},invalidStateError:{code:pA,desc:ai[pA]},stateMismatchError:{code:g2,desc:ai[g2]},stateNotFoundError:{code:GI,desc:ai[GI]},nonceMismatchError:{code:A2,desc:ai[A2]},authTimeNotFoundError:{code:Kv,desc:ai[Kv]},maxAgeTranspired:{code:y2,desc:ai[y2]},multipleMatchingTokens:{code:b6,desc:ai[b6]},multipleMatchingAccounts:{code:I6,desc:ai[I6]},multipleMatchingAppMetadata:{code:C2,desc:ai[C2]},tokenRequestCannotBeMade:{code:v2,desc:ai[v2]},removeEmptyScopeError:{code:x2,desc:ai[x2]},appendScopeSetError:{code:E2,desc:ai[E2]},emptyInputScopeSetError:{code:VI,desc:ai[VI]},DeviceCodePollingCancelled:{code:T6,desc:ai[T6]},DeviceCodeExpired:{code:w6,desc:ai[w6]},DeviceCodeUnknownError:{code:S6,desc:ai[S6]},NoAccountInSilentRequest:{code:Yv,desc:ai[Yv]},invalidCacheRecord:{code:b2,desc:ai[b2]},invalidCacheEnvironment:{code:Jv,desc:ai[Jv]},noAccountFound:{code:_6,desc:ai[_6]},noCryptoObj:{code:zI,desc:ai[zI]},unexpectedCredentialType:{code:R6,desc:ai[R6]},invalidAssertion:{code:k6,desc:ai[k6]},invalidClientCredential:{code:P6,desc:ai[P6]},tokenRefreshRequired:{code:Xv,desc:ai[Xv]},userTimeoutReached:{code:D6,desc:ai[D6]},tokenClaimsRequired:{code:I2,desc:ai[I2]},noAuthorizationCodeFromServer:{code:T2,desc:ai[T2]},bindingKeyNotRemovedError:{code:B6,desc:ai[B6]},logoutNotSupported:{code:w2,desc:ai[w2]},keyIdMissing:{code:S2,desc:ai[S2]},noNetworkConnectivity:{code:N6,desc:ai[N6]},userCanceledError:{code:M6,desc:ai[M6]},missingTenantIdError:{code:L6,desc:ai[L6]},nestedAppAuthBridgeDisabled:{code:F6,desc:ai[F6]}},KI=class t extends si{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${ai[e]}: ${r}`:ai[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function vt(t,e){return new KI(t,e)}s(vt,"createClientAuthError");var BD={createNewGuid:s(()=>{throw vt(Di)},"createNewGuid"),base64Decode:s(()=>{throw vt(Di)},"base64Decode"),base64Encode:s(()=>{throw vt(Di)},"base64Encode"),base64UrlEncode:s(()=>{throw vt(Di)},"base64UrlEncode"),encodeKid:s(()=>{throw vt(Di)},"encodeKid"),async getPublicKeyThumbprint(){throw vt(Di)},async removeTokenBindingKey(){throw vt(Di)},async clearKeystore(){throw vt(Di)},async signJwt(){throw vt(Di)},async hashString(){throw vt(Di)}};d();var Ga;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Ga||(Ga={}));var wp=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=Ga.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:Ga.Info,this.correlationId=o.correlationId||rt.EMPTY_STRING,this.packageName=r||rt.EMPTY_STRING,this.packageVersion=n||rt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ga.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ga[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Ga.Error,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Ga.Error,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Ga.Warning,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Ga.Warning,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Ga.Info,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Ga.Info,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Ga.Verbose,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Ga.Verbose,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Ga.Trace,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Ga.Trace,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};d();var gV="@azure/msal-common",ND="15.8.1";d();var Zv={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};d();var Nl={};xa(Nl,{createAccessTokenEntity:()=>Pme,createIdTokenEntity:()=>kme,createRefreshTokenEntity:()=>Dme,generateAppMetadataKey:()=>S4t,generateAuthorityMetadataExpiresAt:()=>CV,generateCredentialKey:()=>U6,isAccessTokenEntity:()=>A4t,isAppMetadataEntity:()=>_4t,isAuthorityMetadataEntity:()=>R4t,isAuthorityMetadataExpired:()=>vV,isCredentialEntity:()=>yV,isIdTokenEntity:()=>y4t,isRefreshTokenEntity:()=>C4t,isServerTelemetryEntity:()=>T4t,isThrottlingEntity:()=>w4t,updateAuthorityEndpointMetadata:()=>LD,updateCloudDiscoveryMetadata:()=>q6});d();var AV={};xa(AV,{checkMaxAge:()=>O6,extractTokenClaims:()=>ex,getJWSPayload:()=>SFe});d();function ex(t,e){let r=SFe(t);try{let n=e(r);return JSON.parse(n)}catch{throw vt(jI)}}s(ex,"extractTokenClaims");function SFe(t){if(!t)throw vt(f2);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw vt(jI);return r[2]}s(SFe,"getJWSPayload");function O6(t,e){if(e===0||Date.now()-3e5>t+e)throw vt(y2)}s(O6,"checkMaxAge");var ea={};xa(ea,{delay:()=>g4t,isTokenExpired:()=>MD,nowSeconds:()=>Sp,toDateFromSeconds:()=>Q6,toSecondsFromDate:()=>h4t,wasClockTurnedBack:()=>Rme});d();function Sp(){return Math.round(new Date().getTime()/1e3)}s(Sp,"nowSeconds");function h4t(t){return t.getTime()/1e3}s(h4t,"toSecondsFromDate");function Q6(t){return t?new Date(Number(t)*1e3):new Date}s(Q6,"toDateFromSeconds");function MD(t,e){let r=Number(t)||0;return Sp()+e>r}s(MD,"isTokenExpired");function Rme(t){return Number(t)>Sp()}s(Rme,"wasClockTurnedBack");function g4t(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(g4t,"delay");function U6(t){return[v4t(t),x4t(t),E4t(t),b4t(t),I4t(t)].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(U6,"generateCredentialKey");function kme(t,e,r,n,i){return{credentialType:_o.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(kme,"createIdTokenEntity");function Pme(t,e,r,n,i,o,a,c,l,u,f,p,m,h,g){let A={homeAccountId:t,credentialType:_o.ACCESS_TOKEN,secret:r,cachedAt:Sp().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:f||co.BEARER};if(p&&(A.userAssertionHash=p),u&&(A.refreshOn=u.toString()),h&&(A.requestedClaims=h,A.requestedClaimsHash=g),A.tokenType?.toLowerCase()!==co.BEARER.toLowerCase())switch(A.credentialType=_o.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case co.POP:let y=ex(r,l);if(!y?.cnf?.kid)throw vt(I2);A.keyId=y.cnf.kid;break;case co.SSH:A.keyId=m}return A}s(Pme,"createAccessTokenEntity");function Dme(t,e,r,n,i,o,a){let c={credentialType:_o.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(Dme,"createRefreshTokenEntity");function yV(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s(yV,"isCredentialEntity");function A4t(t){return t?yV(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===_o.ACCESS_TOKEN||t.credentialType===_o.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(A4t,"isAccessTokenEntity");function y4t(t){return t?yV(t)&&t.hasOwnProperty("realm")&&t.credentialType===_o.ID_TOKEN:!1}s(y4t,"isIdTokenEntity");function C4t(t){return t?yV(t)&&t.credentialType===_o.REFRESH_TOKEN:!1}s(C4t,"isRefreshTokenEntity");function v4t(t){return[t.homeAccountId,t.environment].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(v4t,"generateAccountId");function x4t(t){let e=t.credentialType===_o.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(x4t,"generateCredentialId");function E4t(t){return(t.target||"").toLowerCase()}s(E4t,"generateTarget");function b4t(t){return(t.requestedClaimsHash||"").toLowerCase()}s(b4t,"generateClaimsHash");function I4t(t){return t.tokenType&&t.tokenType.toLowerCase()!==co.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(I4t,"generateScheme");function T4t(t,e){let r=t.indexOf(Bl.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(T4t,"isServerTelemetryEntity");function w4t(t,e){let r=!1;t&&(r=t.indexOf(AC.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(w4t,"isThrottlingEntity");function S4t({environment:t,clientId:e}){return[y6,t,e].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}s(S4t,"generateAppMetadataKey");function _4t(t,e){return e?t.indexOf(y6)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(_4t,"isAppMetadataEntity");function R4t(t,e){return e?t.indexOf(kD.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(R4t,"isAuthorityMetadataEntity");function CV(){return Sp()+kD.REFRESH_TIME_SECONDS}s(CV,"generateAuthorityMetadataExpiresAt");function LD(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(LD,"updateAuthorityEndpointMetadata");function q6(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(q6,"updateCloudDiscoveryMetadata");function vV(t){return t.expiresAt<=Sp()}s(vV,"isAuthorityMetadataExpired");d();d();var FD={};xa(FD,{authorityMismatch:()=>K6,authorityUriInsecure:()=>R2,cannotAllowPlatformBroker:()=>z6,cannotSetOIDCOptions:()=>V6,claimsRequestParsingError:()=>H6,emptyInputScopesError:()=>P2,invalidAuthenticationHeader:()=>G6,invalidAuthorityMetadata:()=>M2,invalidClaims:()=>YI,invalidCloudDiscoveryMetadata:()=>JI,invalidCodeChallengeMethod:()=>$6,logoutRequestEmpty:()=>B2,missingNonceAuthenticationHeader:()=>j6,missingSshJwk:()=>tx,missingSshKid:()=>W6,pkceParamsMissing:()=>N2,redirectUriEmpty:()=>_2,tokenRequestEmpty:()=>D2,untrustedAuthority:()=>L2,urlEmptyError:()=>k2,urlParseError:()=>yC});d();var _2="redirect_uri_empty",H6="claims_request_parsing_error",R2="authority_uri_insecure",yC="url_parse_error",k2="empty_url_error",P2="empty_input_scopes_error",YI="invalid_claims",D2="token_request_empty",B2="logout_request_empty",$6="invalid_code_challenge_method",N2="pkce_params_missing",JI="invalid_cloud_discovery_metadata",M2="invalid_authority_metadata",L2="untrusted_authority",tx="missing_ssh_jwk",W6="missing_ssh_kid",j6="missing_nonce_authentication_header",G6="invalid_authentication_header",V6="cannot_set_OIDCOptions",z6="cannot_allow_platform_broker",K6="authority_mismatch";var oc={[_2]:"A redirect URI is required for all calls, and none has been set.",[H6]:"Could not parse the given claims request object.",[R2]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[yC]:"URL could not be parsed into appropriate segments.",[k2]:"URL was empty or null.",[P2]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[YI]:"Given claims parameter must be a stringified JSON object.",[D2]:"Token request was empty and not found in cache.",[B2]:"The logout request was null or undefined.",[$6]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[N2]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[JI]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[M2]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[L2]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[tx]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[W6]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[j6]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[G6]:"Invalid authentication header provided",[V6]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[z6]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[K6]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Bme={redirectUriNotSet:{code:_2,desc:oc[_2]},claimsRequestParsingError:{code:H6,desc:oc[H6]},authorityUriInsecure:{code:R2,desc:oc[R2]},urlParseError:{code:yC,desc:oc[yC]},urlEmptyError:{code:k2,desc:oc[k2]},emptyScopesError:{code:P2,desc:oc[P2]},invalidClaimsRequest:{code:YI,desc:oc[YI]},tokenRequestEmptyError:{code:D2,desc:oc[D2]},logoutRequestEmptyError:{code:B2,desc:oc[B2]},invalidCodeChallengeMethod:{code:$6,desc:oc[$6]},invalidCodeChallengeParams:{code:N2,desc:oc[N2]},invalidCloudDiscoveryMetadata:{code:JI,desc:oc[JI]},invalidAuthorityMetadata:{code:M2,desc:oc[M2]},untrustedAuthority:{code:L2,desc:oc[L2]},missingSshJwk:{code:tx,desc:oc[tx]},missingSshKid:{code:W6,desc:oc[W6]},missingNonceAuthenticationHeader:{code:j6,desc:oc[j6]},invalidAuthenticationHeader:{code:G6,desc:oc[G6]},cannotSetOIDCOptions:{code:V6,desc:oc[V6]},cannotAllowPlatformBroker:{code:z6,desc:oc[z6]},authorityMismatch:{code:K6,desc:oc[K6]}},OD=class t extends si{static{s(this,"ClientConfigurationError")}constructor(e){super(e,oc[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function ys(t){return new OD(t)}s(ys,"createClientConfigurationError");d();var ka=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var rl=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?ka.trimArrayEntries([...e]):[],n=r?ka.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw ys(P2);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||rt.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(rt.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return Tme.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw vt(E2)}}removeScope(e){if(!e)throw vt(x2);this.scopes.delete(e.trim())}removeOIDCScopes(){Tme.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw vt(VI);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw vt(VI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):rt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};d();d();function QD(t,e){if(!t)throw vt(d2);try{let r=e(t);return JSON.parse(r)}catch{throw vt(WI)}}s(QD,"buildClientInfo");function CC(t){if(!t)throw vt(WI);let e=t.split(ic.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?rt.EMPTY_STRING:e[1]}}s(CC,"buildClientInfoFromHomeAccountId");d();function _Fe(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(_Fe,"tenantIdMatchesHomeTenant");function Y6(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,f=a||l||u||"";return{tenantId:f,localAccountId:i||o||"",name:c,isHomeTenant:_Fe(f,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:_Fe(r,t)}}s(Y6,"buildTenantProfile");function xV(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=Y6(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(xV,"updateAccountTenantProfileData");d();var Zm={Default:0,Adfs:1,Dsts:2,Ciam:3};d();function EV(t){return t&&(t.tid||t.tfp||t.acr)||null}s(EV,"getTenantIdFromIdTokenClaims");d();var Bd={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var ju=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(ic.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===Zm.Adfs?i.authorityType=l2.ADFS_ACCOUNT_TYPE:r.protocolMode===Bd.OIDC?i.authorityType=l2.GENERIC_ACCOUNT_TYPE:i.authorityType=l2.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=QD(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw vt(Jv);i.environment=a,i.realm=o?.utid||EV(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=Y6(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||l2.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===Zm.Adfs||r===Zm.Dsts)){if(e)try{let a=QD(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};d();d();var Gu={};xa(Gu,{getDeserializedResponse:()=>Nme,mapToQueryString:()=>vC,stripLeadingHashOrQuery:()=>RFe});d();function RFe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(RFe,"stripLeadingHashOrQuery");function Nme(t){if(!t||t.indexOf("=")<0)return null;try{let e=RFe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw vt(h2)}return null}s(Nme,"getDeserializedResponse");function vC(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(vC,"mapToQueryString");var Bi=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ys(k2);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return ka.endsWith(r,"?")?r=r.slice(0,-1):ka.endsWith(r,"?/")&&(r=r.slice(0,-2)),ka.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ys(yC)}if(!e.HostNameAndPort||!e.PathSegments)throw ys(yC);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ys(R2)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===f0.COMMON||n[0]===f0.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw ys(yC);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw ys(yC);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===rt.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Nme(e)}};var PFe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Mme=PFe.endpointMetadata,Lme=PFe.instanceDiscoveryMetadata,Fme=new Set;Lme.metadata.forEach(t=>{t.aliases.forEach(e=>{Fme.add(e)})});function DFe(t,e){let r,n=t.canonicalAuthority;if(n){let i=new Bi(n).getUrlComponents().HostNameAndPort;r=kFe(i,t.cloudDiscoveryMetadata?.metadata,ff.CONFIG,e)||kFe(i,Lme.metadata,ff.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(DFe,"getAliasesFromStaticSources");function kFe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=J6(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(kFe,"getAliasesFromMetadata");function BFe(t){return J6(Lme.metadata,t)}s(BFe,"getCloudDiscoveryMetadataFromHardcodedValues");function J6(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s(J6,"getCloudDiscoveryMetadataFromNetworkResponse");d();d();var Ome="cache_quota_exceeded",bV="cache_error_unknown";var Qme={[Ome]:"Exceeded cache storage capacity.",[bV]:"Unexpected error occurred when using cache storage."},X6=class t extends si{static{s(this,"CacheError")}constructor(e,r){let n=r||(Qme[e]?Qme[e]:Qme[bV]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function NFe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new X6(Ome):new X6(t.name,t.message):new X6(bV)}s(NFe,"createCacheError");var XI=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(gV,ND),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=ex(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=xV(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let f=this.getTenantedAccountInfoByFilter(o,c,u,r,i);f&&l.push(f)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw vt(b2);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof si?i:NFe(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=rl.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&rl.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(ic.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(ic.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(_o.ID_TOKEN.toLowerCase())===-1&&r.indexOf(_o.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(_o.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(_o.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(_o.REFRESH_TOKEN.toLowerCase())>-1){let n=`${_o.REFRESH_TOKEN}${ic.CACHE_KEY_SEPARATOR}${this.clientId}${ic.CACHE_KEY_SEPARATOR}`,i=`${_o.REFRESH_TOKEN}${ic.CACHE_KEY_SEPARATOR}${zv}${ic.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===_o.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===co.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==_o.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==co.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=ju.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:_o.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let f=new Map;c.forEach((m,h)=>{m.realm===e.tenantId&&f.set(h,m)});let p=f.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),f.values().next().value;u=f}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((f,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=rl.createSearchScopes(r.scopes),c=r.authenticationScheme||co.BEARER,l=c&&c.toLowerCase()!==co.BEARER.toLowerCase()?_o.ACCESS_TOKEN_WITH_AUTH_SCHEME:_o.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},f=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){let g=this.getAccessTokenCredential(h,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(h=>{this.removeAccessToken(U6(h),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?zv:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:_o.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let m=this.getRefreshTokenCredential(p,n);m&&this.credentialMatchesFilter(m,c)&&u.push(m)}});let f=u.length;return f<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(f>1&&o&&n&&o.addFields({multiMatchedRT:f},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw vt(C2);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===zv)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=DFe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==_o.ACCESS_TOKEN&&e.credentialType!==_o.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:rl.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(y6)!==-1}isAuthorityMetadata(e){return e.indexOf(kD.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${kD.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},Z6=class extends XI{static{s(this,"DefaultStorageClass")}async setAccount(){throw vt(Di)}getAccount(){throw vt(Di)}async setIdTokenCredential(){throw vt(Di)}getIdTokenCredential(){throw vt(Di)}async setAccessTokenCredential(){throw vt(Di)}getAccessTokenCredential(){throw vt(Di)}async setRefreshTokenCredential(){throw vt(Di)}getRefreshTokenCredential(){throw vt(Di)}setAppMetadata(){throw vt(Di)}getAppMetadata(){throw vt(Di)}setServerTelemetry(){throw vt(Di)}getServerTelemetry(){throw vt(Di)}setAuthorityMetadata(){throw vt(Di)}getAuthorityMetadata(){throw vt(Di)}getAuthorityMetadataKeys(){throw vt(Di)}setThrottlingCache(){throw vt(Di)}getThrottlingCache(){throw vt(Di)}removeItem(){throw vt(Di)}getKeys(){throw vt(Di)}getAccountKeys(){throw vt(Di)}getTokenKeys(){throw vt(Di)}};d();d();var Ye={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},men=new Map([[Ye.AcquireTokenByCode,"ATByCode"],[Ye.AcquireTokenByRefreshToken,"ATByRT"],[Ye.AcquireTokenSilent,"ATS"],[Ye.AcquireTokenSilentAsync,"ATSAsync"],[Ye.AcquireTokenPopup,"ATPopup"],[Ye.AcquireTokenRedirect,"ATRedirect"],[Ye.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ye.CryptoOptsSignJwt,"CryptoSignJwt"],[Ye.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ye.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ye.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ye.SsoSilent,"SsoSlt"],[Ye.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ye.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ye.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ye.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ye.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ye.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ye.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ye.BrokerHandhshake,"BrokerHandshake"],[Ye.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ye.AcquireTokenByBroker,"ATByBroker"],[Ye.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ye.RefreshTokenClientAcquireToken,"RTClientAT"],[Ye.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ye.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ye.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ye.AcquireTokenFromCache,"ATFromCache"],[Ye.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ye.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ye.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ye.InitializeBaseRequest,"InitBaseReq"],[Ye.InitializeSilentRequest,"InitSltReq"],[Ye.InitializeClientApplication,"InitClientApplication"],[Ye.InitializeCache,"InitCache"],[Ye.ImportExistingCache,"importCache"],[Ye.SetUserData,"setUserData"],[Ye.LocalStorageUpdated,"localStorageUpdated"],[Ye.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ye.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ye.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ye.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ye.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ye.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ye.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ye.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ye.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ye.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ye.HandleCodeResponse,"HandleCodeResp"],[Ye.HandleResponseEar,"HandleRespEar"],[Ye.HandleResponseCode,"HandleRespCode"],[Ye.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ye.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ye.AuthClientAcquireToken,"AuthClientAT"],[Ye.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ye.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ye.PopTokenGenerateCnf,"PopTGenCnf"],[Ye.PopTokenGenerateKid,"PopTGenKid"],[Ye.HandleServerTokenResponse,"HandleServerTRes"],[Ye.DeserializeResponse,"DeserializeRes"],[Ye.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ye.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ye.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ye.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ye.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ye.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ye.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ye.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ye.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ye.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ye.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ye.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ye.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ye.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ye.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ye.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ye.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ye.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ye.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ye.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ye.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ye.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ye.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ye.GeneratePkceCodes,"GenPkceCodes"],[Ye.GenerateCodeVerifier,"GenCodeVerifier"],[Ye.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ye.Sha256Digest,"Sha256Digest"],[Ye.GetRandomValues,"GetRandomValues"],[Ye.GenerateHKDF,"genHKDF"],[Ye.GenerateBaseKey,"genBaseKey"],[Ye.Base64Decode,"b64Decode"],[Ye.UrlEncodeArr,"urlEncArr"],[Ye.Encrypt,"encrypt"],[Ye.Decrypt,"decrypt"],[Ye.GenerateEarKey,"genEarKey"],[Ye.DecryptEarResponse,"decryptEarResp"]]),MFe={NotStarted:0,InProgress:1,Completed:2};var IV=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},F2=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:MFe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new IV}}startPerformanceMeasurement(){return new IV}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var k4t={tokenRenewalOffsetSeconds:PD,preventCorsPreflight:!1},P4t={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ga.Info,correlationId:rt.EMPTY_STRING},D4t={claimsBasedCachingEnabled:!1},B4t={async sendGetRequestAsync(){throw vt(Di)},async sendPostRequestAsync(){throw vt(Di)}},N4t={sku:rt.SKU,version:ND,cpu:rt.EMPTY_STRING,os:rt.EMPTY_STRING},M4t={clientSecret:rt.EMPTY_STRING,clientAssertion:void 0},L4t={azureCloudInstance:Zv.None,tenant:`${rt.DEFAULT_COMMON_TENANT}`},F4t={application:{appName:"",appVersion:""}};function LFe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:f,persistencePlugin:p,serializableCache:m}){let h={...P4t,...r};return{authOptions:O4t(t),systemOptions:{...k4t,...e},loggerOptions:h,cacheOptions:{...D4t,...n},storageInterface:i||new Z6(t.clientId,BD,new wp(h),new F2),networkInterface:o||B4t,cryptoInterface:a||BD,clientCredentials:c||M4t,libraryInfo:{...N4t,...l},telemetry:{...F4t,...u},serverTelemetryManager:f||null,persistencePlugin:p||null,serializableCache:m||null}}s(LFe,"buildClientConfiguration");function O4t(t){return{clientCapabilities:[],azureCloudOptions:L4t,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s(O4t,"buildAuthOptions");function TV(t){return t.authOptions.authority.options.protocolMode===Bd.OIDC}s(TV,"isOidcProtocolMode");d();var mf={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var pr={};xa(pr,{addApplicationTelemetry:()=>rF,addAuthorizationCode:()=>khe,addBrokerParameters:()=>ix,addCcsOid:()=>rx,addCcsUpn:()=>ZI,addClaims:()=>$2,addClientAssertion:()=>oF,addClientAssertionType:()=>sF,addClientCapabilitiesToClaims:()=>FFe,addClientId:()=>q2,addClientInfo:()=>j2,addClientSecret:()=>iF,addCodeChallengeParams:()=>Z4t,addCodeVerifier:()=>Dhe,addCorrelationId:()=>W2,addDeviceCode:()=>eDt,addDomainHint:()=>She,addEARParameters:()=>oDt,addExtraQueryParameters:()=>nx,addGrantType:()=>aF,addIdTokenHint:()=>whe,addInstanceAware:()=>cF,addLibraryInfo:()=>tF,addLoginHint:()=>qD,addLogoutHint:()=>Bhe,addNativeBroker:()=>X4t,addNonce:()=>Rhe,addOboAssertion:()=>tDt,addPassword:()=>iDt,addPopToken:()=>lF,addPostLogoutRedirectUri:()=>The,addPrompt:()=>_he,addRedirectUri:()=>H2,addRefreshToken:()=>Phe,addRequestTokenUse:()=>rDt,addResponseMode:()=>Ihe,addResponseType:()=>J4t,addScopes:()=>U2,addServerTelemetry:()=>dF,addSid:()=>PV,addSshJwk:()=>uF,addState:()=>nF,addThrottling:()=>fF,addUsername:()=>nDt,instrumentBrokerParams:()=>Q2});d();var O2={};xa(O2,{ACCESS_TOKEN:()=>q4t,BROKER_CLIENT_ID:()=>eF,BROKER_REDIRECT_URI:()=>kV,CCS_HEADER:()=>K4t,CLAIMS:()=>$me,CLIENT_ASSERTION:()=>phe,CLIENT_ASSERTION_TYPE:()=>mhe,CLIENT_ID:()=>xC,CLIENT_INFO:()=>G4t,CLIENT_REQUEST_ID:()=>Zme,CLIENT_SECRET:()=>fhe,CODE:()=>Kme,CODE_CHALLENGE:()=>Yme,CODE_CHALLENGE_METHOD:()=>Jme,CODE_VERIFIER:()=>Xme,DEVICE_CODE:()=>dhe,DOMAIN_HINT:()=>xhe,EAR_JWE_CRYPTO:()=>bhe,EAR_JWK:()=>Ehe,ERROR:()=>Q4t,ERROR_DESCRIPTION:()=>U4t,EXPIRES_IN:()=>$4t,FOCI:()=>z4t,GRANT_TYPE:()=>Hme,ID_TOKEN:()=>H4t,ID_TOKEN_HINT:()=>uhe,INSTANCE_AWARE:()=>UD,LOGIN_HINT:()=>vhe,LOGOUT_HINT:()=>yhe,NATIVE_BROKER:()=>Ahe,NONCE:()=>Vme,OBO_ASSERTION:()=>hhe,ON_BEHALF_OF:()=>V4t,POST_LOGOUT_URI:()=>lhe,PROMPT:()=>zme,REDIRECT_URI:()=>wV,REFRESH_TOKEN:()=>jme,REFRESH_TOKEN_EXPIRES_IN:()=>W4t,REQUESTED_TOKEN_USE:()=>ghe,REQ_CNF:()=>_V,RESPONSE_MODE:()=>qme,RESPONSE_TYPE:()=>Ume,RETURN_SPA_CODE:()=>RV,SCOPE:()=>Wme,SESSION_STATE:()=>j4t,SID:()=>Che,STATE:()=>Gme,TOKEN_TYPE:()=>SV,X_APP_NAME:()=>ahe,X_APP_VER:()=>che,X_CLIENT_CPU:()=>nhe,X_CLIENT_CURR_TELEM:()=>ihe,X_CLIENT_EXTRA_SKU:()=>Y4t,X_CLIENT_LAST_TELEM:()=>ohe,X_CLIENT_OS:()=>rhe,X_CLIENT_SKU:()=>ehe,X_CLIENT_VER:()=>the,X_MS_LIB_CAPABILITY:()=>she});d();var xC="client_id",wV="redirect_uri",Ume="response_type",qme="response_mode",Hme="grant_type",$me="claims",Wme="scope",Q4t="error",U4t="error_description",q4t="access_token",H4t="id_token",jme="refresh_token",$4t="expires_in",W4t="refresh_token_expires_in",Gme="state",Vme="nonce",zme="prompt",j4t="session_state",G4t="client_info",Kme="code",Yme="code_challenge",Jme="code_challenge_method",Xme="code_verifier",Zme="client-request-id",ehe="x-client-SKU",the="x-client-VER",rhe="x-client-OS",nhe="x-client-CPU",ihe="x-client-current-telemetry",ohe="x-client-last-telemetry",she="x-ms-lib-capability",ahe="x-app-name",che="x-app-ver",lhe="post_logout_redirect_uri",uhe="id_token_hint",dhe="device_code",fhe="client_secret",phe="client_assertion",mhe="client_assertion_type",SV="token_type",_V="req_cnf",hhe="assertion",ghe="requested_token_use",V4t="on_behalf_of",z4t="foci",K4t="X-AnchorMailbox",RV="return_spa_code",Ahe="nativebroker",yhe="logout_hint",Che="sid",vhe="login_hint",xhe="domain_hint",Y4t="x-client-xtra-sku",eF="brk_client_id",kV="brk_redirect_uri",UD="instance_aware",Ehe="ear_jwk",bhe="ear_jwe_crypto";function Q2(t,e,r){if(!e)return;let n=t.get(xC);n&&t.has(eF)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(wV)},e)}s(Q2,"instrumentBrokerParams");function J4t(t,e){t.set(Ume,e)}s(J4t,"addResponseType");function Ihe(t,e){t.set(qme,e||gC.QUERY)}s(Ihe,"addResponseMode");function X4t(t){t.set(Ahe,"1")}s(X4t,"addNativeBroker");function U2(t,e,r=!0,n=d0){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new rl(i);t.set(Wme,o.printScopes())}s(U2,"addScopes");function q2(t,e){t.set(xC,e)}s(q2,"addClientId");function H2(t,e){t.set(wV,e)}s(H2,"addRedirectUri");function The(t,e){t.set(lhe,e)}s(The,"addPostLogoutRedirectUri");function whe(t,e){t.set(uhe,e)}s(whe,"addIdTokenHint");function She(t,e){t.set(xhe,e)}s(She,"addDomainHint");function qD(t,e){t.set(vhe,e)}s(qD,"addLoginHint");function ZI(t,e){t.set(Ls.CCS_HEADER,`UPN:${e}`)}s(ZI,"addCcsUpn");function rx(t,e){t.set(Ls.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(rx,"addCcsOid");function PV(t,e){t.set("sid",e)}s(PV,"addSid");function $2(t,e,r){let n=FFe(e,r);try{JSON.parse(n)}catch{throw ys(YI)}t.set($me,n)}s($2,"addClaims");function W2(t,e){t.set(Zme,e)}s(W2,"addCorrelationId");function tF(t,e){t.set(ehe,e.sku),t.set(the,e.version),e.os&&t.set(rhe,e.os),e.cpu&&t.set(nhe,e.cpu)}s(tF,"addLibraryInfo");function rF(t,e){e?.appName&&t.set(ahe,e.appName),e?.appVersion&&t.set(che,e.appVersion)}s(rF,"addApplicationTelemetry");function _he(t,e){t.set(zme,e)}s(_he,"addPrompt");function nF(t,e){e&&t.set(Gme,e)}s(nF,"addState");function Rhe(t,e){t.set(Vme,e)}s(Rhe,"addNonce");function Z4t(t,e,r){if(e&&r)t.set(Yme,e),t.set(Jme,r);else throw ys(N2)}s(Z4t,"addCodeChallengeParams");function khe(t,e){t.set(Kme,e)}s(khe,"addAuthorizationCode");function eDt(t,e){t.set(dhe,e)}s(eDt,"addDeviceCode");function Phe(t,e){t.set(jme,e)}s(Phe,"addRefreshToken");function Dhe(t,e){t.set(Xme,e)}s(Dhe,"addCodeVerifier");function iF(t,e){t.set(fhe,e)}s(iF,"addClientSecret");function oF(t,e){e&&t.set(phe,e)}s(oF,"addClientAssertion");function sF(t,e){e&&t.set(mhe,e)}s(sF,"addClientAssertionType");function tDt(t,e){t.set(hhe,e)}s(tDt,"addOboAssertion");function rDt(t,e){t.set(ghe,e)}s(rDt,"addRequestTokenUse");function aF(t,e){t.set(Hme,e)}s(aF,"addGrantType");function j2(t){t.set(wFe,"1")}s(j2,"addClientInfo");function cF(t){t.has(UD)||t.set(UD,"true")}s(cF,"addInstanceAware");function nx(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(nx,"addExtraQueryParameters");function FFe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw ys(YI)}return e&&e.length>0&&(r.hasOwnProperty(c2.ACCESS_TOKEN)||(r[c2.ACCESS_TOKEN]={}),r[c2.ACCESS_TOKEN][c2.XMS_CC]={values:e}),JSON.stringify(r)}s(FFe,"addClientCapabilitiesToClaims");function nDt(t,e){t.set(v6.username,e)}s(nDt,"addUsername");function iDt(t,e){t.set(v6.password,e)}s(iDt,"addPassword");function lF(t,e){e&&(t.set(SV,co.POP),t.set(_V,e))}s(lF,"addPopToken");function uF(t,e){e&&(t.set(SV,co.SSH),t.set(_V,e))}s(uF,"addSshJwk");function dF(t,e){t.set(ihe,e.generateCurrentRequestHeaderValue()),t.set(ohe,e.generateLastRequestHeaderValue())}s(dF,"addServerTelemetry");function fF(t){t.set(she,AC.X_MS_LIB_CAPABILITY_VALUE)}s(fF,"addThrottling");function Bhe(t,e){t.set(yhe,e)}s(Bhe,"addLogoutHint");function ix(t,e,r){t.has(eF)||t.set(eF,e),t.has(kV)||t.set(kV,r)}s(ix,"addBrokerParameters");function oDt(t,e){t.set(Ehe,encodeURIComponent(e)),t.set(bhe,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(oDt,"addEARParameters");var BV={};xa(BV,{createDiscoveredInstance:()=>Mhe});d();d();d();function OFe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s(OFe,"isOpenIdConfigResponse");d();function QFe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(QFe,"isCloudInstanceDiscoveryResponse");d();function UFe(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(UFe,"isCloudInstanceDiscoveryErrorResponse");d();d();var qFe=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),lo=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var pF=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ye.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=u2.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await lo(this.getRegionFromIMDS.bind(this),Ye.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(rt.IMDS_VERSION,i);if(o.status===oi.SUCCESS&&(n=o.body,r.region_source=u2.IMDS),o.status===oi.BAD_REQUEST){let a=await lo(this.getCurrentVersion.bind(this),Ye.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=u2.FAILED_AUTO_DETECTION,null;let c=await lo(this.getRegionFromIMDS.bind(this),Ye.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===oi.SUCCESS&&(n=c.body,r.region_source=u2.IMDS)}}catch{return r.region_source=u2.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=u2.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ye.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${rt.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,rt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ye.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${rt.IMDS_ENDPOINT}?format=json`,e);return r.status===oi.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};pF.IMDS_OPTIONS={headers:{Metadata:"true"}};var mA=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new pF(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(rt.CIAM_AUTH_URL))return Zm.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case rt.ADFS:return Zm.Adfs;case rt.DSTS:return Zm.Dsts}return Zm.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Bi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw vt(pf)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw vt(pf)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw vt(pf)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw vt(w2);return this.replacePath(this.metadata.end_session_endpoint)}else throw vt(pf)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw vt(pf)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw vt(pf)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Zm.Default&&this.protocolMode!==Bd.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new Bi(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let f=new Bi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==f&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${f}`),u=f)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Zm.Adfs||this.protocolMode===Bd.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ye.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await lo(this.updateCloudDiscoveryMetadata.bind(this),Ye.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await lo(this.updateEndpointMetadata.bind(this),Ye.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:CV(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==ff.CACHE&&n?.source!==ff.CACHE&&(e.expiresAt=CV(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ye.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===ff.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await lo(this.updateMetadataWithRegionalInformation.bind(this),Ye.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);LD(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await lo(this.getEndpointMetadataFromNetwork.bind(this),Ye.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await lo(this.updateMetadataWithRegionalInformation.bind(this),Ye.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),LD(e,n,!0),ff.NETWORK;throw vt(m2,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),LD(e,r,!1),{source:ff.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return LD(e,i,!1),{source:ff.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=vV(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:ff.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Bi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ys(M2)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ye.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return OFe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Mme?Mme[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ye.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==rt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=mV.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await lo(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ye.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=mV.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=mV.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ye.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await lo(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ye.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return q6(e,n,!0),ff.NETWORK;throw ys(L2)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||rt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||rt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||rt.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),q6(e,r,!1),ff.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=BFe(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),q6(e,i,!1),ff.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=vV(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),ff.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Zm.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=J6(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ys(JI)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ye.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${rt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(QFe(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(UFe(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===rt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=J6(a,this.hostnameAndPort)}catch(i){if(i instanceof si)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&Bi.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Zv.None){let i=r.tenant?r.tenant:rt.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return rt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw vt(pf)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Fme.has(e)}static isPublicCloudAuthority(e){return rt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new Bi(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${rt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=Bi.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new Bi(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(rt.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${rt.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};mA.reservedTenantDomains=new Set(["{tenant}","{tenantid}",f0.COMMON,f0.CONSUMERS,f0.ORGANIZATIONS]);function HFe(t){let n=new Bi(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case f0.COMMON:case f0.ORGANIZATIONS:case f0.CONSUMERS:return;default:return n}}s(HFe,"getTenantFromAuthorityString");function DV(t){return t.endsWith(rt.FORWARD_SLASH)?t:`${t}${rt.FORWARD_SLASH}`}s(DV,"formatAuthorityUri");function Nhe(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw ys(JI)}return{canonicalAuthority:t.authority?DV(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(Nhe,"buildStaticAuthorityOptions");async function Mhe(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ye.AuthorityFactoryCreateDiscoveredInstance,o);let c=mA.transformCIAMAuthority(DV(t)),l=new mA(c,e,r,n,i,o,a);try{return await lo(l.resolveEndpointsAsync.bind(l),Ye.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw vt(pf)}}s(Mhe,"createDiscoveredInstance");d();d();var hf=class t extends si{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};d();function HD(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s(HD,"getRequestThumbprint");var mF=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${AC.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new hf(o.errorCodes?.join(" ")||rt.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[Ls.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ls.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||AC.DEFAULT_THROTTLE_TIME_SECONDS),n+AC.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=HD(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};d();var NV=class t extends si{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var Vu=class{static{s(this,"BaseClient")}constructor(e,r){this.config=LFe(e),this.logger=new wp(this.config.loggerOptions,gV,ND),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[Ls.CONTENT_TYPE]=rt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case mf.HOME_ACCOUNT_ID:try{let n=CC(e.credential);r[Ls.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case mf.UPN:r[Ls.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){mF.preProcess(this.cacheManager,e,i);let o;try{o=await lo(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ye.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[Ls.X_MS_HTTP_VERSION]||"",requestId:a[Ls.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof NV){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[Ls.X_MS_HTTP_VERSION]||"",requestId:c[Ls.X_MS_REQUEST_ID]||"",contentTypeHeader:c[Ls.CONTENT_TYPE]||void 0,contentLengthHeader:c[Ls.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof si?a:vt(p2)}return mF.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ye.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await Mhe(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&ix(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&nx(r,e.tokenQueryParameters),W2(r,e.correlationId),Q2(r,e.correlationId,this.performanceClient),vC(r)}};d();d();var LV={};xa(LV,{badToken:()=>tT,consentRequired:()=>Fhe,interactionRequired:()=>Lhe,loginRequired:()=>Ohe,nativeAccountUnavailable:()=>hF,noTokensFound:()=>eT,refreshTokenExpired:()=>gF,uxNotAllowed:()=>MV});d();var eT="no_tokens_found",hF="native_account_unavailable",gF="refresh_token_expired",MV="ux_not_allowed",Lhe="interaction_required",Fhe="consent_required",Ohe="login_required",tT="bad_token";var $Fe=[Lhe,Fhe,Ohe,tT,MV],sDt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],FV={[eT]:"No refresh token found in the cache. Please sign-in.",[hF]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[gF]:"Refresh token has expired.",[tT]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[MV]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},Qhe={noTokensFoundError:{code:eT,desc:FV[eT]},native_account_unavailable:{code:hF,desc:FV[hF]},bad_token:{code:tT,desc:FV[tT]}},_p=class t extends si{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||rt.EMPTY_STRING,this.traceId=o||rt.EMPTY_STRING,this.correlationId=a||rt.EMPTY_STRING,this.claims=c||rt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function OV(t,e,r){let n=!!t&&$Fe.indexOf(t)>-1,i=!!r&&sDt.indexOf(r)>-1,o=!!e&&$Fe.some(a=>e.indexOf(a)>-1);return n||o||i}s(OV,"isInteractionRequiredError");function QV(t){return new _p(t,FV[t])}s(QV,"createInteractionRequiredAuthError");d();var UV=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${rt.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw vt(zI);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw vt(zI);if(!r)throw vt(pA);try{let n=r.split(rt.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(rt.RESOURCE_DELIM):rt.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||rt.EMPTY_STRING,libraryState:c}}catch{throw vt(pA)}}};d();var aDt={SW:"sw"},rT=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ye.PopTokenGenerateCnf,e.correlationId);let n=await lo(this.generateKid.bind(this),Ye.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ye.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:aDt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new Bi(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Sp(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};d();var Rp=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var Bc=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||rt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||rt.NOT_AVAILABLE} - Description: ${e.error_description||rt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||rt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||rt.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new hf(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=oi.SERVER_ERROR_RANGE_START&&e.status<=oi.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=oi.CLIENT_ERROR_RANGE_START&&e.status<=oi.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw OV(e.error,e.error_description,e.suberror)?new _p(e.error,e.error_description,e.suberror,e.timestamp||rt.EMPTY_STRING,e.trace_id||rt.EMPTY_STRING,e.correlation_id||rt.EMPTY_STRING,e.claims||rt.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ye.HandleServerTokenResponse,e.correlation_id);let f;if(e.id_token){if(f=ex(e.id_token||rt.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&f.nonce!==o.nonce)throw vt(A2);if(i.maxAge||i.maxAge===0){let g=f.auth_time;if(!g)throw vt(Kv);O6(g,i.maxAge)}}this.homeAccountIdentifier=ju.generateHomeAccountId(e.client_info||rt.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,f);let p;o&&o.state&&(p=UV.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let m=this.generateCacheRecord(e,r,n,i,f,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new Rp(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),c&&!l&&m.account){let g=m.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,void 0,u)}await this.cacheStorage.saveCacheRecord(m,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw vt(Jv);let u=EV(o),f,p;e.id_token&&o&&(f=kme(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=WFe(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let m=null;if(e.access_token){let A=e.scope?rl.fromString(e.scope):new rl(i.scopes||[]),y=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,E=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,S=n+y,R=S+E,B=b&&b>0?n+b:void 0;m=Pme(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",A.printScopes(),S,R,this.cryptoObj.base64Decode,B,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let h=null;if(e.refresh_token){let A;if(e.refresh_token_expires_in){let y=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;A=n+y}h=Dme(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,A)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:f,accessToken:m,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let f=rt.EMPTY_STRING,p=[],m=null,h,g,A=rt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===co.POP&&!o.popKid){let S=new rT(e),{secret:R,keyId:B}=n.accessToken;if(!B)throw vt(S2);f=await S.signPopToken(R,B,o)}else f=n.accessToken.secret;p=rl.fromString(n.accessToken.target).asArray(),m=Q6(n.accessToken.expiresOn),h=Q6(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=Q6(n.accessToken.refreshOn))}n.appMetadata&&(A=n.appMetadata.familyId===zv?zv:"");let y=a?.oid||a?.sub||"",E=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let b=n.account?xV(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:y,tenantId:E,scopes:p,account:b,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:f,fromCache:i,expiresOn:m,extExpiresOn:h,refreshOn:g,correlationId:o.correlationId,requestId:u||rt.EMPTY_STRING,familyId:A,tokenType:n.accessToken?.tokenType||rt.EMPTY_STRING,state:c?c.userRequestState:rt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||rt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||rt.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function WFe(t,e,r,n,i,o,a,c,l,u,f,p){p?.verbose("setCachedAccount called");let h=t.getAccountKeys().find(b=>b.startsWith(r)),g=null;h&&(g=t.getAccount(h,i));let A=g||ju.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:f},e,n),y=A.tenantProfiles||[],E=l||A.realm;if(E&&!y.find(b=>b.tenantId===E)){let b=Y6(r,A.localAccountId,E,o);y.push(b)}return A.tenantProfiles=y,A}s(WFe,"buildAccountToCache");d();async function gf(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(gf,"getClientAssertion");var AF=class extends Vu{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ye.AuthClientAcquireToken,e.correlationId),!e.code)throw vt(v2);let n=Sp(),i=await lo(this.executeTokenRequest.bind(this),Ye.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[Ls.X_MS_REQUEST_ID],a=new Bc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),lo(a.handleServerTokenResponse.bind(a),Ye.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw ys(B2);let r=this.createLogoutUrlQueryString(e);return Bi.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ye.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=Bi.appendQueryString(e.tokenEndpoint,n),o=await lo(this.createTokenRequestBody.bind(this),Ye.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=QD(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${ic.CLIENT_INFO_SEPARATOR}${u.utid}`,type:mf.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=HD(this.config.authOptions.clientId,r);return lo(this.executePostToTokenEndpoint.bind(this),Ye.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ye.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ye.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(q2(r,e.embeddedClientId||e.tokenBodyParameters?.[xC]||this.config.authOptions.clientId),this.includeRedirectUri)H2(r,e.redirectUri);else if(!e.redirectUri)throw ys(_2);if(U2(r,e.scopes,!0,this.oidcDefaultScopes),khe(r,e.code),tF(r,this.config.libraryInfo),rF(r,this.config.telemetry.application),fF(r),this.serverTelemetryManager&&!TV(this.config)&&dF(r,this.serverTelemetryManager),e.codeVerifier&&Dhe(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&iF(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;oF(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),sF(r,i.assertionType)}if(aF(r,p0.AUTHORIZATION_CODE_GRANT),j2(r),e.authenticationScheme===co.POP){let i=new rT(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await lo(i.generateCnf.bind(i),Ye.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,lF(r,o)}else if(e.authenticationScheme===co.SSH)if(e.sshJwk)uF(r,e.sshJwk);else throw ys(tx);(!ka.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&$2(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=QD(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${ic.CLIENT_INFO_SEPARATOR}${i.utid}`,type:mf.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case mf.HOME_ACCOUNT_ID:try{let i=CC(n.credential);rx(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case mf.UPN:ZI(r,n.credential);break}return e.embeddedClientId&&ix(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&nx(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[RV])&&nx(r,{[RV]:"1"}),Q2(r,e.correlationId,this.performanceClient),vC(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&The(r,e.postLogoutRedirectUri),e.correlationId&&W2(r,e.correlationId),e.idTokenHint&&whe(r,e.idTokenHint),e.state&&nF(r,e.state),e.logoutHint&&Bhe(r,e.logoutHint),e.extraQueryParameters&&nx(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&cF(r),vC(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};d();var cDt=300,G2=class extends Vu{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ye.RefreshTokenClientAcquireToken,e.correlationId);let r=Sp(),n=await lo(this.executeTokenRequest.bind(this),Ye.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[Ls.X_MS_REQUEST_ID],o=new Bc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),lo(o.handleServerTokenResponse.bind(o),Ye.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw ys(D2);if(this.performanceClient?.addQueueMeasurement(Ye.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw vt(Yv);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await lo(this.acquireTokenWithCachedRefreshToken.bind(this),Ye.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof _p&&n.errorCode===eT,o=n instanceof hf&&n.errorCode===C6.INVALID_GRANT_ERROR&&n.subError===C6.CLIENT_MISMATCH_ERROR;if(i||o)return lo(this.acquireTokenWithCachedRefreshToken.bind(this),Ye.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return lo(this.acquireTokenWithCachedRefreshToken.bind(this),Ye.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ye.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=qFe(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ye.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw QV(eT);if(n.expiresOn&&MD(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||cDt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),QV(gF);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||co.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:mf.HOME_ACCOUNT_ID}};try{return await lo(this.acquireToken.bind(this),Ye.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof _p&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===tT)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=U6(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ye.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=Bi.appendQueryString(r.tokenEndpoint,n),o=await lo(this.createTokenRequestBody.bind(this),Ye.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=HD(this.config.authOptions.clientId,e);return lo(this.executePostToTokenEndpoint.bind(this),Ye.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ye.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ye.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(q2(r,e.embeddedClientId||e.tokenBodyParameters?.[xC]||this.config.authOptions.clientId),e.redirectUri&&H2(r,e.redirectUri),U2(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),aF(r,p0.REFRESH_TOKEN_GRANT),j2(r),tF(r,this.config.libraryInfo),rF(r,this.config.telemetry.application),fF(r),this.serverTelemetryManager&&!TV(this.config)&&dF(r,this.serverTelemetryManager),Phe(r,e.refreshToken),this.config.clientCredentials.clientSecret&&iF(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;oF(r,await gf(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),sF(r,n.assertionType)}if(e.authenticationScheme===co.POP){let n=new rT(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await lo(n.generateCnf.bind(n),Ye.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,lF(r,i)}else if(e.authenticationScheme===co.SSH)if(e.sshJwk)uF(r,e.sshJwk);else throw ys(tx);if((!ka.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&$2(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case mf.HOME_ACCOUNT_ID:try{let n=CC(e.ccsCredential.credential);rx(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case mf.UPN:ZI(r,e.ccsCredential.credential);break}return e.embeddedClientId&&ix(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&nx(r,e.tokenBodyParameters),Q2(r,e.correlationId,this.performanceClient),vC(r)}};d();var yF=class extends Vu{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ye.SilentFlowClientAcquireCachedToken,e.correlationId);let r=ws.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ka.isEmptyObj(e.claims))throw this.setCacheOutcome(ws.FORCE_REFRESH_OR_CLAIMS,e.correlationId),vt(Xv);if(!e.account)throw vt(Yv);let n=e.account.tenantId||HFe(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(Rme(o.cachedAt)||MD(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ws.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),vt(Xv);o.refreshOn&&MD(o.refreshOn,0)&&(r=ws.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ws.NO_CACHED_ACCESS_TOKEN,e.correlationId),vt(Xv);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await lo(this.generateResultFromCacheRecord.bind(this),Ye.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==ws.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ye.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=ex(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw vt(Kv);O6(i,r.maxAge)}return Bc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var CF={};xa(CF,{getAuthorizationCodePayload:()=>dDt,getAuthorizeUrl:()=>uDt,getStandardAuthorizeRequestParameters:()=>lDt,validateAuthorizationResponse:()=>jFe});d();function lDt(t,e,r,n){let i=e.correlationId,o=new Map;q2(o,e.embeddedClientId||e.extraQueryParameters?.[xC]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(U2(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),H2(o,e.redirectUri),W2(o,i),Ihe(o,e.responseMode),j2(o),e.prompt&&(_he(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(She(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==$I.SELECT_ACCOUNT)if(e.sid&&e.prompt===$I.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),PV(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=pDt(e.account),l=mDt(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),qD(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=CC(e.account.homeAccountId);rx(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===$I.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),PV(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=CC(e.account.homeAccountId);rx(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),qD(o,e.loginHint),ZI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),qD(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=CC(e.account.homeAccountId);rx(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),qD(o,e.loginHint),ZI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Rhe(o,e.nonce),e.state&&nF(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&$2(o,e.claims,t.clientCapabilities),e.embeddedClientId&&ix(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(UD))&&cF(o),o}s(lDt,"getStandardAuthorizeRequestParameters");function uDt(t,e,r,n){let i=vC(e,r,n);return Bi.appendQueryString(t.authorizationEndpoint,i)}s(uDt,"getAuthorizeUrl");function dDt(t,e){if(jFe(t,e),!t.code)throw vt(T2);return t}s(dDt,"getAuthorizationCodePayload");function jFe(t,e){if(!t.state||!e)throw t.state?vt(GI,"Cached State"):vt(GI,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw vt(pA,t.state)}try{n=decodeURIComponent(e)}catch{throw vt(pA,t.state)}if(r!==n)throw vt(g2);if(t.error||t.error_description||t.suberror){let i=fDt(t);throw OV(t.error,t.error_description,t.suberror)?new _p(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new hf(t.error||"",t.error_description,t.suberror,i)}}s(jFe,"validateAuthorizationResponse");function fDt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(fDt,"parseServerErrorNo");function pDt(t){return t.idTokenClaims?.sid||null}s(pDt,"extractAccountSid");function mDt(t){return t.idTokenClaims?.login_hint||null}s(mDt,"extractLoginHint");d();var GFe=",",VFe="|";function hDt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(GFe),c.length<4)return e}else c=Array.from({length:4},()=>VFe);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&gDt({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(GFe)}s(hDt,"makeExtraSkuString");function gDt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(VFe))}s(gDt,"setSku");var V2=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=ws.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||rt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||rt.EMPTY_STRING,this.telemetryCacheKey=Bl.CACHE_KEY+ic.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Bl.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(Bl.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(Bl.VALUE_SEPARATOR);return[Bl.SCHEMA_VERSION,a,i].join(Bl.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(Bl.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(Bl.VALUE_SEPARATOR),o=e.errors.length,a=r<o?Bl.OVERFLOW_TRUE:Bl.OVERFLOW_FALSE,c=[o,a].join(Bl.VALUE_SEPARATOR);return[Bl.SCHEMA_VERSION,e.cacheHits,n,i,c].join(Bl.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=Bl.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof si?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(Bl.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||rt.EMPTY_STRING,c=e.failedRequests[2*r+1]||rt.EMPTY_STRING,l=e.errors[r]||rt.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<Bl.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||rt.EMPTY_STRING),e.push(this.regionSource||rt.EMPTY_STRING),e.push(this.regionOutcome||rt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return hDt(e)}};var ox=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new ju;XI.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};d();d();var zFe="system_assigned_managed_identity",EDt="managed_identity",qhe=`https://login.microsoftonline.com/${EDt}/`,m0={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},nl={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},qn={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},Xn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Va={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},ta={GET:"get",POST:"post"},qV={SUCCESS_RANGE_START:oi.SUCCESS_RANGE_START,SUCCESS_RANGE_END:oi.SUCCESS_RANGE_END,SERVER_ERROR:oi.SERVER_ERROR},KFe="REGION_NAME",YFe="MSAL_FORCE_REGION",JFe=32,XFe={SHA256:"sha256"},HV={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Ml={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},sx={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},eh={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},$V={INTERVAL_MS:100,TIMEOUT_MS:5e3},ZFe=4096;d();d();d();d();var $D=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var WV=Ne(require("http"),1),Hhe=Ne(require("https"),1);var WD=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?eOe(e,this.proxyUrl,ta.GET,r,this.customAgentOptions,n):tOe(e,ta.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?eOe(e,this.proxyUrl,ta.POST,r,this.customAgentOptions):tOe(e,ta.POST,r,this.customAgentOptions)}},eOe=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new WV.default.Agent(i));let f="";if(r===ta.POST){let m=n?.body||"";f=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${m.length}\r
\r
${m}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+f+`\r
`;return new Promise((m,h)=>{let g=WV.default.request(u);o&&g.on("timeout",()=>{g.destroy(),h(new Error("Request time out"))}),g.end(),g.on("connect",(A,y)=>{let E=A?.statusCode||qV.SERVER_ERROR;(E<qV.SUCCESS_RANGE_START||E>qV.SUCCESS_RANGE_END)&&(g.destroy(),y.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${A.statusCode}. Http status message: ${A?.statusMessage||"Unknown"}`))),y.write(p);let b=[];y.on("data",S=>{b.push(S)}),y.on("end",()=>{let R=Buffer.concat([...b]).toString().split(`\r
`),B=parseInt(R[0].split(" ")[1]),L=R[0].split(" ").slice(2).join(" "),O=R[R.length-1],Y=R.slice(1,R.length-2),V=new Map;Y.forEach(Z=>{let J=Z.split(new RegExp(/:\s(.*)/s)),j=J[0],$=J[1];try{let X=JSON.parse($);X&&typeof X=="object"&&($=X)}catch{}V.set(j,$)});let Q=Object.fromEntries(V),U=$D.getNetworkResponse(Q,rOe(B,L,Q,O),B);(B<oi.SUCCESS_RANGE_START||B>oi.SUCCESS_RANGE_END)&&U.body.error!==Ml.AUTHORIZATION_PENDING&&g.destroy(),m(U)}),y.on("error",S=>{g.destroy(),y.destroy(),h(new Error(S.toString()))})}),g.on("error",A=>{g.destroy(),h(new Error(A.toString()))})})},"networkRequestViaProxy"),tOe=s((t,e,r,n,i)=>{let o=e===ta.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...$D.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new Hhe.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((f,p)=>{let m;u.protocol==="http:"?m=WV.default.request(u):m=Hhe.default.request(u),o&&m.write(a),i&&m.on("timeout",()=>{m.destroy(),p(new Error("Request time out"))}),m.end(),m.on("response",h=>{let g=h.headers,A=h.statusCode,y=h.statusMessage,E=[];h.on("data",b=>{E.push(b)}),h.on("end",()=>{let b=Buffer.concat([...E]).toString(),S=g,R=$D.getNetworkResponse(S,rOe(A,y,S,b),A);(A<oi.SUCCESS_RANGE_START||A>oi.SUCCESS_RANGE_END)&&R.body.error!==Ml.AUTHORIZATION_PENDING&&m.destroy(),f(R)})}),m.on("error",h=>{m.destroy(),p(new Error(h.toString()))})})},"networkRequestViaHttps"),rOe=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=oi.CLIENT_ERROR_RANGE_START&&t<=oi.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=oi.SERVER_ERROR_RANGE_START&&t<=oi.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");d();d();d();var jV="invalid_file_extension",GV="invalid_file_path",nT="invalid_managed_identity_id_type",VV="invalid_secret",nOe="missing_client_id",iOe="network_unavailable",zV="platform_not_supported",KV="unable_to_create_azure_arc",YV="unable_to_create_cloud_shell",JV="unable_to_create_source",vF="unable_to_read_secret_file",oOe="user_assigned_not_available_at_runtime",XV="www_authenticate_header_missing",ZV="www_authenticate_header_unsupported_format",z2={[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[qn.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[qn.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[qn.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var bDt={[jV]:"The file path in the WWW-Authenticate header does not contain a .key file.",[GV]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[nT]:"More than one ManagedIdentityIdType was provided.",[VV]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[zV]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[nOe]:"A ManagedIdentityId id was not provided.",[z2.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${qn.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[z2.IDENTITY_ENDPOINT]:`The Managed Identity's '${qn.IDENTITY_ENDPOINT}' environment variable is malformed.`,[z2.IMDS_ENDPOINT]:`The Managed Identity's '${qn.IMDS_ENDPOINT}' environment variable is malformed.`,[z2.MSI_ENDPOINT]:`The Managed Identity's '${qn.MSI_ENDPOINT}' environment variable is malformed.`,[iOe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[KV]:"Azure Arc Managed Identities can only be system assigned.",[YV]:"Cloud Shell Managed Identities can only be system assigned.",[JV]:"Unable to create a Managed Identity source based on environment variables.",[vF]:"Unable to read the secret file.",[oOe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[XV]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[ZV]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},$he=class t extends si{static{s(this,"ManagedIdentityError")}constructor(e){super(e,bDt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function Nc(t){return new $he(t)}s(Nc,"createManagedIdentityError");var ez=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw Nc(nT);this.id=r,this.idType=Va.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw Nc(nT);this.id=n,this.idType=Va.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw Nc(nT);this.id=i,this.idType=Va.USER_ASSIGNED_OBJECT_ID}else this.id=zFe,this.idType=Va.SYSTEM_ASSIGNED}};d();var iu={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},h0=class t extends si{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(iu.invalidLoopbackAddressType.code,`${iu.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(iu.unableToLoadRedirectUri.code,`${iu.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(iu.noAuthCodeInResponse.code,`${iu.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(iu.noLoopbackServerExists.code,`${iu.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(iu.loopbackServerAlreadyExists.code,`${iu.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(iu.loopbackServerTimeout.code,`${iu.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(iu.stateNotFoundError.code,iu.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(iu.thumbprintMissing.code,iu.thumbprintMissing.desc)}};var IDt={clientId:rt.EMPTY_STRING,authority:rt.DEFAULT_AUTHORITY,clientSecret:rt.EMPTY_STRING,clientAssertion:rt.EMPTY_STRING,clientCertificate:{thumbprint:rt.EMPTY_STRING,thumbprintSha256:rt.EMPTY_STRING,privateKey:rt.EMPTY_STRING,x5c:rt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:rt.EMPTY_STRING,authorityMetadata:rt.EMPTY_STRING,clientCapabilities:[],protocolMode:Bd.AAD,azureCloudOptions:{azureCloudInstance:Zv.None,tenant:rt.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},TDt={claimsBasedCachingEnabled:!1},Whe={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ga.Info},wDt={loggerOptions:Whe,networkClient:new WD,proxyUrl:rt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},SDt={application:{appName:rt.EMPTY_STRING,appVersion:rt.EMPTY_STRING}};function sOe({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...wDt,networkClient:new WD(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Whe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw h0.createStateNotFoundError();return{auth:{...IDt,...t},broker:{...e},cache:{...TDt,...r},system:{...o,...n},telemetry:{...SDt,...i}}}s(sOe,"buildAppConfiguration");function aOe({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new ez(e),i=r?.loggerOptions||Whe,o;return r?.networkClient?o=r.networkClient:o=new WD(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(aOe,"buildManagedIdentityConfiguration");d();d();d();d();var cOe=Ne(require("crypto"));var rz=new Uint8Array(256),tz=rz.length;function jhe(){return tz>rz.length-16&&(cOe.default.randomFillSync(rz),tz=0),rz.slice(tz,tz+=16)}s(jhe,"rng");d();d();d();var lOe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _Dt(t){return typeof t=="string"&&lOe.test(t)}s(_Dt,"validate");var uOe=_Dt;var zu=[];for(let t=0;t<256;++t)zu.push((t+256).toString(16).substr(1));function RDt(t,e=0){let r=(zu[t[e+0]]+zu[t[e+1]]+zu[t[e+2]]+zu[t[e+3]]+"-"+zu[t[e+4]]+zu[t[e+5]]+"-"+zu[t[e+6]]+zu[t[e+7]]+"-"+zu[t[e+8]]+zu[t[e+9]]+"-"+zu[t[e+10]]+zu[t[e+11]]+zu[t[e+12]]+zu[t[e+13]]+zu[t[e+14]]+zu[t[e+15]]).toLowerCase();if(!uOe(r))throw TypeError("Stringified UUID is invalid");return r}s(RDt,"stringify");var dOe=RDt;d();function kDt(t,e,r){t=t||{};let n=t.random||(t.rng||jhe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return dOe(n)}s(kDt,"v4");var Ghe=kDt;var jD=class{static{s(this,"GuidGenerator")}generateGuid(){return Ghe()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};d();var kp=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(Wu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,rt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,Wu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};d();d();var fOe=Ne(require("crypto"),1);var iT=class{static{s(this,"HashUtils")}sha256(e){return fOe.default.createHash(XFe.SHA256).update(e).digest()}};var pOe=Ne(require("crypto"),1);var nz=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new iT}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%HV.CV_CHARSET.length;for(;e.length<=JFe;){let i=pOe.default.randomBytes(1)[0];if(i>=r)continue;let o=i%HV.CV_CHARSET.length;e.push(HV.CV_CHARSET[o])}let n=e.join(rt.EMPTY_STRING);return kp.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return kp.base64EncodeUrl(this.hashUtils.sha256(e).toString(Wu.BASE64),Wu.BASE64)}};var EC=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new nz,this.guidGenerator=new jD,this.hashUtils=new iT}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return kp.base64Encode(e)}base64Decode(e){return kp.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return kp.base64EncodeUrl(this.hashUtils.sha256(e).toString(Wu.BASE64),Wu.BASE64)}};d();d();var oT=class extends XI{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new F2,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof ju)r.accounts[n]=i;else if(Nl.isIdTokenEntity(i))r.idTokens[n]=i;else if(Nl.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(Nl.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(Nl.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new ju,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return Nl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=Nl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return Nl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=Nl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return Nl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=Nl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return Nl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=Nl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&Nl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&Nl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&Nl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return ox.deserializeAllCache(ox.deserializeJSONBlob(e))}static generateJsonCache(e){return HI.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=Nl.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};d();var xF={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},GD=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=HI.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=ox.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=oT.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new EC().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new Rp(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new Rp(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(ju.generateAccountCacheKey(e),r||new jD().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new Rp(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...xF.Account,...e.Account},IdToken:{...xF.IdToken,...e.IdToken},AccessToken:{...xF.AccessToken,...e.AccessToken},RefreshToken:{...xF.RefreshToken,...e.RefreshToken},AppMetadata:{...xF.AppMetadata,...e.AppMetadata}}}};d();var $Ue=Ne(HUe(),1);var ax=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw vt(As.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=ea.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?eh.PSS_256:eh.RSA_256},c=this.useSha256?eh.X5T_256:eh.X5T;Object.assign(a,{[c]:kp.base64EncodeUrl(this.thumbprint,Wu.HEX)}),this.publicCertificate&&Object.assign(a,{[eh.X5C]:this.publicCertificate});let l={[eh.AUDIENCE]:this.jwtAudience,[eh.EXPIRATION_TIME]:this.expirationTime,[eh.ISSUER]:this.issuer,[eh.SUBJECT]:this.issuer,[eh.NOT_BEFORE]:i,[eh.JWT_ID]:e.createNewGuid()};return this.jwt=$Ue.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<ea.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,rt.EMPTY_STRING));return n}};d();var Bz="@azure/msal-node",gA="3.6.3";d();var nB=class extends Vu{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=ea.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new Bc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=Bi.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:mf.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;pr.addClientId(r,this.config.authOptions.clientId),pr.addUsername(r,e.username),pr.addPassword(r,e.password),pr.addScopes(r,e.scopes),pr.addResponseType(r,RD.IDTOKEN_TOKEN),pr.addGrantType(r,p0.RESOURCE_OWNER_PASSWORD_GRANT),pr.addClientInfo(r),pr.addLibraryInfo(r,this.config.libraryInfo),pr.addApplicationTelemetry(r,this.config.telemetry.application),pr.addThrottling(r),this.serverTelemetryManager&&pr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();pr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&pr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(pr.addClientAssertion(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pr.addClientAssertionType(r,i.assertionType)),(!ka.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&pr.addCcsUpn(r,e.username),Gu.mapToQueryString(r)}};d();function WUe(t,e,r,n){let i=CF.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return pr.addLibraryInfo(i,{sku:Ml.MSAL_SKU,version:gA,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==Bd.OIDC&&pr.addApplicationTelemetry(i,t.telemetry.application),pr.addResponseType(i,RD.CODE),r.codeChallenge&&r.codeChallengeMethod&&pr.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),pr.addExtraQueryParameters(i,r.extraQueryParameters||{}),CF.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(WUe,"getAuthCodeRequestUrl");var cT=class{static{s(this,"ClientApplication")}constructor(e){this.config=sOe(e),this.cryptoProvider=new EC,this.logger=new wp(this.config.system.loggerOptions,Bz,gA),this.storage=new oT(this.logger,this.config.auth.clientId,this.cryptoProvider,Nhe(this.config.auth)),this.tokenCache=new GD(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||gC.QUERY,authenticationScheme:co.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return WUe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:co.BEARER},i=this.initializeServerTelemetryManager(sx.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new AF(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof si&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:co.BEARER},n=this.initializeServerTelemetryManager(sx.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new G2(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof si&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(sx.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new yF(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof KI&&c.errorCode===As.tokenRefreshRequired)return new G2(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof si&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...d0]});if(o===ws.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new G2(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(sx.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new nB(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof si&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw h0.createStateNotFoundError();if(e!==r)throw vt(As.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:Ml.MSAL_SKU,version:gA,cpu:process.arch||rt.EMPTY_STRING,os:process.platform||rt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=ax.fromAssertion(await gf(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Ml.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===co.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=co.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!ka.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...d0],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new V2(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=mA.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return BV.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};d();var jUe=Ne(require("http"),1);var Nz=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw h0.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=jUe.default.createServer((o,a)=>{let c=o.url;if(c){if(c===rt.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(h0.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),f=Gu.getDeserializedResponse(u.search)||{};f.code&&(a.writeHead(oi.REDIRECT,{location:l}),a.end()),f.error&&a.end(r||`Error occurred: ${f.error}`),n(f)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw h0.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),h0.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${Ml.HTTP_PROTOCOL}${Ml.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};d();var iB=class extends Vu{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=ea.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new Bc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=Bi.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&pr.addExtraQueryParameters(r,e.extraQueryParameters),Gu.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:f,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:f,message:p}}createQueryString(e){let r=new Map;return pr.addScopes(r,e.scopes),pr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&pr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Gu.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),vt(As.deviceCodePollingCancelled);if(r&&r<e&&ea.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),vt(As.userTimeoutReached);if(ea.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),vt(As.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=Bi.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?ea.nowSeconds()+e.timeout:void 0,l=ea.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let f={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,f,e.correlationId);if(p.body&&p.body.error)if(p.body.error===rt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await ea.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),Sme(DD.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),vt(As.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;pr.addScopes(n,e.scopes),pr.addClientId(n,this.config.authOptions.clientId),pr.addGrantType(n,p0.DEVICE_CODE_GRANT),pr.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return pr.addCorrelationId(n,i),pr.addClientInfo(n),pr.addLibraryInfo(n,this.config.libraryInfo),pr.addApplicationTelemetry(n,this.config.telemetry.application),pr.addThrottling(n),this.serverTelemetryManager&&pr.addServerTelemetry(n,this.serverTelemetryManager),(!ka.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),Gu.mapToQueryString(n)}};var oB=class extends cT{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=V2.makeExtraSkuString({libraryName:Ml.MSAL_SKU,libraryVersion:gA})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(sx.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new iB(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof si&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||d0,redirectUri:`${Ml.HTTP_PROTOCOL}${Ml.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[O2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:f}=await this.cryptoProvider.generatePkceCodes(),p=c||new Nz,m={},h=null;try{let g=p.listenForAuthCode(i,o).then(R=>{m=R}).catch(R=>{h=R}),A=await this.waitForRedirectUri(p),y={...l,correlationId:r,scopes:e.scopes||d0,redirectUri:A,responseMode:gC.QUERY,codeChallenge:f,codeChallengeMethod:pV.S256},E=await this.getAuthCodeUrl(y);if(await n(E),await g,h)throw h;if(m.error)throw new hf(m.error,m.error_description,m.suberror);if(!m.code)throw h0.createNoAuthCodeInResponseError();let b=m.client_info,S={code:m.code,codeVerifier:u,clientInfo:b||rt.EMPTY_STRING,...y};return await this.acquireTokenByCode(S)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||d0,redirectUri:`${Ml.HTTP_PROTOCOL}${Ml.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[O2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if($V.TIMEOUT_MS/$V.INTERVAL_MS<i){clearInterval(o),n(h0.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof si&&a.errorCode===iu.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},$V.INTERVAL_MS)})}};d();d();var lT=class extends Vu{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===ws.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=ws.NOT_APPLICABLE,f;c.serializableCache&&c.persistencePlugin&&(f=new Rp(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(f));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new rl(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&f&&await c.persistencePlugin.afterCacheAccess(f),p?ea.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||PD)?(a?.setCacheOutcome(ws.CACHED_ACCESS_TOKEN_EXPIRED),[null,ws.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&ea.isTokenExpired(p.refreshOn.toString(),0)&&(u=ws.PROACTIVELY_REFRESHED,a?.setCacheOutcome(ws.PROACTIVELY_REFRESHED)),[await Bc.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(ws.NO_CACHED_ACCESS_TOKEN),[null,ws.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:rt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:_o.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:rl.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw vt(As.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=ea.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:co.BEARER}}else{let l=this.createTokenQueryParameters(e),u=Bi.appendQueryString(r.tokenEndpoint,l),f=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),m={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=ea.nowSeconds();let h=await this.executePostToTokenEndpoint(u,f,p,m,e.correlationId);i=h.body,i.status=h.status}let a=new Bc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;pr.addClientId(r,this.config.authOptions.clientId),pr.addScopes(r,e.scopes,!1),pr.addGrantType(r,p0.CLIENT_CREDENTIALS_GRANT),pr.addLibraryInfo(r,this.config.libraryInfo),pr.addApplicationTelemetry(r,this.config.telemetry.application),pr.addThrottling(r),this.serverTelemetryManager&&pr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();pr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&pr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(pr.addClientAssertion(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pr.addClientAssertionType(r,i.assertionType)),(!ka.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Gu.mapToQueryString(r)}};d();var sB=class extends Vu{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new rl(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(ea.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(ws.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),vt(As.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(ws.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),vt(As.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=AV.extractTokenClaims(n.secret,kp.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:rt.EMPTY_STRING,localAccountId:a||rt.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Bc.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:_o.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||co.BEARER,o={credentialType:n&&n.toLowerCase()!==co.BEARER.toLowerCase()?_o.ACCESS_TOKEN_WITH_AUTH_SCHEME:_o.ACCESS_TOKEN,clientId:e,target:rl.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw vt(As.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=Bi.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=ea.nowSeconds(),f=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new Bc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(f.body),await p.handleServerTokenResponse(f.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;pr.addClientId(r,this.config.authOptions.clientId),pr.addScopes(r,e.scopes),pr.addGrantType(r,p0.JWT_BEARER),pr.addClientInfo(r),pr.addLibraryInfo(r,this.config.libraryInfo),pr.addApplicationTelemetry(r,this.config.telemetry.application),pr.addThrottling(r),this.serverTelemetryManager&&pr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();pr.addCorrelationId(r,n),pr.addRequestTokenUse(r,O2.ON_BEHALF_OF),pr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&pr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(pr.addClientAssertion(r,await gf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),pr.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Gu.mapToQueryString(r)}};var aB=class extends cT{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw vt(As.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?ax.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):ax.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw vt(As.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await gf(e.clientAssertion,this.config.auth.clientId),assertionType:Ml.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(m=>!d0.includes(m))},o={...e,...i,clientAssertion:r},c=new Bi(o.authority).getUrlComponents().PathSegments[0];if(Object.values(f0).includes(c))throw vt(As.missingTenantIdError);let l=process.env[YFe],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let f={azureRegion:u,environmentRegion:process.env[KFe]},p=this.initializeServerTelemetryManager(sx.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let m=await this.createAuthority(o.authority,o.correlationId,f,e.azureCloudOptions),h=await this.buildOauthClientConfiguration(m,o.correlationId,"",p),g=new lT(h,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(m){throw m instanceof si&&m.setCorrelationId(o.correlationId),p.cacheFailedRequest(m),m}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new sB(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof si&&n.setCorrelationId(r.correlationId),n}}};d();d();d();d();d();function GUe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(GUe,"isIso8601");d();var Mz=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===ta.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[Ls.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(ta.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(ta.POST,e,r)}};var X2={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Cf=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(GUe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-ea.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[nl.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let h=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${h}`),o.queryParameters[nl.XMS_CC]=h}let a=o.headers;a[Ls.CONTENT_TYPE]=rt.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new Mz(this.networkClient,o.retryPolicy,this.logger),u=ea.nowSeconds(),f;try{o.httpMethod===ta.POST?f=await l.sendPostRequestAsync(o.computeUri(),c):f=await l.sendGetRequestAsync(o.computeUri(),c)}catch(h){throw h instanceof si?h:vt(As.networkError)}let p=new Bc(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(f,l,o,c);return p.validateTokenResponse(m,i),p.handleServerTokenResponse(m,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Va.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?X2.MANAGED_IDENTITY_CLIENT_ID_2017:X2.MANAGED_IDENTITY_CLIENT_ID;case Va.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?X2.MANAGED_IDENTITY_RESOURCE_ID_IMDS:X2.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Va.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),X2.MANAGED_IDENTITY_OBJECT_ID;default:throw Nc(nT)}}};Cf.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new Bi(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),Nc(z2[t])}};d();d();d();var Lz=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var MLt=3,LLt=1e3,FLt=[oi.NOT_FOUND,oi.REQUEST_TIMEOUT,oi.TOO_MANY_REQUESTS,oi.SERVER_ERROR,oi.SERVICE_UNAVAILABLE,oi.GATEWAY_TIMEOUT],Fz=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new Lz}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return LLt}async pauseForRetry(e,r,n,i){if(FLt.includes(e)&&r<MLt){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var A0=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new Fz}computeUri(){let e=new Map;this.queryParameters&&pr.addExtraQueryParameters(e,this.queryParameters);let r=Gu.mapToQueryString(e);return Bi.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&pr.addExtraQueryParameters(e,this.bodyParameters),Gu.mapToQueryString(e)}};var OLt="2019-08-01",BF=class t extends Cf{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[qn.IDENTITY_ENDPOINT],r=process.env[qn.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Xn.APP_SERVICE} managed identity is unavailable because one or both of the '${qn.IDENTITY_HEADER}' and '${qn.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(qn.IDENTITY_ENDPOINT,a,Xn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Xn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${Xn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new A0(ta.GET,this.identityEndpoint);return n.headers[m0.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[nl.API_VERSION]=OLt,n.queryParameters[nl.RESOURCE]=e,r.idType!==Va.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var cx=require("fs"),YUe=Ne(require("path"),1);var QLt="2019-11-01",VUe="http://127.0.0.1:40342/metadata/identity/oauth2/token",zUe="N/A: himds executable exists",KUe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},ULt={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},NF=class t extends Cf{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[qn.IDENTITY_ENDPOINT],r=process.env[qn.IMDS_ENDPOINT];if(!e||!r){let n=ULt[process.platform];try{(0,cx.accessSync)(n,cx.constants.F_OK|cx.constants.R_OK),e=VUe,r=zUe}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${Xn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${qn.IDENTITY_ENDPOINT}' and '${qn.IMDS_ENDPOINT}' are not defined. ${Xn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===zUe)e.info(`[Managed Identity] ${Xn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Xn.AZURE_ARC} endpoint: ${VUe}. Creating ${Xn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(qn.IDENTITY_ENDPOINT,c,Xn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(qn.IMDS_ENDPOINT,l,Xn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Xn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${Xn.AZURE_ARC} managed identity.`)}if(a.idType!==Va.SYSTEM_ASSIGNED)throw Nc(KV);return new t(e,r,n,i,o,c)}createRequest(e){let r=new A0(ta.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[m0.METADATA_HEADER_NAME]="true",r.queryParameters[nl.API_VERSION]=QLt,r.queryParameters[nl.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===oi.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw Nc(XV);if(!a.includes("Basic realm="))throw Nc(ZV);let c=a.split("Basic realm=")[1];if(!KUe.hasOwnProperty(process.platform))throw Nc(zV);let l=KUe[process.platform],u=YUe.default.basename(c);if(!u.endsWith(".key"))throw Nc(jV);if(l+u!==c)throw Nc(GV);let f;try{f=await(0,cx.statSync)(c).size}catch{throw Nc(vF)}if(f>ZFe)throw Nc(VV);let p;try{p=(0,cx.readFileSync)(c,Wu.UTF8)}catch{throw Nc(vF)}let m=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[m0.AUTHORIZATION_HEADER_NAME]=m;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(h){throw h instanceof si?h:vt(As.networkError)}}return this.getServerTokenResponse(o||e)}};d();var MF=class t extends Cf{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[qn.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${Xn.CLOUD_SHELL} managed identity is unavailable because the '${qn.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(qn.MSI_ENDPOINT,c,Xn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Xn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${Xn.CLOUD_SHELL} managed identity.`),a.idType!==Va.SYSTEM_ASSIGNED)throw Nc(YV);return new t(e,r,n,i,o,c)}createRequest(e){let r=new A0(ta.POST,this.msiEndpoint);return r.headers[m0.METADATA_HEADER_NAME]="true",r.bodyParameters[nl.RESOURCE]=e,r}};d();d();d();var Oz=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var qLt=[oi.NOT_FOUND,oi.REQUEST_TIMEOUT,oi.GONE,oi.TOO_MANY_REQUESTS],HLt=3,$Lt=7,WLt=1e3,jLt=4e3,GLt=2e3,VLt=10*1e3,Qz=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new Oz(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return WLt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return jLt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return GLt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return VLt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===oi.GONE?$Lt:HLt),(qLt.includes(e)||e>=oi.SERVER_ERROR_RANGE_START&&e<=oi.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===oi.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var JUe="/metadata/identity/oauth2/token",zLt=`http://169.254.169.254${JUe}`,KLt="2018-02-01",Uz=class t extends Cf{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${qn.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${Xn.IMDS} returned endpoint: ${process.env[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(qn.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[qn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${JUe}`,Xn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${qn.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${Xn.IMDS}, using the default endpoint.`),a=zLt),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new A0(ta.GET,this.identityEndpoint);return n.headers[m0.METADATA_HEADER_NAME]="true",n.queryParameters[nl.API_VERSION]=KLt,n.queryParameters[nl.RESOURCE]=e,r.idType!==Va.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new Qz,n}};d();var YLt="2019-07-01-preview",LF=class t extends Cf{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[qn.IDENTITY_ENDPOINT],r=process.env[qn.IDENTITY_HEADER],n=process.env[qn.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${Xn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${qn.IDENTITY_HEADER}', '${qn.IDENTITY_ENDPOINT}' or '${qn.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let f=t.getValidatedEnvVariableUrlString(qn.IDENTITY_ENDPOINT,c,Xn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Xn.SERVICE_FABRIC} managed identity. Endpoint URI: ${f}. Creating ${Xn.SERVICE_FABRIC} managed identity.`),a.idType!==Va.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${Xn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new A0(ta.GET,this.identityEndpoint);return n.headers[m0.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[nl.API_VERSION]=YLt,n.queryParameters[nl.RESOURCE]=e,r.idType!==Va.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var JLt="2017-09-01",XLt=`Only client id is supported for user-assigned managed identity in ${Xn.MACHINE_LEARNING}.`,FF=class t extends Cf{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[qn.MSI_ENDPOINT],r=process.env[qn.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Xn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${qn.MSI_ENDPOINT}' and '${qn.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(qn.MSI_ENDPOINT,a,Xn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Xn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${Xn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new A0(ta.GET,this.msiEndpoint);if(n.headers[m0.METADATA_HEADER_NAME]="true",n.headers[m0.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[nl.API_VERSION]=JLt,n.queryParameters[nl.RESOURCE]=e,r.idType===Va.SYSTEM_ASSIGNED)n.queryParameters[X2.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[qn.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===Va.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(XLt);return n}};var OF=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(LF.getEnvironmentVariables())?Xn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(BF.getEnvironmentVariables())?Xn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(FF.getEnvironmentVariables())?Xn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(MF.getEnvironmentVariables())?Xn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(NF.getEnvironmentVariables())?Xn.AZURE_ARC:Xn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=LF.tryCreate(e,r,n,i,o,a)||BF.tryCreate(e,r,n,i,o)||FF.tryCreate(e,r,n,i,o)||MF.tryCreate(e,r,n,i,o,a)||NF.tryCreate(e,r,n,i,o,a)||Uz.tryCreate(e,r,n,i,o);if(!c)throw Nc(JV);return c}};var ZLt=[Xn.SERVICE_FABRIC],cB=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=aOe(e||{}),this.logger=new wp(this.config.system.loggerOptions,Bz,gA);let r={canonicalAuthority:rt.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new oT(this.logger,this.config.managedIdentityId.id,BD,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new EC;let n={protocolMode:Bd.AAD,knownAuthorities:[qhe],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new mA(qhe,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new lT({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new OF(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new iT}async acquireToken(e){if(!e.resource)throw ys(FD.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&ZLt.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(Wu.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===ws.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return OF.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};d();var qz=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>ju.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};d();d();d();d();d();function QF(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(QF,"getRandomIntegerInclusive");function UF(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+QF(0,n/2)}}s(UF,"calculateRetryDelay");d();function lB(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(lB,"isObject");d();function Z2(t){if(lB(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(Z2,"isError");d();d();var XUe=require("node:crypto");var Mge,e9t=typeof((Mge=globalThis?.crypto)===null||Mge===void 0?void 0:Mge.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):XUe.randomUUID;function uB(){return e9t()}s(uB,"randomUUID");d();var Lge,Fge,Oge,Qge,ZUe=typeof window<"u"&&typeof window.document<"u",eqe=typeof self=="object"&&typeof self?.importScripts=="function"&&(((Lge=self.constructor)===null||Lge===void 0?void 0:Lge.name)==="DedicatedWorkerGlobalScope"||((Fge=self.constructor)===null||Fge===void 0?void 0:Fge.name)==="ServiceWorkerGlobalScope"||((Oge=self.constructor)===null||Oge===void 0?void 0:Oge.name)==="SharedWorkerGlobalScope"),tqe=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",rqe=typeof Bun<"u"&&typeof Bun.version<"u",uT=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((Qge=globalThis.process.versions)===null||Qge===void 0)&&Qge.node);var nqe=typeof navigator<"u"&&navigator?.product==="ReactNative";d();function y0(t,e){return Buffer.from(t,e)}s(y0,"stringToUint8Array");d();var Uge="REDACTED",t9t=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],r9t=["api-version"],AA=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=t9t.concat(e),r=r9t.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||lB(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,Uge);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=Uge;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=Uge;return r}};d();d();d();d();var eR=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function Hge(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new eR(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(f=>{l(),o(f)},f=>{l(),a(f)})}catch(f){a(f)}n?.addEventListener("abort",u)})}s(Hge,"createAbortablePromise");d();var a9t="The delay was aborted.";function $ge(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return Hge(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??a9t})}s($ge,"delay");d();function dB(t){if(Z2(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(dB,"getErrorMessage");d();function iqe(t,e){return UF(t,e)}s(iqe,"calculateRetryDelay");function Hz(t){return Z2(t)}s(Hz,"isError");var $z=uT,fB=uT;d();var qF=ri("IdentityUtils"),oqe="1.0";function tR(t,e,r){let n=s(i=>(qF.getToken.info(i),new Xm({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(tR,"ensureValidMsalToken");function Wge(t){let e=t?.authorityHost;return!e&&fB&&(e=process.env.AZURE_AUTHORITY_HOST),e??p6}s(Wge,"getAuthorityHost");function jge(t,e){return e||(e=p6),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(jge,"getAuthority");function sqe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(sqe,"getKnownAuthorities");var Wz=s((t,e=$z?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case Pp.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case Pp.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case Pp.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case Pp.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function jz(t){switch(t){case"error":return Pp.LogLevel.Error;case"info":return Pp.LogLevel.Info;case"verbose":return Pp.LogLevel.Verbose;case"warning":return Pp.LogLevel.Warning;default:return Pp.LogLevel.Info}}s(jz,"getMSALLogLevel");function rR(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return qF.info(xo(t,e.message)),new Qr(e.message);case"device_code_polling_cancelled":return new eR("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":qF.info(xo(t,`Authentication returned errorCode ${n.errorCode}`));break;default:qF.info(xo(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(qF.info(xo(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new Xm({scopes:t,getTokenOptions:r,message:e.message})}s(rR,"handleMsalError");function aqe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(aqe,"publicToMsal");function cqe(t,e){return{authority:e.environment??X6e,homeAccountId:e.homeAccountId,tenantId:e.tenantId||J6e,username:e.username,clientId:t,version:oqe}}s(cqe,"msalToPublic");function Gge(t){let e=JSON.parse(t);if(e.version&&e.version!==oqe)throw Error("Unsupported AuthenticationRecord version");return e}s(Gge,"deserializeAuthenticationRecord");d();d();d();d();d();d();function l9t(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(l9t,"isPrimitiveBody");function u9t(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(u9t,"handleNullableResponseAndWrappableBody");function Vge(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(f=>l[f].serializedName==="");if(c==="Sequence"||u){let f=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(f[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))f[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:f}return u9t({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:l9t(t.parsedBody,c)})}s(Vge,"flattenResponse");var TC={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};d();d();d();d();d();var wC=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};d();d();d();var lqe=require("node:os"),uqe=Ne(require("node:util"),1),dqe=Ne(require("node:process"),1);function fqe(t,...e){dqe.stderr.write(`${uqe.default.format(t,...e)}${lqe.EOL}`)}s(fqe,"log");var pqe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,mqe,zge=[],Kge=[],Vz=[];pqe&&Yge(pqe);var hqe=Object.assign(t=>gqe(t),{enable:Yge,enabled:Jge,disable:d9t,log:fqe});function Yge(t){mqe=t,zge=[],Kge=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Kge.push(new RegExp(`^${n.substr(1)}$`)):zge.push(new RegExp(`^${n}$`));for(let n of Vz)n.enabled=Jge(n.namespace)}s(Yge,"enable");function Jge(t){if(t.endsWith("*"))return!0;for(let e of Kge)if(e.test(t))return!1;for(let e of zge)if(e.test(t))return!0;return!1}s(Jge,"enabled");function d9t(){let t=mqe||"";return Yge(""),t}s(d9t,"disable");function gqe(t){let e=Object.assign(r,{enabled:Jge(t),destroy:f9t,log:hqe.log,namespace:t,extend:p9t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),Vz.push(e),e}s(gqe,"createDebugger");function f9t(){let t=Vz.indexOf(this);return t>=0?(Vz.splice(t,1),!0):!1}s(f9t,"destroy");function p9t(t){let e=gqe(`${this.namespace}:${t}`);return e.log=this.log,e}s(p9t,"extend");var pB=hqe;var Xge=["verbose","info","warning","error"],Aqe={verbose:400,info:300,warning:200,error:100};function yqe(t,e){e.log=(...r)=>{t.log(...r)}}s(yqe,"patchLogMethod");function Cqe(t){return Xge.includes(t)}s(Cqe,"isTypeSpecRuntimeLogLevel");function m9t(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=pB(t.namespace);i.log=(...f)=>{pB.log(...f)};function o(f){if(f&&!Cqe(f))throw new Error(`Unknown log level '${f}'. Acceptable values: ${Xge.join(",")}`);n=f;let p=[];for(let m of e)a(m)&&p.push(m.namespace);pB.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&(Cqe(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${Xge.join(", ")}.`));function a(f){return!!(n&&Aqe[f.level]<=Aqe[n])}s(a,"shouldEnable");function c(f,p){let m=Object.assign(f.extend(p),{level:p});if(yqe(f,m),a(m)){let h=pB.disable();pB.enable(h+","+m.namespace)}return e.add(m),m}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(f){let p=i.extend(f);return yqe(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(m9t,"createLoggerContext");var vqe=m9t({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),h9t=vqe.logger;function $F(t){return vqe.createClientLogger(t)}s($F,"createClientLogger");d();function zz(t){return t.toLowerCase()}s(zz,"normalizeName");function*g9t(t){for(let e of t.values())yield[e.name,e.value]}s(g9t,"headerIterator");var Zge=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(zz(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(zz(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(zz(e))}delete(e){this._headersMap.delete(zz(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return g9t(this._headersMap)}};function Dp(t){return new Zge(t)}s(Dp,"createHttpHeaders");d();d();d();var eAe=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:Dp(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||uB(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function Kz(t){return new eAe(t)}s(Kz,"createPipelineRequest");d();var xqe=new Set(["Deserialize","Serialize","Retry","Sign"]),tAe=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!xqe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!xqe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function f(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(f,"getPhase");for(let g of this._policies){let A=g.policy,y=g.options,E=A.name;if(r.has(E))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:A,dependsOn:new Set,dependants:new Set};y.afterPhase&&(b.afterPhase=f(y.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(E,b),f(y.phase).policies.add(b)}for(let g of this._policies){let{policy:A,options:y}=g,E=A.name,b=r.get(E);if(!b)throw new Error(`Missing node for policy ${E}`);if(y.afterPolicies)for(let S of y.afterPolicies){let R=r.get(S);R&&(b.dependsOn.add(R),R.dependants.add(b))}if(y.beforePolicies)for(let S of y.beforePolicies){let R=r.get(S);R&&(R.dependsOn.add(b),b.dependants.add(R))}}function p(g){g.hasRun=!0;for(let A of g.policies)if(!(A.afterPhase&&(!A.afterPhase.hasRun||A.afterPhase.policies.size))&&A.dependsOn.size===0){e.push(A.policy);for(let y of A.dependants)y.dependsOn.delete(A);r.delete(A.policy.name),g.policies.delete(A)}}s(p,"walkPhase");function m(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(m,"walkPhases");let h=0;for(;r.size>0;){h++;let g=e.length;if(m(),e.length<=g&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function Yz(){return tAe.create()}s(Yz,"createEmptyPipeline");d();d();var Eqe=require("node:util"),bqe=Eqe.inspect.custom;var A9t=new AA,Ku=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,bqe,{value:s(()=>`RestError: ${this.message} 
 ${A9t.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};Ku.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";Ku.PARSE_ERROR="PARSE_ERROR";function Jz(t){return t instanceof Ku?!0:Z2(t)&&t.name==="RestError"}s(Jz,"isRestError");d();d();var mB=Ne(require("node:http"),1),hB=Ne(require("node:https"),1),Zz=Ne(require("node:zlib"),1),Tqe=require("node:stream");d();var ih=$F("ts-http-runtime");var y9t={};function WF(t){return t&&typeof t.pipe=="function"}s(WF,"isReadableStream");function Iqe(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s(Iqe,"isStreamComplete");function wqe(t){return t&&typeof t.byteLength=="number"}s(wqe,"isArrayBuffer");var Xz=class extends Tqe.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},rAe=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new wC("The operation was aborted. Request has already been canceled.");a=s(m=>{m.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let m=new AA;ih.info(`request to '${m.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),f=typeof e.body=="function"?e.body():e.body;if(f&&!e.headers.has("Content-Length")){let m=E9t(f);m!==null&&e.headers.set("Content-Length",m)}let p;try{if(f&&e.onUploadProgress){let E=e.onUploadProgress,b=new Xz(E);b.on("error",S=>{ih.error("Error in upload progress",S)}),WF(f)?f.pipe(b):b.end(f),f=b}let m=await this.makeRequest(e,o,f);c!==void 0&&clearTimeout(c);let h=C9t(m),A={status:(r=m.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return m.resume(),A;p=u?v9t(m,h):m;let y=e.onDownloadProgress;if(y){let E=new Xz(y);E.on("error",b=>{ih.error("Error in download progress",b)}),p.pipe(E),p=E}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(A.status)?A.readableStreamBody=p:A.bodyAsText=await x9t(p),A}finally{if(e.abortSignal&&a){let m=Promise.resolve();WF(f)&&(m=Iqe(f));let h=Promise.resolve();WF(p)&&(h=Iqe(p)),Promise.all([m,h]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{ih.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,f)=>{let p=a?mB.request(l,u):hB.request(l,u);p.once("error",m=>{var h;f(new Ku(m.message,{code:(h=m.code)!==null&&h!==void 0?h:Ku.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let m=new wC("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(m),f(m)}),n&&WF(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):wqe(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(ih.error("Unrecognized body type",n),f(new Ku("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?mB.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new mB.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return hB.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:y9t,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(ih.info("No cached TLS Agent exist, creating a new Agent"),a=new hB.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function C9t(t){let e=Dp();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(C9t,"getResponseHeaders");function v9t(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=Zz.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=Zz.createInflate();return t.pipe(n),n}return t}s(v9t,"getDecodedResponseStream");function x9t(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new Ku(`Error reading response as text: ${i.message}`,{code:Ku.PARSE_ERROR}))})})}s(x9t,"streamToText");function E9t(t){return t?Buffer.isBuffer(t)?t.length:WF(t)?null:wqe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(E9t,"getBodyLength");function Sqe(){return new rAe}s(Sqe,"createNodeHttpClient");function eK(){return Sqe()}s(eK,"createDefaultHttpClient");d();d();d();d();var nAe="logPolicy";function tK(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:ih.info,n=new AA({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:nAe,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(tK,"logPolicy");d();var iAe="redirectPolicy",_qe=["GET","HEAD"];function rK(t={}){let{maxRetries:e=20}=t;return{name:iAe,async sendRequest(r,n){let i=await n(r);return Rqe(n,i,e)}}}s(rK,"redirectPolicy");async function Rqe(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&_qe.includes(i.method)||o===302&&_qe.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return Rqe(t,u,r,n+1)}return e}s(Rqe,"handleRedirect");d();d();d();function kqe(){return"User-Agent"}s(kqe,"getHeaderName");d();function Pqe(){return kqe()}s(Pqe,"getUserAgentHeaderName");var sAn=Pqe();d();var oAe="decompressResponsePolicy";function nK(){return{name:oAe,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(nK,"decompressResponsePolicy");d();d();d();d();var b9t="The operation was aborted.";function Dqe(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new wC(r?.abortErrorMsg?r?.abortErrorMsg:b9t)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(Dqe,"delay");function Bqe(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(Bqe,"parseHeaderValueAsNumber");var sAe="Retry-After",I9t=["retry-after-ms","x-ms-retry-after-ms",sAe];function Nqe(t){if(t&&[429,503].includes(t.status))try{for(let i of I9t){let o=Bqe(t,i);if(o===0||o)return o*(i===sAe?1e3:1)}let e=t.headers.get(sAe);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(Nqe,"getRetryAfterInMs");function Mqe(t){return Number.isFinite(Nqe(t))}s(Mqe,"isThrottlingRetryResponse");function aAe(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=Nqe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(aAe,"throttlingRetryStrategy");var T9t=1e3,w9t=1e3*64;function iK(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:T9t,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:w9t;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=_9t(c),u=l&&t.ignoreSystemErrors,f=S9t(a),p=f&&t.ignoreHttpStatusCodes;return a&&(Mqe(a)||!f)||p||u?{skipStrategy:!0}:c&&!l&&!f?{errorToThrow:c}:UF(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(iK,"exponentialRetryStrategy");function S9t(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(S9t,"isExponentialRetryResponse");function _9t(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(_9t,"isSystemError");d();var R9t=$F("ts-http-runtime retryPolicy"),k9t="retryPolicy";function dT(t,e={maxRetries:3}){let r=e.logger||R9t;return{name:k9t,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(f){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=f,!f||l.name!=="RestError")throw f;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new wC;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let f of t){let p=f.logger||r;p.info(`Retry ${u}: Processing retry strategy ${f.name}.`);let m=f.retry({retryCount:u,response:c,responseError:l});if(m.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:g,redirectTo:A}=m;if(h)throw p.error(`Retry ${u}: Retry strategy ${f.name} throws error:`,h),h;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${f.name} retries after ${g}`),await Dqe(g,void 0,{abortSignal:n.abortSignal});continue e}if(A){p.info(`Retry ${u}: Retry strategy ${f.name} redirects to ${A}`),n.url=A;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(dT,"retryPolicy");var cAe="defaultRetryPolicy";function oK(t={}){var e;return{name:cAe,sendRequest:dT([aAe(),iK(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(oK,"defaultRetryPolicy");d();var lAe="formDataPolicy";function P9t(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(P9t,"formDataToFormDataMap");function sK(){return{name:lAe,async sendRequest(t,e){if(uT&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=P9t(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=D9t(t.formData):await B9t(t.formData,t),t.formData=void 0}return e(t)}}}s(sK,"formDataPolicy");function D9t(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(D9t,"wwwFormUrlEncode");async function B9t(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:Dp({"Content-Disposition":`form-data; name="${i}"`}),body:y0(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=Dp();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(B9t,"prepareFormData");d();var lHe=Ne(rHe(),1),uHe=Ne(oHe(),1);var S6t="HTTPS_PROXY",_6t="HTTP_PROXY",R6t="ALL_PROXY",k6t="NO_PROXY",AAe="proxyPolicy",sHe=[],dHe=!1,P6t=new Map;function pK(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(pK,"getEnvironmentValue");function D6t(){if(!process)return;let t=pK(S6t),e=pK(R6t),r=pK(_6t);return t||e||r}s(D6t,"loadEnvironmentProxyValue");function B6t(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s(B6t,"isBypassed");function N6t(){let t=pK(k6t);return dHe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(N6t,"loadNoProxy");function M6t(){let t=D6t();return t?new URL(t):void 0}s(M6t,"getDefaultProxySettingsInternal");function aHe(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(aHe,"getUrlFromProxySettings");function cHe(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&ih.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new uHe.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new lHe.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s(cHe,"setProxyAgentOnRequest");function mK(t,e){dHe||sHe.push(...N6t());let r=t?aHe(t):M6t(),n={};return{name:AAe,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!B6t(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:sHe,e?.customNoProxyList?void 0:P6t)?cHe(i,n,r):i.proxySettings&&cHe(i,n,aHe(i.proxySettings)),o(i)}}}s(mK,"proxyPolicy");d();var yAe="agentPolicy";function hK(t){return{name:yAe,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(hK,"agentPolicy");d();var CAe="tlsPolicy";function gK(t){return{name:CAe,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(gK,"tlsPolicy");d();d();function AK(t){return typeof t.stream=="function"}s(AK,"isBlob");d();d();function fHe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(fHe,"__values");function RC(t){return this instanceof RC?(this.v=t,this):new RC(t)}s(RC,"__await");function vAe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function c(h,g){n[h]&&(i[h]=function(A){return new Promise(function(y,E){o.push([h,A,y,E])>1||l(h,A)})},g&&(i[h]=g(i[h])))}function l(h,g){try{u(n[h](g))}catch(A){m(o[0][3],A)}}function u(h){h.value instanceof RC?Promise.resolve(h.value.v).then(f,p):m(o[0][2],h)}function f(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(vAe,"__asyncGenerator");function pHe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof fHe=="function"?fHe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(pHe,"__asyncValues");var yK=require("stream");function mHe(){return vAe(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield RC(e.read());if(r)return yield RC(void 0);yield yield RC(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(mHe,"streamAsyncIterator");function L6t(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=mHe.bind(t)),t.values||(t.values=mHe.bind(t))}s(L6t,"makeAsyncIterable");function hHe(t){return t instanceof ReadableStream?(L6t(t),yK.Readable.fromWeb(t)):t}s(hHe,"ensureNodeStream");function F6t(t){return t instanceof Uint8Array?yK.Readable.from(Buffer.from(t)):AK(t)?hHe(t.stream()):hHe(t)}s(F6t,"toStream");async function gHe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(F6t);return yK.Readable.from(function(){return vAe(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,pHe(u)),l;l=yield RC(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield RC(o)}catch(f){n={error:f}}finally{try{!a&&!r&&(i=c.return)&&(yield RC(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(gHe,"concat");function O6t(){return`----AzSDKFormBoundary${uB()}`}s(O6t,"generateBoundary");function Q6t(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(Q6t,"encodeHeaders");function U6t(t){return t instanceof Uint8Array?t.byteLength:AK(t)?t.size===-1?void 0:t.size:void 0}s(U6t,"getLength");function q6t(t){let e=0;for(let r of t){let n=U6t(r);if(n===void 0)return;e+=n}return e}s(q6t,"getTotalLength");async function H6t(t,e,r){let n=[y0(`--${r}`,"utf-8"),...e.flatMap(o=>[y0(`\r
`,"utf-8"),y0(Q6t(o.headers),"utf-8"),y0(`\r
`,"utf-8"),o.body,y0(`\r
--${r}`,"utf-8")]),y0(`--\r
\r
`,"utf-8")],i=q6t(n);i&&t.headers.set("Content-Length",i),t.body=await gHe(n)}s(H6t,"buildRequestBody");var GF="multipartPolicy",$6t=70,W6t=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function j6t(t){if(t.length>$6t)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!W6t.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s(j6t,"assertValidBoundary");function CK(){return{name:GF,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?j6t(n):n=O6t(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await H6t(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(CK,"multipartPolicy");d();d();d();d();d();d();d();d();d();d();d();d();function vK(){return Yz()}s(vK,"createEmptyPipeline");d();d();d();var kC=qI("core-rest-pipeline");d();d();d();d();function EAe(t={}){return tK(Object.assign({logger:kC.info},t))}s(EAe,"logPolicy");d();function bAe(t={}){return rK(t)}s(bAe,"redirectPolicy");d();d();d();var yB=Ne(require("node:os"),1),xK=Ne(require("node:process"),1);function AHe(){return"User-Agent"}s(AHe,"getHeaderName");async function yHe(t){if(xK&&xK.versions){let e=xK.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${yB.arch()}-${yB.type()}-${yB.release()})`)}s(yHe,"setPlatformSpecificData");d();var EK="1.22.0";function eFt(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s(eFt,"getUserAgentString");function CHe(){return AHe()}s(CHe,"getUserAgentHeaderName");async function bK(t){let e=new Map;e.set("core-rest-pipeline",EK),await yHe(e);let r=eFt(e);return t?`${t} ${r}`:r}s(bK,"getUserAgentValue");var vHe=CHe(),xHe="userAgentPolicy";function IAe(t={}){let e=bK(t.userAgentPrefix);return{name:xHe,async sendRequest(r,n){return r.headers.has(vHe)||r.headers.set(vHe,await e),n(r)}}}s(IAe,"userAgentPolicy");d();d();var EHe=Symbol("rawContent");function TAe(t){return typeof t[EHe]=="function"}s(TAe,"hasRawContent");function bHe(t){return TAe(t)?t[EHe]():t}s(bHe,"getRawContent");var IK=GF;function wAe(){let t=CK();return{name:IK,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)TAe(n.body)&&(n.body=bHe(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(wAe,"multipartPolicy");d();function SAe(){return nK()}s(SAe,"decompressResponsePolicy");d();function _Ae(t={}){return oK(t)}s(_Ae,"defaultRetryPolicy");d();function RAe(){return sK()}s(RAe,"formDataPolicy");d();function kAe(t,e){return mK(t,e)}s(kAe,"proxyPolicy");d();var IHe="setClientRequestIdPolicy";function PAe(t="x-ms-client-request-id"){return{name:IHe,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(PAe,"setClientRequestIdPolicy");d();function DAe(t){return hK(t)}s(DAe,"agentPolicy");d();function BAe(t){return gK(t)}s(BAe,"tlsPolicy");d();d();var CB=Ku;function VF(t){return Jz(t)}s(VF,"isRestError");var THe="tracingPolicy";function NAe(t={}){let e=bK(t.userAgentPrefix),r=new AA({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=tFt();return{name:THe,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:f}=(a=rFt(n,i,l))!==null&&a!==void 0?a:{};if(!u||!f)return o(i);try{let p=await n.withContext(f,o,i);return iFt(u,p),p}catch(p){throw nFt(u,p),p}}}}s(NAe,"tracingPolicy");function tFt(){try{return g6({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:EK})}catch(t){kC.warning(`Error when creating the TracingClient: ${dB(t)}`);return}}s(tFt,"tryCreateTracingClient");function rFt(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){kC.warning(`Skipping creating a tracing span due to an error: ${dB(n)}`);return}}s(rFt,"tryCreateSpan");function nFt(t,e){try{t.setStatus({status:"error",error:Hz(e)?e:void 0}),VF(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){kC.warning(`Skipping tracing span processing due to an error: ${dB(r)}`)}}s(nFt,"tryProcessError");function iFt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){kC.warning(`Skipping tracing span processing due to an error: ${dB(r)}`)}}s(iFt,"tryProcessResponse");d();d();function TK(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(TK,"wrapAbortSignalLike");var oFt="wrapAbortSignalLikePolicy";function wHe(){return{name:oFt,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=TK(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(wHe,"wrapAbortSignalLikePolicy");function MAe(t){var e;let r=vK();return fB&&(t.agent&&r.addPolicy(DAe(t.agent)),t.tlsOptions&&r.addPolicy(BAe(t.tlsOptions)),r.addPolicy(kAe(t.proxyOptions)),r.addPolicy(SAe())),r.addPolicy(wHe()),r.addPolicy(RAe(),{beforePolicies:[IK]}),r.addPolicy(IAe(t.userAgentOptions)),r.addPolicy(PAe((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(wAe(),{afterPhase:"Deserialize"}),r.addPolicy(_Ae(t.retryOptions),{phase:"Retry"}),r.addPolicy(NAe(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),fB&&r.addPolicy(bAe(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(EAe(t.loggingOptions),{afterPhase:"Sign"}),r}s(MAe,"createPipelineFromOptions");d();function LAe(){let t=eK();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?TK(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(LAe,"createDefaultHttpClient");d();function pT(t){return Dp(t)}s(pT,"createHttpHeaders");d();function yA(t){return Kz(t)}s(yA,"createPipelineRequest");d();d();d();d();var aFt=qI("core-rest-pipeline retryPolicy");function FAe(t,e={maxRetries:3}){return dT(t,Object.assign({logger:aFt},e))}s(FAe,"retryPolicy");d();d();var cFt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function lFt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await $ge(e),i=await n();return i}s(lFt,"beginRefresh");function OAe(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},cFt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var f;return a.isRefreshing||(r=lFt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(f=n?.expiresOnTimestamp)!==null&&f!==void 0?f:Date.now()).then(m=>(r=null,n=m,i=u.tenantId,n)).catch(m=>{throw r=null,n=null,i=void 0,m})),r}return s(c,"refresh"),async(l,u)=>{let f=!!u.claims,p=i!==u.tenantId;return f&&(n=null),p||f||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(OAe,"createTokenCycler");var kHe="bearerTokenAuthenticationPolicy";async function wK(t,e){try{return[await e(t),void 0]}catch(r){if(VF(r)&&r.response)return[r.response,r];throw r}}s(wK,"trySendRequest");async function uFt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(uFt,"defaultAuthorizeRequest");function SHe(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(SHe,"isChallengeResponse");async function _He(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(_He,"authorizeRequestOnCaeChallenge");function SK(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||kC,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:uFt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?OAe(i):()=>Promise.resolve(null);return{name:kHe,async sendRequest(f,p){if(!f.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:f,getAccessToken:u,logger:c});let m,h,g;if([m,h]=await wK(f,p),SHe(m)){let A=RHe(m.headers.get("WWW-Authenticate"));if(A){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await _He({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},y),g&&([m,h]=await wK(f,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:f,response:m,getAccessToken:u,logger:c}),g&&([m,h]=await wK(f,p)),SHe(m)&&(A=RHe(m.headers.get("WWW-Authenticate")),A))){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await _He({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},y),g&&([m,h]=await wK(f,p))}}if(h)throw h;return m}}}s(SK,"bearerTokenAuthenticationPolicy");function dFt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(dFt,"parseChallenges");function RHe(t){var e;return t?(e=dFt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(RHe,"getCaeChallengeClaims");d();d();d();d();d();d();var DHe=Ne(PHe(),1),QAe=DHe.state;function mT(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=BHe(t,n);!a.propertyFound&&r&&(a=BHe(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=mT(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(mT,"getOperationArgumentValueFromParameter");function BHe(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(BHe,"getPropertyFromParameterPath");var NHe=Symbol.for("@azure/core-client original request");function fFt(t){return NHe in t}s(fFt,"hasOriginalRequest");function lx(t){if(fFt(t))return lx(t[NHe]);let e=QAe.operationRequestMap.get(t);return e||(e={},QAe.operationRequestMap.set(t,e)),e}s(lx,"getOperationRequestInfo");var pFt=["application/json","text/json"],mFt=["application/xml","application/atom+xml"],MHe="deserializationPolicy";function UAe(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:pFt,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:mFt,f=t.parseXML,p=t.serializerOptions,m={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}};return{name:MHe,async sendRequest(h,g){let A=await g(h);return AFt(l,u,A,m,f)}}}s(UAe,"deserializationPolicy");function hFt(t){let e,r=t.request,n=lx(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(hFt,"getOperationResponseMap");function gFt(t){let e=t.request,r=lx(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(gFt,"shouldDeserializeResponse");async function AFt(t,e,r,n,i){let o=await vFt(t,e,r,n,i);if(!gFt(o))return o;let a=lx(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=hFt(o),{error:u,shouldReturnResponse:f}=CFt(o,c,l,n);if(u)throw u;if(f)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===TC.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(m){throw new CB(`Error ${m} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(AFt,"deserializeResponseBody");function yFt(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(yFt,"isOperationSpecEmpty");function CFt(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(yFt(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new CB(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let f=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let m=t.parsedBody,h;if(f){let A=m;if(e.isXML&&f.type.name===TC.Sequence){A=[];let y=f.xmlElementName;typeof m=="object"&&y&&(A=m[y])}h=e.serializer.deserialize(f,A,"error.response.parsedBody",n)}let g=m.error||h||m;u.code=g.code,g.message&&(u.message=g.message),f&&(u.response.parsedBody=h)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(m){u.message=`Error "${m.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(CFt,"handleErrorResponse");async function vFt(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let f=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||CB.PARSE_ERROR;throw new CB(f,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(vFt,"parse");d();d();function LHe(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===TC.Stream&&e.add(Number(r))}return e}s(LHe,"getStreamingResponseStatusCodes");function PC(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(PC,"getPathStringFromParameter");var FHe="serializationPolicy";function qAe(t={}){let e=t.stringifyXML;return{name:FHe,async sendRequest(r,n){let i=lx(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(xFt(r,a,o),EFt(r,a,o,e)),n(r)}}}s(qAe,"serializationPolicy");function xFt(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=mT(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,PC(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||PC(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(xFt,"serializeHeaders");function EFt(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,f={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}},p=f.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=mT(e,r.requestBody);let m=r.requestBody.mapper,{required:h,serializedName:g,xmlName:A,xmlElementName:y,xmlNamespace:E,xmlNamespacePrefix:b,nullable:S}=m,R=m.type.name;try{if(t.body!==void 0&&t.body!==null||S&&t.body===null||h){let B=PC(r.requestBody);t.body=r.serializer.serialize(m,t.body,B,f);let L=R===TC.Stream;if(r.isXML){let O=b?`xmlns:${b}`:"xmlns",Y=bFt(E,O,R,t.body,f);R===TC.Sequence?t.body=n(IFt(Y,y||A||g,O,E),{rootName:A||g,xmlCharKey:p}):L||(t.body=n(Y,{rootName:A||g,xmlCharKey:p}))}else{if(R===TC.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;L||(t.body=JSON.stringify(t.body))}}}catch(B){throw new Error(`Error "${B.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let m of r.formDataParameters){let h=mT(e,m);if(h!=null){let g=m.mapper.serializedName||PC(m);t.formData[g]=r.serializer.serialize(m.mapper,h,PC(m),f)}}}}s(EFt,"serializeRequestBody");function bFt(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o["$"]={[e]:t},o}return n}s(bFt,"getXmlValueWithNamespace");function IFt(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i["$"]={[r]:n},i}s(IFt,"prepareXMLRootList");function HAe(t={}){let e=MAe(t??{});return t.credentialOptions&&e.addPolicy(SK({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(qAe(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(UAe(t.deserializationOptions),{phase:"Deserialize"}),e}s(HAe,"createClientPipeline");d();var $Ae;function OHe(){return $Ae||($Ae=LAe()),$Ae}s(OHe,"getCachedDefaultHttpClient");d();var TFt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function UHe(t,e,r,n){let i=wFt(e,r,n),o=!1,a=QHe(t,i);if(e.path){let u=QHe(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),SFt(u)?(a=u,o=!0):a=_Ft(a,u)}let{queryParams:c,sequenceParams:l}=RFt(e,r,n);return a=PFt(a,c,l,o),a}s(UHe,"getRequestUrl");function QHe(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(QHe,"replaceAll");function wFt(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=mT(e,o,r),c=PC(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s(wFt,"calculateUrlReplacements");function SFt(t){return t.includes("://")}s(SFt,"isAbsoluteUrl");function _Ft(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(_Ft,"appendPath");function RFt(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=mT(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,PC(a));let l=a.collectionFormat?TFt[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||PC(a),c)}}return{queryParams:i,sequenceParams:o}}s(RFt,"calculateQueryParameters");function kFt(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(kFt,"simpleParseQueryParams");function PFt(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=kFt(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let f=new Set(u);o.set(c,Array.from(f))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(PFt,"appendQueryParams");d();var WAe=qI("core-client");var zF=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&WAe.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||OHe(),this.pipeline=e.pipeline||DFt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=UHe(n,r,e,this),o=yA({url:i});o.method=r.httpMethod;let a=lx(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=LHe(r));try{let u=await this.sendRequest(o),f=Vge(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,f),f}catch(u){if(typeof u=="object"&&u?.response){let f=u.response,p=Vge(f,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(f,p,u)}throw u}}};function DFt(t){let e=BFt(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return HAe(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(DFt,"createDefaultPipeline");function BFt(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(BFt,"getCredentialScopes");d();d();d();function qHe(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(qHe,"getIdentityTokenEndpointSuffix");d();var HHe="/.default",$He="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function KF(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(HHe)?e.substr(0,e.lastIndexOf(HHe)):e}s(KF,"mapScopesToResource");function WHe(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(WHe,"parseExpirationTimestamp");function jHe(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(jHe,"parseRefreshTimestamp");var YF="noCorrelationId";function NFt(t){let e=t?.authorityHost;return $z&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??p6}s(NFt,"getIdentityClientAuthorityHost");var hT=class extends zF{static{s(this,"IdentityClient")}authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(e){let r=`azsdk-js-identity/${rV}`,n=e?.userAgentOptions?.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${r}`:`${r}`,i=NFt(e);if(!i.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...e,userAgentOptions:{userAgentPrefix:n},baseUri:i}),this.authorityHost=i,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=e?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...e},e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){Tp.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:WHe(n),refreshAfterTimestamp:jHe(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return Tp.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new UI(r.status,r.bodyAsText);throw Tp.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;Tp.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return ts.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let f=qHe(e),p=yA({url:`${this.authorityHost}/${e}/${f}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:pT({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),m=await this.sendTokenRequest(p);return Tp.info(`IdentityClient: refreshed token for client ID: ${r}`),m}catch(f){if(f.name===iV&&f.errorResponse.error==="interaction_required")return Tp.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw Tp.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${f}`),f}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||YF,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(YF)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){let r=e?.body?.split("&").map(n=>n.split("=")).find(([n])=>n==="client-request-id");return r&&r.length&&r[1]||YF}async sendGetRequestAsync(e,r){let n=yA({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:pT(r?.headers),abortSignal:this.generateAbortSignal(YF)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=yA({url:e,method:"POST",body:r?.body,headers:pT(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));Tp.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){Tp.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};d();var jAe;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(jAe||(jAe={}));function RK(t){let e=t;return e===void 0&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(e=process.env.AZURE_REGIONAL_AUTHORITY_NAME),e===jAe.AutoDiscoverRegion?"AUTO_DISCOVER":e}s(RK,"calculateRegionalAuthority");d();d();function MFt(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(MFt,"createConfigurationErrorMessage");function za(t,e,r=[],n){let i;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?i=t:i=e?.tenantId??t,t&&i!==t&&!r.includes("*")&&!r.some(o=>o.localeCompare(i)===0)){let o=MFt(i);throw n?.info(o),new Qr(o)}return i}s(za,"processMultiTenantRequest");function su(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(xo("",r)),r}}s(su,"checkTenantId");function vB(t,e,r){return e?(su(t,e),e):(r||(r=a2),r!==a2?"common":"organizations")}s(vB,"resolveTenantId");function sc(t){return!t||t.length===0?[]:t.includes("*")?Z6e:t}s(sc,"resolveAdditionallyAllowedTenantIds");var vf=ri("MsalClient");function JFt(t,e,r={}){let n=vB(r.logger??vf,e,t),i=jge(n,Wge(r)),o=new hT({...r.tokenCredentialOptions,authorityHost:i,loggingOptions:r.loggingOptions});return{auth:{clientId:t,authority:i,knownAuthorities:sqe(n,i,r.disableInstanceDiscovery)},system:{networkClient:o,loggerOptions:{loggerCallback:Wz(r.logger??vf),logLevel:jz(lV()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging}}}}s(JFt,"generateMsalConfiguration");function Md(t,e,r={}){let n={msalConfig:JFt(t,e,r),cachedAccount:r.authenticationRecord?aqe(r.authenticationRecord):null,pluginConfiguration:oFe.generatePluginConfiguration(r),logger:r.logger??vf},i=new Map;async function o(O={}){let Y=O.enableCae?"CAE":"default",V=i.get(Y);if(V)return n.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),V;n.logger.getToken.info(`Creating new PublicClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let z=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,V=new oB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await z}}),i.set(Y,V),V}s(o,"getPublicApp");let a=new Map;async function c(O={}){let Y=O.enableCae?"CAE":"default",V=a.get(Y);if(V)return n.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),V;n.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let z=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,V=new aB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await z}}),a.set(Y,V),V}s(c,"getConfidentialApp");async function l(O,Y,V={}){if(n.cachedAccount===null)throw n.logger.getToken.info("No cached account found in local state."),new Xm({scopes:Y});V.claims&&(n.cachedClaims=V.claims);let z={account:n.cachedAccount,scopes:Y,claims:n.cachedClaims};n.pluginConfiguration.broker.isEnabled&&(z.tokenQueryParameters||={},n.pluginConfiguration.broker.enableMsaPassthrough&&(z.tokenQueryParameters.msal_request_type="consumer_passthrough")),V.proofOfPossessionOptions&&(z.shrNonce=V.proofOfPossessionOptions.nonce,z.authenticationScheme="pop",z.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,z.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl),n.logger.getToken.info("Attempting to acquire token silently");try{return await O.acquireTokenSilent(z)}catch(Q){throw rR(Y,Q,V)}}s(l,"getTokenSilent");function u(O){return O?.tenantId?jge(O.tenantId,Wge(r)):n.msalConfig.auth.authority}s(u,"calculateRequestAuthority");async function f(O,Y,V,z){let Q=null;try{Q=await l(O,Y,V)}catch(U){if(U.name!=="AuthenticationRequiredError")throw U;if(V.disableAutomaticAuthentication)throw new Xm({scopes:Y,getTokenOptions:V,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(Q===null)try{Q=await z()}catch(U){throw rR(Y,U,V)}return tR(Y,Q,V),n.cachedAccount=Q?.account??null,n.logger.getToken.info(Dl(Y)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}s(f,"withSilentAuthentication");async function p(O,Y,V={}){n.logger.getToken.info("Attempting to acquire token using client secret"),n.msalConfig.auth.clientSecret=Y;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:RK(),claims:V?.claims});return tR(O,Q,V),n.logger.getToken.info(Dl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw rR(O,Q,V)}}s(p,"getTokenByClientSecret");async function m(O,Y,V={}){n.logger.getToken.info("Attempting to acquire token using client assertion"),n.msalConfig.auth.clientAssertion=Y;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:RK(),claims:V?.claims,clientAssertion:Y});return tR(O,Q,V),n.logger.getToken.info(Dl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw rR(O,Q,V)}}s(m,"getTokenByClientAssertion");async function h(O,Y,V={}){n.logger.getToken.info("Attempting to acquire token using client certificate"),n.msalConfig.auth.clientCertificate=Y;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:RK(),claims:V?.claims});return tR(O,Q,V),n.logger.getToken.info(Dl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw rR(O,Q,V)}}s(h,"getTokenByClientCertificate");async function g(O,Y,V={}){n.logger.getToken.info("Attempting to acquire token using device code");let z=await o(V);return f(z,O,V,()=>{let Q={scopes:O,cancel:V?.abortSignal?.aborted??!1,deviceCodeCallback:Y,authority:u(V),claims:V?.claims},U=z.acquireTokenByDeviceCode(Q);return V.abortSignal&&V.abortSignal.addEventListener("abort",()=>{Q.cancel=!0}),U})}s(g,"getTokenByDeviceCode");async function A(O,Y,V,z={}){n.logger.getToken.info("Attempting to acquire token using username and password");let Q=await o(z);return f(Q,O,z,()=>{let U={scopes:O,username:Y,password:V,authority:u(z),claims:z?.claims};return Q.acquireTokenByUsernamePassword(U)})}s(A,"getTokenByUsernamePassword");function y(){if(n.cachedAccount)return cqe(t,n.cachedAccount)}s(y,"getActiveAccount");async function E(O,Y,V,z,Q={}){n.logger.getToken.info("Attempting to acquire token using authorization code");let U;return z?(n.msalConfig.auth.clientSecret=z,U=await c(Q)):U=await o(Q),f(U,O,Q,()=>U.acquireTokenByCode({scopes:O,redirectUri:Y,code:V,authority:u(Q),claims:Q?.claims}))}s(E,"getTokenByAuthorizationCode");async function b(O,Y,V,z={}){vf.getToken.info("Attempting to acquire token on behalf of another user"),typeof V=="string"?(vf.getToken.info("Using client secret for on behalf of flow"),n.msalConfig.auth.clientSecret=V):typeof V=="function"?(vf.getToken.info("Using client assertion callback for on behalf of flow"),n.msalConfig.auth.clientAssertion=V):(vf.getToken.info("Using client certificate for on behalf of flow"),n.msalConfig.auth.clientCertificate=V);let Q=await c(z);try{let U=await Q.acquireTokenOnBehalfOf({scopes:O,authority:u(z),claims:z.claims,oboAssertion:Y});return tR(O,U,z),vf.getToken.info(Dl(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw rR(O,U,z)}}s(b,"getTokenOnBehalfOf");function S(O,Y){return{openBrowser:s(async V=>{await(await Promise.resolve().then(()=>(NK(),v$e))).default(V,{newInstance:!0})},"openBrowser"),scopes:O,authority:u(Y),claims:Y?.claims,loginHint:Y?.loginHint,errorTemplate:Y?.browserCustomizationOptions?.errorMessage,successTemplate:Y?.browserCustomizationOptions?.successMessage,prompt:Y?.loginHint?"login":"select_account"}}s(S,"createBaseInteractiveRequest");async function R(O,Y,V={}){vf.verbose("Authentication will resume through the broker");let z=await o(V),Q=S(O,V);n.pluginConfiguration.broker.parentWindowHandle?Q.windowHandle=Buffer.from(n.pluginConfiguration.broker.parentWindowHandle):vf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),n.pluginConfiguration.broker.enableMsaPassthrough&&((Q.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),Y?(Q.prompt="none",vf.verbose("Attempting broker authentication using the default broker account")):vf.verbose("Attempting broker authentication without the default broker account"),V.proofOfPossessionOptions&&(Q.shrNonce=V.proofOfPossessionOptions.nonce,Q.authenticationScheme="pop",Q.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,Q.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl);try{return await z.acquireTokenInteractive(Q)}catch(U){if(vf.verbose(`Failed to authenticate through the broker: ${U.message}`),V.disableAutomaticAuthentication)throw new Xm({scopes:O,getTokenOptions:V,message:"Cannot silently authenticate with default broker account."});if(Y)return R(O,!1,V);throw U}}s(R,"getBrokeredTokenInternal");async function B(O,Y,V={}){vf.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${Y}`);let z=await R(O,Y,V);return tR(O,z,V),n.cachedAccount=z?.account??null,n.logger.getToken.info(Dl(O)),{token:z.accessToken,expiresOnTimestamp:z.expiresOn.getTime(),refreshAfterTimestamp:z.refreshOn?.getTime(),tokenType:z.tokenType}}s(B,"getBrokeredToken");async function L(O,Y={}){vf.getToken.info("Attempting to acquire token interactively");let V=await o(Y);return f(V,O,Y,async()=>{let z=S(O,Y);return n.pluginConfiguration.broker.isEnabled?R(O,n.pluginConfiguration.broker.useDefaultBrokerAccount??!1,Y):(Y.proofOfPossessionOptions&&(z.shrNonce=Y.proofOfPossessionOptions.nonce,z.authenticationScheme="pop",z.resourceRequestMethod=Y.proofOfPossessionOptions.resourceRequestMethod,z.resourceRequestUri=Y.proofOfPossessionOptions.resourceRequestUrl),V.acquireTokenInteractive(z))})}return s(L,"getTokenByInteractiveRequest"),{getActiveAccount:y,getBrokeredToken:B,getTokenByClientSecret:p,getTokenByClientAssertion:m,getTokenByClientCertificate:h,getTokenByDeviceCode:g,getTokenByUsernamePassword:A,getTokenByAuthorizationCode:E,getTokenOnBehalfOf:b,getTokenByInteractiveRequest:L}}s(Md,"createMsalClient");var tO=require("node:crypto");var E$e=require("node:fs/promises");var eO="ClientCertificateCredential",x$e=ri(eO),rO=class{static{s(this,"ClientCertificateCredential")}tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${eO}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=sc(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration={...typeof n=="string"?{certificatePath:n}:n};let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${eO}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${eO}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=Md(r,e,{...i,logger:x$e,tokenCredentialOptions:i})}async getToken(e,r={}){return ts.withSpan(`${eO}.getToken`,r,async n=>{n.tenantId=za(this.tenantId,n,this.additionallyAllowedTenantIds,x$e);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){let e=await XFt(this.certificateConfiguration,this.sendCertificateChain??!1),r;return this.certificateConfiguration.certificatePassword!==void 0?r=(0,tO.createPrivateKey)({key:e.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():r=e.certificateContents,{thumbprint:e.thumbprint,thumbprintSha256:e.thumbprintSha256,privateKey:r,x5c:e.x5c}}};async function XFt(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,E$e.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,tO.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),f=(0,tO.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:f,thumbprint:u,x5c:o}}s(XFt,"parseCertificate");d();d();function ch(t){return Array.isArray(t)?t:[t]}s(ch,"ensureScopes");function bB(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(xo(t,r)),r}}s(bB,"ensureValidScopeForDevTimeCreds");function MK(t){return t.replace(/\/.default$/,"")}s(MK,"getScopeResource");var b$e=ri("ClientSecretCredential"),nO=class{static{s(this,"ClientSecretCredential")}tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(e,r,n,i={}){if(!e)throw new Qr("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new Qr("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new Qr("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=sc(i?.additionallyAllowedTenants),this.msalClient=Md(r,e,{...i,logger:b$e,tokenCredentialOptions:i})}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=za(this.tenantId,n,this.additionallyAllowedTenantIds,b$e);let i=ch(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};d();var ZFt=ri("UsernamePasswordCredential"),iO=class{static{s(this,"UsernamePasswordCredential")}tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(e,r,n,i,o={}){if(!e)throw new Qr("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new Qr("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new Qr("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new Qr("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=sc(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=Md(r,this.tenantId,{...o,tokenCredentialOptions:o??{}})}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=za(this.tenantId,n,this.additionallyAllowedTenantIds,ZFt);let i=ch(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var eOt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function tOt(){return(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";")}s(tOt,"getAdditionallyAllowedTenants");var LK="EnvironmentCredential",ux=ri(LK);function rOt(){let t=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),e=t==="true"||t==="1";return ux.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${e}`),e}s(rOt,"getSendCertificateChain");var oO=class{static{s(this,"EnvironmentCredential")}_credential=void 0;constructor(e){let r=uV(eOt).assigned.join(", ");ux.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=tOt(),c=rOt(),l={...e,additionallyAllowedTenantIds:a,sendCertificateChain:c};if(n&&su(ux,n),n&&i&&o){ux.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new nO(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,f=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){ux.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new rO(n,i,{certificatePath:u,certificatePassword:f},l);return}let p=process.env.AZURE_USERNAME,m=process.env.AZURE_PASSWORD;n&&i&&p&&m&&(ux.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),ux.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new iO(n,i,p,m,l))}async getToken(e,r={}){return ts.withSpan(`${LK}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return ux.getToken.info(Dl(e)),i}catch(i){let o=new UI(400,{error:`${LK} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw ux.getToken.info(xo(e,o)),o}throw new Qr(`${LK} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};d();d();var nOt=1e3*64,iOt=3e3;function I$e(t){return FAe([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>{if(r?.status!==404&&r?.status!==410)return{skipStrategy:!0};let n=r?.status===410?Math.max(iOt,t.startDelayInMs):t.startDelayInMs;return iqe(e,{retryDelayInMs:n,maxRetryDelayInMs:nOt})},"retry")}],{maxRetries:t.maxRetries})}s(I$e,"imdsRetryPolicy");d();var dx="ManagedIdentityCredential - IMDS",iR=ri(dx),oOt="http://169.254.169.254",sOt="/metadata/identity/oauth2/token";function aOt(t){if(!KF(t))throw new Error(`${dx}: Multiple scopes are not supported.`);let r=new URL(sOt,process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??oOt),n={Accept:"application/json"};return{url:`${r}`,method:"GET",headers:pT(n)}}s(aOt,"prepareInvalidRequestOptions");var T$e={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=KF(e);if(!i)return iR.info(`${dx}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=aOt(i);return ts.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{o.tracingOptions=a.tracingOptions;let c=yA(o);c.timeout=a.requestOptions?.timeout||1e3,c.allowInsecureConnection=!0;let l;try{iR.info(`${dx}: Pinging the Azure IMDS endpoint`),l=await r.sendRequest(c)}catch(u){return Hz(u)&&iR.verbose(`${dx}: Caught error ${u.name}: ${u.message}`),iR.info(`${dx}: The Azure IMDS endpoint is unavailable`),!1}return l.status===403&&l.bodyAsText?.includes("unreachable")?(iR.info(`${dx}: The Azure IMDS endpoint is unavailable`),iR.info(`${dx}: ${l.bodyAsText}`),!1):(iR.info(`${dx}: The Azure IMDS endpoint is available`),!0)})}};d();d();d();var w$e=ri("ClientAssertionCredential"),IB=class{static{s(this,"ClientAssertionCredential")}msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(e,r,n,i={}){if(!e)throw new Qr("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new Qr("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new Qr("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=sc(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=Md(r,e,{...i,logger:w$e,tokenCredentialOptions:this.options})}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=za(this.tenantId,n,this.additionallyAllowedTenantIds,w$e);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var S$e=require("node:fs/promises");var oR="WorkloadIdentityCredential",cOt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],sO=ri(oR),fx=class{static{s(this,"WorkloadIdentityCredential")}client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(e){let r=uV(cOt).assigned.join(", ");sO.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&su(sO,i),!o)throw new Qr(`${oR}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new Qr(`${oR}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new Qr(`${oR}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);sO.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new IB(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${oR}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw sO.info(n),new Qr(n)}return sO.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new Qr(`${oR}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,S$e.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new Qr(`${oR}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var _$e="ManagedIdentityCredential - Token Exchange",lOt=ri(_$e),dye={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||lOt.info(`${_$e}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new fx({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...i,disableInstanceDiscovery:!0}).getToken(r,e)}};var Mp=ri("ManagedIdentityCredential"),CT=class{static{s(this,"ManagedIdentityCredential")}managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;constructor(e,r){let n;typeof e=="string"?(this.clientId=e,n=r??{}):(this.clientId=e?.clientId,n=e??{}),this.resourceId=n?.resourceId,this.objectId=n?.objectId;let i=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(a=>a.value);if(i.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);n.allowInsecureConnection=!0,n.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=n.retryOptions.maxRetries),this.identityClient=new hT({...n,additionalPolicies:[{policy:I$e(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new cB({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:jz(lV()),piiLoggingEnabled:n.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:Wz(Mp)}}}),this.isAvailableIdentityClient=new hT({...n,retryOptions:{maxRetries:0}});let o=this.managedIdentityApp.getManagedIdentitySource();if(o==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw Mp.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Qr("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(o==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw Mp.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Qr(`ManagedIdentityCredential: ${$He}`);if(Mp.info(`Using ${o} managed identity.`),i.length===1){let{key:a,value:c}=i[0];Mp.info(`${o} with ${a}: ${c}`)}}async getToken(e,r={}){Mp.getToken.info("Using the MSAL provider for Managed Identity.");let n=KF(e);if(!n)throw new Qr(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return ts.withSpan("ManagedIdentityCredential.getToken",r,async()=>{try{let i=await dye.isAvailable(this.clientId),o=this.managedIdentityApp.getManagedIdentitySource(),a=o==="DefaultToImds"||o==="Imds";if(Mp.getToken.info(`MSAL Identity source: ${o}`),i){Mp.getToken.info("Using the token exchange managed identity.");let l=await dye.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(l===null)throw new Qr("Attempted to use the token exchange managed identity, but received a null response.");return l}else if(a&&(Mp.getToken.info("Using the IMDS endpoint to probe for availability."),!await T$e.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new Qr("Attempted to use the IMDS endpoint, but it is not available.");Mp.getToken.info("Calling into MSAL for managed identity token.");let c=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,c,r),Mp.getToken.info(Dl(e)),{expiresOnTimestamp:c.expiresOn.getTime(),token:c.accessToken,refreshAfterTimestamp:c.refreshOn?.getTime(),tokenType:"Bearer"}}catch(i){throw Mp.getToken.error(xo(e,i)),i.name==="AuthenticationRequiredError"?i:uOt(i)?new Qr(`ManagedIdentityCredential: Network unreachable. Message: ${i.message}`,{cause:i}):new Qr(`ManagedIdentityCredential: Authentication failed. Message ${i.message}`,{cause:i})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(Mp.getToken.info(o),new Xm({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function uOt(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(uOt,"isNetworkError");d();var R$e=Ne(require("child_process"),1);var px=ri("AzureDeveloperCliCredential"),k$e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(px.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{let c=["azd",...["auth","token","--output","json",...t.reduce((l,u)=>l.concat("--scope",u),[]),...n]].join(" ");R$e.default.exec(c,{cwd:k$e.getSafeWorkingDir(),timeout:r},(l,u,f)=>{i({stdout:u,stderr:f,error:l})})}catch(a){o(a)}})}},aO=class{static{s(this,"AzureDeveloperCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(su(px,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=za(this.tenantId,r,this.additionallyAllowedTenantIds);n&&su(px,n);let i;return typeof e=="string"?i=[e]:i=e,px.getToken.info(`Using the scopes ${e}`),ts.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{i.forEach(l=>{bB(l,px)});let o=await k$e.getAzdAccessToken(i,n,this.timeout),a=o.stderr?.match("not logged in, run `azd login` to login")||o.stderr?.match("not logged in, run `azd auth login` to login");if(o.stderr?.match("azd:(.*)not found")||o.stderr?.startsWith("'azd' is not recognized")||o.error&&o.error.code==="ENOENT"){let l=new Qr("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw px.getToken.info(xo(e,l)),l}if(a){let l=new Qr("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw px.getToken.info(xo(e,l)),l}try{let l=JSON.parse(o.stdout);return px.getToken.info(Dl(e)),{token:l.token,expiresOnTimestamp:new Date(l.expiresOn).getTime(),tokenType:"Bearer"}}catch(l){throw o.stderr?new Qr(o.stderr):l}}catch(o){let a=o.name==="CredentialUnavailableError"?o:new Qr(o.message||"Unknown error while trying to retrieve the access token");throw px.getToken.info(xo(e,a)),a}})}};d();var P$e=Ne(require("child_process"),1);d();function fye(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(xo("",r)),r}}s(fye,"checkSubscription");var lh=ri("AzureCliCredential"),D$e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(lh.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{let u=["az",...["account","get-access-token","--output","json","--resource",t,...i,...o]].join(" ");P$e.default.exec(u,{cwd:D$e.getSafeWorkingDir(),timeout:n},(f,p,m)=>{a({stdout:p,stderr:m,error:f})})}catch(l){c(l)}})}},cO=class{static{s(this,"AzureCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(e){e?.tenantId&&(su(lh,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(fye(lh,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=za(this.tenantId,r,this.additionallyAllowedTenantIds);n&&su(lh,n),this.subscription&&fye(lh,this.subscription);let i=typeof e=="string"?e:e[0];return lh.getToken.info(`Using the scope ${i}`),ts.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{bB(i,lh);let o=MK(i),a=await D$e.getAzureCliAccessToken(o,n,this.subscription,this.timeout),c=a.stderr?.match("(.*)az login --scope(.*)"),l=a.stderr?.match("(.*)az login(.*)")&&!c;if(a.stderr?.match("az:(.*)not found")||a.stderr?.startsWith("'az' is not recognized")){let f=new Qr("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw lh.getToken.info(xo(e,f)),f}if(l){let f=new Qr("Please run 'az login' from a command prompt to authenticate before using this credential.");throw lh.getToken.info(xo(e,f)),f}try{let f=a.stdout,p=this.parseRawResponse(f);return lh.getToken.info(Dl(e)),p}catch(f){throw a.stderr?new Qr(a.stderr):f}}catch(o){let a=o.name==="CredentialUnavailableError"?o:new Qr(o.message||"Unknown error while trying to retrieve the access token");throw lh.getToken.info(xo(e,a)),a}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return lh.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new Qr(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};d();d();var B$e=Ne(require("node:child_process"),1),N$e={execFile(t,e,r){return new Promise((n,i)=>{let o=[...e],a=[t,...o].join(" ");B$e.default.exec(a,r,(c,l,u)=>{Buffer.isBuffer(l)&&(l=l.toString("utf8")),Buffer.isBuffer(u)&&(u=u.toString("utf8")),u||c?i(u?new Error(u):c):n(l)})})}};var mx=ri("AzurePowerShellCredential"),L$e=process.platform==="win32";function F$e(t){return L$e?`${t}.exe`:t}s(F$e,"formatCommand");async function M$e(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await N$e.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(M$e,"runCommands");var O$e={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},pye={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},dOt=s(t=>t.message.match(`(.*)${O$e.login}(.*)`),"isLoginError"),fOt=s(t=>t.message.match(O$e.installed),"isNotInstalledError"),mye=[F$e("pwsh")];L$e&&mye.push(F$e("powershell"));var lO=class{static{s(this,"AzurePowerShellCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(su(mx,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...mye]){try{await M$e([[i,"/?"]],n)}catch{mye.shift();continue}let a=(await M$e([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return pOt(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=za(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&su(mx,n);try{bB(i,mx),mx.getToken.info(`Using the scope ${i}`);let o=MK(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return mx.getToken.info(Dl(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(fOt(o)){let c=new Qr(pye.installed);throw mx.getToken.info(xo(i,c)),c}else if(dOt(o)){let c=new Qr(pye.login);throw mx.getToken.info(xo(i,c)),c}let a=new Qr(`${o}. ${pye.troubleshoot}`);throw mx.getToken.info(xo(i,a)),a}})}};async function pOt(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&mx.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(pOt,"parseJsonToken");d();var Q$e=require("node:fs/promises");var mOt="common",hOt="aebc6443-996d-45c2-90f0-388ff96faa56",hye=ri("VisualStudioCodeCredential"),gOt={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function AOt(t){let e=gOt[t];if(e)throw new Qr(e)}s(AOt,"checkUnsupportedTenant");var uO=class{static{s(this,"VisualStudioCodeCredential")}tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(e){this.options=e||{},e&&e.tenantId?(su(hye,e.tenantId),this.tenantId=e.tenantId):this.tenantId=mOt,this.additionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants),AOt(this.tenantId)}async prepare(e){let r=za(this.tenantId,this.options,this.additionallyAllowedTenantIds,hye)||this.tenantId;if(!iFe()||!nV)throw new Qr("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let n=await this.loadAuthRecord(nV,e);this.msalClient=Md(hOt,r,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:n})}preparePromise;prepareOnce(e){return this.preparePromise||(this.preparePromise=this.prepare(e)),this.preparePromise}async getToken(e,r){let n=ch(e);if(await this.prepareOnce(n),!this.msalClient)throw new Qr("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(n,r||{})}async loadAuthRecord(e,r){try{let n=await(0,Q$e.readFile)(e,{encoding:"utf8"});return Gge(n)}catch(n){throw hye.getToken.info(xo(r,n)),new Qr("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}};d();var FK=ri("BrokerCredential"),OK=class{static{s(this,"BrokerCredential")}brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(e){this.brokerTenantId=vB(FK,e.tenantId),this.brokerAdditionallyAllowedTenantIds=sc(e?.additionallyAllowedTenants);let r={...e,tokenCredentialOptions:e,logger:FK,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=Md(a2,this.brokerTenantId,r)}async getToken(e,r={}){return ts.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=za(this.brokerTenantId,n,this.brokerAdditionallyAllowedTenantIds,FK);let i=ch(e);try{return this.brokerMsalClient.getBrokeredToken(i,!0,{...n,disableAutomaticAuthentication:!0})}catch(o){throw FK.getToken.info(xo(i,o)),new Qr("Failed to acquire token using broker authentication",{cause:o})}})}};function U$e(t={}){return new OK(t)}s(U$e,"createDefaultBrokerCredential");function gye(t={}){return new uO(t)}s(gye,"createDefaultVisualStudioCodeCredential");function Aye(t={}){t.retryOptions??={maxRetries:5,retryDelayInMs:800};let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=t?.managedIdentityResourceId,i=process.env.AZURE_FEDERATED_TOKEN_FILE,o=t?.tenantId??process.env.AZURE_TENANT_ID;if(n){let a={...t,resourceId:n};return new CT(a)}if(i&&r){let a={...t,tenantId:o};return new CT(r,a)}if(e){let a={...t,clientId:e};return new CT(a)}return new CT(t)}s(Aye,"createDefaultManagedIdentityCredential");function yye(t){let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=process.env.AZURE_FEDERATED_TOKEN_FILE,i=t?.tenantId??process.env.AZURE_TENANT_ID;if(n&&r){let o={...t,tenantId:i,clientId:r,tokenFilePath:n};return new fx(o)}if(i){let o={...t,tenantId:i};return new fx(o)}return new fx(t)}s(yye,"createDefaultWorkloadIdentityCredential");function Cye(t={}){return new aO(t)}s(Cye,"createDefaultAzureDeveloperCliCredential");function vye(t={}){return new cO(t)}s(vye,"createDefaultAzureCliCredential");function xye(t={}){return new lO(t)}s(xye,"createDefaultAzurePowershellCredential");function Eye(t={}){return new oO(t)}s(Eye,"createDefaultEnvironmentCredential");var bye=ri("DefaultAzureCredential"),Iye=class{static{s(this,"UnavailableDefaultCredential")}credentialUnavailableErrorMessage;credentialName;constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return bye.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},TB=class extends A6{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[gye,vye,xye,Cye,U$e],i=[Eye,yye,Aye],o=[],a="EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential";if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;case"environmentcredential":o=[Eye];break;case"workloadidentitycredential":o=[yye];break;case"managedidentitycredential":o=[Aye];break;case"visualstudiocodecredential":o=[gye];break;case"azureclicredential":o=[vye];break;case"azurepowershellcredential":o=[xye];break;case"azuredeveloperclicredential":o=[Cye];break;default:{let l=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - ${a}.`;throw bye.warning(l),new Error(l)}}else o=[...i,...n];let c=o.map(l=>{try{return l(e)}catch(u){return bye.warning(`Skipped ${l.name} because of an error creating the credential: ${u}`),new Iye(l.name,u.message)}});super(...c)}};d();var DRn=ri("InteractiveBrowserCredential");d();var HRn=ri("DeviceCodeCredential");d();var yOt="AzurePipelinesCredential",XRn=ri(yOt);d();var ckn=ri("AuthorizationCodeCredential");d();var COt="OnBehalfOfCredential",ykn=ri(COt);d();function vOt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(vOt,"getIntegrationId");function DC(t){let e={...vp(t),"X-GitHub-Api-Version":wB},r=vOt(t.get(hn));return r&&(e["Copilot-Integration-Id"]=r),l6()&&(e["ces-proxy-target"]=o2.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(DC,"getCapiHeaders");function QK(t,e,...r){if(l6()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return Jm(t,e,"api",...r)}s(QK,"getCapiUrl");async function sR(t,e,r){r??=await t.get($r).getToken();let n=QK(t,r,e),i=r.token;l6()&&(i=await H$e());let o={Authorization:`Bearer ${i}`,...DC(t)};return await t.get(Hr).fetch(new URL(n).href,{method:"GET",headers:o})}s(sR,"fetchCapiUrl");async function q$e(t,e,r){let n=await t.get($r).getToken(),i=QK(t,n,e),o=n.token;l6()&&(o=await H$e());let a={Authorization:`Bearer ${o}`,...DC(t)};return await t.get(Hr).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(q$e,"postCapiUrl");async function H$e(){let e=await new TB().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(H$e,"getMsBenchToken");d();var $$e=600*1e3,Wr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",Gpt5:"gpt-5",CopilotBase:"copilot-base",BYOK:"byok",Unknown:"unknown"},W$e=new Set([Wr.O1Ga,Wr.O3Mini,Wr.O1Mini,Wr.Gemini20Pro,Wr.Gemini20Flash]);function v0(t){switch(t){case"edits":case"user":case"inline":return[Wr.Gpt4o,Wr.Gpt4turbo,Wr.Gpt4,Wr.O1Mini,Wr.O1Ga,Wr.Claude35Sonnet,Wr.O3Mini,Wr.Gemini20Flash,Wr.Claude37Sonnet,Wr.Claude37SonnetThought,Wr.Gpt45,Wr.Gpt41,Wr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt35turbo,Wr.Gpt41,Wr.CopilotBase];case"gitCommit":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt4,Wr.Gpt41,Wr.CopilotBase];case"codeReview":return[Wr.Gpt4,Wr.Gpt4o,Wr.Gpt41,Wr.CopilotBase];case"nesStubs":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt41,Wr.CopilotBase]}}s(v0,"getSupportedModelFamiliesForPrompt");var HK={textEmbedding3Small:"text-embedding-3-small"},xOt=x.Object({type:x.Union([x.Literal("chat"),x.Literal("embeddings"),x.Literal("completion")]),tokenizer:x.String(),family:x.String(),object:x.String(),supports:x.Optional(x.Object({tool_calls:x.Optional(x.Boolean()),parallel_tool_calls:x.Optional(x.Boolean()),streaming:x.Optional(x.Boolean()),vision:x.Optional(x.Boolean())})),limits:x.Optional(x.Object({max_inputs:x.Optional(x.Number()),max_prompt_tokens:x.Optional(x.Number()),max_output_tokens:x.Optional(x.Number()),max_context_window_tokens:x.Optional(x.Number())}))}),EOt=x.Object({id:x.String(),name:x.String(),version:x.String(),model_picker_enabled:x.Boolean(),is_chat_default:x.Optional(x.Boolean()),is_chat_fallback:x.Optional(x.Boolean()),capabilities:xOt,billing:x.Optional(x.Object({is_premium:x.Optional(x.Boolean()),multiplier:x.Optional(x.Number())})),object:x.String(),preview:x.Optional(x.Boolean()),isExperimental:x.Optional(x.Boolean()),policy:x.Optional(x.Object({state:x.String(),terms:x.String()}))}),j$e=x.Object({data:x.Array(EOt)}),xf=class{static{s(this,"ModelMetadataProvider")}},UK=class extends xf{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;Ps(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await sR(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){un.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw un.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new mC(r)}await this.processModels(r)}async fetchModel(r){let n=await sR(this.ctx,`/models/${r}`);if(!n.ok){un.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await q$e(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){un.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>$$e}},qK=class extends xf{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Mt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<$$e)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};d();function G$e(t){let e=zi(t,Ht.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(G$e,"getUserSelectedModelConfiguration");d();d();d();var SB=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};d();var V$e=Ne(require("node:fs/promises")),$K=Ne(require("node:path"));async function WK(t){return await V$e.readFile(Tye(t))}s(WK,"readFile");function Tye(t){return $K.default.resolve($K.default.extname(__filename)!==".ts"?__dirname:$K.default.resolve(__dirname,"../../dist"),t)}s(Tye,"locateFile");var _B=Ne(aWe());var YK=new Map;function Ni(t="o200k_base"){let e=YK.get(t);return e!==void 0||(e=YK.get("o200k_base"),e!==void 0)?e:new xT}s(Ni,"getTokenizer");async function lWe(t="o200k_base"){return await aR,Ni(t)}s(lWe,"getTokenizerAsync");async function OOt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await WK(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(OOt,"parseTikTokenNoIndex");var Lye=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,_B.createTokenizer)(await OOt(`resources/${e}.tiktoken.noindex`),(0,_B.getSpecialTokensByEncoder)(e),(0,_B.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new SB("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},Fye=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},QOt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},Mye=4,xT=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,Mye)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-Mye),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-Mye)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?QOt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function cWe(t){try{let e=await Lye.create(t);YK.set(t,e)}catch{}}s(cWe,"setTokenizer");var aR=(async()=>{YK.set("mock",new Fye),await Promise.all([cWe("cl100k_base"),cWe("o200k_base")])})();d();d();var UOt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},dWe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Oye,JK,fWe,Qye=class extends Dn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),Oye.add(this),JK.set(this,void 0),UOt(this,JK,e,"f"),this.error=r}Errors(){return new SI(dWe(this,Oye,"m",fWe).call(this))}};JK=new WeakMap,Oye=new WeakSet,fWe=s(function*(){this.error&&(yield this.error),yield*dWe(this,JK,"f")},"_AssertError_Iterator");function uWe(t,e,r){if(!ki(t,e,r))throw new Qye(cC(t,e,r))}s(uWe,"AssertValue");function XK(...t){return t.length===3?uWe(t[0],t[1],t[2]):uWe(t[0],[],t[1])}s(XK,"Assert");d();d();d();function qOt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Ro(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Ro(t[r]);return e}s(qOt,"FromObject");function HOt(t){return t.map(e=>Ro(e))}s(HOt,"FromArray");function $Ot(t){return t.slice()}s($Ot,"FromTypedArray");function WOt(t){return new Map(Ro([...t.entries()]))}s(WOt,"FromMap");function jOt(t){return new Set(Ro([...t.entries()]))}s(jOt,"FromSet");function GOt(t){return new Date(t.toISOString())}s(GOt,"FromDate");function Ro(t){if(Pn(t))return HOt(t);if(cf(t))return GOt(t);if(Um(t))return $Ot(t);if(o3e(t))return WOt(t);if(s3e(t))return jOt(t);if(Si(t))return qOt(t);if(dp(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Ro,"Clone");var Lp=class extends Dn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function ko(t){return yI(t)?t():Ro(t)}s(ko,"FromDefault");function VOt(t,e){return kn(t,"default")?ko(t.default):{}}s(VOt,"FromAny");function zOt(t,e){return{}}s(zOt,"FromArgument");function KOt(t,e){if(t.uniqueItems===!0&&!kn(t,"default"))throw new Lp(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!kn(t,"default"))throw new Lp(t,"Array with the contains constraint requires a default value");return"default"in t?ko(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>x0(t.items,e)):[]}s(KOt,"FromArray");function YOt(t,e){return kn(t,"default")?ko(t.default):async function*(){}()}s(YOt,"FromAsyncIterator");function JOt(t,e){return kn(t,"default")?ko(t.default):BigInt(0)}s(JOt,"FromBigInt");function XOt(t,e){return kn(t,"default")?ko(t.default):!1}s(XOt,"FromBoolean");function ZOt(t,e){if(kn(t,"default"))return ko(t.default);{let r=x0(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(ZOt,"FromConstructor");function e7t(t,e){return kn(t,"default")?ko(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(e7t,"FromDate");function t7t(t,e){return kn(t,"default")?ko(t.default):()=>x0(t.returns,e)}s(t7t,"FromFunction");function r7t(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return x0(n,[...e,...r])}s(r7t,"FromImport");function n7t(t,e){return kn(t,"default")?ko(t.default):t.minimum!==void 0?t.minimum:0}s(n7t,"FromInteger");function i7t(t,e){if(kn(t,"default"))return ko(t.default);{let r=t.allOf.reduce((n,i)=>{let o=x0(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!ki(t,e,r))throw new Lp(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(i7t,"FromIntersect");function o7t(t,e){return kn(t,"default")?ko(t.default):function*(){}()}s(o7t,"FromIterator");function s7t(t,e){return kn(t,"default")?ko(t.default):t.const}s(s7t,"FromLiteral");function a7t(t,e){if(kn(t,"default"))return ko(t.default);throw new Lp(t,"Never types cannot be created. Consider using a default value.")}s(a7t,"FromNever");function c7t(t,e){if(kn(t,"default"))return ko(t.default);throw new Lp(t,"Not types must have a default value")}s(c7t,"FromNot");function l7t(t,e){return kn(t,"default")?ko(t.default):null}s(l7t,"FromNull");function u7t(t,e){return kn(t,"default")?ko(t.default):t.minimum!==void 0?t.minimum:0}s(u7t,"FromNumber");function d7t(t,e){if(kn(t,"default"))return ko(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=x0(o,e));return n}}s(d7t,"FromObject");function f7t(t,e){return kn(t,"default")?ko(t.default):Promise.resolve(x0(t.item,e))}s(f7t,"FromPromise");function p7t(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(kn(t,"default"))return ko(t.default);if(r===oC||r===iC)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=x0(n,e);return o}}s(p7t,"FromRecord");function m7t(t,e){return kn(t,"default")?ko(t.default):x0(wo(t,e),e)}s(m7t,"FromRef");function h7t(t,e){if(kn(t,"default"))return ko(t.default);throw new Lp(t,"RegExp types cannot be created. Consider using a default value.")}s(h7t,"FromRegExp");function g7t(t,e){if(t.pattern!==void 0){if(kn(t,"default"))return ko(t.default);throw new Lp(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(kn(t,"default"))return ko(t.default);throw new Lp(t,"String types with formats must specify a default value")}else return kn(t,"default")?ko(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(g7t,"FromString");function A7t(t,e){return kn(t,"default")?ko(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(A7t,"FromSymbol");function y7t(t,e){if(kn(t,"default"))return ko(t.default);if(!Tj(t))throw new Lp(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return Q4(t)[0]}s(y7t,"FromTemplateLiteral");function C7t(t,e){if(pWe++>S7t)throw new Lp(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return kn(t,"default")?ko(t.default):x0(wo(t,e),e)}s(C7t,"FromThis");function v7t(t,e){return kn(t,"default")?ko(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>x0(t.items[n],e))}s(v7t,"FromTuple");function x7t(t,e){if(kn(t,"default"))return ko(t.default)}s(x7t,"FromUndefined");function E7t(t,e){if(kn(t,"default"))return ko(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return x0(t.anyOf[0],e)}s(E7t,"FromUnion");function b7t(t,e){return kn(t,"default")?ko(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(b7t,"FromUint8Array");function I7t(t,e){return kn(t,"default")?ko(t.default):{}}s(I7t,"FromUnknown");function T7t(t,e){if(kn(t,"default"))return ko(t.default)}s(T7t,"FromVoid");function w7t(t,e){if(kn(t,"default"))return ko(t.default);throw new Error("User defined types must specify a default value")}s(w7t,"FromKind");function x0(t,e){let r=Yl(t,e),n=t;switch(n[ot]){case"Any":return VOt(n,r);case"Argument":return zOt(n,r);case"Array":return KOt(n,r);case"AsyncIterator":return YOt(n,r);case"BigInt":return JOt(n,r);case"Boolean":return XOt(n,r);case"Constructor":return ZOt(n,r);case"Date":return e7t(n,r);case"Function":return t7t(n,r);case"Import":return r7t(n,r);case"Integer":return n7t(n,r);case"Intersect":return i7t(n,r);case"Iterator":return o7t(n,r);case"Literal":return s7t(n,r);case"Never":return a7t(n,r);case"Not":return c7t(n,r);case"Null":return l7t(n,r);case"Number":return u7t(n,r);case"Object":return d7t(n,r);case"Promise":return f7t(n,r);case"Record":return p7t(n,r);case"Ref":return m7t(n,r);case"RegExp":return h7t(n,r);case"String":return g7t(n,r);case"Symbol":return A7t(n,r);case"TemplateLiteral":return y7t(n,r);case"This":return C7t(n,r);case"Tuple":return v7t(n,r);case"Undefined":return x7t(n,r);case"Union":return E7t(n,r);case"Uint8Array":return b7t(n,r);case"Unknown":return I7t(n,r);case"Void":return T7t(n,r);default:if(!lf.Has(n[ot]))throw new Lp(n,"Unknown type");return w7t(n,r)}}s(x0,"Visit");var S7t=512,pWe=0;function uh(...t){return pWe=0,t.length===2?x0(t[0],t[1]):x0(t[0],[])}s(uh,"Create");var ZK=class extends Dn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function _7t(t,e,r){if(t[ot]==="Object"&&typeof r=="object"&&!Nv(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,f])=>{let p=f[ot]==="Literal"&&f.const===r[u]?c:0,m=ki(f,e,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+m+h)},0)}else return ki(t,e,r)?1:0}s(_7t,"ScoreUnion");function R7t(t,e,r){let n=t.anyOf.map(a=>wo(a,e)),[i,o]=[n[0],0];for(let a of n){let c=_7t(a,e,r);c>o&&(i=a,o=c)}return i}s(R7t,"SelectUnion");function k7t(t,e,r){if("default"in t)return typeof r=="function"?t.default:Ro(t.default);{let n=R7t(t,e,r);return fO(n,e,r)}}s(k7t,"CastUnion");function P7t(t,e,r){return ki(t,e,r)?Ro(r):uh(t,e)}s(P7t,"DefaultClone");function D7t(t,e,r){return ki(t,e,r)?r:uh(t,e)}s(D7t,"Default");function B7t(t,e,r){if(ki(t,e,r))return Ro(r);let n=Pn(r)?Ro(r):uh(t,e),i=cn(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(cn(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>CA(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!ki(t,e,c))throw new ZK(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(B7t,"FromArray");function N7t(t,e,r){if(ki(t,e,r))return uh(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=CA(a,e,r.prototype[o]));return i}s(N7t,"FromConstructor");function M7t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return CA(i,[...e,...n],r)}s(M7t,"FromImport");function L7t(t,e,r){let n=uh(t,e),i=Si(n)&&Si(r)?{...n,...r}:r;return ki(t,e,i)?i:uh(t,e)}s(L7t,"FromIntersect");function F7t(t,e,r){throw new ZK(t,"Never types cannot be cast")}s(F7t,"FromNever");function O7t(t,e,r){if(ki(t,e,r))return r;if(r===null||typeof r!="object")return uh(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=CA(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=CA(t.additionalProperties,e,r[a]))}return i}s(O7t,"FromObject");function Q7t(t,e,r){if(ki(t,e,r))return Ro(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return uh(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=CA(i,e,c);return o}s(Q7t,"FromRecord");function U7t(t,e,r){return CA(wo(t,e),e,r)}s(U7t,"FromRef");function q7t(t,e,r){return CA(wo(t,e),e,r)}s(q7t,"FromThis");function H7t(t,e,r){return ki(t,e,r)?Ro(r):Pn(r)?t.items===void 0?[]:t.items.map((n,i)=>CA(n,e,r[i])):uh(t,e)}s(H7t,"FromTuple");function $7t(t,e,r){return ki(t,e,r)?Ro(r):k7t(t,e,r)}s($7t,"FromUnion");function CA(t,e,r){let n=yo(t.$id)?Yl(t,e):e,i=t;switch(t[ot]){case"Array":return B7t(i,n,r);case"Constructor":return N7t(i,n,r);case"Import":return M7t(i,n,r);case"Intersect":return L7t(i,n,r);case"Never":return F7t(i,n,r);case"Object":return O7t(i,n,r);case"Record":return Q7t(i,n,r);case"Ref":return U7t(i,n,r);case"This":return q7t(i,n,r);case"Tuple":return H7t(i,n,r);case"Union":return $7t(i,n,r);case"Date":case"Symbol":case"Uint8Array":return P7t(t,e,r);default:return D7t(i,n,r)}}s(CA,"Visit");function fO(...t){return t.length===3?CA(t[0],t[1],t[2]):CA(t[0],[],t[1])}s(fO,"Cast");d();function W7t(t){return vI(t)&&t[ot]!=="Unsafe"}s(W7t,"IsCheckable");function j7t(t,e,r){return Pn(r)?r.map(n=>E0(t.items,e,n)):r}s(j7t,"FromArray");function G7t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return E0(i,[...e,...n],r)}s(G7t,"FromImport");function V7t(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>E0(c,e,Ro(r))).reduce((c,l)=>Si(l)?{...c,...l}:l,{});if(!Si(r)||!Si(o)||!vI(n))return o;let a=n0(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||ki(n,e,r[c])&&(o[c]=E0(n,e,r[c]));return o}s(V7t,"FromIntersect");function z7t(t,e,r){if(!Si(r)||Pn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(kn(t.properties,i)){r[i]=E0(t.properties[i],e,r[i]);continue}if(vI(n)&&ki(n,e,r[i])){r[i]=E0(n,e,r[i]);continue}delete r[i]}return r}s(z7t,"FromObject");function K7t(t,e,r){if(!Si(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=E0(a,e,r[l]);continue}if(vI(n)&&ki(n,e,r[l])){r[l]=E0(n,e,r[l]);continue}delete r[l]}return r}s(K7t,"FromRecord");function Y7t(t,e,r){return E0(wo(t,e),e,r)}s(Y7t,"FromRef");function J7t(t,e,r){return E0(wo(t,e),e,r)}s(J7t,"FromThis");function X7t(t,e,r){if(!Pn(r))return r;if(Ks(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=E0(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(X7t,"FromTuple");function Z7t(t,e,r){for(let n of t.anyOf)if(W7t(n)&&ki(n,e,r))return E0(n,e,r);return r}s(Z7t,"FromUnion");function E0(t,e,r){let n=yo(t.$id)?Yl(t,e):e,i=t;switch(i[ot]){case"Array":return j7t(i,n,r);case"Import":return G7t(i,n,r);case"Intersect":return V7t(i,n,r);case"Object":return z7t(i,n,r);case"Record":return K7t(i,n,r);case"Ref":return Y7t(i,n,r);case"This":return J7t(i,n,r);case"Tuple":return X7t(i,n,r);case"Union":return Z7t(i,n,r);default:return r}}s(E0,"Visit");function eY(...t){return t.length===3?E0(t[0],t[1],t[2]):E0(t[0],[],t[1])}s(eY,"Clean");d();function tY(t){return yo(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(tY,"IsStringNumeric");function eQt(t){return Fu(t)||nC(t)||cn(t)}s(eQt,"IsValueToString");function pO(t){return t===!0||cn(t)&&t===1||Fu(t)&&t===BigInt("1")||yo(t)&&(t.toLowerCase()==="true"||t==="1")}s(pO,"IsValueTrue");function mO(t){return t===!1||cn(t)&&(t===0||Object.is(t,-0))||Fu(t)&&t===BigInt("0")||yo(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(mO,"IsValueFalse");function tQt(t){return yo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(tQt,"IsTimeStringWithTimeZone");function rQt(t){return yo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(rQt,"IsTimeStringWithoutTimeZone");function nQt(t){return yo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(nQt,"IsDateTimeStringWithTimeZone");function iQt(t){return yo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(iQt,"IsDateTimeStringWithoutTimeZone");function oQt(t){return yo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(oQt,"IsDateString");function sQt(t,e){let r=hWe(t);return r===e?r:t}s(sQt,"TryConvertLiteralString");function aQt(t,e){let r=gWe(t);return r===e?r:t}s(aQt,"TryConvertLiteralNumber");function cQt(t,e){let r=mWe(t);return r===e?r:t}s(cQt,"TryConvertLiteralBoolean");function lQt(t,e){return yo(t.const)?sQt(e,t.const):cn(t.const)?aQt(e,t.const):nC(t.const)?cQt(e,t.const):e}s(lQt,"TryConvertLiteral");function mWe(t){return pO(t)?!0:mO(t)?!1:t}s(mWe,"TryConvertBoolean");function uQt(t){let e=s(r=>r.split(".")[0],"truncateInteger");return tY(t)?BigInt(e(t)):cn(t)?BigInt(Math.trunc(t)):mO(t)?BigInt(0):pO(t)?BigInt(1):t}s(uQt,"TryConvertBigInt");function hWe(t){return Mv(t)&&t.description!==void 0?t.description.toString():eQt(t)?t.toString():t}s(hWe,"TryConvertString");function gWe(t){return tY(t)?parseFloat(t):pO(t)?1:mO(t)?0:t}s(gWe,"TryConvertNumber");function dQt(t){return tY(t)?parseInt(t):cn(t)?Math.trunc(t):pO(t)?1:mO(t)?0:t}s(dQt,"TryConvertInteger");function fQt(t){return yo(t)&&t.toLowerCase()==="null"?null:t}s(fQt,"TryConvertNull");function pQt(t){return yo(t)&&t==="undefined"?void 0:t}s(pQt,"TryConvertUndefined");function mQt(t){return cf(t)?t:cn(t)?new Date(t):pO(t)?new Date(1):mO(t)?new Date(0):tY(t)?new Date(parseInt(t)):rQt(t)?new Date(`1970-01-01T${t}.000Z`):tQt(t)?new Date(`1970-01-01T${t}`):iQt(t)?new Date(`${t}.000Z`):nQt(t)?new Date(t):oQt(t)?new Date(`${t}T00:00:00.000Z`):t}s(mQt,"TryConvertDate");function hQt(t,e,r){return(Pn(r)?r:[r]).map(i=>vA(t.items,e,i))}s(hQt,"FromArray");function gQt(t,e,r){return uQt(r)}s(gQt,"FromBigInt");function AQt(t,e,r){return mWe(r)}s(AQt,"FromBoolean");function yQt(t,e,r){return mQt(r)}s(yQt,"FromDate");function CQt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return vA(i,[...e,...n],r)}s(CQt,"FromImport");function vQt(t,e,r){return dQt(r)}s(vQt,"FromInteger");function xQt(t,e,r){return t.allOf.reduce((n,i)=>vA(i,e,n),r)}s(xQt,"FromIntersect");function EQt(t,e,r){return lQt(t,r)}s(EQt,"FromLiteral");function bQt(t,e,r){return fQt(r)}s(bQt,"FromNull");function IQt(t,e,r){return gWe(r)}s(IQt,"FromNumber");function TQt(t,e,r){if(!Si(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))kn(r,n)&&(r[n]=vA(t.properties[n],e,r[n]));return r}s(TQt,"FromObject");function wQt(t,e,r){if(!Si(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=vA(o,e,c);return r}s(wQt,"FromRecord");function SQt(t,e,r){return vA(wo(t,e),e,r)}s(SQt,"FromRef");function _Qt(t,e,r){return hWe(r)}s(_Qt,"FromString");function RQt(t,e,r){return yo(r)||cn(r)?Symbol(r):r}s(RQt,"FromSymbol");function kQt(t,e,r){return vA(wo(t,e),e,r)}s(kQt,"FromThis");function PQt(t,e,r){return Pn(r)&&!Ks(t.items)?r.map((i,o)=>o<t.items.length?vA(t.items[o],e,i):i):r}s(PQt,"FromTuple");function DQt(t,e,r){return pQt(r)}s(DQt,"FromUndefined");function BQt(t,e,r){for(let n of t.anyOf){let i=vA(n,e,Ro(r));if(ki(n,e,i))return i}return r}s(BQt,"FromUnion");function vA(t,e,r){let n=Yl(t,e),i=t;switch(t[ot]){case"Array":return hQt(i,n,r);case"BigInt":return gQt(i,n,r);case"Boolean":return AQt(i,n,r);case"Date":return yQt(i,n,r);case"Import":return CQt(i,n,r);case"Integer":return vQt(i,n,r);case"Intersect":return xQt(i,n,r);case"Literal":return EQt(i,n,r);case"Null":return bQt(i,n,r);case"Number":return IQt(i,n,r);case"Object":return TQt(i,n,r);case"Record":return wQt(i,n,r);case"Ref":return SQt(i,n,r);case"String":return _Qt(i,n,r);case"Symbol":return RQt(i,n,r);case"This":return kQt(i,n,r);case"Tuple":return PQt(i,n,r);case"Undefined":return DQt(i,n,r);case"Union":return BQt(i,n,r);default:return r}}s(vA,"Visit");function rY(...t){return t.length===3?vA(t[0],t[1],t[2]):vA(t[0],[],t[1])}s(rY,"Convert");d();function AWe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!ki(e,r,n))throw new X4(e,n,cC(e,r,n).First());return Wv(e,r)?Z4(e,r,n):n}s(AWe,"Decode");d();function hx(t,e){let r=kn(t,"default")?t.default:void 0,n=yI(r)?r():Ro(r);return Ks(e)?n:Si(e)&&Si(n)?Object.assign(n,e):e}s(hx,"ValueOrDefault");function Uye(t){return vI(t)&&"default"in t}s(Uye,"HasDefaultProperty");function NQt(t,e,r){if(Pn(r)){for(let i=0;i<r.length;i++)r[i]=bf(t.items,e,r[i]);return r}let n=hx(t,r);if(!Pn(n))return n;for(let i=0;i<n.length;i++)n[i]=bf(t.items,e,n[i]);return n}s(NQt,"FromArray");function MQt(t,e,r){return cf(r)?r:hx(t,r)}s(MQt,"FromDate");function LQt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return bf(i,[...e,...n],r)}s(LQt,"FromImport");function FQt(t,e,r){let n=hx(t,r);return t.allOf.reduce((i,o)=>{let a=bf(o,e,n);return Si(a)?{...i,...a}:a},{})}s(FQt,"FromIntersect");function OQt(t,e,r){let n=hx(t,r);if(!Si(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=bf(t.properties[o],e,n[o]);Ks(a)||(n[o]=bf(t.properties[o],e,n[o]))}if(!Uye(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=bf(t.additionalProperties,e,n[o]));return n}s(OQt,"FromObject");function QQt(t,e,r){let n=hx(t,r);if(!Si(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&Uye(a)&&(n[l]=bf(a,e,n[l]));if(!Uye(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=bf(i,e,n[l]));return n}s(QQt,"FromRecord");function UQt(t,e,r){return bf(wo(t,e),e,hx(t,r))}s(UQt,"FromRef");function qQt(t,e,r){return bf(wo(t,e),e,r)}s(qQt,"FromThis");function HQt(t,e,r){let n=hx(t,r);if(!Pn(n)||Ks(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=bf(i[a],e,n[a]));return n}s(HQt,"FromTuple");function $Qt(t,e,r){let n=hx(t,r);for(let i of t.anyOf){let o=bf(i,e,Ro(n));if(ki(i,e,o))return o}return n}s($Qt,"FromUnion");function bf(t,e,r){let n=Yl(t,e),i=t;switch(i[ot]){case"Array":return NQt(i,n,r);case"Date":return MQt(i,n,r);case"Import":return LQt(i,n,r);case"Intersect":return FQt(i,n,r);case"Object":return OQt(i,n,r);case"Record":return QQt(i,n,r);case"Ref":return UQt(i,n,r);case"This":return qQt(i,n,r);case"Tuple":return HQt(i,n,r);case"Union":return $Qt(i,n,r);default:return hx(i,r)}}s(bf,"Visit");function nY(...t){return t.length===3?bf(t[0],t[1],t[2]):bf(t[0],[],t[1])}s(nY,"Default");d();d();var xA={};xa(xA,{Delete:()=>jQt,Format:()=>hO,Get:()=>VQt,Has:()=>GQt,Set:()=>WQt,ValuePointerRootDeleteError:()=>oY,ValuePointerRootSetError:()=>iY});d();var iY=class extends Dn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},oY=class extends Dn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function yWe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(yWe,"Escape");function*hO(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield yWe(t.slice(e,r))),e=n+1):r=n;yield yWe(t.slice(e))}s(hO,"Format");function WQt(t,e,r){if(e==="")throw new iY(t,e,r);let[n,i,o]=[null,t,""];for(let a of hO(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(WQt,"Set");function jQt(t,e){if(e==="")throw new oY(t,e);let[r,n,i]=[null,t,""];for(let o of hO(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(jQt,"Delete");function GQt(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of hO(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(GQt,"Has");function VQt(t,e){if(e==="")return t;let r=t;for(let n of hO(e)){if(r[n]===void 0)return;r=r[n]}return r}s(VQt,"Get");d();function zQt(t,e){if(!Si(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>cR(t[i],e[i]))}s(zQt,"ObjectType");function KQt(t,e){return cf(e)&&t.getTime()===e.getTime()}s(KQt,"DateType");function YQt(t,e){return!Pn(e)||t.length!==e.length?!1:t.every((r,n)=>cR(r,e[n]))}s(YQt,"ArrayType");function JQt(t,e){return!Um(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>cR(r,e[n]))}s(JQt,"TypedArrayType");function XQt(t,e){return t===e}s(XQt,"ValueType");function cR(t,e){if(cf(t))return KQt(t,e);if(Um(t))return JQt(t,e);if(Pn(t))return YQt(t,e);if(Si(t))return zQt(t,e);if(dp(t))return XQt(t,e);throw new Error("ValueEquals: Unable to compare value")}s(cR,"Equal");var ZQt=Uo({type:ao("insert"),path:uf(),value:rA()}),eUt=Uo({type:ao("update"),path:uf(),value:rA()}),tUt=Uo({type:ao("delete"),path:uf()}),vWe=Qo([ZQt,eUt,tUt]),sY=class extends Dn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function aY(t,e){return{type:"update",path:t,value:e}}s(aY,"CreateUpdate");function xWe(t,e){return{type:"insert",path:t,value:e}}s(xWe,"CreateInsert");function EWe(t){return{type:"delete",path:t}}s(EWe,"CreateDelete");function CWe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new sY(t,"Cannot diff objects with symbols")}s(CWe,"AssertDiffable");function*rUt(t,e,r){if(CWe(e),CWe(r),!Tfe(r))return yield aY(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)kn(e,o)||(yield xWe(`${t}/${o}`,r[o]));for(let o of n)kn(r,o)&&(cR(e,r)||(yield*cY(`${t}/${o}`,e[o],r[o])));for(let o of n)kn(r,o)||(yield EWe(`${t}/${o}`))}s(rUt,"ObjectType");function*nUt(t,e,r){if(!Pn(r))return yield aY(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*cY(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield xWe(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield EWe(`${t}/${n}`))}s(nUt,"ArrayType");function*iUt(t,e,r){if(!Um(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield aY(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*cY(`${t}/${n}`,e[n],r[n])}s(iUt,"TypedArrayType");function*oUt(t,e,r){e!==r&&(yield aY(t,r))}s(oUt,"ValueType");function*cY(t,e,r){if(Tfe(e))return yield*rUt(t,e,r);if(Pn(e))return yield*nUt(t,e,r);if(Um(e))return yield*iUt(t,e,r);if(dp(e))return yield*oUt(t,e,r);throw new sY(e,"Unable to diff value")}s(cY,"Visit");function bWe(t,e){return[...cY("",t,e)]}s(bWe,"Diff");function sUt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(sUt,"IsRootUpdate");function aUt(t){return t.length===0}s(aUt,"IsIdentity");function IWe(t,e){if(sUt(e))return Ro(e[0].value);if(aUt(e))return Ro(t);let r=Ro(t);for(let n of e)switch(n.type){case"insert":{xA.Set(r,n.path,n.value);break}case"update":{xA.Set(r,n.path,n.value);break}case"delete":{xA.Delete(r,n.path);break}}return r}s(IWe,"Patch");d();function TWe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=Wv(e,r)?tD(e,r,n):n;if(!ki(e,r,i))throw new eD(e,i,cC(e,r,i).First());return i}s(TWe,"Encode");d();function lY(t){return Si(t)&&!Pn(t)}s(lY,"IsStandardObject");var uY=class extends Dn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function cUt(t,e,r,n){if(!lY(r))xA.Set(t,e,Ro(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)qye(t,`${e}/${a}`,r[a],n[a])}}s(cUt,"ObjectType");function lUt(t,e,r,n){if(!Pn(r))xA.Set(t,e,Ro(n));else{for(let i=0;i<n.length;i++)qye(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(lUt,"ArrayType");function uUt(t,e,r,n){if(Um(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else xA.Set(t,e,Ro(n))}s(uUt,"TypedArrayType");function dUt(t,e,r,n){r!==n&&xA.Set(t,e,n)}s(dUt,"ValueType");function qye(t,e,r,n){if(Pn(n))return lUt(t,e,r,n);if(Um(n))return uUt(t,e,r,n);if(lY(n))return cUt(t,e,r,n);if(dp(n))return dUt(t,e,r,n)}s(qye,"Visit");function wWe(t){return Um(t)||dp(t)}s(wWe,"IsNonMutableValue");function fUt(t,e){return lY(t)&&Pn(e)||Pn(t)&&lY(e)}s(fUt,"IsMismatchedValue");function SWe(t,e){if(wWe(t)||wWe(e))throw new uY("Only object and array types can be mutated at the root level");if(fUt(t,e))throw new uY("Cannot assign due type mismatch of assignable values");qye(t,"",t,e)}s(SWe,"Mutate");d();var dY=class extends Dn{static{s(this,"ParseError")}constructor(e){super(e)}},Hye;(function(t){let e=new Map([["Assert",(o,a,c)=>(XK(o,a,c),c)],["Cast",(o,a,c)=>fO(o,a,c)],["Clean",(o,a,c)=>eY(o,a,c)],["Clone",(o,a,c)=>Ro(c)],["Convert",(o,a,c)=>rY(o,a,c)],["Decode",(o,a,c)=>Wv(o,a)?Z4(o,a,c):c],["Default",(o,a,c)=>nY(o,a,c)],["Encode",(o,a,c)=>Wv(o,a)?tD(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Hye||(Hye={}));var _We=["Clone","Clean","Default","Convert","Assert","Decode"];function pUt(t,e,r,n){return t.reduce((i,o)=>{let a=Hye.Get(o);if(Ks(a))throw new dY(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(pUt,"ParseValue");function RWe(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Pn(t[0])?[t[0],t[1],[],t[2]]:[_We,t[0],t[1],t[2]]:t.length===2?[_We,t[0],[],t[1]]:(()=>{throw new dY("Invalid Arguments")})();return pUt(e,r,n,i)}s(RWe,"Parse");d();var MC={};xa(MC,{Assert:()=>XK,Cast:()=>fO,Check:()=>ki,Clean:()=>eY,Clone:()=>Ro,Convert:()=>rY,Create:()=>uh,Decode:()=>AWe,Default:()=>nY,Diff:()=>bWe,Edit:()=>vWe,Encode:()=>TWe,Equal:()=>cR,Errors:()=>cC,Hash:()=>wI,Mutate:()=>SWe,Parse:()=>RWe,Patch:()=>IWe,ValueErrorIterator:()=>SI});d();var mUt="gpt-4o-copilot",dh=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&Ps(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return mUt}parseModelsResponse(e){try{return MC.Parse(j$e,e)}catch(r){un.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch(e)}async fetch(e){let r=await sR(this._ctx,"/models",e);return r.ok?this.parseModelsResponse(await r.json())?.data??[]:(un.error(this._ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=G$e(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&un.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=zi(this._ctx,Ht.DebugOverrideEngine)||zi(this._ctx,Ht.DebugOverrideEngineLegacy);if(i)return new ET(i,"override");let o=e?this._ctx.get(Mt).customEngine(e):"",a=e?this._ctx.get(Mt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new ET(o,"exp"):new ET(n,"modelpicker"):o?new ET(o,"exp"):this.customModels.length>0?new ET(this.customModels[0],"custommodel"):new ET(r,"default")}},ET=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function bT(t,e=void 0){let r=t.get(dh),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(bT,"getEngineRequestInfo");d();d();var Mi=class{static{s(this,"FileSystem")}};var VWe=Ne(GWe());function zWe(t){return t!==void 0&&t!==0}s(zWe,"isRepoInfo");function KWe(t){if(t===void 0||t===0)return"";let e=gx(t);if(e==="github/github")return e;let r=UUt(t)?.toLowerCase();return r!==void 0?r:""}s(KWe,"getDogFood");function gx(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(gx,"tryGetGitHubNWO");function UUt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(UUt,"tryGetADONWO");function IT(t,e){let r=Pd(e);return qUt(t,r)}s(IT,"extractRepoInfoInBackground");var qUt=jUt(HUt,1e4);async function HUt(t,e){let r=B6e(e);if(!r)return;let n=await $Ut(t,r);if(!n)return;let i=t.get(Mi),o=Vi(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=WUt(a)??"",l=Gye(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(HUt,"extractRepoInfo");function Gye(t){let e;try{if(e=(0,VWe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Gye,"parseRepoUrl");async function $Ut(t,e){let r=e+"_add_to_make_longer",n=t.get(Mi);for(;e!=="file:///"&&e.length<r.length;){let i=Vi(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=Pd(e)}}s($Ut,"getRepoBaseUri");function WUt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let f=l.match(n);if(f){if(o=f[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(WUt,"getRepoUrlFromConfigText");var jye=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function jUt(t,e){let r=new wr(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new jye(u)),n.delete(a)}),0}}s(jUt,"computeInBackgroundAndMemoize");d();var gO=500,YWe=8192-gO,JWe=4,fY=10,XWe=1e3*5,pY={prefix:35,suffix:15,stableContext:35,volatileContext:15},GUt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function AO(t){return t=t.toLowerCase(),GUt[t]??t}s(AO,"normalizeLanguageId");var Vye=class{constructor(e){this.ctx=e;this.cache=new wr(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new zye(()=>this.ctx.get(fA).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},zye=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function zUt(t){return"uri"in t}s(zUt,"isCompletionsFiltersInfo");var Mt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Vye(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=Gr.createAndMarkAsIssued(),n=void 0){if(r instanceof fC)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&zUt(e)?IT(this.ctx,e.uri):void 0,o=gx(i)??"",a=KWe(i)??"",c=e?.languageId??"",l=bT(this.ctx).modelId;n??=await this.ctx.get($r).getToken();let u=w6e(n),f=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,A={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":f,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},y=this.getGranularityDirectory(),E=this.makeFilterSettings(A),b=y.extendFilters(E),S=await this.getExpConfig(b.newFilterSettings,g);y.update(E,+(S.variables.copilotbycallbuckets??NaN),+(S.variables.copilottimeperiodsizeinh??NaN));let R=y.extendFilters(E),B=R.newFilterSettings,L=await this.getExpConfig(B,g),O=new Promise(Y=>setTimeout(Y,t.upcomingDynamicFilterCheckDelayMs));for(let Y of R.otherFilterSettingsToPrefetch)O=O.then(async()=>{await new Promise(V=>setTimeout(V,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(Y,g)});return this.prepareForUpcomingFilters(B,g),new fC(r.properties,r.measurements,r.issuedTime,{filters:B,exp:L})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ds).machineId;this.granularityDirectory=new eV(e,this.ctx.get(hC))}return this.granularityDirectory}makeFilterSettings(e){return new O_({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return Fm.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new O_({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=TD(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??pY.suffix}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??fY}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??YWe+gO}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextCacheTime(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcachetime??XWe}stableContextPercent(e){return e.filtersAndExp.exp.variables.copilotstablecontextpercent??pY.stableContext}volatileContextPercent(e){return e.filtersAndExp.exp.variables.copilotvolatilecontextpercent??pY.volatileContext}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!0}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??9}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}maxMultilineTokens(e){return e.filtersAndExp.exp.variables.copilotmaxmultilinetokens??200}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??200}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};d();d();d();var mY=Ne(ZWe());var Yye={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function Fp(t){return t in Yye&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(Fp,"isSupportedLanguageId");function hY(t){if(!(t in Yye))throw new Error(`Unrecognized language: ${t}`);return Yye[t]}s(hY,"languageIdToWasmLanguage");var Kye=new Map;async function KUt(t){let e;try{e=await WK(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new SB(`Could not load tree-sitter-${t}.wasm`,r):r}return mY.default.Language.load(e)}s(KUt,"loadWasmLanguage");function YUt(t){let e=hY(t);if(!Kye.has(e)){let r=KUt(e);Kye.set(e,r)}return Kye.get(e)}s(YUt,"getLanguage");var Jye=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function Ax(t,e){await mY.default.init({locateFile:s(o=>Tye(o),"locateFile")});let r;try{r=new mY.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Jye(`Could not init Parse for language <${t}>`,o):o}let n=await YUt(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(Ax,"parseTreeSitter");function eje(t){switch(hY(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(eje,"getBlockCloseToken");function JUt(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(JUt,"innerQuery");var XUt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function tje(t){return JUt([XUt],t).length==1}s(tje,"queryPythonIsDocstring");var FC=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},Ju=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return RB.languageIds.has(e)||yO.languageIds.has(e)||kB.languageIds.has(e)||CO.languageIds.has(e)||vO.languageIds.has(e)||xO.languageIds.has(e)||EO.languageIds.has(e)||bO.languageIds.has(e)}static isTrimmedByDefault(e){return RB.languageIds.has(e)||kB.languageIds.has(e)}static create(e,r,n,i){if(RB.languageIds.has(e))return new RB(e,r,n,i);if(yO.languageIds.has(e))return new yO(e,r,n,i);if(kB.languageIds.has(e))return new kB(e,r,n,i);if(xO.languageIds.has(e))return new xO(e,r,n,i);if(CO.languageIds.has(e))return new CO(e,r,n,i);if(vO.languageIds.has(e))return new vO(e,r,n,i);if(EO.languageIds.has(e))return new EO(e,r,n,i);if(bO.languageIds.has(e))return new bO(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await Ax(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},Xye=class t extends FC{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},RB=class extends Ju{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Xye(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Zye=class t extends FC{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},yO=class extends Ju{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Zye(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},eCe=class t extends FC{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},kB=class extends Ju{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new eCe(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},tCe=class t extends FC{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},CO=class extends Ju{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new tCe(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},rCe=class t extends FC{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},vO=class extends Ju{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new rCe(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},nCe=class t extends FC{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},xO=class extends Ju{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new nCe(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},iCe=class t extends FC{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},EO=class extends Ju{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new iCe(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},oCe=class t extends FC{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},bO=class extends Ju{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new oCe(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var OC=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return Ju.isSupported(e)}static isTrimmedByDefault(e){return Ju.isTrimmedByDefault(e)}async withParsedStatementTree(e){var n=[];try{let r=Hde(n,Ju.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{$de(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var gY=class extends OC{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function rje(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=Hde(c,Ju.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,f=!0}finally{$de(c,u,f)}}s(rje,"getBlockPositionType");d();function ZUt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(ZUt,"getProxyFromEnvironment");function eqt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(eqt,"getRejectUnauthorizedFromEnvironment");var nje=x.Object({proxy:x.Optional(x.String()),proxyStrictSSL:x.Optional(x.Boolean()),proxyAuthorization:x.Optional(x.String()),proxyKerberosServicePrincipal:x.Optional(x.String())});function ije(t){let e=ZUt(t),r=IO({proxy:e,proxyStrictSSL:eqt(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(ije,"getHttpSettingsFromEnvironment");function IO(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||tqt(n,i)}}catch{return{...t,proxy:""}}}s(IO,"normalizeHttpSettings");function tqt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(tqt,"getAuth");d();var oje=Ne(mi());var Ka=class extends oje.Emitter{static{s(this,"Emitter")}get event(){return super.event}};var sCe={};xa(sCe,{activationEvents:()=>xqt,badges:()=>vqt,browser:()=>Eqt,bugs:()=>fqt,build:()=>sqt,buildType:()=>aqt,categories:()=>yqt,contributes:()=>aCe,default:()=>Rqt,dependencies:()=>Sqt,description:()=>iqt,devDependencies:()=>wqt,displayName:()=>nqt,enabledApiProposals:()=>Iqt,engines:()=>Aqt,extensionPack:()=>gqt,homepage:()=>uqt,icon:()=>mqt,keywords:()=>Cqt,license:()=>dqt,main:()=>bqt,name:()=>rqt,overrides:()=>_qt,preview:()=>lqt,pricing:()=>hqt,publisher:()=>cqt,qna:()=>pqt,scripts:()=>Tqt,version:()=>oqt});var rqt="copilot",nqt="GitHub Copilot",iqt="Your AI pair programmer",oqt="1.364.0",sqt="1765",aqt="prod",cqt="GitHub",lqt=!1,uqt="https://github.com/features/copilot?editor=vscode",dqt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",fqt={url:"https://github.com/microsoft/vscode/issues"},pqt="https://github.com/github-community/community/discussions/categories/copilot",mqt="assets/Copilot-App-Icon.png",hqt="Trial",gqt=["GitHub.copilot-chat","GitHub.copilot"],Aqt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},yqt=["AI","Chat","Programming Languages","Machine Learning"],Cqt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],vqt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],xqt=["onStartupFinished"],Eqt="./dist/web",bqt="./dist/extension",Iqt=["inlineCompletionsAdditions"],aCe={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},Tqt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/deviceFlow.ts --save-as-test-token",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},wqt={"@azure/identity":"^4.11.0","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.17.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^8.0.0","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.16.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.6.0","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^17.0.1",electron:"^28.1.4",esbuild:"^0.25.8","esbuild-plugin-copy":"^2.1.1",eslint:"^9.32.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",glob:"^11.0.3",globals:"^16.3.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.2.0",proxy:"^2.1.1","simple-git":"^3.28.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.9.2","typescript-eslint":"^8.39.1","vscode-dts":"^0.3.3"},Sqt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@anthropic-ai/sdk":"^0.56.0","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.9","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.17.0","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.39","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^8.0.2",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.3",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.2.0","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.2.2",yargs:"^17.7.2"},_qt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},Rqt={name:rqt,displayName:nqt,description:iqt,version:oqt,build:sqt,buildType:aqt,publisher:cqt,preview:lqt,homepage:uqt,license:dqt,bugs:fqt,qna:pqt,icon:mqt,pricing:hqt,extensionPack:gqt,engines:Aqt,categories:yqt,keywords:Cqt,badges:vqt,activationEvents:xqt,browser:Eqt,main:bqt,enabledApiProposals:Iqt,contributes:aCe,scripts:Tqt,devDependencies:wqt,dependencies:Sqt,overrides:_qt};var Ht={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",ToolConfirmAutoApprove:"agent.toolConfirmAutoApprove",MaxToolCallingLoop:"agent.maxToolCallingLoop",CompletionsDelay:"completionsDelay",CompletionsDebounce:"completionsDebounce",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function sje(t){return["server","parsingandserver"].includes(t)}s(sje,"shouldDoServerTrimming");var EA=class{static{s(this,"BlockModeConfig")}},DB=class extends EA{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Mt).overrideBlockMode(n);if(i)return cCe(i,r);let o=e.get(Mt).enableProgressiveReveal(n);return(zi(e,Ht.AlwaysRequestMultiline)??o)||OC.isTrimmedByDefault(r)?cCe("moremultiline",r):r=="ruby"?"parsing":Fp(r)?"parsingandserver":"server"}};function kqt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(kqt,"blockModeRequiresTreeSitter");function cCe(t,e){return t==="moremultiline"&&Ju.isSupported(e)?t:kqt(t)&&!Fp(e)?"server":t}s(cCe,"toApplicableBlockMode");var Pc=class{static{s(this,"ConfigProvider")}requireReady(){return Promise.resolve()}},BB=class extends Pc{constructor(){super(...arguments);this.onDidChangeCopilotSettings=s(()=>({dispose:s(()=>{},"dispose")}),"onDidChangeCopilotSettings");this.onDidChangeHttpSettings=this.onDidChangeCopilotSettings}static{s(this,"DefaultsOnlyConfigProvider")}getConfig(r){return Dqt(r)}getOptionalConfig(r){return Bqt(r)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}},lR=class extends Pc{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.copilotEmitter=new Ka;this.onDidChangeCopilotSettings=this.copilotEmitter.event;this.didChangeHttpSettingsEmitter=new Ka;this.onDidChangeHttpSettings=this.didChangeHttpSettingsEmitter.event;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){this.setCopilotSettings({[r]:n})}setCopilotSettings(r){for(let[n,i]of Object.entries(r))i!==void 0?this.overrides.set(n,i):this.overrides.delete(n);this.copilotEmitter.fire(this)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=IO(r);this.httpSettings=n,this.didChangeHttpSettingsEmitter.fire(this.getHttpSettings())}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[Ht.ShowEditorCompletions,Ht.EnableAutoCompletions,Ht.DelayCompletions,Ht.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function Pqt(t){return t?.type==="object"&&"properties"in t}s(Pqt,"isContributesObject");function aje(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(aje,"getConfigKeyRecursively");function Dqt(t){if(PB.has(t))return PB.get(t);throw new Error(`Missing config default value: ${T9}.${t}`)}s(Dqt,"getConfigDefaultForKey");function Bqt(t){return PB.get(t)}s(Bqt,"getOptionalConfigDefaultForKey");var PB=new Map([[Ht.DebugOverrideCppHeadersEnableSwitch,!1],[Ht.RelatedFilesVSCodeCSharp,!1],[Ht.RelatedFilesVSCodeTypeScript,!1],[Ht.RelatedFilesVSCode,!1],[Ht.IncludeNeighboringFiles,!1],[Ht.ExcludeRelatedFiles,!1],[Ht.ContextProviders,[]],[Ht.DebugUseEditorFetcher,null],[Ht.DebugUseElectronFetcher,null],[Ht.DebugOverrideLogLevels,{}],[Ht.DebugSnippyOverrideUrl,""],[Ht.FetchStrategy,"auto"],[Ht.ToolConfirmAutoApprove,!1],[Ht.MaxToolCallingLoop,25],[Ht.UseSubsetMatching,null],[Ht.ContextProviderTimeBudget,void 0],[Ht.DebugOverrideCapiUrl,""],[Ht.DebugTestOverrideCapiUrl,""],[Ht.DebugOverrideProxyUrl,""],[Ht.DebugTestOverrideProxyUrl,""],[Ht.DebugOverrideEngine,""],[Ht.AlwaysRequestMultiline,void 0],[Ht.ModelAlwaysTerminatesSingleline,void 0],[Ht.TrimCompletionsAggressively,void 0],[Ht.CompletionsDebounce,void 0],[Ht.NESXTab,void 0],[Ht.UseWorkspaceContextCoordinator,void 0],[Ht.ShowWorkspaceContextDebugger,!1],[Ht.CompletionsDelay,void 0],[Ht.UseSplitContextPrompt,void 0],[Ht.UseCompletionsComparisonPanel,!1],[Ht.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[Ht.ComparisonPanelRandomizedMode,!1],[Ht.ShowEditorCompletions,void 0],[Ht.EnableAutoCompletions,void 0],[Ht.DelayCompletions,void 0],[Ht.FilterCompletions,void 0]]);for(let t of Object.values(Ht)){let e=aCe.configuration[0],r=[],n=`${T9}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(Pqt(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(PB.has(t))throw new Error(`Duplicate config default value ${T9}.${t}`);PB.set(t,i.default)}}if(!PB.has(t))throw new Error(`Missing config default value ${T9}.${t}`)}function zi(t,e){return t.get(Pc).getConfig(e)}s(zi,"getConfig");function o6e(t){return t.get(Pc).dumpForTelemetry()}s(o6e,"dumpForTelemetry");var Io=class{constructor(){this.packageJson=sCe}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function sme(t){return t.get(Io).isProduction()}s(sme,"isProduction");function z6e(t){return t.get(Io).getBuildType()==="dev"}s(z6e,"isDevBuild");function pC(t){return t.get(Io).getBuildType()}s(pC,"getBuildType");function s6e(t){return t.get(Io).getBuild()}s(s6e,"getBuild");function t2(t){return t.get(Io).getVersion()}s(t2,"getVersion");var Ds=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function tC({name:t,version:e}){return`${t}/${e}`}s(tC,"formatNameAndVersion");var hn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},wB="2025-05-01";function vp(t){let e=t.get(hn);return{"Editor-Version":tC(e.getEditorInfo()),"Editor-Plugin-Version":tC(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":t2(t)}}s(vp,"editorVersionHeaders");var bp="Iv1.b507a08c87ecfe98",cje="350ee525b5da0e4a54c6e8e043edc1b99cc02f19",nu=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??bp}};var Hr=class{static{s(this,"Fetcher")}getImplementation(){return this}};function yx(t,e,r,n,i,o,a,c,l,u){let f={...c,Authorization:`Bearer ${r}`,...vp(t)};u===void 0&&(f["Openai-Organization"]="github-copilot",f["X-Request-Id"]=i,f["VScode-SessionId"]=t.get(Ds).sessionId,f["VScode-MachineId"]=t.get(Ds).machineId,f["X-GitHub-Api-Version"]=wB),n&&(f["OpenAI-Intent"]=n);let p={method:"POST",headers:f,json:o,timeout:l},m=t.get(Hr);if(a){let g=new AbortController;a.onCancellationRequested(()=>{Bt(t,"networking.cancelRequest",Gr.createAndMarkAsIssued({headerRequestId:i})),g.abort()}),p.signal=g.signal}return m.fetch(e,p).catch(g=>{if(Nqt(g))return Bt(t,"networking.disconnectAll"),m.disconnectAll().then(()=>m.fetch(e,p));throw g})}s(yx,"postRequest");function Nqt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(Nqt,"isInterruptedNetworkError");var Mqt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function Lqt(t){return Mqt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(Lqt,"isOomError");function Cx(t,e,r,n=un){if(!kd(e)){if(e instanceof Error){let i=e;Lqt(i)?t.get(So).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(So).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(So).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(So).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(So).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(Cx,"handleException");function lje(t){process.addListener("uncaughtException",r=>{Cx(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,Cx(t,r,"unhandledRejection")}finally{e=!1}})}s(lje,"registerDefaultHandlers");async function uje(t){try{await aR}catch(e){Cx(t,e,"initializeTokenizers")}}s(uje,"waitForTokenizers");d();var TT=require("fs"),dje=require("os"),fje=Ne(require("path")),NB=require("process");var Ai=class{static{s(this,"PersistenceManager")}},lCe=class extends Ai{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await TT.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a;try{a=await TO.acquire(o);let c=await this.readJsonObject(r);c[n]=i,await TT.promises.writeFile(o,JSON.stringify(c)+`
`,{encoding:"utf8"})}finally{a&&await a()}}async delete(r,n){let i=`${this.directory}/${r}.json`,o;try{o=await TO.acquire(i);let a=await this.readJsonObject(r);delete a[n];let c=JSON.stringify(a)+`
`;c===`{}
`?await TT.promises.rm(i):await TT.promises.writeFile(i,c,{encoding:"utf8"})}catch{}finally{o&&await o()}}async deleteSetting(r){let n=`${this.directory}/${r}.json`,i;try{i=await TO.acquire(n),await TT.promises.rm(n)}catch{}finally{i&&await i()}}async listSettings(){try{return(await TT.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await TT.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}},TO=class{static{s(this,"LockManager")}static{this.locks=new Map}static{this.DEFAULT_TIMEOUT_MS=1e4}static async acquire(e){await this.getLock(e);let r,n=new Promise(i=>{r=i});return this.locks.set(e,n),()=>Promise.resolve().then(()=>{r&&(r(),r=void 0,this.locks.get(e)===n&&this.locks.delete(e))})}static async getLock(e){let r=Date.now();for(;Date.now()-r<this.DEFAULT_TIMEOUT_MS;){let n=this.locks.get(e);if(!n)return;let i=this.DEFAULT_TIMEOUT_MS-(Date.now()-r);if(i<=0)return;let o=new Promise((a,c)=>{setTimeout(()=>{c(new Error("timeout"))},i)});try{await Promise.race([n,o])}catch{return}}}};function uCe(){return NB.env.XDG_CONFIG_HOME&&fje.isAbsolute(NB.env.XDG_CONFIG_HOME)?NB.env.XDG_CONFIG_HOME+"/github-copilot":(0,dje.platform)()==="win32"?NB.env.USERPROFILE+"\\AppData\\Local\\github-copilot":NB.env.HOME+"/.config/github-copilot"}s(uCe,"getXdgConfigPath");function pje(){return new lCe(uCe())}s(pje,"makeXdgPersistenceManager");d();d();d();var vx={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};d();d();var mje=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],hje={".php":[".blade"]},uR=Object.keys(vx).flatMap(t=>vx[t].extensions);var dCe=Ne(require("node:path"));var LB=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},wO=class{static{s(this,"LanguageDetection")}},fCe=new Map,MB=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(vx)){for(let n of e)fCe.set(n,[...fCe.get(n)??[],t]);for(let n of r??[])MB.set(n,[...MB.get(n)??[],t])}var pCe=class extends wO{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Pi(e.uri),n=dCe.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new LB(o.languageId,o.isGuess,a):new LB(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(mje.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=dCe.extname(n).toLowerCase();if(i.length>0&&uR.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=hje[e];return!n||n.includes(r)}detectLanguageId(e,r){if(MB.has(e))return{languageId:MB.get(e)[0],isGuess:!1};let n=fCe.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),MB.has(e))return{languageId:MB.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},mCe=class extends wO{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new LB("cpp",n.isGuess,n.fileExtension):n}},hCe=class extends wO{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new LB(r.languageId,!0,""):this.delegate.detectLanguage(r)}},Fqt=new mCe(new hCe(new pCe));function wT({uri:t,languageId:e}){let r=Fqt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(wT,"detectLanguage");d();d();d();d();function xx(t){if(t.isCancellationRequested)throw new AY}s(xx,"throwIfCancellationRequested");function CY(t){return t instanceof AY?!0:t instanceof Error&&t.name===gCe&&t.message===gCe}s(CY,"isCancellationError");var AY=class extends Error{static{s(this,"CancellationError")}constructor(){super(gCe),this.name=this.message}},gCe="Canceled",yY=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function dR(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(dR,"isTypeDefinition");var Os=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=Aje(e,e.length,i),gje(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=Aje(e,e.length,++i),gje(n,r)):i++;return n.join("")}};function gje(t,e){for(let r=0;r<e;r++)t.push(" ")}s(gje,"appendIndent");function Aje(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(Aje,"consumeIndent");var fh=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},sl=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await Ax(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new yY,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=null,g=null;for(let E=0;E<i.length;E++){let b=i[E].name;b==="name"?(u=i[E].node.startIndex,f=i[E].node.endIndex):b==="reference"?(u=i[E].node.startIndex,f=i[E].node.endIndex,c=i[E].node.startIndex,l=i[E].node.endIndex,h=b):b==="body"?(p=i[E].node.startIndex,m=i[E].node.endIndex):b==="comment"?(o=o===0?i[E].node.startIndex:Math.min(o,i[E].node.startIndex),a=Math.max(a,i[E].node.endIndex)):b==="receiver"?g=Os.fromBounds(i[E].node.startIndex,i[E].node.endIndex).getText(n):(c=i[E].node.startIndex,l=i[E].node.endIndex,h=b)}h==="definition.module.filescoped"&&(m=n.length,l=m);let A=Os.fromBounds(c,l),y=c>0||l>0||u>0||f>0?new fh(r,"","",Os.fromBounds(o,a),Os.fromBounds(u,f),Os.fromBounds(p,m),A,t.kindFromString(h),0):null;if(y){t.updateScopesForSymbol(e,y);let E=y.nameRange.getText(n),b=this.createNameFromScopes(n,e.toArray());return b=g?`${g}.${b}`:b,new fh(r,b,E.substring(E.lastIndexOf(".")+1),y.commentRange,y.nameRange,y.bodyRange,y.extentRange,y.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var vY=class extends sl{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,Oqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},xY=class extends sl{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,Uqt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,qqt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},EY=class extends sl{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,Qqt),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),f=a.node.startIndex+1,p=a.node.endIndex-1,m=c?new Os(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Os(f,p-f),h=new Os(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=Os.empty,A=Os.empty,y=u.substring(u.lastIndexOf("/")+1);i.add(new fh(e,u,y,g,m,A,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},Oqt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,Qqt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,Uqt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,qqt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;d();var IY=class extends sl{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,Hqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},TY=class extends sl{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,Wqt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,jqt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},wY=class extends sl{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,$qt)).filter(i=>i.kind===0)}},Hqt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,$qt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,Wqt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,jqt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;d();var Gqt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),SY=class extends sl{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,Vqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},_Y=class extends sl{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,zqt)).filter(i=>!Gqt.has(i.unqualifiedName))}};var Vqt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,zqt=`
(call_expression function: (_) @name) @reference
`;d();var Kqt=new Set(["int","str","float","bool","list","dict","tuple","set"]),RY=class extends sl{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,Yqt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},kY=class extends sl{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,Jqt)).filter(i=>!Kqt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,Zqt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},PY=class extends sl{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,Xqt),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let f of o.captures)f.name==="import.name"?a=f:f.name==="import.module"?l=f:f.name==="alias"?c=f:f.name==="import"&&(u=f);if(l&&u){let f=a||l,p=c?new Os(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Os(f.node.startIndex,u.node.endIndex-f.node.endIndex),m=new Os(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=Os.empty,g=Os.empty,A=f.node.text,y=A.split(".").pop()||A,E;a?E=`${l.node.text}.${a.node.text}`:E=l.node.text,i.add(new fh(e,E,y,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},Yqt=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,Jqt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,Xqt=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,Zqt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;d();var eHt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),FB=class extends sl{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,tHt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},OB=class extends sl{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,rHt)).filter(i=>!eHt.has(i.unqualifiedName))}extractLocalReferences(){return Promise.reject(new Error("Method not implemented."))}};var tHt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,rHt=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;d();var nHt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),DY=class extends FB{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,iHt),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},BY=class extends OB{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,oHt),super.extractReferences(e,r)]);return[...n.filter(o=>!nHt.has(o.unqualifiedName)),...i]}},iHt=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,oHt=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var SO=[{symbolExtractor:new IY,referenceExtractor:new TY,importExtractor:new wY,languageId:"java"},{symbolExtractor:new vY,referenceExtractor:new xY,importExtractor:new EY,languageId:"go"},{symbolExtractor:new RY,referenceExtractor:new kY,importExtractor:new PY,languageId:"python"},{symbolExtractor:new FB,referenceExtractor:new OB,languageId:"typescript"},{symbolExtractor:new DY,referenceExtractor:new BY,languageId:"typescriptreact"},{symbolExtractor:new SY,referenceExtractor:new _Y,languageId:"javascript"}];function yje(t){let e=wT({uri:t});if(e&&SO.some(r=>e===r.languageId))return e}s(yje,"getSupportedLanguageIdForMultiLanguageProvider");var Cje=new Map(SO.map(t=>[t.languageId,t.referenceExtractor])),NY=new Map(SO.map(t=>[t.languageId,t.symbolExtractor])),vje=new Map(SO.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),ACe=SO.map(t=>vx[t.languageId].extensions).flat();d();d();d();d();d();d();d();d();d();function yCe(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(yCe,"virtualNode");function xje(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(xje,"lineNode");function CCe(t){return{type:"blank",lineNumber:t,subs:[]}}s(CCe,"blankNode");function MY(t){return{type:"top",indentation:-1,subs:t??[]}}s(MY,"topNode");function Xu(t){return t.type==="blank"}s(Xu,"isBlank");function fR(t){return t.type==="line"}s(fR,"isLine");function pR(t){return t.type==="virtual"}s(pR,"isVirtual");d();function Eje(t,e){return Ld(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(Eje,"clearLabelsIf");function mR(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>mR(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>mR(r,e)),label:t.label?e(t.label):void 0}}}s(mR,"mapLabels");function Ld(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(Ld,"visitTree");function vCe(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),Ld(t,o,n),i}s(vCe,"foldTree");function LY(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:MY()}s(LY,"rebuildTree");d();function aHt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[f,p]=o(u+1,r[u]);return[xje(r[u],u,n[u],f),p]}s(i,"parseNode");function o(u,f){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>f);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let A=g;A<h;A++)m.push(CCe(A));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(CCe(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return MY(a)}s(aHt,"parseRaw");function _O(t,e){function r(n){if(fR(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),Ld(t,r,"bottomUp")}s(_O,"labelLines");function FY(t){function e(r){if(pR(r)&&r.label===void 0){let n=r.subs.filter(i=>!Xu(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),Ld(t,e,"bottomUp")}s(FY,"labelVirtualInherited");function RO(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(RO,"buildLabelRules");function xCe(t){let r=LY(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&fR(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(fR(c)||pR(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&Xu(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let f=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,f),m=o.subs.slice(f),h=m.length>0?[yCe(c.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,c]}else o.subs.push(c)}else i.push(c),Xu(c)||(o=c)}return n.subs=i,n},"rebuilder"));return Eje(t,n=>n==="newVirtual"),r}s(xCe,"combineClosersAndOpeners");function bje(t,e=Xu,r){return LY(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(f=!1){if(c!==void 0&&(o.length>0||!f)){let p=yCe(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let f=0;f<i.subs.length;f++){let p=i.subs[f],m=e(p);!m&&l&&(u(),a=[]),l=m,a.push(p),Xu(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(bje,"groupBlocks");function hR(t){return LY(t,s(function(r){return pR(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&pR(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(hR,"flattenVirtual");var cHt={opener:/^[[({]/,closer:/^[\])}]/},lHt=RO(cHt),Ije={};function ECe(t,e){Ije[t]=e}s(ECe,"registerLanguageSpecificParser");function gR(t,e){let r=aHt(t),n=Ije[e??""];return n?n(r):(_O(r,lHt),xCe(r))}s(gR,"parseTree");var uHt={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},dHt=RO(uHt);function Tje(t){let e=t;return _O(e,dHt),e=xCe(e),e=hR(e),FY(e),Ld(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!Xu(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(Tje,"processJava");d();var fHt={heading:/^# /,subheading:/^## /,subsubheading:/### /},pHt=RO(fHt);function wje(t){let e=t;if(_O(e,pHt),Xu(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||Xu(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=bje(e),e=hR(e),FY(e),e}s(wje,"processMarkdown");d();function Sje(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(Sje,"deparseLine");ECe("markdown",wje);ECe("java",Tje);var mHt={worthUp:.9,worthSibling:.88,worthDown:.8};function bCe(t,e,r=Ni(),n=mHt){let i=mR(t,o=>o?1:void 0);return Ld(i,o=>{if(Xu(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),Ld(i,o=>{if(Xu(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((f,p)=>Math.max(f,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,f)=>u.label=c[f])},"topDown"),hHt(i,e,r)}s(bCe,"fromTreeWithFocussedLines");function hHt(t,e,r=Ni()){let n=vCe(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[Sje(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Ut(n,e,r)}s(hHt,"fromTreeWithValuedLines");function Op(t,e=!0,r=!0,n,i=Ni()){let o=typeof t=="string"?gR(t):gR(t.source,t.languageId);hR(o);let a=mR(o,c=>e&&c!=="closer");return Ld(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&Ld(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&Ld(a,c=>{c.label||=(fR(c)||Xu(c))&&c.lineNumber==0},"topDown"),bCe(a,n,i)}s(Op,"elidableTextForSourceCode");d();var kO=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Ni().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Ut=class t{constructor(e,r,n=Ni()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new kO(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&Op(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Ni().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=AHt(this.lines,i);if(l<=e)return ICe(c);yHt(u,a);let f=l;for(;f>e&&u.length>0;){let m=u.shift().originalIndex,h=c[m];if(h.markedForRemoval)continue;let g=n?CHt(c,m):"",A=_je(g,r,o,h);c[m]=A,f-=h.cost,f+=A.cost;let y=m+1;if(y<c.length){let b=c[y];OY(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}let E=m-1;if(E>=0){let b=c[E];OY(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}}if(f>e)return ICe([_je("",r,o)]);let p=c.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)OY(p[m],r)&&OY(p[m-1],r)&&p.splice(m,1);return ICe(p)}};function gHt(t){return t?.text.match(/^\s*/)?.[0]??""}s(gHt,"getIndentation");function OY(t,e){return t?.text.trim()===e.trim()}s(OY,"isEllipsis");function ICe(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(ICe,"produceElidedText");function AHt(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s(AHt,"initializeElisionContext");function yHt(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(yHt,"sortPriorityQueue");function CHt(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=gHt(i);break}}return r}s(CHt,"getClosestIndentation");function _je(t,e,r,n){let i=t+e;return new kO(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(_je,"getNewEllipsis");d();var Rje=require("fs");async function kje(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],f=Array.from(o.keys());f.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of f){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((A,y)=>A+y.node.extentRange.length,0);for(let A of m){if(c<=5)return u;xx(i);let y=A.node.extentRange.length/g,E=Math.min(c,y*l),b=(await vHt([A])).elide(E).getText();c-=n.tokenLength(b),u.push({uri:h,value:b})}}return u}s(kje,"symbolRangesToCodeSnippets");async function vHt(t){if(t.length===0)return new Ut([]);let e=t[0].node.fileName,r=[],n="";try{let i=es(e);i&&(n=(await Rje.promises.readFile(i)).toString())}catch{}for(let i of t)Pje(i,n).forEach(o=>r.push(o));return new Ut(r)}s(vHt,"sameFileSymbolRangeToElidableText");function Pje(t,e){let n=[],i=t.node,o=e.substring(TCe(e,i.commentRange.start),i.commentRange.end);n.push([wCe(o),1-3e-4]);let a=TCe(e,i.bodyRange.start),c=TCe(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if(dR(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([wCe(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...Pje(u,e));else{let u=1-(dR(t.node.kind)?3e-4:4e-4),f=e.substring(a,i.bodyRange.end);n.push([wCe(f),u])}return dR(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(Pje,"prepareForElidableText");function TCe(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(TCe,"shiftLeftToNearestLineEndingOrAlphanumeric");function wCe(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(wCe,"trimLineEndingsAndTrailingWhitespace");var SCe=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},ST=class extends SCe{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];xx(a);let l=await c.extractReferences(e,r);xx(a);let u=Array.from(l);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let f=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>dR(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),f.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return f}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=l(p),h=u.get(m)??[];u.set(m,[...h,p])}let f=[];for(let p of i){let m=u.get(c(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(f.length+m.length>r.mlcpMaxContextItems){f.push(...m.slice(0,r.mlcpMaxContextItems-f.length));break}f.push(...m)}}return f}async makeSymbolRangeNodeFromDefinition(e,r){if(xx(r),dR(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},QY=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new ST(e,r,!0,!0)),this.strategies.set("java",new ST(e,r,!0,!0)),this.strategies.set("python",new ST(e,r,!0,!1)),this.strategies.set("typescript",new ST(e,r,!0,!0)),this.strategies.set("typescriptreact",new ST(e,r,!0,!0)),this.strategies.set("javascript",new ST(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);xx(c);let u=Ni();return kje(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};d();d();d();d();var AR={Id:"id"},Qp={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},uo={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};d();d();var UY=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new _Ce(AR.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},PO=class t extends UY{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${Qp.FilePath}');`]);this.fields=[new NO(Qp.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new b0(Qp.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},DO=class t extends UY{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${uo.DocumentId}', '${uo.ExtentStart}', '${uo.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${uo.UnqualifiedName}');`],`FOREIGN KEY(${uo.DocumentId}) REFERENCES Document(${AR.Id}) ON DELETE CASCADE`);this.fields=[new b0(uo.DocumentId),new NO(uo.FullyQualifiedName,{notNull:!0}),new NO(uo.UnqualifiedName,{notNull:!0}),new b0(uo.CommentStart,{notNull:!0}),new b0(uo.CommentLength,{notNull:!0}),new b0(uo.NameStart,{notNull:!0}),new b0(uo.NameLength,{notNull:!0}),new b0(uo.BodyStart,{notNull:!0}),new b0(uo.BodyLength,{notNull:!0}),new b0(uo.ExtentStart,{notNull:!0}),new b0(uo.ExtentLength,{notNull:!0}),new b0(uo.SymbolKind,{notNull:!0}),new b0(uo.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},BO=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},NO=class extends BO{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},b0=class extends BO{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},_Ce=class extends BO{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var qY=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?ph(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return ph(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${AR.Id} = ?`,[e])}},Ex=class t extends qY{static{s(this,"DocumentTable")}static{this.tableName=PO.tableName}createQueryGenerator(){return new PO}async updateTimestamp(e,r){let n=await this.init;n&&await ph(n,`UPDATE ${t.tableName} SET ${Qp.LastWriteTimeUtc} = ? WHERE ${Qp.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await ph(r,`DELETE FROM ${t.tableName} WHERE ${Qp.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?ph(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${Qp.FilePath} = ?`,[e]):[]}},al=class t extends qY{static{s(this,"SymbolTable")}static{this.tableName=DO.tableName}createQueryGenerator(){return new DO}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return ph(r,`DELETE FROM ${t.tableName} WHERE ${uo.DocumentId} = ?`,[e])}};async function ph(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(ph,"runPromisifiedDBQuery");var WY=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${Ex.tableName} ON ${al.tableName}.${uo.DocumentId} = ${Ex.tableName}.${AR.Id}`;this.db=this.initDb(e),this.documentTable=new Ex(this.db),this.symbolTable=new al(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ne($je()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await ph(n,"pragma journal_mode=wal",[]),await ph(n,"pragma synchronous=normal",[]),await ph(n,"pragma optimize=0x10002",[]),await ph(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${al.tableName}`,this.innerJoinStatement,`WHERE ${uo.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${uo.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${al.tableName}`,this.innerJoinStatement,`WHERE ${uo.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${al.tableName}`,this.innerJoinStatement,`WHERE ${uo.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${al.tableName}`,this.innerJoinStatement,`WHERE ${Ex.tableName}.${Qp.FilePath} = ? AND ${al.tableName}.${uo.ExtentStart} <= ? AND (${al.tableName}.${uo.ExtentStart} + ${al.tableName}.${uo.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${al.tableName}`,this.innerJoinStatement,`WHERE ${Ex.tableName}.${Qp.FilePath} = ? AND ${al.tableName}.${uo.ExtentStart} >= ? AND (${al.tableName}.${uo.ExtentStart} + ${al.tableName}.${uo.ExtentLength}) <= ?`,`ORDER BY ${al.tableName}.${uo.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${al.tableName}`,this.innerJoinStatement,`WHERE ${Ex.tableName}.${Qp.FilePath} = ? AND ${al.tableName}.${uo.FullyQualifiedName} LIKE ?`,`ORDER BY ${al.tableName}.${uo.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,ph(n,e,r)):[]}};var jY=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new WY(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return qB(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),xx(n)}return qB(i)}async getDefinitionsAsync(e){return qB(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return qB(n)}async findSymbolsContainedByRangeAsync(e,r,n){return qB(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return qB(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function qB(t){return t.map(e=>new fh(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Os(e.commentStart,e.commentLength),new Os(e.nameStart,e.nameLength),new Os(e.bodyStart,e.bodyLength),new Os(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(qB,"symbolsToSymbolRanges");var VY=Ne(require("fs/promises"));var GY=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new jY(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=es(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await VY.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await VY.readFile(n)).toString(),u=await c.extractSymbols(e,l),f=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,l);f=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,f)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};d();function NCe(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>SHt(r))}s(NCe,"isIndexWorkerData");var LO=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},_T=class extends LO{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},zY=class extends LO{constructor(r){super(Fd.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},Fd={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},KY=class extends _T{constructor(r,n,i){super(r,Fd.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},YY=class extends _T{constructor(r,n){super(r,Fd.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},JY=class extends _T{constructor(r,n,i){super(r,Fd.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},XY=class extends _T{constructor(r,n){super(r,Fd.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},ZY=class extends _T{constructor(r,n,i,o,a,c){super(r,Fd.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},eJ=class extends _T{static{s(this,"ExitRequest")}constructor(e){super(e,Fd.Exit)}},bA=class extends LO{constructor(r,n,i){super(Fd.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function SHt(t){return"databaseFilePath"in t&&"rootPath"in t}s(SHt,"isIndexableWorkspaceFolder");var Wje=Ne(mi()),RT=require("worker_threads");var tJ=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new GY(e,NY,vje,r),this.contextRetreival=new QY(this.index.reader,Cje)}},MCe=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=nc(i.rootPath);this.indices.set(o,new tJ(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new Wje.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case Fd.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case Fd.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case Fd.Cancel:n.get(e.id)?.cancel(),o=new bA(e.id,void 0,void 0);break;case Fd.Exit:o=await this.dispatchExit(e,r,i.token);break;case Fd.CreateIndex:o=t.dispatchCreateIndex(e,r,i.token);break;case Fd.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case Fd.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new bA(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=nc(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new bA(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=nc(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new bA(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=nc(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new bA(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new bA(e.id,void 0,void 0)),this.port?.close()}static dispatchCreateIndex(e,r,n){let i=nc(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new tJ(e.databaseFilePath)),new bA(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=nc(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new bA(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function jje(){return NCe(RT.workerData)}s(jje,"isIndexWorker");function Gje(){let t=RT.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!NCe(RT.workerData))throw new Error("Worker data must provide a valid database path.");let e=RT.workerData.cwd;process.cwd=()=>e,new MCe(t,RT.workerData.indexWorkspaceRoots,RT.workerData.params)}s(Gje,"runIndexWorker");d();var FO=Ne(require("util"));function Vje(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(pC(t)==="dev")return t.get(Jc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",FO.format(...i)))},e.dir=(n,i)=>r(4,FO.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(FO.format(...n));i.name="Trace",e.log(i)},e}s(Vje,"createConsole");var KE=Ne(require("fs/promises")),sbt=Ne(require("os")),qH=Ne(require("path")),Eg=Ne(TA()),abt=require("worker_threads");d();d();var QJ=require("assert");d();d();var U$t={right:j$t,center:G$t},q$t=0,DJ=1,H$t=2,BJ=3,a1e=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&Up.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),Up.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=Up.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),f=a;if(u>Up.stringWidth(a)&&(f+=" ".repeat(u-Up.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let m=U$t[e[c].align];f=m(f,u),Up.stringWidth(f)<u&&(f+=" ".repeat((l||0)-Up.stringWidth(f)-1))}let p=e[c].padding||[0,0,0,0];p[BJ]&&(o+=" ".repeat(p[BJ])),o+=qGe(e[c],f,"| "),o+=f,o+=qGe(e[c],f," |"),p[DJ]&&(o+=" ".repeat(p[DJ])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=Up.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=Up.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[q$t]||0).fill("")),i.push(...new Array(o.padding[H$t]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let f=0;f<a;f++)u[f]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[BJ]||0)+(e.padding[DJ]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||Up.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,$$t(e[c])):a)}};function qGe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(qGe,"addBorder");function $$t(t){let e=t.padding||[],r=1+(e[BJ]||0)+(e[DJ]||0);return t.border?r+4:r}s($$t,"_minWidth");function W$t(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(W$t,"getWindowWidth");function j$t(t,e){t=t.trim();let r=Up.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(j$t,"alignRight");function G$t(t,e){t=t.trim();let r=Up.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(G$t,"alignCenter");var Up;function HGe(t,e){return Up=e,new a1e({width:t?.width||W$t(),wrap:t?.wrap})}s(HGe,"cliui");d();var $Ge=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function c1e(t){return t.replace($Ge,"")}s(c1e,"stripAnsi");function WGe(t,e){let[r,n]=t.match($Ge)||["",""];t=c1e(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(WGe,"wrap");function l1e(t){return HGe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:c1e,wrap:WGe})}s(l1e,"ui");d();var jB=require("path"),NJ=require("fs");function u1e(t,e){let r=(0,jB.resolve)(".",t),n;for((0,NJ.statSync)(r).isDirectory()||(r=(0,jB.dirname)(r));;){if(n=e(r,(0,NJ.readdirSync)(r)),n)return(0,jB.resolve)(r,n);if(r=(0,jB.dirname)(n=r),n===r)break}}s(u1e,"default");var sVe=require("util"),aVe=require("fs"),cVe=require("url");d();var KGe=require("util"),OJ=require("path");d();function xR(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(xR,"camelCase");function MJ(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(MJ,"decamelize");function LJ(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(LJ,"looksLikeNumber");d();d();function jGe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(jGe,"tokenizeArgString");d();var Ch;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(Ch||(Ch={}));var bx,FJ=class{static{s(this,"YargsParser")}constructor(e){bx=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=jGe(e),o=typeof e=="string",a=V$t(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],f=n.envPrefix,p=c["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),A=n.__||bx.format,y={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},E=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,b=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(se){let le=typeof se=="object"?se.key:se,qe=Object.keys(se).map(function(Be){return{boolean:"bools",string:"strings",number:"numbers"}[Be]}).filter(Boolean).pop();qe&&(y[qe][le]=!0),y.arrays[le]=!0,y.keys.push(le)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(se){y.bools[se]=!0,y.keys.push(se)}),[].concat(n.string||[]).filter(Boolean).forEach(function(se){y.strings[se]=!0,y.keys.push(se)}),[].concat(n.number||[]).filter(Boolean).forEach(function(se){y.numbers[se]=!0,y.keys.push(se)}),[].concat(n.count||[]).filter(Boolean).forEach(function(se){y.counts[se]=!0,y.keys.push(se)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(se){y.normalize[se]=!0,y.keys.push(se)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([se,le])=>{typeof le=="number"&&(y.nargs[se]=le,y.keys.push(se))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([se,le])=>{typeof le=="function"&&(y.coercions[se]=le,y.keys.push(se))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(se){y.configs[se]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([se,le])=>{(typeof le=="boolean"||typeof le=="function")&&(y.configs[se]=le)})),Oe(n.key,a,n.default,y.arrays),Object.keys(l).forEach(function(se){(y.aliases[se]||[]).forEach(function(le){l[le]=l[se]})});let S=null;$e();let R=[],B=Object.assign(Object.create(null),{_:[]}),L={};for(let se=0;se<i.length;se++){let le=i[se],qe=le.replace(/^-{3,}/,"---"),Be,Ee,je,tt,pt,Ft;if(le!=="--"&&/^-/.test(le)&&_t(le))O(le);else if(qe.match(/^---+(=|$)/)){O(le);continue}else if(le.match(/^--.+=/)||!c["short-option-groups"]&&le.match(/^-.+=/))tt=le.match(/^--?([^=]+)=([\s\S]*)$/),tt!==null&&Array.isArray(tt)&&tt.length>=3&&(Te(tt[1],y.arrays)?se=V(se,tt[1],i,tt[2]):Te(tt[1],y.nargs)!==!1?se=Y(se,tt[1],i,tt[2]):z(tt[1],tt[2],!0));else if(le.match(b)&&c["boolean-negation"])tt=le.match(b),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(Ee=tt[1],z(Ee,Te(Ee,y.arrays)?[!1]:!1));else if(le.match(/^--.+/)||!c["short-option-groups"]&&le.match(/^-[^-]+/))tt=le.match(/^--?(.+)/),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(Ee=tt[1],Te(Ee,y.arrays)?se=V(se,Ee,i):Te(Ee,y.nargs)!==!1?se=Y(se,Ee,i):(pt=i[se+1],pt!==void 0&&(!pt.match(/^-/)||pt.match(E))&&!Te(Ee,y.bools)&&!Te(Ee,y.counts)||/^(true|false)$/.test(pt)?(z(Ee,pt),se++):z(Ee,ht(Ee))));else if(le.match(/^-.\..+=/))tt=le.match(/^-([^=]+)=([\s\S]*)$/),tt!==null&&Array.isArray(tt)&&tt.length>=3&&z(tt[1],tt[2]);else if(le.match(/^-.\..+/)&&!le.match(E))pt=i[se+1],tt=le.match(/^-(.\..+)/),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(Ee=tt[1],pt!==void 0&&!pt.match(/^-/)&&!Te(Ee,y.bools)&&!Te(Ee,y.counts)?(z(Ee,pt),se++):z(Ee,ht(Ee)));else if(le.match(/^-[^-]+/)&&!le.match(E)){je=le.slice(1,-1).split(""),Be=!1;for(let Jt=0;Jt<je.length;Jt++){if(pt=le.slice(Jt+2),je[Jt+1]&&je[Jt+1]==="="){Ft=le.slice(Jt+3),Ee=je[Jt],Te(Ee,y.arrays)?se=V(se,Ee,i,Ft):Te(Ee,y.nargs)!==!1?se=Y(se,Ee,i,Ft):z(Ee,Ft),Be=!0;break}if(pt==="-"){z(je[Jt],pt);continue}if(/[A-Za-z]/.test(je[Jt])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(pt)&&Te(pt,y.bools)===!1){z(je[Jt],pt),Be=!0;break}if(je[Jt+1]&&je[Jt+1].match(/\W/)){z(je[Jt],pt),Be=!0;break}else z(je[Jt],ht(je[Jt]))}Ee=le.slice(-1)[0],!Be&&Ee!=="-"&&(Te(Ee,y.arrays)?se=V(se,Ee,i):Te(Ee,y.nargs)!==!1?se=Y(se,Ee,i):(pt=i[se+1],pt!==void 0&&(!/^(-|--)[^-]/.test(pt)||pt.match(E))&&!Te(Ee,y.bools)&&!Te(Ee,y.counts)||/^(true|false)$/.test(pt)?(z(Ee,pt),se++):z(Ee,ht(Ee))))}else if(le.match(/^-[0-9]$/)&&le.match(E)&&Te(le.slice(1),y.bools))Ee=le.slice(1),z(Ee,ht(Ee));else if(le==="--"){R=i.slice(se+1);break}else if(c["halt-at-non-option"]){R=i.slice(se);break}else O(le)}X(B,!0),X(B,!1),J(B),$(),te(B,y.aliases,l,!0),ie(B),c["set-placeholder-key"]&&ae(B),Object.keys(y.counts).forEach(function(se){pe(B,se.split("."))||z(se,0)}),p&&R.length&&(B[m]=[]),R.forEach(function(se){B[m].push(se)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(B).filter(se=>se!=="--"&&se.includes("-")).forEach(se=>{delete B[se]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(se=>a[se])).forEach(se=>{c["camel-case-expansion"]&&se.includes("-")&&delete B[se.split(".").map(le=>xR(le)).join(".")],delete B[se]});function O(se){let le=Z("_",se);(typeof le=="string"||typeof le=="number")&&B._.push(le)}s(O,"pushPositional");function Y(se,le,qe,Be){let Ee,je=Te(le,y.nargs);if(je=typeof je!="number"||isNaN(je)?1:je,je===0)return ye(Be)||(S=Error(A("Argument unexpected for: %s",le))),z(le,ht(le)),se;let tt=ye(Be)?0:1;if(c["nargs-eats-options"])qe.length-(se+1)+tt<je&&(S=Error(A("Not enough arguments following: %s",le))),tt=je;else{for(Ee=se+1;Ee<qe.length&&(!qe[Ee].match(/^-[^0-9]/)||qe[Ee].match(E)||_t(qe[Ee]));Ee++)tt++;tt<je&&(S=Error(A("Not enough arguments following: %s",le)))}let pt=Math.min(tt,je);for(!ye(Be)&&pt>0&&(z(le,Be),pt--),Ee=se+1;Ee<pt+se+1;Ee++)z(le,qe[Ee]);return se+pt}s(Y,"eatNargs");function V(se,le,qe,Be){let Ee=[],je=Be||qe[se+1],tt=Te(le,y.nargs);if(Te(le,y.bools)&&!/^(true|false)$/.test(je))Ee.push(!0);else if(ye(je)||ye(Be)&&/^-/.test(je)&&!E.test(je)&&!_t(je)){if(l[le]!==void 0){let pt=l[le];Ee=Array.isArray(pt)?pt:[pt]}}else{ye(Be)||Ee.push(U(le,Be,!0));for(let pt=se+1;pt<qe.length&&!(!c["greedy-arrays"]&&Ee.length>0||tt&&typeof tt=="number"&&Ee.length>=tt||(je=qe[pt],/^-/.test(je)&&!E.test(je)&&!_t(je)));pt++)se=pt,Ee.push(U(le,je,o))}return typeof tt=="number"&&(tt&&Ee.length<tt||isNaN(tt)&&Ee.length===0)&&(S=Error(A("Not enough arguments following: %s",le))),z(le,Ee),se}s(V,"eatArray");function z(se,le,qe=o){if(/-/.test(se)&&c["camel-case-expansion"]){let je=se.split(".").map(function(tt){return xR(tt)}).join(".");Q(se,je)}let Be=U(se,le,qe),Ee=se.split(".");Ae(B,Ee,Be),y.aliases[se]&&y.aliases[se].forEach(function(je){let tt=je.split(".");Ae(B,tt,Be)}),Ee.length>1&&c["dot-notation"]&&(y.aliases[Ee[0]]||[]).forEach(function(je){let tt=je.split("."),pt=[].concat(Ee);pt.shift(),tt=tt.concat(pt),(y.aliases[se]||[]).includes(tt.join("."))||Ae(B,tt,Be)}),Te(se,y.normalize)&&!Te(se,y.arrays)&&[se].concat(y.aliases[se]||[]).forEach(function(tt){Object.defineProperty(L,tt,{enumerable:!0,get(){return le},set(pt){le=typeof pt=="string"?bx.normalize(pt):pt}})})}s(z,"setArg");function Q(se,le){y.aliases[se]&&y.aliases[se].length||(y.aliases[se]=[le],h[le]=!0),y.aliases[le]&&y.aliases[le].length||Q(le,se)}s(Q,"addNewAlias");function U(se,le,qe){qe&&(le=z$t(le)),(Te(se,y.bools)||Te(se,y.counts))&&typeof le=="string"&&(le=le==="true");let Be=Array.isArray(le)?le.map(function(Ee){return Z(se,Ee)}):Z(se,le);return Te(se,y.counts)&&(ye(Be)||typeof Be=="boolean")&&(Be=d1e()),Te(se,y.normalize)&&Te(se,y.arrays)&&(Array.isArray(le)?Be=le.map(Ee=>bx.normalize(Ee)):Be=bx.normalize(le)),Be}s(U,"processValue");function Z(se,le){return!c["parse-positional-numbers"]&&se==="_"||!Te(se,y.strings)&&!Te(se,y.bools)&&!Array.isArray(le)&&(LJ(le)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${le}`)))||!ye(le)&&Te(se,y.numbers))&&(le=Number(le)),le}s(Z,"maybeCoerceNumber");function J(se){let le=Object.create(null);te(le,y.aliases,l),Object.keys(y.configs).forEach(function(qe){let Be=se[qe]||le[qe];if(Be)try{let Ee=null,je=bx.resolve(bx.cwd(),Be),tt=y.configs[qe];if(typeof tt=="function"){try{Ee=tt(je)}catch(pt){Ee=pt}if(Ee instanceof Error){S=Ee;return}}else Ee=bx.require(je);j(Ee)}catch(Ee){Ee.name==="PermissionDenied"?S=Ee:se[qe]&&(S=Error(A("Invalid JSON config file: %s",Be)))}})}s(J,"setConfig");function j(se,le){Object.keys(se).forEach(function(qe){let Be=se[qe],Ee=le?le+"."+qe:qe;typeof Be=="object"&&Be!==null&&!Array.isArray(Be)&&c["dot-notation"]?j(Be,Ee):(!pe(B,Ee.split("."))||Te(Ee,y.arrays)&&c["combine-arrays"])&&z(Ee,Be)})}s(j,"setConfigObject");function $(){typeof u<"u"&&u.forEach(function(se){j(se)})}s($,"setConfigObjects");function X(se,le){if(typeof f>"u")return;let qe=typeof f=="string"?f:"",Be=bx.env();Object.keys(Be).forEach(function(Ee){if(qe===""||Ee.lastIndexOf(qe,0)===0){let je=Ee.split("__").map(function(tt,pt){return pt===0&&(tt=tt.substring(qe.length)),xR(tt)});(le&&y.configs[je.join(".")]||!le)&&!pe(se,je)&&z(je.join("."),Be[Ee])}})}s(X,"applyEnvVars");function ie(se){let le,qe=new Set;Object.keys(se).forEach(function(Be){if(!qe.has(Be)&&(le=Te(Be,y.coercions),typeof le=="function"))try{let Ee=Z(Be,le(se[Be]));[].concat(y.aliases[Be]||[],Be).forEach(je=>{qe.add(je),se[je]=Ee})}catch(Ee){S=Ee}})}s(ie,"applyCoercions");function ae(se){return y.keys.forEach(le=>{~le.indexOf(".")||typeof se[le]>"u"&&(se[le]=void 0)}),se}s(ae,"setPlaceholderKeys");function te(se,le,qe,Be=!1){Object.keys(qe).forEach(function(Ee){pe(se,Ee.split("."))||(Ae(se,Ee.split("."),qe[Ee]),Be&&(g[Ee]=!0),(le[Ee]||[]).forEach(function(je){pe(se,je.split("."))||Ae(se,je.split("."),qe[Ee])}))})}s(te,"applyDefaultsAndAliases");function pe(se,le){let qe=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(Ee){qe=qe[Ee]||{}});let Be=le[le.length-1];return typeof qe!="object"?!1:Be in qe}s(pe,"hasKey");function Ae(se,le,qe){let Be=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(Ft){Ft=GGe(Ft),typeof Be=="object"&&Be[Ft]===void 0&&(Be[Ft]={}),typeof Be[Ft]!="object"||Array.isArray(Be[Ft])?(Array.isArray(Be[Ft])?Be[Ft].push({}):Be[Ft]=[Be[Ft],{}],Be=Be[Ft][Be[Ft].length-1]):Be=Be[Ft]});let Ee=GGe(le[le.length-1]),je=Te(le.join("."),y.arrays),tt=Array.isArray(qe),pt=c["duplicate-arguments-array"];!pt&&Te(Ee,y.nargs)&&(pt=!0,(!ye(Be[Ee])&&y.nargs[Ee]===1||Array.isArray(Be[Ee])&&Be[Ee].length===y.nargs[Ee])&&(Be[Ee]=void 0)),qe===d1e()?Be[Ee]=d1e(Be[Ee]):Array.isArray(Be[Ee])?pt&&je&&tt?Be[Ee]=c["flatten-duplicate-arrays"]?Be[Ee].concat(qe):(Array.isArray(Be[Ee][0])?Be[Ee]:[Be[Ee]]).concat([qe]):!pt&&!!je==!!tt?Be[Ee]=qe:Be[Ee]=Be[Ee].concat([qe]):Be[Ee]===void 0&&je?Be[Ee]=tt?qe:[qe]:pt&&!(Be[Ee]===void 0||Te(Ee,y.counts)||Te(Ee,y.bools))?Be[Ee]=[Be[Ee],qe]:Be[Ee]=qe}s(Ae,"setKey");function Oe(...se){se.forEach(function(le){Object.keys(le||{}).forEach(function(qe){y.aliases[qe]||(y.aliases[qe]=[].concat(a[qe]||[]),y.aliases[qe].concat(qe).forEach(function(Be){if(/-/.test(Be)&&c["camel-case-expansion"]){let Ee=xR(Be);Ee!==qe&&y.aliases[qe].indexOf(Ee)===-1&&(y.aliases[qe].push(Ee),h[Ee]=!0)}}),y.aliases[qe].concat(qe).forEach(function(Be){if(Be.length>1&&/[A-Z]/.test(Be)&&c["camel-case-expansion"]){let Ee=MJ(Be,"-");Ee!==qe&&y.aliases[qe].indexOf(Ee)===-1&&(y.aliases[qe].push(Ee),h[Ee]=!0)}}),y.aliases[qe].forEach(function(Be){y.aliases[Be]=[qe].concat(y.aliases[qe].filter(function(Ee){return Be!==Ee}))}))})})}s(Oe,"extendAliases");function Te(se,le){let qe=[].concat(y.aliases[se]||[],se),Be=Object.keys(le),Ee=qe.find(je=>Be.includes(je));return Ee?le[Ee]:!1}s(Te,"checkAllAliases");function Je(se){let le=Object.keys(y);return[].concat(le.map(Be=>y[Be])).some(function(Be){return Array.isArray(Be)?Be.includes(se):Be[se]})}s(Je,"hasAnyFlag");function Fe(se,...le){return[].concat(...le).some(function(Be){let Ee=se.match(Be);return Ee&&Je(Ee[1])})}s(Fe,"hasFlagsMatching");function lt(se){if(se.match(E)||!se.match(/^-[^-]+/))return!1;let le=!0,qe,Be=se.slice(1).split("");for(let Ee=0;Ee<Be.length;Ee++){if(qe=se.slice(Ee+2),!Je(Be[Ee])){le=!1;break}if(Be[Ee+1]&&Be[Ee+1]==="="||qe==="-"||/[A-Za-z]/.test(Be[Ee])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(qe)||Be[Ee+1]&&Be[Ee+1].match(/\W/))break}return le}s(lt,"hasAllShortFlags");function _t(se){return c["unknown-options-as-args"]&&xt(se)}s(_t,"isUnknownOptionAsArg");function xt(se){return se=se.replace(/^-{3,}/,"--"),se.match(E)||lt(se)?!1:!Fe(se,/^-+([^=]+?)=[\s\S]*$/,b,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(xt,"isUnknownOption");function ht(se){return!Te(se,y.bools)&&!Te(se,y.counts)&&`${se}`in l?l[se]:ue(Ue(se))}s(ht,"defaultValue");function ue(se){return{[Ch.BOOLEAN]:!0,[Ch.STRING]:"",[Ch.NUMBER]:void 0,[Ch.ARRAY]:[]}[se]}s(ue,"defaultForType");function Ue(se){let le=Ch.BOOLEAN;return Te(se,y.strings)?le=Ch.STRING:Te(se,y.numbers)?le=Ch.NUMBER:Te(se,y.bools)?le=Ch.BOOLEAN:Te(se,y.arrays)&&(le=Ch.ARRAY),le}s(Ue,"guessType");function ye(se){return se===void 0}s(ye,"isUndefined");function $e(){Object.keys(y.counts).find(se=>Te(se,y.arrays)?(S=Error(A("Invalid configuration: %s, opts.count excludes opts.array.",se)),!0):Te(se,y.nargs)?(S=Error(A("Invalid configuration: %s, opts.count excludes opts.narg.",se)),!0):!1)}return s($e,"checkConfiguration"),{aliases:Object.assign({},y.aliases),argv:Object.assign(L,B),configuration:c,defaulted:Object.assign({},g),error:S,newAliases:Object.assign({},h)}}};function V$t(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(V$t,"combineAliases");function d1e(t){return t!==void 0?t+1:1}s(d1e,"increment");function GGe(t){return t==="__proto__"?"___proto___":t}s(GGe,"sanitizeKey");function z$t(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(z$t,"stripQuotes");var YGe=require("fs");var f1e,p1e,m1e,VGe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,zGe=(p1e=(f1e=process==null?void 0:process.versions)===null||f1e===void 0?void 0:f1e.node)!==null&&p1e!==void 0?p1e:(m1e=process==null?void 0:process.version)===null||m1e===void 0?void 0:m1e.slice(1);if(zGe&&Number(zGe.match(/^([^.]+)/)[1])<VGe)throw Error(`yargs parser supports a minimum Node.js version of ${VGe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var K$t=process?process.env:{},JGe=new FJ({cwd:process.cwd,env:s(()=>K$t,"env"),format:KGe.format,normalize:OJ.normalize,resolve:OJ.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,YGe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),WO=s(function(e,r){return JGe.parse(e.slice(),r).argv},"Parser");WO.detailed=function(t,e){return JGe.parse(t.slice(),e)};WO.camelCase=xR;WO.decamelize=MJ;WO.looksLikeNumber=LJ;var XGe=WO;var SA=require("path");d();function Y$t(){return J$t()?0:1}s(Y$t,"getProcessArgvBinIndex");function J$t(){return X$t()&&!process.defaultApp}s(J$t,"isBundledElectronApp");function X$t(){return!!process.versions.electron}s(X$t,"isElectronApp");function ZGe(){return process.argv[Y$t()]}s(ZGe,"getProcessArgvBin");d();var na=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};d();d();var GB=require("fs"),eVe=require("util"),tVe=require("path");var rVe={fs:{readFileSync:GB.readFileSync,writeFile:GB.writeFile},format:eVe.format,resolve:tVe.resolve,exists:s(t=>{try{return(0,GB.statSync)(t).isFile()}catch{return!1}},"exists")};d();var wA,h1e=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),wA.format.apply(wA.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),wA.format.apply(wA.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);wA.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{wA.fs.readFileSync&&(e=JSON.parse(wA.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=wA.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=wA.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return wA.exists(e)}};function nVe(t,e){wA=e;let r=new h1e(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(nVe,"y18n");var Z$t=s(t=>nVe(t,rVe),"y18n"),iVe=Z$t;var eWt="require is not supported by ESM",oVe="loading a directory of commands is not supported yet for ESM",jO;try{jO=(0,cVe.fileURLToPath)(importMetaUrlShim)}catch{jO=process.cwd()}var tWt=jO.substring(0,jO.lastIndexOf("node_modules")),lVe={assert:{notStrictEqual:QJ.notStrictEqual,strictEqual:QJ.strictEqual},cliui:l1e,findUp:u1e,getEnv:s(t=>process.env[t],"getEnv"),inspect:sVe.inspect,getCallerFile:s(()=>{throw new na(oVe)},"getCallerFile"),getProcessArgvBin:ZGe,mainFilename:tWt||process.cwd(),Parser:XGe,path:{basename:SA.basename,dirname:SA.dirname,extname:SA.extname,relative:SA.relative,resolve:SA.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:aVe.readFileSync,require:s(()=>{throw new na(eWt)},"require"),requireDirectory:s(()=>{throw new na(oVe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:iVe({directory:(0,SA.resolve)(jO,"../../../locales"),updateFiles:!1})};d();d();d();function Tf(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(Tf,"assertNotStrictEqual");function g1e(t,e){e.assert.strictEqual(typeof t,"string")}s(g1e,"assertSingleKey");function VB(t){return Object.keys(t)}s(VB,"objectKeys");d();function ia(t){return!!t&&!!t.then&&typeof t.then=="function"}s(ia,"isPromise");d();d();d();function BT(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(BT,"parseCommand");var rWt=["first","second","third","fourth","fifth","sixth"];function Nr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[BT(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new na(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let f=o.demanded.length+o.optional.length;if(u>f)throw new na(`Too many arguments provided. Expected max ${f} but received ${u}.`);o.demanded.forEach(p=>{let m=l.shift(),h=uVe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&dVe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let m=l.shift(),h=uVe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&dVe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Nr,"argsert");function uVe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(uVe,"guessType");function dVe(t,e,r){throw new na(`Invalid ${rWt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(dVe,"argumentTypeError");var UJ=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Nr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function fVe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(fVe,"commandMiddlewareFactory");function ER(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(ia(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return ia(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s(ER,"applyMiddleware");d();function bR(t,e,r=n=>{throw n}){try{let n=nWt(t)?t():t;return ia(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(bR,"maybeAsyncResult");function nWt(t){return typeof t=="function"}s(nWt,"isFunction");d();function A1e(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(A1e,"whichModule");var zB=/(^\*)|(^\$0)/,y1e=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=fVe(o);if(i=i||(()=>{}),Array.isArray(e))if(iWt(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(sWt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(pVe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=BT(e);c=c.map(m=>BT(m).cmd);let f=!1,p=[u.cmd].concat(c).filter(m=>zB.test(m)?(f=!0,!1):!0);p.length===0&&f&&p.push("$0"),f&&(u.cmd=p[0],c=p.slice(1),e=e.replace(zB,u.cmd)),c.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,f,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},f&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),f=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(f,c,r,n.aliases,u,i,o,a);return ia(p)?p.then(m=>this.applyMiddlewareAndGetResult(f,c,m.innerArgv,l,o,m.aliases,r)):this.applyMiddlewareAndGetResult(f,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,f=n;if(qJ(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(ia(p))return p.then(m=>(f=hVe(m)?m:n,this.parseAndUpdateUsage(e,r,f,o,a,c)))}else oWt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),f=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{f.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,f,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return ia(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=zB.test(r.original)?r.original.replace(zB,"").trim():r.original,i=e.filter(o=>!zB.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=bR(n,f=>(u(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=ER(n,a,c,!1),n=bR(n,f=>{let p=r.handler(f);return ia(p)?p.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),ia(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),f=ER(n,c,u,!0);return ia(f)?f.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,f,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=BT(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(f=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(f)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(f=>{u.push(...l.aliases[f])}),Object.keys(l.argv).forEach(f=>{u.includes(f)&&(r[f]||(r[f]=l.argv[f]),!this.isInConfigs(i,f)&&!this.isDefaulted(i,f)&&Object.prototype.hasOwnProperty.call(e,f)&&Object.prototype.hasOwnProperty.call(l.argv,f)&&(Array.isArray(e[f])||Array.isArray(l.argv[f]))?e[f]=[].concat(e[f],l.argv[f]):e[f]=l.argv[f])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=zB.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(qJ(r))return r(e,!0);pVe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=A1e(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;Tf(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Tf(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function mVe(t,e,r,n){return new y1e(t,e,r,n)}s(mVe,"command");function pVe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(pVe,"isCommandBuilderDefinition");function iWt(t){return t.every(e=>typeof e=="string")}s(iWt,"isCommandAndAliases");function qJ(t){return typeof t=="function"}s(qJ,"isCommandBuilderCallback");function oWt(t){return typeof t=="object"}s(oWt,"isCommandBuilderOptionDefinitions");function sWt(t){return typeof t=="object"&&!Array.isArray(t)}s(sWt,"isCommandHandlerDefinition");d();d();function NT(t={},e=()=>!0){let r={};return VB(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(NT,"objFilter");d();function MT(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(MT,"setBlocking");function aWt(t){return typeof t=="boolean"}s(aWt,"isBoolean");function AVe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(U){i.push(U)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(U=!0,Z){let[J,j]=typeof U=="string"?[!0,U]:[U,Z];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,c=J,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(U,Z){let J=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let $=i[j];if(aWt($)){if(Z)throw Z;if(U)throw Error(U)}else $(U,Z,n)}else{if(t.getExitProcess()&&MT(!0),!l){l=!0,c&&(t.showHelp("error"),J.error()),(U||Z)&&J.error(U||Z);let j=o||a;j&&((U||Z)&&J.error(""),J.error(j))}if(Z=Z||new na(U),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,Z);throw Z}},"fail");let u=[],f=!1;n.usage=(Q,U)=>Q===null?(f=!0,u=[],n):(f=!1,u.push([Q,U||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>f,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(Q,U)=>{p.push([Q,U||""])};let m=[];n.command=s(function(U,Z,J,j,$=!1){J&&(m=m.map(X=>(X[2]=!1,X))),m.push([U,Z||"",J,j,$])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(U,Z){Array.isArray(U)?U.forEach(J=>{n.describe(J,Z)}):typeof U=="object"?Object.keys(U).forEach(J=>{n.describe(J,U[J])}):h[U]=Z},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=Q=>{g.push(Q)};let A=!1,y;n.wrap=Q=>{A=!0,y=Q},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(A||(y=Y(),A=!0),y);let E="__yargsString__:";n.deferY18nLookup=Q=>E+Q,n.help=s(function(){if(R)return R;S();let U=t.customScriptName?t.$0:e.path.basename(t.$0),Z=t.getDemandedOptions(),J=t.getDemandedCommands(),j=t.getDeprecatedOptions(),$=t.getGroups(),X=t.getOptions(),ie=[];ie=ie.concat(Object.keys(h)),ie=ie.concat(Object.keys(Z)),ie=ie.concat(Object.keys(J)),ie=ie.concat(Object.keys(X.default)),ie=ie.filter(L),ie=Object.keys(ie.reduce((Fe,lt)=>(lt!=="_"&&(Fe[lt]=!0),Fe),{}));let ae=n.getWrap(),te=e.cliui({width:ae,wrap:!!ae});if(!f){if(u.length)u.forEach(Fe=>{te.div({text:`${Fe[0].replace(/\$0/g,U)}`}),Fe[1]&&te.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),te.div();else if(m.length){let Fe=null;J._?Fe=`${U} <${r("command")}>
`:Fe=`${U} [${r("command")}]
`,te.div(`${Fe}`)}}if(m.length>1||m.length===1&&!m[0][2]){te.div(r("Commands:"));let Fe=t.getInternalMethods().getContext(),lt=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((xt,ht)=>xt[0].localeCompare(ht[0])));let _t=U?`${U} `:"";m.forEach(xt=>{let ht=`${_t}${lt}${xt[0].replace(/^\$0 ?/,"")}`;te.span({text:ht,padding:[0,2,0,2],width:b(m,ae,`${U}${lt}`)+4},{text:xt[1]});let ue=[];xt[2]&&ue.push(`[${r("default")}]`),xt[3]&&xt[3].length&&ue.push(`[${r("aliases:")} ${xt[3].join(", ")}]`),xt[4]&&(typeof xt[4]=="string"?ue.push(`[${r("deprecated: %s",xt[4])}]`):ue.push(`[${r("deprecated")}]`)),ue.length?te.div({text:ue.join(" "),padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}let pe=(Object.keys(X.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ie=ie.filter(Fe=>!t.parsed.newAliases[Fe]&&pe.every(lt=>(X.alias[lt]||[]).indexOf(Fe)===-1));let Ae=r("Options:");$[Ae]||($[Ae]=[]),B(ie,X.alias,$,Ae);let Oe=s(Fe=>/^--/.test(HJ(Fe)),"isLongSwitch"),Te=Object.keys($).filter(Fe=>$[Fe].length>0).map(Fe=>{let lt=$[Fe].filter(L).map(_t=>{if(pe.includes(_t))return _t;for(let xt=0,ht;(ht=pe[xt])!==void 0;xt++)if((X.alias[ht]||[]).includes(_t))return ht;return _t});return{groupName:Fe,normalizedKeys:lt}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:lt})=>{let _t=lt.reduce((xt,ht)=>(xt[ht]=[ht].concat(X.alias[ht]||[]).map(ue=>Fe===n.getPositionalGroupName()?ue:(/^[0-9]$/.test(ue)?X.boolean.includes(ht)?"-":"--":ue.length>1?"--":"-")+ue).sort((ue,Ue)=>Oe(ue)===Oe(Ue)?0:Oe(ue)?1:-1).join(", "),xt),{});return{groupName:Fe,normalizedKeys:lt,switches:_t}});if(Te.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:lt})=>!Fe.every(_t=>Oe(lt[_t])))&&Te.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:lt})=>{Fe.forEach(_t=>{Oe(lt[_t])&&(lt[_t]=cWt(lt[_t],4))})}),Te.forEach(({groupName:Fe,normalizedKeys:lt,switches:_t})=>{te.div(Fe),lt.forEach(xt=>{let ht=_t[xt],ue=h[xt]||"",Ue=null;ue.includes(E)&&(ue=r(ue.substring(E.length))),X.boolean.includes(xt)&&(Ue=`[${r("boolean")}]`),X.count.includes(xt)&&(Ue=`[${r("count")}]`),X.string.includes(xt)&&(Ue=`[${r("string")}]`),X.normalize.includes(xt)&&(Ue=`[${r("string")}]`),X.array.includes(xt)&&(Ue=`[${r("array")}]`),X.number.includes(xt)&&(Ue=`[${r("number")}]`);let ye=s(le=>typeof le=="string"?`[${r("deprecated: %s",le)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),$e=[xt in j?ye(j[xt]):null,Ue,xt in Z?`[${r("required")}]`:null,X.choices&&X.choices[xt]?`[${r("choices:")} ${n.stringifiedValues(X.choices[xt])}]`:null,O(X.default[xt],X.defaultDescription[xt])].filter(Boolean).join(" ");te.span({text:HJ(ht),padding:[0,2,0,2+gVe(ht)],width:b(_t,ae)+4},ue);let se=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;$e&&!se?te.div({text:$e,padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}),p.length&&(te.div(r("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,U)}),p.forEach(Fe=>{Fe[1]===""?te.div({text:Fe[0],padding:[0,2,0,2]}):te.div({text:Fe[0],padding:[0,2,0,2],width:b(p,ae)+4},{text:Fe[1]})}),te.div()),g.length>0){let Fe=g.map(lt=>lt.replace(/\$0/g,U)).join(`
`);te.div(`${Fe}
`)}return te.toString().replace(/\s*$/,"")},"help");function b(Q,U,Z){let J=0;return Array.isArray(Q)||(Q=Object.values(Q).map(j=>[j])),Q.forEach(j=>{J=Math.max(e.stringWidth(Z?`${Z} ${HJ(j[0])}`:HJ(j[0]))+gVe(j[0]),J)}),U&&(J=Math.min(J,parseInt((U*.5).toString(),10))),J}s(b,"maxWidth");function S(){let Q=t.getDemandedOptions(),U=t.getOptions();(Object.keys(U.alias)||[]).forEach(Z=>{U.alias[Z].forEach(J=>{h[J]&&n.describe(Z,h[J]),J in Q&&t.demandOption(Z,Q[J]),U.boolean.includes(J)&&t.boolean(Z),U.count.includes(J)&&t.count(Z),U.string.includes(J)&&t.string(Z),U.normalize.includes(J)&&t.normalize(Z),U.array.includes(J)&&t.array(Z),U.number.includes(J)&&t.number(Z)})})}s(S,"normalizeAliases");let R;n.cacheHelpMessage=function(){R=this.help()},n.clearCachedHelpMessage=function(){R=void 0},n.hasCachedHelpMessage=function(){return!!R};function B(Q,U,Z,J){let j=[],$=null;return Object.keys(Z).forEach(X=>{j=j.concat(Z[X])}),Q.forEach(X=>{$=[X].concat(U[X]),$.some(ie=>j.indexOf(ie)!==-1)||Z[J].push(X)}),j}s(B,"addUngroupedKeys");function L(Q){return t.getOptions().hiddenOptions.indexOf(Q)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(L,"filterHiddenOptions"),n.showHelp=Q=>{let U=t.getInternalMethods().getLoggerInstance();Q||(Q="error"),(typeof Q=="function"?Q:U[Q])(n.help())},n.functionDescription=Q=>["(",Q.name?e.Parser.decamelize(Q.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(U,Z){let J="",j=Z||", ",$=[].concat(U);return!U||!$.length||$.forEach(X=>{J.length&&(J+=j),J+=JSON.stringify(X)}),J},"stringifiedValues");function O(Q,U){let Z=`[${r("default:")} `;if(Q===void 0&&!U)return null;if(U)Z+=U;else switch(typeof Q){case"string":Z+=`"${Q}"`;break;case"object":Z+=JSON.stringify(Q);break;default:Z+=Q}return`${Z}]`}s(O,"defaultString");function Y(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(Y,"windowWidth");let V=null;n.version=Q=>{V=Q},n.showVersion=Q=>{let U=t.getInternalMethods().getLoggerInstance();Q||(Q="error"),(typeof Q=="function"?Q:U[Q])(V)},n.reset=s(function(U){return o=null,l=!1,u=[],f=!1,g=[],p=[],m=[],h=NT(h,Z=>!U[Z]),n},"reset");let z=[];return n.freeze=s(function(){z.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(U=!1){let Z=z.pop();Z&&(U?(h={...Z.descriptions,...h},m=[...Z.commands,...m],u=[...Z.usages,...u],p=[...Z.examples,...p],g=[...Z.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h}=Z)},"unfreeze"),n}s(AVe,"usage");function C1e(t){return typeof t=="object"}s(C1e,"isIndentedText");function cWt(t,e){return C1e(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(cWt,"addIndentation");function gVe(t){return C1e(t)?t.indentation:0}s(gVe,"getIndentation");function HJ(t){return C1e(t)?t.text:t}s(HJ,"getText");d();d();var yVe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,CVe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var v1e=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if(qJ(u)){this.indexAfterLastReset=c+1;let f=this.yargs.getInternalMethods().reset();return u(f,!0),f.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=BT(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(E=>{let b=h[E];return typeof b=="string"&&b.length>0}),A=g?h[g]:void 0,y=(l=(c=h[e])!==null&&c!==void 0?c:A)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${y.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let f=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!f(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(Tf(this.customCompletionFunction,null,this.shim),uWt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return ia(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return dWt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return ia(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?CVe:yVe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function vVe(t,e,r,n){return new v1e(t,e,r,n)}s(vVe,"completion");function uWt(t){return t.length<3}s(uWt,"isSyncCompletionFunction");function dWt(t){return t.length>3}s(dWt,"isFallbackCompletionFunction");d();d();function xVe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(xVe,"levenshtein");var EVe=["$0","--","_"];function bVe(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let y of Object.keys(h)){let E=h[y];E&&g.indexOf(E)<0&&g.push(E)}let A=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+A))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,A=!0){var y;let E=t.getInternalMethods().getCommandInstance().getCommands(),b=[],S=t.getInternalMethods().getContext();if(Object.keys(p).forEach(R=>{!EVe.includes(R)&&!Object.prototype.hasOwnProperty.call(h,R)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),R)&&!o.isValidAndSomeAliasIsNotNew(R,m)&&b.push(R)}),A&&(S.commands.length>0||E.length>0||g)&&p._.slice(S.commands.length).forEach(R=>{E.includes(""+R)||b.push(""+R)}),A){let B=((y=t.getDemandedCommands()._)===null||y===void 0?void 0:y.max)||0,L=S.commands.length+B;L<p._.length&&p._.slice(L).forEach(O=>{O=String(O),!S.commands.includes(O)&&!b.includes(O)&&b.push(O)})}b.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",b.length,b.map(R=>R.trim()?R:`"${R}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(A=>{m.includes(""+A)||h.push(""+A)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(y=>{EVe.indexOf(y)===-1&&Object.prototype.hasOwnProperty.call(m.choices,y)&&[].concat(p[y]).forEach(E=>{m.choices[y].indexOf(E)===-1&&E!==void 0&&(h[y]=(h[y]||[]).concat(E))})});let g=Object.keys(h);if(!g.length)return;let A=n("Invalid values:");g.forEach(y=>{A+=`
  ${n("Argument: %s, Given: %s, Choices: %s",y,e.stringifiedValues(h[y]),e.stringifiedValues(m.choices[y]))}`}),e.fail(A)},"limitedChoices");let a={};o.implies=s(function(p,m){Nr("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(Tf(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(f,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=f._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(f,p)):p=Object.prototype.hasOwnProperty.call(f,p),p}s(c,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(A=>{let y=g,E=A;y=c(p,y),A=c(p,A),y&&!A&&m.push(` ${g} -> ${E}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let l={};o.conflicts=s(function(p,m){Nr("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):l[p].push(m))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{l[m]&&l[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(m=>{l[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((y,E)=>E.length-y.length);let g=null,A=1/0;for(let y=0,E;(E=m[y])!==void 0;y++){let b=xVe(p,E);b<=3&&b<A&&(A=b,g=E)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=NT(a,m=>!p[m]),l=NT(l,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();Tf(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s(bVe,"validation");d();var x1e=[],GO;function $J(t,e,r,n){GO=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=pWt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}fWt(a),x1e.push(a),i=o?JSON.parse(GO.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=$J(i,GO.path.dirname(a),r,GO)}return x1e=[],r?IVe(i,t):Object.assign({},i,t)}s($J,"applyExtends");function fWt(t){if(x1e.indexOf(t)>-1)throw new na(`Circular extended configurations: '${t}'.`)}s(fWt,"checkForCircularExtends");function pWt(t,e){return GO.path.resolve(t,e)}s(pWt,"getPathToDefaultConfig");function IVe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=IVe(t[i],e[i]):r[i]=e[i];return r}s(IVe,"mergeDeep");var Lr=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},he=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Mc,IR,VO,vh,qp,WJ,LT,TR,jJ,xh,GJ,Eh,QC,Hp,bh,VJ,KB,au,nn,zJ,KJ,$p,wR,YB,SR,FT,YJ,Vn,_R,RR,kR,ci,JJ,UC,ac;function WVe(t){return(e=[],r=t.process.cwd(),n)=>{let i=new D1e(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(WVe,"YargsFactory");var TVe=Symbol("copyDoubleDash"),wVe=Symbol("copyDoubleDash"),E1e=Symbol("deleteFromParserHintObject"),SVe=Symbol("emitWarning"),_Ve=Symbol("freeze"),RVe=Symbol("getDollarZero"),PR=Symbol("getParserConfiguration"),kVe=Symbol("getUsageConfiguration"),b1e=Symbol("guessLocale"),PVe=Symbol("guessVersion"),DVe=Symbol("parsePositionalNumbers"),I1e=Symbol("pkgUp"),OT=Symbol("populateParserHintArray"),JB=Symbol("populateParserHintSingleValueDictionary"),T1e=Symbol("populateParserHintArrayDictionary"),w1e=Symbol("populateParserHintDictionary"),S1e=Symbol("sanitizeKey"),_1e=Symbol("setKey"),R1e=Symbol("unfreeze"),BVe=Symbol("validateAsync"),NVe=Symbol("getCommandInstance"),MVe=Symbol("getContext"),LVe=Symbol("getHasOutput"),FVe=Symbol("getLoggerInstance"),OVe=Symbol("getParseContext"),QVe=Symbol("getUsageInstance"),UVe=Symbol("getValidationInstance"),XJ=Symbol("hasParseCallback"),qVe=Symbol("isGlobalContext"),DR=Symbol("postProcess"),HVe=Symbol("rebase"),k1e=Symbol("reset"),zO=Symbol("runYargsParserAndExecuteCommands"),P1e=Symbol("runValidation"),$Ve=Symbol("setHasOutput"),BR=Symbol("kTrackManuallySetKeys"),D1e=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,Mc.set(this,void 0),IR.set(this,void 0),VO.set(this,{commands:[],fullCommands:[]}),vh.set(this,null),qp.set(this,null),WJ.set(this,"show-hidden"),LT.set(this,null),TR.set(this,!0),jJ.set(this,{}),xh.set(this,!0),GJ.set(this,[]),Eh.set(this,void 0),QC.set(this,{}),Hp.set(this,!1),bh.set(this,null),VJ.set(this,!0),KB.set(this,void 0),au.set(this,""),nn.set(this,void 0),zJ.set(this,void 0),KJ.set(this,{}),$p.set(this,null),wR.set(this,null),YB.set(this,{}),SR.set(this,{}),FT.set(this,void 0),YJ.set(this,!1),Vn.set(this,void 0),_R.set(this,!1),RR.set(this,!1),kR.set(this,!1),ci.set(this,void 0),JJ.set(this,{}),UC.set(this,null),ac.set(this,void 0),Lr(this,Vn,i,"f"),Lr(this,FT,e,"f"),Lr(this,IR,r,"f"),Lr(this,zJ,n,"f"),Lr(this,Eh,new UJ(this),"f"),this.$0=this[RVe](),this[k1e](),Lr(this,Mc,he(this,Mc,"f"),"f"),Lr(this,ci,he(this,ci,"f"),"f"),Lr(this,ac,he(this,ac,"f"),"f"),Lr(this,nn,he(this,nn,"f"),"f"),he(this,nn,"f").showHiddenOpt=he(this,WJ,"f"),Lr(this,KB,this[wVe](),"f")}addHelpOpt(e,r){let n="help";return Nr("[string|boolean] [string]",[e,r],arguments.length),he(this,bh,"f")&&(this[E1e](he(this,bh,"f")),Lr(this,bh,null,"f")),e===!1&&r===void 0?this:(Lr(this,bh,typeof e=="string"?e:n,"f"),this.boolean(he(this,bh,"f")),this.describe(he(this,bh,"f"),r||he(this,ci,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Nr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:he(this,WJ,"f");return this.boolean(n),this.describe(n,r||he(this,ci,"f").deferY18nLookup("Show hidden options")),he(this,nn,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Nr("<object|string|array> [string|array]",[e,r],arguments.length),this[T1e](this.alias.bind(this),"alias",e,r),this}array(e){return Nr("<array|string>",[e],arguments.length),this[OT]("array",e),this[BR](e),this}boolean(e){return Nr("<array|string>",[e],arguments.length),this[OT]("boolean",e),this[BR](e),this}check(e,r){return Nr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>bR(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&he(this,ci,"f").fail(o.toString(),o):he(this,ci,"f").fail(he(this,Vn,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(he(this,ci,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Nr("<object|string|array> [string|array]",[e,r],arguments.length),this[T1e](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Nr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new na("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new na("coerce callback must be provided");return he(this,nn,"f").key[e]=!0,he(this,Eh,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?bR(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new na(c.message)}):n},e),this}conflicts(e,r){return Nr("<string|object> [string|array]",[e,r],arguments.length),he(this,ac,"f").conflicts(e,r),this}config(e="config",r,n){return Nr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=$J(e,he(this,IR,"f"),this[PR]()["deep-merge-config"]||!1,he(this,Vn,"f")),he(this,nn,"f").configObjects=(he(this,nn,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||he(this,ci,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{he(this,nn,"f").config[i]=n||!0}),this)}completion(e,r,n){return Nr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Lr(this,qp,e||he(this,qp,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(he(this,qp,"f"),r),n&&he(this,vh,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Nr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),he(this,Mc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Nr("<string> [object]",[e,r],arguments.length);let n=he(this,zJ,"f")||he(this,Vn,"f").require;return he(this,Mc,"f").addDirectory(e,n,he(this,Vn,"f").getCallerFile(),r),this}count(e){return Nr("<array|string>",[e],arguments.length),this[OT]("count",e),this[BR](e),this}default(e,r,n){return Nr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(g1e(e,he(this,Vn,"f")),he(this,nn,"f").defaultDescription[e]=n),typeof r=="function"&&(g1e(e,he(this,Vn,"f")),he(this,nn,"f").defaultDescription[e]||(he(this,nn,"f").defaultDescription[e]=he(this,ci,"f").functionDescription(r)),r=r.call()),this[JB](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Nr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),he(this,nn,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{Tf(n,!0,he(this,Vn,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Tf(n,!0,he(this,Vn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{Tf(n,!0,he(this,Vn,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Nr("<object|string|array> [string]",[e,r],arguments.length),this[JB](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Nr("<string> [string|boolean]",[e,r],arguments.length),he(this,nn,"f").deprecatedOptions[e]=r,this}describe(e,r){return Nr("<object|string|array> [string]",[e,r],arguments.length),this[_1e](e,!0),he(this,ci,"f").describe(e,r),this}detectLocale(e){return Nr("<boolean>",[e],arguments.length),Lr(this,TR,e,"f"),this}env(e){return Nr("[string|boolean]",[e],arguments.length),e===!1?delete he(this,nn,"f").envPrefix:he(this,nn,"f").envPrefix=e||"",this}epilogue(e){return Nr("<string>",[e],arguments.length),he(this,ci,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Nr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):he(this,ci,"f").example(e,r),this}exit(e,r){Lr(this,Hp,!0,"f"),Lr(this,LT,r,"f"),he(this,xh,"f")&&he(this,Vn,"f").process.exit(e)}exitProcess(e=!0){return Nr("[boolean]",[e],arguments.length),Lr(this,xh,e,"f"),this}fail(e){if(Nr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new na("Invalid first argument. Expected function or boolean 'false'");return he(this,ci,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Nr("<array> [function]",[e,r],arguments.length),r?he(this,vh,"f").getCompletion(e,r):new Promise((n,i)=>{he(this,vh,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Nr([],0),he(this,nn,"f").demandedOptions}getDemandedCommands(){return Nr([],0),he(this,nn,"f").demandedCommands}getDeprecatedOptions(){return Nr([],0),he(this,nn,"f").deprecatedOptions}getDetectLocale(){return he(this,TR,"f")}getExitProcess(){return he(this,xh,"f")}getGroups(){return Object.assign({},he(this,QC,"f"),he(this,SR,"f"))}getHelp(){if(Lr(this,Hp,!0,"f"),!he(this,ci,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[zO](he(this,FT,"f"),void 0,void 0,0,!0);if(ia(r))return r.then(()=>he(this,ci,"f").help())}let e=he(this,Mc,"f").runDefaultBuilderOn(this);if(ia(e))return e.then(()=>he(this,ci,"f").help())}return Promise.resolve(he(this,ci,"f").help())}getOptions(){return he(this,nn,"f")}getStrict(){return he(this,_R,"f")}getStrictCommands(){return he(this,RR,"f")}getStrictOptions(){return he(this,kR,"f")}global(e,r){return Nr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?he(this,nn,"f").local=he(this,nn,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{he(this,nn,"f").local.includes(n)||he(this,nn,"f").local.push(n)}),this}group(e,r){Nr("<string|array> <string>",[e,r],arguments.length);let n=he(this,SR,"f")[r]||he(this,QC,"f")[r];he(this,SR,"f")[r]&&delete he(this,SR,"f")[r];let i={};return he(this,QC,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Nr("<string>",[e],arguments.length),he(this,nn,"f").hiddenOptions.push(e),this}implies(e,r){return Nr("<string|object> [number|string|array]",[e,r],arguments.length),he(this,ac,"f").implies(e,r),this}locale(e){return Nr("[string]",[e],arguments.length),e===void 0?(this[b1e](),he(this,Vn,"f").y18n.getLocale()):(Lr(this,TR,!1,"f"),he(this,Vn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return he(this,Eh,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Nr("<string|object|array> [number]",[e,r],arguments.length),this[JB](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Nr("<array|string>",[e],arguments.length),this[OT]("normalize",e),this}number(e){return Nr("<array|string>",[e],arguments.length),this[OT]("number",e),this[BR](e),this}option(e,r){if(Nr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[BR](e),he(this,UC,"f")&&(e==="version"||r?.alias==="version")&&this[SVe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),he(this,nn,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(he(this,nn,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=he(this,ci,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Nr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[_Ve](),typeof e>"u"&&(e=he(this,FT,"f")),typeof r=="object"&&(Lr(this,wR,r,"f"),r=n),typeof r=="function"&&(Lr(this,$p,r,"f"),r=!1),r||Lr(this,FT,e,"f"),he(this,$p,"f")&&Lr(this,xh,!1,"f");let i=this[zO](e,!!r),o=this.parsed;return he(this,vh,"f").setParsed(this.parsed),ia(i)?i.then(a=>(he(this,$p,"f")&&he(this,$p,"f").call(this,he(this,LT,"f"),a,he(this,au,"f")),a)).catch(a=>{throw he(this,$p,"f")&&he(this,$p,"f")(a,this.parsed.argv,he(this,au,"f")),a}).finally(()=>{this[R1e](),this.parsed=o}):(he(this,$p,"f")&&he(this,$p,"f").call(this,he(this,LT,"f"),i,he(this,au,"f")),this[R1e](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return ia(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(ia(i))throw new na(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Nr("<object>",[e],arguments.length),Lr(this,KJ,e,"f"),this}pkgConf(e,r){Nr("<string> [string]",[e,r],arguments.length);let n=null,i=this[I1e](r||he(this,IR,"f"));return i[e]&&typeof i[e]=="object"&&(n=$J(i[e],r||he(this,IR,"f"),this[PR]()["deep-merge-config"]||!1,he(this,Vn,"f")),he(this,nn,"f").configObjects=(he(this,nn,"f").configObjects||[]).concat(n)),this}positional(e,r){Nr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=NT(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=he(this,VO,"f").fullCommands[he(this,VO,"f").fullCommands.length-1],o=i?he(this,Mc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return VB(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,he(this,ci,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Nr("[boolean]",[e],arguments.length),Lr(this,YJ,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Nr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&he(this,nn,"f").narg[e]?this:(this[JB](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Nr("[string] [string]",[e,r],arguments.length),e=e||this.$0,he(this,KB,"f").log(he(this,vh,"f").generateCompletionScript(e,r||he(this,qp,"f")||"completion")),this}showHelp(e){if(Nr("[string|function]",[e],arguments.length),Lr(this,Hp,!0,"f"),!he(this,ci,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[zO](he(this,FT,"f"),void 0,void 0,0,!0);if(ia(n))return n.then(()=>{he(this,ci,"f").showHelp(e)}),this}let r=he(this,Mc,"f").runDefaultBuilderOn(this);if(ia(r))return r.then(()=>{he(this,ci,"f").showHelp(e)}),this}return he(this,ci,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Nr("[boolean|string] [string]",[e,r],arguments.length),he(this,ci,"f").showHelpOnFail(e,r),this}showVersion(e){return Nr("[string|function]",[e],arguments.length),he(this,ci,"f").showVersion(e),this}skipValidation(e){return Nr("<array|string>",[e],arguments.length),this[OT]("skipValidation",e),this}strict(e){return Nr("[boolean]",[e],arguments.length),Lr(this,_R,e!==!1,"f"),this}strictCommands(e){return Nr("[boolean]",[e],arguments.length),Lr(this,RR,e!==!1,"f"),this}strictOptions(e){return Nr("[boolean]",[e],arguments.length),Lr(this,kR,e!==!1,"f"),this}string(e){return Nr("<array|string>",[e],arguments.length),this[OT]("string",e),this[BR](e),this}terminalWidth(){return Nr([],0),he(this,Vn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Nr("<object>",[e],arguments.length),Lr(this,TR,!1,"f"),he(this,Vn,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Nr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(Tf(e,null,he(this,Vn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new na(".usage() description must start with $0 if being used as alias for .command()")}else return he(this,ci,"f").usage(e),this}usageConfiguration(e){return Nr("<object>",[e],arguments.length),Lr(this,JJ,e,"f"),this}version(e,r,n){let i="version";if(Nr("[boolean|string] [string] [string]",[e,r,n],arguments.length),he(this,UC,"f")&&(this[E1e](he(this,UC,"f")),he(this,ci,"f").version(void 0),Lr(this,UC,null,"f")),arguments.length===0)n=this[PVe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Lr(this,UC,typeof e=="string"?e:i,"f"),r=r||he(this,ci,"f").deferY18nLookup("Show version number"),he(this,ci,"f").version(n||void 0),this.boolean(he(this,UC,"f")),this.describe(he(this,UC,"f"),r),this}wrap(e){return Nr("<number|null|undefined>",[e],arguments.length),he(this,ci,"f").wrap(e),this}[(Mc=new WeakMap,IR=new WeakMap,VO=new WeakMap,vh=new WeakMap,qp=new WeakMap,WJ=new WeakMap,LT=new WeakMap,TR=new WeakMap,jJ=new WeakMap,xh=new WeakMap,GJ=new WeakMap,Eh=new WeakMap,QC=new WeakMap,Hp=new WeakMap,bh=new WeakMap,VJ=new WeakMap,KB=new WeakMap,au=new WeakMap,nn=new WeakMap,zJ=new WeakMap,KJ=new WeakMap,$p=new WeakMap,wR=new WeakMap,YB=new WeakMap,SR=new WeakMap,FT=new WeakMap,YJ=new WeakMap,Vn=new WeakMap,_R=new WeakMap,RR=new WeakMap,kR=new WeakMap,ci=new WeakMap,JJ=new WeakMap,UC=new WeakMap,ac=new WeakMap,TVe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[wVe](){return{log:s((...e)=>{this[XJ]()||console.log(...e),Lr(this,Hp,!0,"f"),he(this,au,"f").length&&Lr(this,au,he(this,au,"f")+`
`,"f"),Lr(this,au,he(this,au,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[XJ]()||console.error(...e),Lr(this,Hp,!0,"f"),he(this,au,"f").length&&Lr(this,au,he(this,au,"f")+`
`,"f"),Lr(this,au,he(this,au,"f")+e.join(" "),"f")},"error")}}[E1e](e){VB(he(this,nn,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=he(this,nn,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete he(this,ci,"f").getDescriptions()[e]}[SVe](e,r,n){he(this,jJ,"f")[n]||(he(this,Vn,"f").process.emitWarning(e,r),he(this,jJ,"f")[n]=!0)}[_Ve](){he(this,GJ,"f").push({options:he(this,nn,"f"),configObjects:he(this,nn,"f").configObjects.slice(0),exitProcess:he(this,xh,"f"),groups:he(this,QC,"f"),strict:he(this,_R,"f"),strictCommands:he(this,RR,"f"),strictOptions:he(this,kR,"f"),completionCommand:he(this,qp,"f"),output:he(this,au,"f"),exitError:he(this,LT,"f"),hasOutput:he(this,Hp,"f"),parsed:this.parsed,parseFn:he(this,$p,"f"),parseContext:he(this,wR,"f")}),he(this,ci,"f").freeze(),he(this,ac,"f").freeze(),he(this,Mc,"f").freeze(),he(this,Eh,"f").freeze()}[RVe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(he(this,Vn,"f").process.argv()[0])?r=he(this,Vn,"f").process.argv().slice(1,2):r=he(this,Vn,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[HVe](he(this,IR,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),he(this,Vn,"f").getEnv("_")&&he(this,Vn,"f").getProcessArgvBin()===he(this,Vn,"f").getEnv("_")&&(e=he(this,Vn,"f").getEnv("_").replace(`${he(this,Vn,"f").path.dirname(he(this,Vn,"f").process.execPath())}/`,"")),e}[PR](){return he(this,KJ,"f")}[kVe](){return he(this,JJ,"f")}[b1e](){if(!he(this,TR,"f"))return;let e=he(this,Vn,"f").getEnv("LC_ALL")||he(this,Vn,"f").getEnv("LC_MESSAGES")||he(this,Vn,"f").getEnv("LANG")||he(this,Vn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[PVe](){return this[I1e]().version||"unknown"}[DVe](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)he(this,Vn,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[I1e](e){let r=e||"*";if(he(this,YB,"f")[r])return he(this,YB,"f")[r];let n={};try{let i=e||he(this,Vn,"f").mainFilename;!e&&he(this,Vn,"f").path.extname(i)&&(i=he(this,Vn,"f").path.dirname(i));let o=he(this,Vn,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});Tf(o,void 0,he(this,Vn,"f")),n=JSON.parse(he(this,Vn,"f").readFileSync(o,"utf8"))}catch{}return he(this,YB,"f")[r]=n||{},he(this,YB,"f")[r]}[OT](e,r){r=[].concat(r),r.forEach(n=>{n=this[S1e](n),he(this,nn,"f")[e].push(n)})}[JB](e,r,n,i){this[w1e](e,r,n,i,(o,a,c)=>{he(this,nn,"f")[o][a]=c})}[T1e](e,r,n,i){this[w1e](e,r,n,i,(o,a,c)=>{he(this,nn,"f")[o][a]=(he(this,nn,"f")[o][a]||[]).concat(c)})}[w1e](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of VB(n))e(a,n[a]);else o(r,this[S1e](n),i)}[S1e](e){return e==="__proto__"?"___proto___":e}[_1e](e,r){return this[JB](this[_1e].bind(this),"key",e,r),this}[R1e](){var e,r,n,i,o,a,c,l,u,f,p,m;let h=he(this,GJ,"f").pop();Tf(h,void 0,he(this,Vn,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,f=this,p=this,m=this,{options:{set value(A){Lr(e,nn,A,"f")}}.value,configObjects:g,exitProcess:{set value(A){Lr(r,xh,A,"f")}}.value,groups:{set value(A){Lr(n,QC,A,"f")}}.value,output:{set value(A){Lr(i,au,A,"f")}}.value,exitError:{set value(A){Lr(o,LT,A,"f")}}.value,hasOutput:{set value(A){Lr(a,Hp,A,"f")}}.value,parsed:this.parsed,strict:{set value(A){Lr(c,_R,A,"f")}}.value,strictCommands:{set value(A){Lr(l,RR,A,"f")}}.value,strictOptions:{set value(A){Lr(u,kR,A,"f")}}.value,completionCommand:{set value(A){Lr(f,qp,A,"f")}}.value,parseFn:{set value(A){Lr(p,$p,A,"f")}}.value,parseContext:{set value(A){Lr(m,wR,A,"f")}}.value}=h,he(this,nn,"f").configObjects=g,he(this,ci,"f").unfreeze(),he(this,ac,"f").unfreeze(),he(this,Mc,"f").unfreeze(),he(this,Eh,"f").unfreeze()}[BVe](e,r){return bR(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[NVe].bind(this),getContext:this[MVe].bind(this),getHasOutput:this[LVe].bind(this),getLoggerInstance:this[FVe].bind(this),getParseContext:this[OVe].bind(this),getParserConfiguration:this[PR].bind(this),getUsageConfiguration:this[kVe].bind(this),getUsageInstance:this[QVe].bind(this),getValidationInstance:this[UVe].bind(this),hasParseCallback:this[XJ].bind(this),isGlobalContext:this[qVe].bind(this),postProcess:this[DR].bind(this),reset:this[k1e].bind(this),runValidation:this[P1e].bind(this),runYargsParserAndExecuteCommands:this[zO].bind(this),setHasOutput:this[$Ve].bind(this)}}[NVe](){return he(this,Mc,"f")}[MVe](){return he(this,VO,"f")}[LVe](){return he(this,Hp,"f")}[FVe](){return he(this,KB,"f")}[OVe](){return he(this,wR,"f")||{}}[QVe](){return he(this,ci,"f")}[UVe](){return he(this,ac,"f")}[XJ](){return!!he(this,$p,"f")}[qVe](){return he(this,VJ,"f")}[DR](e,r,n,i){return n||ia(e)||(r||(e=this[TVe](e)),(this[PR]()["parse-positional-numbers"]||this[PR]()["parse-positional-numbers"]===void 0)&&(e=this[DVe](e)),i&&(e=ER(e,this,he(this,Eh,"f").getMiddleware(),!1))),e}[k1e](e={}){Lr(this,nn,he(this,nn,"f")||{},"f");let r={};r.local=he(this,nn,"f").local||[],r.configObjects=he(this,nn,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(he(this,SR,"f"),Object.keys(he(this,QC,"f")).reduce((a,c)=>{let l=he(this,QC,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),Lr(this,QC,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(he(this,nn,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=NT(he(this,nn,"f")[a],c=>!n[c])}),r.envPrefix=he(this,nn,"f").envPrefix,Lr(this,nn,r,"f"),Lr(this,ci,he(this,ci,"f")?he(this,ci,"f").reset(n):AVe(this,he(this,Vn,"f")),"f"),Lr(this,ac,he(this,ac,"f")?he(this,ac,"f").reset(n):bVe(this,he(this,ci,"f"),he(this,Vn,"f")),"f"),Lr(this,Mc,he(this,Mc,"f")?he(this,Mc,"f").reset():mVe(he(this,ci,"f"),he(this,ac,"f"),he(this,Eh,"f"),he(this,Vn,"f")),"f"),he(this,vh,"f")||Lr(this,vh,vVe(this,he(this,ci,"f"),he(this,Mc,"f"),he(this,Vn,"f")),"f"),he(this,Eh,"f").reset(),Lr(this,qp,null,"f"),Lr(this,au,"","f"),Lr(this,LT,null,"f"),Lr(this,Hp,!1,"f"),this.parsed=!1,this}[HVe](e,r){return he(this,Vn,"f").path.relative(e,r)}[zO](e,r,n,i=0,o=!1){let a=!!n||o;e=e||he(this,FT,"f"),he(this,nn,"f").__=he(this,Vn,"f").y18n.__,he(this,nn,"f").configuration=this[PR]();let c=!!he(this,nn,"f").configuration["populate--"],l=Object.assign({},he(this,nn,"f").configuration,{"populate--":!0}),u=he(this,Vn,"f").Parser.detailed(e,Object.assign({},he(this,nn,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),f=Object.assign(u.argv,he(this,wR,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(f).forEach(A=>{A===he(this,bh,"f")&&f[A]?h=!0:A===he(this,UC,"f")&&f[A]&&(g=!0)}),f.$0=this.$0,this.parsed=u,i===0&&he(this,ci,"f").clearCachedHelpMessage();try{if(this[b1e](),r)return this[DR](f,c,!!n,!1);he(this,bh,"f")&&[he(this,bh,"f")].concat(m[he(this,bh,"f")]||[]).filter(S=>S.length>1).includes(""+f._[f._.length-1])&&(f._.pop(),h=!0),Lr(this,VJ,!1,"f");let A=he(this,Mc,"f").getCommands(),y=he(this,vh,"f").completionKey in f,E=h||y||o;if(f._.length){if(A.length){let b;for(let S=i||0,R;f._[S]!==void 0;S++)if(R=String(f._[S]),A.includes(R)&&R!==he(this,qp,"f")){let B=he(this,Mc,"f").runCommand(R,this,u,S+1,o,h||g||o);return this[DR](B,c,!!n,!1)}else if(!b&&R!==he(this,qp,"f")){b=R;break}!he(this,Mc,"f").hasDefaultCommand()&&he(this,YJ,"f")&&b&&!E&&he(this,ac,"f").recommendCommands(b,A)}he(this,qp,"f")&&f._.includes(he(this,qp,"f"))&&!y&&(he(this,xh,"f")&&MT(!0),this.showCompletionScript(),this.exit(0))}if(he(this,Mc,"f").hasDefaultCommand()&&!E){let b=he(this,Mc,"f").runCommand(null,this,u,0,o,h||g||o);return this[DR](b,c,!!n,!1)}if(y){he(this,xh,"f")&&MT(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${he(this,vh,"f").completionKey}`)+1);return he(this,vh,"f").getCompletion(b,(S,R)=>{if(S)throw new na(S.message);(R||[]).forEach(B=>{he(this,KB,"f").log(B)}),this.exit(0)}),this[DR](f,!c,!!n,!1)}if(he(this,Hp,"f")||(h?(he(this,xh,"f")&&MT(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(he(this,xh,"f")&&MT(!0),a=!0,he(this,ci,"f").showVersion("log"),this.exit(0))),!a&&he(this,nn,"f").skipValidation.length>0&&(a=Object.keys(f).some(b=>he(this,nn,"f").skipValidation.indexOf(b)>=0&&f[b]===!0)),!a){if(u.error)throw new na(u.error.message);if(!y){let b=this[P1e](m,{},u.error);n||(p=ER(f,this,he(this,Eh,"f").getMiddleware(),!0)),p=this[BVe](b,p??f),ia(p)&&!n&&(p=p.then(()=>ER(f,this,he(this,Eh,"f").getMiddleware(),!1)))}}}catch(A){if(A instanceof na)he(this,ci,"f").fail(A.message,A);else throw A}return this[DR](p??f,c,!!n,!0)}[P1e](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new na(n.message);he(this,ac,"f").nonOptionCount(a),he(this,ac,"f").requiredArguments(a,o);let c=!1;he(this,RR,"f")&&(c=he(this,ac,"f").unknownCommands(a)),he(this,_R,"f")&&!c?he(this,ac,"f").unknownArguments(a,e,r,!!i):he(this,kR,"f")&&he(this,ac,"f").unknownArguments(a,e,{},!1,!1),he(this,ac,"f").limitedChoices(a),he(this,ac,"f").implications(a),he(this,ac,"f").conflicting(a)}}[$Ve](){Lr(this,Hp,!0,"f")}[BR](e){if(typeof e=="string")he(this,nn,"f").key[e]=!0;else for(let r of e)he(this,nn,"f").key[r]=!0}};function hVe(t){return!!t&&typeof t.getInternalMethods=="function"}s(hVe,"isYargsInstance");var mWt=WVe(lVe),jVe=mWt;d();d();d();var GVe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function VVe(t,e,r){let n=Gr.createAndMarkAsIssued({authSource:e,authType:r});return Bt(t,GVe.NewGitHubLogin,n)}s(VVe,"telemetryNewGitHubLogin");function zVe(t,e){let r=Gr.createAndMarkAsIssued({authType:e});return Bt(t,GVe.GitHubLoginSuccess,r)}s(zVe,"telemetryGitHubLoginSuccess");var B1e=class extends ba{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function hWt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...vp(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(Hr).fetch(o,n)}catch(a){throw a instanceof Error&&i6(a)?new ba(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new ba(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(hWt,"requestDeviceFlowStage1");async function gWt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...vp(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(Hr).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new B1e(a):new ba(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(gWt,"requestDeviceFlowStage2");async function AWt(t,e){zVe(t,"deviceFlow");let n=await(await Ym(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new ba(`Error retrieving user information: ${String(n.errors)}`);return n}s(AWt,"requestUserInfo");var wf=class{constructor(e){this.ctx=e;this.pendingSignIn=void 0}static{s(this,"GitHubDeviceFlow")}get authManager(){return this.ctx.get(Ki)}get authPersistence(){return this.ctx.get(dA)}async save(e){let r=new URL(e.serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e.accessToken,user:e.login,githubAppId:e.githubAppId,authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n,freshSignIn:n})}async initiate(e,r){let n=e?.githubAppId??this.ctx.get(nu).findAppIdToAuthenticate();r??=this.authManager.getConfiguredUrls();try{let i=await this.getTokenUnguarded(n,r),o=i.waitForAuth.then(async a=>(this.ctx.get(nu).githubAppId=n,await this.save(a)));return o.catch(()=>{}),this.pendingSignIn={verificationUri:i.verification_uri,status:o},i}catch(i){throw this.ctx.get(u0).notifyUser(this.ctx,i),i}}async abandon(){let{serverUrl:e}=this.authManager.getConfiguredUrls(),r=new URL(e).hostname;await this.authPersistence.deleteAuthRecord({authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n})}async getTokenUnguarded(e,r){let n=this.ctx;VVe(n,"unknown","deviceFlow");let i=await hWt(n,e,r),o=(async()=>{let a=i.expires_in,c=i.interval,l;do{await new Promise(f=>setTimeout(f,1e3*c)),l=await gWt(n,i.device_code,e,r),a-=c;let u=l.access_token;if(u){let f=await AWt(n,{...r,accessToken:u});return{...r,githubAppId:e,login:f.login,accessToken:u}}c=l.interval??c}while(a>0);throw new ba(`Timed out polling for access token. Last response was ${JSON.stringify(l)}`)})();return{...i,waitForAuth:o}}};d();var Sf=class{static{s(this,"CitationManager")}},ZJ=class extends Sf{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};d();d();d();var yWt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},Cs=class{constructor(){this.capabilities={...yWt};this.emitter=new Ka;this.onDidSetCapabilities=this.emitter.event}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}this.emitter.fire(this.capabilities)}getCapabilities(){return this.capabilities}};d();d();d();d();function N1e(t,e){let r=_A(t,e);return r===-1?void 0:t[r]}s(N1e,"findLastMonotonous");function _A(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(_A,"findLastIdxMonotonous");function XB(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(XB,"findFirstIdxMonotonousOrArrLen");var KVe=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=_A(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};d();var M1e=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?eX.isErrorNoTelemetry(e)?new eX(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},YVe=new M1e;function NR(t){YVe.onUnexpectedError(t)}s(NR,"onBugIndicatingError");function ZB(t){CWt(t)||YVe.onUnexpectedError(t)}s(ZB,"onUnexpectedError");var L1e="Canceled";function CWt(t){return t instanceof qC?!0:t instanceof Error&&t.name===L1e&&t.message===L1e}s(CWt,"isCancellationError");var qC=class extends Error{static{s(this,"CancellationError")}constructor(){super(L1e),this.name=this.message}};function KO(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(KO,"illegalArgument");function JVe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(JVe,"illegalState");var eX=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},xn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function e3(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(e3,"equals");function*MR(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(MR,"groupAdjacentBy");function ZVe(t){return t.filter(e=>!!e)}s(ZVe,"coalesce");var eze;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(eze||={});function Ih(t,e){return(r,n)=>e(t(r),t(n))}s(Ih,"compareBy");var Th=s((t,e)=>t-e,"numberComparator");var tX=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},XVe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||eze.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function YO(t,e){return t.reduce((r,n)=>r+e(n),0)}s(YO,"sumBy");d();function ize(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(ize,"groupBy");var rze,nze,tze=class{constructor(e,r){this.toKey=r;this._map=new Map;this[rze]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(nze=Symbol.iterator,rze=Symbol.toStringTag,nze)](){return this.values()}};d();function F1e(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(F1e,"createSingleCallFunction");d();var O1e;(S=>{function t(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}S.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}S.empty=r,s(r,"empty");function*n(R){yield R}S.single=n,s(n,"single");function i(R){return t(R)?R:n(R)}S.wrap=i,s(i,"wrap");function o(R){return R||e}S.from=o,s(o,"from");function*a(R){for(let B=R.length-1;B>=0;B--)yield R[B]}S.reverse=a,s(a,"reverse");function c(R){return!R||R[Symbol.iterator]().next().done===!0}S.isEmpty=c,s(c,"isEmpty");function l(R){return R[Symbol.iterator]().next().value}S.first=l,s(l,"first");function u(R,B){let L=0;for(let O of R)if(B(O,L++))return!0;return!1}S.some=u,s(u,"some");function f(R,B){for(let L of R)if(B(L))return L}S.find=f,s(f,"find");function*p(R,B){for(let L of R)B(L)&&(yield L)}S.filter=p,s(p,"filter");function*m(R,B){let L=0;for(let O of R)yield B(O,L++)}S.map=m,s(m,"map");function*h(R,B){let L=0;for(let O of R)yield*B(O,L++)}S.flatMap=h,s(h,"flatMap");function*g(...R){for(let B of R)yield*B}S.concat=g,s(g,"concat");function A(R,B,L){let O=L;for(let Y of R)O=B(O,Y);return O}S.reduce=A,s(A,"reduce");function*y(R,B,L=R.length){for(B<-R.length&&(B=0),B<0&&(B+=R.length),L<0?L+=R.length:L>R.length&&(L=R.length);B<L;B++)yield R[B]}S.slice=y,s(y,"slice");function E(R,B=Number.POSITIVE_INFINITY){let L=[];if(B===0)return[L,R];let O=R[Symbol.iterator]();for(let Y=0;Y<B;Y++){let V=O.next();if(V.done)return[L,S.empty()];L.push(V.value)}return[L,{[Symbol.iterator](){return O}}]}S.consume=E,s(E,"consume");async function b(R){let B=[];for await(let L of R)B.push(L);return Promise.resolve(B)}S.asyncToArray=b,s(b,"asyncToArray")})(O1e||={});d();var Q1e=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function xWt(t){return Array.isArray(t)}s(xWt,"isEntries");var sze,rX=class t{constructor(e,r){this[sze]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(xWt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new Q1e(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(sze=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},aze,oze=class{constructor(e,r){this[aze]="ResourceSet";!e||typeof e=="function"?this._map=new rX(e):(this._map=new rX(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(aze=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var cze,U1e=class{constructor(){this[cze]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(cze=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},q1e=class extends U1e{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},t3=class extends q1e{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var nX=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var EWt=!1,r3=null;var lze=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let f=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&f.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let f=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(f,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),f.reverse()}s(i,"getStackTracePath");let o=new nX;for(let l of n){let u=i(l);for(let f=0;f<=u.length;f++)o.add(u.slice(0,f).join(`
`),l)}n.sort(Ih(l=>l.idx,Th));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),f=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),A=ize([...g].map(y=>i(y)[p]),y=>y);delete A[u[p]];for(let[y,E]of Object.entries(A))f.unshift(`    - stacktraces of ${E.length} other leaks continue with ${y}`);f.unshift(m)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${f.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function bWt(t){r3=t}s(bWt,"setDisposableTracker");if(EWt){let t="__is_disposable_tracked__";bWt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ss.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ss.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function n3(t){return r3?.trackDisposable(t),t}s(n3,"trackDisposable");function i3(t){r3?.markAsDisposed(t)}s(i3,"markAsDisposed");function H1e(t,e){r3?.setParent(t,e)}s(H1e,"setParentOfDisposable");function IWt(t,e){if(r3)for(let r of t)r3.setParent(r,e)}s(IWt,"setParentOfDisposables");function uze(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(uze,"isDisposable");function iX(t){if(O1e.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(iX,"dispose");function dze(...t){let e=Lc(()=>iX(t));return IWt(t,e),e}s(dze,"combinedDisposable");function Lc(t){let e=n3({dispose:F1e(()=>{i3(e),t()})});return e}s(Lc,"toDisposable");var Zu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;n3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(i3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{iX(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return H1e(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),H1e(e,null))}},Ss=class{constructor(){this._store=new Zu;n3(this),H1e(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){i3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var wh=class extends Ss{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(Ps(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let f=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:f,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};d();var fze=Ne(require("events"));var oX="CompletionRequested",HC=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new fze.default;notifyRequest(e,r,n,i,o){return this.#e.emit(oX,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=eu(this.ctx,e,`event.${oX}`);return this.#e.on(oX,r),mn.Disposable.create(()=>this.#e.off(oX,r))}};d();var $1e=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},o3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new $1e(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};d();d();d();var sX=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=hze(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,f=pze(n.text,!1,o);if(l-c===f.length)for(let m=0,h=f.length;m<h;m++)u[m+c+1]=f[m];else f.length<1e4?u.splice(c+1,l-c,...f):this._lineOffsets=u=u.slice(0,c+1).concat(f,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let m=c+1+f.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=pze(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&mze(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},QT;(function(t){function e(i,o,a,c){return new sX(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof sX)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=W1e(o.map(TWt),(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),l=0,u=[];for(let f of c){let p=i.offsetAt(f.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),f.newText.length&&u.push(f.newText),l=i.offsetAt(f.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(QT||(QT={}));function W1e(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);W1e(n,e),W1e(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s(W1e,"mergeSort");function pze(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);mze(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(pze,"computeLineOffsets");function mze(t){return t===13||t===10}s(mze,"isEOL");function hze(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(hze,"getWellformedRange");function TWt(t){let e=hze(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(TWt,"getWellformedEdit");d();var gze;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(gze||(gze={}));var j1e;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(j1e||(j1e={}));var Aze;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(Aze||(Aze={}));var aX;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(aX||(aX={}));var Qd;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=aX.MAX_VALUE),i===Number.MAX_VALUE&&(i=aX.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.line)&&Xe.uinteger(i.character)}s(r,"is"),t.is=r})(Qd||(Qd={}));var Qs;(function(t){function e(n,i,o,a){if(Xe.uinteger(n)&&Xe.uinteger(i)&&Xe.uinteger(o)&&Xe.uinteger(a))return{start:Qd.create(n,i),end:Qd.create(o,a)};if(Qd.is(n)&&Qd.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qd.is(i.start)&&Qd.is(i.end)}s(r,"is"),t.is=r})(Qs||(Qs={}));var cX;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.range)&&(Xe.string(i.uri)||Xe.undefined(i.uri))}s(r,"is"),t.is=r})(cX||(cX={}));var yze;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.targetRange)&&Xe.string(i.targetUri)&&Qs.is(i.targetSelectionRange)&&(Qs.is(i.originSelectionRange)||Xe.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(yze||(yze={}));var G1e;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.numberRange(i.red,0,1)&&Xe.numberRange(i.green,0,1)&&Xe.numberRange(i.blue,0,1)&&Xe.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(G1e||(G1e={}));var Cze;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.range)&&G1e.is(i.color)}s(r,"is"),t.is=r})(Cze||(Cze={}));var vze;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.undefined(i.textEdit)||a3.is(i))&&(Xe.undefined(i.additionalTextEdits)||Xe.typedArray(i.additionalTextEdits,a3.is))}s(r,"is"),t.is=r})(vze||(vze={}));var xze;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(xze||(xze={}));var Eze;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return Xe.defined(o)&&(u.startCharacter=o),Xe.defined(a)&&(u.endCharacter=a),Xe.defined(c)&&(u.kind=c),Xe.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.startLine)&&Xe.uinteger(i.startLine)&&(Xe.undefined(i.startCharacter)||Xe.uinteger(i.startCharacter))&&(Xe.undefined(i.endCharacter)||Xe.uinteger(i.endCharacter))&&(Xe.undefined(i.kind)||Xe.string(i.kind))}s(r,"is"),t.is=r})(Eze||(Eze={}));var V1e;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&cX.is(i.location)&&Xe.string(i.message)}s(r,"is"),t.is=r})(V1e||(V1e={}));var bze;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(bze||(bze={}));var Ize;(function(t){t.Unnecessary=1,t.Deprecated=2})(Ize||(Ize={}));var Tze;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&Xe.string(n.href)}s(e,"is"),t.is=e})(Tze||(Tze={}));var lX;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return Xe.defined(o)&&(u.severity=o),Xe.defined(a)&&(u.code=a),Xe.defined(c)&&(u.source=c),Xe.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return Xe.defined(o)&&Qs.is(o.range)&&Xe.string(o.message)&&(Xe.number(o.severity)||Xe.undefined(o.severity))&&(Xe.integer(o.code)||Xe.string(o.code)||Xe.undefined(o.code))&&(Xe.undefined(o.codeDescription)||Xe.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Xe.string(o.source)||Xe.undefined(o.source))&&(Xe.undefined(o.relatedInformation)||Xe.typedArray(o.relatedInformation,V1e.is))}s(r,"is"),t.is=r})(lX||(lX={}));var s3;(function(t){function e(n,i,...o){let a={title:n,command:i};return Xe.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.title)&&Xe.string(i.command)}s(r,"is"),t.is=r})(s3||(s3={}));var a3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return Xe.objectLiteral(a)&&Xe.string(a.newText)&&Qs.is(a.range)}s(i,"is"),t.is=i})(a3||(a3={}));var z1e;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Xe.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(z1e||(z1e={}));var c3;(function(t){function e(r){let n=r;return Xe.string(n)}s(e,"is"),t.is=e})(c3||(c3={}));var wze;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return a3.is(a)&&(z1e.is(a.annotationId)||c3.is(a.annotationId))}s(i,"is"),t.is=i})(wze||(wze={}));var K1e;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&eve.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(K1e||(K1e={}));var Y1e;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(Y1e||(Y1e={}));var J1e;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&Xe.string(i.oldUri)&&Xe.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(J1e||(J1e={}));var X1e;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Xe.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Xe.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(X1e||(X1e={}));var Z1e;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Xe.string(i.kind)?Y1e.is(i)||J1e.is(i)||X1e.is(i):K1e.is(i)))}s(e,"is"),t.is=e})(Z1e||(Z1e={}));var Sze;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)}s(r,"is"),t.is=r})(Sze||(Sze={}));var _ze;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.integer(i.version)}s(r,"is"),t.is=r})(_ze||(_ze={}));var eve;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&(i.version===null||Xe.integer(i.version))}s(r,"is"),t.is=r})(eve||(eve={}));var Rze;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.string(i.languageId)&&Xe.integer(i.version)&&Xe.string(i.text)}s(r,"is"),t.is=r})(Rze||(Rze={}));var tve;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(tve||(tve={}));var JO;(function(t){function e(r){let n=r;return Xe.objectLiteral(r)&&tve.is(n.kind)&&Xe.string(n.value)}s(e,"is"),t.is=e})(JO||(JO={}));var kze;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(kze||(kze={}));var Pze;(function(t){t.PlainText=1,t.Snippet=2})(Pze||(Pze={}));var Dze;(function(t){t.Deprecated=1})(Dze||(Dze={}));var Bze;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.newText)&&Qs.is(i.insert)&&Qs.is(i.replace)}s(r,"is"),t.is=r})(Bze||(Bze={}));var Nze;(function(t){t.asIs=1,t.adjustIndentation=2})(Nze||(Nze={}));var Mze;(function(t){function e(r){let n=r;return n&&(Xe.string(n.detail)||n.detail===void 0)&&(Xe.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(Mze||(Mze={}));var Lze;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(Lze||(Lze={}));var Fze;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(Fze||(Fze={}));var uX;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return Xe.string(i)||Xe.objectLiteral(i)&&Xe.string(i.language)&&Xe.string(i.value)}s(r,"is"),t.is=r})(uX||(uX={}));var Oze;(function(t){function e(r){let n=r;return!!n&&Xe.objectLiteral(n)&&(JO.is(n.contents)||uX.is(n.contents)||Xe.typedArray(n.contents,uX.is))&&(r.range===void 0||Qs.is(r.range))}s(e,"is"),t.is=e})(Oze||(Oze={}));var Qze;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(Qze||(Qze={}));var Uze;(function(t){function e(r,n,...i){let o={label:r};return Xe.defined(n)&&(o.documentation=n),Xe.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(Uze||(Uze={}));var qze;(function(t){t.Text=1,t.Read=2,t.Write=3})(qze||(qze={}));var Hze;(function(t){function e(r,n){let i={range:r};return Xe.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(Hze||(Hze={}));var $ze;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})($ze||($ze={}));var Wze;(function(t){t.Deprecated=1})(Wze||(Wze={}));var jze;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(jze||(jze={}));var Gze;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(Gze||(Gze={}));var Vze;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.name)&&Xe.number(i.kind)&&Qs.is(i.range)&&Qs.is(i.selectionRange)&&(i.detail===void 0||Xe.string(i.detail))&&(i.deprecated===void 0||Xe.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(Vze||(Vze={}));var zze;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(zze||(zze={}));var dX;(function(t){t.Invoked=1,t.Automatic=2})(dX||(dX={}));var Kze;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.typedArray(i.diagnostics,lX.is)&&(i.only===void 0||Xe.typedArray(i.only,Xe.string))&&(i.triggerKind===void 0||i.triggerKind===dX.Invoked||i.triggerKind===dX.Automatic)}s(r,"is"),t.is=r})(Kze||(Kze={}));var Yze;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):s3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.title)&&(i.diagnostics===void 0||Xe.typedArray(i.diagnostics,lX.is))&&(i.kind===void 0||Xe.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||s3.is(i.command))&&(i.isPreferred===void 0||Xe.boolean(i.isPreferred))&&(i.edit===void 0||Z1e.is(i.edit))}s(r,"is"),t.is=r})(Yze||(Yze={}));var Jze;(function(t){function e(n,i){let o={range:n};return Xe.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Qs.is(i.range)&&(Xe.undefined(i.command)||s3.is(i.command))}s(r,"is"),t.is=r})(Jze||(Jze={}));var Xze;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.uinteger(i.tabSize)&&Xe.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(Xze||(Xze={}));var Zze;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Qs.is(i.range)&&(Xe.undefined(i.target)||Xe.string(i.target))}s(r,"is"),t.is=r})(Zze||(Zze={}));var eKe;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qs.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(eKe||(eKe={}));var tKe;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(tKe||(tKe={}));var rKe;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(rKe||(rKe={}));var nKe;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(nKe||(nKe={}));var iKe;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Qs.is(i.range)&&Xe.string(i.text)}s(r,"is"),t.is=r})(iKe||(iKe={}));var oKe;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Qs.is(i.range)&&Xe.boolean(i.caseSensitiveLookup)&&(Xe.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(oKe||(oKe={}));var sKe;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Qs.is(i.range)&&(Xe.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(sKe||(sKe={}));var aKe;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Qs.is(n.stoppedLocation)}s(r,"is"),t.is=r})(aKe||(aKe={}));var rve;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(rve||(rve={}));var nve;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&(i.tooltip===void 0||Xe.string(i.tooltip)||JO.is(i.tooltip))&&(i.location===void 0||cX.is(i.location))&&(i.command===void 0||s3.is(i.command))}s(r,"is"),t.is=r})(nve||(nve={}));var cKe;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Qd.is(i.position)&&(Xe.string(i.label)||Xe.typedArray(i.label,nve.is))&&(i.kind===void 0||rve.is(i.kind))&&i.textEdits===void 0||Xe.typedArray(i.textEdits,a3.is)&&(i.tooltip===void 0||Xe.string(i.tooltip)||JO.is(i.tooltip))&&(i.paddingLeft===void 0||Xe.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Xe.boolean(i.paddingRight))}s(r,"is"),t.is=r})(cKe||(cKe={}));var lKe;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(lKe||(lKe={}));var uKe;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(uKe||(uKe={}));var dKe;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(dKe||(dKe={}));var fKe;(function(t){t.Invoked=0,t.Automatic=1})(fKe||(fKe={}));var pKe;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(pKe||(pKe={}));var mKe;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(mKe||(mKe={}));var hKe;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&j1e.is(n.uri)&&Xe.string(n.name)}s(e,"is"),t.is=e})(hKe||(hKe={}));var gKe;(function(t){function e(o,a,c,l){return new ive(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(Xe.defined(a)&&Xe.string(a.uri)&&(Xe.undefined(a.languageId)||Xe.string(a.languageId))&&Xe.uinteger(a.lineCount)&&Xe.func(a.getText)&&Xe.func(a.positionAt)&&Xe.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),u=c.length;for(let f=l.length-1;f>=0;f--){let p=l[f],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)c=c.substring(0,m)+p.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=m}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let f=0,p=0,m=0;for(;f<l.length&&p<u.length;)a(l[f],u[p])<=0?o[m++]=l[f++]:o[m++]=u[p++];for(;f<l.length;)o[m++]=l[f++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(gKe||(gKe={}));var ive=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Qd.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Qd.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},Xe;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function c(h,g,A){return e.call(h)==="[object Number]"&&g<=h&&h<=A}s(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function f(h){return e.call(h)==="[object Function]"}s(f,"func"),t.func=f;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Xe||(Xe={}));var vs=class{static{s(this,"LocationFactory")}static{this.range=Qs.create.bind(Qs)}static{this.position=Qd.create.bind(Qd)}},Ix=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=QT.create(e.clientUri,e.clientLanguageId,n,e.getText());return QT.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=QT.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return QT.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=wT({uri:e,languageId:r})){return new t(Pl(e),QT.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Qs.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=Qs.create(Qd.create(r,0),Qd.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};d();d();d();d();var XO={isBlocked:!1,reason:"VALID_FILE"},fX={isBlocked:!1,reason:"NO_MATCHING_POLICY"},AKe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},LR={all:"all",repo:"repo"},UT=new Ct("contentExclusion");d();d();var pX=class{static{s(this,"PolicyEvaluator")}};d();d();d();var yKe=new Ct("repository"),FR=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},RA=class{static{s(this,"GitConfigLoader")}},mX=class extends RA{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};d();var CKe=require("os");var hX=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return QI.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=QI.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,CKe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var gX=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(RA).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new hX(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var wWt=100,ove=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},Tx=class t{constructor(e){this.ctx=e;this.remoteResolver=new gX;this.cache=new wr(wWt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=Pd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new ove(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(Mi),i=Vi(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=Vi(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=i2(r,o[1]),c=Vi(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=Vi(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=Vi(a,"commondir");a=i2(a,(await e.readFileString(u)).trimEnd());let f=Vi(a,"config");return await e.stat(f),f}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};d();var OR=s((t,e)=>{if(MC.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...MC.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");d();d();d();var AX=new WeakMap;function yX(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&AX.has(t))return AX.get(t);switch(AX.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=yX(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+yX(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+yX(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return AX.set(t,n),n}s(yX,"t");function CX(t){return yX(t,0)}s(CX,"r");var sve=new WeakMap;function vKe(t,e,r=CX(e)){let n,i,o=sve.get(t);o||(sve.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,f=0;function p(m){for(;u=n[f++];u.r(m));}s(p,"o"),sve.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[f++],f<=m.length;u instanceof Error?n[f-1].r(u):n[f-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,f){l.s=u,l.r=f})}s(vKe,"n");var xKe=new WeakMap;function SWt(t,e,r,n=CX(r)){if(e||(e=xKe.get(t)),e||xKe.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=vKe(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(SWt,"n");function EKe(t,e){return function(r,n){return SWt(t,e,r,n)}}s(EKe,"o");d();var $Ke=Ne(MKe(),1);d();var t7=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");d();d();var MWt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},r7=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),LWt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),LKe=s(t=>t.join(""),"rangesToString"),FKe=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,f=r,p="";e:for(;o<t.length;){let A=t.charAt(o);if((A==="!"||A==="^")&&o===r+1){u=!0,o++;continue}if(A==="]"&&a&&!l){f=o+1;break}if(a=!0,A==="\\"&&!l){l=!0,o++;continue}if(A==="["&&!l){for(let[y,[E,b,S]]of Object.entries(MWt))if(t.startsWith(y,o)){if(p)return["$.",!1,t.length-r,!0];o+=y.length,S?i.push(E):n.push(E),c=c||b;continue e}}if(l=!1,p){A>p?n.push(r7(p)+"-"+r7(A)):A===p&&n.push(r7(A)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(r7(A+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=A,o+=2;continue}n.push(r7(A)),o++}if(f<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let A=n[0].length===2?n[0].slice(-1):n[0];return[LWt(A),!1,f-r,!1]}let m="["+(u?"^":"")+LKe(n)+"]",h="["+(u?"":"^")+LKe(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,c,f-r,!0]},"parseClass");d();var qT=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var FWt=new Set(["!","?","+","*","@"]),OKe=s(t=>FWt.has(t),"isExtglobType"),OWt="(?!(?:^|/)\\.\\.?(?:$|/))",vX="(?!\\.)",QWt=new Set(["[","."]),UWt=new Set(["..","."]),qWt=new Set("().*{}+?[]^$\\!"),HWt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),lve="[^/]",QKe=lve+"*?",UKe=lve+"+?",l3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let A=e.charAt(h++);if(o||A==="\\"){o=!o,g+=A;continue}if(a){h===c+1?(A==="^"||A==="!")&&(l=!0):A==="]"&&!(h===c+2&&l)&&(a=!1),g+=A;continue}else if(A==="["){a=!0,c=h,l=!1,g+=A;continue}if(!i.noext&&OKe(A)&&e.charAt(h)==="("){r.push(g),g="";let y=new t(A,r);h=t.#u(e,y,h,i),r.push(y);continue}g+=A}return r.push(g),h}let u=n+1,f=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===c+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===c+2&&l)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,c=u,l=!1,m+=h;continue}if(OKe(h)&&e.charAt(u)==="("){f.push(m),m="";let g=new t(h,f);f.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){f.push(m),m="",p.push(f),f=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),f.push(m),m="",r.push(...p,f),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,A,y,E]=typeof h=="string"?t.#m(h,this.#t,l):h.toRegExpSource(e);return this.#t=this.#t||y,this.#i=this.#i||E,g}).join(""),f="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&UWt.has(this.#n[0]))){let g=QWt,A=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),y=!r&&!e&&g.has(u.charAt(0));f=A?OWt:y?vX:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[f+u+p,qT(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,qT(this.toString()),!1,!1]}let a=!n||e||r||!vX?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?vX:"")+UKe;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?vX:"")+QKe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,qT(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(qWt.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,f,p,m]=FKe(e,c);if(p){o+=u,a=a||f,c+=p-1,r=r||m;continue}}if(l==="*"){n&&e==="*"?o+=UKe:o+=QKe,r=!0;continue}if(l==="?"){o+=lve,r=!0;continue}o+=HWt(l)}return[o,qT(e),!!r,a]}};d();var uve=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Fc=s((t,e,r={})=>(t7(e),!r.nocomment&&e.charAt(0)==="#"?!1:new u3(e,r).match(t)),"minimatch"),$Wt=/^\*+([^+@!?\*\[\(]*)$/,WWt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),jWt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),GWt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),VWt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),zWt=/^\*+\.\*+$/,KWt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),YWt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),JWt=/^\.\*+$/,XWt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),ZWt=/^\*+$/,ejt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),tjt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),rjt=/^\?+([^+@!?\*\[\(]*)?$/,njt=s(([t,e=""])=>{let r=WKe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),ijt=s(([t,e=""])=>{let r=jKe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),ojt=s(([t,e=""])=>{let r=jKe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),sjt=s(([t,e=""])=>{let r=WKe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),WKe=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),jKe=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),GKe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",qKe={win32:{sep:"\\"},posix:{sep:"/"}},ajt=GKe==="win32"?qKe.win32.sep:qKe.posix.sep;Fc.sep=ajt;var _h=Symbol("globstar **");Fc.GLOBSTAR=_h;var cjt="[^/]",ljt=cjt+"*?",ujt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",djt="(?:(?!(?:\\/|^)\\.).)*?",fjt=s((t,e={})=>r=>Fc(r,t,e),"filter");Fc.filter=fjt;var Sh=s((t,e={})=>Object.assign({},t,e),"ext"),pjt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Fc;let e=Fc;return Object.assign(s((n,i,o={})=>e(n,i,Sh(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Sh(t,o))}static defaults(i){return e.defaults(Sh(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Sh(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Sh(t,o))}},unescape:s((n,i={})=>e.unescape(n,Sh(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,Sh(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,Sh(t,i)),"filter"),defaults:s(n=>e.defaults(Sh(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,Sh(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,Sh(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,Sh(t,o)),"match"),sep:e.sep,GLOBSTAR:_h})},"defaults");Fc.defaults=pjt;var VKe=s((t,e={})=>(t7(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,$Ke.default)(t)),"braceExpand");Fc.braceExpand=VKe;var mjt=s((t,e={})=>new u3(t,e).makeRe(),"makeRe");Fc.makeRe=mjt;var hjt=s((t,e,r={})=>{let n=new u3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");Fc.match=hjt;var HKe=/[?*]|[+@!]\(.*?\)|\[|\]/,gjt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),u3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){t7(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||GKe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!HKe.test(o[2]))&&!HKe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(f=>this.parse(f))];if(u)return[o[0],...o.slice(1).map(f=>this.parse(f))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let f=n.slice(0);f[i]="**",e.push(f),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let A=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!A&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),E=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!E&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),S=y?3:A?0:void 0,R=b?3:E?0:void 0;if(typeof S=="number"&&typeof R=="number"){let[B,L]=[e[S],r[R]];B.toLowerCase()===L.toLowerCase()&&(r[R]=B,R>S?r=r.slice(R):S>R&&(e=e.slice(S)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var f=r[c],p=e[a];if(this.debug(r,f,p),f===!1)return!1;if(f===_h){this.debug("GLOBSTAR",[r,f,p]);var m=a,h=c+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<l;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===l))}let A;if(typeof f=="string"?(A=p===f,this.debug("string match",f,p,A)):(A=f.test(p),this.debug("pattern match",f,p,A)),!A)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return VKe(this.pattern,this.options)}parse(e){t7(e);let r=this.options;if(e==="**")return _h;if(e==="")return"";let n,i=null;(n=e.match(ZWt))?i=r.dot?tjt:ejt:(n=e.match($Wt))?i=(r.nocase?r.dot?VWt:GWt:r.dot?jWt:WWt)(n[1]):(n=e.match(rjt))?i=(r.nocase?r.dot?ijt:njt:r.dot?ojt:sjt)(n):(n=e.match(zWt))?i=r.dot?YWt:KWt:(n=e.match(JWt))&&(i=XWt);let o=l3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?ljt:r.dot?ujt:djt,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(f=>{if(f instanceof RegExp)for(let p of f.flags.split(""))i.add(p);return typeof f=="string"?gjt(f):f===_h?_h:f._src});return u.forEach((f,p)=>{let m=u[p+1],h=u[p-1];f!==_h||h===_h||(h===void 0?m!==void 0&&m!==_h?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==_h&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=_h))}),u.filter(f=>f!==_h).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Fc.defaults(e).Minimatch}};Fc.AST=l3;Fc.Minimatch=u3;Fc.escape=uve;Fc.unescape=qT;var dve="contentExclusion",xX=class extends pX{static{s(this,"CopilotContentExclusion")}#e;#t=new wr(1e4);#i=new wr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=i2(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??LR.all);if(!i)return fX;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return UT.exception(this.#e,n,`${dve}.evaluate`),AKe}return XO}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=XO,a,c=ime(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(Fc(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=fve(l,"FILE_BLOCKED_PATH"),a=u;break e}return UT.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return XO;let a=this.evaluateFileContent(i,o,n);return UT.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>zKe(a)).some(a=>a.test(n)))return fve(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>zKe(a)).some(a=>a.test(n)))return fve(i,"FILE_BLOCKED_TEXT_BASED");return XO}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){ja(this.#e,e,`${dve}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=EKe(async e=>{let r=await this.#e.get($r).getGitHubSession();if(!r)throw new ba("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(LR.all);e.filter(u=>u!==LR.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==LR.all).join(",")),i.searchParams.set("scope",o?LR.all:LR.repo);let c=await Ym(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new mC(c)}return this.#s("fetch.success"),OR(vjt,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(Tx).getRepo(Pd(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Bt(this.#e,`${dve}.${e}`,Gr.createAndMarkAsIssued(r,n))}};function zKe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(zKe,"stringToRegex");function fve(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(fve,"fileBlockedEvaluationResult");var Ajt=x.Object({name:x.String(),type:x.String()}),yjt=x.Object({paths:x.Array(x.String()),ifNoneMatch:x.Optional(x.Array(x.String())),ifAnyMatch:x.Optional(x.Array(x.String())),source:Ajt}),pve=x.Array(yjt),Cjt=x.Object({rules:pve,last_updated_at:x.String(),scope:x.String()}),vjt=x.Array(Cjt);var ul=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new xX(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e.document){this.updateStatusIcon(!1);return}let r=await this.ctx.get(Cr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");let r=eu(this.ctx,this.onDidChangeActiveTextEditor,"Content exclusions focus change");this.ctx.get(Cr).onDidFocusTextDocument(r),Ps(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let f=performance.now(),p=await u.evaluate(e,r),m=performance.now();return i.push({key:l,result:p,elapsedMs:Math.round(m-f)}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){UT.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(So).setInactive(r??"Copilot is disabled"):this.ctx.get(So).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===fX.reason)return UT.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={contentExclusionEvalMs:i};return Bt(this.ctx,e,Gr.createAndMarkAsIssued(c,l)),Bt(this.ctx,e,Gr.createAndMarkAsIssued({...c,path:r},l),1),UT.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function wx(t,e,r){let n=await t.get(ul).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(wx,"isDocumentValid");var Cr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await wx(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Pl(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return wx(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(Mi).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(Mi).readFileString(e)}getWorkspaceFolder(e){let r=Pl(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Pl(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Pl(e.uri);for(let n of this.getWorkspaceFolders()){let i=Pl(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Pi(r)}};function oa(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(oa,"statusFromTextDocumentResult");var En=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Cr).getRelativePath(e)??Pi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(Cr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await wx(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:Ix.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(Mi).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(Mi).stat(e)).size/1024/1024}};d();d();var Rh=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function $C(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s($C,"delay");d();var mve=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},EX=class extends mve{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var T0=class{constructor(e){this.ctx=e;this.#e=new Ct("AsyncCompletionManager");this.requests=new wr(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(hve(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new EX;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Mt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Rh,c=new Map,l=s(f=>()=>{let p=c.get(f);p!==void 0&&(p(),c.delete(f),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(f=>{if(hve(r,n,f)){if(f.state===0){let p=r.substring(f.prefix.length),{completionText:m}=f.choice;if(!m.startsWith(p)||m.length<=p.length){l(f.headerRequestId)();return}m=m.substring(p.length),f.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...f.choice,completionText:m},f.allChoicesPromise]),o=!0}}else this.cancelRequest(e,f),l(f.headerRequestId)()},"next");for(let[f,p]of this.requests)hve(r,n,p)?c.set(f,p.subject.subscribe({next:u,error:l(f),complete:l(f)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let f of c.values())f()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function hve(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(hve,"isCandidate");d();d();var i7=class{constructor(e){this.maxSize=e;this.root=new n7;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new n7;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new n7;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},n7=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var kA=class{constructor(){this.cache=new i7(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new i7(100)}};d();d();d();d();var Sx={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};d();function KKe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let f;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?f=-.08436540015142402:t[8]>1861.5000000000002?f=-.01621425699342421:f=.01878613821895428:f=.031052879158242532:t[8]>319.50000000000006?f=-.031536619360997865:t[7]>3.5000000000000004?f=-.004510586962343298:f=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?f=.004757490541310808:t[9]>6.500000000000001?f=-.008842393772207996:t[31]>1e-35?f=.0010536183837006993:t[308]>1e-35?f=-.008145882815435419:t[2]>98.50000000000001?f=-.08404937622173021:t[276]>1e-35?f=.0020072791321856663:t[19]>1e-35?f=-.023031820639490178:f=-.04553314326377875:t[8]>2134.5000000000005?f=-.02244583113572251:t[134]>1e-35?f=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?f=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?f=-.00447733056482096:f=-.10191061664873849:f=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?f=-.07570059131536411:t[243]>1e-35?f=-.040983393346598646:t[3]>9.500000000000002?f=.014763759061483812:t[92]>1e-35?f=.05136368898963024:f=-.008162398981149495:t[127]>1e-35?f=.013999119696708346:t[23]>1e-35?t[20]>1e-35?f=.14138985500120907:f=.008668274102844162:t[284]>1e-35?f=.06356484011042893:f=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let A;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?A=.03507251990078782:t[2]>14.500000000000002?A=.004905698363309292:t[8]>2421.5000000000005?A=-.10306119951984316:A=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?A=-.08503171085833393:A=.015130974593044409:A=-.024425267075198206:A=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?A=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?A=.09908783187786288:A=-.06920877329925636:t[8]>241.50000000000003?A=-.016756131804203496:t[9]>33.50000000000001?A=.04903179955263626:t[217]>1e-35?A=-.047416847619291644:A=-.0017200891991431119:t[39]>1e-35?A=-.10389927604977028:t[134]>1e-35?A=-.050480365434872866:t[178]>1e-35?A=-.05167855791556937:t[8]>2134.5000000000005?A=-.01663197335585307:t[242]>1e-35?A=-.05361323756615453:t[118]>1e-35?A=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?A=-.0016544848369620534:A=.04494144460483587:A=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?A=.051166688553608355:A=-.06623908820705383:t[84]>1e-35?A=-.12990936092409747:t[306]>1e-35?A=-.07020596855118943:t[49]>1e-35?A=.06272964802556856:t[192]>1e-35?A=.06540204627162581:A=.008277910531592885;let y;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?y=.003325460510319164:y=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?y=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?y=.0697359767152808:t[230]>1e-35?y=.06513506845651572:y=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?y=.013616385013146277:y=.04171540100223404:y=-.04360396575094823:t[212]>1e-35?y=.025945477945627522:y=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?y=-.07856453318384411:y=-.014803893522351739:t[39]>1e-35?y=-.09185452630751932:t[149]>1e-35?y=-.07122426086157027:t[134]>1e-35?y=-.04231052091434186:t[227]>1e-35?y=-.029815824273994197:t[50]>1e-35?y=-.15736496271211153:t[222]>1e-35?y=-.02360285356956629:t[128]>1e-35?y=-.03922080193836443:t[136]>1e-35?y=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?y=-.0029736170756835783:y=-.06482902102259112:t[84]>1e-35?y=-.11340924635708383:t[94]>1e-35?y=-.03635703457792193:t[118]>1e-35?y=-.058181913914186034:t[126]>1e-35?y=-.062030576241517366:t[116]>1e-35?y=-.045086301850604006:t[25]>1e-35?y=-.031665223656767286:t[203]>1e-35?y=-.009444685731407691:y=.0112265153772187;let E;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?E=.022717227245241684:E=-.049700413274686266:E=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?E=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?E=-.12263724050601095:E=.0070743478891288035:t[288]>1e-35?E=-.050439138582109:E=.0255701593657891:E=-.005812703740580558:t[6]>49.50000000000001?E=-.008542694147899113:E=.035147383686665:E=-.0960461939274094:t[32]>1e-35?E=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?E=-.01800870272656664:E=-.07817304234604389:t[30]>1e-35?E=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?E=.08778416018479411:E=-.026563982720830256:E=-.05296139548112329:t[50]>1e-35?E=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?E=-.036572140520852024:t[183]>1e-35?E=-.10766853736801459:E=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?E=.09513215942486053:E=-.03641865277445567:t[10]>59.50000000000001?E=.03177172388687933:t[39]>1e-35?E=-.10234241303898953:t[243]>1e-35?E=-.02966738115984321:t[190]>1e-35?E=-.04312785336449181:t[118]>1e-35?E=-.05808521194081524:E=.006720381600740378;let b;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?b=-.046284053681928526:t[210]>1e-35?b=49778070699847876e-21:t[13]>1e-35?b=.03328070054739309:t[128]>1e-35?b=-.054790214922938896:t[126]>1e-35?b=-.08524792218532945:b=.014414055975542446:t[1]>38.50000000000001?b=-.07287851335872973:b=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?b=-.12459748864088374:b=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?b=.13044981041138526:t[9]>71.50000000000001?b=-.056068402282406865:t[9]>12.500000000000002?b=.038957722962512764:b=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?b=-.0852126122372075:t[225]>1e-35?b=.10082066771689505:t[1]>161.50000000000003?b=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?b=-.010835400874777133:b=.004607419973807752:b=-.016989075258564062:b=.009205417251698097:t[23]>1e-35?t[20]>1e-35?b=.10184317139657878:t[0]>5724.500000000001?b=-.1163666496650542:t[1]>106.50000000000001?b=.1303850608190687:t[129]>1e-35?b=.10745031509534769:b=.006166901738036226:t[31]>1e-35?b=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?b=.005004582564506611:b=-.10481581731668346:t[19]>1e-35?b=-.009850706427306281:b=-.02608226348051303;let S;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?S=-.0024117174588695603:S=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?S=.04575380761203418:S=-.10025595041353463:t[15]>1e-35?S=.17705790384964004:S=.0073813837628615014:S=.07676373681392407:S=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?S=.07078572910026419:t[4]>23.500000000000004?S=.005513918674164821:S=.0206586476926392:t[0]>5269.500000000001?S=.07706773525822633:S=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?S=-.03204783603215824:S=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?S=-.0930246911392012:S=.011173087289703683:t[3]>24.500000000000004?S=.03281421918878597:S=.12449335091369843:t[204]>1e-35?S=.06634531187326123:S=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?S=-.041196758517013515:t[4]>7.500000000000001?S=-2942718111029724e-20:t[4]>6.500000000000001?S=.11953909558532852:S=.03188615019450534:t[122]>1e-35?S=-.0616037324662157:t[101]>1e-35?S=.027230889593349412:t[8]>4968.500000000001?S=-.1113986516540856:t[3]>2.5000000000000004?S=-.002045140426885727:t[129]>1e-35?S=.12641163374304432:S=.014909826232873194;let R;t[308]>1e-35?t[0]>7277.500000000001?R=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?R=-.040884836258675006:t[210]>1e-35?R=-.0003719413278428804:t[13]>1e-35?R=.030287610160818174:R=.011174130013595384:t[1]>38.50000000000001?R=-.0662442170185784:R=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?R=-.08092286307197555:R=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?R=-.1155211149523894:R=-.0032903546638958538:t[149]>1e-35?R=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?R=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?R=-.025416927789760076:R=.02777568919793122:R=-.10310351509769732:R=.013549608903688785:t[186]>1e-35?R=.08513865847420551:R=-.009306721292510369:t[31]>1e-35?R=.009780833952582307:t[23]>1e-35?R=.011143773934157629:t[210]>1e-35?R=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?R=-.04846287537743046:R=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?R=-.034224938681445764:t[8]>1641.5000000000002?R=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?R=-.027950103994861836:R=.14575930827829034:R=-.007124740389354946:t[10]>22.500000000000004?R=.013173304107866726:R=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let L;t[13]>1e-35?t[118]>1e-35?L=.07957905150112207:t[1]>125.50000000000001?L=-.0662620579858685:t[145]>1e-35?L=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?L=-.0009597832580977798:L=-.081474760755753:t[212]>1e-35?L=.03637001492325179:L=.006912305498963309:t[32]>1e-35?L=-.03919900630910754:t[134]>1e-35?L=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?L=.06671440854602108:t[136]>1e-35?L=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?L=.026430947016830915:L=-.04075501264495112:t[9]>93.50000000000001?L=-.04353169430417609:t[50]>1e-35?L=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?L=.068392679163672:t[10]>1.5000000000000002?L=-.0209659792007492:L=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?L=.07254524592323175:L=-.0319087835282534:L=.00037444813327793425:L=-.025138768151370408:t[243]>1e-35?L=-.050010891710502096:t[94]>1e-35?L=-.0817513550778599:t[122]>1e-35?L=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?L=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?L=.1454877641381946:L=.053787998331240316:t[9]>33.50000000000001?L=.08602629796680285:L=-.03895127455803038:L=.008830878042315722;let O;t[131]>1e-35?O=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?O=.07473600489975568:t[0]>93.50000000000001?O=-.021596848506011502:O=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?O=.10264284346448256:O=.031042487183181262:O=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?O=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?O=.006271403149804702:O=-.030013637555715046:t[0]>4449.500000000001?O=-.06556876058654929:O=.06437994816903034:t[32]>1e-35?O=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?O=-.09349726304052086:t[210]>1e-35?O=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?O=-.029188394315052574:O=.017219308333820193:O=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?O=-.04428555753857688:O=.0001456106867817353:t[5]>213.50000000000003?O=.01740292726636365:O=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?O=.03410288911259329:t[121]>1e-35?O=-.06056527462120627:t[8]>2592.5000000000005?O=.12166808844363577:t[191]>1e-35?O=.11669879218998758:O=-.001664858391716235:O=-.01262927450503166:O=-.04506589951879664:t[227]>1e-35?O=-.08548904959752329:O=.02156080776537726;let Y;t[306]>1e-35?t[149]>1e-35?Y=-.1389218965136736:Y=-.032218642644416894:t[13]>1e-35?Y=.006465035217331847:t[50]>1e-35?Y=-.1381687930130022:t[179]>1e-35?Y=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?Y=-.03262719498763048:Y=.023342916702125613:t[191]>1e-35?Y=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?Y=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?Y=-.09989343595668776:Y=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?Y=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?Y=-.09165257825246746:t[9]>32.50000000000001?Y=.02484870392366004:Y=-.008499493096971395:t[8]>24.500000000000004?Y=.02459679192828244:Y=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?Y=.0015644546318714849:Y=-.06579524865022705:Y=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?Y=.03331853632960164:Y=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?Y=-.019091477207111116:Y=.037878468575478504:t[94]>1e-35?Y=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?Y=.16919658785098224:t[243]>1e-35?Y=-.06580584936754524:Y=.01567555159935563:t[129]>1e-35?Y=.06721746994993226:t[10]>32.50000000000001?Y=-.046394462507797975:Y=-.006436180519584767;let V;t[131]>1e-35?V=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?V=.019122095523977856:t[298]>1e-35?V=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?V=-.026094309429557913:t[204]>1e-35?V=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?V=.012643810980689466:V=-.07884161741497837:V=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?V=.04493082949897325:V=.18046359750455776:t[7]>18.500000000000004?V=-.018667348656891496:V=.02584325784698236:V=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?V=.04749240016989375:V=-.0333334578246718:t[5]>3276.5000000000005?V=.11330554740098908:t[7]>94.50000000000001?V=.1296600395033268:V=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?V=-.13787130789142835:t[0]>1847.5000000000002?V=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?V=.028856848462727104:V=-.11197632885851168:V=.08169801342016791:t[1]>22.500000000000004?V=-.021052888644970163:V=.019048604298876753:t[7]>4.500000000000001?V=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?V=.03432638833359197:V=-.0036767863082454973:t[1]>48.50000000000001?V=.03087375270128195:t[2]>3.5000000000000004?V=-.04219917149740248:V=.018818493993207935;let z;t[306]>1e-35?z=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?z=-.09091897542577475:z=.04042943082645558:t[218]>1e-35?z=.056254985867151:z=-.053848117950183044:z=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?z=.021581808008986944:z=-.05639286496176611:z=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?z=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?z=.023885302967553288:z=.1617794086125622:t[212]>1e-35?z=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?z=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?z=.01894935813286188:z=-.06449356357429188:z=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?z=-.034718828212885515:z=.0898976288814321:t[1]>17.500000000000004?z=-.15440137451988326:z=-.03864183216821465:z=.009988507307006308:z=-.08540311947043305:t[50]>1e-35?z=-.13323659732101975:t[134]>1e-35?z=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?z=.08082476177379844:z=-.041665761903645876:t[179]>1e-35?z=-.12405023987936657:t[39]>1e-35?z=-.06247416524997478:t[138]>1e-35?z=-.10724031753676487:z=-.0005423122305122404;let Q;t[308]>1e-35?Q=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?Q=.023223358334607133:Q=-.04383410185346742:Q=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?Q=.023406489302867494:Q=-.085521220804058:Q=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?Q=.028120059780969632:Q=-.04211009474298743:t[294]>1e-35?Q=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?Q=-.0993035220737934:Q=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?Q=.029770210551187937:Q=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?Q=.06421359317599738:Q=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?Q=.024368404612215164:Q=-.04045232374803373:t[131]>1e-35?Q=.017372701982485795:t[120]>1e-35?Q=.08812710275150198:t[18]>1e-35?t[90]>1e-35?Q=.18451364351180236:t[7]>33.50000000000001?Q=-.03850813130183531:t[195]>1e-35?Q=.06966114053446336:t[3]>16.500000000000004?Q=-.0012869181693341211:t[0]>4242.500000000001?Q=-.054625548611291035:Q=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?Q=.006302103427145562:Q=.13967622319898698:t[121]>1e-35?Q=-.038798585213145644:t[5]>4544.500000000001?Q=-.08050498033009466:Q=-.002986974112681435;let U;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?U=-.03461119351456781:U=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?U=-.12404435523286539:U=-.0034376913880382956:U=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?U=.0037507103585310234:U=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?U=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?U=-.04832024079663151:t[37]>1e-35?U=-.037103393468366934:U=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?U=.032539071163832034:t[5]>1643.5000000000002?U=.036408625378035665:t[0]>1500.5000000000002?U=-.1346358322854993:U=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?U=-.1133991164577881:t[9]>52.50000000000001?U=-.024478640359723122:U=.03673777861098756:U=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?U=.002583438691776944:U=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?U=-.02141222346712401:U=.06392462314316179:t[4]>12.500000000000002?U=.08700122294434816:t[8]>267.50000000000006?U=.056923170082743224:U=-.07716309825583327:t[32]>1e-35?U=-.03961343943752142:U=.002674914122888783:t[1]>42.50000000000001?U=-.05217539654421676:t[145]>1e-35?U=.09553630282946368:U=-.009424791262477729;let Z;t[183]>1e-35?Z=-.05753337139158443:t[308]>1e-35?Z=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?Z=-.10477869875380448:Z=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?Z=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?Z=-.04442302951713574:Z=.00012409888451734224:Z=-.092199119633697:t[225]>1e-35?Z=.13773072450201831:t[0]>2882.5000000000005?Z=.0028540012229920533:t[298]>1e-35?Z=.07134486044361629:Z=.014297412329837425:t[145]>1e-35?Z=.05608385321902638:t[92]>1e-35?Z=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?Z=-.0039957800609801315:Z=.0776927564241081:t[203]>1e-35?Z=-.05502900859432093:t[105]>1e-35?Z=.06062892720841595:Z=-.009574839629252128:t[31]>1e-35?Z=.009488858841144216:t[23]>1e-35?t[20]>1e-35?Z=.08818126313644752:t[8]>161.50000000000003?Z=.014353968957885408:Z=-.022240738532827903:t[210]>1e-35?Z=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?Z=-.043902062079383485:Z=-.014741559220396223:Z=-.00934935734853194:t[6]>32.50000000000001?Z=.1514593126307404:Z=.010771222510801532:t[10]>22.500000000000004?Z=.01412495209334078:Z=-.08576940379502533;let J;t[0]>384.50000000000006?t[84]>1e-35?J=-.06647690967306838:t[2]>101.50000000000001?J=-.024451334501552457:t[306]>1e-35?J=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?J=.0031858381443673127:J=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?J=-.08601340441214533:t[1]>29.500000000000004?J=.10487598629539963:t[8]>597.5000000000001?J=-.0786529133673238:J=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?J=-.04883600353740688:t[126]>1e-35?J=-.03794042763348827:J=-.003358871967539988:t[210]>1e-35?J=.054991356498447566:t[6]>19.500000000000004?J=-.007418396981635549:J=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?J=-.02143003429501711:J=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?J=-.006636355416244082:J=-.06483095743431454:t[4]>21.500000000000004?J=-.028975965946833545:J=.022012264796522657:J=-.06653648243193663:t[5]>4593.500000000001?J=.01753551428088607:t[217]>1e-35?J=-.028864824937700297:t[94]>1e-35?J=-.04885192273020658:t[279]>1e-35?J=.08105715462329498:t[121]>1e-35?J=-.04576676034750651:J=.004795141324949362:t[1]>42.50000000000001?J=-.047446619702809195:t[145]>1e-35?J=.08400495571952321:J=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let $;t[0]>384.50000000000006?t[84]>1e-35?$=-.06088131453064195:t[147]>1e-35?$=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?$=.04219361472548491:$=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?$=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?$=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?$=-.11431764534511478:$=.013549717238356157:$=-.020987333767091276:t[6]>2.5000000000000004?$=-.02914877855133127:$=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?$=-.10087072787978416:t[37]>1e-35?$=-.030467397753331196:t[229]>1e-35?$=-.1017559811057469:t[4]>20.500000000000004?$=-.00413177742240167:t[20]>1e-35?$=.05213315982685969:$=.0037921635866823133:t[8]>51.50000000000001?$=.07327913092421544:t[6]>49.50000000000001?$=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?$=.02744420891894289:$=.11288946357194463:$=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?$=-.012329314369909049:$=.026816658655600168:$=-.0872405354618811:$=.007872673500247845:t[1]>42.50000000000001?$=-.04309044198258254:t[145]>1e-35?$=.07572529147860785:t[7]>5.500000000000001?$=-.013837187093264945:t[1]>17.500000000000004?$=.04208698439539668:$=-.06284346769019863;let X;t[294]>1e-35?X=-.0384794324818203:t[266]>1e-35?X=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?X=.07432960094940501:X=-.035248735855751855:t[134]>1e-35?X=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?X=-.01706896375068821:X=.08212247914968074:t[2]>59.50000000000001?X=-.09546478958824225:t[6]>53.50000000000001?X=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?X=.02816463285971267:X=.15449139016588445:X=-.10199787406123524:X=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?X=-.13924786681478077:X=-.0072772442570213335:t[39]>1e-35?X=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?X=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?X=-.11174465335620831:X=.00013144040097180107:X=-.08493919336681105:t[42]>1e-35?X=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?X=-.015540659878839153:X=-.14442609417300142:t[21]>1e-35?X=-.025251979447574083:X=.0023698372645272847:t[18]>1e-35?X=.07269739695712212:t[8]>2592.5000000000005?X=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?X=-.01835130329646532:t[9]>45.50000000000001?X=.02023047454629885:X=.16469378262221102:X=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let ae;t[183]>1e-35?t[17]>1e-35?ae=.030100940443356424:t[10]>1.5000000000000002?ae=-.10861112216742408:ae=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ae=-.032062878390325456:ae=-.10808232631806887:t[8]>1641.5000000000002?ae=-.06147013392655731:t[4]>12.500000000000002?ae=.03324767551088266:t[145]>1e-35?ae=.028851633810612017:ae=-.054871239091792784:t[134]>1e-35?ae=-.023813968121342108:t[266]>1e-35?ae=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ae=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ae=-.025350325484720576:ae=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ae=.056817276537534815:ae=-.07674158463557636:ae=-.06335553143454145:t[1]>56.50000000000001?ae=.16390494217299284:ae=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ae=.041717597065890205:ae=-.10357913492269129:t[10]>29.500000000000004?ae=.1365512866715726:ae=.020600048310575665:ae=.09708785634773187:ae=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ae=-.03146213719547347:ae=.11784024316238083:ae=-.050940520532045355:ae=-.047988344143075616:t[191]>1e-35?ae=.028764654731460032:ae=.0011911575567860023;let te;t[294]>1e-35?t[10]>50.50000000000001?te=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?te=-.05103908560370243:te=.05002066201169583:te=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?te=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?te=.127983140816313:te=-.05436534163636867:te=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?te=-.009504203657088933:t[8]>819.5000000000001?te=.18689664822602375:te=.03635576744011826:te=-.029862411809998525:t[223]>1e-35?te=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?te=-.09405026597863717:t[0]>4153.500000000001?te=.053577663326799765:te=-.05062127873995668:te=.06512222894425874:t[39]>1e-35?te=-.04985311717827547:t[51]>1e-35?te=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?te=-.02860634573675884:te=.08863753005590103:te=.11158892111063744:t[0]>655.5000000000001?te=-.031005736641654926:te=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?te=-.00843386136334982:te=-.05273594615999777:te=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?te=-.015774115523598486:te=.10147367091236065:te=-.048307000563071016:te=.002118376117677254;let pe;t[8]>1014.5000000000001?t[9]>137.50000000000003?pe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?pe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?pe=.07211107542565391:pe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?pe=-.0751486415451188:t[1]>59.50000000000001?pe=.13459005084554104:pe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?pe=.06715575425741895:pe=-.005895690393702183:t[8]>2915.5000000000005?pe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?pe=-.00029068886245881074:pe=.0613467393188786:t[148]>1e-35?pe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?pe=.003887223773199377:pe=-.08553893131979015:pe=.025654192706396767:pe=-.05651733979610658:pe=-.02039913645229667:t[2]>7.500000000000001?pe=-.1058450646728524:pe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?pe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?pe=.1283258201586378:pe=-.01718135372229775:pe=-.07702452408491414:t[125]>1e-35?pe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?pe=.04273051857848212:pe=-.04533122948101463:t[2]>196.50000000000003?pe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?pe=.0231032972703664:pe=-.04807386814498683:pe=.002729435991332102;let Ae;t[179]>1e-35?Ae=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?Ae=.026484626664041125:t[10]>1.5000000000000002?Ae=-.10187000872941615:Ae=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ae=.09574540795390041:Ae=-.06454986703691233:Ae=-.11411849349353141:t[266]>1e-35?Ae=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?Ae=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?Ae=-.04403391373512386:Ae=.1132928075412222:t[2]>47.50000000000001?Ae=-.09700191391838056:Ae=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?Ae=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?Ae=-.001668912999010927:Ae=-.02363511102970245:t[8]>58.50000000000001?Ae=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?Ae=.0911011436534449:t[1]>28.500000000000004?Ae=-.07192390493729035:Ae=.06913818091291246:Ae=-.012312625373699222:Ae=.06784496312307986:Ae=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?Ae=.0026564453057705273:Ae=-.025425772389361445:t[122]>1e-35?Ae=-.12046786388602149:t[0]>3183.5000000000005?Ae=.01162092842804907:t[91]>1e-35?Ae=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?Ae=-.0001647792543020228:Ae=-.023664538532907665:Ae=.01609078206180752;let Oe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Oe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Oe=-.017696526862422682:Oe=.1450050954613223:Oe=-.05406930069823832:Oe=-.08308700260259043:t[120]>1e-35?Oe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Oe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Oe=.038431826961746934:Oe=-.05937462906539856:t[9]>65.50000000000001?Oe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Oe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Oe=-.09579030954062734:Oe=.025064711572811746:Oe=.02579440518821548:Oe=.1044440128091862:Oe=-.058348633139536844:Oe=.07766788227934436:Oe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Oe=.07463684068207214:Oe=.18244269035484484:t[6]>39.50000000000001?Oe=-.06050050067471004:Oe=.05787759066913493:Oe=.010783225857972171:Oe=.1674891243602606:t[4]>9.500000000000002?Oe=-.004814132027475892:Oe=-.14543299413454813:Oe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Oe=-.07634466313617769:Oe=.0287825335169114:Oe=-.06894721943300268:Oe=-.00023988459059521937;let Te;t[131]>1e-35?t[1]>93.50000000000001?Te=-.05706887458825395:t[2]>1.5000000000000002?Te=.011446637886629108:Te=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Te=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Te=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Te=.026278724448495064:Te=.17053138400480508:t[0]>4463.500000000001?Te=-.06482289890096041:Te=.03026516489536295:Te=-.031785170717683144:Te=.1312690622980455:t[13]>1e-35?Te=.14336922540461444:Te=.03523850945454039:Te=-.015407465968975714:t[39]>1e-35?Te=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Te=-.0659975068798723:Te=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Te=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Te=.057409156184759516:Te=.2024322059866388:Te=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Te=.010648654146284154:t[308]>1e-35?Te=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Te=.12364025998551711:Te=-.02247495081065243:t[1]>22.500000000000004?Te=-.0726295464624251:Te=.03481895086048152:t[0]>4331.500000000001?Te=-.04775443357020673:Te=.07172377425057568:t[2]>89.50000000000001?Te=-.11782645274716962:Te=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let lt;t[179]>1e-35?lt=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?lt=-.07595415373151816:lt=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?lt=.022822510448266862:lt=.17491569312933697:lt=-.058362287133533565:t[2]>2.5000000000000004?lt=-.03633895806364428:lt=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?lt=-.07294848747514579:lt=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?lt=-.07009535282685533:t[8]>2640.0000000000005?lt=-.051761240111316276:t[131]>1e-35?lt=-.06245774419231631:lt=.03495606662854905:lt=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?lt=.0015036626973581122:lt=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?lt=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?lt=.022343994371919224:lt=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?lt=.07724450228328664:t[0]>3853.5000000000005?lt=-.15671707454435677:t[10]>28.500000000000004?lt=-.10179090671841723:lt=.014878216919760927:lt=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?lt=.14054154485273487:lt=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?lt=-.08632985141410315:lt=.005524157938954954:lt=-.08802502622523681:lt=-.0004649168897260341;let _t;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?_t=-.007458687464321174:_t=-.09444966249102484:t[1]>23.500000000000004?_t=.08564129697360716:_t=-.07105002902845851:_t=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?_t=-.10326216566705966:t[1]>26.500000000000004?_t=.0050539832484585365:_t=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?_t=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?_t=.05783632021087773:t[10]>17.500000000000004?_t=-.06720598671764105:t[1]>47.50000000000001?_t=.097495825172558:_t=-.013372242800584872:_t=-.06463226787713715:t[42]>1e-35?_t=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?_t=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?_t=.11051270080118503:_t=.027719462817590454:t[8]>597.5000000000001?_t=-.08441503592016869:_t=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?_t=-.12190088985091102:_t=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?_t=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?_t=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?_t=.016585157185448045:_t=-.11032043771149425:_t=.01586986028570486:t[8]>388.50000000000006?_t=-.10592413013261853:_t=.04930703248769364:t[13]>1e-35?_t=.003621937787920821:_t=-.0013786331198611841;let xt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?xt=.009769895322846493:xt=-.10620052926943656:t[9]>19.500000000000004?xt=.03781202525403449:t[9]>14.500000000000002?xt=-.11485785321365344:t[9]>6.500000000000001?xt=.07677177833073881:t[0]>4342.500000000001?xt=-.07079285609687631:t[49]>1e-35?xt=.06156814809246001:xt=-.014788509042554625:xt=-.032659201618470655:t[5]>5207.500000000001?xt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?xt=-.03094160322187924:t[1]>29.500000000000004?xt=.09474646043921069:xt=.023445783928231618:xt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?xt=-.07164443768784848:t[1]>29.500000000000004?xt=.089473622509272:t[8]>597.5000000000001?xt=-.08155349903101317:xt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?xt=-.004003900679358653:t[190]>1e-35?xt=-.09236113461485262:t[8]>3198.5000000000005?xt=-.0124130160451179:xt=.018453070064009328:t[15]>1e-35?xt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?xt=-.0009580759587680961:xt=-.03227283036698222:xt=.01369287669536875:t[1]>50.50000000000001?xt=-.04213060332500437:t[35]>1e-35?xt=-.11508095777767471:t[190]>1e-35?xt=-.08611884672400155:t[297]>1e-35?xt=.05723551879433584:xt=-.004829340082311461;let ht;t[183]>1e-35?ht=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?ht=-.11753465135886734:ht=-.007515490299047085:ht=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?ht=-.12371142493530439:t[1]>36.50000000000001?ht=.032189417575190435:ht=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?ht=-.0784518658439288:t[2]>54.50000000000001?ht=.12477882322370665:ht=.000313468482399738:ht=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?ht=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?ht=.0353146070135579:ht=-.06327619611098285:ht=.02813577701641991:ht=-.12354390728506215:t[34]>1e-35?ht=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?ht=-.01245803535276381:ht=-.07169472553475001:t[1]>11.500000000000002?ht=.12989984824561698:ht=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?ht=.010390226893521422:t[10]>14.500000000000002?ht=.16790888126487719:ht=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?ht=-.043398307129729134:ht=.09963544907820426:t[9]>30.500000000000004?ht=-.13540713124984502:t[9]>17.500000000000004?ht=.0509435850590757:ht=-.04761897852404613:t[4]>78.50000000000001?ht=.09197086656470652:ht=.0006771050176682337;let ue;t[122]>1e-35?t[6]>36.50000000000001?ue=.05686884451670743:ue=-.05334759543084309:t[266]>1e-35?ue=-.08603579519816038:t[157]>1e-35?ue=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ue=-.0499592651503952:t[0]>725.5000000000001?ue=.11780353905132664:ue=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ue=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ue=-.03190157229022304:ue=.07985197845805492:ue=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ue=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ue=-.027174047777029083:ue=.057117284879796476:t[3]>43.50000000000001?ue=-.0016147040913107311:ue=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ue=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ue=-.01466076988151239:ue=.13375695925484857:ue=-.04885873081899647:t[0]>5566.500000000001?ue=.11086813028591343:t[8]>992.5000000000001?ue=-.07622304217072383:ue=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ue=.03285858361708423:ue=-.12354858211764992:ue=.0672788301823281:t[15]>1e-35?ue=.08658836986585006:ue=-.02741484278509758:t[290]>1e-35?ue=-.08161310335133287:t[135]>1e-35?ue=-.04824156054814152:ue=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let $e;t[189]>1e-35?t[0]>5269.500000000001?$e=-.103183298350443:t[2]>51.50000000000001?$e=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?$e=-.05186168947388339:$e=.0496996365539082:t[10]>23.500000000000004?$e=.1404445738719:t[93]>1e-35?$e=.0027146310074558505:t[5]>3821.5000000000005?$e=.002153033152069652:t[4]>2.5000000000000004?$e=.007663539551317215:$e=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?$e=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?$e=-.021479467709980358:$e=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?$e=.021660293256233334:$e=-.0927396152303864:$e=.0665074081601698:t[0]>1550.5000000000002?$e=.08972407105958534:$e=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?$e=.06761927942466854:$e=-.015762168112653286:t[17]>1e-35?$e=.10311304131145381:$e=-.017672785252336027:$e=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?$e=-.10638321435298535:$e=.0007073011744385905:t[18]>1e-35?$e=-.027056185501334325:t[145]>1e-35?$e=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?$e=.09762140519655171:t[9]>110.50000000000001?$e=-.06581942957595835:t[6]>54.50000000000001?$e=.04959634035251596:$e=.0022616298654554207:$e=-.007437620924990854;let se;t[179]>1e-35?se=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?se=.1470294450403005:se=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?se=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?se=.07965955447707423:t[10]>10.500000000000002?se=-.09236156404262426:se=.03396273196231458:se=-.13246465021467432:se=.07092822261735353:se=-.08753829085942:se=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?se=.004705878789890202:se=.13775378964952867:se=-.04770928980587811:t[10]>29.500000000000004?se=.011221519891071544:t[0]>3853.5000000000005?se=.06365381191628273:se=.15506252245336827:t[1]>37.50000000000001?se=-.07254777021042061:se=.026514587757252385:t[308]>1e-35?se=.04115804816617256:t[10]>26.500000000000004?se=.02077721353011946:t[5]>3548.5000000000005?se=-.1280907116663952:se=-.021974774274438:t[306]>1e-35?se=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?se=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?se=-.005710865560475598:t[94]>1e-35?se=-.06751507982853555:se=.027250040757588703:t[9]>52.50000000000001?se=.07060357924595577:se=-.030297760713011795:se=-.0006005400085266517;let le;t[113]>1e-35?le=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?le=-.06996356565314456:le=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?le=-.08317707559926495:t[21]>1e-35?le=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?le=-.010538203005984922:le=.08454819465349446:t[9]>124.50000000000001?le=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?le=-.08542251249346582:t[9]>50.50000000000001?le=-.023428882537657472:le=.010042500833979073:le=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?le=.03006025206979096:t[9]>108.50000000000001?le=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?le=.04222035773042132:le=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?le=-.07209095448054853:le=.028065954981903313:le=.08714651929917122:le=-.006678820669279169:t[10]>40.50000000000001?le=.006982396294941626:le=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?le=-.09351114982645548:t[4]>3.5000000000000004?le=-.004837550129223451:le=-.08324141237464677:t[303]>1e-35?le=.10703037493990825:t[9]>156.50000000000003?le=-.10803018621648303:t[116]>1e-35?le=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?le=.10261721665006701:le=.018994509090668264:le=.0011244262442038839;let qe;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?qe=-.08404263465005328:t[0]>3682.5000000000005?qe=.041259223920298876:t[1]>29.500000000000004?qe=-.09541257493441671:qe=.001482192721625409:qe=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?qe=-.08268996098437432:t[230]>1e-35?qe=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?qe=-913218977737457e-19:t[4]>10.500000000000002?qe=-.056334165674005156:t[127]>1e-35?qe=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?qe=-.04231200150318989:t[10]>42.50000000000001?qe=.10182973257894812:qe=.015934763950068445:qe=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?qe=-.041117068322885315:qe=.1167767830037126:qe=.13611206992387337:t[10]>41.50000000000001?qe=-.07120286010564107:qe=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?qe=-.07702290997669524:t[198]>1e-35?qe=.08776558554437136:qe=-.008290740324975692:t[2]>32.50000000000001?qe=.07198457624219955:qe=.005463113714361629:qe=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?qe=.03295785445437507:qe=.15140250150674536:qe=-.035613213948910254:t[186]>1e-35?qe=.06849425535860769:t[96]>1e-35?qe=.06028225812727254:qe=-.007582543288662308;let Be;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Be=.08396556264106572:Be=-.0562516995099192:Be=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Be=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Be=.0052017514017035915:Be=-.11194119432743639:Be=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Be=-.025692451287403446:Be=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Be=-.11892250746801664:t[10]>22.500000000000004?Be=.07548493166973796:Be=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Be=.13750699058082427:t[18]>1e-35?Be=.06535408879552801:Be=-.054118179035040674:Be=.1344282838979622:t[0]>3982.5000000000005?Be=-.10409582202467015:t[19]>1e-35?Be=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Be=.012705935670766466:Be=.14149359442527545:Be=-.047977876173706004:t[20]>1e-35?Be=.057945228080337946:t[0]>3642.5000000000005?Be=-.008726535792122467:Be=-.08424769891378858:t[34]>1e-35?Be=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Be=.01196849566739346:Be=.1614642278429876:Be=-.043022338150701625:t[3]>5.500000000000001?Be=-.03907848255033881:Be=.018280601026175593:Be=.0006654540402589085;let Ee;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?Ee=-.01386103677247845:Ee=.11386694333005128:t[4]>27.500000000000004?Ee=-.021862617610091336:t[2]>31.500000000000004?Ee=.0828858469030438:Ee=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?Ee=.11303635767048735:Ee=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?Ee=-.04238798044549342:Ee=.022091190130494303:t[5]>5082.500000000001?Ee=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?Ee=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?Ee=-.04291104140431434:t[17]>1e-35?Ee=.11256797532342613:Ee=-.017206916368289193:Ee=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?Ee=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?Ee=.03581712466863222:Ee=.14770264307668884:t[8]>73.50000000000001?Ee=-.13093289429740068:Ee=.042461737442702936:t[52]>1e-35?Ee=.0501831919044939:Ee=-.010450249720465756:Ee=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?Ee=.0005381332165438493:Ee=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?Ee=.04849637311285226:Ee=-.036671377119808564:t[0]>421.50000000000006?Ee=.00020968499911058945:Ee=.11636422423182405:Ee=-.12687837788222575:Ee=.0012774367867215346;let je;t[120]>1e-35?je=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?je=-.042799574885345304:je=.07412430171193245:je=-.11248270469336048:t[193]>1e-35?je=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?je=.028911612178122104:je=.12326369727728437:t[0]>4091.5000000000005?je=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?je=.1159839898100149:je=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?je=-.0216343737351583:je=-.1220272260878369:t[2]>18.500000000000004?je=.09152924475072398:t[8]>55.50000000000001?je=.039508716651005665:je=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?je=.06793009902674053:je=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?je=-.04391068849624096:je=.04009967593394672:t[8]>1085.5000000000002?je=-.024773826356034825:je=-.13919707884246582:je=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?je=-.11567917501901476:je=-.006813640337684114:t[3]>7.500000000000001?je=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?je=-.001754586408351048:je=-.055422422450722056:je=-.06090032532532226:t[0]>5269.500000000001?je=.11787981735983527:je=-.00198119768540783:je=.00210412924303036;let tt;t[294]>1e-35?t[10]>50.50000000000001?tt=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?tt=-.06063239096209816:tt=.03317022411417386:tt=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?tt=-.013608609329298802:tt=.09078000157330264:t[99]>1e-35?tt=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?tt=-.07536137260189814:tt=.006253266595455118:t[10]>28.500000000000004?tt=-.006106041147592768:t[9]>156.50000000000003?tt=-.11828932797811101:t[94]>1e-35?tt=-.02566078479505714:t[303]>1e-35?tt=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?tt=-.08401252789168523:t[5]>4244.500000000001?tt=.026372887658499107:t[1]>16.500000000000004?tt=-.027836756345634026:tt=.09205362097909099:tt=.00934612788718244:t[203]>1e-35?tt=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?tt=-.09580979052540028:t[1]>50.50000000000001?tt=-.06402211827281554:tt=.08342858760095972:t[2]>36.50000000000001?tt=.008114897658204584:t[92]>1e-35?tt=.09541587072672864:tt=-.022342147210555434:tt=-.01660492519175128:tt=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?tt=.15846731118501817:tt=.039498507912023195:t[245]>1e-35?tt=.07008718676813333:tt=.0019806389728814727;let pt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?pt=-.01192072916082109:pt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?pt=.06874032717466054:t[4]>40.50000000000001?pt=-.07752510020707537:t[1]>76.50000000000001?pt=-.09944032260703917:t[8]>1381.5000000000002?pt=-.054466635810800745:t[1]>32.50000000000001?pt=.05974084520839573:pt=-.0384718740755954:pt=-.11374190719134032:t[0]>2151.5000000000005?pt=-.13703645155803298:pt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?pt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?pt=.013539805885738608:pt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?pt=.09941880179344399:pt=-.01608127391210995:pt=.08025226531247417:t[9]>67.50000000000001?pt=.13525448212444113:t[6]>61.50000000000001?pt=-.05511099182158894:t[94]>1e-35?pt=-.06821509831783572:t[128]>1e-35?pt=.11361314817714643:pt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?pt=-.09954181329804547:t[197]>1e-35?pt=.10102833149755386:t[188]>1e-35?pt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?pt=-.03781554214742005:pt=.09927933385592314:pt=-.020006000056720083:pt=-.10520473615957895:pt=-.12006990846253787:pt=-.00026111570975317574;let Ft;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ft=-.019188245509744628:Ft=-.13354864350075848:t[0]>2461.5000000000005?Ft=.051885477468354396:Ft=-.0833581968852119:Ft=.08233441701532287:Ft=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ft=.09926337893072812:Ft=-.027753610497327715:t[0]>1972.5000000000002?Ft=-.09780045823152517:Ft=.032380915168504935:Ft=.11502632261226381:t[17]>1e-35?Ft=-.06094965899579662:t[10]>40.50000000000001?Ft=-.07500475582440802:Ft=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ft=-.09584538995220808:Ft=-.00908705814304442:Ft=.03203281520813893:t[10]>49.50000000000001?Ft=-.03146271513986384:t[2]>63.50000000000001?Ft=.13172001315536286:t[224]>1e-35?Ft=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ft=.09521549382082259:Ft=-.04414925613522197:t[0]>1847.5000000000002?Ft=-.09118580379557353:Ft=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ft=.03525144509943896:Ft=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ft=-.04766112322938157:t[2]>10.500000000000002?Ft=.0728516504357201:Ft=-.05049625965272536:Ft=-.10868663055825774:Ft=.0005382613419948969;let Jt;t[147]>1e-35?t[1]>53.50000000000001?Jt=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Jt=-.030504020655417463:Jt=.07102458639110094:Jt=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?Jt=.055304563442710876:t[1]>53.50000000000001?Jt=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?Jt=-.1568835288372895:Jt=-.0279829124400056:Jt=.04493843959601833:Jt=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?Jt=-.054133834303687026:t[9]>48.50000000000001?Jt=.11263810289007213:t[9]>9.500000000000002?Jt=-.02202034562838259:t[4]>45.50000000000001?Jt=-.03410927569045158:Jt=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?Jt=-.029687297407295893:Jt=.10673602850001934:t[4]>42.50000000000001?Jt=.0036275562945108117:Jt=-.0760789221330622:Jt=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Jt=.08274426793676076:Jt=-.07076234425516396:Jt=.13890177606150175:Jt=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?Jt=-.09250637750836187:Jt=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?Jt=-.01897867921812603:Jt=.04890781705365262:Jt=-.11569892307597907:t[2]>106.50000000000001?Jt=.09032697440623969:Jt=.00047935919155035045;let Qt;t[115]>1e-35?Qt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Qt=-.10131179514695865:t[8]>938.5000000000001?Qt=.10203729808015481:Qt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Qt=.03574015165562999:Qt=-.07763042506449493:Qt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Qt=.0665706259130275:Qt=-.06586817559309924:Qt=.11925564412287476:Qt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Qt=.046017146627455346:Qt=-.08623321630086885:t[8]>1765.5000000000002?Qt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Qt=.11143827902215087:Qt=-.01817808730473413:Qt=.16980985030210127:Qt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Qt=.010168994879727824:Qt=-.09099594488792513:t[9]>1.5000000000000002?Qt=.0533459678147928:Qt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Qt=-.062346959148773695:t[1]>47.50000000000001?Qt=-.0021578343835599316:t[2]>27.500000000000004?Qt=.19567373210166172:Qt=.07851555379116423:t[18]>1e-35?Qt=.03711549097804649:t[8]>359.50000000000006?Qt=.012492346746905587:t[4]>20.500000000000004?Qt=.047511695735697544:Qt=-.07999269063948773:Qt=6802045404471004e-20;let Vr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Vr=.0011484728213539738:Vr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Vr=-.09828874964938798:t[8]>1586.5000000000002?Vr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Vr=.011938269926919522:Vr=.17541983715953954:t[19]>1e-35?Vr=.023002786011088672:Vr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Vr=.06508934844183291:Vr=-.10168553534835639:Vr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Vr=.021140806225203937:Vr=-.1167833342453639:t[2]>33.50000000000001?Vr=.13163585734056618:Vr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Vr=.06314479201263888:Vr=-.09639088327091713:t[10]>29.500000000000004?Vr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Vr=40577156464836036e-21:Vr=.12322387121810757:Vr=-.03697224045046014:t[1]>22.500000000000004?Vr=.016474835887320276:Vr=.16919298733903063:Vr=.07633203630214054:Vr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Vr=.14150493354700563:Vr=-.01831155354975749:t[1]>28.500000000000004?Vr=-.07952557178685365:t[10]>28.500000000000004?Vr=.0665695554984927:Vr=-.053640139319277094:Vr=.0004754840665898665;let Pr;t[76]>1e-35?Pr=-.06814884255939921:t[179]>1e-35?Pr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Pr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Pr=.004193658608848433:Pr=-.1066968975983452:t[8]>302.50000000000006?Pr=.05476730110440451:Pr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Pr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Pr=.013555772109446666:Pr=-.09856116699770784:Pr=.0284329611813383:t[2]>52.50000000000001?Pr=.04008708444763762:t[9]>29.500000000000004?Pr=-.1289599546008197:Pr=-.018566534248335896:t[8]>747.5000000000001?Pr=.02236484980076122:Pr=.1148871655157582:t[8]>3084.0000000000005?Pr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Pr=.03164751204281298:Pr=.11752140436184891:t[9]>42.50000000000001?Pr=-.07180559595410106:t[22]>1e-35?Pr=.09325040416256854:Pr=-.016041122807939914:Pr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Pr=-.010718250133458515:Pr=.09818827994853763:Pr=.010180038981174032:Pr=-.039472162599295535:t[9]>170.50000000000003?Pr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Pr=-.08674788057474031:Pr=.02077653508548371:Pr=-.0003536561382007414;let ln;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?ln=.018337297491457794:ln=-.05926206443180149:ln=.024026520855881126:t[288]>1e-35?t[184]>1e-35?ln=.10747078482128616:t[126]>1e-35?ln=-.10550625192391357:t[7]>71.50000000000001?ln=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?ln=.1317396472229434:ln=-.025035791351328947:ln=-.0728334305864372:t[8]>963.5000000000001?ln=.023642201723096064:ln=.183010326734258:t[128]>1e-35?ln=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?ln=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?ln=-.1088876900335281:ln=.02758317023002635:ln=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?ln=-.01928020117446408:ln=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?ln=.07893723375925096:ln=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?ln=-.10301657587280551:ln=.005787463140224318:ln=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?ln=-.019296977889522397:ln=-.07274529751752634:t[1]>30.500000000000004?ln=-.050368901143148286:ln=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?ln=.0015332402792773946:ln=.09930153676749967:ln=-.06370844564357069:ln=.00042272155209927616;let ve;t[71]>1e-35?t[4]>17.500000000000004?ve=.12586844370423247:ve=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?ve=-.08474891624263797:t[8]>125.50000000000001?ve=.08125086980439704:ve=-.04082085238068532:t[0]>3863.5000000000005?ve=.020481535807469208:ve=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?ve=-.019110200161573936:ve=-.12387719685855114:t[0]>1102.5000000000002?ve=.08376595701957407:ve=-.031821919580524834:t[9]>4.500000000000001?ve=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?ve=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?ve=.1349841206807871:ve=.011864053595560297:t[1]>41.50000000000001?ve=-.08203662486612544:t[2]>18.500000000000004?ve=-.009541865642346947:ve=.08345043168501759:t[2]>10.500000000000002?ve=-.09585031818030947:ve=.019432330487099865:ve=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?ve=.11951517733981365:ve=-.016651014735738538:t[1]>28.500000000000004?ve=-.07410922545030711:t[10]>28.500000000000004?ve=.05886430683844788:ve=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?ve=.04802269879144705:ve=-.026208212831796737:t[4]>45.50000000000001?ve=-.03227476944664786:ve=.05124575625622705:ve=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let Tt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?Tt=-.10504730480402079:t[5]>3341.5000000000005?Tt=.11087894671081754:Tt=-.0406668834674614:Tt=.03308382165616109:t[8]>104.50000000000001?Tt=-.10431436764549162:Tt=.0073928337244891455:t[4]>34.50000000000001?Tt=-.10571751512748416:Tt=-.006081128814142983:t[13]>1e-35?Tt=.1299673566095023:t[4]>60.50000000000001?Tt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?Tt=.04857126072645073:Tt=-.03431365358104773:t[4]>16.500000000000004?Tt=.04101865986596709:Tt=.16480274980378218:t[10]>26.500000000000004?Tt=.03673978504199255:t[10]>9.500000000000002?Tt=-.10996402743800027:t[308]>1e-35?Tt=.0553693735082498:Tt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?Tt=.010902983761213922:Tt=.1325118659895645:Tt=-.064362945508595:t[1]>66.50000000000001?Tt=.033416767779331176:Tt=-.054080316225040496:t[42]>1e-35?Tt=-.07762364337810815:t[10]>1089.5000000000002?Tt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?Tt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?Tt=.0220102041325908:Tt=-.06516708740003069:Tt=.012833498905748267:t[224]>1e-35?Tt=-.007038418272997865:Tt=.00037666304316290967;let or;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?or=.07554189644995735:or=-.052089349455904946:or=-.10148206848169845:t[113]>1e-35?or=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?or=.07172653627995676:or=-.07602959317610998:or=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?or=-.0399322883690891:or=.06523495517476098:or=-.10358715295743802:t[193]>1e-35?or=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?or=.015928764772252406:or=.1341513061552287:or=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?or=-.033592997607280156:or=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?or=-.08402551858097379:or=.017401984506038796:t[1]>25.500000000000004?or=.13337205393591278:or=-.01160208350090984:or=.06708317942315471:t[8]>227.50000000000003?or=-.08486943882418681:or=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?or=-.10496268177586783:or=-.020921489532370493:or=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?or=.11639296062157028:or=-.004275784356569115:t[32]>1e-35?or=-.07297384970166025:or=.006026841626381599:or=.002034611134960428;let Zt;t[248]>1e-35?Zt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Zt=-.06455513326540585:t[1]>29.500000000000004?Zt=.07718474591552532:t[4]>7.500000000000001?Zt=.040139336931404826:Zt=-.09685734690563386:Zt=.00015327283570347363:t[9]>88.50000000000001?Zt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Zt=-.04077257804338707:Zt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Zt=.03778141591008941:Zt=-.06459919920634845:Zt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Zt=.14063930759326346:t[0]>179.50000000000003?Zt=.07287482250668585:t[8]>1180.5000000000002?Zt=-.14419393112726253:t[10]>28.500000000000004?Zt=-.07993142770099469:t[17]>1e-35?Zt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Zt=.05527969663610186:Zt=-.10824385941441346:t[3]>11.500000000000002?Zt=.12358502961047915:Zt=-.017509147119622873:t[0]>74.50000000000001?Zt=-.014907705458730486:t[8]>95.50000000000001?Zt=-.02225118168342062:Zt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Zt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Zt=.04962819555610421:Zt=-.07213577821855309:Zt=.09139529824708481:t[19]>1e-35?Zt=.013439401088345224:Zt=-.049274647207292056:Zt=.10531673719686951;let Ir;t[40]>1e-35?t[0]>1937.5000000000002?Ir=-.06421671152073961:Ir=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?Ir=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?Ir=-.03520420769287065:t[8]>1085.5000000000002?Ir=-.019817352506127633:Ir=.11444439424520964:Ir=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?Ir=-.010490117519863269:Ir=.08104430117757461:t[121]>1e-35?t[243]>1e-35?Ir=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?Ir=.06619344145920268:t[0]>4091.5000000000005?Ir=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ir=.10016091391222309:Ir=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?Ir=-.019511460451434884:Ir=-.11643672465055221:t[2]>18.500000000000004?Ir=.07848228087333317:t[8]>55.50000000000001?Ir=.032583027899956235:Ir=-.11209832692153521:t[11]>1e-35?Ir=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?Ir=-.09996887746328006:t[9]>2.5000000000000004?Ir=.02157682011863397:Ir=-.05247727848991843:Ir=.07409150201483244:t[1]>38.50000000000001?Ir=-.11378466075449625:t[224]>1e-35?Ir=-.10741749127732923:t[1]>26.500000000000004?Ir=.07343136534146562:Ir=-.07013573628594773:t[25]>1e-35?Ir=-.04626669734164317:Ir=.05518333197956482:Ir=.00032434010867555516;let ur;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?ur=.026313251010808853:ur=-.08997339150292381:ur=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?ur=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?ur=.0905155504503746:t[8]>1049.5000000000002?ur=-.062312558183394054:t[8]>719.5000000000001?ur=.09583836191410239:t[0]>3719.5000000000005?ur=-.0778097309430818:ur=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?ur=-.12920865648544927:t[0]>2699.5000000000005?ur=-.07086587879041864:ur=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?ur=-.11377786322600797:ur=-.009486325820117998:t[1]>55.50000000000001?ur=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?ur=-.07938291201004219:t[2]>36.50000000000001?ur=.01520046732530246:ur=.13649854049662832:ur=-.07145015938528873:t[8]>407.50000000000006?ur=-.00350257360822279:ur=.11332047082193297:ur=-.10060624458629897:ur=.05429496612497562:t[8]>1446.5000000000002?ur=.006073419197482838:ur=-.08718676350883998:ur=-.11532497988252638:ur=.10766270463068293:t[34]>1e-35?ur=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?ur=-.0004109812623829506:ur=.021601073497455662:ur=-7343540098965853e-20;let rr;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?rr=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?rr=.05995640200798119:t[0]>3443.5000000000005?rr=-.14698883458733583:rr=-.030039164579240187:t[189]>1e-35?rr=-.06086763220538141:t[1]>86.50000000000001?rr=-.05096727866142538:t[4]>64.50000000000001?rr=.11240554253834577:t[4]>45.50000000000001?rr=-.030279760168394117:t[6]>45.50000000000001?rr=.10161088917815142:t[10]>77.50000000000001?rr=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?rr=-.06672020005240323:rr=.08831457502630258:t[8]>2592.5000000000005?rr=-.052617701047376654:t[10]>29.500000000000004?rr=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?rr=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?rr=-.064099222705728:rr=.044332487521538365:t[0]>2882.5000000000005?rr=.031099546885005065:rr=.12938467051623853:t[0]>4221.500000000001?rr=-.0928676413498701:t[9]>30.500000000000004?rr=-.05781824812803708:rr=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?rr=-.06648105454098469:rr=.05985487552383097:rr=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?rr=.05282385499619401:t[1]>66.50000000000001?rr=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?rr=.027885690791379255:rr=-.08407126408362446:rr=.014432924125571093:rr=-9903435845205118e-20;let lr;t[76]>1e-35?lr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?lr=.013633653464240465:lr=-.10164319411983509:lr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?lr=.00632864847804078:lr=-.08393000368134668:lr=.07870508617440916:t[284]>1e-35?lr=.1092302727710421:lr=-.0025505047582483234:t[248]>1e-35?lr=.07101822393621864:t[274]>1e-35?lr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?lr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?lr=.025081789181021243:lr=-.014813325803582618:t[9]>33.50000000000001?lr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?lr=.11926990418060353:lr=.01852125513565268:lr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?lr=-.1178464984373743:t[283]>1e-35?lr=.043370859226927405:t[5]>4320.500000000001?lr=-.01103141226366587:t[8]>1104.5000000000002?lr=-.023053423988095886:lr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?lr=.000579145585864887:lr=.03389152834202143:t[128]>1e-35?lr=-.14527722052568462:t[210]>1e-35?lr=-.08915971541902741:t[7]>9.500000000000002?lr=-.03307314577076116:t[18]>1e-35?lr=-.05521712302023565:lr=.009315605032770029:lr=.0036332551852289933;let nr;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?nr=-.07583539600416284:t[188]>1e-35?nr=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?nr=-.011038193049597113:nr=.08154028164397753:t[1]>85.50000000000001?nr=.10259361975201933:nr=.011640408330521594:nr=-.00023319159023748508:t[92]>1e-35?nr=.13771692859530546:nr=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?nr=.09967230141007705:t[30]>1e-35?nr=-.08888529037551285:nr=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?nr=.08284665960761373:nr=-.029292565021289504:t[7]>7.500000000000001?nr=-.09945093355204493:nr=-.008381393701708593:t[20]>1e-35?nr=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?nr=.07585582641438211:t[8]>284.50000000000006?nr=-.029387993239886723:nr=.07716738177321587:t[1]>18.500000000000004?nr=.026745348497993746:nr=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?nr=.02337306890530338:nr=-.10390355904767366:nr=.07390521199638532:nr=-.06788247515155237:nr=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?nr=-.06360325615644084:nr=.04342192339836601:nr=-.10598779152030145:nr=.05253384605768211;let Br;t[3]>7.500000000000001?t[157]>1e-35?Br=-.07514182877923786:Br=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Br=.028692053800951845:Br=.14081686716133598:Br=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Br=.0037139292567243084:Br=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Br=.01202688580305612:Br=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Br=.043935495082738626:Br=-.05639305759669704:t[247]>1e-35?Br=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Br=.10331836202616368:Br=.0006926658459781341:t[96]>1e-35?Br=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Br=-.0741403257305367:Br=.022900127535540854:t[7]>3.5000000000000004?Br=.038110741403836294:Br=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Br=-.09552842289807008:t[1]>27.500000000000004?Br=.012505935885798007:Br=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Br=-.1046104767723845:Br=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Br=.023466328488582572:Br=.11730925774586994:Br=-.04771965631104874:Br=.17059689880751394:Br=-.08181850955999449:t[26]>1e-35?Br=-.12727482696678769:Br=-.014343123272734182;let zr;t[147]>1e-35?t[1]>53.50000000000001?zr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?zr=-.02763546051134888:zr=.06423344777499343:zr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?zr=.049825139823021586:t[7]>22.500000000000004?zr=-.01131680751379858:t[0]>2579.5000000000005?zr=-.10673674485369694:zr=-.015387212937189957:zr=.04347325151148724:t[179]>1e-35?zr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?zr=.0650355590939066:zr=-.0473332870892226:zr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?zr=.11139543329789044:t[126]>1e-35?zr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?zr=.06370903833231022:t[10]>29.500000000000004?zr=.03415223859607161:t[10]>3.5000000000000004?zr=-.07415518117873297:zr=-.0014119203473324082:zr=.12617652343819508:t[9]>41.50000000000001?zr=-.10311145857176976:t[8]>2757.5000000000005?zr=-.08106484219011428:t[7]>71.50000000000001?zr=-.09783384432091176:t[1]>88.50000000000001?zr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?zr=-.008884084501608536:zr=.061339437777743616:zr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?zr=.01526664064166223:zr=.13534828515415498:zr=-.06985484465894776:zr=.0005758961943178744;let sn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?sn=-.029152732370514342:sn=.07173628916139178:t[1]>36.50000000000001?sn=-.08859111297255318:sn=.0018030071815630785:sn=.13652461563759322:sn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?sn=-.07145140450454163:t[21]>1e-35?sn=-.07422841663493233:sn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?sn=.11864240653986852:t[3]>33.50000000000001?sn=-.08821209591953476:sn=.05706392280054726:sn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?sn=.01953613016837112:sn=-.059781039130025006:t[148]>1e-35?sn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?sn=.07207826841738371:t[202]>1e-35?sn=.08163917539410503:sn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?sn=-.06858280496900336:sn=-.1781828899516648:sn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?sn=.018232649414147116:sn=-.04419781124222661:sn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?sn=.11452368095776105:sn=-.036496437259924026:sn=-.040445338739465486:sn=.0816572651001145:sn=-.08968914517368663:sn=.0002826343082585516;let Cn;t[189]>1e-35?t[0]>5269.500000000001?Cn=-.08839493050459957:t[10]>85.50000000000001?Cn=.10046908365702462:t[8]>2592.5000000000005?Cn=-.09632233975926387:t[8]>2000.5000000000002?Cn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?Cn=.035504970430426296:t[1]>31.500000000000004?Cn=-.1133764813142531:Cn=-.01138280942244812:t[8]>1125.5000000000002?Cn=.09800530246229806:Cn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?Cn=.07316772160107896:Cn=-.059095014819051765:Cn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?Cn=-.09150209066166894:t[8]>3084.0000000000005?Cn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?Cn=-.04449234460408263:Cn=.05568837973347338:Cn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?Cn=.12741077850267066:Cn=.007372371864985329:t[2]>39.50000000000001?Cn=.02295917234617787:Cn=.14966532083907075:t[1]>39.50000000000001?Cn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?Cn=-.02511861881285652:t[1]>27.500000000000004?Cn=.08683660011672288:Cn=.02956214835267301:t[9]>15.500000000000002?Cn=-.016538805462996232:Cn=.04352738094981517:Cn=-.05561856645643868:t[9]>170.50000000000003?Cn=-.07996752635874248:t[179]>1e-35?Cn=-.09065975936933919:Cn=-.00042817975060427177;let ni;t[39]>1e-35?t[4]>25.500000000000004?ni=.03443173196222934:ni=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?ni=-.0013415395759330318:ni=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?ni=.002297618040307216:ni=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?ni=-.015297257305397608:ni=.09651828834062742:ni=-.06636003334371929:t[10]>11.500000000000002?ni=.17631616138309397:t[0]>1639.5000000000002?ni=3804386478092585e-20:ni=-.09099296398683193:ni=-.06874415876172972:t[0]>2151.5000000000005?ni=-.1311264883406766:ni=.00809052010141122:t[253]>1e-35?ni=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?ni=.045038497754638605:ni=-.07770167665661752:ni=-.08596294280650517:ni=.08538655727027213:ni=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?ni=.054627956617973275:t[1]>61.50000000000001?ni=-.11994465088415499:t[4]>8.500000000000002?ni=.06676200239406452:ni=-.027503148069376867:t[8]>676.5000000000001?ni=-.10363964928357075:t[4]>8.500000000000002?ni=-.07589816227175682:ni=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?ni=.009093153189012338:ni=-.06119765876605404:ni=.0004668642103528348;let _n;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?_n=-.10100794502567233:_n=.08000205636470442:_n=-.11945419826856896:t[113]>1e-35?_n=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?_n=.1224302423880318:_n=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?_n=.0019277012166729114:t[1]>28.500000000000004?_n=-.054445821715687494:_n=.045645722976713245:t[30]>1e-35?_n=.13402660155331655:_n=.008921176001777645:_n=-.058547426505451076:_n=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?_n=-.13526418192218206:_n=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?_n=.0007263224246135398:_n=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?_n=-.11575657261278308:_n=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?_n=-.01995960178292952:_n=.11216586049153021:_n=-.10050961087149474:_n=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?_n=.10303451081526649:_n=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?_n=-.043799548968209395:_n=-.12451444314954115:t[4]>12.500000000000002?_n=-.03838117361958468:_n=.06504990789767144:t[57]>1e-35?_n=.06890006938293915:_n=.0003914274695562949;let ei;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?ei=.004271749009686975:ei=-.10523878297127605:ei=.04633982158107851:ei=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?ei=-.08655730561951676:t[8]>919.5000000000001?ei=-.0676453705610183:t[7]>18.500000000000004?ei=-.027787974193650575:ei=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?ei=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?ei=-.03473877164537313:t[8]>719.5000000000001?ei=.10471053866934404:ei=.008236107678382981:t[4]>57.50000000000001?ei=.09412219478825269:t[10]>66.50000000000001?ei=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?ei=-.040681323751002293:ei=.06374650297561021:ei=.12884615227401788:t[10]>5.500000000000001?ei=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?ei=-.05474068967150784:ei=.03744700650806603:ei=-.07846396348680855:t[1]>42.50000000000001?ei=.018972315810821302:ei=.10953621007604744:t[5]>4439.500000000001?ei=.010999776705494586:t[1]>40.50000000000001?ei=-.12394200059775967:t[10]>2.5000000000000004?ei=.013528093962849453:ei=-.09222088417048682:ei=-.12662967149701485:ei=.09327296405849603:t[3]>99.50000000000001?ei=-.013581954439986752:ei=.0005526498251862075;let an;t[187]>1e-35?t[243]>1e-35?an=-.08392792551692502:t[10]>68.50000000000001?an=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?an=-.0825306209711224:an=.049559996084532945:an=-.1064938580886302:an=.03353240732240275:an=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?an=.16966001471529374:t[1]>57.50000000000001?an=-.005772777673676247:an=.09383677041525058:t[8]>747.5000000000001?an=.054068175469351235:an=-.049968216310277036:t[8]>753.5000000000001?an=-.0679383555784074:t[4]>8.500000000000002?an=-.059757341189735386:an=.05701083682780414:an=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?an=.05820296128730006:an=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?an=.15340611616954566:an=.04385036188666874:t[0]>4449.500000000001?an=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?an=.004840354641006495:an=.09967827580276283:an=.11605363537391578:t[9]>19.500000000000004?an=-.0735831692725717:an=.019973331823355176:t[306]>1e-35?t[149]>1e-35?an=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?an=-.02442182361342386:an=.10334853004243093:an=-.030431948680167104:an=-956078595250818e-19;let Yn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Yn=-.040232505718244854:t[0]>3030.5000000000005?Yn=.0634109586813073:Yn=-.04043617034245621:Yn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Yn=-.007859096946435131:Yn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Yn=.05515771679628051:Yn=-.04214471312668263:Yn=-.09589322222261765:t[193]>1e-35?Yn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Yn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Yn=-.08152604001147906:t[11]>1e-35?Yn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Yn=.13100930780107503:t[10]>25.500000000000004?Yn=.05921074710011526:Yn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Yn=.0009447118243153454:Yn=-.09820565036865991:Yn=.057146909749745546:t[0]>2115.5000000000005?Yn=-.12331216726611678:Yn=.007281983677694285:t[2]>56.50000000000001?Yn=.012310154675612615:Yn=-.08873665774670461:t[6]>25.500000000000004?Yn=.134708740821879:t[9]>5.500000000000001?Yn=-.0805901581148979:t[224]>1e-35?Yn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Yn=.10842593386554122:t[2]>13.500000000000002?Yn=.06466798320378395:Yn=-.08578130788886655:Yn=-.03590892078300114:Yn=.0003499894043880708;let Pe;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?Pe=.10839808814624702:Pe=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?Pe=-.007478368069393829:Pe=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?Pe=.04035247751736232:t[0]>4255.500000000001?Pe=-.1310865624507367:t[0]>4004.5000000000005?Pe=.06647367311982634:Pe=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?Pe=-.011618902907510411:Pe=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?Pe=.09356028223727986:Pe=-.03811765057032162:Pe=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?Pe=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?Pe=.1146142460964847:t[1]>62.50000000000001?Pe=-.09679869865322362:t[9]>71.50000000000001?Pe=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?Pe=-.039046426387852974:Pe=.04558778688367152:Pe=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?Pe=.03261697816211156:t[15]>1e-35?Pe=.02586252542264368:t[2]>14.500000000000002?Pe=-.016420452667484604:Pe=-.1011799626006976:Pe=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?Pe=.010193588102560583:Pe=.11748729525930773:Pe=-.04468162226743652:Pe=-.028365274393617957:t[71]>1e-35?Pe=.05115139346588793:Pe=-.0001510425316936658;let K;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?K=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?K=.020637047900190317:K=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?K=-.04632587527094407:K=.08603684785510396:K=-.05101401015448496:K=.025466432054358498:K=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?K=.020385355430046367:K=.12032592051335252:K=-.012387370292173013:t[2]>23.500000000000004?K=-.12568545484492677:K=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?K=.043528764484784536:K=.14352071657196003:K=-.009332833816977268:K=.11186782227735846:K=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?K=-.05649104643152564:K=.03884200719305747:t[42]>1e-35?K=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?K=-.04103416502526736:K=.04881823954656287:t[4]>15.500000000000002?K=.009342724662897898:t[0]>3969.5000000000005?K=-.025637309961309498:K=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?K=-.08185697075265091:t[0]>2215.5000000000005?K=.030063975892297354:t[0]>807.5000000000001?K=-.03924325550733229:K=.0415330999189793:K=-.00024374664461674863;let Ce;t[3]>7.500000000000001?Ce=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ce=.025798416259686565:Ce=.13251610353146012:Ce=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?Ce=-.11098564237775424:Ce=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?Ce=.15347826616466054:t[3]>4.500000000000001?Ce=.10379320730958941:Ce=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?Ce=.03159791088468647:Ce=-.10612873364104258:Ce=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?Ce=-.02335760775001469:Ce=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?Ce=-.011164334474672973:Ce=-.06594044410501655:t[207]>1e-35?Ce=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?Ce=-.01725821503981916:Ce=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?Ce=-.04226531631656534:Ce=-.14409800530171432:Ce=-.03245576341206398:t[8]>4214.500000000001?Ce=.0895409165534886:t[247]>1e-35?Ce=-.06506383629143335:t[118]>1e-35?Ce=-.07214270121257443:t[8]>546.5000000000001?Ce=-.004385020865473831:Ce=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?Ce=.046278501133958524:Ce=-.030835570926968044:t[0]>493.50000000000006?Ce=-.12794504651610425:Ce=.009415039807550776;let Ie;t[304]>1e-35?Ie=-.04717777269217453:t[76]>1e-35?Ie=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?Ie=-.09648224457374217:t[132]>1e-35?Ie=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?Ie=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?Ie=.10838431695638147:t[230]>1e-35?Ie=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?Ie=.050071316251979:Ie=-.006356941111525215:t[6]>8.500000000000002?Ie=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?Ie=.10217402850540398:Ie=-.048840949025349197:Ie=-.03668313197909846:t[7]>39.50000000000001?Ie=-.0562642841496003:t[10]>2.5000000000000004?Ie=.09749777369987417:Ie=-.04848223121417616:t[0]>5453.500000000001?Ie=.08316648226133942:Ie=-.0261979698267618:t[212]>1e-35?Ie=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?Ie=.04837009746506856:Ie=-.09184360565631328:Ie=.0032411047845613606:t[0]>4733.500000000001?Ie=.0977378556864798:Ie=.010776545559325588:Ie=-.012483310473120218:Ie=-.049284121449103935:Ie=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?Ie=-.08380361910948711:Ie=.07375088778585813:Ie=-.1084864186071348:Ie=.0007819503469605476;let F;t[7]>17.500000000000004?t[115]>1e-35?F=.08741852531696623:t[167]>1e-35?F=.10078975495600809:F=-.0018324767784017562:t[290]>1e-35?F=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?F=.1379733311640402:F=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?F=-.09360083033774169:F=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?F=-.015599362579530679:t[0]>4593.500000000001?F=-.12029549262691491:F=-.018917032256501397:F=.04632831686576592:F=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?F=-.05894883236412263:F=.05213944998315824:F=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?F=.07577412405680808:F=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?F=-.0277076900736147:t[1]>65.50000000000001?F=-.023587471585763506:F=.10184896592433082:F=-.057699270527916825:F=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?F=.06566902102799584:t[10]>25.500000000000004?F=-.07033633753181047:F=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?F=-.08108035861059537:F=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?F=-.12431182772561139:F=.01886235886984271:F=.0025579594894418116;let D;t[8]>2915.5000000000005?t[101]>1e-35?D=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?D=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?D=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?D=.0687641681341721:t[10]>102.50000000000001?D=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?D=-.06762578396473291:t[10]>65.50000000000001?D=-.05226727783610509:t[282]>1e-35?D=.09911438410640917:t[19]>1e-35?D=.06915156336429933:D=-.006565637886508241:D=-.08344300251849307:D=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?D=.19428463865406298:D=.016073883020956765:t[13]>1e-35?D=.06864077097923665:D=-.01388867527034731:t[0]>1847.5000000000002?D=.004655280608161356:t[1]>40.50000000000001?D=.031406054057765996:D=.12798062439212832:D=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?D=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?D=-.0706095614785733:D=.04227164041372561:D=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?D=-.07139533369873902:D=.008952586782921625:D=.06086212582180936:D=-.0816938490403437:D=-.051224901945956025:D=-.10525399124186095:D=.000270924147208224;let ee;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ee=.029186512383291244:t[7]>1.5000000000000002?ee=-.14984127276725573:t[1]>40.50000000000001?ee=.032757060730648144:ee=-.07675575422749602:t[6]>8.500000000000002?ee=.10599766037117893:ee=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ee=-.051394622947855385:ee=.03237141302699347:ee=.12526173027943244:ee=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ee=-.07383912482657777:t[0]>5147.500000000001?ee=.07008813937042091:t[10]>38.50000000000001?ee=-.06779203808365307:ee=-.013782769999524498:ee=.0880038869117715:ee=-.12846294176070952:t[281]>1e-35?ee=-.06810806903850834:t[10]>227.50000000000003?ee=-.08937977001661111:t[10]>130.50000000000003?ee=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ee=.011036530162093841:ee=-.11500797478569702:ee=.03702229366129399:ee=.07242026683784307:t[189]>1e-35?ee=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ee=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ee=-.02608892716555304:ee=.09609599320761308:t[9]>105.50000000000001?ee=-.06848127135991534:ee=.0023675721254089715:t[86]>1e-35?ee=-.11049635625500497:ee=-.004847764219432233;let ge;t[125]>1e-35?t[0]>3969.5000000000005?ge=-.09462233499115416:ge=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ge=-.030700661288166148:ge=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ge=.03149547314036763:ge=-.08166208257451366:t[0]>5850.500000000001?ge=-.10228136324773157:t[102]>1e-35?ge=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ge=.01782894842128785:t[13]>1e-35?ge=.002680190260979968:ge=.1773965720476949:t[2]>72.50000000000001?ge=.09090831938627947:t[1]>59.50000000000001?ge=-.12297206702816128:t[0]>4977.500000000001?ge=.09899015653118268:ge=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ge=-.0675900954187773:ge=.012336403425364092:ge=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ge=-.02671721777458802:ge=-.09242452991958029:t[284]>1e-35?ge=-.08585691288582491:ge=.013332890564324447:t[4]>14.500000000000002?ge=-.005245022074799553:t[23]>1e-35?ge=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ge=-.09289852307936758:t[116]>1e-35?ge=-.09686573010015055:t[8]>804.5000000000001?ge=.03812547148215318:ge=.005162744968176633:t[9]>43.50000000000001?ge=-.059246106396159376:ge=.050370113808135275:ge=.000794041852811028;let _e;t[3]>7.500000000000001?_e=.0004981426543104341:t[9]>114.50000000000001?_e=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?_e=-.019061766497948867:_e=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?_e=-.006044199577160493:_e=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?_e=.11486607015912494:t[9]>16.500000000000004?_e=-.08686820858087294:_e=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?_e=-.022230207980026437:_e=.1056683690528792:_e=-.05859530800943035:_e=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?_e=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?_e=-.05177544573528314:_e=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?_e=.15159657923771555:_e=-.0060542654587671055:t[9]>5.500000000000001?_e=-.042808028205051786:t[1]>48.50000000000001?_e=-.010449538258110742:_e=.10026907521968294:_e=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?_e=-.02272452389409874:_e=-.11202691218244319:t[5]>1809.5000000000002?_e=-.04460413584255906:_e=.08196329474205256:t[10]>69.50000000000001?_e=.10221481166238167:_e=.0004063052701699382:t[243]>1e-35?_e=-.07563941678849846:t[18]>1e-35?_e=.02563513231103432:_e=-.004740081147303786;let ut;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ut=.057446442918106:ut=-.04404018270156349:ut=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?ut=-.05930486238817954:t[1]>29.500000000000004?ut=.06955866121256543:t[8]>597.5000000000001?ut=-.06538593556505168:ut=.06212512595497445:ut=.00021102929959182257:t[9]>90.50000000000001?ut=.0958061289119631:t[102]>1e-35?ut=.07172059675638813:t[1]>47.50000000000001?ut=-.03879798603977766:t[297]>1e-35?ut=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?ut=.003805910996312012:ut=.09304295674749524:t[11]>1e-35?t[18]>1e-35?ut=.11252376801858695:t[288]>1e-35?ut=-.10293901912180432:ut=.014669268837893872:t[1]>42.50000000000001?ut=-.05988274123836837:t[145]>1e-35?ut=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?ut=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?ut=-.03366718308159971:ut=.11936550608549797:t[1]>31.500000000000004?ut=-.07454716789539667:ut=.027859650621164217:t[10]>10.500000000000002?ut=-.11806374092321247:ut=-.03506042229223101:ut=-.0007080765837654515:t[10]>6.500000000000001?ut=-.028077713664996503:t[2]>7.500000000000001?ut=.15803724124216814:ut=.0351381284833169:ut=-.07877953381054767;let St;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?St=.14144941521975005:St=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?St=.10514088112381886:t[7]>18.500000000000004?St=-.10370643555956745:St=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?St=-.0508129468802936:t[224]>1e-35?St=-.037816066368733595:t[10]>43.50000000000001?St=.07793408602607932:St=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?St=.036972453794202324:St=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?St=.09475302525132188:St=-.03580104945898193:St=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?St=-.1282448778804823:St=-.014395808269207212:St=-.008940927190750592:St=-.1459118815453748:t[0]>4897.500000000001?St=-.09733068457286576:t[1]>57.50000000000001?St=.06575271409540207:St=-.019556422817450115:St=-.10623959222984136:t[18]>1e-35?St=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?St=.008125645893104896:St=-.11084368630465868:St=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?St=-.05854904579626861:t[4]>5.500000000000001?St=.02985784951394175:St=-.03247600140149334:St=-.11152899295304973:St=-.00035424577714215764;let Kt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?Kt=-.06563670567578264:Kt=.067656954313663:Kt=-.10388217548685377:t[8]>2302.5000000000005?Kt=.07190621943790435:t[4]>67.50000000000001?Kt=.060020507643618604:t[4]>38.50000000000001?Kt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?Kt=-.06568134366461277:t[8]>1075.5000000000002?Kt=-.004768057709758692:Kt=.11785959165999467:Kt=-.05080221682879267:Kt=.14814206127494542:Kt=-.07241946332311736:t[253]>1e-35?Kt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?Kt=-.02471195342450034:Kt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?Kt=-.10741850739482771:Kt=.010051635824944:Kt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?Kt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?Kt=-.08992396138178163:Kt=.010944365997007212:Kt=.06221307021813793:Kt=.1286024087559141:t[127]>1e-35?Kt=.06568148624531012:t[10]>40.50000000000001?Kt=-.07567979134643352:t[5]>5647.500000000001?Kt=.07594672895572069:Kt=-.018158016446439187:t[6]>55.50000000000001?Kt=.009293422430111872:t[4]>45.50000000000001?Kt=-.017749818406964022:t[2]>46.50000000000001?Kt=.01714136511113982:Kt=-724762291423549e-19;let er;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?er=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?er=.07084726276890757:er=-.11232323677722932:er=.04812773089510436:er=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?er=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?er=.0879462816013881:er=-.002966662093626573:t[306]>1e-35?er=-.04588085188342676:er=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?er=-.006600332774461143:er=.1272481351557754:er=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?er=.011884312066620044:er=.11678751052403374:t[4]>8.500000000000002?er=.03627129613273813:er=-.12132783497902287:er=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?er=-.06830131718398992:t[0]>5147.500000000001?er=.062360406249609306:t[4]>4.500000000000001?er=-.013162203864592055:er=-.07153029184927609:er=.07628618062271557:er=-.12085065687320373:t[190]>1e-35?er=-.045816889524231186:t[137]>1e-35?er=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?er=.025895337822752502:er=-.06503949350616421:t[10]>227.50000000000003?er=-.09989456525790491:t[10]>130.50000000000003?er=.08616651057030683:er=.0001234981796706021;let Yt;t[8]>1014.5000000000001?t[9]>137.50000000000003?Yt=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Yt=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Yt=-.141732381961068:Yt=-.0317152307496497:Yt=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Yt=.12191801556691254:Yt=-.0003444689085397977:Yt=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Yt=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Yt=-.05676033995381961:Yt=.10933961076803381:t[4]>26.500000000000004?Yt=-.11667582544549814:t[8]>1765.5000000000002?Yt=.032174455312047705:Yt=-.0755016390126608:t[293]>1e-35?Yt=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Yt=.026571311956824436:t[15]>1e-35?Yt=.06175459479851121:Yt=-.018778084411148754:t[9]>40.50000000000001?Yt=-.09420232889965811:Yt=-.004578248021263184:t[2]>1.5000000000000002?Yt=.005453714644971445:Yt=-.03907138175699279:Yt=-.055296364182154736:t[23]>1e-35?Yt=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Yt=-.09358146510580179:Yt=.060524657996178094:Yt=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Yt=-.12698331085931538:Yt=.006059605604079918:t[2]>196.50000000000003?Yt=-.09451315810804783:Yt=.0011390147031687425;let bt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?bt=.05517359070460923:bt=-.04758751221404857:bt=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?bt=.1040436595565776:t[9]>21.500000000000004?bt=.04032250517675179:t[107]>1e-35?bt=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?bt=.1192453009230486:t[1]>51.50000000000001?bt=.0443376336292195:bt=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?bt=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?bt=-.08999822408398037:bt=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?bt=-.061850439226075:bt=.08849196353361093:bt=.10536348167793089:t[92]>1e-35?bt=.04894947712119185:t[9]>16.500000000000004?bt=.05900227903883853:t[9]>5.500000000000001?bt=-.11946594348916476:bt=-.03652096348071964:t[1]>41.50000000000001?bt=-.07411603110840567:bt=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?bt=.08493634342741495:t[11]>1e-35?bt=-.10899097825564363:bt=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?bt=.08356655906359918:t[7]>25.500000000000004?bt=-.09475076526194888:t[10]>5.500000000000001?bt=-.01999406228763778:bt=.06696212545889428:t[6]>20.500000000000004?bt=.14713592661393468:bt=.0459917279002218:bt=.00027445928493734093;let yr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?yr=-.06904501553217077:yr=.05696231672035904:yr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?yr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?yr=-.011419256378538392:t[0]>3830.5000000000005?yr=.140315841503076:yr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?yr=-.04027822909411164:yr=.03176085103667189:yr=.06779515865838849:t[4]>15.500000000000002?yr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?yr=.06124039747298539:yr=-.04312732764434027:yr=.09161522761808062:yr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?yr=.11211681010488772:t[13]>1e-35?yr=.06725735814960367:yr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?yr=.11743605068905603:yr=-.011309033539148687:yr=-.07896094707523052:yr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?yr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?yr=.02836295848998302:yr=.12210680366745175:yr=-.058302317470509096:t[5]>4144.500000000001?yr=.06123341960495106:yr=-.03840046906926525:yr=-.05221474543453495:yr=.03988215485860711:yr=-.00033074684693083496;let ui=xjt(e+r+n+i+o+a+c+l+u+f+p+m+h+g+A+y+E+b+S+R+B+L+O+Y+V+z+Q+U+Z+J+j+$+X+ie+ae+te+pe+Ae+Oe+Te+Je+Fe+lt+_t+xt+ht+ue+Ue+ye+$e+se+le+qe+Be+Ee+je+tt+pt+Ft+Jt+Qt+Vr+Pr+ln+ve+Ge+ft+Tt+or+Zt+Ir+ur+rr+lr+nr+Br+zr+sn+Cn+ni+_n+ei+an+Yn+Pe+K+Ce+Ie+F+D+ee+ge+_e+ut+St+Kt+er+Yt+bt+yr);return[1-ui,ui]}s(KKe,"multilineModelPredict");function xjt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(xjt,"sigmoid");var Ejt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},YKe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function JKe(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(Ejt[r]??[]).some(c=>o.includes(c))}s(JKe,"hasComment");var bX=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=JKe(e,-2,r),this.rstripSecondToLastLineHasComment=JKe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},gve=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new bX(e,n),this.suffixFeatures=new bX(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(YKe).length+1).fill(0);r[YKe[this.language]??0]=1;let n=new Array(Object.keys(Sx).length+1).fill(0);n[Sx[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(Sx).length+1).fill(0);i[Sx[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(Sx).length+1).fill(0);o[Sx[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(Sx).length+1).fill(0);return a[Sx[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function bjt(t,e){return new gve(t.prefix,t.suffix,e)}s(bjt,"constructMultilineFeatures");function XKe(t,e){let r=bjt(t,e).constructFeatures();return KKe(r)[1]}s(XKe,"requestMultilineScore");d();d();d();d();async function*_x(t,e){for await(let r of t)yield e(r)}s(_x,"asyncIterableMap");async function*ZKe(t,e){for await(let r of t)await e(r)&&(yield r)}s(ZKe,"asyncIterableFilter");async function*o7(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(o7,"asyncIterableMapFilter");async function*eYe(...t){for(let e of t)yield*e}s(eYe,"asyncIterableConcat");d();async function QR(t,e,r,n){let i=Gr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Mt).updateExPValuesAndAssignments(n,i)}s(QR,"createTelemetryWithExpWithId");function Oc(t,{turn:e,conversation:r}={},n){return QR(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(Oc,"createTelemetryWithExpWithTurn");function s7(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},f={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(Ijt(c))),a=a.extendedBy(u,f),a}s(s7,"extendUserMessageTelemetryData");function Ijt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(Ijt,"mapSkillResolutionsForTelemetry");function tYe(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),IX(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(tYe,"createUserMessageTelemetryData");function rYe(t,e,r,n,i,o,a){let c=wjt(r);return IX(t.ctx,o,e,r,{source:"model",turnIndex:(t.conversation.turns.length-1).toString(),headerRequestId:i,uiKind:e,codeBlockLanguages:JSON.stringify(c),mode:(t.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:t.turn.getResolvedModelId()??"unknown"},{messageCharLen:r.length,numCodeBlocks:c.length,numTokens:n},a).properties.messageId}s(rYe,"createModelMessageTelemetryData");function nYe(t,e,r,n,i,o,a){IX(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(nYe,"createOffTopicMessageTelemetryData");function iYe(t,e,r,n,i,o,a,c,l){let u=IX(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return Tjt(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(iYe,"createSuggestionMessageTelemetryData");var oYe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function sYe(t,e,r){let n=await Oc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";_f(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(sYe,"telemetryIndexCodesearch");function IX(t,e,r,n,i,o,a){let c=a??Gr.createAndMarkAsIssued();if(!("messageId"in i)&&!("messageId"in c.properties)){let m=Er();i.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let l={messageText:n,...i},u=c.extendedBy(i,o),f=c.extendedBy(l),p=cu(r);return Bt(t,`${p}.message`,u),Bt(t,`${p}.messageText`,f,1),u}s(IX,"telemetryMessage");function aYe(t,e,r,n){_f(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(aYe,"createSuggestionShownTelemetryData");function Tjt(t,e,r,n,i,o,a,c){_f(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(Tjt,"createSuggestionSelectedTelemetryData");function _f(t,e,r,n,i,o){let a=o??Gr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Bt(t,i,c),c}s(_f,"telemetryUserAction");function f3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Bt(t,"engine.messages",n,1)}s(f3,"logEngineMessages");function cu(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}s(cu,"telemetryPrefixForUiKind");function wjt(t){let e=t.split(`
`),r=[],n;for(let i=0;i<e.length;i++){let o=e[i];if(n)new RegExp(`^\\s*${n.delimiter}\\s*$`).test(o)?(r.push({languageId:n.languageId,totalLines:n.totalLines}),n=void 0):n.totalLines++;else{let a=o.match(/^(\s*)(`{3,}|~{3,})([a-zA-Z0-9_+]*)/);a&&(n={delimiter:a[2],languageId:a[3],totalLines:0})}}return r}s(wjt,"getCodeBlocks");function cYe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(cYe,"uiKindToIntent");function HT(t){return t==="inline"?"conversationInline":"conversationPanel"}s(HT,"conversationSourceToUiKind");function lYe(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};dYe(t,"round",i.extendedBy(o,a))}s(lYe,"createAgentRoundTelemetryData");function uYe(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};dYe(t,"toolCall",c.extendedBy(l,u))}s(uYe,"createToolInvocationTelemetryData");function dYe(t,e,r){return Bt(t,`${cu("agentPanel")}.${e}`,r)}s(dYe,"logAgenticEvent");function Sjt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(Sjt,"truncateContentIfNeeded");function TX(t,e,r,n,i,o,a){let c=`${cu(e)}.${a}`,l=o.extendedBy(r,n);Bt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=Sjt(i.currentFileContent));let f=o.extendedBy(u,n);Bt(t,`${c}.restricted`,f,1)}s(TX,"telemetryEditSurvivalTracking");d();d();function Rx(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(Rx,"toString");var Wp=new Ct("streamChoices"),Ave=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new xve;this.tool_calls=new Cve;this.function_call=new vve;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0&&this.tool_calls.update(e.delta.tool_calls),e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function _jt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(_jt,"splitChunk");var yve=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.id&&(this.id=e.id),e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},Cve=class{constructor(){this.toolCalls=[]}static{s(this,"StreamingToolCalls")}update(e){e.forEach(r=>{let n=this.toolCalls.length>0?this.toolCalls[this.toolCalls.length-1]:void 0;(!n||r.id&&n.id!==r.id)&&(n=new yve,this.toolCalls.push(n)),n.update(r)})}getToolCalls(){return this.toolCalls}},vve=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},xve=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},$T=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=UR(this.response);this.stats=new Eve;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Wp.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Wp.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Wp.debug(this.ctx,"chunk",a.toString());let[c,l]=_jt(r+a.toString());r=l;for(let u of c){let f=u.slice(5).trim();if(f=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(f)}catch{Wp.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&Rjt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Wp.error(this.ctx,"Error in response:",p.error.message):Wp.error(this.ctx,"Unexpected response with no choices or error: "+f)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Wp.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new Ave);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let A=this.asSolutionDecision(),y=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||y){let b=g.text.join("");if(A=this.asSolutionDecision(await e(b,{text:b,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>a7(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(A.yieldSolution=!0,A.continueStreaming=!1),!A.yieldSolution)continue;let E=h.finish_reason??"client-trimmed";if(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:E,engineName:i??"",engineChoiceSource:bT(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:A.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;A.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Wp.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Wp.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>a7(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Wp.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function wX(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Wp.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Wp.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Wp.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=a7(e.solution);return SX(t,n,o,e.index,e.requestId,i,r)}s(wX,"prepareSolutionForReturn");function a7(t){let e=t.text.join(""),r=kjt(t),n=Pjt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((f,p)=>f.concat(p),[]),c=t.top_logprobs.reduce((f,p)=>f.concat(p),[]),l=t.text_offset.reduce((f,p)=>f.concat(p),[]),u=t.tokens.reduce((f,p)=>f.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(a7,"convertToAPIJsonData");function Rjt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(Rjt,"isCopilotConfirmation");function fYe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${Rx(n)}. Input: '${t}'`)}}s(fYe,"parseCallArguments");function kjt(t){let e=[],r=t.tool_calls.getToolCalls();for(let n of r)if(n.name){let i=n.arguments.join("").trim(),o=fYe(i,"tool call",n.name);e.push({type:"function",function:{name:n.name,arguments:o},approxNumTokens:n.arguments.length+1,id:n.id})}return e}s(kjt,"extractToolCalls");function Pjt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=fYe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(Pjt,"extractFunctionCall");var Eve=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new bve,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},bve=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};d();function _X(t,e){return t!==null&&typeof t=="object"&&e in t}s(_X,"hasKey");function Rf(t,e){return _X(t,e)?t[e]:void 0}s(Rf,"getKey");var mYe=Ne(mi());var Ya=new Ct("fetchCompletions");function UR(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(UR,"getRequestId");function p3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(p3,"getProcessingTime");function hYe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(hYe,"uiKindToIntent");var w0=class{static{s(this,"OpenAIFetcher")}};function Djt(t,e,r,n){return Jm(t,e,"proxy","v1/engines",r,n)}s(Djt,"getProxyEngineUrl");function RX(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(RX,"sanitizeRequestOptionTelemetry");async function pYe(t,e,r,n,i,o,a,c,l,u,f){let p=t.get(So),m=Djt(t,a,r,n),h=l.extendedBy({endpoint:n,engineName:r,uiKind:c},ED(e));RX(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Bt(t,"request.sent",h);let g=_a(),A=hYe(c);return yx(t,m,a.token,A,i,o,u,f).then(y=>{let E=UR(y);h.extendWithRequestId(E);let b=_a()-g;return h.measurements.totalTimeMs=b,Ya.info(t,`Request ${i} at <${m}> finished with ${y.status} status after ${b}ms`),h.properties.status=String(y.status),Ya.debug(t,"request.response properties",h.properties),Ya.debug(t,"request.response measurements",h.measurements),Ya.debug(t,"prompt:",e),Bt(t,"request.response",h),y}).catch(y=>{if(kd(y))throw Bt(t,"request.cancel",h),y;p.setWarning(Rf(y,"message")??"");let E=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",E),h.properties.message=String(Rf(y,"name")??""),h.properties.code=String(Rf(y,"code")??""),h.properties.errno=String(Rf(y,"errno")??""),h.properties.type=String(Rf(y,"type")??"");let b=_a()-g;throw h.measurements.totalTimeMs=b,Ya.info(t,`Request ${i} at <${m}> rejected with ${String(y)} after ${b}ms`),Ya.debug(t,"request.error properties",h.properties),Ya.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),y}).finally(()=>{i6e(t,e,h)})}s(pYe,"fetchWithInstrumentation");async function Bjt(t,e,r,n,i,o,a,c,l,u){let f=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});RX(o,f,["messages"]),f.properties.headerRequestId=i,Bt(t,"request.sent",f);let p=_a(),m=hYe(c),h={...DC(t)};try{let g=await yx(t,n,a.token,m,i,o,u,h),A=UR(g);f.extendWithRequestId(A);let y=_a()-p;return f.measurements.totalTimeMs=y,Ya.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${y}ms`),Ya.debug(t,"request.response properties",f.properties),Ya.debug(t,"request.response measurements",f.measurements),Ya.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",f),g}catch(g){if(kd(g))throw Bt(t,"request.cancel",f),g;let A=f.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",A),f.properties.message=String(Rf(g,"name")??""),f.properties.code=String(Rf(g,"code")??""),f.properties.errno=String(Rf(g,"errno")??""),f.properties.type=String(Rf(g,"type")??"");let y=_a()-p;throw f.measurements.totalTimeMs=y,Ya.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${y}ms`),Ya.debug(t,"request.error properties",f.properties),Ya.debug(t,"request.error measurements",f.measurements),Bt(t,"request.error",f),g}finally{f3(t,e,f)}}s(Bjt,"fetchChatWithInstrumentation");function Ive(t){return ZKe(t,e=>e.completionText.trim().length>0)}s(Ive,"postProcessChoices");var Njt="github.copilot.completions.quotaExceeded",c7=class extends w0{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(So),c="completions",l=await e.get($r).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Ya.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(c,e,r);return this.handleError(e,a,h,u,l)}let p=$T.create(e,r.count,u,n,[],o).processSSE(i),m=_x(p,h=>wX(e,h,n));return{type:"success",choices:Ive(m),getProcessingTime:s(()=>p3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let f="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},m=n.extendedBy({endpoint:f,model:c.name}),h=e.get(So),g=await e.get($r).getToken(),A=await Bjt(e,r,c.id,f,o,p,g,i,m,u);if(u?.isCancellationRequested){let S=A.body();try{S&&"destroy"in S&&typeof S.destroy=="function"?S.destroy():S instanceof ReadableStream&&S.cancel()}catch(R){Ya.exception(e,R,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(A.status!==200){let S=Gr.createAndMarkAsIssued({endpoint:f,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,S,A,g)}let E=$T.create(e,1,A,m,[],mYe.CancellationToken.None).processSSE(),b=_x(E,S=>wX(e,S,n));return{type:"success",choices:Ive(b),getProcessingTime:s(()=>p3(A),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(So),c="speculation",l=await e.get($r).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:Er(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},f=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(f==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=f.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(A){Ya.exception(e,A,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(f.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,f,l)}let m=$T.create(e,1,f,n,[],o).processSSE(i),h=_x(m,g=>wX(e,g,n));return{type:"success",choices:Ive(h),getProcessingTime:s(()=>p3(f),"getProcessingTime")}}createTelemetryData(e,r,n){return Gr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await $C(0),a?.isCancellationRequested?"not-sent":await pYe(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Mt).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:PX(e),temperature:m3(e,n.count),top_p:kX(e),n:n.count,stop:gYe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=gx(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await $C(0),a?.isCancellationRequested?"not-sent":await pYe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:Njt,title:"Learn More"});let l=Ps(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),Ya.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Ya.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Ya.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Bt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get($r).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Ya.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Ya.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Ya.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function SX(t,e,r,n,i,o,a){return n6e(t,e,r,i,n),{completionText:e,meanLogProb:Mjt(t,r),meanAlternativeLogProb:Ljt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:Er(),finishReason:r.finish_reason}}s(SX,"convertToAPIChoice");function Mjt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){un.exception(t,r,"Error calculating mean prob")}}s(Mjt,"calculateMeanLogProb");function Ljt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){un.exception(t,r,"Error calculating mean prob")}}s(Ljt,"calculateMeanAlternativeLogProb");function m3(t,e){return Vg(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(m3,"getTemperatureForSamples");var Fjt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function gYe(t,e){return Fjt[e??""]??[`


`,"\n```"]}s(gYe,"getStops");function kX(t){return 1}s(kX,"getTopP");function PX(t){return gO}s(PX,"getMaxSolutionTokens");var Tve=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},DX=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Tve(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new gY(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=SX(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let f=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});f.length>0&&(c[l]=f)}return Object.keys(c).length>0?c:void 0}};d();d();var kh=class{constructor(){this.cache=new wr(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var BX=new Ct("getCompletions");function NX(t,e,r){t.get(kh).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=h3(r.resultType),Bt(t,`${e}.shown`,r.telemetry)}s(NX,"telemetryShown");function AYe(t,e,r){let n=e+".accepted";Bt(t,n,r)}s(AYe,"telemetryAccepted");function yYe(t,e,r){let n=e+".rejected";Bt(t,n,r)}s(yYe,"telemetryRejected");function WT(t,e={}){return{...e,telemetryBlob:t}}s(WT,"mkCanceledResultTelemetry");function cc(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(cc,"mkBasicResultTelemetry");function CYe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=_a()-e.telemetryBlob.issuedTime,n=h3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return BX.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),Wpe(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(BX.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Bt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Wpe(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(CYe,"handleGhostTextResultTelemetry");function h3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(h3,"resultTypeToString");d();d();d();async function Ojt(t){if(t.isCancellationRequested)return;let e=new Rh,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(Ojt,"cancellationTokenToPromise");async function vYe(t,e){if(e){let r=Ojt(e);await Promise.race([t,r])}else await t}s(vYe,"raceCancellation");function wve(t){return Array.isArray(t)}s(wve,"isArrayOfT");async function xYe(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await EYe(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(xYe,"resolveAll");async function EYe(t,e){let r;return t instanceof Promise?r=await Qjt(t,e):r=await Ujt(t,e),r}s(EYe,"resolve");async function Qjt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:wve(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await vYe(i,e),n.resolutionTime=performance.now()-r,n}s(Qjt,"resolvePromise");async function Ujt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await vYe(i,e),n.resolutionTime=performance.now()-r,n}s(Ujt,"resolveIterable");d();var qjt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},Hjt="ms-vscode.cpptools",$jt="CppCompletionContextProvider";function bYe(t,e,r,n){(e.includes($jt)||e.length===1&&e[0]==="*")&&TYe(t,r,n)}s(bYe,"fillInCppVSActiveExperiments");function IYe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(Hjt))&&TYe(t,r,n)}s(IYe,"fillInCppVSCodeActiveExperiments");function TYe(t,e,r){try{let n=qjt,i=t.get(Mt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){un.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){un.exception(t,n,"fillInCppActiveExperiments")}}s(TYe,"addActiveExperiments");d();function MX(t,e,r){try{let n=t.get(Mt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return un.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(MX,"fillInCSharpActiveExperiments");d();var jT="fallbackContextProvider",LX={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function wYe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(jT))&&Wjt(t,r,n)}s(wYe,"fillInMultiLanguageActiveExperiments");function Wjt(t,e,r){try{let n=jjt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){un.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(Wjt,"addActiveExperiments");function jjt(t,e){let r=LX,n=t.get(Mt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){un.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(jjt,"getMultiLanguageContextProviderParamsFromExp");function SYe(t){let e={...LX};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(SYe,"getMultiLanguageContextProviderParamsFromActiveExperiments");d();var Gjt="typescript-ai-context-provider";function _Ye(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(Gjt)))return!1;try{let i=t.get(Mt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return un.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(_Ye,"fillInTsActiveExperiments");d();var RYe=x.Object({importance:x.Optional(x.Integer({minimum:0,maximum:100})),id:x.Optional(x.String()),origin:x.Optional(x.Union([x.Literal("request"),x.Literal("update")]))}),kYe=x.Intersect([x.Object({name:x.String(),value:x.String()}),RYe]),PYe=x.Intersect([x.Object({uri:x.String(),value:x.String(),additionalUris:x.Optional(x.Array(x.String()))}),RYe]),Vjt=[kYe,PYe],zjt=x.Union(Vjt),Kjt=new Map([["Trait",Xs.Compile(kYe)],["CodeSnippet",Xs.Compile(PYe)]]),Yjt=s(t=>t,"ensureTypesAreEqual");Yjt(!0);var Jjt=x.Object({contextItems:x.Array(zjt)}),Xjt=x.Object({selector:x.Array(x.Union([x.String(),x.Object({language:x.Optional(x.String()),scheme:x.Optional(x.String()),pattern:x.Optional(x.String())})]))}),Sve=x.Object({id:x.String()}),Zjt=x.Intersect([Sve,Xjt]),eGt=x.Intersect([Sve,Jjt]),DYe=x.Object({providers:x.Array(Zjt)}),BYe=x.Object({providers:x.Array(Sve)}),_ve=x.Object({providers:x.Array(eGt),updating:x.Optional(x.Array(x.String()))}),FX=x.Intersect([m6e,x.Object({contextItems:x.Optional(_ve)})]);function OX(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(OX,"filterContextItemsByType");function NYe(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of Kjt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(NYe,"filterSupportedContextItems");function tGt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(tGt,"validateContextItemId");function MYe(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??Er();if(!tGt(o)){let a=Er();un.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=Er();un.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(MYe,"addOrValidateContextItemsIDs");d();var dl=class{constructor(e=()=>new Rve){this.createStatistics=e;this.statistics=new wr(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},Rve=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,f]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),f==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let c=o.reduce((u,f)=>f.usage==="full"?u+1:f.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function QX(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(QX,"componentStatisticsToPromptMatcher");var LYe=Ne(mi());var Qc=class{static{s(this,"ContextProviderRegistry")}},WC=class{static{s(this,"DefaultContextProviders")}},A3=class extends WC{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},kve=class extends Qc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return un.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;MX(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let f=await this.matchProviders(i,o),p=f.filter(R=>R[1]>0);if(f.filter(R=>R[1]<=0).forEach(([R,B])=>{let L={providerId:R.id,matchScore:B,resolution:"none",resolutionTimeMs:0,data:[]};u.push(L)}),p.length===0)return u;if(a?.isCancellationRequested)return un.debug(this.ctx,"Resolving context providers cancelled"),[];IYe(this.ctx,p.map(R=>R[0].id),l,o),wYe(this.ctx,p.map(R=>R[0].id),l,o),_Ye(this.ctx,p.map(R=>R[0].id),l,o);let h=new LYe.CancellationTokenSource;if(a){let R=a.onCancellationRequested(B=>{h.cancel(),R.dispose()})}let g=R9(this.ctx)&&!mj(this.ctx)?0:rGt(this.ctx,o),A=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,y;g>0&&(y=setTimeout(()=>{h.cancel(),h.dispose()},g));let E=new Map,b={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:A,data:c};for(let[R]of p){let B=this.ctx.get(dl).getPreviousStatisticsForCompletion(r)?.get(R.id);B&&(b.previousUsageStatistics=B);let L=R.resolver.resolve(b,h.token);E.set(R.id,L)}let S=await xYe(E,h.token);y&&clearTimeout(y);for(let[R,B]of p){let L=S.get(R.id);if(L){if(L.status==="error")CY(L.reason)||un.error(this.ctx,`Error resolving context from ${R.id}: `,L.reason),u.push({providerId:R.id,matchScore:B,resolution:L.status,resolutionTimeMs:L.resolutionTime,data:[]});else{let O=[...L.value??[]];if((L.status==="none"||L.status==="partial")&&(un.info(this.ctx,`Context provider ${R.id} exceeded time budget of ${g}ms`),R.resolver.resolveOnTimeout))try{let U=R.resolver.resolveOnTimeout(b);wve(U)?O.push(...U):U&&O.push(U),O.length>0&&(L.status="partial")}catch(U){un.error(this.ctx,`Error in fallback logic for context provider ${R.id}: `,U)}let[Y,V]=NYe(O);V&&un.error(this.ctx,`Dropped ${V} context items from ${R.id} due to invalid schema`);let z=MYe(this.ctx,Y),Q={providerId:R.id,matchScore:B,resolution:L.status,resolutionTimeMs:L.resolutionTime,data:z};u.push(Q)}this.ctx.get(dl).getStatisticsForCompletion(r).setLastResolution(R.id,L.status)}else un.error(this.ctx,`Context provider ${R.id} not found in results`)}return u.sort((R,B)=>B.matchScore-R.matchScore)}async matchProviders(r,n){let i=$X(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},Pve=class extends Qc{constructor(r){super();this.delegate=r;this._cachedContextItems=new wr(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function UX(t,e){return new Pve(new kve(t,e))}s(UX,"getContextProviderRegistry");function qX(t,e,r){let n=t.get(dl).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:f}=o,p=n.get(a),m=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(m="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:f.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="full"||y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0,A=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),A!==void 0&&(h.numPartiallyUsedItems=A),h})}s(qX,"telemetrizeContextItems");function HX(t){return t.matchScore>0&&t.resolution!=="error"}s(HX,"matchContextItems");function $X(t,e){let r=Dve(t,e),n=zi(t,Ht.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(WC).getIds();return Array.from(new Set([...i,...r,...n]))}s($X,"getActiveContextProviders");function Dve(t,e){return R9(t)?["*"]:t.get(Mt).contextProviders(e)}s(Dve,"getExpContextProviders");function y3(t,e){return $X(t,e).length>0}s(y3,"useContextProviderAPI");function rGt(t,e){let r=zi(t,Ht.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Mt).contextProviderTimeBudget(e)}s(rGt,"getContextProviderTimeBudget");var S0=class{constructor(e){this.ctx=e;this.scheduledResolutions=new wr(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){let c=this.ctx.get(Qc),{textDocument:l,originalPosition:u,originalOffset:f,originalVersion:p,editsWithPosition:m}=e,h=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:f,position:u,proposedEdits:m.length>0?m:void 0},i,o,a?.data);this.scheduledResolutions.set(r,h)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};d();d();var WX=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await Ax(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},jX=class extends WX{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=OYe(r,n),this.isBlockStart(nGt(r,n))&&this.isBlockBodyEmpty(r,n)}};function nGt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(nGt,"getLineAtOffset");function OYe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(OYe,"rewindToNearestNonWs");function FYe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(FYe,"indent");function iGt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=FYe(t,r),i=FYe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(iGt,"outdented");var jC=class extends WX{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&tje(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=OYe(r,n);let i=await Ax(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let f=o;for(;f.parent;){if(f.type=="function_signature"||f.type=="method_signature"){let p=o.nextSibling;return p&&f.hasError()&&iGt(f,p,r)?!0:!f.children.find(h=>h.type==";")&&f.endIndex<=n}f=f.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let f=c.previousSibling;if(f!=null&&f.hasError()&&(f.text.startsWith('"""')||f.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let f=[...a.children].reverse(),p=f.find(h=>this.startKeywords.includes(h.type)),m=f.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=f.find(A=>A.hasError())?.children.find(A=>A.type=="block"));let h,g=0;for(let A of a.children){if(A.type==":"&&g==0){h=A;break}A.type=="("&&(g+=1),A.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let A=h.nextSibling;if(A.type=='"'||A.type=="'"||A.type=="ERROR"&&(A.text=='"""'||A.text=="'''"))return!0}return!1}break}case"javascript":{let h=f.find(y=>y.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=f.find(y=>y.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||f.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=f.find(A=>A.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||f.find(A=>A.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(l!=null){let f=this.nodeMatch[l.type],p=l.children.slice().reverse().find(m=>m.type==f);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=m==""?l.children[0]:l.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},oGt={python:new jC("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new jC("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new jC("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new jC("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new jX("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new jX("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new jC("csharp",{},new Map([]),[],"block",null,!0),java:new jC("java",{},new Map([]),[],"block",null,!0),php:new jC("php",{},new Map([]),[],"block",null,!0),cpp:new jC("cpp",{},new Map([]),[],"block",null,!0)};function Bve(t){if(!Fp(t))throw new Error(`Language ${t} is not supported`);return oGt[hY(t)]}s(Bve,"getBlockParser");async function QYe(t,e,r){return Fp(t)?Bve(t).isEmptyBlockStart(e,r):!1}s(QYe,"isEmptyBlockStart");async function UYe(t,e,r,n){if(Fp(t))return Bve(t).isBlockBodyFinished(e,r,n)}s(UYe,"isBlockBodyFinished");async function qYe(t,e,r){if(Fp(t))return Bve(t).getNodeStart(e,r)}s(qYe,"getNodeStart");var XGn=new Ct("parseBlock");function l7(t,e,r){let n=e.getText(vs.range(vs.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>UYe(o,n,a,i)}s(l7,"parsingBlockFinished");function VX(t,e){return QYe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(VX,"isEmptyBlockStartUtil");async function HYe(t,e,r,n){let o=e.getText(vs.range(vs.position(0,0),r))+n,a=await qYe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(HYe,"getNodeStartUtil");var sGt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),aGt=new RegExp(`^(${sGt.join("|")})`);function cGt(t){return aGt.test(t.trimLeft().toLowerCase())}s(cGt,"isContinuationLine");function GX(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(GX,"indentationOfLine");function zX(t,e){let r=t.getText(),n=t.offsetAt(e);return Nve(r,n,t.detectedLanguageId)}s(zX,"contextIndentation");function Nve(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(f,p,m){let h=p,g,A;for(;g===void 0&&h>=0&&h<f.length;)g=GX(f[h]),A=h,h+=m;if(r==="python"&&m===-1){h++;let y=f[h].trim();if(y.endsWith('"""')){if(!(y.startsWith('"""')&&y!=='"""'))for(h--;h>=0&&!f[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=GX(f[h]),A=h,h--}}return[g,A]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let f=c-1;f>=0;f--){let p=GX(n[f]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(Nve,"contextIndentationFromText");var lGt=!1;function uGt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&lGt&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let f=GX(u);if(f!==void 0&&(f<c||f===c&&!cGt(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(uGt,"completionCutOrContinue");function $Ye(t,e){return r=>{let n=uGt(r,t,e);return n==="continue"?void 0:n}}s($Ye,"indentationBlockFinished");d();d();d();d();d();d();var dGt={tokenizerName:"o200k_base"};function fGt(t){return{...dGt,...t}}s(fGt,"cursorContextOptions");function u7(t,e={}){let r=fGt(e),n=Ni(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(u7,"getCursorContext");d();d();var pGt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function WYe(t){let e=pGt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(WYe,"announceSnippet");var Mve=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Lve=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=AGt.get(e.languageId)??gGt}tokenize(e){return new Set(mGt(e).filter(r=>!this.stopsForLanguage.has(r)))}},jYe=new Mve(20),C3=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Lve(e)}get referenceTokens(){return Promise.resolve(this.createReferenceTokens())}createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=jYe.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[f,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(f,p).forEach(A=>A.forEach(y=>g.add(y),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&f>0&&n[n.length-1].endLine>f){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=f,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:f,endLine:p})}return c&&jYe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function mGt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(mGt,"splitIntoWords");var hGt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),gGt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...hGt]),AGt=new Map([]);d();function KX(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(KX,"getBasicWindowDelineations");var YX=class t extends C3{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return KX(this.windowLength,e)}_getCursorContextInfo(e){return u7(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return yGt(e,r)}};function yGt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(yGt,"computeScore");d();var JX=class t extends C3{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return KX(this.windowLength,e)}_getCursorContextInfo(e){return u7(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):u7(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return CGt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await Ax(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function CGt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(CGt,"computeScore");var vGt=0,xGt=60,EGt=4,bGt=1,IGt=20,TGt=1e4,GYe={snippetLength:xGt,threshold:vGt,maxTopSnippets:EGt,maxCharPerFile:TGt,maxNumberOfFiles:IGt,maxSnippetsPerFile:bGt,useSubsetMatching:!1};var Fve={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function wGt(t,e){return(e.useSubsetMatching?JX.FACTORY(e.snippetLength):YX.FACTORY(e.snippetLength)).to(t)}s(wGt,"getMatcher");async function VYe(t,e,r){let n=wGt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(VYe,"getSimilarSnippets");function zYe(t,e){return{...Fve,useSubsetMatching:Ove(t,e)}}s(zYe,"getCppSimilarFilesOptions");function KYe(t){return Fve.maxTopSnippets}s(KYe,"getCppNumberOfSnippets");var SGt=new Map([["cpp",zYe]]);function XX(t,e,r){let n=SGt.get(r);return n?n(t,e):{...GYe,useSubsetMatching:Ove(t,e)}}s(XX,"getSimilarFilesOptions");var _Gt=new Map([["cpp",KYe]]);function YYe(t,e){let r=_Gt.get(e);return r?r(t):JWe}s(YYe,"getNumberOfSnippets");function Ove(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||zi(t,Ht.UseSubsetMatching))??!1}s(Ove,"useSubsetMatching");d();d();d();d();var RGt="content_excluded";async function ZX(t,e,r,n){let i=OX(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(f=>f.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:f.providerId,data:p}))),c=t.get(Cr),l=new Map;await Promise.all(Array.from(o).map(async f=>{l.set(f,await c.getTextDocumentValidation({uri:f}))}));let u=t.get(dl).getStatisticsForCompletion(e);return a.filter(f=>{let m=[f.data.uri,...f.data.additionalUris??[]].every(h=>l.get(h)?.status==="valid");return m?u.addExpectations(f.providerId,[[f.data,"included"]]):u.addExpectations(f.providerId,[[f.data,RGt]]),m}).map(f=>f.data)}s(ZX,"getCodeSnippetsFromContextItems");function JYe(t,e){let r=t.get(Cr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(JYe,"addRelativePathToCodeSnippets");d();function lc(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(lc,"Text");function GT(t){return t.children}s(GT,"Chunk");d();function Xr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Xr,"functionComponentFunction");function PA(t){return{type:"f",children:t}}s(PA,"fragmentFunction");PA.isFragmentFunction=!0;var eZ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(_0,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=JYe(t.ctx,r),c=new Map;for(let u of a){let f=u.relativePath??u.snippet.uri,p=c.get(f);p===void 0&&(p=[],c.set(f,p)),p.push(u)}let l=[];for(let[u,f]of c.entries()){let p=f.filter(m=>m.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,f)=>f.importance-u.importance),l.reverse(),l.map(u=>{let f=[];return f.push(Xr(lc,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{f.push(Xr(lc,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&f.push(Xr(lc,{children:"---"}))}),Xr(GT,{children:f})})},"CodeSnippets");d();function Qve(t){return t.children}s(Qve,"CompletionsContext");function Uve(t){return t.children}s(Uve,"StableCompletionsContext");function qve(t){return t.children}s(qve,"AdditionalCompletionsContext");function tZ(t){return t.name===Qve.name||t.name===Uve.name||t.name===qve.name}s(tZ,"isContextNode");d();d();d();function rZ(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(rZ,"findEditDistanceScore");var d7=50;function Hve(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(Hve,"approximateMaxCharacters");function f7(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(_0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=Hve(a);return Xr(PA,{children:[Xr(qR,{document:r,position:i,maxCharacters:m}),Xr(nZ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})]})}s(f7,"CurrentFile");function qR(t){if(t.document===void 0||t.position===void 0)return Xr(lc,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Xr(lc,{children:e})}s(qR,"BeforeCursor");function nZ(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Xr(lc,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Xr(lc,{});if(r===o)return Xr(lc,{children:r});let a=o;if(r!==""){let c=Ni(t.tokenizer),l=c.takeFirstTokens(o,d7);l.tokens.length>0&&100*rZ(l.tokens,c.takeFirstTokens(r,d7).tokens)?.score<(t.suffixMatchThreshold??fY)*l.tokens.length&&(a=r)}return a!==r&&n(a),Xr(lc,{children:a})}s(nZ,"AfterCursor");function XYe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(_0,u=>{let f=u.document;(u.document.uri!==r?.uri||f.getText()!==r?.getText())&&n(f),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=Hve(a);return Xr(qR,{document:r,position:i,maxCharacters:l})}s(XYe,"DocumentPrefix");function ZYe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(_0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=Hve(a);return Xr(nZ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})}s(ZYe,"DocumentSuffix");d();var iZ=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),f=this.elidePrefix(a,u,c,o);return{blocks:[l,...f],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,f=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return l+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:f}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(f=>!f.markedForRemoval).flatMap(f=>f.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(f=>{if(f.markedForRemoval)return u+f.tokens<=r&&!f.chunks?(u+=f.tokens,{...f,elidedValue:f.value,elidedTokens:f.tokens}):{...f,elidedValue:"",elidedTokens:0};let p=c.filter(h=>h.componentPath===f.componentPath&&h.line!=="").map(h=>h.line).join(""),m=f.tokens;return p!==f.value&&(m=p!==""?i.tokenLength(p):0),{...f,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function eJe(t){return t.map(e=>e.elidedValue).join("")}s(eJe,"makePrompt");function tJe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(tJe,"makePrefixPrompt");function rJe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(rJe,"makeContextPrompt");d();var v3=class{constructor(e,r=$ve()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function $ve(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===GT.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s($ve,"defaultTransformers");d();var p7={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Wve={};for(let[t,e]of Object.entries(p7))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)Wve[r]=t;else Wve[t]=t;function iJe(t){return Wve[t]}s(iJe,"mdCodeBlockLangToLanguageId");var kGt={start:"//",end:""},PGt=["php","plaintext"],jve={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function oJe(t){return Object.values(jve).includes(t.trim())}s(oJe,"isShebangLine");function DGt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(DGt,"hasLanguageMarker");function BGt(t,e){let r=p7[e]?p7[e].lineComment:kGt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(BGt,"comment");function GC(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>BGt(o,e)).join(`
`);return r?i+`
`:i}s(GC,"commentBlockAsSingles");function oZ(t){let{languageId:e}=t;return PGt.indexOf(e)===-1&&!DGt(t)?e in jve?jve[e]:`Language: ${e}`:""}s(oZ,"getLanguageMarker");function sZ(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(sZ,"getPathMarker");function m7(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(m7,"newLineEnded");function sJe(t){return nJe(typeof t=="string"?t:"plaintext")}s(sJe,"getLanguage");function nJe(t){return p7[t]!==void 0?{languageId:t,...p7[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(nJe,"_getLanguage");var NGt=5,x3=class{constructor(){this.renderId=0;this.formatPrefix=eJe}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:f}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),g=new iZ,{blocks:[A,...y]}=g.elide(l,p,u,m,Ni(c)),E=performance.now(),b=this.formatPrefix(y),S=this.formatContext?this.formatContext(y):void 0,R=A.elidedValue,B=y.reduce((L,O)=>L+O.elidedTokens,0);return f.push(...MGt([...y,A])),{prefix:b,prefixTokens:B,suffix:R,suffixTokens:A.elidedTokens,context:S,status:"ok",metadata:{renderId:i,rendererName:"c",tokenizer:c,elisionTimeMs:E-h,renderTimeMs:performance.now()-o,componentStatistics:f,updateDataTimeMs:f.reduce((L,O)=>L+(O.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-NGt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new v3(e,Gve).walkSnapshot((f,p,m)=>{if(f===e||(f.name===f7.name&&(c=!0),f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.value===void 0||f.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:h7(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let g=f.value.endsWith(r)?f.value:f.value+r,A=g;m.type==="prefix"?A=f.value:oJe(f.value)?A=g:A=GC(g,n),i.push({type:m.type==="prefix"?"prefix":"context",value:h7(A),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source})}return!0}),!c)throw new Error(`Node of type ${f7.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},Gve=[...$ve(),(t,e,r)=>tZ(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===qR.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===nZ.name?{...r,type:"suffix"}:r];function MGt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(MGt,"computeComponentStatistics");function h7(t){return t.replace(/\r\n?/g,`
`)}s(h7,"normalizeLineEndings");d();var aZ=s((t,e)=>{let[r,n]=e.useState();if(e.useData(_0,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(Cr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?Xr(LGt,{docInfo:a}):Xr(FGt,{docInfo:a})}},"DocumentMarker"),LGt=s(t=>Xr(lc,{children:sZ(t.docInfo)}),"PathMarker"),FGt=s(t=>Xr(lc,{children:oZ(t.docInfo)}),"LanguageMarker");d();d();d();d();function g7(t,e="Unreachable"){throw new Error(e)}s(g7,"assertNever");function Ll(t,e="unexpected state"){if(!t)throw new xn(`Assertion Failed: ${e}`)}s(Ll,"assert");function DA(t){if(!t()){debugger;t(),ZB(new xn("Assertion Failed"))}}s(DA,"assertFn");function kx(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(kx,"checkAdjacentItems");d();d();d();d();d();var Px=s((t,e)=>t===e,"strictEquals");d();d();var sa=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},A7=class{constructor(){this._first=sa.Undefined;this._last=sa.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===sa.Undefined}clear(){let e=this._first;for(;e!==sa.Undefined;){let r=e.next;e.prev=sa.Undefined,e.next=sa.Undefined,e=r}this._first=sa.Undefined,this._last=sa.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new sa(e);if(this._first===sa.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==sa.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==sa.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==sa.Undefined&&e.next!==sa.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===sa.Undefined&&e.next===sa.Undefined?(this._first=sa.Undefined,this._last=sa.Undefined):e.next===sa.Undefined?(this._last=this._last.prev,this._last.next=sa.Undefined):e.prev===sa.Undefined&&(this._first=this._first.next,this._first.prev=sa.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==sa.Undefined;)yield e.element,e=e.next}};d();var OGt=globalThis.performance&&typeof globalThis.performance.now=="function",E3=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=OGt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var aJe=!1,QGt=!1,HR;(J=>{J.None=s(()=>Ss.None,"None");function e(j){if(QGt){let{onDidAddListener:$}=j,X=y7.create(),ie=0;j.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),X.print()),$?.()}}}s(e,"_addLeakageTraceLogic");function r(j,$){return h(j,()=>{},0,void 0,!0,void 0,$)}J.defer=r,s(r,"defer");function n(j){return($,X=null,ie)=>{let ae=!1,te;return te=j(pe=>{if(!ae)return te?te.dispose():ae=!0,$.call(X,pe)},null,ie),ae&&te.dispose(),te}}J.once=n,s(n,"once");function i(j,$){return J.once(J.filter(j,$))}J.onceIf=i,s(i,"onceIf");function o(j,$,X){return p((ie,ae=null,te)=>j(pe=>ie.call(ae,$(pe)),null,te),X)}J.map=o,s(o,"map");function a(j,$,X){return p((ie,ae=null,te)=>j(pe=>{$(pe),ie.call(ae,pe)},null,te),X)}J.forEach=a,s(a,"forEach");function c(j,$,X){return p((ie,ae=null,te)=>j(pe=>$(pe)&&ie.call(ae,pe),null,te),X)}J.filter=c,s(c,"filter");function l(j){return j}J.signal=l,s(l,"signal");function u(...j){return($,X=null,ie)=>{let ae=dze(...j.map(te=>te(pe=>$.call(X,pe))));return m(ae,ie)}}J.any=u,s(u,"any");function f(j,$,X,ie){let ae=X;return o(j,te=>(ae=$(ae,te),ae),ie)}J.reduce=f,s(f,"reduce");function p(j,$){let X,ie={onWillAddFirstListener(){X=j(ae.fire,ae)},onDidRemoveLastListener(){X?.dispose()}};$||e(ie);let ae=new jp(ie);return $?.add(ae),ae.event}s(p,"snapshot");function m(j,$){return $ instanceof Array?$.push(j):$&&$.add(j),j}s(m,"addAndReturnDisposable");function h(j,$,X=100,ie=!1,ae=!1,te,pe){let Ae,Oe,Te,Je=0,Fe,lt={leakWarningThreshold:te,onWillAddFirstListener(){Ae=j(xt=>{Je++,Oe=$(Oe,xt),ie&&!Te&&(_t.fire(Oe),Oe=void 0),Fe=s(()=>{let ht=Oe;Oe=void 0,Te=void 0,(!ie||Je>1)&&_t.fire(ht),Je=0},"doFire"),typeof X=="number"?(clearTimeout(Te),Te=setTimeout(Fe,X)):Te===void 0&&(Te=0,queueMicrotask(Fe))})},onWillRemoveListener(){ae&&Je>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,Ae.dispose()}};pe||e(lt);let _t=new jp(lt);return pe?.add(_t),_t.event}J.debounce=h,s(h,"debounce");function g(j,$=0,X){return J.debounce(j,(ie,ae)=>ie?(ie.push(ae),ie):[ae],$,void 0,!0,void 0,X)}J.accumulate=g,s(g,"accumulate");function A(j,$=(ie,ae)=>ie===ae,X){let ie=!0,ae;return c(j,te=>{let pe=ie||!$(te,ae);return ie=!1,ae=te,pe},X)}J.latch=A,s(A,"latch");function y(j,$,X){return[J.filter(j,$,X),J.filter(j,ie=>!$(ie),X)]}J.split=y,s(y,"split");function E(j,$=!1,X=[],ie){let ae=X.slice(),te=j(Oe=>{ae?ae.push(Oe):Ae.fire(Oe)});ie&&ie.add(te);let pe=s(()=>{ae?.forEach(Oe=>Ae.fire(Oe)),ae=null},"flush"),Ae=new jp({onWillAddFirstListener(){te||(te=j(Oe=>Ae.fire(Oe)),ie&&ie.add(te))},onDidAddFirstListener(){ae&&($?setTimeout(pe):pe())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return ie&&ie.add(Ae),Ae.event}J.buffer=E,s(E,"buffer");function b(j,$){return s((ie,ae,te)=>{let pe=$(new R);return j(function(Ae){let Oe=pe.evaluate(Ae);Oe!==S&&ie.call(ae,Oe)},void 0,te)},"fn")}J.chain=b,s(b,"chain");let S=Symbol("HaltChainable");class R{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map($){return this.steps.push($),this}forEach($){return this.steps.push(X=>($(X),X)),this}filter($){return this.steps.push(X=>$(X)?X:S),this}reduce($,X){let ie=X;return this.steps.push(ae=>(ie=$(ie,ae),ie)),this}latch($=(X,ie)=>X===ie){let X=!0,ie;return this.steps.push(ae=>{let te=X||!$(ae,ie);return X=!1,ie=ae,te?ae:S}),this}evaluate($){for(let X of this.steps)if($=X($),$===S)break;return $}}function B(j,$,X=ie=>ie){let ie=s((...Ae)=>pe.fire(X(...Ae)),"fn"),ae=s(()=>j.on($,ie),"onFirstListenerAdd"),te=s(()=>j.removeListener($,ie),"onLastListenerRemove"),pe=new jp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}J.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function L(j,$,X=ie=>ie){let ie=s((...Ae)=>pe.fire(X(...Ae)),"fn"),ae=s(()=>j.addEventListener($,ie),"onFirstListenerAdd"),te=s(()=>j.removeEventListener($,ie),"onLastListenerRemove"),pe=new jp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}J.fromDOMEventEmitter=L,s(L,"fromDOMEventEmitter");function O(j,$){return new Promise(X=>n(j)(X,null,$))}J.toPromise=O,s(O,"toPromise");function Y(j){let $=new jp;return j.then(X=>{$.fire(X)},()=>{$.fire(void 0)}).finally(()=>{$.dispose()}),$.event}J.fromPromise=Y,s(Y,"fromPromise");function V(j,$){return j(X=>$.fire(X))}J.forward=V,s(V,"forward");function z(j,$,X){return $(X),j(ie=>$(ie))}J.runAndSubscribe=z,s(z,"runAndSubscribe");class Q{constructor($,X){this._observable=$;this._counter=0;this._hasChanged=!1;let ie={onWillAddFirstListener:s(()=>{$.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{$.removeObserver(this)},"onDidRemoveLastListener")};X||e(ie),this.emitter=new jp(ie),X&&X.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate($){this._counter++}handlePossibleChange($){}handleChange($,X){this._hasChanged=!0}endUpdate($){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function U(j,$){return new Q(j,$).emitter.event}J.fromObservable=U,s(U,"fromObservable");function Z(j){return($,X,ie)=>{let ae=0,te=!1,pe={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(j.reportChanges(),te&&(te=!1,$.call(X)))},handlePossibleChange(){},handleChange(){te=!0}};j.addObserver(pe),j.reportChanges();let Ae={dispose(){j.removeObserver(pe)}};return ie instanceof Zu?ie.add(Ae):Array.isArray(ie)&&ie.push(Ae),Ae}}J.fromObservableLight=Z,s(Z,"fromObservableLight")})(HR||={});var Vve=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new E3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},cJe=-1;var zve=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new Kve(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},y7=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Kve=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},Yve=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},UGt=0,b3=class{constructor(e){this.value=e;this.id=UGt++}static{s(this,"UniqueContainer")}},qGt=2,HGt=s((t,e)=>{if(t instanceof b3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),jp=class{constructor(e){this._size=0;this._options=e,this._leakageMon=cJe>0||this._options?.leakWarningThreshold?new zve(e?.onListenerError??ZB,this._options?.leakWarningThreshold??cJe):void 0,this._perfMon=this._options?._profName?new Vve(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(aJe){let e=this._listeners;queueMicrotask(()=>{HGt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],f=new Yve(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||ZB)(f),Ss.None}if(this._disposed)return Ss.None;r&&(e=e.bind(r));let i=new b3(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=y7.create(),o=this._leakageMon.check(i.stack,this._size+1)),aJe&&(i.stack=a??y7.create()),this._listeners?this._listeners instanceof b3?(this._deliveryQueue??=new Jve,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=Lc(()=>{o?.(),this._removeListener(i)});return n instanceof Zu?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*qGt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||ZB;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof b3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Jve=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};d();var kf=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return fJe(e,this)}},lJe=new Map,Xve=new WeakMap;function fJe(t,e){let r=Xve.get(t);if(r)return r;let n=$Gt(t,e);if(n){let i=lJe.get(n)??0;i++,lJe.set(n,i);let o=i===1?n:`${n}#${i}`;return Xve.set(t,o),o}}s(fJe,"getDebugName");function $Gt(t,e){let r=Xve.get(t);if(r)return r;let n=e.owner?jGt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=cZ(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=WGt(e.owner,t);if(c!==void 0)return n+c}}s($Gt,"computeDebugName");function WGt(t,e){for(let r in t)if(t[r]===e)return r}s(WGt,"findKey");var uJe=new Map,dJe=new WeakMap;function jGt(t){let e=dJe.get(t);if(e)return e;let r=GGt(t),n=uJe.get(r)??0;n++,uJe.set(r,n);let i=n===1?r:`${r}#${n}`;return dJe.set(t,i),i}s(jGt,"formatOwner");function GGt(t){let e=t.constructor;return e?e.name:"Object"}s(GGt,"getClassName");function cZ(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(cZ,"getFunctionName");d();var $R;function uZ(t){$R?$R instanceof lZ?$R.loggers.push(t):$R=new lZ([$R,t]):$R=t}s(uZ,"addLogger");function Pa(){return $R}s(Pa,"getLogger");var Zve;function pJe(t){Zve=t}s(pJe,"setLogObservableFn");function mJe(t){Zve&&Zve(t)}s(mJe,"logObservable");var lZ=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var hJe;function gJe(t){hJe=t}s(gJe,"_setRecomputeInitiallyAndOnChange");var AJe;function yJe(t){AJe=t}s(yJe,"_setKeepObserved");var exe;function CJe(t){exe=t}s(CJe,"_setDerivedOpts");var dZ=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return exe({owner:n,debugName:s(()=>{let o=cZ(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return exe({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(hJe(this,r)),this}keepObserved(e){return e.add(AJe(this)),this}get debugValue(){return this.get()}},VT=class extends dZ{constructor(){super();this.observers=new Set;Pa()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&Pa()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&Pa()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!Pa();return mJe(this),r||Pa()?.handleObservableCreated(this),this}};function pZ(t,e){let r=new I3(t,e);try{t(r)}finally{r.finish()}}s(pZ,"transaction");function txe(t,e,r){t?e(t):pZ(e,r)}s(txe,"subtransaction");var I3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Pa()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():cZ(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,Pa()?.handleEndTransaction(this)}};function BA(t,e){let r;return typeof t=="string"?r=new kf(void 0,t,void 0):r=new kf(t,void 0,void 0),new fZ(r,e,Px)}s(BA,"observableValue");var fZ=class extends VT{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,Pa()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new I3(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),Pa()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};d();d();function WR(t){return new T3(new kf(void 0,void 0,t),t,void 0,void 0)}s(WR,"autorun");function rxe(t,e){return new T3(new kf(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(rxe,"autorunOpts");function mZ(t,e){return new T3(new kf(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(mZ,"autorunHandleChanges");function nxe(t,e){let r=new Zu,n=mZ({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return Lc(()=>{n.dispose(),r.dispose()})}s(nxe,"autorunWithStoreHandleChanges");function ixe(t){let e=new Zu,r=rxe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return Lc(()=>{r.dispose(),e.dispose()})}s(ixe,"autorunWithStore");var T3=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Pa()?.handleAutorunCreated(this),this._runIfNeeded(),n3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Pa()?.handleAutorunDisposed(this),i3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Pa()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){NR(n)}finally{this._isRunning=!1}}}finally{this.disposed||Pa()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}DA(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){Pa()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){NR(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new xn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=T3)(WR||={});d();function hZ(t,e){return new jR(new kf(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??Px)}s(hZ,"derivedOpts");CJe(hZ);var jR=class extends VT{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Pa()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),Pa()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){NR(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new xn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}DA(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){Pa()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){NR(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new xn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};d();d();function oxe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new zT(new kf(e,void 0,n),r,n,()=>zT.globalTransaction,Px)}s(oxe,"observableFromEvent");var zT=class extends VT{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,txe(this._getTransaction(),c=>{Pa()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||Pa()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=zT;function e(n,i){let o=!1;zT.globalTransaction===void 0&&(zT.globalTransaction=n,o=!0);try{i()}finally{o&&(zT.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(oxe||={});function xJe(t){let e=new gZ(!1,void 0);return t.addObserver(e),Lc(()=>{t.removeObserver(e)})}s(xJe,"keepObserved");yJe(xJe);function EJe(t,e){let r=new gZ(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),Lc(()=>{t.removeObserver(r)})}s(EJe,"recomputeInitiallyAndOnChange");gJe(EJe);var gZ=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function Ph(t,e,r,n){let i=new AZ(r,n);return hZ({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new AZ(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(Ph,"mapObservableArrayCached");var AZ=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new Zu;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function sxe(t,e){let r;return nxe({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(sxe,"runOnChange");d();d();d();var bJe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),yZ;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof w3?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:HR.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:bJe})})(yZ||={});var w3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?bJe:(this._emitter||(this._emitter=new jp),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Dx=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new w3),this._token}cancel(){this._token?this._token instanceof w3&&this._token.cancel():this._token=yZ.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof w3&&this._token.dispose():this._token=yZ.None}};d();var CZ;function IJe(t){CZ||(CZ=new v7,uZ(CZ)),CZ.addFilteredObj(t)}s(IJe,"logObservableToConsole");var v7=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return VGt([S3(YGt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[S3(" "),Dh(C7(e.oldValue,70),{color:"red",strikeThrough:!0}),S3(" "),Dh(C7(e.newValue,60),{color:"green"})]:[S3(" (unchanged)")]:[S3(" "),Dh(C7(e.newValue,60),{color:"green"}),S3(" (initial)")]}handleObservableCreated(e){if(e instanceof jR){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof jR){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([_3("observable value changed"),Dh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Dh(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([_3("derived recomputed"),Dh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("derived cleared"),Dh(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("observable from event triggered"),Dh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("autorun"),Dh(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([_3("transaction"),Dh(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function VGt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(VGt,"consoleTextToArgs");function S3(t){return Dh(t,{color:"black"})}s(S3,"normalText");function _3(t){return Dh(JGt(`${t}: `,10),{color:"black",bold:!0})}s(_3,"formatKind");function Dh(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(Dh,"styled");function C7(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?zGt(t,e):KGt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(C7,"formatValue");function zGt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${C7(i,e-r.length)}`}return r+=" ]",r}s(zGt,"formatArray");function KGt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${C7(o,e-r.length)}`}return r+=" }",r}s(KGt,"formatObject");function YGt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(YGt,"repeat");function JGt(t,e){for(;t.length<e;)t+=" ";return t}s(JGt,"padStr");pJe(IJe);var XGt=!1;XGt&&uZ(new v7);d();var GR;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(GR||={});d();d();d();function TJe(t){return t}s(TJe,"identity");var vZ=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=TJe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},Bx=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=TJe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};d();d();var Bh=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};d();function VR(t){return t<0?0:t>4294967295?4294967295:t|0}s(VR,"toUint32");function k3(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(k3,"escapeRegExpCharacters");function kJe(t,e){if(!t||!e)return t;let r=e.length;if(r===0||t.length===0)return t;let n=0;for(;t.indexOf(e,n)===n;)n=n+r;return t.substring(n)}s(kJe,"ltrim");function Nh(t){return t.split(/\r\n|\r|\n/)}s(Nh,"splitLines");function eVt(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),u=e.charCodeAt(i);if(l<u)return-1;if(l>u)return 1}let a=n-r,c=o-i;return a<c?-1:a>c?1:0}s(eVt,"compareSubstring");function tVt(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),u=e.charCodeAt(i);if(l===u)continue;if(l>=128||u>=128)return eVt(t.toLowerCase(),e.toLowerCase(),r,n,i,o);wJe(l)&&(l-=32),wJe(u)&&(u-=32);let f=l-u;if(f!==0)return f}let a=n-r,c=o-i;return a<c?-1:a>c?1:0}s(tVt,"compareSubstringIgnoreCase");function wJe(t){return t>=97&&t<=122}s(wJe,"isLowerAsciiLetter");function PJe(t,e){let r=e.length;return e.length>t.length?!1:tVt(t,e,0,r)===0}s(PJe,"startsWithIgnoreCase");function KT(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(KT,"commonPrefixLength");function Nx(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(Nx,"commonSuffixLength");var rVt=/^[\t\n\r\x20-\x7E]*$/;function axe(t){return rVt.test(t)}s(axe,"isBasicASCII");var AZn=String.fromCharCode(65279);var SJe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=nVt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function nVt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(nVt,"getGraphemeBreakRawData");var _Je=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Bh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new vZ({getCacheKey:JSON.stringify},e=>{function r(f){let p=new Map;for(let m=0;m<f.length;m+=2)p.set(f[m],f[m+1]);return p}s(r,"arrayToMap");function n(f,p){let m=new Map(f);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(f,p){if(!f)return p;let m=new Map;for(let[h,g]of f)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(f=>!f.startsWith("_")&&f in o);a.length===0&&(a=["_default"]);let c;for(let f of a){let p=r(o[f]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Bh(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},RJe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};d();var Vt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new xn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new xn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new xn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new xn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};d();var Ur=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};d();var ir=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,f=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=f):o===u&&(a=Math.min(a,f)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new Ur(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new Ur(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,f=r.endLineNumber|0;if(u===f){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-f}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};d();d();var qr=class t{static{s(this,"LineRange")}static ofLength(e,r){return new t(e,e+r)}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=Ih(e=>e.startLineNumber,Th)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new xZ(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new xZ(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new xn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new xn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new ir(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new ir(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new Vt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},xZ=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=XB(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=_A(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=N1e(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=N1e(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new qr(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=XB(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=_A(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new qr(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new qr(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var uu=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new ir(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new ir(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new ir(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return qr.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new Ur(e.lineNumber,e.column+this.columnCount):new Ur(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return ir.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var du=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new cxe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Nh(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},cxe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Vt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=_A(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new Ur(n,i)}getRange(e){return ir.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return uu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new uu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var NA=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var EZ=class extends Ss{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=BA(this,n),this.selection=BA(this,i),this.languageId=BA(this,o),this._register(Lc(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};d();d();function Mx(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return mZ({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(Mx,"autorunWithChanges");d();var VC=class extends Ss{static{s(this,"RecentEditsProvider")}};function iVt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(iVt,"editIsTooCloseToCursor");var bZ=s((t,e)=>{let[r,n]=e.useState();return e.useData(_0,async i=>{if(!i.document)return;let o=t.ctx.get(VC);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(Cr),f=[];for(let m=c.length-1;m>=0&&!(f.length>=a.maxEdits);m--){let h=c[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!l.has(h.file);if(l.size+(g?1:0)>a.maxFiles)break;let y=h.file===i.document?.uri,E=y?i.position.line:void 0;if(iVt(h,y,E,a.activeDocDistanceLimitFromCursor))continue;let S=o.getEditSummary(h);if(S){l.add(h.file);let R=u.getRelativePath({uri:h.file});f.unshift(m7(`File: ${R}`)+m7(S))}}if(f.length===0){n(void 0);return}let p=m7("These are recently edited files. Do not suggest code that has been deleted.")+f.join("")+m7("End of recent edits");n(p)}),r?Xr(GT,{children:Xr(lc,{children:r})}):void 0},"RecentEdits");d();d();d();d();var lxe=new wr;function DJe(t){return[...t].sort((e,r)=>{let n=lxe.get(e.uri)??0;return(lxe.get(r.uri)??0)-n})}s(DJe,"sortByAccessTimes");var BJe=s(t=>t.get(Cr).onDidFocusTextDocument(e=>{e.document&&lxe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var IZ=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>zR.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&TZ(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=this.truncateDocs(DJe(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};d();d();function NJe(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(NJe,"shortCircuit");d();function sVt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(sVt,"defaultHash");function uxe(t,e={}){let{hash:r=sVt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(uxe,"memoize");var MJe={entries:[],traits:[]},wZ={entries:new Map,traits:[]},dxe=class extends wr{constructor(r,n=120*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},Fl=new Ct("relatedFiles"),aVt=1e3,SZ=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},KR=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{Fl.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){Fl.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){Fl.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){Fl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(Mi).readFileString(e)}catch(r){Fl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(ul).evaluate(e,r)).isBlocked}catch(n){Fl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},cVt=3,LJe=new dxe(aVt);async function FJe(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){Fl.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(LJe.bumpRetryCount(e.uri)>=cVt?a=wZ:a=void 0);let c=performance.now()-o;if(Fl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new SZ;return a}s(FJe,"getRelatedFiles");var fxe=uxe(FJe,{cache:LJe,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});fxe=NJe(fxe,200,wZ);async function _Z(t,e,r,n,i,o=!1){let a=t.get(KR),c=wZ;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await FJe(t,l,r,n,a):await fxe(t,l,r,n,a)}catch(l){c=wZ,l instanceof SZ&&Bt(t,"getRelatedFilesList",r)}return Fl.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(_Z,"getRelatedFilesAndTraits");function TZ(t,e){return AO(t)===AO(e)}s(TZ,"considerNeighborFile");var zR=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(Cr);t.instance===void 0&&(t.instance=new IZ(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(lVt(e,i))return u;let f=await l.getTextDocument({uri:r});if(!f)return Fl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(f);if(!p)return Fl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await _Z(e,f,i,o,a,c);return m.entries.size===0?(Fl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let A=[];h.forEach((y,E)=>{let b=t.getRelativePath(E,p.uri);if(!b||u.docs.has(E))return;let S={relativePath:b,uri:E,source:y};A.unshift(S),u.docs.set(E,S)}),A.length>0&&u.neighborSource.set(g,A.map(y=>y.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function lVt(t,e){return t.get(Mt).excludeRelatedFiles(e)||zi(t,Ht.ExcludeRelatedFiles)}s(lVt,"isExcludeRelatedFilesActive");function OJe(t,e){return t.get(Mt).includeNeighboringFiles(e)||zi(t,Ht.IncludeNeighboringFiles)}s(OJe,"isIncludeNeighborFilesActive");var RZ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(_0,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=zR.defaultEmptyResult();l.turnOffSimilarFiles||(u=await zR.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let f=await a(l.telemetryData,l.document,l,u);o(f)});async function a(l,u,f,p){let m=P3(t.ctx,l,u.detectedLanguageId);return(await c(m,l,u,f,p)).filter(g=>g.snippet.length>0).sort((g,A)=>g.score-A.score).map(g=>({...WYe(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,f,p,m){let h=l.similarFilesOptions||XX(t.ctx,u,f.detectedLanguageId),A=t.ctx.get(Cr).getRelativePath(f),y={uri:f.uri,source:f.getText(),offset:f.offsetAt(p.position),relativePath:A,languageId:f.detectedLanguageId};return await VYe(y,Array.from(m.docs.values()),h)}return s(c,"findSimilarSnippets"),Xr(PA,{children:[...i.map((l,u)=>Xr(uVt,{snippet:l}))]})},"SimilarFiles"),uVt=s((t,e)=>Xr(GT,{children:[Xr(lc,{children:t.snippet.headline}),Xr(lc,{children:t.snippet.snippet})]}),"SimilarFile");d();d();var kZ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(_0,a=>{a.traits!==r&&n(a.traits);let c=AO(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return Xr(PA,{children:[Xr(lc,{children:`Consider this related information:
`}),...r.map(a=>Xr(lc,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function QJe(t,e){return zi(t,Ht.UseSplitContextPrompt)??t.get(Mt).enablePromptContextProxyField(e)}s(QJe,"shouldUseSplitContextPrompt");function UJe(t){return Xr(PA,{children:[Xr(Uve,{children:[Xr(aZ,{ctx:t,weight:.7}),Xr(kZ,{weight:.6}),Xr(eZ,{ctx:t,weight:.9}),Xr(RZ,{ctx:t,weight:.8})]}),Xr(ZYe,{weight:1}),Xr(qve,{children:Xr(bZ,{ctx:t,weight:.99})}),Xr(XYe,{weight:1})]})}s(UJe,"splitContextCompletionsPrompt");d();var qJe=0;function dVt(){qJe=0}s(dVt,"resetContextIndex");function fVt(){return qJe++}s(fVt,"getNextContextIndex");var PZ=class extends x3{constructor(){super(...arguments);this.formatPrefix=tJe;this.formatContext=rJe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(dVt(),new v3(r,pVt).walkSnapshot((f,p,m)=>{if(f===r||(f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.name===qR.name&&(c=!0),f.value===void 0||f.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:h7(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let A=g==="prefix",y=A||f.value.endsWith(n)?f.value:f.value+n;i.push({type:A?"prefix":"context",value:h7(y),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source,index:A?void 0:m.index})}return!0}),!c)throw new Error(`Node of type ${qR.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},pVt=[...Gve,(t,e,r)=>tZ(t)?{...r,index:fVt()}:r];d();function DZ(t,e,r){let n=OX(r,"Trait");for(let o of n)mVt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(DZ,"getTraitsFromContextItems");function mVt(t,e,r,n){let i=t.get(dl).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(mVt,"setupExpectationsForTraits");var hVt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function BZ(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=hVt.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Bt(e,t,c)}}s(BZ,"ReportTraitsTelemetry");d();d();d();var NZ=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},MZ=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var LZ=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let f=this.reconcileNode(u,e.path,l,i);f!==void 0&&c.push(f)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(gVt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new mxe(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new pxe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},pxe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},mxe=class{constructor(e){this.lifecycleData=e;this.stateHook=new NZ(e.state),this.dataHook=new MZ(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function gVt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(gVt,"isFragmentFunction");var x7=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new LZ(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function _0(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(_0,"isCompletionRequestData");var hxe={default:{promptFunction:HJe,renderer:x3},splitContext:{promptFunction:UJe,renderer:PZ}};function HJe(t){return Xr(PA,{children:[Xr(Qve,{children:[Xr(aZ,{ctx:t,weight:.7}),Xr(kZ,{weight:.6}),Xr(eZ,{ctx:t,weight:.9}),Xr(RZ,{ctx:t,weight:.8}),Xr(bZ,{ctx:t,weight:.99})]}),Xr(f7,{weight:1})]})}s(HJe,"defaultCompletionsPrompt");var FZ=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new x7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:i},o){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=P3(this.ctx,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,o);if(u)return u;let f=i?.separateContext?"splitContext":"default";this.setPromptOrdering(f);let p=performance.now(),{traits:m,codeSnippets:h,turnOffSimilarFiles:g,resolvedContextItems:A}=await this.resolveContext(e,r,n,o,i);if(await this.updateComponentData(r.textDocument,r.position,m,h,n,g,a,o,i,l,i?.tokenizer),o?.isCancellationRequested)return Lx;let y=this.virtualPrompt.snapshot(o),E=y.status;if(E==="cancelled")return Lx;if(E==="error")return this.errorPrompt(y.error);let b=this.renderer.render(y.snapshot,{delimiter:`
`,tokenizer:i?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},o);if(b.status==="cancelled")return Lx;if(b.status==="error")return this.errorPrompt(b.error);let[S,R]=YT(b.prefix),B={...b,prefix:S},L;if(y3(this.ctx,n)){let Y=QX(b.metadata.componentStatistics);this.ctx.get(dl).getStatisticsForCompletion(e).computeMatch(Y),L=qX(this.ctx,e,A),un.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(L)}'`)}let O=performance.now();return this.resetIfEmpty(b),this.successPrompt(B,O,p,R,L)}async updateComponentData(e,r,n,i,o,a,c,l,u={},f,p){let m=this.createRequestData(e,r,o,l,u,c,n,i,a,f,p);await this.pipe.pump(m)}async resolveContext(e,r,n,i,o={}){let a=[],c,l,u=!1;if(y3(this.ctx,n)){a=await this.ctx.get(S0).resolution(e);let{textDocument:f}=r,p=a.filter(HX);yVt(this.ctx,f.detectedLanguageId,p,n)||(u=!0),c=DZ(this.ctx,e,p),BZ("contextProvider.traits",this.ctx,c,f.detectedLanguageId,f.detectedLanguageId,n),l=await ZX(this.ctx,e,p,f.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return Lx;if((await this.ctx.get(ul).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return UZ;if((n>0?e.getText().length:e.offsetAt(r))<OZ)return QZ}createRequestData(e,r,n,i,o,a,c,l,u,f,p){return{document:e,position:r,telemetryData:n,cancellationToken:i,data:o.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:f,maxPromptTokens:a,tokenizer:p}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,i,o){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:o}}errorPrompt(e){return ja(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),D3}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new x7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(hxe[this.promptOrdering]?.promptFunction??HJe)(this.ctx)}getRenderer(){let e=hxe[this.promptOrdering]??hxe.default;return new e.renderer}};function yVt(t,e,r,n){let i=["cpp","c"];return OJe(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(yVt,"similarFilesEnabled");d();d();d();d();d();var qZ="[...]",CVt=0,zC=-1;function uc(){return CVt++}s(uc,"getAvailableNodeId");function vVt(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(vVt,"elideChildren");function gxe(t,e=qZ){return r=>t.tokenLength(vVt(r,e))}s(gxe,"getTokenizerCostFunction");d();var B3=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){for(;e<this.size-1;){let r=e,n=2*e+1,i=n+1;if(n<this.size&&this.heap[n].priority>this.heap[r].priority&&(r=n),i<this.size&&this.heap[i].priority>this.heap[r].priority&&(r=i),r===e)break;let o=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=o,e=r}}};var R0=class{constructor(e,r,n,i,o=0,a=!1,c=qZ,l=!1){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=l;this.weightFromChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/Math.max(this.cost,1)}get isRenderedChildRequired(){return this.requireRenderedChild||this.weightFromChild}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new B3([]);let i=new B3(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.weightFromChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.weightFromChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}};function $Je(t,e={}){let{budget:r,mask:n,costFunction:i}=e,o=n??[],a=new Set(Array.isArray(o)?o:[o]);if((r??t.cost)<t.cost||a.has(t.id))return{text:t.elisionMarker,cost:i?i(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map};if(r===void 0){let p=s(y=>a.has(y.id),"elider"),m=[],h=new Map;if(yxe(t,m,p,h),m.length===0)return Axe(t,i);let g=m.join(""),A=i?i(g):[...h.values()].reduce((y,E)=>y+E.cost,0);return{text:g,cost:A,renderedNodes:h}}let c=new Map,l=[],u=new B3([{item:t,priority:t.value}]),f=r;for(;f>0&&u.size>0;){let{item:p}=u.pop();if(!a.has(p.id)&&p.cost<=f){f-=p.cost,c.set(p.id,p),l.push(p);for(let m of p.children)u.insert(m,m.value)}}for(;c.size>0;){let p=[],m=s(y=>!c.has(y.id),"elider"),h=new Map;if(yxe(t,p,m,h),p.length===0)return Axe(t,i);let g=p.join("");if(i===void 0){let y=[...h.values()].reduce((E,b)=>E+b.cost,0);return{text:g,cost:y,renderedNodes:h}}let A=i(g);if(A<=r)return{text:g,cost:A,renderedNodes:h};for(c=h;l.length>0&&A>r;){let y=l.pop();c.has(y.id)&&(A-=y.cost,c.delete(y.id))}if(l.length===0)break}return Axe(t,i)}s($Je,"render");function Axe(t,e){return{text:t.elisionMarker,cost:e?e(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map}}s(Axe,"renderEmpty");function yxe(t,e,r,n,i=!1){let o=e.length;if(r(t))return o>=2&&(i||e[o-2]===t.elisionMarker&&e[o-1].trim().length===0)?(e.pop(),!1):(e.push(t.elisionMarker),!1);let a=t.isRenderedChildRequired,c=!0;for(let[l,u]of t.children.entries())e.push(t.text[l]??""),c=yxe(u,e,r,n,u.canMerge&&!c),a&&=!c;if(a){for(;e.length>o;)e.pop();return!1}return e.push(t.text[t.text.length-1]??""),n.set(t.id,t),!0}s(yxe,"recursivelyRender");function E7(t,e,r=qZ){let n=t.children.map(a=>E7(a,e,r));r=t.elisionMarker??r;let i=e(t);return new R0(t.id,t.text,n,i,0,t.canMerge,r)}s(E7,"snapshot");var JT=new R0(uc(),[""],[],0);d();function Mh(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(Mh,"setDefault");var VJe=2e4,WJe=0,jJe=new wr;function zJe(t,e,r,n){WJe++;let i=r.promptOpts?.tokenizer??"o200k_base",o=performance.now(),{root:a,mask:c,statistics:l}=t.snapshot(r,n),u=performance.now(),f=new Set(c),p=jJe?.get(a.id),m;if(p&&p.budget>=e&&p.render.cost<=e&&p.tokenizer===i&&f.size===p.mask.size&&[...f].every(b=>p.mask.has(b)))m=p.render;else{let b=Ni(i);m=$Je(a,{budget:e,mask:c,costFunction:s(R=>b.tokenLength(R),"costFunction")}),jJe.set(a.id,{budget:e,mask:f,tokenizer:i,render:m})}let{text:h,cost:g,renderedNodes:A}=m,y=performance.now();for(let[b,S]of l?.entries()??[])S.actualTokens=A.get(b)?.cost??0;let E={renderId:WJe,rendererName:"renderNode",tokenizer:i,elisionTimeMs:y-u,renderTimeMs:u-o,updateDataTimeMs:0,componentStatistics:[{componentPath:t.name,actualTokens:g}]};return{root:a,renderedNodes:A,text:h,cost:g,metadata:E}}s(zJe,"renderWithMetadata");function KJe(t,e){return r=>{let n=r.text.join("")+`
`;return Mh(e,n,()=>t.tokenLength(n)+1)}}s(KJe,"cachedLineCostFunction");function YJe(t,e,r){let i=t.split(`
`).map(f=>({id:uc(),text:[f],children:[],canMerge:!0})),o=[""];i.length>=1&&o.push(...Array(i.length-1).fill(`
`),"");let a={id:uc(),text:o,children:i,canMerge:!0},l=E7(a,s(f=>f.id===a.id?0:e(f),"nodeCostFunction")),u=r?i.length:1;for(let f of l.children)f.weight=u*Math.max(1,f.cost),u+=r?-1:1;return l}s(YJe,"getLinewiseNode");var HZ=class{constructor(){this.name="basicPrefix";this.costCache=new wr(VJe)}static{s(this,"BasicPrefixComponent")}snapshot(e){let{completionState:r,promptOpts:n}=e,i=r.textDocument.getText({start:{line:0,character:0},end:r.position}),o=Ni(n?.tokenizer),a=KJe(o,this.costCache);return{root:YJe(i,a,!1)}}},GJe={root:JT,text:"",cost:0},$Z=class{constructor(e){this.ctx=e;this.name="cachedSuffix";this.cache=new wr(5);this.costCache=new wr(VJe)}static{s(this,"CachedSuffixComponent")}snapshot(e){return{root:this.getCachedSuffix(e).root}}estimatedCost(e,r){return this.getCachedSuffix(e).cost}getCachedSuffix(e){let{completionState:r,telemetryData:n,promptOpts:i}=e,a=r.textDocument.getText({start:r.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}}).replace(/^.*/,"").trimStart();if(a==="")return GJe;let c=this.cache.get(r.textDocument.uri)||GJe;if(c.text===a)return c;let l=this.ctx.get(Mt).suffixMatchThreshold(n);if(c.text!==""){let h=new xT,g=h.takeFirstTokens(a,d7);if(g.tokens.length>0&&100*rZ(g.tokens,h.takeFirstTokens(c.text,d7).tokens)?.score<l*g.tokens.length)return c}let u=Ni(i?.tokenizer),f=KJe(u,this.costCache),p=YJe(a,f,!0),m=p.children.reduce((h,g)=>h+g.cost+1,0);return{root:p,cost:m,text:a}}},WZ=class{constructor(){this.name="traitProvider"}static{s(this,"TraitComponent")}snapshot(e,r){let{promptOpts:n}=e,i=Ni(n?.tokenizer);if(!r||r.traits.length===0)return{root:JT};let o=new Map,a=0,c=[],l=new Map;for(let m of r.traits){let h=uc(),g=`${m.name}: ${m.value}`,A=new R0(h,[g],[],i.tokenLength(g));c.push(A),l.set(h,{componentPath:m.id,source:m,expectedTokens:A.cost}),o.set(h,m.importance??0),a+=m.importance??0}let f=[`Related context:
`,...new Array(c.length).fill(`
`)],p=new R0(uc(),f,c,0,0,!0,"");return p.updateWeights(m=>(o.get(m.id)??0)/(a||1)),{root:p,statistics:l}}},jZ=class{constructor(e){this.ctx=e;this.name="contextProvider"}static{s(this,"CodeSnippetComponent")}snapshot(e,r){let{promptOpts:n}=e,i=Ni(n?.tokenizer);if(!r||r.codeSnippets.length===0)return{root:JT};let o=new Map;for(let h of r.codeSnippets){let g=h.uri;Mh(o,g,()=>[]).push(h)}let a=new Map,c=[],l=new Map,u=0,f=this.ctx.get(Cr);for(let[h,g]of o.entries()){let A=f.getRelativePath({uri:h})??h,E=[`Compare ${g.length>1?"these snippets":"this snippet"} from ${A}:
`,...new Array(g.length).fill(`
`)],b=[];for(let S of g){let R=uc();l.set(R,S.importance??0);let B=new R0(R,[S.value],[],i.tokenLength(S.value));b.push(B),u+=S.importance??0,a.set(R,{componentPath:S.id,source:S,expectedTokens:B.cost})}c.push(new R0(uc(),E,b,i.tokenLength(E.join("")),0,!0,""))}let p=new Array(c.length+1).fill(""),m=new R0(uc(),p,c,0,0,!0,"");return m.updateWeights(h=>(l.get(h.id)??0)/(u||1)),{root:m,statistics:a}}},GZ=class{constructor(e,r){this.name=e;this.components=r}static{s(this,"ConcatenatedContextComponent")}snapshot(e,r){let n=this.components.map(u=>u.snapshot(e,r)),i=n.map(u=>u.root).filter(u=>u.id!==JT.id);if(i.length===0)return{root:JT};let o=["",...Array(i.length-1).fill(`
`),""],a=new R0(uc(),o,i,0,0,!0,"",!0),c=[],l=new Map;for(let u of n){for(let[f,p]of u.statistics?.entries()??[])l.set(f,p);u.mask&&c.push(...u.mask)}return{root:a,mask:c,statistics:l}}};var xVt=.8,VZ=class{constructor(e,r){this.ctx=e;this.components=r;this.renderId=0}static{s(this,"CascadingPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}getComponentAllocation(e){let r=this.ctx.get(Mt).suffixPercent(e),n=this.ctx.get(Mt).stableContextPercent(e),i=this.ctx.get(Mt).volatileContextPercent(e);if(r<0||r>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${r}`);if(n<0||n>100)throw new Error(`stableContextPercent must be between 0 and 100, but was ${n}`);if(i<0||i>100)throw new Error(`volatileContextPercent must be between 0 and 100, but was ${i}`);let o=100-r-n-i;if(o<=1||o>100)throw new Error(`prefixPercent must be between 1 and 100, but was ${o}`);return{prefix:o/100,suffix:r/100,stableContext:n/100,volatileContext:i/100}}async createPromptUnsafe(e,r){this.renderId++;let{completionId:n,completionState:i,telemetryData:o,promptOpts:a}=e,c=await this.failFastPrompt(i.textDocument,r);if(c)return c;let l=performance.now(),u;y3(this.ctx,o)&&(u=await this.resolveContext(n,i,o,r));let f=performance.now()-l,p={},m={renderId:this.renderId,rendererName:"w",tokenizer:a?.tokenizer??"o200k_base",elisionTimeMs:0,renderTimeMs:0,updateDataTimeMs:f,componentStatistics:[]},h=i.textDocument.detectedLanguageId,{maxPromptLength:g}=P3(this.ctx,o,h),A=this.getComponentAllocation(o),y=A.suffix*g,E=this.components.suffix.estimatedCost?.(e,u),b=["stableContext","volatileContext","prefix","suffix"];y>xVt*(E??0)&&(b=["stableContext","volatileContext","suffix","prefix"]);let S=0;for(let z of b){let Q=S+g*A[z],U=zJe(this.components[z],Q,e,u);S=Q-U.cost,p[z]=U,EVt(m,U.metadata)}let[R,B]=YT(p.prefix.text),L=performance.now(),O=y3(this.ctx,o)?this.telemetrizeContext(n,m.componentStatistics,u?.resolvedContextItems??[]):[],Y=[p.stableContext.text.trim(),p.volatileContext.text.trim()];return{type:"prompt",prompt:{prefix:a?.separateContext?R:GC(Y.join(`
`),h)+`

`+R,prefixTokens:p.prefix.cost+p.stableContext.cost+p.volatileContext.cost,suffix:p.suffix.text,suffixTokens:p.suffix.cost,context:a?.separateContext?Y:void 0,isFimEnabled:p.suffix.text.length>0},computeTimeMs:L-l,trailingWs:B,neighborSource:new Map,metadata:m,contextProvidersTelemetry:O}}async resolveContext(e,r,n,i){let o=await this.ctx.get(S0).resolution(e),{textDocument:a}=r,c=o.filter(HX),l=DZ(this.ctx,e,c);BZ("contextProvider.traits",this.ctx,l,a.detectedLanguageId,a.detectedLanguageId,n);let u=await ZX(this.ctx,e,c,a.detectedLanguageId);return{traits:l,codeSnippets:u,resolvedContextItems:o}}telemetrizeContext(e,r,n){let i=QX(r);this.ctx.get(dl).getStatisticsForCompletion(e).computeMatch(i);let o=qX(this.ctx,e,n);return un.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(o)}'`),o}async failFastPrompt(e,r){if(r?.isCancellationRequested)return Lx;if((await this.ctx.get(ul).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return UZ;if(e.getText().length<OZ)return QZ}errorPrompt(e){return ja(this.ctx,e,"WorkspaceContextPromptFactory"),D3}};function EVt(t,e){t.elisionTimeMs+=e.elisionTimeMs,t.renderTimeMs+=e.renderTimeMs,t.updateDataTimeMs+=e.updateDataTimeMs,t.componentStatistics.push(...e.componentStatistics)}s(EVt,"aggregateMetadata");d();d();function bVt(t){return t.id!==void 0}s(bVt,"isNodeItem");function IVt(t){return!("uri"in t)&&!("id"in t)}s(IVt,"isNullItem");var TVt={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"IndexingSymbolContextProvider.Text":1,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},XT="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",N3=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==zC),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},zZ=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=TVt;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new N3([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new N3(r.items):new N3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.sourceContext.entries()){let c=this.sourceWeights[i]??0;if(c<=0||o.length===0)continue;let l=.5**(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(zC);if(c!==void 0&&c>0){o.delete(zC);let l=0;for(let u of o.values())l+=u;if(l<=0){let u=a.getAllIds(),f=c/Math.max(u.length,1);for(let p of u)o.set(p,f)}else for(let[u,f]of[...o.entries()])o.set(u,f+c*(f/l))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new N3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.sourceContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(IVt(r))return{weight:r.weight,uri:XT,id:zC};let n=bVt(r)?r.id:zC,i=r.uri??this.activeContext.getUri(n)??XT;return i===XT&&(n=zC),{weight:r.weight,uri:i,id:n}})}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0||isNaN(c))continue;let l=Mh(r,o,()=>new Map),u=zC;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map,i=0;for(let[l,u]of e.entries()){let f=l!==XT?this.activeContext.normalizeUri(l)??XT:XT;for(let[p,m]of u.entries())l===XT||p===zC?n.set(f,(n.get(f)??0)+m):r.push({uri:f,id:p,weight:m}),i+=m}if(i<=0)return[];n.delete(XT),r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let o=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:zC,weight:u}));return r.slice(0,this.config.MaxActiveNodes).concat(o).sort((l,u)=>u.weight-l.weight).map(l=>({...l,weight:l.weight/i}))}};d();d();d();var Gp=class{static{s(this,"FileSearch")}};d();d();var KZ=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*XJe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},wVt=6,YZ=class{constructor(e,r,n,i){this.textDocument=e;this.parser=r;this.minSize=n;this.updateId=uc();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(i??2*this.minSize,this.minSize+1),this._syntaxRoot=this.parser.parse(e,!0),this._root=this.buildTree()}static{s(this,"ContextDocument")}get uri(){return this.textDocument.uri}get version(){return this.updateId}get document(){return this.textDocument}get rootId(){return this._root.id}get root(){return this._root}get syntaxRoot(){return this._syntaxRoot}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this._root,i=n;for(;i;)n=i,i=n.findChild(e,r??e);return n}update(e){if(this.uri!==e.uri)throw new Error("Can't update ContextDocument using mismatched URI");this.textDocument=e,this._syntaxRoot=this.parser.parse(e,!0),this.recursivelyRemapNodes(this.root,()=>{}),this._root=this.buildTree(),this.updateId=uc()}recursivelyRemapNodes(e,r){let n=!0;for(let u of e.children)n=n&&this.recursivelyRemapNodes(u,r);if(!n)return this.invalidateNode(e),!1;let i=[];for(let{root:u,children:f}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e),!1;i.push({root:p,children:f})}let o=i[0].root.parent,a=e.parts[0].root.parent;if((o&&this.canMergeChildren(o))!==(a&&this.canMergeChildren(a)))return this.invalidateNode(e),!1;let c=JJe(i,this.document);for(let[u,f]of c.entries())if(e.text[u]!==f)return this.invalidateNode(e),!1;let l=new KZ(e.id,i,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((o,a)=>o.root.startOffset-a.root.startOffset);let n=JJe(e,this.document),i=new KZ(uc(),e,n,r);for(let{root:o}of e)this.syntaxToAbstract.set(o.id,i);return this.nodeById.set(i.id,i),i}buildTree(){let e=this.buildRecursively(this._syntaxRoot);return this.createNode([{root:this._syntaxRoot,children:e}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(this.canMergeChildren(e)){let i=r.map(a=>this.syntaxToAbstract.get(a.id));for(let a=0;a<r.length;a++)if(i[a]===void 0){if(a>0&&i[a-1]!==void 0){let c=i[a-1];for(let l=a-1;l>=0&&i[l]?.id===c.id;l--)i[l]=void 0;this.invalidateNode(c)}if(a<r.length-1&&i[a+1]!==void 0){let c=i[a+1];for(;a<r.length&&i[a+1]?.id===c.id;)a++,i[a]=void 0;this.invalidateNode(c)}}let o=[];for(let a=0;a<r.length;void 0)if(i[a]!==void 0)for(o.push(i[a]);a<r.length&&i[a+1]?.id===i[a].id;)a++;else{let c=[];for(;a<r.length&&i[a]===void 0;){let l=r[a];c.push({root:l,children:this.buildRecursively(l)}),a++}o.push(...this.mergeChildren(c))}return o}let n=[];for(let i=0;i<r.length;i++){let o=r[i];if(this.syntaxToAbstract.has(o.id)){let l=this.syntaxToAbstract.get(o.id);n.push(l),i+=l.parts.length-1;continue}let a=this.buildRecursively(o),c=o.endOffset-o.startOffset-a.reduce((l,u)=>l+(u.endOffset-u.startOffset),0);this.canBeNode(o)&&c>=this.minSize?n.push(this.createNode([{root:o,children:a}])):n.push(...a)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((m,h)=>m.root.startOffset-h.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let m of e){let h=m.root.endOffset-m.root.startOffset;for(let g of m.children){let A=g.endOffset-g.startOffset;h-=A,r-=A}n.push(h)}if(r<this.minSize)return e.flatMap(m=>m.children);let i=[0],o=0,a=null,c={line:-1,size:-1},l=e[0].root.startOffset,u=e[0].root.range.start.line;for(let m=0;m<e.length;m++){let h=e[m];if(o+=n[m]+h.root.startOffset-l,o>this.minSize&&o<this.maxSize){let g={line:h.root.range.start.line-u,size:h.root.startOffset-l};(g.line>c.line||g.line==c.line&&g.size>c.size)&&(c=g,a=m)}l=h.root.endOffset,u=h.root.range.end.line,o>=this.maxSize&&(a=a??m,i.push(a+1),m=a,o=0,a=null,c={line:-1,size:-1},l=e[m+1]?.root.startOffset,u=e[m+1]?.root.range.start.line)}i.length==1?i.push(e.length):i[i.length-1]!==e.length&&(i[i.length-1]=e.length);let f=[],p=!1;for(let m=0;m<i.length-1;m++){let h=e.slice(i[m],i[m+1]);f.push(this.createNode(h,p)),p=!0}return f}canMergeChildren(e){return this.parser.labeler.canMergeChildren?.(e)??e.children.length>wVt}canBeNode(e){return this.parser.labeler.canBeNode?.(e)??!0}};function JJe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(JJe,"buildText");function*XJe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*XJe(r,e))}s(XJe,"walk");d();d();d();var JZ=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.source="indentation";this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.range={start:m,end:m};return}let f=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+f+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)}}static{s(this,"IndentationNode")}get type(){return this.raw.type}};function Cxe(t,e,r){let n=t.subs.map(l=>({subtree:l,node:Cxe(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:f}=n[l];if(f.range.end.line>=o){let p=Cxe(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(f),o=Math.min(f.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new JZ(uc(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(Cxe,"recursivelyBuildNode");function ZJe(t){let e=gR(t.getText(),t.detectedLanguageId);return Cxe(e,t.lineCount,t)??new JZ(uc(),e,[],0,t.lineCount-1,t)}s(ZJe,"parse");var eXe={source:"indentation",parse:ZJe,update(t,e){return{root:ZJe(e),remapper:s(()=>{},"remapper")}},dispose:s(()=>{},"dispose"),labeler:{isIdentifier:s(t=>!1,"isIdentifier"),isText:s(t=>!0,"isText")}};async function tXe(t){return Promise.resolve(eXe)}s(tXe,"getParser");var SVt=new Ct("WorkspaceContextManager"),XZ=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},ZZ=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},rXe=5e3,eee=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new wr(rXe);this.allowedExtensions=new Set(uR);this.invalidDocumentCache=new Q_(rXe,this.config.InvalidCacheTime),this.cachedDocuments=new pj(this.config.MaxActiveFiles)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(Cr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>vx[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if($G(e),r=Pl(e),!(this.ctx.get(Cr).getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(M6e(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.parsers.values())e.dispose();this.parsers.clear(),this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new XZ(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new ZZ(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new Rh;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&this.isStarted()&&(this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new ZZ(n,i=>this.disposeDocument(i))))),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let a=new Set(r.getAllIds());r.update(n);let c=new Set(r.getAllIds()),l=[...c].filter(f=>!a.has(f)),u=[...a].filter(f=>!c.has(f));return this.recordDocumentChanges(e,{created:l,invalidated:u}),r}let o=new YZ(n,i,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:o.getAllIds(),invalidated:[]}),o}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()})}recordDocumentChanges(e,r){let n=Mh(this.createdNodes,e,()=>new Set),i=Mh(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await tXe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=this.ctx.get(Cr),n=r.getWorkspaceFolder({uri:e}),i=!0;if(n!==void 0){let a=r.getRelativePath({uri:e});a!==void 0&&(await this.ctx.get(Gp).findFiles(a,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(i=!1)}if(i){SVt.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,3600*1e3);return}let o=await this.ctx.get(En).getOrReadTextDocument({uri:e});if(o.status!=="valid"||o.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return o.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};var nXe=Ne(require("events"));var _Vt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},MA=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Rh;this.config=_Vt;this.emitter=new nXe.default;this.flushUpdatesPromise=void 0;this.emitter.setMaxListeners(27),this.contextManager=new eee(e,this.config),this.coordinator=new zZ(this.contextManager,this.config),this.tokenEventDisposable=Ps(e,r=>{this.maybeStart(r)})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(e){if(this.didStart||this.didDispose)return;let r=zi(this.ctx,Ht.UseWorkspaceContextCoordinator);if(r===void 0)try{let n=await this.ctx.get(Mt).updateExPValuesAndAssignments(void 0,void 0,e);r=this.isEnabled(n)}catch{}r&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return zi(this.ctx,Ht.UseWorkspaceContextCoordinator)??this.ctx.get(Mt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.deferredStart.resolve(),this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),mn.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),mn.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.contextManager.setAllowedLanguages(e)}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights(),r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),this.flushUpdatesPromise=this.contextManager.flushUpdates(),await this.flushUpdatesPromise,this.isActive()){let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await $C(n)}}}catch(e){Cx(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function vxe(t,e){let r=eu(t,e,"event.WorkspaceContextUpdate");return t.get(MA).onUpdate(r)}s(vxe,"onWorkspaceContextUpdate");d();var RVt=2e4,tee=class{constructor(e){this.ctx=e;this.name="workspaceContext";this.documents=new Map;this.root=JT;this.costFunction=gxe(new xT);this.disposables=[];this.costCache=new wr(RVt);this.rootWithPathCache=new wr;this.disposables.push(vxe(e,r=>{(this.nextUpdateTime===void 0||performance.now()>=this.nextUpdateTime)&&setTimeout(()=>{this.update(r.weights,r.context)},0)}))}static{s(this,"WorkspaceContextPromptComponent")}snapshot(e){let{completionState:r,telemetryData:n}=e;this.nextUpdateTime=this.lastUpdateTime!==void 0?this.lastUpdateTime+this.ctx.get(Mt).workspaceContextCacheTime(n):performance.now();let i=Mh(this.rootWithPathCache,r.textDocument.uri,()=>{let a=gxe(Ni(e.promptOpts?.tokenizer));this.costFunction=l=>Mh(this.costCache,l.id,()=>a(l));let c=this.getPathMarker(r);return new R0(uc(),[`${c}
`,""],[this.root],1,0,!0,"")}),o=this.getMask(r.textDocument.uri);return{root:i,mask:o}}getRoot(){return this.root}getMask(e){let r=this.documents.get(e);return r===void 0?[]:[r.id]}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(Cr),i=n.getRelativePath(e.textDocument),o={uri:r.uri,source:"",relativePath:i,languageId:r.detectedLanguageId},a=n.findNotebook(r);return o.relativePath&&!a?GC(sZ(o),o.languageId):GC(oZ(o),o.languageId)}update(e,r){this.rootWithPathCache.clear(),this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document),a=E7(o,this.costFunction);this.documents.set(n,a),a.updateWeights(l=>e.getNodeWeight(l.id)??0),a.requireRenderedChild=!0;let c=a.children[0];c.requireRenderedChild=c.children.length>0}this.root=this.createRootNode(),this.lastUpdateTime=performance.now()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new R0(uc(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:uc(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(Cr).getRelativePath({uri:e});return GC(`Related portions of ${i??e}:
`,r)}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}};d();d();var ree=class extends VZ{static{s(this,"WorkspaceContextPromptFactory")}constructor(e){let r={stableContext:new tee(e),prefix:new HZ,suffix:new $Z(e),volatileContext:new GZ("volatileContext",[new WZ,new jZ(e)])};super(e,r)}};var iXe=Ne(mi());var Fx=class{static{s(this,"CompletionsPromptFactory")}};function nee(t,e,r){return new xxe(new Exe(new bxe(t,new FZ(t,e,r),new ree(t),PVt)))}s(nee,"createCompletionsPromptFactory");var xxe=class extends Fx{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return Lx;try{return await this.delegate.prompt(r,n)}catch{return D3}}},kVt=1200,Exe=class{constructor(e){this.delegate=e}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new iXe.CancellationTokenSource,i=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,i),new Promise(o=>{setTimeout(()=>{n.cancel(),o(oXe)},kVt)})])}},bxe=class{constructor(e,r,n,i){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=i}static{s(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function PVt(t,e){let r=t.get(MA);return r.isEnabled(e)&&r.isActive()}s(PVt,"workspaceContextEnabledAndActive");var OZ=10,QZ={type:"contextTooShort"},UZ={type:"copilotContentExclusion"},D3={type:"promptError"},Lx={type:"promptCancelled"},oXe={type:"promptTimeout"};function YT(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(YT,"trimLastLine");function M3(t,e,r,n,i,o={}){let c=t.get(Cr).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=BVt(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=QJe(t,n);return t.get(Fx).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(M3,"extractPrompt");function DVt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:GC(n,e)}s(DVt,"addNeighboringCellsToPrompt");function BVt(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&TZ(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>DVt(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(BVt,"applyEditsForNotebook");function P3(t,e,r){let i=t.get(Mt).maxPromptCompletionTokens(e)-PX(t),o=YYe(e,r),a=XX(t,e,r),c=t.get(Mt).suffixPercent(e),l=t.get(Mt).suffixMatchThreshold(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l}}s(P3,"getPromptOptions");d();d();var sXe=2.98410452738298,aXe=-.838732736843507,cXe=1.50314646255716,lXe=-.237798634012662,iee={python:.314368072478742},uXe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var NVt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function MVt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(MVt,"linearInterpolation");var L3=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},Ixe=class{constructor(e,r,n){this.link=NVt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return MVt(n,this.logitsToQuantiles)}},dXe=new Ixe(sXe,[new L3("compCharLen",aXe,t=>Math.log(1+t)),new L3("meanLogProb",cXe),new L3("meanAlternativeLogProb",lXe)].concat(Object.entries(iee).map(t=>new L3(t[0],t[1]))),uXe);function fXe(t,e){let r={...e.measurements};return Object.keys(iee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),dXe.predict(t,r)}s(fXe,"ghostTextScoreConfidence");function pXe(t,e){let r={...e.measurements};return Object.keys(iee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),dXe.quantile(t,r)}s(pXe,"ghostTextScoreQuantile");d();d();var LVt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function oee(t){let e=t.slice();return e.reverse(),mXe(e)||mXe(e.filter(r=>r.trim().length>0))}s(oee,"isRepetitive");function mXe(t){let e=FVt(t);for(let r of LVt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(mXe,"isRepeatedPattern");function FVt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(FVt,"kmp_prefix_function");function OVt(t,e,r,n){let i="}";try{i=eje(e.detectedLanguageId)??"}"}catch{}return QVt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(OVt,"maybeSnipCompletion");function QVt(t,e,r,n){let i=UVt(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let f=0;f+a+u<o.length;f++){let p;for(;;){let A=e.line+1+f+l;if(p=A>=t.getLineCount()?void 0:t.getLineText(A),p!==void 0&&p.trim()==="")l++;else break}let m,h;for(;m=a+f+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(QVt,"maybeSnipCompletionImpl");function UVt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(UVt,"splitByNewLine");function qVt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(qVt,"matchesNextLine");function b7(t,e,r,n,i,o){if(oee(n.tokens)){let c=Gr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(qVt(e,r,a.completionText,!i)){let c=Gr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"completion.alreadyInDocument",c),Bt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=OVt(t,e,r,a.completionText),a.completionText?a:void 0}s(b7,"postProcessChoiceInContext");function hXe(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(hXe,"checkSuffix");var CXe=Ne(AI());var ds=new Ct("ghostText");var gXe=20;async function vXe(t,e,r,n,i,o,a){ds.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=m3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:sje(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},f={n:c,temperature:l,code_annotations:!1},p=zi(t,Ht.ModelAlwaysTerminatesSingleline)??t.get(Mt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&OC.isSupported(e.languageId)&&!p;!e.multiline&&!m?f.stop=[`
`]:e.stop&&(f.stop=e.stop),e.maxTokens!==void 0&&(f.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(f.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let A={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:f,headers:e.headers,extra:u},y=await t.get(w0).fetchAndStreamCompletions(t,A,r,i,n);return y.type==="failed"?{type:"failed",reason:y.reason,telemetryData:cc(r)}:y.type==="canceled"?(ds.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:y.reason,telemetryData:WT(r)}):a(h,y.getProcessingTime(),y.choices)}catch(A){if(kd(A))return{type:"canceled",reason:"network request aborted",telemetryData:WT(r,{cancelledNetworkRequest:!0})};if(ds.exception(t,A,"Error on ghost text request"),t.get(u0).notifyUser(t,A),_4(t))throw A;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:cc(r)}}}s(vXe,"genericGetCompletionsFromNetwork");function Txe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(Txe,"postProcessChoices");async function $Vt(t,e,r,n,i){return vXe(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return ds.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:cc(r)};if(n?.isCancellationRequested)return ds.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:WT(r)};let f=u.value;if(f===void 0)return ds.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:cc(r)};EXe(t,"performance",f,o,a),ds.debug(t,`Awaited first result, id:  ${f.choiceIndex}`);let p=Txe(f,e);p&&(see(t,e,p),ds.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;ds.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let A=Txe(g,e,h);A&&(h.push(A),see(t,e,A))}})();return Vg(t)&&await m,p?{type:"success",value:[wxe(p,{forceSingleLine:!1}),m],telemetryData:cc(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:cc(r)}})}s($Vt,"getCompletionsFromNetwork");async function WVt(t,e,r,n,i){return vXe(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return ds.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:WT(r)};let f=Txe(u,e,l);f&&l.push(f)}if(l.length>0){for(let u of l)see(t,e,u);EXe(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:cc(r),telemetryBlob:r,resultType:3}})}s(WVt,"getAllCompletionsFromNetwork");function wxe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(wxe,"makeGhostAPIChoice");function AXe(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(AXe,"takeNLines");async function jVt(t,e,r,n,i,o,a,c){let l=t.get(Mt).multilineAfterAcceptLines(c),u=t.get(EA).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:AXe(l),stop:[`

`],maxTokens:gXe*l}:{blockMode:"server",requestMultiline:!0,finishedCb:s(f=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let f;try{f=await ezt(t,u,e.textDocument,e.position,o,a,n)}catch{f={requestMultiline:!1}}if(!a&&f.requestMultiline&&t.get(Mt).singleLineUnlessAccepted(c)&&(f.requestMultiline=!1),f.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=vs.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,...yXe(t,u,e.textDocument,p,f.blockPosition,r,!0,n.prompt,c)}}if(a){let p={blockMode:"parsing",requestMultiline:!0,finishedCb:AXe(l),stop:[`

`],maxTokens:gXe*l};return u==="moremultiline"&&(p.blockMode="moremultiline"),p}return{blockMode:u,requestMultiline:!1,...yXe(t,u,e.textDocument,e.position,f.blockPosition,r,!1,n.prompt,c)}}}}s(jVt,"getGhostTextStrategy");function yXe(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&OC.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Mt).longLookaheadSize(l):t.get(Mt).shortLookaheadSize(l);return{finishedCb:new DX(t,o,r.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};see(t,h,m)}).getFinishedCallback(),maxTokens:t.get(Mt).maxMultilineTokens(l)}}return{finishedCb:a?l7(t,r,n):u=>{}}}s(yXe,"buildFinishedCallback");var GVt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function VVt(t,e,r){let n=zi(t,Ht.CompletionsDebounce)??t.get(Mt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=_a()-r.issuedTime;return Math.max(0,n-i)}s(VVt,"getRemainingDebounceMs");function I7(t,e,r){return r?.isCancellationRequested||e!==t.get(k0).currentRequestId}s(I7,"inlineCompletionRequestCancelled");async function zVt(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(y){let E=_a();c.push([y,E-a]),a=E}s(l,"recordPerformance"),l("telemetry");let u=t.get(Mt);if(I7(t,r,i))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:cc(n)};let f=YVt(e.textDocument,e.position);if(f===void 0)return ds.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:cc(n)};let p=bT(t,n),m={...GVt,...o,tokenizer:p.tokenizer},h=await M3(t,r,e,n,void 0,m);if(l("prompt"),h.type==="copilotContentExclusion")return ds.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:cc(n)};if(h.type==="contextTooShort")return ds.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:cc(n)};if(h.type==="promptError")return ds.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:cc(n)};if(m.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:h};if(h.type==="promptCancelled")return ds.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:cc(n)};if(h.type==="promptTimeout")return ds.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:cc(n)};if(h.prompt.prefix.length===0&&h.prompt.suffix.length===0)return ds.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:cc(n)};let g=VVt(t,m,n);return g>0&&(ds.debug(t,`Debouncing ghost text request for ${g}ms`),await $C(g),I7(t,r,i))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:cc(n)}:t.get(So).withProgress(async()=>{let[y]=YT(e.textDocument.getText(vs.range(vs.position(0,0),e.position))),E=t.get(k0).hasAcceptedCurrentCompletion(y,h.prompt.suffix),b=h.prompt,S=await jVt(t,e,y,h,m.isCycling,f,E,n);l("strategy");let R=KVt(t,y,b,S.requestMultiline);l("cache");let B=IT(t,e.textDocument.uri),L={blockMode:S.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:B,engineModelId:p.modelId,ourRequestId:r,prefix:y,prompt:h.prompt,multiline:S.requestMultiline,indentation:zX(e.textDocument,e.position),isCycling:m.isCycling,headers:p.headers,stop:S.stop,maxTokens:S.maxTokens,afterAccept:E};L.headers={...L.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":m.isSpeculative?"true":"false"};let O=ozt(t,e.textDocument,L,e.position,h,n,p,m);if(R===void 0&&!m.isCycling&&t.get(T0).shouldWaitForAsyncCompletions(y,h.prompt)){let $=await t.get(T0).getFirstMatchingRequestWithTimeout(r,y,h.prompt,m.isSpeculative,O);if(l("asyncWait"),$){let X=!S.requestMultiline;R=[[wxe($[0],{forceSingleLine:X})],4]}if(I7(t,r,i))return ds.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:cc(O)}}let Y=S.blockMode==="moremultiline"&&OC.isSupported(e.textDocument.detectedLanguageId);if(R!==void 0&&(R[0]=R[0].map($=>b7(t,e.textDocument,e.position,$,Y,ds)).filter($=>$!==void 0)),R!==void 0&&R[0].length===0)return ds.debug(t,`Found empty inline suggestions locally via ${h3(R[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:cc(O)};if(R!==void 0&&R[0].length>0&&(!m.isCycling||R[0].length>1))ds.debug(t,`Found inline suggestions locally via ${h3(R[1])}`);else{if(m.isCycling){let $=await WVt(t,L,O,i,S.finishedCb);if($.type==="success"){let X=R?.[0]??[];$.value[0].forEach(ie=>{X.findIndex(ae=>ae.completionText.trim()===ie.completionText.trim())===-1&&X.push(ie)}),R=[X,3]}else if(R===void 0)return $}else{let $=s((te,pe)=>(t.get(T0).updateCompletion(r,te),S.finishedCb(te,pe)),"finishedCb"),X=new mn.CancellationTokenSource,ie=$Vt(t,L,O,X.token,$);t.get(T0).queueCompletionRequest(r,y,h.prompt,X,ie);let ae=await t.get(T0).getFirstMatchingRequest(r,y,h.prompt,m.isSpeculative);if(ae===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:cc(O)};R=[[ae[0]],4]}l("network")}if(R===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:cc(O)};let[V,z]=R,Q=V.map($=>b7(t,e.textDocument,e.position,$,Y,ds)).filter($=>$!==void 0),U=zi(t,Ht.CompletionsDelay)??u.completionsDelay(n),Z=_a()-n.issuedTime,J=Math.max(U-Z,0);if(z!==2&&!m.isCycling&&J>0&&(ds.debug(t,`Waiting ${J}ms before returning completion`),await $C(J),I7(t,r,i)))return ds.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:WT(O)};let j=[];for(let $ of Q){let X=izt(t,e.textDocument,L,$,O),ie=f?hXe(e.textDocument,e.position,$):0,te={completion:tzt($.choiceIndex,$.completionText,h.trailingWs),telemetry:X,isMiddleOfTheLine:f,suffixCoverage:ie,copilotAnnotations:$.copilotAnnotations,clientCompletionId:$.clientCompletionId};j.push(te)}return O.properties.clientCompletionId=j[0]?.clientCompletionId,O.measurements.foundOffset=j?.[0]?.telemetry?.measurements?.foundOffset??-1,ds.debug(t,`Produced ${j.length} results from ${h3(z)} at ${O.measurements.foundOffset} offset`),I7(t,r,i)?{type:"canceled",reason:"after post processing completions",telemetryData:WT(O)}:(m.isSpeculative||t.get(k0).setGhostText(y,h.prompt.suffix,Q,z),l("complete"),{type:"success",value:[j,z],telemetryData:cc(O),telemetryBlob:O,resultType:z,performanceMetrics:c})})}s(zVt,"getGhostTextWithoutAbortHandling");async function Sxe(t,e,r,n){let i=Er();t.get(k0).currentRequestId=i;let o=await nzt(t,e.textDocument,i,n);await aR.catch(()=>{});try{return t.get(S0).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(HC).notifyRequest(e,i,o,r,n),await zVt(t,e,i,o,r,n)}catch(a){if(kd(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:WT(o,{cancelledNetworkRequest:!0})};throw a}}s(Sxe,"getGhostText");function KVt(t,e,r,n){let i=t.get(k0).getCompletionsForUserTyping(e,r.suffix),o=rzt(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(KVt,"getLocalInlineSuggestion");function YVt(t,e){let r=JVt(e,t),n=XVt(e,t);return r&&!n?void 0:r&&n}s(YVt,"isInlineSuggestion");function JVt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(JVt,"isMiddleOfTheLine");function XVt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(XVt,"isValidMiddleOfTheLinePosition");function ZVt(t,e){return e.lineAt(t).text.trim().length===0}s(ZVt,"isNewLine");var Ox=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function ezt(t,e,r,n,i,o,a){if(t.get(Ox).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Bt(t,"ghostText.longFileMultilineSkip",Gr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&OC.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await rje(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&ZVt(n,r))return{requestMultiline:!0};let l=!1;return!i&&Fp(r.detectedLanguageId)?l=await VX(r,n):i&&Fp(r.detectedLanguageId)&&(l=await VX(r,n)||await VX(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=XKe(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(ezt,"shouldRequestMultiline");function see(t,e,r){t.get(kA).append(e.prefix,e.prompt.suffix,r)}s(see,"appendToCache");function tzt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(tzt,"adjustLeadingWhitespace");function rzt(t,e,r,n){let i=t.get(kA).findAll(e,r);return i.length===0?(ds.debug(t,"Found no completions in cache"),[]):(ds.debug(t,`Found ${i.length} completions in cache`),i.map(o=>wxe(o,{forceSingleLine:!n})))}s(rzt,"getCompletionsFromCache");async function nzt(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=Gr.createAndMarkAsIssued(i);return await t.get(Mt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(nzt,"createTelemetryWithExp");function izt(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,xXe(l,e),l.extendWithRequestId(o),l.measurements.confidence=fXe(t,l),l.measurements.quantile=pXe(t,l),ds.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(izt,"telemetryWithAddData");function ozt(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);xXe(u,e);let f=r.repoInfo;u.properties.gitRepoInformation=f===void 0?"unavailable":f===0?"pending":"available",f!==void 0&&f!==0&&(u.properties.gitRepoUrl=f.url,u.properties.gitRepoHost=f.hostname,u.properties.gitRepoOwner=f.owner,u.properties.gitRepoName=f.repo,u.properties.gitRepoPath=f.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(vs.range(p.range.start,n)),h=e.getText(vs.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(b=>[b[0],b[1].map(S=>(0,CXe.SHA256)(S).toString())]),A={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},y={...ED(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(A.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(A.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let E=u.extendedBy(A,y);return Bt(t,"ghostText.issued",E),u}s(ozt,"telemetryIssued");function xXe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(xXe,"addDocumentTelemetry");function EXe(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Bt(t,`ghostText.${e}`,c)}s(EXe,"telemetryPerformance");var k0=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&bXe(this.choices[0].completionText,n))return szt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function szt(t,e){return t.filter(r=>bXe(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(szt,"adjustChoicesStart");function bXe(t,e){return t.startsWith(e)&&t.length>e.length}s(bXe,"startsWithAndExceeds");d();d();d();var YR=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(Cr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};d();var _xe=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??mn.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),f=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let m={range:c,newText:l,positionAfterEdit:mn.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<f&&(o=f),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:mn.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function KC(t,e){return new _xe(t,e)}s(KC,"createCompletionState");d();d();d();d();d();d();var IXe="code-referencing";var P0=new Ct(IXe);var azt=3e3,Rxe=2,TXe=256,wXe=Math.log(TXe)/Math.log(Rxe)/Rxe,LA={connection:"disabled",maxAttempts:wXe,retryAttempts:0,initialWait:!1},aee,cee=[];function czt(){if(aee)return aee;function t(E){return cee.push(E),()=>{let b=cee.indexOf(E);b!==-1&&cee.splice(b,1)}}s(t,"subscribe");function e(){for(let E of cee)E()}s(e,"afterUpdateConnection");function r(E){LA.connection!==E&&(LA.connection=E,e())}s(r,"updateConnection");function n(){return LA.connection==="connected"}s(n,"isConnected");function i(){return LA.connection==="disconnected"}s(i,"isDisconnected");function o(){return LA.connection==="retry"}s(o,"isRetrying");function a(){return LA.connection==="disabled"}s(a,"isDisabled");function c(){r("connected"),p(!1)}s(c,"setConnected");function l(){r("disconnected")}s(l,"setDisconnected");function u(){r("retry")}s(u,"setRetrying");function f(){r("disabled")}s(f,"setDisabled");function p(E){LA.initialWait!==E&&(LA.initialWait=E)}s(p,"setInitialWait");function m(E,b=azt){o()||(u(),p(!0),g(E,b))}s(m,"enableRetry");function h(){return LA.initialWait}s(h,"isInitialWait");async function g(E,b){P0.info(E,`Attempting to reconnect in ${b}ms.`),await A(b),p(!1);let S=E.get(Hr);function R(B,L){if(B>TXe){P0.info(L,"Max retry time reached, disabling."),f();return}let O=s(async()=>{LA.retryAttempts=Math.min(LA.retryAttempts+1,wXe);try{P0.info(L,`Pinging service after ${B} second(s)`);let Y=await S.fetch(new URL("_ping",TD(L)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(Y.status!==200||!Y.ok)R(B**2,L);else{P0.info(L,"Successfully reconnected."),c();return}}catch{R(B**2,L)}},"tryAgain");setTimeout(()=>void O(),B*1e3)}s(R,"succeedOrRetry"),P0.info(E,"Attempting to reconnect."),R(Rxe,E)}s(g,"attemptToPing");let A=s(E=>new Promise(b=>setTimeout(b,E)),"timeout");function y(E){return{dispose:t(E)}}return s(y,"listen"),aee={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:f,enableRetry:m,listen:y,isConnected:n,isDisconnected:i,isRetrying:o,isDisabled:a,isInitialWait:h},aee}s(czt,"registerConnectionState");var JR=czt();d();var fu={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},T7={[fu.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[fu.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[fu.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function kxe(t){return t===401?fu.Unauthorized:t===400?fu.BadArguments:t===404?fu.NotFound:t===429?fu.RateLimit:t>=500&&t<600?fu.InternalError:t>=600?fu.ConnectionError:fu.Unknown}s(kxe,"getErrorType");function YC(t,e,r={}){return{kind:"failure",reason:kxe(Number(t)),code:Number(t),msg:e,meta:r}}s(YC,"createErrorResponse");d();var lzt=/^[1-6][0-9][0-9]$/,uzt=/([A-Z][a-z]+)/,dzt="code_referencing",w7=class{constructor(e){this.baseKey=e}static{s(this,"CodeQuoteTelemetry")}buildKey(...e){return[dzt,this.baseKey,...e].join(".")}},Pxe=class extends w7{static{s(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=Gr.createAndMarkAsIssued();Bt(e,r,n)}handleFocus({context:e}){let r=Gr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Bt(e,n,r)}handleWrite({context:e}){let r=Gr.createAndMarkAsIssued(),n=this.buildKey("write","count");Bt(e,n,r)}},Oci=new Pxe,Dxe=class extends w7{static{s(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=Gr.createAndMarkAsIssued({actor:r}),i=this.buildKey("acknowledge","count");Bt(e,i,n)}handleDismiss({context:e,actor:r}){let n=Gr.createAndMarkAsIssued({actor:r}),i=this.buildKey("ignore","count");Bt(e,i,n)}},Qci=new Dxe,Bxe=class extends w7{static{s(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let i=Gr.createAndMarkAsIssued({origin:r,reason:n});lA(e,this.buildKey("unexpectedError"),i)}handleCompletionMissing({context:e,origin:r,reason:n}){let i=Gr.createAndMarkAsIssued({origin:r,reason:n});lA(e,this.buildKey("completionMissing"),i)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:i}){if(!r.match(lzt)){P0.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let o=n.split(uzt).filter(c=>!!c).join("_").toLowerCase(),a=Gr.createAndMarkAsIssued({message:i});lA(e,this.buildKey(o,r),a)}},lee=new Bxe;var fzt="twirp/github.snippy.v1.SnippyAPI";async function Nxe(t,e,r,n){let i;try{i=await t.get($r).getToken()}catch{return JR.setDisconnected(),YC(401,T7[fu.Unauthorized])}if(P0.info(t,`Calling ${e}`),JR.isRetrying())return YC(600,"Attempting to reconnect to the public code matching service.");if(JR.isDisconnected())return YC(601,"The public code matching service is offline.");let o;try{o=await t.get(Hr).fetch(Jm(t,i,"origin-tracker",`${fzt}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${i.token}`,...vp(t)},signal:n})}catch{return JR.enableRetry(t),YC(602,"Network error detected. Check your internet connection.")}let a;try{a=await o.json()}catch(g){let A=g.message;throw lee.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:A}),g}if(o.ok)return{kind:"success",...a};let c={...a,code:Number(o.status)},{code:l,msg:u,meta:f}=c,p=Number(l),m=kxe(p),h=u||"unknown error";switch(m){case fu.Unauthorized:return YC(l,T7[fu.Unauthorized],f);case fu.BadArguments:return YC(l,h,f);case fu.RateLimit:return JR.enableRetry(t,60*1e3),YC(l,T7.RateLimitError,f);case fu.InternalError:return JR.enableRetry(t),YC(l,T7[fu.InternalError],f);default:return YC(l,h,f)}}s(Nxe,"call");d();var uee=x.Object({kind:x.Literal("failure"),reason:x.String(),code:x.Number(),msg:x.String(),meta:x.Optional(x.Any())}),mzt=x.Object({matched_source:x.String(),occurrences:x.String(),capped:x.Boolean(),cursor:x.String(),github_url:x.String()}),SXe=x.Object({source:x.String()}),hzt=x.Object({snippets:x.Array(mzt)}),_Xe=x.Union([hzt,uee]),RXe=x.Object({cursor:x.String()}),gzt=x.Object({commit_id:x.String(),license:x.String(),nwo:x.String(),path:x.String(),url:x.String()}),Azt=x.Object({has_next_page:x.Boolean(),cursor:x.String()}),yzt=x.Object({count:x.Record(x.String(),x.String())}),Czt=x.Object({file_matches:x.Array(gzt),page_info:Azt,license_stats:yzt}),kXe=x.Union([Czt,uee]);async function PXe(t,e,r){let n=await Nxe(t,"Match",{method:"POST",body:OR(SXe,{source:e})},r);return OR(_Xe,n)}s(PXe,"Match");async function DXe(t,{cursor:e},r){let n=await Nxe(t,"FilesForMatch",{method:"POST",body:OR(RXe,{cursor:e})},r);return OR(kXe,n)}s(DXe,"FilesForMatch");d();var S7=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),dee=65;function Ezt(t){let e=0,r;S7.lastIndex=0;do if(r=S7.exec(t),r&&(e+=1),e>=dee)break;while(r);return e}s(Ezt,"lexemeLength");function bzt(t,e){let r=0,n;S7.lastIndex=0;do if(n=S7.exec(t),n&&(r+=1,r>=e))return S7.lastIndex;while(n);return t.length}s(bzt,"offsetFirstLexemes");function BXe(t,e){let r=t.split("").reverse().join(""),n=bzt(r,e);return r.length-n}s(BXe,"offsetLastLexemes");function _7(t){return Ezt(t)>=dee}s(_7,"hasMinLexemeLength");function Tzt(t){return MC.Check(uee,t)}s(Tzt,"isError");async function NXe(t,e){let r=await e();if(Tzt(r)){lee.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}s(NXe,"snippyRequest");function MXe(t){return"kind"in t&&t.kind==="failure"}s(MXe,"isMatchError");async function LXe(t,e,r,n){let o=await t.get(Cr).getTextDocument({uri:e});if(!o){P0.debug(t,`Expected document matching ${e}, got nothing.`);return}let a=o.getText();if(!_7(a)||!_7(a))return;let c=r;if(!_7(r)){let h=a.slice(0,n),g=BXe(h,dee);c=a.slice(g,n+r.length)}if(!_7(c))return;let l=await NXe(t,()=>PXe(t,c));if(!l||MXe(l)||!l.snippets.length){P0.info(t,"No match found");return}P0.info(t,"Match found");let{snippets:u}=l,f=u.map(async h=>{let g=await NXe(t,()=>DXe(t,{cursor:h.cursor}));if(!g||MXe(g))return;let A=g.file_matches,y=g.license_stats;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(f)).filter(h=>h!==void 0);if(m.length)for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.has("NOASSERTION")&&(g.delete("NOASSERTION"),g.add("unknown"));let A=Array.from(g).sort(),y=n,E=n+h.match.matched_source.length,b=o.positionAt(y),S=o.positionAt(E);await t.get(Sf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:y,offsetEnd:E,version:o.version,location:{start:b,end:S},matchingText:c,details:A.map(R=>({license:R,url:h.match.github_url}))})}}s(LXe,"fetchCitations");d();function Mxe(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let f=o;o=n,n=f,f=a,a=i,i=f,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(Mxe,"editDistance");function wzt(){return new Map}s(wzt,"emptyLexDictionary");function Szt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(Szt,"reverseLexDictionary");function*_zt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(_zt,"lexGeneratorWords");function FXe(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(FXe,"lexicalAnalyzer");function OXe(t){return t!==" "}s(OXe,"notSingleSpace");function QXe(t,e,r=_zt){let[n,i]=FXe(t,wzt(),r,OXe),[o,a]=FXe(e,i,r,OXe);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=Szt(a),l=o.length,u=c[o[0][0]],f=c[o[l-1][0]];function p(A,y,E,b){if(b===0||b===l-1){let S=c[n[E][0]];return b==0&&S.endsWith(u)||b==l-1&&S.startsWith(f)?0:1}else return A===y?0:1}s(p,"compare");let m=Mxe(n.map(A=>A[0]),o.map(A=>A[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(QXe,"lexEditDistance");d();function XR(t){if(t.length===0)return[];let e=[],r=/\r\n|\r|\n/g,n;for(;(n=r.exec(t))!==null;)e.push({start:n.index,end:n.index+n[0].length,newline:n[0]});return e}s(XR,"countLines");function UXe(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(UXe,"computeCompletionText");var ZT=new Ct("postInsertion"),qXe=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],HXe=50,Rzt=1500,kzt=.5,Pzt=500,Lxe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function $Xe(t,e,r,n,i){let o=await t.get(En).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return ZT.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),f=await M3(t,r.properties.headerRequestId,KC(a,u),r),p=f.type==="prompt"?f.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=c.substring(n),h=Nve(l,n,a.detectedLanguageId),A=$Ye(h,void 0)(m),y=Math.min(c.length,n+(A?A*2:Pzt)),E=c.substring(n,y);return{prompt:p,capturedCode:E,terminationOffset:A??-1}}}s($Xe,"captureCode");function fee(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{ZT.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),yYe(t,e,u)});let o=new YR(t,n,r-1),a=new YR(t,n,r),c=s(async l=>{ZT.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:f,capturedCode:p,terminationOffset:m}=await $Xe(t,n,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:f.prefix,context:f.context}),hypotheticalPromptSuffixJson:JSON.stringify(f.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});ZT.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Bt(t,e+".capturedAfterRejected",g,1)},"checkInCode");qXe.filter(l=>l.captureRejection).map(l=>o.push(eu(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(fee,"postRejectionTasks");function R7(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:a.acceptedLength,numLines:a.acceptedLines});ZT.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),AYe(t,e,l);let u=r;r=UXe(r,a);let f=r.trim(),p=new YR(t,i,n),m=new YR(t,i,n+r.length),h=s(async g=>{await Mzt(t,e,f,n,i,g,l,p,m)},"stillInCodeCheck");if(Lxe.triggerPostInsertionSynchroneously&&Vg(t)){let g=h({seconds:0,captureCode:Lxe.captureCode,captureRejection:Lxe.captureRejection});t.get(Xc).register(g)}else qXe.map(g=>p.push(eu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));eu(t,Dzt,"post insertion citation check")(t,i,u,r,n,c)}s(R7,"postInsertionTasks");async function Dzt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1){if(QG(t)?.getTokenValue("sn")==="1")return;await LXe(t,e,n,i);return}let a=await t.get(Cr).getTextDocument({uri:e});if(a){let c=Fxe(a.getText(),n,HXe,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=Bzt(r.length,n.length,c.start_offset);if(l===void 0){ZT.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,f=a?.positionAt(u),p=i+Nzt(r.length,n.length,c.stop_offset),m=a?.positionAt(p),h=f&&m?a?.getText({start:f,end:m}):"<unknown>";await t.get(Sf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:f&&m?{start:f,end:m}:void 0,matchingText:h,details:c.details.citations})}}s(Dzt,"citationCheck");function Bzt(t,e,r){if(!(e<t&&r>e))return r}s(Bzt,"computeCitationStart");function Nzt(t,e,r){return e<t?Math.min(r,e):r}s(Nzt,"computeCitationEnd");function Fxe(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=QXe(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=Mxe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=kzt?1:0}}s(Fxe,"find");async function Mzt(t,e,r,n,i,o,a,c,l){let u=await t.get(En).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=Fxe(p,r,HXe,c.offset);m.stillInCodeHeuristic||(m=Fxe(p,r,Rzt,c.offset)),ZT.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},m);if(Bt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:A,terminationOffset:y}=await $Xe(t,i,h,c.offset,l.offset),E={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},b=a.extendedBy({...E,capturedCodeJson:JSON.stringify(A)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:y});ZT.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Bt(t,e+".capturedAfterAccepted",b,1)}}}s(Mzt,"checkStillInCode");var Fzt=new Ct("ghostText"),ed=class{constructor(){this.#i=[];this.linesAccepted=0}static{s(this,"LastGhostText")}#e;#t;#i;get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};function Ozt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(Ozt,"computeRejectedCompletions");function Oxe(t,e){let r=t.get(ed);if(!r.position||!r.uri)return;let n=Ozt(r);n.length>0&&fee(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(Oxe,"rejectLastShown");function WXe(t,e,r,n){let i=t.get(ed);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&Oxe(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(WXe,"setLastShown");function jXe(t,e){let r=t.get(ed);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;Fzt.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,NX(t,"ghostText",e)}}s(jXe,"handleGhostTextShown");function Qzt(t,e,r){let n=t.get(ed);n.linesLeft===void 0&&(n.linesLeft=XR(e.displayText));let i=XR(e.displayText);n.linesLeft.length>i.length&&(n.linesAccepted+=n.linesLeft.length-i.length,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=i),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}s(Qzt,"handleLineAcceptance");function F3(t,e,r="ghostText"){let n=t.get(ed),i;return n.partiallyAcceptedLength?i={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft?.length??0)}:i={compType:"full",acceptedLength:e.displayText.length,acceptedLines:XR(e.displayText).length},n.resetState(),R7(t,r,e.displayText,e.offset,e.uri,e.telemetry,i,e.copilotAnnotations)}s(F3,"handleGhostTextPostInsert");function pee(t,e,r,n=0,i="ghostText",o="line"){let a=t.get(ed),c;return o==="cumulative"?(Uzt(t,e,r),c={compType:a.totalLength!=null?"full":"partial",acceptedLength:a.totalLength??(a.partiallyAcceptedLength||0),acceptedLines:a.linesAccepted},c.compType==="full"&&a.resetState()):(Qzt(t,e,r),c={compType:"partial",acceptedLength:a.partiallyAcceptedLength||0,acceptedLines:a.linesAccepted}),R7(t,i,e.displayText,e.offset,e.uri,e.telemetry,c,e.copilotAnnotations)}s(pee,"handlePartialGhostTextPostInsert");function Uzt(t,e,r){let n=t.get(ed);n.partiallyAcceptedLength=(n.partiallyAcceptedLength||0)+r,n.linesAccepted=XR(e.insertText.substring(0,n.partiallyAcceptedLength)).length,n.partiallyAcceptedLength>=e.insertText.length&&(n.totalLength=n.partiallyAcceptedLength)}s(Uzt,"handleCumulativeAcceptance");function GXe(t){let e=new o3;return e.set(Pc,t),e.set(hC,new hC),e.set(Io,new Io),e.set(kA,new kA),e.set($r,new $r(e)),e.set(uA,new uA),e.set(Mt,new Mt(e)),e.set(rC,new rC),e.set(Lu,new Lu(e)),e.set(Hu,new Hu),e.set(u0,new u0),e.set(w0,new c7),e.set(EA,new DB),e.set(fA,new f6),e.set(Xc,new Xc),e.set(HC,new HC(e)),e.set(En,new En(e)),e.set(MA,new MA(e)),e.set(Fx,nee(e)),e.set(ed,new ed),e.set(k0,new k0),e.set(Ox,Ox.default),e.set(Tx,new Tx(e)),e.set(dh,new dh(e)),e.set(nu,new nu),e.set(T0,new T0(e)),e.set(Cs,new Cs),e.set(wh,new wh(e)),e.set(kh,new kh),e}s(GXe,"createCommonContext");d();d();var mee=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};d();var O3=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var zui=x.Object({prompt:x.String(),speculation:x.String(),languageId:x.String(),stops:x.Array(x.String())}),k7=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Mt).updateExPValuesAndAssignments(),a=await this.ctx.get(w0).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new mee(a.reason);case"failed":throw new O3(a.reason)}}};d();d();var VXe=Ne(require("node:util"));function zXe(t,...e){return`[${t}] ${qzt(e)}`}s(zXe,"formatLogMessage");function qzt(t){return VXe.default.formatWithOptions({maxStringLength:1/0},...t)}s(qzt,"format");function hee(t){return KBe(t)}s(hee,"verboseLogging");var gee=class extends Jc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||hee(r))&&this.console.warn(`[${i}]`,...o)}};d();var KXe=require("node:util");var Q3=class extends eC{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){lA(e,"log",Gr.createAndMarkAsIssued({context:r,level:F_[1],message:Hzt(...n)}),1)}sendException(e,r,n){ja(e,r,n)}};function Hzt(...t){return t.map(e=>(0,KXe.inspect)(e)).join(" ")}s(Hzt,"telemetryMessage");d();var dlt=Ne(require("crypto")),flt=Ne(require("fs")),zre=Ne(llt()),plt=require("tls"),mlt=Ne(ult());var zN=new Ct("certificates"),hl=class{static{s(this,"RootCertificateReader")}};function Kre(t,e=process.platform){return new lwe(t,[new uwe,new dwe,Gdr(t,e)])}s(Kre,"getRootCertificateReader");function Gdr(t,e){switch(e){case"linux":return new fwe(t);case"darwin":return new pwe(t);case"win32":return new mwe(t);default:return new hwe}}s(Gdr,"createPlatformReader");var cwe=class extends hl{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return zN.warn(this.ctx,"Failed to read root certificates:",r),[]}}},lwe=class extends hl{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new cwe(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new dlt.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return zN.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&zN.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},uwe=class extends hl{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return plt.rootCertificates}},dwe=class extends hl{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await hlt(e):[]}},fwe=class extends hl{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await hlt(n);zN.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},pwe=class extends hl{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=zre.get({excludeBundled:!1,format:zre.Format.pem});return zN.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},mwe=class extends hl{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=mlt.all();return zN.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},hwe=class extends hl{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function hlt(t){let e;try{e=await flt.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(hlt,"readCertsFromFile");d();var Slt=Ne(require("http"));var Afr=407,od=new Ct("proxySocketFactory"),y1=class{static{s(this,"ProxySocketFactory")}},Pk=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function Yre(t){return new ywe(t,new Cwe(t))}s(Yre,"getProxySocketFactory");var ywe=class extends y1{constructor(r,n,i=new KQ,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new wr(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(od.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof Pk&&i.code===`ProxyStatusCode${Afr}`){od.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return od.debug(this.ctx,"Proxy authorization successful, caching result"),Bt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(od.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(od.debug(this.ctx,"Proxy authorization successful, received token"),i)return od.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){od.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);od.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);od.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return od.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return od.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return od.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},Cwe=class extends y1{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(Io).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{od.debug(this.ctx,"Attempting to establish connection to proxy");let c=Slt.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,f)=>{od.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new Pk(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):f.length>0?(u.destroy(),a(new Pk(`got non-empty response body from proxy, length=${f.length}`,void 0,"ProxyNonEmptyResponseBody"))):(od.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{od.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new Pk(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{od.debug(this.ctx,"Proxy socket connection timeout"),a(new Pk(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},KQ=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ne(wlt()))}};d();var Plt=require("node:os");var yfr=new Ct("repository"),Dk="\\\\",Dlt="(?:[#;].*)",JN=`(?:[^"${Dk}]|${Dk}.)`,Cfr="[0-9A-Za-z-]",_lt=`[A-Za-z]${Cfr}*`,Blt=`\\s*${Dlt}?$`,Nlt=`(?:[^"${Dk};#]|${Dk}.)`,vfr=`(?:"${JN}*"|"${JN}*(?<strCont>${Dk})$)`,xfr=`(?:${Nlt}|${vfr})+`,Efr=`(?:(?<cont>${Dk})$)`,Mlt=`(?<value>${xfr})${Efr}?${Blt}`,Rlt=new RegExp(`^${Mlt}`),bfr=new RegExp(`^(?<value>${JN}*(?:(?<strCont>${Dk})$|(?<quote>")))`),Ifr=new RegExp(`^\\s*(?:(?<key>${_lt})\\s*=\\s*${Mlt}|(?<soloKey>${_lt})${Blt})`),Tfr=new RegExp(`(?<value>${Nlt}+)|"(?<string>${JN}*)"`,"g"),klt="[-.0-9A-Za-z]+",wfr=`\\s+"(?<ext>${JN}*)"`,Sfr=`\\s+"(?<extOnly>${JN}*)"`,_fr=new RegExp(`^\\s*\\[(?:(?<simple>${klt})${wfr}|${Sfr}|(?<simpleOnly>${klt}))\\]`),Rfr=new RegExp(`^\\s*${Dlt}$`),vwe=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(_fr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(Ifr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(bfr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Rlt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Rlt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(Tfr)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){Rfr.test(this.line)&&(this.line="")}},Jre=class extends RA{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await Tx.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new FR)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new vwe(i),a=new FR;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(Mi).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&yfr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=Vi(this.xdgConfigUri(),"git","config"),o=Vi(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Pi(r).toLowerCase()!=="config.worktree")return;let n=Pd(r),i=Vi(n,"commondir");try{let o=(await e.get(Mi).readFileString(i)).trimEnd();return Vi(i2(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?kl(process.env.XDG_CONFIG_HOME):Vi(this.homeUri(),".config")}homeUri(){return kl((0,Plt.homedir)())}};d();var Llt=require("child_process");var Xre=class extends RA{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Llt.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){yKe.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=es(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new FR;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};d();var Olt=Ne(require("node:events"));var Flt="onWorkspaceChanged",nm=class{constructor(){this.emitter=new Olt.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(Flt,e)}emit(e){this.emitter.emit(Flt,e)}};function Qlt(t){let e=GXe(t);return kfr(e),e.set(hl,Kre(e)),e.set(y1,Yre(e)),e.set(RA,new mX([new Xre,new Jre])),e.set(nm,new nm),e.set(k7,new k7(e)),e}s(Qlt,"createProductionContext");function kfr(t){t.set(Qm,Qm.fromEnvironment(!1)),t.set(eC,new Q3),t.set(Jc,new gee(console))}s(kfr,"setupRudimentaryLogging");var Byi=new Ct("context");d();d();d();var C1="byok",Za=class{constructor(e){this.persistenceManager=e}static{s(this,"BYOKPersistence")}async getAPIKey(e,r){if(r){let i=await this.persistenceManager.read(C1,`${e}-${r}-api-key`);if(i)return i}return await this.persistenceManager.read(C1,`${e}-api-key`)}async storeAPIKey(e,r,n,i){n!==2&&(n===0?await this.persistenceManager.update(C1,`${e}-api-key`,r):n===1&&i&&await this.persistenceManager.update(C1,`${e}-${i}-api-key`,r))}async deleteAPIKey(e,r,n){r!==2&&(r===0?await this.persistenceManager.delete(C1,`${e}-api-key`):r===1&&n&&await this.persistenceManager.delete(C1,`${e}-${n}-api-key`))}async getStoredModelConfigs(e){return await this.persistenceManager.read(C1,`${e}-models-config`)||{}}async saveModelConfig(e,r,n,i,o){let a=await this.getStoredModelConfigs(e);a[r]=n,await this.persistenceManager.update(C1,`${e}-models-config`,a),i&&o&&await this.storeAPIKey(e,i,o,r)}async removeModelConfig(e,r){let n=await this.getStoredModelConfigs(e),i=n[r];i&&(delete n[r],await this.persistenceManager.update(C1,`${e}-models-config`,n),i.deploymentUrl&&await this.deleteAPIKey(e,1,r))}async removeAllModelConfigs(e){await this.persistenceManager.delete(C1,`${e}-models-config`)}};var Wo={Azure:"Azure",OpenAI:"OpenAI",Gemini:"Gemini",Groq:"Groq",OpenRouter:"OpenRouter",Anthropic:"Anthropic"};function Pw(t){switch(t){case Wo.Azure:return 1;default:return 0}}s(Pw,"getAuthTypeForProvider");function ene(t){return t===Wo.OpenAI||t===Wo.Gemini||t===Wo.Groq||t===Wo.OpenRouter||t===Wo.Anthropic}s(ene,"isOpenAICompatible");async function XN(t,e,r){let i=await new Za(t.get(Ai)).getStoredModelConfigs(e),o=i?Object.values(i).find(f=>f.isRegistered!==!1):void 0,a=o?.modelCapabilities,c=a?.name||r,l=a?.maxInputTokens||1e5,u=a?.maxOutputTokens||8192;return{modelId:r,uiName:c,modelFamily:Wr.BYOK,providerName:e,deploymentUrl:o?.deploymentUrl,maxRequestTokens:l,maxResponseTokens:u,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!!a?.toolCalling}}s(XN,"resolveModelConfiguration");async function Ult(t,e,r){return await new Za(t.get(Ai)).getAPIKey(e,r)}s(Ult,"resolveModelKey");function qlt(t,e){let{protocol:r,hostname:n,pathname:i}=new URL(e);if(i.endsWith("/chat/completions"))return e;if(n.endsWith(".models.ai.azure.com")||n.endsWith(".inference.ml.azure.com"))return`${r}//${n}/v1/chat/completions`;if(n.endsWith(".openai.azure.com"))return`${r}//${n}/openai/deployments/${t}/chat/completions?api-version=2025-01-01-preview`;throw new Error(`Unrecognized Azure deployment URL: ${e}`)}s(qlt,"resolveAzureUrl");d();var YQ=new Ct("openAICompatibleLMProvider"),xwe={[Wo.OpenAI]:"https://api.openai.com/v1",[Wo.Gemini]:"https://generativelanguage.googleapis.com/v1beta/openai",[Wo.Groq]:"https://api.groq.com/openai/v1",[Wo.OpenRouter]:"https://openrouter.ai/api/v1",[Wo.Anthropic]:"https://api.anthropic.com/v1"},Yh=class{constructor(e,r){this._lastFetchTime=0;this.providerName=e,this.ctx=r}static{s(this,"BaseOpenAICompatibleLMProvider")}async getAllModels(){await this.ensureKnownModelsCache();try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new Za(this.ctx.get(Ai)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let i=await fetch(e,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch models: ${i.status} ${i.statusText}`);let o=await i.json();if(o.error)throw new Error(`API Error: ${JSON.stringify(o.error)}`);let a=[];for(let c of o.data){let l=this._knownModels?.[c.id];l&&a.push({providerName:this.providerName,modelId:c.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:l})}return a}catch(e){throw YQ.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getBaseUrl(){let e=xwe[this.providerName];if(!e)throw new Error(`Unsupported provider: ${this.providerName}`);return e}getFetchModelUrl(){return`${this.getBaseUrl()}/models`}async ensureKnownModelsCache(){let e=Date.now();!this._knownModels&&(this._knownModels=await this.fetchKnownModelList(),this._lastFetchTime=e)}async fetchKnownModelList(){let e=await(await this.ctx.get(Hr).fetch("https://main.vscode-cdn.net/extensions/copilotChat.json",{method:"GET"})).json(),r;return e.version!==1?r={}:r=e.modelInfo[this.providerName]||{},r}};d();var en=new Ct("chat");d();d();var Na=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(Na||{});function on(t){return t?(t=im(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(on,"getTextPart");var Hlt=s((t,e)=>x.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),$lt=x.Optional(x.Object({agentSlug:x.String(),state:x.Union([x.Literal("accepted"),x.Literal("dismissed")]),confirmation:x.Any()}));function Dw(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(Dw,"parseToolCallArguments");function Wlt(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(Wlt,"toOpenAIToolCall");function jlt(t,e,r,n,i,o,a,c,l){let u=JSON.parse(JSON.stringify(e));return r.tool_calls&&(u.tool_calls=r.tool_calls),f3(t,[u],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c,copilotEditsSessionHeader:l}}s(jlt,"convertToChatCompletion");function JQ(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(JQ,"isChatCompletionContentPartArray");function tne(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(tne,"isChatMessageArray");function im(t){if(typeof t=="string")return t;if(JQ(t))return t;if(tne(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(im,"resolveAsChatMessageContent");function XQ(t,e){return(typeof t=="string"||JQ(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(XQ,"appendChatMessageContent");function rne(t,e){if(t){if(typeof t=="string"||JQ(t))return[{role:"assistant",content:t}];if(tne(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(rne,"resolveResponseAsChatMessages");d();var Ewe=new Ct("streamMessages");function Glt(t,e,r,n){let i=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(Ewe.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),i=i.substring(0,e.finishOffset),o=!0),Ewe.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),Ewe.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let a=a7(e.solution),c={role:"assistant",content:i};return jlt(t,c,a,e.index,e.requestId,o,e.reason??"",r,n)}s(Glt,"prepareChatCompletionForReturn");var Jh=new Ct("fetchChat"),nne=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(u){Jh.exception(e,u,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,l,a)}e.get(wh).processQuotaHeaders(a.headers);let c=a.headers.get("copilot-edits-session")||void 0;if(r.postOptions?.stream===!1){let l=await a.text(),u=JSON.parse(l),f=u.choices!=null?u.choices[0].message:{role:"assistant",content:""},p=a.headers.get("X-Request-ID")??Er(),m={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:f,tokens:on(f.content).split(" "),requestId:{headerRequestId:p,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0,copilotEditsSessionHeader:c},h=on(f.content);return await i(h,{text:h,copilotReferences:u.copilot_references}),{type:"success",chatCompletions:async function*(){yield Promise.resolve(m)}(),getProcessingTime:s(()=>p3(a),"getProcessingTime")}}else{let u=$T.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:_x(u,p=>Glt(e,p,n,c)),getProcessingTime:s(()=>p3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return Gr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:m3(e,n.count),top_p:kX(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=gx(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await Pfr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,n.apiKey,n.modelProviderName,n.copilotEditsSessionHeader,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Jh.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Bt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get($r).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Jh.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Jh.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get($r).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:(Jh.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function Pfr(t,e,r,n,i,o,a,c,l,u,f,p,m,h,g){let A=n===""&&i===""?r:Vi(r,n,i),y=u.extendedBy({endpoint:i,engineName:n,uiKind:l});RX(a,y,["messages"]),y.properties.headerRequestId=o,Bt(t,"request.sent",y);let E=_a(),b=cYe(l),S={...DC(t),...f.toCapiHeaders()};return a.messages?.some(R=>Array.isArray(R.content)?R.content.some(B=>"image_url"in B):!1)&&(S["Copilot-Vision-Request"]="true"),p&&(S["api-key"]=p),h&&(S["copilot-edits-session"]=h),a.messages&&a.messages.forEach(R=>{Dfr(R)&&R.tool_calls&&(R.tool_calls=R.tool_calls.map(B=>Wlt(B)))}),yx(t,A,c,b,o,a,g,S,void 0,m).then(R=>{let B=UR(R);y.extendWithRequestId(B);let L=_a()-E;return y.measurements.totalTimeMs=L,Jh.info(t,`Request ${o} at <${A}> finished with ${R.status} status after ${L}ms`),Jh.debug(t,"request.response properties",y.properties),Jh.debug(t,"request.response measurements",y.measurements),Jh.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",y),R}).catch(R=>{if(kd(R))throw R;let B=y.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",B),y.properties.message=String(Rf(R,"name")??""),y.properties.code=String(Rf(R,"code")??""),y.properties.errno=String(Rf(R,"errno")??""),y.properties.type=String(Rf(R,"type")??"");let L=_a()-E;throw y.measurements.totalTimeMs=L,Jh.info(t,`Request ${o} at <${A}> rejected with ${String(R)} after ${L}ms`),Jh.debug(t,"request.error properties",y.properties),Jh.debug(t,"request.error measurements",y.measurements),Bt(t,"request.error",y),R}).finally(()=>{f3(t,e,y)})}s(Pfr,"fetchWithInstrumentation");function Dfr(t){return"tool_calls"in t}s(Dfr,"isChatMessageWithToolCalls");var ua=class{constructor(e){this.ctx=e;this.fetcher=new nne}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=Er(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||e.modelConfiguration?.providerName===void 0&&c.maxResponseTokens!==void 0&&(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get($r).getToken(),u,f,p,m;if(e.modelConfiguration?.providerName)if(p=await Ult(this.ctx,e.modelConfiguration?.providerName,e.modelConfiguration.modelId),m=e.modelConfiguration.providerName,e.intentParams=void 0,e.modelConfiguration?.providerName===Wo.Azure)if(e.modelConfiguration.deploymentUrl)u=qlt(e.modelConfiguration.modelId,e.modelConfiguration.deploymentUrl),f="",e.engineName="";else throw new Error(`No deployment URL found for Azure model: ${e.modelConfiguration.modelId}`);else if(ene(e.modelConfiguration?.providerName))u=xwe[e.modelConfiguration?.providerName],f=e.endpoint??"completions",e.authToken=p;else throw new Error(`Unsupported BYOK provider: ${e.modelConfiguration?.providerName}`);else u=Jm(this.ctx,l,e.copilotApiProvider??"api"),f=e.endpoint??"completions";let h=e.authToken??l.token,g={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:f,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:h,apiKey:p,modelProviderName:m,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction,copilotEditsSessionHeader:e.copilotEditsSessionHeader};return c&&(g.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(g.tools=e.tools,g.tool_choice=e.tool_choice??"auto"),await this.fetch(g,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=o7(r.chatCompletions,l=>this.postProcess(l,i));en.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)en.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:on(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens,copilotEditsSessionHeader:l.copilotEditsSessionHeader};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n,copilotEditsSessionHeader:l.copilotEditsSessionHeader};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:on(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>on(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n,copilotEditsSessionHeader:l[0].copilotEditsSessionHeader}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return oee(e.tokens)?(r.extendWithRequestId(e.requestId),Bt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return en.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return kd(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(en.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};d();var v1=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};d();var Bw=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};d();var Vlt=new Ct("CommandLineAutoApprover"),nE=class{constructor(e){this.ctx=e;this._denyListRules=[];this._allowListRules=[]}static{s(this,"CommandLineAutoApprover")}updateConfiguration(e){let{denyListRules:r,allowListRules:n}=this._mapAutoApproveConfigToRules(e);this._allowListRules=n,this._denyListRules=r}isCommandAutoApproved(e){for(let r of this._denyListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"denied",reason:`Command '${e}' is denied by deny list rule: ${r.sourceText}`};for(let r of this._allowListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"approved",reason:`Command '${e}' is approved by allow list rule: ${r.sourceText}`};return{result:"noMatch",reason:`Command '${e}' has no matching auto approve entries`}}_commandMatchesRegex(e,r){return!!e.test(r)}_mapAutoApproveConfigToRules(e){if(!e||typeof e!="object")return{denyListRules:[],allowListRules:[]};let r=[],n=[];return Object.entries(e).forEach(([i,o])=>{if(typeof o=="boolean"){let a=this._convertAutoApproveEntryToRegex(i);o===!0?n.push({regex:a,sourceText:i}):o===!1&&r.push({regex:a,sourceText:i})}else if(typeof o=="object"&&o!==null){let a=o;if(typeof a.approve=="boolean"){let c=this._convertAutoApproveEntryToRegex(i);a.approve===!0?n.push({regex:c,sourceText:i}):a.approve===!1&&r.push({regex:c,sourceText:i})}}}),Vlt.debug(this.ctx,"Update CommandLineAutoApprover denyListRules",r),Vlt.debug(this.ctx,"Update CommandLineAutoApprover allowListRules",n),{denyListRules:r,allowListRules:n}}_convertAutoApproveEntryToRegex(e){let r=e.match(/^\/(?<pattern>.+)\/(?<flags>[dgimsuvy]*)$/),n=r?.groups?.pattern;if(n){let o=r.groups?.flags;o&&(o=o.replaceAll("g",""));try{let a=new RegExp(n,o||void 0);return this._regExpLeadsToEndlessLoop(a)?/(?!.*)/:a}catch{return/(?!.*)/}}let i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&");return new RegExp(`^${i}\\b`)}_regExpLeadsToEndlessLoop(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}};d();var Bfr=".github/copilot-instructions.md",Nfr=".github/git-commit-instructions.md",Mfr="global-copilot-instructions",Lfr="global-git-commit-instructions",x1=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Mfr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:Lfr}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=Vi(r.uri,n),l=(await e.get(Mi).readFileString(c)).trim();if(!l)return;(await wx(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,Bfr,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,Nfr,void 0,i,0)),c});return await Promise.all(o),i}};d();d();d();d();d();d();d();var Ffr=Symbol("MicrotaskDelay");function one(t){return!!t&&typeof t.then=="function"}s(one,"isThenable");function Ofr(t){let e=new Dx,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new qC)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(Ofr,"createCancelablePromise");function iE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new qC)})}):Ofr(r=>iE(t,r))}s(iE,"timeout");var ZN=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new xn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new xn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var ZQ=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new qC)}},Qfr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(Qfr||={});var eU=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new jp,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await HR.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var ine=class{constructor(e){this._deferred=new ZQ;this._asyncIterable=new eU(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};d();d();d();d();var sne=!1,ane=!1,tU=!1,Ufr=!1,qfr=!1,zlt=!1,Hfr=!1,$fr=!1,Wfr=!1,jfr=!1;var oE,sE=globalThis,Xh;typeof sE.vscode<"u"&&typeof sE.vscode.process<"u"?Xh=sE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Xh=process);var Klt=typeof Xh?.versions?.electron=="string",Gfr=Klt&&Xh?.type==="renderer";typeof Xh=="object"?(sne=Xh.platform==="win32",ane=Xh.platform==="darwin",tU=Xh.platform==="linux",Ufr=tU&&!!Xh.env.SNAP&&!!Xh.env.SNAP_REVISION,Hfr=Klt,Wfr=!!Xh.env.CI||!!Xh.env.BUILD_ARTIFACTSTAGINGDIRECTORY,qfr=!0):typeof navigator=="object"&&!Gfr?(oE=navigator.userAgent,sne=oE.indexOf("Windows")>=0,ane=oE.indexOf("Macintosh")>=0,$fr=(oE.indexOf("Macintosh")>=0||oE.indexOf("iPad")>=0||oE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,tU=oE.indexOf("Linux")>=0,jfr=oE?.indexOf("Mobi")>=0,zlt=!0):console.error("Unable to resolve platform.");var bwe=0;ane?bwe=1:sne?bwe=3:tU&&(bwe=2);var Nw=sne,Ylt=ane,Jlt=tU;var Vfr=zlt&&typeof sE.importScripts=="function",avi=Vfr?sE.origin:void 0;var E1=oE;var zfr=typeof sE.postMessage=="function"&&!sE.importScripts,cvi=(()=>{if(zfr){let t=[];sE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),sE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var Kfr=!!(E1&&E1.indexOf("Chrome")>=0),lvi=!!(E1&&E1.indexOf("Firefox")>=0),uvi=!!(!Kfr&&E1&&E1.indexOf("Safari")>=0),dvi=!!(E1&&E1.indexOf("Edg/")>=0),fvi=!!(E1&&E1.indexOf("Android")>=0);var Bk,Iwe=globalThis.vscode;if(typeof Iwe<"u"&&typeof Iwe.process<"u"){let t=Iwe.process;Bk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Bk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Bk={get platform(){return Nw?"win32":Ylt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var rU=Bk.cwd,Xlt=Bk.env,Zlt=Bk.platform,yvi=Bk.arch;var Jfr=65,Xfr=97,Zfr=90,e0r=122,Fw=46,Cu=47,q0=92,Mw=58,t0r=63,cne=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function r0r(t,e){if(t===null||typeof t!="object")throw new cne(e,"Object",t)}s(r0r,"validateObject");function mc(t,e){if(typeof t!="string")throw new cne(e,"string",t)}s(mc,"validateString");var H0=Zlt==="win32";function Ii(t){return t===Cu||t===q0}s(Ii,"isPathSeparator");function Twe(t){return t===Cu}s(Twe,"isPosixPathSeparator");function Lw(t){return t>=Jfr&&t<=Zfr||t>=Xfr&&t<=e0r}s(Lw,"isWindowsDeviceRoot");function lne(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=Cu}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Fw||i.charCodeAt(i.length-2)!==Fw){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===Fw&&c!==-1?++c:c=-1}return i}s(lne,"normalizeString");function n0r(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(n0r,"formatExt");function eut(t,e){r0r(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${n0r(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(eut,"_format");var hc={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],mc(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=rU():(o=Xlt[`=${e}`]||rU(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===q0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ii(f)&&(c=1,u=!0);else if(Ii(f))if(u=!0,Ii(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ii(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ii(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ii(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else Lw(f)&&o.charCodeAt(1)===Mw&&(l=o.slice(0,2),c=2,a>2&&Ii(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=lne(r,!n,"\\",Ii),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){mc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return Twe(o)?"\\":t;if(Ii(o))if(i=!0,Ii(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ii(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else Lw(o)&&t.charCodeAt(1)===Mw&&(n=t.slice(0,2),r=2,e>2&&Ii(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?lne(t.slice(r),!i,"\\",Ii):"";return a.length===0&&!i&&(a="."),a.length>0&&Ii(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){mc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ii(r)||e>2&&Lw(r)&&t.charCodeAt(1)===Mw&&Ii(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];mc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ii(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ii(r.charCodeAt(1))&&(++i,o>2&&(Ii(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ii(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return hc.normalize(e)},relative(t,e){if(mc(t,"from"),mc(e,"to"),t===e)return"";let r=hc.resolve(t),n=hc.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===q0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===q0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===q0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===q0;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===q0&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===q0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===q0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===q0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===q0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=hc.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===q0){if(e.charCodeAt(1)===q0){let r=e.charCodeAt(2);if(r!==t0r&&r!==Fw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Lw(e.charCodeAt(0))&&e.charCodeAt(1)===Mw&&e.charCodeAt(2)===q0)return`\\\\?\\${e}`;return t},dirname(t){mc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ii(i)?t:".";if(Ii(i)){if(r=n=1,Ii(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ii(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ii(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else Lw(i)&&t.charCodeAt(1)===Mw&&(r=e>2&&Ii(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ii(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&mc(e,"suffix"),mc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&Lw(t.charCodeAt(0))&&t.charCodeAt(1)===Mw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ii(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ii(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){mc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===Mw&&Lw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ii(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===Fw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:eut.bind(null,"\\"),parse(t){mc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ii(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ii(i)){if(n=1,Ii(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ii(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ii(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ii(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(Lw(i)&&t.charCodeAt(1)===Mw){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ii(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ii(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===Fw?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},i0r=(()=>{if(H0){let t=/\\/g;return()=>{let e=rU().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>rU()})(),da={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:i0r();mc(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Cu)}return e=lne(e,!r,"/",Twe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(mc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Cu,r=t.charCodeAt(t.length-1)===Cu;return t=lne(t,!e,"/",Twe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return mc(t,"path"),t.length>0&&t.charCodeAt(0)===Cu},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];mc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":da.normalize(e)},relative(t,e){if(mc(t,"from"),mc(e,"to"),t===e||(t=da.resolve(t),e=da.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Cu&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===Cu)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===Cu?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===Cu)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(mc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Cu,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Cu){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&mc(e,"ext"),mc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===Cu){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Cu){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){mc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===Cu){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===Fw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:eut.bind(null,"/"),parse(t){mc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Cu,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===Cu){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===Fw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};da.win32=hc.win32=hc;da.posix=hc.posix=da;var o0r=H0?hc.normalize:da.normalize,s0r=H0?hc.isAbsolute:da.isAbsolute,une=H0?hc.join:da.join,vvi=H0?hc.resolve:da.resolve,xvi=H0?hc.relative:da.relative,Evi=H0?hc.dirname:da.dirname,dne=H0?hc.basename:da.basename,fne=H0?hc.extname:da.extname,bvi=H0?hc.format:da.format,Ivi=H0?hc.parse:da.parse,Tvi=H0?hc.toNamespacedPath:da.toNamespacedPath,Nk=H0?hc.sep:da.sep,wvi=H0?hc.delimiter:da.delimiter;d();function rut(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(rut,"isObject");function pne(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(pne,"assertType");function nut(t,e,r,n=Nk){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!PJe(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}s(nut,"isEqualOrParent");var mne="**",iut="/",hne="[/\\\\]",gne="[^/\\\\]",a0r=/\//g;function sut(t,e){switch(t){case 0:return"";case 1:return`${gne}*?`;default:return`(?:${hne}|${gne}+${hne}${e?`|${hne}${gne}+`:""})*?`}}s(sut,"starsToRegExp");function nU(t,e){if(!t)return[];let r=[],n=!1,i=!1,o="";for(let a of t){switch(a){case e:if(!n&&!i){r.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=a}return o&&r.push(o),r}s(nU,"splitGlobAware");function uut(t){if(!t)return"";let e="",r=nU(t,iut);if(r.every(n=>n===mne))e=".*";else{let n=!1;r.forEach((i,o)=>{if(i===mne){if(n)return;e+=sut(2,o===r.length-1)}else{let a=!1,c="",l=!1,u="";for(let f of i){if(f!=="}"&&a){c+=f;continue}if(l&&(f!=="]"||!u)){let p;f==="-"?p=f:(f==="^"||f==="!")&&!u?p="^":f===iut?p="":p=k3(f),u+=p;continue}switch(f){case"{":a=!0;continue;case"[":l=!0;continue;case"}":{let m=`(?:${nU(c,",").map(h=>uut(h)).join("|")})`;e+=m,a=!1,c="";break}case"]":{e+="["+u+"]",l=!1,u="";break}case"?":e+=gne;continue;case"*":e+=sut(1);continue;default:e+=k3(f)}}o<r.length-1&&(r[o+1]!==mne||o+2<r.length)&&(e+=hne)}n=i===mne})}return e}s(uut,"parseRegExp");var c0r=/^\*\*\/\*\.[\w\.-]+$/,l0r=/^\*\*\/([\w\.-]+)\/?$/,u0r=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,d0r=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,f0r=/^\*\*((\/[\w\.-]+)+)\/?$/,p0r=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,aut=new t3(1e4),Swe=s(function(){return!1},"FALSE"),YA=s(function(){return null},"NULL");function dut(t){return t===Swe||t===YA}s(dut,"isEmptyPattern");function _we(t,e){if(!t)return YA;let r;typeof t!="string"?r=t.pattern:r=t,r=r.trim();let n=`${r}_${!!e.trimForExclusions}`,i=aut.get(n);if(i)return cut(i,t);let o;return c0r.test(r)?i=m0r(r.substr(4),r):(o=l0r.exec(wwe(r,e)))?i=h0r(o[1],r):(e.trimForExclusions?d0r:u0r).test(r)?i=g0r(r,e):(o=f0r.exec(wwe(r,e)))?i=lut(o[1].substr(1),r,!0):(o=p0r.exec(wwe(r,e)))?i=lut(o[1],r,!1):i=A0r(r),aut.set(n,i),cut(i,t)}s(_we,"parsePattern");function cut(t,e){if(typeof e=="string")return t;let r=s(function(n,i){return nut(n,e.base,!Jlt)?t(kJe(n.substr(e.base.length),Nk),i):null},"wrappedPattern");return r.allBasenames=t.allBasenames,r.allPaths=t.allPaths,r.basenames=t.basenames,r.patterns=t.patterns,r}s(cut,"wrapRelativePattern");function wwe(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}s(wwe,"trimForExclusions");function m0r(t,e){return function(r,n){return typeof r=="string"&&r.endsWith(t)?e:null}}s(m0r,"trivia1");function h0r(t,e){let r=`/${t}`,n=`\\${t}`,i=s(function(a,c){return typeof a!="string"?null:c?c===t?e:null:a===t||a.endsWith(r)||a.endsWith(n)?e:null},"parsedPattern"),o=[t];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}s(h0r,"trivia2");function g0r(t,e){let r=put(t.slice(1,-1).split(",").map(c=>_we(c,e)).filter(c=>c!==YA),t),n=r.length;if(!n)return YA;if(n===1)return r[0];let i=s(function(c,l){for(let u=0,f=r.length;u<f;u++)if(r[u](c,l))return t;return null},"parsedPattern"),o=r.find(c=>!!c.allBasenames);o&&(i.allBasenames=o.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(i.allPaths=a),i}s(g0r,"trivia3");function lut(t,e,r){let n=Nk===da.sep,i=n?t:t.replace(a0r,Nk),o=Nk+i,a=da.sep+t,c;return r?c=s(function(l,u){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===t||l.endsWith(a)))?e:null},"parsedPattern"):c=s(function(l,u){return typeof l=="string"&&(l===i||!n&&l===t)?e:null},"parsedPattern"),c.allPaths=[(r?"*/":"./")+t],c}s(lut,"trivia4and5");function A0r(t){try{let e=new RegExp(`^${uut(t)}$`);return function(r){return e.lastIndex=0,typeof r=="string"&&e.test(r)?t:null}}catch{return YA}}s(A0r,"toRegExp");function fut(t,e,r){return!t||typeof e!="string"?!1:Rwe(t)(e,void 0,r)}s(fut,"match");function Rwe(t,e={}){if(!t)return Swe;if(typeof t=="string"||y0r(t)){let r=_we(t,e);if(r===YA)return Swe;let n=s(function(i,o){return!!r(i,o)},"resultPattern");return r.allBasenames&&(n.allBasenames=r.allBasenames),r.allPaths&&(n.allPaths=r.allPaths),n}return C0r(t,e)}s(Rwe,"parse");function y0r(t){let e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}s(y0r,"isRelativePattern");function C0r(t,e){let r=put(Object.getOwnPropertyNames(t).map(c=>v0r(c,t[c],e)).filter(c=>c!==YA)),n=r.length;if(!n)return YA;if(!r.some(c=>!!c.requiresSiblings)){if(n===1)return r[0];let c=s(function(f,p){let m;for(let h=0,g=r.length;h<g;h++){let A=r[h](f,p);if(typeof A=="string")return A;one(A)&&(m||(m=[]),m.push(A))}return m?(async()=>{for(let h of m){let g=await h;if(typeof g=="string")return g}return null})():null},"resultExpression"),l=r.find(f=>!!f.allBasenames);l&&(c.allBasenames=l.allBasenames);let u=r.reduce((f,p)=>p.allPaths?f.concat(p.allPaths):f,[]);return u.length&&(c.allPaths=u),c}let i=s(function(c,l,u){let f,p;for(let m=0,h=r.length;m<h;m++){let g=r[m];g.requiresSiblings&&u&&(l||(l=dne(c)),f||(f=l.substr(0,l.length-fne(c).length)));let A=g(c,l,f,u);if(typeof A=="string")return A;one(A)&&(p||(p=[]),p.push(A))}return p?(async()=>{for(let m of p){let h=await m;if(typeof h=="string")return h}return null})():null},"resultExpression"),o=r.find(c=>!!c.allBasenames);o&&(i.allBasenames=o.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(i.allPaths=a),i}s(C0r,"parsedExpression");function v0r(t,e,r){if(e===!1)return YA;let n=_we(t,r);if(n===YA)return YA;if(typeof e=="boolean")return n;if(e){let i=e.when;if(typeof i=="string"){let o=s((a,c,l,u)=>{if(!u||!n(a,c))return null;let f=i.replace("$(basename)",()=>l),p=u(f);return one(p)?p.then(m=>m?t:null):p?t:null},"result");return o.requiresSiblings=!0,o}}return n}s(v0r,"parseExpressionPattern");function put(t,e){let r=t.filter(c=>!!c.basenames);if(r.length<2)return t;let n=r.reduce((c,l)=>{let u=l.basenames;return u?c.concat(u):c},[]),i;if(e){i=[];for(let c=0,l=n.length;c<l;c++)i.push(e)}else i=r.reduce((c,l)=>{let u=l.patterns;return u?c.concat(u):c},[]);let o=s(function(c,l){if(typeof c!="string")return null;if(!l){let f;for(f=c.length;f>0;f--){let p=c.charCodeAt(f-1);if(p===47||p===92)break}l=c.substr(f)}let u=n.indexOf(l);return u!==-1?i[u]:null},"aggregate");o.basenames=n,o.patterns=i,o.allBasenames=n;let a=t.filter(c=>!c.basenames);return a.push(o),a}s(put,"aggregateBasenameMatches");function mut(t){let e=t.match(/^---\s*\r?\n([\s\S]*?)\r?\n---\s*\r?\n/);return e?e[1]:null}s(mut,"extractFrontMatter");function hut(t){let e=mut(t);if(!e)return{};let r=e.match(/^applyTo:\s*["']?(.*?)["']?\s*$/m),n=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{applyTo:r?r[1].trim():void 0,description:n?n[1].trim():void 0}}s(hut,"extractMetadataFromContent");function gut(t){let e=mut(t);if(!e)return{};let r=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{description:r?r[1].trim():void 0}}s(gut,"extractPromptMetadataFromContent");function Aut(t){if(!t||t.trim()==="")return{pattern:t,isValid:!1,error:"Pattern cannot be empty"};let e=t.trim();return x0r(e)?{pattern:e,isValid:!0}:{pattern:e,isValid:!1,error:"Invalid glob pattern"}}s(Aut,"validate");function yut(t,e){let r=nU(e,","),n=s(i=>{if(i=i.trim(),i.length!==0){if(i==="**"||i==="**/*"||i==="*")return{pattern:i};!i.startsWith("/")&&!i.startsWith("**/")&&(i="**/"+i);for(let o of t)if(fut(i,o))return{pattern:i,file:o}}},"patternMatches");for(let i of r){let o=n(i);if(o)return o}}s(yut,"matches");function x0r(t){try{let e=nU(t,",");if(e.length===0)return!1;for(let r of e){let n=Rwe(r);if(dut(n))return!1}return!0}catch{return!1}}s(x0r,"isValidGlob");d();d();var E0r=".prompt.md",b0r=".instructions.md",I0r=".chatmode.md";function Cut(t){if(t.endsWith(E0r))return"prompt";if(t.endsWith(b0r))return"instructions";if(t.endsWith(I0r))return"mode"}s(Cut,"getPromptFileType");var w0r=".github/instructions",S0r=".github/prompts",Mk=class{static{s(this,"PromptFilesLocator")}async listFiles(e,r,n){if(!r.length)return[];let i=r.map(a=>{let c="";return n==="instructions"?c=Vi(a.uri,w0r):n==="prompt"&&(c=Vi(a.uri,S0r)),this.getFilesByUri(e,c,n)});return(await Promise.all(i)).flat()}async getFilesByUri(e,r,n){let i,o=[];try{i=await e.get(Mi).readDirectory(r)}catch{return[]}for(let[a,c]of i)c===1&&Cut(a)===n&&o.push(Vi(r,a));return o}};var JA=class{constructor(){this.logger=new Ct("PromptService");this.promptTemplatesCache=null;this.fileLocator=new Mk}static{s(this,"PromptService")}async collect(e,r,n){let i=await this.fileLocator.listFiles(e,r,"instructions").then(vut("instructions")),o=[];for(let a of i)try{let c=await this.parseInstructionFile(e,a.uri);c&&yut(n,c.applyTo)&&o.push(c)}catch(c){this.logger.warn(e,`Failed to parse instruction file ${a.uri}:`,c)}return o}async collectPromptFiles(e,r){let n=await this.fileLocator.listFiles(e,r,"prompt").then(vut("prompt")),i=[];for(let o of n)try{let a=await this.parsePromptFile(e,o.uri);a&&i.push(a)}catch(a){this.logger.warn(e,`Failed to parse prompt file ${o.uri}:`,a)}this.promptTemplatesCache?this.promptTemplatesCache.clear():this.promptTemplatesCache=new Map;for(let o of i)this.promptTemplatesCache.set(o.name,o);return i}async parseInstructionFile(e,r){try{let n=await e.get(Mi).readFileString(r),i=hut(n);if(!i.applyTo)return null;let o=Aut(i.applyTo);return o.isValid?{uri:r,applyTo:o.pattern,description:i.description,content:n}:(this.logger.warn(e,`Invalid applyTo pattern in ${r}: ${o.error}`),null)}catch{return null}}async parsePromptFile(e,r){try{let n=await e.get(Mi).readFileString(r),i=gut(n),a=Pi(r).replace(/\.prompt\.md$/,"");return{uri:r,name:a,description:i.description,content:n}}catch{return null}}getPromptTemplates(){return this.promptTemplatesCache?Array.from(this.promptTemplatesCache.values()):[]}getPromptTemplate(e){return this.promptTemplatesCache?.get(e)}};function vut(t){return e=>e.map(r=>({uri:r,type:t}))}s(vut,"withType");var XA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={},i){try{let o=e.get(x1),a=o.getGlobalInstructions(n),c=await o.readFromWorkspaces(e,r,n),u=await e.get(JA).collect(e,r,i||[]),f=u.map(h=>({content:[{instruction:h.content}],kind:2,reference:h.uri})),p=n;if(!n.customIntroduction&&u.length>0){let g=["Here is a list of instruction files that contain rules for modifying or creating new code.","These files are important for ensuring that the code is modified or created correctly.","Please make sure to follow the rules specified in these files when working with the codebase.","If the file is not already available as attachment, use the `read_file` tool to acquire it.","Make sure to acquire the instructions before making any changes to the code.","| Pattern | File Path | Description |","| ------- | --------- | ----------- |"],A=u.map(y=>{let E=y.applyTo||"*",b=y.uri,S=y.description||"";return`| \`${E}\` | \`${b}\` | ${S} |`});p={...n,customIntroduction:g.concat(A).join(`
`)}}let m=[...a,...c,...f];return this.processInstructions(m,p)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>
${n.join(`

`)}
</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let o of e.content)o.languageId?r.languageId&&o.languageId===r.languageId&&n.push(`For ${o.languageId} code: ${o.instruction}`):n.push(o.instruction);if(n.length===0)return;let i=n.join(`
`);return`<attachment filePath="${e.reference}">
${i}
</attachment>`}static async appendToUserMessage(e,r,n="",i={},o){if(!r||r.length===0)return n;let a=await t.getInstructions(e,r,i,o);return a?a+`

`+n:n}};d();var _0r="X-Initiator",R0r="X-Interaction-ID",k0r="X-Interaction-Type";var Ane=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},kwe=class extends Ane{static{s(this,"User")}static id(){return"user"}},Pwe=class extends Ane{static{s(this,"Agent")}static id(){return"agent"}},Dwe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[_0r]:this.initiator,[R0r]:this.interactionId,[k0r]:this.interactionType.toString()}}},$d=class t extends Dwe{static{s(this,"LlmInteraction")}static user(e,r){return new t(kwe,e,r)}static agent(e,r){return new t(Pwe,e,r)}};d();d();var fa=class{static{s(this,"ModelConfigurationProvider")}},yne=class extends fa{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw en.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(xf).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(xf).getMetadata(),i=D0r(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===Wr.Gpt35turbo||r===Wr.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Nwe(6144,i),maxResponseTokens:Bwe(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===Wr.Gpt4||r===Wr.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Nwe(10240,i),maxResponseTokens:Bwe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===Wr.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await P0r(this.ctx,i),maxResponseTokens:Bwe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case HK.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function P0r(t,e){let r=t.get(Mt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),Nwe(i,e)}s(P0r,"getExpRequestTokens");function Nwe(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(Nwe,"getRequestTokens");function Bwe(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(Bwe,"getResponseTokens");function D0r(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(D0r,"filterModelsByCapabilities");var Jo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(fa).getBestChatModelConfig([n]);if(e.get(wh).quotaExhausted&&!(await e.get($r).getToken()).userInfo?.isFreeUser){let o=await e.get(xf).getFallbackModel();if(o)return e.get(fa).getBestChatModelConfig([o?.id])}return e.get(fa).getBestChatModelConfig(v0(r),i)}static transformMessages(e,r){return r===Wr.O1Ga||r===Wr.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var Lk=class{constructor(){this.lastChanges=[];this.attemptCount=0;this.DEFAULT_TEMPERATURE=.1}static{s(this,"GitCommitGenerateService")}buildSystemMessage(e,r){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return r&&n.push(`
Current git branch name: ${r}`),e&&n.push(`
Respond in the following locale: ${e}`),n.join(`
`)}buildUserMessage(e,r){let n=[];return e.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",e.userCommits.map(i=>`- ${i}`).join(`
`),""),e.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",e.recentCommits.map(i=>`- ${i}`).join(`
`),""),n.push("# CODE CHANGES:",e.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),r&&n.push("<custom-instructions>",r,"</custom-instructions>"),n.join(`
`)}updateAttemptCount(e){if(e.length!==this.lastChanges.length){this.attemptCount=0;return}for(let r=0;r<e.length;r++)if(this.lastChanges[r]!==e[r]){this.attemptCount=0;return}this.attemptCount++}async generateCommitMessage(e,r,n,i){let o=new ua(e),a=await Jo.getModelConfiguration(e,"gitCommit"),c=[{uri:n.workspaceFolder?n.workspaceFolder:kl(process.cwd())}],l=await XA.getInstructions(e,c,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),u=[{role:"system",content:this.buildSystemMessage(n.userLanguage,i)},{role:"user",content:this.buildUserMessage(n,l)}];this.updateAttemptCount(n.changes);let f=await e.get(Mt).updateExPValuesAndAssignments(),p=Math.min(this.DEFAULT_TEMPERATURE*(1+this.attemptCount),2),m=await o.fetchResponse({modelConfiguration:a,messages:u,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:$d.user("git-commit",Er()),temperature:p},r,f);if(this.lastChanges=n.changes,m.type!=="success")return;let h=m.value.match(/```text\n([\s\S]*?)\n```/);return h?h[1].trim():m.value.trim()}};d();var sd=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},Cne=class extends sd{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}reportTurn(r,n){return this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n}),Promise.resolve()}};d();d();d();function ZA(){return Er()}s(ZA,"uuidV4");d();var Ow=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};d();var b1=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};d();d();d();var oU="filepath:",gl="...existing code...",Mwe="copilot-edited-file";d();function e8(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(e8,"getFenceForCodeBlock");var om=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=e8(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${oU} ${nc(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var Lwe=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},sU=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=on(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=on(a.content).endsWith(`
`)?on(a.content):`${on(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${Mwe}>.
</SYSTEM>


`}return o+on(a.content)},"")+`


The resulting document:
<${Mwe}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${gl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new om({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new Lwe({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new om({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};d();var aE=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(En).getOrReadTextDocument({uri:e})}};d();d();d();d();d();d();var Zh=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new xn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Al.fromJson))}static from(e){let r=e.map(i=>new Al(Vt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new Al(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new Al(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return B0r(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new Al(Vt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Vt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new Al(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new Al(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Vt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Vt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},Al=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Vt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=KT(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,Nx(r,this.newText)),o=new Vt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function B0r(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new Al(o.replaceRange.delta(-i),o.newText));else{let u="",f=o.replaceRange.start-(c.replaceRange.start+a);f>0&&(u=c.newText.slice(0,f));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new Al(Vt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Vt(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new Al(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Zh(n).normalize()}s(B0r,"joinEdits");d();d();var xut=-1;function t8(){return xut!==-1?xut:Date.now()}s(t8,"now");function Eut(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(Eut,"lineRangeDistance");d();var r8=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new cE(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Ma.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return pa.create(r)}mapEdits(e){return new t(this.edits.map(e))}},cE=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new xn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=ir.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(ir.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(ir.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(ir.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new ir(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Ma.replace(n,this.newText)}};var ms=class t{constructor(e){this.edits=e;Ll(kx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>ey.deserialize(r)))}static fromEdit(e){let r=r8.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=cE.joinEdits(o,r);o.length=0;let f=ey.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(Ih(n=>n.lineRange.startLineNumber,Th)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return pa.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(qr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new qr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new ey(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of MR(this.edits,(l,u)=>Eut(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let f=u.lineRange,p=u.newLines;for(let m of f.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,f.startLineNumber+o+m,"added",h)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new ey(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},ey=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(qr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Nh(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(ir.fromPositions(new Ur(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(ir.fromPositions(e.range.getEndPosition(),new Ur(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new qr(i,a),n)}toLineEdit(){return new ms([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new Ur(o,a)}else n=new Ur(1,1);let i=r.addToPosition(new Ur(1,1));return new cE(ir.fromPositions(n,i),"")}else return new cE(new ir(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new cE(ir.fromPositions(new Ur(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new ir(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new cE(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Ma.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new qr(r,n),this.newLines.slice(i,this.newLines.length-o))}},N0r;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(N0r||={});var I1=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=ms.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Wd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new ms(r))}};var pa=class t{constructor(e){this.edits=e;Ll(kx(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>Ma.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Ma.replace(e,r)])}static insert(e,r){return new t([Ma.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Ma.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Zh(this.edits.map(e=>new Al(e.range,e.newText)))}compose(e){return M0r(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=Ma.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=Ma.replace(Vt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Ma.replaceWithData(Vt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new vne(i)}if(this.edits.length!==e.arrayLength)throw KO(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=Ma.replaceWithData(Vt.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new vne(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Vt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(Ma.replace(Vt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(Ma.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(Ma.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function M0r(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(Ma.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(Ma.replaceWithData(Vt.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let f=l.range.endExclusive+i-o.range.endExclusive;if(f>0){let m=Ma.replaceWithData(Vt.emptyAt(l.range.endExclusive),l.newText.slice(-f),l.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Vt(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(Ma.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return pa.create(n).normalize()}s(M0r,"joinEdits");var Ma=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Vt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Vt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Vt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return pa.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=L0r(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=F0r(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function L0r(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(L0r,"commonPrefixLength");function F0r(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(F0r,"commonSuffixLength");var Wd=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return DA(()=>null.base.equals(this.base.apply(e))),DA(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return I1.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},vne=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return pa.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new T1(this.edits.map(e=>e.toEdit()))}},T1=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return pa.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=pa.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>pa.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=ms.fromEdit(new Wd(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};d();d();d();var Fk=0;function xne(t){return t===0}s(xne,"lengthIsZero");var sm=2**26;function n8(t,e){return t*sm+e}s(n8,"toLength");function lE(t){let e=t,r=Math.floor(e/sm),n=e-r*sm;return new uu(r,n)}s(lE,"lengthToObj");function aU(t,e){let r=t+e;return e>=sm&&(r=r-t%sm),r}s(aU,"lengthAdd");function but(t,e){return t.reduce((r,n)=>aU(r,e(n)),Fk)}s(but,"sumLengths");function Fwe(t,e){return t===e}s(Fwe,"lengthEquals");function cU(t,e){let r=t,n=e;if(n-r<=0)return Fk;let o=Math.floor(r/sm),a=Math.floor(n/sm),c=n-a*sm;if(o===a){let l=r-o*sm;return n8(0,c-l)}else return n8(a-o,c)}s(cU,"lengthDiffNonNegative");function Iut(t,e){let r=t,n=Math.floor(r/sm),i=r-n*sm,o=e,a=Math.floor(o/sm),c=o-a*sm;return new ir(n+1,i+1,a+1,c+1)}s(Iut,"lengthsToRange");d();var i8=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${lE(this.startOffset)}...${lE(this.endOffset)}) -> ${lE(this.newLength)}`}};function wut(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new tX(Tut(t)),n=Tut(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let f=[];for(;i&&!xne(u);){let[p,m]=i.splitAt(u);f.push(p),u=cU(p.lengthAfter,u),i=m??r.dequeue()}return xne(u)||f.push(new lU(!1,u,u)),f}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,f,p){if(a.length>0&&Fwe(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new i8(m.startOffset,f,aU(m.newLength,p))}else a.push({startOffset:u,endOffset:f,newLength:p})}s(c,"pushEdit");let l=Fk;for(let u of n){let f=o(u.lengthBefore);if(u.modified){let p=but(f,h=>h.lengthBefore),m=aU(l,p);c(l,m,u.lengthAfter),l=m}else for(let p of f){let m=l;l=aU(l,p.lengthBefore),p.modified&&c(m,l,p.lengthAfter)}}return a}s(wut,"combineTextEditInfos");var lU=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=cU(e,this.lengthAfter);return Fwe(r,Fk)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,Fk,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${lE(this.lengthBefore)} -> ${lE(this.lengthAfter)}`}};function Tut(t){let e=[],r=Fk;for(let n of t){let i=cU(r,n.startOffset);xne(i)||e.push(new lU(!1,i,i));let o=cU(n.startOffset,n.endOffset);e.push(new lU(!0,o,n.newLength)),r=n.endOffset}return e}s(Tut,"toLengthMapping");var uU=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Ene(n.range,uu.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=lE(n.newLength);return new Ene(Iut(n.startOffset,n.endOffset),new uu(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new i8(n8(e.range.startLineNumber-1,e.range.startColumn-1),n8(e.range.endLineNumber-1,e.range.endColumn-1),n8(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=wut(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return ir.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Ene=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};d();var bne=class{constructor(e){this.documents=e;Ll(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Ine=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new Wd(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};d();var Tne=class extends Ss{constructor(){super();this.branch=BA("branchName",void 0);this._register(ixe((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var wne=class extends Ss{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new Qwe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new Tne;this._register(WR(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=t8(),this._documentState.forEach(o=>o.applyAllEdits()))})),Ph(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new Owe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(Mx(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(Lc(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new bne(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=t8()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},Owe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new du(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=r8.fromEdit(e,this._currentValue),i=uU.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return Ok(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&O0r(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=t8(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:t8()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new T1(this._edits.map(o=>o.edit));return{history:new Ine(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=pa.empty,o=uU.empty,a,c=0,l=pa.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(t8()-u.instant>600*1e3)break;let f=u.textLengthEdit.compose(o),p=f.getRange();pne(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=Ok(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||Ok(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Ok(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let B=pa.trySwap(u.edit,l);if(B)l=B.e1;else{if(h>=2)break;l=u.edit.compose(l)}}let y=u.edit.inverseOnString(n.value);n=n.apply(y);let E=u.edit.compose(i),b=ms.fromEdit(new Wd(n,E)),R=new I1(n,b).removeCommonSuffixPrefixLines().edit.edits.length;if(R>e)break;c=R,i=E,o=f}for(let u=0;u<=a;u++){let f=this._edits[u];this._baseValue=this._baseValue.apply(f.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new T1(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Ok(t,e){let r=0;for(let n of t)r+=e(n);return r}s(Ok,"sum");function O0r(t,e){let r=e.getNewRanges();return t.edits.every(n=>Q0r(n.range,r))}s(O0r,"editExtends");function Q0r(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(Q0r,"doesTouch");var Qwe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};d();d();var Qk=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Vt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=_A(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new Ur(n,i)}getRange(e){return ir.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return uu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new uu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Uwe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new Ur(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new ir(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new Qk(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new ir(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Nh(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var uE=class extends Uwe{constructor(r){super();this.value=r;this._t=new Qk(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};d();d();d();var dU=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new xn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,f;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),f=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),m=c.replaceRange.start-(u.replaceRange.start+l);if(m>0){let y=u.slice(Vt.emptyAt(p),new Vt(0,m));o.push(y)}if(!f)throw new xn("Invariant violation: lastIntersecting is undefined");let h=f.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let y=f.slice(Vt.ofStartAndLength(f.replaceRange.endExclusive,0),new Vt(f.getNewLength()-h,f.getNewLength()));i.unshift(y),a-=y.getNewLength()-y.replaceRange.length}let g=new Vt(p,c.replaceRange.endExclusive-a),A=c.slice(g,new Vt(0,c.getNewLength()));o.push(A)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Vt(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Vt.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return YO(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Vt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Vt(r,n)}},Sne=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Vt(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Vt(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},Sut=class t extends dU{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var _ne=class extends dU{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(ad.replace(Vt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new Ff(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new ad(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new ad(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new Ff(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new Ff(r)}normalizeEOL(e){return new Ff(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=ad.replace(Vt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?Ff.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new uE(this.apply(e.value))}mapData(e){return new qwe(this.replacements.map(r=>new o8(r.replaceRange,r.newText,e(r))))}},Rne=class extends Sne{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=KT(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,Nx(n,this.newText)),a=new Vt(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new ad(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new ad(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=KT(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Vt(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=Nx(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Vt(0,this.newText.length-i))}toEdit(){return new Ff([this])}},Ff=class t extends _ne{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new ad(e,r)])}static insert(e,r){return new t([new ad(Vt.emptyAt(e),r)])}static delete(e){return new t([new ad(e,"")])}static fromJson(e){return new t(e.map(ad.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},ad=class t extends Rne{static{s(this,"StringReplacement")}static insert(e,r){return new t(Vt.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Vt.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var qwe=class t extends _ne{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new o8(e,r,n)])}static insert(e,r,n){return new t([new o8(Vt.emptyAt(e),r,n)])}static delete(e,r){return new t([new o8(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new Ff(this.replacements.map(e=>new ad(e.replaceRange,e.newText)))}},o8=class t extends Rne{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Vt.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};d();var fU=class t{constructor(e){this.replacements=e;DA(()=>kx(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromStringEdit(e,r){let n=e.replacements.map(i=>jd.fromStringReplacement(i,r));return new t(n)}static replace(e,r){return new t([new jd(e,r)])}static insert(e,r){return new t([new jd(ir.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new jd(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.replacements){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=uu.ofText(o.text);if(e.isBefore(c)){let u=new Ur(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),f=l.addToPosition(u);return kne(u,f)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new Ur(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof Ur?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof Ur?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return kne(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new Ur(1,1);for(let o of this.replacements){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=kne(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=kne(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new uE(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.replacements.map((n,i)=>new jd(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.replacements){let a=uu.ofText(o.text),c=Ur.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new xn;if(this.replacements.length===1)return this.replacements[0];let r=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),i="";for(let o=0;o<this.replacements.length;o++){let a=this.replacements[o];if(i+=a.text,o<this.replacements.length-1){let c=this.replacements[o+1],l=ir.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new jd(ir.fromPositions(r,n),i)}equals(e){return e3(this.replacements,e.replacements,(r,n)=>r.equals(n))}toString(e){return e===void 0?this.replacements.map(r=>r.toString()).join(`
`):typeof e=="string"?this.toString(new uE(e)):this.replacements.length===0?"":this.replacements.map(r=>{let i=e.getValueOfRange(r.range),o=ir.fromPositions(new Ur(Math.max(1,r.range.startLineNumber-1),1),r.range.getStartPosition()),a=e.getValueOfRange(o);a.length>10&&(a="..."+a.substring(a.length-10));let c=ir.fromPositions(r.range.getEndPosition(),new Ur(r.range.endLineNumber+1,1)),l=e.getValueOfRange(c);l.length>10&&(l=l.substring(0,10)+"...");let u=i;if(u.length>10){let p=Math.floor(5);u=u.substring(0,p)+"..."+u.substring(u.length-p)}let f=r.text;if(f.length>10){let p=Math.floor(5);f=f.substring(0,p)+"..."+f.substring(f.length-p)}return u.length===0?`${a}\u2770${f}\u2771${l}`:`${a}\u2770${u}\u21A6${f}\u2771${l}`}).join(`
`)}},jd=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"TextReplacement")}static joinReplacements(e,r){if(e.length===0)throw new xn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=ir.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(ir.fromPositions(n,i),o)}static fromStringReplacement(e,r){return new t(r.getTransformer().getRange(e.replaceRange),e.newText)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new fU([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(ir.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(ir.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new ir(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=KT(r,n),o=uu.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=ir.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=KT(r,n);r=r.substring(i),n=n.substring(i);let o=Nx(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function kne(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return ir.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new xn("start must be before end");return new ir(t.lineNumber,t.column,e.lineNumber,e.column)}s(kne,"rangeFromPositions");var pU=class t{constructor(e){this.replacements=e;Ll(kx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>s8.deserialize(r)))}static fromEdit(e,r){let n=fU.fromStringEdit(e,r);return t.fromTextEdit(n,r)}static fromTextEdit(e,r){let n=e.replacements,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=jd.joinReplacements(o,r);o.length=0;let f=s8.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(Ih(n=>n.lineRange.startLineNumber,Th)),new t(r)}isEmpty(){return this.replacements.length===0}toEdit(e){let r=[];for(let n of this.replacements){let i=n.toSingleEdit(e);r.push(i)}return new Ff(r)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.replacements)e.push(qr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new qr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.replacements.some(r=>e.replacements.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.replacements.map(r=>new s8(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of MR(this.replacements,(l,u)=>l.lineRange.distanceToRange(u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let f=u.lineRange,p=u.newLines;for(let m of f.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,f.startLineNumber+o+m,"added",h)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.replacements){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.replacements.map((n,i)=>new s8(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},s8=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"LineReplacement")}static deserialize(e){return new t(qr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Nh(e.text),i=e.range.startLineNumber,o=r.getValueOfRange(ir.fromPositions(new Ur(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(ir.fromPositions(e.range.getEndPosition(),new Ur(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new qr(i,a),n)}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new Ur(o,a)}else n=new Ur(1,1);let i=r.addToPosition(new Ur(1,1));return new jd(ir.fromPositions(n,i),"")}else return new jd(new ir(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new jd(ir.fromPositions(new Ur(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new ir(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new jd(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return new ad(n,r.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new qr(r,n),this.newLines.slice(i,this.newLines.length-o))}toLineEdit(){return new pU([this])}},U0r;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(U0r||={});var a8=class{constructor(e,r){this.originalText=e;this._trackedEdit=r;let n=r.removeCommonSuffixPrefix(e);this._updatedTrackedEdit=n.mapData(()=>new Pne(!0))}static{s(this,"ArcTracker")}handleEdits(e){let r=e.mapData(o=>new Pne(!1)),i=this._updatedTrackedEdit.compose(r).decomposeSplit(o=>!o.data.isTrackedEdit).e2;this._updatedTrackedEdit=i}getTrackedEdit(){return this._updatedTrackedEdit.toStringEdit()}getAcceptedRetainedCharactersCount(){return Ok(this._updatedTrackedEdit.replacements,r=>r.getNewLength())}getOriginalCharacterCount(){return Ok(this._trackedEdit.replacements,e=>e.getNewLength())}getTrackedEditLineMetrics(){let e=this.getTrackedEdit();if(!e)return{deletedLineCounts:0,insertedLineCounts:0};let r=pU.fromEdit(e,new uE(this.originalText)),n=YO(r.replacements,o=>o.lineRange.length),i=YO(r.getNewLineRanges(),o=>o.length);return{deletedLineCounts:n,insertedLineCounts:i}}getDebugState(){return{edits:this._updatedTrackedEdit.replacements.map(e=>({range:e.replaceRange.toString(),newText:e.newText,isTrackedEdit:e.data.isTrackedEdit}))}}},Pne=class{constructor(e){this.isTrackedEdit=e}static{s(this,"IsTrackedEditData")}join(e){if(this.isTrackedEdit===e.isTrackedEdit)return this}};d();var c8=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Ff.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=q0r(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let f=this._originalEdits.replacements[u],p=this.originalText.substring(f.replaceRange.start,f.replaceRange.endExclusive),m=f.newText,h=a[u],g=this._text.substring(h.start,h.endExclusive),A=Hwe(g,m),y=Hwe(m,p),E=Hwe(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${m}"->"${g}" | 4gram:${A.toFixed(2)} noRevert:(${y.toFixed(2)},${E.toFixed(2)})`),y!==1){let b=1-Math.max(E-y,0)/(1-y);n+=f.replaceRange.length*b,i+=f.replaceRange.length}e+=f.newText.length*A,r+=f.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function Hwe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(Hwe,"compute4GramTextSimilarity");function q0r(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(q0r,"applyEditsToRanges");d();d();var mU=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new Ur(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function Dne(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new mU(t),a=new mU(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let f=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),m=e.substring(f,p),h=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),A=new Vt(h,g);c.push(new ad(A,m))}return new Ff(c)}s(Dne,"stringEditFromDiff");d();d();var _ut=require("worker_threads");var $we=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function H0r(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(H0r,"createRpcProxy");var Bne=class{constructor(e,r,n){this.responseHandler=new $we;this.worker=new _ut.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=H0r((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};d();var Nne=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};d();var hU=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new qr(o,l.original.startLineNumber),new qr(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new qr(o,r+1),new qr(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new w1(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new xn("not a valid diff");return new w1(new ir(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ir(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new w1(new ir(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new ir(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(Rut(this.original.endLineNumberExclusive,e)&&Rut(this.modified.endLineNumberExclusive,r))return new w1(new ir(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ir(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new w1(ir.fromPositions(new Ur(this.original.startLineNumber,1),l8(new Ur(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ir.fromPositions(new Ur(this.modified.startLineNumber,1),l8(new Ur(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new w1(ir.fromPositions(l8(new Ur(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),l8(new Ur(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ir.fromPositions(l8(new Ur(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),l8(new Ur(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new xn}};function l8(t,e){if(t.lineNumber<1)return new Ur(1,1);if(t.lineNumber>e.length)return new Ur(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new Ur(t.lineNumber,r.length+1):t}s(l8,"normalizePosition");function Rut(t,e){return t>=1&&t<=e.length}s(Rut,"isValidLineNumber");var Mne=class t extends hU{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=qr.join(e.map(i=>qr.fromRangeInclusive(i.originalRange))),n=qr.join(e.map(i=>qr.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},w1=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.replacements.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.replacements.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new xn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new xn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new jd(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var Put=require("fs");var $0=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new Bh(()=>{let e=$0r([une(__dirname,"diffWorker.js"),une(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new Bne(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:kut(i.changes),moves:i.moves.map(a=>new Nne(new hU(new qr(a[0],a[1]),new qr(a[2],a[3])),kut(a[4])))}}};function kut(t){return t.map(e=>new Mne(new qr(e[0],e[1]),new qr(e[2],e[3]),e[4]?.map(r=>new w1(new ir(r[0],r[1],r[2],r[3]),new ir(r[4],r[5],r[6],r[7])))))}s(kut,"toLineRangeMappings");function $0r(t){for(let e of t)if((0,Put.existsSync)(e))return e}s($0r,"firstExistingPath");d();var Fne=new Ct("repository"),dE=class t{static{s(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},eg=class{static{s(this,"GitBranchLoader")}},Lne=class extends eg{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let i of this.loaders){let o=await i.getBranchInfo(r,n);if(o)return o}}};var One=new Ct("editSurvivalReporter"),Wwe=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new Zu;this._editSurvivalTracker=new c8(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs,this._arcTracker);this._sendTelemetryEvent(r)}_getLineCountInfo(){if(this._arcTracker)return this._arcTracker.getTrackedEditLineMetrics()}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=Pd(this._document.uri),r=this.ctx.get(eg);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){One.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=Pd(this._document.uri),n=await this.ctx.get(eg).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let i=this._initialBranchInfo.currentBranch,o=n.currentBranch,a=this._initialBranchInfo.isDetachedHead,c=n.isDetachedHead;return i!==o||a!==c?1:0}catch(e){return One.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,i,o){let a=e.computeTrackedEditsSurvivalScore(),c=await this.checkBranchChange(),l=this._getLineCountInfo(),u={fourGram:a.fourGram,noRevert:a.noRevert,timeDelayMs:r,didBranchChange:c,arc:o?.getAcceptedRetainedCharactersCount(),originalCharCount:o?.getOriginalCharacterCount(),currentLineCount:l?.insertedLineCounts,currentDeletedLineCount:l?.deletedLineCounts,originalLineCount:this._initialLineCounts?.insertedLineCounts,originalDeletedLineCount:this._initialLineCounts?.deletedLineCounts,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i};return{...u,currentLineCount:u.currentLineCount&&u.originalLineCount&&u.currentLineCount>u.originalLineCount?u.originalLineCount:u.currentLineCount,currentDeletedLineCount:u.currentDeletedLineCount&&u.originalDeletedLineCount&&u.currentDeletedLineCount>u.originalDeletedLineCount?u.originalDeletedLineCount:u.currentDeletedLineCount}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(En).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new xn(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await Dne(r,n,e.get($0)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var Qne=class extends Wwe{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c),this._arcTracker=new a8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._initialLineCounts=this._getLineCountInfo()}scheduleReport(e,r){let n=new ZN(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{One.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new c8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits),this._arcTracker=new a8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new c8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker=new a8(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw One.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var Dut=new Ct("editSurvivalTrackerService"),S1=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){Dut.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await Dne(r,n,this.ctx.get($0));i=new Qne(this.ctx,e,r,n,a,o,[0,30*1e3,120*1e3,300*1e3,600*1e3])}catch(a){Dut.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${Rx(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};d();var Hc=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var W0r=1e3,j0r={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:Wr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},u8=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new Ct("codeMapper")}async mapCode(e,r,n,i,o,a=!1,c){if(!e.resource)throw new b1("No uri found in code block");if(i.isCancellationRequested)throw new Ow;e.code.includes(gl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let l=await this.ctx.get(En).getOrReadTextDocument({uri:e.resource});if(l.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(l.status==="invalid"){let S=`Failed to find file ${e.resource} with status ${l.status} and reason ${l.reason}`,R=new b1(S);throw this.logger.error(this.ctx,S,R),R}let u=l.document.getText();if(u.length===0&&!e.code.includes(gl))return o&&await this.reportCodeBlock(e,o),{code:e.code};let f=new sU({documentContext:{document:l},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new aE(this.ctx)}),p=this.ctx.get(S1),m=await f.render();m=f.transformToFastApplyMessage(m),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Pi(e.resource),editDescription:e.markdownBeforeBlock});let h=await this.ctx.get(Mt).updateExPValuesAndAssignments(),g=ZA(),A=[],y=0,E=0,b=u.length+e.code.length+W0r;for(;;){let S={copilotApiProvider:"proxy",modelConfiguration:j0r,messages:m,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:u},copilotEditsSessionHeader:c};this.logger.debug(this.ctx,`Send map code request ${g} in iteration ${E} with params: ${JSON.stringify(S,null,2)}`);let B=await this.ctx.get(ua).fetchResponse(S,i,h);if(this.logger.debug(this.ctx,`Received map code response ${g} in iteration ${E} with result: ${JSON.stringify(B,null,2)}`),y=this.calculateResponseLength(B,A,y),B.type==="length"){if(y>b)throw new b1(`Code mapper might be in a loop: Rewritten length: ${y}, Document length: ${u.length}, Code block length ${e.code.length}`);m=await new sU({documentContext:{document:l},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new aE(this.ctx),inProgressRewriteContent:B.truncatedValue}).render()}else if(B.type==="success"){let L=A.join("");if(L){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Pi(e.resource),partialText:L,languageId:l.document.detectedLanguageId,markdownCodeFence:e8(L)});let O=p.initialize(l.document,u,L);return{code:L,editSurvivalTrackingSession:O,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:B.requestId}}}else{let O=`No valid completion found for uri ${e.resource}`;throw new b1(O)}}else{if(B.type==="canceled")throw new Hc;{let L=`Failed to map code for uri ${e.resource} with result type ${B.type}`;throw this.logger.error(this.ctx,L,B),new b1(L)}}E+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Pi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Pi(e.resource)})}};d();var Gd=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};d();d();var Qw=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in. If you are using a custom model, please check if the API key is still valid.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};d();d();var Une=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var Uw=class{constructor(e,r){this.request=e;this.id=Er();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},jwe=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},qne=class{constructor(e=[],r="panel",n="en"){this._id=Er();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new jwe(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new Une(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var Hne=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new Gd({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:FI,type:"user"},new Gd({message:FI});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new Gd({message:Qw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new Gd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new Gd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new Gd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new Gd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new Gd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new Gd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new Gd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new Gd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};d();async function*Nut(t){yield Promise.resolve(t)}s(Nut,"stringToAsyncIterable");d();d();var fE=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||kl(r)}static uriToPath(e){let r=es(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var $ne=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await XA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},[]);return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(fE.posixFilePathToUri(e))}getFilePath(e){return fE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${oU} ${this.exampleFilePath}`,`// ${gl}`,"{ changed code }",`// ${gl}`,"{ changed code }",`// ${gl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${oU} ${this.tsExampleFilePath}`,"class Person {",`   // ${gl}`,"   age: number;",`   // ${gl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new om({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${gl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};d();d();var Wne=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var Gwe="<file>",gU="```",yU="###",V0r=/^(`+)([^ \n]*)/,AU="filepath:";async function*Lut(t,e){let r=new Wne(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let A=await r.peek(Math.max(gU.length,Gwe.length,yU.length));if(A.startsWith(Gwe)||A.startsWith(gU))break;if(A.startsWith(yU)){let y=await r.readLineIncludingLF(),E=y.substring(yU.length).trim();e(E)?n.length=0:n.push(y)}else await Mut(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(Gwe);for(;!r.endOfStream&&!i.startsWith(gU);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(V0r),c=a?a[2]:void 0,l=sJe(c?iJe(c):void 0),u=[`${l.lineComment.start} ${AU}`,`:: ${AU}`,`<!-- ${AU}`,`// ${AU}`,`# ${AU}`],f=Math.max(...u.map(A=>A.length)),p=l.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let A=await r.peek(Math.max(gU.length,f));if(A.startsWith(gU)){let y=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(y);continue}}if(!h&&u.some(y=>A.startsWith(y))){let y=await r.readLineIncludingLF(),E=u.reduce((b,S)=>A.startsWith(S)?y.substring(S.length):b,y);E=E.split("-->")[0].trim(),E.endsWith(p)&&(E=E.substring(0,E.length-p.length)),E=E.trim(),h=e(E);continue}await Mut(r,g)}yield{resource:h,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(Lut,"getCodeBlocksFromResponse");async function Mut(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(Mut,"pipeOneLine");function Fut(t){if(t.startsWith(`${yU} `))return"";let e=t.indexOf(`
${yU} `);return e===-1?"":t.substring(0,e)+`
`}s(Fut,"parseOverallDescription");d();d();var jne=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var z0r=new Ct("CopilotEditsConversations"),yl=class{constructor(e){this.editConversations=new wr(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new qne([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&z0r.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new jne(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};var K0r=new Ct("copilotEditsService"),pE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new ua(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=Hne.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof Ow)await this.reportEnd(e,{message:FI});else if(n instanceof Gd)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Mt).updateExPValuesAndAssignments();this.abortIfCancelled(e,r);let o=e.userSelectedModelProviderName&&e.userSelectedModel?await XN(this.ctx,e.userSelectedModelProviderName,e.userSelectedModel):await Jo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Jo.transformMessages(n,o.modelFamily);return this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=e.userSelectedModelProviderName&&e.userSelectedModel?"customized":(await Jo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel)).uiName,i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new $ne({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new aE(this.ctx),modelName:n,history:o,ctx:this.ctx}).render()}abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:FI,type:"user"},new Ow;this.ctx.get(yl).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=Nut(r),o=new u8(this.ctx),a=s(u=>fE.pathToUri(e,u),"createUri"),c=[],l=Fut(r);l&&await this.ctx.get(sd).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),this.abortIfCancelled(e,n);for await(let u of Lut(i,a)){let f=o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async p=>{await this.ctx.get(sd).reportTurn(e,p)}).then(async p=>(p.editSurvivalTrackingSession&&u.resource&&await this.startEditSurvivalTrackingWithSession(e,u.resource,p.editSurvivalTrackingSession,p.telemetry),p));c.push(f)}await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof b1||i instanceof O3)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof Ow)e.currentTurn.status="cancelled",e.currentTurn.response={message:FI,type:"user"},await this.reportEnd(e,{message:FI});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(sd).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(sd).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(sd).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}async startEditSurvivalTrackingWithSession(e,r,n,i){try{let o=wT({uri:r,languageId:"UNKNOWN"}),a=await this.ctx.get(Mt).updateExPValuesAndAssignments();n.startReporter(c=>{this.handleEditSurvivalTelemetry(e,c,a,o,i)})}catch(o){let a=e?.editConversationId||"unknown",c=e?.currentTurn?.id||"unknown",l=r||"unknown";K0r.warn(this.ctx,`Failed to start edit survival tracking for file '${l}' in conversation '${a}', turn '${c}'.`,o)}}handleEditSurvivalTelemetry(e,r,n,i,o){TX(this.ctx,"editsPanel",{requestSource:o?.requestSource??e.editConversation.getSource(),chatRequestModel:o?.chatRequestModel??"",mapper:o?.mapper??"",headerRequestId:o?.headerRequestId??"",mode:"edit",modelId:e.userSelectedModel??"unknown",languageId:i},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}};d();var d8=class extends df{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get($r).resetToken(),r.get(Dd).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=Ep({serverUrl:WG(r,n.serverUrl),apiUrl:WG(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};d();var S2i=new Ct("exp");function Out(t){let e=t.get(Mt);e.registerStaticFilters(X0r(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>zi(t,Ht.DebugOverrideEngine)||zi(t,Ht.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>qG()?"copilot-web":t.get(hn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>Vwe(!t.get(Io).isProduction()&&t.get(hn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(hn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Y0r(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(hn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>Vwe(t.get(hn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>J0r(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(hn).getRelatedPluginInfo()){let i=Om+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(w9).includes(i)){TW(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=Vwe(n.version)}return r})}s(Out,"setupExperimentationService");function Y0r(t){let e=t.get(hn).getEditorPluginInfo();return e.name==="copilot"&&pC(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(Y0r,"getPluginRelease");function J0r(t){let e=t.get(hn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(J0r,"getTargetPopulation");function X0r(t){return Z0r(t)}s(X0r,"createAllFilters");function Z0r(t){let e=t.get(Ds);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(Io).isProduction()?t2(t):"1.999.0"}}s(Z0r,"createDefaultFilters");function Vwe(t){return t.split("-")[0]}s(Vwe,"trimVersionSuffix");d();var CU=(r=>(r.enabled="enabled",r.disabled="disabled",r))(CU||{}),Uk=Symbol("onMCPToolsListChanged"),tg=class{static{s(this,"McpManager")}};d();var ty=class{static{s(this,"McpRuntimeNotifier")}},Gne=class extends ty{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};d();var f8=class{static{s(this,"AbstractCopilotMessageSender")}};d();d();d();var zwe=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},Vne=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new zwe(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let f of this._recentUserActions){let p=c-f.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=f.kind==="rejected"?1.5:.8;l*=1+(h-1)*m}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};d();d();d();var hs;(n=>{function t(i){return new Kwe(i)}n.ok=t,s(t,"ok");function e(i){return new Ywe(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(hs||={});var Kwe=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},Ywe=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};d();var zne=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw KO(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw KO(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};d();d();var NU=Ne($c());function eft(t){return t.map(rmr).join(`
`)}s(eft,"stringifyChatMessages");function rmr({role:t,content:e}){if(t!==NU.Raw.ChatRole.User&&t!==NU.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===NU.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==NU.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(rmr,"stringifyMessage");d();d();var nmr=/^\w[\w\d+.-]*$/,imr=/^\//,omr=/^\/\//;function smr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!nmr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!imr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(omr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(smr,"_validateUri");function amr(t,e){return!t&&!e?"file":t}s(amr,"_schemeFix");function cmr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==sy&&(e=sy+e):e=sy;break}return e}s(cmr,"_referenceResolution");var ks="",sy="/",lmr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Jw=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||ks,this.authority=e.authority||ks,this.path=e.path||ks,this.query=e.query||ks,this.fragment=e.fragment||ks):(this.scheme=amr(e,a),this.authority=r||ks,this.path=cmr(this.scheme,n||ks),this.query=i||ks,this.fragment=o||ks,smr(this,a))}get fsPath(){return $Se(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=ks),n===void 0?n=this.authority:n===null&&(n=ks),i===void 0?i=this.path:i===null&&(i=ks),o===void 0?o=this.query:o===null&&(o=ks),a===void 0?a=this.fragment:a===null&&(a=ks),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Yw(r,n,i,o,a)}static parse(e,r=!1){let n=lmr.exec(e);return n?new Yw(n[2]||ks,Eie(n[4]||ks),Eie(n[5]||ks),Eie(n[7]||ks),Eie(n[9]||ks),r):new Yw(ks,ks,ks,ks,ks)}static file(e){let r=ks;if(Nw&&(e=e.replace(/\\/g,sy)),e[0]===sy&&e[1]===sy){let n=e.indexOf(sy,2);n===-1?(r=e.substring(2),e=sy):(r=e.substring(2,n),e=e.substring(n)||sy)}return new Yw("file",r,e,ks,ks)}static from(e,r){return new Yw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Nw&&e.scheme==="file"?n=t.file(hc.join($Se(e,!0),...r)).path:n=da.join(e.path,...r),e.with({path:n})}toString(e=!1){return WSe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Yw(e);return r._formatted=e.external??null,r._fsPath=e._sep===nft?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var nft=Nw?1:void 0,Yw=class extends Jw{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=$Se(this,!1)),this._fsPath}toString(r=!1){return r?WSe(this,!0):(this._formatted||(this._formatted=WSe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=nft),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},ift={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function tft(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=ift[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(tft,"encodeURIComponentFast");function umr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=ift[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(umr,"encodeURIComponentMinimal");function $Se(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Nw&&(r=r.replace(/\//g,"\\")),r}s($Se,"uriToFsPath");function WSe(t,e){let r=e?umr:tft,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=sy,n+=sy),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:tft(l,!1,!1)),n}s(WSe,"_asFormatted");function oft(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+oft(t.substr(3)):t}}s(oft,"decodeURIComponentGraceful");var rft=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Eie(t){return t.match(rft)?t.replace(rft,e=>oft(e)):t}s(Eie,"percentDecode");d();var ay=class t{constructor(e){this.uri=e;this._uri=Jw.parse(Pl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new Bx({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return dne(this.uri)}get extension(){return fne(this.uri)}toUri(){return this._uri}};var MU=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},bie=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new Dx;this.liveDependentants=0;this.fetchIssued=!1;this._result=new ZQ;Ll(r.length>0),Ll(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>LU.deserialize(r)),e.activeDocumentIdx,[],MU.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},LU=class t{constructor(e,r,n,i,o,a,c,l,u,f,p,m,h=i.length,g=new qr(1,i.length+1),A=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=f;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=A;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:qr.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new du(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(ay.create(e.id),e.workspaceRoot?Jw.parse(e.workspaceRoot):void 0,GR.create(e.languageId),e.documentLinesBeforeEdit,ms.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?ir.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new du(e.documentBeforeEdits),T1.deserialize(e.recentEdits),new du(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,qr.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Zi=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=hs.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=hs.ok(e),i=r.build(n);return new t(n,i)}},Xw=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?eft(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:g7(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Ll(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function dmr(t,...e){let r=t;for(let n of e)r=n(r);return r}s(dmr,"chainStatelessNextEditProviders");var C8=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=dmr(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},v8=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Zi(hs.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=zne.createSortPermutation(a,Ih(u=>u.lineRange.startLineNumber,Th)),l=new ms(c.apply(a));return new Zi(hs.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},x8=class extends v8{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},E8=class extends v8{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};d();d();var fmr=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),pmr=new Map(Object.entries(fmr).map(([t,e])=>[t,{languageId:t,...e}]));function aft(t){return jSe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(aft,"getLanguage");function jSe(t){return pmr.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(jSe,"_getLanguage");d();var b8=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?G0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new G0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new G0(new is(0,0),new is(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!G0.isRange(e))throw Zw("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw Zw("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw Zw("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var is=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw Zw("line must be non-negative");if(r<0)throw Zw("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw Zw();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw Zw();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},G0=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?is.isPosition(e.start)&&is.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new is(e,r),a=new is(n,i)):is.isPosition(e)&&is.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):is.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=is.Max(e.start,this._start),n=is.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=is.Min(e.start,this._start),n=is.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw Zw();let n;return e?is.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return mmr(this)}};function Zw(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(Zw,"illegalArgument");function mmr(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(mmr,"getDebugDescriptionOfRange");d();function cft(t){let r=t.split(/\r?\n/).map(hmr),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(cft,"looksLikeCode");function hmr(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),axe(t)||(e+=1);{axe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(hmr,"guessLineType");var I8;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(I8||={});function gmr(t){return t.replace(/^\s+/g,"")}s(gmr,"trimLeadingWhitespace");function GSe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(GSe,"isImportStatement");var Amr=new Bx(t=>{let e=aft(t),{start:r,end:n}=e.lineComment,i=`(?:${k3(r)})`,o=n?`(?:${k3(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function VSe(t,e){let r=t.match(Amr.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=gmr(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(VSe,"extractEndLineComment");function Tie(t,e){let r=VSe(t,e);if(!(r&&r.content.trim().length>0&&cft(r.commentWithoutTokens)))return r}s(Tie,"extractExplicativeEndLineComment");var T8=class t extends v8{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>GSe(i,r))||ymr(e,n).some(i=>GSe(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function ymr(t,e){return ZVe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(ymr,"getOldLines");d();var KSe=Ne($c());d();d();d();var cy;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(cy||={});var P1=V0("instantiationService");function Cmr(t,e,r){e[cy.DI_TARGET]===e?e[cy.DI_DEPENDENCIES].push({id:t,index:r}):(e[cy.DI_DEPENDENCIES]=[{id:t,index:r}],e[cy.DI_TARGET]=e)}s(Cmr,"storeServiceDependency");function V0(t){if(cy.serviceIds.has(t))return cy.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Cmr(e,r,i)},"id");return e.toString=()=>t,cy.serviceIds.set(t,e),e}s(V0,"createDecorator");d();d();var lm=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};d();var zSe=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},FU=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new zSe(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};d();var zk=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var vmr=!1,wie=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},Sie=class t{constructor(e=new zk,r=!1,n,i=vmr){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(P1,this),this._globalGraph=i?n?._globalGraph??new FU(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,iX(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)uze(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=OU.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw JVe("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof lm?(n=OU.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=OU.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=cy.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof lm)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof lm?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new FU(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new wie(i);for(let u of cy.getServiceDependencies(l.desc.ctor)){let f=this._getServiceInstanceOrDescriptor(u.id);if(f||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),f instanceof lm){let p={id:u.id,desc:f,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new wie(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof lm){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof lm)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var OU=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,f,p]of a._dep)if(f&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let m=n(o+1,p);m&&c.push(m)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var _ie=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new zk(...e):e??new zk}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new Sie(this._collection,!0)}};var kie=V0("ITelemetrySender"),ly=V0("IChatMLFetcher");var Rie=class{constructor(){this._stream=new ine;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},Pie=V0("IEndpointProvider");d();var CE=V0("IParserService");d();var w8=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},QU=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},UU=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},eS=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},tS=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var Die=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new w8(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},qU=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let f;return n<=i?(eS.Assert(e===r+1,"originalStart should only be one more than originalEnd"),f=[new w8(e,0,n,i-n+1)]):e<=r?(eS.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[new w8(e,r-e+1,n,0)]):(eS.Assert(e===r+1,"originalStart should only be one more than originalEnd"),eS.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let f=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(f,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,f,p,m,h,g,A,y,E){let b=null,S=null,R=new Die,B=r,L=n,O=h[0]-y[0]-i,Y=-1073741824,V=this.m_forwardHistory.length-1;do{let z=O+e;z===B||z<L&&u[z-1]<u[z+1]?(p=u[z+1],g=p-O-i,p<Y&&R.MarkNextChange(),Y=p,R.AddModifiedElement(p+1,g),O=z+1-e):(p=u[z-1]+1,g=p-O-i,p<Y&&R.MarkNextChange(),Y=p-1,R.AddOriginalElement(p,g+1),O=z-1-e),V>=0&&(u=this.m_forwardHistory[V],e=u[0],B=1,L=u.length-1)}while(--V>=-1);b=R.getReverseChanges(),R=new Die,B=a,L=c,O=h[0]-y[0]-l,Y=1073741824,V=E?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let z=O+o;z===B||z<L&&f[z-1]>=f[z+1]?(p=f[z+1]-1,g=p-O-l,p>Y&&R.MarkNextChange(),Y=p+1,R.AddOriginalElement(p+1,g+1),O=z+1-o):(p=f[z-1],g=p-O-l,p>Y&&R.MarkNextChange(),Y=p,R.AddModifiedElement(p+1,g+1),O=z-1-o),V>=0&&(f=this.m_reverseHistory[V],o=f[0],B=1,L=f.length-1)}while(--V>=-1);return S=R.getChanges(),this.ConcatenateChanges(b,S)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,f=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,A=new Int32Array(g),y=new Int32Array(g),E=i-n,b=r-e,S=e-n,R=r-i,L=(b-E)%2===0;A[E]=e,y[b]=r;for(let O=1;O<=h/2+1;O++){let Y=0,V=0;u=this.ClipDiagonalBound(E-O,O,E,g),f=this.ClipDiagonalBound(E+O,O,E,g);for(let z=u;z<=f;z+=2){z===u||z<f&&A[z-1]<A[z+1]?c=A[z+1]:c=A[z-1]+1,l=c-(z-E)-S;let Q=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(A[z]=c,c+l>Y+V&&(Y=c,V=l),!L&&Math.abs(z-b)<=O-1&&c>=y[z])return o[0]=c,a[0]=l,Q<=y[z]&&O<=1448?this.WALKTRACE(E,u,f,S,b,p,m,R,A,y,c,r,o,l,i,a,L):null}p=this.ClipDiagonalBound(b-O,O,b,g),m=this.ClipDiagonalBound(b+O,O,b,g);for(let z=p;z<=m;z+=2){z===p||z<m&&y[z-1]>=y[z+1]?c=y[z+1]-1:c=y[z-1],l=c-(z-b)-R;let Q=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(y[z]=c,L&&Math.abs(z-E)<=O&&c<=A[z])return o[0]=c,a[0]=l,Q>=A[z]&&O<=1448?this.WALKTRACE(E,u,f,S,b,p,m,R,A,y,c,r,o,l,i,a,L):null}if(O<=1447){let z=new Int32Array(f-u+2);z[0]=E-u+1,tS.Copy2(A,u,z,1,f-u+1),this.m_forwardHistory.push(z),z=new Int32Array(m-p+2),z[0]=b-p+1,tS.Copy2(y,p,z,1,m-p+1),this.m_reverseHistory.push(z)}}return this.WALKTRACE(E,u,f,S,b,p,m,R,A,y,c,r,o,l,i,a,L)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return tS.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],tS.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return tS.Copy(e,0,i,0,e.length),tS.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(eS.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),eS.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new w8(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};d();function lft(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(rut(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(lft,"safeStringify");var Bie=!1,XSe=!0,xmr=200,HU=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new Xw(e),i=e.getActiveDocument(),o=Kk(i);if(!o||!o.isEmpty())return Zi.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let S of e.documents)S.id!==i.id&&(l.push(`RELATED DOC: ${S.getDisplayPath()}`),l.push("```patch"),l.push(...wmr(S)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",f=new qr(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=f.endLineNumberExclusive){let S=p<c.length;l.push(`IN PROGRESS VERSION ${S?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),S&&(l.push(u),m={editRange:new qr(f.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,f.endLineNumberExclusive-1)),l.push("");let h=c.slice(f.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),h,r);if(r.isCancellationRequested)return Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Zi.noEdit({kind:"fetchFailure",error:new Error(lft(g.err))},n);let{result:A,ttft:y}=g.val;if(y!==void 0&&n.setTtft(y),A.trim().length===0)return Zi.noEdit({kind:"noSuggestions"},n);let E=Nie(i.languageId,c,f,void 0,A,m),b=await t_e(this._parserService,E,i,{requireEditWithinNLines:5});if(b){let S=new ms([b]);return Zi.edit({edit:S},n)}else return Zi.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};HU=af([Ea(1,CE)],HU);var S8=class extends HU{constructor(r,n){super(S8.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return hs.error({kind:"cancel"});let o=await ZSe(this.ID,this._chatMLFetcher,[{role:KSe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:KSe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),hs.ok({ignored:a,result:c,ttft:l})}};S8=af([Ea(0,CE),Ea(1,ly)],S8);async function ZSe(t,e,r,n,i){let o=new Rie,a=!1,c,l=o.stream.map(A=>({choices:[{index:0,finish_reason:null,logprobs:null,text:A.delta.text}]})),u=bmr(l,n),f=e.fetchOne(r,async(A,y,E)=>(typeof c>"u"&&(c=Date.now()),o.update(A,E),a?A.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await f}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await f;return g.type!=="success"?hs.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):hs.ok({ttft:c,ignored:p,result:m})}s(ZSe,"fetchUntilConvergence");function Kk(t){let e=new Vt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:Emr(t)}s(Kk,"getOrDeduceSelectionFromLastEdit");function Emr(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new ir(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=Nx(a,o),l=o.length-c+1;return new ir(i,l,i,l)}s(Emr,"deduceSelectionFromLastEdit");async function bmr(t,e){let r=Imr(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],f=[],p=s(m=>{let h=l[0];return{ignored:c[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){c[m.index]=(c[m.index]??"")+m.text;continue}let h=m.text;if(l[m.index]=l[m.index]??"",l[m.index]+=h,f[m.index]=f[m.index]??"",f[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=l[m.index];if(n.startsWith(g))continue;let A=g.split(`
`).slice(-4,-1);if(A.length<3||n.indexOf(A.join(`
`)+`
`)<=0)continue;let E=f[m.index].substring(f[m.index].length-o);if(a.indexOf(E)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(bmr,"fetchCompletionUntilConvergence");function Imr(t,e){let r=[],n=[];return new eU(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(Imr,"getTextAfterFirstPattern");function Tmr(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new ey(new qr(n,i),o)}s(Tmr,"createReducedLineEdit");var _8=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=Tmr(r,n,i);let o=new ms([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let A=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),y=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),E=A.join(`
`),b=y.join(`
`),{editDistance:S}=f(E,b);return new YSe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,S)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new QU(this.oldLines,n),o=new QU(this.newLines,n),a=new qU(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let m of c)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(e3(this.newLines,u))return new JSe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return dft(this.languageId,this.oldLines,u);function f(p,m){let h=new UU(p),g=new UU(m),y=new qU(h,g).ComputeDiff(),E=0,b=0;for(let L of y)E+=L.originalLength,b+=L.modifiedLength;let S=p.length,R=m.length,B=E+b;return{aChanged:E,bChanged:b,aLength:S,bLength:R,editDistance:B}}}},YSe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},JSe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new ms([this.edit]);{let r=this.groupInHunks();return new ms(r.map(n=>{let i=n[0],o=n[n.length-1];return new ey(new qr(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!XSe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>xmr&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!e_e(new qr(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new ms([this.edit]),i=r(n);this.parseErrorCount=await $U(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,1),e(f)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o,1),e(f)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let f of e){if(f.trim().length===0)continue;let p=Tie(f,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>Tie(l,this.languageId)),i=r.map(l=>Tie(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],f=i[l];if(!f)continue;let{content:p}=f;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return dft(this.languageId,this.oldLines,e)}};function e_e(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(e_e,"editIsInsideEditWindow");function dft(t,e,r){let i=e.length+1,o=r.slice(0);return new _8(t,e,new qr(1,i),o).resolveDiff()}s(dft,"createPossibleEditFromLines");function Nie(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=I8.fromString(i.trimEnd()),c=o?a.some(y=>y.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((y,E)=>{l.push(new _8(t,e,y,E))},"generateEdit");function f(){n&&u(n,a)}s(f,"generateEditCompletionRange");function p(){if(c)return;let E=new qr(r.endLineNumberExclusive,e.length+1);E.length>a.length+5||u(E,a)}s(p,"generateEditAllDoc");function m(){for(let y=1;y<a.length;y++){let b=a.slice(a.length-y).join(`
`);for(let S=r.endLineNumberExclusive-1;S<e.length;S++){let B=e.slice(S,S+y).join(`
`);b===B&&u(new qr(r.endLineNumberExclusive,S+1),a.slice(0,a.length-y))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!c)return;let y=[];for(let E of a){if(E.indexOf(o.omittedMessage)>=0){u(o.editRange,y.map(b=>b));return}y.push(E)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),f(),h(),p(),m(),!i.endsWith(`
`)){let y=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...Nie(t,e,r,n,y,o))}return g(l);function g(y){return A(y,s(b=>b.edit.lineRange.startLineNumber+","+b.edit.lineRange.endLineNumberExclusive+","+b.edit.newLines.join("|"),"keyfn"))}function A(y,E){let b=new Set,S=[];for(let R of y){let B=E(R);b.has(B)||(b.add(B),S.push(R))}return S}}s(Nie,"generatePossibleEdits");async function t_e(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=Bie?await $U(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(Bie){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let f=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>f(p)-f(m)),u.length>0?u[0].edit:null}s(t_e,"selectBestEdit");function wmr(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(wmr,"summariseDocDiff");function fft(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(fft,"summarizeEditsAsUnifiedDiff");async function $U(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s($U,"getParseErrorCount");d();var vE=Ne($c());d();var WU=V0("ITokenizerProvider");var rS=class extends vE.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(WU);return new rS(n,i,o,c,r,a.get(ly))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],f=o.messages[l-1];if(u.role===vE.Raw.ChatRole.System&&f.role===vE.Raw.ChatRole.System){let p=f.content.at(-1),m=u.content.at(0);p&&m&&p.type===vE.Raw.ChatCompletionContentPartKind.Text&&m.type===vE.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,f.content=f.content.concat(u.content.slice(1))):(f.content.push({type:vE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),f.content=f.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==vE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};rS=af([Ea(3,WU),Ea(4,P1),Ea(5,ly)],rS);d();var pft=Ne($c());var Mie=class extends pft.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};d();var r_e=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Vt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new G0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},uy=class extends r_e{constructor(r){super();this.value=r;this._transformer=new Qk(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new Ur(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return Smr(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(_mr(r))}_validatePosition(r){if(r.line<0)return new is(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new is(n-1,o)}if(r.character<0)return new is(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new is(r.line,i):r}};function Smr(t){return new is(t.lineNumber-1,t.column-1)}s(Smr,"corePositionToVSCodePosition");function _mr(t){return new Ur(t.line+1,t.character+1)}s(_mr,"vsCodePositionToCorePosition");d();d();function mft(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(mft,"min");d();function n_e(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>n_e(n,e))}}s(n_e,"toAstNode");function hft(t,e){let r=XB(e,a=>a.endExclusive>=t.start),n=_A(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Vt(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Vt(o,t.endExclusive)),i}s(hft,"subtractRange");d();d();d();var Lie=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=VR(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=VR(e),r=VR(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=VR(e),r=VR(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=VR(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new i_e(i,e-a)}};var i_e=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var jU=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Nh(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new Lie(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Nh(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new is(r.index,Math.min(r.remainder,n))}toRange(e){return new G0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Vt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new b8(this.validateRange(n.range),n.newText));return new Zh(r.map(n=>new Al(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new b8(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof is))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new is(r,n):e}validateRange(e){return new G0(this.validatePosition(e.start),this.validatePosition(e.end))}};var Fie=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Bh(()=>new jU(this.text));this._originalPositionOffsetTransformer=new Bh(()=>new jU(this.originalText));this._text=new Bh(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var o_e=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},Jk=class extends Fie{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function Qie(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:f}=r[c],p=l.getText(),m=f?l.rangeToOffsetRange(f):void 0,h=gft(u,l),g=s_e.fromRootNode(h,p),A=a_e.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&A.visitAll(O=>O.node.range.intersectsOrTouches(m)?(O.node.children.length===0&&O.markAsSurviving(),!0):!1),n.push(A),i.push(A.getTextFragment());let y=s(O=>m?O.range.endExclusive<m.start?m.start-O.range.endExclusive:O.range.start>m.endExclusive?3*(O.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),E=new Bx(O=>m?O.children.length===0?O.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:mft(O.children.map(Y=>E.get(Y)))+1:0),b=new Bx(O=>{let Y=O.parent?b.get(O.parent):Number.MAX_SAFE_INTEGER,V=E.get(O);return Math.min(Y,V)}),S=!!e.tryPreserveTypeChecking,R=s(O=>S&&O.node?.kind==="import_statement"?0:100*b.get(O)+O.depth+10*(y(O)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(B!==void 0){let O=R;R=s(Y=>{let V=O(Y);return V===!1?!1:Y.node?B(Y.node,V,l):V},"costFn")}let L=A.getDescendantsAndSelf();for(let O of L){if(!O.node.node)continue;let Y=R(O.node);Y!==!1&&o.push({idx:c,node:O,cost:Y})}}o.sort(Ih(c=>c.cost,Th));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((f,p)=>f+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],f=new Jk(u,l.toTextEditFromOriginal(u.getText().length)),p=f,m=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:f.originalText,decorations:hft(Vt.ofLength(f.originalText.length),f.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:n_e(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(f)}return a}s(Qie,"summarizeDocumentsSyncImpl");function gft(t,e,r=void 0){let n=new Vt(t.startIndex,t.endIndex),i=[],o=new o_e(r,t,n,i,e);for(let a of t.children)i.push(gft(a,e,o));return o}s(gft,"createRemovableNodeFromOverlayNode");var s_e=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Vt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Vt(0,e.range.start),o=new Vt(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let f=new Vt(c,u.range.start);f.isEmpty||o.push(new t(void 0,f,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Vt(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return Rmr(this.document,this.range)}getTrailingWs(){return kmr(this.document,this.range)}};function Rmr(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(Rmr,"getLeadingWs");function kmr(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(kmr,"getTrailingWs");var a_e=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new nS(this.node.range,this.node.document);if(!this._surviving)return new Yk("");let e=Array.from(MR(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof nS&&c.fragment instanceof nS){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new Yk(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new Yk(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)Pmr(r,i.fragment);return Oie.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},GU=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new Al(new Vt(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof Oie)for(let l of c.fragments)a(l);else c instanceof Yk?i+=c.text:c instanceof nS&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new Zh(r)}},Yk=class extends GU{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},nS=class t extends GU{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Vt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Vt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Vt(this.range.start,r.range.endExclusive),this.originalText):null}},Oie=class t extends GU{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new Yk(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function Pmr(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof nS&&e instanceof nS){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(Pmr,"pushFragment");d();var Uie=Ne($c());function VU(t){if(Array.isArray(t))return t.map(r=>VU(r));let e=(0,Uie.toMode)(Uie.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(VU,"rawMessageToCAPI");d();d();var qie=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new xn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new xn("Invalid child startIndex");if(a.endIndex>r)throw new xn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function yft(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=Dmr(o,e),[c]=Cft(t,a,void 0);return c.adjust(t,vft(e)),c.toOverlayNode(t,!0)}catch{return new Hie(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(yft,"getStructureUsingIndentation");function Cft(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=Cft(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new xn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new xn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new Hie(n,i,o),r]}s(Cft,"createFoldingRangeTree");var Hie=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new xn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=c_e(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=c_e(e,o,o,"LINE",[]);a&&n.push(a)}return c_e(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function c_e(t,e,r,n,i){let o=t.getOffsetAtPosition(new is(e-1,0)),a=r<t.getLineCount()?new is(r,0):new is(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new qie(o,c,n,i)}s(c_e,"createOverlayNode");function Dmr(t,e){return Bmr(t,vft(e))}s(Dmr,"generateFoldingRegions");function vft(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(vft,"isOffSide");function Bmr(t,e){let r=t.getOptions().tabSize,n=new l_e,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=Mmr(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let f=u.endAbove-1;f-a>=1&&n.insertFirst(a,f,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s(Bmr,"_computeRanges");var Nmr=65535,Xk=16777215,Aft=4278190080,l_e=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>Xk||r>Xk)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new u_e(e,r)}};function Mmr(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(Mmr,"computeIndentLevel");var u_e=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>Xk||a>Xk)throw new Error("startLineNumber or endLineNumber must not exceed "+Xk);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Xk}getEndLineNumber(e){return this._endIndexes[e]&Xk}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&Aft)>>>24)+((this._endIndexes[e]&Aft)>>>16);return r===Nmr?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};d();function Zk(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(Zk,"fromUnknown");var Ql=Ne($c());var $ie="current-version",eP="next-version",Eft=2,bft=10,Ift=.7,Lmr=/```[^\n]*\n/,iS=class extends C8{constructor(r,n,i){super(iS.ID,[o=>new T8(o),o=>new x8(o),o=>new E8(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new Vne}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=Kk(a),u=l?d_e(a,l):null,f=Kk(c),p=f?d_e(c,f):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(Eft,bft)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new Xw(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return Zi.noEdit({kind:"unexpected",error:Zk(l)},i)}let c=o.getArtificalDelay();return c>0&&await iE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Zi.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Zi.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Zi.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let R={kind:"gotCancelled",message:"afterDebounce"};return Zi.noEdit(R,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:f,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:A,activeDocumentLines:y}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let E=await ZSe(this.ID,this.fetcher,VU(p),{convergence:g,ignoreReplyTextBefore:Lmr,maxCompletionLineCount:f,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(E.isOk()?"success":E.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),E.isOk()&&typeof E.val.ttft=="number"&&o.setTtft(E.val.ttft),i.isCancellationRequested)return Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(E.isError())return E.err.kind==="cancel"?Zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Zi.noEdit({kind:"fetchFailure",error:Zk(E.err.err)},o);let b=E.val.result;if(b.length===0){let R=`<${eP}>
`,B=E.val.ignored.indexOf(R);B>=0&&(b=E.val.ignored.substring(B+R.length))}if(b=Fmr(b),b.trim().length===0)return Zi.noEdit({kind:"noSuggestions"},o);let S;if(c&&l&&u){let R=Omr(A,c,l,b);if(!R||R.edits.length===0)return Zi.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=Qmr(c,R);if(B.edits.length===0)return Zi.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Bie){let Y=await $U(this._parserService,A.languageId,A.documentAfterEditsNoShortening.value),V=B.apply(A.documentAfterEditsNoShortening.value);if(await $U(this._parserService,A.languageId,V)>Y)return Zi.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}S=Umr(A,B);let L=S.edits[0].lineRange.startLineNumber,O=S.edits[S.edits.length-1].lineRange.endLineNumberExclusive;if(!e_e(new qr(L,O),u))return Zi.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let R=Nie(A.languageId,y,m,h,b,void 0),B=await t_e(this._parserService,R,A,{requireEditWithinNLines:100});if(!B)return Zi.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);S=new ms([B])}return qmr(A,S)?Zi.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):Hmr(A,S)?Zi.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):$mr(A,S)?Zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Wmr(A,S)?Zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Zi.edit({edit:S},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await iE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=Kk(i);if(l===null)return;let u=d_e(i,l),f=new uy(i.documentAfterEditsNoShortening.value),p=await Vmr(this._parserService,{getText:s(()=>f.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let V=jmr(i.documentAfterEditsLines,l.startLineNumber),z=Math.max(1,Math.min(V,l.startLineNumber-Eft)),Q=l.startLineNumber-z,U=Math.min(c.length,l.endLineNumber+bft),Z=U-l.endLineNumber,J=u.line-Q,j=u.line+Z,$=new G0(J,0,j,f.getLineLength(j));return{firstEditableLineInShortenedDocument:z,lastEditableLineInShortenedDocument:U,editWindow:$}}(),A=Qie(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:f,selection:g}])[0],y=new qr(1,m),E=new qr(m,h+1),b=A.text,{messages:S,prediction:R,editWindowIsInPrompt:B}=await this._renderPrompt({request:r,activeDocumentSlice:b,languageId:i.languageId},n),L=b.split(/\r\n|\r|\n/).length,O=A.projectRange(g),Y=A.positionOffsetTransformer.toOffsetRange(O);return{summarizedEditWindow:A,editWindowAllowedEditLineRange:new qr(O.start.line+1,O.end.line+2),allowedEditLineRange:new qr(m,h+1),messages:S,prediction:R,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:c,completionPrefixRange:y,completionRange:E,convergence:b,expectedConvergencePrefix:Y.start,maxCompletionLineCount:L+20}}async _renderPrompt(r,n){let o=await rS.create(this._instantiationService,p_e,r).render(void 0,n,{trace:!1}),a=o.metadata.get(zie)?.prediction,c=!!o.metadata.get(jie);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};iS=af([Ea(0,ly),Ea(1,CE),Ea(2,P1)],iS);function Fmr(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${eP}>`,`
`),t=e(t,`\`\`\`
</${eP}>`,`
`),t=e(t,`</${eP}>`,`
`),t}s(Fmr,"removeSuffixFromReply");function d_e(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new uy(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(d_e,"getCursorPositionInOuterDocument");function Omr(t,e,r,n){let i=I8.fromString(e.text),o=I8.fromString(n.trimEnd()),c=new _8(t.languageId,i,new qr(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=XSe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(Omr,"generateSummarizedEditWindowEdit");function Qmr(t,e){let r=e.toEdit(new du(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(Qmr,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Umr(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Ma.replace(new Vt(a,a+i.replaceRange.length),i.newText)}),n=new Wd(t.documentAfterEdits,pa.create(r));return ms.fromEdit(n)}s(Umr,"convertOuterDocumentEditToProjectedEdit");function qmr(t,e){let r=e.toEdit(t.documentAfterEdits),n=Tft(t.documentAfterEdits.value,r),i=new Wie,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(Tft(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(qmr,"editWouldUndo");function Hmr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!kft(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(Hmr,"editWouldDeleteWhatWasJustInserted");function $mr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!kft(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(VSe(i,t.languageId))return!0}return!1}s($mr,"editWouldDeleteAComment");function Wmr(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return f_e(o,i)/i.size>.8}s(Wmr,"editWouldDuplicateExistingLines");function kft(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(kft,"editIsDeletion");function jmr(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(jmr,"findLineNumberAboveWithContent");var Wie=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(Sft(this.inserted,e.inserted),Sft(this.deleted,e.deleted))}isUndoneBy(e){let r=_ft(e.inserted,e.deleted),n=_ft(e.deleted,e.inserted),i=f_e(n,this.inserted),o=f_e(r,this.deleted);return n.size>6&&i/n.size>Ift||r.size>6&&o/r.size>Ift}};function Tft(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of wft(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of wft(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(Gmr(c.newText,l.newText)))}return new Wie(r,n)}s(Tft,"getInformationDelta");function Gmr(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(Gmr,"trimOverlap");function wft(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(wft,"to4grams");function Sft(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(Sft,"setUnion");function _ft(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(_ft,"setMinus");function f_e(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(f_e,"setIntersectionCount");async function Vmr(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||yft(new uy(e.getText()),e.languageId,void 0)}s(Vmr,"getStructure");var p_e=class extends Ql.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${eP}>`,`\`\`\`${o}`,`${i}`,"```",`</${eP}>`].join(`
`),c=(0,Ql.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new zie(a)}),vscpp(Ql.SystemMessage,{priority:1e3},vscpp(Mie,null),this._getInstructions()),vscpp(Ql.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(Ql.Chunk,{priority:300},vscpp(Gie,{doc:l}))):vscpp(Ql.Chunk,{priority:100+u},vscpp(Gie,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(Ql.Chunk,{priority:300},vscpp(Vie,{doc:l}))):vscpp(Ql.Chunk,{priority:200+u},vscpp(Vie,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(Ql.Chunk,{priority:300},vscpp("meta",{local:!0,value:new jie}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",$ie,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",$ie,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",$ie,"> and </",$ie,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",eP,">.")}},jie=class extends Ql.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Gie=class extends Ql.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Vie=class extends Ql.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...fft(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},zie=class extends Ql.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};d();d();function Pft(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(Pft,"findIndexes");function zmr(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=Pft(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],A=r[p];if(g===A)h--,p--;else if(A.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],f=Pft(t,e[c]).slice(-n).reverse();for(let p of f){let m=!1,h=c;for(;h<e.length&&p<t.length;){let g=e[h],A=t[p];if(g===A)h++,p++;else if(A.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...l]}return e}s(zmr,"deduplicateEditRegion");function Dft(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:zmr(i,r.split(/\r?\n/),o).join(`
`)}}s(Dft,"postProcessUpdatedEditWindow");d();var Kie=Ne($c());function Bft(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Kie.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Kie.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(Bft,"getTextPart");function Kmr(t){return{type:Kie.Raw.ChatCompletionContentPartKind.Text,text:t}}s(Kmr,"toTextPart");function m_e(t){return[Kmr(t)]}s(m_e,"toTextParts");d();var Yie=V0("IDiffService");var C_e=Ne($c());d();var Jie="<|cursor|>",tP="<|code_to_edit|>",R8="<|/code_to_edit|>",Mft="<|area_around_code_to_edit|>",Lft="<|/area_around_code_to_edit|>",Ymr="<|current_file_content|>",Jmr="<|/current_file_content|>",Xmr="<|edit_diff_history|>",Zmr="<|/edit_diff_history|>",ehr="<|recently_viewed_code_snippets|>",thr="<|/recently_viewed_code_snippets|>",rhr="<|recently_viewed_code_snippet|>",nhr="<|/recently_viewed_code_snippet|>",Fft=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${tP} and ${R8} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Jie}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${tP} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${tP} and ${R8} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${tP} or ${R8} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Oft(t,e,r,n){let i=t.getActiveDocument(),o=shr(t,n),a=ihr(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${ehr}
${o}
${thr}

${Ymr}
current_file_path: ${c}
${e}
${Jmr}

${Xmr}
${a}
${Zmr}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Jie}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${tP}\` and \`${R8}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(Oft,"getUserPrompt");function ihr(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=ohr(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(ihr,"getEditDiffHistory");function ohr(t){let e=[],r=ms.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(ohr,"generateDocDiff");function Nft(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[rhr,n,e,nhr].join(`
`)}s(Nft,"formatCodeSnippet");function shr(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let f=a[u],p=f.content.split(/\r?\n/);n&&(p=p.map((y,E)=>`${E+1}|${y}`));let m=p.map(y=>e(y)+1),h=e(Nft(f.path,"",!0)),g=m.reduce((y,E)=>y+E,0)+h,A=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=m.pop()||0,A=!0;p.length>0&&(l+=g,c.push(Nft(f.path,p.join(`
`),A)))}return c.join(`

`)}s(shr,"getRecentCodeSnippets");function h_e(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(h_e,"truncateCode");var Qft=2,Uft=10,g_e=15,A_e=1e3,y_e=2e3;var ng=class extends C8{constructor(r,n,i){super(ng.ID,[o=>new T8(o),o=>new x8(o),o=>new E8(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new Xw(r);try{if(r.xtabEditHistory.length===0)return Zi.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Zi(o,i.build(o))}catch(o){return Zi.noEdit({kind:"unexpected",error:Zk(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=Kk(o);if(a===null)return hs.error({kind:"uncategorized",error:Zk(new Error("NoSelection"))});let c=s(ae=>Math.floor(ae.length/4),"computeTokens"),l=new Ur(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),f=o.documentAfterEdits.value,p=f.substring(0,u)+Jie+f.substring(u),m=l.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-g_e),A=Math.min(h.length,m+g_e+1),y=Qft,E=Uft,b=Math.max(0,m-y),S=Math.min(h.length,m+E+1),R=o.documentAfterEdits.getTransformer().getOffsetRange(new ir(b,0,S,0)),B;B=f.split(/\r?\n/).slice(b,S);let L=[b,S],O=h.slice(b,S),Y=[Mft,...h.slice(g,b),tP,...O,R8,...h.slice(S,A),Lft].join(`
`),V=Y,z;{let ae=c(Y),te=0;if(ae>=y_e)z=Y,te=g;else{let pe=Math.floor((y_e-ae)/2),[Ae]=h_e(h.slice(0,g),!0,pe),[,Oe]=h_e(h.slice(A),!1,pe);te=Math.max(Ae,m-A_e);let Te=Math.min(Oe+A,m+A_e+1);z=[...h.slice(te,g),Y,...h.slice(A,Te)].join(`
`)}}let Q=Oft(r,z,V,c),U=[{role:C_e.Raw.ChatRole.System,content:m_e(Fft)},{role:C_e.Raw.ChatRole.User,content:m_e(Q)}];if(i.setPrompt(U),await this.debounce(i),n.isCancellationRequested)return hs.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let Z=new E3;i.setFetchStartedAt();let J,j=await this._endpointProvider.getEndpointInfo(this.ID),$=await this._chatMLFetcher.fetchOne(VU(U),async(ae,te,pe)=>{J===void 0&&(J=Z.elapsed())},{id:j.id,name:j.name},{temperature:0},n);if($.type==="canceled")return i.setFetchResultIfNotSet("cancelled"),hs.error({kind:"gotCancelled",message:"afterFetchCall"});if($.type==="quotaExceeded")return i.setFetchResultIfNotSet("failure"),hs.error({kind:"quotaExceeded"});if($.type!=="success")return i.setFetchResultIfNotSet("failure"),hs.error({kind:"fetchFailure",error:Zk($)});i.setFetchResultIfNotSet("success"),J&&i.setTtft(J),i.setResponse($.value);let X=ng.getBacktickSection($.value);return await this.generateReturnEditFormat(o,R,B.join(`
`),X,L,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=Dft(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),f=l.split(/\r?\n/),p=u.changes.map(m=>new ey(new qr(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),f.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?hs.error({kind:"noSuggestions"}):hs.ok({editWindow:n,edit:new ms(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,ng.DEBOUNCE_MS-n);r.setDebounceTime(i),await iE(i)}};ng=af([Ea(0,Yie),Ea(1,ly),Ea(2,Pie)],ng);d();var Xie=class t extends Ss{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new A7,Ph(this,r.openDocuments,(i,o)=>{o.add(Mx(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Ll(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,f=new Wd(u,c);if(l===void 0){this.pushToHistory(i.id,f);return}let p=l.entry.edit,m=ms.fromEdit(p),h=ms.fromEdit(f);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),A=new Wd(p.base,g);this.pushToHistory(i.id,A)}else this.pushToHistory(i.id,f)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};d();d();var v_e=Ne(require("crypto"));var zU=v_e.randomUUID.bind(v_e);var Kft=Ne($c()),T_e=Ne(vU());d();var Zie=V0("ISnippyService");d();d();var KU=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),eoe=65;function chr(t){let e=0,r;KU.lastIndex=0;do if(r=KU.exec(t),r&&(e+=1),e>=eoe)break;while(r);return e}s(chr,"lexemeLength");function lhr(t,e){let r=0,n;KU.lastIndex=0;do if(n=KU.exec(t),n&&(r+=1,r>=e))return KU.lastIndex;while(n);return t.length}s(lhr,"offsetFirstLexemes");function qft(t,e){let r=t.split("").reverse().join(""),n=lhr(r,e);return r.length-n}s(qft,"offsetLastLexemes");function x_e(t){return chr(t)>=eoe}s(x_e,"hasMinLexemeLength");d();d();var Hft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Hft||={});var E_e;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(E_e||={});var $ft;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Hft.is)}e.is=t,s(t,"is")})($ft||={});var b_e;(e=>{function t(r){if(E_e.is(r))return hs.error(r);if($ft.is(r))return hs.ok(r)}e.to=t,s(t,"to")})(b_e||={});var Wft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(Wft||={});var jft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(jft||={});var Gft;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Gft||={});var Vft;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Wft.is)&&"page_info"in r&&jft.is(r.page_info)&&"license_stats"in r&&Gft.is(r.license_stats)}e.is=t,s(t,"is")})(Vft||={});var I_e;(e=>{function t(r){if(E_e.is(r))return hs.error(r);if(Vft.is(r))return hs.ok(r)}e.to=t,s(t,"to")})(I_e||={});var toe=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,b_e.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,I_e.to)}async fetch(e,r,n){let i=this.ctx.get(Hr),o=await this.ctx.get($r).getToken(),a=Jm(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...vp(this.ctx),"X-GitHub-Api-Version":wB},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let f=await u.json();return n(f)}};var zft=new Ct("[CODE REFERENCING]"),k8=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(toe,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(Cr).getTextDocument({uri:e.toString()});if(!a){zft.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,f=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:A,license_stats:y}=g.val;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(f)).filter(h=>!!h);if(m.length===0){zft.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let A=Array.from(g).sort(),y=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,E={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:y,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:A.map(b=>({license:b,url:`${h.match.github_url}`}))};await this.ctx.get(Sf).handleIPCodeCitation(this.ctx,E)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=pa.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!x_e(l)){let m=a.value.slice(0,o.start),h=qft(m,eoe);c=h,l=a.value.slice(h,o.start+r.newText.length)}if(!x_e(l))return;let u=a.getTransformer(),f=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:f,endPosition:p}}};k8=af([Ea(1,P1)],k8);async function Yft(t){let e=new _ie;return e.define(kie,new w_e(t)),e.define(Yie,new $0),e.define(CE,new lm(S_e,[!0])),e.define(Zie,new lm(k8,[t])),e.define(ly,await R_e.Create(t)),e.define(WU,new lm(k_e)),e.define(Pie,new __e(t)),e.seal()}s(Yft,"createInstantiationService");var w_e=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=Gr.createAndMarkAsIssued(i,o);Bt(this.ctx,e,a)}},S_e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},__e=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==ng.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Mt).updateExPValuesAndAssignments();return{id:this.ctx.get(Mt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},R_e=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await Jo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=zU(),l=await this.ctx.get(w0).fetchAndStreamChat(this.ctx,a,fC.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,f)=>{if(r)return await r(u,0,{text:f.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let f=u.join("");return{type:"success",value:f}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:Bft(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},k_e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new roe("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new roe(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},roe=class{constructor(e){this.mode=Kft.OutputMode.Raw;this.tokenizer=Ni(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===T_e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===T_e.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};d();d();var noe=class extends Ss{constructor(r){super();this.workspace=r;this._garbageCollector=new B_e(20);this._documentCaches=new Map;Ph(this,r.openDocuments,(n,i)=>{let o=new P_e(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(Mx(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(Lc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},P_e=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new D_e(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},D_e=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},B_e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};d();d();d();var YU=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},ioe=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new YU("",null),this._tail=new YU("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new YU(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var ooe=class extends Ss{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new ioe(50);Ph(this,r.openDocuments,(n,i)=>{let o=new N_e(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(Mx(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(Lc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},N_e=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};d();var soe=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,f)=>u+f.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},P8=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:f,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:y,isShown:E,acceptance:b,logProbThreshold:S,documentsCount:R,editsCount:B,activeDocumentEditsCount:L,promptLineCount:O,promptCharCount:Y,isDefaultEndpoint:V,hadLowLogProbSuggestion:z,nonTerminatingError:Q,nEditsSuggested:U,kthEditPicked:Z,lineDistanceToMostRecentEdit:J,debounceTime:j,hasNextEdit:$,nextEditLogprob:X,maxLinesPerEdit:ie,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchTime:Oe,fetchResult:Te,fetchError:Je,fetchStartedAfterMs:Fe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:b,nonTerminatingError:Q,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchResult:Te,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(f),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(V),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:this._boolToNum(y),isShown:this._boolToNum(E),logProbThreshold:S,documentsCount:R,editsCount:B,activeDocumentEditsCount:L,promptLineCount:O,promptCharCount:Y,hadLowLogProbSuggestion:this._boolToNum(z),nEditsSuggested:U,kthEditPicked:Z,lineDistanceToMostRecentEdit:J,debounceTime:j,fetchStartedAfterMs:Fe,fetchTime:Oe,hasNextEdit:this._boolToNum($),nextEditLogprob:X,maxLinesPerEdit:ie})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};P8=af([Ea(0,kie)],P8);d();var D8=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var rP=!1,Jft=300,B8=class extends Ss{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new noe(this._workspace);this._nextEditCache=new ooe(this._workspace);this._recentlyShownCache=new F_e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Ph(this,this._workspace.openDocuments,(u,f)=>{f.add(sxe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(P8)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new soe(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??zU());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),f,p,m,h;if(l)f=l[0],h=l[1],p=a,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),await iE(Jft);else if(u)f=u.edit,h=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await iE(Jft);else{h=new L_e,c.setHeaderRequestId(h.headerRequestId);let y=o.value.get();p=y;let E=await this.fetchNextEdit(h,r,c,i),b=y.value!==o.value.get().value;if(E.isError())switch(E.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=E.err.error;break;default:g7(E.err)}else if(!b){let S=E.val;S.isEmpty()||(f=S.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||S.edits.length>1)&&this._nextEditCache.setNextEdits(r,S,h))}}if(c.markEndTime(),m)throw this._telemetrySender.sendTelemetry(c),m;if(!f)return this._telemetrySender.sendTelemetry(c),new D8(void 0);if(this._rejectionCollector.isRejected(r,f))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new D8(void 0);Ll(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",A=new D8({edit:f,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(A,c),f.isNeutral()||this._recentlyShownCache.add(r,a,[f,h]),A}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=pa.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=M_e(r.lastEdits.swap(c)),f=l.compose(),p=new Jk(new uy(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),m=new du(o.text),g=I1.fromEdit(new Wd(m,f)).removeCommonSuffixPrefixLines(),A=l.edits.at(-1)?.getNewRanges().at(0),y;A&&(y=new du(p.text).getTransformer().getRange(A));let E=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,b=this._workspace.getWorkspaceRoot(r.docId),S=s(O=>{let V=new I1(new du(p.text),O).toEdit();return Xft(V,p)},"toEditOnDocumentAfterEditsNoShortening"),R=s(O=>p.projectBack(O),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(O=>p.project(O),"toProjectedOffset"),L=new LU(r.docId,b,r.languageId,g.base.getLines(),g.edit,y,m,l,i,S,R,B,r.lastEdit.base.getTextLength().lineCount,a,E);return{recentEdit:r.lastEdit,nextEditDoc:L,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return hs.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=M_e(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(O=>this._shortenDocument(O,l))),f=u[c.idx],p=this._xtabHistoryTracker.getHistory(),m=new bie(r.headerRequestId,u.map(O=>O.nextEditDoc),c.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,A;if(h){g=h,rP&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let O=this._hookupCancellation(g,o);try{A=await g.result}finally{O.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let O=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let Y=this._hookupCancellation(g,o);try{A=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(A)}catch(V){throw g.setResultError(V),V}finally{Y.dispose(),O()}}i.setStatelessNextEditTelemetry(A.telemetry);let y=A.nextEdit;if(y.isError())return y;let E=y.val.edit;if(E.edits.length===0)return hs.error({kind:"noSuggestions"});let S=new I1(new du(f.projectedDocument.text),E).toEdit(),R=Xft(S,f.projectedDocument),B=S.edits.length===R.edits.length?y.val.permutation:void 0,L=R.decompose(B);return hs.ok(L)}_hookupCancellation(r,n){let i=new Zu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new ZN);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){rP&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){rP&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){rP&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}rP&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(Lc(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){pne(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new Jk(new uy(r.base.value),new Zh([])),clippedRange:new qr(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Vt(0,0)),o=qr.fromRange(i);function a(p,m){return new qr(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let c=new qr(1,n.textLength.lineCount+1),l=M_e(c.intersect(a(o,100))),u=qr.subtract(c,l);return{document:new Jk(new uy(r.base.value),new Zh(u.map(p=>Al.delete(n.getOffsetRange(new ir(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new MU("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await phr(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new uy(n.base.value),a=n.edit.edits.at(0)?.range??new Vt(0,0),c;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Vt(h.range.start,g.range.endExclusive))}let l=Zft(o.offsetRangeToRange(a)),u=Qie(1e4,{costFnOverride:s((h,g,A)=>{let y=Zft(A.offsetRangeToRange(h.range)),E=fhr(l,y);return E>100?!1:E},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],f=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(f).lineNumber,m=new qr(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};B8=af([Ea(4,CE),Ea(5,P1),Ea(6,Zie)],B8);function Xft(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return pa.fromOffsetEdit(r)}s(Xft,"projectBackEdit");function Zft(t){return new qr(t.start.line+1,t.end.line+1)}s(Zft,"lineRangeFromVSCodeRange");function fhr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(fhr,"lineRangeDist");async function phr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(phr,"getStructure");function M_e(t){if(!t)throw new xn("expected value to be defined, but it was not");return t}s(M_e,"assertDefined");var L_e=class{constructor(){this.headerRequestId=zU()}static{s(this,"NextEditFetchRequest")}},F_e=class{constructor(){this._cache=new t3(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};var e0t=10,dy=class{constructor(e){this.lastResultsById=new wr(e0t);this.lastResultsByUri=new wr(e0t);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=ay.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(Cr).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),f=l.positionAt(c.result.edit.range.endExclusive),p=Er(),m={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:f},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await Yft(this.ctx),r=!1;try{let a=await this.ctx.get(Mt).updateExPValuesAndAssignments();r=mhr(this.ctx,a)}catch(a){console.error("Error updating ExP values and assignments:",a)}let n=e.createInstance(r?ng:iS),i=this.ctx.get(NA),o=new wne(i);return await aR.catch(()=>{}),e.createInstance(B8,i,n,o,new Xie(i))}};function mhr(t,e){let r=zi(t,Ht.NESXTab);return r!==void 0?r:t.get(Mt).enableNESXTab(e)}s(mhr,"shouldUseXTab");d();var t0t=Ne(mi());var aoe=class extends NA{constructor(r){super();this._openDocuments=BA(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(Cr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=ay.create(r);return this.addDocument({id:o,initialValue:i,languageId:GR.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=ay.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=ay.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=ay.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new O_e(r.id,new du(r.initialValue??""),[],r.languageId??GR.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(Cr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},O_e=class extends EZ{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new Ur(e.lineNumber+1,e.column+1));this.updateSelection([new Vt(r,r)])}editFromLspContentChanges(e){return new T1(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(t0t.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new Ur(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new Ur(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new xn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return pa.replace(new Vt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};d();var fy=class{static{s(this,"AuthenticationService")}};d();var r0t=require("crypto"),D1=Ne(require("fs/promises")),n0t=require("os"),xE=Ne(require("path"));var EE=class{constructor(e){this.ctx=e;this.logger=new Ct("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=xE.extname(__filename)===".ts"?xE.resolve(__dirname,"../../../packages/ripgrep/bin"):xE.resolve(__dirname,"./bin"),o=xE.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await D1.readFile(o),c=(0,r0t.createHash)("sha256").update(a).digest("hex"),l=xE.join((0,n0t.homedir)(),".cache/pkg",c);await D1.mkdir(l,{recursive:!0});let u=Pi(kl(o)),f=xE.join(l,u);try{await D1.stat(f)}catch{await D1.copyFile(o,f),this.logger.debug(this.ctx,`Copied ripgrep to ${f}`)}o=f,e!=="win32"&&await D1.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};d();var i0t=require("child_process"),Q_e=require("perf_hooks");var bE=new Ct("ripgrepProcessManager"),py=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,bE.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){bE.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){bE.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){bE.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){bE.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}bE.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:ZA(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);bE.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=Q_e.performance.now();bE.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,i0t.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let f=Q_e.performance.now()-r;bE.debug(this.ctx,`Task ${e.id} completed in ${f} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};d();var N8=class extends VC{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};d();var o0t=100,s0t=1e3*60*5;function a0t(t){let e=new U_e(t);t.get(Qc).registerContextProvider(e),t.get(WC).add(e.id)}s(a0t,"registerRelatedFilesShim");var U_e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new Q_(o0t,s0t);this.relatedFilesCache=new Q_(o0t,s0t);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Mt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await _Z(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(f=>f.includeInPrompt).map(f=>f.promptTextOverride?{name:"OtherInformation",value:f.promptTextOverride}:f),u=new Set;for(let f of c.entries.values())for(let p of f.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){Cx(this.ctx,o,"relatedFilesShim")}}};d();d();d();var coe=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new Ka;this.onFileChange=this.emitter.event;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}emitFilesCreated(e){this.emitter.fire({type:"create",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesUpdated(e){this.emitter.fire({type:"update",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesDeleted(e){this.emitter.fire({type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var zd=class{constructor(e){this.ctx=e;this.watchers=new wr(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(en.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r,n,i){return this.getWatcher(e)?.onFileChange(eu(this.ctx,r,"WorkspaceWatcherProvider.onFileChange"),n,i)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var M8=class{static{s(this,"WorkspaceLifecycleListener")}start(){}didAddWorkspace(e){}didRemoveWorkspace(e){}didTerminateWorkspaceSubfolders(e,r){}didChangeFiles(e){}},hhr="workspaceLifecycleManager",Kd=new Ct(hhr),B1=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=Ps(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?Kd.debug(this.ctx,`listener ${e.constructor.name} is already started`):(Kd.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):Kd.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);Kd.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(nm).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Cr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){Kd.debug(r,"No workspaces to add.");return}Kd.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];Kd.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(f=>f.uri===c.uri)===l&&!u.some(f=>t.isSubfolder(c,f)));Kd.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));Kd.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));Kd.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){Kd.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(zd).terminateWatching(c);for(let u of this.activeListeners)Kd.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.didRemoveWorkspace(c)}for(let c of o){if(!c.uri)continue;Kd.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(zd);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){Kd.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(f=>f.uri).join(", ")}`);for(let f of this.activeListeners)await f.didTerminateWorkspaceSubfolders(c,u)}for(let f of this.activeListeners)Kd.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,f.didChangeFiles.bind(f))}}for(let c of this.activeListeners)for(let l of o)Kd.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.didAddWorkspace(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(zd).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.didRemoveWorkspace(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function loe(t){t.set(B1,new B1(t))}s(loe,"setupWorkspaceLifecycleListener");d();var l0t=require("child_process");var uoe=class extends eg{static{s(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,l0t.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){Fne.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getBranchInfo(e,r){let n=es(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(i!==void 0){let o=i.trim();return o?dE.branch(o):dE.detachedHead()}}extraArgs(){return[]}};d();var doe=class extends eg{static{s(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(Mi),i=Vi(r,".git","HEAD"),o=await n.readFileString(i);return this.parseHeadContent(o.trim())}catch(n){let i=typeof r=="string"?r:r.uri;Fne.info(e,`Failed to parse git HEAD file in ${i}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return dE.branch(r)}else return this.isCommitSha(e)?dE.detachedHead():dE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};d();d();var foe=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};d();d();d();d();var ghr=64;var sS={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},N1={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},q_e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,ghr)}},oS=class extends q_e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Li=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},nP=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},iP=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var go=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},u0t=x.Object({content:x.Array(x.Union([x.Object({value:x.String()}),x.Object({value:x.Unknown()})])),status:x.Optional(x.Union([x.Literal("success"),x.Literal("error"),x.Literal("cancelled")]))}),poe=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(poe||{}),d0t=x.Object({result:x.Enum(poe)});var ig=class extends oS{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:sS,type:"shared"})}};d();var Ahr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),yhr=new Map;for(let[t,e]of Ahr)yhr.set(e,t);d();function L8(t){return`[${Pi(t)}](${t})`}s(L8,"formatUriForFileWidget");function M1(t){let e=Chr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(M1,"resolvePathInput");function Chr(t){if(t.startsWith("/")||f0t()&&xhr(t)||f0t()&&t.startsWith("\\\\"))return kl(t)}s(Chr,"resolveFsUri");function f0t(){return process.platform==="win32"}s(f0t,"isWindows");function vhr(t){return t>=65&&t<=90||t>=97&&t<=122}s(vhr,"isWindowsDriveLetter");function xhr(t){return vhr(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(xhr,"hasDriveLetter");function JU(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Li?r.value:r instanceof iP?"":r instanceof nP?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(JU,"parseToolResultToString");function hoe(t){let{content:e}=t;return{message:JU(e)}}s(hoe,"formatToolErrorResult");function p0t(t){let{content:e}=t;return{data:e.map(r=>r instanceof Li?{type:"text",value:r.value}:r instanceof iP?{type:"text",value:"<unsupported>"}:r instanceof nP?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(p0t,"formatToolSuccessResult");var goe=class extends ig{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:x.Object({filePath:x.String({description:"The absolute path of the file to edit."}),code:x.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:x.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=M1(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new u8(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0,r.copilotEditsSessionHeader)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(xu).getToolByNameAndProvider("insert_edit_into_file",N1);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(xu).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;let a=wT({uri:M1(r.input.filePath),languageId:"UNKNOWN"});if(i){let f=await Oc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,f,a,o)})}let c=JU(n.content),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new om({code:c,languageId:a,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new go([new Li(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i,o){TX(e.ctx,"agentPanel",{requestSource:o?.requestSource??"",chatRequestModel:o?.chatRequestModel??"",mapper:o?.mapper??"",headerRequestId:o?.headerRequestId??"",mode:(e.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:e.turn.getResolvedModelId()??"unknown",languageId:i},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=M1(n.filePath);return{progressMessage:`Editing ${L8(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};d();var m0t=new Ct("findFilesTool"),Aoe=class t extends ig{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:x.Object({query:x.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:x.Optional(x.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new go([new Li("Cancelled")],"cancelled");i=await e.ctx.get(EE).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new go([new Li("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(py),u={},f=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{m0t.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let A=await l.execute(i,["--files","-g",o],n,{cwd:nc(g.uri)},t.timeOutInSeconds*1e3);m0t.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${A}`),u[g.uri.toString()]=A.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>`${nc(Vi(g.uri,y))}`)}catch(A){let y=A instanceof Error?A.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${y}`)}});try{await Promise.all(f)}catch(g){let A=g instanceof Error?g.message:"An unknown error occurred";return new go([new Li(A)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let A in u)u[A].length>0&&m>0&&(p.push(u[A].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new go([new Li(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};d();var h0t=new Ct("findTextInFilesTool"),yoe=class t extends ig{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:x.Object({query:x.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:x.Optional(x.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:x.Optional(x.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new go([new Li("Cancelled")],"cancelled");i=await e.ctx.get(EE).resolvePath()}catch(y){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(y)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new go([new Li("Failed to invoke tool grep_search since no workspace folders found")],"error");let f=e.ctx.get(py),p={},m=u.map(async y=>{if(n.isCancellationRequested)throw new Error("Canceled");try{h0t.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${y.uri.toString()}`);let E=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",nc(y.uri)],b=await f.execute(i,E,n,{cwd:nc(y.uri)},t.timeOutInSeconds*1e3);h0t.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${y.uri.toString()} with results: ${b}`),p[y.uri.toString()]=b.split(`
`).map(S=>S.trim()).filter(S=>S.length>0)}catch(E){let b=E instanceof Error?E.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${y.uri.toString()}: ${b}`)}});try{await Promise.all(m)}catch(y){let E=y instanceof Error?y.message:"An unknown error occurred";return new go([new Li(E)],"error")}let h=[],g=l;for(;g>0;){let y=!1;for(let E in p)p[E].length>0&&g>0&&(h.push(p[E].shift()),g--,y=!0);if(!y)break}let A=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new go([new Li(A)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};d();var voe=Ne(require("path"));var Coe=class extends ig{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:x.Object({path:x.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=e.turn.workspaceFolders,a=e.turn.workspaceFolder,c=M1(i);if(!this.isPathWithinWorkspace(c,o,a))return new go([new Li("Error: Path is outside of workspace folders")],"error");let u=await e.ctx.get(Mi).readDirectory(c.toString());return u.length===0?new go([new Li("Folder is empty")],"success"):new go([new Li(u.map(([f,p])=>`${f}${p&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=M1(e.input.path);return{progressMessage:`Reading directory ${L8(n)}`}}isPathWithinWorkspace(e,r,n){return!r&&!n?!0:r&&r.length>0?r.some(i=>this.isUriWithinDirectory(e,i.uri)):n?this.isUriWithinDirectory(e,n.uri):!1}isUriWithinDirectory(e,r){let n=es(e),i=es(r);if(!n||!i)return!1;let o=voe.relative(i,n);return o===""?!0:!o.startsWith("..")&&!voe.isAbsolute(o)}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};d();var xoe=class extends ig{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:x.Object({filePath:x.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:x.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:x.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=M1(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(En).getOrReadTextDocument({uri:c});if(u.status==="valid"){let f=new om({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new go([new Li(f.renderAsString(`
`))],"success")}else return new go([new Li(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new go([new Li(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=M1(n.filePath);return{progressMessage:`Reading file ${L8(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function g0t(){return[new Coe,new xoe,new goe,new Aoe,new yoe]}s(g0t,"getAllClsTools");var xu=class{constructor(e){this.ctx=e;this._toolRegistry=new foe;for(let r of g0t())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new Hc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new go([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new Hc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(sS.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(sS.id)?.splice(e.get(sS.id)?.indexOf(r)??0,1);let n=e.get(N1.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(N1.id)?.splice(e.get(N1.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(N1.id)??[],a=e.get(sS.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==sS.id&&l!==N1.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};d();d();var sP=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};d();var C0t=require("crypto"),H_e=require("fs"),$_e=Ne(require("path"));var A0t="symbolDatabaseLookup",y0t="multiLanguageContextProviderDocumentSymbols",aP=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(A0t,e);return r||(r=await this.createDBFile(e)),$_e.default.join(this.persistenceManager.directory,y0t,r)}async init(){let e=$_e.default.join(this.persistenceManager.directory,y0t);await this.createIfNotExists(e)}async dirExists(e){try{return await H_e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await H_e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,C0t.randomUUID)()}.db`;return await this.persistenceManager.update(A0t,e,r),r}async deleteDBFile(e){}};d();d();var XU=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};d();d();d();var Eoe=Ne(require("path")),v0t=require("worker_threads");function x0t(t,e){return new v0t.Worker(Eoe.default.resolve(Eoe.default.extname(__filename)!==".ts"?__dirname:Eoe.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(x0t,"createWorker");d();var boe=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var E0t=Ne(mi());var Ioe="main.js",Toe=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=x0t(Ioe,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new boe(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new eJ(this.id++),E0t.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new JY(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new XY(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new ZY(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new KY(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new YY(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new zY(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(Ioe+"'")&&(r=new Error(`Failed to load ${Ioe}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${Ioe} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var ZU=Ne(mi());var um=new Ct(jT),cP=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){um.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,ZU.CancellationToken.None);return}um.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new Toe(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{um.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await bhr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,ZU.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{um.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){um.debug(this.ctx,`indexing workspace ${e}`);let r=ACe.map(f=>`*${f}`);if(r.length===0)return;let i=`**/${ACe.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(Gp),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,ZU.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));um.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async f=>{let p=this.languageId(f);p&&await this.indexFile(f.replace(/\/+$/,""),p)})),um.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{um.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,ZU.CancellationToken.None)}catch(n){um.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return yje(e)}};async function bhr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(bhr,"createIndexableWorkspaceFolder");d();d();var b0t=100,Ihr=5e3,woe=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),f=this.get(n,i,r,u);if(f)return this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),f.value;if(!a)return e(r,n,i,o,c,l);let p=new mn.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,c,p.token);return f=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>b0t)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>Ihr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>b0t&&(u=r);let f={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{f.complete=!0}),refCount:0,cancel:a,uuid:Er(),complete:!1};return this.cachedValue=f}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var Soe=class{constructor(e){this.id=jT;this.selector=Array.from(NY.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Cr),this.resolver=new W_e(this.documentManager,e)}catch(r){throw um.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},W_e=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new woe}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(sP).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=KC(o,a);l=l.applyEdits(c);let u=SYe(e.activeExperiments),f=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return um.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${f.map(p=>JSON.stringify(p)).join(", ")}`),f}catch(o){if(CY(o))return[];throw um.error(this.ctx,"Failed to get context",o),o}}};var eq=class extends M8{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(B1).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Qc).providers.some(r=>r.id===jT)){let r=this.ctx.get(aP);this.fileWatcher=new j_e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new cP(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new G_e(this.ctx),this.ctx.set(XU,this.fileWatcher),this.ctx.set(Gp,this.fileSearch),this.ctx.set(cP,this.multiLanguageContextIndexWatcher),this.ctx.get(Qc).registerContextProvider(new Soe(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Mt).updateExPValuesAndAssignments(),n=$X(this.ctx,r);return n.includes(jT)||n.length===1&&n[0]==="*"}async didAddWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async didRemoveWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async didTerminateWorkspaceSubfolders(r,n){if(await this.isEnabled())return super.didTerminateWorkspaceSubfolders(r,n)}async didChangeFiles(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},j_e=class extends XU{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},G_e=class extends Gp{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(zd).getWatchedFiles(n)).map(a=>this.ctx.get(Cr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var V_e=class extends sP{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new eq(e),e.set(eq,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function I0t(t){let e=t.get(Ai),r=new aP(e);t.set(aP,r),t.set(sP,new V_e(t))}s(I0t,"setupMultiLanguageContextProviderFeature");d();d();d();var L1=new Map;L1.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});L1.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});L1.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});L1.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});L1.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});L1.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var whr=new Ct("sdk");function _oe(t,e){L1.has(t.get(hn).getEditorPluginInfo().name)||whr.warn(t,...e)}s(_oe,"deprecationWarning");var xCt=Ne(rB()),Am=Ne(TA());d();d();d();var tr={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var cd=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(T0t(e))}};function Ze(t,e){let r=Xs.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=T0t(r.Errors(o));return[null,{code:tr.InvalidParams,message:a}]}return e(n,i,o)}}s(Ze,"addMethodHandlerValidation");function T0t(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(T0t,"createErrorMessage");d();var z_e=Ne(mi());d();var F1=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var Roe="github.copilot.finishDeviceFlow",K_e=class extends F1{constructor(){super(...arguments);this.name=Roe;this.arguments=x.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(wf),o=i.pendingSignIn;if(!o)throw new z_e.ResponseError(tr.InvalidRequest,"No pending sign in");try{await this.ctx.get($u).open(o.verificationUri)}catch(a){xp.warn(this.ctx,"Failed to open",o.verificationUri),xp.exception(this.ctx,a,Roe)}try{return await o.status}catch(a){throw new z_e.ResponseError(tr.DeviceFlowFailed,String(a))}finally{i.pendingSignIn=void 0}}},w0t=[K_e];d();d();var $s=class extends wr{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var tq="github.copilot.didAcceptCompletionItem",Y_e=class extends F1{constructor(){super(...arguments);this.name=tq;this.arguments=x.Tuple([x.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get($s).get(n);return o?(F3(this.ctx,o),!0):!1}},S0t=[Y_e];d();var Shr="github.copilot.didAcceptNextEditSuggestionItem",J_e=class extends F1{constructor(){super(...arguments);this.name=Shr;this.arguments=x.Tuple([x.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(dy).handleAcceptance(n),!0}},_0t=[J_e];d();var Z_e="github.copilot.didAcceptPanelCompletionItem",X_e=class extends F1{constructor(){super(...arguments);this.name=Z_e;this.arguments=x.Tuple([x.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get($s).get(i);return a?(R7(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full",acceptedLength:a.displayText.length,acceptedLines:XR(a.displayText).length},a.copilotAnnotations),!0):!1}},R0t=[X_e];var _hr=[...w0t,...S0t,..._0t,...R0t];function k0t(t,e){let r=new Map;for(let n of _hr){let i=new n(t),o=Xs.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=IE(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new cd(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(k0t,"registerCommands");d();var og=class extends lR{constructor(r){super(new BB,new Map);this.envSettings=new Map;this.env={...r};let n;this.#e=new Promise(o=>{n=o}),this.markReady=n,["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(o=>{for(let a of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let c=`${a}${Rhr(o.replace(/^Debug/,""))}`;c in this.env&&this.envSettings.set(Ht[o],this.env[c])}})}static{s(this,"AgentConfigProvider")}#e;async requireReady(){await this.#e}getOptionalOverride(r){return super.getOptionalOverride(r)??this.envSettings.get(r)}};function Rhr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(Rhr,"camelCaseToSnakeCaseAllCaps");var khr="unknown-editor",P0t="unknown-editor-plugin",koe=class extends hn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:khr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:P0t,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function D0t(t){return t.getEditorPluginInfo().name!==P0t}s(D0t,"hasValidInfo");d();var TE=Ne(TA());var Phr=new Map([[4,TE.MessageType.Log],[3,TE.MessageType.Info],[2,TE.MessageType.Warning],[1,TE.MessageType.Error]]),Poe=class extends Jc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!hee(e)&&n!=="console")return;let o={type:Phr.get(r),message:zXe(n,...i)},a=e.get(Dr).connection;try{a.sendNotification(new TE.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof TE.ConnectionError)return;throw c}}};d();var B0t=Ne(ll());var Doe=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(Dr).connection.sendNotification(new B0t.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};function N0t(t){t.get(Dd).setCustomReporters(new Doe(t),new Doe(t,!0))}s(N0t,"setupRedirectingTelemetryReporters");d();d();var Boe=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Bt(e,"installed.reinstall"):Bt(e,"installed.new")}handleUpgrade(e){Bt(e,"installed.upgrade")}handleUninstall(e){Bt(e,"uninstalled")}};var rq=Ne(rB());var F8=class extends Boe{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(hn).getEditorPluginInfo();return await e.get(Ai).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Ai).listSettings()).length>0}async markInstalled(e){let r=e.get(hn).getEditorPluginInfo();await e.get(Ai).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(hn).getEditorPluginInfo(),n=await e.get(Ai).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,rq.gt)((0,rq.coerce)(r.version),(0,rq.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(hn).getEditorPluginInfo();await e.get(Ai).delete("versions",r.name),(await e.get(Ai).listKeys("versions")).length===0&&await e.get(Ai).deleteSetting("versions")}};d();var e2e=Ne(require("path")),Noe=Ne(ll());var Dhr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},O1=class t{constructor(e){this.ctx=e;this.#e=new Ka;this.onDidChangeWatchedFiles=this.#e.event}static{s(this,"LspFileWatcher")}#e;static{this.requestType=new Noe.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Dr).connection}init(){this.ctx.get(Cs).getCapabilities().watchedFiles&&this.connection.onNotification(Noe.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(Cs).getCapabilities().watchedFiles)return Dhr;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=e2e.extname(l).toLowerCase();if(!uR.includes(u)){c.push({uri:l});continue}let f=await this.getValidDocument(l);if(f===void 0){a.push({uri:l});continue}o.push(f)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=e2e.extname(o.uri).toLowerCase();if(!uR.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.#e.fire({workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(En).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};d();d();var Bhr=x.Object({providerName:x.String()});async function Nhr(t,e,r){try{let{providerName:n}=r,i=Pw(n);if(i!==0)return[null,{code:tr.InvalidParams,message:`deleteApiKey is only supported for providers with GlobalApiKey auth type. Provider ${n} has auth type: ${i}`}];let o=new Za(t.get(Ai));return await o.removeAllModelConfigs(n),await o.deleteAPIKey(n,i),[{success:!0,message:`API key and all model configurations deleted successfully for provider ${n}`},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to delete API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Nhr,"handleBYOKDeleteApiKeyChecked");var M0t=Ze(Bhr,Nhr);d();var Mhr=x.Object({providerName:x.String(),modelId:x.String()});async function Lhr(t,e,r){try{let n=new Za(t.get(Ai)),{providerName:i,modelId:o}=r,a=Pw(i);return await n.removeModelConfig(i,o),a===1&&await n.deleteAPIKey(i,a,o),[{success:!0,message:`Model ${o} deleted successfully for provider ${i}`},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to delete model: ${n instanceof Error?n.message:String(n)}`}]}}s(Lhr,"handleBYOKDeleteModelChecked");var L0t=Ze(Mhr,Lhr);d();var Fhr=x.Object({providerName:x.Optional(x.String()),modelId:x.Optional(x.String())});async function Ohr(t,e,r){try{let n=new Za(t.get(Ai)),{providerName:i,modelId:o}=r;if(!i){let c=t.get(Ai),l=await c.listKeys("byok"),u=[];for(let f of l)if(f.endsWith("-api-key")){let p=await c.read("byok",f);if(p){let h=f.replace("-api-key","").split("-");if(h.length===1)u.push({providerName:h[0],apiKey:p});else if(h.length>=2){let g=h[0],A=h.slice(1).join("-");u.push({providerName:g,modelId:A,apiKey:p})}}}return[{apiKeys:u},null]}return[{apiKeys:[{apiKey:await n.getAPIKey(i,o)||void 0,providerName:i,modelId:o}]},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to get API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Ohr,"handleBYOKListApiKeysChecked");var F0t=Ze(Fhr,Ohr);d();d();d();d();d();d();function Sn(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Sn,"__classPrivateFieldSet");function Rt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(Rt,"__classPrivateFieldGet");d();var t2e=s(function(){let{crypto:t}=globalThis;if(t?.randomUUID)return t2e=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))},"uuid4");d();d();d();function wE(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}s(wE,"isAbortError");var nq=s(t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)},"castToError");var In=class extends Error{static{s(this,"AnthropicError")}},Eu=class t extends In{static{s(this,"APIError")}constructor(e,r,n,i){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=i,this.requestID=i?.get("request-id"),this.error=r}static makeMessage(e,r,n){let i=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e||!i)return new cS({message:n,cause:nq(r)});let o=r;return e===400?new Q8(e,o,n,i):e===401?new U8(e,o,n,i):e===403?new q8(e,o,n,i):e===404?new H8(e,o,n,i):e===409?new $8(e,o,n,i):e===422?new W8(e,o,n,i):e===429?new j8(e,o,n,i):e>=500?new G8(e,o,n,i):new t(e,o,n,i)}},ld=class extends Eu{static{s(this,"APIUserAbortError")}constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},cS=class extends Eu{static{s(this,"APIConnectionError")}constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},O8=class extends cS{static{s(this,"APIConnectionTimeoutError")}constructor({message:e}={}){super({message:e??"Request timed out."})}},Q8=class extends Eu{static{s(this,"BadRequestError")}},U8=class extends Eu{static{s(this,"AuthenticationError")}},q8=class extends Eu{static{s(this,"PermissionDeniedError")}},H8=class extends Eu{static{s(this,"NotFoundError")}},$8=class extends Eu{static{s(this,"ConflictError")}},W8=class extends Eu{static{s(this,"UnprocessableEntityError")}},j8=class extends Eu{static{s(this,"RateLimitError")}},G8=class extends Eu{static{s(this,"InternalServerError")}};var Uhr=/^[a-z][a-z0-9+.-]*:/i,O0t=s(t=>Uhr.test(t),"isAbsoluteURL"),r2e=s(t=>(r2e=Array.isArray,r2e(t)),"isArray"),n2e=r2e;function i2e(t){return typeof t!="object"?{}:t??{}}s(i2e,"maybeObj");function Q0t(t){if(!t)return!0;for(let e in t)return!1;return!0}s(Q0t,"isEmptyObj");function U0t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(U0t,"hasOwn");var q0t=s((t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new In(`${t} must be an integer`);if(e<0)throw new In(`${t} must be a positive integer`);return e},"validatePositiveInteger");var Moe=s(t=>{try{return JSON.parse(t)}catch{return}},"safeJSON");d();var H0t=s(t=>new Promise(e=>setTimeout(e,t)),"sleep");d();d();var lS="0.56.0";var G0t=s(()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u","isRunningInBrowser");function qhr(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}s(qhr,"getDetectedPlatform");var Hhr=s(()=>{let t=qhr();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lS,"X-Stainless-OS":W0t(Deno.build.os),"X-Stainless-Arch":$0t(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lS,"X-Stainless-OS":W0t(globalThis.process.platform??"unknown"),"X-Stainless-Arch":$0t(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=$hr();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},"getPlatformProperties");function $hr(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let i=n[1]||0,o=n[2]||0,a=n[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}s($hr,"getBrowserInfo");var $0t=s(t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown","normalizeArch"),W0t=s(t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),"normalizePlatform"),j0t,V0t=s(()=>j0t??(j0t=Hhr()),"getPlatformHeaders");d();function z0t(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}s(z0t,"getDefaultFetch");function o2e(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}s(o2e,"makeReadableStream");function Loe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return o2e({start(){},async pull(r){let{done:n,value:i}=await e.next();n?r.close():r.enqueue(i)},async cancel(){await e.return?.()}})}s(Loe,"ReadableStreamFrom");function iq(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}s(iq,"ReadableStreamToAsyncIterable");async function K0t(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}let e=t.getReader(),r=e.cancel();e.releaseLock(),await r}s(K0t,"CancelReadableStream");d();var Y0t=s(({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),"FallbackEncoder");d();d();d();d();d();function Z0t(t){let e=0;for(let i of t)e+=i.length;let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}s(Z0t,"concatBytes");var J0t;function oq(t){let e;return(J0t??(e=new globalThis.TextEncoder,J0t=e.encode.bind(e)))(t)}s(oq,"encodeUTF8");var X0t;function s2e(t){let e;return(X0t??(e=new globalThis.TextDecoder,X0t=e.decode.bind(e)))(t)}s(s2e,"decodeUTF8");var dm,fm,SE=class{static{s(this,"LineDecoder")}constructor(){dm.set(this,void 0),fm.set(this,void 0),Sn(this,dm,new Uint8Array,"f"),Sn(this,fm,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?oq(e):e;Sn(this,dm,Z0t([Rt(this,dm,"f"),r]),"f");let n=[],i;for(;(i=Ghr(Rt(this,dm,"f"),Rt(this,fm,"f")))!=null;){if(i.carriage&&Rt(this,fm,"f")==null){Sn(this,fm,i.index,"f");continue}if(Rt(this,fm,"f")!=null&&(i.index!==Rt(this,fm,"f")+1||i.carriage)){n.push(s2e(Rt(this,dm,"f").subarray(0,Rt(this,fm,"f")-1))),Sn(this,dm,Rt(this,dm,"f").subarray(Rt(this,fm,"f")),"f"),Sn(this,fm,null,"f");continue}let o=Rt(this,fm,"f")!==null?i.preceding-1:i.preceding,a=s2e(Rt(this,dm,"f").subarray(0,o));n.push(a),Sn(this,dm,Rt(this,dm,"f").subarray(i.index),"f"),Sn(this,fm,null,"f")}return n}flush(){return Rt(this,dm,"f").length?this.decode(`
`):[]}};dm=new WeakMap,fm=new WeakMap;SE.NEWLINE_CHARS=new Set([`
`,"\r"]);SE.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ghr(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}s(Ghr,"findNewlineIndex");function ept(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}s(ept,"findDoubleNewlineIndex");d();var Ooe={off:0,error:200,warn:300,info:400,debug:500},a2e=s((t,e,r)=>{if(t){if(U0t(Ooe,t))return t;bu(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ooe))}`)}},"parseLogLevel");function sq(){}s(sq,"noop");function Foe(t,e,r){return!e||Ooe[t]>Ooe[r]?sq:e[t].bind(e)}s(Foe,"makeLogFn");var Vhr={error:sq,warn:sq,info:sq,debug:sq},tpt=new WeakMap;function bu(t){let e=t.logger,r=t.logLevel??"off";if(!e)return Vhr;let n=tpt.get(e);if(n&&n[0]===r)return n[1];let i={error:Foe("error",e,r),warn:Foe("warn",e,r),info:Foe("info",e,r),debug:Foe("debug",e,r)};return tpt.set(e,[r,i]),i}s(bu,"loggerFor");var _E=s(t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t),"formatRequestDetails");var aq,Q1=class t{static{s(this,"Stream")}constructor(e,r,n){this.iterator=e,aq.set(this,void 0),this.controller=r,Sn(this,aq,n,"f")}static fromSSEResponse(e,r,n){let i=!1,o=n?bu(n):console;async function*a(){if(i)throw new In("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(let l of zhr(e,r)){if(l.event==="completion")try{yield JSON.parse(l.data)}catch(u){throw o.error("Could not parse message into JSON:",l.data),o.error("From chunk:",l.raw),u}if(l.event==="message_start"||l.event==="message_delta"||l.event==="message_stop"||l.event==="content_block_start"||l.event==="content_block_delta"||l.event==="content_block_stop")try{yield JSON.parse(l.data)}catch(u){throw o.error("Could not parse message into JSON:",l.data),o.error("From chunk:",l.raw),u}if(l.event!=="ping"&&l.event==="error")throw new Eu(void 0,Moe(l.data)??l.data,void 0,e.headers)}c=!0}catch(l){if(wE(l))return;throw l}finally{c||r.abort()}}return s(a,"iterator"),new t(a,r,n)}static fromReadableStream(e,r,n){let i=!1;async function*o(){let c=new SE,l=iq(e);for await(let u of l)for(let f of c.decode(u))yield f;for(let u of c.flush())yield u}s(o,"iterLines");async function*a(){if(i)throw new In("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(let l of o())c||l&&(yield JSON.parse(l));c=!0}catch(l){if(wE(l))return;throw l}finally{c||r.abort()}}return s(a,"iterator"),new t(a,r,n)}[(aq=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),i=s(o=>({next:s(()=>{if(o.length===0){let a=n.next();e.push(a),r.push(a)}return o.shift()},"next")}),"teeIterator");return[new t(()=>i(e),this.controller,Rt(this,aq,"f")),new t(()=>i(r),this.controller,Rt(this,aq,"f"))]}toReadableStream(){let e=this,r;return o2e({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:i,done:o}=await r.next();if(o)return n.close();let a=oq(JSON.stringify(i)+`
`);n.enqueue(a)}catch(i){n.error(i)}},async cancel(){await r.return?.()}})}};async function*zhr(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new In("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new In("Attempted to iterate over a response with no body");let r=new c2e,n=new SE,i=iq(t.body);for await(let o of Khr(i))for(let a of n.decode(o)){let c=r.decode(a);c&&(yield c)}for(let o of n.flush()){let a=r.decode(o);a&&(yield a)}}s(zhr,"_iterSSEMessages");async function*Khr(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?oq(r):r,i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),e=i;let o;for(;(o=ept(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}s(Khr,"iterSSEChunks");var c2e=class{static{s(this,"SSEDecoder")}constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=Yhr(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}};function Yhr(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}s(Yhr,"partition");async function Qoe(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{if(e.options.stream)return bu(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):Q1.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let l=r.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){let p=await r.json();return l2e(p,r)}return await r.text()})();return bu(t).debug(`[${n}] response parsed`,_E({retryOfRequestLogID:i,url:r.url,status:r.status,body:a,durationMs:Date.now()-o})),a}s(Qoe,"defaultParseResponse");function l2e(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}s(l2e,"addRequestID");d();var cq,lP=class t extends Promise{static{s(this,"APIPromise")}constructor(e,r,n=Qoe){super(i=>{i(null)}),this.responsePromise=r,this.parseResponse=n,cq.set(this,void 0),Sn(this,cq,e,"f")}_thenUnwrap(e){return new t(Rt(this,cq,"f"),this.responsePromise,async(r,n)=>l2e(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Rt(this,cq,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};cq=new WeakMap;var Uoe,u2e=class{static{s(this,"AbstractPage")}constructor(e,r,n,i){Uoe.set(this,void 0),Sn(this,Uoe,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new In("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Rt(this,Uoe,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Uoe=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},lq=class extends lP{static{s(this,"PagePromise")}constructor(e,r,n){super(e,r,async(i,o)=>new n(i,o.response,await Qoe(i,o),o.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},sg=class extends u2e{static{s(this,"Page")}constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let r=this.first_id;return r?{...this.options,query:{...i2e(this.options.query),before_id:r}}:null}let e=this.last_id;return e?{...this.options,query:{...i2e(this.options.query),after_id:e}}:null}};d();d();d();var f2e=s(()=>{if(typeof File>"u"){let{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}},"checkFileSupport");function uP(t,e,r){return f2e(),new File(t,e??"unknown_file",r)}s(uP,"makeFile");function uq(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}s(uq,"getName");var p2e=s(t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function","isAsyncIterable");var npt=s(async(t,e)=>({...t,body:await Zhr(t.body,e)}),"multipartFormRequestOptions"),rpt=new WeakMap;function Xhr(t){let e=typeof t=="function"?t:t.fetch,r=rpt.get(e);if(r)return r;let n=(async()=>{try{let i="Response"in e?e.Response:(await e("data:,")).constructor,o=new FormData;return o.toString()!==await new i(o).text()}catch{return!0}})();return rpt.set(e,n),n}s(Xhr,"supportsFormData");var Zhr=s(async(t,e)=>{if(!await Xhr(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,i])=>d2e(r,n,i))),r},"createForm"),egr=s(t=>t instanceof Blob&&"name"in t,"isNamedBlob");var d2e=s(async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response){let n={},i=r.headers.get("Content-Type");i&&(n={type:i}),t.append(e,uP([await r.blob()],uq(r),n))}else if(p2e(r))t.append(e,uP([await new Response(Loe(r)).blob()],uq(r)));else if(egr(r))t.append(e,uP([r],uq(r),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(n=>d2e(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>d2e(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},"addFormValue");var ipt=s(t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function","isBlobLike"),tgr=s(t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ipt(t),"isFileLike"),rgr=s(t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function","isResponseLike");async function qoe(t,e,r){if(f2e(),t=await t,e||(e=uq(t)),tgr(t))return t instanceof File&&e==null&&r==null?t:uP([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...r});if(rgr(t)){let i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),uP(await m2e(i),e,r)}let n=await m2e(t);if(!r?.type){let i=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(r={...r,type:i})}return uP(n,e,r)}s(qoe,"toFile");async function m2e(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(ipt(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(p2e(t))for await(let r of t)e.push(...await m2e(r));else{let r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${ngr(t)}`)}return e}s(m2e,"getBytes");function ngr(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}s(ngr,"propsForError");d();d();d();d();var Cl=class{static{s(this,"APIResource")}constructor(e){this._client=e}};d();d();var opt=Symbol.for("brand.privateNullableHeaders");function*ogr(t){if(!t)return;if(opt in t){let{values:n,nulls:i}=t;yield*n.entries();for(let o of i)yield[o,null];return}let e=!1,r;t instanceof Headers?r=t.entries():n2e(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let o=n2e(n[1])?n[1]:[n[1]],a=!1;for(let c of o)c!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,c])}}s(ogr,"iterateHeaders");var jo=s(t=>{let e=new Headers,r=new Set;for(let n of t){let i=new Set;for(let[o,a]of ogr(n)){let c=o.toLowerCase();i.has(c)||(e.delete(o),i.add(c)),a===null?(e.delete(o),r.add(c)):(e.append(o,a),r.delete(c))}}return{[opt]:!0,values:e,nulls:r}},"buildHeaders");d();function apt(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}s(apt,"encodeURIPath");var spt=Object.freeze(Object.create(null)),sgr=s((t=apt)=>s(function(r,...n){if(r.length===1)return r[0];let i=!1,o=[],a=r.reduce((f,p,m)=>{/[?#]/.test(p)&&(i=!0);let h=n[m],g=(i?encodeURIComponent:t)(""+h);return m!==n.length&&(h==null||typeof h=="object"&&h.toString===Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??spt)??spt)?.toString)&&(g=h+"",o.push({start:f.length+p.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),f+p+(m===n.length?"":g)},""),c=a.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=l.exec(c))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((f,p)=>f.start-p.start),o.length>0){let f=0,p=o.reduce((m,h)=>{let g=" ".repeat(h.start-f),A="^".repeat(h.length);return f=h.start+h.length,m+g+A},"");throw new In(`Path parameters result in path with invalid segments:
${o.map(m=>m.error).join(`
`)}
${a}
${p}`)}return a},"path"),"createPathTagFunction"),Yd=sgr(apt);var V8=class extends Cl{static{s(this,"Files")}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/files",sg,{query:i,...r,headers:jo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])})}delete(e,r={},n){let{betas:i}=r??{};return this._client.delete(Yd`/v1/files/${e}`,{...n,headers:jo([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},n?.headers])})}download(e,r={},n){let{betas:i}=r??{};return this._client.get(Yd`/v1/files/${e}/content`,{...n,headers:jo([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}retrieveMetadata(e,r={},n){let{betas:i}=r??{};return this._client.get(Yd`/v1/files/${e}`,{...n,headers:jo([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},n?.headers])})}upload(e,r){let{betas:n,...i}=e;return this._client.post("/v1/files",npt({body:i,...r,headers:jo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])},this._client))}};d();var z8=class extends Cl{static{s(this,"Models")}retrieve(e,r={},n){let{betas:i}=r??{};return this._client.get(Yd`/v1/models/${e}?beta=true`,{...n,headers:jo([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/models?beta=true",sg,{query:i,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};d();d();d();var K8=class t{static{s(this,"JSONLDecoder")}constructor(e,r){this.iterator=e,this.controller=r}async*decoder(){let e=new SE;for await(let r of this.iterator)for(let n of e.decode(r))yield JSON.parse(n);for(let r of e.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,r){if(!e.body)throw r.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new In("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new In("Attempted to iterate over a response with no body");return new t(iq(e.body),r)}};d();var Y8=class extends Cl{static{s(this,"Batches")}create(e,r){let{betas:n,...i}=e;return this._client.post("/v1/messages/batches?beta=true",{body:i,...r,headers:jo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}retrieve(e,r={},n){let{betas:i}=r??{};return this._client.get(Yd`/v1/messages/batches/${e}?beta=true`,{...n,headers:jo([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n?.headers])})}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",sg,{query:i,...r,headers:jo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}delete(e,r={},n){let{betas:i}=r??{};return this._client.delete(Yd`/v1/messages/batches/${e}?beta=true`,{...n,headers:jo([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n?.headers])})}cancel(e,r={},n){let{betas:i}=r??{};return this._client.post(Yd`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:jo([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},n?.headers])})}async results(e,r={},n){let i=await this.retrieve(e);if(!i.results_url)throw new In(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);let{betas:o}=r??{};return this._client.get(i.results_url,{...n,headers:jo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((a,c)=>K8.fromResponse(c.response,c.controller))}};d();d();d();var ugr=s(t=>{let e=0,r=[];for(;e<t.length;){let n=t[e];if(n==="\\"){e++;continue}if(n==="{"){r.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){r.push({type:"brace",value:"}"}),e++;continue}if(n==="["){r.push({type:"paren",value:"["}),e++;continue}if(n==="]"){r.push({type:"paren",value:"]"}),e++;continue}if(n===":"){r.push({type:"separator",value:":"}),e++;continue}if(n===","){r.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let c="",l=!1;for(n=t[++e];n!=='"';){if(e===t.length){l=!0;break}if(n==="\\"){if(e++,e===t.length){l=!0;break}c+=n+t[e],n=t[++e]}else c+=n,n=t[++e]}n=t[++e],l||r.push({type:"string",value:c});continue}if(n&&/\s/.test(n)){e++;continue}let o=/[0-9]/;if(n&&o.test(n)||n==="-"||n==="."){let c="";for(n==="-"&&(c+=n,n=t[++e]);n&&o.test(n)||n===".";)c+=n,n=t[++e];r.push({type:"number",value:c});continue}let a=/[a-z]/i;if(n&&a.test(n)){let c="";for(;n&&a.test(n)&&e!==t.length;)c+=n,n=t[++e];if(c=="true"||c=="false"||c==="null")r.push({type:"name",value:c});else{e++;continue}continue}e++}return r},"tokenize"),J8=s(t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),J8(t);break;case"number":let r=e.value[e.value.length-1];if(r==="."||r==="-")return t=t.slice(0,t.length-1),J8(t);case"string":let n=t[t.length-2];if(n?.type==="delimiter")return t=t.slice(0,t.length-1),J8(t);if(n?.type==="brace"&&n.value==="{")return t=t.slice(0,t.length-1),J8(t);break;case"delimiter":return t=t.slice(0,t.length-1),J8(t);break}return t},"strip"),dgr=s(t=>{let e=[];return t.map(r=>{r.type==="brace"&&(r.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(r=>{r==="}"?t.push({type:"brace",value:"}"}):r==="]"&&t.push({type:"paren",value:"]"})}),t},"unstrip"),fgr=s(t=>{let e="";return t.map(r=>{switch(r.type){case"string":e+='"'+r.value+'"';break;default:e+=r.value;break}}),e},"generate"),Hoe=s(t=>JSON.parse(fgr(dgr(J8(ugr(t))))),"partialParse");var ag,uS,dq,$oe,fq,pq,Woe,mq,RE,hq,joe,Goe,X8,Voe,zoe,h2e,cpt,Koe,g2e,A2e,y2e,lpt,upt="__json_buf";function dpt(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}s(dpt,"tracksToolInput");var Yoe=class t{static{s(this,"BetaMessageStream")}constructor(){ag.add(this),this.messages=[],this.receivedMessages=[],uS.set(this,void 0),this.controller=new AbortController,dq.set(this,void 0),$oe.set(this,()=>{}),fq.set(this,()=>{}),pq.set(this,void 0),Woe.set(this,()=>{}),mq.set(this,()=>{}),RE.set(this,{}),hq.set(this,!1),joe.set(this,!1),Goe.set(this,!1),X8.set(this,!1),Voe.set(this,void 0),zoe.set(this,void 0),Koe.set(this,e=>{if(Sn(this,joe,!0,"f"),wE(e)&&(e=new ld),e instanceof ld)return Sn(this,Goe,!0,"f"),this._emit("abort",e);if(e instanceof In)return this._emit("error",e);if(e instanceof Error){let r=new In(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new In(String(e)))}),Sn(this,dq,new Promise((e,r)=>{Sn(this,$oe,e,"f"),Sn(this,fq,r,"f")}),"f"),Sn(this,pq,new Promise((e,r)=>{Sn(this,Woe,e,"f"),Sn(this,mq,r,"f")}),"f"),Rt(this,dq,"f").catch(()=>{}),Rt(this,pq,"f").catch(()=>{})}get response(){return Rt(this,Voe,"f")}get request_id(){return Rt(this,zoe,"f")}async withResponse(){let e=await Rt(this,dq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let i=new t;for(let o of r.messages)i._addMessageParam(o);return i._run(()=>i._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},Rt(this,Koe,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let i=n?.signal,o;i&&(i.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),i.addEventListener("abort",o));try{Rt(this,ag,"m",g2e).call(this);let{response:a,data:c}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(let l of c)Rt(this,ag,"m",A2e).call(this,l);if(c.controller.signal?.aborted)throw new ld;Rt(this,ag,"m",y2e).call(this)}finally{i&&o&&i.removeEventListener("abort",o)}}_connected(e){this.ended||(Sn(this,Voe,e,"f"),Sn(this,zoe,e?.headers.get("request-id"),"f"),Rt(this,$oe,"f").call(this,e),this._emit("connect"))}get ended(){return Rt(this,hq,"f")}get errored(){return Rt(this,joe,"f")}get aborted(){return Rt(this,Goe,"f")}abort(){this.controller.abort()}on(e,r){return(Rt(this,RE,"f")[e]||(Rt(this,RE,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=Rt(this,RE,"f")[e];if(!n)return this;let i=n.findIndex(o=>o.listener===r);return i>=0&&n.splice(i,1),this}once(e,r){return(Rt(this,RE,"f")[e]||(Rt(this,RE,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Sn(this,X8,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Sn(this,X8,!0,"f"),await Rt(this,pq,"f")}get currentMessage(){return Rt(this,uS,"f")}async finalMessage(){return await this.done(),Rt(this,ag,"m",h2e).call(this)}async finalText(){return await this.done(),Rt(this,ag,"m",cpt).call(this)}_emit(e,...r){if(Rt(this,hq,"f"))return;e==="end"&&(Sn(this,hq,!0,"f"),Rt(this,Woe,"f").call(this));let n=Rt(this,RE,"f")[e];if(n&&(Rt(this,RE,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),e==="abort"){let i=r[0];!Rt(this,X8,"f")&&!n?.length&&Promise.reject(i),Rt(this,fq,"f").call(this,i),Rt(this,mq,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=r[0];!Rt(this,X8,"f")&&!n?.length&&Promise.reject(i),Rt(this,fq,"f").call(this,i),Rt(this,mq,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Rt(this,ag,"m",h2e).call(this))}async _fromReadableStream(e,r){let n=r?.signal,i;n&&(n.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),n.addEventListener("abort",i));try{Rt(this,ag,"m",g2e).call(this),this._connected(null);let o=Q1.fromReadableStream(e,this.controller);for await(let a of o)Rt(this,ag,"m",A2e).call(this,a);if(o.controller.signal?.aborted)throw new ld;Rt(this,ag,"m",y2e).call(this)}finally{n&&i&&n.removeEventListener("abort",i)}}[(uS=new WeakMap,dq=new WeakMap,$oe=new WeakMap,fq=new WeakMap,pq=new WeakMap,Woe=new WeakMap,mq=new WeakMap,RE=new WeakMap,hq=new WeakMap,joe=new WeakMap,Goe=new WeakMap,X8=new WeakMap,Voe=new WeakMap,zoe=new WeakMap,Koe=new WeakMap,ag=new WeakSet,h2e=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_BetaMessageStream_getFinalMessage"),cpt=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new In("stream ended without producing a content block with type=text");return r.join(" ")},"_BetaMessageStream_getFinalText"),g2e=s(function(){this.ended||Sn(this,uS,void 0,"f")},"_BetaMessageStream_beginRequest"),A2e=s(function(r){if(this.ended)return;let n=Rt(this,ag,"m",lpt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let i=n.content.at(-1);switch(r.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",r.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",r.delta.citation,i.citations??[]);break}case"input_json_delta":{dpt(i)&&i.input&&this._emit("inputJson",r.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",r.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Sn(this,uS,n,"f");break}case"content_block_start":case"message_delta":break}},"_BetaMessageStream_addStreamEvent"),y2e=s(function(){if(this.ended)throw new In("stream has ended, this shouldn't happen");let r=Rt(this,uS,"f");if(!r)throw new In("request ended without sending any chunks");return Sn(this,uS,void 0,"f"),r},"_BetaMessageStream_endRequest"),lpt=s(function(r){let n=Rt(this,uS,"f");if(r.type==="message_start"){if(n)throw new In(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new In(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.container=r.delta.container,n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{let i=n.content.at(r.index);switch(r.delta.type){case"text_delta":{i?.type==="text"&&(n.content[r.index]={...i,text:(i.text||"")+r.delta.text});break}case"citations_delta":{i?.type==="text"&&(n.content[r.index]={...i,citations:[...i.citations??[],r.delta.citation]});break}case"input_json_delta":{if(i&&dpt(i)){let o=i[upt]||"";o+=r.delta.partial_json;let a={...i};if(Object.defineProperty(a,upt,{value:o,enumerable:!1,writable:!0}),o)try{a.input=Hoe(o)}catch(c){let l=new In(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${c}. JSON: ${o}`);Rt(this,Koe,"f").call(this,l)}n.content[r.index]=a}break}case"thinking_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,thinking:i.thinking+r.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_BetaMessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",i=>{let o=r.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),{next:s(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,a)=>r.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),"next"),return:s(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new Q1(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};d();var Joe={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192};var fpt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"},dP=class extends Cl{static{s(this,"Messages")}constructor(){super(...arguments),this.batches=new Y8(this._client)}create(e,r){let{betas:n,...i}=e;i.model in fpt&&console.warn(`The model '${i.model}' is deprecated and will reach end-of-life on ${fpt[i.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let o=this._client._options.timeout;if(!i.stream&&o==null){let a=Joe[i.model]??void 0;o=this._client.calculateNonstreamingTimeout(i.max_tokens,a)}return this._client.post("/v1/messages?beta=true",{body:i,timeout:o??6e5,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}stream(e,r){return Yoe.createMessage(this,e,r)}countTokens(e,r){let{betas:n,...i}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:i,...r,headers:jo([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},r?.headers])})}};dP.Batches=Y8;var U1=class extends Cl{static{s(this,"Beta")}constructor(){super(...arguments),this.models=new z8(this._client),this.messages=new dP(this._client),this.files=new V8(this._client)}};U1.Models=z8;U1.Messages=dP;U1.Files=V8;d();var fP=class extends Cl{static{s(this,"Completions")}create(e,r){let{betas:n,...i}=e;return this._client.post("/v1/complete",{body:i,timeout:this._client._options.timeout??6e5,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}};d();d();var cg,dS,gq,Xoe,Aq,yq,Zoe,Cq,kE,vq,ese,tse,Z8,rse,nse,C2e,ppt,v2e,x2e,E2e,b2e,mpt,hpt="__json_buf";function gpt(t){return t.type==="tool_use"||t.type==="server_tool_use"}s(gpt,"tracksToolInput");var ise=class t{static{s(this,"MessageStream")}constructor(){cg.add(this),this.messages=[],this.receivedMessages=[],dS.set(this,void 0),this.controller=new AbortController,gq.set(this,void 0),Xoe.set(this,()=>{}),Aq.set(this,()=>{}),yq.set(this,void 0),Zoe.set(this,()=>{}),Cq.set(this,()=>{}),kE.set(this,{}),vq.set(this,!1),ese.set(this,!1),tse.set(this,!1),Z8.set(this,!1),rse.set(this,void 0),nse.set(this,void 0),v2e.set(this,e=>{if(Sn(this,ese,!0,"f"),wE(e)&&(e=new ld),e instanceof ld)return Sn(this,tse,!0,"f"),this._emit("abort",e);if(e instanceof In)return this._emit("error",e);if(e instanceof Error){let r=new In(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new In(String(e)))}),Sn(this,gq,new Promise((e,r)=>{Sn(this,Xoe,e,"f"),Sn(this,Aq,r,"f")}),"f"),Sn(this,yq,new Promise((e,r)=>{Sn(this,Zoe,e,"f"),Sn(this,Cq,r,"f")}),"f"),Rt(this,gq,"f").catch(()=>{}),Rt(this,yq,"f").catch(()=>{})}get response(){return Rt(this,rse,"f")}get request_id(){return Rt(this,nse,"f")}async withResponse(){let e=await Rt(this,gq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let i=new t;for(let o of r.messages)i._addMessageParam(o);return i._run(()=>i._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},Rt(this,v2e,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let i=n?.signal,o;i&&(i.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),i.addEventListener("abort",o));try{Rt(this,cg,"m",x2e).call(this);let{response:a,data:c}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(let l of c)Rt(this,cg,"m",E2e).call(this,l);if(c.controller.signal?.aborted)throw new ld;Rt(this,cg,"m",b2e).call(this)}finally{i&&o&&i.removeEventListener("abort",o)}}_connected(e){this.ended||(Sn(this,rse,e,"f"),Sn(this,nse,e?.headers.get("request-id"),"f"),Rt(this,Xoe,"f").call(this,e),this._emit("connect"))}get ended(){return Rt(this,vq,"f")}get errored(){return Rt(this,ese,"f")}get aborted(){return Rt(this,tse,"f")}abort(){this.controller.abort()}on(e,r){return(Rt(this,kE,"f")[e]||(Rt(this,kE,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=Rt(this,kE,"f")[e];if(!n)return this;let i=n.findIndex(o=>o.listener===r);return i>=0&&n.splice(i,1),this}once(e,r){return(Rt(this,kE,"f")[e]||(Rt(this,kE,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Sn(this,Z8,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Sn(this,Z8,!0,"f"),await Rt(this,yq,"f")}get currentMessage(){return Rt(this,dS,"f")}async finalMessage(){return await this.done(),Rt(this,cg,"m",C2e).call(this)}async finalText(){return await this.done(),Rt(this,cg,"m",ppt).call(this)}_emit(e,...r){if(Rt(this,vq,"f"))return;e==="end"&&(Sn(this,vq,!0,"f"),Rt(this,Zoe,"f").call(this));let n=Rt(this,kE,"f")[e];if(n&&(Rt(this,kE,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),e==="abort"){let i=r[0];!Rt(this,Z8,"f")&&!n?.length&&Promise.reject(i),Rt(this,Aq,"f").call(this,i),Rt(this,Cq,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=r[0];!Rt(this,Z8,"f")&&!n?.length&&Promise.reject(i),Rt(this,Aq,"f").call(this,i),Rt(this,Cq,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",Rt(this,cg,"m",C2e).call(this))}async _fromReadableStream(e,r){let n=r?.signal,i;n&&(n.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),n.addEventListener("abort",i));try{Rt(this,cg,"m",x2e).call(this),this._connected(null);let o=Q1.fromReadableStream(e,this.controller);for await(let a of o)Rt(this,cg,"m",E2e).call(this,a);if(o.controller.signal?.aborted)throw new ld;Rt(this,cg,"m",b2e).call(this)}finally{n&&i&&n.removeEventListener("abort",i)}}[(dS=new WeakMap,gq=new WeakMap,Xoe=new WeakMap,Aq=new WeakMap,yq=new WeakMap,Zoe=new WeakMap,Cq=new WeakMap,kE=new WeakMap,vq=new WeakMap,ese=new WeakMap,tse=new WeakMap,Z8=new WeakMap,rse=new WeakMap,nse=new WeakMap,v2e=new WeakMap,cg=new WeakSet,C2e=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_MessageStream_getFinalMessage"),ppt=s(function(){if(this.receivedMessages.length===0)throw new In("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new In("stream ended without producing a content block with type=text");return r.join(" ")},"_MessageStream_getFinalText"),x2e=s(function(){this.ended||Sn(this,dS,void 0,"f")},"_MessageStream_beginRequest"),E2e=s(function(r){if(this.ended)return;let n=Rt(this,cg,"m",mpt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let i=n.content.at(-1);switch(r.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",r.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",r.delta.citation,i.citations??[]);break}case"input_json_delta":{gpt(i)&&i.input&&this._emit("inputJson",r.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",r.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Sn(this,dS,n,"f");break}case"content_block_start":case"message_delta":break}},"_MessageStream_addStreamEvent"),b2e=s(function(){if(this.ended)throw new In("stream has ended, this shouldn't happen");let r=Rt(this,dS,"f");if(!r)throw new In("request ended without sending any chunks");return Sn(this,dS,void 0,"f"),r},"_MessageStream_endRequest"),mpt=s(function(r){let n=Rt(this,dS,"f");if(r.type==="message_start"){if(n)throw new In(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new In(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push({...r.content_block}),n;case"content_block_delta":{let i=n.content.at(r.index);switch(r.delta.type){case"text_delta":{i?.type==="text"&&(n.content[r.index]={...i,text:(i.text||"")+r.delta.text});break}case"citations_delta":{i?.type==="text"&&(n.content[r.index]={...i,citations:[...i.citations??[],r.delta.citation]});break}case"input_json_delta":{if(i&&gpt(i)){let o=i[hpt]||"";o+=r.delta.partial_json;let a={...i};Object.defineProperty(a,hpt,{value:o,enumerable:!1,writable:!0}),o&&(a.input=Hoe(o)),n.content[r.index]=a}break}case"thinking_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,thinking:i.thinking+r.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(n.content[r.index]={...i,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_MessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",i=>{let o=r.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of r)i.resolve(void 0);r.length=0}),this.on("abort",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),this.on("error",i=>{n=!0;for(let o of r)o.reject(i);r.length=0}),{next:s(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,a)=>r.push({resolve:o,reject:a})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),"next"),return:s(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new Q1(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};d();var eM=class extends Cl{static{s(this,"Batches")}create(e,r){return this._client.post("/v1/messages/batches",{body:e,...r})}retrieve(e,r){return this._client.get(Yd`/v1/messages/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/v1/messages/batches",sg,{query:e,...r})}delete(e,r){return this._client.delete(Yd`/v1/messages/batches/${e}`,r)}cancel(e,r){return this._client.post(Yd`/v1/messages/batches/${e}/cancel`,r)}async results(e,r){let n=await this.retrieve(e);if(!n.results_url)throw new In(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...r,headers:jo([{Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,o)=>K8.fromResponse(o.response,o.controller))}};var fS=class extends Cl{static{s(this,"Messages")}constructor(){super(...arguments),this.batches=new eM(this._client)}create(e,r){e.model in Apt&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${Apt[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!e.stream&&n==null){let i=Joe[e.model]??void 0;n=this._client.calculateNonstreamingTimeout(e.max_tokens,i)}return this._client.post("/v1/messages",{body:e,timeout:n??6e5,...r,stream:e.stream??!1})}stream(e,r){return ise.createMessage(this,e,r)}countTokens(e,r){return this._client.post("/v1/messages/count_tokens",{body:e,...r})}},Apt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};fS.Batches=eM;d();var pP=class extends Cl{static{s(this,"Models")}retrieve(e,r={},n){let{betas:i}=r??{};return this._client.get(Yd`/v1/models/${e}`,{...n,headers:jo([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...i}=e??{};return this._client.getAPIList("/v1/models",sg,{query:i,...r,headers:jo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};d();var xq=s(t=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()},"readEnv");var I2e,T2e,ose,ypt,ec=class{static{s(this,"BaseAnthropic")}constructor({baseURL:e=xq("ANTHROPIC_BASE_URL"),apiKey:r=xq("ANTHROPIC_API_KEY")??null,authToken:n=xq("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){I2e.add(this),ose.set(this,void 0);let o={apiKey:r,authToken:n,...i,baseURL:e||"https://api.anthropic.com"};if(!o.dangerouslyAllowBrowser&&G0t())throw new In(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=o.baseURL,this.timeout=o.timeout??T2e.DEFAULT_TIMEOUT,this.logger=o.logger??console;let a="warn";this.logLevel=a,this.logLevel=a2e(o.logLevel,"ClientOptions.logLevel",this)??a2e(xq("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??a,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??z0t(),Sn(this,ose,Y0t,"f"),this._options=o,this.apiKey=r,this.authToken=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(this.apiKey&&e.get("x-api-key"))&&!r.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!r.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return jo([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(this.apiKey!=null)return jo([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(this.authToken!=null)return jo([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new In(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${lS}`}defaultIdempotencyKey(){return`stainless-node-retry-${t2e()}`}makeStatusError(e,r,n,i){return Eu.generate(e,r,n,i)}buildURL(e,r,n){let i=!Rt(this,I2e,"m",ypt).call(this)&&n||this.baseURL,o=O0t(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return Q0t(a)||(r={...a,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new In("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}request(e,r=null){return new lP(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){let i=await e,o=i.maxRetries??this.maxRetries;r==null&&(r=o),await this.prepareOptions(i);let{req:a,url:c,timeout:l}=this.buildRequest(i,{retryCount:o-r});await this.prepareRequest(a,{url:c,options:i});let u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=n===void 0?"":`, retryOf: ${n}`,p=Date.now();if(bu(this).debug(`[${u}] sending request`,_E({retryOfRequestLogID:n,method:i.method,url:c,options:i,headers:a.headers})),i.signal?.aborted)throw new ld;let m=new AbortController,h=await this.fetchWithTimeout(c,a,l,m).catch(nq),g=Date.now();if(h instanceof Error){let E=`retrying, ${r} attempts remaining`;if(i.signal?.aborted)throw new ld;let b=wE(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(r)return bu(this).info(`[${u}] connection ${b?"timed out":"failed"} - ${E}`),bu(this).debug(`[${u}] connection ${b?"timed out":"failed"} (${E})`,_E({retryOfRequestLogID:n,url:c,durationMs:g-p,message:h.message})),this.retryRequest(i,r,n??u);throw bu(this).info(`[${u}] connection ${b?"timed out":"failed"} - error; no more retries left`),bu(this).debug(`[${u}] connection ${b?"timed out":"failed"} (error; no more retries left)`,_E({retryOfRequestLogID:n,url:c,durationMs:g-p,message:h.message})),b?new O8:new cS({cause:h})}let A=[...h.headers.entries()].filter(([E])=>E==="request-id").map(([E,b])=>", "+E+": "+JSON.stringify(b)).join(""),y=`[${u}${f}${A}] ${a.method} ${c} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${g-p}ms`;if(!h.ok){let E=this.shouldRetry(h);if(r&&E){let O=`retrying, ${r} attempts remaining`;return await K0t(h.body),bu(this).info(`${y} - ${O}`),bu(this).debug(`[${u}] response error (${O})`,_E({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:g-p})),this.retryRequest(i,r,n??u,h.headers)}let b=E?"error; no more retries left":"error; not retryable";bu(this).info(`${y} - ${b}`);let S=await h.text().catch(O=>nq(O).message),R=Moe(S),B=R?void 0:S;throw bu(this).debug(`[${u}] response error (${b})`,_E({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,message:B,durationMs:Date.now()-p})),this.makeStatusError(h.status,R,B,h.headers)}return bu(this).info(y),bu(this).debug(`[${u}] response start`,_E({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:g-p})),{response:h,options:i,controller:m,requestLogID:u,retryOfRequestLogID:n,startTime:p}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){let n=this.makeRequest(r,null,void 0);return new lq(this,n,e)}async fetchWithTimeout(e,r,n,i){let{signal:o,method:a,...c}=r||{};o&&o.addEventListener("abort",()=>i.abort());let l=setTimeout(()=>i.abort(),n),u=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,f={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...c};a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,i){let o,a=i?.get("retry-after-ms");if(a){let l=parseFloat(a);Number.isNaN(l)||(o=l)}let c=i?.get("retry-after");if(c&&!o){let l=parseFloat(c);Number.isNaN(l)?o=Date.parse(c)-Date.now():o=l*1e3}if(!(o&&0<=o&&o<60*1e3)){let l=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,l)}return await H0t(o),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let o=r-e,a=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return a*c*1e3}calculateNonstreamingTimeout(e,r){if(36e5*e/128e3>6e5||r!=null&&e>r)throw new In("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}buildRequest(e,{retryCount:r=0}={}){let n={...e},{method:i,path:o,query:a,defaultBaseURL:c}=n,l=this.buildURL(o,a,c);"timeout"in n&&q0t("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let{bodyHeaders:u,body:f}=this.buildBody({options:n}),p=this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:r});return{req:{method:i,headers:p,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...n.fetchOptions??{}},url:l,timeout:n.timeout}}buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:i}){let o={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);let a=jo([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...V0t(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=jo([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Loe(e)}:Rt(this,ose,"f").call(this,{body:e,headers:n})}};T2e=ec,ose=new WeakMap,I2e=new WeakSet,ypt=s(function(){return this.baseURL!=="https://api.anthropic.com"},"_BaseAnthropic_baseURLOverridden");ec.Anthropic=T2e;ec.HUMAN_PROMPT=`

Human:`;ec.AI_PROMPT=`

Assistant:`;ec.DEFAULT_TIMEOUT=6e5;ec.AnthropicError=In;ec.APIError=Eu;ec.APIConnectionError=cS;ec.APIConnectionTimeoutError=O8;ec.APIUserAbortError=ld;ec.NotFoundError=H8;ec.ConflictError=$8;ec.RateLimitError=j8;ec.BadRequestError=Q8;ec.AuthenticationError=U8;ec.InternalServerError=G8;ec.PermissionDeniedError=q8;ec.UnprocessableEntityError=W8;ec.toFile=qoe;var my=class extends ec{static{s(this,"Anthropic")}constructor(){super(...arguments),this.completions=new fP(this),this.messages=new fS(this),this.models=new pP(this),this.beta=new U1(this)}};my.Completions=fP;my.Messages=fS;my.Models=pP;my.Beta=U1;var{HUMAN_PROMPT:ggr,AI_PROMPT:Agr}=my;var sse=class extends Yh{static{s(this,"AnthropicProvider")}constructor(e){super(Wo.Anthropic,e)}async getAllModels(){await this.ensureKnownModelsCache();let e=await new Za(this.ctx.get(Ai)).getAPIKey(this.providerName);if(!e)throw new Error(`API key not found for provider: ${this.providerName}`);let r=new my({apiKey:e,fetch:ygr(this.ctx.get(Hr))});try{let n=await r.models.list(),i=[];for(let o of n.data){let a=this._knownModels?.[o.id];a&&i.push({providerName:this.providerName,modelId:o.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:a})}return i}catch(n){throw YQ.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,n),n}}};function ygr(t){return async(e,r)=>{let n=Cgr(e,r),i=xgr(r),o=await t.fetch(n,i);return bgr(o)}}s(ygr,"createAnthropicFetchAdapter");function Cgr(t,e){return t instanceof Request?(vgr(t,e),t.url):t instanceof URL?t.toString():t}s(Cgr,"convertInputToString");function vgr(t,e){e&&(e.headers??=t.headers,e.method??=t.method,!e.body&&!t.bodyUsed&&(e.body=t.body))}s(vgr,"mergeRequestInit");function xgr(t){let e;return t?.headers&&(e=Egr(t.headers)),{method:t?.method||"GET",headers:e,body:t?.body,signal:t?.signal||void 0}}s(xgr,"convertToFetchOptions");function Egr(t){let e={};if(t instanceof Headers)for(let[r,n]of t.entries())e[r]=n;else if(Array.isArray(t))for(let[r,n]of t)e[r]=n;else return t;return e}s(Egr,"convertHeaders");async function bgr(t){let e=t.body(),r=null;if(e)r=Igr(e);else{let n=await t.text();r=wgr(n)}return new globalThis.Response(r,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)})}s(bgr,"convertToWebResponse");function Igr(t){return new ReadableStream({start(e){let r=Tgr(t,e);return()=>r()},cancel(){"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}})}s(Igr,"createReadableStreamFromNodeStream");function Tgr(t,e){let r=s(a=>{e.enqueue(new Uint8Array(a))},"onData"),n=s(()=>{e.close(),o()},"onEnd"),i=s(a=>{e.error(a),o()},"onError"),o=s(()=>{t.off("data",r),t.off("end",n),t.off("error",i)},"cleanup");return t.on("data",r),t.on("end",n),t.on("error",i),o}s(Tgr,"setupStreamHandlers");function wgr(t){return new ReadableStream({start(e){e.enqueue(new TextEncoder().encode(t)),e.close()}})}s(wgr,"createReadableStreamFromText");d();var ase=class extends Yh{static{s(this,"GeminiProvider")}constructor(e){super(Wo.Gemini,e)}};d();var cse=class extends Yh{static{s(this,"GroqProvider")}constructor(e){super(Wo.Groq,e)}};d();var lse=class extends Yh{static{s(this,"OpenAIProvider")}constructor(e){super(Wo.OpenAI,e)}};d();var Cpt=16e3,use=class extends Yh{static{s(this,"OpenRouterProvider")}constructor(e){super(Wo.OpenRouter,e)}async getAllModels(){try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new Za(this.ctx.get(Ai)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let i=await this.ctx.get(Hr).fetch(e,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch models: ${i.status} ${i.statusText}`);let o=await i.json();if(o.error)throw new Error(`API Error: ${JSON.stringify(o.error)}`);let a=[];for(let c of o.data)a.push({providerName:this.providerName,modelId:c.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:{name:c.name,maxInputTokens:Math.max(0,c.top_provider.context_length-Cpt),maxOutputTokens:Cpt,toolCalling:c.supported_parameters?.includes("tools")??!1,vision:c.architecture?.input_modalities?.includes("image")??!1}});return a}catch(e){throw YQ.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getFetchModelUrl(){return`${this.getBaseUrl()}/models?supported_parameters=tools`}};var mP=class{static{s(this,"BYOKProviderFactory")}constructor(e){this.providers=new Map([[Wo.OpenAI,new lse(e)],[Wo.Gemini,new ase(e)],[Wo.Groq,new cse(e)],[Wo.OpenRouter,new use(e)],[Wo.Anthropic,new sse(e)]])}getBYOKProvider(e){return this.providers.get(e)}};var Sgr=x.Object({providerName:x.Optional(x.String()),enableFetchUrl:x.Optional(x.Boolean())});async function _gr(t,e,r){try{let{providerName:n,enableFetchUrl:i}=r,o=new Za(t.get(Ai)),a=[];if(n)if(i){if(!ene(n))return[null,{code:tr.InvalidRequest,message:`enableFetchUrl is not supported for the ${n} provider`}];if(!await o.getAPIKey(n))return[null,{code:tr.InvalidRequest,message:`API key is required to fetch models from ${n}`}];let l=t.get(mP).getBYOKProvider(n);if(l){let u=await l.getAllModels(),f=new Map;u.forEach(h=>{let g=`${h.providerName}_${h.modelId}`;f.set(g,h)});let p=await o.getStoredModelConfigs(n),m=[];Object.entries(p).forEach(([h,g])=>{m.push({providerName:n,modelId:h,deploymentUrl:g.deploymentUrl,isRegistered:g.isRegistered,isCustomModel:g.isCustomModel,modelCapabilities:g.modelCapabilities})}),m.forEach(h=>{let g=`${h.providerName}_${h.modelId}`;f.set(g,h)}),a.push(...f.values())}}else{let c=await o.getStoredModelConfigs(n);Object.entries(c).forEach(([l,u])=>{a.push({providerName:n,modelId:l,deploymentUrl:u.deploymentUrl,isRegistered:u.isRegistered,isCustomModel:u.isCustomModel,modelCapabilities:u.modelCapabilities})})}else{let c=Object.values(Wo);for(let l of c){let u=await o.getStoredModelConfigs(l);Object.entries(u).forEach(([f,p])=>{a.push({providerName:l,modelId:f,deploymentUrl:p.deploymentUrl,isRegistered:p.isRegistered,isCustomModel:p.isCustomModel,modelCapabilities:p.modelCapabilities})})}}return[{models:a},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to get models: ${n instanceof Error?n.message:String(n)}`}]}}s(_gr,"handleBYOKListModelsChecked");var vpt=Ze(Sgr,_gr);d();var Rgr=x.Object({providerName:x.String(),apiKey:x.String(),modelId:x.Optional(x.String())});async function kgr(t,e,r){try{let n=new Za(t.get(Ai)),{providerName:i,apiKey:o,modelId:a}=r,c=Pw(i);if(c===1&&!a)return[null,{code:tr.InvalidRequest,message:"modelId is required for PerModelDeployment auth type"}];await n.storeAPIKey(i,o,c,a);let l=`API key saved successfully for provider ${i}`;return[{success:!0,message:a?`${l} and model ${a}`:l},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to save API key: ${n instanceof Error?n.message:String(n)}`}]}}s(kgr,"handleBYOKSaveApiKeyChecked");var xpt=Ze(Rgr,kgr);d();var Pgr=x.Object({providerName:x.String(),modelId:x.String(),isRegistered:x.Boolean(),isCustomModel:x.Boolean(),deploymentUrl:x.Optional(x.String()),apiKey:x.Optional(x.String()),modelCapabilities:x.Optional(x.Object({name:x.String(),maxInputTokens:x.Optional(x.Number()),maxOutputTokens:x.Optional(x.Number()),toolCalling:x.Boolean(),vision:x.Boolean()}))});async function Dgr(t,e,r){try{let{providerName:n,modelId:i,isRegistered:o,isCustomModel:a,deploymentUrl:c,apiKey:l,modelCapabilities:u}=r,f=new Za(t.get(Ai)),p=Pw(n);if(p===1&&!c)return[null,{code:tr.InvalidRequest,message:`deploymentUrl is required for the ${n} provider`}];if(c||u){let m={deploymentUrl:c,isRegistered:o,isCustomModel:a,modelCapabilities:u};await f.saveModelConfig(n,i,m,l,p)}else l!==void 0&&await f.storeAPIKey(n,l,p,i);return[{success:!0,message:`Model ${i} saved successfully for provider ${n}`},null]}catch(n){return[null,{code:tr.InternalError,message:`Failed to save model: ${n instanceof Error?n.message:String(n)}`}]}}s(Dgr,"handleBYOKSaveModelChecked");var Ept=Ze(Pgr,Dgr);d();var Bgr=x.Object({uri:x.String({minLength:1})});async function Ngr(t,e,r){let n=await t.get(En).getOrReadTextDocument(r);return[{status:oa(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(Ngr,"handleCheckFileStatusChecked");var bpt=Ze(Bgr,Ngr);d();var Mgr=x.Object({});function Ipt(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(Ipt,"calculatePercentRemaining");async function Lgr(t,e,r){let n=await t.get(Ki).getSession();if(n){let i=await cme(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Ipt(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Ipt(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:tr.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:tr.InternalError,message:"Not signed in"}]}s(Lgr,"handleCheckQuotaChecked");var Tpt=Ze(Mgr,Lgr);d();var Fgr=x.Object({options:x.Optional(x.Object({localChecksOnly:x.Optional(x.Boolean()),forceRefresh:x.Optional(x.Boolean())}))});async function Ogr(t,e,r){return[await t.get(Ki).checkAndUpdateStatus(r.options),null]}s(Ogr,"handleCheckStatusChecked");var wpt=Ze(Fgr,Ogr);d();d();d();d();d();d();function Spt(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(Spt,"filterUnsupportedReferences");function _pt(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(_pt,"convertToCopilotReferences");var Rpt=x.Object({type:x.Literal("github.web-search"),id:x.String(),data:x.Object({query:x.String(),type:x.String(),results:x.Optional(x.Array(x.Object({title:x.String(),excerpt:x.String(),url:x.String()})))}),metadata:x.Optional(x.Object({display_name:x.Optional(x.String()),display_icon:x.Optional(x.String())}))});var pS=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,Spt(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};d();var vl=class{static{s(this,"ConversationInspector")}};d();var w2e={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ha=class{constructor(e){this.ctx=e;this.progressEntries=new wr(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&en.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};d();d();var q1=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(Ki).getSession(),o;if(i&&new URL(i.serverUrl).hostname===n)o=i;else{let l=await this.ctx.get(dA).getAuthRecord({authAuthority:n});l&&(o={accessToken:l.oauth_token,apiUrl:`https://api.${n}/`})}if(!o&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let a={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};o&&(a.Authorization=`Bearer ${o.accessToken}`);let c=new URL(`repos/${e}/${r}`,o?.apiUrl||`https://api.${n}`).href;return this.ctx.get(Hr).fetch(c,{method:"GET",headers:a})}};d();d();d();var Ppt=Ne(pm());var H1=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Ut([(0,Ppt.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],f=new Ut(u.filter(([p,m])=>!tM(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:Op(h),m]}));return this.wrapInTicks(f)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||tM(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Ut([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function tM(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(tM,"isEmptyRange");var Dpt=Ne(require("path"));var Bpt=x.Object({uri:x.String(),visibleRange:x.Optional(Dc),selection:x.Optional(Dc)}),S2e=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(En),n=await r.getOrReadTextDocument(e),i=oa(n);if(await this.turnContext.collectFile(Jd,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new H1(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Ut([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[f,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(tM(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[f,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Ut([...l,...u])}else if(n.status==="invalid")return new Ut([`The currently open file \`${Dpt.basename(e.uri)}\` is content excluded.`])}},Jd="current-editor",dse=class{constructor(e){this._resolver=e;this.id=Jd;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new S2e(e)}};d();d();var Ul=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},_2e=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},R2e=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Iu=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new _2e(this._resolver(e),this.id,this.stepTitle)}processor(e){return new R2e(this._processor(e),this.id)}};var Npt=x.Object({name:x.String(),url:x.String()}),Mpt=x.Object({path:x.String(),head:x.Optional(x.Object({name:x.String(),upstream:x.Optional(Npt)})),remotes:x.Optional(x.Array(Npt))}),k2e=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel($1,"git repository information");let r=[];return r.push([new Ut(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Ut([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Ut([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Ut(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Ut([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Ut(r)}},$1="git-metadata",fse=class extends Iu{static{s(this,"GitMetadataSkill")}constructor(e){super($1,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new k2e(r))}};async function Lpt(t){let e=await t.skillResolver.resolve(Jd);if(e){let a=e.uri,c=IT(t.ctx,a);if(zWe(c))return{repoInfo:c,skillUsed:Jd}}let r=await t.skillResolver.resolve($1);if(!r||!r.remotes||r.remotes.length===0){en.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=Gye(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:$1}}s(Lpt,"extractRepoInfo");async function Fpt(t){let e=[];return await Qgr(t,e),await Ugr(t,e),await qgr(t,e),e}s(Fpt,"skillsToReference");async function Qgr(t,e){let r=await Hgr(t);r&&e.push(r)}s(Qgr,"addRepositoryReference");async function Ugr(t,e){let r=await $gr(t);r&&e.push(r)}s(Ugr,"addSelectionReference");async function qgr(t,e){let r=[],n=await jgr(t);n&&r.push(n),r.push(...await Ggr(t)),r.length>0&&e.push(...r)}s(qgr,"addFileReferences");async function Hgr(t){let e=await Lpt(t);if(e){let r=t.ctx.get(q1),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(Hgr,"gitMetadataToReference");async function $gr(t){let e=await t.skillResolver.resolve(Jd);if(e&&e.selection){let n=await t.ctx.get(En).getOrReadTextDocument(e),i=oa(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return Wgr(e,n.document)}}s($gr,"currentEditorToSelectionReference");function Wgr(t,e){if(t.selection&&!tM(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(Wgr,"extractSelection");async function jgr(t){let e=await t.skillResolver.resolve(Jd);if(e){let n=await t.ctx.get(En).getOrReadTextDocument(e),i=oa(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(jgr,"currentEditorToFileReference");async function Ggr(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(En);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=oa(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(Ggr,"fileReferenceToPlatformFileReference");d();d();d();d();var jpt=Ne(hse()),N2e=Ne(require("path"));var Gpt=500,rAr=Math.floor(.25*Gpt),gse=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=N2e.default.extname(__filename)===".ts"?N2e.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await jpt.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:f})=>{let m=await require(l).getTokenizerAsync(c),h=m.tokenize(o),g=h.length,A=[],y=0;for(;y<g;){let E=y+u>=g,b=E?g:y+u,S=h.slice(y,b),R=m.detokenize(S),B=o.indexOf(R);A.push({id:`${a.toString()}#${y}`,chunk:R,tokenCount:S.length,range:{start:B,end:B+R.length}}),y=E?b:b-f}return A},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:Gpt,overlap:rAr}}),n}};var nAr="fixedSize",iAr=new Map([["fixedSize",gse]]);function Vpt(t){let e=t==="default"?nAr:t,r=iAr.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(Vpt,"getChunkingAlgorithm");d();d();var Ase=Ne(AI()),W1=Ne(require("fs")),zpt=require("os"),lg=Ne(require("path")),rM=require("process");var M2e=5e4,oAr=new Ct("workspaceChunks"),yse=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Pi(r.uri),i=(0,Ase.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=lg.join(sAr(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,Ase.SHA256)(e).toString().substring(0,this.pathHashLength),n=lg.basename(e);return lg.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await W1.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await W1.promises.mkdir(lg.dirname(n),{recursive:!0}),await W1.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){oAr.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await W1.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await W1.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=lg.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(lg.join(this.cacheRootPath,n))}}async getFileHash(e){let r=es(e),n="";return r&&(n=await W1.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,Ase.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=es(e);if(!i)return;async function o(p){try{return(await W1.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let f={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,f)}async deleteChunksForSource(e){let r=kl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=es(e);if(!r)return[];let n;try{n=await W1.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=kl(lg.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await W1.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function sAr(){return rM.env.XDG_CACHE_HOME&&lg.isAbsolute(rM.env.XDG_CACHE_HOME)?rM.env.XDG_CACHE_HOME+"/github-copilot":(0,zpt.platform)()==="win32"?rM.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":rM.env.HOME+"/.cache/github-copilot"}s(sAr,"getXdgCachePath");var L2e=1e4;var Cse=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new O2e;this.status="notStarted",this.workspaceChunks=new yse(e,r),this.cancellationToken=new F2e,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(zd).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>L2e&&(this._fileCountExceeded=!0,n=n.slice(0,L2e));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){ja(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>M2e&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){ja(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>M2e&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>L2e&&(this._fileCountExceeded=!0),eYe(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Jo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},F2e=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},O2e=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var Ac=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=Vpt(r),i=new n;return new Cse(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=Gr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Bt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=Gr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Bt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};d();d();d();d();d();function xse(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(xse,"toChatModeEnum");var mS=class{constructor(e,r){this.request=e;this.telemetryId=Er();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}extractContextFilesUri(){let e=[...(this.request.references??[]).filter(r=>r.type==="file").map(r=>r.uri).filter(Boolean),...this.request.activeEditor?.uri?[this.request.activeEditor.uri]:[]];return Array.from(new Set(e))}},vse=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=Er();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};d();d();d();var Kpt={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},Ypt="Alright, This response contains a code citation.";d();var Jpt=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;d();d();var Xpt=Ne(require("fs")),Of=Ne(require("path"));var Q2e=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],U2e="test_",Iq={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},Tq=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Pi(e),n=Of.extname(r).replace(".",""),i=Iq[n]??{location:"sameFolder",prefix:U2e,suffix:Q2e},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let f=r.replace(`.${n}`,u+"."+n);o.push(f)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=es(Pd(e)),c===void 0)return}else{let u=es(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let f=Of.join(c,u),p=this.parseTestFilePath(f);if(p&&await this.fileExists(p))return p}let l=kl(c);if(await this.fileExists(l))return Vi(l,o[0])}parseTestFilePath(e){try{return kl(e)}catch(r){un.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Pi(e),n=Of.extname(r).replace(".",""),i=Iq[n]??{location:"sameFolder",prefix:U2e,suffix:Q2e},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let f=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(f)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=Pd(e):c=this.determineImplFolder(e);for(let l of o){let u=Vi(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=es(e);if(r===void 0)return;let n=Of.extname(Pi(e)).replace(".",""),i,o=Iq[n]?.location??"sameFolder";o==="sameFolder"?i=Of.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,Iq[n]);if(a.length>0)return kl(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${Of.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return Xpt.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&es(this.baseUri))??"",i=Of.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(Of.sep)}getRelativeTestFolder(e,r,n,i){let o=Of.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=Of.extname(Pi(e)).replace(".",""),n=Pd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function wq(t){let e=Pi(t),r=Of.extname(e),n=Iq[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(Q2e.some(o=>e.endsWith(o+r))||e.startsWith(U2e))}s(wq,"isTestFile");d();var Zpt=["indexed","indexing","not_indexed"],hS=class{constructor(){this._cache=new wr(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Ym(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<1800*1e3}async isRepoIndexed(e,r,n,i=!1){let o=gx(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};d();d();d();async function emt(t,e,r,n){let i=Ni(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get($r).getToken(),l=QK(t,c,"embeddings"),u=c.token,f=0;for(;f<o.length&&!n.isCancellationRequested;){let p=o.slice(f,f+e.maxBatchSize),m=await aAr(t,l,u,e.modelId,p,n);a.push(...m||[]),f+=e.maxBatchSize}return a.length?a:void 0}s(emt,"fetchEmbeddings");async function aAr(t,e,r,n,i,o){let a=Er(),c=i.map(u=>u.text),l=await yx(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,DC(t));if(l.status!==200||o.isCancellationRequested){ja(t,new PE(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(f=>({id:i[f.index].id,embedding:f.embedding}))}catch{return}}s(aAr,"sendEmbeddingsRequest");d();d();var Ese=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var cAr="cosine",lAr=new Map([["cosine",Ese]]);function tmt(t){let e=t==="default"?cAr:t,r=lAr.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(tmt,"getScoringAlgorithm");d();var mm=class{constructor(){this.workspaceScoringProviders=new wr(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=tmt(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var rmt={modelFamily:HK.textEmbedding3Small,scoringType:"default",dimensions:null};async function nmt(t,e,r,n,i,o,a,c=rmt){let l={...rmt,...c},u=dAr(t,e,r,n);en.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let f=await t.get(fa).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(f===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),m=await emt(t,f,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let A=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let y=performance.now(),E=fAr(t,e,m,A,l.scoringType),b=performance.now();a.rerankingTimeMs=Math.floor(b-y);let S=E.slice(0,i);return en.debug(t,`EmbeddingsReranker: Returning ${S.length} snippets`),S.map(B=>u.find(L=>L.id===B.id).id)}s(nmt,"rerankSnippets");function dAr(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(dAr,"formatEmbeddingsInput");function fAr(t,e,r,n,i){let o=t.get(mm);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(fAr,"scoreEmbeddings");d();d();d();var H2e=Ne(hse());var pAr=.75,mAr=1.2,hAr=47,bse=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await Ise();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,hAr),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(Ac).getChunks(this.workspaceFolder),n=_x(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=_x(n,o=>o.chunk);return await gAr(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(Ac).getChunks(this.workspaceFolder),a=new q2e(i);for await(let c of o){let l=await AAr({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function gAr(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=H2e.job(({snippet:f,keywords:p})=>p.map(h=>f.includes(h)?1:0),{data:{snippet:l,keywords:t}}).then(f=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,f[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(gAr,"calculateIDFValues");async function AAr(t,e,r,n){return{score:await H2e.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:f,b:p})=>{let m=0;for(let h of o){let g=u[h],A=(a.match(new RegExp(h,"g"))||[]).length,y=g*(A*(f+1)),E=A+f*(1-p+p*c/l);m+=y/E}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:mAr,b:pAr}}),...t}}s(AAr,"calculateBM25Score");var q2e=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var CAr="bm25",vAr=new Map([["bm25",bse]]);function imt(t){let e=t==="default"?CAr:t,r=vAr.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(imt,"getRankingAlgorithm");var ud=class{constructor(){this.workspaceRankingProviders=new wr(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=imt(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};d();async function omt(t,e){let r=t.ctx,n=await Jo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(dd).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new ua(r),l=await Oc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let f=u.toolCalls[0],p=o.toolConfig?.extractArguments(f).keywords;return!p||!Array.isArray(p)?void 0:(en.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let f="reason"in u?u.reason:"";ja(r,new PE(`Failed to request user query synonyms, result type: ${u.type}, reason: ${f}`),"LocalSnippetProvider.parseUserQuery")}}s(omt,"parseUserQuery");var smt=Ne(pm());var PE=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},Tse=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(Ac),o=i.status(e.turn.workspaceFolder),a=n.get(ud),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(f=>setTimeout(()=>f("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(Ac).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await omt(e,e.cancelationToken)}catch(g){let A=new PE(g);ja(i,A,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let f=i.get(ud),p=[],m=performance.now();try{let g=await f.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let A=new PE(g);ja(i,A,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=on(e.turn.request.message),c=[];try{c=await nmt(o,i,a,r,5,e.cancelationToken,n)}catch(f){let p=new PE(f);ja(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(En);for(let f of c){let p=f.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===f);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),A=m.document.positionAt(h.range.end),y=vs.range(g,A);l.push({uri:m.document.uri,range:y,snippet:h.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...oYe},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return en.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(Ac).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return smt.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var cmt=Ne(amt()),_se=Ne(hse()),lmt=Ne(require("os")),umt=Ne(pm());var bAr=Math.min(Math.max(Math.ceil(lmt.cpus().length/2),1),10),Sq=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new cmt.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await _se.start({maxWorkers:bAr})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await _se.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},Ise=Sq.startWorkerPool.bind(Sq);var QKi=x.Object({uri:x.String(),snippet:x.String(),range:x.Object({start:x.Object({line:x.Number(),character:x.Number()}),end:x.Object({line:x.Number(),character:x.Number()})})}),j2e=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(nM);return}let r=[],n=this.turnContext.ctx.get(En),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let f=new H1(u.document,l,l),p=new Ut([c]),h=wq(a)?.5:.8;r.push([`Code excerpt from file \`${es(a)}\`:`,1],[f.wrapInTicks(p,h),1]),await this.turnContext.collectFile(iM,a,oa(u),l)}}if(r.length>0)return r.unshift([new Ut(["The user wants you to consider the following snippets when computing your answer."]),1]),new Ut(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},nM="collect-project-context",wse=class extends M8{constructor(r,n=[new Tse]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(B1).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async didAddWorkspace(r){if(!await this.isEnabled()||(this.workerPoolToken=await Ise(),!r.uri))return;let n=this.ctx.get(Ac),i=this.ctx.get(zd),o=this.ctx.get(ud),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async didRemoveWorkspace(r){if(!await this.isEnabled())return;let n=this.ctx.get(Ac);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(ud).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(ud).terminateRanking(this.ctx,r),this.ctx.get(mm).terminateScoring(this.ctx,r),n.workspaceCount===0&&await Sq.forceStopWorkerPool()}async didTerminateWorkspaceSubfolders(r,n){let i=this.ctx.get(Ac),o=this.ctx.get(ud),a=this.ctx.get(mm);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async didChangeFiles(r){if(!await this.isEnabled())return;let n=await Ise();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(Ac),c=this.ctx.get(ud);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}isEnabled(){return Promise.resolve(!0)}async resolveSkill(r){await r.steps.start(nM,"Collecting relevant project context"),await r.info(umt.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of Zpt){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await sYe(r,a.providerType,l),c.length===0){await r.steps.error(nM,"No project context found");return}return await r.steps.finish(nM),c}case"indexing":{await r.steps.error(nM,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(nM,"No project context available");return}}}},iM="project-context",Sse=class extends Iu{static{s(this,"ProjectContextSkill")}constructor(e){super(iM,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new j2e(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};d();var dmt=x.Object({labels:x.Array(x.String())}),G2e=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Ut(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Ut([`- ${n}`]),.9]),this.turnContext.collectLabel(hy,n)}),new Ut(r)}},hy="project-labels",Rse=class{constructor(e){this._resolver=e;this.id=hy;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new G2e(e)}};d();var kse=Ne(pm());var pmt={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},mmt=kse.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,hmt=kse.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,IAr=kse.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,V2e=`

`,fmt=mmt+V2e+hmt;function gmt(t){let e=1;if(t.length===0)return{reply:fmt,vulnerabilities:e};if(t==="0")return{reply:fmt,vulnerabilities:0};if(t==="help")return{reply:IAr,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=mmt+V2e:i==="c"&&(n+=hmt+V2e);return{reply:n.trimEnd(),vulnerabilities:e}}s(gmt,"parseVulnerabilitiesInstructions");var Amt=Ne(pm());var TAr="Oops, your response got filtered. Vote down if you think this shouldn't have happened",wAr="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",z2e=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},SAr=new z2e,K2e=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Tu(wAr,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},_Ar=new K2e,Y2e=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new Tu("Alright, I'm producing a notification",void 0,[],o)}},RAr=new Y2e,J2e=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Tu(TAr,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},kAr=new J2e,X2e=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Tu(await Cmt(e))}},PAr=new X2e,Z2e=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[hy,Jd]}instructions(e,r){return"Create a function that prints a christmas tree"}},DAr=new Z2e,eRe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Tu(on(e.turn.request.message))}},BAr=new eRe,tRe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(wu).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=Amt.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Tu(i)}return new Tu("No prompt available")}},NAr=new tRe,rRe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Tu(await vmt(e,n,i))}},MAr=new rRe,nRe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=gmt(r);for(let o=0;o<i;o++)e.turn.annotations.push(pmt);return new Tu(n,void 0,e.turn.annotations)}},LAr=new nRe,iRe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(Kpt),new Tu(Ypt,void 0,e.turn.annotations)}},FAr=new iRe,oRe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Tu(Jpt)}},OAr=new oRe,sRe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},QAr=new sRe,aRe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[iM]}},UAr=new aRe,cRe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Tu("Alright, I'm producing a notification",void 0,[],[],[],e)}},qAr=new cRe;function ymt(){return[SAr,_Ar,RAr,kAr,DAr,PAr,BAr,NAr,MAr,LAr,FAr,qAr,OAr,QAr,UAr]}s(ymt,"getDebugTemplates");d();d();function AS(t,e){if(t.length==0)return new Ut([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Ut(r)}s(AS,"weighElidableList");var xmt=x.Object({uri:x.String(),problems:x.Array(x.Object({message:x.String(),range:Dc}))}),lRe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(En),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(yS,e.uri,oa(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(yS,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(yS,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Ut([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),AS(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Ut([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Ut([["```"+c,1],[Op(a),.8],["```",1]]))}return new Ut(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Jo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ut([n])}},yS="problems-in-active-document",Pse=class extends Iu{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(yS,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new lRe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};d();d();var Dse=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(Cr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new Tq(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=wq(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!wq(e))return;let n=this.turnContext.ctx.get(Cr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new Tq(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${HAr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${$Ar} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${WAr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(En),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(gy,e,oa(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[Op(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(Mi).stat(e),!0}catch{return!1}}}},HAr="Code excerpt from the implementation source file",$Ar="Code excerpt from the test file",WAr="Code excerpt from an example test file";var Emt=x.Object({currentFileUri:x.String(),sourceFileUri:x.Optional(x.String()),testFileUri:x.Optional(x.String())}),dRe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(En),n=new Dse(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(gy,e.testFileUri,oa(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(gy,e.sourceFileUri,oa(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(gy,e.sourceFileUri,oa(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(gy,e.testFileUri,oa(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},gy="test-context",Bse=class extends Iu{static{s(this,"TestContextSkill")}constructor(e){super(gy,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new dRe(r))}};d();var bmt=Ne(pm());var Imt=x.Object({failures:x.Array(x.Object({testName:x.String(),testSuite:x.Optional(x.String()),testFileUri:x.String(),failureReason:x.Optional(x.String()),testLocation:Dc}))}),fRe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(AP,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Ut(["The latest test run produced the following failures and errors:"]);return new Ut([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(En),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(AP,o,oa(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),f=this.appendCode(u,l,c.document);n.push([f,1])}}if(n.length>0)return new Ut(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Ut([bmt.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Ut(n)}appendCode(e,r,n){let i=[new Ut([`
The code of file \`${r}\` is:
`]),.6],o=[new Ut([["```"+n.detectedLanguageId,1],[Op(n.getText()),.9],["```",1]]),.7];return new Ut([[e,1],i,o])}},AP="test-failures",Nse=class extends Iu{static{s(this,"TestFailuresSkill")}constructor(e){super(AP,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new fRe(r))}};var ug=Ne(pm());var Tu=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},yP=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},jAr=new yP("tests","Generate unit tests","Generate Tests",ug.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[gy,AP],["chat-panel","agent-panel","editor"]),GAr=new yP("simplify","Simplify the code","Simplify This",ug.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","agent-panel","inline"],ug.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),VAr=new yP("fix","Fix problems and compile errors","Fix This",ug.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[yS],["editor","chat-panel","agent-panel","inline"],ug.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),zAr=new yP("explain","Explain how the code works","Explain This",ug.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","agent-panel","inline"],ug.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),KAr=new yP("doc","Document the current selection of code","Generate Docs",ug.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","agent-panel","inline"],ug.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),pRe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel","agent-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=gRe(e.conversation),n=ug.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://aka.ms/copilot-jetbrains-feedback) to share your feedback.
            `;return r?new Tu(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Tu(n)}},YAr=new pRe,mRe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel","agent-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=hRe(e.ctx).filter(i=>i!=this),n=ug.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Tu(n)}},JAr=new mRe;function CP(){return[jAr,GAr,VAr,zAr,KAr,YAr,JAr,...ymt()]}s(CP,"getPromptTemplates");function hRe(t){let e=CP();return!R9(t)&&!Vg(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(hRe,"getUserFacingPromptTemplates");var ARe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},eo=class{constructor(e){this.ctx=e;this.conversations=new wr(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new vse([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(Ul).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new ARe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(f=>({skillId:f}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),this.determineAndApplyPromptTemplate(this.ctx,u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&on(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(on(r.request.message),"@");(await G1(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(on(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(on(r.request.message),"/"),o=CP().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}determineAndApplyPromptTemplate(e,r,n){if(on(n.request.message).trim().startsWith("/")){let[i,o]=this.extractKeywordAndQuestionFromRequest(on(n.request.message),"/"),c=e.get(JA).getPromptTemplate(i);c&&(n.request.message=`Follow instructions in [${c.name}](${c.uri}). ${o}`,n.request.references=[...n.request.references||[],{type:"file",uri:c.uri}])}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(Ul).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};d();function Umt(t){return typeof t>"u"||t===null}s(Umt,"isNothing");function XAr(t){return typeof t=="object"&&t!==null}s(XAr,"isObject");function ZAr(t){return Array.isArray(t)?t:Umt(t)?[]:[t]}s(ZAr,"toArray");function eyr(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(eyr,"extend");function tyr(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(tyr,"repeat");function ryr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(ryr,"isNegativeZero");var nyr=Umt,iyr=XAr,oyr=ZAr,syr=tyr,ayr=ryr,cyr=eyr,ql={isNothing:nyr,isObject:iyr,toArray:oyr,repeat:syr,isNegativeZero:ayr,extend:cyr};function qmt(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(qmt,"formatError");function Rq(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=qmt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(Rq,"YAMLException$1");Rq.prototype=Object.create(Error.prototype);Rq.prototype.constructor=Rq;Rq.prototype.toString=s(function(e){return this.name+": "+qmt(this,e)},"toString");var z0=Rq;function yRe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(yRe,"getLine");function CRe(t,e){return ql.repeat(" ",e-t.length)+t}s(CRe,"padStart");function lyr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+f+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=yRe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=ql.repeat(" ",e.indent)+CRe((t.line-l+1).toString(),f)+" | "+u.str+`
`+c;for(u=yRe(t.buffer,n[a],i[a],t.position,p),c+=ql.repeat(" ",e.indent)+CRe((t.line+1).toString(),f)+" | "+u.str+`
`,c+=ql.repeat("-",e.indent+f+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=yRe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=ql.repeat(" ",e.indent)+CRe((t.line+l+1).toString(),f)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(lyr,"makeSnippet");var uyr=lyr,dyr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],fyr=["scalar","sequence","mapping"];function pyr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(pyr,"compileStyleAliases");function myr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(dyr.indexOf(r)===-1)throw new z0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=pyr(e.styleAliases||null),fyr.indexOf(this.kind)===-1)throw new z0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(myr,"Type$1");var Xd=myr;function Tmt(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(Tmt,"compileList");function hyr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(hyr,"compileMap");function xRe(t){return this.extend(t)}s(xRe,"Schema$1");xRe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof Xd)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new z0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Xd))throw new z0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new z0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new z0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Xd))throw new z0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(xRe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Tmt(i,"implicit"),i.compiledExplicit=Tmt(i,"explicit"),i.compiledTypeMap=hyr(i.compiledImplicit,i.compiledExplicit),i},"extend");var gyr=xRe,Ayr=new Xd("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),yyr=new Xd("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),Cyr=new Xd("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),vyr=new gyr({explicit:[Ayr,yyr,Cyr]});function xyr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(xyr,"resolveYamlNull");function Eyr(){return null}s(Eyr,"constructYamlNull");function byr(t){return t===null}s(byr,"isNull");var Iyr=new Xd("tag:yaml.org,2002:null",{kind:"scalar",resolve:xyr,construct:Eyr,predicate:byr,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function Tyr(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(Tyr,"resolveYamlBoolean");function wyr(t){return t==="true"||t==="True"||t==="TRUE"}s(wyr,"constructYamlBoolean");function Syr(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(Syr,"isBoolean");var _yr=new Xd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Tyr,construct:wyr,predicate:Syr,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Ryr(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(Ryr,"isHexCode");function kyr(t){return 48<=t&&t<=55}s(kyr,"isOctCode");function Pyr(t){return 48<=t&&t<=57}s(Pyr,"isDecCode");function Dyr(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Ryr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!kyr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Pyr(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(Dyr,"resolveYamlInteger");function Byr(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(Byr,"constructYamlInteger");function Nyr(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ql.isNegativeZero(t)}s(Nyr,"isInteger");var Myr=new Xd("tag:yaml.org,2002:int",{kind:"scalar",resolve:Dyr,construct:Byr,predicate:Nyr,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Lyr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Fyr(t){return!(t===null||!Lyr.test(t)||t[t.length-1]==="_")}s(Fyr,"resolveYamlFloat");function Oyr(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(Oyr,"constructYamlFloat");var Qyr=/^[-+]?[0-9]+e/;function Uyr(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ql.isNegativeZero(t))return"-0.0";return r=t.toString(10),Qyr.test(r)?r.replace("e",".e"):r}s(Uyr,"representYamlFloat");function qyr(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ql.isNegativeZero(t))}s(qyr,"isFloat");var Hyr=new Xd("tag:yaml.org,2002:float",{kind:"scalar",resolve:Fyr,construct:Oyr,predicate:qyr,represent:Uyr,defaultStyle:"lowercase"}),$yr=vyr.extend({implicit:[Iyr,_yr,Myr,Hyr]}),Wyr=$yr,Hmt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),$mt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function jyr(t){return t===null?!1:Hmt.exec(t)!==null||$mt.exec(t)!==null}s(jyr,"resolveYamlTimestamp");function Gyr(t){var e,r,n,i,o,a,c,l=0,u=null,f,p,m;if(e=Hmt.exec(t),e===null&&(e=$mt.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(f=+e[10],p=+(e[11]||0),u=(f*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&m.setTime(m.getTime()-u),m}s(Gyr,"constructYamlTimestamp");function Vyr(t){return t.toISOString()}s(Vyr,"representYamlTimestamp");var zyr=new Xd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:jyr,construct:Gyr,instanceOf:Date,represent:Vyr});function Kyr(t){return t==="<<"||t===null}s(Kyr,"resolveYamlMerge");var Yyr=new Xd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Kyr}),wRe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Jyr(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=wRe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(Jyr,"resolveYamlBinary");function Xyr(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=wRe,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(Xyr,"constructYamlBinary");function Zyr(t){var e="",r=0,n,i,o=t.length,a=wRe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(Zyr,"representYamlBinary");function eCr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(eCr,"isBinary");var tCr=new Xd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Jyr,construct:Xyr,predicate:eCr,represent:Zyr}),rCr=Object.prototype.hasOwnProperty,nCr=Object.prototype.toString;function iCr(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,nCr.call(i)!=="[object Object]")return!1;for(o in i)if(rCr.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(iCr,"resolveYamlOmap");function oCr(t){return t!==null?t:[]}s(oCr,"constructYamlOmap");var sCr=new Xd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:iCr,construct:oCr}),aCr=Object.prototype.toString;function cCr(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],aCr.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(cCr,"resolveYamlPairs");function lCr(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(lCr,"constructYamlPairs");var uCr=new Xd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:cCr,construct:lCr}),dCr=Object.prototype.hasOwnProperty;function fCr(t){if(t===null)return!0;var e,r=t;for(e in r)if(dCr.call(r,e)&&r[e]!==null)return!1;return!0}s(fCr,"resolveYamlSet");function pCr(t){return t!==null?t:{}}s(pCr,"constructYamlSet");var mCr=new Xd("tag:yaml.org,2002:set",{kind:"mapping",resolve:fCr,construct:pCr}),Wmt=Wyr.extend({implicit:[zyr,Yyr],explicit:[tCr,sCr,uCr,mCr]}),vS=Object.prototype.hasOwnProperty,Mse=1,jmt=2,Gmt=3,Lse=4,vRe=1,hCr=2,wmt=3,gCr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ACr=/[\x85\u2028\u2029]/,yCr=/[,\[\]\{\}]/,Vmt=/^(?:!|!!|![a-z\-]+!)$/i,zmt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Smt(t){return Object.prototype.toString.call(t)}s(Smt,"_class");function V1(t){return t===10||t===13}s(V1,"is_EOL");function xP(t){return t===9||t===32}s(xP,"is_WHITE_SPACE");function K0(t){return t===9||t===32||t===10||t===13}s(K0,"is_WS_OR_EOL");function sM(t){return t===44||t===91||t===93||t===123||t===125}s(sM,"is_FLOW_INDICATOR");function CCr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(CCr,"fromHexCode");function vCr(t){return t===120?2:t===117?4:t===85?8:0}s(vCr,"escapedHexLen");function xCr(t){return 48<=t&&t<=57?t-48:-1}s(xCr,"fromDecimalCode");function _mt(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(_mt,"simpleEscapeSequence");function ECr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(ECr,"charFromCodepoint");var Kmt=new Array(256),Ymt=new Array(256);for(vP=0;vP<256;vP++)Kmt[vP]=_mt(vP)?1:0,Ymt[vP]=_mt(vP);var vP;function bCr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Wmt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(bCr,"State$1");function Jmt(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=uyr(r),new z0(e,r)}s(Jmt,"generateError");function pn(t,e){throw Jmt(t,e)}s(pn,"throwError");function Fse(t,e){t.onWarning&&t.onWarning.call(null,Jmt(t,e))}s(Fse,"throwWarning");var Rmt={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&pn(e,"duplication of %YAML directive"),n.length!==1&&pn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&pn(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&pn(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Fse(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&pn(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Vmt.test(i)||pn(e,"ill-formed tag handle (first argument) of the TAG directive"),vS.call(e.tagMap,i)&&pn(e,'there is a previously declared suffix for "'+i+'" tag handle'),zmt.test(o)||pn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{pn(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function CS(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||pn(t,"expected valid JSON character");else gCr.test(c)&&pn(t,"the stream contains non-printable characters");t.result+=c}}s(CS,"captureSegment");function kmt(t,e,r,n){var i,o,a,c;for(ql.isObject(r)||pn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],vS.call(e,o)||(e[o]=r[o],n[o]=!0)}s(kmt,"mergeMappings");function aM(t,e,r,n,i,o,a,c,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&pn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Smt(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Smt(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)kmt(t,e,o[u],r);else kmt(t,e,o,r);else!t.json&&!vS.call(r,i)&&vS.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,pn(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(aM,"storeMappingPair");function SRe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):pn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(SRe,"readLineBreak");function xl(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;xP(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(V1(i))for(SRe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Fse(t,"deficient indentation"),n}s(xl,"skipSeparationSpace");function Use(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||K0(r)))}s(Use,"testDocumentSeparator");function _Re(t,e){e===1?t.result+=" ":e>1&&(t.result+=ql.repeat(`
`,e-1))}s(_Re,"writeFoldedLines");function ICr(t,e,r){var n,i,o,a,c,l,u,f,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),K0(h)||sM(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),K0(i)||r&&sM(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),K0(i)||r&&sM(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),K0(n))break}else{if(t.position===t.lineStart&&Use(t)||r&&sM(h))break;if(V1(h))if(l=t.line,u=t.lineStart,f=t.lineIndent,xl(t,!1,-1),t.lineIndent>=e){c=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=f;break}}c&&(CS(t,o,a,!1),_Re(t,t.line-l),o=a=t.position,c=!1),xP(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return CS(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(ICr,"readPlainScalar");function TCr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(CS(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else V1(r)?(CS(t,n,i,!0),_Re(t,xl(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Use(t)?pn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);pn(t,"unexpected end of the stream within a single quoted scalar")}s(TCr,"readSingleQuotedScalar");function wCr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return CS(t,r,t.position,!0),t.position++,!0;if(c===92){if(CS(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),V1(c))xl(t,!1,e);else if(c<256&&Kmt[c])t.result+=Ymt[c],t.position++;else if((a=vCr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=CCr(c))>=0?o=(o<<4)+a:pn(t,"expected hexadecimal character");t.result+=ECr(o),t.position++}else pn(t,"unknown escape sequence");r=n=t.position}else V1(c)?(CS(t,r,n,!0),_Re(t,xl(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Use(t)?pn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}pn(t,"unexpected end of the stream within a double quoted scalar")}s(wCr,"readDoubleQuotedScalar");function SCr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,f,p,m,h,g=Object.create(null),A,y,E,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,h=!1,c=[];else if(b===123)f=125,h=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(xl(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=c,!0;r?b===44&&pn(t,"expected the node content, but found ','"):pn(t,"missed comma between flow collection entries"),y=A=E=null,p=m=!1,b===63&&(u=t.input.charCodeAt(t.position+1),K0(u)&&(p=m=!0,t.position++,xl(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,cM(t,e,Mse,!1,!0),y=t.tag,A=t.result,xl(t,!0,e),b=t.input.charCodeAt(t.position),(m||t.line===n)&&b===58&&(p=!0,b=t.input.charCodeAt(++t.position),xl(t,!0,e),cM(t,e,Mse,!1,!0),E=t.result),h?aM(t,c,g,y,A,E,n,i,o):p?c.push(aM(t,null,g,y,A,E,n,i,o)):c.push(A),xl(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}pn(t,"unexpected end of the stream within a flow collection")}s(SCr,"readFlowCollection");function _Cr(t,e){var r,n,i=vRe,o=!1,a=!1,c=e,l=0,u=!1,f,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)vRe===i?i=p===43?wmt:hCr:pn(t,"repeat of a chomping mode identifier");else if((f=xCr(p))>=0)f===0?pn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?pn(t,"repeat of an indentation width identifier"):(c=e+f-1,a=!0);else break;if(xP(p)){do p=t.input.charCodeAt(++t.position);while(xP(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!V1(p)&&p!==0)}for(;p!==0;){for(SRe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),V1(p)){l++;continue}if(t.lineIndent<c){i===wmt?t.result+=ql.repeat(`
`,o?1+l:l):i===vRe&&o&&(t.result+=`
`);break}for(n?xP(p)?(u=!0,t.result+=ql.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=ql.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=ql.repeat(`
`,l):t.result+=ql.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!V1(p)&&p!==0;)p=t.input.charCodeAt(++t.position);CS(t,r,t.position,!1)}return!0}s(_Cr,"readBlockScalar");function Pmt(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pn(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!K0(a))));){if(c=!0,t.position++,xl(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,cM(t,e,Gmt,!1,!0),o.push(t.result),xl(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)pn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(Pmt,"readBlockSequence");function RCr(t,e,r){var n,i,o,a,c,l,u=t.tag,f=t.anchor,p={},m=Object.create(null),h=null,g=null,A=null,y=!1,E=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),b=t.input.charCodeAt(t.position);b!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pn(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&K0(n))b===63?(y&&(aM(t,p,m,h,g,null,a,c,l),h=g=A=null),E=!0,y=!0,i=!0):y?(y=!1,i=!0):pn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(a=t.line,c=t.lineStart,l=t.position,!cM(t,r,jmt,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);xP(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),K0(b)||pn(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(aM(t,p,m,h,g,null,a,c,l),h=g=A=null),E=!0,y=!1,i=!1,h=t.tag,g=t.result;else if(E)pn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(E)pn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===o||t.lineIndent>e)&&(y&&(a=t.line,c=t.lineStart,l=t.position),cM(t,e,Lse,!0,i)&&(y?g=t.result:A=t.result),y||(aM(t,p,m,h,g,A,a,c,l),h=g=A=null),xl(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)pn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&aM(t,p,m,h,g,null,a,c,l),E&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=p),E}s(RCr,"readBlockMapping");function kCr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&pn(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):pn(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!K0(a);)a===33&&(n?pn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Vmt.test(i)||pn(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),yCr.test(o)&&pn(t,"tag suffix cannot contain flow indicator characters")}o&&!zmt.test(o)&&pn(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{pn(t,"tag name is malformed: "+o)}return r?t.tag=o:vS.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:pn(t,'undeclared tag handle "'+i+'"'),!0}s(kCr,"readTagProperty");function PCr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&pn(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!K0(r)&&!sM(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&pn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(PCr,"readAnchorProperty");function DCr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!K0(n)&&!sM(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&pn(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),vS.call(t.anchorMap,r)||pn(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xl(t,!0,-1),!0}s(DCr,"readAlias");function cM(t,e,r,n,i){var o,a,c,l=1,u=!1,f=!1,p,m,h,g,A,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=Lse===r||Gmt===r,n&&xl(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;kCr(t)||PCr(t);)xl(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||Lse===r)&&(Mse===r||jmt===r?A=e:A=e+1,y=t.position-t.lineStart,l===1?c&&(Pmt(t,y)||RCr(t,y,A))||SCr(t,A)?f=!0:(a&&_Cr(t,A)||TCr(t,A)||wCr(t,A)?f=!0:DCr(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&pn(t,"alias node should not have any properties")):ICr(t,A,Mse===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(f=c&&Pmt(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&pn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(vS.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||pn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&pn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):pn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}s(cM,"composeNode");function BCr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(xl(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!K0(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&pn(t,"directive name must not be less than one character in length");a!==0;){for(;xP(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!V1(a));break}if(V1(a))break;for(r=t.position;a!==0&&!K0(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&SRe(t),vS.call(Rmt,n)?Rmt[n](t,n,i):Fse(t,'unknown document directive "'+n+'"')}if(xl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xl(t,!0,-1)):o&&pn(t,"directives end mark is expected"),cM(t,t.lineIndent-1,Lse,!1,!0),xl(t,!0,-1),t.checkLineBreaks&&ACr.test(t.input.slice(e,t.position))&&Fse(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Use(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xl(t,!0,-1));return}if(t.position<t.length-1)pn(t,"end of the stream or a document separator is expected");else return}s(BCr,"readDocument");function Xmt(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new bCr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,pn(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)BCr(r);return r.documents}s(Xmt,"loadDocuments");function NCr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Xmt(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(NCr,"loadAll$1");function MCr(t,e){var r=Xmt(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new z0("expected a single document in the stream, but found more")}}s(MCr,"load$1");var LCr=NCr,FCr=MCr,Zmt={loadAll:LCr,load:FCr},eht=Object.prototype.toString,tht=Object.prototype.hasOwnProperty,RRe=65279,OCr=9,kq=10,QCr=13,UCr=32,qCr=33,HCr=34,ERe=35,$Cr=37,WCr=38,jCr=39,GCr=42,rht=44,VCr=45,Ose=58,zCr=61,KCr=62,YCr=63,JCr=64,nht=91,iht=93,XCr=96,oht=123,ZCr=124,sht=125,Zd={};Zd[0]="\\0";Zd[7]="\\a";Zd[8]="\\b";Zd[9]="\\t";Zd[10]="\\n";Zd[11]="\\v";Zd[12]="\\f";Zd[13]="\\r";Zd[27]="\\e";Zd[34]='\\"';Zd[92]="\\\\";Zd[133]="\\N";Zd[160]="\\_";Zd[8232]="\\L";Zd[8233]="\\P";var e1r=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],t1r=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function r1r(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&tht.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(r1r,"compileStyleMap");function n1r(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new z0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ql.repeat("0",n-e.length)+e}s(n1r,"encodeHex");var i1r=1,Pq=2;function o1r(t){this.schema=t.schema||Wmt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ql.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=r1r(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Pq:i1r,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(o1r,"State");function Dmt(t,e){for(var r=ql.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(Dmt,"indentString");function bRe(t,e){return`
`+ql.repeat(" ",t.indent*e)}s(bRe,"generateNextLine");function s1r(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(s1r,"testImplicitResolving");function Qse(t){return t===UCr||t===OCr}s(Qse,"isWhitespace");function Dq(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==RRe||65536<=t&&t<=1114111}s(Dq,"isPrintable");function Bmt(t){return Dq(t)&&t!==RRe&&t!==QCr&&t!==kq}s(Bmt,"isNsCharOrWhitespace");function Nmt(t,e,r){var n=Bmt(t),i=n&&!Qse(t);return(r?n:n&&t!==rht&&t!==nht&&t!==iht&&t!==oht&&t!==sht)&&t!==ERe&&!(e===Ose&&!i)||Bmt(e)&&!Qse(e)&&t===ERe||e===Ose&&i}s(Nmt,"isPlainSafe");function a1r(t){return Dq(t)&&t!==RRe&&!Qse(t)&&t!==VCr&&t!==YCr&&t!==Ose&&t!==rht&&t!==nht&&t!==iht&&t!==oht&&t!==sht&&t!==ERe&&t!==WCr&&t!==GCr&&t!==qCr&&t!==ZCr&&t!==zCr&&t!==KCr&&t!==jCr&&t!==HCr&&t!==$Cr&&t!==JCr&&t!==XCr}s(a1r,"isPlainSafeFirst");function c1r(t){return!Qse(t)&&t!==Ose}s(c1r,"isPlainSafeLast");function _q(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(_q,"codePointAt");function aht(t){var e=/^\n* /;return e.test(t)}s(aht,"needIndentIndicator");var cht=1,IRe=2,lht=3,uht=4,oM=5;function l1r(t,e,r,n,i,o,a,c){var l,u=0,f=null,p=!1,m=!1,h=n!==-1,g=-1,A=a1r(_q(t,0))&&c1r(_q(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=_q(t,l),!Dq(u))return oM;A=A&&Nmt(u,f,c),f=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=_q(t,l),u===kq)p=!0,h&&(m=m||l-g-1>n&&t[g+1]!==" ",g=l);else if(!Dq(u))return oM;A=A&&Nmt(u,f,c),f=u}m=m||h&&l-g-1>n&&t[g+1]!==" "}return!p&&!m?A&&!a&&!i(t)?cht:o===Pq?oM:IRe:r>9&&aht(t)?oM:a?o===Pq?oM:IRe:m?uht:lht}s(l1r,"chooseScalarStyle");function u1r(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Pq?'""':"''";if(!t.noCompatMode&&(e1r.indexOf(e)!==-1||t1r.test(e)))return t.quotingType===Pq?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return s1r(t,u)}switch(s(l,"testAmbiguity"),l1r(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case cht:return e;case IRe:return"'"+e.replace(/'/g,"''")+"'";case lht:return"|"+Mmt(e,t.indent)+Lmt(Dmt(e,o));case uht:return">"+Mmt(e,t.indent)+Lmt(Dmt(d1r(e,a),o));case oM:return'"'+f1r(e)+'"';default:throw new z0("impossible error: invalid scalar style")}}()}s(u1r,"writeScalar");function Mmt(t,e){var r=aht(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(Mmt,"blockHeader");function Lmt(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(Lmt,"dropEndingNewline");function d1r(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Fmt(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+Fmt(l,e),i=o}return n}s(d1r,"foldString");function Fmt(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(Fmt,"foldLine");function f1r(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=_q(t,i),n=Zd[r],!n&&Dq(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||n1r(r);return e}s(f1r,"escapeString");function p1r(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(BE(t,e,c,!1,!1)||typeof c>"u"&&BE(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(p1r,"writeFlowSequence");function Omt(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(BE(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&BE(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=bRe(t,e)),t.dump&&kq===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(Omt,"writeBlockSequence");function m1r(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,f;for(a=0,c=o.length;a<c;a+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),BE(t,e,l,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),BE(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}s(m1r,"writeFlowMapping");function h1r(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,f,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new z0("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)m="",(!n||i!=="")&&(m+=bRe(t,e)),u=a[c],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),BE(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&kq===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=bRe(t,e)),BE(t,e+1,f,!0,p)&&(t.dump&&kq===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(h1r,"writeBlockMapping");function Qmt(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,eht.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(tht.call(c.represent,l))n=c.represent[l](e,l);else throw new z0("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(Qmt,"detectType");function BE(t,e,r,n,i,o,a){t.tag=null,t.dump=r,Qmt(t,r,!1)||Qmt(t,r,!0);var c=eht.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=c==="[object Object]"||c==="[object Array]",p,m;if(f&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(f&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(h1r(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(m1r(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Omt(t,e-1,t.dump,i):Omt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(p1r(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&u1r(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new z0("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(BE,"writeNode");function g1r(t,e){var r=[],n=[],i,o;for(TRe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(g1r,"getDuplicateReferences");function TRe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)TRe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)TRe(t[n[i]],e,r)}s(TRe,"inspectNode");function A1r(t,e){e=e||{};var r=new o1r(e);r.noRefs||g1r(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),BE(r,0,n,!0,!0)?r.dump+`
`:""}s(A1r,"dump$1");var y1r=A1r,C1r={dump:y1r};function kRe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(kRe,"renamed");var BJi=Zmt.load,NJi=Zmt.loadAll,PRe=C1r.dump;var MJi=kRe("safeLoad","load"),LJi=kRe("safeLoadAll","loadAll"),FJi=kRe("safeDump","dump");var EP=Ne(pm());var DRe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},wu=class{constructor(){this.dump=new wr(25);this.promptsDump=new wr(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new DRe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function dht(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(dht,"filterConversationTurns");function gRe(t){return dht(t).getLastTurn()?.id}s(gRe,"getLastTurnId");async function Cmt(t){let e=dht(t.conversation),r=gRe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(wu).getDump(r),o=E1r(i,e.turns);un.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await b1r(i,t.ctx);return EP.default`
        ${x1r(t.conversation,r)}
        ${v1r(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(Cmt,"getConversationDump");function v1r(t){let e=t.get(hn);return EP.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(v1r,"getEditorInfoDumpMessage");function x1r(t,e){return EP.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(x1r,"getInfoDumpMessage");async function vmt(t,e,r){let n=t.ctx.get(Ul),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(eo).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&on(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${on(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=EP.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=EP.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${PRe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let f=typeof u=="string"?u:u.elide(1e3).getText();i+=EP.default`
                    \n\n
                    **Processed value**
                    
                    ${f}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(vmt,"getSkillsDump");function E1r(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:on(n.request.message)};return n.response&&(o.response=on(n.response.message)),o})};return PRe(r)}s(E1r,"toSimulationFormat");async function b1r(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(En).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();un.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(b1r,"fileDump");d();function BRe(t,e){let r=Ni(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(on(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(BRe,"countMessagesTokens");d();function fht(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",f=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,f,c,a].filter(p=>p&&p!="").join(`
`)}s(fht,"chatBasePrompt");d();d();d();d();d();function pht(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([Op(i.join(`
`)),1]),i=[],r.push([new Ut([o]),1])):r.push([new Ut([o]),1]),n=!n):n?i.push(o):r.push([new Ut([o]),.8]);return n&&(r.push([Op(i.join(`
`)),1]),r.push([new Ut(["```"]),1])),new Ut(r)}s(pht,"fromMessage");function lM(t){let e=NRe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=mht(i.request,n+1),a=i.response&&i.response?.type!=="meta"?mht(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(pht(c))}return r.length>0?new Ut([[new Ut(["Consider the following conversation history:"]),1],[AS(r,"inverseLinear"),1]]):null}s(lM,"fromHistory");var I1r=5;function NRe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&on(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,I1r).reverse()}s(NRe,"filterTurns");function mht(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=on(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${on(t.message)}`}s(mht,"formatTurnMessage");d();d();d();var T1r=4,MRe={skillIds:[]},qse=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await Jo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(dd).toPrompt(e,l),f=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,f);return m.type!=="success"&&(en.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,f)),await e.ctx.get(vl).inspectFetchResult(m),this.handleResult(m,f,on(a),o,u.toolConfig)}else return MRe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),MRe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,T1r);else return en.error(this.ctx,"Missing tool call in meta prompt response"),MRe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Bt(this.ctx,`${cu(i)}.metaPrompt`,l,0),Bt(this.ctx,`${cu(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Bt(this.ctx,"conversation.promptContextError",n,1)}};d();d();d();var Hse=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return me(e,r,"org.springframework.boot","Spring Boot"),me(e,r,"jakarta.jakartaee-api","Jakarta EE"),me(e,r,"javax:javaee-api","Java EE"),me(e,r,"org.apache.struts:struts2-core","Apache Struts"),me(e,r,"org.hibernate:hibernate-core","Hibernate"),me(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),me(e,r,"javax.faces:jsf-api","JSF"),me(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return me(e,r,"com.google.guava","Google Guava"),me(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),me(e,r,"org.apache.commons:commons-io","Apache Commons IO"),me(e,r,"joda-time:joda-time","Joda-Time"),me(e,r,"com.google.code.gson:gson","Google Gson"),me(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),me(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),me(e,r,"org.apache.commons:commons-net","Apache Commons Net"),me(e,r,"org.apache.poi:poi","Apache POI"),me(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),me(e,r,"junit:junit","JUnit"),me(e,r,"org.testng:testng","TestNG"),me(e,r,"org.spockframework:spock-core","Spock"),me(e,r,"io.cucumber:cucumber-java","Cucumber"),me(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return me(e,r,"org.mockito","Mockito"),me(e,r,"org.assertj","AssertJ"),me(e,r,"org.hamcrest","Hamcrest"),me(e,r,"org.powermock","PowerMock"),me(e,r,"org.jmock","JMock"),me(e,r,"org.easymock","EasyMock"),me(e,r,"org.jmockit:jmockit","JMockit"),me(e,r,"com.github.tomakehurst:wiremock","WireMock"),me(e,r,"org.dbunit:dbunit","DBUnit"),me(e,r,"com.icegreen:greenmail","GreenMail"),me(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),me(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),me(e,r,"io.rest-assured:rest-assured","Rest-Assured"),me(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),me(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},$se=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"@types/node","Node.js"),me(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||me(e,r,"react","React"),me(e,r,"angular","Angular"),me(e,r,"vue","Vue.js"),me(e,r,"ember","Ember.js"),me(e,r,"backbone","Backbone.js"),me(e,r,"meteor","Meteor"),me(e,r,"polymer","Polymer"),me(e,r,"aurelia","Aurelia"),me(e,r,"knockout","Knockout.js"),me(e,r,"dojo","Dojo Toolkit"),me(e,r,"mithril","Mithril.js"),me(e,r,"marionette","Marionette.js"),me(e,r,"marko","Marko.js"),me(e,r,"svelte","Svelte"),me(e,r,"hyperapp","Hyperapp"),me(e,r,"inferno","Inferno.js"),me(e,r,"preact","Preact"),me(e,r,"riot","Riot.js"),me(e,r,"moon","Moon.js"),me(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return me(e,r,"lodash","Lodash"),me(e,r,"moment","Moment.js"),me(e,r,"axios","Axios"),me(e,r,"redux","Redux"),me(e,r,"recoil","Recoil"),me(e,r,"jquery","jQuery"),me(e,r,"d3","D3.js"),me(e,r,"underscore","Underscore.js"),me(e,r,"ramda","Ramda"),me(e,r,"immutable","Immutable.js"),me(e,r,"rxjs","RxJS"),me(e,r,"three","Three.js"),me(e,r,"socket.io","Socket.IO"),me(e,r,"express","Express.js"),me(e,r,"next","Next.js"),me(e,r,"puppeteer","Puppeteer"),me(e,r,"cheerio","Cheerio"),me(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"jest","Jest"),me(e,r,"mocha","Mocha"),me(e,r,"jasmine","Jasmine"),me(e,r,"ava","AVA"),me(e,r,"qunit","QUnit"),me(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return me(e,r,"chai","Chai"),me(e,r,"sinon","Sinon"),me(e,r,"enzyme","Enzyme"),me(e,r,"protractor","Protractor"),me(e,r,"supertest","Supertest"),me(e,r,"nock","Nock"),me(e,r,"cypress","Cypress"),me(e,r,"@testing-library/react","React Testing Library"),r}},Wse=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"github.com/gorilla/mux","Gorilla Mux"),me(e,r,"github.com/go-chi/chi","Chi"),me(e,r,"github.com/gin-gonic/gin","Gin"),me(e,r,"github.com/labstack/echo","Echo"),me(e,r,"github.com/revel/revel","Revel"),me(e,r,"github.com/astaxie/beego","Beego"),me(e,r,"github.com/go-martini/martini","Martini"),me(e,r,"github.com/gobuffalo/buffalo","Buffalo"),me(e,r,"github.com/goji/goji","Goji"),me(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return me(e,r,"net/http","net/http"),me(e,r,"fmt","fmt"),me(e,r,"io","io"),me(e,r,"time","time"),me(e,r,"math","math"),me(e,r,"strconv","strconv"),me(e,r,"strings","strings"),me(e,r,"sort","sort"),me(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"github.com/onsi/ginkgo","ginkgo"),me(e,r,"github.com/onsi/gomega","gomega"),me(e,r,"github.com/stretchr/testify","testify"),me(e,r,"gopkg.in/check.v1","gocheck"),me(e,r,"github.com/franela/goblin","goblin"),me(e,r,"github.com/DATA-DOG/godog","godog"),me(e,r,"github.com/stesla/gospec","gospec"),me(e,r,"github.com/rjeczalik/gotest","gotest"),me(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return me(e,r,"github.com/stretchr/testify","Testify"),me(e,r,"github.com/smartystreets/goconvey","GoConvey"),me(e,r,"github.com/onsi/ginkgo","Ginkgo"),me(e,r,"github.com/golang/mock","GoMock"),me(e,r,"gopkg.in/check.v1","GoCheck"),me(e,r,"github.com/franela/goblin","Goblin"),me(e,r,"github.com/DATA-DOG/godog","GoDog"),me(e,r,"github.com/onsi/gomega","Gomega"),me(e,r,"github.com/stesla/gospec","GoSpec"),me(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},jse=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flask","Flask"),me(e,r,"django","Django"),me(e,r,"pyramid","Pyramid"),me(e,r,"tornado","Tornado"),me(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return me(e,r,"requests","requests"),me(e,r,"numpy","numpy"),me(e,r,"pandas","pandas"),me(e,r,"scipy","scipy"),me(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"pytest","Pytest"),me(e,r,"unittest","Unittest"),me(e,r,"doctest","Doctest"),me(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mock","Mock"),me(e,r,"hypothesis","Hypothesis"),me(e,r,"behave","Behave"),me(e,r,"lettuce","Lettuce"),me(e,r,"testify","Testify"),me(e,r,"pyhamcrest","PyHamcrest"),r}},Gse=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"laravel/framework","Laravel"),me(e,r,"symfony/symfony","Symfony"),me(e,r,"slim/slim","Slim"),me(e,r,"cakephp/cakephp","CakePHP"),me(e,r,"yiisoft/yii2","Yii"),me(e,r,"zendframework/zendframework","Zend Framework"),me(e,r,"phalcon/cphalcon","Phalcon"),me(e,r,"bcosca/fatfree","Fat-Free"),me(e,r,"fuel/fuel","FuelPHP"),me(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return me(e,r,"monolog/monolog","Monolog"),me(e,r,"vlucas/phpdotenv","PHP dotenv"),me(e,r,"symfony/console","Symfony Console"),me(e,r,"guzzlehttp/guzzle","GuzzleHttp"),me(e,r,"ramsey/uuid","Ramsey UUID"),me(e,r,"doctrine/orm","Doctrine ORM"),me(e,r,"php-di/php-di","PHP-DI"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"symfony/finder","Symfony Finder"),me(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"phpunit/phpunit","PHPUnit"),me(e,r,"behat/behat","Behat"),me(e,r,"phpspec/phpspec","PHPSpec"),me(e,r,"codeception/codeception","Codeception"),me(e,r,"atoum/atoum","Atoum"),me(e,r,"pestphp/pest","PestPHP"),me(e,r,"kahlan/kahlan","Kahlan"),me(e,r,"peridot-php/peridot","Peridot"),me(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockery/mockery","Mockery"),me(e,r,"php-mock/php-mock","PHP-Mock"),me(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),me(e,r,"padraic/mockery","Padraic Mockery"),me(e,r,"phpspec/prophecy","PHPSpec Prophecy"),me(e,r,"phpunit/php-invoker","PHPUnit Invoker"),me(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),me(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},Vse=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"Microsoft.NETCore.App",".NET Core"),me(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return me(e,r,"EntityFramework","Entity Framework"),me(e,r,"Newtonsoft.Json","Newtonsoft.Json"),me(e,r,"AutoMapper","AutoMapper"),me(e,r,"Serilog","Serilog"),me(e,r,"Dapper","Dapper"),me(e,r,"Polly","Polly"),me(e,r,"FluentValidation","FluentValidation"),me(e,r,"MediatR","MediatR"),me(e,r,"Hangfire","Hangfire"),me(e,r,"RabbitMQ.Client","RabbitMQ.Client"),me(e,r,"MassTransit","MassTransit"),me(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),me(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),me(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),me(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"xunit","xUnit"),me(e,r,"NUnit","NUnit"),me(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return me(e,r,"Moq","Moq"),me(e,r,"FluentAssertions","FluentAssertions"),me(e,r,"Bogus","Bogus"),me(e,r,"RestSharp","RestSharp"),me(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},zse=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flutter","Flutter"),me(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return me(e,r,"dartx","dartx"),me(e,r,"provider","Provider"),me(e,r,"rxdart","RxDart"),me(e,r,"dio","Dio"),me(e,r,"json_serializable","json_serializable"),me(e,r,"freezed","Freezed"),me(e,r,"moor","Moor"),me(e,r,"hive","Hive"),me(e,r,"http","http"),me(e,r,"path","path"),me(e,r,"intl","intl"),me(e,r,"equatable","equatable"),me(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test","test"),me(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockito","mockito"),me(e,r,"bloc_test","bloc_test"),r}},Kse=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"rails","Rails"),me(e,r,"sinatra","Sinatra"),me(e,r,"hanami","Hanami"),me(e,r,"grape","Grape"),me(e,r,"roda","Roda"),me(e,r,"padrino","Padrino"),me(e,r,"cuba","Cuba"),me(e,r,"ramaze","Ramaze"),me(e,r,"nyara","Nyara"),me(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return me(e,r,"active_record","ActiveRecord"),me(e,r,"sequel","Sequel"),me(e,r,"rom","ROM"),me(e,r,"datamapper","DataMapper"),me(e,r,"mongoid","Mongoid"),me(e,r,"neo4j","Neo4j"),me(e,r,"redis","Redis"),me(e,r,"cassandra","Cassandra"),me(e,r,"couchrest","CouchRest"),me(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"rspec","RSpec"),me(e,r,"minitest","Minitest"),me(e,r,"cucumber","Cucumber"),me(e,r,"spinach","Spinach"),me(e,r,"turnip","Turnip"),me(e,r,"bacon","Bacon"),me(e,r,"shoulda","Shoulda"),me(e,r,"test-unit","Test::Unit"),me(e,r,"wrong","Wrong"),me(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return me(e,r,"factory_bot","FactoryBot"),me(e,r,"faker","Faker"),me(e,r,"ffaker","FFaker"),me(e,r,"fabrication","Fabrication"),me(e,r,"machinist","Machinist"),me(e,r,"mocha","Mocha"),me(e,r,"flexmock","FlexMock"),me(e,r,"rr","RR"),me(e,r,"bourne","Bourne"),me(e,r,"not_a_mock","NotAMock"),r}},Yse=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"tokio","tokio"),me(e,r,"async-std","async-std"),me(e,r,"hyper","hyper"),me(e,r,"actix-web","actix-web"),me(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return me(e,r,"serde","serde"),me(e,r,"regex","regex"),me(e,r,"rand","rand"),me(e,r,"log","log"),me(e,r,"lazy_static","lazy_static"),me(e,r,"libc","libc"),me(e,r,"futures","futures"),me(e,r,"rayon","rayon"),me(e,r,"reqwest","reqwest"),me(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test-case","test-case"),me(e,r,"proptest","proptest"),me(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockall","mockall"),me(e,r,"double","double"),me(e,r,"rstest","rstest"),me(e,r,"mockiato","mockiato"),me(e,r,"mock_derive","mock_derive"),me(e,r,"mocktopus","mocktopus"),me(e,r,"mockers","mockers"),me(e,r,"mock_it","mock_it"),r}},Jse=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function me(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(me,"addFromLibraries");var Xse=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function ght(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(ght,"determineProgrammingLanguage");var hht=[new Hse,new $se,new Wse,new jse,new Gse,new Vse,new zse,new Kse,new Yse,new Jse];function Aht(t){let e=hht.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new Xse(t,hht);return new LRe(e)}s(Aht,"getMetadataLookup");var LRe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var yht=x.Object({name:x.String(),version:x.Optional(x.String())}),Cht=x.Object({language:x.Object({id:x.String(),name:x.String(),version:x.Optional(x.String())}),libraries:x.Array(yht),buildTools:x.Array(yht)}),FRe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Ut([`The user is working on a project with the following characteristics:
`]),1]);let n=Aht(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Ut(r)}addProgrammingLanguage(e,r){let n=ght(e);this.turnContext.collectLabel(z1,n),r.push([new Ut([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(z1,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Ut([`${r}
${i}`]),1])}}},z1="project-metadata",Zse=class{constructor(e){this._resolver=e;this.id=z1;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new FRe(e)}};d();var vht=Ne(require("path"));var ORe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(En),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Ut(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Ut(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=oa(n);if(await this.turnContext.collectFile(tae,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new H1(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Ut([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Ut([`The referenced file \`${vht.basename(r.uri)}\` is content excluded.`]),1]]}},QRe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},tae="references",eae=class{constructor(){this.id=tae;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new QRe}processor(e){return new ORe(e)}};var bP=s(()=>[z1,hy,tae,Jd],"mandatorySkills"),rae=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new qse(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!bP().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!bP().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!bP().includes(u)))}return c.push(...bP()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(eo).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(eo).getSupportedSkills(r.id),a=e.get(Ul).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await G1(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...bP(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};d();d();var nae=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))en.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):en.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var iae=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):en.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};var xS=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new URe(this),this.steps=new iae(e,r,n,e.get(ha)),this.collector=new qRe(r,n,e.get(ha)),this.agentToolCalls=new nae(e,r,n,e.get(ha))}static{s(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return $d.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?$d.agent(e,this.turn.telemetryId):$d.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(ha).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}clearCopilotEditsSessionHeader(){this.copilotEditsSessionHeader=void 0}setCopilotEditsSessionHeader(e){this.copilotEditsSessionHeader=e}},oae=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},Bq=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},URe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(eo).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(wu).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new oae(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(Ul).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(wu).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof oae||i instanceof Bq)throw i;en.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},qRe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function xht(t,e){let[r,n,i]=await S1r(t,e);return i.push(...k1r(t)),r.length>0||n.length>0?[new Ut([[new Ut(["Consider the additional context:"]),1],[AS(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(xht,"fromSkills");async function S1r(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await P1r(t,a.skillId,e?.languageId??""))continue;let[c,l]=await _1r(t,a.skillId);c&&(bP().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(S1r,"handleSkillsInReverse");async function _1r(t,e){let n=t.ctx.get(Ul).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),f=Date.now()-l;return u?await R1r(t,n,c,u,a,f):[void 0,await sae(t,n,"unprocessable",void 0,a,f)]}else return[void 0,await sae(t,n,"unresolvable",void 0,a)]}catch(i){if(en.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof Bq)throw i;return[void 0,await sae(t,n,"failed")]}}s(_1r,"safelyProcessSkill");async function R1r(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Ut([[n,1]]):a=n,[[a,r?.value()||0],await sae(t,e,"resolved",a,i,o)]}s(R1r,"handleProcessedSkill");async function sae(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(fa).getBestChatModelConfig(v0("user")),f=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=Ni(u.tokenizer).tokenLength(f)}return t.ctx.get(wu).addResolution(t.turn.id,l),l}s(sae,"determineResolution");function k1r(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(k1r,"handleIgnoredSkills");async function P1r(t,e,r){if(e!==z1&&e!==hy)return!0;let n=t.ctx.get(Mt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===z1:e===hy}s(P1r,"includeSkill");var Eht=Ne(pm());var IP=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=lM(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Ut(n),a]}async elidableSkills(e,r){return await xht(e,r)}async promptContent(e,r,n){let i,o={includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},a=e.turn.extractContextFilesUri();e.turn.workspaceFolders&&e.turn.workspaceFolders.length>0?i=await XA.getInstructions(e.ctx,e.turn.workspaceFolders,o,a):e.turn.workspaceFolder&&(i=await XA.getInstructions(e.ctx,[e.turn.workspaceFolder],o,a));let c=im(e.conversation.getLastTurn().request.message),l;i?typeof c=="string"?l=i+`

`+c:l=[{type:"text",text:i},...c]:l=c;let[u,f]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:u},{role:"system",content:this.suffix(e)},{role:"user",content:l}],f]}},aae=class extends IP{static{s(this,"PanelUserPromptStrategy")}suffix(e){return Eht.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var bht=Ne(pm());var cae=class extends IP{static{s(this,"InlineUserPromptStrategy")}suffix(e){return bht.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};d();var HRe=Ne(pm());var lae=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=lM(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Ut(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return HRe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=Hlt(e.map(n=>n.id));return x.Object({skillIds:x.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:Dw(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:HRe.default`
                    This is the user's question: 
                    ${on(i).trim()} 
                `.trim()}],[]]}};d();var Iht=Ne(pm());var uae=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:x.Object({suggestedTitle:x.String({description:"The suggested title for the conversation"}),followUp:x.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=Dw(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return Iht.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=lM(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Ut(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};d();var D1r=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:x.Object({keywords:x.Array(x.Object({keyword:x.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:x.Array(x.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],dae=class extends IP{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=im(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:D1r,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=Dw(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!_X(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!_X(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var $Re=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function Nq(t,e,r){return new $Re(t,e,r)}s(Nq,"descriptor");var Tht=[Nq("user",v0("user"),()=>new aae),Nq("inline",v0("inline"),()=>new cae),Nq("meta",v0("meta"),()=>new lae),Nq("suggestions",v0("suggestions"),()=>new uae),Nq("synonyms",v0("synonyms"),()=>new dae)],fae=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=Tht.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return Tht}};var Sht=require("console");var dd=class{constructor(e,r=new fae){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(Ki).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(vl).inspectPrompt({type:r.promptType,prompt:wht(c),tokens:l}),this.ctx.get(wu).addPrompt(e.turn.id,wht(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,Sht.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:B1r(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,BRe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),BRe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(hn).getEditorInfo().readableName??this.ctx.get(hn).getEditorInfo().name,i=N1r(process.platform);return fht(this.ctx,n,r?.login,i,e)}};function B1r(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(B1r,"processResultOfElidableText");function wht(t){return t.map(e=>on(e.content)).join(`

`)}s(wht,"debugChatMessages");function N1r(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(N1r,"mapPlatformToOs");var uM=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await Jo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(dd).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let f=await this.chatFetcher.fetchResponse(u,r,l);if(f.type!=="success"&&(en.error(this.ctx,"Failed to fetch suggestions, trying again..."),f=await this.chatFetcher.fetchResponse(u,r,l)),f.type==="success"){if(!f.toolCalls||f.toolCalls.length===0){en.error(this.ctx,"Missing tool call in suggestions response");return}let p=f.toolCalls[0],{followUp:m,suggestedTitle:h}=c.toolConfig.extractArguments(p);if(!m||!h){en.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:c.tokens,numTokens:f.numTokens+p.approxNumTokens}}else if(f.type==="successMultiple"){en.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(f.type==="tool_calls"){en.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{en.error(this.ctx,`Failed to fetch suggestions due to reason: ${f.reason}`);return}}};var dM=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(tYe(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get(Ac).workspaceCount})),await this.turnContext.ctx.get(vl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:on(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:Qw.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},rYe(this.turnContext,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:f,suggestedTitle:p}=u;return{followup:f.message!==""?f:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:on(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new uM(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return en.debug(this.turnContext.ctx,"Computed followup",c),en.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:Er(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return aYe(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",nYe(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};d();var pae=x.Union([x.String(),x.Number()]),TP=x.Union([x.String(),x.Number()]),M1r=x.Union([x.Literal("included"),x.Literal("blocked"),x.Literal("notfound"),x.Literal("empty")]),mae=x.Object({uri:x.String(),position:x.Optional(tu)}),Mq=x.Object({type:x.Literal("file"),uri:x.String(),visibleRange:x.Optional(Dc),selection:x.Optional(Dc),status:x.Optional(M1r),range:x.Optional(Dc)}),L1r=x.Object({type:x.Literal("directory"),uri:x.String()}),fM=x.Union([Mq,L1r,Rpt]),dg=x.Union([x.Literal("panel"),x.Literal("inline")]),F1r=x.Union([x.Object({type:x.Literal("text"),text:x.String()}),x.Object({type:x.Literal("image_url"),imageUrl:x.Object({url:x.String(),detail:x.Optional(x.Union([x.Literal("low"),x.Literal("high")]))})})]),WRe=x.Union([x.String(),x.Array(F1r)]),_ht=x.Object({request:WRe,response:x.Optional(x.String()),agentSlug:x.Optional(x.String()),turnId:x.Optional(TP),model:x.Optional(x.String())});function hae(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(hae,"convertToMessageContent");function gae(t,e){if(t=im(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(gae,"appendToMessage");var Aae=x.Union([x.Literal("Ask"),x.Literal("Agent")]),O1r=x.Object({type:x.String(),description:x.String()}),Rht=x.Object({name:x.String(),description:x.String(),inputSchema:x.Optional(x.Object({type:x.String(),properties:x.Record(x.String(),O1r),required:x.Array(x.String())})),confirmationMessages:x.Optional(x.Object({title:x.String(),message:x.String()}))}),pM=x.Object({uri:x.String(),name:x.String()});var jRe="generate-response",yae=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},Lq=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(ha),this.chatFetcher=this.chatFetcher??new ua(r.ctx),this.postProcessor=new dM(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){en.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof yae?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await Oc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(vl).inspectPrompt(c),await n.steps.start(jRe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:im(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return Er()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return NRe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:im(r.request.message)}),r.response&&r.response.type==="model"){let i=_pt(r.response.references);n.push({role:"assistant",content:im(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await Fpt(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new pS((p,m,h,g,A)=>{let y=A?{...A,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(E=>({message:E.message,severity:"warning"})),confirmationRequest:y}),this.turn.response?(this.turn.response.message=gae(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),y&&(this.turn.confirmationRequest=y)}),l=await this.turnContext.ctx.get($r).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:on(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},f=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>c.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(f),await this.postProcessor.postProcess(f,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),on(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new yae("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return s7(this.conversation,"conversationPanel",on(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(jRe,e.error.message):await r.steps.finish(jRe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var Fq=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new Lq(this,e)}},Cae=class extends Fq{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new Lq(this,e)}};d();var Q1r="github",Ay=class{static{s(this,"RemoteAgentRegistry")}},vae=class extends Ay{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await sR(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(un.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||un.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||un.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==Q1r).map(i=>new Fq(i.id,i.slug,i.name,i.description,i.avatar_url))}};var GRe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[iM]}};async function G1(t){let e=[];return e.push(new Cae),e.push(...await t.get(Ay).agents()),e.push(new GRe),e}s(G1,"getAgents");var U1r=x.Object({});async function q1r(t,e,r){return[(await G1(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(q1r,"handleConversationAgentsChecked");var kht=Ze(U1r,q1r);d();d();var Oq=Ne(ll());function H1r(t,e,r){let n=Gr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Bt(t,"getCompletions.docVersionMismatch",n)}s(H1r,"telemetryVersionMismatch");async function yy(t,e,r){let i=t.get(Cr).getTextDocumentUnsafe(e);if(!i)throw new Oq.ResponseError(tr.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await wx(t,e,i.getText());if(o.status==="invalid")throw t.get(So).setInactive(o.reason),new Oq.ResponseError(tr.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(H1r(t,i,e.version),Su.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new Oq.ResponseError(tr.ContentModified,"Document Version Mismatch");return i}s(yy,"getTextDocument");async function K1(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await yy(t,n,r)}catch(i){if(i instanceof Oq.ResponseError&&i.code===tr.CopilotNotAvailable)return;throw i}}s(K1,"getTextDocumentIfAvailable");var $1r=x.Union([x.Literal("keyboard"),x.Literal("toolbar")]),W1r=x.Object({turnId:TP,codeBlockIndex:x.Number(),source:$1r,copiedCharacters:x.Number(),totalCharacters:x.Number(),copiedText:x.String(),doc:x.Optional(mae),textDocument:x.Optional(l0),position:x.Optional(tu),conversationSource:x.Optional(dg)});async function j1r(t,e,r){let n=await K1(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=HT(r.conversationSource),c=t.get(eo).findByTurnId(r.turnId),l=await Oc(t,c,{languageId:n?.detectedLanguageId??""});return _f(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${cu(a)}.acceptedCopy`,l),["OK",null]}s(j1r,"handleConversationCodeCopyChecked");var Pht=Ze(W1r,j1r);d();var G1r=x.Union([x.Literal("keyboard"),x.Literal("toolbar"),x.Literal("diff")]),V1r=x.Object({turnId:TP,source:G1r,codeBlockIndex:x.Number(),acceptedLength:x.Optional(x.Number()),totalCharacters:x.Number(),newFile:x.Optional(x.Boolean()),doc:x.Optional(mae),textDocument:x.Optional(l0),position:x.Optional(tu),conversationSource:x.Optional(dg)});async function z1r(t,e,r){let n=await K1(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=HT(r.conversationSource),c=t.get(eo).findByTurnId(r.turnId),l=await Oc(t,c,{languageId:n?.detectedLanguageId??""});return _f(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${cu(a)}.acceptedInsert`,l),["OK",null]}s(z1r,"handleConversationCodeInsertChecked");var Dht=Ze(V1r,z1r);d();d();var xae=x.Array(Dc);function Eae(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(Eae,"resolveAsActiveEditor");d();var Bht=Ne(ll());var bae=new Bht.ProgressType,VRe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(Dr).connection.sendProgress(bae,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(Dr).connection.sendProgress(bae,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(Dr).connection.sendProgress(bae,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(Dr).connection.sendProgress(bae,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function mM(t){return new VRe(t.workDoneToken)}s(mM,"createProgressHandler");d();d();d();var fd=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};d();var NE=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};d();var hM=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};d();d();var Nht="```",Qq=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,K1r=String.raw`${Nht}[\w]*?\n(?<codeblock>[\s\S]*?)\n${Nht}`,Y1r=new RegExp(Qq+`
`+K1r,"gs"),zRe=["replace","delete"];function KRe(t,e){let r=t.matchAll(Y1r),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!zRe.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,f=a.codeblock.split(`
`),p=f[0].match(/^\s*/)?.[0]??"";f.forEach((A,y)=>{f[y]=A.slice(p.length)});let m={mode:a.mode,codeblock:f.join(`
`),start:c,end:l},h=YRe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(KRe,"extractEditsFromTaggedCodeblocks");function YRe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,f)=>{c[f]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(YRe,"applyEditsToDocument");d();d();var Y1=Ne($c());function JRe(t){return{isCancellationRequested:t.isCancellationRequested,onCancellationRequested:s(e=>{let r=t.onCancellationRequested(e);return{dispose:s(()=>r.dispose(),"dispose")}},"onCancellationRequested")}}s(JRe,"adaptCancellationToken");function Mht(t){return{report:s(e=>{"value"in e&&typeof e.value=="string"?t({text:e.value}):t({})},"report")}}s(Mht,"adaptProgressCallback");function Lht(t){return{modelMaxPromptTokens:t.maxRequestTokens}}s(Lht,"createEndpointInfo");function Fht(t){let e={role:J1r(t.role),content:X1r(t.content)};return t.role===Y1.Raw.ChatRole.Assistant&&"toolCalls"in t&&t.toolCalls&&(e.tool_calls=t.toolCalls.map(r=>({id:r.id,type:r.type,function:r.function,approxNumTokens:0}))),t.role===Y1.Raw.ChatRole.Tool&&"toolCallId"in t&&t.toolCallId&&(e.tool_call_id=t.toolCallId),Object.entries(t).forEach(([r,n])=>{["role","content","toolCalls","toolCallId"].includes(r)||(e[r]=n)}),e}s(Fht,"convertToCopilotChatMessage");function J1r(t){switch(t){case Y1.Raw.ChatRole.System:return"system";case Y1.Raw.ChatRole.User:return"user";case Y1.Raw.ChatRole.Assistant:return"assistant";case Y1.Raw.ChatRole.Tool:return"tool";default:return"user"}}s(J1r,"convertRole");function X1r(t){return typeof t=="string"?t:Array.isArray(t)?t.length===1&&t[0].type===Y1.Raw.ChatCompletionContentPartKind.Text?t[0].text:t.map(e=>e.type===Y1.Raw.ChatCompletionContentPartKind.Text?{type:"text",text:e.text}:e.type===Y1.Raw.ChatCompletionContentPartKind.Image?{type:"image_url",image_url:e.imageUrl}:{type:"text",text:String(e.type)}):String(t)}s(X1r,"convertContent");d();var ME=Ne($c());var Iae=class extends ME.PromptRenderer{constructor(r,n,i,o,a){super(i,r,n,o);this.options=a}static{s(this,"InternalPromptRenderer")}async renderWithOptions(r,n,i){let o=await super.render(r,n);return{...this.options,...i}.collapseSystemMessages&&this.collapseConsecutiveSystemMessages(o.messages),o}collapseConsecutiveSystemMessages(r){let n=[],i=null;for(let o of r)if(o.role===ME.Raw.ChatRole.System&&i?.role===ME.Raw.ChatRole.System){let a=i.content.at(-1),c=o.content.at(0);a&&c&&a.type===ME.Raw.ChatCompletionContentPartKind.Text&&c.type===ME.Raw.ChatCompletionContentPartKind.Text?(a.text=a.text.trimEnd()+`
`+c.text,i.content=i.content.concat(o.content.slice(1))):(i.content.push({type:ME.Raw.ChatCompletionContentPartKind.Text,text:`
`}),i.content=i.content.concat(o.content))}else n.push(o),i=o.role===ME.Raw.ChatRole.System?o:null;r.length=0,r.push(...n)}};d();d();function Oht(t){if(!t.startsWith("data:image/"))throw new Error("Could not read image: invalid base64 image string");let e=t.split(",")[1];switch(nvr(e)){case"image/png":return Z1r(e);case"image/gif":return evr(e);case"image/jpeg":case"image/jpg":return tvr(e);case"image/webp":return rvr(e);default:throw new Error("Unsupported image format")}}s(Oht,"getImageDimensions");function Z1r(t){let e=atob(t.slice(0,50)).slice(16,24),r=Uint8Array.from(e,i=>i.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint32(0,!1),height:n.getUint32(4,!1)}}s(Z1r,"getPngDimensions");function evr(t){let e=atob(t.slice(0,50)),r=Uint8Array.from(e,i=>i.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint16(6,!0),height:n.getUint16(8,!0)}}s(evr,"getGifDimensions");function tvr(t){let e=atob(t),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=r.length,i=2;for(;i<n;){let o=r[i]<<8|r[i+1],a=r[i+2]<<8|r[i+3];if(o>=65472&&o<=65474){let c=new DataView(r.buffer,i+5,4);return{height:c.getUint16(0,!1),width:c.getUint16(2,!1)}}i+=2+a}throw new Error("JPEG dimensions not found")}s(tvr,"getJpegDimensions");function rvr(t){let e=atob(t),r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);if(e.slice(0,4)!=="RIFF"||e.slice(8,12)!=="WEBP")throw new Error("Not a valid WebP image.");let n=e.slice(12,16);if(n==="VP8 "){let i=(r[26]|r[27]<<8)&16383,o=(r[28]|r[29]<<8)&16383;return{width:i,height:o}}else if(n==="VP8L"){let i=(r[21]|r[22]<<8)&16383,o=(r[23]|r[24]<<8)&16383;return{width:i,height:o}}else if(n==="VP8X"){let i=((r[24]|r[25]<<8|r[26]<<16)&16777215)+1,o=((r[27]|r[28]<<8|r[29]<<16)&16777215)+1;return{width:i,height:o}}else throw new Error("Unsupported WebP format.")}s(rvr,"getWebPDimensions");function nvr(t){if(!t||t.length<4)return;let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return e[r]}s(nvr,"getMimeType");var wP=Ne($c());var ivr=3,ovr=1,XRe=class{constructor(e,r){this.tokenizer=e;this.mode=wP.OutputMode.Raw;this._cache=new wr(5e3);this.baseTokensPerMessage=r.baseTokensPerMessage||ivr,this.baseTokensPerName=r.baseTokensPerName||ovr}static{s(this,"PromptTsxTokenizer")}tokenLength(e){if(typeof e=="string")return this._textTokenLength(e);switch(e.type){case wP.Raw.ChatCompletionContentPartKind.Text:return this._textTokenLength(e.text);case wP.Raw.ChatCompletionContentPartKind.Opaque:return e.tokenUsage||0;case wP.Raw.ChatCompletionContentPartKind.Image:return this.calculateImageTokenCost(e.imageUrl.url,e.imageUrl.detail);case wP.Raw.ChatCompletionContentPartKind.CacheBreakpoint:return 0}}_textTokenLength(e){if(!e)return 0;let r=this._cache.get(e);return r===void 0&&(r=this.tokenizer.tokenLength(e),this._cache.set(e,r)),r}countMessageTokens(e){let r=this.baseTokensPerMessage;typeof e.content=="string"?r+=this.tokenLength(e.content):Array.isArray(e.content)&&(r+=e.content.reduce((o,a)=>o+this.tokenLength(a),0));let n=e;n.name&&(r+=this.baseTokensPerName,r+=this.tokenLength(n.name));let i=e;if(i.tool_calls){let o=i.tool_calls,a=0;for(let c of o)a+=this.countObjectTokens({id:c.id,type:c.type,function:c.function});r+=Math.floor(a*1.5)}return r}countMessagesTokens(e){let r=this.baseTokensPerMessage;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){if(!e||e.length===0)return 0;let n=16,i=8;for(let o of e)n+=i,n+=this.countObjectTokens({name:o.name,description:o.description,parameters:o.inputSchema});return Math.floor(n*1.1)}countObjectTokens(e){let r=0;for(let[n,i]of Object.entries(e||{}))if(i){if(r+=this.tokenLength(n),typeof i=="string")r+=this.tokenLength(i);else if(i&&typeof i=="object"){let o=i;if("type"in o&&o.type==="text"&&"text"in o&&typeof o.text=="string")r+=this.tokenLength(o.text);else if("type"in o&&o.type==="image_url"&&"image_url"in o){let a=o.image_url;a.url&&a.url.startsWith("data")&&(r+=this.calculateImageTokenCost(a.url,a.detail))}else r+=this.countObjectTokens(o)}}return r}calculateImageTokenCost(e,r){let{width:n,height:i}=Oht(e);if(r==="low")return 85;if(n>2048||i>2048){let c=2048/Math.max(n,i);n=Math.round(n*c),i=Math.round(i*c)}let o=768/Math.min(n,i);return n=Math.round(n*o),i=Math.round(i*o),Math.ceil(n/512)*Math.ceil(i/512)*170+85}};function Qht(t){let e=Ni(t.tokenizer);return new XRe(e,t)}s(Qht,"createPromptTsxTokenizer");var Uq=class t{static{s(this,"TsxPromptRenderer")}constructor(e,r,n,i={}){let o=Lht(n),a=Qht(n);this._internalRenderer=new Iae(e,r,o,a,i)}static create(e,r,n,i={}){return new t(e,r,n,i)}async renderPrompt(e,r,n){let i=e?Mht(e):void 0,o=r?JRe(r):void 0,a=await this._internalRenderer.renderWithOptions(i,o,n);return{messages:a.messages.map(Fht),tokenCount:a.tokenCount,hasIgnoredFiles:a.hasIgnoredFiles}}async countTokens(e){let r=e?JRe(e):void 0;return(await this._internalRenderer.renderWithOptions(void 0,r)).tokenCount}};d();d();var Hht=Ne($c());var hm=class extends Hht.PromptElement{static{s(this,"CopilotPromptElement")}constructor(e){super(e)}async prepare(e,r,n){if(!this.prepareCopilot)return;let i=r?Uht(r):void 0,o=n?qht(n):void 0;return await this.prepareCopilot(e,i,o)}render(e,r,n,i){let o=n?Uht(n):void 0,a=i?qht(i):void 0;return this.renderCopilot(e,r,o,a)}};function Uht(t){return e=>{let r=e.text||"";if(t?.report&&r){let n={value:r};t.report(n)}}}s(Uht,"adaptProgressCallbackFromVSCode");function qht(t){return{get isCancellationRequested(){return t?.isCancellationRequested??!1},onCancellationRequested:s((e,r)=>{let n=t?.onCancellationRequested(e,r);return{dispose:s(()=>{n?.dispose()},"dispose")}},"onCancellationRequested")}}s(qht,"adaptCancellationTokenFromVSCode");d();d();var El=Ne($c());function svr(t){let e=t.filter(n=>n.type==="image_url"),r=t.filter(n=>n.type==="text").map(n=>n.text).join("");return{imageUrls:e,textContent:r}}s(svr,"separateTextAndImages");function avr(t){return t.map(e=>vscpp(El.Image,{src:e.image_url.url,detail:e.image_url.detail}))}s(avr,"createImageElements");function Tae(t){let{imageUrls:e,textContent:r}=svr(t);return e.length===0?[vscpp(vscppf,null,r)]:[vscpp(El.TextChunk,null,vscpp(vscppf,null,r)),...avr(e)]}s(Tae,"renderMixedContent");function ZRe(t){return t==null?[]:t.map(r=>({id:r.id||"",type:"function",function:{name:r.function.name,arguments:typeof r.function.arguments=="string"?r.function.arguments:JSON.stringify(r.function.arguments)},approxNumTokens:r.approxNumTokens}))}s(ZRe,"convertToPromptTsxToolCall");function wae(t){switch(t.role){case"assistant":return cvr(t);case"tool":return lvr(t);case"user":return uvr(t);case"system":return dvr(t);case"function":throw new Error("ChatRole.Function is not supported in prompt-tsx conversion. Use ChatRole.Tool instead.");default:throw new Error(`Unsupported chat role: ${String(t.role)}`)}}s(wae,"convertChatMessageToPromptTsx");function cvr(t){return typeof t.content=="string"?vscpp(El.AssistantMessage,{toolCalls:ZRe(t.tool_calls)},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(El.AssistantMessage,{toolCalls:ZRe(t.tool_calls)},Tae(t.content)):vscpp(El.AssistantMessage,{toolCalls:ZRe(t.tool_calls)},vscpp(vscppf,null,JSON.stringify(t.content)))}s(cvr,"renderAssistantMessage");function lvr(t){return typeof t.content=="string"?vscpp(El.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(El.ToolMessage,{toolCallId:t.tool_call_id||""},Tae(t.content)):vscpp(El.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,JSON.stringify(t.content)))}s(lvr,"renderToolMessage");function uvr(t){return typeof t.content=="string"?vscpp(El.UserMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(El.UserMessage,null,Tae(t.content)):vscpp(El.UserMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}s(uvr,"renderUserMessage");function dvr(t){return typeof t.content=="string"?vscpp(El.SystemMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(El.SystemMessage,null,Tae(t.content)):vscpp(El.SystemMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}s(dvr,"renderSystemMessage");var fvr=new Ct("conversationHistoryPrompt"),Sae=class extends hm{static{s(this,"ConversationHistoryPrompt")}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:im(n.request.message)}),n.response){let i=rne(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.some(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):fvr.warn(this.props.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);return{...e,tool_calls:i}}return e}renderCopilot(){let e=this.createChatMessagesFromHistory(this.props.historyTurns);return vscpp(vscppf,null,e.map((r,n)=>wae(r)))}};d();d();var SP=Ne($c());var J1=class t extends SP.PromptElement{static{s(this,"Tag")}static{this._regex=/^[a-zA-Z_][\w.-]*$/}render(){let{name:e,children:r,attrs:n={}}=this.props;if(!t._regex.test(e))throw new Error(`Invalid tag name: ${this.props.name}. Tag names must start with a letter or underscore, and can contain letters, digits, underscores, hyphens, or periods.`);let i="";for(let[a,c]of Object.entries(n))c!==void 0&&(i+=` ${a}=${JSON.stringify(c)}`);if(r?.length===0)return i?vscpp(SP.TextChunk,null,vscpp(vscppf,null,`<${e}${i} />`)):void 0;let o=(0,SP.useKeepWith)();return vscpp(vscppf,null,vscpp(o,null,vscpp(vscppf,null,`<${e}${i}>
`)),vscpp(eke,{priority:1,flexGrow:1},r,vscpp("br",null)),vscpp(o,null,vscpp(vscppf,null,`</${e}>`)),vscpp("br",null))}},eke=class extends SP.PromptElement{static{s(this,"TagInner")}render(){return vscpp(vscppf,null,this.props.children)}};var $ht=Ne($c());var _ae=class extends hm{static{s(this,"DefaultAgentPrompt")}renderKeepGoingReminder(){return this.props.modelConfiguration.modelFamily===Wr.Gpt41||this.props.modelConfiguration.modelFamily===Wr.Gpt5?vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user.",vscpp("br",null),"Your thinking should be thorough and so it's fine if it's very long. However, avoid unnecessary repetition and verbosity. You should be concise, but thorough.",vscpp("br",null),"You MUST iterate and keep going until the problem is solved.",vscpp("br",null),"You have everything you need to resolve this problem. I want you to fully solve this autonomously before coming back to me.",vscpp("br",null),"Only terminate your turn when you are sure that the problem is solved and all items have been checked off. Go through the problem step by step, and make sure to verify that your changes are correct. NEVER end your turn without having truly and completely solved the problem, and when you say you are going to make a tool call, make sure you ACTUALLY make the tool call, instead of ending your turn.",vscpp("br",null),"Take your time and think through every step - remember to check your solution rigorously and watch out for boundary cases, especially with the changes you made. Your solution must be perfect. If not, continue working on it. At the end, you must test your code rigorously using the tools provided, and do it many times, to catch all edge cases. If it is not robust, iterate more and make it perfect. Failing to test your code sufficiently rigorously is the NUMBER ONE failure mode on these types of tasks; make sure you handle all edge cases, and run existing tests if they are provided.",vscpp("br",null),"You MUST plan extensively before each function call, and reflect extensively on the outcomes of the previous function calls. DO NOT do this entire process by making function calls only, as this can impair your ability to solve the problem and think insightfully.",vscpp("br",null),"You are a highly capable and autonomous agent, and you can definitely solve this problem without needing to ask the user for further input.",vscpp("br",null)):vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user. ONLY terminate your turn when you are sure that the problem is solved, or you absolutely cannot continue.",vscpp("br",null),"You take action when possible- the user is expecting YOU to take action and go to work for them. Don't ask unnecessary questions about the details if you can simply DO something useful instead.",vscpp("br",null))}renderCopilot(){let e=this.props.modelConfiguration.modelFamily===Wr.Gpt5,r=this.props.toolsService.getToolMapForModel().get("semantic_search")!==void 0,n=this.props.toolsService.getToolMapForModel().get("get_errors")!==void 0,i=this.props.toolsService.getToolMapForModel().get("read_file")!==void 0,o=this.props.toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,a=this.props.toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,c=this.props.toolsService.getToolMapForModel().get("update_user_preferences")!==void 0;return vscpp($ht.SystemMessage,null,vscpp(J1,{name:"instructions"},"You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks.",vscpp("br",null),"The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question.",vscpp("br",null),this.renderKeepGoingReminder(),e&&vscpp(vscppf,null,`Communication style: Use a friendly, confident, and conversational tone. Prefer short sentences, contractions, and concrete language. Keep it skimmable and encouraging, not formal or robotic. A tiny touch of personality is okay; avoid overusing exclamations or emoji. Avoid empty filler like "Sounds good!", "Great!", "Okay, I will\u2026", or apologies when not needed\u2014open with a purposeful preamble about what you're doing next.`,vscpp("br",null)),"If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes.",vscpp("br",null),"If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept.",vscpp("br",null),"If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context.",vscpp("br",null),e&&vscpp(vscppf,null,"Mission and stop criteria: You are responsible for completing the user's task end-to-end. Continue working until the goal is satisfied or you are truly blocked by missing information. Do not defer actions back to the user if you can execute them yourself with available tools. Only ask a clarifying question when essential to proceed.",vscpp("br",null),"Preamble and progress: Start with a brief, friendly preamble that explicitly acknowledges the user's task and states what you're about to do next. Make it engaging and tailored to the repo/task; keep it to a single sentence. If the user has not asked for anything actionable and it's only a greeting or small talk, respond warmly and invite them to share what they'd like to do\u2014do not create a checklist or run tools yet. Use the preamble only once per task; if the previous assistant message already included a preamble for this task, skip it this turn. Do not re-introduce your plan after tool calls or after creating files\u2014give a concise status and continue with the next concrete action. For multi-step tasks, keep a lightweight checklist and weave progress updates into your narration. Batch independent, read-only operations together; after a batch, share a concise progress note and what's next. If you say you will do something, execute it in the same turn using tools.",vscpp("br",null),vscpp(J1,{name:"requirementsUnderstanding"},vscpp(vscppf,null,"Always read the user's request in full before acting. Extract the explicit requirements and any reasonable implicit requirements.",vscpp("br",null),"If a requirement cannot be completed with available tools, state why briefly and propose a viable alternative or follow-up."))),r&&vscpp(vscppf,null,"Prefer using the ","semantic_search"," tool to search for context unless you know the exact string or filename pattern you're searching for.",vscpp("br",null)),"Don't make assumptions about the situation-gather context first, then perform the task or answer the question.",vscpp("br",null),e&&vscpp(vscppf,null,"Under-specification policy: If details are missing, infer 1-2 reasonable assumptions from the repository conventions and proceed. Note assumptions briefly and continue; ask only when truly blocked.",vscpp("br",null),"Proactive extras: After satisfying the explicit ask, implement small, low-risk adjacent improvements that clearly add value (tests, types, docs, wiring). If a follow-up is larger or risky, list it as next steps.",vscpp("br",null),"Anti-laziness: Avoid generic restatements and high-level advice. Prefer concrete edits, running tools, and verifying outcomes over suggesting what the user should do.",vscpp("br",null),vscpp(J1,{name:"engineeringMindsetHints"},vscpp(vscppf,null,"Think like a software engineer\u2014when relevant, prefer to:",vscpp("br",null),'- Outline a tiny "contract" in 2-4 bullets (inputs/outputs, data shapes, error modes, success criteria).',vscpp("br",null),"- List 3-5 likely edge cases (empty/null, large/slow, auth/permission, concurrency/timeouts) and ensure the plan covers them.",vscpp("br",null),"- Write or update minimal reusable tests first (happy path + 1-2 edge/boundary) in the project's framework; then implement until green.")),vscpp(J1,{name:"qualityGatesHints"},vscpp(vscppf,null,'Before wrapping up, prefer a quick "quality gates" triage: Build, Lint/Typecheck, Unit tests, and a small smoke test. Ensure there are no syntax/type errors across the project; fix them or clearly call out any intentionally deferred ones. Report deltas only (PASS/FAIL). Include a brief "requirements coverage" line mapping each requirement to its status (Done/Deferred + reason).')),vscpp(J1,{name:"responseModeHints"},vscpp(vscppf,null,"Choose response mode based on task complexity. Prefer a lightweight answer when it's a greeting, small talk, or a trivial/direct Q&A that doesn't require tools or edits: keep it short, skip todo lists and progress checkpoints, and avoid tool calls unless necessary. Use the full engineering workflow (checklist, phases, checkpoints) when the task is multi-step, requires edits/builds/tests, or has ambiguity/unknowns. Escalate from light to full only when needed; if you escalate, say so briefly and continue.")),"Validation and green-before-done: After any substantive change, run the relevant build/tests/linters automatically. For runnable code that you created or edited, immediately run a test to validate the code works (fast, minimal input) yourself using terminal tools. Prefer automated code-based tests where possible. Then provide optional fenced code blocks with commands for larger or platform-specific runs. Don't end a turn with a broken build if you can fix it. If failures occur, iterate up to three targeted fixes; if still failing, summarize the root cause, options, and exact failing output. For non-critical checks (e.g., a flaky health check), retry briefly (2-3 attempts with short backoff) and then proceed with the next step, noting the flake.",vscpp("br",null),"Never invent file paths, APIs, or commands. Verify with tools (search/read/list) before acting when uncertain.",vscpp("br",null),"Security and side-effects: Do not exfiltrate secrets or make network calls unless explicitly required by the task. Prefer local actions first.",vscpp("br",null),"Reproducibility and dependencies: Follow the project's package manager and configuration; prefer minimal, pinned, widely-used libraries and update manifests or lockfiles appropriately. Prefer adding or updating tests when you change public behavior.",vscpp("br",null),'Build characterization: Before stating that a project "has no build" or requires a specific build step, verify by checking the provided context or quickly looking for common build config files (for example: `package.json`, `pnpm-lock.yaml`, `requirements.txt`, `pyproject.toml`, `setup.py`, `Makefile`, `Dockerfile`, `build.gradle`, `pom.xml`). If uncertain, say what you know based on the available evidence and proceed with minimal setup instructions; note that you can adapt if additional build configs exist.',vscpp("br",null),"Deliverables for non-trivial code generation: Produce a complete, runnable solution, not just a snippet. Create the necessary source files plus a small runner or test/benchmark harness when relevant, a minimal `README.md` with usage and troubleshooting, and a dependency manifest (for example, `package.json`, `requirements.txt`, `pyproject.toml`) updated or added as appropriate. If you intentionally choose not to create one of these artifacts, briefly say why.",vscpp("br",null)),"Think creatively and explore the workspace in order to make a complete fix.",vscpp("br",null),"Don't repeat yourself after a tool call, pick up where you left off.",vscpp("br",null),"NEVER print out a codeblock with file changes unless the user asked for it. Use the"," ","insert_edit_into_file"," ",a?"or replace_string_in_file":""," tool instead.",vscpp("br",null),o&&vscpp(vscppf,null,"NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the ","run_in_terminal"," tool instead.",vscpp("br",null)),"You don't need to read a file if it's already provided in context."),vscpp(J1,{name:"toolUseInstructions"},"When using a tool, follow the json schema very carefully and make sure to include ALL required properties.",vscpp("br",null),"Always output valid JSON when using a tool.",vscpp("br",null),"If a tool exists to do a task, use the tool instead of asking the user to manually take an action.",vscpp("br",null),"If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission.",vscpp("br",null),"Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs.",vscpp("br",null),"Never say the name of a tool to a user.",vscpp("br",null),"For example, instead of saying that you'll use the ","run_in_terminal",` tool, say "I'll run the command in a terminal".`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel.",vscpp("br",null),e&&vscpp(vscppf,null,"Before notable tool batches, briefly tell the user what you're about to do and why. After the results return, briefly interpret them and state what you'll do next. Don't narrate every trivial call.",vscpp("br",null),`You MUST preface each tool call batch with a one-sentence "why/what/outcome" preamble (why you're doing it, what you'll run, expected outcome). If you make many tool calls in a row, you MUST checkpoint progress after roughly every 3-5 calls: what you ran, key results, and what you'll do next. If you create or edit more than ~3 files in a burst, checkpoint immediately with a compact bullet summary.`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel. Parallelize read-only, independent operations only; do not parallelize edits or dependent steps.",vscpp("br",null),"Context acquisition: Trace key symbols to their definitions and usages. Read sufficiently large, meaningful chunks to avoid missing context. Prefer semantic or codebase search when you don't know the exact string; prefer exact search or direct reads when you do. Avoid redundant reads when the content is already attached and sufficient.",vscpp("br",null),"Verification preference: For service or API checks, prefer a tiny code-based test (unit/integration or a short script) over shell probes. Use shell probes (e.g., curl) only as optional documentation or quick one-off sanity checks, and mark them as optional.",vscpp("br",null)),i&&vscpp(vscppf,null,"When using the ","read_file"," tool, prefer reading a large section over calling the"," ","read_file"," tool many times in sequence. You can also think of all the pieces you may be interested in and read them in parallel. Read large enough context to ensure you get what you need.",vscpp("br",null)),"If ","semantic_search"," returns the full contents of the text files in the workspace, you have all the workspace context.",vscpp("br",null),o&&vscpp(vscppf,null,"Don't call the ","run_in_terminal"," tool multiple times in parallel. Instead, run one command and wait for the output before running the next command.",vscpp("br",null)),c&&vscpp(vscppf,null,"After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the"," ","update_user_preferences"," tool to save their preferences.",vscpp("br",null))),vscpp(J1,{name:"editFileInstructions"},a?vscpp(vscppf,null,"Before you edit an existing file, make sure you either already have it in the provided context, or read it with the ","read_file"," tool, so that you can make proper changes.",vscpp("br",null),"Use the ","replace_string_in_file"," tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to insert code into a file.",vscpp("br",null),"When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," or"," ","replace_string_in_file"," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ","replace_string_in_file"," or ","insert_edit_into_file"," tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)):vscpp(vscppf,null,"Don't try to edit an existing file without reading it first, so you can make changes properly.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to edit files. When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," ",a?"or replace_string_in_file":""," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ",a?"replace_string_in_file or":""," ","insert_edit_into_file"," tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)),"Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ",o?'with "npm install" or ':"",'creating a "requirements.txt".',vscpp("br",null),n&&vscpp(vscppf,null,"After editing a file, you MUST call ","get_errors"," to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed.",vscpp("br",null)),"The ","insert_edit_into_file"," tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints.",vscpp("br",null),"When you use the ","insert_edit_into_file"," tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:",vscpp("br",null),"// ",gl,vscpp("br",null),"changed code",vscpp("br",null),"// ",gl,vscpp("br",null),"changed code",vscpp("br",null),"// ",gl,vscpp("br",null),vscpp("br",null),"Here is an example of how you should format an edit to an existing Person class:",vscpp("br",null),["class Person {",`	// ${gl}`,"	age: number;",`	// ${gl}`,"	getAge() {","		return this.age;","	}","}"].join(`
`)))}};d();var kae=Ne($c());var Rae=class extends kae.PromptElement{static{s(this,"SystemInstructionsPrompt")}render(){return vscpp(kae.SystemMessage,null,"You are an AI programming assistant. ",vscpp("br",null),'When asked for your name, you must respond with "GitHub Copilot". ',vscpp("br",null),"Follow the user's requirements carefully & to the letter. ",vscpp("br",null),"Follow Microsoft content policies. ",vscpp("br",null),"Avoid content that violates copyrights. ",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that.".`," ",vscpp("br",null),"Keep your answers short and impersonal. ",vscpp("br",null),"Respond in the following locale: ",this.props.turnContext.conversation.userLanguage,".")}};d();var Wht=Ne($c());var Pae=class extends hm{static{s(this,"ToolCallHistoryPrompt")}renderCopilot(){let e=rne(this.props.currentTurn.response?.message,!0),r=e.length>0;return vscpp(vscppf,null,e.map((n,i)=>wae(n)),r&&vscpp(Wht.UserMessage,null,vscpp(vscppf,null,"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself.")))}};d();d();d();d();var LE=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new om({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var pvr=new Ct("activeEditorPrompt");async function jht(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new Hc;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&mvr(n.selection)){let o=new LE(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Pi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new LE(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new LE(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Pi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new LE(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else pvr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(jht,"processActiveEditor");function mvr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(mvr,"notEmptySelection");d();d();function Ght(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(Ght,"partsLength");async function zht(t,e=1/0,r){let n=Vht(0,t,e),i=e-Ght(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return hvr();let u=Vht(c.level+1,l,i-1);u.length&&(o=!0,i-=Ght(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(zht,"visualFileTree");function Vht(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(Vht,"toParts");var hvr=s(()=>({tree:"",files:[]}),"emptyTree");var gvr=new Ct("fileReferencesPrompt");async function Kht(t,e,r,n){let i=await Yht(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=e8(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(Kht,"generateWorkspaceStructurePrompt");async function Yht(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await zht(await Jht(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s(Yht,"generateWorkspaceStructure");async function Jht(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(Mi).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=Vi(e,o);return r.excludeDotFiles&&o.startsWith(".")||Cvr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>Jht(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(Jht,"buildFileList");var Avr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],yvr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function Cvr(t){return!!(yvr.includes(Pi(t).toLowerCase())||es(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>Avr.includes(r)))}s(Cvr,"shouldAlwaysIgnoreFile");async function Dae(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Pi(a.uri)})),i=await Yht(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${nc(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return gvr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(Dae,"processDirectoryReferences");var vvr=new Ct("fileReferencesPrompt");async function Xht(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Hc;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new LE(h,void 0,[]);g&&m.push(...g.render())}else vvr.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),jht(t,e),Dae(t.context,e,n)]),u=a.flat(),f=l||[];return u.length>0||c.length>0||f.length>0?["<attachments>",...u,...c,...f,"</attachments>"]:[]}s(Xht,"processFileReferences");d();var ES=Ne($c());var xvr=new Ct("userRequestPrompt"),Bae=class extends hm{static{s(this,"UserRequestPrompt")}renderKeepGoingReminder(){let e=[];return this.props.modelConfiguration.modelFamily===Wr.Gpt41||this.props.modelConfiguration.modelFamily===Wr.Gpt5?e.push("You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user.","Your thinking should be thorough and so it's fine if it's very long. However, avoid unnecessary repetition and verbosity. You should be concise, but thorough.","You MUST iterate and keep going until the problem is solved.","You have everything you need to resolve this problem. I want you to fully solve this autonomously before coming back to me.","Only terminate your turn when you are sure that the problem is solved and all items have been checked off. Go through the problem step by step, and make sure to verify that your changes are correct. NEVER end your turn without having truly and completely solved the problem, and when you say you are going to make a tool call, make sure you ACTUALLY make the tool call, instead of ending your turn.","Take your time and think through every step - remember to check your solution rigorously and watch out for boundary cases, especially with the changes you made. Your solution must be perfect. If not, continue working on it. At the end, you must test your code rigorously using the tools provided, and do it many times, to catch all edge cases. If it is not robust, iterate more and make it perfect. Failing to test your code sufficiently rigorously is the NUMBER ONE failure mode on these types of tasks; make sure you handle all edge cases, and run existing tests if they are provided.","You MUST plan extensively before each function call, and reflect extensively on the outcomes of the previous function calls. DO NOT do this entire process by making function calls only, as this can impair your ability to solve the problem and think insightfully.","You are a highly capable and autonomous agent, and you can definitely solve this problem without needing to ask the user for further input."):(e.push("You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user. ONLY terminate your turn when you are sure that the problem is solved, or you absolutely cannot continue."),e.push("You take action when possible- the user is expecting YOU to take action and go to work for them. Don't ask unnecessary questions about the details if you can simply DO something useful instead.")),e}renderExplanationReminder(){let e=[];return this.props.modelConfiguration.modelFamily===Wr.Gpt5&&(e.push(`Skip filler acknowledgements like "Sounds good" or "Okay, I will\u2026". Open with a purposeful one-liner about what you're doing next.`),e.push("When sharing setup or run steps, present terminal commands in fenced code blocks with the correct language tag. Keep commands copyable and on separate lines."),e.push("Avoid definitive claims about the build or runtime setup unless verified from the provided context (or quick tool checks). If uncertain, state what's known from attachments and proceed with minimal steps you can adapt later."),e.push("When you create or edit runnable code, run a test yourself to confirm it works; then share optional fenced commands for more advanced runs."),e.push("Do not state your identity or model name unless the user explicitly asks you to."),e.push('For non-trivial code generation, produce a complete, runnable solution: necessary source files, a tiny runner or test/benchmark harness, a minimal `README.md`, and updated dependency manifests (e.g., `package.json`, `requirements.txt`, `pyproject.toml`). Offer quick "try it" commands and optional platform-specific speed-ups when relevant.'),e.push("Your goal is to act like a pair programmer: be friendly and helpful. If you can do more, do more. Be proactive with your solutions, think about what the user needs and what they want, and implement it proactively."),e.push("<importantReminders>"),e.push("ALWAYS start your response with a brief task receipt and a concise high-level plan for how you will proceed."),e.push("Every so often, explain the notable action you are about to take next, especially before multi-step or impactful tool calls."),e.push("</importantReminders>")),e}async renderCopilot(e,r,n,i){let o=i??new mn.CancellationTokenSource().token,a=await XA.appendToUserMessage(this.props.ctx,this.props.workspaceFolders,on(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),c=[];try{let f=await Xht({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.props.ctx},o);f.length>0&&c.push(...f)}catch(f){xvr.debug(this.props.ctx,"Failed to process file references",f)}c.push("<context>"),c.push(this.getCurrentDate()),c.push(this.getUserOS()),c.push(this.getWorkspaceFoldersHint()),c.push(await this.getWorkspaceStructureHint(o)),c.push("</context>"),c.push("<reminderInstructions>"),c.push(...this.renderKeepGoingReminder()),c.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${gl}\` to represent regions of unchanged code.`),this.props.toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0&&c.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),c.push(...this.renderExplanationReminder()),c.push("</reminderInstructions>"),c.push("<prompt>"),c.push(a),c.push("</prompt>");let u=c.join(`
`);if(JQ(this.props.userRawMessage)){let f=this.props.userRawMessage.filter(p=>p.type==="image_url");return f.length===0?vscpp(ES.UserMessage,null,vscpp(vscppf,null,u)):vscpp(ES.UserMessage,null,vscpp(ES.TextChunk,null,vscpp(vscppf,null,u)),f.map(p=>vscpp(ES.Image,{src:p.image_url.url,detail:p.image_url.detail})))}else return vscpp(ES.UserMessage,null,vscpp(vscppf,null,u))}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${es(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await Kht(this.props.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}};var Nae=class extends hm{static{s(this,"AgentPrompt")}constructor(e){super(e),this.ctx=e.turnContext.ctx,this.turnContext=e.turnContext,this.currentTurn=e.turnContext.turn}renderCopilot(e,r,n,i){let o=this.turnContext.conversation.turns.slice(0,-1);return vscpp(vscppf,null,vscpp(Rae,{turnContext:this.turnContext}),vscpp(Sae,{historyTurns:o,ctx:this.ctx}),vscpp(_ae,{toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration}),vscpp(Bae,{ctx:this.ctx,turnContext:this.turnContext,userRawMessage:this.props.userRawMessage,workspaceFolders:this.props.workspaceFolders,textDocumentProvider:this.props.textDocumentProvider,toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration}),vscpp(Pae,{currentTurn:this.currentTurn}))}};var Zht=128,Evr=100,bvr=200,bS=new Ct("toolCallingLoop"),Mae=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ha),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(xu),this.agentPromptProps={turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new aE(this.turnContext.ctx),toolsService:this.toolsService,modelConfiguration:this.modelConfiguration},this.requestId=Er(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId});let o=S6e()?bvr:Evr;this.maxToolCallingLoop=Math.min(o,zi(e.ctx,Ht.MaxToolCallingLoop))}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n),this.turnContext.clearCopilotEditsSessionHeader();let i=performance.now(),o=await this.runOne(r,e);if(lYe(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let i=(await Uq.create(Nae,this.agentPromptProps,this.modelConfiguration).renderPrompt(void 0,r,{collapseSystemMessages:!0})).messages,o="",a=new pS((f,p,m,h)=>{let g=f.trim().match(Qq)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:p,references:m,hideText:g,notifications:h.map(A=>({severity:"warning",message:A.message})),editAgentRounds:[{roundId:e,reply:f}]}),this.turn.annotations.push(...p??[]),o+=f});this.abortIfCanceled(r);let c=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let l={messages:i,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(c),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(l),bS.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let u=await this.chatFetcher.fetchResponse(l,r,this.baseTelemetryWithExp,(f,p)=>a.isFinishedAfter(f,p));return this.processChatFetchResult(e,u,o,c,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),bS.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.addToolCallModelResponseToTurn(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new fd({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Hc;case"failed":throw this.turn.status="error",new fd({message:Qw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new fd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new fd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new fd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new fd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new fd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new fd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new fd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new fd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");this.turnContext.setCopilotEditsSessionHeader(e.copilotEditsSessionHeader);let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.addToolCallModelResponseToTurn(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=Dw(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),f=this.shouldRequireToolConfirmation(o.id,l);bS.debug(this.turnContext.ctx,"need tool confirmation",f),await this.requestToolInvocationApproval(u,f,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=p0t(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=hoe(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.addToolCallResultToTurn(p,e.id)}catch(l){if(l instanceof NE||l instanceof Hc)throw this.turn.status="cancelled",c="cancelled",this.addToolCallResultToTurn(new go([new Li("")],"cancelled"),e.id),new NE(l.message);{bS.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${Rx(l)}`,l),c="error";let u=new go([new Li(Rx(l).substring(0,300))],"error");this.addToolCallResultToTurn(u,e.id),this.abortIfCanceled(i);let f=hoe(u);await this.turnContext.agentToolCalls.error(n,e.id,f.message)}}finally{let l=performance.now()-a;uYe(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;bS.error(this.turnContext.ctx,a);let c=new go([new Li(a)],"error");this.addToolCallResultToTurn(c,e.id);let l=hoe(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}addToolCallModelResponseToTurn(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.turn.response?this.turn.response.message=XQ(this.turn.response.message,n):this.turn.response={message:[n],type:"model"}}addToolCallResultToTurn(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+JU(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.turn.response)this.turn.response={message:[o],type:"model"};else{if(tne(this.turn.response.message)&&this.turn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){bS.info(this.turnContext.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.turn.response.message=XQ(this.turn.response.message,o)}}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}shouldRequireToolConfirmation(e,r){if(e.includes("run_in_terminal")){let i=r.command,a=this.turnContext.ctx.get(nE).isCommandAutoApproved(i);if(a.result==="denied")return!0;if(a.result==="approved")return!1}return zi(this.turnContext.ctx,Ht.ToolConfirmAutoApprove)===!0?!1:this.turnContext.turn.needToolCallConfirmation??!1}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Hc}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new NE("Cancelled by user");case"accept":return Promise.resolve();default:throw new NE(`Invalid confirmation result ${u.result}`)}}else bS.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>this.maxToolCallingLoop)throw bS.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${this.maxToolCallingLoop} for turn ${this.turn.id}`),new hM}checkChatPayload(e){if(e.messages.length===0)throw new fd({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>Zht)throw new fd({message:`You may not include more than ${Zht} tools in your request.`,responseIsFiltered:!1})}};var Lae=new Ct("agenticTurnProcessor"),Fae=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ha),this.chatFetcher=this.chatFetcher??new ua(e.ctx),this.turnSuggestions=new uM(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o,a)}catch(c){en.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:w2e.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a,c){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Oc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Lae.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});let u=CP().find(f=>f.id===this.turn.template?.templateId);if(u?.response){await this.handleTemplateResponse(u,this.turn.template.userQuestion,r);return}try{let f=c&&a?await XN(this.turnContext.ctx,c,a):await Jo.getModelConfiguration(this.turnContext.ctx,"edits",a);this.turnContext.setResolvedModelConfiguration(f),await new Mae(this.turnContext,this.chatFetcher,f,l).run(r);let m={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let h=await this.fetchSuggestedTitle(r,l.extendedBy({messageSource:"chat.user"},{}));typeof h=="string"&&h!==""&&(m.suggestedTitle=h)}await this.endProgress(m)}catch(f){if(f instanceof NE)Lae.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,f),this.turn.status="cancelled",await this.cancelProgress();else if(f instanceof Hc)Lae.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,f),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(f instanceof hM)this.turn.status="error",this.updateTurnResponseWithError(f.message),await this.endProgress({error:{message:f.message,code:w2e.ToolRoundExceedError,responseIsIncomplete:!0}});else if(f instanceof fd)this.turn.status="error",this.updateTurnResponseWithError(f.message),await this.endProgress({error:f.conversationError});else throw Lae.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,f),f}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return en.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=XQ(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}};d();var tke="collect-context",rke="generate-response",Oae=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ha),this.chatFetcher=this.chatFetcher??new ua(e.ctx),this.postProcessor=new dM(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModel(e,r,this.turnContext,n,i,o,a)}catch(c){en.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a,c){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Oc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(l=l.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=CP().find(h=>h.id===this.turn.template?.templateId);if(u?.response){await this.handleTemplateResponse(u,this.turn.template.userQuestion,r);return}let f=(await G1(this.turnContext.ctx)).find(h=>h.slug===this.turn.agent?.agentSlug);if(f){let h=await this.checkAgentPreconditions(f);if(h){await this.endProgress(h);return}}await n.steps.start(tke,"Collecting context"),await this.collectContext(n,r,l,this.strategy.uiKind,u,f);let p;c?p="customized":a?p=(await this.turnContext.ctx.get(fa).getBestChatModelConfig([a])).uiName:p=void 0;let m=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,p);if(!m)await n.steps.error(tke,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(tke),await n.steps.start(rke,"Generating response");let h=this.augmentTelemetry(m,l,u,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let g=await this.fetchConversationResponse(m.messages,r,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:m.tokens}),h,o,a,c),A=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(g,n),await this.endProgress({error:g.error,followUp:g.followup,suggestedTitle:g.suggestedTitle,skillResolutions:m.skillResolutions,updatedDocuments:A}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){en.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new rae(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a,c){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",u=0,f=new pS((A,y,E,b)=>{let S=A.trim().match(Qq)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:A,annotations:y,references:E,hideText:S,notifications:b.map(R=>({severity:"warning",message:R.message}))}),this.turn.response?this.turn.response.message=gae(this.turn.response.message,A):this.turn.response={message:A,type:"model"},this.turn.annotations.push(...y??[]),l+=A,this.strategy.currentDocument){let R=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);R&&R.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:R}),u+=R.length)}}),p=c&&a?await XN(this.turnContext.ctx,c,a):await Jo.getModelConfiguration(this.turnContext.ctx,"user",a);e=Jo.transformMessages(e,p.modelFamily),this.turnContext.setResolvedModelConfiguration(p);let m=this.turn.getResolvedModelId();m&&(i=i.extendedBy({modelId:m}));let h={modelConfiguration:p,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:on(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},g=await this.chatFetcher.fetchResponse(h,r,n,(A,y)=>f.isFinishedAfter(A,y));return i=i.extendedBy(void 0,{numCodeEdits:u}),await this.postProcessor.postProcess(g,r,f.appliedText,n,i,on(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",iYe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,on(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=s7(this.conversation,this.strategy.uiKind,on(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=s7(this.conversation,this.strategy.uiKind,on(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(rke,e.error.message):await r.steps.finish(rke)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var Qae=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await Jo.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(dd).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},Uae=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(fa).getBestChatModelConfig(v0(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(dd).toPrompt(e,l)}async processResponse(e){let r=[],n=on(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(Jd);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(En).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=KRe(e,r).filter(a=>zRe.includes(a.mode)),o=YRe(i,r);if(o)return await this.ctx.get(vl).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return KRe(e,r)}};d();d();var egt=Ne(ll()),tgt=Ne(TA());var Qf=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new egt.ProtocolRequestType("conversation/context");this.typeCheck=Xs.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(Dr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new tgt.ResponseError(c.code,c.message,c.data);en.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){en.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new cd(this.typeCheck.Errors(i));return i}}};var nke=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},FE=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new nke(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},qae=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(ha)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){en.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(eo).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new Qf(this.turnContext.ctx,o,x.Object({value:x.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await $C(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:Er()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var OE=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(FE).get(r);if(i)return new qae(e,i);let a=(await G1(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new Uae(e.ctx):c=new Qae(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new Fae(e,c):new Oae(e,c)}};d();var rgt=Ne(ll());var gM=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new rgt.ResponseError(tr.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};d();function Hae(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Pi(t.uri)}]}s(Hae,"resolveAsWorkspaceFolders");d();d();var Ivr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),ef=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?Ivr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Uf=class{constructor(){this.tokens=new wr(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new mn.CancellationTokenSource,i=new ef([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var Tvr=x.Object({conversationId:x.Optional(pae),workDoneToken:x.Union([x.String(),x.Number()]),turns:x.Array(_ht,{minItems:1}),capabilities:x.Optional(x.Object({allSkills:x.Optional(x.Boolean()),skills:x.Optional(x.Array(x.String()))})),doc:x.Optional(l0),textDocument:x.Optional(l0),selection:x.Optional(Dc),visibleRanges:x.Optional(xae),computeSuggestions:x.Optional(x.Boolean()),references:x.Optional(x.Array(fM)),source:x.Optional(dg),workspaceFolder:x.Optional(x.String()),workspaceFolders:x.Optional(x.Array(pM)),ignoredSkills:x.Optional(x.Array(x.String())),userLanguage:x.Optional(x.String()),model:x.Optional(x.String()),modelProviderName:x.Optional(x.String()),chatMode:x.Optional(Aae),needToolCallConfirmation:x.Optional(x.Boolean())});async function wvr(t,e,r){gM.validate(r.workspaceFolders);let n=await K1(t,r,e),i=t.get(eo).create(r);await Svr(t,i,r,n);let o=i.turns[i.turns.length-1],a=mM(r),c=t.get(Uf).add(a.progressToken,e),l=new xS(t,i,o,c);return await(await t.get(OE).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model,r.modelProviderName),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(wvr,"handleConversationCreateChecked");async function Svr(t,e,r,n){for(let i of r.turns){let o=hae(i.request),a=new mS({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=xse(r.chatMode),a.userRequestedModel=i.model??r.model,a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Hae(c),u=Eae({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(eo).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s(Svr,"addTurns");var ngt=Ze(Tvr,wvr);d();var _vr=x.Object({conversationId:x.String()});function Rvr(t,e,r){return t.get(eo).destroy(r.conversationId),["OK",null]}s(Rvr,"handleConversationDestroyChecked");var igt=Ze(_vr,Rvr);d();var kvr=x.Object({turnId:x.String(),acceptedFileCount:x.Number({minimum:0}),totalFileCount:x.Number({minimum:1})}),Pvr=new Ct("conversationNotifyCodeAcceptance");async function Dvr(t,e,r){let n=t.get(eo).findByTurnId(r.turnId);if(!n)return Pvr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await Oc(t,n,{languageId:""});return _f(t,void 0,{mode:n?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:n?.turn.getResolvedModelId()??"unknown"},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${cu("agentPanel")}.codeAcceptance`,i),["OK",null]}s(Dvr,"handleConversationNotifyCodeAcceptanceChecked");var ogt=Ze(kvr,Dvr);d();var Bvr=x.Object({});function Nvr(t,e,r){return[{path:t.get(Ai).directory},null]}s(Nvr,"handleConversationPersistenceChecked");var sgt=Ze(Bvr,Nvr);d();d();var ike=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Ki).getSession(),n=e.get(nu);return r&&r.githubAppId&&r.githubAppId!==bp?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},oke=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get($r).getToken()).envelope.chat_enabled?"ok":"failed"}}},Mvr=[new ike,new oke],fg=class{constructor(e,r=Mvr){this.ctx=e;this.checks=r;this.emitter=new Ka;this.onChange=this.emitter.event;Ps(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emitter.fire(n),n}};var Lvr=x.Object({forceCheck:x.Optional(x.Boolean())});async function Fvr(t,e,r){let n=r.forceCheck??!1;return[await t.get(fg).check(n),null]}s(Fvr,"handleConversationPreconditionsChecked");var agt=Ze(Lvr,Fvr);d();var Ovr=x.Object({turnId:x.String(),rating:x.Number(),doc:x.Optional(l0),textDocument:x.Optional(l0),source:x.Optional(dg)});async function Qvr(t,e,r){let n=await K1(t,r,e),i=HT(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await Oc(t,t.get(eo).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return _f(t,n,{rating:o,uiKind:i},{},`${cu(i)}.messageRating`,a),["OK",null]}s(Qvr,"handleConversationRatingChecked");var cgt=Ze(Ovr,Qvr);d();d();var $ae=class extends oS{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:N1,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(Bw).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Hc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(v1).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Uvr=x.Object({tools:x.Array(Rht)});function qvr(t,e,r){let n=t.get(xu);return r.tools.forEach(o=>{n.registerTool(new $ae({name:o.name,description:o.description,inputSchema:o.inputSchema,confirmationMessages:o.confirmationMessages}))}),[n.getToolsForModel().filter(o=>o.type!=="mcp"),null]}s(qvr,"conversationRegisterToolsChecked");var lgt=Ze(Uvr,qvr);d();var Hvr=x.Object({workspaceFolders:x.Optional(x.Array(pM))});async function $vr(t,e,r){let n=hRe(t).map(o=>({id:o.id,description:o.description,shortDescription:o.shortDescription,scopes:o.scopes})),i=t.get(JA);if(r.workspaceFolders&&r.workspaceFolders.length>0){let a=(await i.collectPromptFiles(t,r.workspaceFolders)).filter(c=>!n.some(l=>l.id===c.name)).map(c=>({id:c.name,description:c.description||"",shortDescription:"",scopes:["chat-panel","agent-panel"]}));n.push(...a)}return[n,null]}s($vr,"handleConversationTemplatesChecked");var ugt=Ze(Hvr,$vr);d();var Wvr=x.Object({workDoneToken:x.Union([x.String(),x.Number()]),conversationId:pae,turnId:x.Optional(TP),message:WRe,followUp:x.Optional(x.Object({id:x.String(),type:x.String()})),doc:x.Optional(l0),textDocument:x.Optional(l0),selection:x.Optional(Dc),visibleRanges:x.Optional(xae),computeSuggestions:x.Optional(x.Boolean()),references:x.Optional(x.Array(fM)),workspaceFolder:x.Optional(x.String()),workspaceFolders:x.Optional(x.Array(pM)),ignoredSkills:x.Optional(x.Array(x.String())),confirmationResponse:$lt,model:x.Optional(x.String()),modelProviderName:x.Optional(x.String()),chatMode:x.Optional(Aae),needToolCallConfirmation:x.Optional(x.Boolean())});async function jvr(t,e,r){gM.validate(r.workspaceFolders);let n=await K1(t,r,e),i=t.get(eo),o=i.get(r.conversationId),a=hae(r.message),c=new mS({message:a,type:"user"},r.turnId);c.chatMode=xse(r.chatMode),c.userRequestedModel=r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Hae(l),f=Eae({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,f,l,u,r.ignoredSkills,r.confirmationResponse);let p=mM(r),m=t.get(Uf).add(p.progressToken,e),h=new xS(t,o,c,m);return await(await t.get(OE).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model,r.modelProviderName),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(jvr,"handleConversationTurnChecked");var dgt=Ze(Wvr,jvr);d();var Gvr=x.Object({conversationId:x.String(),turnId:x.String(),source:x.Optional(dg)});async function Vvr(t,e,r){t.get(eo).deleteTurn(r.conversationId,r.turnId);let i=HT(r.source),o=await Oc(t,t.get(eo).findByTurnId(r.turnId),{languageId:""});return _f(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${cu(i)}.messageDelete`,o),["OK",null]}s(Vvr,"handleConversationTurnDeleteChecked");var fgt=Ze(Gvr,Vvr);d();var zvr=x.Object({toolIds:x.Array(x.String())});function Kvr(t,e,r){let n=t.get(xu);return r.toolIds.forEach(o=>{n.unregisterTool(o)}),[n.getToolsForModel().filter(o=>o.type!=="mcp"),null]}s(Kvr,"conversationUnregisterToolsChecked");var pgt=Ze(zvr,Kvr);d();var Yvr=x.Object({document:x.Object({uri:x.String(),text:x.String(),languageId:x.String(),version:x.Number()}),selection:x.Object({start:x.Object({line:x.Number(),character:x.Number()}),end:x.Object({line:x.Number(),character:x.Number()})})});function Jvr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(Jvr,"buildSystemMessage");function Xvr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(Xvr,"buildUserMessage");function Zvr(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,f,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(f.toLowerCase()))continue;let h=parseInt(l)-1;if(h<0||h>=n.length)continue;let g=n[h],A=Math.max(g.search(/\S/),0),y=g.trimEnd().length,E={uri:t.uri,range:{start:{line:h,character:A},end:{line:h,character:y}},message:m.trim(),kind:f.toLowerCase(),severity:p.toLowerCase()};r.push(E)}return r}s(Zvr,"parseReviewComments");async function exr(t,e,r){if(!r.document.text)return[null,{code:tr.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:tr.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:tr.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:tr.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:tr.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ua),o=await Jo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:Jvr()},{role:"user",content:Xvr(r)}],c=await t.get(Mt).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:$d.user("code-review",Er())},e,c);if(l.type!=="success")return[null,{code:tr.InternalError,message:"Failed to generate code review"}];let u=Zvr(r.document,l.value);return u.sort((f,p)=>f.range.start.line-p.range.start.line),[{comments:u},null]}s(exr,"handleCopilotCodeReviewChecked");var mgt=Ze(Yvr,exr);d();d();var qq=class t{constructor(e){this.ctx=e;this.name="ReviewChangesProvider"}static{s(this,"ReviewChangesProvider")}static{this.DEFAULT_TIMEOUT=120*1e3}async fetchCodeReview(e,r){let n=await this.ctx.get($r).getToken(),i=Jm(this.ctx,n,"api","agents/github-code-review"),a=DC(this.ctx)["Copilot-Integration-Id"];return yx(this.ctx,i,n.token,void 0,ZA(),e,r,{"X-Copilot-Code-Review-Mode":"ide","Copilot-Integration-Id":a},t.DEFAULT_TIMEOUT)}static changesToReference(e){return{type:"github.pull_request",id:"1",data:{type:"pull-request",headFileContents:e.map(r=>({path:r.path,content:r.headContent})),baseFileContents:e.map(r=>({path:r.path,content:r.baseContent}))}}}static createReviewRequest(e){return{messages:[{role:"user",copilot_references:[t.changesToReference(e)]}]}}};d();d();var Wae=/```suggestion(\u0020*(\r\n|\n))((?<suggestion>[\s\S]*?)(\r\n|\n))?```/g;var jae=class t{static{s(this,"ReviewChangesResponseParser")}static findFirstNonWhitespaceCharacterIndex(e){let r=e.match(/\S/);return r?r.index:e.length}static removeSuggestion(e){return e.replaceAll(Wae,"")}static extractSuggestionAndText(e){Wae.lastIndex=0;let n=Wae.exec(e)?.groups?.suggestion||null,i=t.removeSuggestion(e);return{suggestion:n,textWithoutSuggestion:i}}static ghCommentToReviewComment(e,r){let n=r.headContent.split(`
`)[e.data.line-1],i=n.trimEnd().length,o={start:{line:e.data.start_line?e.data.start_line-1:e.data.line-1,character:t.findFirstNonWhitespaceCharacterIndex(n)},end:{line:e.data.line-1,character:i}},a=e.data.body,{suggestion:c,textWithoutSuggestion:l}=t.extractSuggestionAndText(a);return{uri:r.uri,range:o,message:l,kind:e.data.problem_type,severity:"medium",suggestion:c}}static parseLine(e){if(e==="data: [DONE]")return[];if(e==="")return[];let r=JSON.parse(e.replace("data: ",""));return Array.isArray(r.copilot_references)&&r.copilot_references.length>0?r.copilot_references.filter(n=>n.type):[]}static parseReviewResponse(e,r){let n=e.split(`
`),i=[];for(let o of n){let a=t.parseLine(o);for(let c of a.filter(l=>l.type==="github.generated-pull-request-comment")){if(c.data.side!=="RIGHT")continue;let l=r.find(f=>f.path===c.data.path);if(!l)continue;let u=t.ghCommentToReviewComment(c,l);i.push(u)}}return i}};var txr=x.Object({uri:x.String(),path:x.String(),baseContent:x.String(),headContent:x.String()}),rxr=x.Object({changes:x.Array(txr)}),Hq;async function nxr(t,e,r){Hq&&(Hq.cancel(),Hq.dispose()),Hq=new mn.CancellationTokenSource;let n=new ef([e,Hq.token]),i=new qq(t);if(!(await t.get($r).getToken()).isCopilotCodeReviewEnabled)return[null,{code:tr.InternalError,message:"GitHub Copilot Code Review is not enabled."}];let a=qq.createReviewRequest(r.changes),c=await i.fetchCodeReview(a,n);if(!c.ok)return c.status===402?[null,{code:c.status,message:"You have reached your GitHub Copilot Code Review quota limit."}]:[null,{code:tr.InternalError,message:"Failed to generate code review."}];let l=await c.text();return[{comments:jae.parseReviewResponse(l,r.changes)},null]}s(nxr,"handleCopilotCodeReviewReviewChangesChecked");var hgt=Ze(rxr,nxr);d();d();var IS=class{constructor(e,r,n,i,o,a){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.userSelectedModelProviderName=a;this.workingSetUriToPathMap=new Map;for(let c of n.workingSet)this.workingSetUriToPathMap.set(c.uri,fE.uriToPath(c.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return $d.user("conversation-edits",this.editTurnId)}};d();async function Gae(t,e,r,n){let o=t.get(yl).create("panel","en"),a=new Uw({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new IS(t,o,a,n,Wr.Gpt4o),u=t.get(sd);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let f="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${f})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:f}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:f,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(Gae,"streamMockedResult");d();var ixr=x.Object({enableMock:x.Boolean()}),X1=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function oxr(t,e,r){return t.get(X1).setMockEnabled(r.enableMock),["OK",null]}s(oxr,"handleTestingSetCopilotEditsResponseChecked");var ggt=Ze(ixr,oxr);var sxr=x.Object({request:x.String(),response:x.Optional(x.String())}),axr=x.Union([x.Literal("panel")]),cxr=x.Object({partialResultToken:x.Union([x.String(),x.Number()]),turns:x.Array(sxr,{minItems:1}),workingSet:x.Optional(x.Array(Mq)),source:x.Optional(axr),workspaceFolder:x.Optional(x.String()),userLanguage:x.Optional(x.String()),model:x.Optional(x.String()),modelProviderName:x.Optional(x.String())});function lxr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new Uw({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(lxr,"buildEditConversation");async function uxr(t,e,r){if(t.get(X1).isMockEnabled())return await Gae(t,Er(),Er(),r.partialResultToken),[[],null];let n=lxr(t.get(yl),r),i=n.getLastTurn(),o=new IS(t,n,i,r.partialResultToken,r.model,r.modelProviderName),a=t.get(Uf).add(r.partialResultToken,e);return[await t.get(pE).createOrContinueEditConversation(o,a),null]}s(uxr,"handleEditConversationCreateChecked");var Agt=Ze(cxr,uxr);d();var dxr=x.Object({editConversationId:x.String()});function fxr(t,e,r){return t.get(yl).destroy(r.editConversationId),["OK",null]}s(fxr,"handleEditConversationDestroyChecked");var ygt=Ze(dxr,fxr);d();var pxr=x.Object({partialResultToken:x.Union([x.String(),x.Number()]),editConversationId:x.String(),message:x.String(),workingSet:x.Optional(x.Array(Mq)),workspaceFolder:x.Optional(x.String()),userLanguage:x.Optional(x.String()),model:x.Optional(x.String())});function mxr(t,e,r){let n=t.get(e),i=new Uw({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(mxr,"buildEditConversation");async function hxr(t,e,r){if(t.get(X1).isMockEnabled())return await Gae(t,r.editConversationId,Er(),r.partialResultToken),[[],null];let n=t.get(yl),i=mxr(n,r.editConversationId,r),o=i.getLastTurn(),a=new IS(t,i,o,r.partialResultToken,r.model),c=t.get(Uf).add(r.partialResultToken,e);return[await t.get(pE).createOrContinueEditConversation(a,c),null]}s(hxr,"handleEditConversationTurnChecked");var Cgt=Ze(pxr,hxr);d();var gxr=x.Object({editConversationId:x.String(),editTurnId:x.String(),source:x.Optional(dg)});async function Axr(t,e,r){t.get(yl).deleteTurn(r.editConversationId,r.editTurnId);let i=await QR(t,r.editTurnId,r.editConversationId,{languageId:""});return _f(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${cu("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(Axr,"handleEditConversationTurnDeleteChecked");var vgt=Ze(gxr,Axr);d();var yxr=x.Object({}),Cxr=x.Object({servers:x.Array(x.Object({name:x.String(),tools:x.Array(x.Object({name:x.String(),status:x.Enum(CU)}))}))});function vxr(t,e,r){return[t.get(tg).getAllTools(),null]}s(vxr,"handleGetMCPToolsChecked");function xxr(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(tg).updateMCPToolStatus(i,a,c);return[t.get(tg).getAllTools(),null]}s(xxr,"handleUpdateMCPToolsStatusChecked");var xgt=Ze(yxr,vxr),Egt=Ze(Cxr,xxr);d();var Exr=x.Object({});async function bxr(t,e,r){let n=await t.get($r).getToken();return[Ixr(await t.get(xf).getMetadata(),n),null]}s(bxr,"handleCopilotModelsChecked");function Ixr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=dh.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!W$e.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(Ixr,"filterModels");var bgt=Ze(Exr,bxr);d();var Txr=x.Object({model:x.Optional(x.String()),status:x.Optional(x.String())});async function wxr(t,e,r){return r.model&&r.status==="enabled"?await t.get(xf).acceptModelPolicy(r.model)?["OK",null]:[null,{code:tr.InternalError,message:"Failed to accept model policy"}]:[null,{code:tr.InvalidRequest,message:"Invalid model or status"}]}s(wxr,"handleCopilotModelsPolicyChecked");var Igt=Ze(Txr,wxr);d();d();d();d();function Sxr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(Sxr,"panelPositionForDocument");async function*Tgt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(Tgt,"trimChoices");var AM=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=Sxr(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function ske(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await ske(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(ske,"reportSolutions");async function ake(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:ake(t,e)}}s(ake,"generateSolutionsStream");function Vae(t){return t.replace(/\s+/g,"")}s(Vae,"normalizeCompletionText");async function wgt(t,e,r,n,i,o){let a=e.targetPosition,c=e.textDocument,l=IT(t,c.uri),u=Er(),f=Gr.createAndMarkAsIssued({headerRequestId:u,languageId:c.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Mt).updateExPValuesAndAssignments({uri:c.uri,languageId:c.detectedLanguageId},f),i&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:i})),o&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({comparisonRequestId:o}));let p=await M3(t,u,KC(c,a),e.savedTelemetryData);if(p.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(p.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(p.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(p.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(p.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let m=p.prompt,h=p.trailingWs;return h.length>0&&(e.startPosition=vs.position(e.startPosition.line,e.startPosition.character-h.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...ED(m),solutionCount:e.solutionCountTarget,promptEndPos:c.offsetAt(a)}),n.debug(t,"prompt:",m),Bt(t,"solution.requested",e.savedTelemetryData),{prompt:m,trailingWs:h,telemetryData:e.savedTelemetryData,repoInfo:l,ourRequestId:u}}s(wgt,"setupPromptAndTelemetry");function Sgt(t,e,r,n,i,o){let a=t.get(EA).forLanguage(t,e.detectedLanguageId,o),c=Fp(e.detectedLanguageId),l=zX(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},f={};a==="parsing"&&!c&&(f.stop=[`

`,`\r
\r
`]);let p=bT(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=c?l7(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=c?l7(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:f,finishedCb:m,engineInfo:p}}s(Sgt,"setupCompletionParams");var cke=new Ct("solutions");async function _xr(t,e){let r=e.targetPosition,n=e.textDocument,i=await wgt(t,e,"open copilot",cke);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:f,postOptions:p,finishedCb:m,engineInfo:h}=Sgt(t,n,r,o,e,c),g=e.cancellationToken,A={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:f},y=await t.get(w0).fetchAndStreamCompletions(t,A,c.extendedBy(),m,g);if(y.type==="failed"||y.type==="canceled")return{status:"FinishedWithError",error:`${y.type}: ${y.reason}`};let E=y.choices;E=Tgt(E),E=o7(E,R=>b7(t,n,r,R,!1,cke));let b=o7(E,async R=>{let B=R.completionText;cke.info(t,`Open Copilot completion: [${R.completionText}]`);let L=await HYe(t,n,r,R.completionText)??vs.position(r.line,0),[O]=YT(n.getText(vs.range(L,r)));B=O+B;let Y=R.completionText;a.length>0&&Y.startsWith(a)&&(Y=Y.substring(a.length));let V=R.meanLogProb,z=V!==void 0?Math.exp(V):0,Q=c.extendedBy({choiceIndex:R.choiceIndex.toString()});return{completionText:Y,insertText:B,range:vs.range(L,r),meanProb:z,meanLogProb:V||0,requestId:R.requestId,choiceIndex:R.choiceIndex,telemetryData:Q,copilotAnnotations:R.copilotAnnotations}});return ake(g,b[Symbol.asyncIterator]())}s(_xr,"launchSolutions");async function zae(t,e,r){return t.get(So).withProgress(async()=>{let i=_xr(t,e);return await ske(i,r)})}s(zae,"runSolutions");var Rgt=Ne(AI()),Wq=Ne(ll());d();d();function Kae(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(Kae,"parseChallengeDoc");var Rxr=x.Object({text:x.String(),score:x.Number()}),kxr=x.Object({documents:x.Array(Rxr),options:x.Optional(x.Object({}))});async function Yae(t,e,r){let n=Er();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=Kae(o,t),f=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:f,insertText:f,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:fC.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(Yae,"runTestSolutions");var Cy=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function Pxr(t,e,r){return t.forceSet(Cy,new Cy(r.documents)),["OK",null]}s(Pxr,"handleTestingSetPanelCompletionDocumentsChecked");var _gt=Ze(kxr,Pxr);var kgt=OG.type;function Dxr(t,e,r,n,i){let o=Vae(n.completionText),a=(0,Rgt.SHA256)(o).toString();return t.get($s).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:Z_e,title:`Accept completion ${i}`,arguments:[a]}}}s(Dxr,"makeCompletion");function uke(t,e){return`${t}/${e}`}s(uke,"progressMessage");var lke=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Dr)}async onSolution(e){this.count+=1;let r=Dxr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(Wq.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:uke(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return Bxr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(Wq.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function Bxr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(Wq.WorkDoneProgress.type,t,{kind:"end",message:uke(r,10)})}s(Bxr,"reportDone");var $q;async function Nxr(t,e,r){let n=await yy(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(Dr).connection.sendProgress(Wq.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:uke(0,10),percentage:0});let o=[],a=s(f=>(o.push(f),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async f=>{await t.get(Dr).connection.sendProgress(OG.partialResult,c,{items:[f]})},"onCompletion"));let l=new lke(t,r,a),u=t.get(Cy);if(u.documents){let f=u.documents;await Yae(i,f,l)}else{l.offset=n.offsetAt(i);let f=new AM(n,i,e,10);await zae(t,f,l)}return l.error!==void 0?[null,{code:tr.InternalError,message:l.error}]:[{items:o},null]}s(Nxr,"handleChecked");async function Mxr(t,e,r){$q&&($q.cancel(),$q.dispose()),$q=new mn.CancellationTokenSource;let n=$q.token,i=new ef([e,n]);try{return await Nxr(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:tr.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(Mxr,"handleCheckedWithAbort");var Pgt=Ze(E6e,Mxr);d();d();d();function Fxr(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(df).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(f){return new URL(f).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(Fxr,"urlsToCheck");async function Dgt(t,e,r=TD(t),n,i){let o=Fxr(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:f}=await Oxr(e,c,l,i);return{label:a,url:c,message:u,status:f}});return await Promise.all(o)}s(Dgt,"checkReachability");async function Oxr(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(Oxr,"determineReachability");var gm=Ne(require("os")),yM=Ne(require("tls"));async function Ngt(t,e){let r=await t.get(Hr).getImplementation(),n=await t.get($r).getGitHubSession(),i=await t.get($r).getToken().catch(()=>{});return{sections:[Uxr(t),Qxr(t,n),qxr(t,r),await Hxr(t,r,i?.endpoints,n,e)]}}s(Ngt,"collectDiagnostics");function Mgt(t){return t.sections.map($xr).join(gm.EOL+gm.EOL)+gm.EOL}s(Mgt,"formatDiagnosticsAsMarkdown");function Qxr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:t2(t),"GitHub Account":n,"Session ID":t.get(Ds).sessionId,"Send Restricted Telemetry":bD(t)?"enabled":"disabled","Content Exclusion":t.get(ul).enabled?"enabled":"unavailable"}}}s(Qxr,"collectCopilotSection");function Uxr(t){let e={Plugin:jxr(t),Editor:Wxr(t),"Operating System":`${gm.type()} ${gm.release()} (${gm.arch()})`};return Z1(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(Uxr,"collectEnvironmentSection");function qxr(t,e){let r=t.get(Pc).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":yM.rootCertificates.length,"TLS Default Min Version":yM.DEFAULT_MIN_VERSION,"TLS Default Max Version":yM.DEFAULT_MAX_VERSION};return Z1(n,"http_proxy"),Z1(n,"https_proxy"),Z1(n,"no_proxy"),Z1(n,"SSL_CERT_FILE"),Z1(n,"SSL_CERT_DIR"),Z1(n,"OPENSSL_CONF"),Z1(n,"NODE_EXTRA_CA_CERTS"),Z1(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(qxr,"collectNetworkConfigSection");async function Hxr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await Dgt(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(Hxr,"collectReachabilitySection");function Bgt(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(Bgt,"quoteCode");function Z1(t,e){let r=process.env[e];r&&(t[Bgt(e)]=Bgt(r)),r!==process.env[e.toUpperCase()]&&Z1(t,e.toUpperCase())}s(Z1,"addEnvironmentVariable");function $xr(t){return`## ${t.name}`+gm.EOL+gm.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(gm.EOL)}s($xr,"formatSectionAsMarkdown");function Wxr(t){let e=t.get(hn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(Wxr,"getEditorDisplayVersion");function jxr(t){let e=t.get(hn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(jxr,"getPluginDisplayVersion");var Gxr=x.Object({});async function Vxr(t,e){return[{report:Mgt(await Ngt(t,e))},null]}s(Vxr,"handleDiagnosticsChecked");var Lgt=Ze(Gxr,Vxr);d();d();d();d();function Fgt(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let f=u.replace(l,""),p=u.length-f.length;return c(p)+f}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,f=u%i;if(f!==0&&u>0){let p=" ".repeat(f);return n(c,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(Fgt,"normalizeIndentCharacter");function Ogt(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let f=vs.range(vs.position(i.line,0),vs.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=Fgt(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let h=vs.range(f.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:Er(),insertText:p,range:f,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(f=>f.index===a);if(u){let f=l.filter(p=>p.index!==a);l=[u,...f]}}return l}s(Ogt,"completionsFromGhostTextResults");async function dke(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await Sxe(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=WXe(t,e.textDocument,e.position,c),u=Ogt(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};if(c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let p={isSpeculative:!0,opportunityId:n.opportunityId},m=s(()=>Sxe(t,e,void 0,p),"fn");t.get(kh).set(u[0].clientCompletionId,m)}let f=u.map(p=>{let{start:m,end:h}=p.range,g=mn.Range.create(m,mn.Position.create(h.line,h.character-i));return{...p,range:g}});return{...o,value:f}}s(dke,"getInlineCompletionsResult");async function Jae(t,e,r,n,i={}){zxr(t,e,r);let o=await dke(t,KC(e,r),n,i);return CYe(t,o)}s(Jae,"getInlineCompletions");function zxr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});BX.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(zxr,"logCompletionLocation");var Wgt=Ne(ll());d();var Qgt=require("crypto");var CM=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new pke(e,this.id)}},pke=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(Dr),o=(0,Qgt.randomUUID)(),a=i.connection.onProgress(MG.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest(MG.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function vM(t,e,r){try{let n=t.get(Qc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof CM&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof CM&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){un.error(t,"Failed to set context items on context providers",n)}}s(vM,"setContextItems");var fke={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};function Ugt(t,e,r){return e.map(i=>{try{if(typeof i=="string")return Fc(r.uri,i,fke);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=Fc(r.uri,i.scheme||"",fke)),"pattern"in i&&(o&&=Fc(r.uri,i.pattern||"",fke)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Ugt,"match");d();var Kxr=x.Object({documents:x.Array(x.String()),basename:x.Optional(x.String()),options:x.Optional(x.Object({}))}),wS=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function Yxr(t,e,r){return t.forceSet(wS,new wS(r.documents,r.basename||"")),["OK",null]}s(Yxr,"handleTestingSetCompletionDocumentsChecked");var qgt=new Ct("setCompletionDocuments"),$gt=Ze(Kxr,Yxr);function Xae(t,e,r,n){let i=t.get(wS);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){qgt.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=Jxr(i,r);return a&&a.length>0?Hgt(a,o,e):void 0}else return qgt.debug(t,"Returning completions for all pre-set documents"),Hgt(i.documents,o,e)}}s(Xae,"getTestCompletions");function Hgt(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=Kae(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(Hgt,"sliceAndMapCompletions");function Jxr(t,e){return t.basename===Pi(e)?t.documents||[]:[]}s(Jxr,"getFilteredDocs");var jgt=x.Object({doc:x.Object({position:tu,insertSpaces:x.Optional(x.Boolean()),tabSize:x.Optional(x.Number()),uri:o6,version:x.Number()}),contextItems:x.Optional(_ve)}),jq;async function Ggt(t,e,r,n){jq&&(jq.cancel(),jq.dispose()),jq=new mn.CancellationTokenSource;let i=new ef([e,jq.token]);r.contextItems&&vM(t,r.contextItems);let o=Xae(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:Er(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await yy(t,r.doc,i)}catch(p){if(!(p instanceof Wgt.ResponseError))throw p;switch(p.code){case tr.CopilotNotAvailable:case tr.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await Jae(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get($s);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Ggt,"handleGetCompletionsHelper");var Vgt=Ze(jgt,(t,e,r)=>Ggt(t,e,r,!1)),zgt=Ze(jgt,(t,e,r)=>Ggt(t,e,r,!0));d();var Kgt=Ne(AI()),xM=Ne(ll());var Xxr=x.Object({doc:x.Object({position:tu,uri:o6,version:x.Number()}),panelId:x.String()});function Zxr(t,e,r,n,i){let o=Vae(i.completionText),a=(0,Kgt.SHA256)(o).toString();return t.get($s).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(Zxr,"makeSolution");var mke=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Dr)}onSolution(e){return this.service.connection.sendNotification(new xM.NotificationType("PanelSolution"),Zxr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Ygt(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new xM.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Ygt(t,e){return e.connection.sendNotification(new xM.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(Ygt,"reportDone");var Gq;async function eEr(t,e,r){Gq&&(Gq.cancel(),Gq.dispose()),Gq=new mn.CancellationTokenSource;let n=new ef([e,Gq.token]),i=r.doc.position,o=vs.range(i,i),a=new mke(t,r,o),c=t.get(Cy);if(c.documents){let l=c.documents;Yae(i,l,a)}else{let l;try{l=await yy(t,r.doc,n)}catch(f){if(!(f instanceof xM.ResponseError))throw f;switch(f.code){case tr.CopilotNotAvailable:case tr.ContentModified:return tEr(t,r)}throw f}a.offset=l.offsetAt(i);let u=new AM(l,i,n,10);zae(t,u,a)}return[{solutionCountTarget:10},null]}s(eEr,"handleGetPanelCompletionsChecked");async function tEr(t,e){return await Ygt(e.panelId,t.get(Dr)),[{solutionCountTarget:0},null]}s(tEr,"produceEmptySolutions");var Jgt=Ze(Xxr,eEr);d();var rEr=x.Object({});function nEr(t,e,r){return[{version:t.get(Io).getDisplayVersion(),buildType:pC(t),runtimeVersion:`node/${process.versions.node}`},null]}s(nEr,"handleGetVersionChecked");var Xgt=Ze(rEr,nEr);d();var iEr=x.Object({changes:x.Array(x.String()),userCommits:x.Array(x.String()),recentCommits:x.Array(x.String()),workspaceFolder:x.Optional(x.String()),userLanguage:x.Optional(x.String())});async function oEr(t,e,r){if(r.changes.length===0)return[null,{code:tr.InvalidRequest,message:"No changes provided"}];let n=t.get(eo),i=n.create({capabilities:{skills:[$1]}}),o=new mS({message:"",type:"user"});await n.addTurn(i.id,o);let a=mM({workDoneToken:Er()});await t.get(ha).begin(i,o,a);let u=(await new xS(t,i,o,e).skillResolver.resolve($1))?.head?.name,p=await t.get(Lk).generateCommitMessage(t,e,r,u);return p==null?[null,{code:tr.InternalError,message:"Failed to generate commit message"}]:[{commitMessage:p},null]}s(oEr,"handleGitCommitGenerateChecked");var Zgt=Ze(iEr,oEr);d();var tAt=Kpe.type,Vq;function eAt(t){return{title:"Completion Accepted",command:tq,arguments:[t]}}s(eAt,"makeCommand");async function sEr(t,e,r){Vq&&(Vq.cancel(),Vq.dispose());let n=r.context.triggerKind===1;Vq=new mn.CancellationTokenSource;let i=Vq.token,o=new ef([e,i]);r.contextItems&&vM(t,r.contextItems,r.data);let a=Xae(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:eAt(Er()),...h}))},null];let c=await yy(t,r.textDocument,o),l=r.position,u=await Jae(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:tr.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:tr.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let f=t.get($s);for(let m of u)f.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:eAt(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(sEr,"handleChecked");var rAt=Ze(FX,(t,e,r)=>sEr(t,e,r));d();var nAt=Xpe.type,zq;async function cEr(t,e,r){zq&&(zq.cancel(),zq.dispose());let n=r.context.triggerKind===1;zq=new mn.CancellationTokenSource;let i=zq.token,o=new ef([e,i]);r.contextItems&&vM(t,r.contextItems);let a=await yy(t,r.textDocument,o),c=await dke(t,KC(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(cEr,"handleChecked");var iAt=Ze(FX,(t,e,r)=>cEr(t,e,r));d();d();function hke(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return EM(i)}s(hke,"asReadableCert");function EM(t){return t.replace(/\s/g,"")}s(EM,"normalizeNewlines");var uEr=x.Object({});async function dEr(t){return[{certificates:(await t.get(hl).getAllRootCAs()).map(EM)},null]}s(dEr,"handleListCertificatesChecked");var oAt=Ze(uEr,dEr);d();d();var aAt=x.Object({url:x.String(),source:x.String(),id:x.String()}),cAt=x.Object({version:x.String(),release_date:x.String(),is_latest:x.Boolean()}),fEr=x.Object({id:x.String(),name:x.String(),description:x.String(),status:x.Optional(x.Union([x.Literal("active"),x.Literal("deprecated")])),repository:x.Optional(aAt),version_detail:cAt}),FAo=x.Object({servers:x.Array(fEr),next:x.Optional(x.String()),total_count:x.Number()}),sAt=x.Union([x.Object({type:x.Literal("positional"),description:x.Optional(x.String()),is_required:x.Optional(x.Boolean()),format:x.Optional(x.Union([x.Literal("string"),x.Literal("number"),x.Literal("boolean"),x.Literal("filepath")])),value:x.Optional(x.String()),is_secret:x.Optional(x.Boolean()),default:x.Optional(x.String()),choices:x.Optional(x.Array(x.String())),value_hint:x.Optional(x.String()),is_repeated:x.Optional(x.Boolean())}),x.Object({type:x.Literal("named"),name:x.String(),description:x.Optional(x.String()),is_required:x.Optional(x.Boolean()),format:x.Optional(x.Union([x.Literal("string"),x.Literal("number"),x.Literal("boolean"),x.Literal("filepath")])),value:x.Optional(x.String()),is_secret:x.Optional(x.Boolean()),default:x.Optional(x.String()),choices:x.Optional(x.Array(x.String())),is_repeated:x.Optional(x.Boolean())})]),lAt=x.Object({name:x.String(),description:x.Optional(x.String()),is_required:x.Optional(x.Boolean()),format:x.Optional(x.Union([x.Literal("string"),x.Literal("number"),x.Literal("boolean"),x.Literal("filepath")])),value:x.Optional(x.String()),is_secret:x.Optional(x.Boolean()),default:x.Optional(x.String()),choices:x.Optional(x.Array(x.String()))}),pEr=x.Object({registry_name:x.String(),name:x.String(),version:x.String(),runtime_hint:x.Optional(x.String()),runtime_arguments:x.Optional(x.Array(sAt)),package_arguments:x.Optional(x.Array(sAt)),environment_variables:x.Optional(x.Array(lAt))}),mEr=x.Object({transport_type:x.Union([x.Literal("streamable"),x.Literal("sse")]),url:x.String(),headers:x.Optional(x.Array(lAt))}),OAo=x.Object({id:x.String(),name:x.String(),description:x.String(),status:x.Optional(x.Union([x.Literal("active"),x.Literal("deprecated")])),repository:x.Optional(aAt),version_detail:cAt,packages:x.Optional(x.Array(pEr)),remotes:x.Optional(x.Array(mEr))}),uAt=x.Object({baseUrl:x.String(),limit:x.Optional(x.Number({minimum:1})),offset:x.Optional(x.Number({minimum:0,default:0}))}),dAt=x.Object({baseUrl:x.String(),id:x.String(),version:x.Optional(x.String())});async function hEr(t,e,r){if(!r.baseUrl)return[null,{code:tr.InvalidParams,message:"Base URL is required"}];let n=t.get(Hr),i=new URLSearchParams;r.limit!==void 0&&i.append("limit",r.limit.toString()),r.offset!==void 0&&i.append("offset",r.offset.toString());let o=`${r.baseUrl}${i.toString()?`?${i.toString()}`:""}`;try{let a=await n.fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)return[null,{code:tr.InternalError,message:`MCP Registry API error: HTTP ${a.status}`}];let c=await a.text();return[JSON.parse(c),null]}catch(a){return[null,{code:tr.InternalError,message:`Failed to fetch servers from MCP Registry: ${a instanceof Error?a.message:String(a)}`}]}}s(hEr,"handleListServersChecked");async function gEr(t,e,r){if(!r.baseUrl)return[null,{code:tr.InvalidParams,message:"Base URL is required"}];if(!r.id)return[null,{code:tr.InvalidParams,message:"Server ID is required"}];let n=t.get(Hr),i=new URLSearchParams;r.version!==void 0&&i.append("version",r.version);let o=`${r.baseUrl}/${r.id}${i.toString()?`?${i.toString()}`:""}`;try{let a=await n.fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(a.status===404)return[null,{code:tr.InternalError,message:"Server not found"}];if(!a.ok)return[null,{code:tr.InternalError,message:`MCP Registry API error: HTTP ${a.status}`}];let c=await a.text();return[JSON.parse(c),null]}catch(a){return[null,{code:tr.InternalError,message:`Failed to fetch server from MCP Registry: ${a instanceof Error?a.message:String(a)}`}]}}s(gEr,"handleGetServerChecked");var fAt=Ze(uAt,hEr),pAt=Ze(dAt,gEr);d();async function AEr(t,e,r){let n=t.get(dy);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Pl(r.textDocument.uri);t.get(NA).onUserPositionChange(i,new Ur(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:tq,arguments:[c.id]}}))},null]:[{edits:[]},null]}s(AEr,"handleChecked");var mAt=Ze(v6e,AEr);d();var CEr=x.Object({uuid:x.String({minLength:1}),acceptedLength:x.Optional(x.Number({minimum:1}))});function vEr(t,e,r){let n=t.get($s),i=n.get(r.uuid);return i&&(xEr(r,i)==="full"?(n.delete(r.uuid),F3(t,i,i.triggerCategory)):pee(t,i,r.acceptedLength,0,i.triggerCategory,"cumulative")),["OK",null]}s(vEr,"notifyAcceptedChecked");function xEr(t,e){return t.acceptedLength===void 0?"full":t.acceptedLength<e.insertText.length?"partial":"full"}s(xEr,"getCompletionType");var hAt=Ze(CEr,vEr);d();var EEr=x.Object({uuids:x.Array(x.String())});function bEr(t,e,r){let n=t.get($s),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));fee(t,"ghostText",o.offset,o.uri,a),t.get(ed).resetState()}return["OK",null]}s(bEr,"notifyRejectedChecked");var gAt=Ze(EEr,bEr);d();var IEr=x.Object({uuid:x.String({minLength:1})});function TEr(t,e,r){let i=t.get($s).get(r.uuid);return i&&NX(t,i.triggerCategory,i),["OK",null]}s(TEr,"notifyShownChecked");var AAt=Ze(IEr,TEr);d();var wEr=DYe;function SEr(t,e,r){let n=t.get(Qc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new CM(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(SEr,"registerContextProviders");var yAt=Ze(wEr,SEr);d();d();var _Er=x.Object({uri:x.Optional(x.String())}),REr=x.Object({showEditorCompletions:x.Optional(x.Boolean()),enableAutoCompletions:x.Optional(x.Boolean()),delayCompletions:x.Optional(x.Boolean()),filterCompletions:x.Optional(x.Boolean())}),vAt=x.Object({github:x.Optional(x.Object({copilot:x.Optional(x.Object({}))})),[FDe]:x.Optional(_Er),http:x.Optional(nje),telemetry:x.Optional(x.Object({telemetryLevel:x.Optional(x.String())}))}),Kq=Object.keys(vAt.properties).filter(t=>t!=="github"),kEr=x.Intersect([vAt,REr]),PEr=x.Object({settings:x.Optional(x.Union([x.Object({}),x.Array(x.Unknown(),{maxItems:0})])),authProvider:x.Optional(x.Never())}),CAt=Xs.Compile(PEr),gke=Xs.Compile(kEr);async function ece(t,e){if(!CAt.Check(e))throw Zae(t),new cd(CAt.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;return r&&DEr(t,r),Zae(t,r),Promise.resolve()}s(ece,"notifyChangeConfiguration");function DEr(t,e){for(let n of gke.Errors(e)){let i=n.path.split("/")?.[1];Su.warn(t,`Invalid ${n.path.slice(1).replace(/\//g,".")} setting:`,n.message),delete e[i]}if(!gke.Check(e))throw new cd(gke.Errors(e));e.http&&Ake(t,e.http);let r=e["github-enterprise"];r&&L6e(t,r.uri),e.github?.copilot&&BEr(t,e.github.copilot)}s(DEr,"applySettingsToConfiguration");function BEr(t,e){let r=t.get(og),n={};for(let i of Object.values(Ht)){let o=aje(e,i);n[i]=o}r.setCopilotSettings(n),typeof e.mcp=="string"&&LEr(t,e.mcp),e.agent&&typeof e.agent=="object"&&FEr(t,e.agent),NEr(t,e.globalCopilotInstructions||""),MEr(t,e.globalGitCommitInstructions||"")}s(BEr,"applyCopilotConfiguration");function NEr(t,e){try{t.get(x1).setGlobalCopilotInstructions(e)}catch(r){Su.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(NEr,"applyGlobalCopilotInstructionsConfiguration");function MEr(t,e){try{t.get(x1).setGlobalGitCommitInstructions(e)}catch(r){Su.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(MEr,"applyGlobalGitCommitInstructionsConfiguration");function Ake(t,e){let r=t.get(og);e.proxy===void 0&&(e=ije(r.env));try{r.setHttpSettings(IO(e))}catch(n){if(!(n instanceof TypeError))throw n;Su.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(Ake,"applyHttpConfiguration");async function LEr(t,e){try{let r=JSON.parse(e||"{}");await t.get(tg).updateMCPServers(r)}catch(r){Su.error(t,"Failed to apply MCP configuration",r)}}s(LEr,"applyMCPConfiguration");function FEr(t,e){try{let r=e;t.get(nE).updateConfiguration(r.tools?.terminal?.autoApprove)}catch(r){Su.error(t,"Failed to apply settings configuration",r)}}s(FEr,"applyTerminalAutoApproveConfiguration");function Zae(t,e){if(t.get(og).markReady(),!t.get(Cs).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Dd).initialize(r)}}s(Zae,"initializePostConfigurationDependencies");var xAt=x.Object({name:x.String(),version:x.String(),readableName:x.Optional(x.String())}),OEr=x.Object({editorInfo:xAt,editorPluginInfo:xAt,editorConfiguration:x.Optional(x.Object({}))});async function QEr(t,e,r){t.get(hn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),_oe(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),await ece(t,{settings:r.editorConfiguration}),Bt(t,"setEditorInfo");for(let n of["github",...Kq])r.editorConfiguration&&n in r.editorConfiguration&&Bt(t,`setEditorInfo.editorConfiguration.${n}`);return["OK",null]}s(QEr,"handleSetEditorInfoChecked");var EAt=Ze(OEr,QEr);d();var UEr=x.Object({options:x.Optional(x.Object({}))});async function qEr(t,e,r){let n=t.get(wf),i=n.pendingSignIn?.status;if(i===void 0)return[null,{code:tr.InvalidRequest,message:"No pending sign in"}];let o;try{return o=await i,[o,null]}catch(a){return[null,{code:tr.DeviceFlowFailed,message:String(a)}]}finally{n.pendingSignIn=void 0}}s(qEr,"handleSignInConfirmChecked");var bAt=Ze(UEr,qEr);d();var HEr=x.Object({options:x.Optional(x.Object({})),githubAppId:x.Optional(x.String())});async function $Er(t,e,r){try{let i=await t.get(Ki).checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let a=await t.get(wf).initiate(r);return[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:Roe,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof ba))throw n;return[null,{code:tr.DeviceFlowFailed,message:n.message}]}}s($Er,"handleSignInInitiateChecked");var yke=Ze(HEr,$Er);d();var WEr=x.Object({githubToken:x.String({minLength:1}),user:x.String({minLength:1}),githubAppId:x.Optional(x.String({minLength:1}))});async function jEr(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId,a=t.get(Ki);return[await t.get(wf).save({...a.getConfiguredUrls(),accessToken:n,login:i,githubAppId:o}),null]}s(jEr,"handleSignInWithGithubTokenChecked");var IAt=Ze(WEr,jEr);d();var GEr=x.Object({options:x.Optional(x.Object({}))});async function VEr(t,e,r){return[await t.get(wf).abandon(),null]}s(VEr,"handleSignOutChecked");var TAt=Ze(GEr,VEr);d();var zEr=x.Object({transaction:x.Optional(x.String()),stacktrace:x.Optional(x.String()),properties:x.Optional(x.Record(x.String(),x.String())),platform:x.Optional(x.String()),exception_detail:x.Optional(x.Array(x.Object({type:x.Optional(x.String()),value:x.Optional(x.String()),stacktrace:x.Optional(x.Array(x.Object({filename:x.Optional(x.String()),lineno:x.Optional(x.Union([x.String(),x.Integer()])),colno:x.Optional(x.Union([x.String(),x.Integer()])),function:x.Optional(x.String()),in_app:x.Optional(x.Boolean())})))})))}),Cke=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function KEr(t,e,r){let n=t.get(Io),i=t.get(hn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&L1.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:hfe(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},L1.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new Cke(r.stacktrace??"N/A",i.name);return c.stack=void 0,ja(t,c,void 0,o,a),["OK",null]}s(KEr,"handleTelemetryExceptionChecked");var wAt=Ze(zEr,KEr);d();d();d();function vke(t){let e=Date.now()+((t?.refresh_in??0)+GG)*1e3;return new s2({token:`test token ${Er()}`,refresh_in:0,expires_at:e,...t},void 0,e)}s(vke,"createTestCopilotToken");var bM=class extends ru{constructor(){super(...arguments);this.defaultToken=vke({token:"tid=test;rt=1"})}static{s(this,"FakeCopilotTokenFetcherFromSession")}fetchTokenResult(r,n){switch(n.accessToken){case"":return{copilotToken:this.defaultToken};case"valid-github-token":return{copilotToken:vke({token:"tid=valid-copilot-token"})};case void 0:return{failureKind:"NotSignedIn"};case"notauth-github-token":return{failureKind:"NotAuthorized"};case"bogus-github-token":return{failureKind:"NotAuthorized"};case"expired-github-token":return{failureKind:"HTTP401"};default:throw new Error("Don't have a valid GitHub token")}}};var tce=class extends ru{constructor(r){super();this.envelopeFn=r}static{s(this,"StaticCopilotTokenFetcher")}async fetchTokenResult(){return{copilotToken:vke(await this.envelopeFn())}}};var YEr=x.Object({options:x.Optional(x.Object({}))});async function JEr(t,e,r){let n=new bM;return t.get(Ki).setTransientSession({accessToken:"valid-github-token",login:"always auth"}),t.forceSet(ru,n),t.get(So).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(JEr,"handleTestingAlwaysAuthChecked");var SAt=Ze(YEr,JEr);d();var XEr=x.Object({messages:x.Array(x.Object({role:x.Enum(Na),content:x.String(),name:x.Optional(x.String())})),modelFamily:x.Optional(x.Enum(Wr)),stop:x.Optional(x.Array(x.String())),conversationOptions:x.Optional(x.Object({maxResponseTokens:x.Optional(x.Number()),temperature:x.Optional(x.Number())}))});async function ZEr(t,e,r){let n=new ua(t),i=await t.get(fa).getBestChatModelConfig([r.modelFamily??Wr.CopilotBase]),o=await QR(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:$d.user("test",Er())},e,o),null]}s(ZEr,"handleChatMLChecked");var _At=Ze(XEr,ZEr);d();d();d();var _M=Ne(Dyt(),1),oxo={ALPN_HTTP2:_M.default.ALPN_HTTP2,ALPN_HTTP2C:_M.default.ALPN_HTTP2C,ALPN_HTTP1_1:_M.default.ALPN_HTTP1_1,ALPN_HTTP1_0:_M.default.ALPN_HTTP1_0},{fetch:sxo,context:Byt,reset:axo,noCache:cxo,h1:lxo,keepAlive:uxo,h1NoCache:dxo,keepAliveNoCache:fxo,cacheStats:pxo,clearCache:mxo,offPush:hxo,onPush:gxo,createUrl:Axo,timeoutSignal:yxo,Body:Cxo,Headers:Nyt,Request:vxo,Response:xxo,AbortController:Exo,AbortError:yce,AbortSignal:bxo,FetchBaseError:Ixo,FetchError:Txo,ALPN_HTTP2:wxo,ALPN_HTTP2C:Sxo,ALPN_HTTP1_1:_xo,ALPN_HTTP1_0:Rxo}=_M.default;var Lyt=require("crypto"),Fyt=require("http"),Oyt=require("stream"),Qyt=require("util"),kM=Ne(TA());var xTr=9e4,ETr=new kM.ProtocolRequestType("copilot/fetch"),bTr=new kM.ProtocolRequestType("copilot/fetchCancel"),ITr=new kM.ProgressType,TTr=new kM.ProtocolRequestType("copilot/fetchDisconnectAll"),ev=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},RM=class extends Hr{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(Io).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Dr).connection.sendRequest(TTr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(Dr).connection,a=(0,Lyt.randomUUID)(),c=new mn.CancellationTokenSource,l=new Oyt.PassThrough,u=s(()=>{o.sendRequest(bTr,{workDoneToken:a})},"sendCancelRequest"),f=s(()=>{l.emit("error",new yce("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new ev("EditorFetcher received unexpected abort signal");if(i.aborted)throw new yce("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(ITr,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",f),m.error&&l.emit("error",new ev(m.error)),l.end()):m.kind==="report"&&l.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new ev("Request timed out from lsp server"))},n.timeout??xTr),A=s(()=>{h(new yce("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",A),o.sendRequest(ETr,STr(r,a,n),c.token).then(m).catch(y=>{let E="EditorFetcher request failed";y&&typeof y=="object"&&"message"in y&&(E+=`: ${String(y.message)}`),y&&typeof y=="object"&&"data"in y&&(E+=`: ${(0,Qyt.inspect)(y.data)}`),h(new ev(E))}).finally(()=>{i?.removeEventListener("abort",A),clearTimeout(g)})});if(!p.status)throw new ev("EditorFetcher received invalid response");return i?.addEventListener("abort",f),new OI(p.status,Fyt.STATUS_CODES[p.status]??"",new Nyt(p.headers),()=>wTr(l),()=>l)}};function wTr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(wTr,"consumeStream");function STr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(STr,"convertOptionsToParams");var _Tr=x.Object({url:x.String(),headers:x.Optional(x.Record(x.String(),x.String())),body:x.Optional(x.String()),timeout:x.Optional(x.Number()),method:x.Optional(x.Union([x.Literal("GET"),x.Literal("POST"),x.Literal("DELETE")])),cancelBeforeRequest:x.Optional(x.Boolean()),cancelAfterRequest:x.Optional(x.Boolean()),cancelAfterFirstChunk:x.Optional(x.Boolean())});async function RTr(t,e,r){let n=new RM(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...f}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...f});l&&i.abort();let m;try{m=await p}catch(A){return[{error:`Fetch stream error: ${A instanceof ev?A.message:String(A)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let y=m.body();for await(let E of y){let b=E.toString();return i.abort(),[{status:h,headers:g,body:b},null]}}let A=await m.text();return[{status:h,headers:g,body:A},null]}catch(A){return[{error:`Fetch stream error: ${A instanceof ev?A.message:String(A)}`},null]}}s(RTr,"handleTestingFetchChecked");var Uyt=Ze(_Tr,RTr);d();var kTr=x.Object({});async function PTr(t,e,r){return await t.get(Xc).flush(),["OK",null]}s(PTr,"handleTestingFlushPromiseQueueChecked");var qyt=Ze(kTr,PTr);d();var DTr=x.Object({filePath:x.String(),code:x.String(),offset:x.Number(),languageId:x.String(),timeout:x.Optional(x.Number()),waitForContext:x.Optional(x.Boolean())});async function BTr(t,e,r){try{await t.get(B1).start();let n=t.get(cP),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,LX,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(BTr,"handleTestingGetContextChecked");var Hyt=Ze(DTr,BTr);d();var NTr=x.Object({uri:x.String()});async function MTr(t,e,r){let i=await t.get(Cr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(MTr,"handleGetDocumentChecked");var $yt=Ze(NTr,MTr);d();var LTr=x.Object({options:x.Optional(x.Object({}))});async function FTr(t,e,r){t.get(Ki).setTransientSession({}),t.get($r).resetToken();try{await t.get($r).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(FTr,"handleTestingNeverAuthChecked");var Wyt=Ze(LTr,FTr);d();d();d();var Kke=class extends hl{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},jyt=s(t=>new Kke(t),"createTestCertificateReader");function Jke(t,e,r){let n=new Yke;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new OI(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(Jke,"createFakeResponse");function Gyt(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),Jke(t,n,Object.assign({"content-type":"application/json"},r))}s(Gyt,"createFakeJsonResponse");var nH=class extends Hr{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var Cce=class extends nH{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var Yke=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var Xke=class extends nH{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(Gyt(200,this.fullConfig)):Promise.resolve(Jke(404,""))}},vce=class extends Xke{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var OTr=x.Object({expFlags:x.Record(x.String(),x.Union([x.String(),x.Number(),x.Boolean()]))});function QTr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(Hr,new vce(n,t.get(Hr)))}return["OK",null]}s(QTr,"handleTestingOverrideExpFlagsChecked");var Vyt=Ze(OTr,QTr);d();var UTr=x.Object({rules:pve});function qTr(t,e,r){return t.get(ul).setTestingRules(r.rules),["OK",null]}s(qTr,"handleTestingSetContentExclusionRulesChecked");var zyt=Ze(UTr,qTr);d();var HTr=x.Object({workDoneToken:x.Union([x.String(),x.Number()]),chunks:x.Array(x.String()),followUp:x.Optional(x.String()),suggestedTitle:x.Optional(x.String()),skills:x.Optional(x.Array(x.String())),references:x.Optional(x.Array(fM)),options:x.Optional(x.Object({}))});function $Tr(t,e,r){return t.get(FE).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s($Tr,"handleTestingSetSyntheticTurnsChecked");var Kyt=Ze(HTr,$Tr);d();var WTr=x.Object({});async function jTr(t,e,r){let n=t.get(Ra),i=t.get(Jc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(jTr,"handleTriggerShowMessageChecked");var Yyt=Ze(WTr,jTr);d();d();d();d();var Jyt=Ne(require("tls"));var xce=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(hl)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=Jyt.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var PM=class extends Hr{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new xce(r),this.proxySocketFactory=r.get(y1),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(Pc).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(Pc).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(Io),o=this.proxySocketTimeoutForTesting;return Byt({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new c6(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new OI(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};d();d();var iH=require("fs"),Xyt=require("path");var DM=class extends Mi{static{s(this,"LocalFileSystem")}async readFileString(e){return(await iH.promises.readFile(nc(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(nc(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=nc(e),n=await iH.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,Xyt.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await iH.promises.lstat(e);if(r.isSymbolicLink())try{let n=await iH.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};d();var Ece=class extends Ay{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};d();var bce=class extends vl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};d();var Ice=class extends Gp{constructor(){super(...arguments);this.allowedFiles=[]}static{s(this,"TestingFileSearch")}addAllowedFiles(r){this.allowedFiles.push(...r)}findFiles(r,{uri:n},i){return Promise.resolve(this.allowedFiles)}};d();function GTr(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(GTr,"fakeChatModelConfiguration");function VTr(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(VTr,"fakeEmbeddingModelConfiguration");var Tce=class extends fa{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(GTr(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(VTr(e))}};d();var wce=class extends $u{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Rh}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},Sce=class extends Ra{constructor(){super();this.sentMessages=[];this.warningPromises=[];this.informationPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}showInformationMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.informationPromises.push(i),i}async waitForMessages(){await Promise.all(this.warningPromises),await Promise.all(this.informationPromises)}};d();function Zyt(t,e,r,n){return Ix.create($G(t),e,r,n,e)}s(Zyt,"createTextDocument");var Zke=class extends Cr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this.didFocusTextDocumentEmitter=new Ka;this.onDidFocusTextDocument=this.didFocusTextDocumentEmitter.event;this.didChangeTextDocumentEmitter=new Ka;this.onDidChangeTextDocument=this.didChangeTextDocumentEmitter.event;this.didOpenTextDocumentEmitter=new Ka;this.onDidOpenTextDocument=this.didOpenTextDocumentEmitter.event;this.didCloseTextDocumentEmitter=new Ka;this.onDidCloseTextDocument=this.didCloseTextDocumentEmitter.event}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Pi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=Zyt(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=Zyt(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}},_ce=class extends Zke{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var ePe=class extends Jc{static{s(this,"NullLog")}logIt(...e){}},tPe=class extends Ki{static{s(this,"TestAuthManager")}constructor(e,r){super(e,{}),this.transientSession=r&&Promise.resolve(r)}getPersistedSession(){return Promise.resolve(void 0)}};function zTr(t){let e=new o3;e.set(Pc,t),e.set(lR,t);let r=new tPe(e,{accessToken:"",login:"user"});return e.set(Ki,r),e.set(Io,new Io),e.set(Qm,new Qm({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(hl,jyt([])),e.set(y1,Yre(e)),e.set(hC,new hC),e.set(fA,new JG),e.set(uA,new uA),e.set(rC,new rC),e.set(Lu,new Lu(e,"tid=test",!0)),e.set(Hu,new Hu),e.set(Ra,new Sce),e.set($u,new wce),e.set(eC,new Q3),e.set(Jc,new ePe),e.set(u0,new u0),e.set(Ds,new Ds("test-session","test-machine")),e.set(df,new d8(e)),e.set(Dd,new Dd(e,"copilot-test")),e.set(Mt,new Mt(e)),e.set(kA,new kA),e.set(EA,new DB),e.set($r,new $r(e,!0)),e.set(ru,new bM),e.set(So,new YG),e.set(Xc,new Xc),e.set(HC,new HC(e)),e.set(Gp,new Ice),e.set(MA,new MA(e)),e.set(Fx,nee(e)),e.set(ed,new ed),e.set(k0,new k0),e.set(Ox,Ox.default),e.set(nm,new nm),e.set(dh,new dh(e,!1)),e.set(nu,new nu),e.set(En,new En(e)),e.set(Sf,new ZJ),e.set(dl,new dl),e.set(Qc,UX(e,(n,i,o)=>i.find(a=>a==="*")?1:i.find(a=>typeof a!="string"&&a.language===o.languageId)?10:0)),e.set(S0,new S0(e)),KTr(e),e.set(T0,new T0(e)),e.set(Cs,new Cs),e.set(VC,new N8),e.set(kh,new kh),e.set($0,new $0),e.set(S1,new S1(e)),e}s(zTr,"_createBaselineContext");function KTr(t){t.set(eo,new eo(t)),t.set(ha,new ha(t)),t.set(dd,new dd(t)),t.set(Ul,new Ul),t.set(wu,new wu),t.set(vl,new bce),t.set(fg,new fg(t,[])),t.set(fa,new Tce),t.set(Ay,new Ece),t.set(q1,new q1(t)),t.set(hS,new hS),t.set(Ac,new Ac(t)),t.set(ud,new ud),t.set(mm,new mm)}s(KTr,"registerConversation");function eCt(){let t=zTr(new lR(new BB,new Map));return t.set(Hr,new Cce),t.set(hn,new rPe),t.set(Cr,new _ce(t)),t.set(Mi,new DM),t.set(ul,new ul(t)),t.set(yl,new yl(t)),t.set(sd,new Cne(t)),t.set(wh,new wh(t)),t.set(WC,new A3),t.set(ty,new Gne),loe(t),t}s(eCt,"createLibTestingContext");var rPe=class extends hn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var rCt=Ne(require("fs"));var tCt=`${process.env.HOME}/.copilot-testing-gh-token`,Rce,kce;function nCt(t){let e=iCt(),r=new tce(YTr);return t.forceSet(ru,r),t.get(Ki).setTransientSession(e),r}s(nCt,"setIntegrationTokenManager");var YTr=s(async()=>{if(kce)return kce;let t=await iCt(),e=eCt(),r=new PM(e);return e.forceSet(Hr,r),kce=ame(e,t).then(n=>{if(n.copilotToken)return{token:n.copilotToken.token,refresh_in:n.copilotToken.envelope.refresh_in};throw new ba('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),kce},"getEnvelope");async function iCt(){let t=fme(process.env);if(t)return t;try{Rce??=(await rCt.promises.readFile(tCt)).toString().trim()}catch{Rce??=process.env.GITHUB_TOKEN??""}if(!Rce)throw new Error(`Tests: either GH_COPILOT_TOKEN, GITHUB_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${tCt}. Run "npm run get_token" to get one.`);return{...Ep({}),accessToken:Rce,login:"copilot-client tests"}}s(iCt,"getTestingGitHubSession");var JTr=x.Object({options:x.Optional(x.Object({})),githubAppId:x.Optional(x.String())});async function XTr(t,e,r){return nCt(t),await t.get($r).primeToken(),["OK",null]}s(XTr,"handleTestingUseTestingTokenChecked");var oCt=Ze(JTr,XTr);d();var ZTr=x.Object({});async function ewr(t,e,r){return await new F8().uninstall(t),["OK",null]}s(ewr,"handleUninstallChecked");var sCt=Ze(ZTr,ewr);d();var twr=BYe;function rwr(t,e,r){let n=t.get(Qc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(rwr,"unregisterContextProviders");var aCt=Ze(twr,rwr);d();var nPe=Ne(require("os"));var nwr=x.Object({expectedCertificate:x.String()});async function iwr(t,e,r){let i=(await Kre(t).getAllRootCAs()).map(EM),o=EM(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${hke(o)}. Only found those installed on the system:${nPe.EOL}${i.map(a=>"- "+hke(a)).join(nPe.EOL)}`},null]}s(iwr,"handleVerifyCertificateChecked");var cCt=Ze(nwr,iwr);d();var owr=x.Object({});async function swr(){return[{status:!!await new KQ().load()},null]}s(swr,"handleVerifyKerberosChecked");var lCt=Ze(owr,swr);d();var awr=x.Object({source:x.String(),version:x.Number(),uri:x.String()});async function cwr(t,e,r){let i=await t.get(Cr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(cwr,"handleVerifyStateChecked");var uCt=Ze(awr,cwr);d();var lwr=x.Object({});function uwr(t,e,r){return[t.get(Cr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(uwr,"handleVerifyWorkspaceStateChecked");var dCt=Ze(lwr,uwr);var DP=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function fCt(){let t=new Map;return t.set(tAt.method,rAt),t.set(nAt.method,iAt),t.set("getCompletions",Vgt),t.set("getCompletionsCycling",zgt),t.set("getPanelCompletions",Jgt),t.set(kgt.method,Pgt),t.set("getVersion",Xgt),t.set("setEditorInfo",EAt),t.set("checkStatus",wpt),t.set("checkQuota",Tpt),t.set("checkFileStatus",bpt),t.set("signInInitiate",yke),t.set("signIn",yke),t.set("signInConfirm",bAt),t.set("signInWithGithubToken",IAt),t.set("signOut",TAt),t.set("notifyShown",AAt),t.set("notifyAccepted",hAt),t.set("notifyRejected",gAt),t.set("telemetry/exception",wAt),t.set("textDocument/copilotInlineEdit",mAt),t.set("testing/overrideExpFlags",Vyt),t.set("testing/alwaysAuth",SAt),t.set("testing/neverAuth",Wyt),t.set("testing/useTestingToken",oCt),t.set("testing/setCompletionDocuments",$gt),t.set("testing/setPanelCompletionDocuments",_gt),t.set("testing/triggerShowMessageRequest",Yyt),t.set("testing/flushPromiseQueue",qyt),t.set("testing/getDocument",$yt),t.set("testing/chatml",_At),t.set("testing/setSyntheticTurns",Kyt),t.set("testing/fetch",Uyt),t.set("testing/setContentExclusionRules",zyt),t.set("testing/setCopilotEditsResponse",ggt),t.set("testing/getContext",Hyt),t.set("uninstall",sCt),t.set("debug/diagnostics",Lgt),t.set("debug/listCertificates",oAt),t.set("debug/verifyState",uCt),t.set("debug/verifyCertificate",cCt),t.set("debug/verifyKerberos",lCt),t.set("debug/verifyWorkspaceState",dCt),t.set("context/registerProviders",yAt),t.set("context/unregisterProviders",aCt),t.set("conversation/preconditions",agt),t.set("conversation/persistence",sgt),t.set("conversation/create",ngt),t.set("conversation/turn",dgt),t.set("conversation/turnDelete",fgt),t.set("conversation/destroy",igt),t.set("conversation/rating",cgt),t.set("conversation/copyCode",Pht),t.set("conversation/insertCode",Dht),t.set("conversation/templates",ugt),t.set("conversation/agents",kht),t.set("conversation/registerTools",lgt),t.set("conversation/unregisterTools",pgt),t.set("conversation/notifyCodeAcceptance",ogt),t.set("copilot/models",bgt),t.set("copilot/byok/saveModel",Ept),t.set("copilot/byok/deleteModel",L0t),t.set("copilot/byok/listModels",vpt),t.set("copilot/byok/saveApiKey",xpt),t.set("copilot/byok/deleteApiKey",M0t),t.set("copilot/byok/listApiKeys",F0t),t.set("copilot/setModelPolicy",Igt),t.set("copilot/codeReview",mgt),t.set("copilot/codeReview/reviewChanges",hgt),t.set("git/commitGenerate",Zgt),t.set("editConversation/create",Agt),t.set("editConversation/turn",Cgt),t.set("editConversation/turnDelete",vgt),t.set("editConversation/destroy",ygt),t.set("mcp/getTools",xgt),t.set("mcp/updateToolsStatus",Egt),t.set("mcp/registry/listServers",fAt),t.set("mcp/registry/getServer",pAt),new DP(t)}s(fCt,"getAllMethods");d();d();d();var pCt=Ne(TA());var mg=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new pCt.NotificationType(this.name)}};var iPe=class extends mg{constructor(){super(...arguments);this.name="copilot/didChangeToken";this.params=x.Unknown()}static{s(this,"DidChangeTokenNotificationHandler")}handle(){this.ctx.get($r).resetToken()}},mCt=[iPe];d();var dwr=new Ct("agentCopilotTokenManager");function sPe(t){try{let e=new URL(t||"https://api.github.com");if(e.protocol==="https:"&&e.hostname.startsWith("api."))return`${e.origin}/`}catch{}}s(sPe,"tokenEndpointToApiUrl");function fwr(t,e){if(!e.tokenEndpoint)return Ep(e);let r=sPe(e.tokenEndpoint);return r||dwr.warn(t,`Invalid token endpoint URL <${e.tokenEndpoint}>`),Ep({apiUrl:r})}s(fwr,"getUrlsFromParams");var oPe=class extends mg{constructor(){super(...arguments);this.name=jpe.method;this.params=c6e}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Ki),i=fwr(this.ctx,r);this.ctx.get(df).setConfiguredUrls(this.ctx,i);let o=r.handle||r.login;o&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:o,githubAppId:r.githubAppId,...i}):n.setTransientSession({githubAppId:r.githubAppId,...i})}},hCt=[oPe];d();var aPe=class extends mg{constructor(){super(...arguments);this.name=Ype.method;this.params=g6e}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get($s).get(n);o&&jXe(this.ctx,o)}},cPe=class extends mg{constructor(){super(...arguments);this.name=Zpe.method;this.params=x6e}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(dy).handleShown(n)}},lPe=class extends mg{constructor(){super(...arguments);this.name=Jpe.method;this.params=A6e}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get($s),a=o.get(n);a&&(i>=a.insertText.length?(o.delete(n),F3(this.ctx,a)):pee(this.ctx,a,i,void 0,void 0,"cumulative"))}},gCt=[aPe,cPe,lPe];d();var Pce=class extends mg{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=x.Object({token:x.Union([x.String(),x.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(Uf).cancel(r.token)}};var pwr=[...mCt,...hCt,...gCt,Pce];function ACt(t,e){for(let r of pwr){let n=new r(t),i=Xs.Compile(n.params);e.onNotification(n.type,eu(t,async o=>{IE(o),i.Check(o)?await n.handle(o):Su.error(t,`Notification ${n.name}:`,new cd(i.Errors(o)))},`Notification ${n.name}`))}}s(ACt,"registerNotifications");d();var Dce=Ne(ll());var yCt=new Ct("AgentTextDocumentConfiguration"),uPe=class{constructor(e){this.ctx=e;this.#e=new Ka;this.onDidChange=this.#e.event}static{s(this,"AgentTextDocumentsConfiguration")}#e;create(e,r,n,i){try{return Ix.create(e,r,n,i)}catch(o){throw yCt.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(Dce.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.#e.fire(o),Ix.withChanges(e,r,n)}catch(i){throw yCt.exception(this.ctx,i,".update"),i}}},RS=class extends Cr{constructor(){super(...arguments);this.#e=new Ka;this.onDidOpenTextDocument=this.#e.event;this.#t=new Ka;this.onDidCloseTextDocument=this.#t.event;this.#i=new Ka;this.onDidFocusTextDocument=this.#i.event;this._textDocumentConfiguration=new uPe(this.ctx);this.onDidChangeTextDocument=this._textDocumentConfiguration.onDidChange;this._documents=new Map;this._notebookDocuments=new Dce.NotebookDocuments(this._textDocumentConfiguration);this.workspaceFolders=[]}static{s(this,"AgentTextDocumentManager")}#e;#t;#i;get connection(){return this.ctx.get(Dr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Pl(i.uri),o),this.#e.fire({document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=Pl(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=Pl(n.textDocument.uri);this._documents.delete(i),this.#t.fire({document:{uri:i}})}),this.connection.onNotification(zpe.type,n=>{let i=("textDocument"in n?n.textDocument:n)??{};this.#i.fire("uri"in i?{document:i}:{})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Pl(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var CCt=Xs.Compile(p6e);function IE(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=IE(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=IE(e[r])}return t}}s(IE,"purgeNulls");var vCt=["github.copilot",...Kq],Dr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.deactivated=!1;this.handleDidChangeConfiguration=s(async e=>{try{if(this.#t?.workspace?.configuration&&e&&typeof e=="object"&&!("settings"in e)){let n=await this.connection.workspace.getConfiguration(vCt.map(o=>({section:o}))),i={github:{copilot:n.shift()}};for(let o of Kq)i[o]=n.shift();e.settings=i}return ece(this.ctx,IE(e))}catch(r){Su.exception(this.ctx,r,"didChangeConfiguration")}},"handleDidChangeConfiguration");this.#i=this.ctx.get(Jc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),ACt(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(Io).getDisplayVersion(),nodeVersion:process.versions.node};function i(a){try{e.get(RS).didChangeWorkspaceFolders(a),e.get(nm).emit(a)}catch(c){Su.exception(e,c,"didChangeWorkspaceFolders")}}s(i,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:a,uri:c})=>i({added:[{uri:c,name:a??c}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:a,uri:c})=>i({added:[],removed:[{uri:c,name:a??c}]})),r.onInitialize(a=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=a.capabilities;let c=a.capabilities.copilot,l=IE(a.initializationOptions);if(l){if(!CCt.Check(l))throw new cd(CCt.Errors(l));let m=l,h=e.get(hn);m.editorPluginInfo?h.setEditorAndPluginInfo({version:"unknown",...m.editorPluginInfo},m.editorInfo&&{version:"unknown",...m.editorInfo},m.relatedPluginInfo??[]):Su.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),m.copilotIntegrationId&&h.setCopilotIntegrationId(m.copilotIntegrationId),m.githubAppId&&(e.get(nu).githubAppId=m.githubAppId),m.copilotCapabilities&&(c=m.copilotCapabilities)}let u=a.capabilities.workspace?.workspaceFolders??!1;e.get(RS).init(a.workspaceFolders??[]),BJe(this.ctx),e.get(nm).emit({added:a.workspaceFolders??[],removed:[]}),c&&(e.get(Cs).setCapabilities(c),"openURL"in c&&_oe(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let p=s(async()=>{this.initialized||(this.initialized=!0,Su.info(e,`${n.name} ${n.version} initialized`),e.get($r).primeToken(),u&&r.workspace.onDidChangeWorkspaceFolders(i),a.capabilities.workspace?.didChangeConfiguration?.dynamicRegistration&&await r.client.register(Am.DidChangeConfigurationNotification.type,{section:vCt}),a.capabilities.workspace?.configuration?await this.handleDidChangeConfiguration({}):await Promise.race([this.ctx.get(og).requireReady().then(()=>!0),new Promise(g=>setTimeout(()=>g(!1),200))])||Zae(e),!this.deactivated&&new F8().startup(e).catch(()=>{}))},"onInitialized");return r.onInitialized(eu(e,p,"onInitialized")),e.get(O1).init(),c?.token&&e.get(Ki).setTransientSession({}),c?.redirectedTelemetry&&N0t(e),xCt.lt(process.versions.node,"20.8.0")&&Su.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:Am.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:u,changeNotifications:u}},executeCommandProvider:{commands:k0t(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(a=>void this.handleDidChangeConfiguration(a)),r.listen();let o=new Poe;this.ctx.forceSet(Jc,o)}async messageHandler(e,r,n){let i=this.ctx.get(DP).handlers.get(e);if(!i)return new Am.ResponseError(tr.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new Am.ResponseError(tr.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new Am.ResponseError(tr.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!D0t(this.ctx.get(hn)))throw new Am.ResponseError(tr.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),IE(r);try{let[o,a]=await i(this.ctx,n,r);return a?new Am.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new Am.ResponseError(tr.RequestCancelled,"Request was canceled");if(o instanceof ba)return new Am.ResponseError(tr.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof Am.ResponseError||Su.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(py).dispose()}catch(e){Su.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Jc,this.#i),await(this.#e??=this.deactivate())}markDeactivated(){this.deactivated=!0,this.ctx.get(og).markReady()}async deactivate(){let e=this.ctx;this.markDeactivated(),Oxe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(Xc).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Hu).deactivate()])}dispose(){this.markDeactivated(),this.connection.dispose()}},Su=new Ct("lsp");var Bce=class t extends KR{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Dr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),Fl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){Fl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(Cs).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return Fl.debug(this.context,"`copilot/related` not supported"),MJe;try{let a=await this.service.connection.sendRequest(eme.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){Fl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Bt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){Fl.exception(r,o,"copilotRelated")}}};d();d();d();var Nce=new Ct("OAuth Code Flow");function dPe(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(dPe,"arrayEquals");function ECt(t){return t===BP.providerId?{client_id:bp,client_secret:cje}:null}s(ECt,"getClientInfoFromAuthServer");var fPe=`
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GitHub Copilot Authentication</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                text-align: center;
                padding: 50px;
            }
            .container {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding-top: 50px;
            }
            .success {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #28a745;
            }
            .error {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #cccccc;
            }
            .message {
                font-size: 18px;
                margin: 20px 0;
            }
            .detail {
                font-size: 14px;
                color: #f85149;
                opacity: 0.7;
                margin: 0;
            }

            body.error .success-message {
                display: none;
            }

            body:not(.error) .error-message {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="success-message">
                <h1 class="success">\u2713</h1>
                <h1 class="success">Authentication Successful!</h1>
                <p class="message">You can now return to your IDE and continue using GitHub Copilot.</p>
            </div>
            <div class="error-message">
                <h1 class="error">An error occurred while signing in:</h1>
                <div class="detail"></div>
            </div>
        </div>
        <script>
            const urlParams = new URLSearchParams(window.location.search);

            const error = urlParams.get('error');
            if (error) {
                document.querySelector('.error-message > .detail').textContent = error;
                document.querySelector('body').classList.add('error');
            }
        </script>
    </body>
</html>`;var BP=class t{constructor(e){this.id=t.providerId;this.label="GitHub";this.supportsMultipleAccounts=!1;this.authorizationServers=[t.providerId];this.ctx=e,this._sessionsPromise=this.readSessions().then(r=>(setTimeout(()=>r.forEach(n=>void this.afterSessionLoad(n)),1e3),r))}static{s(this,"GitHubAuthenticationProvider")}static{this.providerId="https://github.com/login/oauth"}async getSessions(e,r){await this.checkSessionsExpiration();let n=await this._sessionsPromise,i=e?.sort()||[];return i.length?n.filter(a=>dPe([...a.scopes].sort(),i)):n}async afterSessionLoad(e){}async readSessions(){let e=await this.ctx.get(Ai).read("oauth",this.id);return e||[]}async createSession(e,r){let n=[...e].sort(),i=await this._sessionsPromise,o=await this.tokenToSession(r,e);this.afterSessionLoad(o);let a=i.findIndex(l=>l.account.id===o.account.id&&dPe([...l.scopes].sort(),n)),c=new Array;return a>-1?c.push(...i.splice(a,1,o)):i.push(o),await this.storeSessions(i),o}async storeSessions(e){this._sessionsPromise=Promise.resolve(e),await this.ctx.get(Ai).update("oauth",this.id,e)}async tokenToSession(e,r){let n=await this.getUserInfo(e);return{id:crypto.getRandomValues(new Uint32Array(2)).reduce((i,o)=>i+=o.toString(16),""),accessToken:e,account:{label:n.accountName,id:n.id},scopes:r}}async getUserInfo(e){let r="https://api.github.com/user",n;try{n=await this.ctx.get(Hr).fetch(new URL(r).href,{method:"GET",headers:{Authorization:`token ${e}`}})}catch(i){return Nce.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}if(n.ok)try{let i=await n.json();return{id:`${i.id}`,accountName:i.login}}catch(i){return Nce.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}else{let i=n.statusText;try{let o=await n.json();o.message&&(i=o.message)}catch{}return Nce.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}}async removeSession(e){let r=await this._sessionsPromise,n=r.findIndex(i=>i.id===e);if(n>-1)r.splice(n,1),await this.storeSessions(r);else throw new Error(`No session with id '${e}' found.`)}async checkSessionsExpiration(){let e=await this._sessionsPromise;if(e.length!==0)for(let r of e)await this.isSessionExpired(r)&&await this.removeSession(r.id)}async isSessionExpired(e){let{accessToken:r}=e,{id:n,accountName:i}=await this.getUserInfo(r);return!n||!i}};var Mce=class extends fy{constructor(r){super();this._authenticationProviders=new Map;this.ctx=r}static{s(this,"CLSAuthenticationService")}registerAuthenticationProvider(r,n){this._authenticationProviders.set(r,n)}getOrActivateProviderIdForServer(r){for(let n of this._authenticationProviders.values())if(n.authorizationServers?.some(i=>i===r))return Promise.resolve(n.id);return Promise.resolve(void 0)}createAuthenticationProvider(r){if(r===BP.providerId){let n=new BP(this.ctx);return this.registerAuthenticationProvider(n.id,n),n}}getProvider(r){if(this._authenticationProviders.has(r))return this._authenticationProviders.get(r);throw new Error(`No authentication provider '${r}' is currently registered.`)}async getSessions(r,n,i,o=!1){let a=this._authenticationProviders.get(r);if(a){if(i?.authorizationServer){let c=i.authorizationServer;if(!a.authorizationServers?.some(l=>l===c))throw new Error(`The authorization server '${c}' is not supported by the authentication provider '${r}'.`)}return await a.getSessions(n,{...i})}else throw new Error(`No authentication provider '${r}' is currently registered.`)}};d();var bCt=Ne(ll());var pPe=new Ct("agentCopilotTokenManager"),mwr={type:new bCt.ProtocolRequestType("copilot/token")},Lce=class extends ru{constructor(){super(...arguments);this.networkFetcher=new jG}static{s(this,"AgentCopilotTokenFetcher")}async fetchTokenResult(r,n,i){if(!r.get(Cs).getCapabilities().token)return this.networkFetcher.fetchTokenResult(r,n,i);let o=r.get(Dr).connection;try{let a=await o.sendRequest(mwr.type,{force:!1,session:n});if(!a?.envelope)return pPe.debug(r,"Envelope missing from copilot/token response"),{failureKind:"NotSignedIn",message:"Editor did not return a token"};let{envelope:c,tokenEndpoint:l}=a;if(pPe.debug(r,"Retrieved envelope from copilot/token"),c.expires_at*1e3<Date.now())throw new ba("Expired token in copilot/token response");l!==void 0&&sPe(l)!==n.apiUrl&&pPe.exception(r,new Error(`Token endpoint ${l} does not match API URL ${n.apiUrl}`),".fetchTokenResult");let u=new s2(c,void 0,c.expires_at);return a6(r,u),{copilotToken:u}}catch(a){throw a instanceof Error?new ba(a.message,a):a}}};d();var hwr=new Ct("Public Code References"),Fce=class extends Sf{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");hwr.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(Cs).getCapabilities().ipCodeCitation===!0&&await e.get(Dr).connection.sendNotification(Gpe.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};d();d();function ICt(t){gwr(t)}s(ICt,"activateExtensibilityPlatformFeature");function gwr(t){t.set(Ay,new vae(t)),t.set(q1,new q1(t))}s(gwr,"registerContextDependencies");d();var TCt=x.String(),mPe=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Qce,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},Qce="build-logs",Oce=class extends Iu{static{s(this,"BuildLogsSkill")}constructor(e){super(Qce,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new mPe(r))}};d();var hPe=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await Dae(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Ut(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Ut([o]),1]);return new Ut(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},gPe=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Awr="directory-references",Uce=class{constructor(){this.id=Awr;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new gPe}processor(e){return new hPe(e)}};d();var ywr=x.Object({uri:x.String(),visibleRange:x.Optional(Dc),openedAt:x.Optional(x.String()),activeAt:x.Optional(x.String())}),wCt=x.Object({files:x.Array(ywr)}),Cwr=3,APe=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=AS(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(En),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=oa(a);if(await this.turnContext.collectFile(Hce,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===Cwr))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(En).getRelativePath(n),a=new H1(n,void 0,i.visibleRange);return new Ut([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Jo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ut([n])}},Hce="recent-files",qce=class extends Iu{static{s(this,"RecentFilesSkill")}constructor(e){super(Hce,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new APe(r))}};d();var SCt=x.String(),yPe=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Wce,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},Wce="runtime-logs",$ce=class extends Iu{static{s(this,"RuntimeLogsSkill")}constructor(e){super(Wce,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new yPe(r))}};d();var jce=Ne(TA());var Gce=class extends vl{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return mj(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Dr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new jce.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new jce.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new jce.NotificationType("conversation/documentDiff"),r)}};d();var _Ct=Ne(ll());var oH=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(fg).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Dr).connection.sendNotification(new _Ct.NotificationType(this.notificationEndpoint),e)}};function RCt(t){vwr(t),xwr(t),ICt(t)}s(RCt,"activateConversationFeature");function vwr(t){t.set(eo,new eo(t)),t.set(wu,new wu),t.set(dd,new dd(t)),t.set(fa,new yne(t)),t.set(FE,new FE),t.set(ha,new ha(t)),t.set(fg,new fg(t)),t.set(oH,new oH(t)),t.set(xf,new qK(t,new UK(t))),t.set(OE,new OE),t.set(hS,new hS),t.set(vl,new Gce(t)),t.set(Ac,new Ac(t)),t.set(ud,new ud),t.set(mm,new mm)}s(vwr,"registerContextDependencies");function xwr(t){let e=new Ul;e.registerSkill(new Sse(new wse(t))),e.registerSkill(new Zse(new Qf(t,z1,Cht))),e.registerSkill(new Rse(new Qf(t,hy,dmt))),e.registerSkill(new dse(new Qf(t,Jd,Bpt))),e.registerSkill(new eae),e.registerSkill(new Uce),e.registerSkill(new qce(new Qf(t,Hce,wCt))),e.registerSkill(new fse(new Qf(t,$1,Mpt))),e.registerSkill(new Pse(new Qf(t,yS,xmt))),e.registerSkill(new $ce(new Qf(t,Wce,SCt))),e.registerSkill(new Oce(new Qf(t,Qce,TCt))),e.registerSkill(new Bse(new Qf(t,gy,Emt))),e.registerSkill(new Nse(new Qf(t,AP,Imt))),t.set(Ul,e)}s(xwr,"registerSkills");d();var kCt=Ne(mi());var Vce=class extends sd{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(Dr).connection.sendProgress(new kCt.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};d();var PCt=Ne(ll()),DCt=Ne(TA());var zce=class extends v1{constructor(){super(...arguments);this.requestType=new PCt.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=Xs.Compile(d0t)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(Dr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new DCt.ResponseError(l.code,l.message,l.data);throw en.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new cd(this.typeCheck.Errors(o));return o}};d();var BCt=Ne(ll()),NCt=Ne(TA());var Kce=class extends Bw{constructor(){super(...arguments);this.requestType=new BCt.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=Xs.Compile(u0t)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(Dr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new NCt.ResponseError(l.code,l.message,l.data);throw en.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new cd(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Li(i.value):new iP(i.value));return new go(n,r.status??"success")}};d();d();function MCt(t,e,r){try{let n=t.get(Mt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return un.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(MCt,"fillInJavaActiveExperiments");var CPe=Ne(TA());var Ewr={type:new CPe.NotificationType("featureFlagsNotification")},bwr={type:new CPe.NotificationType("copilot/didChangeFeatureFlags")},sH=class{constructor(e){this.ctx=e;Ps(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Mt).updateExPValuesAndAssignments(),o={};r.get(Mt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=Dve(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;bYe(r,a,c,i),MX(r,c,i),MCt(r,c,i);for(let[f,p]of c.entries())o[f]=p;let l=r.get(Cs),u=r.get(Dr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification(bwr.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let f={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.getTokenValue("agent_mode")==="0"&&(f.agent_mode=!1),e.getTokenValue("mcp")==="0"&&(f.mcp=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(f.xc=!0),await u.sendNotification(Ewr.type,f)}}};d();var Yce=class extends So{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(Dr).connection.sendNotification(tme.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(Dr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};d();var LCt=new DM;d();d();d();var zn=new Ct("CopilotMCP");async function vPe(t,e){await t.get(ty).notifyLog(e)}s(vPe,"notifyMCPRuntimeLog");async function qf(t,e){await vPe(t,{...e,level:"error"})}s(qf,"notifyMCPRuntimeError");async function NP(t,e){await vPe(t,{...e,level:"warning"})}s(NP,"notifyMCPRuntimeWarning");async function yc(t,e){await vPe(t,{...e,level:"info"})}s(yc,"notifyMCPRuntimeInfo");d();d();var No;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(No||(No={}));var EPe;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(EPe||(EPe={}));var Sr=No.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),WE=s(t=>{switch(typeof t){case"undefined":return Sr.undefined;case"string":return Sr.string;case"number":return isNaN(t)?Sr.nan:Sr.number;case"boolean":return Sr.boolean;case"function":return Sr.function;case"bigint":return Sr.bigint;case"symbol":return Sr.symbol;case"object":return Array.isArray(t)?Sr.array:t===null?Sr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Sr.promise:typeof Map<"u"&&t instanceof Map?Sr.map:typeof Set<"u"&&t instanceof Set?Sr.set:typeof Date<"u"&&t instanceof Date?Sr.date:Sr.object;default:return Sr.unknown}},"getParsedType"),Ot=No.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Iwr=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),ym=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,No.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ym.create=t=>new ym(t);var MM=s((t,e)=>{let r;switch(t.code){case Ot.invalid_type:t.received===Sr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Ot.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,No.jsonStringifyReplacer)}`;break;case Ot.unrecognized_keys:r=`Unrecognized key(s) in object: ${No.joinValues(t.keys,", ")}`;break;case Ot.invalid_union:r="Invalid input";break;case Ot.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${No.joinValues(t.options)}`;break;case Ot.invalid_enum_value:r=`Invalid enum value. Expected ${No.joinValues(t.options)}, received '${t.received}'`;break;case Ot.invalid_arguments:r="Invalid function arguments";break;case Ot.invalid_return_type:r="Invalid function return type";break;case Ot.invalid_date:r="Invalid date";break;case Ot.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:No.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Ot.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Ot.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Ot.custom:r="Invalid input";break;case Ot.invalid_intersection_types:r="Intersection results could not be merged";break;case Ot.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Ot.not_finite:r="Number must be finite";break;default:r=e.defaultError,No.assertNever(t)}return{message:r}},"errorMap"),UCt=MM;function Twr(t){UCt=t}s(Twr,"setErrorMap");function Jce(){return UCt}s(Jce,"getErrorMap");var Xce=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),wwr=[];function mr(t,e){let r=Jce(),n=Xce({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===MM?void 0:MM].filter(i=>!!i)});t.common.issues.push(n)}s(mr,"addIssueToContext");var tf=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Kn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Kn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},Kn=Object.freeze({status:"aborted"}),NM=s(t=>({status:"dirty",value:t}),"DIRTY"),Hf=s(t=>({status:"valid",value:t}),"OK"),bPe=s(t=>t.status==="aborted","isAborted"),IPe=s(t=>t.status==="dirty","isDirty"),MP=s(t=>t.status==="valid","isValid"),lH=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function Zce(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(Zce,"__classPrivateFieldGet");function qCt(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(qCt,"__classPrivateFieldSet");var Zr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Zr||(Zr={}));var aH,cH,gg=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},FCt=s((t,e)=>{if(MP(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ym(t.common.issues);return this._error=r,this._error}}},"handleResult");function yi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:f}=t;return a.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(l=f??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(yi,"processCreateParams");var Ci=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return WE(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:WE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tf,ctx:{common:e.parent.common,data:e.data,parsedType:WE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(lH(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:WE(e)},o=this._parseSync({data:e,path:i.path,parent:i});return FCt(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:WE(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return MP(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>MP(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:WE(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(lH(i)?i:Promise.resolve(i));return FCt(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Ot.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Cm({schema:this,typeName:$n.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return hg.create(this,this._def)}nullable(){return rv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return GE.create(this)}promise(){return DS.create(this,this._def)}or(e){return HP.create([this,e],this._def)}and(e){return $P.create(this,e,this._def)}transform(e){return new Cm({...yi(this._def),schema:this,typeName:$n.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new zP({...yi(this._def),innerType:this,defaultValue:r,typeName:$n.ZodDefault})}brand(){return new uH({typeName:$n.ZodBranded,type:this,...yi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new KP({...yi(this._def),innerType:this,catchValue:r,typeName:$n.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return dH.create(this,e)}readonly(){return YP.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Swr=/^c[^\s-]{8,}$/i,_wr=/^[0-9a-z]+$/,Rwr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kwr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Pwr=/^[a-z0-9_-]{21}$/i,Dwr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Bwr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Nwr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Mwr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",xPe,Lwr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fwr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Owr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Qwr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Uwr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,qwr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,HCt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Hwr=new RegExp(`^${HCt}$`);function $Ct(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s($Ct,"timeRegexSource");function $wr(t){return new RegExp(`^${$Ct(t)}$`)}s($wr,"timeRegex");function WCt(t){let e=`${HCt}T${$Ct(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(WCt,"datetimeRegex");function Wwr(t,e){return!!((e==="v4"||!e)&&Lwr.test(t)||(e==="v6"||!e)&&Owr.test(t))}s(Wwr,"isValidIP");function jwr(t,e){if(!Dwr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(jwr,"isValidJWT");function Gwr(t,e){return!!((e==="v4"||!e)&&Fwr.test(t)||(e==="v6"||!e)&&Qwr.test(t))}s(Gwr,"isValidCidr");var kS=class t extends Ci{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Sr.string){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_type,expected:Sr.string,received:o.parsedType}),Kn}let n=new tf,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?mr(i,{code:Ot.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&mr(i,{code:Ot.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Nwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"email",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")xPe||(xPe=new RegExp(Mwr,"u")),xPe.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"emoji",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")kwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"uuid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")Pwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"nanoid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Swr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"cuid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")_wr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"cuid2",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Rwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"ulid",code:Ot.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),mr(i,{validation:"url",code:Ot.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"regex",code:Ot.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?WCt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Hwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?$wr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?Bwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"duration",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Wwr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"ip",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?jwr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"jwt",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?Gwr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"cidr",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Uwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"base64",code:Ot.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?qwr.test(e.data)||(i=this._getOrReturnCtx(e,i),mr(i,{validation:"base64url",code:Ot.invalid_string,message:o.message}),n.dirty()):No.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Ot.invalid_string,...Zr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Zr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Zr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Zr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Zr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Zr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Zr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Zr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Zr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Zr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Zr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Zr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Zr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Zr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Zr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Zr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Zr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Zr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Zr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Zr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Zr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Zr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Zr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Zr.errToObj(r)})}nonempty(e){return this.min(1,Zr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};kS.create=t=>{var e;return new kS({checks:[],typeName:$n.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...yi(t)})};function Vwr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(Vwr,"floatSafeRemainder");var LP=class t extends Ci{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Sr.number){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_type,expected:Sr.number,received:o.parsedType}),Kn}let n,i=new tf;for(let o of this._def.checks)o.kind==="int"?No.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?Vwr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.not_finite,message:o.message}),i.dirty()):No.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Zr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Zr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Zr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Zr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Zr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Zr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Zr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Zr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Zr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Zr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Zr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Zr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Zr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Zr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&No.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};LP.create=t=>new LP({checks:[],typeName:$n.ZodNumber,coerce:t?.coerce||!1,...yi(t)});var FP=class t extends Ci{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Sr.bigint)return this._getInvalidInput(e);let n,i=new tf;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),mr(n,{code:Ot.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):No.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return mr(r,{code:Ot.invalid_type,expected:Sr.bigint,received:r.parsedType}),Kn}gte(e,r){return this.setLimit("min",e,!0,Zr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Zr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Zr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Zr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Zr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Zr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Zr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Zr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Zr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Zr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};FP.create=t=>{var e;return new FP({checks:[],typeName:$n.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...yi(t)})};var OP=class extends Ci{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Sr.boolean){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.boolean,received:n.parsedType}),Kn}return Hf(e.data)}};OP.create=t=>new OP({typeName:$n.ZodBoolean,coerce:t?.coerce||!1,...yi(t)});var QP=class t extends Ci{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Sr.date){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_type,expected:Sr.date,received:o.parsedType}),Kn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return mr(o,{code:Ot.invalid_date}),Kn}let n=new tf,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),mr(i,{code:Ot.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):No.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Zr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Zr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};QP.create=t=>new QP({checks:[],coerce:t?.coerce||!1,typeName:$n.ZodDate,...yi(t)});var LM=class extends Ci{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Sr.symbol){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.symbol,received:n.parsedType}),Kn}return Hf(e.data)}};LM.create=t=>new LM({typeName:$n.ZodSymbol,...yi(t)});var UP=class extends Ci{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Sr.undefined){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.undefined,received:n.parsedType}),Kn}return Hf(e.data)}};UP.create=t=>new UP({typeName:$n.ZodUndefined,...yi(t)});var qP=class extends Ci{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==Sr.null){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.null,received:n.parsedType}),Kn}return Hf(e.data)}};qP.create=t=>new qP({typeName:$n.ZodNull,...yi(t)});var PS=class extends Ci{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Hf(e.data)}};PS.create=t=>new PS({typeName:$n.ZodAny,...yi(t)});var jE=class extends Ci{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hf(e.data)}};jE.create=t=>new jE({typeName:$n.ZodUnknown,...yi(t)});var Ey=class extends Ci{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return mr(r,{code:Ot.invalid_type,expected:Sr.never,received:r.parsedType}),Kn}};Ey.create=t=>new Ey({typeName:$n.ZodNever,...yi(t)});var FM=class extends Ci{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Sr.undefined){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.void,received:n.parsedType}),Kn}return Hf(e.data)}};FM.create=t=>new FM({typeName:$n.ZodVoid,...yi(t)});var GE=class t extends Ci{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Sr.array)return mr(r,{code:Ot.invalid_type,expected:Sr.array,received:r.parsedType}),Kn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(mr(r,{code:a?Ot.too_big:Ot.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(mr(r,{code:Ot.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(mr(r,{code:Ot.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new gg(r,a,r.path,c)))).then(a=>tf.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new gg(r,a,r.path,c)));return tf.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Zr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Zr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Zr.toString(r)}})}nonempty(e){return this.min(1,e)}};GE.create=(t,e)=>new GE({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$n.ZodArray,...yi(e)});function BM(t){if(t instanceof Y0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=hg.create(BM(n))}return new Y0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof GE?new GE({...t._def,type:BM(t.element)}):t instanceof hg?hg.create(BM(t.unwrap())):t instanceof rv?rv.create(BM(t.unwrap())):t instanceof tv?tv.create(t.items.map(e=>BM(e))):t}s(BM,"deepPartialify");var Y0=class t extends Ci{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=No.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Sr.object){let u=this._getOrReturnCtx(e);return mr(u,{code:Ot.invalid_type,expected:Sr.object,received:u.parsedType}),Kn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ey&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let f=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new gg(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ey){let u=this._def.unknownKeys;if(u==="passthrough")for(let f of c)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(u==="strict")c.length>0&&(mr(i,{code:Ot.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let f of c){let p=i.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new gg(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let f of l){let p=await f.key,m=await f.value;u.push({key:p,value:m,alwaysSet:f.alwaysSet})}return u}).then(u=>tf.mergeObjectSync(n,u)):tf.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Zr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=Zr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:$n.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return No.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return No.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return BM(this)}partial(e){let r={};return No.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return No.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof hg;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return jCt(No.objectKeys(this.shape))}};Y0.create=(t,e)=>new Y0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:Ey.create(),typeName:$n.ZodObject,...yi(e)});Y0.strictCreate=(t,e)=>new Y0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:Ey.create(),typeName:$n.ZodObject,...yi(e)});Y0.lazycreate=(t,e)=>new Y0({shape:t,unknownKeys:"strip",catchall:Ey.create(),typeName:$n.ZodObject,...yi(e)});var HP=class extends Ci{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new ym(c.ctx.common.issues));return mr(r,{code:Ot.invalid_union,unionErrors:a}),Kn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new ym(l));return mr(r,{code:Ot.invalid_union,unionErrors:c}),Kn}}get options(){return this._def.options}};HP.create=(t,e)=>new HP({options:t,typeName:$n.ZodUnion,...yi(e)});var $E=s(t=>t instanceof WP?$E(t.schema):t instanceof Cm?$E(t.innerType()):t instanceof jP?[t.value]:t instanceof GP?t.options:t instanceof VP?No.objectValues(t.enum):t instanceof zP?$E(t._def.innerType):t instanceof UP?[void 0]:t instanceof qP?[null]:t instanceof hg?[void 0,...$E(t.unwrap())]:t instanceof rv?[null,...$E(t.unwrap())]:t instanceof uH||t instanceof YP?$E(t.unwrap()):t instanceof KP?$E(t._def.innerType):[],"getDiscriminator"),ele=class t extends Ci{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Sr.object)return mr(r,{code:Ot.invalid_type,expected:Sr.object,received:r.parsedType}),Kn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(mr(r,{code:Ot.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Kn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=$E(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:$n.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...yi(n)})}};function TPe(t,e){let r=WE(t),n=WE(e);if(t===e)return{valid:!0,data:t};if(r===Sr.object&&n===Sr.object){let i=No.objectKeys(e),o=No.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=TPe(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===Sr.array&&n===Sr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=TPe(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Sr.date&&n===Sr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(TPe,"mergeValues");var $P=class extends Ci{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(bPe(o)||bPe(a))return Kn;let c=TPe(o.value,a.value);return c.valid?((IPe(o)||IPe(a))&&r.dirty(),{status:r.value,value:c.data}):(mr(n,{code:Ot.invalid_intersection_types}),Kn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};$P.create=(t,e,r)=>new $P({left:t,right:e,typeName:$n.ZodIntersection,...yi(r)});var tv=class t extends Ci{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.array)return mr(n,{code:Ot.invalid_type,expected:Sr.array,received:n.parsedType}),Kn;if(n.data.length<this._def.items.length)return mr(n,{code:Ot.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Kn;!this._def.rest&&n.data.length>this._def.items.length&&(mr(n,{code:Ot.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new gg(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>tf.mergeArray(r,a)):tf.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};tv.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tv({items:t,typeName:$n.ZodTuple,rest:null,...yi(e)})};var tle=class t extends Ci{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.object)return mr(n,{code:Ot.invalid_type,expected:Sr.object,received:n.parsedType}),Kn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new gg(n,c,n.path,c)),value:a._parse(new gg(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?tf.mergeObjectAsync(r,i):tf.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ci?new t({keyType:e,valueType:r,typeName:$n.ZodRecord,...yi(n)}):new t({keyType:kS.create(),valueType:e,typeName:$n.ZodRecord,...yi(r)})}},OM=class extends Ci{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.map)return mr(n,{code:Ot.invalid_type,expected:Sr.map,received:n.parsedType}),Kn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new gg(n,c,n.path,[u,"key"])),value:o._parse(new gg(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,f=await l.value;if(u.status==="aborted"||f.status==="aborted")return Kn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return Kn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}}}};OM.create=(t,e,r)=>new OM({valueType:e,keyType:t,typeName:$n.ZodMap,...yi(r)});var QM=class t extends Ci{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Sr.set)return mr(n,{code:Ot.invalid_type,expected:Sr.set,received:n.parsedType}),Kn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(mr(n,{code:Ot.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(mr(n,{code:Ot.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let f of l){if(f.status==="aborted")return Kn;f.status==="dirty"&&r.dirty(),u.add(f.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new gg(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Zr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Zr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};QM.create=(t,e)=>new QM({valueType:t,minSize:null,maxSize:null,typeName:$n.ZodSet,...yi(e)});var rle=class t extends Ci{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Sr.function)return mr(r,{code:Ot.invalid_type,expected:Sr.function,received:r.parsedType}),Kn;function n(c,l){return Xce({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jce(),MM].filter(u=>!!u),issueData:{code:Ot.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return Xce({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jce(),MM].filter(u=>!!u),issueData:{code:Ot.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof DS){let c=this;return Hf(async function(...l){let u=new ym([]),f=await c._def.args.parseAsync(l,o).catch(h=>{throw u.addIssue(n(l,h)),u}),p=await Reflect.apply(a,this,f);return await c._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let c=this;return Hf(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new ym([n(l,u.error)]);let f=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(f,o);if(!p.success)throw new ym([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:tv.create(e).rest(jE.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||tv.create([]).rest(jE.create()),returns:r||jE.create(),typeName:$n.ZodFunction,...yi(n)})}},WP=class extends Ci{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};WP.create=(t,e)=>new WP({getter:t,typeName:$n.ZodLazy,...yi(e)});var jP=class extends Ci{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return mr(r,{received:r.data,code:Ot.invalid_literal,expected:this._def.value}),Kn}return{status:"valid",value:e.data}}get value(){return this._def.value}};jP.create=(t,e)=>new jP({value:t,typeName:$n.ZodLiteral,...yi(e)});function jCt(t,e){return new GP({values:t,typeName:$n.ZodEnum,...yi(e)})}s(jCt,"createZodEnum");var GP=class t extends Ci{static{s(this,"ZodEnum")}constructor(){super(...arguments),aH.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return mr(r,{expected:No.joinValues(n),received:r.parsedType,code:Ot.invalid_type}),Kn}if(Zce(this,aH,"f")||qCt(this,aH,new Set(this._def.values),"f"),!Zce(this,aH,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return mr(r,{received:r.data,code:Ot.invalid_enum_value,options:n}),Kn}return Hf(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};aH=new WeakMap;GP.create=jCt;var VP=class extends Ci{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),cH.set(this,void 0)}_parse(e){let r=No.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Sr.string&&n.parsedType!==Sr.number){let i=No.objectValues(r);return mr(n,{expected:No.joinValues(i),received:n.parsedType,code:Ot.invalid_type}),Kn}if(Zce(this,cH,"f")||qCt(this,cH,new Set(No.getValidEnumValues(this._def.values)),"f"),!Zce(this,cH,"f").has(e.data)){let i=No.objectValues(r);return mr(n,{received:n.data,code:Ot.invalid_enum_value,options:i}),Kn}return Hf(e.data)}get enum(){return this._def.values}};cH=new WeakMap;VP.create=(t,e)=>new VP({values:t,typeName:$n.ZodNativeEnum,...yi(e)});var DS=class extends Ci{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Sr.promise&&r.common.async===!1)return mr(r,{code:Ot.invalid_type,expected:Sr.promise,received:r.parsedType}),Kn;let n=r.parsedType===Sr.promise?r.data:Promise.resolve(r.data);return Hf(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};DS.create=(t,e)=>new DS({type:t,typeName:$n.ZodPromise,...yi(e)});var Cm=class extends Ci{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$n.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{mr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return Kn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?Kn:l.status==="dirty"||r.value==="dirty"?NM(l.value):l});{if(r.value==="aborted")return Kn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?Kn:c.status==="dirty"||r.value==="dirty"?NM(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?Kn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?Kn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!MP(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>MP(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);No.assertNever(i)}};Cm.create=(t,e,r)=>new Cm({schema:t,typeName:$n.ZodEffects,effect:e,...yi(r)});Cm.createWithPreprocess=(t,e,r)=>new Cm({schema:e,effect:{type:"preprocess",transform:t},typeName:$n.ZodEffects,...yi(r)});var hg=class extends Ci{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===Sr.undefined?Hf(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};hg.create=(t,e)=>new hg({innerType:t,typeName:$n.ZodOptional,...yi(e)});var rv=class extends Ci{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===Sr.null?Hf(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};rv.create=(t,e)=>new rv({innerType:t,typeName:$n.ZodNullable,...yi(e)});var zP=class extends Ci{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Sr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};zP.create=(t,e)=>new zP({innerType:t,typeName:$n.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...yi(e)});var KP=class extends Ci{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return lH(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ym(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ym(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};KP.create=(t,e)=>new KP({innerType:t,typeName:$n.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...yi(e)});var UM=class extends Ci{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Sr.nan){let n=this._getOrReturnCtx(e);return mr(n,{code:Ot.invalid_type,expected:Sr.nan,received:n.parsedType}),Kn}return{status:"valid",value:e.data}}};UM.create=t=>new UM({typeName:$n.ZodNaN,...yi(t)});var zwr=Symbol("zod_brand"),uH=class extends Ci{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},dH=class t extends Ci{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Kn:o.status==="dirty"?(r.dirty(),NM(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Kn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:$n.ZodPipeline})}},YP=class extends Ci{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(MP(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return lH(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};YP.create=(t,e)=>new YP({innerType:t,typeName:$n.ZodReadonly,...yi(e)});function OCt(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(OCt,"cleanParams");function GCt(t,e={},r){return t?PS.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,f;if(!l){let p=OCt(e,n),m=(f=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!c){let l=OCt(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):PS.create()}s(GCt,"custom");var Kwr={object:Y0.lazycreate},$n;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($n||($n={}));var Ywr=s((t,e={message:`Input not instance of ${t.name}`})=>GCt(r=>r instanceof t,e),"instanceOfType"),VCt=kS.create,zCt=LP.create,Jwr=UM.create,Xwr=FP.create,KCt=OP.create,Zwr=QP.create,eSr=LM.create,tSr=UP.create,rSr=qP.create,nSr=PS.create,iSr=jE.create,oSr=Ey.create,sSr=FM.create,aSr=GE.create,cSr=Y0.create,lSr=Y0.strictCreate,uSr=HP.create,dSr=ele.create,fSr=$P.create,pSr=tv.create,mSr=tle.create,hSr=OM.create,gSr=QM.create,ASr=rle.create,ySr=WP.create,CSr=jP.create,vSr=GP.create,xSr=VP.create,ESr=DS.create,QCt=Cm.create,bSr=hg.create,ISr=rv.create,TSr=Cm.createWithPreprocess,wSr=dH.create,SSr=s(()=>VCt().optional(),"ostring"),_Sr=s(()=>zCt().optional(),"onumber"),RSr=s(()=>KCt().optional(),"oboolean"),kSr={string:s(t=>kS.create({...t,coerce:!0}),"string"),number:s(t=>LP.create({...t,coerce:!0}),"number"),boolean:s(t=>OP.create({...t,coerce:!0}),"boolean"),bigint:s(t=>FP.create({...t,coerce:!0}),"bigint"),date:s(t=>QP.create({...t,coerce:!0}),"date")},PSr=Kn,_=Object.freeze({__proto__:null,defaultErrorMap:MM,setErrorMap:Twr,getErrorMap:Jce,makeIssue:Xce,EMPTY_PATH:wwr,addIssueToContext:mr,ParseStatus:tf,INVALID:Kn,DIRTY:NM,OK:Hf,isAborted:bPe,isDirty:IPe,isValid:MP,isAsync:lH,get util(){return No},get objectUtil(){return EPe},ZodParsedType:Sr,getParsedType:WE,ZodType:Ci,datetimeRegex:WCt,ZodString:kS,ZodNumber:LP,ZodBigInt:FP,ZodBoolean:OP,ZodDate:QP,ZodSymbol:LM,ZodUndefined:UP,ZodNull:qP,ZodAny:PS,ZodUnknown:jE,ZodNever:Ey,ZodVoid:FM,ZodArray:GE,ZodObject:Y0,ZodUnion:HP,ZodDiscriminatedUnion:ele,ZodIntersection:$P,ZodTuple:tv,ZodRecord:tle,ZodMap:OM,ZodSet:QM,ZodFunction:rle,ZodLazy:WP,ZodLiteral:jP,ZodEnum:GP,ZodNativeEnum:VP,ZodPromise:DS,ZodEffects:Cm,ZodTransformer:Cm,ZodOptional:hg,ZodNullable:rv,ZodDefault:zP,ZodCatch:KP,ZodNaN:UM,BRAND:zwr,ZodBranded:uH,ZodPipeline:dH,ZodReadonly:YP,custom:GCt,Schema:Ci,ZodSchema:Ci,late:Kwr,get ZodFirstPartyTypeKind(){return $n},coerce:kSr,any:nSr,array:aSr,bigint:Xwr,boolean:KCt,date:Zwr,discriminatedUnion:dSr,effect:QCt,enum:vSr,function:ASr,instanceof:Ywr,intersection:fSr,lazy:ySr,literal:CSr,map:hSr,nan:Jwr,nativeEnum:xSr,never:oSr,null:rSr,nullable:ISr,number:zCt,object:cSr,oboolean:RSr,onumber:_Sr,optional:bSr,ostring:SSr,pipeline:wSr,preprocess:TSr,promise:ESr,record:mSr,set:gSr,strictObject:lSr,string:VCt,symbol:eSr,transformer:QCt,tuple:pSr,undefined:tSr,union:uSr,unknown:iSr,void:sSr,NEVER:PSr,ZodIssueCode:Ot,quotelessJson:Iwr,ZodError:ym});var nle="2025-06-18";var ile="2.0",YCt=_.union([_.string(),_.number().int()]),JCt=_.string(),DSr=_.object({progressToken:_.optional(YCt)}).passthrough(),Ag=_.object({_meta:_.optional(DSr)}).passthrough(),J0=_.object({method:_.string(),params:_.optional(Ag)}),fH=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),nv=_.object({method:_.string(),params:_.optional(fH)}),yg=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),ole=_.union([_.string(),_.number().int()]),BSr=_.object({jsonrpc:_.literal(ile),id:ole}).merge(J0).strict();var NSr=_.object({jsonrpc:_.literal(ile)}).merge(nv).strict();var MSr=_.object({jsonrpc:_.literal(ile),id:ole,result:yg}).strict();var LSr=_.object({jsonrpc:_.literal(ile),id:ole,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict();var v4o=_.union([BSr,NSr,MSr,LSr]),XCt=yg.strict(),ZCt=nv.extend({method:_.literal("notifications/cancelled"),params:fH.extend({requestId:ole,reason:_.string().optional()})}),pH=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),e1t=pH.extend({version:_.string()}),FSr=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),OSr=J0.extend({method:_.literal("initialize"),params:Ag.extend({protocolVersion:_.string(),capabilities:FSr,clientInfo:e1t})});var QSr=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),USr=yg.extend({protocolVersion:_.string(),capabilities:QSr,serverInfo:e1t,instructions:_.optional(_.string())}),qSr=nv.extend({method:_.literal("notifications/initialized")});var t1t=J0.extend({method:_.literal("ping")}),HSr=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),r1t=nv.extend({method:_.literal("notifications/progress"),params:fH.merge(HSr).extend({progressToken:YCt})}),sle=J0.extend({params:Ag.extend({cursor:_.optional(JCt)}).optional()}),ale=yg.extend({nextCursor:_.optional(JCt)}),n1t=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),i1t=n1t.extend({text:_.string()}),o1t=n1t.extend({blob:_.string().base64()}),s1t=pH.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),$Sr=pH.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),WSr=sle.extend({method:_.literal("resources/list")}),jSr=ale.extend({resources:_.array(s1t)}),GSr=sle.extend({method:_.literal("resources/templates/list")}),VSr=ale.extend({resourceTemplates:_.array($Sr)}),zSr=J0.extend({method:_.literal("resources/read"),params:Ag.extend({uri:_.string()})}),KSr=yg.extend({contents:_.array(_.union([i1t,o1t]))}),YSr=nv.extend({method:_.literal("notifications/resources/list_changed")}),JSr=J0.extend({method:_.literal("resources/subscribe"),params:Ag.extend({uri:_.string()})}),XSr=J0.extend({method:_.literal("resources/unsubscribe"),params:Ag.extend({uri:_.string()})}),ZSr=nv.extend({method:_.literal("notifications/resources/updated"),params:fH.extend({uri:_.string()})}),e_r=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),t_r=pH.extend({description:_.optional(_.string()),arguments:_.optional(_.array(e_r)),_meta:_.optional(_.object({}).passthrough())}),r_r=sle.extend({method:_.literal("prompts/list")}),n_r=ale.extend({prompts:_.array(t_r)}),i_r=J0.extend({method:_.literal("prompts/get"),params:Ag.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),wPe=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),SPe=_.object({type:_.literal("image"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),_Pe=_.object({type:_.literal("audio"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),o_r=_.object({type:_.literal("resource"),resource:_.union([i1t,o1t]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),s_r=s1t.extend({type:_.literal("resource_link")}),a1t=_.union([wPe,SPe,_Pe,s_r,o_r]),a_r=_.object({role:_.enum(["user","assistant"]),content:a1t}).passthrough(),c_r=yg.extend({description:_.optional(_.string()),messages:_.array(a_r)}),l_r=nv.extend({method:_.literal("notifications/prompts/list_changed")}),u_r=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),d_r=pH.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(u_r),_meta:_.optional(_.object({}).passthrough())}),f_r=sle.extend({method:_.literal("tools/list")}),p_r=ale.extend({tools:_.array(d_r)}),c1t=yg.extend({content:_.array(a1t).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),x4o=c1t.or(yg.extend({toolResult:_.unknown()})),m_r=J0.extend({method:_.literal("tools/call"),params:Ag.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),h_r=nv.extend({method:_.literal("notifications/tools/list_changed")}),l1t=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),g_r=J0.extend({method:_.literal("logging/setLevel"),params:Ag.extend({level:l1t})}),A_r=nv.extend({method:_.literal("notifications/message"),params:fH.extend({level:l1t,logger:_.optional(_.string()),data:_.unknown()})}),y_r=_.object({name:_.string().optional()}).passthrough(),C_r=_.object({hints:_.optional(_.array(y_r)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),v_r=_.object({role:_.enum(["user","assistant"]),content:_.union([wPe,SPe,_Pe])}).passthrough(),x_r=J0.extend({method:_.literal("sampling/createMessage"),params:Ag.extend({messages:_.array(v_r),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(C_r)})}),E_r=yg.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[wPe,SPe,_Pe])}),b_r=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),I_r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),T_r=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),w_r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),S_r=_.union([b_r,I_r,T_r,w_r]),__r=J0.extend({method:_.literal("elicitation/create"),params:Ag.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),S_r),required:_.optional(_.array(_.string()))}).passthrough()})}),R_r=yg.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),k_r=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var P_r=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),D_r=J0.extend({method:_.literal("completion/complete"),params:Ag.extend({ref:_.union([P_r,k_r]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),B_r=yg.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),N_r=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),M_r=J0.extend({method:_.literal("roots/list")}),L_r=yg.extend({roots:_.array(N_r)}),F_r=nv.extend({method:_.literal("notifications/roots/list_changed")}),E4o=_.union([t1t,OSr,D_r,g_r,i_r,r_r,WSr,GSr,zSr,JSr,XSr,m_r,f_r]),b4o=_.union([ZCt,r1t,qSr,F_r]),I4o=_.union([XCt,E_r,R_r,L_r]),T4o=_.union([t1t,x_r,__r,M_r]),w4o=_.union([ZCt,r1t,A_r,ZSr,YSr,h_r,l_r]),S4o=_.union([XCt,USr,B_r,c_r,n_r,jSr,VSr,KSr,c1t,p_r]);d();async function JP(t,e,r,n,i){return await t.get(Hr).fetch(new URL(e).href,{method:r,headers:n,body:i})}s(JP,"fetchOauthServer");async function RPe(t){try{return await t.text()}catch{return t.statusText}}s(RPe,"getErrText");d();var u1t="/.well-known",kPe=`${u1t}/oauth-protected-resource`,d1t=`${u1t}/oauth-authorization-server`;function f1t(t){return typeof t!="object"||t===null?!1:t.resource!==void 0}s(f1t,"isAuthorizationProtectedResourceMetadata");function p1t(t){return typeof t!="object"||t===null?!1:t.issuer!==void 0}s(p1t,"isAuthorizationServerMetadata");function m1t(t){let e=t.split(" "),r=e[0],n={};return e.length>1&&e.slice(1).join(" ").split(",").forEach(o=>{let[a,c]=o.split("=").map(l=>l.trim().replace(/"/g,""));n[a]=c}),{scheme:r,params:n}}s(m1t,"parseWWWAuthenticateHeader");function h1t(t){let e=new URL(t.issuer);return{...t,authorization_endpoint:t.authorization_endpoint??new URL("/authorize",e).toString(),token_endpoint:t.token_endpoint??new URL("/token",e).toString(),registration_endpoint:t.registration_endpoint??new URL("/register",e).toString()}}s(h1t,"getMetadataWithDefaultValues");function g1t(t){return{issuer:t.toString(),authorization_endpoint:new URL("/authorize",t).toString(),token_endpoint:new URL("/token",t).toString(),registration_endpoint:new URL("/register",t).toString(),response_types_supported:["code","id_token","id_token token"]}}s(g1t,"getDefaultMetadataForUrl");function A1t(t){let e=new URL(t);if(!e.pathname.startsWith(kPe))throw new Error(`Invalid discovery URL: expected path to start with ${kPe}`);let r=e.pathname.substring(kPe.length),n=new URL(e.origin);return n.pathname=r||"/",n.toString()}s(A1t,"getResourceServerBaseUrlFromDiscoveryUrl");var PPe=class{static{s(this,"AuthMetadata")}},cle=class extends PPe{static{s(this,"MCPAuthMetadata")}constructor(e){super(),this.ctx=e}async getMetadataFromOriginalUrl(e,r){let n=await this.getResourceMetadataChallenge(e),i,o,a,c=await this.getResourceMetadata(n,{url:e,headers:r??{}});c.resource&&(i=c.authorization_servers?.[0],o=c.scopes_supported,a=c);let l=new URL(e).origin,u={};i||(i=l,u=r??{});let f;try{let m=await this.getAuthorizationServerMetadata(i,u),h=h1t(m);return f={authorizationServer:i,serverMetadata:h,resourceMetadata:a},zn.info(this.ctx,"authMetadata",f),f}catch(m){zn.warn(this.ctx,`Error populating auth metadata: ${String(m)}`)}let p=g1t(new URL(l));return p.scopes_supported=o??p.scopes_supported??[],f={authorizationServer:i,serverMetadata:p,resourceMetadata:a},f}async getResourceMetadataChallenge(e){let r=await JP(this.ctx,e,"POST"),n;if(r.status===401&&r.headers.has("WWW-Authenticate")){let i=r.headers.get("WWW-Authenticate"),{scheme:o,params:a}=m1t(i);o==="Bearer"&&a.resource_metadata&&(n=a.resource_metadata)}return n}async getResourceMetadata(e,r){if(!e)return{resource:""};let n=new URL(e),i=new URL(r.url),o={};n.origin===i.origin&&(o=r.headers);let a=await JP(this.ctx,e,"GET",{...o,Accept:"application/json","MCP-Protocol-Version":nle});if(a.status!==200)throw new Error(`Failed to fetch resource metadata: ${a.status} ${await RPe(a)}`);let c=await a.json();if(f1t(c)){let l=A1t(e);if(c.resource!==l)throw new Error(`Protected Resource Metadata resource "${c.resource}" does not match MCP server resolved resource "${l}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return c}else throw new Error(`Invalid resource metadata: ${JSON.stringify(c)}`)}async getAuthorizationServerMetadata(e,r){let n=new URL(e),i=n.pathname==="/"?"":n.pathname,o=new URL(d1t,e).toString()+i,a=await JP(this.ctx,o,"GET",{...r,Accept:"application/json","MCP-Protocol-Version":nle});if(a.status!==200&&(a=await JP(this.ctx,Vi(e,".well-known","openid-configuration"),"GET",{...r,Accept:"application/json","MCP-Protocol-Version":nle}),a.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${a.status} ${await RPe(a)}`);let c=await a.json();if(p1t(c))return c;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(c)}`)}};d();d();d();d();d();var BS=class{static{s(this,"MCPNotificationHandler")}constructor(e,r){this.ctx=e,this.serverName=r}};var mH=class extends BS{static{s(this,"LoggingMessageNotificationHandler")}constructor(e,r){super(e,r)}handle(e){let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":zn.info(this.ctx,`MCP server ${this.serverName} log:`,r),yc(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"warning":zn.warn(this.ctx,`MCP server ${this.serverName} log:`,r),NP(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"error":case"critical":case"alert":case"emergency":zn.error(this.ctx,`MCP server ${this.serverName} log:`,r),qf(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;default:zn.info(this.ctx,`MCP server ${this.serverName} log:`,r),yc(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break}}};d();var hH=class extends BS{static{s(this,"PromptListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){zn.info(this.ctx,"Prompts list changed, refreshing tools..."),yc(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(Uk)}};d();var gH=class extends BS{static{s(this,"ToolListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){zn.info(this.ctx,"Tool list changed, refreshing tools..."),yc(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(Uk)}};d();d();var qM="2025-06-18";var y1t=[qM,"2025-03-26","2024-11-05","2024-10-07"],lle="2.0",C1t=_.union([_.string(),_.number().int()]),v1t=_.string(),O_r=_.object({progressToken:_.optional(C1t)}).passthrough(),vg=_.object({_meta:_.optional(O_r)}).passthrough(),Z0=_.object({method:_.string(),params:_.optional(vg)}),AH=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),iv=_.object({method:_.string(),params:_.optional(AH)}),xg=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),ule=_.union([_.string(),_.number().int()]),x1t=_.object({jsonrpc:_.literal(lle),id:ule}).merge(Z0).strict(),dle=s(t=>x1t.safeParse(t).success,"isJSONRPCRequest"),E1t=_.object({jsonrpc:_.literal(lle)}).merge(iv).strict(),b1t=s(t=>E1t.safeParse(t).success,"isJSONRPCNotification"),I1t=_.object({jsonrpc:_.literal(lle),id:ule,result:xg}).strict(),yH=s(t=>I1t.safeParse(t).success,"isJSONRPCResponse"),Cg;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Cg||(Cg={}));var T1t=_.object({jsonrpc:_.literal(lle),id:ule,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict(),w1t=s(t=>T1t.safeParse(t).success,"isJSONRPCError"),NS=_.union([x1t,E1t,I1t,T1t]),XP=xg.strict(),fle=iv.extend({method:_.literal("notifications/cancelled"),params:AH.extend({requestId:ule,reason:_.string().optional()})}),CH=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),S1t=CH.extend({version:_.string()}),Q_r=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),U_r=Z0.extend({method:_.literal("initialize"),params:vg.extend({protocolVersion:_.string(),capabilities:Q_r,clientInfo:S1t})});var q_r=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),DPe=xg.extend({protocolVersion:_.string(),capabilities:q_r,serverInfo:S1t,instructions:_.optional(_.string())}),_1t=iv.extend({method:_.literal("notifications/initialized")}),R1t=s(t=>_1t.safeParse(t).success,"isInitializedNotification"),ple=Z0.extend({method:_.literal("ping")}),H_r=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),mle=iv.extend({method:_.literal("notifications/progress"),params:AH.merge(H_r).extend({progressToken:C1t})}),hle=Z0.extend({params:vg.extend({cursor:_.optional(v1t)}).optional()}),gle=xg.extend({nextCursor:_.optional(v1t)}),k1t=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),P1t=k1t.extend({text:_.string()}),BPe=_.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),D1t=k1t.extend({blob:BPe}),B1t=CH.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),$_r=CH.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),W_r=hle.extend({method:_.literal("resources/list")}),NPe=gle.extend({resources:_.array(B1t)}),j_r=hle.extend({method:_.literal("resources/templates/list")}),MPe=gle.extend({resourceTemplates:_.array($_r)}),G_r=Z0.extend({method:_.literal("resources/read"),params:vg.extend({uri:_.string()})}),LPe=xg.extend({contents:_.array(_.union([P1t,D1t]))}),V_r=iv.extend({method:_.literal("notifications/resources/list_changed")}),z_r=Z0.extend({method:_.literal("resources/subscribe"),params:vg.extend({uri:_.string()})}),K_r=Z0.extend({method:_.literal("resources/unsubscribe"),params:vg.extend({uri:_.string()})}),Y_r=iv.extend({method:_.literal("notifications/resources/updated"),params:AH.extend({uri:_.string()})}),J_r=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),X_r=CH.extend({description:_.optional(_.string()),arguments:_.optional(_.array(J_r)),_meta:_.optional(_.object({}).passthrough())}),Z_r=hle.extend({method:_.literal("prompts/list")}),FPe=gle.extend({prompts:_.array(X_r)}),e2r=Z0.extend({method:_.literal("prompts/get"),params:vg.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),OPe=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),QPe=_.object({type:_.literal("image"),data:BPe,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),UPe=_.object({type:_.literal("audio"),data:BPe,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),t2r=_.object({type:_.literal("resource"),resource:_.union([P1t,D1t]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),r2r=B1t.extend({type:_.literal("resource_link")}),N1t=_.union([OPe,QPe,UPe,r2r,t2r]),n2r=_.object({role:_.enum(["user","assistant"]),content:N1t}).passthrough(),qPe=xg.extend({description:_.optional(_.string()),messages:_.array(n2r)}),HPe=iv.extend({method:_.literal("notifications/prompts/list_changed")}),i2r=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),o2r=CH.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(i2r),_meta:_.optional(_.object({}).passthrough())}),s2r=hle.extend({method:_.literal("tools/list")}),$Pe=gle.extend({tools:_.array(o2r)}),HM=xg.extend({content:_.array(N1t).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),xDo=HM.or(xg.extend({toolResult:_.unknown()})),a2r=Z0.extend({method:_.literal("tools/call"),params:vg.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),WPe=iv.extend({method:_.literal("notifications/tools/list_changed")}),M1t=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),c2r=Z0.extend({method:_.literal("logging/setLevel"),params:vg.extend({level:M1t})}),jPe=iv.extend({method:_.literal("notifications/message"),params:AH.extend({level:M1t,logger:_.optional(_.string()),data:_.unknown()})}),l2r=_.object({name:_.string().optional()}).passthrough(),u2r=_.object({hints:_.optional(_.array(l2r)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),d2r=_.object({role:_.enum(["user","assistant"]),content:_.union([OPe,QPe,UPe])}).passthrough(),GPe=Z0.extend({method:_.literal("sampling/createMessage"),params:vg.extend({messages:_.array(d2r),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(u2r)})}),f2r=xg.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[OPe,QPe,UPe])}),p2r=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),m2r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),h2r=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),g2r=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),A2r=_.union([p2r,m2r,h2r,g2r]),y2r=Z0.extend({method:_.literal("elicitation/create"),params:vg.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),A2r),required:_.optional(_.array(_.string()))}).passthrough()})}),C2r=xg.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),v2r=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var x2r=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),E2r=Z0.extend({method:_.literal("completion/complete"),params:vg.extend({ref:_.union([x2r,v2r]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),VPe=xg.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),b2r=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),I2r=Z0.extend({method:_.literal("roots/list")}),T2r=xg.extend({roots:_.array(b2r)}),w2r=iv.extend({method:_.literal("notifications/roots/list_changed")}),EDo=_.union([ple,U_r,E2r,c2r,e2r,Z_r,W_r,j_r,G_r,z_r,K_r,a2r,s2r]),bDo=_.union([fle,mle,_1t,w2r]),IDo=_.union([XP,f2r,C2r,T2r]),TDo=_.union([ple,GPe,y2r,I2r]),wDo=_.union([fle,mle,jPe,Y_r,V_r,WPe,HPe]),SDo=_.union([XP,DPe,VPe,qPe,FPe,NPe,MPe,LPe,HM,$Pe]),X0=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var S2r=.7;async function L1t(t,e,r,n){try{let i=ZA();zn.info(t,`MCP server ${n} requested sampling:`,r.params),await yc(t,{message:`Sampling request received from ${n}: ${JSON.stringify({messageCount:r.params.messages.length,systemPrompt:r.params.systemPrompt?"provided":"none",maxTokens:r.params.maxTokens,temperature:r.params.temperature})}`,server:n});let o=await k2r(t,r),a=new Promise(A=>{setTimeout(()=>A(null),3e4)}),l=[t.get(Ra).showInformationMessage(`Sampling request from ${n}. Do you want to proceed?`,{title:"Confirm"}),a],u=await Promise.race(l);if(u?.title!=="Confirm"){let A=u===null?`Sampling request from ${n} timed out (no response within 30 seconds).`:`Sampling request from ${n} was cancelled by the user.`;throw await yc(t,{message:A,server:n}),new Error("Sampling request was not confirmed by the user.")}let f=_2r(t,r.params.messages,r.params.systemPrompt),p=(await QR(t,i,ZA())).extendedBy({messageSource:"mcp.sampling"}),h=new mn.CancellationTokenSource().token,g=await e.fetchResponse({modelConfiguration:o,messages:f,uiKind:"conversationPanel",llmInteraction:$d.user("conversation-panel",i),temperature:r.params.temperature??S2r,stop:r.params.stopSequences},h,p);return R2r(g,o.uiName)}catch(i){let o=`Failed to process sampling request: ${i instanceof Error?i.message:String(i)}`;throw zn.error(t,o,i),await qf(t,{message:o,server:n}),new X0(-32603,o)}}s(L1t,"handleSamplingRequest");function _2r(t,e,r){let n=[];r&&n.push({role:"system",content:r});for(let i of e){let o;if(i.content.type==="text")o=i.content.text;else if(i.content.type==="image")o=[{type:"image_url",image_url:{url:atob(i.content.data)}}];else throw zn.warn(t,`Unknown MCP content type: ${i.content.type}, defaulting to empty array`),new Error(`Unknown MCP content type: ${i.content.type}`);let a;switch(i.role){case"user":a="user";break;case"assistant":a="assistant";break;default:a="user",zn.warn(t,`Unknown MCP role: ${i.role}, defaulting to user`)}n.push({role:a,content:o})}return n}s(_2r,"convertMCPMessagesToChatML");function R2r(t,e){if(t.type!=="success"){let r=`Unexpected fetch result type: ${t.type}.`;throw"reason"in t&&(r+=` Reason: ${t.reason}`),new Error(r)}return{model:e,role:"assistant",content:{type:"text",text:t.value}}}s(R2r,"processFetchResult");async function k2r(t,e){let r=v0("user");if(!r)throw new Error("No available models found");let n=e.params.modelPreferences?.hints?.find(o=>o.name&&r.find(a=>a.toLowerCase().includes(o.name.toLowerCase())))?.name;return await t.get(fa).getBestChatModelConfig([n??r[0]])}s(k2r,"getModelConfiguration");d();var zPe=/[^a-z0-9_-]/gi;var P2r=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function F1t(){let t={};for(let e of P2r){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(F1t,"getDefaultEnvironment");async function O1t(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;zn.warn(t,n),await NP(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(zPe.lastIndex=0,zPe.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;zn.warn(t,n),await NP(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(zPe,"_")}else e._nameForModel=e.name;return e}s(O1t,"normalizeTool");var Ale=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};d();d();var D2r=6e4,yle=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(fle,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(mle,r=>{this._onprogress(r)}),this.setRequestHandler(ple,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new X0(Cg.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,i;this._transport=e;let o=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let a=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=l=>{a?.(l),this._onerror(l)};let c=(i=this._transport)===null||i===void 0?void 0:i.onmessage;this._transport.onmessage=(l,u)=>{c?.(l,u),yH(l)||w1t(l)?this._onresponse(l):dle(l)?this._onrequest(l,u):b1t(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new X0(Cg.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Cg.MethodNotFound,message:"Method not found"}}).catch(f=>this._onerror(new Error(`Failed to send an error response: ${f}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(f=>this.notification(f,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((f,p,m)=>this.request(f,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>c(e,u)).then(f=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:f,jsonrpc:"2.0",id:e.id})},f=>{var p,m;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(f.code)?f.code:Cg.InternalError,message:(m=f.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(f=>this._onerror(new Error(`Failed to send response: ${f}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),yH(e))n(e);else{let i=new X0(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,f,p,m,h,g;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=n?.signal)===null||f===void 0||f.throwIfAborted();let A=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:A};n?.onprogress&&(this._progressHandlers.set(A,n.onprogress),y.params={...e.params,_meta:{...((p=e.params)===null||p===void 0?void 0:p._meta)||{},progressToken:A}});let E=s(R=>{var B;this._responseHandlers.delete(A),this._progressHandlers.delete(A),this._cleanupTimeout(A),(B=this._transport)===null||B===void 0||B.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:A,reason:String(R)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(L=>this._onerror(new Error(`Failed to send cancellation: ${L}`))),l(R)},"cancel");this._responseHandlers.set(A,R=>{var B;if(!(!((B=n?.signal)===null||B===void 0)&&B.aborted)){if(R instanceof Error)return l(R);try{let L=r.parse(R.result);c(L)}catch(L){l(L)}}}),(m=n?.signal)===null||m===void 0||m.addEventListener("abort",()=>{var R;E((R=n?.signal)===null||R===void 0?void 0:R.reason)});let b=(h=n?.timeout)!==null&&h!==void 0?h:D2r,S=s(()=>E(new X0(Cg.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(A,b,n?.maxTotalTimeout,S,(g=n?.resetTimeoutOnProgress)!==null&&g!==void 0?g:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(R=>{this._cleanupTimeout(A),l(R)})})}async notification(e,r){var n,i;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((i=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&i!==void 0?i:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var l;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(l=this._transport)===null||l===void 0||l.send(u,r).catch(f=>this._onerror(f))});return}let c={...e,jsonrpc:"2.0"};await this._transport.send(c,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function Q1t(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(Q1t,"mergeCapabilities");var qxt=Ne(Uxt(),1);var Fle=class extends yle{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._ajv=new qxt.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Q1t(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:qM,capabilities:this._capabilities,clientInfo:this._clientInfo}},DPe,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!y1t.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},XP,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},VPe,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},XP,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},qPe,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},FPe,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},NPe,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},MPe,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},LPe,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},XP,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},XP,r)}async callTool(e,r=HM,n){let i=await this.request({method:"tools/call",params:e},r,n),o=this.getToolOutputValidator(e.name);if(o){if(!i.structuredContent&&!i.isError)throw new X0(Cg.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(i.structuredContent)try{if(!o(i.structuredContent))throw new X0(Cg.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(o.errors)}`)}catch(a){throw a instanceof X0?a:new X0(Cg.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return i}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema)try{let n=this._ajv.compile(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},$Pe,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var Hxt=Ne(require("events"));var QS=class{constructor(e,r,n){this.transport=null;this.emitter=new Hxt.default;this.ctx=e,this.mcp=new Fle({name:r,version:n},{capabilities:{roots:{listChanged:!0},sampling:{}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw zn.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw zn.error(this.ctx,"Connection failed:",r),await qf(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await O1t(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;yc(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r,n){let i=new go([],"error"),o=ZA(),a=new AbortController;n.onCancellationRequested(()=>{a.abort()});try{let c=await this.mcp.callTool({name:e,arguments:r,_meta:{progressToken:o}},HM,{onprogress:s(l=>{zn.info(this.ctx,`${e} calling progress`,l),yc(this.ctx,{message:`${e} calling progress:`+JSON.stringify(l),server:this.name})},"onprogress"),resetTimeoutOnProgress:!0,signal:a.signal});if(c&&typeof c=="object"){if(c.content)return this.formatToolResult(c);{let l=`Error calling tool ${e}: `+JSON.stringify(c);zn.error(this.ctx,l),await qf(this.ctx,{message:l,server:this.name,tool:e}),i.content.push(new Li(l))}}else{let l=`Error calling tool ${e}: `+JSON.stringify(c);zn.error(this.ctx,l),await qf(this.ctx,{message:l,server:this.name,tool:e}),i.content.push(new Li(l))}}catch(c){let l=`Error calling tool ${e}: `+(c instanceof Error?c.message:String(c));zn.error(this.ctx,l),await qf(this.ctx,{message:l,server:this.name,tool:e}),i.content.push(new Li(l))}return i}addListeners(){this.mcp.onclose=()=>{zn.info(this.ctx,`MCP server ${this.name} connection closed.`),yc(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{zn.error(this.ctx,`MCP server ${this.name} error:`,e),qf(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(jPe,e=>new mH(this.ctx,this.name).handle(e)),this.mcp.setNotificationHandler(WPe,e=>new gH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(HPe,e=>new hH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setRequestHandler(GPe,async e=>await L1t(this.ctx,new ua(this.ctx),e,this.name))}formatToolResult(e){let r=new go([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Li(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new nP({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};d();function dkr(t){return s(async(r,n)=>{let i=r instanceof URL?r.toString():r,o;if(n?.headers)if(n.headers instanceof Headers){o={};for(let[f,p]of n.headers.entries())o[f]=p}else if(Array.isArray(n.headers)){o={};for(let[f,p]of n.headers)o[f]=p}else o=n.headers;let a={method:n?.method||"GET",headers:o,body:n?.body,signal:n?.signal||void 0},c=await t.fetch(i,a),l=c.body(),u=null;if(l)u=new ReadableStream({start(f){let p=s(A=>{f.enqueue(new Uint8Array(A))},"onData"),m=s(()=>{f.close(),g()},"onEnd"),h=s(A=>{f.error(A),g()},"onError"),g=s(()=>{l.off("data",p),l.off("end",m),l.off("error",h)},"cleanup");l.on("data",p),l.on("end",m),l.on("error",h)},cancel(){l&&"destroy"in l&&typeof l.destroy=="function"&&l.destroy()}});else{let f=await c.text();u=new ReadableStream({start(p){p.enqueue(new TextEncoder().encode(f)),p.close()}})}return new globalThis.Response(u,{status:c.status,statusText:c.statusText,headers:new Headers(c.headers)})},"fetchLike")}s(dkr,"createFetchAdapter");function Ole(t,e){let r=t.get(Hr),n=dkr(r);return{...e,fetch:n}}s(Ole,"createConfigWithFetch");d();d();d();var Qle=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function C5e(t){}s(C5e,"noop");function Ule(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=C5e,onError:r=C5e,onRetry:n=C5e,onComment:i}=t,o="",a=!0,c,l="",u="";function f(A){let y=a?A.replace(/^\xEF\xBB\xBF/,""):A,[E,b]=fkr(`${o}${y}`);for(let S of E)p(S);o=b,a=!1}s(f,"feed");function p(A){if(A===""){h();return}if(A.startsWith(":")){i&&i(A.slice(A.startsWith(": ")?2:1));return}let y=A.indexOf(":");if(y!==-1){let E=A.slice(0,y),b=A[y+1]===" "?2:1,S=A.slice(y+b);m(E,S,A);return}m(A,"",A)}s(p,"parseLine");function m(A,y,E){switch(A){case"event":u=y;break;case"data":l=`${l}${y}
`;break;case"id":c=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?n(parseInt(y,10)):r(new Qle(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:E}));break;default:r(new Qle(`Unknown field "${A.length>20?`${A.slice(0,20)}\u2026`:A}"`,{type:"unknown-field",field:A,value:y,line:E}));break}}s(m,"processField");function h(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(h,"dispatchEvent");function g(A={}){o&&A.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:f,reset:g}}s(Ule,"createParser");function fkr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(fkr,"splitLines");var Hle=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n($xt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e($xt(this),r)}};function pkr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(pkr,"syntaxError");function v5e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(v5e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${v5e(t.cause)}`:t.message:`${t}`}s(v5e,"flattenError");function $xt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s($xt,"inspectableError");var jxt=s(t=>{throw TypeError(t)},"__typeError"),_5e=s((t,e,r)=>e.has(t)||jxt("Cannot "+r),"__accessCheck"),to=s((t,e,r)=>(_5e(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Hl=s((t,e,r)=>e.has(t)?jxt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),La=s((t,e,r,n)=>(_5e(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),VE=s((t,e,r)=>(_5e(t,e,"access private method"),r),"__privateMethod"),ep,t5,$M,qle,$le,bH,GM,IH,US,WM,VM,jM,xH,by,x5e,E5e,b5e,Wxt,I5e,T5e,EH,w5e,S5e,r5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),Hl(this,by),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,Hl(this,ep),Hl(this,t5),Hl(this,$M),Hl(this,qle),Hl(this,$le),Hl(this,bH),Hl(this,GM),Hl(this,IH,null),Hl(this,US),Hl(this,WM),Hl(this,VM,null),Hl(this,jM,null),Hl(this,xH,null),Hl(this,E5e,async o=>{var a;to(this,WM).reset();let{body:c,redirected:l,status:u,headers:f}=o;if(u===204){VE(this,by,EH).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?La(this,$M,new URL(o.url)):La(this,$M,void 0),u!==200){VE(this,by,EH).call(this,`Non-200 status code (${u})`,u);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){VE(this,by,EH).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(to(this,ep)===this.CLOSED)return;La(this,ep,this.OPEN);let p=new Event("open");if((a=to(this,xH))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){VE(this,by,EH).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=c.getReader(),g=!0;do{let{done:A,value:y}=await h.read();y&&to(this,WM).feed(m.decode(y,{stream:!A})),A&&(g=!1,to(this,WM).reset(),VE(this,by,w5e).call(this))}while(g)}),Hl(this,b5e,o=>{La(this,US,void 0),!(o.name==="AbortError"||o.type==="aborted")&&VE(this,by,w5e).call(this,v5e(o))}),Hl(this,I5e,o=>{typeof o.id=="string"&&La(this,IH,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:to(this,$M)?to(this,$M).origin:to(this,t5).origin,lastEventId:o.id||""});to(this,jM)&&(!o.event||o.event==="message")&&to(this,jM).call(this,a),this.dispatchEvent(a)}),Hl(this,T5e,o=>{La(this,bH,o)}),Hl(this,S5e,()=>{La(this,GM,void 0),to(this,ep)===this.CONNECTING&&VE(this,by,x5e).call(this)});try{if(e instanceof URL)La(this,t5,e);else if(typeof e=="string")La(this,t5,new URL(e,mkr()));else throw new Error("Invalid URL")}catch{throw pkr("An invalid or illegal string was specified")}La(this,WM,Ule({onEvent:to(this,I5e),onRetry:to(this,T5e)})),La(this,ep,this.CONNECTING),La(this,bH,3e3),La(this,$le,(n=r?.fetch)!=null?n:globalThis.fetch),La(this,qle,(i=r?.withCredentials)!=null?i:!1),VE(this,by,x5e).call(this)}get readyState(){return to(this,ep)}get url(){return to(this,t5).href}get withCredentials(){return to(this,qle)}get onerror(){return to(this,VM)}set onerror(e){La(this,VM,e)}get onmessage(){return to(this,jM)}set onmessage(e){La(this,jM,e)}get onopen(){return to(this,xH)}set onopen(e){La(this,xH,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){to(this,GM)&&clearTimeout(to(this,GM)),to(this,ep)!==this.CLOSED&&(to(this,US)&&to(this,US).abort(),La(this,ep,this.CLOSED),La(this,US,void 0))}};ep=new WeakMap,t5=new WeakMap,$M=new WeakMap,qle=new WeakMap,$le=new WeakMap,bH=new WeakMap,GM=new WeakMap,IH=new WeakMap,US=new WeakMap,WM=new WeakMap,VM=new WeakMap,jM=new WeakMap,xH=new WeakMap,by=new WeakSet,x5e=s(function(){La(this,ep,this.CONNECTING),La(this,US,new AbortController),to(this,$le)(to(this,t5),VE(this,by,Wxt).call(this)).then(to(this,E5e)).catch(to(this,b5e))},"connect_fn"),E5e=new WeakMap,b5e=new WeakMap,Wxt=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...to(this,IH)?{"Last-Event-ID":to(this,IH)}:void 0},cache:"no-store",signal:(t=to(this,US))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),I5e=new WeakMap,T5e=new WeakMap,EH=s(function(t,e){var r;to(this,ep)!==this.CLOSED&&La(this,ep,this.CLOSED);let n=new Hle("error",{code:e,message:t});(r=to(this,VM))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),w5e=s(function(t,e){var r;if(to(this,ep)===this.CLOSED)return;La(this,ep,this.CONNECTING);let n=new Hle("error",{code:e,message:t});(r=to(this,VM))==null||r.call(this,n),this.dispatchEvent(n),La(this,GM,setTimeout(to(this,S5e),to(this,bH)))},"scheduleReconnect_fn"),S5e=new WeakMap,r5.CONNECTING=0,r5.OPEN=1,r5.CLOSED=2;function mkr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(mkr,"getBaseURL");d();d();var R5e;R5e=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function hkr(t){return(await R5e).getRandomValues(new Uint8Array(t))}s(hkr,"getRandomValues");async function gkr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await hkr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(gkr,"random");async function Akr(t){return await gkr(t)}s(Akr,"generateVerifier");async function ykr(t){let e=await(await R5e).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(ykr,"generateChallenge");async function k5e(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await Akr(t),r=await ykr(e);return{code_verifier:e,code_challenge:r}}s(k5e,"pkceChallenge");d();var Gxt=_.object({resource:_.string().url(),authorization_servers:_.array(_.string().url()).optional(),jwks_uri:_.string().url().optional(),scopes_supported:_.array(_.string()).optional(),bearer_methods_supported:_.array(_.string()).optional(),resource_signing_alg_values_supported:_.array(_.string()).optional(),resource_name:_.string().optional(),resource_documentation:_.string().optional(),resource_policy_uri:_.string().url().optional(),resource_tos_uri:_.string().url().optional(),tls_client_certificate_bound_access_tokens:_.boolean().optional(),authorization_details_types_supported:_.array(_.string()).optional(),dpop_signing_alg_values_supported:_.array(_.string()).optional(),dpop_bound_access_tokens_required:_.boolean().optional()}).passthrough(),P5e=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),revocation_endpoint:_.string().optional(),revocation_endpoint_auth_methods_supported:_.array(_.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),introspection_endpoint:_.string().optional(),introspection_endpoint_auth_methods_supported:_.array(_.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),code_challenge_methods_supported:_.array(_.string()).optional()}).passthrough(),Ckr=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),userinfo_endpoint:_.string().optional(),jwks_uri:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),acr_values_supported:_.array(_.string()).optional(),subject_types_supported:_.array(_.string()),id_token_signing_alg_values_supported:_.array(_.string()),id_token_encryption_alg_values_supported:_.array(_.string()).optional(),id_token_encryption_enc_values_supported:_.array(_.string()).optional(),userinfo_signing_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_enc_values_supported:_.array(_.string()).optional(),request_object_signing_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_enc_values_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),display_values_supported:_.array(_.string()).optional(),claim_types_supported:_.array(_.string()).optional(),claims_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),claims_locales_supported:_.array(_.string()).optional(),ui_locales_supported:_.array(_.string()).optional(),claims_parameter_supported:_.boolean().optional(),request_parameter_supported:_.boolean().optional(),request_uri_parameter_supported:_.boolean().optional(),require_request_uri_registration:_.boolean().optional(),op_policy_uri:_.string().optional(),op_tos_uri:_.string().optional()}).passthrough(),Vxt=Ckr.merge(P5e.pick({code_challenge_methods_supported:!0})),D5e=_.object({access_token:_.string(),id_token:_.string().optional(),token_type:_.string(),expires_in:_.number().optional(),scope:_.string().optional(),refresh_token:_.string().optional()}).strip(),zxt=_.object({error:_.string(),error_description:_.string().optional(),error_uri:_.string().optional()}),vkr=_.object({redirect_uris:_.array(_.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:_.string().optional(),grant_types:_.array(_.string()).optional(),response_types:_.array(_.string()).optional(),client_name:_.string().optional(),client_uri:_.string().optional(),logo_uri:_.string().optional(),scope:_.string().optional(),contacts:_.array(_.string()).optional(),tos_uri:_.string().optional(),policy_uri:_.string().optional(),jwks_uri:_.string().optional(),jwks:_.any().optional(),software_id:_.string().optional(),software_version:_.string().optional(),software_statement:_.string().optional()}).strip(),xkr=_.object({client_id:_.string(),client_secret:_.string().optional(),client_id_issued_at:_.number().optional(),client_secret_expires_at:_.number().optional()}).strip(),Kxt=vkr.merge(xkr),p8o=_.object({error:_.string(),error_description:_.string().optional()}).strip(),m8o=_.object({token:_.string(),token_type_hint:_.string().optional()}).strip();d();function Yxt(t){let e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}s(Yxt,"resourceUrlFromServerUrl");function Jxt({requestedResource:t,configuredResource:e}){let r=typeof t=="string"?new URL(t):new URL(t.href),n=typeof e=="string"?new URL(e):new URL(e.href);if(r.origin!==n.origin||r.pathname.length<n.pathname.length)return!1;let i=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",o=n.pathname.endsWith("/")?n.pathname:n.pathname+"/";return i.startsWith(o)}s(Jxt,"checkResourceAllowed");d();var bl=class extends Error{static{s(this,"OAuthError")}constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},TH=class extends bl{static{s(this,"InvalidRequestError")}};TH.errorCode="invalid_request";var n5=class extends bl{static{s(this,"InvalidClientError")}};n5.errorCode="invalid_client";var i5=class extends bl{static{s(this,"InvalidGrantError")}};i5.errorCode="invalid_grant";var o5=class extends bl{static{s(this,"UnauthorizedClientError")}};o5.errorCode="unauthorized_client";var wH=class extends bl{static{s(this,"UnsupportedGrantTypeError")}};wH.errorCode="unsupported_grant_type";var SH=class extends bl{static{s(this,"InvalidScopeError")}};SH.errorCode="invalid_scope";var _H=class extends bl{static{s(this,"AccessDeniedError")}};_H.errorCode="access_denied";var zE=class extends bl{static{s(this,"ServerError")}};zE.errorCode="server_error";var RH=class extends bl{static{s(this,"TemporarilyUnavailableError")}};RH.errorCode="temporarily_unavailable";var kH=class extends bl{static{s(this,"UnsupportedResponseTypeError")}};kH.errorCode="unsupported_response_type";var PH=class extends bl{static{s(this,"UnsupportedTokenTypeError")}};PH.errorCode="unsupported_token_type";var DH=class extends bl{static{s(this,"InvalidTokenError")}};DH.errorCode="invalid_token";var BH=class extends bl{static{s(this,"MethodNotAllowedError")}};BH.errorCode="method_not_allowed";var NH=class extends bl{static{s(this,"TooManyRequestsError")}};NH.errorCode="too_many_requests";var MH=class extends bl{static{s(this,"InvalidClientMetadataError")}};MH.errorCode="invalid_client_metadata";var LH=class extends bl{static{s(this,"InsufficientScopeError")}};LH.errorCode="insufficient_scope";var Xxt={[TH.errorCode]:TH,[n5.errorCode]:n5,[i5.errorCode]:i5,[o5.errorCode]:o5,[wH.errorCode]:wH,[SH.errorCode]:SH,[_H.errorCode]:_H,[zE.errorCode]:zE,[RH.errorCode]:RH,[kH.errorCode]:kH,[PH.errorCode]:PH,[DH.errorCode]:DH,[BH.errorCode]:BH,[NH.errorCode]:NH,[MH.errorCode]:MH,[LH.errorCode]:LH};var tp=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};function eEt(t,e){let r=t.client_secret!==void 0;return e.length===0?r?"client_secret_post":"none":r&&e.includes("client_secret_basic")?"client_secret_basic":r&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":r?"client_secret_post":"none"}s(eEt,"selectClientAuthMethod");function tEt(t,e,r,n){let{client_id:i,client_secret:o}=e;switch(t){case"client_secret_basic":Ekr(i,o,r);return;case"client_secret_post":bkr(i,o,n);return;case"none":Ikr(i,n);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}s(tEt,"applyClientAuthentication");function Ekr(t,e,r){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let n=btoa(`${t}:${e}`);r.set("Authorization",`Basic ${n}`)}s(Ekr,"applyBasicAuth");function bkr(t,e,r){r.set("client_id",t),e&&r.set("client_secret",e)}s(bkr,"applyPostAuth");function Ikr(t,e){e.set("client_id",t)}s(Ikr,"applyPublicAuth");async function N5e(t){let e=t instanceof Response?t.status:void 0,r=t instanceof Response?await t.text():t;try{let n=zxt.parse(JSON.parse(r)),{error:i,error_description:o,error_uri:a}=n,c=Xxt[i]||zE;return new c(o||"",a)}catch(n){let i=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${n}. Raw body: ${r}`;return new zE(i)}}s(N5e,"parseErrorResponse");async function qS(t,e){var r,n;try{return await B5e(t,e)}catch(i){if(i instanceof n5||i instanceof o5)return await((r=t.invalidateCredentials)===null||r===void 0?void 0:r.call(t,"all")),await B5e(t,e);if(i instanceof i5)return await((n=t.invalidateCredentials)===null||n===void 0?void 0:n.call(t,"tokens")),await B5e(t,e);throw i}}s(qS,"auth");async function B5e(t,{serverUrl:e,authorizationCode:r,scope:n,resourceMetadataUrl:i,fetchFn:o}){let a,c;try{a=await wkr(e,{resourceMetadataUrl:i},o),a.authorization_servers&&a.authorization_servers.length>0&&(c=a.authorization_servers[0])}catch{}c||(c=e);let l=await Tkr(e,t,a),u=await Pkr(c,{fetchFn:o}),f=await Promise.resolve(t.clientInformation());if(!f){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let A=await Mkr(c,{metadata:u,clientMetadata:t.clientMetadata});await t.saveClientInformation(A),f=A}if(r!==void 0){let A=await t.codeVerifier(),y=await Bkr(c,{metadata:u,clientInformation:f,authorizationCode:r,codeVerifier:A,redirectUri:t.redirectUrl,resource:l,addClientAuthentication:t.addClientAuthentication,fetchFn:o});return await t.saveTokens(y),"AUTHORIZED"}let p=await t.tokens();if(p?.refresh_token)try{let A=await Nkr(c,{metadata:u,clientInformation:f,refreshToken:p.refresh_token,resource:l,addClientAuthentication:t.addClientAuthentication});return await t.saveTokens(A),"AUTHORIZED"}catch(A){if(!(!(A instanceof bl)||A instanceof zE))throw A}let m=t.state?await t.state():void 0,{authorizationUrl:h,codeVerifier:g}=await Dkr(c,{metadata:u,clientInformation:f,state:m,redirectUrl:t.redirectUrl,scope:n||t.clientMetadata.scope,resource:l});return await t.saveCodeVerifier(g),await t.redirectToAuthorization(h),"REDIRECT"}s(B5e,"authInternal");async function Tkr(t,e,r){let n=Yxt(t);if(e.validateResourceURL)return await e.validateResourceURL(n,r?.resource);if(r){if(!Jxt({requestedResource:n,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${n} (or origin)`);return new URL(r.resource)}}s(Tkr,"selectResourceURL");function FH(t){let e=t.headers.get("WWW-Authenticate");if(!e)return;let[r,n]=e.split(" ");if(r.toLowerCase()!=="bearer"||!n)return;let o=/resource_metadata="([^"]*)"/.exec(e);if(o)try{return new URL(o[1])}catch{return}}s(FH,"extractResourceMetadataUrl");async function wkr(t,e,r=fetch){let n=await Rkr(t,"oauth-protected-resource",r,{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!n||n.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!n.ok)throw new Error(`HTTP ${n.status} trying to load well-known OAuth protected resource metadata.`);return Gxt.parse(await n.json())}s(wkr,"discoverOAuthProtectedResourceMetadata");async function M5e(t,e,r=fetch){try{return await r(t,{headers:e})}catch(n){if(n instanceof TypeError)return e?M5e(t,void 0,r):void 0;throw n}}s(M5e,"fetchWithCorsRetry");function Skr(t,e="",r={}){return e.endsWith("/")&&(e=e.slice(0,-1)),r.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}s(Skr,"buildWellKnownPath");async function Zxt(t,e,r=fetch){return await M5e(t,{"MCP-Protocol-Version":e},r)}s(Zxt,"tryMetadataDiscovery");function _kr(t,e){return!t||t.status===404&&e!=="/"}s(_kr,"shouldAttemptFallback");async function Rkr(t,e,r,n){var i,o;let a=new URL(t),c=(i=n?.protocolVersion)!==null&&i!==void 0?i:qM,l;if(n?.metadataUrl)l=new URL(n.metadataUrl);else{let f=Skr(e,a.pathname);l=new URL(f,(o=n?.metadataServerUrl)!==null&&o!==void 0?o:a),l.search=a.search}let u=await Zxt(l,c,r);if(!n?.metadataUrl&&_kr(u,a.pathname)){let f=new URL(`/.well-known/${e}`,a);u=await Zxt(f,c,r)}return u}s(Rkr,"discoverMetadataWithFallback");function kkr(t){let e=typeof t=="string"?new URL(t):t,r=e.pathname!=="/",n=[];if(!r)return n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),n;let i=e.pathname;return i.endsWith("/")&&(i=i.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${i}`,e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${i}`,e.origin),type:"oidc"}),n.push({url:new URL(`${i}/.well-known/openid-configuration`,e.origin),type:"oidc"}),n}s(kkr,"buildDiscoveryUrls");async function Pkr(t,{fetchFn:e=fetch,protocolVersion:r=qM}={}){var n;let i={"MCP-Protocol-Version":r},o=kkr(t);for(let{url:a,type:c}of o){let l=await M5e(a,i,e);if(!l)throw new Error(`CORS error trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`);if(!l.ok){if(l.status>=400&&l.status<500)continue;throw new Error(`HTTP ${l.status} trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`)}if(c==="oauth")return P5e.parse(await l.json());{let u=Vxt.parse(await l.json());if(!(!((n=u.code_challenge_methods_supported)===null||n===void 0)&&n.includes("S256")))throw new Error(`Incompatible OIDC provider at ${a}: does not support S256 code challenge method required by MCP specification`);return u}}}s(Pkr,"discoverAuthorizationServerMetadata");async function Dkr(t,{metadata:e,clientInformation:r,redirectUrl:n,scope:i,state:o,resource:a}){let c="code",l="S256",u;if(e){if(u=new URL(e.authorization_endpoint),!e.response_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support response type ${c}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(l))throw new Error(`Incompatible auth server: does not support code challenge method ${l}`)}else u=new URL("/authorize",t);let f=await k5e(),p=f.code_verifier,m=f.code_challenge;return u.searchParams.set("response_type",c),u.searchParams.set("client_id",r.client_id),u.searchParams.set("code_challenge",m),u.searchParams.set("code_challenge_method",l),u.searchParams.set("redirect_uri",String(n)),o&&u.searchParams.set("state",o),i&&u.searchParams.set("scope",i),i?.includes("offline_access")&&u.searchParams.append("prompt","consent"),a&&u.searchParams.set("resource",a.href),{authorizationUrl:u,codeVerifier:p}}s(Dkr,"startAuthorization");async function Bkr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o,resource:a,addClientAuthentication:c,fetchFn:l}){var u;let f="authorization_code",p=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",t);if(e?.grant_types_supported&&!e.grant_types_supported.includes(f))throw new Error(`Incompatible auth server: does not support grant type ${f}`);let m=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),h=new URLSearchParams({grant_type:f,code:n,code_verifier:i,redirect_uri:String(o)});if(c)c(m,h,t,e);else{let A=(u=e?.token_endpoint_auth_methods_supported)!==null&&u!==void 0?u:[],y=eEt(r,A);tEt(y,r,m,h)}a&&h.set("resource",a.href);let g=await(l??fetch)(p,{method:"POST",headers:m,body:h});if(!g.ok)throw await N5e(g);return D5e.parse(await g.json())}s(Bkr,"exchangeAuthorization");async function Nkr(t,{metadata:e,clientInformation:r,refreshToken:n,resource:i,addClientAuthentication:o,fetchFn:a}){var c;let l="refresh_token",u;if(e){if(u=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(l))throw new Error(`Incompatible auth server: does not support grant type ${l}`)}else u=new URL("/token",t);let f=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),p=new URLSearchParams({grant_type:l,refresh_token:n});if(o)o(f,p,t,e);else{let h=(c=e?.token_endpoint_auth_methods_supported)!==null&&c!==void 0?c:[],g=eEt(r,h);tEt(g,r,f,p)}i&&p.set("resource",i.href);let m=await(a??fetch)(u,{method:"POST",headers:f,body:p});if(!m.ok)throw await N5e(m);return D5e.parse({refresh_token:n,...await m.json()})}s(Nkr,"refreshAuthorization");async function Mkr(t,{metadata:e,clientMetadata:r,fetchFn:n}){let i;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");i=new URL(e.registration_endpoint)}else i=new URL("/register",t);let o=await(n??fetch)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok)throw await N5e(o);return Kxt.parse(await o.json())}s(Mkr,"registerClient");var L5e=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},Wle=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._resourceMetadataUrl=void 0,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch}async _authThenStart(){var e;if(!this._authProvider)throw new tp("No auth provider");let r;try{r=await qS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new tp;return await this._startOrAuth()}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}_startOrAuth(){var e,r,n;let i=(n=(r=(e=this===null||this===void 0?void 0:this._eventSourceInit)===null||e===void 0?void 0:e.fetch)!==null&&r!==void 0?r:this._fetch)!==null&&n!==void 0?n:fetch;return new Promise((o,a)=>{this._eventSource=new r5(this._url.href,{...this._eventSourceInit,fetch:s(async(c,l)=>{let u=await this._commonHeaders();u.set("Accept","text/event-stream");let f=await i(c,{...l,headers:u});return f.status===401&&f.headers.has("www-authenticate")&&(this._resourceMetadataUrl=FH(f)),f},"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=c=>{var l;if(c.code===401&&this._authProvider){this._authThenStart().then(o,a);return}let u=new L5e(c.code,c.message,c);a(u),(l=this.onerror)===null||l===void 0||l.call(this,u)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",c=>{var l;let u=c;try{if(this._endpoint=new URL(u.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(f){a(f),(l=this.onerror)===null||l===void 0||l.call(this,f),this.close();return}o()}),this._eventSource.onmessage=c=>{var l,u;let f=c,p;try{p=NS.parse(JSON.parse(f.data))}catch(m){(l=this.onerror)===null||l===void 0||l.call(this,m);return}(u=this.onmessage)===null||u===void 0||u.call(this,p)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new tp("No auth provider");if(await qS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new tp("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders();o.set("content-type","application/json");let a={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._endpoint,a);if(!c.ok){if(c.status===401&&this._authProvider){if(this._resourceMetadataUrl=FH(c),await qS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new tp;return this.send(e)}let l=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${l}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}setProtocolVersion(e){this._protocolVersion=e}};var jle=class extends QS{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){let n=Ole(this.ctx,r);return new Wle(new URL(r.url),n)}};d();d();var jEt=Ne($Et(),1),OH=Ne(require("node:process"),1),GEt=require("node:stream");d();var Vle=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),cPr(r)}clear(){this._buffer=void 0}};function cPr(t){return NS.parse(JSON.parse(t))}s(cPr,"deserializeMessage");function WEt(t){return JSON.stringify(t)+`
`}s(WEt,"serializeMessage");var lPr=OH.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function uPr(){let t={};for(let e of lPr){let r=OH.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(uPr,"getDefaultEnvironment");var zle=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new Vle,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new GEt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c;this._process=(0,jEt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...uPr(),...this._serverParams.env},stdio:["pipe","pipe",(i=this._serverParams.stderr)!==null&&i!==void 0?i:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:OH.default.platform==="win32"&&dPr(),cwd:this._serverParams.cwd}),this._process.on("error",l=>{var u,f;if(l.name==="AbortError"){(u=this.onclose)===null||u===void 0||u.call(this);return}r(l),(f=this.onerror)===null||f===void 0||f.call(this,l)}),this._process.on("spawn",()=>{e()}),this._process.on("close",l=>{var u;this._process=void 0,(u=this.onclose)===null||u===void 0||u.call(this)}),(o=this._process.stdin)===null||o===void 0||o.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),(a=this._process.stdout)===null||a===void 0||a.on("data",l=>{this._readBuffer.append(l),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=WEt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function dPr(){return"type"in OH.default}s(dPr,"isElectron");var G5e=require("child_process"),V5e=require("util");var Kle=class extends QS{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...F1t(),...r.env||{}},r.stderr="pipe",new zle(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{NP(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}async cleanup(){if(this.transport){if(process.platform==="win32"){let r=null;"pid"in this.transport&&typeof this.transport.pid=="number"&&(r=this.transport.pid),r&&await this.isUvProcess(r)&&await this.forceKillWindowsProcess(r)}await this.mcp.close()}}async isUvProcess(r){try{let o=(await(0,V5e.promisify)(G5e.exec)(`tasklist /fi "PID eq ${r}" /fo csv /nh`,{timeout:5e3})).stdout.trim().split(`
`);if(o.length>0){let c=o[0].split(",");if(c.length>0){let l=c[0].replace(/"/g,"").toLowerCase();return l==="uv.exe"||l==="uv"}}return!1}catch(n){return zn.debug(this.ctx,`Failed to get process info for PID ${r}:`,n),!1}}async forceKillWindowsProcess(r){try{let n=(0,V5e.promisify)(G5e.exec);zn.info(this.ctx,`Force killing Windows process with PID ${r} for MCP server ${this.name}`),yc(this.ctx,{message:`Force killing Windows process with PID ${r}`,server:this.name}),await n(`taskkill /pid ${r} /t /f`,{timeout:1e4}),zn.info(this.ctx,`Successfully force killed process ${r}`)}catch(n){zn.debug(this.ctx,`Failed to kill process ${r} (process may not exist):`,n),qf(this.ctx,{message:`Failed to kill process ${r} (process may not exist): ${n instanceof Error?n.message:String(n)}`,server:this.name})}}};d();d();d();var Yle=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=Ule({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var fPr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},QH=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Jle=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:fPr}async _authThenStart(){var e;if(!this._authProvider)throw new tp("No auth provider");let r;try{r=await qS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new tp;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let i=await this._authProvider.tokens();i&&(r.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(r["mcp-session-id"]=this._sessionId),this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion);let n=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers({...r,...n})}async _startOrAuthSse(e){var r,n,i;let{resumptionToken:o}=e;try{let a=await this._commonHeaders();a.set("Accept","text/event-stream"),o&&a.set("last-event-id",o);let c=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,{method:"GET",headers:a,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!c.ok){if(c.status===401&&this._authProvider)return await this._authThenStart();if(c.status===405)return;throw new QH(c.status,`Failed to open SSE stream: ${c.statusText}`)}this._handleSseStream(c.body,e,!0)}catch(a){throw(i=this.onerror)===null||i===void 0||i.call(this,a),a}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r,n){if(!e)return;let{onresumptiontoken:i,replayMessageId:o}=r,a;s(async()=>{var l,u,f,p;try{let m=e.pipeThrough(new TextDecoderStream).pipeThrough(new Yle).getReader();for(;;){let{value:h,done:g}=await m.read();if(g)break;if(h.id&&(a=h.id,i?.(h.id)),!h.event||h.event==="message")try{let A=NS.parse(JSON.parse(h.data));o!==void 0&&yH(A)&&(A.id=o),(l=this.onmessage)===null||l===void 0||l.call(this,A)}catch(A){(u=this.onerror)===null||u===void 0||u.call(this,A)}}}catch(m){if((f=this.onerror)===null||f===void 0||f.call(this,new Error(`SSE stream disconnected: ${m}`)),n&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:a,onresumptiontoken:i,replayMessageId:o},0)}catch(h){(p=this.onerror)===null||p===void 0||p.call(this,new Error(`Failed to reconnect: ${h instanceof Error?h.message:String(h)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new tp("No auth provider");if(await qS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new tp("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o,a;try{let{resumptionToken:c,onresumptiontoken:l}=r||{};if(c){this._startOrAuthSse({resumptionToken:c,replayMessageId:dle(e)?e.id:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let u=await this._commonHeaders();u.set("content-type","application/json"),u.set("accept","application/json, text/event-stream");let f={...this._requestInit,method:"POST",headers:u,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},p=await((i=this._fetch)!==null&&i!==void 0?i:fetch)(this._url,f),m=p.headers.get("mcp-session-id");if(m&&(this._sessionId=m),!p.ok){if(p.status===401&&this._authProvider){if(this._resourceMetadataUrl=FH(p),await qS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new tp;return this.send(e)}let y=await p.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${p.status}): ${y}`)}if(p.status===202){R1t(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let g=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,A=p.headers.get("content-type");if(g)if(A?.includes("text/event-stream"))this._handleSseStream(p.body,{onresumptiontoken:l},!1);else if(A?.includes("application/json")){let y=await p.json(),E=Array.isArray(y)?y.map(b=>NS.parse(b)):[NS.parse(y)];for(let b of E)(o=this.onmessage)===null||o===void 0||o.call(this,b)}else throw new QH(-1,`Unexpected content type: ${A}`)}catch(c){throw(a=this.onerror)===null||a===void 0||a.call(this,c),c}}get sessionId(){return this._sessionId}async terminateSession(){var e,r,n;if(this._sessionId)try{let i=await this._commonHeaders(),o={...this._requestInit,method:"DELETE",headers:i,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},a=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,o);if(!a.ok&&a.status!==405)throw new QH(a.status,`Failed to terminate session: ${a.statusText}`);this._sessionId=void 0}catch(i){throw(n=this.onerror)===null||n===void 0||n.call(this,i),i}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};var Xle=class extends QS{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){let n=Ole(this.ctx,r);return new Jle(new URL(r.url),n)}};d();var Zle=class extends oS{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input,n)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Hc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(v1).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var nue=Ne(ll());d();d();NK();var YM=class extends $u{constructor(r,n=new z5e){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(Dr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},z5e=class extends $u{static{s(this,"SpawnUrlOpener")}async open(e){await ZF(e)}};d();var VEt=require("crypto"),zEt=Ne(require("http"));var eue=class{constructor(e){this.nonce=(0,VEt.randomBytes)(16).toString("base64");if(!e)throw new Error("startingRedirect must be defined");this._startingRedirect=new URL(e);let r;this._resultPromise=new Promise((i,o)=>r={resolve:i,reject:o});let n=`&app_name=${encodeURIComponent("GitHub Copilot")}`;this._server=zEt.createServer((i,o)=>{let a=new URL(i.url,`http://${i.headers.host}`);switch(a.pathname){case"/signin":{(a.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end()),this._startingRedirect.searchParams.set("redirect_uri",`http://127.0.0.1:${this.port}/callback`),o.writeHead(302,{location:this._startingRedirect.toString()}),o.end();break}case"/callback":{let c=a.searchParams.get("code")??void 0,l=a.searchParams.get("state")??void 0,u=new URL(l||"").searchParams.get("nonce")??void 0;if(!c||!l||!u){o.writeHead(400),o.end();return}if(this.state!==l)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}${n}`}),o.end(),new Error("State does not match.");if(this.nonce!==u)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end(),new Error("Nonce does not match.");r.resolve({code:c,state:l}),o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(fPe);break}default:o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(fPe)}})}static{s(this,"LoopbackAuthServer")}set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}start(){return new Promise((e,r)=>{if(this._server.listening)throw new Error("Server is already started");let n=setTimeout(()=>{r(new Error("Timeout waiting for port"))},5e3);this._server.on("listening",()=>{let i=this._server.address();if(typeof i=="string")this.port=parseInt(i);else if(i instanceof Object)this.port=i.port;else throw new Error("Unable to determine port");clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)}),this._server.on("error",i=>{r(new Error(`Error listening to server: ${i}`))}),this._server.on("close",()=>{r(new Error("Closed"))}),this._server.listen(0,"127.0.0.1")})}stop(){return new Promise((e,r)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close(n=>{n?r(n):e()})})}waitForOAuthResponse(){return this._resultPromise}};var pPr="Timed out",K5e=class{static{s(this,"CodeFlow")}},tue=class extends K5e{static{s(this,"CLSCodeFlow")}constructor(e){super(),this.ctx=e}async auth(e,r,n){let i=ECt(e);if(!i)return"";let{client_id:o,client_secret:a}=i,c=new URLSearchParams([["client_id",o],["scope",(n?.scopes_supported??[]).join(" ")],["prompt","select_account"]]),l=r.authorization_endpoint+"?"+c.toString(),u=new eue(l),f=await u.start(),p=`http://127.0.0.1:${f}/signin?nonce=${encodeURIComponent(u.nonce)}`;un.info(this.ctx,"auth url: ",p),await new YM(this.ctx).open(p);let m;try{m=(await Promise.race([u.waitForOAuthResponse(),new Promise((A,y)=>setTimeout(()=>y(new Error(pPr)),3e5))])).code}finally{setTimeout(()=>{u.stop()},5e3)}return await this.exchangeCodeForToken({endpointUri:r.token_endpoint,redirectUri:`http://127.0.0.1:${f}/callback`,code:m,client_id:o,client_secret:a})}async exchangeCodeForToken({endpointUri:e,redirectUri:r,code:n,client_id:i,client_secret:o}){let a=new URLSearchParams([["code",n],["client_id",i],["redirect_uri",r],["client_secret",o]]),c=await JP(this.ctx,e,"POST",{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},a.toString());if(c.ok)return(await c.json()).access_token;{let l=await c.text(),u=new Error(l);throw u.name="GitHubTokenExchangeError",u}}};var rue=class t extends tg{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new Ale;this.isMcpEnabled=!1;this.storedMCPServersConfig={};this.ctx=r,Ps(this.ctx,async n=>{this.isMcpEnabled=this.isTokenMcpEnabled(n),this.isMcpEnabled?await this.updateMCPServers(this.storedMCPServersConfig):(zn.info(this.ctx,"MCP is disabled, clearing all servers and tools"),this.clearAllServers())})}static{s(this,"CLSMCPManager")}static{this.toolsNotificationType=new nue.ProtocolNotificationType("copilot/mcpTools")}static{this.oauthRequestType=new nue.ProtocolRequestType("copilot/mcpOAuth")}isTokenMcpEnabled(r){if(!r)return!0;try{return r.getTokenValue("mcp")!=="0"}catch(n){return zn.warn(this.ctx,`Error reading MCP value from token: ${n instanceof Error?n.message:String(n)}`),!0}}async updateMCPServers(r){if(this.storedMCPServersConfig=r,!!this.isMcpEnabled){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}}getAllTools(){return this.isMcpEnabled?this.cachedMCPServerTools:[]}updateMCPToolStatus(r,n,i){if(!this.isMcpEnabled){zn.warn(this.ctx,`MCP is disabled, cannot update tool status for ${r}.${n}`);return}let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){zn.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(xu).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i,o){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot call tool ${r}.${n}`);let a=this.MCPServersMap.get(r);if(a){let{status:c,server:l}=a;if(c==="running"&&l)return await l.callTool(n,i,o)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));zn.error(this.ctx,a),await qf(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await yc(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new jle(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new Xle(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Kle(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(Uk,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await yc(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(zn.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;zn.info(this.ctx,c),yc(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}else if(a&&"url"in r&&r.type!=="sse"&&a[1]==="401"){let c=await this.getAuthMetadata(r),l=await this.getToken(r.url,c.authorizationServer,c.serverMetadata,c.resourceMetadata);if(!l){zn.error(this.ctx,`Failed to get token for server: ${r.name}`);return}let u={...r,requestInit:{...r.requestInit??{},headers:{...r.requestInit?.headers??{},Authorization:`Bearer ${l}`}}};return await this.addServer(u)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await qf(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(Ra).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(Dr).connection.sendNotification(t.toolsNotificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:f}=i;zn.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(xu).registerTool(new Zle({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:f},(p,m)=>(zn.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p,m))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(xu).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await yc(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(Uk),await i.cleanup())}this.MCPServersMap.clear()}async getAuthMetadata(r){return await new cle(this.ctx).getMetadataFromOriginalUrl(r.url,r.requestInit?.headers)}async getToken(r,n,i,o){let a=await this.ctx.get(fy).getOrActivateProviderIdForServer(n);if(!a){let f=this.ctx.get(fy).createAuthenticationProvider(n);if(!f){zn.error(this.ctx,`No authentication provider found for server: ${n}`),await yc(this.ctx,{message:`No authentication provider found for authserver: ${n}`,server:r});return}a=f.id}let c=o?.scopes_supported||i.scopes_supported||[],l=await this.ctx.get(fy).getSessions(a,c,{authorizationServer:n},!0);if(l.length)return l[0].accessToken;let u=this.ctx.get(fy).getProvider(a);try{let{confirm:f}=await this.ctx.get(Dr).connection.sendRequest(t.oauthRequestType,{mcpServer:r,authLabel:u.label});if(!f){zn.warn(this.ctx,"no confirmation for OAuth request");return}}catch(f){zn.warn(this.ctx,"no confirmation for OAuth request",f);return}try{let f=await new tue(this.ctx).auth(n,i,o),p=await u.createSession(c,f);return this.ctx.get(Ra).showInformationMessageOnlyOnce("Authentication successful",`You have already authenticated with ${u.label}.`,{title:"OK"}),p.accessToken}catch(f){this.ctx.get(Ra).showWarningMessageOnlyOnce("Authentication failed",`You need to restart the IDE to authenticate the MCP server again. ${f instanceof Error?f.message:String(f)}`);return}}};d();var KEt=Ne(ll());var iue=class t extends ty{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new KEt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Dr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};d();var sue=Ne(ll());var mPr=new sue.ProtocolRequestType("copilot/showPanelMessageRequest"),hPr=new sue.ProtocolNotificationType("copilot/showPanelMessage"),oue=class extends f8{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(Dr).connection.sendNotification(hPr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(Dr).connection,i;try{i=await n.sendRequest(mPr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${Rx(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};d();d();var gPr=new Ct("fetcher"),APr="https://default.exp-tas.com/",aue=class extends Hr{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(kd(i)||`${r}/`.startsWith(APr))throw i;gPr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var YEt=new Ct("fetcher"),cue=class extends Hr{constructor(r,n=new PM(r),i=new RM(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.updateFetcher=s(()=>{let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=zi(this.ctx,Ht.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(YEt.debug(this.ctx,n),this.currentFetcher=r)},"updateFetcher");this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new aue(r,n,i,()=>{YEt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(Cs).onDidSetCapabilities(this.updateFetcher),r.get(Pc).onDidChangeCopilotSettings(this.updateFetcher)}static{s(this,"AgentDelegatingFetcher")}get fetchStrategy(){return zi(this.ctx,Ht.FetchStrategy)}get editorFetcherCapability(){return this.ctx.get(Cs).getCapabilities().fetch??!1}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};d();var lue=class extends Ra{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Dr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}showInformationMessage(r,...n){return this.connection.window.showInformationMessage(r,...n)}};d();d();var JEt=Ne(require("crypto")),XEt=require("os");var yPr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function CPr(t){let e=t.replace(/-/g,":").toLowerCase();return!yPr.has(e)}s(CPr,"validateMacAddress");function vPr(){let t=(0,XEt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(CPr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(vPr,"getMac");var Y5e;function xPr(){try{let t=vPr();return JEt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(xPr,"getMacMachineId");function ZEt(){return Y5e||(Y5e=xPr()||Er()),Y5e}s(ZEt,"getMachineId");var EPr=Er()+Date.now(),ebt=new Ds(EPr,ZEt());d();d();var uue=class extends coe{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(O1).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;let e=this.ctx.get(O1);this._watcher=e.onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this._watcher?.dispose(),this._watcher=void 0}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.emitFilesDeleted(o.map(a=>({uri:a.uri})))}};var due=class extends zd{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new uue(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Cs).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function tbt(t){let e=new og(process.env),r=Qlt(e);r.set(og,e),r.set(Hr,new cue(r)),r.set(ua,new ua(r)),Ake(r,{});let n=pje();r.set(Ai,n);let i=new Lce;r.set(ru,i);let o=new dA(r,n);r.set(dA,o),r.set(Ki,new KG(r,process.env)),r.set(wf,new wf(r)),r.set(Dd,new Dd(r,"agent")),r.set(Ds,ebt),r.set(hn,new koe),r.set(DP,fCt()),r.set($s,new $s),r.set(Mi,LCt),r.set(KR,new Bce(r)),r.set(zd,new due(r)),r.set(O1,new O1(r)),r.set(dl,new dl),r.set(Qc,UX(r,Ugt)),r.set(S0,new S0(r)),r.set(WC,new A3),a0t(r),loe(r),I0t(r),lje(r),r.set(Dr,new Dr(r,t)),r.set(Ra,new lue(r)),r.set(f8,new oue(r)),r.set($u,new YM(r)),r.set(So,new Yce(r)),r.set(sH,new sH(r));let a=new RS(r);return r.set(Cr,a),r.set(RS,a),r.set(df,new d8(r,process.env)),r.set(ul,new ul(r)),RCt(r),Out(r),r.set(Uf,new Uf),r.set(wS,new wS),r.set(Cy,new Cy),r.set(Sf,new Fce),r.set(X1,new X1),r.set(NA,new aoe(r)),r.set(VC,new N8),r.set(dy,new dy(r)),r.set(pE,new pE(r)),r.set(yl,new yl(r)),r.set(sd,new Vce(r)),r.set(Bw,new Kce(r)),r.set(v1,new zce(r)),r.set(xu,new xu(r)),r.set(EE,new EE(r)),r.set(py,new py(r)),r.set(nE,new nE(r)),r.set(tg,new rue(r)),r.set(ty,new iue(r)),r.set(Lk,new Lk),r.set(fy,new Mce(r)),r.set(x1,new x1),r.set(Mk,new Mk),r.set(JA,new JA),r.set($0,new $0),r.set(S1,new S1(r)),r.set(eg,new Lne([new uoe,new doe])),r.set(mP,new mP(r)),r}s(tbt,"createLanguageServerContext");d();var J5e=require("events"),UH=Ne(require("fs"));NK();var pue=Ne(ll());d();var nbt=Ne(require("fs")),ibt=Ne(require("http")),JM=Ne(require("path"));var fue=class{constructor(e,r){this.port=e;let n;this.server=ibt.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{rbt(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{rbt(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;JM.basename(__dirname)!=="debug"&&(a=JM.dirname(__dirname)),n??=nbt.readFileSync(JM.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function rbt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(rbt,"writeData");var X5e=class extends pue.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},Z5e=class extends pue.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function obt(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new J5e.EventEmitter;let c=new fue(i,n).listen();i===0&&await ZF(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=UH.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=UH.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&UH.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new J5e.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new Z5e(e,n),r=new X5e(r,n)),[e,r]}s(obt,"wrapTransports");async function cbt(){let t=jVe(process.argv.slice(2)).version(new Io().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Eg.IPCMessageReader(process),n=new Eg.IPCMessageWriter(process)):e.stdio?(r=new Eg.StreamMessageReader(process.stdin),n=new Eg.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await KE.mkdtemp(sbt.default.tmpdir()+"/github-copilot-"));try{let c=uCe(),l=JSON.parse(await KE.readFile(qH.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await KE.readFile(qH.join(c,"apps.json"),"utf8"))}catch{}let f=!1;for(let p of Object.keys(l)){let m=`${p}:${bp}`;u[m]||!l[p].user||!l[p].oauth_token||(u[m]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:bp},f=!0)}f&&await KE.writeFile(qH.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await KE.rm(qH.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,Eg.createConnection)(Eg.ProposedFeatures.all,...await obt(process.env,r,n)),o=tbt(i);console=Vje(o);let a=o.get(Dr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),uje(o),a.listen()}s(cbt,"main");abt.isMainThread?require.main===module&&cbt():jje()&&Gje();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
