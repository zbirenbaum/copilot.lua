"use strict";var UKe=Object.create;var d_=Object.defineProperty;var Ohe=Object.getOwnPropertyDescriptor;var qKe=Object.getOwnPropertyNames;var WKe=Object.getPrototypeOf,GKe=Object.prototype.hasOwnProperty;var Mhe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Qhe=t=>{throw TypeError(t)};var s=(t,e)=>d_(t,"name",{value:e,configurable:!0});var HKe=(t,e)=>()=>(t&&(e=t(t=0)),e);var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),t1=(t,e)=>{for(var n in e)d_(t,n,{get:e[n],enumerable:!0})},Uhe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qKe(e))!GKe.call(t,i)&&i!==n&&d_(t,i,{get:()=>e[i],enumerable:!(r=Ohe(e,i))||r.enumerable});return t};var Ve=(t,e,n)=>(n=t!=null?UKe(WKe(t)):{},Uhe(e||!t||!t.__esModule?d_(n,"default",{value:t,enumerable:!0}):n,t)),jKe=t=>Uhe(d_({},"__esModule",{value:!0}),t),pu=(t,e,n,r)=>{for(var i=r>1?void 0:r?Ohe(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&d_(e,n,i),i},Gs=(t,e)=>(n,r)=>e(n,r,t);var KK=(t,e,n)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&Qhe("Object expected");var r,i;n&&(r=e[Mhe("asyncDispose")]),r===void 0&&(r=e[Mhe("dispose")],n&&(i=r)),typeof r!="function"&&Qhe("Object not disposable"),i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([n,r,e])}else n&&t.push([n]);return e},JK=(t,e,n)=>{var r=typeof SuppressedError=="function"?SuppressedError:function(a,l,c,u){return u=Error(c),u.name="SuppressedError",u.error=a,u.suppressed=l,u},i=a=>e=n?new r(a,e,"An error was suppressed during disposal"):(n=!0,a),o=a=>{for(;a=t.pop();)try{var l=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(l).then(o,c=>(i(c),o()))}catch(c){i(c)}if(n)throw e};return o()};var importMetaUrlShim,f=HKe(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var Whe=G(XK=>{f();var qhe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");XK.encode=function(t){if(0<=t&&t<qhe.length)return qhe[t];throw new TypeError("Must be between 0 and 63: "+t)};XK.decode=function(t){var e=65,n=90,r=97,i=122,o=48,a=57,l=43,c=47,u=26,d=52;return e<=t&&t<=n?t-e:r<=t&&t<=i?t-r+u:o<=t&&t<=a?t-o+d:t==l?62:t==c?63:-1}});var tJ=G(eJ=>{f();var Ghe=Whe(),ZK=5,Hhe=1<<ZK,jhe=Hhe-1,Vhe=Hhe;function VKe(t){return t<0?(-t<<1)+1:(t<<1)+0}s(VKe,"toVLQSigned");function $Ke(t){var e=(t&1)===1,n=t>>1;return e?-n:n}s($Ke,"fromVLQSigned");eJ.encode=s(function(e){var n="",r,i=VKe(e);do r=i&jhe,i>>>=ZK,i>0&&(r|=Vhe),n+=Ghe.encode(r);while(i>0);return n},"base64VLQ_encode");eJ.decode=s(function(e,n,r){var i=e.length,o=0,a=0,l,c;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=Ghe.decode(e.charCodeAt(n++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));l=!!(c&Vhe),c&=jhe,o=o+(c<<a),a+=ZK}while(l);r.value=$Ke(o),r.rest=n},"base64VLQ_decode")});var m_=G(kc=>{f();function zKe(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}s(zKe,"getArg");kc.getArg=zKe;var $he=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,YKe=/^data:.+\,.+$/;function Uk(t){var e=t.match($he);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(Uk,"urlParse");kc.urlParse=Uk;function f_(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(f_,"urlGenerate");kc.urlGenerate=f_;function nJ(t){var e=t,n=Uk(t);if(n){if(!n.path)return t;e=n.path}for(var r=kc.isAbsolute(e),i=e.split(/\/+/),o,a=0,l=i.length-1;l>=0;l--)o=i[l],o==="."?i.splice(l,1):o===".."?a++:a>0&&(o===""?(i.splice(l+1,a),a=0):(i.splice(l,2),a--));return e=i.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,f_(n)):e}s(nJ,"normalize");kc.normalize=nJ;function zhe(t,e){t===""&&(t="."),e===""&&(e=".");var n=Uk(e),r=Uk(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),f_(n);if(n||e.match(YKe))return e;if(r&&!r.host&&!r.path)return r.host=e,f_(r);var i=e.charAt(0)==="/"?e:nJ(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=i,f_(r)):i}s(zhe,"join");kc.join=zhe;kc.isAbsolute=function(t){return t.charAt(0)==="/"||$he.test(t)};function KKe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}s(KKe,"relative");kc.relative=KKe;var Yhe=function(){var t=Object.create(null);return!("__proto__"in t)}();function Khe(t){return t}s(Khe,"identity");function JKe(t){return Jhe(t)?"$"+t:t}s(JKe,"toSetString");kc.toSetString=Yhe?Khe:JKe;function XKe(t){return Jhe(t)?t.slice(1):t}s(XKe,"fromSetString");kc.fromSetString=Yhe?Khe:XKe;function Jhe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}s(Jhe,"isProtoString");function ZKe(t,e,n){var r=p_(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:p_(t.name,e.name)}s(ZKe,"compareByOriginalPositions");kc.compareByOriginalPositions=ZKe;function eJe(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=p_(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:p_(t.name,e.name)}s(eJe,"compareByGeneratedPositionsDeflated");kc.compareByGeneratedPositionsDeflated=eJe;function p_(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(p_,"strcmp");function tJe(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=p_(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:p_(t.name,e.name)}s(tJe,"compareByGeneratedPositionsInflated");kc.compareByGeneratedPositionsInflated=tJe;function nJe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(nJe,"parseSourceMapInput");kc.parseSourceMapInput=nJe;function rJe(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=Uk(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var i=r.path.lastIndexOf("/");i>=0&&(r.path=r.path.substring(0,i+1))}e=zhe(f_(r),e)}return nJ(e)}s(rJe,"computeSourceURL");kc.computeSourceURL=rJe});var oJ=G(Xhe=>{f();var rJ=m_(),iJ=Object.prototype.hasOwnProperty,UE=typeof Map<"u";function n1(){this._array=[],this._set=UE?new Map:Object.create(null)}s(n1,"ArraySet");n1.fromArray=s(function(e,n){for(var r=new n1,i=0,o=e.length;i<o;i++)r.add(e[i],n);return r},"ArraySet_fromArray");n1.prototype.size=s(function(){return UE?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");n1.prototype.add=s(function(e,n){var r=UE?e:rJ.toSetString(e),i=UE?this.has(e):iJ.call(this._set,r),o=this._array.length;(!i||n)&&this._array.push(e),i||(UE?this._set.set(e,o):this._set[r]=o)},"ArraySet_add");n1.prototype.has=s(function(e){if(UE)return this._set.has(e);var n=rJ.toSetString(e);return iJ.call(this._set,n)},"ArraySet_has");n1.prototype.indexOf=s(function(e){if(UE){var n=this._set.get(e);if(n>=0)return n}else{var r=rJ.toSetString(e);if(iJ.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");n1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");n1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");Xhe.ArraySet=n1});var tge=G(ege=>{f();var Zhe=m_();function iJe(t,e){var n=t.generatedLine,r=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return r>n||r==n&&o>=i||Zhe.compareByGeneratedPositionsInflated(t,e)<=0}s(iJe,"generatedPositionAfter");function sN(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(sN,"MappingList");sN.prototype.unsortedForEach=s(function(e,n){this._array.forEach(e,n)},"MappingList_forEach");sN.prototype.add=s(function(e){iJe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");sN.prototype.toArray=s(function(){return this._sorted||(this._array.sort(Zhe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");ege.MappingList=sN});var sJ=G(nge=>{f();var qk=tJ(),Ua=m_(),aN=oJ().ArraySet,oJe=tge().MappingList;function mf(t){t||(t={}),this._file=Ua.getArg(t,"file",null),this._sourceRoot=Ua.getArg(t,"sourceRoot",null),this._skipValidation=Ua.getArg(t,"skipValidation",!1),this._sources=new aN,this._names=new aN,this._mappings=new oJe,this._sourcesContents=null}s(mf,"SourceMapGenerator");mf.prototype._version=3;mf.fromSourceMap=s(function(e){var n=e.sourceRoot,r=new mf({file:e.file,sourceRoot:n});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,n!=null&&(o.source=Ua.relative(n,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),r.addMapping(o)}),e.sources.forEach(function(i){var o=i;n!==null&&(o=Ua.relative(n,i)),r._sources.has(o)||r._sources.add(o);var a=e.sourceContentFor(i);a!=null&&r.setSourceContent(i,a)}),r},"SourceMapGenerator_fromSourceMap");mf.prototype.addMapping=s(function(e){var n=Ua.getArg(e,"generated"),r=Ua.getArg(e,"original",null),i=Ua.getArg(e,"source",null),o=Ua.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:o})},"SourceMapGenerator_addMapping");mf.prototype.setSourceContent=s(function(e,n){var r=e;this._sourceRoot!=null&&(r=Ua.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ua.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Ua.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");mf.prototype.applySourceMap=s(function(e,n,r){var i=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Ua.relative(o,i));var a=new aN,l=new aN;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,r!=null&&(c.source=Ua.join(r,c.source)),o!=null&&(c.source=Ua.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!l.has(p)&&l.add(p)},this),this._sources=a,this._names=l,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(r!=null&&(c=Ua.join(r,c)),o!=null&&(c=Ua.relative(o,c)),this.setSourceContent(c,u))},this)},"SourceMapGenerator_applySourceMap");mf.prototype._validateMapping=s(function(e,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!i)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:i}))}},"SourceMapGenerator_validateMapping");mf.prototype._serializeMappings=s(function(){for(var e=0,n=1,r=0,i=0,o=0,a=0,l="",c,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],c="",u.generatedLine!==n)for(e=0;u.generatedLine!==n;)c+=";",n++;else if(h>0){if(!Ua.compareByGeneratedPositionsInflated(u,m[h-1]))continue;c+=","}c+=qk.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=qk.encode(p-a),a=p,c+=qk.encode(u.originalLine-1-i),i=u.originalLine-1,c+=qk.encode(u.originalColumn-r),r=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),c+=qk.encode(d-o),o=d)),l+=c}return l},"SourceMapGenerator_serializeMappings");mf.prototype._generateSourcesContent=s(function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Ua.relative(n,r));var i=Ua.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");mf.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");mf.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");nge.SourceMapGenerator=mf});var rge=G(qE=>{f();qE.GREATEST_LOWER_BOUND=1;qE.LEAST_UPPER_BOUND=2;function aJ(t,e,n,r,i,o){var a=Math.floor((e-t)/2)+t,l=i(n,r[a],!0);return l===0?a:l>0?e-a>1?aJ(a,e,n,r,i,o):o==qE.LEAST_UPPER_BOUND?e<r.length?e:-1:a:a-t>1?aJ(t,a,n,r,i,o):o==qE.LEAST_UPPER_BOUND?a:t<0?-1:t}s(aJ,"recursiveSearch");qE.search=s(function(e,n,r,i){if(n.length===0)return-1;var o=aJ(-1,n.length,e,n,r,i||qE.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&r(n[o],n[o-1],!0)===0;)--o;return o},"search")});var oge=G(ige=>{f();function lJ(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}s(lJ,"swap");function sJe(t,e){return Math.round(t+Math.random()*(e-t))}s(sJe,"randomIntInRange");function cJ(t,e,n,r){if(n<r){var i=sJe(n,r),o=n-1;lJ(t,i,r);for(var a=t[r],l=n;l<r;l++)e(t[l],a)<=0&&(o+=1,lJ(t,o,l));lJ(t,o+1,l);var c=o+1;cJ(t,e,n,c-1),cJ(t,e,c+1,r)}}s(cJ,"doQuickSort");ige.quickSort=function(t,e){cJ(t,e,0,t.length-1)}});var age=G(lN=>{f();var _n=m_(),uJ=rge(),h_=oJ().ArraySet,aJe=tJ(),Wk=oge().quickSort;function os(t,e){var n=t;return typeof t=="string"&&(n=_n.parseSourceMapInput(t)),n.sections!=null?new Yp(n,e):new nc(n,e)}s(os,"SourceMapConsumer");os.fromSourceMap=function(t,e){return nc.fromSourceMap(t,e)};os.prototype._version=3;os.prototype.__generatedMappings=null;Object.defineProperty(os.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});os.prototype.__originalMappings=null;Object.defineProperty(os.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});os.prototype._charIsMappingSeparator=s(function(e,n){var r=e.charAt(n);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");os.prototype._parseMappings=s(function(e,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");os.GENERATED_ORDER=1;os.ORIGINAL_ORDER=2;os.GREATEST_LOWER_BOUND=1;os.LEAST_UPPER_BOUND=2;os.prototype.eachMapping=s(function(e,n,r){var i=n||null,o=r||os.GENERATED_ORDER,a;switch(o){case os.GENERATED_ORDER:a=this._generatedMappings;break;case os.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=_n.computeSourceURL(l,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");os.prototype.allGeneratedPositionsFor=s(function(e){var n=_n.getArg(e,"line"),r={source:_n.getArg(e,"source"),originalLine:n,originalColumn:_n.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var i=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",_n.compareByOriginalPositions,uJ.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:_n.getArg(a,"generatedLine",null),column:_n.getArg(a,"generatedColumn",null),lastColumn:_n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===n&&a.originalColumn==c;)i.push({line:_n.getArg(a,"generatedLine",null),column:_n.getArg(a,"generatedColumn",null),lastColumn:_n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");lN.SourceMapConsumer=os;function nc(t,e){var n=t;typeof t=="string"&&(n=_n.parseSourceMapInput(t));var r=_n.getArg(n,"version"),i=_n.getArg(n,"sources"),o=_n.getArg(n,"names",[]),a=_n.getArg(n,"sourceRoot",null),l=_n.getArg(n,"sourcesContent",null),c=_n.getArg(n,"mappings"),u=_n.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=_n.normalize(a)),i=i.map(String).map(_n.normalize).map(function(d){return a&&_n.isAbsolute(a)&&_n.isAbsolute(d)?_n.relative(a,d):d}),this._names=h_.fromArray(o.map(String),!0),this._sources=h_.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return _n.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=e,this.file=u}s(nc,"BasicSourceMapConsumer");nc.prototype=Object.create(os.prototype);nc.prototype.consumer=os;nc.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=_n.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};nc.fromSourceMap=s(function(e,n){var r=Object.create(nc.prototype),i=r._names=h_.fromArray(e._names.toArray(),!0),o=r._sources=h_.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(h){return _n.computeSourceURL(r.sourceRoot,h,n)});for(var a=e._mappings.toArray().slice(),l=r.__generatedMappings=[],c=r.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new sge;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),c.push(m)),l.push(m)}return Wk(r.__originalMappings,_n.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");nc.prototype._version=3;Object.defineProperty(nc.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function sge(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(sge,"Mapping");nc.prototype._parseMappings=s(function(e,n){for(var r=1,i=0,o=0,a=0,l=0,c=0,u=e.length,d=0,p={},m={},h=[],g=[],y,v,b,E,_;d<u;)if(e.charAt(d)===";")r++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(y=new sge,y.generatedLine=r,E=d;E<u&&!this._charIsMappingSeparator(e,E);E++);if(v=e.slice(d,E),b=p[v],b)d+=v.length;else{for(b=[];d<E;)aJe.decode(e,d,m),_=m.value,d=m.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");p[v]=b}y.generatedColumn=i+b[0],i=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=o+b[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+b[3],a=y.originalColumn,b.length>4&&(y.name=c+b[4],c+=b[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}Wk(g,_n.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,Wk(h,_n.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");nc.prototype._findMapping=s(function(e,n,r,i,o,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return uJ.search(e,n,o,a)},"SourceMapConsumer_findMapping");nc.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");nc.prototype.originalPositionFor=s(function(e){var n={generatedLine:_n.getArg(e,"line"),generatedColumn:_n.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",_n.compareByGeneratedPositionsDeflated,_n.getArg(e,"bias",os.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var o=_n.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=_n.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=_n.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:_n.getArg(i,"originalLine",null),column:_n.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");nc.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");nc.prototype.sourceContentFor=s(function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i=e;this.sourceRoot!=null&&(i=_n.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=_n.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(n)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");nc.prototype.generatedPositionFor=s(function(e){var n=_n.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:_n.getArg(e,"line"),originalColumn:_n.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",_n.compareByOriginalPositions,_n.getArg(e,"bias",os.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:_n.getArg(o,"generatedLine",null),column:_n.getArg(o,"generatedColumn",null),lastColumn:_n.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");lN.BasicSourceMapConsumer=nc;function Yp(t,e){var n=t;typeof t=="string"&&(n=_n.parseSourceMapInput(t));var r=_n.getArg(n,"version"),i=_n.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new h_,this._names=new h_;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=_n.getArg(a,"offset"),c=_n.getArg(l,"line"),u=_n.getArg(l,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new os(_n.getArg(a,"map"),e)}})}s(Yp,"IndexedSourceMapConsumer");Yp.prototype=Object.create(os.prototype);Yp.prototype.constructor=os;Yp.prototype._version=3;Object.defineProperty(Yp.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t},"get")});Yp.prototype.originalPositionFor=s(function(e){var n={generatedLine:_n.getArg(e,"line"),generatedColumn:_n.getArg(e,"column")},r=uJ.search(n,this._sections,function(o,a){var l=o.generatedLine-a.generatedOffset.generatedLine;return l||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[r];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Yp.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Yp.prototype.sourceContentFor=s(function(e,n){for(var r=0;r<this._sections.length;r++){var i=this._sections[r],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Yp.prototype.generatedPositionFor=s(function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(_n.getArg(e,"source"))!==-1){var i=r.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Yp.prototype._parseMappings=s(function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],c=i.consumer._sources.at(l.source);c=_n.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}Wk(this.__generatedMappings,_n.compareByGeneratedPositionsDeflated),Wk(this.__originalMappings,_n.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");lN.IndexedSourceMapConsumer=Yp});var cge=G(lge=>{f();var lJe=sJ().SourceMapGenerator,cN=m_(),cJe=/(\r?\n)/,uJe=10,g_="$$$isSourceNode$$$";function Yd(t,e,n,r,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=n??null,this.name=i??null,this[g_]=!0,r!=null&&this.add(r)}s(Yd,"SourceNode");Yd.fromStringWithSourceMap=s(function(e,n,r){var i=new Yd,o=e.split(cJe),a=0,l=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),c=1,u=0,d=null;return n.eachMapping(function(m){if(d!==null)if(c<m.generatedLine)p(d,l()),c++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;c<m.generatedLine;)i.add(l()),c++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,l()),i.add(o.splice(a).join(""))),n.sources.forEach(function(m){var h=n.sourceContentFor(m);h!=null&&(r!=null&&(m=cN.join(r,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=r?cN.join(r,m.source):m.source;i.add(new Yd(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");Yd.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[g_]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");Yd.prototype.prepend=s(function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[g_]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");Yd.prototype.walk=s(function(e){for(var n,r=0,i=this.children.length;r<i;r++)n=this.children[r],n[g_]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");Yd.prototype.join=s(function(e){var n,r,i=this.children.length;if(i>0){for(n=[],r=0;r<i-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this},"SourceNode_join");Yd.prototype.replaceRight=s(function(e,n){var r=this.children[this.children.length-1];return r[g_]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this},"SourceNode_replaceRight");Yd.prototype.setSourceContent=s(function(e,n){this.sourceContents[cN.toSetString(e)]=n},"SourceNode_setSourceContent");Yd.prototype.walkSourceContents=s(function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][g_]&&this.children[n].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),n=0,r=i.length;n<r;n++)e(cN.fromSetString(i[n]),this.sourceContents[i[n]])},"SourceNode_walkSourceContents");Yd.prototype.toString=s(function(){var e="";return this.walk(function(n){e+=n}),e},"SourceNode_toString");Yd.prototype.toStringWithSourceMap=s(function(e){var n={code:"",line:1,column:0},r=new lJe(e),i=!1,o=null,a=null,l=null,c=null;return this.walk(function(u,d){n.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||l!==d.column||c!==d.name)&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name}),o=d.source,a=d.line,l=d.column,c=d.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===uJe?(n.line++,n.column=0,p+1===m?(o=null,i=!1):i&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name})):n.column++}),this.walkSourceContents(function(u,d){r.setSourceContent(u,d)}),{code:n.code,map:r}},"SourceNode_toStringWithSourceMap");lge.SourceNode=Yd});var uge=G(uN=>{f();uN.SourceMapGenerator=sJ().SourceMapGenerator;uN.SourceMapConsumer=age().SourceMapConsumer;uN.SourceNode=cge().SourceNode});var fge=G((Vjt,dge)=>{f();var dJe=Object.prototype.toString,dJ=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function fJe(t){return dJe.call(t).slice(8,-1)==="ArrayBuffer"}s(fJe,"isArrayBuffer");function pJe(t,e,n){e>>>=0;var r=t.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=r;else if(n>>>=0,n>r)throw new RangeError("'length' is out of bounds");return dJ?Buffer.from(t.slice(e,e+n)):new Buffer(new Uint8Array(t.slice(e,e+n)))}s(pJe,"fromArrayBuffer");function mJe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return dJ?Buffer.from(t,e):new Buffer(t,e)}s(mJe,"fromString");function hJe(t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return fJe(t)?pJe(t,e,n):typeof t=="string"?mJe(t,e):dJ?Buffer.from(t):new Buffer(t)}s(hJe,"bufferFrom");dge.exports=hJe});var xge=G((GE,hJ)=>{f();var gJe=uge().SourceMapConsumer,fJ=require("path"),jh;try{jh=require("fs"),(!jh.existsSync||!jh.readFileSync)&&(jh=null)}catch{}var AJe=fge();function pge(t,e){return t.require(e)}s(pge,"dynamicRequire");var mge=!1,hge=!1,pJ=!1,Gk="auto",WE={},Hk={},yJe=/^data:application\/json[^,]+base64,/,ax=[],lx=[];function gJ(){return Gk==="browser"?!0:Gk==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(gJ,"isInBrowser");function CJe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(CJe,"hasGlobalProcessEventEmitter");function xJe(){return typeof process=="object"&&process!==null?process.version:""}s(xJe,"globalProcessVersion");function vJe(){if(typeof process=="object"&&process!==null)return process.stderr}s(vJe,"globalProcessStderr");function bJe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(bJe,"globalProcessExit");function dN(t){return function(e){for(var n=0;n<t.length;n++){var r=t[n](e);if(r)return r}return null}}s(dN,"handlerExec");var AJ=dN(ax);ax.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(r,i){return i?"":"/"})),t in WE)return WE[t];var e="";try{if(jh)jh.existsSync(t)&&(e=jh.readFileSync(t,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),n.readyState===4&&n.status===200&&(e=n.responseText)}}catch{}return WE[t]=e});function mJ(t,e){if(!t)return e;var n=fJ.dirname(t),r=/^\w+:\/\/[^\/]*/.exec(n),i=r?r[0]:"",o=n.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+fJ.resolve(n.slice(i.length),e).replace(/\\/g,"/")):i+fJ.resolve(n.slice(i.length),e)}s(mJ,"supportRelativeURL");function EJe(t){var e;if(gJ())try{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e=n.readyState===4?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=AJ(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(EJe,"retrieveSourceMapURL");var yJ=dN(lx);lx.push(function(t){var e=EJe(t);if(!e)return null;var n;if(yJe.test(e)){var r=e.slice(e.indexOf(",")+1);n=AJe(r,"base64").toString(),e=t}else e=mJ(t,e),n=AJ(e);return n?{url:e,map:n}:null});function CJ(t){var e=Hk[t.source];if(!e){var n=yJ(t.source);n?(e=Hk[t.source]={url:n.url,map:new gJe(n.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var l=mJ(e.url,i);WE[l]=a}})):e=Hk[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(t);if(r.source!==null)return r.source=mJ(e.url,r.source),r}return t}s(CJ,"mapSourcePosition");function Age(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var n=CJ({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+Age(e[2])+")":t}s(Age,"mapEvalOrigin");function IJe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var n=this.getLineNumber();if(n!=null){e+=":"+n;var r=this.getColumnNumber();r&&(e+=":"+r)}}var i="",o=this.getFunctionName(),a=!0,l=this.isConstructor(),c=!(this.isToplevel()||l);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else l?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(IJe,"CallSiteToString");function gge(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(n){e[n]=/^(?:is|get)/.test(n)?function(){return t[n].call(t)}:t[n]}),e.toString=IJe,e}s(gge,"cloneCallSite");function yge(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var n=t.getFileName()||t.getScriptNameOrSourceURL();if(n){var r=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(xJe())?0:62;r===1&&i>a&&!gJ()&&!t.isEval()&&(i-=a);var l=CJ({source:n,line:r,column:i});e.curPosition=l,t=gge(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=Age(u),t=gge(t),t.getEvalOrigin=function(){return u}),t}s(yge,"wrapCallSite");function TJe(t,e){pJ&&(WE={},Hk={});for(var n=t.name||"Error",r=t.message||"",i=n+": "+r,o={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+yge(e[l],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(TJe,"prepareStackTrace");function Cge(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var n=e[1],r=+e[2],i=+e[3],o=WE[n];if(!o&&jh&&jh.existsSync(n))try{o=jh.readFileSync(n,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[r-1];if(a)return n+":"+r+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(Cge,"getErrorSource");function wJe(t){var e=Cge(t),n=vJe();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),bJe(1)}s(wJe,"printErrorAndExit");function _Je(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(n&&!r)return wJe(arguments[1])}return t.apply(this,arguments)}}s(_Je,"shimEmitUncaughtException");var SJe=ax.slice(0),RJe=lx.slice(0);GE.wrapCallSite=yge;GE.getErrorSource=Cge;GE.mapSourcePosition=CJ;GE.retrieveSourceMap=yJ;GE.install=function(t){if(t=t||{},t.environment&&(Gk=t.environment,["node","browser","auto"].indexOf(Gk)===-1))throw new Error("environment "+Gk+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(ax.length=0),ax.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(lx.length=0),lx.unshift(t.retrieveSourceMap)),t.hookRequire&&!gJ()){var e=pge(hJ,"module"),n=e.prototype._compile;n.__sourceMapSupport||(e.prototype._compile=function(o,a){return WE[a]=o,Hk[a]=void 0,n.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(pJ||(pJ="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),mge||(mge=!0,Error.prepareStackTrace=TJe),!hge){var r="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=pge(hJ,"worker_threads");i.isMainThread===!1&&(r=!1)}catch{}r&&CJe()&&(hge=!0,_Je())}};GE.resetRetrieveHandlers=function(){ax.length=0,lx.length=0,ax=SJe.slice(0),lx=RJe.slice(0),yJ=dN(lx),AJ=dN(ax)}});var Bi=G((pN,bge)=>{f();(function(t,e){typeof pN=="object"?bge.exports=pN=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(pN,function(){var t=t||function(e,n){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof require=="function")try{r=require("crypto")}catch{}var i=s(function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function b(){}return s(b,"F"),function(E){var _;return b.prototype=E,_=new b,b.prototype=null,_}}(),a={},l=a.lib={},c=l.Base=function(){return{extend:s(function(b){var E=o(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},"extend"),create:s(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:s(function(){},"init"),mixIn:s(function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=l.WordArray=c.extend({init:s(function(b,E){b=this.words=b||[],E!=n?this.sigBytes=E:this.sigBytes=b.length*4},"init"),toString:s(function(b){return(b||p).stringify(this)},"toString"),concat:s(function(b){var E=this.words,_=b.words,k=this.sigBytes,D=b.sigBytes;if(this.clamp(),k%4)for(var N=0;N<D;N++){var Q=_[N>>>2]>>>24-N%4*8&255;E[k+N>>>2]|=Q<<24-(k+N)%4*8}else for(var Z=0;Z<D;Z+=4)E[k+Z>>>2]=_[Z>>>2];return this.sigBytes+=D,this},"concat"),clamp:s(function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=e.ceil(E/4)},"clamp"),clone:s(function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:s(function(b){for(var E=[],_=0;_<b;_+=4)E.push(i());return new u.init(E,b)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],D=0;D<_;D++){var N=E[D>>>2]>>>24-D%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new u.init(_,E/2)},"parse")},m=d.Latin1={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],D=0;D<_;D++){var N=E[D>>>2]>>>24-D%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,E)},"parse")},h=d.Utf8={stringify:s(function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(b){return m.parse(unescape(encodeURIComponent(b)))},"parse")},g=l.BufferedBlockAlgorithm=c.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:s(function(b){var E,_=this._data,k=_.words,D=_.sigBytes,N=this.blockSize,Q=N*4,Z=D/Q;b?Z=e.ceil(Z):Z=e.max((Z|0)-this._minBufferSize,0);var me=Z*N,te=e.min(me*4,D);if(me){for(var H=0;H<me;H+=N)this._doProcessBlock(k,H);E=k.splice(0,me),_.sigBytes-=te}return new u.init(E,te)},"_process"),clone:s(function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=g.extend({cfg:c.extend(),init:s(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(b){return this._append(b),this._process(),this},"update"),finalize:s(function(b){b&&this._append(b);var E=this._doFinalize();return E},"finalize"),blockSize:512/32,_createHelper:s(function(b){return function(E,_){return new b.init(_).finalize(E)}},"_createHelper"),_createHmacHelper:s(function(b){return function(E,_){return new v.HMAC.init(b,_).finalize(E)}},"_createHmacHelper")}),v=a.algo={};return a}(Math);return t})});var Yk=G((mN,Ege)=>{f();(function(t,e){typeof mN=="object"?Ege.exports=mN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(mN,function(t){return function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=n.x64={},l=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),c=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var Tge=G((hN,Ige)=>{f();(function(t,e){typeof hN=="object"?Ige.exports=hN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(hN,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,n=e.lib,r=n.WordArray,i=r.init,o=r.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var l=a.byteLength,c=[],u=0;u<l;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,l)}else i.apply(this,arguments)};o.prototype=r}}(),t.lib.WordArray})});var _ge=G((gN,wge)=>{f();(function(t,e){typeof gN=="object"?wge.exports=gN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(gN,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return r.create(u,c*2)},"parse")};i.Utf16LE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=a(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return r.create(u,c*2)},"parse")};function a(l){return l<<8&4278255360|l>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var ux=G((AN,Sge)=>{f();(function(t,e){typeof AN=="object"?Sge.exports=AN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(AN,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64={stringify:s(function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,y=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=h<<16|g<<8|y,b=0;b<4&&m+b*.75<u;b++)p.push(d.charAt(v>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},"stringify"),parse:s(function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=l.indexOf(m);h!==-1&&(c=h)}return a(l,c,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var kge=G((yN,Rge)=>{f();(function(t,e){typeof yN=="object"?Rge.exports=yN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(yN,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,p=c?this._safe_map:this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=g<<16|y<<8|v,E=0;E<4&&h+E*.75<d;E++)m.push(p.charAt(b>>>6*(3-E)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return a(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var dx=G((CN,Bge)=>{f();(function(t,e){typeof CN=="object"?Bge.exports=CN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(CN,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=e.abs(e.sin(h+1))*4294967296|0})();var c=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var v=g+y,b=h[v];h[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,_=h[g+0],k=h[g+1],D=h[g+2],N=h[g+3],Q=h[g+4],Z=h[g+5],me=h[g+6],te=h[g+7],H=h[g+8],W=h[g+9],re=h[g+10],oe=h[g+11],V=h[g+12],q=h[g+13],Y=h[g+14],ee=h[g+15],de=E[0],ne=E[1],fe=E[2],pe=E[3];de=u(de,ne,fe,pe,_,7,l[0]),pe=u(pe,de,ne,fe,k,12,l[1]),fe=u(fe,pe,de,ne,D,17,l[2]),ne=u(ne,fe,pe,de,N,22,l[3]),de=u(de,ne,fe,pe,Q,7,l[4]),pe=u(pe,de,ne,fe,Z,12,l[5]),fe=u(fe,pe,de,ne,me,17,l[6]),ne=u(ne,fe,pe,de,te,22,l[7]),de=u(de,ne,fe,pe,H,7,l[8]),pe=u(pe,de,ne,fe,W,12,l[9]),fe=u(fe,pe,de,ne,re,17,l[10]),ne=u(ne,fe,pe,de,oe,22,l[11]),de=u(de,ne,fe,pe,V,7,l[12]),pe=u(pe,de,ne,fe,q,12,l[13]),fe=u(fe,pe,de,ne,Y,17,l[14]),ne=u(ne,fe,pe,de,ee,22,l[15]),de=d(de,ne,fe,pe,k,5,l[16]),pe=d(pe,de,ne,fe,me,9,l[17]),fe=d(fe,pe,de,ne,oe,14,l[18]),ne=d(ne,fe,pe,de,_,20,l[19]),de=d(de,ne,fe,pe,Z,5,l[20]),pe=d(pe,de,ne,fe,re,9,l[21]),fe=d(fe,pe,de,ne,ee,14,l[22]),ne=d(ne,fe,pe,de,Q,20,l[23]),de=d(de,ne,fe,pe,W,5,l[24]),pe=d(pe,de,ne,fe,Y,9,l[25]),fe=d(fe,pe,de,ne,N,14,l[26]),ne=d(ne,fe,pe,de,H,20,l[27]),de=d(de,ne,fe,pe,q,5,l[28]),pe=d(pe,de,ne,fe,D,9,l[29]),fe=d(fe,pe,de,ne,te,14,l[30]),ne=d(ne,fe,pe,de,V,20,l[31]),de=p(de,ne,fe,pe,Z,4,l[32]),pe=p(pe,de,ne,fe,H,11,l[33]),fe=p(fe,pe,de,ne,oe,16,l[34]),ne=p(ne,fe,pe,de,Y,23,l[35]),de=p(de,ne,fe,pe,k,4,l[36]),pe=p(pe,de,ne,fe,Q,11,l[37]),fe=p(fe,pe,de,ne,te,16,l[38]),ne=p(ne,fe,pe,de,re,23,l[39]),de=p(de,ne,fe,pe,q,4,l[40]),pe=p(pe,de,ne,fe,_,11,l[41]),fe=p(fe,pe,de,ne,N,16,l[42]),ne=p(ne,fe,pe,de,me,23,l[43]),de=p(de,ne,fe,pe,W,4,l[44]),pe=p(pe,de,ne,fe,V,11,l[45]),fe=p(fe,pe,de,ne,ee,16,l[46]),ne=p(ne,fe,pe,de,D,23,l[47]),de=m(de,ne,fe,pe,_,6,l[48]),pe=m(pe,de,ne,fe,te,10,l[49]),fe=m(fe,pe,de,ne,Y,15,l[50]),ne=m(ne,fe,pe,de,Z,21,l[51]),de=m(de,ne,fe,pe,V,6,l[52]),pe=m(pe,de,ne,fe,N,10,l[53]),fe=m(fe,pe,de,ne,re,15,l[54]),ne=m(ne,fe,pe,de,k,21,l[55]),de=m(de,ne,fe,pe,H,6,l[56]),pe=m(pe,de,ne,fe,ee,10,l[57]),fe=m(fe,pe,de,ne,me,15,l[58]),ne=m(ne,fe,pe,de,q,21,l[59]),de=m(de,ne,fe,pe,Q,6,l[60]),pe=m(pe,de,ne,fe,oe,10,l[61]),fe=m(fe,pe,de,ne,D,15,l[62]),ne=m(ne,fe,pe,de,W,21,l[63]),E[0]=E[0]+de|0,E[1]=E[1]+ne|0,E[2]=E[2]+fe|0,E[3]=E[3]+pe|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),E=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,D=0;D<4;D++){var N=k[D];k[D]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,v,b,E,_){var k=h+(g&y|~g&v)+b+_;return(k<<E|k>>>32-E)+g}s(u,"FF");function d(h,g,y,v,b,E,_){var k=h+(g&v|y&~v)+b+_;return(k<<E|k>>>32-E)+g}s(d,"GG");function p(h,g,y,v,b,E,_){var k=h+(g^y^v)+b+_;return(k<<E|k>>>32-E)+g}s(p,"HH");function m(h,g,y,v,b,E,_){var k=h+(y^(g|~v))+b+_;return(k<<E|k>>>32-E)+g}s(m,"II"),n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var xJ=G((xN,Dge)=>{f();(function(t,e){typeof xN=="object"?Dge.exports=xN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(xN,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,a=[],l=o.SHA1=i.extend({_doReset:s(function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(c,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)a[v]=c[u+v]|0;else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(p<<5|p>>>27)+y+a[v];v<20?E+=(m&h|~m&g)+1518500249:v<40?E+=(m^h^g)+1859775393:v<60?E+=(m&h|m&g|h&g)-1894007588:E+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=E}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var c=this._data,u=c.words,d=this._nDataBytes*8,p=c.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,c.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},"clone")});e.SHA1=i._createHelper(l),e.HmacSHA1=i._createHmacHelper(l)}(),t.SHA1})});var bN=G((vN,Pge)=>{f();(function(t,e){typeof vN=="object"?Pge.exports=vN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(vN,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[],c=[];(function(){function p(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(l[g]=m(e.pow(h,1/2))),c[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(l.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],v=h[2],b=h[3],E=h[4],_=h[5],k=h[6],D=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var Q=u[N-15],Z=(Q<<25|Q>>>7)^(Q<<14|Q>>>18)^Q>>>3,me=u[N-2],te=(me<<15|me>>>17)^(me<<13|me>>>19)^me>>>10;u[N]=Z+u[N-7]+te+u[N-16]}var H=E&_^~E&k,W=g&y^g&v^y&v,re=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),oe=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),V=D+oe+H+c[N]+u[N],q=re+W;D=k,k=_,_=E,E=b+V|0,b=v,v=y,y=g,g=V+q|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+v|0,h[3]=h[3]+b|0,h[4]=h[4]+E|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+D|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});n.SHA256=o._createHelper(d),n.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var Lge=G((EN,Nge)=>{f();(function(t,e,n){typeof EN=="object"?Nge.exports=EN=e(Bi(),bN()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(EN,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var vJ=G((IN,Fge)=>{f();(function(t,e,n){typeof IN=="object"?Fge.exports=IN=e(Bi(),Yk()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(IN,function(t){return function(){var e=t,n=e.lib,r=n.Hasher,i=e.x64,o=i.Word,a=i.WordArray,l=e.algo;function c(){return o.create.apply(o,arguments)}s(c,"X64Word_create");var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var p=l.SHA512=r.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],E=g[3],_=g[4],k=g[5],D=g[6],N=g[7],Q=y.high,Z=y.low,me=v.high,te=v.low,H=b.high,W=b.low,re=E.high,oe=E.low,V=_.high,q=_.low,Y=k.high,ee=k.low,de=D.high,ne=D.low,fe=N.high,pe=N.low,Be=Q,Se=Z,Ke=me,Fe=te,ft=H,Tt=W,Ct=re,bt=oe,le=V,Oe=q,ye=Y,tt=ee,J=de,ie=ne,We=fe,Ne=pe,be=0;be<80;be++){var ze,it,gt=d[be];if(be<16)it=gt.high=m[h+be*2]|0,ze=gt.low=m[h+be*2+1]|0;else{var Ot=d[be-15],cn=Ot.high,Lt=Ot.low,Gn=(cn>>>1|Lt<<31)^(cn>>>8|Lt<<24)^cn>>>7,Yn=(Lt>>>1|cn<<31)^(Lt>>>8|cn<<24)^(Lt>>>7|cn<<25),fr=d[be-2],Ae=fr.high,Ge=fr.low,ut=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,yt=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Xt=d[be-7],Gt=Xt.high,yn=Xt.low,vn=d[be-16],jt=vn.high,nn=vn.low;ze=Yn+yn,it=Gn+Gt+(ze>>>0<Yn>>>0?1:0),ze=ze+yt,it=it+ut+(ze>>>0<yt>>>0?1:0),ze=ze+nn,it=it+jt+(ze>>>0<nn>>>0?1:0),gt.high=it,gt.low=ze}var Jt=le&ye^~le&J,Tn=Oe&tt^~Oe&ie,Nn=Be&Ke^Be&ft^Ke&ft,Kn=Se&Fe^Se&Tt^Fe&Tt,qr=(Be>>>28|Se<<4)^(Be<<30|Se>>>2)^(Be<<25|Se>>>7),Jr=(Se>>>28|Be<<4)^(Se<<30|Be>>>2)^(Se<<25|Be>>>7),Mr=(le>>>14|Oe<<18)^(le>>>18|Oe<<14)^(le<<23|Oe>>>9),$r=(Oe>>>14|le<<18)^(Oe>>>18|le<<14)^(Oe<<23|le>>>9),tr=u[be],zr=tr.high,_e=tr.low,U=Ne+$r,he=We+Mr+(U>>>0<Ne>>>0?1:0),U=U+Tn,he=he+Jt+(U>>>0<Tn>>>0?1:0),U=U+_e,he=he+zr+(U>>>0<_e>>>0?1:0),U=U+ze,he=he+it+(U>>>0<ze>>>0?1:0),ve=Jr+Kn,X=qr+Nn+(ve>>>0<Jr>>>0?1:0);We=J,Ne=ie,J=ye,ie=tt,ye=le,tt=Oe,Oe=bt+U|0,le=Ct+he+(Oe>>>0<bt>>>0?1:0)|0,Ct=ft,bt=Tt,ft=Ke,Tt=Fe,Ke=Be,Fe=Se,Se=U+ve|0,Be=he+X+(Se>>>0<U>>>0?1:0)|0}Z=y.low=Z+Se,y.high=Q+Be+(Z>>>0<Se>>>0?1:0),te=v.low=te+Fe,v.high=me+Ke+(te>>>0<Fe>>>0?1:0),W=b.low=W+Tt,b.high=H+ft+(W>>>0<Tt>>>0?1:0),oe=E.low=oe+bt,E.high=re+Ct+(oe>>>0<bt>>>0?1:0),q=_.low=q+Oe,_.high=V+le+(q>>>0<Oe>>>0?1:0),ee=k.low=ee+tt,k.high=Y+ye+(ee>>>0<tt>>>0?1:0),ne=D.low=ne+ie,D.high=de+J+(ne>>>0<ie>>>0?1:0),pe=N.low=pe+Ne,N.high=fe+We+(pe>>>0<Ne>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:s(function(){var m=r.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=r._createHelper(p),e.HmacSHA512=r._createHmacHelper(p)}(),t.SHA512})});var Qge=G((TN,Mge)=>{f();(function(t,e,n){typeof TN=="object"?Mge.exports=TN=e(Bi(),Yk(),vJ()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(TN,function(t){return function(){var e=t,n=e.x64,r=n.Word,i=n.WordArray,o=e.algo,a=o.SHA512,l=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c},"_doFinalize")});e.SHA384=a._createHelper(l),e.HmacSHA384=a._createHmacHelper(l)}(),t.SHA384})});var Uge=G((wN,Oge)=>{f();(function(t,e,n){typeof wN=="object"?Oge.exports=wN=e(Bi(),Yk()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(wN,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64,l=a.Word,c=n.algo,u=[],d=[],p=[];(function(){for(var g=1,y=0,v=0;v<24;v++){u[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,E=(2*g+3*y)%5;g=b,y=E}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var D=0,N=0,Q=0;Q<7;Q++){if(_&1){var Z=(1<<Q)-1;Z<32?N^=1<<Z:D^=1<<Z-32}_&128?_=_<<1^113:_<<=1}p[k]=l.create(D,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var v=this._state,b=this.blockSize/2,E=0;E<b;E++){var _=g[y+2*E],k=g[y+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var D=v[E];D.high^=k,D.low^=_}for(var N=0;N<24;N++){for(var Q=0;Q<5;Q++){for(var Z=0,me=0,te=0;te<5;te++){var D=v[Q+5*te];Z^=D.high,me^=D.low}var H=m[Q];H.high=Z,H.low=me}for(var Q=0;Q<5;Q++)for(var W=m[(Q+4)%5],re=m[(Q+1)%5],oe=re.high,V=re.low,Z=W.high^(oe<<1|V>>>31),me=W.low^(V<<1|oe>>>31),te=0;te<5;te++){var D=v[Q+5*te];D.high^=Z,D.low^=me}for(var q=1;q<25;q++){var Z,me,D=v[q],Y=D.high,ee=D.low,de=u[q];de<32?(Z=Y<<de|ee>>>32-de,me=ee<<de|Y>>>32-de):(Z=ee<<de-32|Y>>>64-de,me=Y<<de-32|ee>>>64-de);var ne=m[d[q]];ne.high=Z,ne.low=me}var fe=m[0],pe=v[0];fe.high=pe.high,fe.low=pe.low;for(var Q=0;Q<5;Q++)for(var te=0;te<5;te++){var q=Q+5*te,D=v[q],Be=m[q],Se=m[(Q+1)%5+5*te],Ke=m[(Q+2)%5+5*te];D.high=Be.high^~Se.high&Ke.high,D.low=Be.low^~Se.low&Ke.low}var D=v[0],Fe=p[N];D.high^=Fe.high,D.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,v=this._nDataBytes*8,b=g.sigBytes*8,E=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/E)*E>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,D=k/8,N=[],Q=0;Q<D;Q++){var Z=_[Q],me=Z.high,te=Z.low;me=(me<<8|me>>>24)&16711935|(me<<24|me>>>8)&4278255360,te=(te<<8|te>>>24)&16711935|(te<<24|te>>>8)&4278255360,N.push(te),N.push(me)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g},"clone")});n.SHA3=o._createHelper(h),n.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var Wge=G((_N,qge)=>{f();(function(t,e){typeof _N=="object"?qge.exports=_N=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(_N,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,D){for(var N=0;N<16;N++){var Q=D+N,Z=k[Q];k[Q]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360}var me=this._hash.words,te=p.words,H=m.words,W=l.words,re=c.words,oe=u.words,V=d.words,q,Y,ee,de,ne,fe,pe,Be,Se,Ke;fe=q=me[0],pe=Y=me[1],Be=ee=me[2],Se=de=me[3],Ke=ne=me[4];for(var Fe,N=0;N<80;N+=1)Fe=q+k[D+W[N]]|0,N<16?Fe+=g(Y,ee,de)+te[0]:N<32?Fe+=y(Y,ee,de)+te[1]:N<48?Fe+=v(Y,ee,de)+te[2]:N<64?Fe+=b(Y,ee,de)+te[3]:Fe+=E(Y,ee,de)+te[4],Fe=Fe|0,Fe=_(Fe,oe[N]),Fe=Fe+ne|0,q=ne,ne=de,de=_(ee,10),ee=Y,Y=Fe,Fe=fe+k[D+re[N]]|0,N<16?Fe+=E(pe,Be,Se)+H[0]:N<32?Fe+=b(pe,Be,Se)+H[1]:N<48?Fe+=v(pe,Be,Se)+H[2]:N<64?Fe+=y(pe,Be,Se)+H[3]:Fe+=g(pe,Be,Se)+H[4],Fe=Fe|0,Fe=_(Fe,V[N]),Fe=Fe+Ke|0,fe=Ke,Ke=Se,Se=_(Be,10),Be=pe,pe=Fe;Fe=me[1]+ee+Se|0,me[1]=me[2]+de+Ke|0,me[2]=me[3]+ne+fe|0,me[3]=me[4]+q+pe|0,me[4]=me[0]+Y+Be|0,me[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,D=k.words,N=this._nDataBytes*8,Q=k.sigBytes*8;D[Q>>>5]|=128<<24-Q%32,D[(Q+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(D.length+1)*4,this._process();for(var Z=this._hash,me=Z.words,te=0;te<5;te++){var H=me[te];me[te]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return Z},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,D,N){return k^D^N}s(g,"f1");function y(k,D,N){return k&D|~k&N}s(y,"f2");function v(k,D,N){return(k|~D)^N}s(v,"f3");function b(k,D,N){return k&N|D&~N}s(b,"f4");function E(k,D,N){return k^(D|~N)}s(E,"f5");function _(k,D){return k<<D|k>>>32-D}s(_,"rotl"),n.RIPEMD160=o._createHelper(h),n.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var RN=G((SN,Gge)=>{f();(function(t,e){typeof SN=="object"?Gge.exports=SN=e(Bi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(SN,function(t){(function(){var e=t,n=e.lib,r=n.Base,i=e.enc,o=i.Utf8,a=e.algo,l=a.HMAC=r.extend({init:s(function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,p=d*4;u.sigBytes>p&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,v=0;v<d;v++)g[v]^=1549556828,y[v]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var c=this._hasher;c.reset(),c.update(this._iKey)},"reset"),update:s(function(c){return this._hasher.update(c),this},"update"),finalize:s(function(c){var u=this._hasher,d=u.finalize(c);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var jge=G((kN,Hge)=>{f();(function(t,e,n){typeof kN=="object"?Hge.exports=kN=e(Bi(),bN(),RN()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(kN,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.SHA256,l=o.HMAC,c=o.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=l.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,v=g.words,b=p.keySize,E=p.iterations;y.length<b;){var _=m.update(d).finalize(g);m.reset();for(var k=_.words,D=k.length,N=_,Q=1;Q<E;Q++){N=m.finalize(N),m.reset();for(var Z=N.words,me=0;me<D;me++)k[me]^=Z[me]}h.concat(_),v[0]++}return h.sigBytes=b*4,h},"compute")});e.PBKDF2=function(u,d,p){return c.create(p).compute(u,d)}}(),t.PBKDF2})});var r1=G((BN,Vge)=>{f();(function(t,e,n){typeof BN=="object"?Vge.exports=BN=e(Bi(),xJ(),RN()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(BN,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.MD5,l=o.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(c){this.cfg=this.cfg.extend(c)},"init"),compute:s(function(c,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,v=p.iterations;g.length<y;){d&&m.update(d),d=m.update(c).finalize(u),m.reset();for(var b=1;b<v;b++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(c,u,d){return l.create(d).compute(c,u)}}(),t.EvpKDF})});var al=G((DN,$ge)=>{f();(function(t,e,n){typeof DN=="object"?$ge.exports=DN=e(Bi(),r1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(DN,function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,l=n.enc,c=l.Utf8,u=l.Base64,d=n.algo,p=d.EvpKDF,m=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,W){return this.create(this._ENC_XFORM_MODE,H,W)},"createEncryptor"),createDecryptor:s(function(H,W){return this.create(this._DEC_XFORM_MODE,H,W)},"createDecryptor"),init:s(function(H,W,re){this.cfg=this.cfg.extend(re),this._xformMode=H,this._key=W,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var W=this._doFinalize();return W},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(W){return typeof W=="string"?te:Q}return s(H,"selectCipherStrategy"),function(W){return{encrypt:s(function(re,oe,V){return H(oe).encrypt(W,re,oe,V)},"encrypt"),decrypt:s(function(re,oe,V){return H(oe).decrypt(W,re,oe,V)},"decrypt")}}}()}),h=r.StreamCipher=m.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=n.mode={},y=r.BlockCipherMode=i.extend({createEncryptor:s(function(H,W){return this.Encryptor.create(H,W)},"createEncryptor"),createDecryptor:s(function(H,W){return this.Decryptor.create(H,W)},"createDecryptor"),init:s(function(H,W){this._cipher=H,this._iv=W},"init")}),v=g.CBC=function(){var H=y.extend();H.Encryptor=H.extend({processBlock:s(function(re,oe){var V=this._cipher,q=V.blockSize;W.call(this,re,oe,q),V.encryptBlock(re,oe),this._prevBlock=re.slice(oe,oe+q)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(re,oe){var V=this._cipher,q=V.blockSize,Y=re.slice(oe,oe+q);V.decryptBlock(re,oe),W.call(this,re,oe,q),this._prevBlock=Y},"processBlock")});function W(re,oe,V){var q,Y=this._iv;Y?(q=Y,this._iv=e):q=this._prevBlock;for(var ee=0;ee<V;ee++)re[oe+ee]^=q[ee]}return s(W,"xorBlock"),H}(),b=n.pad={},E=b.Pkcs7={pad:s(function(H,W){for(var re=W*4,oe=re-H.sigBytes%re,V=oe<<24|oe<<16|oe<<8|oe,q=[],Y=0;Y<oe;Y+=4)q.push(V);var ee=o.create(q,oe);H.concat(ee)},"pad"),unpad:s(function(H){var W=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=W},"unpad")},_=r.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:E}),reset:s(function(){var H;m.reset.call(this);var W=this.cfg,re=W.iv,oe=W.mode;this._xformMode==this._ENC_XFORM_MODE?H=oe.createEncryptor:(H=oe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,re&&re.words):(this._mode=H.call(oe,this,re&&re.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,W){this._mode.processBlock(H,W)},"_doProcessBlock"),_doFinalize:s(function(){var H,W=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(W.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),W.unpad(H)),H},"_doFinalize"),blockSize:128/32}),k=r.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),D=n.format={},N=D.OpenSSL={stringify:s(function(H){var W,re=H.ciphertext,oe=H.salt;return oe?W=o.create([1398893684,1701076831]).concat(oe).concat(re):W=re,W.toString(u)},"stringify"),parse:s(function(H){var W,re=u.parse(H),oe=re.words;return oe[0]==1398893684&&oe[1]==1701076831&&(W=o.create(oe.slice(2,4)),oe.splice(0,4),re.sigBytes-=16),k.create({ciphertext:re,salt:W})},"parse")},Q=r.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(H,W,re,oe){oe=this.cfg.extend(oe);var V=H.createEncryptor(re,oe),q=V.finalize(W),Y=V.cfg;return k.create({ciphertext:q,key:re,iv:Y.iv,algorithm:H,mode:Y.mode,padding:Y.padding,blockSize:H.blockSize,formatter:oe.format})},"encrypt"),decrypt:s(function(H,W,re,oe){oe=this.cfg.extend(oe),W=this._parse(W,oe.format);var V=H.createDecryptor(re,oe).finalize(W.ciphertext);return V},"decrypt"),_parse:s(function(H,W){return typeof H=="string"?W.parse(H,this):H},"_parse")}),Z=n.kdf={},me=Z.OpenSSL={execute:s(function(H,W,re,oe,V){if(oe||(oe=o.random(64/8)),V)var q=p.create({keySize:W+re,hasher:V}).compute(H,oe);else var q=p.create({keySize:W+re}).compute(H,oe);var Y=o.create(q.words.slice(W),re*4);return q.sigBytes=W*4,k.create({key:q,iv:Y,salt:oe})},"execute")},te=r.PasswordBasedCipher=Q.extend({cfg:Q.cfg.extend({kdf:me}),encrypt:s(function(H,W,re,oe){oe=this.cfg.extend(oe);var V=oe.kdf.execute(re,H.keySize,H.ivSize,oe.salt,oe.hasher);oe.iv=V.iv;var q=Q.encrypt.call(this,H,W,V.key,oe);return q.mixIn(V),q},"encrypt"),decrypt:s(function(H,W,re,oe){oe=this.cfg.extend(oe),W=this._parse(W,oe.format);var V=oe.kdf.execute(re,H.keySize,H.ivSize,W.salt,oe.hasher);oe.iv=V.iv;var q=Q.decrypt.call(this,H,W,V.key,oe);return q},"decrypt")})}()})});var Yge=G((PN,zge)=>{f();(function(t,e,n){typeof PN=="object"?zge.exports=PN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(PN,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize;n.call(this,r,i,a,o),this._prevBlock=r.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=r.slice(i,i+a);n.call(this,r,i,a,o),this._prevBlock=l},"processBlock")});function n(r,i,o,a){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,a.encryptBlock(l,0);for(var u=0;u<o;u++)r[i+u]^=l[u]}return s(n,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var Jge=G((NN,Kge)=>{f();(function(t,e,n){typeof NN=="object"?Kge.exports=NN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(NN,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var u=c.slice(0);o.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var d=0;d<a;d++)r[i+d]^=u[d]},"processBlock")});return e.Decryptor=n,e}(),t.mode.CTR})});var Zge=G((LN,Xge)=>{f();(function(t,e,n){typeof LN=="object"?Xge.exports=LN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(LN,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(o){if((o>>24&255)===255){var a=o>>16&255,l=o>>8&255,c=o&255;a===255?(a=0,l===255?(l=0,c===255?c=0:++c):++l):++a,o=0,o+=a<<16,o+=l<<8,o+=c}else o+=1<<24;return o}s(n,"incWord");function r(o){return(o[0]=n(o[0]))===0&&(o[1]=n(o[1])),o}s(r,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),r(d);var p=d.slice(0);l.encryptBlock(p,0);for(var m=0;m<c;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var tAe=G((FN,eAe)=>{f();(function(t,e,n){typeof FN=="object"?eAe.exports=FN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(FN,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var u=0;u<a;u++)r[i+u]^=c[u]},"processBlock")});return e.Decryptor=n,e}(),t.mode.OFB})});var rAe=G((MN,nAe)=>{f();(function(t,e,n){typeof MN=="object"?nAe.exports=MN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(MN,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(n,r){this._cipher.encryptBlock(n,r)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,r){this._cipher.decryptBlock(n,r)},"processBlock")}),e}(),t.mode.ECB})});var oAe=G((QN,iAe)=>{f();(function(t,e,n){typeof QN=="object"?iAe.exports=QN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(QN,function(t){return t.pad.AnsiX923={pad:s(function(e,n){var r=e.sigBytes,i=n*4,o=i-r%i,a=r+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Ansix923})});var aAe=G((ON,sAe)=>{f();(function(t,e,n){typeof ON=="object"?sAe.exports=ON=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(ON,function(t){return t.pad.Iso10126={pad:s(function(e,n){var r=n*4,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Iso10126})});var cAe=G((UN,lAe)=>{f();(function(t,e,n){typeof UN=="object"?lAe.exports=UN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(UN,function(t){return t.pad.Iso97971={pad:s(function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var dAe=G((qN,uAe)=>{f();(function(t,e,n){typeof qN=="object"?uAe.exports=qN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(qN,function(t){return t.pad.ZeroPadding={pad:s(function(e,n){var r=n*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},"pad"),unpad:s(function(e){for(var n=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(n[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}},"unpad")},t.pad.ZeroPadding})});var pAe=G((WN,fAe)=>{f();(function(t,e,n){typeof WN=="object"?fAe.exports=WN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(WN,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var hAe=G((GN,mAe)=>{f();(function(t,e,n){typeof GN=="object"?mAe.exports=GN=e(Bi(),al()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(GN,function(t){return function(e){var n=t,r=n.lib,i=r.CipherParams,o=n.enc,a=o.Hex,l=n.format,c=l.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var AAe=G((HN,gAe)=>{f();(function(t,e,n){typeof HN=="object"?gAe.exports=HN=e(Bi(),ux(),dx(),r1(),al()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(HN,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var _=0,k=0,E=0;E<256;E++){var D=k^k<<1^k<<2^k<<3^k<<4;D=D>>>8^D&255^99,o[_]=D,a[D]=_;var N=b[_],Q=b[N],Z=b[Q],me=b[D]*257^D*16843008;l[_]=me<<24|me>>>8,c[_]=me<<16|me>>>16,u[_]=me<<8|me>>>24,d[_]=me;var me=Z*16843009^Q*65537^N*257^_*16843008;p[D]=me<<24|me>>>8,m[D]=me<<16|me>>>16,h[D]=me<<8|me>>>24,g[D]=me,_?(_=N^b[b[b[Z^N]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:s(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,k=E.sigBytes/4,D=this._nRounds=k+6,N=(D+1)*4,Q=this._keySchedule=[],Z=0;Z<N;Z++)Z<k?Q[Z]=_[Z]:(b=Q[Z-1],Z%k?k>6&&Z%k==4&&(b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255]):(b=b<<8|b>>>24,b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255],b^=y[Z/k|0]<<24),Q[Z]=Q[Z-k]^b);for(var me=this._invKeySchedule=[],te=0;te<N;te++){var Z=N-te;if(te%4)var b=Q[Z];else var b=Q[Z-4];te<4||Z<=4?me[te]=b:me[te]=p[o[b>>>24]]^m[o[b>>>16&255]]^h[o[b>>>8&255]]^g[o[b&255]]}}},"_doReset"),encryptBlock:s(function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,c,u,d,o)},"encryptBlock"),decryptBlock:s(function(b,E){var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_,this._doCryptBlock(b,E,this._invKeySchedule,p,m,h,g,a);var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_},"decryptBlock"),_doCryptBlock:s(function(b,E,_,k,D,N,Q,Z){for(var me=this._nRounds,te=b[E]^_[0],H=b[E+1]^_[1],W=b[E+2]^_[2],re=b[E+3]^_[3],oe=4,V=1;V<me;V++){var q=k[te>>>24]^D[H>>>16&255]^N[W>>>8&255]^Q[re&255]^_[oe++],Y=k[H>>>24]^D[W>>>16&255]^N[re>>>8&255]^Q[te&255]^_[oe++],ee=k[W>>>24]^D[re>>>16&255]^N[te>>>8&255]^Q[H&255]^_[oe++],de=k[re>>>24]^D[te>>>16&255]^N[H>>>8&255]^Q[W&255]^_[oe++];te=q,H=Y,W=ee,re=de}var q=(Z[te>>>24]<<24|Z[H>>>16&255]<<16|Z[W>>>8&255]<<8|Z[re&255])^_[oe++],Y=(Z[H>>>24]<<24|Z[W>>>16&255]<<16|Z[re>>>8&255]<<8|Z[te&255])^_[oe++],ee=(Z[W>>>24]<<24|Z[re>>>16&255]<<16|Z[te>>>8&255]<<8|Z[H&255])^_[oe++],de=(Z[re>>>24]<<24|Z[te>>>16&255]<<16|Z[H>>>8&255]<<8|Z[W&255])^_[oe++];b[E]=q,b[E+1]=Y,b[E+2]=ee,b[E+3]=de},"_doCryptBlock"),keySize:256/32});e.AES=r._createHelper(v)}(),t.AES})});var CAe=G((jN,yAe)=>{f();(function(t,e,n){typeof jN=="object"?yAe.exports=jN=e(Bi(),ux(),dx(),r1(),al()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(jN,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,v=y.words,b=[],E=0;E<56;E++){var _=a[E]-1;b[E]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],D=0;D<16;D++){for(var N=k[D]=[],Q=c[D],E=0;E<24;E++)N[E/6|0]|=b[(l[E]-1+Q)%28]<<31-E%6,N[4+(E/6|0)]|=b[28+(l[E+24]-1+Q)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var Z=this._invSubKeys=[],E=0;E<16;E++)Z[E]=k[15-E]},"_doReset"),encryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=b[E],k=this._lBlock,D=this._rBlock,N=0,Q=0;Q<8;Q++)N|=u[Q][((D^_[Q])&d[Q])>>>0];this._lBlock=D,this._rBlock=k^N}var Z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Z,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}s(m,"exchangeLR");function h(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=p.createEncryptor(r.create(b)),this._des2=p.createEncryptor(r.create(E)),this._des3=p.createEncryptor(r.create(_))},"_doReset"),encryptBlock:s(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:s(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var vAe=G((VN,xAe)=>{f();(function(t,e,n){typeof VN=="object"?xAe.exports=VN=e(Bi(),ux(),dx(),r1(),al()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(VN,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=i.RC4=r.extend({_doReset:s(function(){for(var c=this._key,u=c.words,d=c.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var v=p[m];p[m]=p[h],p[h]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(c,u){c[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+c[u])%256;var h=c[u];c[u]=c[d],c[d]=h,p|=c[(c[u]+c[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=r._createHelper(o);var l=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)},"_doReset")});e.RC4Drop=r._createHelper(l)}(),t.RC4})});var EAe=G(($N,bAe)=>{f();(function(t,e,n){typeof $N=="object"?bAe.exports=$N=e(Bi(),ux(),dx(),r1(),al()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})($N,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.Rabbit=r.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,D=_<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=_,g[3]^=D,g[4]^=E,g[5]^=k,g[6]^=_,g[7]^=D;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.Rabbit=r._createHelper(c)}(),t.Rabbit})});var TAe=G((zN,IAe)=>{f();(function(t,e,n){typeof zN=="object"?IAe.exports=zN=e(Bi(),ux(),dx(),r1(),al()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(zN,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.RabbitLegacy=r.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,D=_<<16|E&65535;h[0]^=E,h[1]^=k,h[2]^=_,h[3]^=D,h[4]^=E,h[5]^=k,h[6]^=_,h[7]^=D;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.RabbitLegacy=r._createHelper(c)}(),t.RabbitLegacy})});var _Ae=G((YN,wAe)=>{f();(function(t,e,n){typeof YN=="object"?wAe.exports=YN=e(Bi(),ux(),dx(),r1(),al()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(YN,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(g,y){let v=y>>24&255,b=y>>16&255,E=y>>8&255,_=y&255,k=g.sbox[0][v]+g.sbox[1][b];return k=k^g.sbox[2][E],k=k+g.sbox[3][_],k}s(u,"F");function d(g,y,v){let b=y,E=v,_;for(let k=0;k<o;++k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[o],b=b^g.pbox[o+1],{left:b,right:E}}s(d,"BlowFish_Encrypt");function p(g,y,v){let b=y,E=v,_;for(let k=o+1;k>1;--k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[1],b=b^g.pbox[0],{left:b,right:E}}s(p,"BlowFish_Decrypt");function m(g,y,v){for(let D=0;D<4;D++){g.sbox[D]=[];for(let N=0;N<256;N++)g.sbox[D][N]=l[D][N]}let b=0;for(let D=0;D<o+2;D++)g.pbox[D]=a[D]^y[b],b++,b>=v&&(b=0);let E=0,_=0,k=0;for(let D=0;D<o+2;D+=2)k=d(g,E,_),E=k.left,_=k.right,g.pbox[D]=E,g.pbox[D+1]=_;for(let D=0;D<4;D++)for(let N=0;N<256;N+=2)k=d(g,E,_),E=k.left,_=k.right,g.sbox[D][N]=E,g.sbox[D][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=r.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;m(c,y,v)}},"_doReset"),encryptBlock:s(function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"encryptBlock"),decryptBlock:s(function(g,y){var v=p(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(h)}(),t.Blowfish})});var fx=G((KN,SAe)=>{f();(function(t,e,n){typeof KN=="object"?SAe.exports=KN=e(Bi(),Yk(),Tge(),_ge(),ux(),kge(),dx(),xJ(),bN(),Lge(),vJ(),Qge(),Uge(),Wge(),RN(),jge(),r1(),al(),Yge(),Jge(),Zge(),tAe(),rAe(),oAe(),aAe(),cAe(),dAe(),pAe(),hAe(),AAe(),CAe(),vAe(),EAe(),TAe(),_Ae()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(KN,function(t){return t})});var V_=G(Mc=>{"use strict";f();Object.defineProperty(Mc,"__esModule",{value:!0});Mc.stringArray=Mc.array=Mc.func=Mc.error=Mc.number=Mc.string=Mc.boolean=void 0;function Vit(t){return t===!0||t===!1}s(Vit,"boolean");Mc.boolean=Vit;function lCe(t){return typeof t=="string"||t instanceof String}s(lCe,"string");Mc.string=lCe;function $it(t){return typeof t=="number"||t instanceof Number}s($it,"number");Mc.number=$it;function zit(t){return t instanceof Error}s(zit,"error");Mc.error=zit;function Yit(t){return typeof t=="function"}s(Yit,"func");Mc.func=Yit;function cCe(t){return Array.isArray(t)}s(cCe,"array");Mc.array=cCe;function Kit(t){return cCe(t)&&t.every(e=>lCe(e))}s(Kit,"stringArray");Mc.stringArray=Kit});var $X=G(Hn=>{"use strict";f();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Message=Hn.NotificationType9=Hn.NotificationType8=Hn.NotificationType7=Hn.NotificationType6=Hn.NotificationType5=Hn.NotificationType4=Hn.NotificationType3=Hn.NotificationType2=Hn.NotificationType1=Hn.NotificationType0=Hn.NotificationType=Hn.RequestType9=Hn.RequestType8=Hn.RequestType7=Hn.RequestType6=Hn.RequestType5=Hn.RequestType4=Hn.RequestType3=Hn.RequestType2=Hn.RequestType1=Hn.RequestType=Hn.RequestType0=Hn.AbstractMessageSignature=Hn.ParameterStructures=Hn.ResponseError=Hn.ErrorCodes=void 0;var nI=V_(),EX;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(EX||(Hn.ErrorCodes=EX={}));var IX=class t extends Error{static{s(this,"ResponseError")}constructor(e,n,r){super(n),this.code=nI.number(e)?e:EX.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Hn.ResponseError=IX;var od=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Hn.ParameterStructures=od;od.auto=new od("auto");od.byPosition=new od("byPosition");od.byName=new od("byName");var ps=class{static{s(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return od.auto}};Hn.AbstractMessageSignature=ps;var TX=class extends ps{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Hn.RequestType0=TX;var wX=class extends ps{static{s(this,"RequestType")}constructor(e,n=od.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.RequestType=wX;var _X=class extends ps{static{s(this,"RequestType1")}constructor(e,n=od.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.RequestType1=_X;var SX=class extends ps{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Hn.RequestType2=SX;var RX=class extends ps{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Hn.RequestType3=RX;var kX=class extends ps{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Hn.RequestType4=kX;var BX=class extends ps{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Hn.RequestType5=BX;var DX=class extends ps{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Hn.RequestType6=DX;var PX=class extends ps{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Hn.RequestType7=PX;var NX=class extends ps{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Hn.RequestType8=NX;var LX=class extends ps{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Hn.RequestType9=LX;var FX=class extends ps{static{s(this,"NotificationType")}constructor(e,n=od.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.NotificationType=FX;var MX=class extends ps{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Hn.NotificationType0=MX;var QX=class extends ps{static{s(this,"NotificationType1")}constructor(e,n=od.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.NotificationType1=QX;var OX=class extends ps{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Hn.NotificationType2=OX;var UX=class extends ps{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Hn.NotificationType3=UX;var qX=class extends ps{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Hn.NotificationType4=qX;var WX=class extends ps{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Hn.NotificationType5=WX;var GX=class extends ps{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Hn.NotificationType6=GX;var HX=class extends ps{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Hn.NotificationType7=HX;var jX=class extends ps{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Hn.NotificationType8=jX;var VX=class extends ps{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Hn.NotificationType9=VX;var uCe;(function(t){function e(i){let o=i;return o&&nI.string(o.method)&&(nI.string(o.id)||nI.number(o.id))}s(e,"isRequest"),t.isRequest=e;function n(i){let o=i;return o&&nI.string(o.method)&&i.id===void 0}s(n,"isNotification"),t.isNotification=n;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(nI.string(o.id)||nI.number(o.id)||o.id===null)}s(r,"isResponse"),t.isResponse=r})(uCe||(Hn.Message=uCe={}))});var YX=G(Ex=>{"use strict";f();var dCe;Object.defineProperty(Ex,"__esModule",{value:!0});Ex.LRUCache=Ex.LinkedMap=Ex.Touch=void 0;var Qc;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Qc||(Ex.Touch=Qc={}));var PL=class{static{s(this,"LinkedMap")}constructor(){this[dCe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Qc.None){let r=this._map.get(e);if(r)return n!==Qc.None&&this.touch(r,n),r.value}set(e,n,r=Qc.None){let i=this._map.get(e);if(i)i.value=n,r!==Qc.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Qc.None:this.addItemLast(i);break;case Qc.First:this.addItemFirst(i);break;case Qc.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}[(dCe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Qc.First&&n!==Qc.Last)){if(n===Qc.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Qc.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Ex.LinkedMap=PL;var zX=class extends PL{static{s(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Qc.AsNew){return super.get(e,n)}peek(e){return super.get(e,Qc.None)}set(e,n){return super.set(e,n,Qc.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Ex.LRUCache=zX});var pCe=G(NL=>{"use strict";f();Object.defineProperty(NL,"__esModule",{value:!0});NL.Disposable=void 0;var fCe;(function(t){function e(n){return{dispose:n}}s(e,"create"),t.create=e})(fCe||(NL.Disposable=fCe={}))});var Ix=G(XX=>{"use strict";f();Object.defineProperty(XX,"__esModule",{value:!0});var KX;function JX(){if(KX===void 0)throw new Error("No runtime abstraction layer installed");return KX}s(JX,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");KX=n}s(e,"install"),t.install=e})(JX||(JX={}));XX.default=JX});var z_=G($_=>{"use strict";f();Object.defineProperty($_,"__esModule",{value:!0});$_.Emitter=$_.Event=void 0;var Jit=Ix(),mCe;(function(t){let e={dispose(){}};t.None=function(){return e}})(mCe||($_.Event=mCe={}));var ZX=class{static{s(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:s(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=r.length;o<a;o++)try{n.push(r[o].apply(i[o],e))}catch(l){(0,Jit.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},LL=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new ZX),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};$_.Emitter=LL;LL._noop=function(){}});var QL=G(Y_=>{"use strict";f();Object.defineProperty(Y_,"__esModule",{value:!0});Y_.CancellationTokenSource=Y_.CancellationToken=void 0;var Xit=Ix(),Zit=V_(),eZ=z_(),FL;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:eZ.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:eZ.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Zit.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}s(e,"is"),t.is=e})(FL||(Y_.CancellationToken=FL={}));var eot=Object.freeze(function(t,e){let n=(0,Xit.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),ML=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?eot:(this._emitter||(this._emitter=new eZ.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},tZ=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new ML),this._token}cancel(){this._token?this._token.cancel():this._token=FL.Cancelled}dispose(){this._token?this._token instanceof ML&&this._token.dispose():this._token=FL.None}};Y_.CancellationTokenSource=tZ});var hCe=G(K_=>{"use strict";f();Object.defineProperty(K_,"__esModule",{value:!0});K_.SharedArrayReceiverStrategy=K_.SharedArraySenderStrategy=void 0;var tot=QL(),gB;(function(t){t.Continue=0,t.Cancelled=1})(gB||(gB={}));var nZ=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=gB.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,gB.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};K_.SharedArraySenderStrategy=nZ;var rZ=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===gB.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},iZ=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new rZ(e)}cancel(){}dispose(){}},oZ=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new tot.CancellationTokenSource:new iZ(n)}};K_.SharedArrayReceiverStrategy=oZ});var aZ=G(OL=>{"use strict";f();Object.defineProperty(OL,"__esModule",{value:!0});OL.Semaphore=void 0;var not=Ix(),sZ=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,not.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};OL.Semaphore=sZ});var ACe=G(Tx=>{"use strict";f();Object.defineProperty(Tx,"__esModule",{value:!0});Tx.ReadableStreamMessageReader=Tx.AbstractMessageReader=Tx.MessageReader=void 0;var cZ=Ix(),J_=V_(),lZ=z_(),rot=aZ(),gCe;(function(t){function e(n){let r=n;return r&&J_.func(r.listen)&&J_.func(r.dispose)&&J_.func(r.onError)&&J_.func(r.onClose)&&J_.func(r.onPartialMessage)}s(e,"is"),t.is=e})(gCe||(Tx.MessageReader=gCe={}));var UL=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new lZ.Emitter,this.closeEmitter=new lZ.Emitter,this.partialMessageEmitter=new lZ.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${J_.string(e.message)?e.message:"unknown"}`)}};Tx.AbstractMessageReader=UL;var uZ;(function(t){function e(n){let r,i,o,a=new Map,l,c=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,a.set(o.name,o)),n.contentDecoders!==void 0)for(let u of n.contentDecoders)a.set(u.name,u);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,c.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let u of n.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=(0,cZ.default)().applicationJson.decoder,c.set(l.name,l)),{charset:r,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:c}}s(e,"fromOptions"),t.fromOptions=e})(uZ||(uZ={}));var dZ=class extends UL{static{s(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=uZ.fromOptions(n),this.buffer=(0,cZ.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new rot.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,cZ.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Tx.ReadableStreamMessageReader=dZ});var bCe=G(wx=>{"use strict";f();Object.defineProperty(wx,"__esModule",{value:!0});wx.WriteableStreamMessageWriter=wx.AbstractMessageWriter=wx.MessageWriter=void 0;var yCe=Ix(),AB=V_(),iot=aZ(),CCe=z_(),oot="Content-Length: ",xCe=`\r
`,vCe;(function(t){function e(n){let r=n;return r&&AB.func(r.dispose)&&AB.func(r.onClose)&&AB.func(r.onError)&&AB.func(r.write)}s(e,"is"),t.is=e})(vCe||(wx.MessageWriter=vCe={}));var qL=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new CCe.Emitter,this.closeEmitter=new CCe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${AB.string(e.message)?e.message:"unknown"}`)}};wx.AbstractMessageWriter=qL;var fZ;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,yCe.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,yCe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(fZ||(fZ={}));var pZ=class extends qL{static{s(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=fZ.fromOptions(n),this.errorCount=0,this.writeSemaphore=new iot.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(oot,r.byteLength.toString(),xCe),i.push(xCe),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};wx.WriteableStreamMessageWriter=pZ});var ECe=G(WL=>{"use strict";f();Object.defineProperty(WL,"__esModule",{value:!0});WL.AbstractMessageBuffer=void 0;var sot=13,aot=10,lot=`\r
`,mZ=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let u=this._chunks[r];for(i=0;i<u.length;){switch(u[i]){case sot:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case aot:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}o+=u.byteLength,r++}if(n!==4)return;let a=this._read(o+i),l=new Map,c=this.toString(a,"ascii").split(lot);if(c.length<2)return l;for(let u=0;u<c.length-2;u++){let d=c[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();l.set(e?m.toLowerCase():m,h)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);n.set(a,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};WL.AbstractMessageBuffer=mZ});var SCe=G(Xr=>{"use strict";f();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.createMessageConnection=Xr.ConnectionOptions=Xr.MessageStrategy=Xr.CancellationStrategy=Xr.CancellationSenderStrategy=Xr.CancellationReceiverStrategy=Xr.RequestCancellationReceiverStrategy=Xr.IdCancellationReceiverStrategy=Xr.ConnectionStrategy=Xr.ConnectionError=Xr.ConnectionErrors=Xr.LogTraceNotification=Xr.SetTraceNotification=Xr.TraceFormat=Xr.TraceValues=Xr.Trace=Xr.NullLogger=Xr.ProgressType=Xr.ProgressToken=void 0;var ICe=Ix(),Vs=V_(),_r=$X(),TCe=YX(),yB=z_(),hZ=QL(),vB;(function(t){t.type=new _r.NotificationType("$/cancelRequest")})(vB||(vB={}));var gZ;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}s(e,"is"),t.is=e})(gZ||(Xr.ProgressToken=gZ={}));var CB;(function(t){t.type=new _r.NotificationType("$/progress")})(CB||(CB={}));var AZ=class{static{s(this,"ProgressType")}constructor(){}};Xr.ProgressType=AZ;var yZ;(function(t){function e(n){return Vs.func(n)}s(e,"is"),t.is=e})(yZ||(yZ={}));Xr.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var ho;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(ho||(Xr.Trace=ho={}));var wCe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(wCe||(Xr.TraceValues=wCe={}));(function(t){function e(r){if(!Vs.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(n,"toString"),t.toString=n})(ho||(Xr.Trace=ho={}));var o0;(function(t){t.Text="text",t.JSON="json"})(o0||(Xr.TraceFormat=o0={}));(function(t){function e(n){return Vs.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(o0||(Xr.TraceFormat=o0={}));var CZ;(function(t){t.type=new _r.NotificationType("$/setTrace")})(CZ||(Xr.SetTraceNotification=CZ={}));var GL;(function(t){t.type=new _r.NotificationType("$/logTrace")})(GL||(Xr.LogTraceNotification=GL={}));var xB;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(xB||(Xr.ConnectionErrors=xB={}));var X_=class t extends Error{static{s(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Xr.ConnectionError=X_;var xZ;(function(t){function e(n){let r=n;return r&&Vs.func(r.cancelUndispatched)}s(e,"is"),t.is=e})(xZ||(Xr.ConnectionStrategy=xZ={}));var HL;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Vs.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Vs.func(r.dispose))}s(e,"is"),t.is=e})(HL||(Xr.IdCancellationReceiverStrategy=HL={}));var vZ;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Vs.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Vs.func(r.dispose))}s(e,"is"),t.is=e})(vZ||(Xr.RequestCancellationReceiverStrategy=vZ={}));var jL;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new hZ.CancellationTokenSource}});function e(n){return HL.is(n)||vZ.is(n)}s(e,"is"),t.is=e})(jL||(Xr.CancellationReceiverStrategy=jL={}));var VL;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(vB.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Vs.func(r.sendCancellation)&&Vs.func(r.cleanup)}s(e,"is"),t.is=e})(VL||(Xr.CancellationSenderStrategy=VL={}));var $L;(function(t){t.Message=Object.freeze({receiver:jL.Message,sender:VL.Message});function e(n){let r=n;return r&&jL.is(r.receiver)&&VL.is(r.sender)}s(e,"is"),t.is=e})($L||(Xr.CancellationStrategy=$L={}));var zL;(function(t){function e(n){let r=n;return r&&Vs.func(r.handleMessage)}s(e,"is"),t.is=e})(zL||(Xr.MessageStrategy=zL={}));var _Ce;(function(t){function e(n){let r=n;return r&&($L.is(r.cancellationStrategy)||xZ.is(r.connectionStrategy)||zL.is(r.messageStrategy))}s(e,"is"),t.is=e})(_Ce||(Xr.ConnectionOptions=_Ce={}));var um;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(um||(um={}));function cot(t,e,n,r){let i=n!==void 0?n:Xr.NullLogger,o=0,a=0,l=0,c="2.0",u,d=new Map,p,m=new Map,h=new Map,g,y=new TCe.LinkedMap,v=new Map,b=new Set,E=new Map,_=ho.Off,k=o0.Text,D,N=um.New,Q=new yB.Emitter,Z=new yB.Emitter,me=new yB.Emitter,te=new yB.Emitter,H=new yB.Emitter,W=r&&r.cancellationStrategy?r.cancellationStrategy:$L.Message;function re(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(re,"createRequestQueueKey");function oe(Ae){return Ae===null?"res-unknown-"+(++l).toString():"res-"+Ae.toString()}s(oe,"createResponseQueueKey");function V(){return"not-"+(++a).toString()}s(V,"createNotificationQueueKey");function q(Ae,Ge){_r.Message.isRequest(Ge)?Ae.set(re(Ge.id),Ge):_r.Message.isResponse(Ge)?Ae.set(oe(Ge.id),Ge):Ae.set(V(),Ge)}s(q,"addMessageToQueue");function Y(Ae){}s(Y,"cancelUndispatched");function ee(){return N===um.Listening}s(ee,"isListening");function de(){return N===um.Closed}s(de,"isClosed");function ne(){return N===um.Disposed}s(ne,"isDisposed");function fe(){(N===um.New||N===um.Listening)&&(N=um.Closed,Z.fire(void 0))}s(fe,"closeHandler");function pe(Ae){Q.fire([Ae,void 0,void 0])}s(pe,"readErrorHandler");function Be(Ae){Q.fire(Ae)}s(Be,"writeErrorHandler"),t.onClose(fe),t.onError(pe),e.onClose(fe),e.onError(Be);function Se(){g||y.size===0||(g=(0,ICe.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(Se,"triggerMessageQueue");function Ke(Ae){_r.Message.isRequest(Ae)?Tt(Ae):_r.Message.isNotification(Ae)?bt(Ae):_r.Message.isResponse(Ae)?Ct(Ae):le(Ae)}s(Ke,"handleMessage");function Fe(){if(y.size===0)return;let Ae=y.shift();try{let Ge=r?.messageStrategy;zL.is(Ge)?Ge.handleMessage(Ae,Ke):Ke(Ae)}finally{Se()}}s(Fe,"processMessageQueue");let ft=s(Ae=>{try{if(_r.Message.isNotification(Ae)&&Ae.method===vB.type.method){let Ge=Ae.params.id,ut=re(Ge),yt=y.get(ut);if(_r.Message.isRequest(yt)){let Gt=r?.connectionStrategy,yn=Gt&&Gt.cancelUndispatched?Gt.cancelUndispatched(yt,Y):void 0;if(yn&&(yn.error!==void 0||yn.result!==void 0)){y.delete(ut),E.delete(Ge),yn.id=yt.id,J(yn,Ae.method,Date.now()),e.write(yn).catch(()=>i.error("Sending response for canceled message failed."));return}}let Xt=E.get(Ge);if(Xt!==void 0){Xt.cancel(),We(Ae);return}else b.add(Ge)}q(y,Ae)}finally{Se()}},"callback");function Tt(Ae){if(ne())return;function Ge(jt,nn,Jt){let Tn={jsonrpc:c,id:Ae.id};jt instanceof _r.ResponseError?Tn.error=jt.toJson():Tn.result=jt===void 0?null:jt,J(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ut(jt,nn,Jt){let Tn={jsonrpc:c,id:Ae.id,error:jt.toJson()};J(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(ut,"replyError");function yt(jt,nn,Jt){jt===void 0&&(jt=null);let Tn={jsonrpc:c,id:Ae.id,result:jt};J(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(yt,"replySuccess"),ie(Ae);let Xt=d.get(Ae.method),Gt,yn;Xt&&(Gt=Xt.type,yn=Xt.handler);let vn=Date.now();if(yn||u){let jt=Ae.id??String(Date.now()),nn=HL.is(W.receiver)?W.receiver.createCancellationTokenSource(jt):W.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&b.has(Ae.id)&&nn.cancel(),Ae.id!==null&&E.set(jt,nn);try{let Jt;if(yn)if(Ae.params===void 0){if(Gt!==void 0&&Gt.numberOfParams!==0){ut(new _r.ResponseError(_r.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Gt.numberOfParams} params but received none.`),Ae.method,vn);return}Jt=yn(nn.token)}else if(Array.isArray(Ae.params)){if(Gt!==void 0&&Gt.parameterStructures===_r.ParameterStructures.byName){ut(new _r.ResponseError(_r.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,vn);return}Jt=yn(...Ae.params,nn.token)}else{if(Gt!==void 0&&Gt.parameterStructures===_r.ParameterStructures.byPosition){ut(new _r.ResponseError(_r.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,vn);return}Jt=yn(Ae.params,nn.token)}else u&&(Jt=u(Ae.method,Ae.params,nn.token));let Tn=Jt;Jt?Tn.then?Tn.then(Nn=>{E.delete(jt),Ge(Nn,Ae.method,vn)},Nn=>{E.delete(jt),Nn instanceof _r.ResponseError?ut(Nn,Ae.method,vn):Nn&&Vs.string(Nn.message)?ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Nn.message}`),Ae.method,vn):ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}):(E.delete(jt),Ge(Jt,Ae.method,vn)):(E.delete(jt),yt(Jt,Ae.method,vn))}catch(Jt){E.delete(jt),Jt instanceof _r.ResponseError?Ge(Jt,Ae.method,vn):Jt&&Vs.string(Jt.message)?ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Jt.message}`),Ae.method,vn):ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}}else ut(new _r.ResponseError(_r.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,vn)}s(Tt,"handleRequest");function Ct(Ae){if(!ne())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ut=v.get(Ge);if(Ne(Ae,ut),ut!==void 0){v.delete(Ge);try{if(Ae.error){let yt=Ae.error;ut.reject(new _r.ResponseError(yt.code,yt.message,yt.data))}else if(Ae.result!==void 0)ut.resolve(Ae.result);else throw new Error("Should never happen.")}catch(yt){yt.message?i.error(`Response handler '${ut.method}' failed with message: ${yt.message}`):i.error(`Response handler '${ut.method}' failed unexpectedly.`)}}}}s(Ct,"handleResponse");function bt(Ae){if(ne())return;let Ge,ut;if(Ae.method===vB.type.method){let yt=Ae.params.id;b.delete(yt),We(Ae);return}else{let yt=m.get(Ae.method);yt&&(ut=yt.handler,Ge=yt.type)}if(ut||p)try{if(We(Ae),ut)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==_r.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ut();else if(Array.isArray(Ae.params)){let yt=Ae.params;Ae.method===CB.type.method&&yt.length===2&&gZ.is(yt[0])?ut({token:yt[0],value:yt[1]}):(Ge!==void 0&&(Ge.parameterStructures===_r.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${yt.length} arguments`)),ut(...yt))}else Ge!==void 0&&Ge.parameterStructures===_r.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ut(Ae.params);else p&&p(Ae.method,Ae.params)}catch(yt){yt.message?i.error(`Notification handler '${Ae.method}' failed with message: ${yt.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else me.fire(Ae)}s(bt,"handleNotification");function le(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(Vs.string(Ge.id)||Vs.number(Ge.id)){let ut=Ge.id,yt=v.get(ut);yt&&yt.reject(new Error("The received response has neither a result nor an error property."))}}s(le,"handleInvalidMessage");function Oe(Ae){if(Ae!=null)switch(_){case ho.Verbose:return JSON.stringify(Ae,null,4);case ho.Compact:return JSON.stringify(Ae);default:return}}s(Oe,"stringifyTrace");function ye(Ae){if(!(_===ho.Off||!D))if(k===o0.Text){let Ge;(_===ho.Verbose||_===ho.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),D.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("send-request",Ae)}s(ye,"traceSendingRequest");function tt(Ae){if(!(_===ho.Off||!D))if(k===o0.Text){let Ge;(_===ho.Verbose||_===ho.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),D.log(`Sending notification '${Ae.method}'.`,Ge)}else be("send-notification",Ae)}s(tt,"traceSendingNotification");function J(Ae,Ge,ut){if(!(_===ho.Off||!D))if(k===o0.Text){let yt;(_===ho.Verbose||_===ho.Compact)&&(Ae.error&&Ae.error.data?yt=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?yt=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(yt=`No result returned.

`)),D.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ut}ms`,yt)}else be("send-response",Ae)}s(J,"traceSendingResponse");function ie(Ae){if(!(_===ho.Off||!D))if(k===o0.Text){let Ge;(_===ho.Verbose||_===ho.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),D.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("receive-request",Ae)}s(ie,"traceReceivedRequest");function We(Ae){if(!(_===ho.Off||!D||Ae.method===GL.type.method))if(k===o0.Text){let Ge;(_===ho.Verbose||_===ho.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),D.log(`Received notification '${Ae.method}'.`,Ge)}else be("receive-notification",Ae)}s(We,"traceReceivedNotification");function Ne(Ae,Ge){if(!(_===ho.Off||!D))if(k===o0.Text){let ut;if((_===ho.Verbose||_===ho.Compact)&&(Ae.error&&Ae.error.data?ut=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?ut=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(ut=`No result returned.

`)),Ge){let yt=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";D.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${yt}`,ut)}else D.log(`Received response ${Ae.id} without active response promise.`,ut)}else be("receive-response",Ae)}s(Ne,"traceReceivedResponse");function be(Ae,Ge){if(!D||_===ho.Off)return;let ut={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};D.log(ut)}s(be,"logLSPMessage");function ze(){if(de())throw new X_(xB.Closed,"Connection is closed.");if(ne())throw new X_(xB.Disposed,"Connection is disposed.")}s(ze,"throwIfClosedOrDisposed");function it(){if(ee())throw new X_(xB.AlreadyListening,"Connection is already listening")}s(it,"throwIfListening");function gt(){if(!ee())throw new Error("Call listen() first.")}s(gt,"throwIfNotListening");function Ot(Ae){return Ae===void 0?null:Ae}s(Ot,"undefinedToNull");function cn(Ae){if(Ae!==null)return Ae}s(cn,"nullToUndefined");function Lt(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Lt,"isNamedParam");function Gn(Ae,Ge){switch(Ae){case _r.ParameterStructures.auto:return Lt(Ge)?cn(Ge):[Ot(Ge)];case _r.ParameterStructures.byName:if(!Lt(Ge))throw new Error("Received parameters by name but param is not an object literal.");return cn(Ge);case _r.ParameterStructures.byPosition:return[Ot(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Gn,"computeSingleParam");function Yn(Ae,Ge){let ut,yt=Ae.numberOfParams;switch(yt){case 0:ut=void 0;break;case 1:ut=Gn(Ae.parameterStructures,Ge[0]);break;default:ut=[];for(let Xt=0;Xt<Ge.length&&Xt<yt;Xt++)ut.push(Ot(Ge[Xt]));if(Ge.length<yt)for(let Xt=Ge.length;Xt<yt;Xt++)ut.push(null);break}return ut}s(Yn,"computeMessageParams");let fr={sendNotification:s((Ae,...Ge)=>{ze();let ut,yt;if(Vs.string(Ae)){ut=Ae;let Gt=Ge[0],yn=0,vn=_r.ParameterStructures.auto;_r.ParameterStructures.is(Gt)&&(yn=1,vn=Gt);let jt=Ge.length,nn=jt-yn;switch(nn){case 0:yt=void 0;break;case 1:yt=Gn(vn,Ge[yn]);break;default:if(vn===_r.ParameterStructures.byName)throw new Error(`Received ${nn} parameters for 'by Name' notification parameter structure.`);yt=Ge.slice(yn,jt).map(Jt=>Ot(Jt));break}}else{let Gt=Ge;ut=Ae.method,yt=Yn(Ae,Gt)}let Xt={jsonrpc:c,method:ut,params:yt};return tt(Xt),e.write(Xt).catch(Gt=>{throw i.error("Sending notification failed."),Gt})},"sendNotification"),onNotification:s((Ae,Ge)=>{ze();let ut;return Vs.func(Ae)?p=Ae:Ge&&(Vs.string(Ae)?(ut=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ut=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ut!==void 0?m.delete(ut):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ut)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ut),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ut)=>fr.sendNotification(CB.type,{token:Ge,value:ut}),"sendProgress"),onUnhandledProgress:te.event,sendRequest:s((Ae,...Ge)=>{ze(),gt();let ut,yt,Xt;if(Vs.string(Ae)){ut=Ae;let jt=Ge[0],nn=Ge[Ge.length-1],Jt=0,Tn=_r.ParameterStructures.auto;_r.ParameterStructures.is(jt)&&(Jt=1,Tn=jt);let Nn=Ge.length;hZ.CancellationToken.is(nn)&&(Nn=Nn-1,Xt=nn);let Kn=Nn-Jt;switch(Kn){case 0:yt=void 0;break;case 1:yt=Gn(Tn,Ge[Jt]);break;default:if(Tn===_r.ParameterStructures.byName)throw new Error(`Received ${Kn} parameters for 'by Name' request parameter structure.`);yt=Ge.slice(Jt,Nn).map(qr=>Ot(qr));break}}else{let jt=Ge;ut=Ae.method,yt=Yn(Ae,jt);let nn=Ae.numberOfParams;Xt=hZ.CancellationToken.is(jt[nn])?jt[nn]:void 0}let Gt=o++,yn;Xt&&(yn=Xt.onCancellationRequested(()=>{let jt=W.sender.sendCancellation(fr,Gt);return jt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Gt}`),Promise.resolve()):jt.catch(()=>{i.log(`Sending cancellation messages for id ${Gt} failed`)})}));let vn={jsonrpc:c,id:Gt,method:ut,params:yt};return ye(vn),typeof W.sender.enableCancellation=="function"&&W.sender.enableCancellation(vn),new Promise(async(jt,nn)=>{let Jt=s(Kn=>{jt(Kn),W.sender.cleanup(Gt),yn?.dispose()},"resolveWithCleanup"),Tn=s(Kn=>{nn(Kn),W.sender.cleanup(Gt),yn?.dispose()},"rejectWithCleanup"),Nn={method:ut,timerStart:Date.now(),resolve:Jt,reject:Tn};try{await e.write(vn),v.set(Gt,Nn)}catch(Kn){throw i.error("Sending request failed."),Nn.reject(new _r.ResponseError(_r.ErrorCodes.MessageWriteError,Kn.message?Kn.message:"Unknown reason")),Kn}})},"sendRequest"),onRequest:s((Ae,Ge)=>{ze();let ut=null;return yZ.is(Ae)?(ut=void 0,u=Ae):Vs.string(Ae)?(ut=null,Ge!==void 0&&(ut=Ae,d.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ut=Ae.method,d.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ut!==null&&(ut!==void 0?d.delete(ut):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>v.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ut)=>{let yt=!1,Xt=o0.Text;ut!==void 0&&(Vs.boolean(ut)?yt=ut:(yt=ut.sendNotification||!1,Xt=ut.traceFormat||o0.Text)),_=Ae,k=Xt,_===ho.Off?D=void 0:D=Ge,yt&&!de()&&!ne()&&await fr.sendNotification(CZ.type,{value:ho.toString(Ae)})},"trace"),onError:Q.event,onClose:Z.event,onUnhandledNotification:me.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(ne())return;N=um.Disposed,H.fire(void 0);let Ae=new _r.ResponseError(_r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of v.values())Ge.reject(Ae);v=new Map,E=new Map,b=new Set,y=new TCe.LinkedMap,Vs.func(e.dispose)&&e.dispose(),Vs.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{ze(),it(),N=um.Listening,t.listen(ft)},"listen"),inspect:s(()=>{(0,ICe.default)().console.log("inspect")},"inspect")};return fr.onNotification(GL.type,Ae=>{if(_===ho.Off||!D)return;let Ge=_===ho.Verbose||_===ho.Compact;D.log(Ae.message,Ge?Ae.verbose:void 0)}),fr.onNotification(CB.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):te.fire(Ae)}),fr}s(cot,"createMessageConnection");Xr.createMessageConnection=cot});var YL=G(ct=>{"use strict";f();Object.defineProperty(ct,"__esModule",{value:!0});ct.ProgressType=ct.ProgressToken=ct.createMessageConnection=ct.NullLogger=ct.ConnectionOptions=ct.ConnectionStrategy=ct.AbstractMessageBuffer=ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=ct.ReadableStreamMessageReader=ct.AbstractMessageReader=ct.MessageReader=ct.SharedArrayReceiverStrategy=ct.SharedArraySenderStrategy=ct.CancellationToken=ct.CancellationTokenSource=ct.Emitter=ct.Event=ct.Disposable=ct.LRUCache=ct.Touch=ct.LinkedMap=ct.ParameterStructures=ct.NotificationType9=ct.NotificationType8=ct.NotificationType7=ct.NotificationType6=ct.NotificationType5=ct.NotificationType4=ct.NotificationType3=ct.NotificationType2=ct.NotificationType1=ct.NotificationType0=ct.NotificationType=ct.ErrorCodes=ct.ResponseError=ct.RequestType9=ct.RequestType8=ct.RequestType7=ct.RequestType6=ct.RequestType5=ct.RequestType4=ct.RequestType3=ct.RequestType2=ct.RequestType1=ct.RequestType0=ct.RequestType=ct.Message=ct.RAL=void 0;ct.MessageStrategy=ct.CancellationStrategy=ct.CancellationSenderStrategy=ct.CancellationReceiverStrategy=ct.ConnectionError=ct.ConnectionErrors=ct.LogTraceNotification=ct.SetTraceNotification=ct.TraceFormat=ct.TraceValues=ct.Trace=void 0;var Jo=$X();Object.defineProperty(ct,"Message",{enumerable:!0,get:s(function(){return Jo.Message},"get")});Object.defineProperty(ct,"RequestType",{enumerable:!0,get:s(function(){return Jo.RequestType},"get")});Object.defineProperty(ct,"RequestType0",{enumerable:!0,get:s(function(){return Jo.RequestType0},"get")});Object.defineProperty(ct,"RequestType1",{enumerable:!0,get:s(function(){return Jo.RequestType1},"get")});Object.defineProperty(ct,"RequestType2",{enumerable:!0,get:s(function(){return Jo.RequestType2},"get")});Object.defineProperty(ct,"RequestType3",{enumerable:!0,get:s(function(){return Jo.RequestType3},"get")});Object.defineProperty(ct,"RequestType4",{enumerable:!0,get:s(function(){return Jo.RequestType4},"get")});Object.defineProperty(ct,"RequestType5",{enumerable:!0,get:s(function(){return Jo.RequestType5},"get")});Object.defineProperty(ct,"RequestType6",{enumerable:!0,get:s(function(){return Jo.RequestType6},"get")});Object.defineProperty(ct,"RequestType7",{enumerable:!0,get:s(function(){return Jo.RequestType7},"get")});Object.defineProperty(ct,"RequestType8",{enumerable:!0,get:s(function(){return Jo.RequestType8},"get")});Object.defineProperty(ct,"RequestType9",{enumerable:!0,get:s(function(){return Jo.RequestType9},"get")});Object.defineProperty(ct,"ResponseError",{enumerable:!0,get:s(function(){return Jo.ResponseError},"get")});Object.defineProperty(ct,"ErrorCodes",{enumerable:!0,get:s(function(){return Jo.ErrorCodes},"get")});Object.defineProperty(ct,"NotificationType",{enumerable:!0,get:s(function(){return Jo.NotificationType},"get")});Object.defineProperty(ct,"NotificationType0",{enumerable:!0,get:s(function(){return Jo.NotificationType0},"get")});Object.defineProperty(ct,"NotificationType1",{enumerable:!0,get:s(function(){return Jo.NotificationType1},"get")});Object.defineProperty(ct,"NotificationType2",{enumerable:!0,get:s(function(){return Jo.NotificationType2},"get")});Object.defineProperty(ct,"NotificationType3",{enumerable:!0,get:s(function(){return Jo.NotificationType3},"get")});Object.defineProperty(ct,"NotificationType4",{enumerable:!0,get:s(function(){return Jo.NotificationType4},"get")});Object.defineProperty(ct,"NotificationType5",{enumerable:!0,get:s(function(){return Jo.NotificationType5},"get")});Object.defineProperty(ct,"NotificationType6",{enumerable:!0,get:s(function(){return Jo.NotificationType6},"get")});Object.defineProperty(ct,"NotificationType7",{enumerable:!0,get:s(function(){return Jo.NotificationType7},"get")});Object.defineProperty(ct,"NotificationType8",{enumerable:!0,get:s(function(){return Jo.NotificationType8},"get")});Object.defineProperty(ct,"NotificationType9",{enumerable:!0,get:s(function(){return Jo.NotificationType9},"get")});Object.defineProperty(ct,"ParameterStructures",{enumerable:!0,get:s(function(){return Jo.ParameterStructures},"get")});var bZ=YX();Object.defineProperty(ct,"LinkedMap",{enumerable:!0,get:s(function(){return bZ.LinkedMap},"get")});Object.defineProperty(ct,"LRUCache",{enumerable:!0,get:s(function(){return bZ.LRUCache},"get")});Object.defineProperty(ct,"Touch",{enumerable:!0,get:s(function(){return bZ.Touch},"get")});var uot=pCe();Object.defineProperty(ct,"Disposable",{enumerable:!0,get:s(function(){return uot.Disposable},"get")});var RCe=z_();Object.defineProperty(ct,"Event",{enumerable:!0,get:s(function(){return RCe.Event},"get")});Object.defineProperty(ct,"Emitter",{enumerable:!0,get:s(function(){return RCe.Emitter},"get")});var kCe=QL();Object.defineProperty(ct,"CancellationTokenSource",{enumerable:!0,get:s(function(){return kCe.CancellationTokenSource},"get")});Object.defineProperty(ct,"CancellationToken",{enumerable:!0,get:s(function(){return kCe.CancellationToken},"get")});var BCe=hCe();Object.defineProperty(ct,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return BCe.SharedArraySenderStrategy},"get")});Object.defineProperty(ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return BCe.SharedArrayReceiverStrategy},"get")});var EZ=ACe();Object.defineProperty(ct,"MessageReader",{enumerable:!0,get:s(function(){return EZ.MessageReader},"get")});Object.defineProperty(ct,"AbstractMessageReader",{enumerable:!0,get:s(function(){return EZ.AbstractMessageReader},"get")});Object.defineProperty(ct,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return EZ.ReadableStreamMessageReader},"get")});var IZ=bCe();Object.defineProperty(ct,"MessageWriter",{enumerable:!0,get:s(function(){return IZ.MessageWriter},"get")});Object.defineProperty(ct,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return IZ.AbstractMessageWriter},"get")});Object.defineProperty(ct,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return IZ.WriteableStreamMessageWriter},"get")});var dot=ECe();Object.defineProperty(ct,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return dot.AbstractMessageBuffer},"get")});var lc=SCe();Object.defineProperty(ct,"ConnectionStrategy",{enumerable:!0,get:s(function(){return lc.ConnectionStrategy},"get")});Object.defineProperty(ct,"ConnectionOptions",{enumerable:!0,get:s(function(){return lc.ConnectionOptions},"get")});Object.defineProperty(ct,"NullLogger",{enumerable:!0,get:s(function(){return lc.NullLogger},"get")});Object.defineProperty(ct,"createMessageConnection",{enumerable:!0,get:s(function(){return lc.createMessageConnection},"get")});Object.defineProperty(ct,"ProgressToken",{enumerable:!0,get:s(function(){return lc.ProgressToken},"get")});Object.defineProperty(ct,"ProgressType",{enumerable:!0,get:s(function(){return lc.ProgressType},"get")});Object.defineProperty(ct,"Trace",{enumerable:!0,get:s(function(){return lc.Trace},"get")});Object.defineProperty(ct,"TraceValues",{enumerable:!0,get:s(function(){return lc.TraceValues},"get")});Object.defineProperty(ct,"TraceFormat",{enumerable:!0,get:s(function(){return lc.TraceFormat},"get")});Object.defineProperty(ct,"SetTraceNotification",{enumerable:!0,get:s(function(){return lc.SetTraceNotification},"get")});Object.defineProperty(ct,"LogTraceNotification",{enumerable:!0,get:s(function(){return lc.LogTraceNotification},"get")});Object.defineProperty(ct,"ConnectionErrors",{enumerable:!0,get:s(function(){return lc.ConnectionErrors},"get")});Object.defineProperty(ct,"ConnectionError",{enumerable:!0,get:s(function(){return lc.ConnectionError},"get")});Object.defineProperty(ct,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return lc.CancellationReceiverStrategy},"get")});Object.defineProperty(ct,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return lc.CancellationSenderStrategy},"get")});Object.defineProperty(ct,"CancellationStrategy",{enumerable:!0,get:s(function(){return lc.CancellationStrategy},"get")});Object.defineProperty(ct,"MessageStrategy",{enumerable:!0,get:s(function(){return lc.MessageStrategy},"get")});var fot=Ix();ct.RAL=fot.default});var NCe=G(SZ=>{"use strict";f();Object.defineProperty(SZ,"__esModule",{value:!0});var DCe=require("util"),y1=YL(),KL=class t extends y1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new DCe.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};KL.emptyBuffer=Buffer.allocUnsafe(0);var TZ=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),y1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),y1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),y1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),y1.Disposable.create(()=>this.stream.off("data",e))}},wZ=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),y1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),y1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),y1.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=s(a=>{a==null?r():i(a)},"callback");typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},PCe=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new KL(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new DCe.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new TZ(t),"asReadableStream"),asWritableStream:s(t=>new wZ(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:s(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:s(()=>clearInterval(r),"dispose")}}})});function _Z(){return PCe}s(_Z,"RIL");(function(t){function e(){y1.RAL.install(PCe)}s(e,"install"),t.install=e})(_Z||(_Z={}));SZ.default=_Z});var oI=G(qi=>{"use strict";f();var pot=qi&&qi.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),mot=qi&&qi.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&pot(e,t,n)};Object.defineProperty(qi,"__esModule",{value:!0});qi.createMessageConnection=qi.createServerSocketTransport=qi.createClientSocketTransport=qi.createServerPipeTransport=qi.createClientPipeTransport=qi.generateRandomPipeName=qi.StreamMessageWriter=qi.StreamMessageReader=qi.SocketMessageWriter=qi.SocketMessageReader=qi.PortMessageWriter=qi.PortMessageReader=qi.IPCMessageWriter=qi.IPCMessageReader=void 0;var Z_=NCe();Z_.default.install();var LCe=require("path"),hot=require("os"),got=require("crypto"),ZL=require("net"),s0=YL();mot(YL(),qi);var RZ=class extends s0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),s0.Disposable.create(()=>this.process.off("message",e))}};qi.IPCMessageReader=RZ;var kZ=class extends s0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};qi.IPCMessageWriter=kZ;var BZ=class extends s0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new s0.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};qi.PortMessageReader=BZ;var DZ=class extends s0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};qi.PortMessageWriter=DZ;var rI=class extends s0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,Z_.default)().stream.asReadableStream(e),n)}};qi.SocketMessageReader=rI;var iI=class extends s0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,n){super((0,Z_.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};qi.SocketMessageWriter=iI;var JL=class extends s0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,n){super((0,Z_.default)().stream.asReadableStream(e),n)}};qi.StreamMessageReader=JL;var XL=class extends s0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,n){super((0,Z_.default)().stream.asWritableStream(e),n)}};qi.StreamMessageWriter=XL;var FCe=process.env.XDG_RUNTIME_DIR,Aot=new Map([["linux",107],["darwin",103]]);function yot(){let t=(0,got.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;FCe?e=LCe.join(FCe,`vscode-ipc-${t}.sock`):e=LCe.join(hot.tmpdir(),`vscode-${t}.sock`);let n=Aot.get(process.platform);return n!==void 0&&e.length>n&&(0,Z_.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}s(yot,"generateRandomPipeName");qi.generateRandomPipeName=yot;function Cot(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,ZL.createServer)(l=>{a.close(),n([new rI(l,e),new iI(l,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(Cot,"createClientPipeTransport");qi.createClientPipeTransport=Cot;function xot(t,e="utf-8"){let n=(0,ZL.createConnection)(t);return[new rI(n,e),new iI(n,e)]}s(xot,"createServerPipeTransport");qi.createServerPipeTransport=xot;function vot(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,ZL.createServer)(l=>{a.close(),n([new rI(l,e),new iI(l,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(vot,"createClientSocketTransport");qi.createClientSocketTransport=vot;function bot(t,e="utf-8"){let n=(0,ZL.createConnection)(t,"127.0.0.1");return[new rI(n,e),new iI(n,e)]}s(bot,"createServerSocketTransport");qi.createServerSocketTransport=bot;function Eot(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(Eot,"isReadableStream");function Iot(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Iot,"isWritableStream");function Tot(t,e,n,r){n||(n=s0.NullLogger);let i=Eot(t)?new JL(t):t,o=Iot(e)?new XL(e):e;return s0.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,s0.createMessageConnection)(i,o,n,r)}s(Tot,"createMessageConnection");qi.createMessageConnection=Tot});var PZ=G((t0n,MCe)=>{"use strict";f();MCe.exports=oI()});var tF=G((QCe,eF)=>{f();(function(t){if(typeof eF=="object"&&typeof eF.exports=="object"){var e=t(require,QCe);e!==void 0&&(eF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(U){function he(ve){return typeof ve=="string"}s(he,"is"),U.is=he})(n||(e.DocumentUri=n={}));var r;(function(U){function he(ve){return typeof ve=="string"}s(he,"is"),U.is=he})(r||(e.URI=r={}));var i;(function(U){U.MIN_VALUE=-2147483648,U.MAX_VALUE=2147483647;function he(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(he,"is"),U.is=he})(i||(e.integer=i={}));var o;(function(U){U.MIN_VALUE=0,U.MAX_VALUE=2147483647;function he(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(he,"is"),U.is=he})(o||(e.uinteger=o={}));var a;(function(U){function he(X,M){return X===Number.MAX_VALUE&&(X=o.MAX_VALUE),M===Number.MAX_VALUE&&(M=o.MAX_VALUE),{line:X,character:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&_e.uinteger(M.line)&&_e.uinteger(M.character)}s(ve,"is"),U.is=ve})(a||(e.Position=a={}));var l;(function(U){function he(X,M,ke,$e){if(_e.uinteger(X)&&_e.uinteger(M)&&_e.uinteger(ke)&&_e.uinteger($e))return{start:a.create(X,M),end:a.create(ke,$e)};if(a.is(X)&&a.is(M))return{start:X,end:M};throw new Error("Range#create called with invalid arguments[".concat(X,", ").concat(M,", ").concat(ke,", ").concat($e,"]"))}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&a.is(M.start)&&a.is(M.end)}s(ve,"is"),U.is=ve})(l||(e.Range=l={}));var c;(function(U){function he(X,M){return{uri:X,range:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&l.is(M.range)&&(_e.string(M.uri)||_e.undefined(M.uri))}s(ve,"is"),U.is=ve})(c||(e.Location=c={}));var u;(function(U){function he(X,M,ke,$e){return{targetUri:X,targetRange:M,targetSelectionRange:ke,originSelectionRange:$e}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&l.is(M.targetRange)&&_e.string(M.targetUri)&&l.is(M.targetSelectionRange)&&(l.is(M.originSelectionRange)||_e.undefined(M.originSelectionRange))}s(ve,"is"),U.is=ve})(u||(e.LocationLink=u={}));var d;(function(U){function he(X,M,ke,$e){return{red:X,green:M,blue:ke,alpha:$e}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&_e.numberRange(M.red,0,1)&&_e.numberRange(M.green,0,1)&&_e.numberRange(M.blue,0,1)&&_e.numberRange(M.alpha,0,1)}s(ve,"is"),U.is=ve})(d||(e.Color=d={}));var p;(function(U){function he(X,M){return{range:X,color:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&l.is(M.range)&&d.is(M.color)}s(ve,"is"),U.is=ve})(p||(e.ColorInformation=p={}));var m;(function(U){function he(X,M,ke){return{label:X,textEdit:M,additionalTextEdits:ke}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.undefined(M.textEdit)||D.is(M))&&(_e.undefined(M.additionalTextEdits)||_e.typedArray(M.additionalTextEdits,D.is))}s(ve,"is"),U.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(U){U.Comment="comment",U.Imports="imports",U.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(U){function he(X,M,ke,$e,qt,Sn){var mn={startLine:X,endLine:M};return _e.defined(ke)&&(mn.startCharacter=ke),_e.defined($e)&&(mn.endCharacter=$e),_e.defined(qt)&&(mn.kind=qt),_e.defined(Sn)&&(mn.collapsedText=Sn),mn}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&_e.uinteger(M.startLine)&&_e.uinteger(M.startLine)&&(_e.undefined(M.startCharacter)||_e.uinteger(M.startCharacter))&&(_e.undefined(M.endCharacter)||_e.uinteger(M.endCharacter))&&(_e.undefined(M.kind)||_e.string(M.kind))}s(ve,"is"),U.is=ve})(g||(e.FoldingRange=g={}));var y;(function(U){function he(X,M){return{location:X,message:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&c.is(M.location)&&_e.string(M.message)}s(ve,"is"),U.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(U){U.Error=1,U.Warning=2,U.Information=3,U.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(U){U.Unnecessary=1,U.Deprecated=2})(b||(e.DiagnosticTag=b={}));var E;(function(U){function he(ve){var X=ve;return _e.objectLiteral(X)&&_e.string(X.href)}s(he,"is"),U.is=he})(E||(e.CodeDescription=E={}));var _;(function(U){function he(X,M,ke,$e,qt,Sn){var mn={range:X,message:M};return _e.defined(ke)&&(mn.severity=ke),_e.defined($e)&&(mn.code=$e),_e.defined(qt)&&(mn.source=qt),_e.defined(Sn)&&(mn.relatedInformation=Sn),mn}s(he,"create"),U.create=he;function ve(X){var M,ke=X;return _e.defined(ke)&&l.is(ke.range)&&_e.string(ke.message)&&(_e.number(ke.severity)||_e.undefined(ke.severity))&&(_e.integer(ke.code)||_e.string(ke.code)||_e.undefined(ke.code))&&(_e.undefined(ke.codeDescription)||_e.string((M=ke.codeDescription)===null||M===void 0?void 0:M.href))&&(_e.string(ke.source)||_e.undefined(ke.source))&&(_e.undefined(ke.relatedInformation)||_e.typedArray(ke.relatedInformation,y.is))}s(ve,"is"),U.is=ve})(_||(e.Diagnostic=_={}));var k;(function(U){function he(X,M){for(var ke=[],$e=2;$e<arguments.length;$e++)ke[$e-2]=arguments[$e];var qt={title:X,command:M};return _e.defined(ke)&&ke.length>0&&(qt.arguments=ke),qt}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&_e.string(M.title)&&_e.string(M.command)}s(ve,"is"),U.is=ve})(k||(e.Command=k={}));var D;(function(U){function he(ke,$e){return{range:ke,newText:$e}}s(he,"replace"),U.replace=he;function ve(ke,$e){return{range:{start:ke,end:ke},newText:$e}}s(ve,"insert"),U.insert=ve;function X(ke){return{range:ke,newText:""}}s(X,"del"),U.del=X;function M(ke){var $e=ke;return _e.objectLiteral($e)&&_e.string($e.newText)&&l.is($e.range)}s(M,"is"),U.is=M})(D||(e.TextEdit=D={}));var N;(function(U){function he(X,M,ke){var $e={label:X};return M!==void 0&&($e.needsConfirmation=M),ke!==void 0&&($e.description=ke),$e}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.boolean(M.needsConfirmation)||M.needsConfirmation===void 0)&&(_e.string(M.description)||M.description===void 0)}s(ve,"is"),U.is=ve})(N||(e.ChangeAnnotation=N={}));var Q;(function(U){function he(ve){var X=ve;return _e.string(X)}s(he,"is"),U.is=he})(Q||(e.ChangeAnnotationIdentifier=Q={}));var Z;(function(U){function he(ke,$e,qt){return{range:ke,newText:$e,annotationId:qt}}s(he,"replace"),U.replace=he;function ve(ke,$e,qt){return{range:{start:ke,end:ke},newText:$e,annotationId:qt}}s(ve,"insert"),U.insert=ve;function X(ke,$e){return{range:ke,newText:"",annotationId:$e}}s(X,"del"),U.del=X;function M(ke){var $e=ke;return D.is($e)&&(N.is($e.annotationId)||Q.is($e.annotationId))}s(M,"is"),U.is=M})(Z||(e.AnnotatedTextEdit=Z={}));var me;(function(U){function he(X,M){return{textDocument:X,edits:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&de.is(M.textDocument)&&Array.isArray(M.edits)}s(ve,"is"),U.is=ve})(me||(e.TextDocumentEdit=me={}));var te;(function(U){function he(X,M,ke){var $e={kind:"create",uri:X};return M!==void 0&&(M.overwrite!==void 0||M.ignoreIfExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(he,"create"),U.create=he;function ve(X){var M=X;return M&&M.kind==="create"&&_e.string(M.uri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||Q.is(M.annotationId))}s(ve,"is"),U.is=ve})(te||(e.CreateFile=te={}));var H;(function(U){function he(X,M,ke,$e){var qt={kind:"rename",oldUri:X,newUri:M};return ke!==void 0&&(ke.overwrite!==void 0||ke.ignoreIfExists!==void 0)&&(qt.options=ke),$e!==void 0&&(qt.annotationId=$e),qt}s(he,"create"),U.create=he;function ve(X){var M=X;return M&&M.kind==="rename"&&_e.string(M.oldUri)&&_e.string(M.newUri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||Q.is(M.annotationId))}s(ve,"is"),U.is=ve})(H||(e.RenameFile=H={}));var W;(function(U){function he(X,M,ke){var $e={kind:"delete",uri:X};return M!==void 0&&(M.recursive!==void 0||M.ignoreIfNotExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(he,"create"),U.create=he;function ve(X){var M=X;return M&&M.kind==="delete"&&_e.string(M.uri)&&(M.options===void 0||(M.options.recursive===void 0||_e.boolean(M.options.recursive))&&(M.options.ignoreIfNotExists===void 0||_e.boolean(M.options.ignoreIfNotExists)))&&(M.annotationId===void 0||Q.is(M.annotationId))}s(ve,"is"),U.is=ve})(W||(e.DeleteFile=W={}));var re;(function(U){function he(ve){var X=ve;return X&&(X.changes!==void 0||X.documentChanges!==void 0)&&(X.documentChanges===void 0||X.documentChanges.every(function(M){return _e.string(M.kind)?te.is(M)||H.is(M)||W.is(M):me.is(M)}))}s(he,"is"),U.is=he})(re||(e.WorkspaceEdit=re={}));var oe=function(){function U(he,ve){this.edits=he,this.changeAnnotations=ve}return s(U,"TextEditChangeImpl"),U.prototype.insert=function(he,ve,X){var M,ke;if(X===void 0?M=D.insert(he,ve):Q.is(X)?(ke=X,M=Z.insert(he,ve,X)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(X),M=Z.insert(he,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.replace=function(he,ve,X){var M,ke;if(X===void 0?M=D.replace(he,ve):Q.is(X)?(ke=X,M=Z.replace(he,ve,X)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(X),M=Z.replace(he,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.delete=function(he,ve){var X,M;if(ve===void 0?X=D.del(he):Q.is(ve)?(M=ve,X=Z.del(he,ve)):(this.assertChangeAnnotations(this.changeAnnotations),M=this.changeAnnotations.manage(ve),X=Z.del(he,M)),this.edits.push(X),M!==void 0)return M},U.prototype.add=function(he){this.edits.push(he)},U.prototype.all=function(){return this.edits},U.prototype.clear=function(){this.edits.splice(0,this.edits.length)},U.prototype.assertChangeAnnotations=function(he){if(he===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},U}(),V=function(){function U(he){this._annotations=he===void 0?Object.create(null):he,this._counter=0,this._size=0}return s(U,"ChangeAnnotations"),U.prototype.all=function(){return this._annotations},Object.defineProperty(U.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),U.prototype.manage=function(he,ve){var X;if(Q.is(he)?X=he:(X=this.nextId(),ve=he),this._annotations[X]!==void 0)throw new Error("Id ".concat(X," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(X));return this._annotations[X]=ve,this._size++,X},U.prototype.nextId=function(){return this._counter++,this._counter.toString()},U}(),q=function(){function U(he){var ve=this;this._textEditChanges=Object.create(null),he!==void 0?(this._workspaceEdit=he,he.documentChanges?(this._changeAnnotations=new V(he.changeAnnotations),he.changeAnnotations=this._changeAnnotations.all(),he.documentChanges.forEach(function(X){if(me.is(X)){var M=new oe(X.edits,ve._changeAnnotations);ve._textEditChanges[X.textDocument.uri]=M}})):he.changes&&Object.keys(he.changes).forEach(function(X){var M=new oe(he.changes[X]);ve._textEditChanges[X]=M})):this._workspaceEdit={}}return s(U,"WorkspaceChange"),Object.defineProperty(U.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),U.prototype.getTextEditChange=function(he){if(de.is(he)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:he.uri,version:he.version},X=this._textEditChanges[ve.uri];if(!X){var M=[],ke={textDocument:ve,edits:M};this._workspaceEdit.documentChanges.push(ke),X=new oe(M,this._changeAnnotations),this._textEditChanges[ve.uri]=X}return X}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var X=this._textEditChanges[he];if(!X){var M=[];this._workspaceEdit.changes[he]=M,X=new oe(M),this._textEditChanges[he]=X}return X}},U.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new V,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},U.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},U.prototype.createFile=function(he,ve,X){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||Q.is(ve)?M=ve:X=ve;var ke,$e;if(M===void 0?ke=te.create(he,X):($e=Q.is(M)?M:this._changeAnnotations.manage(M),ke=te.create(he,X,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U.prototype.renameFile=function(he,ve,X,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ke;N.is(X)||Q.is(X)?ke=X:M=X;var $e,qt;if(ke===void 0?$e=H.create(he,ve,M):(qt=Q.is(ke)?ke:this._changeAnnotations.manage(ke),$e=H.create(he,ve,M,qt)),this._workspaceEdit.documentChanges.push($e),qt!==void 0)return qt},U.prototype.deleteFile=function(he,ve,X){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||Q.is(ve)?M=ve:X=ve;var ke,$e;if(M===void 0?ke=W.create(he,X):($e=Q.is(M)?M:this._changeAnnotations.manage(M),ke=W.create(he,X,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U}();e.WorkspaceChange=q;var Y;(function(U){function he(X){return{uri:X}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&_e.string(M.uri)}s(ve,"is"),U.is=ve})(Y||(e.TextDocumentIdentifier=Y={}));var ee;(function(U){function he(X,M){return{uri:X,version:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&_e.string(M.uri)&&_e.integer(M.version)}s(ve,"is"),U.is=ve})(ee||(e.VersionedTextDocumentIdentifier=ee={}));var de;(function(U){function he(X,M){return{uri:X,version:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&_e.string(M.uri)&&(M.version===null||_e.integer(M.version))}s(ve,"is"),U.is=ve})(de||(e.OptionalVersionedTextDocumentIdentifier=de={}));var ne;(function(U){function he(X,M,ke,$e){return{uri:X,languageId:M,version:ke,text:$e}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&_e.string(M.uri)&&_e.string(M.languageId)&&_e.integer(M.version)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(ne||(e.TextDocumentItem=ne={}));var fe;(function(U){U.PlainText="plaintext",U.Markdown="markdown";function he(ve){var X=ve;return X===U.PlainText||X===U.Markdown}s(he,"is"),U.is=he})(fe||(e.MarkupKind=fe={}));var pe;(function(U){function he(ve){var X=ve;return _e.objectLiteral(ve)&&fe.is(X.kind)&&_e.string(X.value)}s(he,"is"),U.is=he})(pe||(e.MarkupContent=pe={}));var Be;(function(U){U.Text=1,U.Method=2,U.Function=3,U.Constructor=4,U.Field=5,U.Variable=6,U.Class=7,U.Interface=8,U.Module=9,U.Property=10,U.Unit=11,U.Value=12,U.Enum=13,U.Keyword=14,U.Snippet=15,U.Color=16,U.File=17,U.Reference=18,U.Folder=19,U.EnumMember=20,U.Constant=21,U.Struct=22,U.Event=23,U.Operator=24,U.TypeParameter=25})(Be||(e.CompletionItemKind=Be={}));var Se;(function(U){U.PlainText=1,U.Snippet=2})(Se||(e.InsertTextFormat=Se={}));var Ke;(function(U){U.Deprecated=1})(Ke||(e.CompletionItemTag=Ke={}));var Fe;(function(U){function he(X,M,ke){return{newText:X,insert:M,replace:ke}}s(he,"create"),U.create=he;function ve(X){var M=X;return M&&_e.string(M.newText)&&l.is(M.insert)&&l.is(M.replace)}s(ve,"is"),U.is=ve})(Fe||(e.InsertReplaceEdit=Fe={}));var ft;(function(U){U.asIs=1,U.adjustIndentation=2})(ft||(e.InsertTextMode=ft={}));var Tt;(function(U){function he(ve){var X=ve;return X&&(_e.string(X.detail)||X.detail===void 0)&&(_e.string(X.description)||X.description===void 0)}s(he,"is"),U.is=he})(Tt||(e.CompletionItemLabelDetails=Tt={}));var Ct;(function(U){function he(ve){return{label:ve}}s(he,"create"),U.create=he})(Ct||(e.CompletionItem=Ct={}));var bt;(function(U){function he(ve,X){return{items:ve||[],isIncomplete:!!X}}s(he,"create"),U.create=he})(bt||(e.CompletionList=bt={}));var le;(function(U){function he(X){return X.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(he,"fromPlainText"),U.fromPlainText=he;function ve(X){var M=X;return _e.string(M)||_e.objectLiteral(M)&&_e.string(M.language)&&_e.string(M.value)}s(ve,"is"),U.is=ve})(le||(e.MarkedString=le={}));var Oe;(function(U){function he(ve){var X=ve;return!!X&&_e.objectLiteral(X)&&(pe.is(X.contents)||le.is(X.contents)||_e.typedArray(X.contents,le.is))&&(ve.range===void 0||l.is(ve.range))}s(he,"is"),U.is=he})(Oe||(e.Hover=Oe={}));var ye;(function(U){function he(ve,X){return X?{label:ve,documentation:X}:{label:ve}}s(he,"create"),U.create=he})(ye||(e.ParameterInformation=ye={}));var tt;(function(U){function he(ve,X){for(var M=[],ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];var $e={label:ve};return _e.defined(X)&&($e.documentation=X),_e.defined(M)?$e.parameters=M:$e.parameters=[],$e}s(he,"create"),U.create=he})(tt||(e.SignatureInformation=tt={}));var J;(function(U){U.Text=1,U.Read=2,U.Write=3})(J||(e.DocumentHighlightKind=J={}));var ie;(function(U){function he(ve,X){var M={range:ve};return _e.number(X)&&(M.kind=X),M}s(he,"create"),U.create=he})(ie||(e.DocumentHighlight=ie={}));var We;(function(U){U.File=1,U.Module=2,U.Namespace=3,U.Package=4,U.Class=5,U.Method=6,U.Property=7,U.Field=8,U.Constructor=9,U.Enum=10,U.Interface=11,U.Function=12,U.Variable=13,U.Constant=14,U.String=15,U.Number=16,U.Boolean=17,U.Array=18,U.Object=19,U.Key=20,U.Null=21,U.EnumMember=22,U.Struct=23,U.Event=24,U.Operator=25,U.TypeParameter=26})(We||(e.SymbolKind=We={}));var Ne;(function(U){U.Deprecated=1})(Ne||(e.SymbolTag=Ne={}));var be;(function(U){function he(ve,X,M,ke,$e){var qt={name:ve,kind:X,location:{uri:ke,range:M}};return $e&&(qt.containerName=$e),qt}s(he,"create"),U.create=he})(be||(e.SymbolInformation=be={}));var ze;(function(U){function he(ve,X,M,ke){return ke!==void 0?{name:ve,kind:X,location:{uri:M,range:ke}}:{name:ve,kind:X,location:{uri:M}}}s(he,"create"),U.create=he})(ze||(e.WorkspaceSymbol=ze={}));var it;(function(U){function he(X,M,ke,$e,qt,Sn){var mn={name:X,detail:M,kind:ke,range:$e,selectionRange:qt};return Sn!==void 0&&(mn.children=Sn),mn}s(he,"create"),U.create=he;function ve(X){var M=X;return M&&_e.string(M.name)&&_e.number(M.kind)&&l.is(M.range)&&l.is(M.selectionRange)&&(M.detail===void 0||_e.string(M.detail))&&(M.deprecated===void 0||_e.boolean(M.deprecated))&&(M.children===void 0||Array.isArray(M.children))&&(M.tags===void 0||Array.isArray(M.tags))}s(ve,"is"),U.is=ve})(it||(e.DocumentSymbol=it={}));var gt;(function(U){U.Empty="",U.QuickFix="quickfix",U.Refactor="refactor",U.RefactorExtract="refactor.extract",U.RefactorInline="refactor.inline",U.RefactorRewrite="refactor.rewrite",U.Source="source",U.SourceOrganizeImports="source.organizeImports",U.SourceFixAll="source.fixAll"})(gt||(e.CodeActionKind=gt={}));var Ot;(function(U){U.Invoked=1,U.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var cn;(function(U){function he(X,M,ke){var $e={diagnostics:X};return M!=null&&($e.only=M),ke!=null&&($e.triggerKind=ke),$e}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&_e.typedArray(M.diagnostics,_.is)&&(M.only===void 0||_e.typedArray(M.only,_e.string))&&(M.triggerKind===void 0||M.triggerKind===Ot.Invoked||M.triggerKind===Ot.Automatic)}s(ve,"is"),U.is=ve})(cn||(e.CodeActionContext=cn={}));var Lt;(function(U){function he(X,M,ke){var $e={title:X},qt=!0;return typeof M=="string"?(qt=!1,$e.kind=M):k.is(M)?$e.command=M:$e.edit=M,qt&&ke!==void 0&&($e.kind=ke),$e}s(he,"create"),U.create=he;function ve(X){var M=X;return M&&_e.string(M.title)&&(M.diagnostics===void 0||_e.typedArray(M.diagnostics,_.is))&&(M.kind===void 0||_e.string(M.kind))&&(M.edit!==void 0||M.command!==void 0)&&(M.command===void 0||k.is(M.command))&&(M.isPreferred===void 0||_e.boolean(M.isPreferred))&&(M.edit===void 0||re.is(M.edit))}s(ve,"is"),U.is=ve})(Lt||(e.CodeAction=Lt={}));var Gn;(function(U){function he(X,M){var ke={range:X};return _e.defined(M)&&(ke.data=M),ke}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.command)||k.is(M.command))}s(ve,"is"),U.is=ve})(Gn||(e.CodeLens=Gn={}));var Yn;(function(U){function he(X,M){return{tabSize:X,insertSpaces:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&_e.uinteger(M.tabSize)&&_e.boolean(M.insertSpaces)}s(ve,"is"),U.is=ve})(Yn||(e.FormattingOptions=Yn={}));var fr;(function(U){function he(X,M,ke){return{range:X,target:M,data:ke}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.target)||_e.string(M.target))}s(ve,"is"),U.is=ve})(fr||(e.DocumentLink=fr={}));var Ae;(function(U){function he(X,M){return{range:X,parent:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&l.is(M.range)&&(M.parent===void 0||U.is(M.parent))}s(ve,"is"),U.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(U){U.namespace="namespace",U.type="type",U.class="class",U.enum="enum",U.interface="interface",U.struct="struct",U.typeParameter="typeParameter",U.parameter="parameter",U.variable="variable",U.property="property",U.enumMember="enumMember",U.event="event",U.function="function",U.method="method",U.macro="macro",U.keyword="keyword",U.modifier="modifier",U.comment="comment",U.string="string",U.number="number",U.regexp="regexp",U.operator="operator",U.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ut;(function(U){U.declaration="declaration",U.definition="definition",U.readonly="readonly",U.static="static",U.deprecated="deprecated",U.abstract="abstract",U.async="async",U.modification="modification",U.documentation="documentation",U.defaultLibrary="defaultLibrary"})(ut||(e.SemanticTokenModifiers=ut={}));var yt;(function(U){function he(ve){var X=ve;return _e.objectLiteral(X)&&(X.resultId===void 0||typeof X.resultId=="string")&&Array.isArray(X.data)&&(X.data.length===0||typeof X.data[0]=="number")}s(he,"is"),U.is=he})(yt||(e.SemanticTokens=yt={}));var Xt;(function(U){function he(X,M){return{range:X,text:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return M!=null&&l.is(M.range)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(Xt||(e.InlineValueText=Xt={}));var Gt;(function(U){function he(X,M,ke){return{range:X,variableName:M,caseSensitiveLookup:ke}}s(he,"create"),U.create=he;function ve(X){var M=X;return M!=null&&l.is(M.range)&&_e.boolean(M.caseSensitiveLookup)&&(_e.string(M.variableName)||M.variableName===void 0)}s(ve,"is"),U.is=ve})(Gt||(e.InlineValueVariableLookup=Gt={}));var yn;(function(U){function he(X,M){return{range:X,expression:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return M!=null&&l.is(M.range)&&(_e.string(M.expression)||M.expression===void 0)}s(ve,"is"),U.is=ve})(yn||(e.InlineValueEvaluatableExpression=yn={}));var vn;(function(U){function he(X,M){return{frameId:X,stoppedLocation:M}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.defined(M)&&l.is(X.stoppedLocation)}s(ve,"is"),U.is=ve})(vn||(e.InlineValueContext=vn={}));var jt;(function(U){U.Type=1,U.Parameter=2;function he(ve){return ve===1||ve===2}s(he,"is"),U.is=he})(jt||(e.InlayHintKind=jt={}));var nn;(function(U){function he(X){return{value:X}}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&(M.tooltip===void 0||_e.string(M.tooltip)||pe.is(M.tooltip))&&(M.location===void 0||c.is(M.location))&&(M.command===void 0||k.is(M.command))}s(ve,"is"),U.is=ve})(nn||(e.InlayHintLabelPart=nn={}));var Jt;(function(U){function he(X,M,ke){var $e={position:X,label:M};return ke!==void 0&&($e.kind=ke),$e}s(he,"create"),U.create=he;function ve(X){var M=X;return _e.objectLiteral(M)&&a.is(M.position)&&(_e.string(M.label)||_e.typedArray(M.label,nn.is))&&(M.kind===void 0||jt.is(M.kind))&&M.textEdits===void 0||_e.typedArray(M.textEdits,D.is)&&(M.tooltip===void 0||_e.string(M.tooltip)||pe.is(M.tooltip))&&(M.paddingLeft===void 0||_e.boolean(M.paddingLeft))&&(M.paddingRight===void 0||_e.boolean(M.paddingRight))}s(ve,"is"),U.is=ve})(Jt||(e.InlayHint=Jt={}));var Tn;(function(U){function he(ve){return{kind:"snippet",value:ve}}s(he,"createSnippet"),U.createSnippet=he})(Tn||(e.StringValue=Tn={}));var Nn;(function(U){function he(ve,X,M,ke){return{insertText:ve,filterText:X,range:M,command:ke}}s(he,"create"),U.create=he})(Nn||(e.InlineCompletionItem=Nn={}));var Kn;(function(U){function he(ve){return{items:ve}}s(he,"create"),U.create=he})(Kn||(e.InlineCompletionList=Kn={}));var qr;(function(U){U.Invoked=0,U.Automatic=1})(qr||(e.InlineCompletionTriggerKind=qr={}));var Jr;(function(U){function he(ve,X){return{range:ve,text:X}}s(he,"create"),U.create=he})(Jr||(e.SelectedCompletionInfo=Jr={}));var Mr;(function(U){function he(ve,X){return{triggerKind:ve,selectedCompletionInfo:X}}s(he,"create"),U.create=he})(Mr||(e.InlineCompletionContext=Mr={}));var $r;(function(U){function he(ve){var X=ve;return _e.objectLiteral(X)&&r.is(X.uri)&&_e.string(X.name)}s(he,"is"),U.is=he})($r||(e.WorkspaceFolder=$r={})),e.EOL=[`
`,`\r
`,"\r"];var tr;(function(U){function he(ke,$e,qt,Sn){return new zr(ke,$e,qt,Sn)}s(he,"create"),U.create=he;function ve(ke){var $e=ke;return!!(_e.defined($e)&&_e.string($e.uri)&&(_e.undefined($e.languageId)||_e.string($e.languageId))&&_e.uinteger($e.lineCount)&&_e.func($e.getText)&&_e.func($e.positionAt)&&_e.func($e.offsetAt))}s(ve,"is"),U.is=ve;function X(ke,$e){for(var qt=ke.getText(),Sn=M($e,function(Qr,Qs){var kp=Qr.range.start.line-Qs.range.start.line;return kp===0?Qr.range.start.character-Qs.range.start.character:kp}),mn=qt.length,lr=Sn.length-1;lr>=0;lr--){var pr=Sn[lr],bn=ke.offsetAt(pr.range.start),Ht=ke.offsetAt(pr.range.end);if(Ht<=mn)qt=qt.substring(0,bn)+pr.newText+qt.substring(Ht,qt.length);else throw new Error("Overlapping edit");mn=bn}return qt}s(X,"applyEdits"),U.applyEdits=X;function M(ke,$e){if(ke.length<=1)return ke;var qt=ke.length/2|0,Sn=ke.slice(0,qt),mn=ke.slice(qt);M(Sn,$e),M(mn,$e);for(var lr=0,pr=0,bn=0;lr<Sn.length&&pr<mn.length;){var Ht=$e(Sn[lr],mn[pr]);Ht<=0?ke[bn++]=Sn[lr++]:ke[bn++]=mn[pr++]}for(;lr<Sn.length;)ke[bn++]=Sn[lr++];for(;pr<mn.length;)ke[bn++]=mn[pr++];return ke}s(M,"mergeSort")})(tr||(e.TextDocument=tr={}));var zr=function(){function U(he,ve,X,M){this._uri=he,this._languageId=ve,this._version=X,this._content=M,this._lineOffsets=void 0}return s(U,"FullTextDocument"),Object.defineProperty(U.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),U.prototype.getText=function(he){if(he){var ve=this.offsetAt(he.start),X=this.offsetAt(he.end);return this._content.substring(ve,X)}return this._content},U.prototype.update=function(he,ve){this._content=he.text,this._version=ve,this._lineOffsets=void 0},U.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var he=[],ve=this._content,X=!0,M=0;M<ve.length;M++){X&&(he.push(M),X=!1);var ke=ve.charAt(M);X=ke==="\r"||ke===`
`,ke==="\r"&&M+1<ve.length&&ve.charAt(M+1)===`
`&&M++}X&&ve.length>0&&he.push(ve.length),this._lineOffsets=he}return this._lineOffsets},U.prototype.positionAt=function(he){he=Math.max(Math.min(he,this._content.length),0);var ve=this.getLineOffsets(),X=0,M=ve.length;if(M===0)return a.create(0,he);for(;X<M;){var ke=Math.floor((X+M)/2);ve[ke]>he?M=ke:X=ke+1}var $e=X-1;return a.create($e,he-ve[$e])},U.prototype.offsetAt=function(he){var ve=this.getLineOffsets();if(he.line>=ve.length)return this._content.length;if(he.line<0)return 0;var X=ve[he.line],M=he.line+1<ve.length?ve[he.line+1]:this._content.length;return Math.max(Math.min(X+he.character,M),X)},Object.defineProperty(U.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),U}(),_e;(function(U){var he=Object.prototype.toString;function ve(Ht){return typeof Ht<"u"}s(ve,"defined"),U.defined=ve;function X(Ht){return typeof Ht>"u"}s(X,"undefined"),U.undefined=X;function M(Ht){return Ht===!0||Ht===!1}s(M,"boolean"),U.boolean=M;function ke(Ht){return he.call(Ht)==="[object String]"}s(ke,"string"),U.string=ke;function $e(Ht){return he.call(Ht)==="[object Number]"}s($e,"number"),U.number=$e;function qt(Ht,Qr,Qs){return he.call(Ht)==="[object Number]"&&Qr<=Ht&&Ht<=Qs}s(qt,"numberRange"),U.numberRange=qt;function Sn(Ht){return he.call(Ht)==="[object Number]"&&-2147483648<=Ht&&Ht<=2147483647}s(Sn,"integer"),U.integer=Sn;function mn(Ht){return he.call(Ht)==="[object Number]"&&0<=Ht&&Ht<=2147483647}s(mn,"uinteger"),U.uinteger=mn;function lr(Ht){return he.call(Ht)==="[object Function]"}s(lr,"func"),U.func=lr;function pr(Ht){return Ht!==null&&typeof Ht=="object"}s(pr,"objectLiteral"),U.objectLiteral=pr;function bn(Ht,Qr){return Array.isArray(Ht)&&Ht.every(Qr)}s(bn,"typedArray"),U.typedArray=bn})(_e||(_e={}))})});var Ps=G(sd=>{"use strict";f();Object.defineProperty(sd,"__esModule",{value:!0});sd.ProtocolNotificationType=sd.ProtocolNotificationType0=sd.ProtocolRequestType=sd.ProtocolRequestType0=sd.RegistrationType=sd.MessageDirection=void 0;var eS=oI(),OCe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(OCe||(sd.MessageDirection=OCe={}));var NZ=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};sd.RegistrationType=NZ;var LZ=class extends eS.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};sd.ProtocolRequestType0=LZ;var FZ=class extends eS.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,eS.ParameterStructures.byName)}};sd.ProtocolRequestType=FZ;var MZ=class extends eS.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};sd.ProtocolNotificationType0=MZ;var QZ=class extends eS.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,eS.ParameterStructures.byName)}};sd.ProtocolNotificationType=QZ});var nF=G(Ga=>{"use strict";f();Object.defineProperty(Ga,"__esModule",{value:!0});Ga.objectLiteral=Ga.typedArray=Ga.stringArray=Ga.array=Ga.func=Ga.error=Ga.number=Ga.string=Ga.boolean=void 0;function wot(t){return t===!0||t===!1}s(wot,"boolean");Ga.boolean=wot;function UCe(t){return typeof t=="string"||t instanceof String}s(UCe,"string");Ga.string=UCe;function _ot(t){return typeof t=="number"||t instanceof Number}s(_ot,"number");Ga.number=_ot;function Sot(t){return t instanceof Error}s(Sot,"error");Ga.error=Sot;function Rot(t){return typeof t=="function"}s(Rot,"func");Ga.func=Rot;function qCe(t){return Array.isArray(t)}s(qCe,"array");Ga.array=qCe;function kot(t){return qCe(t)&&t.every(e=>UCe(e))}s(kot,"stringArray");Ga.stringArray=kot;function Bot(t,e){return Array.isArray(t)&&t.every(e)}s(Bot,"typedArray");Ga.typedArray=Bot;function Dot(t){return t!==null&&typeof t=="object"}s(Dot,"objectLiteral");Ga.objectLiteral=Dot});var HCe=G(rF=>{"use strict";f();Object.defineProperty(rF,"__esModule",{value:!0});rF.ImplementationRequest=void 0;var WCe=Ps(),GCe;(function(t){t.method="textDocument/implementation",t.messageDirection=WCe.MessageDirection.clientToServer,t.type=new WCe.ProtocolRequestType(t.method)})(GCe||(rF.ImplementationRequest=GCe={}))});var $Ce=G(iF=>{"use strict";f();Object.defineProperty(iF,"__esModule",{value:!0});iF.TypeDefinitionRequest=void 0;var jCe=Ps(),VCe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=jCe.MessageDirection.clientToServer,t.type=new jCe.ProtocolRequestType(t.method)})(VCe||(iF.TypeDefinitionRequest=VCe={}))});var KCe=G(tS=>{"use strict";f();Object.defineProperty(tS,"__esModule",{value:!0});tS.DidChangeWorkspaceFoldersNotification=tS.WorkspaceFoldersRequest=void 0;var oF=Ps(),zCe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=oF.MessageDirection.serverToClient,t.type=new oF.ProtocolRequestType0(t.method)})(zCe||(tS.WorkspaceFoldersRequest=zCe={}));var YCe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=oF.MessageDirection.clientToServer,t.type=new oF.ProtocolNotificationType(t.method)})(YCe||(tS.DidChangeWorkspaceFoldersNotification=YCe={}))});var ZCe=G(sF=>{"use strict";f();Object.defineProperty(sF,"__esModule",{value:!0});sF.ConfigurationRequest=void 0;var JCe=Ps(),XCe;(function(t){t.method="workspace/configuration",t.messageDirection=JCe.MessageDirection.serverToClient,t.type=new JCe.ProtocolRequestType(t.method)})(XCe||(sF.ConfigurationRequest=XCe={}))});var nxe=G(nS=>{"use strict";f();Object.defineProperty(nS,"__esModule",{value:!0});nS.ColorPresentationRequest=nS.DocumentColorRequest=void 0;var aF=Ps(),exe;(function(t){t.method="textDocument/documentColor",t.messageDirection=aF.MessageDirection.clientToServer,t.type=new aF.ProtocolRequestType(t.method)})(exe||(nS.DocumentColorRequest=exe={}));var txe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=aF.MessageDirection.clientToServer,t.type=new aF.ProtocolRequestType(t.method)})(txe||(nS.ColorPresentationRequest=txe={}))});var oxe=G(rS=>{"use strict";f();Object.defineProperty(rS,"__esModule",{value:!0});rS.FoldingRangeRefreshRequest=rS.FoldingRangeRequest=void 0;var lF=Ps(),rxe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=lF.MessageDirection.clientToServer,t.type=new lF.ProtocolRequestType(t.method)})(rxe||(rS.FoldingRangeRequest=rxe={}));var ixe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=lF.MessageDirection.serverToClient,t.type=new lF.ProtocolRequestType0(t.method)})(ixe||(rS.FoldingRangeRefreshRequest=ixe={}))});var lxe=G(cF=>{"use strict";f();Object.defineProperty(cF,"__esModule",{value:!0});cF.DeclarationRequest=void 0;var sxe=Ps(),axe;(function(t){t.method="textDocument/declaration",t.messageDirection=sxe.MessageDirection.clientToServer,t.type=new sxe.ProtocolRequestType(t.method)})(axe||(cF.DeclarationRequest=axe={}))});var dxe=G(uF=>{"use strict";f();Object.defineProperty(uF,"__esModule",{value:!0});uF.SelectionRangeRequest=void 0;var cxe=Ps(),uxe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=cxe.MessageDirection.clientToServer,t.type=new cxe.ProtocolRequestType(t.method)})(uxe||(uF.SelectionRangeRequest=uxe={}))});var hxe=G(_x=>{"use strict";f();Object.defineProperty(_x,"__esModule",{value:!0});_x.WorkDoneProgressCancelNotification=_x.WorkDoneProgressCreateRequest=_x.WorkDoneProgress=void 0;var Pot=oI(),dF=Ps(),fxe;(function(t){t.type=new Pot.ProgressType;function e(n){return n===t.type}s(e,"is"),t.is=e})(fxe||(_x.WorkDoneProgress=fxe={}));var pxe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=dF.MessageDirection.serverToClient,t.type=new dF.ProtocolRequestType(t.method)})(pxe||(_x.WorkDoneProgressCreateRequest=pxe={}));var mxe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=dF.MessageDirection.clientToServer,t.type=new dF.ProtocolNotificationType(t.method)})(mxe||(_x.WorkDoneProgressCancelNotification=mxe={}))});var Cxe=G(Sx=>{"use strict";f();Object.defineProperty(Sx,"__esModule",{value:!0});Sx.CallHierarchyOutgoingCallsRequest=Sx.CallHierarchyIncomingCallsRequest=Sx.CallHierarchyPrepareRequest=void 0;var iS=Ps(),gxe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=iS.MessageDirection.clientToServer,t.type=new iS.ProtocolRequestType(t.method)})(gxe||(Sx.CallHierarchyPrepareRequest=gxe={}));var Axe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=iS.MessageDirection.clientToServer,t.type=new iS.ProtocolRequestType(t.method)})(Axe||(Sx.CallHierarchyIncomingCallsRequest=Axe={}));var yxe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=iS.MessageDirection.clientToServer,t.type=new iS.ProtocolRequestType(t.method)})(yxe||(Sx.CallHierarchyOutgoingCallsRequest=yxe={}))});var Txe=G(ad=>{"use strict";f();Object.defineProperty(ad,"__esModule",{value:!0});ad.SemanticTokensRefreshRequest=ad.SemanticTokensRangeRequest=ad.SemanticTokensDeltaRequest=ad.SemanticTokensRequest=ad.SemanticTokensRegistrationType=ad.TokenFormat=void 0;var C1=Ps(),xxe;(function(t){t.Relative="relative"})(xxe||(ad.TokenFormat=xxe={}));var bB;(function(t){t.method="textDocument/semanticTokens",t.type=new C1.RegistrationType(t.method)})(bB||(ad.SemanticTokensRegistrationType=bB={}));var vxe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=C1.MessageDirection.clientToServer,t.type=new C1.ProtocolRequestType(t.method),t.registrationMethod=bB.method})(vxe||(ad.SemanticTokensRequest=vxe={}));var bxe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=C1.MessageDirection.clientToServer,t.type=new C1.ProtocolRequestType(t.method),t.registrationMethod=bB.method})(bxe||(ad.SemanticTokensDeltaRequest=bxe={}));var Exe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=C1.MessageDirection.clientToServer,t.type=new C1.ProtocolRequestType(t.method),t.registrationMethod=bB.method})(Exe||(ad.SemanticTokensRangeRequest=Exe={}));var Ixe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=C1.MessageDirection.serverToClient,t.type=new C1.ProtocolRequestType0(t.method)})(Ixe||(ad.SemanticTokensRefreshRequest=Ixe={}))});var Sxe=G(fF=>{"use strict";f();Object.defineProperty(fF,"__esModule",{value:!0});fF.ShowDocumentRequest=void 0;var wxe=Ps(),_xe;(function(t){t.method="window/showDocument",t.messageDirection=wxe.MessageDirection.serverToClient,t.type=new wxe.ProtocolRequestType(t.method)})(_xe||(fF.ShowDocumentRequest=_xe={}))});var Bxe=G(pF=>{"use strict";f();Object.defineProperty(pF,"__esModule",{value:!0});pF.LinkedEditingRangeRequest=void 0;var Rxe=Ps(),kxe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Rxe.MessageDirection.clientToServer,t.type=new Rxe.ProtocolRequestType(t.method)})(kxe||(pF.LinkedEditingRangeRequest=kxe={}))});var Oxe=G(Oc=>{"use strict";f();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.WillDeleteFilesRequest=Oc.DidDeleteFilesNotification=Oc.DidRenameFilesNotification=Oc.WillRenameFilesRequest=Oc.DidCreateFilesNotification=Oc.WillCreateFilesRequest=Oc.FileOperationPatternKind=void 0;var _f=Ps(),Dxe;(function(t){t.file="file",t.folder="folder"})(Dxe||(Oc.FileOperationPatternKind=Dxe={}));var Pxe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=_f.MessageDirection.clientToServer,t.type=new _f.ProtocolRequestType(t.method)})(Pxe||(Oc.WillCreateFilesRequest=Pxe={}));var Nxe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=_f.MessageDirection.clientToServer,t.type=new _f.ProtocolNotificationType(t.method)})(Nxe||(Oc.DidCreateFilesNotification=Nxe={}));var Lxe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=_f.MessageDirection.clientToServer,t.type=new _f.ProtocolRequestType(t.method)})(Lxe||(Oc.WillRenameFilesRequest=Lxe={}));var Fxe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=_f.MessageDirection.clientToServer,t.type=new _f.ProtocolNotificationType(t.method)})(Fxe||(Oc.DidRenameFilesNotification=Fxe={}));var Mxe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=_f.MessageDirection.clientToServer,t.type=new _f.ProtocolNotificationType(t.method)})(Mxe||(Oc.DidDeleteFilesNotification=Mxe={}));var Qxe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=_f.MessageDirection.clientToServer,t.type=new _f.ProtocolRequestType(t.method)})(Qxe||(Oc.WillDeleteFilesRequest=Qxe={}))});var Hxe=G(Rx=>{"use strict";f();Object.defineProperty(Rx,"__esModule",{value:!0});Rx.MonikerRequest=Rx.MonikerKind=Rx.UniquenessLevel=void 0;var Uxe=Ps(),qxe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(qxe||(Rx.UniquenessLevel=qxe={}));var Wxe;(function(t){t.$import="import",t.$export="export",t.local="local"})(Wxe||(Rx.MonikerKind=Wxe={}));var Gxe;(function(t){t.method="textDocument/moniker",t.messageDirection=Uxe.MessageDirection.clientToServer,t.type=new Uxe.ProtocolRequestType(t.method)})(Gxe||(Rx.MonikerRequest=Gxe={}))});var zxe=G(kx=>{"use strict";f();Object.defineProperty(kx,"__esModule",{value:!0});kx.TypeHierarchySubtypesRequest=kx.TypeHierarchySupertypesRequest=kx.TypeHierarchyPrepareRequest=void 0;var oS=Ps(),jxe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=oS.MessageDirection.clientToServer,t.type=new oS.ProtocolRequestType(t.method)})(jxe||(kx.TypeHierarchyPrepareRequest=jxe={}));var Vxe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=oS.MessageDirection.clientToServer,t.type=new oS.ProtocolRequestType(t.method)})(Vxe||(kx.TypeHierarchySupertypesRequest=Vxe={}));var $xe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=oS.MessageDirection.clientToServer,t.type=new oS.ProtocolRequestType(t.method)})($xe||(kx.TypeHierarchySubtypesRequest=$xe={}))});var Jxe=G(sS=>{"use strict";f();Object.defineProperty(sS,"__esModule",{value:!0});sS.InlineValueRefreshRequest=sS.InlineValueRequest=void 0;var mF=Ps(),Yxe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=mF.MessageDirection.clientToServer,t.type=new mF.ProtocolRequestType(t.method)})(Yxe||(sS.InlineValueRequest=Yxe={}));var Kxe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=mF.MessageDirection.serverToClient,t.type=new mF.ProtocolRequestType0(t.method)})(Kxe||(sS.InlineValueRefreshRequest=Kxe={}))});var tve=G(Bx=>{"use strict";f();Object.defineProperty(Bx,"__esModule",{value:!0});Bx.InlayHintRefreshRequest=Bx.InlayHintResolveRequest=Bx.InlayHintRequest=void 0;var aS=Ps(),Xxe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=aS.MessageDirection.clientToServer,t.type=new aS.ProtocolRequestType(t.method)})(Xxe||(Bx.InlayHintRequest=Xxe={}));var Zxe;(function(t){t.method="inlayHint/resolve",t.messageDirection=aS.MessageDirection.clientToServer,t.type=new aS.ProtocolRequestType(t.method)})(Zxe||(Bx.InlayHintResolveRequest=Zxe={}));var eve;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=aS.MessageDirection.serverToClient,t.type=new aS.ProtocolRequestType0(t.method)})(eve||(Bx.InlayHintRefreshRequest=eve={}))});var lve=G(Sf=>{"use strict";f();Object.defineProperty(Sf,"__esModule",{value:!0});Sf.DiagnosticRefreshRequest=Sf.WorkspaceDiagnosticRequest=Sf.DocumentDiagnosticRequest=Sf.DocumentDiagnosticReportKind=Sf.DiagnosticServerCancellationData=void 0;var ave=oI(),Not=nF(),lS=Ps(),nve;(function(t){function e(n){let r=n;return r&&Not.boolean(r.retriggerRequest)}s(e,"is"),t.is=e})(nve||(Sf.DiagnosticServerCancellationData=nve={}));var rve;(function(t){t.Full="full",t.Unchanged="unchanged"})(rve||(Sf.DocumentDiagnosticReportKind=rve={}));var ive;(function(t){t.method="textDocument/diagnostic",t.messageDirection=lS.MessageDirection.clientToServer,t.type=new lS.ProtocolRequestType(t.method),t.partialResult=new ave.ProgressType})(ive||(Sf.DocumentDiagnosticRequest=ive={}));var ove;(function(t){t.method="workspace/diagnostic",t.messageDirection=lS.MessageDirection.clientToServer,t.type=new lS.ProtocolRequestType(t.method),t.partialResult=new ave.ProgressType})(ove||(Sf.WorkspaceDiagnosticRequest=ove={}));var sve;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=lS.MessageDirection.serverToClient,t.type=new lS.ProtocolRequestType0(t.method)})(sve||(Sf.DiagnosticRefreshRequest=sve={}))});var hve=G(na=>{"use strict";f();Object.defineProperty(na,"__esModule",{value:!0});na.DidCloseNotebookDocumentNotification=na.DidSaveNotebookDocumentNotification=na.DidChangeNotebookDocumentNotification=na.NotebookCellArrayChange=na.DidOpenNotebookDocumentNotification=na.NotebookDocumentSyncRegistrationType=na.NotebookDocument=na.NotebookCell=na.ExecutionSummary=na.NotebookCellKind=void 0;var EB=tF(),dm=nF(),tg=Ps(),OZ;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})(OZ||(na.NotebookCellKind=OZ={}));var UZ;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function n(i){let o=i;return dm.objectLiteral(o)&&EB.uinteger.is(o.executionOrder)&&(o.success===void 0||dm.boolean(o.success))}s(n,"is"),t.is=n;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(r,"equals"),t.equals=r})(UZ||(na.ExecutionSummary=UZ={}));var hF;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function n(o){let a=o;return dm.objectLiteral(a)&&OZ.is(a.kind)&&EB.DocumentUri.is(a.document)&&(a.metadata===void 0||dm.objectLiteral(a.metadata))}s(n,"is"),t.is=n;function r(o,a){let l=new Set;return o.document!==a.document&&l.add("document"),o.kind!==a.kind&&l.add("kind"),o.executionSummary!==a.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!UZ.equals(o.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}s(r,"diff"),t.diff=r;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let l=Array.isArray(o),c=Array.isArray(a);if(l!==c)return!1;if(l&&c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(dm.objectLiteral(o)&&dm.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(hF||(na.NotebookCell=hF={}));var cve;(function(t){function e(r,i,o,a){return{uri:r,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function n(r){let i=r;return dm.objectLiteral(i)&&dm.string(i.uri)&&EB.integer.is(i.version)&&dm.typedArray(i.cells,hF.is)}s(n,"is"),t.is=n})(cve||(na.NotebookDocument=cve={}));var cS;(function(t){t.method="notebookDocument/sync",t.messageDirection=tg.MessageDirection.clientToServer,t.type=new tg.RegistrationType(t.method)})(cS||(na.NotebookDocumentSyncRegistrationType=cS={}));var uve;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=tg.MessageDirection.clientToServer,t.type=new tg.ProtocolNotificationType(t.method),t.registrationMethod=cS.method})(uve||(na.DidOpenNotebookDocumentNotification=uve={}));var dve;(function(t){function e(r){let i=r;return dm.objectLiteral(i)&&EB.uinteger.is(i.start)&&EB.uinteger.is(i.deleteCount)&&(i.cells===void 0||dm.typedArray(i.cells,hF.is))}s(e,"is"),t.is=e;function n(r,i,o){let a={start:r,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(n,"create"),t.create=n})(dve||(na.NotebookCellArrayChange=dve={}));var fve;(function(t){t.method="notebookDocument/didChange",t.messageDirection=tg.MessageDirection.clientToServer,t.type=new tg.ProtocolNotificationType(t.method),t.registrationMethod=cS.method})(fve||(na.DidChangeNotebookDocumentNotification=fve={}));var pve;(function(t){t.method="notebookDocument/didSave",t.messageDirection=tg.MessageDirection.clientToServer,t.type=new tg.ProtocolNotificationType(t.method),t.registrationMethod=cS.method})(pve||(na.DidSaveNotebookDocumentNotification=pve={}));var mve;(function(t){t.method="notebookDocument/didClose",t.messageDirection=tg.MessageDirection.clientToServer,t.type=new tg.ProtocolNotificationType(t.method),t.registrationMethod=cS.method})(mve||(na.DidCloseNotebookDocumentNotification=mve={}))});var yve=G(gF=>{"use strict";f();Object.defineProperty(gF,"__esModule",{value:!0});gF.InlineCompletionRequest=void 0;var gve=Ps(),Ave;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=gve.MessageDirection.clientToServer,t.type=new gve.ProtocolRequestType(t.method)})(Ave||(gF.InlineCompletionRequest=Ave={}))});var Bbe=G(xe=>{"use strict";f();Object.defineProperty(xe,"__esModule",{value:!0});xe.WorkspaceSymbolRequest=xe.CodeActionResolveRequest=xe.CodeActionRequest=xe.DocumentSymbolRequest=xe.DocumentHighlightRequest=xe.ReferencesRequest=xe.DefinitionRequest=xe.SignatureHelpRequest=xe.SignatureHelpTriggerKind=xe.HoverRequest=xe.CompletionResolveRequest=xe.CompletionRequest=xe.CompletionTriggerKind=xe.PublishDiagnosticsNotification=xe.WatchKind=xe.RelativePattern=xe.FileChangeType=xe.DidChangeWatchedFilesNotification=xe.WillSaveTextDocumentWaitUntilRequest=xe.WillSaveTextDocumentNotification=xe.TextDocumentSaveReason=xe.DidSaveTextDocumentNotification=xe.DidCloseTextDocumentNotification=xe.DidChangeTextDocumentNotification=xe.TextDocumentContentChangeEvent=xe.DidOpenTextDocumentNotification=xe.TextDocumentSyncKind=xe.TelemetryEventNotification=xe.LogMessageNotification=xe.ShowMessageRequest=xe.ShowMessageNotification=xe.MessageType=xe.DidChangeConfigurationNotification=xe.ExitNotification=xe.ShutdownRequest=xe.InitializedNotification=xe.InitializeErrorCodes=xe.InitializeRequest=xe.WorkDoneProgressOptions=xe.TextDocumentRegistrationOptions=xe.StaticRegistrationOptions=xe.PositionEncodingKind=xe.FailureHandlingKind=xe.ResourceOperationKind=xe.UnregistrationRequest=xe.RegistrationRequest=xe.DocumentSelector=xe.NotebookCellTextDocumentFilter=xe.NotebookDocumentFilter=xe.TextDocumentFilter=void 0;xe.MonikerRequest=xe.MonikerKind=xe.UniquenessLevel=xe.WillDeleteFilesRequest=xe.DidDeleteFilesNotification=xe.WillRenameFilesRequest=xe.DidRenameFilesNotification=xe.WillCreateFilesRequest=xe.DidCreateFilesNotification=xe.FileOperationPatternKind=xe.LinkedEditingRangeRequest=xe.ShowDocumentRequest=xe.SemanticTokensRegistrationType=xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.TokenFormat=xe.CallHierarchyPrepareRequest=xe.CallHierarchyOutgoingCallsRequest=xe.CallHierarchyIncomingCallsRequest=xe.WorkDoneProgressCancelNotification=xe.WorkDoneProgressCreateRequest=xe.WorkDoneProgress=xe.SelectionRangeRequest=xe.DeclarationRequest=xe.FoldingRangeRefreshRequest=xe.FoldingRangeRequest=xe.ColorPresentationRequest=xe.DocumentColorRequest=xe.ConfigurationRequest=xe.DidChangeWorkspaceFoldersNotification=xe.WorkspaceFoldersRequest=xe.TypeDefinitionRequest=xe.ImplementationRequest=xe.ApplyWorkspaceEditRequest=xe.ExecuteCommandRequest=xe.PrepareRenameRequest=xe.RenameRequest=xe.PrepareSupportDefaultBehavior=xe.DocumentOnTypeFormattingRequest=xe.DocumentRangesFormattingRequest=xe.DocumentRangeFormattingRequest=xe.DocumentFormattingRequest=xe.DocumentLinkResolveRequest=xe.DocumentLinkRequest=xe.CodeLensRefreshRequest=xe.CodeLensResolveRequest=xe.CodeLensRequest=xe.WorkspaceSymbolResolveRequest=void 0;xe.InlineCompletionRequest=xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=xe.InlayHintRefreshRequest=xe.InlayHintResolveRequest=xe.InlayHintRequest=xe.InlineValueRefreshRequest=xe.InlineValueRequest=xe.TypeHierarchySupertypesRequest=xe.TypeHierarchySubtypesRequest=xe.TypeHierarchyPrepareRequest=void 0;var Mt=Ps(),Cve=tF(),Sl=nF(),Lot=HCe();Object.defineProperty(xe,"ImplementationRequest",{enumerable:!0,get:s(function(){return Lot.ImplementationRequest},"get")});var Fot=$Ce();Object.defineProperty(xe,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return Fot.TypeDefinitionRequest},"get")});var _be=KCe();Object.defineProperty(xe,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return _be.WorkspaceFoldersRequest},"get")});Object.defineProperty(xe,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return _be.DidChangeWorkspaceFoldersNotification},"get")});var Mot=ZCe();Object.defineProperty(xe,"ConfigurationRequest",{enumerable:!0,get:s(function(){return Mot.ConfigurationRequest},"get")});var Sbe=nxe();Object.defineProperty(xe,"DocumentColorRequest",{enumerable:!0,get:s(function(){return Sbe.DocumentColorRequest},"get")});Object.defineProperty(xe,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return Sbe.ColorPresentationRequest},"get")});var Rbe=oxe();Object.defineProperty(xe,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return Rbe.FoldingRangeRequest},"get")});Object.defineProperty(xe,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return Rbe.FoldingRangeRefreshRequest},"get")});var Qot=lxe();Object.defineProperty(xe,"DeclarationRequest",{enumerable:!0,get:s(function(){return Qot.DeclarationRequest},"get")});var Oot=dxe();Object.defineProperty(xe,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return Oot.SelectionRangeRequest},"get")});var jZ=hxe();Object.defineProperty(xe,"WorkDoneProgress",{enumerable:!0,get:s(function(){return jZ.WorkDoneProgress},"get")});Object.defineProperty(xe,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return jZ.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(xe,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return jZ.WorkDoneProgressCancelNotification},"get")});var VZ=Cxe();Object.defineProperty(xe,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return VZ.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return VZ.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return VZ.CallHierarchyPrepareRequest},"get")});var uS=Txe();Object.defineProperty(xe,"TokenFormat",{enumerable:!0,get:s(function(){return uS.TokenFormat},"get")});Object.defineProperty(xe,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return uS.SemanticTokensRequest},"get")});Object.defineProperty(xe,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return uS.SemanticTokensDeltaRequest},"get")});Object.defineProperty(xe,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return uS.SemanticTokensRangeRequest},"get")});Object.defineProperty(xe,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return uS.SemanticTokensRefreshRequest},"get")});Object.defineProperty(xe,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return uS.SemanticTokensRegistrationType},"get")});var Uot=Sxe();Object.defineProperty(xe,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return Uot.ShowDocumentRequest},"get")});var qot=Bxe();Object.defineProperty(xe,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return qot.LinkedEditingRangeRequest},"get")});var sI=Oxe();Object.defineProperty(xe,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return sI.FileOperationPatternKind},"get")});Object.defineProperty(xe,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return sI.DidCreateFilesNotification},"get")});Object.defineProperty(xe,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return sI.WillCreateFilesRequest},"get")});Object.defineProperty(xe,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return sI.DidRenameFilesNotification},"get")});Object.defineProperty(xe,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return sI.WillRenameFilesRequest},"get")});Object.defineProperty(xe,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return sI.DidDeleteFilesNotification},"get")});Object.defineProperty(xe,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return sI.WillDeleteFilesRequest},"get")});var $Z=Hxe();Object.defineProperty(xe,"UniquenessLevel",{enumerable:!0,get:s(function(){return $Z.UniquenessLevel},"get")});Object.defineProperty(xe,"MonikerKind",{enumerable:!0,get:s(function(){return $Z.MonikerKind},"get")});Object.defineProperty(xe,"MonikerRequest",{enumerable:!0,get:s(function(){return $Z.MonikerRequest},"get")});var zZ=zxe();Object.defineProperty(xe,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return zZ.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(xe,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return zZ.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(xe,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return zZ.TypeHierarchySupertypesRequest},"get")});var kbe=Jxe();Object.defineProperty(xe,"InlineValueRequest",{enumerable:!0,get:s(function(){return kbe.InlineValueRequest},"get")});Object.defineProperty(xe,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return kbe.InlineValueRefreshRequest},"get")});var YZ=tve();Object.defineProperty(xe,"InlayHintRequest",{enumerable:!0,get:s(function(){return YZ.InlayHintRequest},"get")});Object.defineProperty(xe,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return YZ.InlayHintResolveRequest},"get")});Object.defineProperty(xe,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return YZ.InlayHintRefreshRequest},"get")});var IB=lve();Object.defineProperty(xe,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return IB.DiagnosticServerCancellationData},"get")});Object.defineProperty(xe,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return IB.DocumentDiagnosticReportKind},"get")});Object.defineProperty(xe,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return IB.DocumentDiagnosticRequest},"get")});Object.defineProperty(xe,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return IB.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(xe,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return IB.DiagnosticRefreshRequest},"get")});var ng=hve();Object.defineProperty(xe,"NotebookCellKind",{enumerable:!0,get:s(function(){return ng.NotebookCellKind},"get")});Object.defineProperty(xe,"ExecutionSummary",{enumerable:!0,get:s(function(){return ng.ExecutionSummary},"get")});Object.defineProperty(xe,"NotebookCell",{enumerable:!0,get:s(function(){return ng.NotebookCell},"get")});Object.defineProperty(xe,"NotebookDocument",{enumerable:!0,get:s(function(){return ng.NotebookDocument},"get")});Object.defineProperty(xe,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return ng.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(xe,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ng.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(xe,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return ng.NotebookCellArrayChange},"get")});Object.defineProperty(xe,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ng.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ng.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ng.DidCloseNotebookDocumentNotification},"get")});var Wot=yve();Object.defineProperty(xe,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return Wot.InlineCompletionRequest},"get")});var qZ;(function(t){function e(n){let r=n;return Sl.string(r)||Sl.string(r.language)||Sl.string(r.scheme)||Sl.string(r.pattern)}s(e,"is"),t.is=e})(qZ||(xe.TextDocumentFilter=qZ={}));var WZ;(function(t){function e(n){let r=n;return Sl.objectLiteral(r)&&(Sl.string(r.notebookType)||Sl.string(r.scheme)||Sl.string(r.pattern))}s(e,"is"),t.is=e})(WZ||(xe.NotebookDocumentFilter=WZ={}));var GZ;(function(t){function e(n){let r=n;return Sl.objectLiteral(r)&&(Sl.string(r.notebook)||WZ.is(r.notebook))&&(r.language===void 0||Sl.string(r.language))}s(e,"is"),t.is=e})(GZ||(xe.NotebookCellTextDocumentFilter=GZ={}));var HZ;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Sl.string(r)&&!qZ.is(r)&&!GZ.is(r))return!1;return!0}s(e,"is"),t.is=e})(HZ||(xe.DocumentSelector=HZ={}));var xve;(function(t){t.method="client/registerCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(xve||(xe.RegistrationRequest=xve={}));var vve;(function(t){t.method="client/unregisterCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(vve||(xe.UnregistrationRequest=vve={}));var bve;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(bve||(xe.ResourceOperationKind=bve={}));var Eve;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Eve||(xe.FailureHandlingKind=Eve={}));var Ive;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Ive||(xe.PositionEncodingKind=Ive={}));var Tve;(function(t){function e(n){let r=n;return r&&Sl.string(r.id)&&r.id.length>0}s(e,"hasId"),t.hasId=e})(Tve||(xe.StaticRegistrationOptions=Tve={}));var wve;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||HZ.is(r.documentSelector))}s(e,"is"),t.is=e})(wve||(xe.TextDocumentRegistrationOptions=wve={}));var _ve;(function(t){function e(r){let i=r;return Sl.objectLiteral(i)&&(i.workDoneProgress===void 0||Sl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function n(r){let i=r;return i&&Sl.boolean(i.workDoneProgress)}s(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(_ve||(xe.WorkDoneProgressOptions=_ve={}));var Sve;(function(t){t.method="initialize",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Sve||(xe.InitializeRequest=Sve={}));var Rve;(function(t){t.unknownProtocolVersion=1})(Rve||(xe.InitializeErrorCodes=Rve={}));var kve;(function(t){t.method="initialized",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(kve||(xe.InitializedNotification=kve={}));var Bve;(function(t){t.method="shutdown",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})(Bve||(xe.ShutdownRequest=Bve={}));var Dve;(function(t){t.method="exit",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType0(t.method)})(Dve||(xe.ExitNotification=Dve={}));var Pve;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Pve||(xe.DidChangeConfigurationNotification=Pve={}));var Nve;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(Nve||(xe.MessageType=Nve={}));var Lve;(function(t){t.method="window/showMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Lve||(xe.ShowMessageNotification=Lve={}));var Fve;(function(t){t.method="window/showMessageRequest",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Fve||(xe.ShowMessageRequest=Fve={}));var Mve;(function(t){t.method="window/logMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Mve||(xe.LogMessageNotification=Mve={}));var Qve;(function(t){t.method="telemetry/event",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Qve||(xe.TelemetryEventNotification=Qve={}));var Ove;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Ove||(xe.TextDocumentSyncKind=Ove={}));var Uve;(function(t){t.method="textDocument/didOpen",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Uve||(xe.DidOpenTextDocumentNotification=Uve={}));var qve;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(n,"isFull"),t.isFull=n})(qve||(xe.TextDocumentContentChangeEvent=qve={}));var Wve;(function(t){t.method="textDocument/didChange",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Wve||(xe.DidChangeTextDocumentNotification=Wve={}));var Gve;(function(t){t.method="textDocument/didClose",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Gve||(xe.DidCloseTextDocumentNotification=Gve={}));var Hve;(function(t){t.method="textDocument/didSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Hve||(xe.DidSaveTextDocumentNotification=Hve={}));var jve;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(jve||(xe.TextDocumentSaveReason=jve={}));var Vve;(function(t){t.method="textDocument/willSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Vve||(xe.WillSaveTextDocumentNotification=Vve={}));var $ve;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})($ve||(xe.WillSaveTextDocumentWaitUntilRequest=$ve={}));var zve;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(zve||(xe.DidChangeWatchedFilesNotification=zve={}));var Yve;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Yve||(xe.FileChangeType=Yve={}));var Kve;(function(t){function e(n){let r=n;return Sl.objectLiteral(r)&&(Cve.URI.is(r.baseUri)||Cve.WorkspaceFolder.is(r.baseUri))&&Sl.string(r.pattern)}s(e,"is"),t.is=e})(Kve||(xe.RelativePattern=Kve={}));var Jve;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Jve||(xe.WatchKind=Jve={}));var Xve;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Xve||(xe.PublishDiagnosticsNotification=Xve={}));var Zve;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Zve||(xe.CompletionTriggerKind=Zve={}));var ebe;(function(t){t.method="textDocument/completion",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(ebe||(xe.CompletionRequest=ebe={}));var tbe;(function(t){t.method="completionItem/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(tbe||(xe.CompletionResolveRequest=tbe={}));var nbe;(function(t){t.method="textDocument/hover",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(nbe||(xe.HoverRequest=nbe={}));var rbe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(rbe||(xe.SignatureHelpTriggerKind=rbe={}));var ibe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(ibe||(xe.SignatureHelpRequest=ibe={}));var obe;(function(t){t.method="textDocument/definition",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(obe||(xe.DefinitionRequest=obe={}));var sbe;(function(t){t.method="textDocument/references",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(sbe||(xe.ReferencesRequest=sbe={}));var abe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(abe||(xe.DocumentHighlightRequest=abe={}));var lbe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(lbe||(xe.DocumentSymbolRequest=lbe={}));var cbe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(cbe||(xe.CodeActionRequest=cbe={}));var ube;(function(t){t.method="codeAction/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(ube||(xe.CodeActionResolveRequest=ube={}));var dbe;(function(t){t.method="workspace/symbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(dbe||(xe.WorkspaceSymbolRequest=dbe={}));var fbe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(fbe||(xe.WorkspaceSymbolResolveRequest=fbe={}));var pbe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(pbe||(xe.CodeLensRequest=pbe={}));var mbe;(function(t){t.method="codeLens/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(mbe||(xe.CodeLensResolveRequest=mbe={}));var hbe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType0(t.method)})(hbe||(xe.CodeLensRefreshRequest=hbe={}));var gbe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(gbe||(xe.DocumentLinkRequest=gbe={}));var Abe;(function(t){t.method="documentLink/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Abe||(xe.DocumentLinkResolveRequest=Abe={}));var ybe;(function(t){t.method="textDocument/formatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(ybe||(xe.DocumentFormattingRequest=ybe={}));var Cbe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Cbe||(xe.DocumentRangeFormattingRequest=Cbe={}));var xbe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(xbe||(xe.DocumentRangesFormattingRequest=xbe={}));var vbe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(vbe||(xe.DocumentOnTypeFormattingRequest=vbe={}));var bbe;(function(t){t.Identifier=1})(bbe||(xe.PrepareSupportDefaultBehavior=bbe={}));var Ebe;(function(t){t.method="textDocument/rename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Ebe||(xe.RenameRequest=Ebe={}));var Ibe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Ibe||(xe.PrepareRenameRequest=Ibe={}));var Tbe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Tbe||(xe.ExecuteCommandRequest=Tbe={}));var wbe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType("workspace/applyEdit")})(wbe||(xe.ApplyWorkspaceEditRequest=wbe={}))});var Pbe=G(AF=>{"use strict";f();Object.defineProperty(AF,"__esModule",{value:!0});AF.createProtocolConnection=void 0;var Dbe=oI();function Got(t,e,n,r){return Dbe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Dbe.createMessageConnection)(t,e,n,r)}s(Got,"createProtocolConnection");AF.createProtocolConnection=Got});var Lbe=G(ld=>{"use strict";f();var Hot=ld&&ld.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),yF=ld&&ld.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Hot(e,t,n)};Object.defineProperty(ld,"__esModule",{value:!0});ld.LSPErrorCodes=ld.createProtocolConnection=void 0;yF(oI(),ld);yF(tF(),ld);yF(Ps(),ld);yF(Bbe(),ld);var jot=Pbe();Object.defineProperty(ld,"createProtocolConnection",{enumerable:!0,get:s(function(){return jot.createProtocolConnection},"get")});var Nbe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Nbe||(ld.LSPErrorCodes=Nbe={}))});var ii=G(rg=>{"use strict";f();var Vot=rg&&rg.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Fbe=rg&&rg.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vot(e,t,n)};Object.defineProperty(rg,"__esModule",{value:!0});rg.createProtocolConnection=void 0;var $ot=PZ();Fbe(PZ(),rg);Fbe(Lbe(),rg);function zot(t,e,n,r){return(0,$ot.createMessageConnection)(t,e,n,r)}s(zot,"createProtocolConnection");rg.createProtocolConnection=zot});var IEe=G((LF,EEe)=>{f();(function(t,e){typeof LF=="object"&&typeof EEe<"u"?e(LF):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(LF,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function n(w,R){return w[R]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),D=n(k,c),N=e(Math),Q=e(Array),Z=n(Q,c),me=n(Z,"slice");function te(w,R){try{return{v:w.apply(this,R)}}catch(B){return{e:B}}}s(te,"safe");function H(w){return function(R){return typeof R===w}}s(H,"_createIs");function W(w){var R="[object "+w+"]";return function(B){return!!(B&&re(B)===R)}}s(W,"_createObjIs");function re(w){return _[b].call(w)}s(re,"objToString");function oe(w){return typeof w===d||w===d}s(oe,"isUndefined");function V(w){return!Y(w)}s(V,"isStrictUndefined");function q(w){return w===i||oe(w)}s(q,"isNullOrUndefined");function Y(w){return!!w||w!==r}s(Y,"isDefined");var ee=H("string"),de=H(a);function ne(w){return!w&&q(w)?!1:!!w&&typeof w===l}s(ne,"isObject");var fe=n(Q,"isArray"),pe=W("Error"),Be=n(E,"getOwnPropertyDescriptor");function Se(w,R){return!!w&&_.hasOwnProperty[v](w,R)}s(Se,"objHasOwnProperty");var Ke=e(n(E,"hasOwn"),Fe);function Fe(w,R){return Se(w,R)||!!Be(w,R)}s(Fe,"polyObjHasOwn");function ft(w,R,B){if(w&&ne(w)){for(var F in w)if(Ke(w,F)&&R[v](B||w,F,w[F])===-1)break}}s(ft,"objForEachKey");var Tt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Ct(w){var R={};if(R[Tt.c]=!0,R[Tt.e]=!0,w.l){R.get=function(){return w.l.v};var B=Be(w.l,"v");B&&B.set&&(R.set=function(F){w.l.v=F})}return ft(w,function(F,se){R[Tt[F]]=V(se)?R[Tt[F]]:se}),R}s(Ct,"_createProp");var bt=n(E,"defineProperty");function le(w,R,B){return bt(w,R,Ct(B))}s(le,"objDefine");function Oe(w,R,B,F,se){var Ee={};return ft(w,function(we,Qe){ye(Ee,we,R?Qe:we),ye(Ee,Qe,B?Qe:we)}),F?F(Ee):Ee}s(Oe,"_createKeyValueMap");function ye(w,R,B,F){bt(w,R,{value:B,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var tt=e(k),J="[object Error]";function ie(w,R){var B=o,F=_[b][v](w);F===J&&(w={stack:tt(w.stack),message:tt(w.message),name:tt(w.name)});try{B=JSON.stringify(w,i,R?typeof R=="number"?R:4:r),B=(B?B.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||tt(w)}catch(se){B=" - "+ie(se,R)}return F+": "+B}s(ie,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function Ne(w){throw new TypeError(w)}s(Ne,"throwTypeError");var be=n(E,"freeze");function ze(w){return w}s(ze,"_doNothing");function it(w){return w[u]||i}s(it,"_getProto");var gt=n(E,"assign"),Ot=n(E,"keys"),cn=e(be,ze),Lt=e(n(E,"getPrototypeOf"),it);function Gn(w){return Oe(w,1,0,cn)}s(Gn,"createEnum");function Yn(w){var R={};return ft(w,function(B,F){ye(R,B,F[1]),ye(R,F[0],F[1])}),cn(R)}s(Yn,"createSimpleMap");function fr(w){return Yn(w)}s(fr,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ut(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ut,"_getGlobalValue");function yt(){if(!Ge){var w=te(ut).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(yt,"_getGlobalConfig");var Xt=Gt;function Gt(w,R,B){var F=R?R[w]:i;return function(se){var Ee=(se?se[w]:i)||F;if(Ee||B){var we=arguments;return(Ee||B).apply(se,Ee?me[v](we,1):we)}Ne('"'+tt(w)+'" not defined for '+ie(se))}}s(Gt,"_unwrapFunctionWithPoly");var yn=n(N,"min"),vn=n(N,"max"),jt=Xt("slice",D),nn=Xt("substring",D),Jt=Gt("substr",D,Tn);function Tn(w,R,B){return q(w)&&Ne("Invalid "+ie(w)),B<0?o:(R=R||0,R<0&&(R=vn(R+w[g],0)),oe(B)?jt(w,R):jt(w,R,R+B))}s(Tn,"polyStrSubstr");function Nn(w,R){return nn(w,0,R)}s(Nn,"strLeft");var Kn="_urid",qr;function Jr(){if(!qr){var w=yt();qr=w.gblSym=w.gblSym||{k:{},s:{}}}return qr}s(Jr,"_globalSymbolRegistry");function Mr(w){var R={description:tt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Mr,"polyNewSymbol");function $r(w){var R=Jr();if(!Ke(R.k,w)){var B=Mr(w),F=Ot(R.s).length;B[Kn]=function(){return F+"_"+B[b]()},R.k[w]=B,R.s[B[Kn]()]=tt(w)}return R.k[w]}s($r,"polySymbolFor");var tr;function zr(){tr=yt()}s(zr,"_initTestHooks");function _e(w){return bt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var U="window",he;function ve(w,R){var B;return function(){return!tr&&zr(),(!B||tr.lzy)&&(B=_e(te(w,R).v)),B.v}}s(ve,"_getGlobalInstFn");function X(w){return!tr&&zr(),(!he||w===!1||tr.lzy)&&(he=_e(te(ut).v||i)),he.v}s(X,"getGlobal");function M(w,R){var B;if(!he||R===!1?B=X(R):B=he.v,B&&B[w])return B[w];if(w===U)try{return window}catch{}return i}s(M,"getInst");var ke=ve(M,["document"]);function $e(){return!!qt()}s($e,"hasWindow");var qt=ve(M,[U]);function Sn(){return!!mn()}s(Sn,"hasNavigator");var mn=ve(M,["navigator"]),lr,pr;function bn(){return lr=_e(te(M,[m]).v),lr}s(bn,"_initSymbol");function Ht(w){var R=(tr.lzy?0:lr)||bn();return R.v?R.v[w]:r}s(Ht,"_getSymbolKey");function Qr(w,R){!tr&&zr();var B=(tr.lzy?0:lr)||bn();return B.v?B.v(w):R?i:Mr(w)}s(Qr,"newSymbol");function Qs(w){return!tr&&zr(),pr=(tr.lzy?0:pr)||_e(te(Ht,["for"]).v),(pr.v||$r)(w)}s(Qs,"symbolFor");function kp(w,R,B){return w.apply(R,B)}s(kp,"fnApply");function yl(w,R,B){if(w)for(var F=w[g]>>>0,se=0;se<F&&!(se in w&&R[v](B||w,w[se],se,w)===-1);se++);}s(yl,"arrForEach");var Bp=Xt("indexOf",Z),X0=Xt("map",Z),Zs=Xt("reduce",Z),ph=e(n(E,"create"),jy);function jy(w){if(!w)return{};var R=typeof w;R!==l&&R!==a&&Ne("Prototype must be an Object or function: "+ie(w));function B(){}return s(B,"tempFunc"),B[c]=w,new B}s(jy,"polyObjCreate");var A3;function Dp(w,R){var B=E.setPrototypeOf||function(F,se){var Ee;!A3&&(A3=_e((Ee={},Ee[u]=[],Ee instanceof Array))),A3.v?F[u]=se:ft(se,function(we,Qe){return F[we]=Qe})};return B(w,R)}s(Dp,"objSetPrototypeOf");function hY(w,R,B){te(le,[R,y,{v:w,c:!0,e:!1}]),R=Dp(R,B);function F(){this[p]=R,te(le,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[c]=B===i?ph(B):(F[c]=B[c],new F),R}s(hY,"_createCustomError");function mh(w,R){R&&(w[y]=R)}s(mh,"_setName");function gY(w,R,B){var F=B||Error,se=F[c][y],Ee=Error.captureStackTrace;return hY(w,function(){var we=this,Qe=arguments;try{te(mh,[F,w]);var Xe=kp(F,we,me[v](Qe))||we;if(Xe!==we){var pt=Lt(we);pt!==Lt(Xe)&&Dp(Xe,pt)}return Ee&&Ee(Xe,we[p]),R&&R(Xe,Qe),Xe}finally{te(mh,[F,se])}},F)}s(gY,"createCustomError");function SA(){return(Date.now||y3)()}s(SA,"utcNow");function y3(){return new Date().getTime()}s(y3,"polyUtcNow");function YT(w){return s(function(B){return q(B)&&Ne("strTrim called ["+ie(B)+"]"),B&&B.replace&&(B=B.replace(w,o)),B},"_doTrim")}s(YT,"_createTrimFn");var AY=YT(/^\s+|(?=\s)\s+$/g),Tc=Gt("trim",D,AY),hh=n(N,"floor"),Wb,RA,Gb;function gh(w){if(!w||typeof w!==l)return!1;Gb||(Gb=$e()?qt():!0);var R=!1;if(w!==Gb){RA||(Wb=Function[c][b],RA=Wb[v](E));try{var B=Lt(w);R=!B,R||(Se(B,p)&&(B=B[p]),R=!!(B&&typeof B===a&&Wb[v](B)===RA))}catch{}}return R}s(gh,"isPlainObject");var KT;function Hb(){return!tr&&zr(),(!KT||tr.lzy)&&(KT=_e(te(M,["performance"]).v)),KT.v}s(Hb,"getPerformance");var C3=n(N,"round"),Vy=Gt("endsWith",D,$y);function $y(w,R,B){ee(w)||Ne("'"+ie(w)+"' is not a string");var F=ee(R)?R:tt(R),se=!oe(B)&&B<w[g]?B:w[g];return nn(w,se-F[g],se)===F}s($y,"polyStrEndsWith");var Un=Xt("indexOf",D),au="ref",kA="unref",zy="hasRef",yY="enabled";function Ah(w,R,B){var F=!0,se=w?R(i):i,Ee;function we(){return F=!1,se&&se[kA]&&se[kA](),Ee}s(we,"_unref");function Qe(){se&&B(se),se=i}s(Qe,"_cancel");function Xe(){return se=R(se),F||we(),Ee}s(Xe,"_refresh");function pt(on){!on&&se&&Qe(),on&&!se&&Xe()}return s(pt,"_setEnabled"),Ee={cancel:Qe,refresh:Xe},Ee[zy]=function(){return se&&se[zy]?se[zy]():F},Ee[au]=function(){return F=!0,se&&se[au]&&se[au](),Ee},Ee[kA]=we,Ee=bt(Ee,yY,{get:s(function(){return!!se},"get"),set:pt}),{h:Ee,dn:s(function(){se=i},"dn")}}s(Ah,"_createTimerHandler");function CY(w,R,B){var F=fe(R),se=F?R.length:0,Ee=(se>0?R[0]:F?r:R)||setTimeout,we=(se>1?R[1]:r)||clearTimeout,Qe=B[0];B[0]=function(){Xe.dn(),kp(Qe,r,me[v](arguments))};var Xe=Ah(w,function(pt){if(pt){if(pt.refresh)return pt.refresh(),pt;kp(we,r,[pt])}return kp(Ee,r,B)},function(pt){kp(we,r,[pt])});return Xe.h}s(CY,"_createTimeoutWith");function x3(w,R){return CY(!0,r,me[v](arguments))}s(x3,"scheduleTimeout");var jb=Gn,xY=fr,Vb="toLowerCase",La="length",yh="warnToConsole",$b="throwInternal",w6="watch",vY="apply",Hi="push",BA="splice",Ch="logger",v3="cancel",zb="name",lu="unload",_6="version",S6="loggingLevelConsole",b3="messageId",DA="message",E3="diagLog",R6="userAgent",I3="split",Yy="replace",xh="type",k6="evtName",JT="traceFlags",T3="getAttribute",XT;function bY(w,R){XT||(XT=gY("AggregationError",function(F,se){se[La]>1&&(F.errors=se[1])}));var B=w||"One or more errors occurred.";throw yl(R,function(F,se){B+=`
`.concat(se," > ").concat(ie(F))}),new XT(B,R||[])}s(bY,"throwAggregationError");var EY="function",B6="object",IY="undefined",Pp="prototype",ZT=Object,w3=ZT[Pp];(X()||{}).Symbol,(X()||{}).Reflect;var ew="hasOwnProperty",TY=s(function(w){for(var R,B=1,F=arguments.length;B<F;B++){R=arguments[B];for(var se in R)w3[ew].call(R,se)&&(w[se]=R[se])}return w},"__objAssignFnImpl"),tw=gt||TY,nw=s(function(w,R){return nw=ZT.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,F){B.__proto__=F}||function(B,F){for(var se in F)F[ew](se)&&(B[se]=F[se])},nw(w,R)},"extendStaticsFn");function vh(w,R){typeof R!==EY&&R!==null&&Ne("Class extends value "+String(R)+" is not a constructor or null"),nw(w,R);function B(){this.constructor=w}s(B,"__"),w[Pp]=R===null?ph(R):(B[Pp]=R[Pp],new B)}s(vh,"__extendsFn");var rw,PA="constructor",ju="prototype",Vu="function",NA="_dynInstFuncs",Ky="_isDynProxy",bh="_dynClass",Jy="_dynCls$",_3="_dynInstChk",LA=_3,Xy="_dfOpts",S3="_unknown_",iw="__proto__",Zy="_dyn"+iw,Yb="__dynProto$Gbl",ow="_dynInstProto",eC="useBaseInst",tC="setInstFuncs",Kb=Object,FA=Kb.getPrototypeOf,nC=Kb.getOwnPropertyNames,R3=X(),sw=R3[Yb]||(R3[Yb]={o:(rw={},rw[tC]=!0,rw[eC]=!0,rw),n:1e3});function rC(w){return w&&(w===Kb[ju]||w===Array[ju])}s(rC,"_isObjectOrArrayPrototype");function iC(w){return rC(w)||w===Function[ju]}s(iC,"_isObjectArrayOrFunctionPrototype");function Np(w){var R;if(w){if(FA)return FA(w);var B=w[iw]||w[ju]||(w[PA]?w[PA][ju]:null);R=w[Zy]||B,Se(w,Zy)||(delete w[ow],R=w[Zy]=w[ow]||w[Zy],w[ow]=B)}return R}s(Np,"_getObjProto");function Z0(w,R){var B=[];if(nC)B=nC(w);else for(var F in w)typeof F=="string"&&Se(w,F)&&B.push(F);if(B&&B.length>0)for(var se=0;se<B.length;se++)R(B[se])}s(Z0,"_forEachProp");function oC(w,R,B){return R!==PA&&typeof w[R]===Vu&&(B||Se(w,R))&&R!==iw&&R!==ju}s(oC,"_isDynamicCandidate");function sC(w){Ne("DynamicProto: "+w)}s(sC,"_throwTypeError");function aw(w){var R=ph(null);return Z0(w,function(B){!R[B]&&oC(w,B,!1)&&(R[B]=w[B])}),R}s(aw,"_getInstanceFuncs");function k3(w,R){for(var B=w.length-1;B>=0;B--)if(w[B]===R)return!0;return!1}s(k3,"_hasVisited");function B3(w,R,B,F){function se(Xe,pt,on){var Ir=pt[on];if(Ir[Ky]&&F){var Wr=Xe[NA]||{};Wr[LA]!==!1&&(Ir=(Wr[pt[bh]]||{})[on]||Ir)}return function(){return Ir.apply(Xe,arguments)}}s(se,"_instFuncProxy");var Ee=ph(null);Z0(B,function(Xe){Ee[Xe]=se(R,B,Xe)});for(var we=Np(w),Qe=[];we&&!iC(we)&&!k3(Qe,we);)Z0(we,function(Xe){!Ee[Xe]&&oC(we,Xe,!FA)&&(Ee[Xe]=se(R,we,Xe))}),Qe.push(we),we=Np(we);return Ee}s(B3,"_getBaseFuncs");function wY(w,R,B,F){var se=null;if(w&&Se(B,bh)){var Ee=w[NA]||ph(null);if(se=(Ee[B[bh]]||ph(null))[R],se||sC("Missing ["+R+"] "+Vu),!se[_3]&&Ee[LA]!==!1){for(var we=!Se(w,R),Qe=Np(w),Xe=[];we&&Qe&&!iC(Qe)&&!k3(Xe,Qe);){var pt=Qe[R];if(pt){we=pt===F;break}Xe.push(Qe),Qe=Np(Qe)}try{we&&(w[R]=se),se[_3]=1}catch{Ee[LA]=!1}}}return se}s(wY,"_getInstFunc");function _Y(w,R,B){var F=R[w];return F===B&&(F=Np(R)[w]),typeof F!==Vu&&sC("["+w+"] is not a "+Vu),F}s(_Y,"_getProtoFunc");function SY(w,R,B,F,se){function Ee(Xe,pt){var on=s(function(){var Ir=wY(this,pt,Xe,on)||_Y(pt,Xe,on);return Ir.apply(this,arguments)},"dynProtoProxy");return on[Ky]=1,on}if(s(Ee,"_createDynamicPrototype"),!rC(w)){var we=B[NA]=B[NA]||ph(null);if(!rC(we)){var Qe=we[R]=we[R]||ph(null);we[LA]!==!1&&(we[LA]=!!se),rC(Qe)||Z0(B,function(Xe){oC(B,Xe,!1)&&B[Xe]!==F[Xe]&&(Qe[Xe]=B[Xe],delete B[Xe],(!Se(w,Xe)||w[Xe]&&!w[Xe][Ky])&&(w[Xe]=Ee(w,Xe)))})}}}s(SY,"_populatePrototype");function RY(w,R){if(FA){for(var B=[],F=Np(R);F&&!iC(F)&&!k3(B,F);){if(F===w)return!0;B.push(F),F=Np(F)}return!1}return!0}s(RY,"_checkPrototype");function D3(w,R){return Se(w,ju)?w.name||R||S3:((w||{})[PA]||{}).name||R||S3}s(D3,"_getObjName");function Jb(w,R,B,F){Se(w,ju)||sC("theClass is an invalid class definition.");var se=w[ju];RY(se,R)||sC("["+D3(w)+"] not in hierarchy of ["+D3(R)+"]");var Ee=null;Se(se,bh)?Ee=se[bh]:(Ee=Jy+D3(w,"_")+"$"+sw.n,sw.n++,se[bh]=Ee);var we=Jb[Xy],Qe=!!we[eC];Qe&&F&&F[eC]!==void 0&&(Qe=!!F[eC]);var Xe=aw(R),pt=B3(se,R,Xe,Qe);B(R,pt);var on=!!FA&&!!we[tC];on&&F&&(on=!!F[tC]),SY(se,Ee,R,Xe,on!==!1)}s(Jb,"dynamicProto"),Jb[Xy]=sw.o;var Jl=void 0,Os="",D6="Not dynamic - ",P6=/-([a-z])/g,Xb=/([^\w\d_$])/g,P3=/^(\d+[\w\d_$])/;function N3(w){return!q(w)}s(N3,"isNotNullOrUndefined");function lw(w){var R=w;return R&&ee(R)&&(R=R[Yy](P6,function(B,F){return F.toUpperCase()}),R=R[Yy](Xb,"_"),R=R[Yy](P3,function(B,F){return"_"+F})),R}s(lw,"normalizeJsName");function N6(w,R){return w&&R?Un(w,R)!==-1:!1}s(N6,"strContains");function Lp(w){return w&&w.toISOString()||""}s(Lp,"toISOString");function Eh(w){return pe(w)?w[zb]:Os}s(Eh,"getExceptionName");function Zb(w){return function(){function R(){var B=this;w&&ft(w,function(F,se){B[F]=se})}return s(R,"class_1"),R}()}s(Zb,"createClassFromInterface");var L6="console",cw="JSON",kY="crypto",Ih="msCrypto",aC="msie",Yr="trident/",lC=null,MA=null,Fp=null;function uw(){return typeof console!==IY?console:M(L6)}s(uw,"getConsole");function ji(){return!!(typeof JSON===B6&&JSON||M(cw)!==null)}s(ji,"hasJSON");function cC(){return ji()?JSON||M(cw):null}s(cC,"getJSON");function pa(){return M(kY)}s(pa,"getCrypto");function uC(){return M(Ih)}s(uC,"getMsCrypto");function eE(){var w=mn();if(w&&(w[R6]!==MA||lC===null)){MA=w[R6];var R=(MA||Os)[Vb]();lC=N6(R,aC)||N6(R,Yr)}return lC}s(eE,"isIE");function Th(w){return(Fp===null||w===!1)&&(Fp=Sn()&&!!mn().sendBeacon),Fp}s(Th,"isBeaconsSupported");function tE(w,R){if(w)for(var B=0;B<w[La];B++){var F=w[B];if(F[zb]&&F[zb]===R)return F}return{}}s(tE,"_getNamedValue");function dw(w){var R=ke();return R&&w?tE(R.querySelectorAll("meta"),w).content:null}s(dw,"findMetaTag");function ef(w){var R,B=Hb();if(B){var F=B.getEntriesByType("navigation")||[];R=tE((F[La]>0?F[0]:{}).serverTiming,w).description}return R}s(ef,"findNamedServerTiming");var dC=4294967296,Wd=4294967295,fC=123456789,wh=987654321,Cl=!1,pC=fC,tf=wh;function F6(w){w<0&&(w>>>=0),pC=fC+w&Wd,tf=wh-w&Wd,Cl=!0}s(F6,"_mwcSeed");function QA(){try{var w=SA()&2147483647;F6((Math.random()*dC^w)+w)}catch{}}s(QA,"_autoSeedMwc");function fw(w){return w>0?hh(mC()/Wd*(w+1))>>>0:0}s(fw,"randomValue");function mC(w){var R=0,B=pa()||uC();return B&&B.getRandomValues&&(R=B.getRandomValues(new Uint32Array(1))[0]&Wd),R===0&&eE()&&(Cl||QA(),R=M6()&Wd),R===0&&(R=hh(dC*Math.random()|0)),w||(R>>>=0),R}s(mC,"random32");function M6(w){tf=36969*(tf&65535)+(tf>>16)&Wd,pC=18e3*(pC&65535)+(pC>>16)&Wd;var R=(tf<<16)+(pC&65535)>>>0&Wd|0;return w||(R>>>=0),R}s(M6,"mwcRandom32");function OA(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=mC()>>>0,F=0,se=Os;se[La]<w;)F++,se+=R.charAt(B&63),B>>>=6,F===5&&(B=(mC()<<2&4294967295|B&3)>>>0,F=0);return se}s(OA,"newId");var nf="3.3.6",pw="."+OA(6),UA=0;function rf(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(rf,"_canAcceptData");function mw(w,R){var B=R[w.id];if(!B){B={};try{rf(R)&&le(R,w.id,{e:!1,v:B})}catch{}}return B}s(mw,"_getCache");function Mp(w,R){return R===void 0&&(R=!1),lw(w+UA+++(R?"."+nf:Os)+pw)}s(Mp,"createUniqueNamespace");function of(w){var R={id:Mp("_aiData-"+(w||Os)+"."+nf),accept:s(function(B){return rf(B)},"accept"),get:s(function(B,F,se,Ee){var we=B[R.id];return we?we[lw(F)]:(Ee&&(we=mw(R,B),we[lw(F)]=se),se)},"get"),kill:s(function(B,F){if(B&&B[F])try{delete B[F]}catch{}},"kill")};return R}s(of,"createElmNodeData");function _h(w){return w&&ne(w)&&(w.isVal||w.fb||Ke(w,"v")||Ke(w,"mrg")||Ke(w,"ref")||w.set)}s(_h,"_isConfigDefaults");function hw(w,R,B){var F,se=B.dfVal||Y;if(R&&B.fb){var Ee=B.fb;fe(Ee)||(Ee=[Ee]);for(var we=0;we<Ee[La];we++){var Qe=Ee[we],Xe=R[Qe];if(se(Xe)?F=Xe:w&&(Xe=w.cfg[Qe],se(Xe)&&(F=Xe),w.set(w.cfg,tt(Qe),Xe)),se(F))break}}return!se(F)&&se(B.v)&&(F=B.v),F}s(hw,"_getDefault");function Sh(w,R,B){var F=B;if(B&&_h(B)&&(F=hw(w,R,B)),F){_h(F)&&(F=Sh(w,R,F));var se;fe(F)?(se=[],se[La]=F[La]):gh(F)&&(se={}),se&&(ft(F,function(Ee,we){we&&_h(we)&&(we=Sh(w,R,we)),se[Ee]=we}),F=se)}return F}s(Sh,"_resolveDefaultValue");function Rh(w,R,B,F){var se,Ee,we,Qe=F,Xe,pt,on,Ir;_h(Qe)?(se=Qe.isVal,Ee=Qe.set,on=Qe.rdOnly,Ir=Qe.blkVal,Xe=Qe.mrg,pt=Qe.ref,!pt&&oe(pt)&&(pt=!!Xe),we=hw(w,R,Qe)):we=F,Ir&&w.blkVal(R,B);var Wr,un=!0,En=R[B];(En||!q(En))&&(Wr=En,un=!1,se&&Wr!==we&&!se(Wr)&&(Wr=we,un=!0),Ee&&(Wr=Ee(Wr,we,R),un=Wr===we)),un?we?Wr=Sh(w,R,we):Wr=we:(gh(Wr)||fe(we))&&Xe&&we&&(gh(we)||fe(we))&&ft(we,function(Or,Tr){Rh(w,Wr,Or,Tr)}),w.set(R,B,Wr),pt&&w.ref(R,B),on&&w.rdOnly(R,B)}s(Rh,"_applyDefaultValue");var Xl=Qs("[[ai_dynCfg_1]]"),L3=Qs("[[ai_blkDynCfg_1]]"),nE=Qs("[[ai_frcDynCfg_1]]");function F3(w){if(w){var R;if(fe(w)?(R=[],R[La]=w[La]):gh(w)&&(R={}),R)return ft(w,function(B,F){R[B]=F3(F)}),R}return w}s(F3,"_cfgDeepCopy");function M3(w){if(w){var R=w[Xl]||w;if(R.cfg&&(R.cfg===w||R.cfg[Xl]===R))return R}return null}s(M3,"getDynamicConfigHandler");function hC(w){if(w&&(gh(w)||fe(w)))try{w[L3]=!0}catch{}return w}s(hC,"blockDynamicConversion");function kh(w,R,B){var F=!1;return B&&!w[R.blkVal]&&(F=B[nE],!F&&!B[L3]&&(F=gh(B)||fe(B))),F}s(kh,"_canMakeDynamic");function Gd(w){Ne("InvalidAccess:"+w)}s(Gd,"throwInvalidAccess");var Q6=["push","pop","shift","unshift","splice"],Qp=s(function(w,R,B,F){w&&w[$b](3,108,"".concat(B," [").concat(R,"] failed - ")+ie(F))},"_throwDynamicError");function Q3(w,R,B){fe(R)&&yl(Q6,function(F){var se=R[F];R[F]=function(){for(var Ee=[],we=0;we<arguments.length;we++)Ee[we]=arguments[we];var Qe=se[vY](this,Ee);return qA(w,R,B,"Patching"),Qe}})}s(Q3,"_patchArray");function Op(w,R){var B=Be(w,R);return B&&B.get}s(Op,"_getOwnPropGetter");function O6(w,R,B,F){var se={n:B,h:[],trk:s(function(pt){pt&&pt.fn&&(Bp(se.h,pt)===-1&&se.h[Hi](pt),w.trk(pt,se))},"trk"),clr:s(function(pt){var on=Bp(se.h,pt);on!==-1&&se.h[BA](on,1)},"clr")},Ee=!0,we=!1;function Qe(){Ee&&(we=we||kh(Qe,w,F),F&&!F[Xl]&&we&&(F=qA(w,F,B,"Converting")),Ee=!1);var pt=w.act;return pt&&se.trk(pt),F}s(Qe,"_getProperty"),Qe[w.prop]={chng:s(function(){w.add(se)},"chng")};function Xe(pt){if(F!==pt){Qe[w.ro]&&!w.upd&&Gd("["+B+"] is read-only:"+ie(R)),Ee&&(we=we||kh(Qe,w,F),Ee=!1);var on=we&&Qe[w.rf];if(we)if(on){ft(F,function(Wr){F[Wr]=pt?pt[Wr]:Jl});try{ft(pt,function(Wr,un){gC(w,F,Wr,un)}),pt=F}catch(Wr){Qp((w.hdlr||{})[Ch],B,"Assigning",Wr),we=!1}}else F&&F[Xl]&&ft(F,function(Wr){var un=Op(F,Wr);if(un){var En=un[w.prop];En&&En.chng()}});if(pt!==F){var Ir=pt&&kh(Qe,w,pt);!on&&Ir&&(pt=qA(w,pt,B,"Converting")),F=pt,we=Ir}w.add(se)}}s(Xe,"_setProperty"),le(R,se.n,{g:Qe,s:Xe})}s(O6,"_createDynamicProperty");function gC(w,R,B,F){if(R){var se=Op(R,B),Ee=se&&!!se[w.prop];Ee?R[B]=F:O6(w,R,B,F)}return R}s(gC,"_setDynamicProperty");function O3(w,R,B,F){if(R){var se=Op(R,B),Ee=se&&!!se[w.prop],we=F&&F[0],Qe=F&&F[1],Xe=F&&F[2];if(!Ee){if(Xe)try{hC(R)}catch(pt){Qp((w.hdlr||{})[Ch],B,"Blocking",pt)}try{gC(w,R,B,R[B]),se=Op(R,B)}catch(pt){Qp((w.hdlr||{})[Ch],B,"State",pt)}}we&&(se[w.rf]=we),Qe&&(se[w.ro]=Qe),Xe&&(se[w.blkVal]=!0)}return R}s(O3,"_setDynamicPropertyState");function qA(w,R,B,F){try{ft(R,function(se,Ee){gC(w,R,se,Ee)}),R[Xl]||(bt(R,Xl,{get:s(function(){return w.hdlr},"get")}),Q3(w,R,B))}catch(se){Qp((w.hdlr||{})[Ch],B,F,se)}return R}s(qA,"_makeDynamicObject");var WA="[[ai_",$u="]]";function U6(w){var R=Qr(WA+"get"+w.uid+$u),B=Qr(WA+"ro"+w.uid+$u),F=Qr(WA+"rf"+w.uid+$u),se=Qr(WA+"blkVal"+w.uid+$u),Ee=Qr(WA+"dtl"+w.uid+$u),we=null,Qe=null,Xe;function pt(un,En){var Or=Xe.act;try{Xe.act=un,un&&un[Ee]&&(yl(un[Ee],function(hi){hi.clr(un)}),un[Ee]=[]),En({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(hi){var Tr=w[Ch];throw Tr&&Tr[$b](1,107,ie(hi)),hi}finally{Xe.act=Or||null}}s(pt,"_useHandler");function on(){if(we){var un=we;we=null,Qe&&Qe[v3](),Qe=null;var En=[];if(yl(un,function(Or){if(Or&&(Or[Ee]&&(yl(Or[Ee],function(Tr){Tr.clr(Or)}),Or[Ee]=null),Or.fn))try{pt(Or,Or.fn)}catch(Tr){En[Hi](Tr)}}),we)try{on()}catch(Or){En[Hi](Or)}En[La]>0&&bY("Watcher error(s): ",En)}}s(on,"_notifyWatchers");function Ir(un){if(un&&un.h[La]>0){we||(we=[]),Qe||(Qe=x3(function(){Qe=null,on()},0));for(var En=0;En<un.h[La];En++){var Or=un.h[En];Or&&Bp(we,Or)===-1&&we[Hi](Or)}}}s(Ir,"_addWatcher");function Wr(un,En){if(un){var Or=un[Ee]=un[Ee]||[];Bp(Or,En)===-1&&Or[Hi](En)}}return s(Wr,"_trackHandler"),Xe={prop:R,ro:B,rf:F,blkVal:se,hdlr:w,add:Ir,notify:on,use:pt,trk:Wr},Xe}s(U6,"_createState");function BY(w,R){var B={fn:R,rm:s(function(){B.fn=null,w=null,R=null},"rm")};return le(B,"toJSON",{v:s(function(){return"WatcherHandler"+(B.fn?"":"[X]")},"v")}),w.use(B,R),B}s(BY,"_createAndUseHandler");function q6(w,R,B){var F=M3(R);if(F)return F;var se=Mp("dyncfg",!0),Ee=R&&B!==!1?R:F3(R),we;function Qe(){we.notify()}s(Qe,"_notifyWatchers");function Xe(Tr,hi,no){try{Tr=gC(we,Tr,hi,no)}catch(ki){Qp(w,hi,"Setting value",ki)}return Tr[hi]}s(Xe,"_setValue");function pt(Tr){return BY(we,Tr)}s(pt,"_watch");function on(Tr,hi){we.use(null,function(no){var ki=we.upd;try{oe(hi)||(we.upd=hi),Tr(no)}finally{we.upd=ki}})}s(on,"_block");function Ir(Tr,hi){var no;return O3(we,Tr,hi,(no={},no[0]=!0,no))[hi]}s(Ir,"_ref");function Wr(Tr,hi){var no;return O3(we,Tr,hi,(no={},no[1]=!0,no))[hi]}s(Wr,"_rdOnly");function un(Tr,hi){var no;return O3(we,Tr,hi,(no={},no[2]=!0,no))[hi]}s(un,"_blkPropValue");function En(Tr,hi){return hi&&ft(hi,function(no,ki){Rh(Or,Tr,no,ki)}),Tr}s(En,"_applyDefaults");var Or={uid:null,cfg:Ee,logger:w,notify:Qe,set:Xe,setDf:En,watch:pt,ref:Ir,rdOnly:Wr,blkVal:un,_block:on};return le(Or,"uid",{c:!1,e:!1,w:!1,v:se}),we=U6(Or),qA(we,Ee,"config","Creating"),Or}s(q6,"_createDynamicHandler");function W6(w,R){w?(w[yh](R),w[$b](2,108,R)):Gd(R)}s(W6,"_logInvalidAccess");function rE(w,R,B,F){var se=q6(B,w||{},F);return R&&se.setDf(se.cfg,R),se}s(rE,"createDynamicConfig");function G6(w,R,B){var F=w[Xl]||w;return F.cfg&&(F.cfg===w||F.cfg[Xl]===F)?F[w6](R):(W6(B,D6+ie(w)),rE(w,null,B)[w6](R))}s(G6,"onConfigChange");var gw=null;function H6(){var w=M("Microsoft");return w&&(gw=w.ApplicationInsights),gw}s(H6,"_getExtensionNamespace");function DY(w){var R=gw;return!R&&w.disableDbgExt!==!0&&(R=gw||H6()),R?R.ChromeDbgExt:null}s(DY,"getDebugExt");var AC,Aw="warnToConsole",j6="AI (Internal): ",V6="AI: ",PY="AITR_",NY={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},$6=(AC={},AC[0]=null,AC[1]="errorToConsole",AC[2]=Aw,AC[3]="debugToConsole",AC);function z6(w){return w?'"'+w[Yy](/\"/g,Os)+'"':Os}s(z6,"_sanitizeDiagnosticText");function yw(w,R){var B=uw();if(B){var F="log";B[w]&&(F=w),de(B[F])&&B[F](R)}}s(yw,"_logToConsole");var Cw=function(){function w(R,B,F,se){F===void 0&&(F=!1);var Ee=this;Ee[b3]=R,Ee[DA]=(F?V6:j6)+R;var we=Os;ji()&&(we=cC().stringify(se));var Qe=(B?" message:"+z6(B):Os)+(se?" props:"+z6(we):Os);Ee[DA]+=Qe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function LY(w,R){return(w||{})[Ch]||new xw(R)}s(LY,"safeGetLogger");var xw=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var B=0,F={},se,Ee,we,Qe,Xe;Jb(w,this,function(pt){Xe=Ir(R||{}),pt.consoleLoggingLevel=function(){return se},pt[$b]=function(En,Or,Tr,hi,no){no===void 0&&(no=!1);var ki=new Cw(Or,Tr,no,hi);if(Qe)throw ie(ki);var Fa=$6[En]||Aw;if(oe(ki[DA]))un("throw"+(En===1?"Critical":"Warning"),ki);else{if(no){var zC=+ki[b3];!F[zC]&&se>=En&&(pt[Fa](ki[DA]),F[zC]=!0)}else se>=En&&pt[Fa](ki[DA]);on(En,ki)}},pt.debugToConsole=function(En){yw("debug",En),un("warning",En)},pt[yh]=function(En){yw("warn",En),un("warning",En)},pt.errorToConsole=function(En){yw("error",En),un("error",En)},pt.resetInternalMessageCount=function(){B=0,F={}},pt.logInternalMessage=on,pt[lu]=function(En){Xe&&Xe.rm(),Xe=null};function on(En,Or){if(!Wr()){var Tr=!0,hi=PY+Or[b3];if(F[hi]?Tr=!1:F[hi]=!0,Tr&&(En<=Ee&&(pt.queue[Hi](Or),B++,un(En===1?"error":"warn",Or)),B===we)){var no="Internal events throttle limit per PageView reached for this app.",ki=new Cw(23,no,!1);pt.queue[Hi](ki),En===1?pt.errorToConsole(no):pt[yh](no)}}}s(on,"_logInternalMessage");function Ir(En){return G6(rE(En,NY,pt).cfg,function(Or){var Tr=Or.cfg;se=Tr[S6],Ee=Tr.loggingLevelTelemetry,we=Tr.maxMessageLimit,Qe=Tr.enableDebug})}s(Ir,"_setDefaultsFromConfig");function Wr(){return B>=we}s(Wr,"_areInternalMessagesThrottled");function un(En,Or){var Tr=DY(R||{});Tr&&Tr[E3]&&Tr[E3](En,Or)}s(un,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function vw(w){return w||new xw}s(vw,"_getLogger");function cu(w,R,B,F,se,Ee){Ee===void 0&&(Ee=!1),vw(w)[$b](R,B,F,se,Ee)}s(cu,"_throwInternal");function bw(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Os,B,F=0;F<4;F++)B=mC(),R+=w[B&15]+w[B>>4&15]+w[B>>8&15]+w[B>>12&15]+w[B>>16&15]+w[B>>20&15]+w[B>>24&15]+w[B>>28&15];var se=w[8+(mC()&3)|0];return Jt(R,0,8)+Jt(R,9,4)+"4"+Jt(R,13,3)+se+Jt(R,16,3)+Jt(R,19,12)}s(bw,"generateW3CId");var yC=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,U3="00",zu="ff",mi="00000000000000000000000000000000",Up="0000000000000000",ma=1;function Hd(w,R,B){return w&&w[La]===R&&w!==B?!!w.match(/^[\da-f]*$/i):!1}s(Hd,"_isValid");function Ew(w,R,B){return Hd(w,R)?w:B}s(Ew,"_formatValue");function GA(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[La]<2;)R="0"+R;return R}s(GA,"_formatFlags");function CC(w,R,B,F){return{version:Hd(F,2,zu)?F:U3,traceId:xC(w)?w:bw(),spanId:vC(R)?R:Nn(bw(),16),traceFlags:B>=0&&B<=255?B:1}}s(CC,"createTraceParent");function Yu(w,R){if(!w||(fe(w)&&(w=w[0]||""),!w||!ee(w)||w[La]>8192))return null;if(w.indexOf(",")!==-1){var B=w[I3](",");w=B[R>0&&B[La]>R?R:0]}var F=yC.exec(Tc(w));return!F||F[1]===zu||F[2]===mi||F[3]===Up?null:{version:(F[1]||Os)[Vb](),traceId:(F[2]||Os)[Vb](),spanId:(F[3]||Os)[Vb](),traceFlags:parseInt(F[4],16)}}s(Yu,"parseTraceParent");function xC(w){return Hd(w,32,mi)}s(xC,"isValidTraceId");function vC(w){return Hd(w,16,Up)}s(vC,"isValidSpanId");function bC(w){return!(!w||!Hd(w[_6],2,zu)||!Hd(w.traceId,32,mi)||!Hd(w.spanId,16,Up)||!Hd(GA(w[JT]),2))}s(bC,"isValidTraceParent");function Iw(w){return bC(w)?(w[JT]&ma)===ma:!1}s(Iw,"isSampledFlag");function HA(w){if(w){var R=GA(w[JT]);Hd(R,2)||(R="01");var B=w[_6]||U3;return B!=="00"&&B!=="ff"&&(B=U3),"".concat(B.toLowerCase(),"-").concat(Ew(w.traceId,32,mi).toLowerCase(),"-").concat(Ew(w.spanId,16,Up).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(HA,"formatTraceParent");function q3(w){var R="traceparent",B=Yu(dw(R),w);return B||(B=Yu(ef(R),w)),B}s(q3,"findW3cTraceParent");function W3(w){var R=w.getElementsByTagName("script"),B=[];return yl(R,function(F){var se=F[T3]("src");if(se){var Ee=F[T3]("crossorigin"),we=F.hasAttribute("async")===!0,Qe=F.hasAttribute("defer")===!0,Xe=F[T3]("referrerpolicy"),pt={url:se};Ee&&(pt.crossOrigin=Ee),we&&(pt.async=we),Qe&&(pt.defer=Qe),Xe&&(pt.referrerPolicy=Xe),B[Hi](pt)}}),B}s(W3,"findAllScripts");var Tw="on",iE="attachEvent",ww="addEventListener",_w="detachEvent",Y6="removeEventListener",G3="events";Mp("aiEvtPageHide"),Mp("aiEvtPageShow");var FY=/\.[\.]+/g,MY=/[\.]+$/,Sw=1,EC=of("events"),xl=/^([^.]*)(?:\.(.+)|)/;function oE(w){return w&&w[Yy]?w[Yy](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Os):w}s(oE,"_normalizeNamespace");function il(w,R){if(R){var B=Os;fe(R)?(B=Os,yl(R,function(se){se=oE(se),se&&(se[0]!=="."&&(se="."+se),B+=se)})):B=oE(R),B&&(B[0]!=="."&&(B="."+B),w=(w||Os)+B)}var F=xl.exec(w||Os)||[];return{type:F[1],ns:(F[2]||Os).replace(FY,".").replace(MY,Os)[I3](".").sort().join(".")}}s(il,"_getEvtNamespace");function Bh(w,R,B){B===void 0&&(B=!0);var F=EC.get(w,G3,{},B),se=F[R];return se||(se=F[R]=[]),se}s(Bh,"_getRegisteredEvents");function K6(w,R,B,F){w&&R&&R[xh]&&(w[Y6]?w[Y6](R[xh],B,F):w[_w]&&w[_w](Tw+R[xh],B))}s(K6,"_doDetach");function QY(w,R,B,F){var se=!1;return w&&R&&R[xh]&&B&&(w[ww]?(w[ww](R[xh],B,F),se=!0):w[iE]&&(w[iE](Tw+R[xh],B),se=!0)),se}s(QY,"_doAttach");function sE(w,R,B,F){for(var se=R[La];se--;){var Ee=R[se];Ee&&(!B.ns||B.ns===Ee[k6].ns)&&(!F||F(Ee))&&(K6(w,Ee[k6],Ee.handler,Ee.capture),R[BA](se,1))}}s(sE,"_doUnregister");function H3(w,R,B){if(R[xh])sE(w,Bh(w,R[xh]),R,B);else{var F=EC.get(w,G3,{});ft(F,function(se,Ee){sE(w,Ee,R,B)}),Ot(F)[La]===0&&EC.kill(w,G3)}}s(H3,"_unregisterEvents");function OY(w,R){var B;return R?(fe(R)?B=[w].concat(R):B=[w,R],B=il("xx",B).ns[I3](".")):B=w,B}s(OY,"mergeEvtNamespace");function j3(w,R,B,F,se){se===void 0&&(se=!1);var Ee=!1;if(w)try{var we=il(R,F);if(Ee=QY(w,we,B,se),Ee&&EC.accept(w)){var Qe={guid:Sw++,evtName:we,handler:B,capture:se};Bh(w,we.type)[Hi](Qe)}}catch{}return Ee}s(j3,"eventOn");function J6(w,R,B,F,se){if(se===void 0&&(se=!1),w)try{var Ee=il(R,F),we=!1;H3(w,Ee,function(Qe){return Ee.ns&&!B||Qe.handler===B?(we=!0,!0):!1}),we||K6(w,Ee,B,se)}catch{}}s(J6,"eventOff");var Rw="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",X6="sampleRate",kw="ProcessLegacy",Z6="http.method",V3="https://dc.services.visualstudio.com",aE="/v2/track",sf="not_specified",$3="iKey",e7=xY({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Dh="split",Er="length",IC="toLowerCase",jA="ingestionendpoint",VA="toString",z3="removeItem",lE="message",TC="count",Bw="preTriggerDate",Y3="getUTCDate",Dw="stringify",wC="pathname",$A="match",K3="correlationHeaderExcludePatterns",Ku="name",_C="extensionConfig",af="properties",wc="measurements",SC="sizeInBytes",cE="typeName",RC="exceptions",uE="severityLevel",kC="problemGroup",uu="parsedStack",Pw="hasFullStack",Nw="assembly",jd="fileName",BC="line",Ph="aiDataContract",dE="duration";function J3(w,R,B){var F=R[Er],se=X3(w,R);if(se[Er]!==F){for(var Ee=0,we=se;B[we]!==void 0;)Ee++,we=nn(se,0,147)+t7(Ee);se=we}return se}s(J3,"dataSanitizeKeyAndAddUniqueness");function X3(w,R){var B;return R&&(R=Tc(tt(R)),R[Er]>150&&(B=nn(R,0,150),cu(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),B||R}s(X3,"dataSanitizeKey");function ol(w,R,B){B===void 0&&(B=1024);var F;return R&&(B=B||1024,R=Tc(tt(R)),R[Er]>B&&(F=nn(R,0,B),cu(w,2,61,"string value is too long. It has been truncated to "+B+" characters.",{value:R},!0))),F||R}s(ol,"dataSanitizeString");function lf(w,R){return ek(w,R,2048,66)}s(lf,"dataSanitizeUrl");function Lw(w,R){var B;return R&&R[Er]>32768&&(B=nn(R,0,32768),cu(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),B||R}s(Lw,"dataSanitizeMessage");function Z3(w,R){var B;if(R){var F=""+R;F[Er]>32768&&(B=nn(F,0,32768),cu(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return B||R}s(Z3,"dataSanitizeException");function qp(w,R){if(R){var B={};ft(R,function(F,se){if(ne(se)&&ji())try{se=cC()[Dw](se)}catch(Ee){cu(w,2,49,"custom property is not valid",{exception:Ee},!0)}se=ol(w,se,8192),F=J3(w,F,B),B[F]=se}),R=B}return R}s(qp,"dataSanitizeProperties");function Ju(w,R){if(R){var B={};ft(R,function(F,se){F=J3(w,F,B),B[F]=se}),R=B}return R}s(Ju,"dataSanitizeMeasurements");function DC(w,R){return R&&ek(w,R,128,69)[VA]()}s(DC,"dataSanitizeId");function ek(w,R,B,F){var se;return R&&(R=Tc(tt(R)),R[Er]>B&&(se=nn(R,0,B),cu(w,2,F,"input is too long, it has been truncated to "+B+" characters.",{data:R},!0))),se||R}s(ek,"dataSanitizeInput");function t7(w){var R="00"+w;return Jt(R,R[Er]-3)}s(t7,"dsPadNumber");var tk=ke()||{},n7=0,UY=[null,null,null,null,null];function PC(w){var R=n7,B=UY,F=B[R];return tk.createElement?B[R]||(F=B[R]=tk.createElement("a")):F={host:i7(w,!0)},F.href=w,R++,R>=B[Er]&&(R=0),n7=R,F}s(PC,"urlParseUrl");function qY(w){var R,B=PC(w);return B&&(R=B.href),R}s(qY,"urlGetAbsoluteUrl");function WY(w){var R,B=PC(w);return B&&(R=B[wC]),R}s(WY,"urlGetPathName");function r7(w,R){return w?w.toUpperCase()+" "+R:R}s(r7,"urlGetCompleteUrl");function i7(w,R){var B=Wp(w,R)||"";if(B){var F=B[$A](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Er]>3&&ee(F[2])&&F[2][Er]>0)return F[2]+(F[3]||"")}return B}s(i7,"urlParseHost");function Wp(w,R){var B=null;if(w){var F=w[$A](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Er]>2&&ee(F[2])&&F[2][Er]>0&&(B=F[2]||"",R&&F[Er]>2)){var se=(F[1]||"")[IC](),Ee=F[3]||"";(se==="http"&&Ee===":80"||se==="https"&&Ee===":443")&&(Ee=""),B+=Ee}}return B}s(Wp,"urlParseFullHost");var o7=[V3+aE,"https://breeze.aimon.applicationinsights.io"+aE,"https://dc-int.services.visualstudio.com"+aE],NC="cid-v1:";function s7(w){return Bp(o7,w[IC]())!==-1}s(s7,"isInternalApplicationInsightsEndpoint");function nk(w){NC=w}s(nk,"correlationIdSetPrefix");function rk(){return NC}s(rk,"correlationIdGetPrefix");function Nh(w,R,B){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[K3]){for(var F=0;F<w.correlationHeaderExcludePatterns[Er];F++)if(w[K3][F].test(R))return!1}var se=PC(R).host[IC]();if(se&&(Un(se,":443")!==-1||Un(se,":80")!==-1)&&(se=(Wp(R,!0)||"")[IC]()),(!w||!w.enableCorsCorrelation)&&se&&se!==B)return!1;var Ee=w&&w.correlationHeaderDomains;if(Ee){var we;if(yl(Ee,function(pt){var on=new RegExp(pt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||on.test(se)}),!we)return!1}var Qe=w&&w.correlationHeaderExcludedDomains;if(!Qe||Qe[Er]===0)return!0;for(var F=0;F<Qe[Er];F++){var Xe=new RegExp(Qe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Xe.test(se))return!1}return se&&se[Er]>0}s(Nh,"correlationIdCanIncludeCorrelationHeader");function a7(w){if(w){var R=l7(w,e7[1]);if(R&&R!==NC)return R}}s(a7,"correlationIdGetCorrelationContext");function l7(w,R){if(w)for(var B=w[Dh](","),F=0;F<B[Er];++F){var se=B[F][Dh]("=");if(se[Er]===2&&se[0]===R)return se[1]}}s(l7,"correlationIdGetCorrelationContextValue");function c7(w,R,B,F){var se,Ee=F,we=F;if(R&&R[Er]>0){var Qe=PC(R);if(se=Qe.host,!Ee)if(Qe[wC]!=null){var Xe=Qe.pathname[Er]===0?"/":Qe[wC];Xe.charAt(0)!=="/"&&(Xe="/"+Xe),we=Qe[wC],Ee=ol(w,B?B+" "+Xe:Xe)}else Ee=ol(w,R)}else se=F,Ee=F;return{target:se,name:Ee,data:we}}s(c7,"AjaxHelperParseDependencyPath");function GY(){var w=Hb();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return SA()}s(GY,"dateTimeUtilsNow");function HY(w,R){var B=null;return w!==0&&R!==0&&!q(w)&&!q(R)&&(B=R-w),B}s(HY,"dateTimeUtilsDuration");function ik(w,R){var B=w||{};return{getName:s(function(){return B[Ku]},"getName"),setName:s(function(F){R&&R.setName(F),B[Ku]=F},"setName"),getTraceId:s(function(){return B.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),xC(F)&&(B.traceID=F)},"setTraceId"),getSpanId:s(function(){return B.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),vC(F)&&(B.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return B.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),B.traceFlags=F},"setTraceFlags")}}s(ik,"createDistributedTraceContextFromTrace");var LC=jb({LocalStorage:0,SessionStorage:1}),jY=jb({AI:0,AI_AND_W3C:1,W3C:2}),fE=jb({Normal:1,Critical:2}),Lh=void 0,Vd=void 0,u7="";function FC(){return Fw()?MC(LC.LocalStorage):null}s(FC,"_getLocalStorageObject");function MC(w){try{if(q(X()))return null;var R=new Date()[VA](),B=M(w===LC.LocalStorage?"localStorage":"sessionStorage"),F=u7+R;B.setItem(F,R);var se=B.getItem(F)!==R;if(B[z3](F),!se)return B}catch{}return null}s(MC,"_getVerifiedStorageObject");function QC(){return Gp()?MC(LC.SessionStorage):null}s(QC,"_getSessionStorageObject");function pE(){Lh=!1,Vd=!1}s(pE,"utlDisableStorage");function mE(w){u7=w||""}s(mE,"utlSetStoragePrefix");function VY(){Lh=Fw(!0),Vd=Gp(!0)}s(VY,"utlEnableStorage");function Fw(w){return(w||Lh===void 0)&&(Lh=!!MC(LC.LocalStorage)),Lh}s(Fw,"utlCanUseLocalStorage");function d7(w,R){var B=FC();if(B!==null)try{return B.getItem(R)}catch(F){Lh=!1,cu(w,2,1,"Browser failed read of local storage. "+Eh(F),{exception:ie(F)})}return null}s(d7,"utlGetLocalStorage");function f7(w,R,B){var F=FC();if(F!==null)try{return F.setItem(R,B),!0}catch(se){Lh=!1,cu(w,2,3,"Browser failed write to local storage. "+Eh(se),{exception:ie(se)})}return!1}s(f7,"utlSetLocalStorage");function Xu(w,R){var B=FC();if(B!==null)try{return B[z3](R),!0}catch(F){Lh=!1,cu(w,2,5,"Browser failed removal of local storage item. "+Eh(F),{exception:ie(F)})}return!1}s(Xu,"utlRemoveStorage");function Gp(w){return(w||Vd===void 0)&&(Vd=!!MC(LC.SessionStorage)),Vd}s(Gp,"utlCanUseSessionStorage");function OC(){var w=[];return Gp()&&ft(M("sessionStorage"),function(R){w.push(R)}),w}s(OC,"utlGetSessionStorageKeys");function p7(w,R){var B=QC();if(B!==null)try{return B.getItem(R)}catch(F){Vd=!1,cu(w,2,2,"Browser failed read of session storage. "+Eh(F),{exception:ie(F)})}return null}s(p7,"utlGetSessionStorage");function $Y(w,R,B){var F=QC();if(F!==null)try{return F.setItem(R,B),!0}catch(se){Vd=!1,cu(w,2,4,"Browser failed write to session storage. "+Eh(se),{exception:ie(se)})}return!1}s($Y,"utlSetSessionStorage");function m7(w,R){var B=QC();if(B!==null)try{return B[z3](R),!0}catch(F){Vd=!1,cu(w,2,6,"Browser failed removal of session storage item. "+Eh(F),{exception:ie(F)})}return!1}s(m7,"utlRemoveSessionStorage");var zY="appInsightsThrottle",YY=function(){function w(R,B){var F=this,se,Ee,we,Qe,Xe,pt,on,Ir=!1,Wr=!1;En(),F._getDbgPlgTargets=function(){return[on]},F.getConfig=function(){return we},F.canThrottle=function(It){var Bn=yk(It),nr=Or(It);return no(nr,se,Bn)},F.isTriggered=function(It){return B7(It)},F.isReady=function(){return Ir},F.flush=function(It){try{var Bn=D7(It);if(Bn&&Bn[Er]>0){var nr=Bn.slice(0);return on[It]=[],yl(nr,function(Fo){un(Fo.msgID,Fo[lE],Fo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(on){var It=!0;return ft(on,function(Bn){var nr=F.flush(parseInt(Bn));It=It&&nr}),It}}catch{}return!1},F.onReadyState=function(It,Bn){return Bn===void 0&&(Bn=!0),Ir=q(It)?!0:It,Ir&&Bn?F.flushAll():null},F.sendMessage=function(It,Bn,nr){return un(It,Bn,nr,!0)};function un(It,Bn,nr,Fo){if(Ir){var Ma=pK(It);if(!Ma)return;var Us=Or(It),Qa=yk(It),YA=no(Us,se,Qa),Uh=!1,YC=0,P7=B7(It);try{YA&&!P7?(YC=yn(Us.limit.maxSendNumber,Qa[TC]+1),Qa[TC]=0,Uh=!0,Xe[It]=!0,Qa[Bw]=new Date):(Xe[It]=YA,Qa[TC]+=1);var N7=ki(It);Ak(Ee,N7,Qa);for(var Kw=0;Kw<YC;Kw++)k7(It,Ee,Bn,nr)}catch{}return{isThrottled:Uh,throttleNum:YC}}else if(Fo){var mK=D7(It);mK.push({msgID:It,message:Bn,severity:nr})}return null}s(un,"_flushMessage");function En(){Ee=LY(R),Xe={},Qe={},on={},we={},Tr(109),pt=N3(B)?B:"",R.addUnloadHook(G6(R.config,function(It){var Bn=It.cfg;se=Fw();var nr=Bn.throttleMgrCfg||{};ft(nr,function(Fo,Ma){Tr(parseInt(Fo),Ma)})}))}s(En,"_initConfig");function Or(It){return we[It]||we[109]}s(Or,"_getCfgByKey");function Tr(It,Bn){var nr,Fo;try{var Ma=Bn||{},Us={};Us.disabled=!!Ma.disabled;var Qa=Ma.interval||{};Wr=Qa?.daysOfMonth&&Qa?.daysOfMonth[Er]>0,Us.interval=hi(Qa);var YA={samplingRate:((nr=Ma.limit)===null||nr===void 0?void 0:nr.samplingRate)||100,maxSendNumber:((Fo=Ma.limit)===null||Fo===void 0?void 0:Fo.maxSendNumber)||1};Us.limit=YA,we[It]=Us}catch{}}s(Tr,"_setCfgByKey");function hi(It){It=It||{};var Bn=It?.monthInterval,nr=It?.dayInterval;return q(Bn)&&q(nr)&&(It.monthInterval=3,Wr||(It.daysOfMonth=[28],Wr=!0)),It={monthInterval:It?.monthInterval,dayInterval:It?.dayInterval,daysOfMonth:It?.daysOfMonth},It}s(hi,"_getIntervalConfig");function no(It,Bn,nr){if(It&&!It.disabled&&Bn&&N3(nr)){var Fo=bE(),Ma=nr.date,Us=It.interval,Qa=1;if(Us?.monthInterval){var YA=(Fo.getUTCFullYear()-Ma.getUTCFullYear())*12+Fo.getUTCMonth()-Ma.getUTCMonth();Qa=Yw(Us.monthInterval,0,YA)}var Uh=1;if(Wr)Uh=Bp(Us.daysOfMonth,Fo[Y3]());else if(Us?.dayInterval){var YC=hh((Fo.getTime()-Ma.getTime())/864e5);Uh=Yw(Us.dayInterval,0,YC)}return Qa>=0&&Uh>=0}return!1}s(no,"_canThrottle");function ki(It,Bn){var nr=N3(Bn)?Bn:"";return It?zY+nr+"-"+It:null}s(ki,"_getLocalStorageName");function Fa(It){try{if(It){var Bn=new Date;return It.getUTCFullYear()===Bn.getUTCFullYear()&&It.getUTCMonth()===Bn.getUTCMonth()&&It[Y3]()===Bn[Y3]()}}catch{}return!1}s(Fa,"_isTriggeredOnCurDate");function zC(It,Bn,nr){try{var Fo={date:bE(),count:0};if(It){var Ma=JSON.parse(It),Us={date:bE(Ma.date)||Fo.date,count:Ma[TC]||Fo[TC],preTriggerDate:Ma.preTriggerDate?bE(Ma[Bw]):void 0};return Us}else return Ak(Bn,nr,Fo),Fo}catch{}return null}s(zC,"_getLocalStorageObj");function bE(It){try{if(It){var Bn=new Date(It);if(!isNaN(Bn.getDate()))return Bn}else return new Date}catch{}return null}s(bE,"_getThrottleDate");function Ak(It,Bn,nr){try{return f7(It,Bn,Tc(JSON[Dw](nr)))}catch{}return!1}s(Ak,"_resetLocalStorage");function Yw(It,Bn,nr){return It<=0?1:nr>=Bn&&(nr-Bn)%It==0?hh((nr-Bn)/It)+1:-1}s(Yw,"_checkInterval");function k7(It,Bn,nr,Fo){cu(Bn,Fo||1,It,nr)}s(k7,"_sendMessage");function pK(It){try{var Bn=Or(It);return fw(1e6)<=Bn.limit.samplingRate}catch{}return!1}s(pK,"_canSampledIn");function yk(It){try{var Bn=Qe[It];if(!Bn){var nr=ki(It,pt);Bn=zC(d7(Ee,nr),Ee,nr),Qe[It]=Bn}return Qe[It]}catch{}return null}s(yk,"_getLocalStorageObjByKey");function B7(It){var Bn=Xe[It];if(q(Bn)){Bn=!1;var nr=yk(It);nr&&(Bn=Fa(nr[Bw])),Xe[It]=Bn}return Xe[It]}s(B7,"_isTrigger");function D7(It){return on=on||{},q(on[It])&&(on[It]=[]),on[It]}s(D7,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),ok=";",cf="=";function Mw(w){if(!w)return{};var R=w[Dh](ok),B=Zs(R,function(se,Ee){var we=Ee[Dh](cf);if(we[Er]===2){var Qe=we[0][IC](),Xe=we[1];se[Qe]=Xe}return se},{});if(Ot(B)[Er]>0){if(B.endpointsuffix){var F=B.location?B.location+".":"";B[jA]=B[jA]||"https://"+F+"dc."+B.endpointsuffix}B[jA]=B[jA]||V3,Vy(B[jA],"/")&&(B[jA]=B[jA].slice(0,-1))}return B}s(Mw,"parseConnectionString");var Qw={parse:Mw},Ow=function(){function w(R,B,F){var se=this,Ee=this;Ee.ver=1,Ee.sampleRate=100,Ee.tags={},Ee[Ku]=ol(R,F)||sf,Ee.data=B,Ee.time=Lp(new Date),Ee[Ph]={time:1,iKey:1,name:1,sampleRate:s(function(){return se.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),KY=function(){function w(R,B,F,se){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Ee=this;Ee.ver=2,Ee[Ku]=ol(R,B)||sf,Ee[af]=qp(R,F),Ee[wc]=Ju(R,se)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),JY=58,h7=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,XY=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,UC=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,g7=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,ZY=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,eK=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,tK=/([^\(\s\n]+):([0-9]+)$/,A7="<no_method>",qC="error",du="stack",hE="stackDetails",Uw="errorSrc",gE="message",AE="description",sk=[{re:XY,len:5,m:1,fn:2,ln:3,col:4},{chk:qw,pre:wn,re:UC,len:4,m:1,fn:2,ln:3},{re:g7,len:3,m:1,fn:2,hdl:lk},{re:ZY,len:2,fn:1,hdl:lk}];function wn(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(wn,"_scrubAnonymous");function qw(w){return Un(w,"[native")<0}s(qw,"_ignoreNative");function yE(w,R){var B=w;return B&&!ee(B)&&(JSON&&JSON[Dw]?(B=JSON[Dw](w),R&&(!B||B==="{}")&&(de(w[VA])?B=w[VA]():B=""+w)):B=""+w+" - (Missing JSON.stringify)"),B||""}s(yE,"_stringify");function Fh(w,R){var B=w;return w&&(B&&!ee(B)&&(B=w[gE]||w[AE]||B),B&&!ee(B)&&(B=yE(B,!0)),w.filename&&(B=B+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&Un(B||"",R)===-1&&(B=R+": "+B),B||""}s(Fh,"_formatMessage");function y7(w){try{if(ne(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(y7,"_isExceptionDetailsInternal");function C7(w){try{if(ne(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(C7,"_isExceptionInternal");function Ww(w){return w&&w.src&&ee(w.src)&&w.obj&&fe(w.obj)}s(Ww,"_isStackDetails");function Hp(w){var R=w||"";ee(R)||(ee(R[du])?R=R[du]:R=""+R);var B=R[Dh](`
`);return{src:R,obj:B}}s(Hp,"_convertStackObj");function x7(w){for(var R=[],B=w[Dh](`
`),F=0;F<B[Er];F++){var se=B[F];B[F+1]&&(se+="@"+B[F+1],F++),R.push(se)}return{src:w,obj:R}}s(x7,"_getOperaStack");function Gw(w){var R=null;if(w)try{if(w[du])R=Hp(w[du]);else if(w[qC]&&w[qC][du])R=Hp(w[qC][du]);else if(w.exception&&w.exception[du])R=Hp(w.exception[du]);else if(Ww(w))R=w;else if(Ww(w[hE]))R=w[hE];else if(qt()&&qt().opera&&w[gE])R=x7(w[lE]);else if(w.reason&&w.reason[du])R=Hp(w.reason[du]);else if(ee(w))R=Hp(w);else{var B=w[gE]||w[AE]||"";ee(w[Uw])&&(B&&(B+=`
`),B+=" from "+w[Uw]),B&&(R=Hp(B))}}catch(F){R=Hp(F)}return R||{src:"",obj:null}}s(Gw,"_getStackFromErrorObj");function v7(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(v7,"_formatStackTrace");function Hw(w){var R,B=w.obj;if(B&&B[Er]>0){R=[];var F=0,se=!1,Ee=0;yl(B,function(Or){if(se||nK(Or)){var Tr=tt(Or);se=!0;var hi=rK(Tr,F);hi&&(Ee+=hi[SC],R.push(hi),F++)}});var we=32*1024;if(Ee>we)for(var Qe=0,Xe=R[Er]-1,pt=0,on=Qe,Ir=Xe;Qe<Xe;){var Wr=R[Qe][SC],un=R[Xe][SC];if(pt+=Wr+un,pt>we){var En=Ir-on+1;R.splice(on,En);break}on=Qe,Ir=Xe,Qe++,Xe--}}return R}s(Hw,"_parseStack");function WC(w){var R="";if(w&&(R=w.typeName||w[Ku]||"",!R))try{var B=/function (.{1,200})\(/,F=B.exec(w.constructor[VA]());R=F&&F[Er]>1?F[1]:""}catch{}return R}s(WC,"_getErrorType");function jw(w){if(w)try{if(!ee(w)){var R=WC(w),B=yE(w,!1);return(!B||B==="{}")&&(w[qC]&&(w=w[qC],R=WC(w)),B=yE(w,!0)),Un(B,R)!==0&&R!=="String"?R+":"+B:B}}catch{}return""+(w||"")}s(jw,"_formatErrorCode");var uf=function(){function w(R,B,F,se,Ee,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Qe=this;Qe.ver=2,C7(B)?(Qe[RC]=B[RC]||[],Qe[af]=B[af],Qe[wc]=B[wc],B[uE]&&(Qe[uE]=B[uE]),B.id&&(Qe.id=B.id,B[af].id=B.id),B[kC]&&(Qe[kC]=B[kC]),q(B.isManual)||(Qe.isManual=B.isManual)):(F||(F={}),we&&(F.id=we),Qe[RC]=[I7(R,B,F)],Qe[af]=qp(R,F),Qe[wc]=Ju(R,se),Ee&&(Qe[uE]=Ee),we&&(Qe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,B,F,se,Ee,we,Qe,Xe){var pt=WC(Ee||we||R);return{message:Fh(R,pt),url:B,lineNumber:F,columnNumber:se,error:jw(Ee||we||R),evt:jw(we||R),typeName:pt,stackDetails:Gw(Qe||Ee||we),errorSrc:Xe}},w.CreateFromInterface=function(R,B,F,se){var Ee=B[RC]&&X0(B[RC],function(Qe){return ak(R,Qe)}),we=new w(R,tw(tw({},B),{exceptions:Ee}),F,se);return we},w.prototype.toInterface=function(){var R=this,B=R.exceptions,F=R.properties,se=R.measurements,Ee=R.severityLevel,we=R.problemGroup,Qe=R.id,Xe=R.isManual,pt=B instanceof Array&&X0(B,function(on){return on.toInterface()})||void 0;return{ver:"4.0",exceptions:pt,severityLevel:Ee,properties:F,measurements:se,problemGroup:we,id:Qe,isManual:Xe}},w.CreateSimpleException=function(R,B,F,se,Ee,we){var Qe;return{exceptions:[(Qe={},Qe[Pw]=!0,Qe.message=R,Qe.stack=Ee,Qe.typeName=B,Qe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=jw,w}(),b7=cn({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function E7(){var w=this,R=fe(w[uu])&&X0(w[uu],function(F){return w7(F)}),B={id:w.id,outerId:w.outerId,typeName:w[cE],message:w[lE],hasFullStack:w[Pw],stack:w[du],parsedStack:R||void 0};return B}s(E7,"_toInterface");function I7(w,R,B){var F,se,Ee,we,Qe,Xe,pt,on;if(y7(R))we=R[cE],Qe=R[lE],pt=R[du],on=R[uu]||[],Xe=R[Pw];else{var Ir=R,Wr=Ir&&Ir.evt;pe(Ir)||(Ir=Ir[qC]||Wr||Ir),we=ol(w,WC(Ir))||sf,Qe=Lw(w,Fh(R||Ir,we))||sf;var un=R[hE]||Gw(R);on=Hw(un),fe(on)&&X0(on,function(En){En[Nw]=ol(w,En[Nw]),En[jd]=ol(w,En[jd])}),pt=Z3(w,v7(un)),Xe=fe(on)&&on[Er]>0,B&&(B[cE]=B[cE]||we)}return F={},F[Ph]=b7,F.id=se,F.outerId=Ee,F.typeName=we,F.message=Qe,F[Pw]=Xe,F.stack=pt,F.parsedStack=on,F.toInterface=E7,F}s(I7,"_createExceptionDetails");function ak(w,R){var B=fe(R[uu])&&X0(R[uu],function(se){return T7(se)})||R[uu],F=I7(w,tw(tw({},R),{parsedStack:B}));return F}s(ak,"_createExDetailsFromInterface");function CE(w,R){var B=R[$A](eK);if(B&&B[Er]>=4)w[jd]=B[1],w[BC]=parseInt(B[2]);else{var F=R[$A](tK);F&&F[Er]>=3?(w[jd]=F[1],w[BC]=parseInt(F[2])):w[jd]=R}}s(CE,"_parseFilename");function lk(w,R,B){var F=w[jd];R.fn&&B&&B[Er]>R.fn&&(R.ln&&B[Er]>R.ln?(F=Tc(B[R.fn]||""),w[BC]=parseInt(Tc(B[R.ln]||""))||0):F=Tc(B[R.fn]||"")),F&&CE(w,F)}s(lk,"_handleFilename");function nK(w){var R=!1;if(w&&ee(w)){var B=Tc(w);B&&(R=h7.test(B))}return R}s(nK,"_isStackFrame");var ck=cn({level:1,method:1,assembly:0,fileName:0,line:0});function rK(w,R){var B,F;if(w&&ee(w)&&Tc(w)){F=(B={},B[Ph]=ck,B.level=R,B.assembly=Tc(w),B.method=A7,B.fileName="",B.line=0,B.sizeInBytes=0,B);for(var se=0;se<sk[Er];){var Ee=sk[se];if(Ee.chk&&!Ee.chk(w))break;Ee.pre&&(w=Ee.pre(w));var we=w[$A](Ee.re);if(we&&we[Er]>=Ee.len){Ee.m&&(F.method=Tc(we[Ee.m]||A7)),Ee.hdl?Ee.hdl(F,Ee,we):Ee.fn&&(Ee.ln?(F[jd]=Tc(we[Ee.fn]||""),F[BC]=parseInt(Tc(we[Ee.ln]||""))||0):CE(F,we[Ee.fn]||""));break}se++}}return uk(F)}s(rK,"_extractStackFrame");function T7(w){var R,B=(R={},R[Ph]=ck,R.level=w.level,R.method=w.method,R.assembly=w[Nw],R.fileName=w[jd],R.line=w[BC],R.sizeInBytes=0,R);return uk(B)}s(T7,"_stackFrameFromInterface");function uk(w){var R=JY;return w&&(R+=w.method[Er],R+=w.assembly[Er],R+=w.fileName[Er],R+=w.level.toString()[Er],R+=w.line.toString()[Er],w[SC]=R),w}s(uk,"_populateFrameSizeInBytes");function w7(w){return{level:w.level,method:w.method,assembly:w[Nw],fileName:w[jd],line:w[BC]}}s(w7,"_parsedFrameToInterface");var _7=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),iK=function(){function w(R,B,F,se,Ee,we,Qe,Xe,pt){this.aiDataContract={ver:1,metrics:1,properties:0};var on=this;on.ver=2;var Ir=new _7;Ir[TC]=se>0?se:void 0,Ir.max=isNaN(we)||we===null?void 0:we,Ir.min=isNaN(Ee)||Ee===null?void 0:Ee,Ir[Ku]=ol(R,B)||sf,Ir.value=F,Ir.stdDev=isNaN(Qe)||Qe===null?void 0:Qe,on.metrics=[Ir],on[af]=qp(R,Xe),on[wc]=Ju(R,pt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),GC="";function oK(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[IC]()==="true"}s(oK,"stringToBoolOrDefault");function dk(w){(isNaN(w)||w<0)&&(w=0),w=C3(w);var R=GC+w%1e3,B=GC+hh(w/1e3)%60,F=GC+hh(w/(1e3*60))%60,se=GC+hh(w/(1e3*60*60))%24,Ee=hh(w/(1e3*60*60*24));return R=R[Er]===1?"00"+R:R[Er]===2?"0"+R:R,B=B[Er]<2?"0"+B:B,F=F[Er]<2?"0"+F:F,se=se[Er]<2?"0"+se:se,(Ee>0?Ee+".":GC)+se+":"+F+":"+B+"."+R}s(dk,"msToTimeSpan");function sK(w,R){var B=null;return yl(w,function(F){if(F.identifier===R)return B=F,-1}),B}s(sK,"getExtensionByName");function Mh(w,R,B,F,se){return!se&&ee(w)&&(w==="Script error."||w==="Script error")}s(Mh,"isCrossOriginError");var aK=function(){function w(R,B,F,se,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Xe=this;Xe.ver=2,Xe.id=DC(R,Qe),Xe.url=lf(R,F),Xe[Ku]=ol(R,B)||sf,isNaN(se)||(Xe[dE]=dk(se)),Xe[af]=qp(R,Ee),Xe[wc]=Ju(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),HC=function(){function w(R,B,F,se,Ee,we,Qe,Xe,pt,on,Ir,Wr){pt===void 0&&(pt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var un=this;un.ver=2,un.id=B,un[dE]=dk(Ee),un.success=we,un.resultCode=Qe+"",un.type=ol(R,pt);var En=c7(R,F,Xe,se);un.data=lf(R,se)||En.data,un.target=ol(R,En.target),on&&(un.target="".concat(un.target," | ").concat(on)),un[Ku]=ol(R,En[Ku]),un[af]=qp(R,Ir),un[wc]=Ju(R,Wr)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),fk=function(){function w(R,B,F,se,Ee){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,B=B||sf,we[lE]=Lw(R,B),we[af]=qp(R,se),we[wc]=Ju(R,Ee),F&&(we[uE]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),xE=function(){function w(R,B,F,se,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Xe=this;Xe.ver=2,Xe.url=lf(R,F),Xe[Ku]=ol(R,B)||sf,Xe[af]=qp(R,Ee),Xe[wc]=Ju(R,we),Qe&&(Xe.domProcessing=Qe.domProcessing,Xe[dE]=Qe[dE],Xe.networkConnect=Qe.networkConnect,Xe.perfTotal=Qe.perfTotal,Xe.receivedResponse=Qe.receivedResponse,Xe.sentRequest=Qe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),lK=function(){function w(R,B){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=B}return s(w,"Data"),w}(),Vw=jb({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),cK=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,B,F,se){se===void 0&&(se=!1);var Ee;return F&&R[_C]&&R[_C][F]&&!q(R[_C][F][B])?Ee=R[_C][F][B]:Ee=R[B],q(Ee)?se:Ee},w}();function df(w){var R="ai."+w+".";return function(B){return R+B}}s(df,"_aiNameFunc");var jC=df("application"),ha=df("device"),$w=df("location"),VC=df("operation"),zw=df("session"),Qh=df("user"),zA=df("cloud"),vE=df("internal"),Oh=function(w){vh(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(Zb({applicationVersion:jC("ver"),applicationBuild:jC("build"),applicationTypeId:jC("typeId"),applicationId:jC("applicationId"),applicationLayer:jC("layer"),deviceId:ha("id"),deviceIp:ha("ip"),deviceLanguage:ha("language"),deviceLocale:ha("locale"),deviceModel:ha("model"),deviceFriendlyName:ha("friendlyName"),deviceNetwork:ha("network"),deviceNetworkName:ha("networkName"),deviceOEMName:ha("oemName"),deviceOS:ha("os"),deviceOSVersion:ha("osVersion"),deviceRoleInstance:ha("roleInstance"),deviceRoleName:ha("roleName"),deviceScreenResolution:ha("screenResolution"),deviceType:ha("type"),deviceMachineName:ha("machineName"),deviceVMName:ha("vmName"),deviceBrowser:ha("browser"),deviceBrowserVersion:ha("browserVersion"),locationIp:$w("ip"),locationCountry:$w("country"),locationProvince:$w("province"),locationCity:$w("city"),operationId:VC("id"),operationName:VC("name"),operationParentId:VC("parentId"),operationRootId:VC("rootId"),operationSyntheticSource:VC("syntheticSource"),operationCorrelationVector:VC("correlationVector"),sessionId:zw("id"),sessionIsFirst:zw("isFirst"),sessionIsNew:zw("isNew"),userAccountAcquisitionDate:Qh("accountAcquisitionDate"),userAccountId:Qh("accountId"),userAgent:Qh("userAgent"),userId:Qh("id"),userStoreRegion:Qh("storeRegion"),userAuthUserId:Qh("authUserId"),userAnonymousUserAcquisitionDate:Qh("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Qh("authUserAcquisitionDate"),cloudName:zA("name"),cloudRole:zA("role"),cloudRoleVer:zA("roleVer"),cloudRoleInstance:zA("roleInstance"),cloudEnvironment:zA("environment"),cloudLocation:zA("location"),cloudDeploymentUnit:zA("deploymentUnit"),internalNodeName:vE("nodeName"),internalSdkVersion:vE("sdkVersion"),internalAgentVersion:vE("agentVersion"),internalSnippet:vE("snippet"),internalSdkSrc:vE("sdkSrc")}));function pk(w,R,B,F,se,Ee){B=ol(F,B)||sf,(q(w)||q(R)||q(B))&&We("Input doesn't contain all required fields");var we="";w[$3]&&(we=w[$3],delete w[$3]);var Qe={name:B,time:Lp(new Date),iKey:we,ext:Ee||{},tags:[],data:{},baseType:R,baseData:w};return q(se)||ft(se,function(Xe,pt){Qe.data[Xe]=pt}),Qe}s(pk,"createTelemetryItem");var mk=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=pk,w}(),uK={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},dK=new Oh;function S7(w){var R=null;if(de(Event))R=new Event(w);else{var B=ke();B&&B.createEvent&&(R=B.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(S7,"createDomEvent");function hk(w,R){J6(w,null,null,R)}s(hk,"_disableEvents");function R7(w){var R=ke(),B=mn(),F=!1,se=[],Ee=1;B&&!q(B.onLine)&&!B.onLine&&(Ee=2);var we=0,Qe=Wr(),Xe=OY(Mp("OfflineListener"),w);try{if(on(qt())&&(F=!0),R){var pt=R.body||R;pt.ononline&&on(pt)&&(F=!0)}}catch{F=!1}function on(ki){var Fa=!1;return ki&&(Fa=j3(ki,"online",Or,Xe),Fa&&j3(ki,"offline",Tr,Xe)),Fa}s(on,"_enableEvents");function Ir(){return Qe}s(Ir,"_isOnline");function Wr(){return!(we===2||Ee===2)}s(Wr,"calCurrentState");function un(){var ki=Wr();Qe!==ki&&(Qe=ki,yl(se,function(Fa){var zC={isOnline:Qe,rState:Ee,uState:we};try{Fa(zC)}catch{}}))}s(un,"listnerNoticeCheck");function En(ki){we=ki,un()}s(En,"setOnlineState");function Or(){Ee=1,un()}s(Or,"_setOnline");function Tr(){Ee=2,un()}s(Tr,"_setOffline");function hi(){var ki=qt();if(ki&&F){if(hk(ki,Xe),R){var Fa=R.body||R;oe(Fa.ononline)||hk(Fa,Xe)}F=!1}}s(hi,"_unload");function no(ki){return se.push(ki),{rm:s(function(){var Fa=se.indexOf(ki);if(Fa>-1)return se.splice(Fa,1)},"rm")}}return s(no,"addListener"),{isOnline:Ir,isListening:s(function(){return F},"isListening"),unload:hi,addListener:no,setOnlineState:En}}s(R7,"createOfflineListener");var fK="AppInsightsPropertiesPlugin",gk="AppInsightsChannelPlugin",$C="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=$C,t.BreezeChannelIdentifier=gk,t.ConfigurationManager=cK,t.ConnectionStringParser=Qw,t.ContextTagKeys=Oh,t.CtxTagKeys=dK,t.DEFAULT_BREEZE_ENDPOINT=V3,t.DEFAULT_BREEZE_PATH=aE,t.Data=lK,t.DisabledPropertyName=Rw,t.DistributedTracingModes=jY,t.Envelope=Ow,t.Event=KY,t.EventPersistence=fE,t.Exception=uf,t.Extensions=uK,t.HttpMethod=Z6,t.Metric=iK,t.PageView=aK,t.PageViewPerformance=xE,t.ProcessLegacy=kw,t.PropertiesPluginIdentifier=fK,t.RemoteDependencyData=HC,t.RequestHeaders=e7,t.SampleRate=X6,t.SeverityLevel=Vw,t.TelemetryItemCreator=mk,t.ThrottleMgr=YY,t.Trace=fk,t.correlationIdCanIncludeCorrelationHeader=Nh,t.correlationIdGetCorrelationContext=a7,t.correlationIdGetCorrelationContextValue=l7,t.correlationIdGetPrefix=rk,t.correlationIdSetPrefix=nk,t.createDistributedTraceContextFromTrace=ik,t.createDomEvent=S7,t.createOfflineListener=R7,t.createTelemetryItem=pk,t.createTraceParent=CC,t.dataSanitizeException=Z3,t.dataSanitizeId=DC,t.dataSanitizeInput=ek,t.dataSanitizeKey=X3,t.dataSanitizeKeyAndAddUniqueness=J3,t.dataSanitizeMeasurements=Ju,t.dataSanitizeMessage=Lw,t.dataSanitizeProperties=qp,t.dataSanitizeString=ol,t.dataSanitizeUrl=lf,t.dateTimeUtilsDuration=HY,t.dateTimeUtilsNow=GY,t.dsPadNumber=t7,t.findAllScripts=W3,t.findW3cTraceParent=q3,t.formatTraceParent=HA,t.getExtensionByName=sK,t.isBeaconApiSupported=Th,t.isCrossOriginError=Mh,t.isInternalApplicationInsightsEndpoint=s7,t.isSampledFlag=Iw,t.isValidSpanId=vC,t.isValidTraceId=xC,t.isValidTraceParent=bC,t.msToTimeSpan=dk,t.parseConnectionString=Mw,t.parseTraceParent=Yu,t.strNotSpecified=sf,t.stringToBoolOrDefault=oK,t.urlGetAbsoluteUrl=qY,t.urlGetCompleteUrl=r7,t.urlGetPathName=WY,t.urlParseFullHost=Wp,t.urlParseHost=i7,t.urlParseUrl=PC,t.utlCanUseLocalStorage=Fw,t.utlCanUseSessionStorage=Gp,t.utlDisableStorage=pE,t.utlEnableStorage=VY,t.utlGetLocalStorage=d7,t.utlGetSessionStorage=p7,t.utlGetSessionStorageKeys=OC,t.utlRemoveSessionStorage=m7,t.utlRemoveStorage=Xu,t.utlSetLocalStorage=f7,t.utlSetSessionStorage=$Y,t.utlSetStoragePrefix=mE})});var wEe=G((FF,TEe)=>{f();(function(t,e){typeof FF=="object"&&typeof TEe<"u"?e(FF):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(FF,function(t){"use strict";function e(A,x){return A||x}s(e,"_pureAssign");function n(A,x){return A[x]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),D=n(k,c),N=e(Math),Q=e(Array),Z=n(Q,c),me=n(Z,"slice");function te(A,x){try{return{v:A.apply(this,x)}}catch(T){return{e:T}}}s(te,"safe");function H(A,x){var T=te(A);return T.e?x:T.v}s(H,"safeGet");var W;function re(A){return function(x){return typeof x===A}}s(re,"_createIs");function oe(A){var x="[object "+A+"]";return function(T){return!!(T&&V(T)===x)}}s(oe,"_createObjIs");function V(A){return _[b].call(A)}s(V,"objToString");function q(A){return typeof A===d||A===d}s(q,"isUndefined");function Y(A){return!ne(A)}s(Y,"isStrictUndefined");function ee(A){return A===i||q(A)}s(ee,"isNullOrUndefined");function de(A){return A===i||!ne(A)}s(de,"isStrictNullOrUndefined");function ne(A){return!!A||A!==r}s(ne,"isDefined");function fe(A){return!W&&(W=["string","number","boolean",d,"symbol","bigint"]),A!==l&&W.indexOf(A)!==-1}s(fe,"isPrimitiveType");var pe=re("string"),Be=re(a);function Se(A){return!A&&ee(A)?!1:!!A&&typeof A===l}s(Se,"isObject");var Ke=n(Q,"isArray"),Fe=oe("Date"),ft=re("number"),Tt=re("boolean"),Ct=oe("Error");function bt(A){return!!(A&&A.then&&Be(A.then))}s(bt,"isPromiseLike");function le(A){return!(!A||H(function(){return!(A&&0+A)},!A))}s(le,"isTruthy");var Oe=n(E,"getOwnPropertyDescriptor");function ye(A,x){return!!A&&_.hasOwnProperty[v](A,x)}s(ye,"objHasOwnProperty");var tt=e(n(E,"hasOwn"),J);function J(A,x){return ye(A,x)||!!Oe(A,x)}s(J,"polyObjHasOwn");function ie(A,x,T){if(A&&Se(A)){for(var S in A)if(tt(A,S)&&x[v](T||A,S,A[S])===-1)break}}s(ie,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Ne(A){var x={};if(x[We.c]=!0,x[We.e]=!0,A.l){x.get=function(){return A.l.v};var T=Oe(A.l,"v");T&&T.set&&(x.set=function(S){A.l.v=S})}return ie(A,function(S,P){x[We[S]]=Y(P)?x[We[S]]:P}),x}s(Ne,"_createProp");var be=n(E,"defineProperty");function ze(A,x,T){return be(A,x,Ne(T))}s(ze,"objDefine");function it(A,x,T,S,P){var L={};return ie(A,function(O,K){gt(L,O,x?K:O),gt(L,K,T?K:O)}),S?S(L):L}s(it,"_createKeyValueMap");function gt(A,x,T,S){be(A,x,{value:T,enumerable:!0,writable:!1})}s(gt,"_assignMapValue");var Ot=e(k),cn="[object Error]";function Lt(A,x){var T=o,S=_[b][v](A);S===cn&&(A={stack:Ot(A.stack),message:Ot(A.message),name:Ot(A.name)});try{T=JSON.stringify(A,i,x?typeof x=="number"?x:4:r),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ot(A)}catch(P){T=" - "+Lt(P,x)}return S+": "+T}s(Lt,"dumpObj");function Gn(A){throw new Error(A)}s(Gn,"throwError");function Yn(A){throw new TypeError(A)}s(Yn,"throwTypeError");var fr=n(E,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ut=n(E,"assign"),yt=n(E,"keys");function Xt(A){return fr&&ie(A,function(x,T){(Ke(T)||Se(T))&&Xt(T)}),Gt(A)}s(Xt,"objDeepFreeze");var Gt=e(fr,Ae),yn=e(n(E,"getPrototypeOf"),Ge);function vn(A){return it(A,1,0,Gt)}s(vn,"createEnum");function jt(A){return it(A,0,0,Gt)}s(jt,"createEnumKeyMap");function nn(A){var x={};return ie(A,function(T,S){gt(x,T,S[1]),gt(x,S[0],S[1])}),Gt(x)}s(nn,"createSimpleMap");function Jt(A){return nn(A)}s(Jt,"createTypeMap");var Tn=jt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Nn="__tsUtils$gblCfg",Kn;function qr(){var A;return typeof globalThis!==d&&(A=globalThis),!A&&typeof self!==d&&(A=self),!A&&typeof window!==d&&(A=window),!A&&typeof global!==d&&(A=global),A}s(qr,"_getGlobalValue");function Jr(){if(!Kn){var A=te(qr).v||{};Kn=A[Nn]=A[Nn]||{}}return Kn}s(Jr,"_getGlobalConfig");var Mr=$r;function $r(A,x,T){var S=x?x[A]:i;return function(P){var L=(P?P[A]:i)||S;if(L||T){var O=arguments;return(L||T).apply(P,L?me[v](O,1):O)}Yn('"'+Ot(A)+'" not defined for '+Lt(P))}}s($r,"_unwrapFunctionWithPoly");function tr(A){return function(x){return x[A]}}s(tr,"_unwrapProp");var zr=n(N,"min"),_e=n(N,"max"),U=Mr("slice",D),he=Mr("substring",D),ve=$r("substr",D,X);function X(A,x,T){return ee(A)&&Yn("Invalid "+Lt(A)),T<0?o:(x=x||0,x<0&&(x=_e(x+A[g],0)),q(T)?U(A,x):U(A,x,x+T))}s(X,"polyStrSubstr");function M(A,x){return he(A,0,x)}s(M,"strLeft");var ke="_urid",$e;function qt(){if(!$e){var A=Jr();$e=A.gblSym=A.gblSym||{k:{},s:{}}}return $e}s(qt,"_globalSymbolRegistry");var Sn;function mn(A){var x={description:Ot(A),toString:s(function(){return m+"("+A+")"},"toString")};return x[h]=!0,x}s(mn,"polyNewSymbol");function lr(A){var x=qt();if(!tt(x.k,A)){var T=mn(A),S=yt(x.s).length;T[ke]=function(){return S+"_"+T[b]()},x.k[A]=T,x.s[T[ke]()]=Ot(A)}return x.k[A]}s(lr,"polySymbolFor");function pr(A){!Sn&&(Sn={});var x,T=Tn[A];return T&&(x=Sn[T]=Sn[T]||mn(m+"."+T)),x}s(pr,"polyGetKnownSymbol");var bn;function Ht(){bn=Jr()}s(Ht,"_initTestHooks");function Qr(A){var x={};return!bn&&Ht(),x.b=bn.lzy,be(x,"v",{configurable:!0,get:s(function(){var T=A();return bn.lzy||be(x,"v",{value:T}),x.b=bn.lzy,T},"get")}),x}s(Qr,"getLazy");function Qs(A){return be({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(Qs,"createCachedValue");var kp="window",yl;function Bp(A,x){var T;return function(){return!bn&&Ht(),(!T||bn.lzy)&&(T=Qs(te(A,x).v)),T.v}}s(Bp,"_getGlobalInstFn");function X0(A){return!bn&&Ht(),(!yl||A===!1||bn.lzy)&&(yl=Qs(te(qr).v||i)),yl.v}s(X0,"getGlobal");function Zs(A,x){var T;if(!yl||x===!1?T=X0(x):T=yl.v,T&&T[A])return T[A];if(A===kp)try{return window}catch{}return i}s(Zs,"getInst");function ph(){return!!jy()}s(ph,"hasDocument");var jy=Bp(Zs,["document"]);function A3(){return!!Dp()}s(A3,"hasWindow");var Dp=Bp(Zs,[kp]);function hY(){return!!mh()}s(hY,"hasNavigator");var mh=Bp(Zs,["navigator"]),gY=Bp(function(){return!!te(function(){return process&&(process.versions||{}).node}).v}),SA,y3;function YT(){return SA=Qs(te(Zs,[m]).v),SA}s(YT,"_initSymbol");function AY(A){var x=(bn.lzy?0:SA)||YT();return x.v?x.v[A]:r}s(AY,"_getSymbolKey");function Tc(){return!!hh()}s(Tc,"hasSymbol");function hh(){return!bn&&Ht(),((bn.lzy?0:SA)||YT()).v}s(hh,"getSymbol");function Wb(A,x){var T=Tn[A];!bn&&Ht();var S=(bn.lzy?0:SA)||YT();return S.v?S.v[T||A]:x?r:pr(A)}s(Wb,"getKnownSymbol");function RA(A,x){!bn&&Ht();var T=(bn.lzy?0:SA)||YT();return T.v?T.v(A):x?i:mn(A)}s(RA,"newSymbol");function Gb(A){return!bn&&Ht(),y3=(bn.lzy?0:y3)||Qs(te(AY,["for"]).v),(y3.v||lr)(A)}s(Gb,"symbolFor");function gh(A){return!!A&&Be(A.next)}s(gh,"isIterator");function KT(A){return!de(A)&&Be(A[Wb(3)])}s(KT,"isIterable");var Hb;function C3(A,x,T){if(A&&(gh(A)||(!Hb&&(Hb=Qs(Wb(3))),A=A[Hb.v]?A[Hb.v]():i),gh(A))){var S=r,P=r;try{for(var L=0;!(P=A.next()).done&&x[v](T||A,P.value,L,A)!==-1;)L++}catch(O){S={e:O},A.throw&&(P=i,A.throw(S))}finally{try{P&&!P.done&&A.return&&A.return(P)}finally{if(S)throw S.e}}}}s(C3,"iterForOf");function Vy(A,x,T){return A.apply(x,T)}s(Vy,"fnApply");function $y(A,x){return!q(x)&&A&&(Ke(x)?Vy(A.push,A,x):gh(x)||KT(x)?C3(x,function(T){A.push(T)}):A.push(x)),A}s($y,"arrAppend");function Un(A,x,T){if(A)for(var S=A[g]>>>0,P=0;P<S&&!(P in A&&x[v](T||A,A[P],P,A)===-1);P++);}s(Un,"arrForEach");var au=Mr("indexOf",Z),kA=Mr("map",Z);function zy(A,x,T){return((A?A.slice:i)||me).apply(A,me[v](arguments,1))}s(zy,"arrSlice");var yY=Mr("reduce",Z),Ah=e(n(E,"create"),CY);function CY(A){if(!A)return{};var x=typeof A;x!==l&&x!==a&&Yn("Prototype must be an Object or function: "+Lt(A));function T(){}return s(T,"tempFunc"),T[c]=A,new T}s(CY,"polyObjCreate");var x3;function jb(A,x){var T=E.setPrototypeOf||function(S,P){var L;!x3&&(x3=Qs((L={},L[u]=[],L instanceof Array))),x3.v?S[u]=P:ie(P,function(O,K){return S[O]=K})};return T(A,x)}s(jb,"objSetPrototypeOf");function xY(A,x,T){te(ze,[x,y,{v:A,c:!0,e:!1}]),x=jb(x,T);function S(){this[p]=x,te(ze,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),x[c]=T===i?Ah(T):(S[c]=T[c],new S),x}s(xY,"_createCustomError");function Vb(A,x){x&&(A[y]=x)}s(Vb,"_setName");function La(A,x,T){var S=T||Error,P=S[c][y],L=Error.captureStackTrace;return xY(A,function(){var O=this,K=arguments;try{te(Vb,[S,A]);var ae=Vy(S,O,me[v](K))||O;if(ae!==O){var Ce=yn(O);Ce!==yn(ae)&&jb(ae,Ce)}return L&&L(ae,O[p]),x&&x(ae,K),ae}finally{te(Vb,[S,P])}},S)}s(La,"createCustomError");function yh(){return(Date.now||$b)()}s(yh,"utcNow");function $b(){return new Date().getTime()}s($b,"polyUtcNow");function w6(A){return s(function(T){return ee(T)&&Yn("strTrim called ["+Lt(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(w6,"_createTrimFn");var vY=w6(/^\s+|(?=\s)\s+$/g),Hi=$r("trim",D,vY),BA=n(N,"floor"),Ch,v3,zb;function lu(A){if(!A||typeof A!==l)return!1;zb||(zb=A3()?Dp():!0);var x=!1;if(A!==zb){v3||(Ch=Function[c][b],v3=Ch[v](E));try{var T=yn(A);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&Ch[v](T)===v3))}catch{}}return x}s(lu,"isPlainObject");function _6(A){return A.value&&JT(A),!0}s(_6,"_defaultDeepCopyHandler");var S6=[Yy,JT,k6,xh];function b3(A,x,T,S){var P;return Un(A,function(L){if(L.k===x)return P=L,-1}),P||(P={k:x,v:x},A.push(P),S(P)),P.v}s(b3,"_getSetVisited");function DA(A,x,T,S){var P=T.handler,L=T.path?S?T.path.concat(S):T.path:[],O={handler:T.handler,src:T.src,path:L},K=typeof x,ae=!1,Ce=x===i;Ce||(x&&K===l?ae=lu(x):Ce=fe(K));var Te={type:K,isPrim:Ce,isPlain:ae,value:x,result:x,path:L,origin:T.src,copy:s(function(Le,Ye){return DA(A,Le,Ye?O:T,Ye)},"copy"),copyTo:s(function(Le,Ye){return E3(A,Le,Ye,O)},"copyTo")};return Te.isPrim?P&&P[v](T,Te)?Te.result:x:b3(A,x,L,function(Le){ze(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(He){Le.v=He},"s")});for(var Ye=0,Me=P;!(Me||(Ye<S6.length?S6[Ye++]:_6))[v](T,Te);)Me=i})}s(DA,"_deepCopy");function E3(A,x,T,S){if(!ee(T))for(var P in T)x[P]=DA(A,T[P],S,P);return x}s(E3,"_copyProps");function R6(A,x,T){var S={handler:T,src:x,path:[]};return E3([],A,x,S)}s(R6,"objCopyProps");function I3(A,x){var T={handler:x,src:A};return DA([],A,T)}s(I3,"objDeepCopy");function Yy(A){var x=A.value;if(Ke(x)){var T=A.result=[];return T.length=x.length,A.copyTo(T,x),!0}return!1}s(Yy,"arrayDeepCopyHandler");function xh(A){var x=A.value;return Fe(x)?(A.result=new Date(x.getTime()),!0):!1}s(xh,"dateDeepCopyHandler");function k6(A){return A.type===a}s(k6,"functionDeepCopyHandler");function JT(A){var x=A.value;if(x&&A.isPlain){var T=A.result={};return A.copyTo(T,x),!0}return!1}s(JT,"plainObjDeepCopyHandler");function T3(A,x){return Un(x,function(T){R6(A,T)}),A}s(T3,"_doExtend");function XT(A,x,T,S,P,L,O){return T3(I3(A)||{},me[v](arguments))}s(XT,"deepExtend");var bY=tr(g),EY=n(N,"round"),B6=$r("endsWith",D,IY);function IY(A,x,T){pe(A)||Yn("'"+Lt(A)+"' is not a string");var S=pe(x)?x:Ot(x),P=!q(T)&&T<A[g]?T:A[g];return he(A,P-S[g],P)===S}s(IY,"polyStrEndsWith");var Pp=Mr("indexOf",D),ZT="ref",w3="unref",ew="hasRef",TY="enabled";function tw(A,x,T){var S=!0,P=A?x(i):i,L;function O(){return S=!1,P&&P[w3]&&P[w3](),L}s(O,"_unref");function K(){P&&T(P),P=i}s(K,"_cancel");function ae(){return P=x(P),S||O(),L}s(ae,"_refresh");function Ce(Te){!Te&&P&&K(),Te&&!P&&ae()}return s(Ce,"_setEnabled"),L={cancel:K,refresh:ae},L[ew]=function(){return P&&P[ew]?P[ew]():S},L[ZT]=function(){return S=!0,P&&P[ZT]&&P[ZT](),L},L[w3]=O,L=be(L,TY,{get:s(function(){return!!P},"get"),set:Ce}),{h:L,dn:s(function(){P=i},"dn")}}s(tw,"_createTimerHandler");function nw(A,x,T){var S=Ke(x),P=S?x.length:0,L=(P>0?x[0]:S?r:x)||setTimeout,O=(P>1?x[1]:r)||clearTimeout,K=T[0];T[0]=function(){ae.dn(),Vy(K,r,me[v](arguments))};var ae=tw(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;Vy(O,r,[Ce])}return Vy(L,r,T)},function(Ce){Vy(O,r,[Ce])});return ae.h}s(nw,"_createTimeoutWith");function vh(A,x){return nw(!0,r,me[v](arguments))}s(vh,"scheduleTimeout");function rw(A,x){return nw(!1,r,me[v](arguments))}s(rw,"createTimeout");var PA,ju="constructor",Vu="prototype",NA="function",Ky="_dynInstFuncs",bh="_isDynProxy",Jy="_dynClass",_3="_dynCls$",LA="_dynInstChk",Xy=LA,S3="_dfOpts",iw="_unknown_",Zy="__proto__",Yb="_dyn"+Zy,ow="__dynProto$Gbl",eC="_dynInstProto",tC="useBaseInst",Kb="setInstFuncs",FA=Object,nC=FA.getPrototypeOf,R3=FA.getOwnPropertyNames,sw=X0(),rC=sw[ow]||(sw[ow]={o:(PA={},PA[Kb]=!0,PA[tC]=!0,PA),n:1e3});function iC(A){return A&&(A===FA[Vu]||A===Array[Vu])}s(iC,"_isObjectOrArrayPrototype");function Np(A){return iC(A)||A===Function[Vu]}s(Np,"_isObjectArrayOrFunctionPrototype");function Z0(A){var x;if(A){if(nC)return nC(A);var T=A[Zy]||A[Vu]||(A[ju]?A[ju][Vu]:null);x=A[Yb]||T,ye(A,Yb)||(delete A[eC],x=A[Yb]=A[eC]||A[Yb],A[eC]=T)}return x}s(Z0,"_getObjProto");function oC(A,x){var T=[];if(R3)T=R3(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var P=0;P<T.length;P++)x(T[P])}s(oC,"_forEachProp");function sC(A,x,T){return x!==ju&&typeof A[x]===NA&&(T||ye(A,x))&&x!==Zy&&x!==Vu}s(sC,"_isDynamicCandidate");function aw(A){Yn("DynamicProto: "+A)}s(aw,"_throwTypeError");function k3(A){var x=Ah(null);return oC(A,function(T){!x[T]&&sC(A,T,!1)&&(x[T]=A[T])}),x}s(k3,"_getInstanceFuncs");function B3(A,x){for(var T=A.length-1;T>=0;T--)if(A[T]===x)return!0;return!1}s(B3,"_hasVisited");function wY(A,x,T,S){function P(ae,Ce,Te){var Le=Ce[Te];if(Le[bh]&&S){var Ye=ae[Ky]||{};Ye[Xy]!==!1&&(Le=(Ye[Ce[Jy]]||{})[Te]||Le)}return function(){return Le.apply(ae,arguments)}}s(P,"_instFuncProxy");var L=Ah(null);oC(T,function(ae){L[ae]=P(x,T,ae)});for(var O=Z0(A),K=[];O&&!Np(O)&&!B3(K,O);)oC(O,function(ae){!L[ae]&&sC(O,ae,!nC)&&(L[ae]=P(x,O,ae))}),K.push(O),O=Z0(O);return L}s(wY,"_getBaseFuncs");function _Y(A,x,T,S){var P=null;if(A&&ye(T,Jy)){var L=A[Ky]||Ah(null);if(P=(L[T[Jy]]||Ah(null))[x],P||aw("Missing ["+x+"] "+NA),!P[LA]&&L[Xy]!==!1){for(var O=!ye(A,x),K=Z0(A),ae=[];O&&K&&!Np(K)&&!B3(ae,K);){var Ce=K[x];if(Ce){O=Ce===S;break}ae.push(K),K=Z0(K)}try{O&&(A[x]=P),P[LA]=1}catch{L[Xy]=!1}}}return P}s(_Y,"_getInstFunc");function SY(A,x,T){var S=x[A];return S===T&&(S=Z0(x)[A]),typeof S!==NA&&aw("["+A+"] is not a "+NA),S}s(SY,"_getProtoFunc");function RY(A,x,T,S,P){function L(ae,Ce){var Te=s(function(){var Le=_Y(this,Ce,ae,Te)||SY(Ce,ae,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[bh]=1,Te}if(s(L,"_createDynamicPrototype"),!iC(A)){var O=T[Ky]=T[Ky]||Ah(null);if(!iC(O)){var K=O[x]=O[x]||Ah(null);O[Xy]!==!1&&(O[Xy]=!!P),iC(K)||oC(T,function(ae){sC(T,ae,!1)&&T[ae]!==S[ae]&&(K[ae]=T[ae],delete T[ae],(!ye(A,ae)||A[ae]&&!A[ae][bh])&&(A[ae]=L(A,ae)))})}}}s(RY,"_populatePrototype");function D3(A,x){if(nC){for(var T=[],S=Z0(x);S&&!Np(S)&&!B3(T,S);){if(S===A)return!0;T.push(S),S=Z0(S)}return!1}return!0}s(D3,"_checkPrototype");function Jb(A,x){return ye(A,Vu)?A.name||x||iw:((A||{})[ju]||{}).name||x||iw}s(Jb,"_getObjName");function Jl(A,x,T,S){ye(A,Vu)||aw("theClass is an invalid class definition.");var P=A[Vu];D3(P,x)||aw("["+Jb(A)+"] not in hierarchy of ["+Jb(x)+"]");var L=null;ye(P,Jy)?L=P[Jy]:(L=_3+Jb(A,"_")+"$"+rC.n,rC.n++,P[Jy]=L);var O=Jl[S3],K=!!O[tC];K&&S&&S[tC]!==void 0&&(K=!!S[tC]);var ae=k3(x),Ce=wY(P,x,ae,K);T(x,Ce);var Te=!!nC&&!!O[Kb];Te&&S&&(Te=!!S[Kb]),RY(P,L,x,ae,Te!==!1)}s(Jl,"dynamicProto"),Jl[S3]=rC.o;var Os="function",D6="object",P6="undefined",Xb="prototype",P3=Object,N3=P3[Xb];(X0()||{}).Symbol,(X0()||{}).Reflect;var lw="hasOwnProperty",N6=s(function(A){for(var x,T=1,S=arguments.length;T<S;T++){x=arguments[T];for(var P in x)N3[lw].call(x,P)&&(A[P]=x[P])}return A},"__objAssignFnImpl"),Lp=ut||N6,Eh=s(function(A,x){return Eh=P3.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)S[lw](P)&&(T[P]=S[P])},Eh(A,x)},"extendStaticsFn");function Zb(A,x){typeof x!==Os&&x!==null&&Yn("Class extends value "+String(x)+" is not a constructor or null"),Eh(A,x);function T(){this.constructor=A}s(T,"__"),A[Xb]=x===null?Ah(x):(T[Xb]=x[Xb],new T)}s(Zb,"__extendsFn");function L6(A,x){for(var T=0,S=x.length,P=A.length;T<S;T++,P++)A[P]=x[T];return A}s(L6,"__spreadArrayFn");var cw=vn,kY=Jt,Ih=cw({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),aC="toLowerCase",Yr="length",lC="warnToConsole",MA="throwInternal",Fp="watch",uw="apply",ji="push",cC="splice",pa="logger",uC="cancel",eE="initialize",Th="identifier",tE="removeNotificationListener",dw="addNotificationListener",ef="isInitialized",dC="value",Wd="getNotifyMgr",fC="getPlugin",wh="name",Cl="processNext",pC="getProcessTelContext",tf="enabled",F6="stopPollingInternalLogs",QA="unload",fw="onComplete",mC="version",M6="loggingLevelConsole",OA="createNew",nf="teardown",pw="messageId",UA="message",rf="diagLog",mw="_doTeardown",Mp="update",of="getNext",_h="setNextPlugin",hw="userAgent",Sh="split",Rh="replace",Xl="type",L3="evtName",nE="status",F3="getAllResponseHeaders",M3="isChildEvt",hC="data",kh="getCtx",Gd="setCtx",Q6="itemsReceived",Qp="urlString",Q3="headers",Op="timeout",O6="traceFlags",gC;function O3(A,x){gC||(gC=La("AggregationError",function(S,P){P[Yr]>1&&(S.errors=P[1])}));var T=A||"One or more errors occurred.";throw Un(x,function(S,P){T+=`
`.concat(P," > ").concat(Lt(S))}),new gC(T,x||[])}s(O3,"throwAggregationError");var qA="Promise",WA="rejected";function $u(A,x){return U6(A,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:WA,rejected:!0,reason:T}):T})}s($u,"doAwaitResponse");function U6(A,x,T,S){var P=A;try{if(bt(A))(x||T)&&(P=A.then(x,T));else try{x&&(P=x(A))}catch(L){if(T)P=T(L);else throw L}}finally{S&&BY(P,S)}return P}s(U6,"doAwait");function BY(A,x){var T=A;return x&&(bt(A)?A.finally?T=A.finally(x):T=A.then(function(S){return x(),S},function(S){throw x(),S}):x()),T}s(BY,"doFinally");var q6=["pending","resolving","resolved",WA],W6="dispatchEvent",rE;function G6(A){var x;return A&&A.createEvent&&(x=A.createEvent("Event")),!!x&&x.initEvent}s(G6,"_hasInitEventFn");function gw(A,x,T,S){var P=jy();!rE&&(rE=Qs(!!te(G6,[P]).v));var L=rE.v?P.createEvent("Event"):S?new Event(x):{};if(T&&T(L),rE.v&&L.initEvent(x,!1,!0),L&&A[W6])A[W6](L);else{var O=A["on"+x];if(O)O(L);else{var K=Zs("console");K&&(K.error||K.log)(x,Lt(L))}}}s(gw,"emitEvent");var H6="unhandledRejection",DY=H6.toLowerCase(),AC=10,Aw;function j6(A){return Be(A)?A.toString():Lt(A)}s(j6,"dumpFnObj");function V6(A,x,T){var S=zy(arguments,3),P=0,L=!1,O,K=[],ae=!1,Ce=null,Te;function Le(Vt,hn){try{ae=!0,Ce&&Ce.cancel(),Ce=null;var Hr=A(function(xi,vi){K.push(function(){try{var po=P===2?Vt:hn,cr=q(po)?O:Be(po)?po(O):po;bt(cr)?cr.then(xi,vi):po?xi(cr):P===3?vi(cr):xi(cr)}catch(Ln){vi(Ln)}}),L&&lt()},S);return Hr}finally{}}s(Le,"_then");function Ye(Vt){return Le(void 0,Vt)}s(Ye,"_catch");function Me(Vt){var hn=Vt,Hr=Vt;return Be(Vt)&&(hn=s(function(xi){return Vt&&Vt(),xi},"thenFinally"),Hr=s(function(xi){throw Vt&&Vt(),xi},"catchFinally")),Le(hn,Hr)}s(Me,"_finally");function He(){return q6[P]}s(He,"_strState");function lt(){if(K.length>0){var Vt=K.slice();K=[],ae=!0,Ce&&Ce.cancel(),Ce=null,x(Vt)}}s(lt,"_processQueue");function et(Vt,hn){return function(Hr){if(P===hn){if(Vt===2&&bt(Hr)){P=1,Hr.then(et(2,1),et(3,1));return}P=Vt,L=!0,O=Hr,lt(),!ae&&Vt===3&&!Ce&&(Ce=vh(At,AC))}}}s(et,"_createSettleIfFn");function At(){if(!ae)if(ae=!0,gY())process.emit(H6,O,Te);else{var Vt=Dp()||X0();!Aw&&(Aw=Qs(te(Zs,[qA+"RejectionEvent"]).v)),gw(Vt,DY,function(hn){return ze(hn,"promise",{g:s(function(){return Te},"g")}),hn.reason=O,hn},!!Aw.v)}}s(At,"_notifyUnhandledRejection"),Te={then:Le,catch:Ye,finally:Me},be(Te,"state",{get:He}),Tc()&&(Te[Wb(11)]="IPromise");function Pt(){return"IPromise "+He()+(L?" - "+j6(O):"")}return s(Pt,"_toString"),Te.toString=Pt,s(function(){Be(T)||Yn(qA+": executor is not a function - "+j6(T));var hn=et(3,0);try{T.call(Te,et(2,0),hn)}catch(Hr){hn(Hr)}},"_initialize")(),Te}s(V6,"_createPromise");function PY(A){return function(x){var T=zy(arguments,1);return A(function(S,P){try{var L=[],O=1;C3(x,function(K,ae){K&&(O++,U6(K,function(Ce){L[ae]=Ce,--O===0&&S(L)},P))}),O--,O===0&&S(L)}catch(K){P(K)}},T)}}s(PY,"_createAllPromise");function NY(A){return Qs(function(x){var T=zy(arguments,1);return A(function(S,P){var L=[],O=1;function K(ae,Ce){O++,$u(ae,function(Te){Te.rejected?L[Ce]={status:WA,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--O===0&&S(L)})}s(K,"processItem");try{Ke(x)?Un(x,K):KT(x)?C3(x,K):Yn("Input is not an iterable"),O--,O===0&&S(L)}catch(ae){P(ae)}},T)})}s(NY,"_createAllSettledPromise");function $6(A){Un(A,function(x){try{x()}catch{}})}s($6,"syncItemProcessor");function z6(A){var x=ft(A)?A:0;return function(T){vh(function(){$6(T)},x)}}s(z6,"timeoutItemProcessor");function yw(A,x){return V6(yw,z6(x),A,x)}s(yw,"createAsyncPromise");var Cw;function LY(A,x){!Cw&&(Cw=Qs(te(Zs,[qA]).v||null));var T=Cw.v;if(!T)return yw(A);Be(A)||Yn(qA+": executor is not a function - "+Lt(A));var S=0;function P(){return q6[S]}s(P,"_strState");var L=new T(function(O,K){function ae(Te){S=2,O(Te)}s(ae,"_resolve");function Ce(Te){S=3,K(Te)}s(Ce,"_reject"),A(ae,Ce)});return be(L,"state",{get:P}),L}s(LY,"createNativePromise");var xw;function vw(A){return V6(vw,$6,A)}s(vw,"createSyncPromise");function cu(A,x){return!xw&&(xw=NY(vw)),xw.v(A,x)}s(cu,"createSyncAllSettledPromise");var bw;function yC(A,x){return!bw&&(bw=Qs(LY)),bw.v.call(this,A,x)}s(yC,"createPromise");var U3=PY(yC),zu=void 0,mi="",Up="channels",ma="core",Hd="createPerfMgr",Ew="disabled",GA="extensionConfig",CC="extensions",Yu="processTelemetry",xC="priority",vC="eventsSent",bC="eventsDiscarded",Iw="eventsSendRequest",HA="perfEvent",q3="offlineEventsStored",W3="offlineBatchSent",Tw="offlineBatchDrop",iE="getPerfMgr",ww="domain",_w="path",Y6="Not dynamic - ",G3=/-([a-z])/g,FY=/([^\w\d_$])/g,MY=/^(\d+[\w\d_$])/;function Sw(A){return!ee(A)}s(Sw,"isNotNullOrUndefined");function EC(A){var x=A;return x&&pe(x)&&(x=x[Rh](G3,function(T,S){return S.toUpperCase()}),x=x[Rh](FY,"_"),x=x[Rh](MY,function(T,S){return"_"+S})),x}s(EC,"normalizeJsName");function xl(A,x){return A&&x?Pp(A,x)!==-1:!1}s(xl,"strContains");function oE(A){return A&&A.toISOString()||""}s(oE,"toISOString");function il(A){return Ct(A)?A[wh]:mi}s(il,"getExceptionName");function Bh(A,x,T,S,P){var L=T;return A&&(L=A[x],L!==T&&(!P||P(L))&&(!S||S(T))&&(L=T,A[x]=L)),L}s(Bh,"setValue");function K6(A,x,T){var S;return A?(S=A[x],!S&&ee(S)&&(S=q(T)?{}:T,A[x]=S)):S=q(T)?{}:T,S}s(K6,"getSetValue");function QY(A,x){var T=null,S=null;return Be(A)?T=A:S=A,function(){var P=arguments;if(T&&(S=T()),S)return S[x][uw](S,P)}}s(QY,"_createProxyFunction");function sE(A,x,T,S,P){A&&x&&T&&(P!==!1||q(A[x]))&&(A[x]=QY(T,S))}s(sE,"proxyFunctionAs");function H3(A,x,T,S){return A&&x&&Se(A)&&Ke(T)&&Un(T,function(P){pe(P)&&sE(A,P,x,P,S)}),A}s(H3,"proxyFunctions");function OY(A){return function(){function x(){var T=this;A&&ie(A,function(S,P){T[S]=P})}return s(x,"class_1"),x}()}s(OY,"createClassFromInterface");function j3(A){return A&&ut&&(A=P3(ut({},A))),A}s(j3,"optimizeObject");function J6(A,x,T,S,P,L){var O=arguments,K=O[0]||{},ae=O[Yr],Ce=!1,Te=1;for(ae>0&&Tt(K)&&(Ce=K,K=O[Te]||{},Te++),Se(K)||(K={});Te<ae;Te++){var Le=O[Te],Ye=Ke(Le),Me=Se(Le);for(var He in Le){var lt=Ye&&He in Le||Me&&tt(Le,He);if(lt){var et=Le[He],At=void 0;if(Ce&&et&&((At=Ke(et))||lu(et))){var Pt=K[He];At?Ke(Pt)||(Pt=[]):lu(Pt)||(Pt={}),et=J6(Ce,Pt,et)}et!==void 0&&(K[He]=et)}}}return K}s(J6,"objExtend");function Rw(A){try{return A.responseText}catch{}return null}s(Rw,"getResponseText");function X6(A,x){return A?"XDomainRequest,Response:"+Rw(A)||"":x}s(X6,"formatErrorMessageXdr");function kw(A,x){return A?"XMLHttpRequest,Status:"+A[nE]+",Response:"+Rw(A)||A.response||"":x}s(kw,"formatErrorMessageXhr");function Z6(A,x){return x&&(ft(x)?A=[x].concat(A):Ke(x)&&(A=x.concat(A))),A}s(Z6,"prependTransports");var V3="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",aE="withCredentials",sf="timeout";function $3(A,x,T,S,P,L){S===void 0&&(S=!1),P===void 0&&(P=!1);function O(ae,Ce,Te){try{ae[Ce]=Te}catch{}}s(O,"_wrapSetXhrProp");var K=new XMLHttpRequest;return S&&O(K,V3,S),T&&O(K,aE,T),K.open(A,x,!P),T&&O(K,aE,T),!P&&L&&O(K,sf,L),K}s($3,"openXhr");function e7(A){var x={};if(pe(A)){var T=Hi(A)[Sh](/[\r\n]+/);Un(T,function(S){if(S){var P=S.indexOf(": ");if(P!==-1){var L=Hi(S.substring(0,P))[aC](),O=Hi(S.substring(P+1));x[L]=O}else x[Hi(S)]=1}})}return x}s(e7,"convertAllHeadersToMap");function Dh(A,x,T){if(!A[T]&&x&&x.getResponseHeader){var S=x.getResponseHeader(T);S&&(A[T]=Hi(S))}return A}s(Dh,"_appendHeader");var Er="kill-duration",IC="kill-duration-seconds",jA="time-delta-millis";function VA(A,x){var T={};return A[F3]?T=e7(A[F3]()):x&&(T=Dh(T,A,jA),T=Dh(T,A,Er),T=Dh(T,A,IC)),T}s(VA,"_getAllResponseHeaders");var z3="documentMode",lE="location",TC="console",Bw="JSON",Y3="crypto",Dw="msCrypto",wC="msie",$A="trident/",K3="XMLHttpRequest",Ku=null,_C=null,af=!1,wc=null,SC=null;function cE(A,x){var T=!1;if(A){try{if(T=x in A,!T){var S=A[Xb];S&&(T=x in S)}}catch{}if(!T)try{var P=new A;T=!q(P[x])}catch{}}return T}s(cE,"_hasProperty");function RC(A){if(A&&af){var x=Zs("__mockLocation");if(x)return x}return typeof location===D6&&location?location:Zs(lE)}s(RC,"getLocation");function uE(){return typeof console!==P6?console:Zs(TC)}s(uE,"getConsole");function kC(){return!!(typeof JSON===D6&&JSON||Zs(Bw)!==null)}s(kC,"hasJSON");function uu(){return kC()?JSON||Zs(Bw):null}s(uu,"getJSON");function Pw(){return Zs(Y3)}s(Pw,"getCrypto");function Nw(){return Zs(Dw)}s(Nw,"getMsCrypto");function jd(){var A=mh();if(A&&(A[hw]!==_C||Ku===null)){_C=A[hw];var x=(_C||mi)[aC]();Ku=xl(x,wC)||xl(x,$A)}return Ku}s(jd,"isIE");function BC(A){if(A===void 0&&(A=null),!A){var x=mh()||{};A=x?(x.userAgent||mi)[aC]():mi}var T=(A||mi)[aC]();if(xl(T,wC)){var S=jy()||{};return _e(parseInt(T[Sh](wC)[1]),S[z3]||0)}else if(xl(T,$A)){var P=parseInt(T[Sh]($A)[1]);if(P)return P+4}return null}s(BC,"getIEVersion");function Ph(A){return(SC===null||A===!1)&&(SC=hY()&&!!mh().sendBeacon),SC}s(Ph,"isBeaconsSupported");function dE(A){var x=!1;try{x=!!Zs("fetch");var T=Zs("Request");x&&A&&T&&(x=cE(T,"keepalive"))}catch{}return x}s(dE,"isFetchSupported");function J3(){return wc===null&&(wc=typeof XDomainRequest!==P6,wc&&X3()&&(wc=wc&&!cE(Zs(K3),"withCredentials"))),wc}s(J3,"useXDomainRequest");function X3(){var A=!1;try{var x=Zs(K3);A=!!x}catch{}return A}s(X3,"isXhrSupported");var ol=4294967296,lf=4294967295,Lw=123456789,Z3=987654321,qp=!1,Ju=Lw,DC=Z3;function ek(A){A<0&&(A>>>=0),Ju=Lw+A&lf,DC=Z3-A&lf,qp=!0}s(ek,"_mwcSeed");function t7(){try{var A=yh()&2147483647;ek((Math.random()*ol^A)+A)}catch{}}s(t7,"_autoSeedMwc");function tk(A){var x=0,T=Pw()||Nw();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&lf),x===0&&jd()&&(qp||t7(),x=n7()&lf),x===0&&(x=BA(ol*Math.random()|0)),A||(x>>>=0),x}s(tk,"random32");function n7(A){DC=36969*(DC&65535)+(DC>>16)&lf,Ju=18e3*(Ju&65535)+(Ju>>16)&lf;var x=(DC<<16)+(Ju&65535)>>>0&lf|0;return A||(x>>>=0),x}s(n7,"mwcRandom32");function UY(A){A===void 0&&(A=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=tk()>>>0,S=0,P=mi;P[Yr]<A;)S++,P+=x.charAt(T&63),T>>>=6,S===5&&(T=(tk()<<2&4294967295|T&3)>>>0,S=0);return P}s(UY,"newId");var PC="3.3.6",qY="."+UY(6),WY=0;function r7(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(r7,"_canAcceptData");function i7(A,x){var T=x[A.id];if(!T){T={};try{r7(x)&&ze(x,A.id,{e:!1,v:T})}catch{}}return T}s(i7,"_getCache");function Wp(A,x){return x===void 0&&(x=!1),EC(A+WY+++(x?"."+PC:mi)+qY)}s(Wp,"createUniqueNamespace");function o7(A){var x={id:Wp("_aiData-"+(A||mi)+"."+PC),accept:s(function(T){return r7(T)},"accept"),get:s(function(T,S,P,L){var O=T[x.id];return O?O[EC(S)]:(L&&(O=i7(x,T),O[EC(S)]=P),P)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return x}s(o7,"createElmNodeData");function NC(A){return A&&Se(A)&&(A.isVal||A.fb||tt(A,"v")||tt(A,"mrg")||tt(A,"ref")||A.set)}s(NC,"_isConfigDefaults");function s7(A,x,T){var S,P=T.dfVal||ne;if(x&&T.fb){var L=T.fb;Ke(L)||(L=[L]);for(var O=0;O<L[Yr];O++){var K=L[O],ae=x[K];if(P(ae)?S=ae:A&&(ae=A.cfg[K],P(ae)&&(S=ae),A.set(A.cfg,Ot(K),ae)),P(S))break}}return!P(S)&&P(T.v)&&(S=T.v),S}s(s7,"_getDefault");function nk(A,x,T){var S=T;if(T&&NC(T)&&(S=s7(A,x,T)),S){NC(S)&&(S=nk(A,x,S));var P;Ke(S)?(P=[],P[Yr]=S[Yr]):lu(S)&&(P={}),P&&(ie(S,function(L,O){O&&NC(O)&&(O=nk(A,x,O)),P[L]=O}),S=P)}return S}s(nk,"_resolveDefaultValue");function rk(A,x,T,S){var P,L,O,K=S,ae,Ce,Te,Le;NC(K)?(P=K.isVal,L=K.set,Te=K.rdOnly,Le=K.blkVal,ae=K.mrg,Ce=K.ref,!Ce&&q(Ce)&&(Ce=!!ae),O=s7(A,x,K)):O=S,Le&&A.blkVal(x,T);var Ye,Me=!0,He=x[T];(He||!ee(He))&&(Ye=He,Me=!1,P&&Ye!==O&&!P(Ye)&&(Ye=O,Me=!0),L&&(Ye=L(Ye,O,x),Me=Ye===O)),Me?O?Ye=nk(A,x,O):Ye=O:(lu(Ye)||Ke(O))&&ae&&O&&(lu(O)||Ke(O))&&ie(O,function(lt,et){rk(A,Ye,lt,et)}),A.set(x,T,Ye),Ce&&A.ref(x,T),Te&&A.rdOnly(x,T)}s(rk,"_applyDefaultValue");var Nh=Gb("[[ai_dynCfg_1]]"),a7=Gb("[[ai_blkDynCfg_1]]"),l7=Gb("[[ai_frcDynCfg_1]]");function c7(A){if(A){var x;if(Ke(A)?(x=[],x[Yr]=A[Yr]):lu(A)&&(x={}),x)return ie(A,function(T,S){x[T]=c7(S)}),x}return A}s(c7,"_cfgDeepCopy");function GY(A){if(A){var x=A[Nh]||A;if(x.cfg&&(x.cfg===A||x.cfg[Nh]===x))return x}return null}s(GY,"getDynamicConfigHandler");function HY(A){if(A&&(lu(A)||Ke(A)))try{A[a7]=!0}catch{}return A}s(HY,"blockDynamicConversion");function ik(A,x,T){var S=!1;return T&&!A[x.blkVal]&&(S=T[l7],!S&&!T[a7]&&(S=lu(T)||Ke(T))),S}s(ik,"_canMakeDynamic");function LC(A){Yn("InvalidAccess:"+A)}s(LC,"throwInvalidAccess");var jY=["push","pop","shift","unshift","splice"],fE=s(function(A,x,T,S){A&&A[MA](3,108,"".concat(T," [").concat(x,"] failed - ")+Lt(S))},"_throwDynamicError");function Lh(A,x,T){Ke(x)&&Un(jY,function(S){var P=x[S];x[S]=function(){for(var L=[],O=0;O<arguments.length;O++)L[O]=arguments[O];var K=P[uw](this,L);return QC(A,x,T,"Patching"),K}})}s(Lh,"_patchArray");function Vd(A,x){var T=Oe(A,x);return T&&T.get}s(Vd,"_getOwnPropGetter");function u7(A,x,T,S){var P={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(au(P.h,Ce)===-1&&P.h[ji](Ce),A.trk(Ce,P))},"trk"),clr:s(function(Ce){var Te=au(P.h,Ce);Te!==-1&&P.h[cC](Te,1)},"clr")},L=!0,O=!1;function K(){L&&(O=O||ik(K,A,S),S&&!S[Nh]&&O&&(S=QC(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&P.trk(Ce),S}s(K,"_getProperty"),K[A.prop]={chng:s(function(){A.add(P)},"chng")};function ae(Ce){if(S!==Ce){K[A.ro]&&!A.upd&&LC("["+T+"] is read-only:"+Lt(x)),L&&(O=O||ik(K,A,S),L=!1);var Te=O&&K[A.rf];if(O)if(Te){ie(S,function(Ye){S[Ye]=Ce?Ce[Ye]:zu});try{ie(Ce,function(Ye,Me){FC(A,S,Ye,Me)}),Ce=S}catch(Ye){fE((A.hdlr||{})[pa],T,"Assigning",Ye),O=!1}}else S&&S[Nh]&&ie(S,function(Ye){var Me=Vd(S,Ye);if(Me){var He=Me[A.prop];He&&He.chng()}});if(Ce!==S){var Le=Ce&&ik(K,A,Ce);!Te&&Le&&(Ce=QC(A,Ce,T,"Converting")),S=Ce,O=Le}A.add(P)}}s(ae,"_setProperty"),ze(x,P.n,{g:K,s:ae})}s(u7,"_createDynamicProperty");function FC(A,x,T,S){if(x){var P=Vd(x,T),L=P&&!!P[A.prop];L?x[T]=S:u7(A,x,T,S)}return x}s(FC,"_setDynamicProperty");function MC(A,x,T,S){if(x){var P=Vd(x,T),L=P&&!!P[A.prop],O=S&&S[0],K=S&&S[1],ae=S&&S[2];if(!L){if(ae)try{HY(x)}catch(Ce){fE((A.hdlr||{})[pa],T,"Blocking",Ce)}try{FC(A,x,T,x[T]),P=Vd(x,T)}catch(Ce){fE((A.hdlr||{})[pa],T,"State",Ce)}}O&&(P[A.rf]=O),K&&(P[A.ro]=K),ae&&(P[A.blkVal]=!0)}return x}s(MC,"_setDynamicPropertyState");function QC(A,x,T,S){try{ie(x,function(P,L){FC(A,x,P,L)}),x[Nh]||(be(x,Nh,{get:s(function(){return A.hdlr},"get")}),Lh(A,x,T))}catch(P){fE((A.hdlr||{})[pa],T,S,P)}return x}s(QC,"_makeDynamicObject");var pE="[[ai_",mE="]]";function VY(A){var x=RA(pE+"get"+A.uid+mE),T=RA(pE+"ro"+A.uid+mE),S=RA(pE+"rf"+A.uid+mE),P=RA(pE+"blkVal"+A.uid+mE),L=RA(pE+"dtl"+A.uid+mE),O=null,K=null,ae;function Ce(Me,He){var lt=ae.act;try{ae.act=Me,Me&&Me[L]&&(Un(Me[L],function(At){At.clr(Me)}),Me[L]=[]),He({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(At){var et=A[pa];throw et&&et[MA](1,107,Lt(At)),At}finally{ae.act=lt||null}}s(Ce,"_useHandler");function Te(){if(O){var Me=O;O=null,K&&K[uC](),K=null;var He=[];if(Un(Me,function(lt){if(lt&&(lt[L]&&(Un(lt[L],function(et){et.clr(lt)}),lt[L]=null),lt.fn))try{Ce(lt,lt.fn)}catch(et){He[ji](et)}}),O)try{Te()}catch(lt){He[ji](lt)}He[Yr]>0&&O3("Watcher error(s): ",He)}}s(Te,"_notifyWatchers");function Le(Me){if(Me&&Me.h[Yr]>0){O||(O=[]),K||(K=vh(function(){K=null,Te()},0));for(var He=0;He<Me.h[Yr];He++){var lt=Me.h[He];lt&&au(O,lt)===-1&&O[ji](lt)}}}s(Le,"_addWatcher");function Ye(Me,He){if(Me){var lt=Me[L]=Me[L]||[];au(lt,He)===-1&&lt[ji](He)}}return s(Ye,"_trackHandler"),ae={prop:x,ro:T,rf:S,blkVal:P,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ye},ae}s(VY,"_createState");function Fw(A,x){var T={fn:x,rm:s(function(){T.fn=null,A=null,x=null},"rm")};return ze(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,x),T}s(Fw,"_createAndUseHandler");function d7(A,x,T){var S=GY(x);if(S)return S;var P=Wp("dyncfg",!0),L=x&&T!==!1?x:c7(x),O;function K(){O.notify()}s(K,"_notifyWatchers");function ae(et,At,Pt){try{et=FC(O,et,At,Pt)}catch(Vt){fE(A,At,"Setting value",Vt)}return et[At]}s(ae,"_setValue");function Ce(et){return Fw(O,et)}s(Ce,"_watch");function Te(et,At){O.use(null,function(Pt){var Vt=O.upd;try{q(At)||(O.upd=At),et(Pt)}finally{O.upd=Vt}})}s(Te,"_block");function Le(et,At){var Pt;return MC(O,et,At,(Pt={},Pt[0]=!0,Pt))[At]}s(Le,"_ref");function Ye(et,At){var Pt;return MC(O,et,At,(Pt={},Pt[1]=!0,Pt))[At]}s(Ye,"_rdOnly");function Me(et,At){var Pt;return MC(O,et,At,(Pt={},Pt[2]=!0,Pt))[At]}s(Me,"_blkPropValue");function He(et,At){return At&&ie(At,function(Pt,Vt){rk(lt,et,Pt,Vt)}),et}s(He,"_applyDefaults");var lt={uid:null,cfg:L,logger:A,notify:K,set:ae,setDf:He,watch:Ce,ref:Le,rdOnly:Ye,blkVal:Me,_block:Te};return ze(lt,"uid",{c:!1,e:!1,w:!1,v:P}),O=VY(lt),QC(O,L,"config","Creating"),lt}s(d7,"_createDynamicHandler");function f7(A,x){A?(A[lC](x),A[MA](2,108,x)):LC(x)}s(f7,"_logInvalidAccess");function Xu(A,x,T,S){var P=d7(T,A||{},S);return x&&P.setDf(P.cfg,x),P}s(Xu,"createDynamicConfig");function Gp(A,x,T){var S=A[Nh]||A;return S.cfg&&(S.cfg===A||S.cfg[Nh]===S)?S[Fp](x):(f7(T,Y6+Lt(A)),Xu(A,null,T)[Fp](x))}s(Gp,"onConfigChange");function OC(A,x){if(A&&A[QA])return A[QA](x)}s(OC,"runTargetUnload");function p7(A,x,T){var S;return T||(S=yC(function(P){T=P})),A&&bY(A)>0?$u(OC(A[0],x),function(){p7(zy(A,1),x,T)}):T(),S}s(p7,"doUnloadAll");var $Y=500,m7="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function zY(A,x,T){return!A&&ee(A)?x:Tt(A)?A:Ot(A)[aC]()==="true"}s(zY,"_stringToBoolOrDefault");function YY(A){return{mrg:!0,v:A}}s(YY,"cfgDfMerge");function ok(A,x,T){return{fb:T,isVal:A,v:x}}s(ok,"cfgDfValidate");function cf(A,x){return{fb:x,set:zY,v:!!A}}s(cf,"cfgDfBoolean");var Mw=[vC,bC,Iw,HA],Qw=null,Ow;function KY(A,x){return function(){var T=arguments,S=h7(x);if(S){var P=S.listener;P&&P[A]&&P[A][uw](P,T)}}}s(KY,"_listenerProxyFunc");function JY(){var A=Zs("Microsoft");return A&&(Qw=A.ApplicationInsights),Qw}s(JY,"_getExtensionNamespace");function h7(A){var x=Qw;return!x&&A.disableDbgExt!==!0&&(x=Qw||JY()),x?x.ChromeDbgExt:null}s(h7,"getDebugExt");function XY(A){if(!Ow){Ow={};for(var x=0;x<Mw[Yr];x++)Ow[Mw[x]]=KY(Mw[x],A)}return Ow}s(XY,"getDebugListener");var UC,g7="warnToConsole",ZY="AI (Internal): ",eK="AI: ",tK="AITR_",A7={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},qC=(UC={},UC[0]=null,UC[1]="errorToConsole",UC[2]=g7,UC[3]="debugToConsole",UC);function du(A){return A?'"'+A[Rh](/\"/g,mi)+'"':mi}s(du,"_sanitizeDiagnosticText");function hE(A,x){var T=uE();if(T){var S="log";T[A]&&(S=A),Be(T[S])&&T[S](x)}}s(hE,"_logToConsole");var Uw=function(){function A(x,T,S,P){S===void 0&&(S=!1);var L=this;L[pw]=x,L[UA]=(S?eK:ZY)+x;var O=mi;kC()&&(O=uu().stringify(P));var K=(T?" message:"+du(T):mi)+(P?" props:"+du(O):mi);L[UA]+=K}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function gE(A,x){return(A||{})[pa]||new AE(x)}s(gE,"safeGetLogger");var AE=function(){function A(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},P,L,O,K,ae;Jl(A,this,function(Ce){ae=Le(x||{}),Ce.consoleLoggingLevel=function(){return P},Ce[MA]=function(He,lt,et,At,Pt){Pt===void 0&&(Pt=!1);var Vt=new Uw(lt,et,Pt,At);if(K)throw Lt(Vt);var hn=qC[He]||g7;if(q(Vt[UA]))Me("throw"+(He===1?"Critical":"Warning"),Vt);else{if(Pt){var Hr=+Vt[pw];!S[Hr]&&P>=He&&(Ce[hn](Vt[UA]),S[Hr]=!0)}else P>=He&&Ce[hn](Vt[UA]);Te(He,Vt)}},Ce.debugToConsole=function(He){hE("debug",He),Me("warning",He)},Ce[lC]=function(He){hE("warn",He),Me("warning",He)},Ce.errorToConsole=function(He){hE("error",He),Me("error",He)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[QA]=function(He){ae&&ae.rm(),ae=null};function Te(He,lt){if(!Ye()){var et=!0,At=tK+lt[pw];if(S[At]?et=!1:S[At]=!0,et&&(He<=L&&(Ce.queue[ji](lt),T++,Me(He===1?"error":"warn",lt)),T===O)){var Pt="Internal events throttle limit per PageView reached for this app.",Vt=new Uw(23,Pt,!1);Ce.queue[ji](Vt),He===1?Ce.errorToConsole(Pt):Ce[lC](Pt)}}}s(Te,"_logInternalMessage");function Le(He){return Gp(Xu(He,A7,Ce).cfg,function(lt){var et=lt.cfg;P=et[M6],L=et.loggingLevelTelemetry,O=et.maxMessageLimit,K=et.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ye(){return T>=O}s(Ye,"_areInternalMessagesThrottled");function Me(He,lt){var et=h7(x||{});et&&et[rf]&&et[rf](He,lt)}s(Me,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function sk(A){return A||new AE}s(sk,"_getLogger");function wn(A,x,T,S,P,L){L===void 0&&(L=!1),sk(A)[MA](x,T,S,P,L)}s(wn,"_throwInternal");function qw(A,x){sk(A)[lC](x)}s(qw,"_warnToConsole");var yE,Fh,y7="toGMTString",C7="toUTCString",Ww="cookie",Hp="expires",x7="isCookieUseDisabled",Gw="disableCookiesUsage",v7="_ckMgr",Hw=null,WC=null,jw=null,uf,b7={},E7={},I7=(yE={cookieCfg:YY((Fh={},Fh[ww]={fb:"cookieDomain",dfVal:Sw},Fh.path={fb:"cookiePath",dfVal:Sw},Fh.enabled=zu,Fh.ignoreCookies=zu,Fh.blockedCookies=zu,Fh)),cookieDomain:zu,cookiePath:zu},yE[Gw]=zu,yE);function ak(){!uf&&(uf=Qr(function(){return jy()}))}s(ak,"_getDoc");function CE(A){return A?A.isEnabled():!0}s(CE,"_isMgrEnabled");function lk(A,x){return x&&A&&Ke(A.ignoreCookies)?au(A.ignoreCookies,x)!==-1:!1}s(lk,"_isIgnoredCookie");function nK(A,x){return x&&A&&Ke(A.blockedCookies)&&au(A.blockedCookies,x)!==-1?!0:lk(A,x)}s(nK,"_isBlockedCookie");function ck(A,x){var T=x[tf];if(ee(T)){var S=void 0;q(A[x7])||(S=!A[x7]),q(A[Gw])||(S=!A[Gw]),T=S}return T}s(ck,"_isCfgEnabled");function rK(A,x){var T,S,P,L,O,K,ae,Ce;A=Xu(A||E7,null,x).cfg,L=Gp(A,function(Le){Le.setDf(Le.cfg,I7),T=Le.ref(Le.cfg,"cookieCfg"),S=T[_w]||"/",P=T[ww],O=ck(A,T)!==!1,K=T.getCookie||iK,ae=T.setCookie||GC,Ce=T.delCookie||GC},x);var Te={isEnabled:s(function(){var Le=ck(A,T)!==!1&&O&&T7(x),Ye=E7[v7];return Le&&Ye&&Te!==Ye&&(Le=CE(Ye)),Le},"isEnabled"),setEnabled:s(function(Le){O=Le!==!1,T[tf]=Le},"setEnabled"),set:s(function(Le,Ye,Me,He,lt){var et=!1;if(CE(Te)&&!nK(T,Le)){var At={},Pt=Hi(Ye||mi),Vt=Pp(Pt,";");if(Vt!==-1&&(Pt=Hi(M(Ye,Vt)),At=uk(he(Ye,Vt+1))),Bh(At,ww,He||P,le,q),!ee(Me)){var hn=jd();if(q(At[Hp])){var Hr=yh(),xi=Hr+Me*1e3;if(xi>0){var vi=new Date;vi.setTime(xi),Bh(At,Hp,w7(vi,hn?y7:C7)||w7(vi,hn?y7:C7)||mi,le)}}hn||Bh(At,"max-age",mi+Me,null,q)}var po=RC();po&&po.protocol==="https:"&&(Bh(At,"secure",null,null,q),WC===null&&(WC=!oK((mh()||{})[hw])),WC&&Bh(At,"SameSite","None",null,q)),Bh(At,_w,lt||S,null,q),ae(Le,_7(Pt,At)),et=!0}return et},"set"),get:s(function(Le){var Ye=mi;return CE(Te)&&!lk(T,Le)&&(Ye=K(Le)),Ye},"get"),del:s(function(Le,Ye){var Me=!1;return CE(Te)&&(Me=Te.purge(Le,Ye)),Me},"del"),purge:s(function(Le,Ye){var Me,He=!1;if(T7(x)){var lt=(Me={},Me[_w]=Ye||"/",Me[Hp]="Thu, 01 Jan 1970 00:00:01 GMT",Me);jd()||(lt["max-age"]="0"),Ce(Le,_7(mi,lt)),He=!0}return He},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[v7]=Te,Te}s(rK,"createCookieMgr");function T7(A){if(Hw===null){Hw=!1,!uf&&ak();try{var x=uf.v||{};Hw=x[Ww]!==void 0}catch(T){wn(A,2,68,"Cannot access document.cookie - "+il(T),{exception:Lt(T)})}}return Hw}s(T7,"areCookiesSupported");function uk(A){var x={};if(A&&A[Yr]){var T=Hi(A)[Sh](";");Un(T,function(S){if(S=Hi(S||mi),S){var P=Pp(S,"=");P===-1?x[S]=null:x[Hi(M(S,P))]=Hi(he(S,P+1))}})}return x}s(uk,"_extractParts");function w7(A,x){return Be(A[x])?A[x]():null}s(w7,"_formatDate");function _7(A,x){var T=A||mi;return ie(x,function(S,P){T+="; "+S+(ee(P)?mi:"="+P)}),T}s(_7,"_formatCookieValue");function iK(A){var x=mi;if(!uf&&ak(),uf.v){var T=uf.v[Ww]||mi;jw!==T&&(b7=uk(T),jw=T),x=Hi(b7[A]||mi)}return x}s(iK,"_getCookieValue");function GC(A,x){!uf&&ak(),uf.v&&(uf.v[Ww]=A+"="+x)}s(GC,"_setCookieValue");function oK(A){return pe(A)?!!(xl(A,"CPU iPhone OS 12")||xl(A,"iPad; CPU OS 12")||xl(A,"Macintosh; Intel Mac OS X 10_14")&&xl(A,"Version/")&&xl(A,"Safari")||xl(A,"Macintosh; Intel Mac OS X 10_14")&&B6(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||xl(A,"Chrome/5")||xl(A,"Chrome/6")||xl(A,"UnrealEngine")&&!xl(A,"Chrome")||xl(A,"UCBrowser/12")||xl(A,"UCBrowser/11")):!1}s(oK,"uaDisallowsSameSiteNone");var dk={perfEvtsSendAll:!1};function sK(A){A.h=null;var x=A.cb;A.cb=[],Un(x,function(T){te(T.fn,[T.arg])})}s(sK,"_runScheduledListeners");function Mh(A,x,T,S){Un(A,function(P){P&&P[x]&&(T?(T.cb[ji]({fn:S,arg:P}),T.h=T.h||vh(sK,0,T)):te(S,[P]))})}s(Mh,"_runListeners");var aK=function(){function A(x){this.listeners=[];var T,S,P=[],L={h:null,cb:[]},O=Xu(x,dk);S=O[Fp](function(K){T=!!K.cfg.perfEvtsSendAll}),Jl(A,this,function(K){ze(K,"listeners",{g:s(function(){return P},"g")}),K[dw]=function(ae){P[ji](ae)},K[tE]=function(ae){for(var Ce=au(P,ae);Ce>-1;)P[cC](Ce,1),Ce=au(P,ae)},K[vC]=function(ae){Mh(P,vC,L,function(Ce){Ce[vC](ae)})},K[bC]=function(ae,Ce){Mh(P,bC,L,function(Te){Te[bC](ae,Ce)})},K[Iw]=function(ae,Ce){Mh(P,Iw,Ce?L:null,function(Te){Te[Iw](ae,Ce)})},K[HA]=function(ae){ae&&(T||!ae[M3]())&&Mh(P,HA,null,function(Ce){ae.isAsync?vh(function(){return Ce[HA](ae)},0):Ce[HA](ae)})},K[q3]=function(ae){ae&&ae[Yr]&&Mh(P,q3,L,function(Ce){Ce[q3](ae)})},K[W3]=function(ae){ae&&ae[hC]&&Mh(P,W3,L,function(Ce){Ce[W3](ae)})},K[Tw]=function(ae,Ce){if(ae>0){var Te=Ce||0;Mh(P,Tw,L,function(Le){Le[Tw](ae,Te)})}},K[QA]=function(ae){var Ce=s(function(){S&&S.rm(),S=null,P=[],L.h&&L.h[uC](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(Mh(P,"unload",null,function(Le){var Ye=Le[QA](ae);Ye&&(Te||(Te=[]),Te[ji](Ye))}),Te)return yC(function(Le){return $u(U3(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),HC="ctx",fk="ParentContextKey",xE="ChildrenContextKey",lK=null,Vw=function(){function A(x,T,S){var P=this;if(P.start=yh(),P[wh]=x,P.isAsync=S,P[M3]=function(){return!1},Be(T)){var L;ze(P,"payload",{g:s(function(){return!L&&Be(T)&&(L=T(),T=null),L},"g")})}P[kh]=function(O){return O?O===A[fk]||O===A[xE]?P[O]:(P[HC]||{})[O]:null},P[Gd]=function(O,K){if(O)if(O===A[fk])P[O]||(P[M3]=function(){return!0}),P[O]=K;else if(O===A[xE])P[O]=K;else{var ae=P[HC]=P[HC]||{};ae[O]=K}},P.complete=function(){var O=0,K=P[kh](A[xE]);if(Ke(K))for(var ae=0;ae<K[Yr];ae++){var Ce=K[ae];Ce&&(O+=Ce.time)}P.time=yh()-P.start,P.exTime=P.time-O,P.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),cK=function(){function A(x){this.ctx={},Jl(A,this,function(T){T.create=function(S,P,L){return new Vw(S,P,L)},T.fire=function(S){S&&(S.complete(),x&&Be(x[HA])&&x[HA](S))},T[Gd]=function(S,P){if(S){var L=T[HC]=T[HC]||{};L[S]=P}},T[kh]=function(S){return(T[HC]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),df="CoreUtils.doPerf";function jC(A,x,T,S,P){if(A){var L=A;if(L[iE]&&(L=L[iE]()),L){var O=void 0,K=L[kh](df);try{if(O=L.create(x(),S,P),O){if(K&&O[Gd]&&(O[Gd](Vw[fk],K),K[kh]&&K[Gd])){var ae=K[kh](Vw[xE]);ae||(ae=[],K[Gd](Vw[xE],ae)),ae[ji](O)}return L[Gd](df,O),T(O)}}catch(Ce){O&&O[Gd]&&O[Gd]("exception",Ce)}finally{O&&L.fire(O),L[Gd](df,K)}}}return T()}s(jC,"doPerf");function ha(){return lK}s(ha,"getGblPerfMgr");var $w="00000000000000000000000000000000",VC="0000000000000000";function zw(A,x,T){return A&&A[Yr]===x&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(zw,"_isValid");function Qh(A){return zw(A,32,$w)}s(Qh,"isValidTraceId");function zA(A){return zw(A,16,VC)}s(zA,"isValidSpanId");var vE=o7("plugin");function Oh(A){return vE.get(A,"state",{},!0)}s(Oh,"_getPluginState");function pk(A,x){for(var T=[],S=null,P=A[of](),L;P;){var O=P[fC]();if(O){S&&S[_h]&&O[Yu]&&S[_h](O),L=Oh(O);var K=!!L[ef];O[ef]&&(K=O[ef]()),K||T[ji](O),S=O,P=P[of]()}}Un(T,function(ae){var Ce=A[ma]();ae[eE](A.getCfg(),Ce,x,A[of]()),L=Oh(ae),!ae[ma]&&!L[ma]&&(L[ma]=Ce),L[ef]=!0,delete L[nf]})}s(pk,"initializePlugins");function mk(A){return A.sort(function(x,T){var S=0;if(T){var P=T[Yu];x[Yu]?S=P?x[xC]-T[xC]:1:P&&(S=-1)}else S=x?1:-1;return S})}s(mk,"sortPlugins");function uK(A){var x={};return{getName:s(function(){return x[wh]},"getName"),setName:s(function(T){A&&A.setName(T),x[wh]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),Qh(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),zA(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[O6]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),x[O6]=T},"setTraceFlags")}}s(uK,"createDistributedTraceContext");var dK="TelemetryPluginChain",S7="_hasRun",hk="_getTelCtx",R7=0;function fK(A,x,T){for(;A;){if(A[fC]()===T)return A;A=A[of]()}return B([T],x.config||{},x)}s(fK,"_getNextProxyStart");function gk(A,x,T,S){var P=null,L=[];x||(x=Xu({},null,T[pa])),S!==null&&(P=S?fK(A,T,S):A);var O={_next:ae,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return gE(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!P},"hasNext"),getNext:s(function(){return P},"getNext"),setNext:s(function(Me){P=Me},"setNext"),iterate:Ye,onComplete:K}};function K(Me,He){for(var lt=[],et=2;et<arguments.length;et++)lt[et-2]=arguments[et];Me&&L[ji]({func:Me,self:q(He)?O.ctx:He,args:lt})}s(K,"_addOnComplete");function ae(){var Me=P;if(P=Me?Me[of]():null,!Me){var He=L;He&&He[Yr]>0&&(Un(He,function(lt){try{lt.func.call(lt.self,lt.args)}catch(et){wn(T[pa],2,73,"Unexpected Exception during onComplete - "+Lt(et))}}),L=[])}return Me}s(ae,"_moveNext");function Ce(Me,He){var lt=null,et=x.cfg;if(et&&Me){var At=et[GA];!At&&He&&(At={}),et[GA]=At,At=x.ref(et,GA),At&&(lt=At[Me],!lt&&He&&(lt={}),At[Me]=lt,lt=x.ref(At,Me))}return lt}s(Ce,"_getExtCfg");function Te(Me,He){var lt=Ce(Me,!0);return He&&ie(He,function(et,At){if(ee(lt[et])){var Pt=x.cfg[et];(Pt||!ee(Pt))&&(lt[et]=Pt)}rk(x,lt,et,At)}),x.setDf(lt,He)}s(Te,"_resolveExtCfg");function Le(Me,He,lt){lt===void 0&&(lt=!1);var et,At=Ce(Me,!1),Pt=x.cfg;return At&&(At[He]||!ee(At[He]))?et=At[He]:(Pt[He]||!ee(Pt[He]))&&(et=Pt[He]),et||!ee(et)?et:lt}s(Le,"_getConfig");function Ye(Me){for(var He;He=O._next();){var lt=He[fC]();lt&&Me(lt)}}return s(Ye,"_iterateChain"),O}s(gk,"_createInternalContext");function $C(A,x,T,S){var P=Xu(x),L=gk(A,P,T,S),O=L.ctx;function K(Ce){var Te=L._next();return Te&&Te[Yu](Ce,O),!Te}s(K,"_processNext");function ae(Ce,Te){return Ce===void 0&&(Ce=null),Ke(Ce)&&(Ce=B(Ce,P.cfg,T,Te)),$C(Ce||O[of](),P.cfg,T,Te)}return s(ae,"_createNew"),O[Cl]=K,O[OA]=ae,O}s($C,"createProcessTelemetryContext");function w(A,x,T){var S=Xu(x.config),P=gk(A,S,x,T),L=P.ctx;function O(ae){var Ce=P._next();return Ce&&Ce[QA](L,ae),!Ce}s(O,"_processNext");function K(ae,Ce){return ae===void 0&&(ae=null),Ke(ae)&&(ae=B(ae,S.cfg,x,Ce)),w(ae||L[of](),x,Ce)}return s(K,"_createNew"),L[Cl]=O,L[OA]=K,L}s(w,"createProcessTelemetryUnloadContext");function R(A,x,T){var S=Xu(x.config),P=gk(A,S,x,T),L=P.ctx;function O(ae){return L.iterate(function(Ce){Be(Ce[Mp])&&Ce[Mp](L,ae)})}s(O,"_processNext");function K(ae,Ce){return ae===void 0&&(ae=null),Ke(ae)&&(ae=B(ae,S.cfg,x,Ce)),R(ae||L[of](),x,Ce)}return s(K,"_createNew"),L[Cl]=O,L[OA]=K,L}s(R,"createProcessTelemetryUpdateContext");function B(A,x,T,S){var P=null,L=!S;if(Ke(A)&&A[Yr]>0){var O=null;Un(A,function(K){if(!L&&S===K&&(L=!0),L&&K&&Be(K[Yu])){var ae=F(K,x,T);P||(P=ae),O&&O._setNext(ae),O=ae}})}return S&&!P?B([S],x,T):P}s(B,"createTelemetryProxyChain");function F(A,x,T){var S=null,P=Be(A[Yu]),L=Be(A[_h]),O;A?O=A[Th]+"-"+A[xC]+"-"+R7++:O="Unknown-0-"+R7++;var K={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ye,_id:O,_setNext:s(function(Me){S=Me},"_setNext")};function ae(){var Me;return A&&Be(A[hk])&&(Me=A[hk]()),Me||(Me=$C(K,x,T)),Me}s(ae,"_getTelCtx");function Ce(Me,He,lt,et,At){var Pt=!1,Vt=A?A[Th]:dK,hn=Me[S7];return hn||(hn=Me[S7]={}),Me.setNext(S),A&&jC(Me[ma](),function(){return Vt+":"+lt},function(){hn[O]=!0;try{var Hr=S?S._id:mi;Hr&&(hn[Hr]=!1),Pt=He(Me)}catch(vi){var xi=S?hn[S._id]:!0;xi&&(Pt=!0),(!S||!xi)&&wn(Me[rf](),1,73,"Plugin ["+Vt+"] failed during "+lt+" - "+Lt(vi)+", run flags: "+Lt(hn))}},et,At),Pt}s(Ce,"_processChain");function Te(Me,He){He=He||ae();function lt(et){if(!A||!P)return!1;var At=Oh(A);return At[nf]||At[Ew]?!1:(L&&A[_h](S),A[Yu](Me,et),!0)}s(lt,"_callProcessTelemetry"),Ce(He,lt,"processTelemetry",function(){return{item:Me}},!Me.sync)||He[Cl](Me)}s(Te,"_processTelemetry");function Le(Me,He){function lt(){var et=!1;if(A){var At=Oh(A),Pt=A[ma]||At[ma];A&&(!Pt||Pt===Me.core())&&!At[nf]&&(At[ma]=null,At[nf]=!0,At[ef]=!1,A[nf]&&A[nf](Me,He)===!0&&(et=!0))}return et}s(lt,"_callTeardown"),Ce(Me,lt,"unload",function(){},He.isAsync)||Me[Cl](He)}s(Le,"_unloadPlugin");function Ye(Me,He){function lt(){var et=!1;if(A){var At=Oh(A),Pt=A[ma]||At[ma];A&&(!Pt||Pt===Me.core())&&!At[nf]&&A[Mp]&&A[Mp](Me,He)===!0&&(et=!0)}return et}s(lt,"_callUpdate"),Ce(Me,lt,"update",function(){},!1)||Me[Cl](He)}return s(Ye,"_updatePlugin"),Gt(K)}s(F,"createTelemetryPluginProxy");function se(){var A=[];function x(S){S&&A[ji](S)}s(x,"_addHandler");function T(S,P){Un(A,function(L){try{L(S,P)}catch(O){wn(S[rf](),2,73,"Unexpected error calling unload handler - "+Lt(O))}}),A=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(se,"createUnloadHandlerContainer");function Ee(){var A=[];function x(S){var P=A;A=[],Un(P,function(L){try{(L.rm||L.remove).call(L)}catch(O){wn(S,2,73,"Unloading:"+Lt(O))}})}s(x,"_doUnload");function T(S){S&&$y(A,S)}return s(T,"_addHook"),{run:x,add:T}}s(Ee,"createUnloadHookContainer");var we,Qe="getPlugin",Xe=(we={},we[GA]={isVal:Sw,v:{}},we),pt=function(){function A(){var x=this,T,S,P,L,O;Ce(),Jl(A,x,function(Te){Te[eE]=function(Le,Ye,Me,He){ae(Le,Ye,He),T=!0},Te[nf]=function(Le,Ye){var Me=Te[ma];if(!Me||Le&&Me!==Le[ma]())return;var He,lt=!1,et=Le||w(null,Me,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0,isAsync:!1};function Pt(){lt||(lt=!0,L.run(et,Ye),O.run(et[rf]()),He===!0&&et[Cl](At),Ce())}return s(Pt,"_unloadCallback"),!Te[mw]||Te[mw](et,At,Pt)!==!0?Pt():He=!0,He},Te[Mp]=function(Le,Ye){var Me=Te[ma];if(!Me||Le&&Me!==Le[ma]())return;var He,lt=!1,et=Le||R(null,Me,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0};function Pt(){lt||(lt=!0,ae(et.getCfg(),et.core(),et[of]()))}return s(Pt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(et,At,Pt)!==!0?Pt():He=!0,He},sE(Te,"_addUnloadCb",function(){return L},"add"),sE(Te,"_addHook",function(){return O},"add"),ze(Te,"_unloadHooks",{g:s(function(){return O},"g")})}),x[rf]=function(Te){return K(Te)[rf]()},x[ef]=function(){return T},x.setInitialized=function(Te){T=Te},x[_h]=function(Te){P=Te},x[Cl]=function(Te,Le){Le?Le[Cl](Te):P&&Be(P[Yu])&&P[Yu](Te,null)},x._getTelCtx=K;function K(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ye=S||$C(null,{},x[ma]);P&&P[Qe]?Le=Ye[OA](null,P[Qe]):Le=Ye[OA](null,P)}return Le}s(K,"_getTelCtx");function ae(Te,Le,Ye){Xu(Te,Xe,gE(Le)),!Ye&&Le&&(Ye=Le[pC]()[of]());var Me=P;P&&P[Qe]&&(Me=P[Qe]()),x[ma]=Le,S=$C(Ye,Te,Le,Me)}s(ae,"_setDefaults");function Ce(){T=!1,x[ma]=null,S=null,P=null,O=Ee(),L=se()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function on(A,x,T){var S={id:x,fn:T};$y(A,S);var P={remove:s(function(){Un(A,function(L,O){if(L.id===S.id)return A[cC](O,1),-1})},"remove")};return P}s(on,"_addInitializer");function Ir(A,x,T){for(var S=!1,P=A[Yr],L=0;L<P;++L){var O=A[L];if(O)try{if(O.fn[uw](null,[x])===!1){S=!0;break}}catch(K){wn(T,2,64,"Telemetry initializer failed: "+il(K),{exception:Lt(K)},!0)}}return!S}s(Ir,"_runInitializers");var Wr=function(A){Zb(x,A);function x(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,P;L(),Jl(x,T,function(O,K){O.addTelemetryInitializer=function(ae){return on(P,S++,ae)},O[Yu]=function(ae,Ce){Ir(P,ae,Ce?Ce[rf]():O[rf]())&&O[Cl](ae,Ce)},O[mw]=function(){L()}});function L(){S=0,P=[]}return s(L,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(pt),un,En="Plugins must provide initialize method",Or="_notificationManager",Tr="SDK is still unloading...",hi="SDK is not initialized",no=100,ki=5e4,Fa=Xt((un={cookieCfg:{}},un[CC]={rdOnly:!0,ref:!0,v:[]},un[Up]={rdOnly:!0,ref:!0,v:[]},un[GA]={ref:!0,v:{}},un[Hd]=zu,un.loggingLevelConsole=0,un.diagnosticLogInterval=zu,un));function zC(A,x){return new cK(x)}s(zC,"_createPerfManager");function bE(A,x,T){var S=[],P=[],L={};return Un(T,function(O){(ee(O)||ee(O[eE]))&&Gn(En);var K=O[xC],ae=O[Th];O&&K&&(ee(L[K])?L[K]=ae:qw(A,"Two extensions have same priority #"+K+" - "+L[K]+", "+ae)),!K||K<x?S[ji](O):P[ji](O)}),{core:S,channels:P}}s(bE,"_validateExtensions");function Ak(A,x){var T=!1;return Un(x,function(S){if(S===A)return T=!0,-1}),T}s(Ak,"_isPluginPresent");function Yw(A,x,T,S){T&&ie(T,function(P,L){S&&lu(L)&&lu(x[P])&&Yw(A,x[P],L,S),S&&lu(L)&&lu(x[P])?Yw(A,x[P],L,S):A.set(x,P,L)})}s(Yw,"_deepMergeConfig");function k7(A,x){var T=null,S=-1;return Un(A,function(P,L){if(P.w===x)return T=P,S=L,-1}),{i:S,l:T}}s(k7,"_findWatcher");function pK(A,x){var T=k7(A,x).l;return T||(T={w:x,rm:s(function(){var S=k7(A,x);S.i!==-1&&A[cC](S.i,1)},"rm")},A[ji](T)),T}s(pK,"_addDelayedCfgListener");function yk(A,x,T){Un(x,function(S){var P=Gp(A,S.w,T);delete S.w,S.rm=function(){P.rm()}})}s(yk,"_registerDelayedCfgListener");function B7(A,x,T,S){return x.add(A[Fp](function(P){var L=P.cfg.disableDbgExt;L===!0&&S&&(T[tE](S),S=null),T&&!S&&L!==!0&&(S=XY(P.cfg),T[dw](S))})),S}s(B7,"_initDebugListener");function D7(A){return ze({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(D7,"_createUnloadHook");var It=function(){function A(){var x,T,S,P,L,O,K,ae,Ce,Te,Le,Ye,Me,He,lt,et,At,Pt,Vt,hn,Hr,xi,vi,po,cr,Ln,bi,_s,Oo,Ft,Fn,ro;Jl(A,this,function(Et){ot(),Et._getDbgPlgTargets=function(){return[vi,P]},Et[ef]=function(){return T},Et.activeStatus=function(){return Ln},Et._setPendingStatus=function(){Ln=3},Et[eE]=function(dt,fn,Br,Dn){Me&&Gn(Tr),Et[ef]()&&Gn("Core cannot be initialized more than once"),x=Xu(dt,Fa,Br||Et[pa],!1),dt=x.cfg,ec(x[Fp](function(wo){var is=wo.cfg,Rc=Ln===3;if(!Rc){_s=is.initInMemoMaxSize||no;var Zu=is.instrumentationKey,$p=is.endpointUrl;if(ee(Zu)){Hr=null,Ln=Ih.INACTIVE;var zp="Please provide instrumentation key";T?(wn(S,1,100,zp),qs()):Gn(zp);return}var l_=[];if(bt(Zu)?(l_[ji](Zu),Hr=null):Hr=Zu,bt($p)?(l_[ji]($p),bi=null):bi=$p,l_[Yr]){Oo=!1,Ln=3;var Qk=Sw(is.initTimeOut)?is.initTimeOut:ki,jK=cu(l_);vh(function(){Oo||wr()},Qk),$u(jK,function(ox){try{if(Oo)return;if(!ox.rejected){var sx=ox[dC];if(sx&&sx[Yr]){var nN=sx[0];if(Hr=nN&&nN[dC],sx[Yr]>1){var rN=sx[1];bi=rN&&rN[dC]}}Hr&&(dt.instrumentationKey=Hr,dt.endpointUrl=bi)}wr()}catch{Oo||wr()}})}else wr();var c_=wo.ref(wo.cfg,GA);ie(c_,function(ox){wo.ref(c_,ox)})}})),L=Dn,Vt=B7(x,Pt,L&&Et[Wd](),Vt),rx(),Et[pa]=Br;var Dr=dt[CC];if(Te=[],Te[ji].apply(Te,L6(L6([],fn,!1),Dr)),Le=dt[Up],Ws(null),(!Ye||Ye[Yr]===0)&&Gn("No "+Up+" available"),Le&&Le[Yr]>1){var xo=Et[fC]("TeeChannelController");(!xo||!xo.plugin)&&wn(S,1,28,"TeeChannel required")}yk(dt,xi,S),xi=null,T=!0,Ln===Ih.ACTIVE&&qs()},Et.getChannels=function(){var dt=[];return Ye&&Un(Ye,function(fn){dt[ji](fn)}),Gt(dt)},Et.track=function(dt){jC(Et[iE](),function(){return"AppInsightsCore:track"},function(){dt===null&&(Ss(dt),Gn("Invalid telemetry item")),!dt[wh]&&ee(dt[wh])&&(Ss(dt),Gn("telemetry name required")),dt.iKey=dt.iKey||Hr,dt.time=dt.time||oE(new Date),dt.ver=dt.ver||"4.0",!Me&&Et[ef]()&&Ln===Ih.ACTIVE?Oa()[Cl](dt):Ln!==Ih.INACTIVE&&P[Yr]<=_s&&P[ji](dt)},function(){return{item:dt}},!dt.sync)},Et[pC]=Oa,Et[Wd]=function(){return L||(L=new aK(x.cfg),Et[Or]=L),L},Et[dw]=function(dt){Et.getNotifyMgr()[dw](dt)},Et[tE]=function(dt){L&&L[tE](dt)},Et.getCookieMgr=function(){return ae||(ae=rK(x.cfg,Et[pa])),ae},Et.setCookieMgr=function(dt){ae!==dt&&(OC(ae,!1),ae=dt)},Et[iE]=function(){return O||K||ha()},Et.setPerfMgr=function(dt){O=dt},Et.eventCnt=function(){return P[Yr]},Et.releaseQueue=function(){if(T&&P[Yr]>0){var dt=P;P=[],Ln===2?Un(dt,function(fn){fn.iKey=fn.iKey||Hr,Oa()[Cl](fn)}):wn(S,2,20,"core init status is not active")}},Et.pollInternalLogs=function(dt){return lt=dt||null,ro=!1,Ft&&Ft[uC](),mo(!0)};function wr(){Oo=!0,ee(Hr)?(Ln=Ih.INACTIVE,wn(S,1,112,"ikey can't be resolved from promises")):Ln=Ih.ACTIVE,qs()}s(wr,"_setStatus");function qs(){T&&(Et.releaseQueue(),Et.pollInternalLogs())}s(qs,"_releaseQueues");function mo(dt){if((!Ft||!Ft[tf])&&!ro){var fn=dt||S&&S.queue[Yr]>0;fn&&(Fn||(Fn=!0,ec(x[Fp](function(Br){var Dn=Br.cfg.diagnosticLogInterval;(!Dn||!(Dn>0))&&(Dn=1e4);var Dr=!1;Ft&&(Dr=Ft[tf],Ft[uC]()),Ft=rw(nx,Dn),Ft.unref(),Ft[tf]=Dr}))),Ft[tf]=!0)}return Ft}s(mo,"_startLogPoller"),Et[F6]=function(){ro=!0,Ft&&Ft[uC](),nx()},H3(Et,function(){return He},["addTelemetryInitializer"]),Et[QA]=function(dt,fn,Br){dt===void 0&&(dt=!0),T||Gn(hi),Me&&Gn(Tr);var Dn={reason:50,isAsync:dt,flushComplete:!1},Dr;dt&&!fn&&(Dr=yC(function(is){fn=is}));var xo=w(pf(),Et);xo[fw](function(){Pt.run(Et[pa]),p7([ae,L,S],dt,function(){ot(),fn&&fn(Dn)})},Et);function wo(is){Dn.flushComplete=is,Me=!0,At.run(xo,Dn),Et[F6](),xo[Cl](Dn)}return s(wo,"_doUnload"),nx(),jp(dt,wo,6,Br),Dr},Et[fC]=Il,Et.addPlugin=function(dt,fn,Br,Dn){if(!dt){Dn&&Dn(!1),ix(En);return}var Dr=Il(dt[Th]);if(Dr&&!fn){Dn&&Dn(!1),ix("Plugin ["+dt[Th]+"] is already loaded!");return}var xo={reason:16};function wo(Zu){Te[ji](dt),xo.added=[dt],Ws(xo),Dn&&Dn(!0)}if(s(wo,"_addPlugin"),Dr){var is=[Dr.plugin],Rc={reason:2,isAsync:!!Br};fu(is,Rc,function(Zu){Zu?(xo.removed=is,xo.reason|=32,wo()):Dn&&Dn(!1)})}else wo()},Et.updateCfg=function(dt,fn){fn===void 0&&(fn=!0);var Br;if(Et[ef]()){Br={reason:1,cfg:x.cfg,oldCfg:XT({},x.cfg),newConfig:XT({},dt),merge:fn},dt=Br.newConfig;var Dn=x.cfg;dt[CC]=Dn[CC],dt[Up]=Dn[Up]}x._block(function(Dr){var xo=Dr.cfg;Yw(Dr,xo,dt,fn),fn||ie(xo,function(wo){tt(dt,wo)||Dr.set(xo,wo,zu)}),Dr.setDf(xo,Fa)},!0),x.notify(),Br&&Vp(Br)},Et.evtNamespace=function(){return et},Et.flush=jp,Et.getTraceCtx=function(dt){return hn||(hn=uK()),hn},Et.setTraceCtx=function(dt){hn=dt||null},Et.addUnloadHook=ec,sE(Et,"addUnloadCb",function(){return At},"add"),Et.onCfgChange=function(dt){var fn;return T?fn=Gp(x.cfg,dt,Et[pa]):fn=pK(xi,dt),D7(fn)},Et.getWParam=function(){return ph()||x.cfg.enableWParam?0:-1};function El(){var dt={};po=[];var fn=s(function(Br){Br&&Un(Br,function(Dn){if(Dn[Th]&&Dn[mC]&&!dt[Dn.identifier]){var Dr=Dn[Th]+"="+Dn[mC];po[ji](Dr),dt[Dn.identifier]=Dn}})},"_addPluginVersions");fn(Ye),Le&&Un(Le,function(Br){fn(Br)}),fn(Te)}s(El,"_setPluginVersions");function ot(){T=!1,x=Xu({},Fa,Et[pa]),x.cfg[M6]=1,ze(Et,"config",{g:s(function(){return x.cfg},"g"),s:s(function(fn){Et.updateCfg(fn,!1)},"s")}),ze(Et,"pluginVersionStringArr",{g:s(function(){return po||El(),po},"g")}),ze(Et,"pluginVersionString",{g:s(function(){return cr||(po||El(),cr=po.join(";")),cr||mi},"g")}),ze(Et,"logger",{g:s(function(){return S||(S=new AE(x.cfg),x[pa]=S),S},"g"),s:s(function(fn){x[pa]=fn,S!==fn&&(OC(S,!1),S=fn)},"s")}),Et[pa]=new AE(x.cfg),vi=[];var dt=Et.config[CC]||[];dt.splice(0,dt[Yr]),$y(dt,vi),He=new Wr,P=[],OC(L,!1),L=null,O=null,K=null,OC(ae,!1),ae=null,Ce=null,Te=[],Le=null,Ye=null,Me=!1,lt=null,et=Wp("AIBaseCore",!0),At=se(),hn=null,Hr=null,Pt=Ee(),xi=[],cr=null,po=null,ro=!1,Ft=null,Fn=!1,Ln=0,bi=null,_s=null,Oo=!1}s(ot,"_initDefaults");function Oa(){var dt=$C(pf(),x.cfg,Et);return dt[fw](mo),dt}s(Oa,"_createTelCtx");function Ws(dt){var fn=bE(Et[pa],$Y,Te);Ce=null,cr=null,po=null,Ye=(Le||[])[0]||[],Ye=mk($y(Ye,fn[Up]));var Br=$y(mk(fn[ma]),Ye);vi=Gt(Br);var Dn=Et.config[CC]||[];Dn.splice(0,Dn[Yr]),$y(Dn,vi);var Dr=Oa();Ye&&Ye[Yr]>0&&pk(Dr[OA](Ye),Br),pk(Dr,Br),dt&&Vp(dt)}s(Ws,"_initPluginChain");function Il(dt){var fn=null,Br=null,Dn=[];return Un(vi,function(Dr){if(Dr[Th]===dt&&Dr!==He)return Br=Dr,-1;Dr.getChannel&&Dn[ji](Dr)}),!Br&&Dn[Yr]>0&&Un(Dn,function(Dr){if(Br=Dr.getChannel(dt),!Br)return-1}),Br&&(fn={plugin:Br,setEnabled:s(function(Dr){Oh(Br)[Ew]=!Dr},"setEnabled"),isEnabled:s(function(){var Dr=Oh(Br);return!Dr[nf]&&!Dr[Ew]},"isEnabled"),remove:s(function(Dr,xo){Dr===void 0&&(Dr=!0);var wo=[Br],is={reason:1,isAsync:Dr};fu(wo,is,function(Rc){Rc&&Ws({reason:32,removed:wo}),xo&&xo(Rc)})},"remove")}),fn}s(Il,"_getPlugin");function pf(){if(!Ce){var dt=(vi||[]).slice();au(dt,He)===-1&&dt[ji](He),Ce=B(mk(dt),x.cfg,Et)}return Ce}s(pf,"_getPluginChain");function fu(dt,fn,Br){if(dt&&dt[Yr]>0){var Dn=B(dt,x.cfg,Et),Dr=w(Dn,Et);Dr[fw](function(){var xo=!1,wo=[];Un(Te,function(Rc,Zu){Ak(Rc,dt)?xo=!0:wo[ji](Rc)}),Te=wo,cr=null,po=null;var is=[];Le&&(Un(Le,function(Rc,Zu){var $p=[];Un(Rc,function(zp){Ak(zp,dt)?xo=!0:$p[ji](zp)}),is[ji]($p)}),Le=is),Br&&Br(xo),mo()}),Dr[Cl](fn)}else Br(!1)}s(fu,"_removePlugins");function nx(){if(S&&S.queue){var dt=S.queue.slice(0);S.queue[Yr]=0,Un(dt,function(fn){var Br={name:lt||"InternalMessageId: "+fn[pw],iKey:Hr,time:oE(new Date),baseType:Uw.dataType,baseData:{message:fn[UA]}};Et.track(Br)})}}s(nx,"_flushInternalLogs");function jp(dt,fn,Br,Dn){var Dr=1,xo=!1,wo=null;Dn=Dn||5e3;function is(){Dr--,xo&&Dr===0&&(wo&&wo[uC](),wo=null,fn&&fn(xo),fn=null)}if(s(is,"doCallback"),Ye&&Ye[Yr]>0){var Rc=Oa()[OA](Ye);Rc.iterate(function(Zu){if(Zu.flush){Dr++;var $p=!1;Zu.flush(dt,function(){$p=!0,is()},Br)||$p||(dt&&wo==null?wo=vh(function(){wo=null,is()},Dn):is())}})}return xo=!0,is(),!0}s(jp,"_flushChannels");function rx(){var dt;ec(x[Fp](function(fn){var Br=fn.cfg.enablePerfMgr;if(Br){var Dn=fn.cfg[Hd];(dt!==Dn||!dt)&&(Dn||(Dn=zC),K6(fn.cfg,Hd,Dn),dt=Dn,K=null),!O&&!K&&Be(Dn)&&(K=Dn(Et,Et[Wd]()))}else K=null,dt=null}))}s(rx,"_initPerfManager");function Vp(dt){var fn=R(pf(),Et);fn[fw](mo),(!Et._updateHook||Et._updateHook(fn,dt)!==!0)&&fn[Cl](dt)}s(Vp,"_doUpdate");function ix(dt){var fn=Et[pa];fn?(wn(fn,2,73,dt),mo()):Gn(dt)}s(ix,"_logOrThrowError");function Ss(dt){var fn=Et[Wd]();fn&&fn[bC]([dt],2)}s(Ss,"_notifyInvalidEvent");function ec(dt){Pt.add(dt)}s(ec,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Bn(A,x){try{if(A&&A!==""){var T=uu().parse(A);if(T&&T[Q6]&&T[Q6]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[Yr])return T}}catch(S){wn(x,1,43,"Cannot parse the response. "+(S[wh]||Lt(S)),{response:A})}return null}s(Bn,"parseResponse");var nr="",Fo="NoResponseBody",Ma="&"+Fo+"=true",Us="POST",Qa=function(){function A(){var x=0,T,S,P,L,O,K,ae,Ce,Te,Le,Ye,Me,He,lt;Jl(A,this,function(et,At){var Pt=!0;Oo(),et[eE]=function(Ft,Fn){P=Fn,S&&wn(P,1,28,"Sender is already initialized"),et.SetConfig(Ft),S=!0},et._getDbgPlgTargets=function(){return[S,L,K,T]},et.SetConfig=function(Ft){try{if(O=Ft.senderOnCompleteCallBack||{},K=!!Ft.disableCredentials,ae=Ft.fetchCredentials,L=!!Ft.isOneDs,T=!!Ft.enableSendPromise,Te=!!Ft.disableXhr,Le=!!Ft.disableBeacon,Ye=!!Ft.disableBeaconSync,lt=Ft.timeWrapper,He=!!Ft.addNoResponse,Me=!!Ft.disableFetchKeepAlive,Ce={sendPOST:Ln},L||(Pt=!1),K){var Fn=RC();Fn&&Fn.protocol&&Fn.protocol[aC]()==="file:"&&(Pt=!1)}return!0}catch{}return!1},et.getSyncFetchPayload=function(){return x},et.getSenderInst=function(Ft,Fn){return Ft&&Ft[Yr]?xi(Ft,Fn):null},et.getFallbackInst=function(){return Ce},et[mw]=function(Ft,Fn){Oo()};function Vt(Ft,Fn){vi(Fn,200,{},Ft)}s(Vt,"_onSuccess");function hn(Ft,Fn){wn(P,2,26,"Failed to send telemetry.",{message:Ft}),vi(Fn,400,{})}s(hn,"_onError");function Hr(Ft){hn("No endpoint url is provided for the batch",Ft)}s(Hr,"_onNoPayloadUrl");function xi(Ft,Fn){for(var ro=0,Et=null,wr=0;Et==null&&wr<Ft[Yr];)ro=Ft[wr],!Te&&ro===1?J3()?Et=_s:X3()&&(Et=Ln):ro===2&&dE(Fn)&&(!Fn||!Me)?Et=bi:ro===3&&Ph()&&(Fn?!Ye:!Le)&&(Et=cr),wr++;return Et?{_transport:ro,_isSync:Fn,sendPOST:Et}:null}s(xi,"_getSenderInterface");function vi(Ft,Fn,ro,Et){try{Ft&&Ft(Fn,ro,Et)}catch{}}s(vi,"_doOnComplete");function po(Ft,Fn){var ro=mh(),Et=Ft[Qp];if(!Et)return Hr(Fn),!0;Et=Ft[Qp]+(He?Ma:nr);var wr=Ft[hC],qs=L?wr:new Blob([wr],{type:"text/plain;charset=UTF-8"}),mo=ro.sendBeacon(Et,qs);return mo}s(po,"_doBeaconSend");function cr(Ft,Fn,ro){var Et=Ft[hC];try{if(Et)if(po(Ft,Fn))Vt(nr,Fn);else{var wr=O&&O.beaconOnRetry;wr&&Be(wr)?wr(Ft,Fn,po):(Ce&&Ce.sendPOST(Ft,Fn,!0),wn(P,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(qs){L&&qw(P,"Failed to send telemetry using sendBeacon API. Ex:"+Lt(qs)),vi(Fn,L?0:400,{},nr)}}s(cr,"_beaconSender");function Ln(Ft,Fn,ro){var Et,wr,qs,mo=Ft[Q3]||{};!ro&&T&&(Et=yC(function(Ws,Il){wr=Ws,qs=Il})),L&&ro&&Ft.disableXhrSync&&(ro=!1);var El=Ft[Qp];if(!El){Hr(Fn),wr&&wr(!1);return}var ot=$3(Us,El,Pt,!0,ro,Ft[Op]);L||ot.setRequestHeader("Content-type","application/json"),Un(yt(mo),function(Ws){ot.setRequestHeader(Ws,mo[Ws])}),ot.onreadystatechange=function(){L||(Oa(ot),ot.readyState===4&&wr&&wr(!0))},ot.onload=function(){L&&Oa(ot)};function Oa(Ws){var Il=O&&O.xhrOnComplete,pf=Il&&Be(Il);if(pf)Il(Ws,Fn,Ft);else{var fu=Rw(Ws);vi(Fn,Ws[nE],VA(Ws,L),fu)}}return s(Oa,"_doOnReadyFunc"),ot.onerror=function(Ws){vi(Fn,L?ot[nE]:400,VA(ot,L),L?nr:kw(ot)),qs&&qs(Ws)},ot.ontimeout=function(){vi(Fn,L?ot[nE]:500,VA(ot,L),L?nr:kw(ot)),wr&&wr(!1)},ot.send(Ft[hC]),Et}s(Ln,"_xhrSender");function bi(Ft,Fn,ro){var Et,wr=Ft[Qp],qs=Ft[hC],mo=L?qs:new Blob([qs],{type:"application/json"}),El,ot,Oa,Ws=new Headers,Il=qs[Yr],pf=!1,fu=!1,nx=Ft[Q3]||{},jp=(Et={method:Us,body:mo},Et[m7]=!0,Et);Ft.headers&&yt(Ft.headers)[Yr]>0&&(Un(yt(nx),function(Ss){Ws.append(Ss,nx[Ss])}),jp[Q3]=Ws),ae?jp.credentials=ae:Pt&&L&&(jp.credentials="include"),ro&&(jp.keepalive=!0,x+=Il,L?Ft._sendReason===2&&(pf=!0,He&&(wr+=Ma)):pf=!0);var rx=new Request(wr,jp);try{rx[m7]=!0}catch{}if(!ro&&T&&(El=yC(function(Ss,ec){ot=Ss,Oa=ec})),!wr){Hr(Fn),ot&&ot(!1);return}function Vp(Ss){vi(Fn,L?0:400,{},L?nr:Ss)}s(Vp,"_handleError");function ix(Ss,ec,dt){var fn=Ss[nE],Br=O.fetchOnComplete;Br&&Be(Br)?Br(Ss,Fn,dt||nr,ec):vi(Fn,fn,{},dt||nr)}s(ix,"_onFetchComplete");try{$u(fetch(L?wr:rx,L?jp:null),function(Ss){if(ro&&(x-=Il,Il=0),!fu)if(fu=!0,Ss.rejected)Vp(Ss.reason&&Ss.reason[UA]),Oa&&Oa(Ss.reason);else{var ec=Ss[dC];try{!L&&!ec.ok?(Vp(ec.statusText),ot&&ot(!1)):L&&!ec.body?(ix(ec,null,nr),ot&&ot(!0)):$u(ec.text(),function(dt){ix(ec,Ft,dt[dC]),ot&&ot(!0)})}catch(dt){Vp(Lt(dt)),Oa&&Oa(dt)}}})}catch(Ss){fu||(Vp(Lt(Ss)),Oa&&Oa(Ss))}return pf&&!fu&&(fu=!0,vi(Fn,200,{}),ot&&ot(!0)),L&&!fu&&Ft[Op]>0&&lt&&lt.set(function(){fu||(fu=!0,vi(Fn,500,{}),ot&&ot(!0))},Ft[Op]),El}s(bi,"_doFetchSender");function _s(Ft,Fn,ro){var Et=Dp(),wr=new XDomainRequest,qs=Ft[hC];wr.onload=function(){var Ws=Rw(wr),Il=O&&O.xdrOnComplete;Il&&Be(Il)?Il(wr,Fn,Ft):vi(Fn,200,{},Ws)},wr.onerror=function(){vi(Fn,400,{},L?nr:X6(wr))},wr.ontimeout=function(){vi(Fn,500,{})},wr.onprogress=function(){};var mo=Et&&Et.location&&Et.location.protocol||"",El=Ft[Qp];if(!El){Hr(Fn);return}if(!L&&El.lastIndexOf(mo,0)!==0){var ot="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";wn(P,2,40,". "+ot),hn(ot,Fn);return}var Oa=L?El:El[Rh](/^(https?:)/,"");wr.open(Us,Oa),Ft[Op]&&(wr[Op]=Ft[Op]),wr.send(qs),L&&ro?lt&&lt.set(function(){wr.send(qs)},0):wr.send(qs)}s(_s,"_xdrSender");function Oo(){x=0,S=!1,T=!1,P=null,L=null,O=null,K=null,ae=null,Ce=null,Te=!1,Le=!1,Ye=!1,Me=!1,He=!1,lt=null}s(Oo,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),YA="on",Uh="attachEvent",YC="addEventListener",P7="detachEvent",N7="removeEventListener",Kw="events";Wp("aiEvtPageHide"),Wp("aiEvtPageShow");var mK=/\.[\.]+/g,Qme=/[\.]+$/,vYe=1,L7=o7("events"),bYe=/^([^.]*)(?:\.(.+)|)/;function Ome(A){return A&&A[Rh]?A[Rh](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,mi):A}s(Ome,"_normalizeNamespace");function hK(A,x){if(x){var T=mi;Ke(x)?(T=mi,Un(x,function(P){P=Ome(P),P&&(P[0]!=="."&&(P="."+P),T+=P)})):T=Ome(x),T&&(T[0]!=="."&&(T="."+T),A=(A||mi)+T)}var S=bYe.exec(A||mi)||[];return{type:S[1],ns:(S[2]||mi).replace(mK,".").replace(Qme,mi)[Sh](".").sort().join(".")}}s(hK,"_getEvtNamespace");function Ume(A,x,T){T===void 0&&(T=!0);var S=L7.get(A,Kw,{},T),P=S[x];return P||(P=S[x]=[]),P}s(Ume,"_getRegisteredEvents");function qme(A,x,T,S){A&&x&&x[Xl]&&(A[N7]?A[N7](x[Xl],T,S):A[P7]&&A[P7](YA+x[Xl],T))}s(qme,"_doDetach");function EYe(A,x,T,S){var P=!1;return A&&x&&x[Xl]&&T&&(A[YC]?(A[YC](x[Xl],T,S),P=!0):A[Uh]&&(A[Uh](YA+x[Xl],T),P=!0)),P}s(EYe,"_doAttach");function Wme(A,x,T,S){for(var P=x[Yr];P--;){var L=x[P];L&&(!T.ns||T.ns===L[L3].ns)&&(!S||S(L))&&(qme(A,L[L3],L.handler,L.capture),x[cC](P,1))}}s(Wme,"_doUnregister");function IYe(A,x,T){if(x[Xl])Wme(A,Ume(A,x[Xl]),x,T);else{var S=L7.get(A,Kw,{});ie(S,function(P,L){Wme(A,L,x,T)}),yt(S)[Yr]===0&&L7.kill(A,Kw)}}s(IYe,"_unregisterEvents");function Gme(A,x){var T;return x?(Ke(x)?T=[A].concat(x):T=[A,x],T=hK("xx",T).ns[Sh](".")):T=A,T}s(Gme,"mergeEvtNamespace");function Hme(A,x,T,S,P){P===void 0&&(P=!1);var L=!1;if(A)try{var O=hK(x,S);if(L=EYe(A,O,T,P),L&&L7.accept(A)){var K={guid:vYe++,evtName:O,handler:T,capture:P};Ume(A,O.type)[ji](K)}}catch{}return L}s(Hme,"eventOn");function TYe(A,x,T,S,P){if(P===void 0&&(P=!1),A)try{var L=hK(x,S),O=!1;IYe(A,L,function(K){return L.ns&&!T||K.handler===T?(O=!0,!0):!1}),O||qme(A,L,T,P)}catch{}}s(TYe,"eventOff");var jme="sampleRate",gK="ProcessLegacy",Vme="http.method",AK="https://dc.services.visualstudio.com",Jw="/v2/track",KC="not_specified",$me=kY({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),F7="split",fi="length",yK="toLowerCase",EE="ingestionendpoint",Ck="toString",zme="removeItem",M7="message",wYe="count",CK="stringify",xK="pathname",xk="match",JC="name",qh="properties",KA="measurements",Q7="sizeInBytes",O7="typeName",vk="exceptions",bk="severityLevel",vK="problemGroup",Xw="parsedStack",U7="hasFullStack",q7="assembly",JA="fileName",Zw="line",W7="aiDataContract",G7="duration";function Yme(A,x,T){var S=x[fi],P=_Ye(A,x);if(P[fi]!==S){for(var L=0,O=P;T[O]!==void 0;)L++,O=he(P,0,147)+kYe(L);P=O}return P}s(Yme,"dataSanitizeKeyAndAddUniqueness");function _Ye(A,x){var T;return x&&(x=Hi(Ot(x)),x[fi]>150&&(T=he(x,0,150),wn(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(_Ye,"dataSanitizeKey");function _c(A,x,T){T===void 0&&(T=1024);var S;return x&&(T=T||1024,x=Hi(Ot(x)),x[fi]>T&&(S=he(x,0,T),wn(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),S||x}s(_c,"dataSanitizeString");function bK(A,x){return Jme(A,x,2048,66)}s(bK,"dataSanitizeUrl");function Kme(A,x){var T;return x&&x[fi]>32768&&(T=he(x,0,32768),wn(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(Kme,"dataSanitizeMessage");function SYe(A,x){var T;if(x){var S=""+x;S[fi]>32768&&(T=he(S,0,32768),wn(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(SYe,"dataSanitizeException");function IE(A,x){if(x){var T={};ie(x,function(S,P){if(Se(P)&&kC())try{P=uu()[CK](P)}catch(L){wn(A,2,49,"custom property is not valid",{exception:L},!0)}P=_c(A,P,8192),S=Yme(A,S,T),T[S]=P}),x=T}return x}s(IE,"dataSanitizeProperties");function TE(A,x){if(x){var T={};ie(x,function(S,P){S=Yme(A,S,T),T[S]=P}),x=T}return x}s(TE,"dataSanitizeMeasurements");function RYe(A,x){return x&&Jme(A,x,128,69)[Ck]()}s(RYe,"dataSanitizeId");function Jme(A,x,T,S){var P;return x&&(x=Hi(Ot(x)),x[fi]>T&&(P=he(x,0,T),wn(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),P||x}s(Jme,"dataSanitizeInput");function kYe(A){var x="00"+A;return ve(x,x[fi]-3)}s(kYe,"dsPadNumber");var Xme=jy()||{},Zme=0,BYe=[null,null,null,null,null];function DYe(A){var x=Zme,T=BYe,S=T[x];return Xme.createElement?T[x]||(S=T[x]=Xme.createElement("a")):S={host:PYe(A,!0)},S.href=A,x++,x>=T[fi]&&(x=0),Zme=x,S}s(DYe,"urlParseUrl");function PYe(A,x){var T=NYe(A,x)||"";if(T){var S=T[xk](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>3&&pe(S[2])&&S[2][fi]>0)return S[2]+(S[3]||"")}return T}s(PYe,"urlParseHost");function NYe(A,x){var T=null;if(A){var S=A[xk](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>2&&pe(S[2])&&S[2][fi]>0&&(T=S[2]||"",x&&S[fi]>2)){var P=(S[1]||"")[yK](),L=S[3]||"";(P==="http"&&L===":80"||P==="https"&&L===":443")&&(L=""),T+=L}}return T}s(NYe,"urlParseFullHost");var LYe=[AK+Jw,"https://breeze.aimon.applicationinsights.io"+Jw,"https://dc-int.services.visualstudio.com"+Jw];function ehe(A){return au(LYe,A[yK]())!==-1}s(ehe,"isInternalApplicationInsightsEndpoint");function FYe(A,x,T,S){var P,L=S,O=S;if(x&&x[fi]>0){var K=DYe(x);if(P=K.host,!L)if(K[xK]!=null){var ae=K.pathname[fi]===0?"/":K[xK];ae.charAt(0)!=="/"&&(ae="/"+ae),O=K[xK],L=_c(A,T?T+" "+ae:ae)}else L=_c(A,x)}else P=S,L=S;return{target:P,name:L,data:O}}s(FYe,"AjaxHelperParseDependencyPath");var EK=cw({LocalStorage:0,SessionStorage:1}),e_=void 0,the="";function nhe(A){try{if(ee(X0()))return null;var x=new Date()[Ck](),T=Zs(A===EK.LocalStorage?"localStorage":"sessionStorage"),S=the+x;T.setItem(S,x);var P=T.getItem(S)!==x;if(T[zme](S),!P)return T}catch{}return null}s(nhe,"_getVerifiedStorageObject");function IK(){return rhe()?nhe(EK.SessionStorage):null}s(IK,"_getSessionStorageObject");function MYe(A){the=A||""}s(MYe,"utlSetStoragePrefix");function rhe(A){return(A||e_===void 0)&&(e_=!!nhe(EK.SessionStorage)),e_}s(rhe,"utlCanUseSessionStorage");function QYe(A,x){var T=IK();if(T!==null)try{return T.getItem(x)}catch(S){e_=!1,wn(A,2,2,"Browser failed read of session storage. "+il(S),{exception:Lt(S)})}return null}s(QYe,"utlGetSessionStorage");function OYe(A,x,T){var S=IK();if(S!==null)try{return S.setItem(x,T),!0}catch(P){e_=!1,wn(A,2,4,"Browser failed write to session storage. "+il(P),{exception:Lt(P)})}return!1}s(OYe,"utlSetSessionStorage");function UYe(A,x){var T=IK();if(T!==null)try{return T[zme](x),!0}catch(S){e_=!1,wn(A,2,6,"Browser failed removal of session storage item. "+il(S),{exception:Lt(S)})}return!1}s(UYe,"utlRemoveSessionStorage");var qYe=";",WYe="=";function TK(A){if(!A)return{};var x=A[F7](qYe),T=yY(x,function(P,L){var O=L[F7](WYe);if(O[fi]===2){var K=O[0][yK](),ae=O[1];P[K]=ae}return P},{});if(yt(T)[fi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[EE]=T[EE]||"https://"+S+"dc."+T.endpointsuffix}T[EE]=T[EE]||AK,B6(T[EE],"/")&&(T[EE]=T[EE].slice(0,-1))}return T}s(TK,"parseConnectionString");var GYe=function(){function A(x,T,S){var P=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[JC]=_c(x,S)||KC,L.data=T,L.time=oE(new Date),L[W7]={time:1,iKey:1,name:1,sampleRate:s(function(){return P.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),t_=function(){function A(x,T,S,P){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[JC]=_c(x,T)||KC,L[qh]=IE(x,S),L[KA]=TE(x,P)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),HYe=58,jYe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,VYe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,$Ye=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,zYe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,YYe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,KYe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,JYe=/([^\(\s\n]+):([0-9]+)$/,ihe="<no_method>",n_="error",ff="stack",wK="stackDetails",ohe="errorSrc",_K="message",she="description",ahe=[{re:VYe,len:5,m:1,fn:2,ln:3,col:4},{chk:ZYe,pre:XYe,re:$Ye,len:4,m:1,fn:2,ln:3},{re:zYe,len:3,m:1,fn:2,hdl:phe},{re:YYe,len:2,fn:1,hdl:phe}];function XYe(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(XYe,"_scrubAnonymous");function ZYe(A){return Pp(A,"[native")<0}s(ZYe,"_ignoreNative");function SK(A,x){var T=A;return T&&!pe(T)&&(JSON&&JSON[CK]?(T=JSON[CK](A),x&&(!T||T==="{}")&&(Be(A[Ck])?T=A[Ck]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(SK,"_stringify");function lhe(A,x){var T=A;return A&&(T&&!pe(T)&&(T=A[_K]||A[she]||T),T&&!pe(T)&&(T=SK(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&Pp(T||"",x)===-1&&(T=x+": "+T),T||""}s(lhe,"_formatMessage");function eKe(A){try{if(Se(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(eKe,"_isExceptionDetailsInternal");function tKe(A){try{if(Se(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(tKe,"_isExceptionInternal");function che(A){return A&&A.src&&pe(A.src)&&A.obj&&Ke(A.obj)}s(che,"_isStackDetails");function wE(A){var x=A||"";pe(x)||(pe(x[ff])?x=x[ff]:x=""+x);var T=x[F7](`
`);return{src:x,obj:T}}s(wE,"_convertStackObj");function nKe(A){for(var x=[],T=A[F7](`
`),S=0;S<T[fi];S++){var P=T[S];T[S+1]&&(P+="@"+T[S+1],S++),x.push(P)}return{src:A,obj:x}}s(nKe,"_getOperaStack");function uhe(A){var x=null;if(A)try{if(A[ff])x=wE(A[ff]);else if(A[n_]&&A[n_][ff])x=wE(A[n_][ff]);else if(A.exception&&A.exception[ff])x=wE(A.exception[ff]);else if(che(A))x=A;else if(che(A[wK]))x=A[wK];else if(Dp()&&Dp().opera&&A[_K])x=nKe(A[M7]);else if(A.reason&&A.reason[ff])x=wE(A.reason[ff]);else if(pe(A))x=wE(A);else{var T=A[_K]||A[she]||"";pe(A[ohe])&&(T&&(T+=`
`),T+=" from "+A[ohe]),T&&(x=wE(T))}}catch(S){x=wE(S)}return x||{src:"",obj:null}}s(uhe,"_getStackFromErrorObj");function rKe(A){var x="";return A&&(A.obj?x=A.obj.join(`
`):x=A.src||""),x}s(rKe,"_formatStackTrace");function iKe(A){var x,T=A.obj;if(T&&T[fi]>0){x=[];var S=0,P=!1,L=0;Un(T,function(lt){if(P||lKe(lt)){var et=Ot(lt);P=!0;var At=cKe(et,S);At&&(L+=At[Q7],x.push(At),S++)}});var O=32*1024;if(L>O)for(var K=0,ae=x[fi]-1,Ce=0,Te=K,Le=ae;K<ae;){var Ye=x[K][Q7],Me=x[ae][Q7];if(Ce+=Ye+Me,Ce>O){var He=Le-Te+1;x.splice(Te,He);break}Te=K,Le=ae,K++,ae--}}return x}s(iKe,"_parseStack");function H7(A){var x="";if(A&&(x=A.typeName||A[JC]||"",!x))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[Ck]());x=S&&S[fi]>1?S[1]:""}catch{}return x}s(H7,"_getErrorType");function RK(A){if(A)try{if(!pe(A)){var x=H7(A),T=SK(A,!1);return(!T||T==="{}")&&(A[n_]&&(A=A[n_],x=H7(A)),T=SK(A,!0)),Pp(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(A||"")}s(RK,"_formatErrorCode");var j7=function(){function A(x,T,S,P,L,O){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var K=this;K.ver=2,tKe(T)?(K[vk]=T[vk]||[],K[qh]=T[qh],K[KA]=T[KA],T[bk]&&(K[bk]=T[bk]),T.id&&(K.id=T.id,T[qh].id=T.id),T[vK]&&(K[vK]=T[vK]),ee(T.isManual)||(K.isManual=T.isManual)):(S||(S={}),O&&(S.id=O),K[vk]=[dhe(x,T,S)],K[qh]=IE(x,S),K[KA]=TE(x,P),L&&(K[bk]=L),O&&(K.id=O))}return s(A,"Exception"),A.CreateAutoException=function(x,T,S,P,L,O,K,ae){var Ce=H7(L||O||x);return{message:lhe(x,Ce),url:T,lineNumber:S,columnNumber:P,error:RK(L||O||x),evt:RK(O||x),typeName:Ce,stackDetails:uhe(K||L||O),errorSrc:ae}},A.CreateFromInterface=function(x,T,S,P){var L=T[vk]&&kA(T[vk],function(K){return aKe(x,K)}),O=new A(x,Lp(Lp({},T),{exceptions:L}),S,P);return O},A.prototype.toInterface=function(){var x=this,T=x.exceptions,S=x.properties,P=x.measurements,L=x.severityLevel,O=x.problemGroup,K=x.id,ae=x.isManual,Ce=T instanceof Array&&kA(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:P,problemGroup:O,id:K,isManual:ae}},A.CreateSimpleException=function(x,T,S,P,L,O){var K;return{exceptions:[(K={},K[U7]=!0,K.message=x,K.stack=L,K.typeName=T,K)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=RK,A}(),oKe=Gt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function sKe(){var A=this,x=Ke(A[Xw])&&kA(A[Xw],function(S){return dKe(S)}),T={id:A.id,outerId:A.outerId,typeName:A[O7],message:A[M7],hasFullStack:A[U7],stack:A[ff],parsedStack:x||void 0};return T}s(sKe,"_toInterface");function dhe(A,x,T){var S,P,L,O,K,ae,Ce,Te;if(eKe(x))O=x[O7],K=x[M7],Ce=x[ff],Te=x[Xw]||[],ae=x[U7];else{var Le=x,Ye=Le&&Le.evt;Ct(Le)||(Le=Le[n_]||Ye||Le),O=_c(A,H7(Le))||KC,K=Kme(A,lhe(x||Le,O))||KC;var Me=x[wK]||uhe(x);Te=iKe(Me),Ke(Te)&&kA(Te,function(He){He[q7]=_c(A,He[q7]),He[JA]=_c(A,He[JA])}),Ce=SYe(A,rKe(Me)),ae=Ke(Te)&&Te[fi]>0,T&&(T[O7]=T[O7]||O)}return S={},S[W7]=oKe,S.id=P,S.outerId=L,S.typeName=O,S.message=K,S[U7]=ae,S.stack=Ce,S.parsedStack=Te,S.toInterface=sKe,S}s(dhe,"_createExceptionDetails");function aKe(A,x){var T=Ke(x[Xw])&&kA(x[Xw],function(P){return uKe(P)})||x[Xw],S=dhe(A,Lp(Lp({},x),{parsedStack:T}));return S}s(aKe,"_createExDetailsFromInterface");function fhe(A,x){var T=x[xk](KYe);if(T&&T[fi]>=4)A[JA]=T[1],A[Zw]=parseInt(T[2]);else{var S=x[xk](JYe);S&&S[fi]>=3?(A[JA]=S[1],A[Zw]=parseInt(S[2])):A[JA]=x}}s(fhe,"_parseFilename");function phe(A,x,T){var S=A[JA];x.fn&&T&&T[fi]>x.fn&&(x.ln&&T[fi]>x.ln?(S=Hi(T[x.fn]||""),A[Zw]=parseInt(Hi(T[x.ln]||""))||0):S=Hi(T[x.fn]||"")),S&&fhe(A,S)}s(phe,"_handleFilename");function lKe(A){var x=!1;if(A&&pe(A)){var T=Hi(A);T&&(x=jYe.test(T))}return x}s(lKe,"_isStackFrame");var mhe=Gt({level:1,method:1,assembly:0,fileName:0,line:0});function cKe(A,x){var T,S;if(A&&pe(A)&&Hi(A)){S=(T={},T[W7]=mhe,T.level=x,T.assembly=Hi(A),T.method=ihe,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var P=0;P<ahe[fi];){var L=ahe[P];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var O=A[xk](L.re);if(O&&O[fi]>=L.len){L.m&&(S.method=Hi(O[L.m]||ihe)),L.hdl?L.hdl(S,L,O):L.fn&&(L.ln?(S[JA]=Hi(O[L.fn]||""),S[Zw]=parseInt(Hi(O[L.ln]||""))||0):fhe(S,O[L.fn]||""));break}P++}}return hhe(S)}s(cKe,"_extractStackFrame");function uKe(A){var x,T=(x={},x[W7]=mhe,x.level=A.level,x.method=A.method,x.assembly=A[q7],x.fileName=A[JA],x.line=A[Zw],x.sizeInBytes=0,x);return hhe(T)}s(uKe,"_stackFrameFromInterface");function hhe(A){var x=HYe;return A&&(x+=A.method[fi],x+=A.assembly[fi],x+=A.fileName[fi],x+=A.level.toString()[fi],x+=A.line.toString()[fi],A[Q7]=x),A}s(hhe,"_populateFrameSizeInBytes");function dKe(A){return{level:A.level,method:A.method,assembly:A[q7],fileName:A[JA],line:A[Zw]}}s(dKe,"_parsedFrameToInterface");var fKe=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),Ek=function(){function A(x,T,S,P,L,O,K,ae,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new fKe;Le[wYe]=P>0?P:void 0,Le.max=isNaN(O)||O===null?void 0:O,Le.min=isNaN(L)||L===null?void 0:L,Le[JC]=_c(x,T)||KC,Le.value=S,Le.stdDev=isNaN(K)||K===null?void 0:K,Te.metrics=[Le],Te[qh]=IE(x,ae),Te[KA]=TE(x,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),Ik="";function ghe(A){(isNaN(A)||A<0)&&(A=0),A=EY(A);var x=Ik+A%1e3,T=Ik+BA(A/1e3)%60,S=Ik+BA(A/(1e3*60))%60,P=Ik+BA(A/(1e3*60*60))%24,L=BA(A/(1e3*60*60*24));return x=x[fi]===1?"00"+x:x[fi]===2?"0"+x:x,T=T[fi]<2?"0"+T:T,S=S[fi]<2?"0"+S:S,P=P[fi]<2?"0"+P:P,(L>0?L+".":Ik)+P+":"+S+":"+T+"."+x}s(ghe,"msToTimeSpan");var V7=function(){function A(x,T,S,P,L,O,K){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ae=this;ae.ver=2,ae.id=RYe(x,K),ae.url=bK(x,S),ae[JC]=_c(x,T)||KC,isNaN(P)||(ae[G7]=ghe(P)),ae[qh]=IE(x,L),ae[KA]=TE(x,O)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),$7=function(){function A(x,T,S,P,L,O,K,ae,Ce,Te,Le,Ye){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Me=this;Me.ver=2,Me.id=T,Me[G7]=ghe(L),Me.success=O,Me.resultCode=K+"",Me.type=_c(x,Ce);var He=FYe(x,S,ae,P);Me.data=bK(x,P)||He.data,Me.target=_c(x,He.target),Te&&(Me.target="".concat(Me.target," | ").concat(Te)),Me[JC]=_c(x,He[JC]),Me[qh]=IE(x,Le),Me[KA]=TE(x,Ye)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),z7=function(){function A(x,T,S,P,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var O=this;O.ver=2,T=T||KC,O[M7]=Kme(x,T),O[qh]=IE(x,P),O[KA]=TE(x,L),S&&(O[bk]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),Y7=function(){function A(x,T,S,P,L,O,K){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ae=this;ae.ver=2,ae.url=bK(x,S),ae[JC]=_c(x,T)||KC,ae[qh]=IE(x,L),ae[KA]=TE(x,O),K&&(ae.domProcessing=K.domProcessing,ae[G7]=K[G7],ae.networkConnect=K.networkConnect,ae.perfTotal=K.perfTotal,ae.receivedResponse=K.receivedResponse,ae.sentRequest=K.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),_E=function(){function A(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(A,"Data"),A}(),pKe=cw({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function XC(A){var x="ai."+A+".";return function(T){return x+T}}s(XC,"_aiNameFunc");var Tk=XC("application"),sl=XC("device"),K7=XC("location"),r_=XC("operation"),kK=XC("session"),ZC=XC("user"),SE=XC("cloud"),wk=XC("internal"),Ahe=function(A){Zb(x,A);function x(){return A.call(this)||this}return s(x,"ContextTagKeys"),x}(OY({applicationVersion:Tk("ver"),applicationBuild:Tk("build"),applicationTypeId:Tk("typeId"),applicationId:Tk("applicationId"),applicationLayer:Tk("layer"),deviceId:sl("id"),deviceIp:sl("ip"),deviceLanguage:sl("language"),deviceLocale:sl("locale"),deviceModel:sl("model"),deviceFriendlyName:sl("friendlyName"),deviceNetwork:sl("network"),deviceNetworkName:sl("networkName"),deviceOEMName:sl("oemName"),deviceOS:sl("os"),deviceOSVersion:sl("osVersion"),deviceRoleInstance:sl("roleInstance"),deviceRoleName:sl("roleName"),deviceScreenResolution:sl("screenResolution"),deviceType:sl("type"),deviceMachineName:sl("machineName"),deviceVMName:sl("vmName"),deviceBrowser:sl("browser"),deviceBrowserVersion:sl("browserVersion"),locationIp:K7("ip"),locationCountry:K7("country"),locationProvince:K7("province"),locationCity:K7("city"),operationId:r_("id"),operationName:r_("name"),operationParentId:r_("parentId"),operationRootId:r_("rootId"),operationSyntheticSource:r_("syntheticSource"),operationCorrelationVector:r_("correlationVector"),sessionId:kK("id"),sessionIsFirst:kK("isFirst"),sessionIsNew:kK("isNew"),userAccountAcquisitionDate:ZC("accountAcquisitionDate"),userAccountId:ZC("accountId"),userAgent:ZC("userAgent"),userId:ZC("id"),userStoreRegion:ZC("storeRegion"),userAuthUserId:ZC("authUserId"),userAnonymousUserAcquisitionDate:ZC("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ZC("authUserAcquisitionDate"),cloudName:SE("name"),cloudRole:SE("role"),cloudRoleVer:SE("roleVer"),cloudRoleInstance:SE("roleInstance"),cloudEnvironment:SE("environment"),cloudLocation:SE("location"),cloudDeploymentUnit:SE("deploymentUnit"),internalNodeName:wk("nodeName"),internalSdkVersion:wk("sdkVersion"),internalAgentVersion:wk("agentVersion"),internalSnippet:wk("snippet"),internalSdkSrc:wk("sdkSrc")})),vl=new Ahe;function yhe(A,x){TYe(A,null,null,x)}s(yhe,"_disableEvents");function mKe(A){var x=jy(),T=mh(),S=!1,P=[],L=1;T&&!ee(T.onLine)&&!T.onLine&&(L=2);var O=0,K=Ye(),ae=Gme(Wp("OfflineListener"),A);try{if(Te(Dp())&&(S=!0),x){var Ce=x.body||x;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Vt){var hn=!1;return Vt&&(hn=Hme(Vt,"online",lt,ae),hn&&Hme(Vt,"offline",et,ae)),hn}s(Te,"_enableEvents");function Le(){return K}s(Le,"_isOnline");function Ye(){return!(O===2||L===2)}s(Ye,"calCurrentState");function Me(){var Vt=Ye();K!==Vt&&(K=Vt,Un(P,function(hn){var Hr={isOnline:K,rState:L,uState:O};try{hn(Hr)}catch{}}))}s(Me,"listnerNoticeCheck");function He(Vt){O=Vt,Me()}s(He,"setOnlineState");function lt(){L=1,Me()}s(lt,"_setOnline");function et(){L=2,Me()}s(et,"_setOffline");function At(){var Vt=Dp();if(Vt&&S){if(yhe(Vt,ae),x){var hn=x.body||x;q(hn.ononline)||yhe(hn,ae)}S=!1}}s(At,"_unload");function Pt(Vt){return P.push(Vt),{rm:s(function(){var hn=P.indexOf(Vt);if(hn>-1)return P.splice(hn,1)},"rm")}}return s(Pt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:At,addListener:Pt,setOnlineState:He}}s(mKe,"createOfflineListener");var hKe="AppInsightsChannelPlugin",RE="duration",Zl="tags",BK="deviceType",$d="data",XA="name",_k="traceID",gi="length",Sk="stringify",kE="measurements",Wh="dataType",BE="envelopeType",DE="toString",PE="enqueue",NE="count",ZA="push",DK="emitLineDelimitedJson",i_="clear",J7="markAsSent",Rk="clearSent",PK="bufferOverride",kk="BUFFER_KEY",ex="SENT_BUFFER_KEY",o_="concat",Bk="MAX_BUFFER_SIZE",Dk="triggerSend",Sc="diagLog",NK="initialize",Pk="_sender",Nk="endpointUrl",Lk="instrumentationKey",LK="customHeaders",Che="maxBatchSizeInBytes",FK="onunloadDisableBeacon",MK="isBeaconApiDisabled",xhe="alwaysUseXhrOverride",vhe="enableSessionStorageBuffer",Gh="_buffer",bhe="onunloadDisableFetch",Ehe="disableSendBeaconSplit",X7="getSenderInst",LE="_onError",QK="_onPartialSuccess",Z7="_onSuccess",OK="itemsReceived",UK="itemsAccepted",qK="baseType",eN="sampleRate",gKe="getHashCodeScore",WK="baseType",ws="baseData",bl="properties",Ihe="true";function ga(A,x,T){return Bh(A,x,T,le)}s(ga,"_setValueIf");function AKe(A,x,T){var S=T[Zl]=T[Zl]||{},P=x.ext=x.ext||{},L=x[Zl]=x[Zl]||[],O=P.user;O&&(ga(S,vl.userAuthUserId,O.authId),ga(S,vl.userId,O.id||O.localId));var K=P.app;K&&ga(S,vl.sessionId,K.sesId);var ae=P.device;ae&&(ga(S,vl.deviceId,ae.id||ae.localId),ga(S,vl[BK],ae.deviceClass),ga(S,vl.deviceIp,ae.ip),ga(S,vl.deviceModel,ae.model),ga(S,vl[BK],ae[BK]));var Ce=x.ext.web;if(Ce){ga(S,vl.deviceLanguage,Ce.browserLang),ga(S,vl.deviceBrowserVersion,Ce.browserVer),ga(S,vl.deviceBrowser,Ce.browser);var Te=T[$d]=T[$d]||{},Le=Te[ws]=Te[ws]||{},Ye=Le[bl]=Le[bl]||{};ga(Ye,"domain",Ce.domain),ga(Ye,"isManual",Ce.isManual?Ihe:null),ga(Ye,"screenRes",Ce.screenRes),ga(Ye,"userConsent",Ce.userConsent?Ihe:null)}var Me=P.os;Me&&(ga(S,vl.deviceOS,Me[XA]),ga(S,vl.deviceOSVersion,Me.osVer));var He=P.trace;He&&(ga(S,vl.operationParentId,He.parentID),ga(S,vl.operationName,_c(A,He[XA])),ga(S,vl.operationId,He[_k]));for(var lt={},et=L[gi]-1;et>=0;et--){var At=L[et];ie(At,function(Vt,hn){lt[Vt]=hn}),L.splice(et,1)}ie(L,function(Vt,hn){lt[Vt]=hn});var Pt=Lp(Lp({},S),lt);Pt[vl.internalSdkVersion]||(Pt[vl.internalSdkVersion]=_c(A,"javascript:".concat(yKe.Version),64)),T[Zl]=j3(Pt)}s(AKe,"_extractPartAExtensions");function tx(A,x,T){ee(A)||ie(A,function(S,P){ft(P)?T[S]=P:pe(P)?x[S]=P:kC()&&(x[S]=uu()[Sk](P))})}s(tx,"_extractPropsAndMeasurements");function FE(A,x){ee(A)||ie(A,function(T,S){A[T]=S||x})}s(FE,"_convertPropsUndefinedToCustomDefinedValue");function ME(A,x,T,S){var P=new GYe(A,S,x);ga(P,"sampleRate",T[jme]),(T[ws]||{}).startTime&&(P.time=oE(T[ws].startTime)),P.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return P[XA]=P[XA].replace("{0}",L),AKe(A,T,P),T[Zl]=T[Zl]||[],j3(P)}s(ME,"_createEnvelope");function QE(A,x){ee(x[ws])&&wn(A,1,46,"telemetryItem.baseData cannot be null.")}s(QE,"EnvelopeCreatorInit");var yKe={Version:"3.3.6"};function CKe(A,x,T){QE(A,x);var S=x[ws][kE]||{},P=x[ws][bl]||{};tx(x[$d],P,S),ee(T)||FE(P,T);var L=x[ws];if(ee(L))return qw(A,"Invalid input for dependency data"),null;var O=L[bl]&&L[bl][Vme]?L[bl][Vme]:"GET",K=new $7(A,L.id,L.target,L[XA],L[RE],L.success,L.responseCode,O,L.type,L.correlationContext,P,S),ae=new _E($7[Wh],K);return ME(A,$7[BE],x,ae)}s(CKe,"DependencyEnvelopeCreator");function The(A,x,T){QE(A,x);var S={},P={};x[WK]!==t_[Wh]&&(S.baseTypeSource=x[WK]),x[WK]===t_[Wh]?(S=x[ws][bl]||{},P=x[ws][kE]||{}):x[ws]&&tx(x[ws],S,P),tx(x[$d],S,P),ee(T)||FE(S,T);var L=x[ws][XA],O=new t_(A,L,S,P),K=new _E(t_[Wh],O);return ME(A,t_[BE],x,K)}s(The,"EventEnvelopeCreator");function xKe(A,x,T){QE(A,x);var S=x[ws][kE]||{},P=x[ws][bl]||{};tx(x[$d],P,S),ee(T)||FE(P,T);var L=x[ws],O=j7.CreateFromInterface(A,L,P,S),K=new _E(j7[Wh],O);return ME(A,j7[BE],x,K)}s(xKe,"ExceptionEnvelopeCreator");function vKe(A,x,T){QE(A,x);var S=x[ws],P=S[bl]||{},L=S[kE]||{};tx(x[$d],P,L),ee(T)||FE(P,T);var O=new Ek(A,S[XA],S.average,S.sampleCount,S.min,S.max,S.stdDev,P,L),K=new _E(Ek[Wh],O);return ME(A,Ek[BE],x,K)}s(vKe,"MetricEnvelopeCreator");function bKe(A,x,T){QE(A,x);var S,P=x[ws];!ee(P)&&!ee(P[bl])&&!ee(P[bl][RE])?(S=P[bl][RE],delete P[bl][RE]):!ee(x[$d])&&!ee(x[$d][RE])&&(S=x[$d][RE],delete x[$d][RE]);var L=x[ws],O;((x.ext||{}).trace||{})[_k]&&(O=x.ext.trace[_k]);var K=L.id||O,ae=L[XA],Ce=L.uri,Te=L[bl]||{},Le=L[kE]||{};if(ee(L.refUri)||(Te.refUri=L.refUri),ee(L.pageType)||(Te.pageType=L.pageType),ee(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[DE]()),!ee(L[bl])){var Ye=L[bl];ie(Ye,function(lt,et){Te[lt]=et})}tx(x[$d],Te,Le),ee(T)||FE(Te,T);var Me=new V7(A,ae,Ce,S,Te,Le,K),He=new _E(V7[Wh],Me);return ME(A,V7[BE],x,He)}s(bKe,"PageViewEnvelopeCreator");function EKe(A,x,T){QE(A,x);var S=x[ws],P=S[XA],L=S.uri||S.url,O=S[bl]||{},K=S[kE]||{};tx(x[$d],O,K),ee(T)||FE(O,T);var ae=new Y7(A,P,L,void 0,O,K,S),Ce=new _E(Y7[Wh],ae);return ME(A,Y7[BE],x,Ce)}s(EKe,"PageViewPerformanceEnvelopeCreator");function IKe(A,x,T){QE(A,x);var S=x[ws].message,P=x[ws].severityLevel,L=x[ws][bl]||{},O=x[ws][kE]||{};tx(x[$d],L,O),ee(T)||FE(L,T);var K=new z7(A,S,P,L,O),ae=new _E(z7[Wh],K);return ME(A,z7[BE],x,ae)}s(IKe,"TraceEnvelopeCreator");var whe=function(){function A(x,T){var S=[],P=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(O){return S=O,S},Jl(A,this,function(O){O[PE]=function(K){if(O[NE]()>=T.eventsLimitInMem){P||(wn(x,2,105,"Maximum in-memory buffer size reached: "+O[NE](),!0),P=!0);return}K.cnt=K.cnt||0,!(!ee(L)&&K.cnt>L)&&S[ZA](K)},O[NE]=function(){return S[gi]},O.size=function(){for(var K=S[gi],ae=0;ae<S[gi];ae++)K+=S[ae].item[gi];return T[DK]||(K+=2),K},O[i_]=function(){S=[],P=!1},O.getItems=function(){return S.slice(0)},O.batchPayloads=function(K){if(K&&K[gi]>0){var ae=[];Un(K,function(Te){ae[ZA](Te.item)});var Ce=T[DK]?ae.join(`
`):"["+ae.join(",")+"]";return Ce}return null},O.createNew=function(K,ae,Ce){var Te=S.slice(0);K=K||x,ae=ae||{};var Le=Ce?new _he(K,ae):new GK(K,ae);return Un(Te,function(Ye){Le[PE](Ye)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),GK=function(A){Zb(x,A);function x(T,S){var P=A.call(this,T,S)||this;return Jl(x,P,function(L,O){L[J7]=function(K){O[i_]()},L[Rk]=function(K){}}),P}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(whe),TKe=["AI_buffer","AI_sentBuffer"],_he=function(A){Zb(x,A);function x(S,P){var L=A.call(this,S,P)||this,O=!1,K=P?.namePrefix,ae=P[PK]||{getItem:QYe,setItem:OYe},Ce=ae.getItem,Te=ae.setItem,Le=P.maxRetryCnt;return Jl(x,L,function(Ye,Me){var He=hn(x[kk]),lt=hn(x[ex]),et=vi(),At=lt[o_](et),Pt=Ye._set(He[o_](At));Pt[gi]>x[Bk]&&(Pt[gi]=x[Bk]),xi(x[ex],[]),xi(x[kk],Pt),Ye[PE]=function(cr){if(Ye[NE]()>=x[Bk]){O||(wn(S,2,67,"Maximum buffer size reached: "+Ye[NE](),!0),O=!0);return}cr.cnt=cr.cnt||0,!(!ee(Le)&&cr.cnt>Le)&&(Me[PE](cr),xi(x[kk],Ye._get()))},Ye[i_]=function(){Me[i_](),xi(x[kk],Ye._get()),xi(x[ex],[]),O=!1},Ye[J7]=function(cr){xi(x[kk],Ye._set(Vt(cr,Ye._get())));var Ln=hn(x[ex]);Ln instanceof Array&&cr instanceof Array&&(Ln=Ln[o_](cr),Ln[gi]>x[Bk]&&(wn(S,1,67,"Sent buffer reached its maximum size: "+Ln[gi],!0),Ln[gi]=x[Bk]),xi(x[ex],Ln))},Ye[Rk]=function(cr){var Ln=hn(x[ex]);Ln=Vt(cr,Ln),xi(x[ex],Ln)},Ye.createNew=function(cr,Ln,bi){bi=!!bi;var _s=Ye._get().slice(0),Oo=hn(x[ex]).slice(0);cr=cr||S,Ln=Ln||{},Ye[i_]();var Ft=bi?new x(cr,Ln):new GK(cr,Ln);return Un(_s,function(Fn){Ft[PE](Fn)}),bi&&Ft[J7](Oo),Ft};function Vt(cr,Ln){var bi=[],_s=[];return Un(cr,function(Oo){_s[ZA](Oo.item)}),Un(Ln,function(Oo){!Be(Oo)&&au(_s,Oo.item)===-1&&bi[ZA](Oo)}),bi}s(Vt,"_removePayloadsFromBuffer");function hn(cr){var Ln=cr;return Ln=K?K+"_"+Ln:Ln,Hr(Ln)}s(hn,"_getBuffer");function Hr(cr){try{var Ln=Ce(S,cr);if(Ln){var bi=uu().parse(Ln);if(pe(bi)&&(bi=uu().parse(bi)),bi&&Ke(bi))return bi}}catch(_s){wn(S,1,42," storage key: "+cr+", "+il(_s),{exception:Lt(_s)})}return[]}s(Hr,"_getBufferBase");function xi(cr,Ln){var bi=cr;try{bi=K?K+"_"+bi:bi;var _s=JSON[Sk](Ln);Te(S,bi,_s)}catch(Oo){Te(S,bi,JSON[Sk]([])),wn(S,2,41," storage key: "+bi+", "+il(Oo)+". Buffer cleared",{exception:Lt(Oo)})}}s(xi,"_setBuffer");function vi(){var cr=[];try{return Un(TKe,function(Ln){var bi=po(Ln);if(cr=cr[o_](bi),K){var _s=K+"_"+Ln,Oo=po(_s);cr=cr[o_](Oo)}}),cr}catch(Ln){wn(S,2,41,"Transfer events from previous buffers: "+il(Ln)+". previous Buffer items can not be removed",{exception:Lt(Ln)})}return[]}s(vi,"_getPreviousEvents");function po(cr){try{var Ln=Hr(cr),bi=[];return Un(Ln,function(_s){var Oo={item:_s,cnt:0};bi[ZA](Oo)}),UYe(S,cr),bi}catch{}return[]}s(po,"_getItemsFromPreviousKey")}),L}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(whe),wKe=function(){function A(x){Jl(A,this,function(T){T.serialize=function(O){var K=S(O,"root");try{return uu()[Sk](K)}catch(ae){wn(x,1,48,ae&&Be(ae[DE])?ae[DE]():"Error serializing object",null,!0)}};function S(O,K){var ae="__aiCircularRefCheck",Ce={};if(!O)return wn(x,1,48,"cannot serialize object because it is null or undefined",{name:K},!0),Ce;if(O[ae])return wn(x,2,50,"Circular reference detected while serializing object",{name:K},!0),Ce;if(!O.aiDataContract){if(K==="measurements")Ce=L(O,"number",K);else if(K==="properties")Ce=L(O,"string",K);else if(K==="tags")Ce=L(O,"string",K);else if(Ke(O))Ce=P(O,K);else{wn(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:K},!0);try{uu()[Sk](O),Ce=O}catch(Te){wn(x,1,48,Te&&Be(Te[DE])?Te[DE]():"Error serializing object",null,!0)}}return Ce}return O[ae]=!0,ie(O.aiDataContract,function(Te,Le){var Ye=Be(Le)?Le()&1:Le&1,Me=Be(Le)?Le()&4:Le&4,He=Le&2,lt=O[Te]!==void 0,et=Se(O[Te])&&O[Te]!==null;if(Ye&&!lt&&!He)wn(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:K});else if(!Me){var At=void 0;et?He?At=P(O[Te],Te):At=S(O[Te],Te):At=O[Te],At!==void 0&&(Ce[Te]=At)}}),delete O[ae],Ce}s(S,"_serializeObject");function P(O,K){var ae;if(O)if(!Ke(O))wn(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:K},!0);else{ae=[];for(var Ce=0;Ce<O[gi];Ce++){var Te=O[Ce],Le=S(Te,K+"["+Ce+"]");ae[ZA](Le)}}return ae}s(P,"_serializeArray");function L(O,K,ae){var Ce;return O&&(Ce={},ie(O,function(Te,Le){if(K==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[DE]?Ce[Te]=Le[DE]():Ce[Te]="invalid field: toString() is not defined.";else if(K==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ye=parseFloat(Le);Ce[Te]=Ye}else Ce[Te]="invalid field: "+ae+" is of unknown type.",wn(x,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),_Ke=8,SKe=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[gi]<_Ke;)x=x[o_](x);for(var T=5381,S=0;S<x[gi];++S)T=(T<<5)+T+x.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),RKe=function(){function A(){var x=this,T=new SKe,S=new Ahe;x.getSamplingScore=function(P){var L=0;return P[Zl]&&P[Zl][S.userId]?L=T.getHashCodeScore(P[Zl][S.userId]):P.ext&&P.ext.user&&P.ext.user.id?L=T[gKe](P.ext.user.id):P[Zl]&&P[Zl][S.operationId]?L=T.getHashCodeScore(P[Zl][S.operationId]):P.ext&&P.ext.telemetryTrace&&P.ext.telemetryTrace[_k]?L=T.getHashCodeScore(P.ext.telemetryTrace[_k]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),kKe=function(){function A(x,T){this.INT_MAX_VALUE=2147483647;var S=T||gE(null);(x>100||x<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[eN]=x,this.samplingScoreGenerator=new RKe}return s(A,"Sample"),A.prototype.isSampledIn=function(x){var T=this[eN],S=!1;return T==null||T>=100||x.baseType===Ek[Wh]?!0:(S=this.samplingScoreGenerator.getSamplingScore(x)<T,S)},A}(),rs,e1,Hh=void 0,She="",BKe=65e3;function Rhe(A){try{return A.responseText}catch{}return null}s(Rhe,"_getResponseText");function DKe(A){return A&&A.sendPOST}s(DKe,"isOverrideFn");var khe=Xt((rs={endpointUrl:ok(le,AK+Jw)},rs[DK]=cf(),rs.maxBatchInterval=15e3,rs[Che]=102400,rs.disableTelemetry=cf(),rs[vhe]=cf(!0),rs.isRetryDisabled=cf(),rs[MK]=cf(!0),rs[Ehe]=cf(!0),rs.disableXhr=cf(),rs[bhe]=cf(),rs[FK]=cf(),rs[Lk]=Hh,rs.namePrefix=Hh,rs.samplingPercentage=ok(PKe,100),rs[LK]=Hh,rs.convertUndefined=Hh,rs.eventsLimitInMem=1e4,rs[PK]=!1,rs.httpXHROverride={isVal:DKe,v:Hh},rs[xhe]=cf(),rs.transports=Hh,rs.retryCodes=Hh,rs.maxRetryCnt={isVal:ft,v:10},rs));function PKe(A){return!isNaN(A)&&A>0&&A<=100}s(PKe,"_chkSampling");var NKe=(e1={},e1[t_.dataType]=The,e1[z7.dataType]=IKe,e1[V7.dataType]=bKe,e1[Y7.dataType]=EKe,e1[j7.dataType]=xKe,e1[Ek.dataType]=vKe,e1[$7.dataType]=CKe,e1),Bhe=function(A){Zb(x,A);function x(){var T=A.call(this)||this;T.priority=1001,T.identifier=hKe;var S,P,L,O,K,ae,Ce,Te=0,Le,Ye,Me,He,lt,et,At,Pt,Vt,hn,Hr,xi,vi,po,cr,Ln,bi,_s,Oo,Ft,Fn,ro,Et,wr,qs,mo,El;return Jl(x,T,function(ot,Oa){Phe(),ot.pause=function(){ox(),L=!0},ot.resume=function(){L&&(L=!1,P=null,wo(),c_())},ot.flush=function(Ue,ht,Zt){if(Ue===void 0&&(Ue=!0),!L){ox();try{return ot[Dk](Ue,null,Zt||1)}catch(Rn){wn(ot[Sc](),1,22,"flush failed, telemetry will not be collected: "+il(Rn),{exception:Lt(Rn)})}}},ot.onunloadFlush=function(){if(!L)if(At||Ft)try{return ot[Dk](!0,Zu,2)}catch(Ue){wn(ot[Sc](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+il(Ue),{exception:Lt(Ue)})}else ot.flush(!1)},ot.addHeader=function(Ue,ht){Ce[Ue]=ht},ot[NK]=function(Ue,ht,Zt,Rn){ot.isInitialized()&&wn(ot[Sc](),1,28,"Sender is already initialized"),Oa[NK](Ue,ht,Zt,Rn);var Pr=ot.identifier;K=new wKe(ht.logger),S=0,P=null,ot[Pk]=null,ae=0;var mr=ot[Sc]();Me=Gme(Wp("Sender"),ht.evtNamespace&&ht.evtNamespace()),Ye=mKe(Me),ot._addHook(Gp(Ue,function(Vi){var Aa=Vi.cfg;Aa.storagePrefix&&MYe(Aa.storagePrefix);var zd=$C(null,Aa,ht),ci=zd.getExtCfg(Pr,khe),Nhe=ci[Nk];if(He&&Nhe===He){var VK=Aa[Nk];VK&&VK!==Nhe&&(ci[Nk]=VK)}bt(ci[Lk])&&(ci[Lk]=Aa[Lk]),ze(ot,"_senderConfig",{g:s(function(){return ci},"g")}),lt!==ci[Nk]&&(He=lt=ci[Nk]),ht.activeStatus()===Ih.PENDING?ot.pause():ht.activeStatus()===Ih.ACTIVE&&ot.resume(),hn&&hn!==ci[LK]&&Un(hn,function(tc){delete Ce[tc.header]}),et=ci[Che],At=(ci[FK]===!1||ci[MK]===!1)&&Ph(),Pt=ci[FK]===!1&&Ph(),Vt=ci[MK]===!1&&Ph(),Ft=ci[xhe],Fn=!!ci.disableXhr,El=ci.retryCodes;var $K=ci[PK],u_=!!ci[vhe]&&(!!$K||rhe()),Lhe=ci.namePrefix,QKe=u_!==Ln||u_&&_s!==Lhe||u_&&bi!==$K;if(ot[Gh]){if(QKe)try{ot[Gh]=ot[Gh].createNew(mr,ci,u_)}catch(tc){wn(ot[Sc](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+il(tc),{exception:Lt(tc)})}wo()}else ot[Gh]=u_?new _he(mr,ci):new GK(mr,ci);_s=Lhe,Ln=u_,bi=$K,ro=!ci[bhe]&&dE(!0),qs=!!ci[Ehe],ot._sample=new kKe(ci.samplingPercentage,mr),xi=ci[Lk],!bt(xi)&&!Dhe(xi,Aa)&&wn(mr,1,100,"Invalid Instrumentation key "+xi),hn=ci[LK],pe(He)&&!ehe(He)&&hn&&hn[gi]>0?Un(hn,function(tc){T.addHeader(tc.header,tc.value)}):hn=null,Oo=ci.enableSendPromise;var Fhe=Il();mo?mo.SetConfig(Fhe):(mo=new Qa,mo[NK](Fhe,mr));var iN=ci.httpXHROverride,oN=null,Ok=null,OKe=Z6([3,1,2],ci.transports);oN=mo&&mo[X7](OKe,!1);var zK=mo&&mo.getFallbackInst();Et=s(function(tc,OE){return Dn(zK,tc,OE)},"_xhrSend"),wr=s(function(tc,OE){return Dn(zK,tc,OE,!1)},"_fallbackSend"),oN=Ft?iN:oN||iN||zK,ot[Pk]=function(tc,OE){return Dn(oN,tc,OE)},ro&&(Le=l_);var YK=Z6([3,1],ci.unloadTransports);ro||(YK=YK.filter(function(tc){return tc!==2})),Ok=mo&&mo[X7](YK,!0),Ok=Ft?iN:Ok||iN,(Ft||ci.unloadTransports||!Le)&&Ok&&(Le=s(function(tc,OE){return Dn(Ok,tc,OE)},"_syncUnloadSender")),Le||(Le=Et),Hr=ci.disableTelemetry,vi=ci.convertUndefined||Hh,po=ci.isRetryDisabled,cr=ci.maxBatchInterval}))},ot.processTelemetry=function(Ue,ht){ht=ot._getTelCtx(ht);var Zt=ht[Sc]();try{var Rn=Vp(Ue,Zt);if(!Rn)return;var Pr=ix(Ue,Zt);if(!Pr)return;var mr=K.serialize(Pr),Vi=ot[Gh];wo(mr);var Aa={item:mr,cnt:0};Vi[PE](Aa),c_()}catch(zd){wn(Zt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+il(zd),{exception:Lt(zd)})}ot.processNext(Ue,ht)},ot.isCompletelyIdle=function(){return!L&&Te===0&&ot._buffer[NE]()===0},ot.getOfflineListener=function(){return Ye},ot._xhrReadyStateChange=function(Ue,ht,Zt){if(!zp(ht))return pf(Ue,ht,Zt)},ot[Dk]=function(Ue,ht,Zt){Ue===void 0&&(Ue=!0);var Rn;if(!L)try{var Pr=ot[Gh];if(Hr)Pr[i_]();else if(Pr[NE]()>0){var mr=Pr.getItems();rN(Zt||0,Ue),ht?Rn=ht.call(ot,mr,Ue):Rn=ot[Pk](mr,Ue)}ox()}catch(Aa){var Vi=BC();(!Vi||Vi>9)&&wn(ot[Sc](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+il(Aa),{exception:Lt(Aa)})}return Rn},ot.getOfflineSupport=function(){return{getUrl:s(function(){return He},"getUrl"),createPayload:dt,serialize:Ss,batch:ec,shouldProcess:s(function(Ue){return!!Vp(Ue)},"shouldProcess")}},ot._doTeardown=function(Ue,ht){ot.onunloadFlush(),OC(Ye,!1),Phe()},ot[LE]=function(Ue,ht,Zt){if(!zp(Ue))return fu(Ue,ht)},ot[QK]=function(Ue,ht){if(!zp(Ue))return nx(Ue,ht)},ot[Z7]=function(Ue,ht){if(!zp(Ue))return jp(Ue)},ot._xdrOnLoad=function(Ue,ht){if(!zp(ht))return Ws(Ue,ht)};function Ws(Ue,ht){var Zt=Rhe(Ue);if(Ue&&(Zt+""=="200"||Zt===""))S=0,ot[Z7](ht,0);else{var Rn=Bn(Zt);Rn&&Rn[OK]&&Rn[OK]>Rn[UK]&&!po?ot[QK](ht,Rn):ot[LE](ht,X6(Ue))}}s(Ws,"_xdrOnLoad");function Il(){try{var Ue={xdrOnComplete:s(function(Zt,Rn,Pr){var mr=rx(Pr);if(mr)return Ws(Zt,mr)},"xdrOnComplete"),fetchOnComplete:s(function(Zt,Rn,Pr,mr){var Vi=rx(mr);if(Vi)return is(Zt.status,Vi,Zt.url,Vi[gi],Zt.statusText,Pr||"")},"fetchOnComplete"),xhrOnComplete:s(function(Zt,Rn,Pr){var mr=rx(Pr);if(mr)return pf(Zt,mr,mr[gi])},"xhrOnComplete"),beaconOnRetry:s(function(Zt,Rn,Pr){return $p(Zt,Rn,Pr)},"beaconOnRetry")},ht={enableSendPromise:Oo,isOneDs:!1,disableCredentials:!1,disableXhr:Fn,disableBeacon:!Vt,disableBeaconSync:!Pt,senderOnCompleteCallBack:Ue};return ht}catch{}return null}s(Il,"_getSendPostMgrConfig");function pf(Ue,ht,Zt){Ue.readyState===4&&is(Ue.status,ht,Ue.responseURL,Zt,kw(Ue),Rhe(Ue)||Ue.response)}s(pf,"_xhrReadyStateChange");function fu(Ue,ht,Zt){wn(ot[Sc](),2,26,"Failed to send telemetry.",{message:ht}),ot._buffer&&ot._buffer[Rk](Ue)}s(fu,"_onError");function nx(Ue,ht){for(var Zt=[],Rn=[],Pr=ht.errors.reverse(),mr=0,Vi=Pr;mr<Vi.length;mr++){var Aa=Vi[mr],zd=Ue.splice(Aa.index,1)[0];sx(Aa.statusCode)?Rn[ZA](zd):Zt[ZA](zd)}Ue[gi]>0&&ot[Z7](Ue,ht[UK]),Zt[gi]>0&&ot[LE](Zt,kw(null,["partial success",ht[UK],"of",ht.itemsReceived].join(" "))),Rn[gi]>0&&(Qk(Rn),wn(ot[Sc](),2,40,"Partial success. Delivered: "+Ue[gi]+", Failed: "+Zt[gi]+". Will retry to send "+Rn[gi]+" our of "+ht[OK]+" items"))}s(nx,"_onPartialSuccess");function jp(Ue,ht){ot._buffer&&ot._buffer[Rk](Ue)}s(jp,"_onSuccess");function rx(Ue){try{if(Ue){var ht=Ue,Zt=ht.oriPayload;return Zt&&Zt[gi]?Zt:null}}catch{}return null}s(rx,"_getPayloadArr");function Vp(Ue,ht){if(Hr)return!1;if(!Ue)return ht&&wn(ht,1,7,"Cannot send empty telemetry"),!1;if(Ue.baseData&&!Ue[qK])return ht&&wn(ht,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ue[qK]||(Ue[qK]="EventData"),!ot[Pk])return ht&&wn(ht,1,28,"Sender was not initialized"),!1;if(fn(Ue))Ue[jme]=ot._sample[eN];else return ht&&wn(ht,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ot._sample[eN]}),!1;return!0}s(Vp,"_validate");function ix(Ue,ht){var Zt=Ue.iKey||xi,Rn=x.constructEnvelope(Ue,Zt,ht,vi);if(!Rn){wn(ht,1,47,"Unable to create an AppInsights envelope");return}var Pr=!1;if(Ue[Zl]&&Ue[Zl][gK]&&(Un(Ue[Zl][gK],function(mr){try{mr&&mr(Rn)===!1&&(Pr=!0,qw(ht,"Telemetry processor check returns false"))}catch(Vi){wn(ht,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+il(Vi),{exception:Lt(Vi)},!0)}}),delete Ue[Zl][gK]),!Pr)return Rn}s(ix,"_getEnvelope");function Ss(Ue){var ht=She,Zt=ot[Sc]();try{var Rn=Vp(Ue,Zt),Pr=null;Rn&&(Pr=ix(Ue,Zt)),Pr&&(ht=K.serialize(Pr))}catch{}return ht}s(Ss,"_serialize");function ec(Ue){var ht=She;return Ue&&Ue[gi]&&(ht="["+Ue.join(",")+"]"),ht}s(ec,"_batch");function dt(Ue){var ht=xo();return{urlString:He,data:Ue,headers:ht}}s(dt,"_createPayload");function fn(Ue){return ot._sample.isSampledIn(Ue)}s(fn,"_isSampledIn");function Br(Ue,ht,Zt,Rn){ht===200&&Ue?ot._onSuccess(Ue,Ue[gi]):Rn&&ot[LE](Ue,Rn)}s(Br,"_getOnComplete");function Dn(Ue,ht,Zt,Rn){Rn===void 0&&(Rn=!0);var Pr=s(function(Aa,zd,ci){return Br(ht,Aa,zd,ci)},"onComplete"),mr=Dr(ht),Vi=Ue&&Ue.sendPOST;return Vi&&mr?(Rn&&ot._buffer[J7](ht),Vi(mr,Pr,!Zt)):null}s(Dn,"_doSend");function Dr(Ue){if(Ke(Ue)&&Ue[gi]>0){var ht=ot[Gh].batchPayloads(Ue),Zt=xo(),Rn={data:ht,urlString:He,headers:Zt,disableXhrSync:Fn,disableFetchKeepAlive:!ro,oriPayload:Ue};return Rn}return null}s(Dr,"_getPayload");function xo(){try{var Ue=Ce||{};return ehe(He)&&(Ue[$me[6]]=$me[7]),Ue}catch{}return null}s(xo,"_getHeaders");function wo(Ue){var ht=Ue?Ue[gi]:0;return ot[Gh].size()+ht>et?((!Ye||Ye.isOnline())&&ot[Dk](!0,null,10),!0):!1}s(wo,"_checkMaxSize");function is(Ue,ht,Zt,Rn,Pr,mr){var Vi=null;if(ot._appId||(Vi=Bn(mr),Vi&&Vi.appId&&(ot._appId=Vi.appId)),(Ue<200||Ue>=300)&&Ue!==0){if((Ue===301||Ue===307||Ue===308)&&!Rc(Zt)){ot[LE](ht,Pr);return}if(Ye&&!Ye.isOnline()){if(!po){var Aa=10;Qk(ht,Aa),wn(ot[Sc](),2,40,". Offline - Response Code: ".concat(Ue,". Offline status: ").concat(!Ye.isOnline(),". Will retry to send ").concat(ht.length," items."))}return}!po&&sx(Ue)?(Qk(ht),wn(ot[Sc](),2,40,". Response code "+Ue+". Will retry to send "+ht[gi]+" items.")):ot[LE](ht,Pr)}else Rc(Zt),Ue===206?(Vi||(Vi=Bn(mr)),Vi&&!po?ot[QK](ht,Vi):ot[LE](ht,Pr)):(S=0,ot[Z7](ht,Rn))}s(is,"_checkResponsStatus");function Rc(Ue){return ae>=10?!1:!ee(Ue)&&Ue!==""&&Ue!==He?(He=Ue,++ae,!0):!1}s(Rc,"_checkAndUpdateEndPointUrl");function Zu(Ue,ht){if(Le)Le(Ue,!1);else{var Zt=mo&&mo[X7]([3],!0);return Dn(Zt,Ue,ht)}}s(Zu,"_doUnloadSend");function $p(Ue,ht,Zt){var Rn=Ue,Pr=Rn&&Rn.oriPayload;if(qs)wr&&wr(Pr,!0),wn(ot[Sc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var mr=[],Vi=0;Vi<Pr[gi];Vi++){var Aa=Pr[Vi],zd=[Aa],ci=Dr(zd);Zt(ci,ht)?ot._onSuccess(zd,zd[gi]):mr[ZA](Aa)}mr[gi]>0&&(wr&&wr(mr,!0),wn(ot[Sc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s($p,"_onBeaconRetry");function zp(Ue){try{if(Ue&&Ue[gi])return pe(Ue[0])}catch{}return null}s(zp,"_isStringArr");function l_(Ue,ht){var Zt=null;if(Ke(Ue)){for(var Rn=Ue[gi],Pr=0;Pr<Ue[gi];Pr++)Rn+=Ue[Pr].item[gi];var mr=mo.getSyncFetchPayload();mr+Rn<=BKe?Zt=2:Ph()?Zt=3:(Zt=1,wn(ot[Sc](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var Vi=mo&&mo[X7]([Zt],!0);return Dn(Vi,Ue,ht)}return null}s(l_,"_fetchKeepAliveSender");function Qk(Ue,ht){if(ht===void 0&&(ht=1),!(!Ue||Ue[gi]===0)){var Zt=ot[Gh];Zt[Rk](Ue),S++;for(var Rn=0,Pr=Ue;Rn<Pr.length;Rn++){var mr=Pr[Rn];mr.cnt=mr.cnt||0,mr.cnt++,Zt[PE](mr)}jK(ht),c_()}}s(Qk,"_resendPayload");function jK(Ue){var ht=10,Zt;if(S<=1)Zt=ht;else{var Rn=(Math.pow(2,S)-1)/2,Pr=BA(Math.random()*Rn*ht)+1;Pr=Ue*Pr,Zt=_e(zr(Pr,3600),ht)}var mr=yh()+Zt*1e3;P=mr}s(jK,"_setRetryTime");function c_(){if(!O&&!L){var Ue=P?_e(0,P-yh()):0,ht=_e(cr,Ue);O=vh(function(){O=null,ot[Dk](!0,null,1)},ht)}}s(c_,"_setupTimer");function ox(){O&&O.cancel(),O=null,P=null}s(ox,"_clearScheduledTimer");function sx(Ue){return ee(El)?Ue===401||Ue===408||Ue===429||Ue===500||Ue===502||Ue===503||Ue===504:El[gi]&&El.indexOf(Ue)>-1}s(sx,"_isRetriable");function nN(){var Ue="getNotifyMgr";return ot.core[Ue]?ot.core[Ue]():ot.core._notificationManager}s(nN,"_getNotifyMgr");function rN(Ue,ht){var Zt=nN();if(Zt&&Zt.eventsSendRequest)try{Zt.eventsSendRequest(Ue,ht)}catch(Rn){wn(ot[Sc](),1,74,"send request notification failed: "+il(Rn),{exception:Lt(Rn)})}}s(rN,"_notifySendRequest");function Dhe(Ue,ht){var Zt=ht.disableInstrumentationKeyValidation,Rn=ee(Zt)?!1:Zt;if(Rn)return!0;var Pr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",mr=new RegExp(Pr);return mr.test(Ue)}s(Dhe,"_validateInstrumentationKey");function Phe(){ot[Pk]=null,ot[Gh]=null,ot._appId=null,ot._sample=null,Ce={},Ye=null,S=0,P=null,L=!1,O=null,K=null,ae=0,Te=0,Le=null,Me=null,He=null,lt=null,et=0,At=!1,hn=null,Hr=!1,xi=null,vi=Hh,po=!1,Ln=null,_s=Hh,Fn=!1,ro=!1,qs=!1,Et=null,wr=null,mo=null,ze(ot,"_senderConfig",{g:s(function(){return J6({},khe)},"g")})}s(Phe,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,S,P,L){var O;S!==T.iKey&&!ee(S)?O=Lp(Lp({},T),{iKey:S}):O=T;var K=NKe[O.baseType]||The;return K(P,O,L)},x}(pt),s_="instrumentationKey",tN="connectionString",Fk="endpointUrl",Mk="userOverrideEndpointUrl",a_,HK=void 0,LKe=(a_={diagnosticLogInterval:ok(FKe,1e4)},a_[tN]=HK,a_.endpointUrl=HK,a_[s_]=HK,a_.extensionConfig={},a_);function FKe(A){return A&&A>0}s(FKe,"_chkDiagLevel");var MKe=function(){function A(x){var T=new It,S;(ee(x)||ee(x[s_])&&ee(x[tN]))&&Gn("Invalid input configuration"),Jl(A,this,function(L){ze(L,"config",{g:s(function(){return S},"g")}),O(),L.initialize=O,L.track=P,H3(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function O(){var K=Xu(x||{},LKe);S=K.cfg,T.addUnloadHook(Gp(K,function(){var ae=S[tN];if(bt(ae)){var Ce=vw(function(Me,He){$u(ae,function(lt){var et=lt.value,At=S[s_];if(!lt.rejected&&et){S[tN]=et;var Pt=TK(et);At=Pt.instrumentationkey||At}Me(At)})}),Te=vw(function(Me,He){$u(ae,function(lt){var et=lt.value,At=S[Fk];if(!lt.rejected&&et){var Pt=TK(et),Vt=Pt.ingestionendpoint;At=Vt?Vt+Jw:At}Me(At)})});S[s_]=Ce,S[Fk]=S[Mk]||Te}if(pe(ae)){var Le=TK(ae),Ye=Le.ingestionendpoint;S[Fk]=S[Mk]?S[Mk]:Ye+Jw,S[s_]=Le.instrumentationkey||S[s_]}S[Fk]=S[Mk]?S[Mk]:S[Fk]})),T.initialize(S,[new Bhe])}s(O,"_initialize")});function P(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(P,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=It,t.ApplicationInsights=MKe,t.Sender=Bhe,t.SeverityLevel=pKe,t.arrForEach=Un,t.isNullOrUndefined=ee,t.proxyFunctions=H3,t.throwError=Gn})});var QEe=G(lg=>{"use strict";f();Object.defineProperty(lg,"__esModule",{value:!0});lg.bytePairEncode=lg.BinaryMap=lg.binaryMapKey=void 0;var Sst=s((t,e,n)=>{let r=n-e,i=16777215>>>Math.max(0,(3-r)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*l},"binaryMapKey");lg.binaryMapKey=Sst;var gee=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let i=r<6+n,o=(0,lg.binaryMapKey)(e,n,r);return i?this.final.get(o):this.nested.get(o)?.get(e,6+n,r)}set(e,n){let r=(0,lg.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let o=this.nested.get(r);if(o instanceof t)o.set(e.subarray(6),n);else{let a=new t;a.set(e.subarray(6),n),this.nested.set(r,a)}}};lg.BinaryMap=gee;var ag=new Int32Array(128),xu=new Int32Array(128);function Rst(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,i=-1;for(;ag.length<n*2;)xu=new Int32Array(xu.length*2),ag=new Int32Array(ag.length*2);for(let c=0;c<n-1;c++){let u=e.get(t,c,c+2)??2147483647;u<r&&(r=u,i=c),xu[c]=c,ag[c]=u}xu[n-1]=n-1,ag[n-1]=2147483647,xu[n]=n,ag[n]=2147483647;let o=n+1;function a(c,u=0){if(c+u+2<o){let d=e.get(t,xu[c],xu[c+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");r!==2147483647;){ag[xu[i]]=a(i,1),i>0&&(ag[xu[i-1]]=a(i-1,1));for(let c=i+1;c<o-1;c++)xu[c]=xu[c+1];o--,i=-1,r=2147483647;for(let c=0;c<o-1;c++){let u=ag[xu[c]];ag[xu[c]]<r&&(r=u,i=c)}}let l=[];for(let c=0;c<o-1;c++)l.push(e.get(t,xu[c],xu[c+1]));return l}s(Rst,"bytePairEncode");lg.bytePairEncode=Rst});var OEe=G(KF=>{"use strict";f();Object.defineProperty(KF,"__esModule",{value:!0});KF.makeTextEncoder=void 0;var Aee=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},yee=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},kst=s(()=>typeof Buffer<"u"?new yee:new Aee,"makeTextEncoder");KF.makeTextEncoder=kst});var UEe=G(JF=>{"use strict";f();Object.defineProperty(JF,"__esModule",{value:!0});JF.LRUCache=void 0;var Cee=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let i=new xee(e,n);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};JF.LRUCache=Cee;var xee=class{static{s(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var bee=G(ZF=>{"use strict";f();Object.defineProperty(ZF,"__esModule",{value:!0});ZF.TikTokenizer=void 0;var XF=QEe(),Bst=OEe(),Dst=UEe();function Pst(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return n(i),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let i of r.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),l=parseInt(o[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(n,"processBpeRanks")}s(Pst,"loadTikTokenBpe");function Nst(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(Nst,"escapeRegExp");var vee=class{static{s(this,"TikTokenizer")}constructor(e,n,r,i=8192){this.textEncoder=(0,Bst.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new Dst.LRUCache(i);let o=typeof e=="string"?Pst(e):e;this.init(o,n,r)}init(e,n,r){this.encoder=new XF.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(i=>Nst(i)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of n)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,n,r){let i=n,o=null;if(r&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||r&&r.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,n){let r=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,n),a>i&&this.encodeByIndex(e,r,i,a),o){if(i=i+this.encodeSpecialToken(r,o),i>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,i){let o,a=e.substring(r,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let l=this.cache.get(o[0]);if(l)for(let c of l)n.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)n.push(u),this.cache.set(o[0],[u]);else{let d=(0,XF.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let p of d)n.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,n,r,i,o,a,l){let c,u=e.substring(r,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let d=c[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,l+=d.length,n.push(...p);else{let m=o-a;a+=m,l+=d.length,n.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,l+=d.length,n.push(h);else break;else{let g=(0,XF.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,l+=d.length;for(let y of g)n.push(y)}else{let y=o-a;a+=y,l+=d.length;for(let v=0;v<y;v++)n.push(g[v]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,n,r){let i=[],o=0,a=0,l=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,r),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,n,a,l);if(a=p,l=m,a>=n)break}if(u!==null){if(a++,a<=n&&(o=o+this.encodeSpecialToken(i,u),l+=u[0].length,o>=e.length)||a>=n)break}else break}let c=l===e.length?e:e.slice(0,l);return{tokenIds:i,text:c}}encodeTrimPrefix(e,n,r){let i=[],o=0,a=0,l=0,c=new Map;for(c.set(a,l);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,r),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let v=g[0],b=this.cache.get(v);if(b)a+=b.length,l+=v.length,i.push(...b),c.set(a,l);else{let E=this.textEncoder.encode(v),_=this.encoder.get(E);if(_!==void 0)this.cache.set(v,[_]),a++,l+=v.length,i.push(_),c.set(a,l);else{let k=(0,XF.bytePairEncode)(E,this.encoder,this.textEncoder.length);this.cache.set(v,k),a+=k.length,l+=v.length;for(let D of k)i.push(D);c.set(a,l)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,l+=m[0].length,c.set(a,l),o>=e.length)break}else break}if(a<=n)return{tokenIds:i,text:e};let u=a-n,d=0,p=0;for(let[m,h]of c)if(m>=u){d=m,p=h;break}if(d>n){let m=this.encode(e,r),h=m.slice(m.length-n);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let n=[];for(let r of e){let i=[],o=this.decoder?.get(r);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(r);if(a!==void 0){let l=this.textEncoder.encode(a);i=Array.from(l.subarray(0,this.textEncoder.length))}}n.push(...i)}return this.textDecoder.decode(new Uint8Array(n))}};ZF.TikTokenizer=vee});var KEe=G(Va=>{"use strict";f();Object.defineProperty(Va,"__esModule",{value:!0});Va.createTokenizer=Va.createByEncoderName=Va.createByModelName=Va.getRegexByModel=Va.getRegexByEncoder=Va.getSpecialTokensByModel=Va.getSpecialTokensByEncoder=Va.MODEL_TO_ENCODING=void 0;var Lst=bee(),Fst=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Va.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var eM="<|endoftext|>",qEe="<|fim_prefix|>",WEe="<|fim_middle|>",GEe="<|fim_suffix|>",HEe="<|endofprompt|>",DB="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",jEe="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",Mst=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],VEe=Mst.join("|");function Eee(t){let e="";if(Va.MODEL_TO_ENCODING.has(t))e=Va.MODEL_TO_ENCODING.get(t);else for(let[n,r]of Fst)if(t.startsWith(n)){e=r;break}return e}s(Eee,"getEncoderFromModelName");async function Qst(t,e){let n=require("fs"),r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let i=await r.text();n.writeFileSync(e,i)}s(Qst,"fetchAndSaveFile");function Iee(t){let e=new Map([[eM,50256]]);switch(t){case"o200k_base":e=new Map([[eM,199999],[HEe,200018]]);break;case"cl100k_base":e=new Map([[eM,100257],[qEe,100258],[WEe,100259],[GEe,100260],[HEe,100276]]);break;case"p50k_edit":e=new Map([[eM,50256],[qEe,50281],[WEe,50282],[GEe,50283]]);break;default:break}return e}s(Iee,"getSpecialTokensByEncoder");Va.getSpecialTokensByEncoder=Iee;function Ost(t){let e=Eee(t);return Iee(e)}s(Ost,"getSpecialTokensByModel");Va.getSpecialTokensByModel=Ost;function $Ee(t){switch(t){case"o200k_base":return VEe;case"cl100k_base":return jEe;default:break}return DB}s($Ee,"getRegexByEncoder");Va.getRegexByEncoder=$Ee;function Ust(t){let e=Eee(t);return $Ee(e)}s(Ust,"getRegexByModel");Va.getRegexByModel=Ust;async function qst(t,e=null){return zEe(Eee(t),e)}s(qst,"createByModelName");Va.createByModelName=qst;async function zEe(t,e=null){let n,r,i=Iee(t);switch(t){case"o200k_base":n=VEe,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=jEe,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=DB,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=DB,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=DB,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=DB,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),l=a.basename(r),c=a.resolve(__dirname,"..","model");o.existsSync(c)||o.mkdirSync(c,{recursive:!0});let u=a.resolve(c,l);return o.existsSync(u)||(console.log(`Downloading file from ${r}`),await Qst(r,u),console.log(`Saved file to ${u}`)),YEe(u,i,n)}s(zEe,"createByEncoderName");Va.createByEncoderName=zEe;function YEe(t,e,n,r=8192){return new Lst.TikTokenizer(t,e,n,r)}s(YEe,"createTokenizer");Va.createTokenizer=YEe});var JEe=G($a=>{"use strict";f();Object.defineProperty($a,"__esModule",{value:!0});$a.createTokenizer=$a.createByEncoderName=$a.createByModelName=$a.getSpecialTokensByModel=$a.getSpecialTokensByEncoder=$a.getRegexByModel=$a.getRegexByEncoder=$a.MODEL_TO_ENCODING=$a.TikTokenizer=void 0;var Wst=bee();Object.defineProperty($a,"TikTokenizer",{enumerable:!0,get:s(function(){return Wst.TikTokenizer},"get")});var Fx=KEe();Object.defineProperty($a,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return Fx.MODEL_TO_ENCODING},"get")});Object.defineProperty($a,"getRegexByEncoder",{enumerable:!0,get:s(function(){return Fx.getRegexByEncoder},"get")});Object.defineProperty($a,"getRegexByModel",{enumerable:!0,get:s(function(){return Fx.getRegexByModel},"get")});Object.defineProperty($a,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return Fx.getSpecialTokensByEncoder},"get")});Object.defineProperty($a,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return Fx.getSpecialTokensByModel},"get")});Object.defineProperty($a,"createByModelName",{enumerable:!0,get:s(function(){return Fx.createByModelName},"get")});Object.defineProperty($a,"createByEncoderName",{enumerable:!0,get:s(function(){return Fx.createByEncoderName},"get")});Object.defineProperty($a,"createTokenizer",{enumerable:!0,get:s(function(){return Fx.createTokenizer},"get")})});var Dee=G((DCn,CIe)=>{"use strict";f();CIe.exports=s(function(e,n){n===!0&&(n=0);var r="";if(typeof e=="string")try{r=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(r=e.protocol);var i=r.split(/\:|\+/).filter(Boolean);return typeof n=="number"?i[n]:i},"protocols")});var vIe=G((LCn,xIe)=>{"use strict";f();var vct=Dee();function bct(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var n=new URL(t);e.protocols=vct(n),e.protocol=e.protocols[0],e.port=n.port,e.resource=n.hostname,e.host=n.host,e.user=n.username||"",e.password=n.password||"",e.pathname=n.pathname,e.hash=n.hash.slice(1),e.search=n.search.slice(1),e.href=n.href,e.query=Object.fromEntries(n.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(bct,"parsePath");xIe.exports=bct});var _Ie=G((QCn,wIe)=>{"use strict";f();var Ect=vIe();function Ict(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Ict,"_interopDefaultLegacy");var Tct=Ict(Ect);function wct(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=s(function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:s(function(){return t[r]},"get")})}),n}s(wct,"getAugmentedNamespace");var EIe={},_ct="text/plain",Sct="us-ascii",bIe=s((t,e)=>e.some(n=>n instanceof RegExp?n.test(t):n===t),"testParameter"),Rct=s((t,{stripHash:e})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:r,data:i,hash:o}=n.groups,a=r.split(";");o=e?"":o;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===Sct)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==_ct)&&d.unshift(c),`data:${d.join(";")},${l?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function kct(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return Rct(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,c="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(l,m);c+=h.replace(/\/{2,}/g,"/"),c+=p,l=m+p.length}let u=i.pathname.slice(l,i.pathname.length);c+=u.replace(/\/{2,}/g,"/"),i.pathname=c}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),l=a[a.length-1];bIe(l,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])bIe(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(kct,"normalizeUrl");var Bct=Object.freeze({__proto__:null,default:kct}),Dct=wct(Bct);Object.defineProperty(EIe,"__esModule",{value:!0});var Pct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nct=Dct,Lct=IIe(Nct),Fct=Tct.default,Mct=IIe(Fct);function IIe(t){return t&&t.__esModule?t:{default:t}}s(IIe,"_interopRequireDefault");var TIe=s(function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(c){var u=new Error(c);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),n&&((typeof n>"u"?"undefined":Pct(n))!=="object"&&(n={stripHash:!1}),e=(0,Lct.default)(e,n));var o=(0,Mct.default)(e);if(o.parse_failed){var a=o.href.match(r);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");TIe.MAX_INPUT_LENGTH=2048;var Qct=EIe.default=TIe;wIe.exports=Qct});var kIe=G((qCn,RIe)=>{"use strict";f();var Oct=Dee();function SIe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=Oct(t);if(t=t.substring(t.indexOf("://")+3),SIe(e))return!0;var n=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(n)&&t.indexOf("@")<t.indexOf(":")}s(SIe,"isSsh");RIe.exports=SIe});var PIe=G((HCn,DIe)=>{"use strict";f();var Uct=_Ie(),BIe=kIe();function qct(t){let e=Uct(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),BIe(e.protocols)||e.protocols.length===0&&BIe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(qct,"gitUp");DIe.exports=qct});var LIe=G(($Cn,NIe)=>{"use strict";f();var Wct=PIe();function Pee(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(E){return typeof E=="string"}))throw new Error("The refs should contain only strings");var n=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;n.test(t)&&(t="https://github.com/"+t);var r=Wct(t),i=r.resource.split("."),o=null;switch(r.toString=function(E){return Pee.stringify(this,E)},r.source=i.length>2?i.slice(1-i.length).join("."):r.source=r.resource,r.git_suffix=/\.git$/.test(r.pathname),r.name=decodeURIComponent((r.pathname||r.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),r.owner=decodeURIComponent(r.user),r.source){case"git.cloudforge.com":r.owner=r.user,r.organization=i[0],r.source="cloudforge.com";break;case"visualstudio.com":if(r.resource==="vs-ssh.visualstudio.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3],r.full_name=o[2]+"/"+o[3]);break}else{o=r.name.split("/"),o.length===2?(r.owner=o[1],r.name=o[1],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name);break}case"dev.azure.com":case"azure.com":if(r.resource==="ssh.dev.azure.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3]);break}else{o=r.name.split("/"),o.length===5?(r.organization=o[0],r.owner=o[1],r.name=o[4],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name),r.query&&r.query.path&&(r.filepath=r.query.path.replace(/^\/+/g,"")),r.query&&r.query.version&&(r.ref=r.query.version.replace(/^GB/,""));break}default:o=r.name.split("/");var a=o.length-1;if(o.length>=2){var l=o.indexOf("-",2),c=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=l>0?l-1:c>0&&u>0?Math.min(c-1,u-1):c>0?c-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,r.owner=o.slice(0,a).join("/"),r.name=o[a],d&&p<0&&(r.commit=o[a+2])}r.ref="",r.filepathtype="",r.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(r.filepathtype=o[y+1],r.ref=o[y+2],o.length>y+3&&(r.filepath=o.slice(y+3).join("/"))),r.organization=r.owner;break}r.full_name||(r.full_name=r.owner,r.name&&(r.full_name&&(r.full_name+="/"),r.full_name+=r.name)),r.owner.startsWith("scm/")&&(r.source="bitbucket-server",r.owner=r.owner.replace("scm/",""),r.organization=r.owner,r.full_name=r.owner+"/"+r.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(r.pathname);return b!=null&&(r.source="bitbucket-server",b[1]==="users"?r.owner="~"+b[2]:r.owner=b[2],r.organization=r.owner,r.name=b[3],o=b[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(r.filepathtype=o[1],o.length>2&&(r.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(r.commit=o[2])),r.full_name=r.owner+"/"+r.name,r.query.at?r.ref=r.query.at:r.ref=""),e.length!==0&&r.ref&&(r.ref=jct(r.href,e)||r.ref,r.filepath=r.href.split(r.ref+"/")[1]),r}s(Pee,"gitUrlParse");Pee.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var n=t.port?":"+t.port:"",r=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return n?"ssh://"+r+"@"+t.resource+n+"/"+t.full_name+i:r+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+r+"@"+t.resource+n+"/"+t.full_name+i;case"http":case"https":var o=t.token?Gct(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+n+"/"+Hct(t)+i;default:return t.href}};function Gct(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(Gct,"buildToken");function Hct(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(n){return encodeURIComponent(n)}).join("/");return e}}s(Hct,"buildPath");function jct(t,e){var n="";return e.forEach(function(r){t.includes(r)&&r.length>n.length&&(n=r)}),n}s(jct,"findLongestMatchingSubstring");NIe.exports=Pee});var jIe=G((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,i){r?n(r):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var c=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(n>=o)break;e[n++]=l}else if(l<=2047){if(n+1>=o)break;e[n++]=192|l>>6,e[n++]=128|63&l}else if(l<=65535){if(n+2>=o)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|63&l}else{if(n+3>=o)break;e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|63&l}}return e[n]=0,n-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function n(i){e(i.instance,i.module)}s(n,"r");function r(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(r,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(n,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,n=0;function r(){for(var b=0,E=1;;){var _=t[e++];if(b+=(127&_)*E,E*=128,!(128&_))break}return b}s(r,"_");function i(){var b=r();return UTF8ArrayToString(t,(e+=b)-b,b)}s(i,"n");function o(b,E){if(b)throw new Error(E)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),o(l.length===0,"need dylink section"),n=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=r();n=e+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var d=r(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<n;){var h=t[e++],g=r();if(h===1)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(h===2)for(d=r(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=r();y--;){var v=i();256&r()&&u.tlsExports.add(v)}else if(h===4)for(y=r();y--;)i(),v=i(),(3&r())==1&&u.weakImports.add(v);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var o=0;o<r.length;++o)e.push(i[r[o]]);n=="v"?e.push(0):e.push(1,i[n])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}s(addFunction,"addFunction");function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}s(updateGOT,"updateGOT");function relocateExports(t,e,n){var r={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),r[i]=o}return updateGOT(r,n),r}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var c=e.fs.readFile(l,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(l=locateFile(l),e.loadAsync)return new Promise(function(u,d){readAsync(l,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,n)}):loadWebAssemblyModule(i(t),e,n)}s(o,"s");function a(l){r.global&&mergeLibSymbols(l,t),r.module=l}return s(a,"a"),r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?o().then(function(l){return a(l),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var i=e*(1+.2/r);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(n,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},"calculateAt"),doStat:s(function(t,e,n){try{var r=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var i=r.atime.getTime(),o=r.mtime.getTime(),a=r.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=a%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,n,r,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var o=HEAPU8.slice(t,t+n);FS.msync(e,o,i,n,r)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,i){try{var o=convertI32PairToI53Checked(e,n);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,r),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&r===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,a,l,r);if(c<0)return-1;i+=c,r!==void 0&&(r+=c)}return i}s(doWritev,"doWritev");function _fd_write(t,e,n,r){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,i){var o=currentParseCallback(e,{row:n,column:r});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,i=(n-=2)<2*t.length?n/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-r}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),i=r>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(n,r);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=s((c,u,d)=>e.slice(c,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(r&&r.includedRanges){i=r.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,r.includedRanges[u]),c+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,n,r,i){assertInternal(e),this[0]=n,this.language=r,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(n);if(n>0){let o=r;for(let a=0;a<n;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return i}}class Node{static{s(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,n.row,n.column,r.row,r.column);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(l);if(l>0){let d=c;for(let p=0;p<l;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(c),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,i=this.types.length;r<i;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,i=this.fields.length;r<i;r++){let o=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),i=C._malloc(r+1);stringToUTF8(e,i,r+1);let o=C._ts_language_symbol_for_name(this[0],i,r,n);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let i=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,b=e.substr(v,100).split(`
`)[0],E,_=b.match(QUERY_WORD_REGEX)[0];switch(y){case 2:E=new RangeError(`Bad node name '${_}'`);break;case 3:E=new RangeError(`Bad field name '${_}'`);break;case 4:E=new RangeError(`Bad capture name @${_}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${v}: '${b}'...`),_="";break;default:E=new SyntaxError(`Bad syntax at offset ${v}: '${b}'...`),_=""}throw E.index=v,E.length=_.length,C._free(r),E}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),c=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let v=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");c[y]=UTF8ToString(v,b)}for(let y=0;y<o;y++){let v=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}let d=new Array(l),p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let E=[],_=v;for(let k=0;k<b;k++){let D=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,D===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:c[N]});else if(D===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:u[N]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let Q=E[0].value,Z=!0;switch(Q){case"not-eq?":Z=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let W=E[1].name,re=E[2].name;g[y].push(function(oe){let V,q;for(let Y of oe)Y.name===W&&(V=Y.node),Y.name===re&&(q=Y.node);return V===void 0||q===void 0||V.text===q.text===Z})}else{let W=E[1].name,re=E[2].value;g[y].push(function(oe){for(let V of oe)if(V.name===W)return V.node.text===re===Z;return!0})}break;case"not-match?":Z=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let me=E[1].name,te=new RegExp(E[2].value);g[y].push(function(W){for(let re of W)if(re.name===me)return te.test(re.node.text)===Z;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(W=>W.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[y]||(d[y]={}),d[y][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${Q}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(W=>W.type!=="string"))throw new Error(`Arguments to \`#${Q}\` predicate must be a strings.".`);let H=Q==="is?"?p:m;H[y]||(H[y]={}),H[y][E[1].value]=E[2]?E[2].value:null;break;default:h[y].push({operator:Q,operands:E.slice(1)})}E.length=0}}Object.freeze(d[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(r),new Query(INTERNAL,i,c,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");n=Promise.resolve(o.readFileSync(i))}else n=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(i=>r(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,n,r,i,o,a,l,c){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!c;let d=0,p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(v=>v(y))){u[d++]={pattern:h,captures:y};let v=this.setProperties[h];v&&(u[m].setProperties=v);let b=this.assertedProperties[h];b&&(u[m].assertedProperties=b);let E=this.refutedProperties[h];E&&(u[m].refutedProperties=E)}}return u.length=d,C._free(l),u}captures(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let d=[],p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(v=>v(d))){let v=d[y],b=this.setProperties[h];b&&(v.setProperties=b);let E=this.assertedProperties[h];E&&(v.assertedProperties=E);let _=this.refutedProperties[h];_&&(v.refutedProperties=_),u.push(v)}}return C._free(l),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,i=t.textCallback(e,null,n);for(e+=i.length;e<n;){let o=t.textCallback(e,null,n);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>n&&(i=i.slice(0,r)),i}s(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let i=0,o=r.length;i<o;i++){let a=getValue(n,"i32"),l=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[i]={name:t.captureNames[a],node:l}}return n}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=n,l.startIndex=r,l.startPosition={row:i,column:o},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Ete=G((d2n,x2e)=>{f();var bte=require("fs"),JM=require("path"),c8=JM.join,Qdt=JM.dirname,y2e=bte.accessSync&&function(t){try{bte.accessSync(t)}catch{return!1}return!0}||bte.existsSync||JM.existsSync,C2e={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function Odt(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(C2e).map(function(c){c in t||(t[c]=C2e[c])}),t.module_root||(t.module_root=Udt(__filename)),JM.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],r=0,i=t.try.length,o,a,l;r<i;r++){o=c8.apply(null,t.try[r].map(function(c){return t[c]||c})),n.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(c){if(c.code!=="MODULE_NOT_FOUND"&&c.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(c.message))throw c}}throw l=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(c){return t.arrow+c}).join(`
`)),l.tries=n,l}s(Odt,"bindings");x2e.exports=Odt;function Udt(t){for(var e=Qdt(t),n;;){if(e==="."&&(e=process.cwd()),y2e(c8(e,"dist")))return c8(e,"dist");if(y2e(c8(e,"compiled")))return e;if(n===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');n=e,e=c8(e,"..")}}s(Udt,"getRoot")});var b2e=G((m2n,v2e)=>{f();v2e.exports=Ete()("node_sqlite3.node")});var T2e=G(I2e=>{f();var qdt=require("util");function Wdt(t,e,n){let r=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return qdt.inspect(l,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let a=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=s(function(){let c=arguments[0];return c&&c.stack&&!c.__augmented&&(c.stack=E2e(c).join(`
`),c.stack+=`
--> in `+o,c.stack+=`
`+E2e(i).slice(1).join(`
`),c.__augmented=!0),a.apply(this,arguments)},"replacement")),r.apply(this,arguments)}}s(Wdt,"extendTrace");I2e.extendTrace=Wdt;function E2e(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(E2e,"filter")});var R2e=G((_2e,S2e)=>{f();var Gdt=require("path"),Ff=b2e(),_S=require("events").EventEmitter;S2e.exports=_2e=Ff;function SS(t){return function(e){let n,r=Array.prototype.slice.call(arguments,1);if(typeof r[r.length-1]=="function"){let o=r[r.length-1];n=s(function(a){a&&o(a)},"errBack")}let i=new XM(this,e,n);return t.call(this,i,r)}}s(SS,"normalizeMethod");function Tte(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}s(Tte,"inherits");Ff.cached={Database:s(function(t,e,n){if(t===""||t===":memory:")return new Eu(t,e,n);let r;if(t=Gdt.resolve(t),!Ff.cached.objects[t])r=Ff.cached.objects[t]=new Eu(t,e,n);else{r=Ff.cached.objects[t];let o=typeof e=="number"?n:e;if(typeof o=="function"){let a=function(){o.call(r,null)};var i=a;s(a,"cb"),r.open?process.nextTick(a):r.once("open",a)}}return r},"Database"),objects:{}};var Eu=Ff.Database,XM=Ff.Statement,Ite=Ff.Backup;Tte(Eu,_S);Tte(XM,_S);Tte(Ite,_S);Eu.prototype.prepare=SS(function(t,e){return e.length?t.bind.apply(t,e):t});Eu.prototype.run=SS(function(t,e){return t.run.apply(t,e).finalize(),this});Eu.prototype.get=SS(function(t,e){return t.get.apply(t,e).finalize(),this});Eu.prototype.all=SS(function(t,e){return t.all.apply(t,e).finalize(),this});Eu.prototype.each=SS(function(t,e){return t.each.apply(t,e).finalize(),this});Eu.prototype.map=SS(function(t,e){return t.map.apply(t,e).finalize(),this});Eu.prototype.backup=function(){let t;return arguments.length<=2?t=new Ite(this,arguments[0],"main","main",!0,arguments[1]):t=new Ite(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Ff.BUSY,Ff.LOCKED],t};XM.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(n,r){if(n)return e(n);let i={};if(r.length){let o=Object.keys(r[0]),a=o[0];if(o.length>2)for(let l=0;l<r.length;l++)i[r[l][a]]=r[l];else{let l=o[1];for(let c=0;c<r.length;c++)i[r[c][a]]=r[c][l]}}e(n,i)}),this.all.apply(this,t)};var w2e=!1,wte=["trace","profile","change"];Eu.prototype.addListener=Eu.prototype.on=function(t){let e=_S.prototype.addListener.apply(this,arguments);return wte.indexOf(t)>=0&&this.configure(t,!0),e};Eu.prototype.removeListener=function(t){let e=_S.prototype.removeListener.apply(this,arguments);return wte.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Eu.prototype.removeAllListeners=function(t){let e=_S.prototype.removeAllListeners.apply(this,arguments);return wte.indexOf(t)>=0&&this.configure(t,!1),e};Ff.verbose=function(){if(!w2e){let t=T2e();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Eu.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(XM.prototype,e)}),w2e=!0}return Ff}});var dQ=G(Ya=>{"use strict";f();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.thenable=Ya.typedArray=Ya.stringArray=Ya.array=Ya.func=Ya.error=Ya.number=Ya.string=Ya.boolean=void 0;function jdt(t){return t===!0||t===!1}s(jdt,"boolean");Ya.boolean=jdt;function N2e(t){return typeof t=="string"||t instanceof String}s(N2e,"string");Ya.string=N2e;function Vdt(t){return typeof t=="number"||t instanceof Number}s(Vdt,"number");Ya.number=Vdt;function $dt(t){return t instanceof Error}s($dt,"error");Ya.error=$dt;function L2e(t){return typeof t=="function"}s(L2e,"func");Ya.func=L2e;function F2e(t){return Array.isArray(t)}s(F2e,"array");Ya.array=F2e;function zdt(t){return F2e(t)&&t.every(e=>N2e(e))}s(zdt,"stringArray");Ya.stringArray=zdt;function Ydt(t,e){return Array.isArray(t)&&t.every(e)}s(Ydt,"typedArray");Ya.typedArray=Ydt;function Kdt(t){return t&&L2e(t.then)}s(Kdt,"thenable");Ya.thenable=Kdt});var Rte=G(Mf=>{"use strict";f();Object.defineProperty(Mf,"__esModule",{value:!0});Mf.generateUuid=Mf.parse=Mf.isUUID=Mf.v4=Mf.empty=void 0;var f8=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},p8=class t extends f8{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};p8._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];p8._timeHighBits=["8","9","a","b"];Mf.empty=new f8("00000000-0000-0000-0000-000000000000");function M2e(){return new p8}s(M2e,"v4");Mf.v4=M2e;var Jdt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Q2e(t){return Jdt.test(t)}s(Q2e,"isUUID");Mf.isUUID=Q2e;function Xdt(t){if(!Q2e(t))throw new Error("invalid uuid");return new f8(t)}s(Xdt,"parse");Mf.parse=Xdt;function Zdt(){return M2e().asHex()}s(Zdt,"generateUuid");Mf.generateUuid=Zdt});var O2e=G(Vx=>{"use strict";f();Object.defineProperty(Vx,"__esModule",{value:!0});Vx.attachPartialResult=Vx.ProgressFeature=Vx.attachWorkDone=void 0;var jx=ii(),e0t=Rte(),II=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let o={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(jx.WorkDoneProgress.type,this._token,o)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(jx.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(jx.WorkDoneProgress.type,this._token,{kind:"end"})}};II.Instances=new Map;var fQ=class extends II{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,n){super(e,n),this._source=new jx.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},m8=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},pQ=class extends m8{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new jx.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function t0t(t,e){if(e===void 0||e.workDoneToken===void 0)return new m8;let n=e.workDoneToken;return delete e.workDoneToken,new II(t,n)}s(t0t,"attachWorkDone");Vx.attachWorkDone=t0t;var n0t=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(jx.WorkDoneProgressCancelNotification.type,n=>{let r=II.Instances.get(n.token);(r instanceof fQ||r instanceof pQ)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new m8:new II(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,e0t.generateUuid)();return this.connection.sendRequest(jx.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new fQ(this.connection,e))}else return Promise.resolve(new pQ)}},"ProgressFeature");Vx.ProgressFeature=n0t;var kte;(function(t){t.type=new jx.ProgressType})(kte||(kte={}));var Bte=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(kte.type,this._token,e)}};function r0t(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new Bte(t,n)}s(r0t,"attachPartialResult");Vx.attachPartialResult=r0t});var U2e=G(mQ=>{"use strict";f();Object.defineProperty(mQ,"__esModule",{value:!0});mQ.ConfigurationFeature=void 0;var i0t=ii(),o0t=dQ(),s0t=s(t=>class extends t{getConfiguration(e){return e?o0t.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(i0t.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");mQ.ConfigurationFeature=s0t});var q2e=G(gQ=>{"use strict";f();Object.defineProperty(gQ,"__esModule",{value:!0});gQ.WorkspaceFoldersFeature=void 0;var hQ=ii(),a0t=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new hQ.Emitter,this.connection.onNotification(hQ.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(hQ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(hQ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");gQ.WorkspaceFoldersFeature=a0t});var W2e=G(AQ=>{"use strict";f();Object.defineProperty(AQ,"__esModule",{value:!0});AQ.CallHierarchyFeature=void 0;var Dte=ii(),l0t=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Dte.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let n=Dte.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let n=Dte.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onOutgoingCalls")}}},"CallHierarchyFeature");AQ.CallHierarchyFeature=l0t});var Nte=G($x=>{"use strict";f();Object.defineProperty($x,"__esModule",{value:!0});$x.SemanticTokensBuilder=$x.SemanticTokensDiff=$x.SemanticTokensFeature=void 0;var yQ=ii(),c0t=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(yQ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let n=yQ.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on"),onDelta:s(e=>{let n=yQ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onDelta"),onRange:s(e=>{let n=yQ.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onRange")}}},"SemanticTokensFeature");$x.SemanticTokensFeature=c0t;var CQ=class{static{s(this,"SemanticTokensDiff")}constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,o=n-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let a=i-r+1,l=this.modifiedSequence.slice(r,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:r,deleteCount:a-1}]:[{start:r,deleteCount:a,data:l}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};$x.SemanticTokensDiff=CQ;var Pte=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,o){let a=e,l=n;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new CQ(this._prevData,this._data).computeDiff()}:this.build()}};$x.SemanticTokensBuilder=Pte});var G2e=G(xQ=>{"use strict";f();Object.defineProperty(xQ,"__esModule",{value:!0});xQ.ShowDocumentFeature=void 0;var u0t=ii(),d0t=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(u0t.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");xQ.ShowDocumentFeature=d0t});var H2e=G(vQ=>{"use strict";f();Object.defineProperty(vQ,"__esModule",{value:!0});vQ.FileOperationsFeature=void 0;var kS=ii(),f0t=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(kS.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(kS.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(kS.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(kS.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(kS.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(kS.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}},"FileOperationsFeature");vQ.FileOperationsFeature=f0t});var j2e=G(bQ=>{"use strict";f();Object.defineProperty(bQ,"__esModule",{value:!0});bQ.LinkedEditingRangeFeature=void 0;var p0t=ii(),m0t=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(p0t.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}},"LinkedEditingRangeFeature");bQ.LinkedEditingRangeFeature=m0t});var V2e=G(EQ=>{"use strict";f();Object.defineProperty(EQ,"__esModule",{value:!0});EQ.TypeHierarchyFeature=void 0;var Lte=ii(),h0t=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Lte.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onSupertypes:s(e=>{let n=Lte.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSupertypes"),onSubtypes:s(e=>{let n=Lte.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSubtypes")}}},"TypeHierarchyFeature");EQ.TypeHierarchyFeature=h0t});var z2e=G(IQ=>{"use strict";f();Object.defineProperty(IQ,"__esModule",{value:!0});IQ.InlineValueFeature=void 0;var $2e=ii(),g0t=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest($2e.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest($2e.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineValueFeature");IQ.InlineValueFeature=g0t});var K2e=G(TQ=>{"use strict";f();Object.defineProperty(TQ,"__esModule",{value:!0});TQ.FoldingRangeFeature=void 0;var Y2e=ii(),A0t=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(Y2e.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let n=Y2e.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"FoldingRangeFeature");TQ.FoldingRangeFeature=A0t});var J2e=G(wQ=>{"use strict";f();Object.defineProperty(wQ,"__esModule",{value:!0});wQ.InlayHintFeature=void 0;var Fte=ii(),y0t=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Fte.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Fte.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on"),resolve:s(e=>this.connection.onRequest(Fte.InlayHintResolveRequest.type,(n,r)=>e(n,r)),"resolve")}}},"InlayHintFeature");wQ.InlayHintFeature=y0t});var X2e=G(_Q=>{"use strict";f();Object.defineProperty(_Q,"__esModule",{value:!0});_Q.DiagnosticFeature=void 0;var h8=ii(),C0t=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(h8.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(h8.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(h8.DocumentDiagnosticRequest.partialResult,n))),"on"),onWorkspace:s(e=>this.connection.onRequest(h8.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(h8.WorkspaceDiagnosticRequest.partialResult,n))),"onWorkspace")}}},"DiagnosticFeature");_Q.DiagnosticFeature=C0t});var Qte=G(SQ=>{"use strict";f();Object.defineProperty(SQ,"__esModule",{value:!0});SQ.TextDocuments=void 0;var TI=ii(),Mte=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new TI.Emitter,this._onDidOpen=new TI.Emitter,this._onDidClose=new TI.Emitter,this._onDidSave=new TI.Emitter,this._onWillSave=new TI.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=TI.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,a),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),TI.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};SQ.TextDocuments=Mte});var Ute=G(BS=>{"use strict";f();Object.defineProperty(BS,"__esModule",{value:!0});BS.NotebookDocuments=BS.NotebookSyncFeature=void 0;var Qf=ii(),Z2e=Qte(),x0t=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Qf.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Qf.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Qf.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Qf.DidCloseNotebookDocumentNotification.type,n=>{e(n)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");BS.NotebookSyncFeature=x0t;var RQ=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Qf.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Qf.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Qf.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};RQ.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Ote=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof Z2e.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new Z2e.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Qf.Emitter,this._onDidChange=new Qf.Emitter,this._onDidSave=new Qf.Emitter,this._onDidClose=new Qf.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new RQ,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)n.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,l=!1,c=i.change;c.metadata!==void 0&&(l=!0,o.metadata=c.metadata);let u=[],d=[],p=[],m=[];if(c.cells!==void 0){let b=c.cells;if(b.structure!==void 0){let E=b.structure.array;if(o.cells.splice(E.start,E.deleteCount,...E.cells!==void 0?E.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)n.openTextDocument({textDocument:_}),u.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)n.closeTextDocument({textDocument:_}),d.push(_.uri)}if(b.data!==void 0){let E=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=E.get(o.cells[_].document);if(k!==void 0){let D=o.cells.splice(_,1,k);if(p.push({old:D[0],new:k}),E.delete(k.document),E.size===0)break}}}if(b.textContent!==void 0)for(let E of b.textContent)n.changeTextDocument({textDocument:E.document,contentChanges:E.changes}),m.push(E.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};l&&(h.metadata={old:a,new:o.metadata});let g=[];for(let b of u)g.push(this.getNotebookCell(b));let y=[];for(let b of d)y.push(this.getNotebookCell(b));let v=[];for(let b of m)v.push(this.getNotebookCell(b));(g.length>0||y.length>0||p.length>0||v.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:v}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)n.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Qf.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};BS.NotebookDocuments=Ote});var eTe=G(kQ=>{"use strict";f();Object.defineProperty(kQ,"__esModule",{value:!0});kQ.MonikerFeature=void 0;var v0t=ii(),b0t=s(t=>class extends t{get moniker(){return{on:s(e=>{let n=v0t.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"MonikerFeature");kQ.MonikerFeature=b0t});var Vte=G(uo=>{"use strict";f();Object.defineProperty(uo,"__esModule",{value:!0});uo.createConnection=uo.combineFeatures=uo.combineNotebooksFeatures=uo.combineLanguagesFeatures=uo.combineWorkspaceFeatures=uo.combineWindowFeatures=uo.combineClientFeatures=uo.combineTracerFeatures=uo.combineTelemetryFeatures=uo.combineConsoleFeatures=uo._NotebooksImpl=uo._LanguagesImpl=uo.BulkUnregistration=uo.BulkRegistration=uo.ErrorMessageTracker=void 0;var $t=ii(),Of=dQ(),Wte=Rte(),Kr=O2e(),E0t=U2e(),I0t=q2e(),T0t=W2e(),w0t=Nte(),_0t=G2e(),S0t=H2e(),R0t=j2e(),k0t=V2e(),B0t=z2e(),D0t=K2e(),P0t=J2e(),N0t=X2e(),L0t=Ute(),F0t=eTe();function qte(t){if(t!==null)return t}s(qte,"null2Undefined");var Gte=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};uo.ErrorMessageTracker=Gte;var BQ=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($t.MessageType.Error,e)}warn(e){this.send($t.MessageType.Warning,e)}info(e){this.send($t.MessageType.Info,e)}log(e){this.send($t.MessageType.Log,e)}debug(e){this.send($t.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification($t.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,$t.RAL)().console.error("Sending log message failed")})}},Hte=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:$t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(qte)}showWarningMessage(e,...n){let r={type:$t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(qte)}showInformationMessage(e,...n){let r={type:$t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(qte)}},tTe=(0,_0t.ShowDocumentFeature)((0,Kr.ProgressFeature)(Hte)),nTe;(function(t){function e(){return new DQ}s(e,"create"),t.create=e})(nTe||(uo.BulkRegistration=nTe={}));var DQ=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=Of.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Wte.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},rTe;(function(t){function e(){return new g8(void 0,[])}s(e,"create"),t.create=e})(rTe||(uo.BulkUnregistration=rTe={}));var g8=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest($t.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=Of.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest($t.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},PQ=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof DQ?this.registerMany(e):e instanceof g8?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=Of.string(n)?n:n.method,o=Wte.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($t.RegistrationRequest.type,a).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,n){let r=Of.string(e)?e:e.method,i=Wte.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest($t.RegistrationRequest.type,o).then(a=>$t.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(a)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest($t.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest($t.RegistrationRequest.type,n).then(()=>new g8(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},jte=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}s(n,"isApplyWorkspaceEditParams");let r=n(e)?e:{edit:e};return this.connection.sendRequest($t.ApplyWorkspaceEditRequest.type,r)}},iTe=(0,S0t.FileOperationsFeature)((0,I0t.WorkspaceFoldersFeature)((0,E0t.ConfigurationFeature)(jte))),NQ=class{static{s(this,"TracerImpl")}constructor(){this._trace=$t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==$t.Trace.Off&&this.connection.sendNotification($t.LogTraceNotification.type,{message:e,verbose:this._trace===$t.Trace.Verbose?n:void 0}).catch(()=>{})}},LQ=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},FQ=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,Kr.attachPartialResult)(this.connection,n)}};uo._LanguagesImpl=FQ;var oTe=(0,D0t.FoldingRangeFeature)((0,F0t.MonikerFeature)((0,N0t.DiagnosticFeature)((0,P0t.InlayHintFeature)((0,B0t.InlineValueFeature)((0,k0t.TypeHierarchyFeature)((0,R0t.LinkedEditingRangeFeature)((0,w0t.SemanticTokensFeature)((0,T0t.CallHierarchyFeature)(FQ))))))))),MQ=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,Kr.attachPartialResult)(this.connection,n)}};uo._NotebooksImpl=MQ;var sTe=(0,L0t.NotebookSyncFeature)(MQ);function aTe(t,e){return function(n){return e(t(n))}}s(aTe,"combineConsoleFeatures");uo.combineConsoleFeatures=aTe;function lTe(t,e){return function(n){return e(t(n))}}s(lTe,"combineTelemetryFeatures");uo.combineTelemetryFeatures=lTe;function cTe(t,e){return function(n){return e(t(n))}}s(cTe,"combineTracerFeatures");uo.combineTracerFeatures=cTe;function uTe(t,e){return function(n){return e(t(n))}}s(uTe,"combineClientFeatures");uo.combineClientFeatures=uTe;function dTe(t,e){return function(n){return e(t(n))}}s(dTe,"combineWindowFeatures");uo.combineWindowFeatures=dTe;function fTe(t,e){return function(n){return e(t(n))}}s(fTe,"combineWorkspaceFeatures");uo.combineWorkspaceFeatures=fTe;function pTe(t,e){return function(n){return e(t(n))}}s(pTe,"combineLanguagesFeatures");uo.combineLanguagesFeatures=pTe;function mTe(t,e){return function(n){return e(t(n))}}s(mTe,"combineNotebooksFeatures");uo.combineNotebooksFeatures=mTe;function M0t(t,e){function n(i,o,a){return i&&o?a(i,o):i||o}return s(n,"combine"),{__brand:"features",console:n(t.console,e.console,aTe),tracer:n(t.tracer,e.tracer,cTe),telemetry:n(t.telemetry,e.telemetry,lTe),client:n(t.client,e.client,uTe),window:n(t.window,e.window,dTe),workspace:n(t.workspace,e.workspace,fTe),languages:n(t.languages,e.languages,pTe),notebooks:n(t.notebooks,e.notebooks,mTe)}}s(M0t,"combineFeatures");uo.combineFeatures=M0t;function Q0t(t,e,n){let r=n&&n.console?new(n.console(BQ)):new BQ,i=t(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(NQ)):new NQ,a=n&&n.telemetry?new(n.telemetry(LQ)):new LQ,l=n&&n.client?new(n.client(PQ)):new PQ,c=n&&n.window?new(n.window(tTe)):new tTe,u=n&&n.workspace?new(n.workspace(iTe)):new iTe,d=n&&n.languages?new(n.languages(oTe)):new oTe,p=n&&n.notebooks?new(n.notebooks(sTe)):new sTe,m=[r,o,a,l,c,u,d,p];function h(E){return E instanceof Promise?E:Of.thenable(E)?new Promise((_,k)=>{E.then(D=>_(D),D=>k(D))}):Promise.resolve(E)}s(h,"asPromise");let g,y,v,b={listen:s(()=>i.listen(),"listen"),sendRequest:s((E,..._)=>i.sendRequest(Of.string(E)?E:E.method,..._),"sendRequest"),onRequest:s((E,_)=>i.onRequest(E,_),"onRequest"),sendNotification:s((E,_)=>{let k=Of.string(E)?E:E.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((E,_)=>i.onNotification(E,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(E=>(y=E,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(E=>i.onNotification($t.InitializedNotification.type,E),"onInitialized"),onShutdown:s(E=>(g=E,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(E=>(v=E,{dispose:s(()=>{v=void 0},"dispose")}),"onExit"),get console(){return r},get telemetry(){return a},get tracer(){return o},get client(){return l},get window(){return c},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(E=>i.onNotification($t.DidChangeConfigurationNotification.type,E),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(E=>i.onNotification($t.DidChangeWatchedFilesNotification.type,E),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(E=>i.onNotification($t.DidOpenTextDocumentNotification.type,E),"onDidOpenTextDocument"),onDidChangeTextDocument:s(E=>i.onNotification($t.DidChangeTextDocumentNotification.type,E),"onDidChangeTextDocument"),onDidCloseTextDocument:s(E=>i.onNotification($t.DidCloseTextDocumentNotification.type,E),"onDidCloseTextDocument"),onWillSaveTextDocument:s(E=>i.onNotification($t.WillSaveTextDocumentNotification.type,E),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(E=>i.onRequest($t.WillSaveTextDocumentWaitUntilRequest.type,E),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(E=>i.onNotification($t.DidSaveTextDocumentNotification.type,E),"onDidSaveTextDocument"),sendDiagnostics:s(E=>i.sendNotification($t.PublishDiagnosticsNotification.type,E),"sendDiagnostics"),onHover:s(E=>i.onRequest($t.HoverRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(E=>i.onRequest($t.CompletionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(E=>i.onRequest($t.CompletionResolveRequest.type,E),"onCompletionResolve"),onSignatureHelp:s(E=>i.onRequest($t.SignatureHelpRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(E=>i.onRequest($t.DeclarationRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(E=>i.onRequest($t.DefinitionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(E=>i.onRequest($t.TypeDefinitionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(E=>i.onRequest($t.ImplementationRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(E=>i.onRequest($t.ReferencesRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(E=>i.onRequest($t.DocumentHighlightRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(E=>i.onRequest($t.DocumentSymbolRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(E=>i.onRequest($t.WorkspaceSymbolRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(E=>i.onRequest($t.WorkspaceSymbolResolveRequest.type,E),"onWorkspaceSymbolResolve"),onCodeAction:s(E=>i.onRequest($t.CodeActionRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(E=>i.onRequest($t.CodeActionResolveRequest.type,(_,k)=>E(_,k)),"onCodeActionResolve"),onCodeLens:s(E=>i.onRequest($t.CodeLensRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(E=>i.onRequest($t.CodeLensResolveRequest.type,(_,k)=>E(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(E=>i.onRequest($t.DocumentFormattingRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(E=>i.onRequest($t.DocumentRangeFormattingRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(E=>i.onRequest($t.DocumentOnTypeFormattingRequest.type,(_,k)=>E(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(E=>i.onRequest($t.RenameRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(E=>i.onRequest($t.PrepareRenameRequest.type,(_,k)=>E(_,k)),"onPrepareRename"),onDocumentLinks:s(E=>i.onRequest($t.DocumentLinkRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(E=>i.onRequest($t.DocumentLinkResolveRequest.type,(_,k)=>E(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(E=>i.onRequest($t.DocumentColorRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(E=>i.onRequest($t.ColorPresentationRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(E=>i.onRequest($t.FoldingRangeRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(E=>i.onRequest($t.SelectionRangeRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),(0,Kr.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(E=>i.onRequest($t.ExecuteCommandRequest.type,(_,k)=>E(_,k,(0,Kr.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let E of m)E.attach(b);return i.onRequest($t.InitializeRequest.type,E=>{e.initialize(E),Of.string(E.trace)&&(o.trace=$t.Trace.fromString(E.trace));for(let _ of m)_.initialize(E.capabilities);if(y){let _=y(E,new $t.CancellationTokenSource().token,(0,Kr.attachWorkDone)(i,E),void 0);return h(_).then(k=>{if(k instanceof $t.ResponseError)return k;let D=k;D||(D={capabilities:{}});let N=D.capabilities;N||(N={},D.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=Of.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None:!Of.number(N.textDocumentSync)&&!Of.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=Of.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None);for(let Q of m)Q.fillServerCapabilities(N);return D})}else{let _={capabilities:{textDocumentSync:$t.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($t.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $t.CancellationTokenSource().token)}),i.onNotification($t.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($t.SetTraceNotification.type,E=>{o.trace=$t.Trace.fromString(E.value)}),b}s(Q0t,"createConnection");uo.createConnection=Q0t});var hTe=G(gd=>{"use strict";f();Object.defineProperty(gd,"__esModule",{value:!0});gd.resolveModulePath=gd.FileSystem=gd.resolveGlobalYarnPath=gd.resolveGlobalNodePath=gd.resolve=gd.uriToFilePath=void 0;var O0t=require("url"),Cm=require("path"),$te=require("fs"),Jte=require("child_process");function U0t(t){let e=O0t.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],a=n[1];o.length===0&&a.length>1&&a[1]===":"&&n.shift()}return Cm.normalize(n.join("/"))}s(U0t,"uriToFilePath");gd.uriToFilePath=U0t;function zte(){return process.platform==="win32"}s(zte,"isWindows");function QQ(t,e,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(d=>u[d]=c[d]),e&&$te.existsSync(e)&&(u[i]?u[i]=e+Cm.delimiter+u[i]:u[i]=e,r&&r(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,Jte.fork)("",[],{cwd:n,env:u,execArgv:["-e",o]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{l(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):l(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){l(d)}})}s(QQ,"resolve");gd.resolve=QQ;function Yte(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};zte()&&(e="npm.cmd",r.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,Jte.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?zte()?Cm.join(a,"node_modules"):Cm.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(Yte,"resolveGlobalNodePath");gd.resolveGlobalNodePath=Yte;function q0t(t){let e="yarn",n={encoding:"utf8"};zte()&&(e="yarn.cmd",n.shell=!0);let r=s(()=>{},"handler");try{process.on("SIGPIPE",r);let i=(0,Jte.spawnSync)(e,["global","dir","--json"],n),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let l of a)try{let c=JSON.parse(l);if(c.type==="log")return Cm.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}s(q0t,"resolveGlobalYarnPath");gd.resolveGlobalYarnPath=q0t;var Kte;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!$te.existsSync(__filename.toUpperCase())||!$te.existsSync(__filename.toLowerCase())),e}s(n,"isCaseSensitive"),t.isCaseSensitive=n;function r(i,o){return n()?Cm.normalize(o).indexOf(Cm.normalize(i))===0:Cm.normalize(o).toLowerCase().indexOf(Cm.normalize(i).toLowerCase())===0}s(r,"isParent"),t.isParent=r})(Kte||(gd.FileSystem=Kte={}));function W0t(t,e,n,r){return n?(Cm.isAbsolute(n)||(n=Cm.join(t,n)),QQ(e,n,n,r).then(i=>Kte.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>QQ(e,Yte(r),t,r))):QQ(e,Yte(r),t,r)}s(W0t,"resolveModulePath");gd.resolveModulePath=W0t});var Xte=G((kwn,gTe)=>{"use strict";f();gTe.exports=ii()});var ATe=G(OQ=>{"use strict";f();Object.defineProperty(OQ,"__esModule",{value:!0});OQ.InlineCompletionFeature=void 0;var G0t=ii(),H0t=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(G0t.InlineCompletionRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineCompletionFeature");OQ.InlineCompletionFeature=H0t});var xTe=G(Gc=>{"use strict";f();var j0t=Gc&&Gc.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),CTe=Gc&&Gc.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&j0t(e,t,n)};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.ProposedFeatures=Gc.NotebookDocuments=Gc.TextDocuments=Gc.SemanticTokensBuilder=void 0;var V0t=Nte();Object.defineProperty(Gc,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return V0t.SemanticTokensBuilder},"get")});var $0t=ATe();CTe(ii(),Gc);var z0t=Qte();Object.defineProperty(Gc,"TextDocuments",{enumerable:!0,get:s(function(){return z0t.TextDocuments},"get")});var Y0t=Ute();Object.defineProperty(Gc,"NotebookDocuments",{enumerable:!0,get:s(function(){return Y0t.NotebookDocuments},"get")});CTe(Vte(),Gc);var yTe;(function(t){t.all={__brand:"features",languages:$0t.InlineCompletionFeature}})(yTe||(Gc.ProposedFeatures=yTe={}))});var Ta=G(Uf=>{"use strict";f();var K0t=Uf&&Uf.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ITe=Uf&&Uf.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&K0t(e,t,n)};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.createConnection=Uf.Files=void 0;var vTe=require("node:util"),Zte=dQ(),J0t=Vte(),A8=hTe(),wI=Xte();ITe(Xte(),Uf);ITe(xTe(),Uf);var bTe;(function(t){t.uriToFilePath=A8.uriToFilePath,t.resolveGlobalNodePath=A8.resolveGlobalNodePath,t.resolveGlobalYarnPath=A8.resolveGlobalYarnPath,t.resolve=A8.resolve,t.resolveModulePath=A8.resolveModulePath})(bTe||(Uf.Files=bTe={}));var ETe;function UQ(){if(ETe!==void 0)try{ETe.end()}catch{}}s(UQ,"endProtocolConnection");var DS=!1,TTe;function X0t(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(TTe=setInterval(()=>{try{process.kill(r,0)}catch{UQ(),process.exit(DS?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}s(X0t,"setupExitTimer");X0t();var Z0t={initialize:s(t=>{let e=t.processId;Zte.number(e)&&TTe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(DS?0:1)}},3e3)},"initialize"),get shutdownReceived(){return DS},set shutdownReceived(t){DS=t},exit:s(t=>{UQ(),process.exit(t)},"exit")};function eft(t,e,n,r){let i,o,a,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),wI.ConnectionStrategy.is(t)||wI.ConnectionOptions.is(t)?l=t:(o=t,a=e,l=n),tft(o,a,l,i)}s(eft,"createConnection");Uf.createConnection=eft;function tft(t,e,n,r){let i=!1;if(!t&&!e&&process.argv.length>2){let c,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new wI.IPCMessageReader(process),e=new wI.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){c=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){c=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(c){let p=(0,wI.createServerSocketTransport)(c);t=p[0],e=p[1]}else if(u){let p=(0,wI.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Zte.func(t.read)&&Zte.func(t.on)){let c=t;c.on("end",()=>{UQ(),process.exit(DS?0:1)}),c.on("close",()=>{UQ(),process.exit(DS?0:1)})}let l=s(c=>{let u=(0,wI.createProtocolConnection)(t,e,c,n);return i&&nft(c),u},"connectionFactory");return(0,J0t.createConnection)(l,Z0t,r)}s(tft,"_createConnection");function nft(t){function e(r){return r.map(i=>typeof i=="string"?i:(0,vTe.inspect)(i)).join(" ")}s(e,"serialize");let n=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...l]=o;t.error(`Assertion failed: ${a} ${e(l)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=n.get(o)??0;a+=1,n.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?n.clear():n.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,vTe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(nft,"patchConsole")});var xm=G((Wwn,wTe)=>{"use strict";f();wTe.exports=Ta()});var ySe=G((ZRn,ASe)=>{"use strict";f();ASe.exports=hSe;function hSe(t,e,n){t instanceof RegExp&&(t=mSe(t,n)),e instanceof RegExp&&(e=mSe(e,n));var r=gSe(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}s(hSe,"balanced");function mSe(t,e){var n=e.match(t);return n?n[0]:null}s(mSe,"maybeMatch");hSe.range=gSe;function gSe(t,e,n){var r,i,o,a,l,c=n.indexOf(t),u=n.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(r=[],o=n.length;d>=0&&!l;)d==c?(r.push(d),c=n.indexOf(t,d+1)):r.length==1?l=[r.pop(),u]:(i=r.pop(),i<o&&(o=i,a=u),u=n.indexOf(e,d+1)),d=c<u&&c>=0?c:u;r.length&&(l=[o,a])}return l}s(gSe,"range")});var wSe=G((n3n,TSe)=>{f();var CSe=ySe();TSe.exports=$ft;var xSe="\0SLASH"+Math.random()+"\0",vSe="\0OPEN"+Math.random()+"\0",tre="\0CLOSE"+Math.random()+"\0",bSe="\0COMMA"+Math.random()+"\0",ESe="\0PERIOD"+Math.random()+"\0";function ere(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(ere,"numeric");function jft(t){return t.split("\\\\").join(xSe).split("\\{").join(vSe).split("\\}").join(tre).split("\\,").join(bSe).split("\\.").join(ESe)}s(jft,"escapeBraces");function Vft(t){return t.split(xSe).join("\\").split(vSe).join("{").split(tre).join("}").split(bSe).join(",").split(ESe).join(".")}s(Vft,"unescapeBraces");function ISe(t){if(!t)return[""];var e=[],n=CSe("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var l=ISe(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}s(ISe,"parseCommaParts");function $ft(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),k8(jft(t),!0).map(Vft)):[]}s($ft,"expandTop");function zft(t){return"{"+t+"}"}s(zft,"embrace");function Yft(t){return/^-?0\d/.test(t)}s(Yft,"isPadded");function Kft(t,e){return t<=e}s(Kft,"lte");function Jft(t,e){return t>=e}s(Jft,"gte");function k8(t,e){var n=[],r=CSe("{","}",t);if(!r)return[t];var i=r.pre,o=r.post.length?k8(r.post,!1):[""];if(/\$$/.test(r.pre))for(var a=0;a<o.length;a++){var l=i+"{"+r.body+"}"+o[a];n.push(l)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),d=c||u,p=r.body.indexOf(",")>=0;if(!d&&!p)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+tre+r.post,k8(t)):[t];var m;if(d)m=r.body.split(/\.\./);else if(m=ISe(r.body),m.length===1&&(m=k8(m[0],!1).map(zft),m.length===1))return o.map(function(te){return r.pre+m[0]+te});var h;if(d){var g=ere(m[0]),y=ere(m[1]),v=Math.max(m[0].length,m[1].length),b=m.length==3?Math.abs(ere(m[2])):1,E=Kft,_=y<g;_&&(b*=-1,E=Jft);var k=m.some(Yft);h=[];for(var D=g;E(D,y);D+=b){var N;if(u)N=String.fromCharCode(D),N==="\\"&&(N="");else if(N=String(D),k){var Q=v-N.length;if(Q>0){var Z=new Array(Q+1).join("0");D<0?N="-"+Z+N.slice(1):N=Z+N}}h.push(N)}}else{h=[];for(var me=0;me<m.length;me++)h.push.apply(h,k8(m[me],!1))}for(var me=0;me<h.length;me++)for(var a=0;a<o.length;a++){var l=i+h[me]+o[a];(!e||d||l)&&n.push(l)}}return n}s(k8,"expand")});var Fs=G((HVn,YRe)=>{f();YRe.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Ao=G((VVn,KRe)=>{"use strict";f();var Ys=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Tie=class extends Ys{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},wie=class extends Ys{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},_ie=class extends Ys{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Sie=class extends Ys{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Rie=class extends Ys{static{s(this,"ResponseStatusCodeError")}constructor(e,n,r,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=n,this.statusCode=n,this.headers=r}},kie=class extends Ys{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Bie=class extends Ys{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},$U=class extends Ys{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},Die=class extends $U{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Pie=class extends Ys{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Nie=class extends Ys{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Lie=class extends Ys{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Fie=class extends Ys{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Mie=class extends Ys{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Qie=class extends Ys{static{s(this,"SocketError")}constructor(e,n){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=n}},Oie=class extends Ys{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Uie=class extends Ys{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},qie=class extends Error{static{s(this,"HTTPParserError")}constructor(e,n,r){super(e),this.name="HTTPParserError",this.code=n?`HPE_${n}`:void 0,this.data=r?r.toString():void 0}},Wie=class extends Ys{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Gie=class extends Ys{static{s(this,"RequestRetryError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=n,this.data=i,this.headers=r}},Hie=class extends Ys{static{s(this,"ResponseError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=n,this.data=i,this.headers=r}},jie=class extends Ys{static{s(this,"SecureProxyConnectionError")}constructor(e,n,r){super(n,{cause:e,...r??{}}),this.name="SecureProxyConnectionError",this.message=n||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};KRe.exports={AbortError:$U,HTTPParserError:qie,UndiciError:Ys,HeadersTimeoutError:wie,HeadersOverflowError:_ie,BodyTimeoutError:Sie,RequestContentLengthMismatchError:Nie,ConnectTimeoutError:Tie,ResponseStatusCodeError:Rie,InvalidArgumentError:kie,InvalidReturnValueError:Bie,RequestAbortedError:Die,ClientDestroyedError:Fie,ClientClosedError:Mie,InformationalError:Pie,SocketError:Qie,NotSupportedError:Oie,ResponseContentLengthMismatchError:Lie,BalancedPoolMissingUpstreamError:Uie,ResponseExceededMaxSizeError:Wie,RequestRetryError:Gie,ResponseError:Hie,SecureProxyConnectionError:jie}});var YU=G((YVn,JRe)=>{"use strict";f();var zU={},Vie=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<Vie.length;++t){let e=Vie[t],n=e.toLowerCase();zU[e]=zU[n]=n}Object.setPrototypeOf(zU,null);JRe.exports={wellknownHeaderNames:Vie,headerNameLowerCasedRecord:zU}});var t3e=G((JVn,e3e)=>{"use strict";f();var{wellknownHeaderNames:XRe,headerNameLowerCasedRecord:Kgt}=YU(),$ie=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,n,r){if(r===void 0||r>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(r))>127)throw new TypeError("key must be ascii string");e.length!==++r?this.middle=new t(e,n,r):this.value=n}add(e,n){let r=e.length;if(r===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(r===++i){o.value=n;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,n,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,n,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,n,i);break}}}search(e){let n=e.length,r=0,i=this;for(;i!==null&&r<n;){let o=e[r];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(n===++r)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},KU=class{static{s(this,"TernarySearchTree")}node=null;insert(e,n){this.node===null?this.node=new $ie(e,n,0):this.node.add(e,n)}lookup(e){return this.node?.search(e)?.value??null}},ZRe=new KU;for(let t=0;t<XRe.length;++t){let e=Kgt[XRe[t]];ZRe.insert(e,e)}e3e.exports={TernarySearchTree:KU,tree:ZRe}});var yi=G((e$n,A3e)=>{"use strict";f();var iD=require("node:assert"),{kDestroyed:r3e,kBodyUsed:E5,kListeners:zie,kBody:n3e}=Fs(),{IncomingMessage:Jgt}=require("node:http"),ZU=require("node:stream"),Xgt=require("node:net"),{Blob:Zgt}=require("node:buffer"),eAt=require("node:util"),{stringify:tAt}=require("node:querystring"),{EventEmitter:nAt}=require("node:events"),{InvalidArgumentError:Ol}=Ao(),{headerNameLowerCasedRecord:rAt}=YU(),{tree:i3e}=t3e(),[iAt,oAt]=process.versions.node.split(".").map(t=>Number(t)),XU=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[n3e]=e,this[E5]=!1}async*[Symbol.asyncIterator](){iD(!this[E5],"disturbed"),this[E5]=!0,yield*this[n3e]}};function sAt(t){return eq(t)?(c3e(t)===0&&t.on("data",function(){iD(!1)}),typeof t.readableDidRead!="boolean"&&(t[E5]=!1,nAt.prototype.on.call(t,"data",function(){this[E5]=!0})),t):t&&typeof t.pipeTo=="function"?new XU(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&l3e(t)?new XU(t):t}s(sAt,"wrapRequestBody");function aAt(){}s(aAt,"nop");function eq(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(eq,"isStream");function o3e(t){if(t===null)return!1;if(t instanceof Zgt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(o3e,"isBlobLike");function lAt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let n=tAt(e);return n&&(t+="?"+n),t}s(lAt,"buildURL");function s3e(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(s3e,"isValidPort");function JU(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(JU,"isHttpOrHttpsPrefixed");function a3e(t){if(typeof t=="string"){if(t=new URL(t),!JU(t.origin||t.protocol))throw new Ol("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Ol("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&s3e(t.port)===!1)throw new Ol("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Ol("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Ol("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Ol("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Ol("Invalid URL origin: the origin must be a string or null/undefined.");if(!JU(t.origin||t.protocol))throw new Ol("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,n=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,r=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return n[n.length-1]==="/"&&(n=n.slice(0,n.length-1)),r&&r[0]!=="/"&&(r=`/${r}`),new URL(`${n}${r}`)}if(!JU(t.origin||t.protocol))throw new Ol("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(a3e,"parseURL");function cAt(t){if(t=a3e(t),t.pathname!=="/"||t.search||t.hash)throw new Ol("invalid url");return t}s(cAt,"parseOrigin");function uAt(t){if(t[0]==="["){let n=t.indexOf("]");return iD(n!==-1),t.substring(1,n)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(uAt,"getHostname");function dAt(t){if(!t)return null;iD(typeof t=="string");let e=uAt(t);return Xgt.isIP(e)?"":e}s(dAt,"getServerName");function fAt(t){return JSON.parse(JSON.stringify(t))}s(fAt,"deepClone");function pAt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(pAt,"isAsyncIterable");function l3e(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(l3e,"isIterable");function c3e(t){if(t==null)return 0;if(eq(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(o3e(t))return t.size!=null?t.size:null;if(f3e(t))return t.byteLength}return null}s(c3e,"bodyLength");function u3e(t){return t&&!!(t.destroyed||t[r3e]||ZU.isDestroyed?.(t))}s(u3e,"isDestroyed");function mAt(t,e){t==null||!eq(t)||u3e(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===Jgt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[r3e]=!0))}s(mAt,"destroy");var hAt=/timeout=(\d+)/;function gAt(t){let e=t.toString().match(hAt);return e?parseInt(e[1],10)*1e3:null}s(gAt,"parseKeepAliveTimeout");function d3e(t){return typeof t=="string"?rAt[t]??t.toLowerCase():i3e.lookup(t)??t.toString("latin1").toLowerCase()}s(d3e,"headerNameToString");function AAt(t){return i3e.lookup(t)??t.toString("latin1").toLowerCase()}s(AAt,"bufferToLowerCasedHeaderName");function yAt(t,e){e===void 0&&(e={});for(let n=0;n<t.length;n+=2){let r=d3e(t[n]),i=e[r];if(i)typeof i=="string"&&(i=[i],e[r]=i),i.push(t[n+1].toString("utf8"));else{let o=t[n+1];typeof o=="string"?e[r]=o:e[r]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(yAt,"parseHeaders");function CAt(t){let e=t.length,n=new Array(e),r=!1,i=-1,o,a,l=0;for(let c=0;c<t.length;c+=2)o=t[c],a=t[c+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),l=o.length,l===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?r=!0:l===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=c+1),n[c]=o,n[c+1]=a;return r&&i!==-1&&(n[i]=Buffer.from(n[i]).toString("latin1")),n}s(CAt,"parseRawHeaders");function f3e(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(f3e,"isBuffer");function xAt(t,e,n){if(!t||typeof t!="object")throw new Ol("handler must be an object");if(typeof t.onConnect!="function")throw new Ol("invalid onConnect method");if(typeof t.onError!="function")throw new Ol("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Ol("invalid onBodySent method");if(n||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Ol("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Ol("invalid onHeaders method");if(typeof t.onData!="function")throw new Ol("invalid onData method");if(typeof t.onComplete!="function")throw new Ol("invalid onComplete method")}}s(xAt,"validateHandler");function vAt(t){return!!(t&&(ZU.isDisturbed(t)||t[E5]))}s(vAt,"isDisturbed");function bAt(t){return!!(t&&ZU.isErrored(t))}s(bAt,"isErrored");function EAt(t){return!!(t&&ZU.isReadable(t))}s(EAt,"isReadable");function IAt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(IAt,"getSocketInfo");function TAt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(n){let{done:r,value:i}=await e.next();if(r)queueMicrotask(()=>{n.close(),n.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&n.enqueue(new Uint8Array(o))}return n.desiredSize>0},async cancel(n){await e.return()},type:"bytes"})}s(TAt,"ReadableStreamFrom");function wAt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(wAt,"isFormDataLike");function _At(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(_At,"addAbortListener");var SAt=typeof String.prototype.toWellFormed=="function",RAt=typeof String.prototype.isWellFormed=="function";function p3e(t){return SAt?`${t}`.toWellFormed():eAt.toUSVString(t)}s(p3e,"toUSVString");function kAt(t){return RAt?`${t}`.isWellFormed():p3e(t)===`${t}`}s(kAt,"isUSVString");function m3e(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(m3e,"isTokenCharCode");function BAt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!m3e(t.charCodeAt(e)))return!1;return!0}s(BAt,"isValidHTTPToken");var DAt=/[^\t\x20-\x7e\x80-\xff]/;function PAt(t){return!DAt.test(t)}s(PAt,"isValidHeaderValue");function NAt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(NAt,"parseRangeHeader");function LAt(t,e,n){return(t[zie]??=[]).push([e,n]),t.on(e,n),t}s(LAt,"addListener");function FAt(t){for(let[e,n]of t[zie]??[])t.removeListener(e,n);t[zie]=null}s(FAt,"removeAllListeners");function MAt(t,e,n){try{e.onError(n),iD(e.aborted)}catch(r){t.emit("error",r)}}s(MAt,"errorRequest");var h3e=Object.create(null);h3e.enumerable=!0;var Yie={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},g3e={...Yie,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(Yie,null);Object.setPrototypeOf(g3e,null);A3e.exports={kEnumerableProperty:h3e,nop:aAt,isDisturbed:vAt,isErrored:bAt,isReadable:EAt,toUSVString:p3e,isUSVString:kAt,isBlobLike:o3e,parseOrigin:cAt,parseURL:a3e,getServerName:dAt,isStream:eq,isIterable:l3e,isAsyncIterable:pAt,isDestroyed:u3e,headerNameToString:d3e,bufferToLowerCasedHeaderName:AAt,addListener:LAt,removeAllListeners:FAt,errorRequest:MAt,parseRawHeaders:CAt,parseHeaders:yAt,parseKeepAliveTimeout:gAt,destroy:mAt,bodyLength:c3e,deepClone:fAt,ReadableStreamFrom:TAt,isBuffer:f3e,validateHandler:xAt,getSocketInfo:IAt,isFormDataLike:wAt,buildURL:lAt,addAbortListener:_At,isValidHTTPToken:BAt,isValidHeaderValue:PAt,isTokenCharCode:m3e,parseRangeHeader:NAt,normalizedMethodRecordsBase:Yie,normalizedMethodRecords:g3e,isValidPort:s3e,isHttpOrHttpsPrefixed:JU,nodeMajor:iAt,nodeMinor:oAt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:sAt}});var I5=G((r$n,C3e)=>{"use strict";f();var bo=require("node:diagnostics_channel"),Jie=require("node:util"),tq=Jie.debuglog("undici"),Kie=Jie.debuglog("fetch"),a2=Jie.debuglog("websocket"),y3e=!1,QAt={beforeConnect:bo.channel("undici:client:beforeConnect"),connected:bo.channel("undici:client:connected"),connectError:bo.channel("undici:client:connectError"),sendHeaders:bo.channel("undici:client:sendHeaders"),create:bo.channel("undici:request:create"),bodySent:bo.channel("undici:request:bodySent"),headers:bo.channel("undici:request:headers"),trailers:bo.channel("undici:request:trailers"),error:bo.channel("undici:request:error"),open:bo.channel("undici:websocket:open"),close:bo.channel("undici:websocket:close"),socketError:bo.channel("undici:websocket:socket_error"),ping:bo.channel("undici:websocket:ping"),pong:bo.channel("undici:websocket:pong")};if(tq.enabled||Kie.enabled){let t=Kie.enabled?Kie:tq;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,r,n,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)}),bo.channel("undici:request:headers").subscribe(e=>{let{request:{method:n,path:r,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",n,i,r,o)}),bo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("trailers received from %s %s/%s",n,i,r)}),bo.channel("undici:request:error").subscribe(e=>{let{request:{method:n,path:r,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",n,i,r,o.message)}),y3e=!0}if(a2.enabled){if(!y3e){let t=tq.enabled?tq:a2;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",r,n,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)})}bo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:n}}=t;a2("connection opened %s%s",e,n?`:${n}`:"")}),bo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:n,reason:r}=t;a2("closed connection to %s - %s %s",e.url,n,r)}),bo.channel("undici:websocket:socket_error").subscribe(t=>{a2("connection errored - %s",t.message)}),bo.channel("undici:websocket:ping").subscribe(t=>{a2("ping received")}),bo.channel("undici:websocket:pong").subscribe(t=>{a2("pong received")})}C3e.exports={channels:QAt}});var I3e=G((o$n,E3e)=>{"use strict";f();var{InvalidArgumentError:Ks,NotSupportedError:OAt}=Ao(),H1=require("node:assert"),{isValidHTTPToken:b3e,isValidHeaderValue:x3e,isStream:UAt,destroy:qAt,isBuffer:WAt,isFormDataLike:GAt,isIterable:HAt,isBlobLike:jAt,buildURL:VAt,validateHandler:$At,getServerName:zAt,normalizedMethodRecords:YAt}=yi(),{channels:wg}=I5(),{headerNameLowerCasedRecord:v3e}=YU(),KAt=/[^\u0021-\u00ff]/,ep=Symbol("handler"),Xie=class{static{s(this,"Request")}constructor(e,{path:n,method:r,body:i,headers:o,query:a,idempotent:l,blocking:c,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},v){if(typeof n!="string")throw new Ks("path must be a string");if(n[0]!=="/"&&!(n.startsWith("http://")||n.startsWith("https://"))&&r!=="CONNECT")throw new Ks("path must be an absolute URL or start with a slash");if(KAt.test(n))throw new Ks("invalid request path");if(typeof r!="string")throw new Ks("method must be a string");if(YAt[r]===void 0&&!b3e(r))throw new Ks("invalid request method");if(u&&typeof u!="string")throw new Ks("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new Ks("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new Ks("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new Ks("invalid reset");if(g!=null&&typeof g!="boolean")throw new Ks("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=r,this.abort=null,i==null)this.body=null;else if(UAt(i)){this.body=i;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=s(function(){qAt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(WAt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(GAt(i)||HAt(i)||jAt(i))this.body=i;else throw new Ks("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?VAt(n,a):n,this.origin=e,this.idempotent=l??(r==="HEAD"||r==="GET"),this.blocking=c??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new Ks("headers array must be even");for(let b=0;b<o.length;b+=2)nq(this,o[b],o[b+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let b of o){if(!Array.isArray(b)||b.length!==2)throw new Ks("headers must be in key-value pair format");nq(this,b[0],b[1])}else{let b=Object.keys(o);for(let E=0;E<b.length;++E)nq(this,b[E],o[b[E]])}else if(o!=null)throw new Ks("headers must be an object or an array");$At(v,r,u),this.servername=y||zAt(this.host),this[ep]=v,wg.create.hasSubscribers&&wg.create.publish({request:this})}onBodySent(e){if(this[ep].onBodySent)try{return this[ep].onBodySent(e)}catch(n){this.abort(n)}}onRequestSent(){if(wg.bodySent.hasSubscribers&&wg.bodySent.publish({request:this}),this[ep].onRequestSent)try{return this[ep].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(H1(!this.aborted),H1(!this.completed),this.error)e(this.error);else return this.abort=e,this[ep].onConnect(e)}onResponseStarted(){return this[ep].onResponseStarted?.()}onHeaders(e,n,r,i){H1(!this.aborted),H1(!this.completed),wg.headers.hasSubscribers&&wg.headers.publish({request:this,response:{statusCode:e,headers:n,statusText:i}});try{return this[ep].onHeaders(e,n,r,i)}catch(o){this.abort(o)}}onData(e){H1(!this.aborted),H1(!this.completed);try{return this[ep].onData(e)}catch(n){return this.abort(n),!1}}onUpgrade(e,n,r){return H1(!this.aborted),H1(!this.completed),this[ep].onUpgrade(e,n,r)}onComplete(e){this.onFinally(),H1(!this.aborted),this.completed=!0,wg.trailers.hasSubscribers&&wg.trailers.publish({request:this,trailers:e});try{return this[ep].onComplete(e)}catch(n){this.onError(n)}}onError(e){if(this.onFinally(),wg.error.hasSubscribers&&wg.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[ep].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,n){return nq(this,e,n),this}};function nq(t,e,n){if(n&&typeof n=="object"&&!Array.isArray(n))throw new Ks(`invalid ${e} header`);if(n===void 0)return;let r=v3e[e];if(r===void 0&&(r=e.toLowerCase(),v3e[r]===void 0&&!b3e(r)))throw new Ks("invalid header key");if(Array.isArray(n)){let i=[];for(let o=0;o<n.length;o++)if(typeof n[o]=="string"){if(!x3e(n[o]))throw new Ks(`invalid ${e} header`);i.push(n[o])}else if(n[o]===null)i.push("");else{if(typeof n[o]=="object")throw new Ks(`invalid ${e} header`);i.push(`${n[o]}`)}n=i}else if(typeof n=="string"){if(!x3e(n))throw new Ks(`invalid ${e} header`)}else n===null?n="":n=`${n}`;if(t.host===null&&r==="host"){if(typeof n!="string")throw new Ks("invalid host header");t.host=n}else if(t.contentLength===null&&r==="content-length"){if(t.contentLength=parseInt(n,10),!Number.isFinite(t.contentLength))throw new Ks("invalid content-length header")}else if(t.contentType===null&&r==="content-type")t.contentType=n,t.headers.push(e,n);else{if(r==="transfer-encoding"||r==="keep-alive"||r==="upgrade")throw new Ks(`invalid ${r} header`);if(r==="connection"){let i=typeof n=="string"?n.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new Ks("invalid connection header");i==="close"&&(t.reset=!0)}else{if(r==="expect")throw new OAt("expect header not supported");t.headers.push(e,n)}}}s(nq,"processHeader");E3e.exports=Xie});var oD=G((l$n,T3e)=>{"use strict";f();var JAt=require("node:events"),rq=class extends JAt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let n=Array.isArray(e[0])?e[0]:e,r=this.dispatch.bind(this);for(let i of n)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(r=i(r),r==null||typeof r!="function"||r.length!==2)throw new TypeError("invalid interceptor")}return new Zie(this,r)}},Zie=class extends rq{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,n){super(),this.#e=e,this.#t=n}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};T3e.exports=rq});var S5=G((d$n,w3e)=>{"use strict";f();var XAt=oD(),{ClientDestroyedError:eoe,ClientClosedError:ZAt,InvalidArgumentError:T5}=Ao(),{kDestroy:e1t,kClose:t1t,kClosed:sD,kDestroyed:w5,kDispatch:toe,kInterceptors:l2}=Fs(),j1=Symbol("onDestroyed"),_5=Symbol("onClosed"),iq=Symbol("Intercepted Dispatch"),noe=class extends XAt{static{s(this,"DispatcherBase")}constructor(){super(),this[w5]=!1,this[j1]=null,this[sD]=!1,this[_5]=[]}get destroyed(){return this[w5]}get closed(){return this[sD]}get interceptors(){return this[l2]}set interceptors(e){if(e){for(let n=e.length-1;n>=0;n--)if(typeof this[l2][n]!="function")throw new T5("interceptor must be an function")}this[l2]=e}close(e){if(e===void 0)return new Promise((r,i)=>{this.close((o,a)=>o?i(o):r(a))});if(typeof e!="function")throw new T5("invalid callback");if(this[w5]){queueMicrotask(()=>e(new eoe,null));return}if(this[sD]){this[_5]?this[_5].push(e):queueMicrotask(()=>e(null,null));return}this[sD]=!0,this[_5].push(e);let n=s(()=>{let r=this[_5];this[_5]=null;for(let i=0;i<r.length;i++)r[i](null,null)},"onClosed");this[t1t]().then(()=>this.destroy()).then(()=>{queueMicrotask(n)})}destroy(e,n){if(typeof e=="function"&&(n=e,e=null),n===void 0)return new Promise((i,o)=>{this.destroy(e,(a,l)=>a?o(a):i(l))});if(typeof n!="function")throw new T5("invalid callback");if(this[w5]){this[j1]?this[j1].push(n):queueMicrotask(()=>n(null,null));return}e||(e=new eoe),this[w5]=!0,this[j1]=this[j1]||[],this[j1].push(n);let r=s(()=>{let i=this[j1];this[j1]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[e1t](e).then(()=>{queueMicrotask(r)})}[iq](e,n){if(!this[l2]||this[l2].length===0)return this[iq]=this[toe],this[toe](e,n);let r=this[toe].bind(this);for(let i=this[l2].length-1;i>=0;i--)r=this[l2][i](r);return this[iq]=r,r(e,n)}dispatch(e,n){if(!n||typeof n!="object")throw new T5("handler must be an object");try{if(!e||typeof e!="object")throw new T5("opts must be an object.");if(this[w5]||this[j1])throw new eoe;if(this[sD])throw new ZAt;return this[iq](e,n)}catch(r){if(typeof n.onError!="function")throw new T5("invalid onError method");return n.onError(r),!1}}};w3e.exports=noe});var coe=G((m$n,k3e)=>{"use strict";f();var R5=0,roe=1e3,ioe=(roe>>1)-1,V1,ooe=Symbol("kFastTimer"),$1=[],soe=-2,aoe=-1,S3e=0,_3e=1;function loe(){R5+=ioe;let t=0,e=$1.length;for(;t<e;){let n=$1[t];n._state===S3e?(n._idleStart=R5-ioe,n._state=_3e):n._state===_3e&&R5>=n._idleStart+n._idleTimeout&&(n._state=aoe,n._idleStart=-1,n._onTimeout(n._timerArg)),n._state===aoe?(n._state=soe,--e!==0&&($1[t]=$1[e])):++t}$1.length=e,$1.length!==0&&R3e()}s(loe,"onTick");function R3e(){V1?V1.refresh():(clearTimeout(V1),V1=setTimeout(loe,ioe),V1.unref&&V1.unref())}s(R3e,"refreshTimeout");var oq=class{static{s(this,"FastTimer")}[ooe]=!0;_state=soe;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,n,r){this._onTimeout=e,this._idleTimeout=n,this._timerArg=r,this.refresh()}refresh(){this._state===soe&&$1.push(this),(!V1||$1.length===1)&&R3e(),this._state=S3e}clear(){this._state=aoe,this._idleStart=-1}};k3e.exports={setTimeout(t,e,n){return e<=roe?setTimeout(t,e,n):new oq(t,e,n)},clearTimeout(t){t[ooe]?t.clear():clearTimeout(t)},setFastTimeout(t,e,n){return new oq(t,e,n)},clearFastTimeout(t){t.clear()},now(){return R5},tick(t=0){R5+=t-roe+1,loe(),loe()},reset(){R5=0,$1.length=0,clearTimeout(V1),V1=null},kFastTimer:ooe}});var aD=G((C$n,L3e)=>{"use strict";f();var n1t=require("node:net"),B3e=require("node:assert"),N3e=yi(),{InvalidArgumentError:r1t,ConnectTimeoutError:i1t}=Ao(),sq=coe();function D3e(){}s(D3e,"noop");var uoe,doe;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?doe=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(n=>{if(this._sessionCache.size<this._maxCachedSessions)return;let r=this._sessionCache.get(n);r!==void 0&&r.deref()===void 0&&this._sessionCache.delete(n)})}get(e){let n=this._sessionCache.get(e);return n?n.deref():null}set(e,n){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(n)),this._sessionRegistry.register(n,e))}}:doe=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,n){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:r}=this._sessionCache.keys().next();this._sessionCache.delete(r)}this._sessionCache.set(e,n)}}};function o1t({allowH2:t,maxCachedSessions:e,socketPath:n,timeout:r,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new r1t("maxCachedSessions must be a positive integer or zero");let a={path:n,...o},l=new doe(e??100);return r=r??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},v){let b;if(p==="https:"){uoe||(uoe=require("node:tls")),h=h||a.servername||N3e.getServerName(d)||null;let _=h||u;B3e(_);let k=i||l.get(_)||null;m=m||443,b=uoe.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),b.on("session",function(D){l.set(_,D)})}else B3e(!y,"httpSocket can only be sent on TLS update"),m=m||80,b=n1t.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let E=s1t(new WeakRef(b),{timeout:r,hostname:u,port:m});return b.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(E),v){let k=v;v=null,k(_)}}),b},"connect")}s(o1t,"buildConnector");var s1t=process.platform==="win32"?(t,e)=>{if(!e.timeout)return D3e;let n=null,r=null,i=sq.setFastTimeout(()=>{n=setImmediate(()=>{r=setImmediate(()=>P3e(t.deref(),e))})},e.timeout);return()=>{sq.clearFastTimeout(i),clearImmediate(n),clearImmediate(r)}}:(t,e)=>{if(!e.timeout)return D3e;let n=null,r=sq.setFastTimeout(()=>{n=setImmediate(()=>{P3e(t.deref(),e)})},e.timeout);return()=>{sq.clearFastTimeout(r),clearImmediate(n)}};function P3e(t,e){if(t==null)return;let n="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?n+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:n+=` (attempted address: ${e.hostname}:${e.port},`,n+=` timeout: ${e.timeout}ms)`,N3e.destroy(t,new i1t(n))}s(P3e,"onConnectTimeout");L3e.exports=o1t});var F3e=G(aq=>{"use strict";f();Object.defineProperty(aq,"__esModule",{value:!0});aq.enumToMap=void 0;function a1t(t){let e={};return Object.keys(t).forEach(n=>{let r=t[n];typeof r=="number"&&(e[n]=r)}),e}s(a1t,"enumToMap");aq.enumToMap=a1t});var M3e=G(Ut=>{"use strict";f();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SPECIAL_HEADERS=Ut.HEADER_STATE=Ut.MINOR=Ut.MAJOR=Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS=Ut.TOKEN=Ut.STRICT_TOKEN=Ut.HEX=Ut.URL_CHAR=Ut.STRICT_URL_CHAR=Ut.USERINFO_CHARS=Ut.MARK=Ut.ALPHANUM=Ut.NUM=Ut.HEX_MAP=Ut.NUM_MAP=Ut.ALPHA=Ut.FINISH=Ut.H_METHOD_MAP=Ut.METHOD_MAP=Ut.METHODS_RTSP=Ut.METHODS_ICE=Ut.METHODS_HTTP=Ut.METHODS=Ut.LENIENT_FLAGS=Ut.FLAGS=Ut.TYPE=Ut.ERROR=void 0;var l1t=F3e(),c1t;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(c1t=Ut.ERROR||(Ut.ERROR={}));var u1t;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(u1t=Ut.TYPE||(Ut.TYPE={}));var d1t;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(d1t=Ut.FLAGS||(Ut.FLAGS={}));var f1t;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(f1t=Ut.LENIENT_FLAGS||(Ut.LENIENT_FLAGS={}));var ar;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(ar=Ut.METHODS||(Ut.METHODS={}));Ut.METHODS_HTTP=[ar.DELETE,ar.GET,ar.HEAD,ar.POST,ar.PUT,ar.CONNECT,ar.OPTIONS,ar.TRACE,ar.COPY,ar.LOCK,ar.MKCOL,ar.MOVE,ar.PROPFIND,ar.PROPPATCH,ar.SEARCH,ar.UNLOCK,ar.BIND,ar.REBIND,ar.UNBIND,ar.ACL,ar.REPORT,ar.MKACTIVITY,ar.CHECKOUT,ar.MERGE,ar["M-SEARCH"],ar.NOTIFY,ar.SUBSCRIBE,ar.UNSUBSCRIBE,ar.PATCH,ar.PURGE,ar.MKCALENDAR,ar.LINK,ar.UNLINK,ar.PRI,ar.SOURCE];Ut.METHODS_ICE=[ar.SOURCE];Ut.METHODS_RTSP=[ar.OPTIONS,ar.DESCRIBE,ar.ANNOUNCE,ar.SETUP,ar.PLAY,ar.PAUSE,ar.TEARDOWN,ar.GET_PARAMETER,ar.SET_PARAMETER,ar.REDIRECT,ar.RECORD,ar.FLUSH,ar.GET,ar.POST];Ut.METHOD_MAP=l1t.enumToMap(ar);Ut.H_METHOD_MAP={};Object.keys(Ut.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Ut.H_METHOD_MAP[t]=Ut.METHOD_MAP[t])});var p1t;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(p1t=Ut.FINISH||(Ut.FINISH={}));Ut.ALPHA=[];for(let t=65;t<=90;t++)Ut.ALPHA.push(String.fromCharCode(t)),Ut.ALPHA.push(String.fromCharCode(t+32));Ut.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Ut.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Ut.NUM=["0","1","2","3","4","5","6","7","8","9"];Ut.ALPHANUM=Ut.ALPHA.concat(Ut.NUM);Ut.MARK=["-","_",".","!","~","*","'","(",")"];Ut.USERINFO_CHARS=Ut.ALPHANUM.concat(Ut.MARK).concat(["%",";",":","&","=","+","$",","]);Ut.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Ut.ALPHANUM);Ut.URL_CHAR=Ut.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Ut.URL_CHAR.push(t);Ut.HEX=Ut.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Ut.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Ut.ALPHANUM);Ut.TOKEN=Ut.STRICT_TOKEN.concat([" "]);Ut.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Ut.HEADER_CHARS.push(t);Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS.filter(t=>t!==44);Ut.MAJOR=Ut.NUM_MAP;Ut.MINOR=Ut.MAJOR;var k5;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(k5=Ut.HEADER_STATE||(Ut.HEADER_STATE={}));Ut.SPECIAL_HEADERS={connection:k5.CONNECTION,"content-length":k5.CONTENT_LENGTH,"proxy-connection":k5.CONNECTION,"transfer-encoding":k5.TRANSFER_ENCODING,upgrade:k5.UPGRADE}});var foe=G((_$n,Q3e)=>{"use strict";f();var{Buffer:m1t}=require("node:buffer");Q3e.exports=m1t.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var U3e=G((R$n,O3e)=>{"use strict";f();var{Buffer:h1t}=require("node:buffer");O3e.exports=h1t.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var lD=G((B$n,z3e)=>{"use strict";f();var q3e=["GET","HEAD","POST"],g1t=new Set(q3e),A1t=[101,204,205,304],W3e=[301,302,303,307,308],y1t=new Set(W3e),G3e=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],C1t=new Set(G3e),H3e=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],x1t=new Set(H3e),v1t=["follow","manual","error"],j3e=["GET","HEAD","OPTIONS","TRACE"],b1t=new Set(j3e),E1t=["navigate","same-origin","no-cors","cors"],I1t=["omit","same-origin","include"],T1t=["default","no-store","reload","no-cache","force-cache","only-if-cached"],w1t=["content-encoding","content-language","content-location","content-type","content-length"],_1t=["half"],V3e=["CONNECT","TRACE","TRACK"],S1t=new Set(V3e),$3e=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],R1t=new Set($3e);z3e.exports={subresource:$3e,forbiddenMethods:V3e,requestBodyHeader:w1t,referrerPolicy:H3e,requestRedirect:v1t,requestMode:E1t,requestCredentials:I1t,requestCache:T1t,redirectStatus:W3e,corsSafeListedMethods:q3e,nullBodyStatus:A1t,safeMethods:j3e,badPorts:G3e,requestDuplex:_1t,subresourceSet:R1t,badPortsSet:C1t,redirectStatusSet:y1t,corsSafeListedMethodsSet:g1t,safeMethodsSet:b1t,forbiddenMethodsSet:S1t,referrerPolicySet:x1t}});var moe=G((P$n,Y3e)=>{"use strict";f();var poe=Symbol.for("undici.globalOrigin.1");function k1t(){return globalThis[poe]}s(k1t,"getGlobalOrigin");function B1t(t){if(t===void 0){Object.defineProperty(globalThis,poe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,poe,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(B1t,"setGlobalOrigin");Y3e.exports={getGlobalOrigin:k1t,setGlobalOrigin:B1t}});var Ed=G((F$n,nke)=>{"use strict";f();var cq=require("node:assert"),D1t=new TextEncoder,cD=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,P1t=/[\u000A\u000D\u0009\u0020]/,N1t=/[\u0009\u000A\u000C\u000D\u0020]/g,L1t=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function F1t(t){cq(t.protocol==="data:");let e=X3e(t,!0);e=e.slice(5);let n={position:0},r=B5(",",e,n),i=r.length;if(r=W1t(r,!0,!0),n.position>=e.length)return"failure";n.position++;let o=e.slice(i+1),a=Z3e(o);if(/;(\u0020){0,}base64$/i.test(r)){let c=tke(a);if(a=Q1t(c),a==="failure")return"failure";r=r.slice(0,-6),r=r.replace(/(\u0020)+$/,""),r=r.slice(0,-1)}r.startsWith(";")&&(r="text/plain"+r);let l=hoe(r);return l==="failure"&&(l=hoe("text/plain;charset=US-ASCII")),{mimeType:l,body:a}}s(F1t,"dataURLProcessor");function X3e(t,e=!1){if(!e)return t.href;let n=t.href,r=t.hash.length,i=r===0?n:n.substring(0,n.length-r);return!r&&n.endsWith("#")?i.slice(0,-1):i}s(X3e,"URLSerializer");function uq(t,e,n){let r="";for(;n.position<e.length&&t(e[n.position]);)r+=e[n.position],n.position++;return r}s(uq,"collectASequenceOfCodePoints");function B5(t,e,n){let r=e.indexOf(t,n.position),i=n.position;return r===-1?(n.position=e.length,e.slice(i)):(n.position=r,e.slice(i,n.position))}s(B5,"collectASequenceOfCodePointsFast");function Z3e(t){let e=D1t.encode(t);return M1t(e)}s(Z3e,"stringPercentDecode");function K3e(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(K3e,"isHexCharByte");function J3e(t){return t>=48&&t<=57?t-48:(t&223)-55}s(J3e,"hexByteToNumber");function M1t(t){let e=t.length,n=new Uint8Array(e),r=0;for(let i=0;i<e;++i){let o=t[i];o!==37?n[r++]=o:o===37&&!(K3e(t[i+1])&&K3e(t[i+2]))?n[r++]=37:(n[r++]=J3e(t[i+1])<<4|J3e(t[i+2]),i+=2)}return e===r?n:n.subarray(0,r)}s(M1t,"percentDecode");function hoe(t){t=lq(t,!0,!0);let e={position:0},n=B5("/",t,e);if(n.length===0||!cD.test(n)||e.position>t.length)return"failure";e.position++;let r=B5(";",t,e);if(r=lq(r,!1,!0),r.length===0||!cD.test(r))return"failure";let i=n.toLowerCase(),o=r.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,uq(u=>P1t.test(u),t,e);let l=uq(u=>u!==";"&&u!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let c=null;if(t[e.position]==='"')c=eke(t,e,!0),B5(";",t,e);else if(c=B5(";",t,e),c=lq(c,!1,!0),c.length===0)continue;l.length!==0&&cD.test(l)&&(c.length===0||L1t.test(c))&&!a.parameters.has(l)&&a.parameters.set(l,c)}return a}s(hoe,"parseMIMEType");function Q1t(t){t=t.replace(N1t,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let n=Buffer.from(t,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}s(Q1t,"forgivingBase64");function eke(t,e,n){let r=e.position,i="";for(cq(t[e.position]==='"'),e.position++;i+=uq(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{cq(o==='"');break}}return n?i:t.slice(r,e.position)}s(eke,"collectAnHTTPQuotedString");function O1t(t){cq(t!=="failure");let{parameters:e,essence:n}=t,r=n;for(let[i,o]of e.entries())r+=";",r+=i,r+="=",cD.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),r+=o;return r}s(O1t,"serializeAMimeType");function U1t(t){return t===13||t===10||t===9||t===32}s(U1t,"isHTTPWhiteSpace");function lq(t,e=!0,n=!0){return goe(t,e,n,U1t)}s(lq,"removeHTTPWhitespace");function q1t(t){return t===13||t===10||t===9||t===12||t===32}s(q1t,"isASCIIWhitespace");function W1t(t,e=!0,n=!0){return goe(t,e,n,q1t)}s(W1t,"removeASCIIWhitespace");function goe(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t.charCodeAt(i));)i++;if(n)for(;o>0&&r(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(goe,"removeChars");function tke(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let n="",r=0,i=65535;for(;r<e;)r+i>e&&(i=e-r),n+=String.fromCharCode.apply(null,t.subarray(r,r+=i));return n}s(tke,"isomorphicDecode");function G1t(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(G1t,"minimizeSupportedMimeType");nke.exports={dataURLProcessor:F1t,URLSerializer:X3e,collectASequenceOfCodePoints:uq,collectASequenceOfCodePointsFast:B5,stringPercentDecode:Z3e,parseMIMEType:hoe,collectAnHTTPQuotedString:eke,serializeAMimeType:O1t,removeChars:goe,removeHTTPWhitespace:lq,minimizeSupportedMimeType:G1t,HTTP_TOKEN_CODEPOINTS:cD,isomorphicDecode:tke}});var pc=G((O$n,rke)=>{"use strict";f();var{types:_g,inspect:H1t}=require("node:util"),{markAsUncloneable:j1t}=require("node:worker_threads"),{toUSVString:V1t}=yi(),Dt={};Dt.converters={};Dt.util={};Dt.errors={};Dt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Dt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",n=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Dt.errors.exception({header:t.prefix,message:n})};Dt.errors.invalidArgument=function(t){return Dt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Dt.brandCheck=function(t,e,n){if(n?.strict!==!1){if(!(t instanceof e)){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}};Dt.argumentLengthCheck=function({length:t},e,n){if(t<e)throw Dt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:n})};Dt.illegalConstructor=function(){throw Dt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Dt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Dt.util.markAsUncloneable=j1t||(()=>{});Dt.util.ConvertToInt=function(t,e,n,r){let i,o;e===64?(i=Math.pow(2,53)-1,n==="unsigned"?o=0:o=Math.pow(-2,53)+1):n==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),r?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Dt.errors.exception({header:"Integer conversion",message:`Could not convert ${Dt.util.Stringify(t)} to an integer.`});if(a=Dt.util.IntegerPart(a),a<o||a>i)throw Dt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&r?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Dt.util.IntegerPart(a),a=a%Math.pow(2,e),n==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Dt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Dt.util.Stringify=function(t){switch(Dt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return H1t(t);case"String":return`"${t}"`;default:return`${t}`}};Dt.sequenceConverter=function(t){return(e,n,r,i)=>{if(Dt.util.Type(e)!=="Object")throw Dt.errors.exception({header:n,message:`${r} (${Dt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],l=0;if(o===void 0||typeof o.next!="function")throw Dt.errors.exception({header:n,message:`${r} is not iterable.`});for(;;){let{done:c,value:u}=o.next();if(c)break;a.push(t(u,n,`${r}[${l++}]`))}return a}};Dt.recordConverter=function(t,e){return(n,r,i)=>{if(Dt.util.Type(n)!=="Object")throw Dt.errors.exception({header:r,message:`${i} ("${Dt.util.Type(n)}") is not an Object.`});let o={};if(!_g.isProxy(n)){let l=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(let c of l){let u=t(c,r,i),d=e(n[c],r,i);o[u]=d}return o}let a=Reflect.ownKeys(n);for(let l of a)if(Reflect.getOwnPropertyDescriptor(n,l)?.enumerable){let u=t(l,r,i),d=e(n[l],r,i);o[u]=d}return o}};Dt.interfaceConverter=function(t){return(e,n,r,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Dt.errors.exception({header:n,message:`Expected ${r} ("${Dt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Dt.dictionaryConverter=function(t){return(e,n,r)=>{let i=Dt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Dt.errors.exception({header:n,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:l,defaultValue:c,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,l))throw Dt.errors.exception({header:n,message:`Missing required key "${l}".`});let p=e[l],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=c()),u||m||p!==void 0){if(p=d(p,n,`${r}.${l}`),a.allowedValues&&!a.allowedValues.includes(p))throw Dt.errors.exception({header:n,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[l]=p}}return o}};Dt.nullableConverter=function(t){return(e,n,r)=>e===null?e:t(e,n,r)};Dt.converters.DOMString=function(t,e,n,r){if(t===null&&r?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Dt.errors.exception({header:e,message:`${n} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Dt.converters.ByteString=function(t,e,n){let r=Dt.converters.DOMString(t,e,n);for(let i=0;i<r.length;i++)if(r.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${r.charCodeAt(i)} which is greater than 255.`);return r};Dt.converters.USVString=V1t;Dt.converters.boolean=function(t){return!!t};Dt.converters.any=function(t){return t};Dt.converters["long long"]=function(t,e,n){return Dt.util.ConvertToInt(t,64,"signed",void 0,e,n)};Dt.converters["unsigned long long"]=function(t,e,n){return Dt.util.ConvertToInt(t,64,"unsigned",void 0,e,n)};Dt.converters["unsigned long"]=function(t,e,n){return Dt.util.ConvertToInt(t,32,"unsigned",void 0,e,n)};Dt.converters["unsigned short"]=function(t,e,n,r){return Dt.util.ConvertToInt(t,16,"unsigned",r,e,n)};Dt.converters.ArrayBuffer=function(t,e,n,r){if(Dt.util.Type(t)!=="Object"||!_g.isAnyArrayBuffer(t))throw Dt.errors.conversionFailed({prefix:e,argument:`${n} ("${Dt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(r?.allowShared===!1&&_g.isSharedArrayBuffer(t))throw Dt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Dt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Dt.converters.TypedArray=function(t,e,n,r,i){if(Dt.util.Type(t)!=="Object"||!_g.isTypedArray(t)||t.constructor.name!==e.name)throw Dt.errors.conversionFailed({prefix:n,argument:`${r} ("${Dt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&_g.isSharedArrayBuffer(t.buffer))throw Dt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Dt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Dt.converters.DataView=function(t,e,n,r){if(Dt.util.Type(t)!=="Object"||!_g.isDataView(t))throw Dt.errors.exception({header:e,message:`${n} is not a DataView.`});if(r?.allowShared===!1&&_g.isSharedArrayBuffer(t.buffer))throw Dt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Dt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Dt.converters.BufferSource=function(t,e,n,r){if(_g.isAnyArrayBuffer(t))return Dt.converters.ArrayBuffer(t,e,n,{...r,allowShared:!1});if(_g.isTypedArray(t))return Dt.converters.TypedArray(t,t.constructor,e,n,{...r,allowShared:!1});if(_g.isDataView(t))return Dt.converters.DataView(t,e,n,{...r,allowShared:!1});throw Dt.errors.conversionFailed({prefix:e,argument:`${n} ("${Dt.util.Stringify(t)}")`,types:["BufferSource"]})};Dt.converters["sequence<ByteString>"]=Dt.sequenceConverter(Dt.converters.ByteString);Dt.converters["sequence<sequence<ByteString>>"]=Dt.sequenceConverter(Dt.converters["sequence<ByteString>"]);Dt.converters["record<ByteString, ByteString>"]=Dt.recordConverter(Dt.converters.ByteString,Dt.converters.ByteString);rke.exports={webidl:Dt}});var I0=G((q$n,Ake)=>{"use strict";f();var{Transform:$1t}=require("node:stream"),ike=require("node:zlib"),{redirectStatusSet:z1t,referrerPolicySet:Y1t,badPortsSet:K1t}=lD(),{getGlobalOrigin:oke}=moe(),{collectASequenceOfCodePoints:c2,collectAnHTTPQuotedString:J1t,removeChars:X1t,parseMIMEType:Z1t}=Ed(),{performance:eyt}=require("node:perf_hooks"),{isBlobLike:tyt,ReadableStreamFrom:nyt,isValidHTTPToken:ske,normalizedMethodRecordsBase:ryt}=yi(),u2=require("node:assert"),{isUint8Array:iyt}=require("node:util/types"),{webidl:uD}=pc(),ake=[],fq;try{fq=require("node:crypto");let t=["sha256","sha384","sha512"];ake=fq.getHashes().filter(e=>t.includes(e))}catch{}function lke(t){let e=t.urlList,n=e.length;return n===0?null:e[n-1].toString()}s(lke,"responseURL");function oyt(t,e){if(!z1t.has(t.status))return null;let n=t.headersList.get("location",!0);return n!==null&&uke(n)&&(cke(n)||(n=syt(n)),n=new URL(n,lke(t))),n&&!n.hash&&(n.hash=e),n}s(oyt,"responseLocationURL");function cke(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>126||n<32)return!1}return!0}s(cke,"isValidEncodedURL");function syt(t){return Buffer.from(t,"binary").toString("utf8")}s(syt,"normalizeBinaryStringToUtf8");function fD(t){return t.urlList[t.urlList.length-1]}s(fD,"requestCurrentURL");function ayt(t){let e=fD(t);return hke(e)&&K1t.has(e.port)?"blocked":"allowed"}s(ayt,"requestBadPort");function lyt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(lyt,"isErrorLike");function cyt(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(!(n===9||n>=32&&n<=126||n>=128&&n<=255))return!1}return!0}s(cyt,"isValidReasonPhrase");var uyt=ske;function uke(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(uke,"isValidHeaderValue");function dyt(t,e){let{headersList:n}=e,r=(n.get("referrer-policy",!0)??"").split(","),i="";if(r.length>0)for(let o=r.length;o!==0;o--){let a=r[o-1].trim();if(Y1t.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(dyt,"setRequestReferrerPolicyOnRedirect");function fyt(){return"allowed"}s(fyt,"crossOriginResourcePolicyCheck");function pyt(){return"success"}s(pyt,"corsCheck");function myt(){return"success"}s(myt,"TAOCheck");function hyt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(hyt,"appendFetchMetadata");function gyt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&yoe(t.origin)&&!yoe(fD(t))&&(e=null);break;case"same-origin":pq(t,fD(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(gyt,"appendRequestOriginHeader");function D5(t,e){return t}s(D5,"coarsenTime");function Ayt(t,e,n){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:D5(t.domainLookupStartTime,n),domainLookupEndTime:D5(t.domainLookupEndTime,n),connectionStartTime:D5(t.connectionStartTime,n),connectionEndTime:D5(t.connectionEndTime,n),secureConnectionStartTime:D5(t.secureConnectionStartTime,n),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(Ayt,"clampAndCoarsenConnectionTimingInfo");function yyt(t){return D5(eyt.now(),t)}s(yyt,"coarsenedSharedCurrentTime");function Cyt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(Cyt,"createOpaqueTimingInfo");function dke(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(dke,"makePolicyContainer");function xyt(t){return{referrerPolicy:t.referrerPolicy}}s(xyt,"clonePolicyContainer");function vyt(t){let e=t.referrerPolicy;u2(e);let n=null;if(t.referrer==="client"){let l=oke();if(!l||l.origin==="null")return"no-referrer";n=new URL(l)}else t.referrer instanceof URL&&(n=t.referrer);let r=Aoe(n),i=Aoe(n,!0);r.toString().length>4096&&(r=i);let o=pq(t,r),a=dD(r)&&!dD(t.url);switch(e){case"origin":return i??Aoe(n,!0);case"unsafe-url":return r;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?r:i;case"strict-origin-when-cross-origin":{let l=fD(t);return pq(r,l)?r:dD(r)&&!dD(l)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(vyt,"determineRequestsReferrer");function Aoe(t,e){return u2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(Aoe,"stripURLForReferrer");function dD(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(n){if(n==null||n==="null")return!1;let r=new URL(n);return!!(r.protocol==="https:"||r.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(r.hostname)||r.hostname==="localhost"||r.hostname.includes("localhost.")||r.hostname.endsWith(".localhost"))}}s(dD,"isURLPotentiallyTrustworthy");function byt(t,e){if(fq===void 0)return!0;let n=fke(e);if(n==="no metadata"||n.length===0)return!0;let r=Iyt(n),i=Tyt(n,r);for(let o of i){let a=o.algo,l=o.hash,c=fq.createHash(a).update(t).digest("base64");if(c[c.length-1]==="="&&(c[c.length-2]==="="?c=c.slice(0,-2):c=c.slice(0,-1)),wyt(c,l))return!0}return!1}s(byt,"bytesMatch");var Eyt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function fke(t){let e=[],n=!0;for(let r of t.split(" ")){n=!1;let i=Eyt.exec(r);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();ake.includes(o)&&e.push(i.groups)}return n===!0?"no metadata":e}s(fke,"parseMetadata");function Iyt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let n=1;n<t.length;++n){let r=t[n];if(r.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;r.algo[3]==="3"&&(e="sha384")}}return e}s(Iyt,"getStrongestMetadata");function Tyt(t,e){if(t.length===1)return t;let n=0;for(let r=0;r<t.length;++r)t[r].algo===e&&(t[n++]=t[r]);return t.length=n,t}s(Tyt,"filterMetadataListByAlgorithm");function wyt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]){if(t[n]==="+"&&e[n]==="-"||t[n]==="/"&&e[n]==="_")continue;return!1}return!0}s(wyt,"compareBase64Mixed");function _yt(t){}s(_yt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function pq(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(pq,"sameOrigin");function Syt(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}s(Syt,"createDeferredPromise");function Ryt(t){return t.controller.state==="aborted"}s(Ryt,"isAborted");function kyt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(kyt,"isCancelled");function Byt(t){return ryt[t.toLowerCase()]??t}s(Byt,"normalizeMethod");function Dyt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return u2(typeof e=="string"),e}s(Dyt,"serializeJavascriptValueToJSONString");var Pyt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function pke(t,e,n=0,r=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,l){this.#e=a,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,l=this.#e[e],c=l.length;if(a>=c)return{value:void 0,done:!0};let{[n]:u,[r]:d}=l[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,Pyt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(pke,"createIterator");function Nyt(t,e,n,r=0,i=1){let o=pke(t,n,r,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return uD.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return uD.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return uD.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(c,u=globalThis){if(uD.brandCheck(this,e),uD.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof c!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))c.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(Nyt,"iteratorMixin");async function Lyt(t,e,n){let r=e,i=n,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{r(await mke(o))}catch(a){i(a)}}s(Lyt,"fullyReadBody");function Fyt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(Fyt,"isReadableStreamLike");function Myt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(Myt,"readableStreamClose");var Qyt=/[^\x00-\xFF]/;function dq(t){return u2(!Qyt.test(t)),t}s(dq,"isomorphicEncode");async function mke(t){let e=[],n=0;for(;;){let{done:r,value:i}=await t.read();if(r)return Buffer.concat(e,n);if(!iyt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),n+=i.length}}s(mke,"readAllBytes");function Oyt(t){u2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(Oyt,"urlIsLocal");function yoe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(yoe,"urlHasHttpsScheme");function hke(t){u2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(hke,"urlIsHttpHttpsScheme");function Uyt(t,e){let n=t;if(!n.startsWith("bytes"))return"failure";let r={position:5};if(e&&c2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==61)return"failure";r.position++,e&&c2(c=>c==="	"||c===" ",n,r);let i=c2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),o=i.length?Number(i):null;if(e&&c2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==45)return"failure";r.position++,e&&c2(c=>c==="	"||c===" ",n,r);let a=c2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),l=a.length?Number(a):null;return r.position<n.length||l===null&&o===null||o>l?"failure":{rangeStartValue:o,rangeEndValue:l}}s(Uyt,"simpleRangeHeaderValue");function qyt(t,e,n){let r="bytes ";return r+=dq(`${t}`),r+="-",r+=dq(`${e}`),r+="/",r+=dq(`${n}`),r}s(qyt,"buildContentRange");var Coe=class extends $1t{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,n,r){if(!this._inflateStream){if(e.length===0){r();return}this._inflateStream=(e[0]&15)===8?ike.createInflate(this.#e):ike.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,n,r)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function Wyt(t){return new Coe(t)}s(Wyt,"createInflate");function Gyt(t){let e=null,n=null,r=null,i=gke("content-type",t);if(i===null)return"failure";for(let o of i){let a=Z1t(o);a==="failure"||a.essence==="*/*"||(r=a,r.essence!==n?(e=null,r.parameters.has("charset")&&(e=r.parameters.get("charset")),n=r.essence):!r.parameters.has("charset")&&e!==null&&r.parameters.set("charset",e))}return r??"failure"}s(Gyt,"extractMimeType");function Hyt(t){let e=t,n={position:0},r=[],i="";for(;n.position<e.length;){if(i+=c2(o=>o!=='"'&&o!==",",e,n),n.position<e.length)if(e.charCodeAt(n.position)===34){if(i+=J1t(e,n),n.position<e.length)continue}else u2(e.charCodeAt(n.position)===44),n.position++;i=X1t(i,!0,!0,o=>o===9||o===32),r.push(i),i=""}return r}s(Hyt,"gettingDecodingSplitting");function gke(t,e){let n=e.get(t,!0);return n===null?null:Hyt(n)}s(gke,"getDecodeSplit");var jyt=new TextDecoder;function Vyt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),jyt.decode(t))}s(Vyt,"utf8DecodeBytes");var xoe=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return oke()}get origin(){return this.baseUrl?.origin}policyContainer=dke()},voe=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new xoe},$yt=new voe;Ake.exports={isAborted:Ryt,isCancelled:kyt,isValidEncodedURL:cke,createDeferredPromise:Syt,ReadableStreamFrom:nyt,tryUpgradeRequestToAPotentiallyTrustworthyURL:_yt,clampAndCoarsenConnectionTimingInfo:Ayt,coarsenedSharedCurrentTime:yyt,determineRequestsReferrer:vyt,makePolicyContainer:dke,clonePolicyContainer:xyt,appendFetchMetadata:hyt,appendRequestOriginHeader:gyt,TAOCheck:myt,corsCheck:pyt,crossOriginResourcePolicyCheck:fyt,createOpaqueTimingInfo:Cyt,setRequestReferrerPolicyOnRedirect:dyt,isValidHTTPToken:ske,requestBadPort:ayt,requestCurrentURL:fD,responseURL:lke,responseLocationURL:oyt,isBlobLike:tyt,isURLPotentiallyTrustworthy:dD,isValidReasonPhrase:cyt,sameOrigin:pq,normalizeMethod:Byt,serializeJavascriptValueToJSONString:Dyt,iteratorMixin:Nyt,createIterator:pke,isValidHeaderName:uyt,isValidHeaderValue:uke,isErrorLike:lyt,fullyReadBody:Lyt,bytesMatch:byt,isReadableStreamLike:Fyt,readableStreamClose:Myt,isomorphicEncode:dq,urlIsLocal:Oyt,urlHasHttpsScheme:yoe,urlIsHttpHttpsScheme:hke,readAllBytes:mke,simpleRangeHeaderValue:Uyt,buildContentRange:qyt,parseMetadata:fke,createInflate:Wyt,extractMimeType:Gyt,getDecodeSplit:gke,utf8DecodeBytes:Vyt,environmentSettingsObject:$yt}});var Cv=G((H$n,yke)=>{"use strict";f();yke.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var Eoe=G((V$n,Cke)=>{"use strict";f();var{Blob:zyt,File:Yyt}=require("node:buffer"),{kState:z1}=Cv(),{webidl:Sg}=pc(),boe=class t{static{s(this,"FileLike")}constructor(e,n,r={}){let i=n,o=r.type,a=r.lastModified??Date.now();this[z1]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Sg.brandCheck(this,t),this[z1].blobLike.stream(...e)}arrayBuffer(...e){return Sg.brandCheck(this,t),this[z1].blobLike.arrayBuffer(...e)}slice(...e){return Sg.brandCheck(this,t),this[z1].blobLike.slice(...e)}text(...e){return Sg.brandCheck(this,t),this[z1].blobLike.text(...e)}get size(){return Sg.brandCheck(this,t),this[z1].blobLike.size}get type(){return Sg.brandCheck(this,t),this[z1].blobLike.type}get name(){return Sg.brandCheck(this,t),this[z1].name}get lastModified(){return Sg.brandCheck(this,t),this[z1].lastModified}get[Symbol.toStringTag](){return"File"}};Sg.converters.Blob=Sg.interfaceConverter(zyt);function Kyt(t){return t instanceof Yyt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(Kyt,"isFileLike");Cke.exports={FileLike:boe,isFileLike:Kyt}});var mD=G((Y$n,Ike)=>{"use strict";f();var{isBlobLike:mq,iteratorMixin:Jyt}=I0(),{kState:Du}=Cv(),{kEnumerableProperty:P5}=yi(),{FileLike:xke,isFileLike:Xyt}=Eoe(),{webidl:Zo}=pc(),{File:Eke}=require("node:buffer"),vke=require("node:util"),bke=globalThis.File??Eke,pD=class t{static{s(this,"FormData")}constructor(e){if(Zo.util.markAsUncloneable(this),e!==void 0)throw Zo.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Du]=[]}append(e,n,r=void 0){Zo.brandCheck(this,t);let i="FormData.append";if(Zo.argumentLengthCheck(arguments,2,i),arguments.length===3&&!mq(n))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Zo.converters.USVString(e,i,"name"),n=mq(n)?Zo.converters.Blob(n,i,"value",{strict:!1}):Zo.converters.USVString(n,i,"value"),r=arguments.length===3?Zo.converters.USVString(r,i,"filename"):void 0;let o=Ioe(e,n,r);this[Du].push(o)}delete(e){Zo.brandCheck(this,t);let n="FormData.delete";Zo.argumentLengthCheck(arguments,1,n),e=Zo.converters.USVString(e,n,"name"),this[Du]=this[Du].filter(r=>r.name!==e)}get(e){Zo.brandCheck(this,t);let n="FormData.get";Zo.argumentLengthCheck(arguments,1,n),e=Zo.converters.USVString(e,n,"name");let r=this[Du].findIndex(i=>i.name===e);return r===-1?null:this[Du][r].value}getAll(e){Zo.brandCheck(this,t);let n="FormData.getAll";return Zo.argumentLengthCheck(arguments,1,n),e=Zo.converters.USVString(e,n,"name"),this[Du].filter(r=>r.name===e).map(r=>r.value)}has(e){Zo.brandCheck(this,t);let n="FormData.has";return Zo.argumentLengthCheck(arguments,1,n),e=Zo.converters.USVString(e,n,"name"),this[Du].findIndex(r=>r.name===e)!==-1}set(e,n,r=void 0){Zo.brandCheck(this,t);let i="FormData.set";if(Zo.argumentLengthCheck(arguments,2,i),arguments.length===3&&!mq(n))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Zo.converters.USVString(e,i,"name"),n=mq(n)?Zo.converters.Blob(n,i,"name",{strict:!1}):Zo.converters.USVString(n,i,"name"),r=arguments.length===3?Zo.converters.USVString(r,i,"name"):void 0;let o=Ioe(e,n,r),a=this[Du].findIndex(l=>l.name===e);a!==-1?this[Du]=[...this[Du].slice(0,a),o,...this[Du].slice(a+1).filter(l=>l.name!==e)]:this[Du].push(o)}[vke.inspect.custom](e,n){let r=this[Du].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});n.depth??=e,n.colors??=!0;let i=vke.formatWithOptions(n,r);return`FormData ${i.slice(i.indexOf("]")+2)}`}};Jyt("FormData",pD,Du,"name","value");Object.defineProperties(pD.prototype,{append:P5,delete:P5,get:P5,getAll:P5,has:P5,set:P5,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Ioe(t,e,n){if(typeof e!="string"){if(Xyt(e)||(e=e instanceof Blob?new bke([e],"blob",{type:e.type}):new xke(e,"blob",{type:e.type})),n!==void 0){let r={type:e.type,lastModified:e.lastModified};e=e instanceof Eke?new bke([e],n,r):new xke(e,n,r)}}return{name:t,value:e}}s(Ioe,"makeEntry");Ike.exports={FormData:pD,makeEntry:Ioe}});var kke=G((X$n,Rke)=>{"use strict";f();var{isUSVString:Tke,bufferToLowerCasedHeaderName:Zyt}=yi(),{utf8DecodeBytes:eCt}=I0(),{HTTP_TOKEN_CODEPOINTS:tCt,isomorphicDecode:wke}=Ed(),{isFileLike:nCt}=Eoe(),{makeEntry:rCt}=mD(),hq=require("node:assert"),{File:iCt}=require("node:buffer"),oCt=globalThis.File??iCt,sCt=Buffer.from('form-data; name="'),_ke=Buffer.from("; filename"),aCt=Buffer.from("--"),lCt=Buffer.from(`--\r
`);function cCt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(cCt,"isAsciiString");function uCt(t){let e=t.length;if(e<27||e>70)return!1;for(let n=0;n<e;++n){let r=t.charCodeAt(n);if(!(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||r===39||r===45||r===95))return!1}return!0}s(uCt,"validateBoundary");function dCt(t,e){hq(e!=="failure"&&e.essence==="multipart/form-data");let n=e.parameters.get("boundary");if(n===void 0)return"failure";let r=Buffer.from(`--${n}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+r.length).equals(r))o.position+=r.length;else return"failure";if(o.position===t.length-2&&gq(t,aCt,o)||o.position===t.length-4&&gq(t,lCt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let l=fCt(t,o);if(l==="failure")return"failure";let{name:c,filename:u,contentType:d,encoding:p}=l;o.position+=2;let m;{let g=t.indexOf(r.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",cCt(d)||(d=""),h=new oCt([m],u,{type:d})):h=eCt(Buffer.from(m)),hq(Tke(c)),hq(typeof h=="string"&&Tke(h)||nCt(h)),i.push(rCt(c,h,u))}}s(dCt,"multipartFormDataParser");function fCt(t,e){let n=null,r=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return n===null?"failure":{name:n,filename:r,contentType:i,encoding:o};let a=N5(l=>l!==10&&l!==13&&l!==58,t,e);if(a=Toe(a,!0,!0,l=>l===9||l===32),!tCt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,N5(l=>l===32||l===9,t,e),Zyt(a)){case"content-disposition":{if(n=r=null,!gq(t,sCt,e)||(e.position+=17,n=Ske(t,e),n===null))return"failure";if(gq(t,_ke,e)){let l=e.position+_ke.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,r=Ske(t,e),r===null))return"failure"}break}case"content-type":{let l=N5(c=>c!==10&&c!==13,t,e);l=Toe(l,!1,!0,c=>c===9||c===32),i=wke(l);break}case"content-transfer-encoding":{let l=N5(c=>c!==10&&c!==13,t,e);l=Toe(l,!1,!0,c=>c===9||c===32),o=wke(l);break}default:N5(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(fCt,"parseMultipartFormDataHeaders");function Ske(t,e){hq(t[e.position-1]===34);let n=N5(r=>r!==10&&r!==13&&r!==34,t,e);return t[e.position]!==34?null:(e.position++,n=new TextDecoder().decode(n).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),n)}s(Ske,"parseMultipartFormDataName");function N5(t,e,n){let r=n.position;for(;r<e.length&&t(e[r]);)++r;return e.subarray(n.position,n.position=r)}s(N5,"collectASequenceOfBytes");function Toe(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t[i]);)i++;if(n)for(;o>0&&r(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Toe,"removeChars");function gq(t,e,n){if(t.length<e.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n.position+r])return!1;return!0}s(gq,"bufferStartsWith");Rke.exports={multipartFormDataParser:dCt,validateBoundary:uCt}});var M5=G((tzn,Qke)=>{"use strict";f();var hD=yi(),{ReadableStreamFrom:pCt,isBlobLike:Bke,isReadableStreamLike:mCt,readableStreamClose:hCt,createDeferredPromise:gCt,fullyReadBody:ACt,extractMimeType:yCt,utf8DecodeBytes:Nke}=I0(),{FormData:Dke}=mD(),{kState:F5}=Cv(),{webidl:CCt}=pc(),{Blob:xCt}=require("node:buffer"),woe=require("node:assert"),{isErrored:Lke,isDisturbed:vCt}=require("node:stream"),{isArrayBuffer:bCt}=require("node:util/types"),{serializeAMimeType:ECt}=Ed(),{multipartFormDataParser:ICt}=kke(),_oe;try{let t=require("node:crypto");_oe=s(e=>t.randomInt(0,e),"random")}catch{_oe=s(t=>Math.floor(Math.random(t)),"random")}var Aq=new TextEncoder;function TCt(){}s(TCt,"noop");var Soe=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Roe;Soe&&(Roe=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!vCt(e)&&!Lke(e)&&e.cancel("Response object has been garbage collected").catch(TCt)}));function Fke(t,e=!1){let n=null;t instanceof ReadableStream?n=t:Bke(t)?n=t.stream():n=new ReadableStream({async pull(c){let u=typeof i=="string"?Aq.encode(i):i;u.byteLength&&c.enqueue(u),queueMicrotask(()=>hCt(c))},start(){},type:"bytes"}),woe(mCt(n));let r=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(bCt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(hD.isFormDataLike(t)){let c=`----formdata-undici-0${`${_oe(1e11)}`.padStart(11,"0")}`,u=`--${c}\r
Content-Disposition: form-data`;let d=s(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[v,b]of t)if(typeof b=="string"){let E=Aq.encode(u+`; name="${d(p(v))}"\r
\r
${p(b)}\r
`);m.push(E),o+=E.byteLength}else{let E=Aq.encode(`${u}; name="${d(p(v))}"`+(b.name?`; filename="${d(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);m.push(E,b,h),typeof b.size=="number"?o+=E.byteLength+b.size+h.byteLength:g=!0}let y=Aq.encode(`--${c}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,r=s(async function*(){for(let v of m)v.stream?yield*v.stream():yield v},"action"),a=`multipart/form-data; boundary=${c}`}else if(Bke(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(hD.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");n=t instanceof ReadableStream?t:pCt(t)}if((typeof i=="string"||hD.isBuffer(i))&&(o=Buffer.byteLength(i)),r!=null){let c;n=new ReadableStream({async start(){c=r(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await c.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!Lke(n)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await c.return()},type:"bytes"})}return[{stream:n,source:i,length:o},a]}s(Fke,"extractBody");function wCt(t,e=!1){return t instanceof ReadableStream&&(woe(!hD.isDisturbed(t),"The body has already been consumed."),woe(!t.locked,"The stream is locked.")),Fke(t,e)}s(wCt,"safelyExtractBody");function _Ct(t,e){let[n,r]=e.stream.tee();return Soe&&Roe.register(t,new WeakRef(n)),e.stream=n,{stream:r,length:e.length,source:e.source}}s(_Ct,"cloneBody");function SCt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(SCt,"throwIfAborted");function RCt(t){return{blob(){return L5(this,n=>{let r=Pke(this);return r===null?r="":r&&(r=ECt(r)),new xCt([n],{type:r})},t)},arrayBuffer(){return L5(this,n=>new Uint8Array(n).buffer,t)},text(){return L5(this,Nke,t)},json(){return L5(this,BCt,t)},formData(){return L5(this,n=>{let r=Pke(this);if(r!==null)switch(r.essence){case"multipart/form-data":{let i=ICt(n,r);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new Dke;return o[F5]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(n.toString()),o=new Dke;for(let[a,l]of i)o.append(a,l);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return L5(this,n=>new Uint8Array(n),t)}}}s(RCt,"bodyMixinMethods");function kCt(t){Object.assign(t.prototype,RCt(t))}s(kCt,"mixinBody");async function L5(t,e,n){if(CCt.brandCheck(t,n),Mke(t))throw new TypeError("Body is unusable: Body has already been read");SCt(t[F5]);let r=gCt(),i=s(a=>r.reject(a),"errorSteps"),o=s(a=>{try{r.resolve(e(a))}catch(l){i(l)}},"successSteps");return t[F5].body==null?(o(Buffer.allocUnsafe(0)),r.promise):(await ACt(t[F5].body,o,i),r.promise)}s(L5,"consumeBody");function Mke(t){let e=t[F5].body;return e!=null&&(e.stream.locked||hD.isDisturbed(e.stream))}s(Mke,"bodyUnusable");function BCt(t){return JSON.parse(Nke(t))}s(BCt,"parseJSONFromBytes");function Pke(t){let e=t[F5].headersList,n=yCt(e);return n==="failure"?null:n}s(Pke,"bodyMimeType");Qke.exports={extractBody:Fke,safelyExtractBody:wCt,cloneBody:_Ct,mixinBody:kCt,streamRegistry:Roe,hasFinalizationRegistry:Soe,bodyUnusable:Mke}});var Yke=G((izn,zke)=>{"use strict";f();var xr=require("node:assert"),Vr=yi(),{channels:Oke}=I5(),koe=coe(),{RequestContentLengthMismatchError:d2,ResponseContentLengthMismatchError:DCt,RequestAbortedError:jke,HeadersTimeoutError:PCt,HeadersOverflowError:NCt,SocketError:Eq,InformationalError:Q5,BodyTimeoutError:LCt,HTTPParserError:FCt,ResponseExceededMaxSizeError:MCt}=Ao(),{kUrl:Vke,kReset:Id,kClient:Noe,kParser:la,kBlocking:yD,kRunning:$c,kPending:QCt,kSize:Uke,kWriting:vv,kQueue:km,kNoRef:gD,kKeepAliveDefaultTimeout:OCt,kHostHeader:UCt,kPendingIdx:qCt,kRunningIdx:tp,kError:np,kPipelining:vq,kSocket:O5,kKeepAliveTimeoutValue:Iq,kMaxHeadersSize:Boe,kKeepAliveMaxTimeout:WCt,kKeepAliveTimeoutThreshold:GCt,kHeadersTimeout:HCt,kBodyTimeout:jCt,kStrictContentLength:Loe,kMaxRequests:qke,kCounter:VCt,kMaxResponseSize:$Ct,kOnError:zCt,kResume:xv,kHTTPContext:$ke}=Fs(),Rg=M3e(),YCt=Buffer.alloc(0),yq=Buffer[Symbol.species],Cq=Vr.addListener,KCt=Vr.removeAllListeners,Doe;async function JCt(){let t=process.env.JEST_WORKER_ID?foe():void 0,e;try{e=await WebAssembly.compile(U3e())}catch{e=await WebAssembly.compile(t||foe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((n,r,i)=>0,"wasm_on_url"),wasm_on_status:s((n,r,i)=>{xr(pl.ptr===n);let o=r-Bg+kg.byteOffset;return pl.onStatus(new yq(kg.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(n=>(xr(pl.ptr===n),pl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((n,r,i)=>{xr(pl.ptr===n);let o=r-Bg+kg.byteOffset;return pl.onHeaderField(new yq(kg.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((n,r,i)=>{xr(pl.ptr===n);let o=r-Bg+kg.byteOffset;return pl.onHeaderValue(new yq(kg.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((n,r,i,o)=>(xr(pl.ptr===n),pl.onHeadersComplete(r,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((n,r,i)=>{xr(pl.ptr===n);let o=r-Bg+kg.byteOffset;return pl.onBody(new yq(kg.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(n=>(xr(pl.ptr===n),pl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(JCt,"lazyllhttp");var Poe=null,Foe=JCt();Foe.catch();var pl=null,kg=null,xq=0,Bg=null,XCt=0,AD=1,U5=2|AD,bq=4|AD,Moe=8|XCt,Qoe=class{static{s(this,"Parser")}constructor(e,n,{exports:r}){xr(Number.isFinite(e[Boe])&&e[Boe]>0),this.llhttp=r,this.ptr=this.llhttp.llhttp_alloc(Rg.TYPE.RESPONSE),this.client=e,this.socket=n,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[Boe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[$Ct]}setTimeout(e,n){e!==this.timeoutValue||n&AD^this.timeoutType&AD?(this.timeout&&(koe.clearTimeout(this.timeout),this.timeout=null),e&&(n&AD?this.timeout=koe.setFastTimeout(Wke,e,new WeakRef(this)):(this.timeout=setTimeout(Wke,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=n}resume(){this.socket.destroyed||!this.paused||(xr(this.ptr!=null),xr(pl==null),this.llhttp.llhttp_resume(this.ptr),xr(this.timeoutType===bq),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||YCt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){xr(this.ptr!=null),xr(pl==null),xr(!this.paused);let{socket:n,llhttp:r}=this;e.length>xq&&(Bg&&r.free(Bg),xq=Math.ceil(e.length/4096)*4096,Bg=r.malloc(xq)),new Uint8Array(r.memory.buffer,Bg,xq).set(e);try{let i;try{kg=e,pl=this,i=r.llhttp_execute(this.ptr,Bg,e.length)}catch(a){throw a}finally{pl=null,kg=null}let o=r.llhttp_get_error_pos(this.ptr)-Bg;if(i===Rg.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Rg.ERROR.PAUSED)this.paused=!0,n.unshift(e.slice(o));else if(i!==Rg.ERROR.OK){let a=r.llhttp_get_error_reason(this.ptr),l="";if(a){let c=new Uint8Array(r.memory.buffer,a).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(r.memory.buffer,a,c).toString()+")"}throw new FCt(l,Rg.ERROR[i],e.slice(o))}}catch(i){Vr.destroy(n,i)}}destroy(){xr(this.ptr!=null),xr(pl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&koe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:n}=this;if(e.destroyed)return-1;let r=n[km][n[tp]];if(!r)return-1;r.onResponseStarted()}onHeaderField(e){let n=this.headers.length;(n&1)===0?this.headers.push(e):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let n=this.headers.length;(n&1)===1?(this.headers.push(e),n+=1):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]);let r=this.headers[n-2];if(r.length===10){let i=Vr.bufferToLowerCasedHeaderName(r);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else r.length===14&&Vr.bufferToLowerCasedHeaderName(r)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&Vr.destroy(this.socket,new NCt)}onUpgrade(e){let{upgrade:n,client:r,socket:i,headers:o,statusCode:a}=this;xr(n),xr(r[O5]===i),xr(!i.destroyed),xr(!this.paused),xr((o.length&1)===0);let l=r[km][r[tp]];xr(l),xr(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[la].destroy(),i[la]=null,i[Noe]=null,i[np]=null,KCt(i),r[O5]=null,r[$ke]=null,r[km][r[tp]++]=null,r.emit("disconnect",r[Vke],[r],new Q5("upgrade"));try{l.onUpgrade(a,o,i)}catch(c){Vr.destroy(i,c)}r[xv]()}onHeadersComplete(e,n,r){let{client:i,socket:o,headers:a,statusText:l}=this;if(o.destroyed)return-1;let c=i[km][i[tp]];if(!c)return-1;if(xr(!this.upgrade),xr(this.statusCode<200),e===100)return Vr.destroy(o,new Eq("bad response",Vr.getSocketInfo(o))),-1;if(n&&!c.upgrade)return Vr.destroy(o,new Eq("bad upgrade",Vr.getSocketInfo(o))),-1;if(xr(this.timeoutType===U5),this.statusCode=e,this.shouldKeepAlive=r||c.method==="HEAD"&&!o[Id]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=c.bodyTimeout!=null?c.bodyTimeout:i[jCt];this.setTimeout(d,bq)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(c.method==="CONNECT")return xr(i[$c]===1),this.upgrade=!0,2;if(n)return xr(i[$c]===1),this.upgrade=!0,2;if(xr((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[vq]){let d=this.keepAlive?Vr.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[GCt],i[WCt]);p<=0?o[Id]=!0:i[Iq]=p}else i[Iq]=i[OCt]}else o[Id]=!0;let u=c.onHeaders(e,a,this.resume,l)===!1;return c.aborted?-1:c.method==="HEAD"||e<200?1:(o[yD]&&(o[yD]=!1,i[xv]()),u?Rg.ERROR.PAUSED:0)}onBody(e){let{client:n,socket:r,statusCode:i,maxResponseSize:o}=this;if(r.destroyed)return-1;let a=n[km][n[tp]];if(xr(a),xr(this.timeoutType===bq),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),xr(i>=200),o>-1&&this.bytesRead+e.length>o)return Vr.destroy(r,new MCt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Rg.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:n,statusCode:r,upgrade:i,headers:o,contentLength:a,bytesRead:l,shouldKeepAlive:c}=this;if(n.destroyed&&(!r||c))return-1;if(i)return;xr(r>=100),xr((this.headers.length&1)===0);let u=e[km][e[tp]];if(xr(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(r<200)){if(u.method!=="HEAD"&&a&&l!==parseInt(a,10))return Vr.destroy(n,new DCt),-1;if(u.onComplete(o),e[km][e[tp]++]=null,n[vv])return xr(e[$c]===0),Vr.destroy(n,new Q5("reset")),Rg.ERROR.PAUSED;if(c){if(n[Id]&&e[$c]===0)return Vr.destroy(n,new Q5("reset")),Rg.ERROR.PAUSED;e[vq]==null||e[vq]===1?setImmediate(()=>e[xv]()):e[xv]()}else return Vr.destroy(n,new Q5("reset")),Rg.ERROR.PAUSED}}};function Wke(t){let{socket:e,timeoutType:n,client:r,paused:i}=t.deref();n===U5?(!e[vv]||e.writableNeedDrain||r[$c]>1)&&(xr(!i,"cannot be paused while waiting for headers"),Vr.destroy(e,new PCt)):n===bq?i||Vr.destroy(e,new LCt):n===Moe&&(xr(r[$c]===0&&r[Iq]),Vr.destroy(e,new Q5("socket idle timeout")))}s(Wke,"onParserTimeout");async function ZCt(t,e){t[O5]=e,Poe||(Poe=await Foe,Foe=null),e[gD]=!1,e[vv]=!1,e[Id]=!1,e[yD]=!1,e[la]=new Qoe(t,e,Poe),Cq(e,"error",function(r){xr(r.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[la];if(r.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[np]=r,this[Noe][zCt](r)}),Cq(e,"readable",function(){let r=this[la];r&&r.readMore()}),Cq(e,"end",function(){let r=this[la];if(r.statusCode&&!r.shouldKeepAlive){r.onMessageComplete();return}Vr.destroy(this,new Eq("other side closed",Vr.getSocketInfo(this)))}),Cq(e,"close",function(){let r=this[Noe],i=this[la];i&&(!this[np]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[la].destroy(),this[la]=null);let o=this[np]||new Eq("closed",Vr.getSocketInfo(this));if(r[O5]=null,r[$ke]=null,r.destroyed){xr(r[QCt]===0);let a=r[km].splice(r[tp]);for(let l=0;l<a.length;l++){let c=a[l];Vr.errorRequest(r,c,o)}}else if(r[$c]>0&&o.code!=="UND_ERR_INFO"){let a=r[km][r[tp]];r[km][r[tp]++]=null,Vr.errorRequest(r,a,o)}r[qCt]=r[tp],xr(r[$c]===0),r.emit("disconnect",r[Vke],[r],o),r[xv]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h1",defaultPipelining:1,write(...r){return nxt(t,...r)},resume(){ext(t)},destroy(r,i){n?queueMicrotask(i):e.destroy(r).on("close",i)},get destroyed(){return e.destroyed},busy(r){return!!(e[vv]||e[Id]||e[yD]||r&&(t[$c]>0&&!r.idempotent||t[$c]>0&&(r.upgrade||r.method==="CONNECT")||t[$c]>0&&Vr.bodyLength(r.body)!==0&&(Vr.isStream(r.body)||Vr.isAsyncIterable(r.body)||Vr.isFormDataLike(r.body))))}}}s(ZCt,"connectH1");function ext(t){let e=t[O5];if(e&&!e.destroyed){if(t[Uke]===0?!e[gD]&&e.unref&&(e.unref(),e[gD]=!0):e[gD]&&e.ref&&(e.ref(),e[gD]=!1),t[Uke]===0)e[la].timeoutType!==Moe&&e[la].setTimeout(t[Iq],Moe);else if(t[$c]>0&&e[la].statusCode<200&&e[la].timeoutType!==U5){let n=t[km][t[tp]],r=n.headersTimeout!=null?n.headersTimeout:t[HCt];e[la].setTimeout(r,U5)}}}s(ext,"resumeH1");function txt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(txt,"shouldSendContentLength");function nxt(t,e){let{method:n,path:r,host:i,upgrade:o,blocking:a,reset:l}=e,{body:c,headers:u,contentLength:d}=e,p=n==="PUT"||n==="POST"||n==="PATCH"||n==="QUERY"||n==="PROPFIND"||n==="PROPPATCH";if(Vr.isFormDataLike(c)){Doe||(Doe=M5().extractBody);let[v,b]=Doe(c);e.contentType==null&&u.push("content-type",b),c=v.stream,d=v.length}else Vr.isBlobLike(c)&&e.contentType==null&&c.type&&u.push("content-type",c.type);c&&typeof c.read=="function"&&c.read(0);let m=Vr.bodyLength(c);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),txt(n)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[Loe])return Vr.errorRequest(t,e,new d2),!1;process.emitWarning(new d2)}let h=t[O5],g=s(v=>{e.aborted||e.completed||(Vr.errorRequest(t,e,v||new jke),Vr.destroy(c),Vr.destroy(h,new Q5("aborted")))},"abort");try{e.onConnect(g)}catch(v){Vr.errorRequest(t,e,v)}if(e.aborted)return!1;n==="HEAD"&&(h[Id]=!0),(o||n==="CONNECT")&&(h[Id]=!0),l!=null&&(h[Id]=l),t[qke]&&h[VCt]++>=t[qke]&&(h[Id]=!0),a&&(h[yD]=!0);let y=`${n} ${r} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[UCt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[vq]&&!h[Id]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let v=0;v<u.length;v+=2){let b=u[v+0],E=u[v+1];if(Array.isArray(E))for(let _=0;_<E.length;_++)y+=`${b}: ${E[_]}\r
`;else y+=`${b}: ${E}\r
`}return Oke.sendHeaders.hasSubscribers&&Oke.sendHeaders.publish({request:e,headers:y,socket:h}),!c||m===0?Gke(g,null,t,e,h,d,y,p):Vr.isBuffer(c)?Gke(g,c,t,e,h,d,y,p):Vr.isBlobLike(c)?typeof c.stream=="function"?Hke(g,c.stream(),t,e,h,d,y,p):ixt(g,c,t,e,h,d,y,p):Vr.isStream(c)?rxt(g,c,t,e,h,d,y,p):Vr.isIterable(c)?Hke(g,c,t,e,h,d,y,p):xr(!1),!0}s(nxt,"writeH1");function rxt(t,e,n,r,i,o,a,l){xr(o!==0||n[$c]===0,"stream body cannot be pipelined");let c=!1,u=new Tq({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a}),d=s(function(g){if(!c)try{!u.write(g)&&this.pause&&this.pause()}catch(y){Vr.destroy(this,y)}},"onData"),p=s(function(){c||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!c){let g=new jke;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!c){if(c=!0,xr(i.destroyed||i[vv]&&n[$c]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?Vr.destroy(e,g):Vr.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(rxt,"writeStream");function Gke(t,e,n,r,i,o,a,l){try{e?Vr.isBuffer(e)&&(xr(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),r.onBodySent(e),!l&&r.reset!==!1&&(i[Id]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(xr(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),r.onRequestSent(),n[xv]()}catch(c){t(c)}}s(Gke,"writeBuffer");async function ixt(t,e,n,r,i,o,a,l){xr(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new d2;let c=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(c),i.uncork(),r.onBodySent(c),r.onRequestSent(),!l&&r.reset!==!1&&(i[Id]=!0),n[xv]()}catch(c){t(c)}}s(ixt,"writeBlob");async function Hke(t,e,n,r,i,o,a,l){xr(o!==0||n[$c]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let m=c;c=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{xr(c===null),i[np]?h(i[np]):c=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new Tq({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a});try{for await(let m of e){if(i[np])throw i[np];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(Hke,"writeIterable");var Tq=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:n,request:r,contentLength:i,client:o,expectsPayload:a,header:l}){this.socket=n,this.request=r,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=l,this.abort=e,n[vv]=!0}write(e){let{socket:n,request:r,contentLength:i,client:o,bytesWritten:a,expectsPayload:l,header:c}=this;if(n[np])throw n[np];if(n.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[Loe])throw new d2;process.emitWarning(new d2)}n.cork(),a===0&&(!l&&r.reset!==!1&&(n[Id]=!0),i===null?n.write(`${c}transfer-encoding: chunked\r
`,"latin1"):n.write(`${c}content-length: ${i}\r
\r
`,"latin1")),i===null&&n.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=n.write(e);return n.uncork(),r.onBodySent(e),d||n[la].timeout&&n[la].timeoutType===U5&&n[la].timeout.refresh&&n[la].timeout.refresh(),d}end(){let{socket:e,contentLength:n,client:r,bytesWritten:i,expectsPayload:o,header:a,request:l}=this;if(l.onRequestSent(),e[vv]=!1,e[np])throw e[np];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):n===null&&e.write(`\r
0\r
\r
`,"latin1"),n!==null&&i!==n){if(r[Loe])throw new d2;process.emitWarning(new d2)}e[la].timeout&&e[la].timeoutType===U5&&e[la].timeout.refresh&&e[la].timeout.refresh(),r[xv]()}}destroy(e){let{socket:n,client:r,abort:i}=this;n[vv]=!1,e&&(xr(r[$c]<=1,"pipeline should only contain this request"),i(e))}};zke.exports=ZCt});var rBe=G((azn,nBe)=>{"use strict";f();var rp=require("node:assert"),{pipeline:oxt}=require("node:stream"),Li=yi(),{RequestContentLengthMismatchError:Ooe,RequestAbortedError:Kke,SocketError:CD,InformationalError:Uoe}=Ao(),{kUrl:wq,kReset:Sq,kClient:q5,kRunning:Rq,kPending:sxt,kQueue:bv,kPendingIdx:qoe,kRunningIdx:Bm,kError:Pm,kSocket:Ul,kStrictContentLength:axt,kOnError:Woe,kMaxConcurrentStreams:tBe,kHTTP2Session:Dm,kResume:Ev,kSize:lxt,kHTTPContext:cxt}=Fs(),Y1=Symbol("open streams"),Jke,Xke=!1,_q;try{_q=require("node:http2")}catch{_q={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:uxt,HTTP2_HEADER_METHOD:dxt,HTTP2_HEADER_PATH:fxt,HTTP2_HEADER_SCHEME:pxt,HTTP2_HEADER_CONTENT_LENGTH:mxt,HTTP2_HEADER_EXPECT:hxt,HTTP2_HEADER_STATUS:gxt}}=_q;function Axt(t){let e=[];for(let[n,r]of Object.entries(t))if(Array.isArray(r))for(let i of r)e.push(Buffer.from(n),Buffer.from(i));else e.push(Buffer.from(n),Buffer.from(r));return e}s(Axt,"parseH2Headers");async function yxt(t,e){t[Ul]=e,Xke||(Xke=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let n=_q.connect(t[wq],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[tBe]});n[Y1]=0,n[q5]=t,n[Ul]=e,Li.addListener(n,"error",xxt),Li.addListener(n,"frameError",vxt),Li.addListener(n,"end",bxt),Li.addListener(n,"goaway",Ext),Li.addListener(n,"close",function(){let{[q5]:i}=this,{[Ul]:o}=i,a=this[Ul][Pm]||this[Pm]||new CD("closed",Li.getSocketInfo(o));if(i[Dm]=null,i.destroyed){rp(i[sxt]===0);let l=i[bv].splice(i[Bm]);for(let c=0;c<l.length;c++){let u=l[c];Li.errorRequest(i,u,a)}}}),n.unref(),t[Dm]=n,e[Dm]=n,Li.addListener(e,"error",function(i){rp(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Pm]=i,this[q5][Woe](i)}),Li.addListener(e,"end",function(){Li.destroy(this,new CD("other side closed",Li.getSocketInfo(this)))}),Li.addListener(e,"close",function(){let i=this[Pm]||new CD("closed",Li.getSocketInfo(this));t[Ul]=null,this[Dm]!=null&&this[Dm].destroy(i),t[qoe]=t[Bm],rp(t[Rq]===0),t.emit("disconnect",t[wq],[t],i),t[Ev]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return Txt(t,...i)},resume(){Cxt(t)},destroy(i,o){r?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(yxt,"connectH2");function Cxt(t){let e=t[Ul];e?.destroyed===!1&&(t[lxt]===0&&t[tBe]===0?(e.unref(),t[Dm].unref()):(e.ref(),t[Dm].ref()))}s(Cxt,"resumeH2");function xxt(t){rp(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Ul][Pm]=t,this[q5][Woe](t)}s(xxt,"onHttp2SessionError");function vxt(t,e,n){if(n===0){let r=new Uoe(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Ul][Pm]=r,this[q5][Woe](r)}}s(vxt,"onHttp2FrameError");function bxt(){let t=new CD("other side closed",Li.getSocketInfo(this[Ul]));this.destroy(t),Li.destroy(this[Ul],t)}s(bxt,"onHttp2SessionEnd");function Ext(t){let e=this[Pm]||new CD(`HTTP/2: "GOAWAY" frame received with code ${t}`,Li.getSocketInfo(this)),n=this[q5];if(n[Ul]=null,n[cxt]=null,this[Dm]!=null&&(this[Dm].destroy(e),this[Dm]=null),Li.destroy(this[Ul],e),n[Bm]<n[bv].length){let r=n[bv][n[Bm]];n[bv][n[Bm]++]=null,Li.errorRequest(n,r,e),n[qoe]=n[Bm]}rp(n[Rq]===0),n.emit("disconnect",n[wq],[n],e),n[Ev]()}s(Ext,"onHTTP2GoAway");function Ixt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Ixt,"shouldSendContentLength");function Txt(t,e){let n=t[Dm],{method:r,path:i,host:o,upgrade:a,expectContinue:l,signal:c,headers:u}=e,{body:d}=e;if(a)return Li.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let D=u[k+0],N=u[k+1];if(Array.isArray(N))for(let Q=0;Q<N.length;Q++)p[D]?p[D]+=`,${N[Q]}`:p[D]=N[Q];else p[D]=N}let m,{hostname:h,port:g}=t[wq];p[uxt]=o||`${h}${g?`:${g}`:""}`,p[dxt]=r;let y=s(k=>{e.aborted||e.completed||(k=k||new Kke,Li.errorRequest(t,e,k),m!=null&&Li.destroy(m,k),Li.destroy(d,k),t[bv][t[Bm]++]=null,t[Ev]())},"abort");try{e.onConnect(y)}catch(k){Li.errorRequest(t,e,k)}if(e.aborted)return!1;if(r==="CONNECT")return n.ref(),m=n.request(p,{endStream:!1,signal:c}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++n[Y1],t[bv][t[Bm]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++n[Y1],t[bv][t[Bm]++]=null}),m.once("close",()=>{n[Y1]-=1,n[Y1]===0&&n.unref()}),!0;p[fxt]=i,p[pxt]="https";let v=r==="PUT"||r==="POST"||r==="PATCH";d&&typeof d.read=="function"&&d.read(0);let b=Li.bodyLength(d);if(Li.isFormDataLike(d)){Jke??=M5().extractBody;let[k,D]=Jke(d);p["content-type"]=D,d=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),Ixt(r)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[axt])return Li.errorRequest(t,e,new Ooe),!1;process.emitWarning(new Ooe)}b!=null&&(rp(d,"no body must not have content length"),p[mxt]=`${b}`),n.ref();let E=r==="GET"||r==="HEAD"||d===null;return l?(p[hxt]="100-continue",m=n.request(p,{endStream:E,signal:c}),m.once("continue",_)):(m=n.request(p,{endStream:E,signal:c}),_()),++n[Y1],m.once("response",k=>{let{[gxt]:D,...N}=k;if(e.onResponseStarted(),e.aborted){let Q=new Kke;Li.errorRequest(t,e,Q),Li.destroy(m,Q);return}e.onHeaders(Number(D),Axt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",Q=>{e.onData(Q)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),n[Y1]===0&&n.unref(),y(new Uoe("HTTP/2: stream half-closed (remote)")),t[bv][t[Bm]++]=null,t[qoe]=t[Bm],t[Ev]()}),m.once("close",()=>{n[Y1]-=1,n[Y1]===0&&n.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,D)=>{y(new Uoe(`HTTP/2: "frameError" received - type ${k}, code ${D}`))}),!0;function _(){!d||b===0?Zke(y,m,null,t,e,t[Ul],b,v):Li.isBuffer(d)?Zke(y,m,d,t,e,t[Ul],b,v):Li.isBlobLike(d)?typeof d.stream=="function"?eBe(y,m,d.stream(),t,e,t[Ul],b,v):_xt(y,m,d,t,e,t[Ul],b,v):Li.isStream(d)?wxt(y,t[Ul],v,m,d,t,e,b):Li.isIterable(d)?eBe(y,m,d,t,e,t[Ul],b,v):rp(!1)}s(_,"writeBodyH2")}s(Txt,"writeH2");function Zke(t,e,n,r,i,o,a,l){try{n!=null&&Li.isBuffer(n)&&(rp(a===n.byteLength,"buffer body must have content length"),e.cork(),e.write(n),e.uncork(),e.end(),i.onBodySent(n)),l||(o[Sq]=!0),i.onRequestSent(),r[Ev]()}catch(c){t(c)}}s(Zke,"writeBuffer");function wxt(t,e,n,r,i,o,a,l){rp(l!==0||o[Rq]===0,"stream body cannot be pipelined");let c=oxt(i,r,d=>{d?(Li.destroy(c,d),t(d)):(Li.removeAllListeners(c),a.onRequestSent(),n||(e[Sq]=!0),o[Ev]())});Li.addListener(c,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(wxt,"writeStream");async function _xt(t,e,n,r,i,o,a,l){rp(a===n.size,"blob body must have content length");try{if(a!=null&&a!==n.size)throw new Ooe;let c=Buffer.from(await n.arrayBuffer());e.cork(),e.write(c),e.uncork(),e.end(),i.onBodySent(c),i.onRequestSent(),l||(o[Sq]=!0),r[Ev]()}catch(c){t(c)}}s(_xt,"writeBlob");async function eBe(t,e,n,r,i,o,a,l){rp(a!==0||r[Rq]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let p=c;c=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{rp(c===null),o[Pm]?m(o[Pm]):c=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of n){if(o[Pm])throw o[Pm];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),l||(o[Sq]=!0),r[Ev]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(eBe,"writeIterable");nBe.exports=yxt});var Bq=G((uzn,sBe)=>{"use strict";f();var Dg=yi(),{kBodyUsed:xD}=Fs(),Hoe=require("node:assert"),{InvalidArgumentError:Sxt}=Ao(),Rxt=require("node:events"),kxt=[300,301,302,303,307,308],iBe=Symbol("body"),kq=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[iBe]=e,this[xD]=!1}async*[Symbol.asyncIterator](){Hoe(!this[xD],"disturbed"),this[xD]=!0,yield*this[iBe]}},Goe=class{static{s(this,"RedirectHandler")}constructor(e,n,r,i){if(n!=null&&(!Number.isInteger(n)||n<0))throw new Sxt("maxRedirections must be a positive number");Dg.validateHandler(i,r.method,r.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...r,maxRedirections:0},this.maxRedirections=n,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Dg.isStream(this.opts.body)?(Dg.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Hoe(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[xD]=!1,Rxt.prototype.on.call(this.opts.body,"data",function(){this[xD]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new kq(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Dg.isIterable(this.opts.body)&&(this.opts.body=new kq(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,n,r){this.handler.onUpgrade(e,n,r)}onError(e){this.handler.onError(e)}onHeaders(e,n,r,i){if(this.location=this.history.length>=this.maxRedirections||Dg.isDisturbed(this.opts.body)?null:Bxt(e,n),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,n,r,i);let{origin:o,pathname:a,search:l}=Dg.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),c=l?`${a}${l}`:a;this.opts.headers=Dxt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=c,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function Bxt(t,e){if(kxt.indexOf(t)===-1)return null;for(let n=0;n<e.length;n+=2)if(e[n].length===8&&Dg.headerNameToString(e[n])==="location")return e[n+1]}s(Bxt,"parseLocation");function oBe(t,e,n){if(t.length===4)return Dg.headerNameToString(t)==="host";if(e&&Dg.headerNameToString(t).startsWith("content-"))return!0;if(n&&(t.length===13||t.length===6||t.length===19)){let r=Dg.headerNameToString(t);return r==="authorization"||r==="cookie"||r==="proxy-authorization"}return!1}s(oBe,"shouldRemoveHeader");function Dxt(t,e,n){let r=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)oBe(t[i],e,n)||r.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))oBe(i,e,n)||r.push(i,t[i]);else Hoe(t==null,"headers must be an object or an array");return r}s(Dxt,"cleanRequestHeaders");sBe.exports=Goe});var Dq=G((pzn,aBe)=>{"use strict";f();var Pxt=Bq();function Nxt({maxRedirections:t}){return e=>s(function(r,i){let{maxRedirections:o=t}=r;if(!o)return e(r,i);let a=new Pxt(e,o,r,i);return r={...r,maxRedirections:0},e(r,a)},"Intercept")}s(Nxt,"createRedirectInterceptor");aBe.exports=Nxt});var _D=G((gzn,ABe)=>{"use strict";f();var K1=require("node:assert"),pBe=require("node:net"),Lxt=require("node:http"),f2=yi(),{channels:W5}=I5(),Fxt=I3e(),Mxt=S5(),{InvalidArgumentError:Ba,InformationalError:Qxt,ClientDestroyedError:Oxt}=Ao(),Uxt=aD(),{kUrl:Pg,kServerName:Iv,kClient:qxt,kBusy:joe,kConnect:Wxt,kResuming:p2,kRunning:TD,kPending:wD,kSize:ID,kQueue:Nm,kConnected:Gxt,kConnecting:G5,kNeedDrain:wv,kKeepAliveDefaultTimeout:lBe,kHostHeader:Hxt,kPendingIdx:Lm,kRunningIdx:J1,kError:jxt,kPipelining:Pq,kKeepAliveTimeoutValue:Vxt,kMaxHeadersSize:$xt,kKeepAliveMaxTimeout:zxt,kKeepAliveTimeoutThreshold:Yxt,kHeadersTimeout:Kxt,kBodyTimeout:Jxt,kStrictContentLength:Xxt,kConnector:vD,kMaxRedirections:Zxt,kMaxRequests:Voe,kCounter:evt,kClose:tvt,kDestroy:nvt,kDispatch:rvt,kInterceptors:cBe,kLocalAddress:bD,kMaxResponseSize:ivt,kOnError:ovt,kHTTPContext:Da,kMaxConcurrentStreams:svt,kResume:ED}=Fs(),avt=Yke(),lvt=rBe(),uBe=!1,Tv=Symbol("kClosedResolve"),dBe=s(()=>{},"noop");function mBe(t){return t[Pq]??t[Da]?.defaultPipelining??1}s(mBe,"getPipelining");var $oe=class extends Mxt{static{s(this,"Client")}constructor(e,{interceptors:n,maxHeaderSize:r,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:l,bodyTimeout:c,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:v,tls:b,strictContentLength:E,maxCachedSessions:_,maxRedirections:k,connect:D,maxRequestsPerClient:N,localAddress:Q,maxResponseSize:Z,autoSelectFamily:me,autoSelectFamilyAttemptTimeout:te,maxConcurrentStreams:H,allowH2:W}={}){if(super(),d!==void 0)throw new Ba("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Ba("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Ba("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Ba("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Ba("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(r!=null&&!Number.isFinite(r))throw new Ba("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Ba("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Ba("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Ba("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Ba("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Ba("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Ba("headersTimeout must be a positive integer or zero");if(c!=null&&(!Number.isInteger(c)||c<0))throw new Ba("bodyTimeout must be a positive integer or zero");if(D!=null&&typeof D!="function"&&typeof D!="object")throw new Ba("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Ba("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Ba("maxRequestsPerClient must be a positive number");if(Q!=null&&(typeof Q!="string"||pBe.isIP(Q)===0))throw new Ba("localAddress must be valid string IP address");if(Z!=null&&(!Number.isInteger(Z)||Z<-1))throw new Ba("maxResponseSize must be a positive number");if(te!=null&&(!Number.isInteger(te)||te<-1))throw new Ba("autoSelectFamilyAttemptTimeout must be a positive number");if(W!=null&&typeof W!="boolean")throw new Ba("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Ba("maxConcurrentStreams must be a positive integer, greater than 0");typeof D!="function"&&(D=Uxt({...b,maxCachedSessions:_,allowH2:W,socketPath:y,timeout:l,...me?{autoSelectFamily:me,autoSelectFamilyAttemptTimeout:te}:void 0,...D})),n?.Client&&Array.isArray(n.Client)?(this[cBe]=n.Client,uBe||(uBe=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[cBe]=[cvt({maxRedirections:k})],this[Pg]=f2.parseOrigin(e),this[vD]=D,this[Pq]=v??1,this[$xt]=r||Lxt.maxHeaderSize,this[lBe]=p??4e3,this[zxt]=h??6e5,this[Yxt]=g??2e3,this[Vxt]=this[lBe],this[Iv]=null,this[bD]=Q??null,this[p2]=0,this[wv]=0,this[Hxt]=`host: ${this[Pg].hostname}${this[Pg].port?`:${this[Pg].port}`:""}\r
`,this[Jxt]=c??3e5,this[Kxt]=i??3e5,this[Xxt]=E??!0,this[Zxt]=k,this[Voe]=N,this[Tv]=null,this[ivt]=Z>-1?Z:-1,this[svt]=H??100,this[Da]=null,this[Nm]=[],this[J1]=0,this[Lm]=0,this[ED]=re=>zoe(this,re),this[ovt]=re=>hBe(this,re)}get pipelining(){return this[Pq]}set pipelining(e){this[Pq]=e,this[ED](!0)}get[wD](){return this[Nm].length-this[Lm]}get[TD](){return this[Lm]-this[J1]}get[ID](){return this[Nm].length-this[J1]}get[Gxt](){return!!this[Da]&&!this[G5]&&!this[Da].destroyed}get[joe](){return!!(this[Da]?.busy(null)||this[ID]>=(mBe(this)||1)||this[wD]>0)}[Wxt](e){gBe(this),this.once("connect",e)}[rvt](e,n){let r=e.origin||this[Pg].origin,i=new Fxt(r,e,n);return this[Nm].push(i),this[p2]||(f2.bodyLength(i.body)==null&&f2.isIterable(i.body)?(this[p2]=1,queueMicrotask(()=>zoe(this))):this[ED](!0)),this[p2]&&this[wv]!==2&&this[joe]&&(this[wv]=2),this[wv]<2}async[tvt](){return new Promise(e=>{this[ID]?this[Tv]=e:e(null)})}async[nvt](e){return new Promise(n=>{let r=this[Nm].splice(this[Lm]);for(let o=0;o<r.length;o++){let a=r[o];f2.errorRequest(this,a,e)}let i=s(()=>{this[Tv]&&(this[Tv](),this[Tv]=null),n(null)},"callback");this[Da]?(this[Da].destroy(e,i),this[Da]=null):queueMicrotask(i),this[ED]()})}},cvt=Dq();function hBe(t,e){if(t[TD]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){K1(t[Lm]===t[J1]);let n=t[Nm].splice(t[J1]);for(let r=0;r<n.length;r++){let i=n[r];f2.errorRequest(t,i,e)}K1(t[ID]===0)}}s(hBe,"onError");async function gBe(t){K1(!t[G5]),K1(!t[Da]);let{host:e,hostname:n,protocol:r,port:i}=t[Pg];if(n[0]==="["){let o=n.indexOf("]");K1(o!==-1);let a=n.substring(1,o);K1(pBe.isIP(a)),n=a}t[G5]=!0,W5.beforeConnect.hasSubscribers&&W5.beforeConnect.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Da]?.version,servername:t[Iv],localAddress:t[bD]},connector:t[vD]});try{let o=await new Promise((a,l)=>{t[vD]({host:e,hostname:n,protocol:r,port:i,servername:t[Iv],localAddress:t[bD]},(c,u)=>{c?l(c):a(u)})});if(t.destroyed){f2.destroy(o.on("error",dBe),new Oxt);return}K1(o);try{t[Da]=o.alpnProtocol==="h2"?await lvt(t,o):await avt(t,o)}catch(a){throw o.destroy().on("error",dBe),a}t[G5]=!1,o[evt]=0,o[Voe]=t[Voe],o[qxt]=t,o[jxt]=null,W5.connected.hasSubscribers&&W5.connected.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Da]?.version,servername:t[Iv],localAddress:t[bD]},connector:t[vD],socket:o}),t.emit("connect",t[Pg],[t])}catch(o){if(t.destroyed)return;if(t[G5]=!1,W5.connectError.hasSubscribers&&W5.connectError.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Da]?.version,servername:t[Iv],localAddress:t[bD]},connector:t[vD],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(K1(t[TD]===0);t[wD]>0&&t[Nm][t[Lm]].servername===t[Iv];){let a=t[Nm][t[Lm]++];f2.errorRequest(t,a,o)}else hBe(t,o);t.emit("connectionError",t[Pg],[t],o)}t[ED]()}s(gBe,"connect");function fBe(t){t[wv]=0,t.emit("drain",t[Pg],[t])}s(fBe,"emitDrain");function zoe(t,e){t[p2]!==2&&(t[p2]=2,uvt(t,e),t[p2]=0,t[J1]>256&&(t[Nm].splice(0,t[J1]),t[Lm]-=t[J1],t[J1]=0))}s(zoe,"resume");function uvt(t,e){for(;;){if(t.destroyed){K1(t[wD]===0);return}if(t[Tv]&&!t[ID]){t[Tv](),t[Tv]=null;return}if(t[Da]&&t[Da].resume(),t[joe])t[wv]=2;else if(t[wv]===2){e?(t[wv]=1,queueMicrotask(()=>fBe(t))):fBe(t);continue}if(t[wD]===0||t[TD]>=(mBe(t)||1))return;let n=t[Nm][t[Lm]];if(t[Pg].protocol==="https:"&&t[Iv]!==n.servername){if(t[TD]>0)return;t[Iv]=n.servername,t[Da]?.destroy(new Qxt("servername changed"),()=>{t[Da]=null,zoe(t)})}if(t[G5])return;if(!t[Da]){gBe(t);return}if(t[Da].destroyed||t[Da].busy(n))return;!n.aborted&&t[Da].write(n)?t[Lm]++:t[Nm].splice(t[Lm],1)}}s(uvt,"_resume");ABe.exports=$oe});var Yoe=G((xzn,yBe)=>{"use strict";f();var Nq=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};yBe.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new Nq}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new Nq),this.head.push(e)}shift(){let e=this.tail,n=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),n}}});var xBe=G((Ezn,CBe)=>{f();var{kFree:dvt,kConnected:fvt,kPending:pvt,kQueued:mvt,kRunning:hvt,kSize:gvt}=Fs(),m2=Symbol("pool"),Koe=class{static{s(this,"PoolStats")}constructor(e){this[m2]=e}get connected(){return this[m2][fvt]}get free(){return this[m2][dvt]}get pending(){return this[m2][pvt]}get queued(){return this[m2][mvt]}get running(){return this[m2][hvt]}get size(){return this[m2][gvt]}};CBe.exports=Koe});var nse=G((wzn,kBe)=>{"use strict";f();var Avt=S5(),yvt=Yoe(),{kConnected:Joe,kSize:vBe,kRunning:bBe,kPending:EBe,kQueued:SD,kBusy:Cvt,kFree:xvt,kUrl:vvt,kClose:bvt,kDestroy:Evt,kDispatch:Ivt}=Fs(),Tvt=xBe(),Td=Symbol("clients"),Pu=Symbol("needDrain"),RD=Symbol("queue"),Xoe=Symbol("closed resolve"),Zoe=Symbol("onDrain"),IBe=Symbol("onConnect"),TBe=Symbol("onDisconnect"),wBe=Symbol("onConnectionError"),ese=Symbol("get dispatcher"),SBe=Symbol("add client"),RBe=Symbol("remove client"),_Be=Symbol("stats"),tse=class extends Avt{static{s(this,"PoolBase")}constructor(){super(),this[RD]=new yvt,this[Td]=[],this[SD]=0;let e=this;this[Zoe]=s(function(r,i){let o=e[RD],a=!1;for(;!a;){let l=o.shift();if(!l)break;e[SD]--,a=!this.dispatch(l.opts,l.handler)}this[Pu]=a,!this[Pu]&&e[Pu]&&(e[Pu]=!1,e.emit("drain",r,[e,...i])),e[Xoe]&&o.isEmpty()&&Promise.all(e[Td].map(l=>l.close())).then(e[Xoe])},"onDrain"),this[IBe]=(n,r)=>{e.emit("connect",n,[e,...r])},this[TBe]=(n,r,i)=>{e.emit("disconnect",n,[e,...r],i)},this[wBe]=(n,r,i)=>{e.emit("connectionError",n,[e,...r],i)},this[_Be]=new Tvt(this)}get[Cvt](){return this[Pu]}get[Joe](){return this[Td].filter(e=>e[Joe]).length}get[xvt](){return this[Td].filter(e=>e[Joe]&&!e[Pu]).length}get[EBe](){let e=this[SD];for(let{[EBe]:n}of this[Td])e+=n;return e}get[bBe](){let e=0;for(let{[bBe]:n}of this[Td])e+=n;return e}get[vBe](){let e=this[SD];for(let{[vBe]:n}of this[Td])e+=n;return e}get stats(){return this[_Be]}async[bvt](){this[RD].isEmpty()?await Promise.all(this[Td].map(e=>e.close())):await new Promise(e=>{this[Xoe]=e})}async[Evt](e){for(;;){let n=this[RD].shift();if(!n)break;n.handler.onError(e)}await Promise.all(this[Td].map(n=>n.destroy(e)))}[Ivt](e,n){let r=this[ese]();return r?r.dispatch(e,n)||(r[Pu]=!0,this[Pu]=!this[ese]()):(this[Pu]=!0,this[RD].push({opts:e,handler:n}),this[SD]++),!this[Pu]}[SBe](e){return e.on("drain",this[Zoe]).on("connect",this[IBe]).on("disconnect",this[TBe]).on("connectionError",this[wBe]),this[Td].push(e),this[Pu]&&queueMicrotask(()=>{this[Pu]&&this[Zoe](e[vvt],[this,e])}),this}[RBe](e){e.close(()=>{let n=this[Td].indexOf(e);n!==-1&&this[Td].splice(n,1)}),this[Pu]=this[Td].some(n=>!n[Pu]&&n.closed!==!0&&n.destroyed!==!0)}};kBe.exports={PoolBase:tse,kClients:Td,kNeedDrain:Pu,kAddClient:SBe,kRemoveClient:RBe,kGetDispatcher:ese}});var H5=G((Rzn,NBe)=>{"use strict";f();var{PoolBase:wvt,kClients:Lq,kNeedDrain:_vt,kAddClient:Svt,kGetDispatcher:Rvt}=nse(),kvt=_D(),{InvalidArgumentError:rse}=Ao(),BBe=yi(),{kUrl:DBe,kInterceptors:Bvt}=Fs(),Dvt=aD(),ise=Symbol("options"),ose=Symbol("connections"),PBe=Symbol("factory");function Pvt(t,e){return new kvt(t,e)}s(Pvt,"defaultFactory");var sse=class extends wvt{static{s(this,"Pool")}constructor(e,{connections:n,factory:r=Pvt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:l,socketPath:c,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),n!=null&&(!Number.isFinite(n)||n<0))throw new rse("invalid connections");if(typeof r!="function")throw new rse("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new rse("connect must be a function or an object");typeof i!="function"&&(i=Dvt({...a,maxCachedSessions:l,allowH2:p,socketPath:c,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[Bvt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[ose]=n||null,this[DBe]=BBe.parseOrigin(e),this[ise]={...BBe.deepClone(m),connect:i,allowH2:p},this[ise].interceptors=m.interceptors?{...m.interceptors}:void 0,this[PBe]=r,this.on("connectionError",(h,g,y)=>{for(let v of g){let b=this[Lq].indexOf(v);b!==-1&&this[Lq].splice(b,1)}})}[Rvt](){for(let e of this[Lq])if(!e[_vt])return e;if(!this[ose]||this[Lq].length<this[ose]){let e=this[PBe](this[DBe],this[ise]);return this[Svt](e),e}}};NBe.exports=sse});var OBe=G((Dzn,QBe)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:Nvt,InvalidArgumentError:Lvt}=Ao(),{PoolBase:Fvt,kClients:zc,kNeedDrain:kD,kAddClient:Mvt,kRemoveClient:Qvt,kGetDispatcher:Ovt}=nse(),Uvt=H5(),{kUrl:ase,kInterceptors:qvt}=Fs(),{parseOrigin:LBe}=yi(),FBe=Symbol("factory"),Fq=Symbol("options"),MBe=Symbol("kGreatestCommonDivisor"),h2=Symbol("kCurrentWeight"),g2=Symbol("kIndex"),ip=Symbol("kWeight"),Mq=Symbol("kMaxWeightPerServer"),Qq=Symbol("kErrorPenalty");function Wvt(t,e){if(t===0)return e;for(;e!==0;){let n=e;e=t%e,t=n}return t}s(Wvt,"getGreatestCommonDivisor");function Gvt(t,e){return new Uvt(t,e)}s(Gvt,"defaultFactory");var lse=class extends Fvt{static{s(this,"BalancedPool")}constructor(e=[],{factory:n=Gvt,...r}={}){if(super(),this[Fq]=r,this[g2]=-1,this[h2]=0,this[Mq]=this[Fq].maxWeightPerServer||100,this[Qq]=this[Fq].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof n!="function")throw new Lvt("factory must be a function.");this[qvt]=r.interceptors?.BalancedPool&&Array.isArray(r.interceptors.BalancedPool)?r.interceptors.BalancedPool:[],this[FBe]=n;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let n=LBe(e).origin;if(this[zc].find(i=>i[ase].origin===n&&i.closed!==!0&&i.destroyed!==!0))return this;let r=this[FBe](n,Object.assign({},this[Fq]));this[Mvt](r),r.on("connect",()=>{r[ip]=Math.min(this[Mq],r[ip]+this[Qq])}),r.on("connectionError",()=>{r[ip]=Math.max(1,r[ip]-this[Qq]),this._updateBalancedPoolStats()}),r.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(r[ip]=Math.max(1,r[ip]-this[Qq]),this._updateBalancedPoolStats())});for(let i of this[zc])i[ip]=this[Mq];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let n=0;n<this[zc].length;n++)e=Wvt(this[zc][n][ip],e);this[MBe]=e}removeUpstream(e){let n=LBe(e).origin,r=this[zc].find(i=>i[ase].origin===n&&i.closed!==!0&&i.destroyed!==!0);return r&&this[Qvt](r),this}get upstreams(){return this[zc].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[ase].origin)}[Ovt](){if(this[zc].length===0)throw new Nvt;if(!this[zc].find(o=>!o[kD]&&o.closed!==!0&&o.destroyed!==!0)||this[zc].map(o=>o[kD]).reduce((o,a)=>o&&a,!0))return;let r=0,i=this[zc].findIndex(o=>!o[kD]);for(;r++<this[zc].length;){this[g2]=(this[g2]+1)%this[zc].length;let o=this[zc][this[g2]];if(o[ip]>this[zc][i][ip]&&!o[kD]&&(i=this[g2]),this[g2]===0&&(this[h2]=this[h2]-this[MBe],this[h2]<=0&&(this[h2]=this[Mq])),o[ip]>=this[h2]&&!o[kD])return o}return this[h2]=this[zc][i][ip],this[g2]=i,this[zc][i]}};QBe.exports=lse});var j5=G((Lzn,VBe)=>{"use strict";f();var{InvalidArgumentError:Oq}=Ao(),{kClients:_v,kRunning:UBe,kClose:Hvt,kDestroy:jvt,kDispatch:Vvt,kInterceptors:$vt}=Fs(),zvt=S5(),Yvt=H5(),Kvt=_D(),Jvt=yi(),Xvt=Dq(),qBe=Symbol("onConnect"),WBe=Symbol("onDisconnect"),GBe=Symbol("onConnectionError"),Zvt=Symbol("maxRedirections"),HBe=Symbol("onDrain"),jBe=Symbol("factory"),cse=Symbol("options");function ebt(t,e){return e&&e.connections===1?new Kvt(t,e):new Yvt(t,e)}s(ebt,"defaultFactory");var use=class extends zvt{static{s(this,"Agent")}constructor({factory:e=ebt,maxRedirections:n=0,connect:r,...i}={}){if(super(),typeof e!="function")throw new Oq("factory must be a function.");if(r!=null&&typeof r!="function"&&typeof r!="object")throw new Oq("connect must be a function or an object");if(!Number.isInteger(n)||n<0)throw new Oq("maxRedirections must be a positive number");r&&typeof r!="function"&&(r={...r}),this[$vt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[Xvt({maxRedirections:n})],this[cse]={...Jvt.deepClone(i),connect:r},this[cse].interceptors=i.interceptors?{...i.interceptors}:void 0,this[Zvt]=n,this[jBe]=e,this[_v]=new Map,this[HBe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[qBe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[WBe]=(o,a,l)=>{this.emit("disconnect",o,[this,...a],l)},this[GBe]=(o,a,l)=>{this.emit("connectionError",o,[this,...a],l)}}get[UBe](){let e=0;for(let n of this[_v].values())e+=n[UBe];return e}[Vvt](e,n){let r;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))r=String(e.origin);else throw new Oq("opts.origin must be a non-empty string or URL.");let i=this[_v].get(r);return i||(i=this[jBe](e.origin,this[cse]).on("drain",this[HBe]).on("connect",this[qBe]).on("disconnect",this[WBe]).on("connectionError",this[GBe]),this[_v].set(r,i)),i.dispatch(e,n)}async[Hvt](){let e=[];for(let n of this[_v].values())e.push(n.close());this[_v].clear(),await Promise.all(e)}async[jvt](e){let n=[];for(let r of this[_v].values())n.push(r.destroy(e));this[_v].clear(),await Promise.all(n)}};VBe.exports=use});var pse=G((Qzn,KBe)=>{"use strict";f();var{kProxy:tbt,kClose:nbt,kDestroy:rbt,kInterceptors:ibt}=Fs(),{URL:BD}=require("node:url"),obt=j5(),sbt=H5(),abt=S5(),{InvalidArgumentError:Wq,RequestAbortedError:lbt,SecureProxyConnectionError:cbt}=Ao(),$Be=aD(),Uq=Symbol("proxy agent"),qq=Symbol("proxy client"),DD=Symbol("proxy headers"),dse=Symbol("request tls settings"),zBe=Symbol("proxy tls settings"),YBe=Symbol("connect endpoint function");function ubt(t){return t==="https:"?443:80}s(ubt,"defaultProtocolPort");function dbt(t,e){return new sbt(t,e)}s(dbt,"defaultFactory");var fbt=s(()=>{},"noop"),fse=class extends abt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof BD)&&!e.uri)throw new Wq("Proxy uri is mandatory");let{clientFactory:n=dbt}=e;if(typeof n!="function")throw new Wq("Proxy opts.clientFactory must be a function.");let r=this.#e(e),{href:i,origin:o,port:a,protocol:l,username:c,password:u,hostname:d}=r;if(this[tbt]={uri:i,protocol:l},this[ibt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[dse]=e.requestTls,this[zBe]=e.proxyTls,this[DD]=e.headers||{},e.auth&&e.token)throw new Wq("opts.auth cannot be used in combination with opts.token");e.auth?this[DD]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[DD]["proxy-authorization"]=e.token:c&&u&&(this[DD]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=$Be({...e.proxyTls});this[YBe]=$Be({...e.requestTls}),this[qq]=n(r,{connect:p}),this[Uq]=new obt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${ubt(m.protocol)}`);try{let{socket:y,statusCode:v}=await this[qq].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[DD],host:m.host},servername:this[zBe]?.servername||d});if(v!==200&&(y.on("error",fbt).destroy(),h(new lbt(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let b;this[dse]?b=this[dse].servername:b=m.servername,this[YBe]({...m,servername:b,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new cbt(y)):h(y)}},"connect")})}dispatch(e,n){let r=pbt(e.headers);if(mbt(r),r&&!("host"in r)&&!("Host"in r)){let{host:i}=new BD(e.origin);r.host=i}return this[Uq].dispatch({...e,headers:r},n)}#e(e){return typeof e=="string"?new BD(e):e instanceof BD?e:new BD(e.uri)}async[nbt](){await this[Uq].close(),await this[qq].close()}async[rbt](){await this[Uq].destroy(),await this[qq].destroy()}};function pbt(t){if(Array.isArray(t)){let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}return t}s(pbt,"buildHeaders");function mbt(t){if(t&&Object.keys(t).find(n=>n.toLowerCase()==="proxy-authorization"))throw new Wq("Proxy-Authorization should be sent in ProxyAgent constructor")}s(mbt,"throwIfProxyAuthIsSent");KBe.exports=fse});var n8e=G((qzn,t8e)=>{"use strict";f();var hbt=S5(),{kClose:gbt,kDestroy:Abt,kClosed:JBe,kDestroyed:XBe,kDispatch:ybt,kNoProxyAgent:PD,kHttpProxyAgent:Sv,kHttpsProxyAgent:A2}=Fs(),ZBe=pse(),Cbt=j5(),xbt={"http:":80,"https:":443},e8e=!1,mse=class extends hbt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,e8e||(e8e=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:n,httpsProxy:r,noProxy:i,...o}=e;this[PD]=new Cbt(o);let a=n??process.env.http_proxy??process.env.HTTP_PROXY;a?this[Sv]=new ZBe({...o,uri:a}):this[Sv]=this[PD];let l=r??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[A2]=new ZBe({...o,uri:l}):this[A2]=this[Sv],this.#o()}[ybt](e,n){let r=new URL(e.origin);return this.#r(r).dispatch(e,n)}async[gbt](){await this[PD].close(),this[Sv][JBe]||await this[Sv].close(),this[A2][JBe]||await this[A2].close()}async[Abt](e){await this[PD].destroy(e),this[Sv][XBe]||await this[Sv].destroy(e),this[A2][XBe]||await this[A2].destroy(e)}#r(e){let{protocol:n,host:r,port:i}=e;return r=r.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||xbt[n]||0,this.#n(r,i)?n==="https:"?this[A2]:this[Sv]:this[PD]}#n(e,n){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let r=0;r<this.#t.length;r++){let i=this.#t[r];if(!(i.port&&i.port!==n)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,n=e.split(/[,\s]/),r=[];for(let i=0;i<n.length;i++){let o=n[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);r.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=r}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};t8e.exports=mse});var Gq=G((Hzn,s8e)=>{"use strict";f();var V5=require("node:assert"),{kRetryHandlerDefaultRetry:r8e}=Fs(),{RequestRetryError:ND}=Ao(),{isDisturbed:i8e,parseHeaders:vbt,parseRangeHeader:o8e,wrapRequestBody:bbt}=yi();function Ebt(t){let e=Date.now();return new Date(t).getTime()-e}s(Ebt,"calculateRetryAfterHeader");var hse=class t{static{s(this,"RetryHandler")}constructor(e,n){let{retryOptions:r,...i}=e,{retry:o,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=r??{};this.dispatch=n.dispatch,this.handler=n.handler,this.opts={...i,body:bbt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[r8e],retryAfter:m??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,n,r){this.handler.onUpgrade&&this.handler.onUpgrade(e,n,r)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[r8e](e,{state:n,opts:r},i){let{statusCode:o,code:a,headers:l}=e,{method:c,retryOptions:u}=r,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:v}=u,{counter:b}=n;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(v)&&!v.includes(c)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(b>d){i(e);return}let E=l?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?Ebt(E):E*1e3);let _=E>0?Math.min(E,m):Math.min(p*h**(b-1),m);setTimeout(()=>i(null),_)}onHeaders(e,n,r,i){let o=vbt(n);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,n,r,i):(this.abort(new ND("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new ND("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let l=o8e(o["content-range"]);if(!l)return this.abort(new ND("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new ND("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:c,size:u,end:d=u-1}=l;return V5(this.start===c,"content-range mismatch"),V5(this.end==null||this.end===d,"content-range mismatch"),this.resume=r,!0}if(this.end==null){if(e===206){let l=o8e(o["content-range"]);if(l==null)return this.handler.onHeaders(e,n,r,i);let{start:c,size:u,end:d=u-1}=l;V5(c!=null&&Number.isFinite(c),"content-range mismatch"),V5(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=c,this.end=d}if(this.end==null){let l=o["content-length"];this.end=l!=null?Number(l)-1:null}return V5(Number.isFinite(this.start)),V5(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=r,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,n,r,i)}let a=new ND("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||i8e(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},n.bind(this));function n(r){if(r!=null||this.aborted||i8e(this.opts.body))return this.handler.onError(r);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(n,"onRetry")}};s8e.exports=hse});var l8e=G(($zn,a8e)=>{"use strict";f();var Ibt=oD(),Tbt=Gq(),gse=class extends Ibt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,n={}){super(n),this.#e=e,this.#t=n}dispatch(e,n){let r=new Tbt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:n});return this.#e.dispatch(e,r)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};a8e.exports=gse});var bse=G((Kzn,A8e)=>{"use strict";f();var p8e=require("node:assert"),{Readable:wbt}=require("node:stream"),{RequestAbortedError:m8e,NotSupportedError:_bt,InvalidArgumentError:Sbt,AbortError:Ase}=Ao(),h8e=yi(),{ReadableStreamFrom:Rbt}=yi(),T0=Symbol("kConsume"),LD=Symbol("kReading"),Rv=Symbol("kBody"),c8e=Symbol("kAbort"),g8e=Symbol("kContentType"),u8e=Symbol("kContentLength"),kbt=s(()=>{},"noop"),yse=class extends wbt{static{s(this,"BodyReadable")}constructor({resume:e,abort:n,contentType:r="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[c8e]=n,this[T0]=null,this[Rv]=null,this[g8e]=r,this[u8e]=i,this[LD]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new m8e),e&&this[c8e](),super.destroy(e)}_destroy(e,n){this[LD]?n(e):setImmediate(()=>{n(e)})}on(e,...n){return(e==="data"||e==="readable")&&(this[LD]=!0),super.on(e,...n)}addListener(e,...n){return this.on(e,...n)}off(e,...n){let r=super.off(e,...n);return(e==="data"||e==="readable")&&(this[LD]=this.listenerCount("data")>0||this.listenerCount("readable")>0),r}removeListener(e,...n){return this.off(e,...n)}push(e){return this[T0]&&e!==null?(xse(this[T0],e),this[LD]?super.push(e):!0):super.push(e)}async text(){return FD(this,"text")}async json(){return FD(this,"json")}async blob(){return FD(this,"blob")}async bytes(){return FD(this,"bytes")}async arrayBuffer(){return FD(this,"arrayBuffer")}async formData(){throw new _bt}get bodyUsed(){return h8e.isDisturbed(this)}get body(){return this[Rv]||(this[Rv]=Rbt(this),this[T0]&&(this[Rv].getReader(),p8e(this[Rv].locked))),this[Rv]}async dump(e){let n=Number.isFinite(e?.limit)?e.limit:131072,r=e?.signal;if(r!=null&&(typeof r!="object"||!("aborted"in r)))throw new Sbt("signal must be an AbortSignal");return r?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[u8e]>n&&this.destroy(new Ase);let a=s(()=>{this.destroy(r.reason??new Ase)},"onAbort");r?.addEventListener("abort",a),this.on("close",function(){r?.removeEventListener("abort",a),r?.aborted?o(r.reason??new Ase):i(null)}).on("error",kbt).on("data",function(l){n-=l.length,n<=0&&this.destroy()}).resume()})}};function Bbt(t){return t[Rv]&&t[Rv].locked===!0||t[T0]}s(Bbt,"isLocked");function Dbt(t){return h8e.isDisturbed(t)||Bbt(t)}s(Dbt,"isUnusable");async function FD(t,e){return p8e(!t[T0]),new Promise((n,r)=>{if(Dbt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{r(o)}).on("close",()=>{r(new TypeError("unusable"))}):r(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[T0]={type:e,stream:t,resolve:n,reject:r,length:0,body:[]},t.on("error",function(i){vse(this[T0],i)}).on("close",function(){this[T0].body!==null&&vse(this[T0],new m8e)}),Pbt(t[T0])})})}s(FD,"consume");function Pbt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let n=e.bufferIndex,r=e.buffer.length;for(let i=n;i<r;i++)xse(t,e.buffer[i])}else for(let n of e.buffer)xse(t,n);for(e.endEmitted?f8e(this[T0]):t.stream.on("end",function(){f8e(this[T0])}),t.stream.resume();t.stream.read()!=null;);}s(Pbt,"consumeStart");function Cse(t,e){if(t.length===0||e===0)return"";let n=t.length===1?t[0]:Buffer.concat(t,e),r=n.length,i=r>2&&n[0]===239&&n[1]===187&&n[2]===191?3:0;return n.utf8Slice(i,r)}s(Cse,"chunksDecode");function d8e(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let n=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),r=0;for(let i=0;i<t.length;++i){let o=t[i];n.set(o,r),r+=o.length}return n}s(d8e,"chunksConcat");function f8e(t){let{type:e,body:n,resolve:r,stream:i,length:o}=t;try{e==="text"?r(Cse(n,o)):e==="json"?r(JSON.parse(Cse(n,o))):e==="arrayBuffer"?r(d8e(n,o).buffer):e==="blob"?r(new Blob(n,{type:i[g8e]})):e==="bytes"&&r(d8e(n,o)),vse(t)}catch(a){i.destroy(a)}}s(f8e,"consumeEnd");function xse(t,e){t.length+=e.length,t.body.push(e)}s(xse,"consumePush");function vse(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(vse,"consumeFinish");A8e.exports={Readable:yse,chunksDecode:Cse}});var Ese=G((Zzn,b8e)=>{f();var Nbt=require("node:assert"),{ResponseStatusCodeError:y8e}=Ao(),{chunksDecode:C8e}=bse(),Lbt=128*1024;async function Fbt({callback:t,body:e,contentType:n,statusCode:r,statusMessage:i,headers:o}){Nbt(e);let a=[],l=0;try{for await(let p of e)if(a.push(p),l+=p.length,l>Lbt){a=[],l=0;break}}catch{a=[],l=0}let c=`Response status code ${r}${i?`: ${i}`:""}`;if(r===204||!n||!l){queueMicrotask(()=>t(new y8e(c,r,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{x8e(n)?d=JSON.parse(C8e(a,l)):v8e(n)&&(d=C8e(a,l))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new y8e(c,r,o,d)))}s(Fbt,"getResolveErrorBodyCallback");var x8e=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),v8e=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");b8e.exports={getResolveErrorBodyCallback:Fbt,isContentTypeApplicationJson:x8e,isContentTypeText:v8e}});var T8e=G((nYn,Ise)=>{"use strict";f();var Mbt=require("node:assert"),{Readable:Qbt}=bse(),{InvalidArgumentError:$5,RequestAbortedError:E8e}=Ao(),w0=yi(),{getResolveErrorBodyCallback:Obt}=Ese(),{AsyncResource:Ubt}=require("node:async_hooks"),Hq=class extends Ubt{static{s(this,"RequestHandler")}constructor(e,n){if(!e||typeof e!="object")throw new $5("invalid opts");let{signal:r,method:i,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u,highWaterMark:d}=e;try{if(typeof n!="function")throw new $5("invalid callback");if(d&&(typeof d!="number"||d<0))throw new $5("invalid highWaterMark");if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new $5("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new $5("invalid method");if(l&&typeof l!="function")throw new $5("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw w0.isStream(a)&&w0.destroy(a.on("error",w0.nop),p),p}this.method=i,this.responseHeaders=c||null,this.opaque=o||null,this.callback=n,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=u,this.highWaterMark=d,this.signal=r,this.reason=null,this.removeAbortListener=null,w0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new E8e:this.removeAbortListener=w0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new E8e,this.res?w0.destroy(this.res.on("error",w0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,n){if(this.reason){e(this.reason);return}Mbt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{callback:o,opaque:a,abort:l,context:c,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?w0.parseRawHeaders(n):w0.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?w0.parseHeaders(n):p,h=m["content-type"],g=m["content-length"],y=new Qbt({resume:r,abort:l,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(Obt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:c}))}onData(e){return this.res.push(e)}onComplete(e){w0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:n,callback:r,body:i,opaque:o}=this;r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:o})})),n&&(this.res=null,queueMicrotask(()=>{w0.destroy(n,e)})),i&&(this.body=null,w0.destroy(i,e)),this.removeAbortListener&&(n?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function I8e(t,e){if(e===void 0)return new Promise((n,r)=>{I8e.call(this,t,(i,o)=>i?r(i):n(o))});try{this.dispatch(t,new Hq(t,e))}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(I8e,"request");Ise.exports=I8e;Ise.exports.RequestHandler=Hq});var MD=G((oYn,S8e)=>{f();var{addAbortListener:qbt}=yi(),{RequestAbortedError:Wbt}=Ao(),z5=Symbol("kListener"),Ng=Symbol("kSignal");function w8e(t){t.abort?t.abort(t[Ng]?.reason):t.reason=t[Ng]?.reason??new Wbt,_8e(t)}s(w8e,"abort");function Gbt(t,e){if(t.reason=null,t[Ng]=null,t[z5]=null,!!e){if(e.aborted){w8e(t);return}t[Ng]=e,t[z5]=()=>{w8e(t)},qbt(t[Ng],t[z5])}}s(Gbt,"addSignal");function _8e(t){t[Ng]&&("removeEventListener"in t[Ng]?t[Ng].removeEventListener("abort",t[z5]):t[Ng].removeListener("abort",t[z5]),t[Ng]=null,t[z5]=null)}s(_8e,"removeSignal");S8e.exports={addSignal:Gbt,removeSignal:_8e}});var D8e=G((lYn,B8e)=>{"use strict";f();var Hbt=require("node:assert"),{finished:jbt,PassThrough:Vbt}=require("node:stream"),{InvalidArgumentError:Y5,InvalidReturnValueError:$bt}=Ao(),Fm=yi(),{getResolveErrorBodyCallback:zbt}=Ese(),{AsyncResource:Ybt}=require("node:async_hooks"),{addSignal:Kbt,removeSignal:R8e}=MD(),Tse=class extends Ybt{static{s(this,"StreamHandler")}constructor(e,n,r){if(!e||typeof e!="object")throw new Y5("invalid opts");let{signal:i,method:o,opaque:a,body:l,onInfo:c,responseHeaders:u,throwOnError:d}=e;try{if(typeof r!="function")throw new Y5("invalid callback");if(typeof n!="function")throw new Y5("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new Y5("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new Y5("invalid method");if(c&&typeof c!="function")throw new Y5("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Fm.isStream(l)&&Fm.destroy(l.on("error",Fm.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=n,this.callback=r,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=c||null,this.throwOnError=d||!1,Fm.isStream(l)&&l.on("error",p=>{this.onError(p)}),Kbt(this,i)}onConnect(e,n){if(this.reason){e(this.reason);return}Hbt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{factory:o,opaque:a,context:l,callback:c,responseHeaders:u}=this,d=u==="raw"?Fm.parseRawHeaders(n):Fm.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Fm.parseHeaders(n):d)["content-type"];p=new Vbt,this.callback=null,this.runInAsyncScope(zbt,null,{callback:c,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:l}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new $bt("expected Writable");jbt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:v,trailers:b,abort:E}=this;this.res=null,(h||!y.readable)&&Fm.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:v,trailers:b}),h&&E()})}return p.on("drain",r),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:n}=this;return n?n.write(e):!0}onComplete(e){let{res:n}=this;R8e(this),n&&(this.trailers=Fm.parseHeaders(e),n.end())}onError(e){let{res:n,callback:r,opaque:i,body:o}=this;R8e(this),this.factory=null,n?(this.res=null,Fm.destroy(n,e)):r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:i})})),o&&(this.body=null,Fm.destroy(o,e))}};function k8e(t,e,n){if(n===void 0)return new Promise((r,i)=>{k8e.call(this,t,e,(o,a)=>o?i(o):r(a))});try{this.dispatch(t,new Tse(t,e,n))}catch(r){if(typeof n!="function")throw r;let i=t?.opaque;queueMicrotask(()=>n(r,{opaque:i}))}}s(k8e,"stream");B8e.exports=k8e});var F8e=G((dYn,L8e)=>{"use strict";f();var{Readable:N8e,Duplex:Jbt,PassThrough:Xbt}=require("node:stream"),{InvalidArgumentError:QD,InvalidReturnValueError:Zbt,RequestAbortedError:wse}=Ao(),op=yi(),{AsyncResource:eEt}=require("node:async_hooks"),{addSignal:tEt,removeSignal:nEt}=MD(),P8e=require("node:assert"),K5=Symbol("resume"),_se=class extends N8e{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[K5]=null}_read(){let{[K5]:e}=this;e&&(this[K5]=null,e())}_destroy(e,n){this._read(),n(e)}},Sse=class extends N8e{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[K5]=e}_read(){this[K5]()}_destroy(e,n){!e&&!this._readableState.endEmitted&&(e=new wse),n(e)}},Rse=class extends eEt{static{s(this,"PipelineHandler")}constructor(e,n){if(!e||typeof e!="object")throw new QD("invalid opts");if(typeof n!="function")throw new QD("invalid handler");let{signal:r,method:i,opaque:o,onInfo:a,responseHeaders:l}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new QD("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new QD("invalid method");if(a&&typeof a!="function")throw new QD("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=l||null,this.handler=n,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new _se().on("error",op.nop),this.ret=new Jbt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:c}=this;c?.resume&&c.resume()},"read"),write:s((c,u,d)=>{let{req:p}=this;p.push(c,u)||p._readableState.destroyed?d():p[K5]=d},"write"),destroy:s((c,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!c&&!h._readableState.endEmitted&&(c=new wse),g&&c&&g(),op.destroy(d,c),op.destroy(p,c),op.destroy(m,c),nEt(this),u(c)},"destroy")}).on("prefinish",()=>{let{req:c}=this;c.push(null)}),this.res=null,tEt(this,r)}onConnect(e,n){let{ret:r,res:i}=this;if(this.reason){e(this.reason);return}P8e(!i,"pipeline cannot be retried"),P8e(!r.destroyed),this.abort=e,this.context=n}onHeaders(e,n,r){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let c=this.responseHeaders==="raw"?op.parseRawHeaders(n):op.parseHeaders(n);this.onInfo({statusCode:e,headers:c})}return}this.res=new Sse(r);let l;try{this.handler=null;let c=this.responseHeaders==="raw"?op.parseRawHeaders(n):op.parseHeaders(n);l=this.runInAsyncScope(o,null,{statusCode:e,headers:c,opaque:i,body:this.res,context:a})}catch(c){throw this.res.on("error",op.nop),c}if(!l||typeof l.on!="function")throw new Zbt("expected Readable");l.on("data",c=>{let{ret:u,body:d}=this;!u.push(c)&&d.pause&&d.pause()}).on("error",c=>{let{ret:u}=this;op.destroy(u,c)}).on("end",()=>{let{ret:c}=this;c.push(null)}).on("close",()=>{let{ret:c}=this;c._readableState.ended||op.destroy(c,new wse)}),this.body=l}onData(e){let{res:n}=this;return n.push(e)}onComplete(e){let{res:n}=this;n.push(null)}onError(e){let{ret:n}=this;this.handler=null,op.destroy(n,e)}};function rEt(t,e){try{let n=new Rse(t,e);return this.dispatch({...t,body:n.req},n),n.ret}catch(n){return new Xbt().destroy(n)}}s(rEt,"pipeline");L8e.exports=rEt});var W8e=G((mYn,q8e)=>{"use strict";f();var{InvalidArgumentError:kse,SocketError:iEt}=Ao(),{AsyncResource:oEt}=require("node:async_hooks"),M8e=yi(),{addSignal:sEt,removeSignal:Q8e}=MD(),O8e=require("node:assert"),Bse=class extends oEt{static{s(this,"UpgradeHandler")}constructor(e,n){if(!e||typeof e!="object")throw new kse("invalid opts");if(typeof n!="function")throw new kse("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new kse("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=n,this.abort=null,this.context=null,sEt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}O8e(this.callback),this.abort=e,this.context=null}onHeaders(){throw new iEt("bad upgrade",null)}onUpgrade(e,n,r){O8e(e===101);let{callback:i,opaque:o,context:a}=this;Q8e(this),this.callback=null;let l=this.responseHeaders==="raw"?M8e.parseRawHeaders(n):M8e.parseHeaders(n);this.runInAsyncScope(i,null,null,{headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;Q8e(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function U8e(t,e){if(e===void 0)return new Promise((n,r)=>{U8e.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new Bse(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(U8e,"upgrade");q8e.exports=U8e});var $8e=G((AYn,V8e)=>{"use strict";f();var aEt=require("node:assert"),{AsyncResource:lEt}=require("node:async_hooks"),{InvalidArgumentError:Dse,SocketError:cEt}=Ao(),G8e=yi(),{addSignal:uEt,removeSignal:H8e}=MD(),Pse=class extends lEt{static{s(this,"ConnectHandler")}constructor(e,n){if(!e||typeof e!="object")throw new Dse("invalid opts");if(typeof n!="function")throw new Dse("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new Dse("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=n,this.abort=null,uEt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}aEt(this.callback),this.abort=e,this.context=n}onHeaders(){throw new cEt("bad connect",null)}onUpgrade(e,n,r){let{callback:i,opaque:o,context:a}=this;H8e(this),this.callback=null;let l=n;l!=null&&(l=this.responseHeaders==="raw"?G8e.parseRawHeaders(n):G8e.parseHeaders(n)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;H8e(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function j8e(t,e){if(e===void 0)return new Promise((n,r)=>{j8e.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new Pse(t,e);this.dispatch({...t,method:"CONNECT"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(j8e,"connect");V8e.exports=j8e});var z8e=G((xYn,J5)=>{"use strict";f();J5.exports.request=T8e();J5.exports.stream=D8e();J5.exports.pipeline=F8e();J5.exports.upgrade=W8e();J5.exports.connect=$8e()});var Lse=G((bYn,Y8e)=>{"use strict";f();var{UndiciError:dEt}=Ao(),Nse=class t extends dEt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};Y8e.exports={MockNotMatchedError:Nse}});var X5=G((TYn,K8e)=>{"use strict";f();K8e.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var OD=G((_Yn,aDe)=>{"use strict";f();var{MockNotMatchedError:y2}=Lse(),{kDispatches:jq,kMockAgent:fEt,kOriginalDispatch:pEt,kOrigin:mEt,kGetNetConnect:hEt}=X5(),{buildURL:gEt}=yi(),{STATUS_CODES:AEt}=require("node:http"),{types:{isPromise:yEt}}=require("node:util");function X1(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(X1,"matchValue");function X8e(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e.toLocaleLowerCase(),n]))}s(X8e,"lowerCaseEntries");function Z8e(t,e){if(Array.isArray(t)){for(let n=0;n<t.length;n+=2)if(t[n].toLocaleLowerCase()===e.toLocaleLowerCase())return t[n+1];return}else return typeof t.get=="function"?t.get(e):X8e(t)[e.toLocaleLowerCase()]}s(Z8e,"getHeaderByName");function Qse(t){let e=t.slice(),n=[];for(let r=0;r<e.length;r+=2)n.push([e[r],e[r+1]]);return Object.fromEntries(n)}s(Qse,"buildHeadersFromArray");function eDe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Qse(e)),t.headers(e?X8e(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[n,r]of Object.entries(t.headers)){let i=Z8e(e,n);if(!X1(r,i))return!1}return!0}s(eDe,"matchHeaders");function J8e(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let n=new URLSearchParams(e.pop());return n.sort(),[...e,n.toString()].join("?")}s(J8e,"safeUrl");function CEt(t,{path:e,method:n,body:r,headers:i}){let o=X1(t.path,e),a=X1(t.method,n),l=typeof t.body<"u"?X1(t.body,r):!0,c=eDe(t,i);return o&&a&&l&&c}s(CEt,"matchKey");function tDe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(tDe,"getResponseData");function nDe(t,e){let n=e.query?gEt(e.path,e.query):e.path,r=typeof n=="string"?J8e(n):n,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>X1(J8e(o),r));if(i.length===0)throw new y2(`Mock dispatch not matched for path '${r}'`);if(i=i.filter(({method:o})=>X1(o,e.method)),i.length===0)throw new y2(`Mock dispatch not matched for method '${e.method}' on path '${r}'`);if(i=i.filter(({body:o})=>typeof o<"u"?X1(o,e.body):!0),i.length===0)throw new y2(`Mock dispatch not matched for body '${e.body}' on path '${r}'`);if(i=i.filter(o=>eDe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new y2(`Mock dispatch not matched for headers '${o}' on path '${r}'`)}return i[0]}s(nDe,"getMockDispatch");function xEt(t,e,n){let r={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof n=="function"?{callback:n}:{...n},o={...r,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(xEt,"addMockDispatch");function Fse(t,e){let n=t.findIndex(r=>r.consumed?CEt(r,e):!1);n!==-1&&t.splice(n,1)}s(Fse,"deleteMockDispatch");function rDe(t){let{path:e,method:n,body:r,headers:i,query:o}=t;return{path:e,method:n,body:r,headers:i,query:o}}s(rDe,"buildKey");function Mse(t){let e=Object.keys(t),n=[];for(let r=0;r<e.length;++r){let i=e[r],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let l=0;l<o.length;++l)n.push(a,Buffer.from(`${o[l]}`));else n.push(a,Buffer.from(`${o}`))}return n}s(Mse,"generateKeyValues");function iDe(t){return AEt[t]||"unknown"}s(iDe,"getStatusText");async function vEt(t){let e=[];for await(let n of t)e.push(n);return Buffer.concat(e).toString("utf8")}s(vEt,"getResponse");function oDe(t,e){let n=rDe(t),r=nDe(this[jq],n);r.timesInvoked++,r.data.callback&&(r.data={...r.data,...r.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:l,error:c},delay:u,persist:d}=r,{timesInvoked:p,times:m}=r;if(r.consumed=!d&&p>=m,r.pending=p<m,c!==null)return Fse(this[jq],n),e.onError(c),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[jq])},u):h(this[jq]);function h(y,v=o){let b=Array.isArray(t.headers)?Qse(t.headers):t.headers,E=typeof v=="function"?v({...t,headers:b}):v;if(yEt(E)){E.then(N=>h(y,N));return}let _=tDe(E),k=Mse(a),D=Mse(l);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,iDe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(D),Fse(y,n)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(oDe,"mockDispatch");function bEt(){let t=this[fEt],e=this[mEt],n=this[pEt];return s(function(i,o){if(t.isMockActive)try{oDe.call(this,i,o)}catch(a){if(a instanceof y2){let l=t[hEt]();if(l===!1)throw new y2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(sDe(l,e))n.call(this,i,o);else throw new y2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else n.call(this,i,o)},"dispatch")}s(bEt,"buildMockDispatch");function sDe(t,e){let n=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(r=>X1(r,n.host)))}s(sDe,"checkNetConnect");function EEt(t){if(t){let{agent:e,...n}=t;return n}}s(EEt,"buildMockOptions");aDe.exports={getResponseData:tDe,getMockDispatch:nDe,addMockDispatch:xEt,deleteMockDispatch:Fse,buildKey:rDe,generateKeyValues:Mse,matchValue:X1,getResponse:vEt,getStatusText:iDe,mockDispatch:oDe,buildMockDispatch:bEt,checkNetConnect:sDe,buildMockOptions:EEt,getHeaderByName:Z8e,buildHeadersFromArray:Qse}});var jse=G((kYn,Hse)=>{"use strict";f();var{getResponseData:IEt,buildKey:TEt,addMockDispatch:Ose}=OD(),{kDispatches:Vq,kDispatchKey:$q,kDefaultHeaders:Use,kDefaultTrailers:qse,kContentLength:Wse,kMockDispatch:zq}=X5(),{InvalidArgumentError:Lg}=Ao(),{buildURL:wEt}=yi(),Z5=class{static{s(this,"MockScope")}constructor(e){this[zq]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Lg("waitInMs must be a valid integer > 0");return this[zq].delay=e,this}persist(){return this[zq].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Lg("repeatTimes must be a valid integer > 0");return this[zq].times=e,this}},Gse=class{static{s(this,"MockInterceptor")}constructor(e,n){if(typeof e!="object")throw new Lg("opts must be an object");if(typeof e.path>"u")throw new Lg("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=wEt(e.path,e.query);else{let r=new URL(e.path,"data://");e.path=r.pathname+r.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[$q]=TEt(e),this[Vq]=n,this[Use]={},this[qse]={},this[Wse]=!1}createMockScopeDispatchData({statusCode:e,data:n,responseOptions:r}){let i=IEt(n),o=this[Wse]?{"content-length":i.length}:{},a={...this[Use],...o,...r.headers},l={...this[qse],...r.trailers};return{statusCode:e,data:n,headers:a,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Lg("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Lg("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(l=>{let c=e(l);if(typeof c!="object"||c===null)throw new Lg("reply options callback must return an object");let u={data:"",responseOptions:{},...c};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=Ose(this[Vq],this[$q],o);return new Z5(a)}let n={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(n);let r=this.createMockScopeDispatchData(n),i=Ose(this[Vq],this[$q],r);return new Z5(i)}replyWithError(e){if(typeof e>"u")throw new Lg("error must be defined");let n=Ose(this[Vq],this[$q],{error:e});return new Z5(n)}defaultReplyHeaders(e){if(typeof e>"u")throw new Lg("headers must be defined");return this[Use]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Lg("trailers must be defined");return this[qse]=e,this}replyContentLength(){return this[Wse]=!0,this}};Hse.exports.MockInterceptor=Gse;Hse.exports.MockScope=Z5});var zse=G((PYn,mDe)=>{"use strict";f();var{promisify:_Et}=require("node:util"),SEt=_D(),{buildMockDispatch:REt}=OD(),{kDispatches:lDe,kMockAgent:cDe,kClose:uDe,kOriginalClose:dDe,kOrigin:fDe,kOriginalDispatch:kEt,kConnected:Vse}=X5(),{MockInterceptor:BEt}=jse(),pDe=Fs(),{InvalidArgumentError:DEt}=Ao(),$se=class extends SEt{static{s(this,"MockClient")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new DEt("Argument opts.agent must implement Agent");this[cDe]=n.agent,this[fDe]=e,this[lDe]=[],this[Vse]=1,this[kEt]=this.dispatch,this[dDe]=this.close.bind(this),this.dispatch=REt.call(this),this.close=this[uDe]}get[pDe.kConnected](){return this[Vse]}intercept(e){return new BEt(e,this[lDe])}async[uDe](){await _Et(this[dDe])(),this[Vse]=0,this[cDe][pDe.kClients].delete(this[fDe])}};mDe.exports=$se});var Jse=G((FYn,vDe)=>{"use strict";f();var{promisify:PEt}=require("node:util"),NEt=H5(),{buildMockDispatch:LEt}=OD(),{kDispatches:hDe,kMockAgent:gDe,kClose:ADe,kOriginalClose:yDe,kOrigin:CDe,kOriginalDispatch:FEt,kConnected:Yse}=X5(),{MockInterceptor:MEt}=jse(),xDe=Fs(),{InvalidArgumentError:QEt}=Ao(),Kse=class extends NEt{static{s(this,"MockPool")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new QEt("Argument opts.agent must implement Agent");this[gDe]=n.agent,this[CDe]=e,this[hDe]=[],this[Yse]=1,this[FEt]=this.dispatch,this[yDe]=this.close.bind(this),this.dispatch=LEt.call(this),this.close=this[ADe]}get[xDe.kConnected](){return this[Yse]}intercept(e){return new MEt(e,this[hDe])}async[ADe](){await PEt(this[yDe])(),this[Yse]=0,this[gDe][xDe.kClients].delete(this[CDe])}};vDe.exports=Kse});var EDe=G((UYn,bDe)=>{"use strict";f();var OEt={pronoun:"it",is:"is",was:"was",this:"this"},UEt={pronoun:"they",is:"are",was:"were",this:"these"};bDe.exports=class{static{s(this,"Pluralizer")}constructor(e,n){this.singular=e,this.plural=n}pluralize(e){let n=e===1,r=n?OEt:UEt,i=n?this.singular:this.plural;return{...r,count:e,noun:i}}}});var TDe=G((HYn,IDe)=>{"use strict";f();var{Transform:qEt}=require("node:stream"),{Console:WEt}=require("node:console"),GEt=process.versions.icu?"\u2705":"Y ",HEt=process.versions.icu?"\u274C":"N ";IDe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new qEt({transform(n,r,i){i(null,n)}}),this.logger=new WEt({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let n=e.map(({method:r,path:i,data:{statusCode:o},persist:a,times:l,timesInvoked:c,origin:u})=>({Method:r,Origin:u,Path:i,"Status code":o,Persistent:a?GEt:HEt,Invocations:c,Remaining:a?1/0:l-c}));return this.logger.table(n),this.transform.read().toString()}}});var RDe=G(($Yn,SDe)=>{"use strict";f();var{kClients:C2}=Fs(),jEt=j5(),{kAgent:Xse,kMockAgentSet:Yq,kMockAgentGet:wDe,kDispatches:Zse,kIsMockActive:Kq,kNetConnect:x2,kGetNetConnect:VEt,kOptions:Jq,kFactory:Xq}=X5(),$Et=zse(),zEt=Jse(),{matchValue:YEt,buildMockOptions:KEt}=OD(),{InvalidArgumentError:_De,UndiciError:JEt}=Ao(),XEt=oD(),ZEt=EDe(),eIt=TDe(),eae=class extends XEt{static{s(this,"MockAgent")}constructor(e){if(super(e),this[x2]=!0,this[Kq]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new _De("Argument opts.agent must implement Agent");let n=e?.agent?e.agent:new jEt(e);this[Xse]=n,this[C2]=n[C2],this[Jq]=KEt(e)}get(e){let n=this[wDe](e);return n||(n=this[Xq](e),this[Yq](e,n)),n}dispatch(e,n){return this.get(e.origin),this[Xse].dispatch(e,n)}async close(){await this[Xse].close(),this[C2].clear()}deactivate(){this[Kq]=!1}activate(){this[Kq]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[x2])?this[x2].push(e):this[x2]=[e];else if(typeof e>"u")this[x2]=!0;else throw new _De("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[x2]=!1}get isMockActive(){return this[Kq]}[Yq](e,n){this[C2].set(e,n)}[Xq](e){let n=Object.assign({agent:this},this[Jq]);return this[Jq]&&this[Jq].connections===1?new $Et(e,n):new zEt(e,n)}[wDe](e){let n=this[C2].get(e);if(n)return n;if(typeof e!="string"){let r=this[Xq]("http://localhost:9999");return this[Yq](e,r),r}for(let[r,i]of Array.from(this[C2]))if(i&&typeof r!="string"&&YEt(r,e)){let o=this[Xq](e);return this[Yq](e,o),o[Zse]=i[Zse],o}}[VEt](){return this[x2]}pendingInterceptors(){let e=this[C2];return Array.from(e.entries()).flatMap(([n,r])=>r[Zse].map(i=>({...i,origin:n}))).filter(({pending:n})=>n)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new eIt}={}){let n=this.pendingInterceptors();if(n.length===0)return;let r=new ZEt("interceptor","interceptors").pluralize(n.length);throw new JEt(`
${r.count} ${r.noun} ${r.is} pending:

${e.format(n)}
`.trim())}};SDe.exports=eae});var Zq=G((KYn,PDe)=>{"use strict";f();var kDe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:tIt}=Ao(),nIt=j5();DDe()===void 0&&BDe(new nIt);function BDe(t){if(!t||typeof t.dispatch!="function")throw new tIt("Argument agent must implement Agent");Object.defineProperty(globalThis,kDe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(BDe,"setGlobalDispatcher");function DDe(){return globalThis[kDe]}s(DDe,"getGlobalDispatcher");PDe.exports={setGlobalDispatcher:BDe,getGlobalDispatcher:DDe}});var eW=G((eKn,NDe)=>{"use strict";f();NDe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var FDe=G((rKn,LDe)=>{"use strict";f();var rIt=Bq();LDe.exports=t=>{let e=t?.maxRedirections;return n=>s(function(i,o){let{maxRedirections:a=e,...l}=i;if(!a)return n(i,o);let c=new rIt(n,a,i,o);return n(l,c)},"redirectInterceptor")}});var QDe=G((sKn,MDe)=>{"use strict";f();var iIt=Gq();MDe.exports=t=>e=>s(function(r,i){return e(r,new iIt({...r,retryOptions:{...t,...r.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var UDe=G((cKn,ODe)=>{"use strict";f();var oIt=yi(),{InvalidArgumentError:sIt,RequestAbortedError:aIt}=Ao(),lIt=eW(),tae=class extends lIt{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#r=!1;#n=0;#o=null;#s=null;constructor({maxSize:e},n){if(super(n),e!=null&&(!Number.isFinite(e)||e<1))throw new sIt("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=n}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#r=!0,this.#o=e}onHeaders(e,n,r,i){let a=oIt.parseHeaders(n)["content-length"];if(a!=null&&a>this.#e)throw new aIt(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#r?!0:this.#s.onHeaders(e,n,r,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#n=this.#n+e.length,this.#n>=this.#e&&(this.#i=!0,this.#r?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#r){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function cIt({maxSize:t}={maxSize:1024*1024}){return e=>s(function(r,i){let{dumpMaxSize:o=t}=r,a=new tae({maxSize:o},i);return e(r,a)},"Intercept")}s(cIt,"createDumpInterceptor");ODe.exports=cIt});var GDe=G((fKn,WDe)=>{"use strict";f();var{isIP:uIt}=require("node:net"),{lookup:dIt}=require("node:dns"),fIt=eW(),{InvalidArgumentError:e4,InformationalError:pIt}=Ao(),qDe=Math.pow(2,31)-1,nae=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#r,this.pick=e.pick??this.#n}get full(){return this.#i.size===this.#t}runLookup(e,n,r){let i=this.#i.get(e.hostname);if(i==null&&this.full){r(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...n.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,l)=>{if(a||l==null||l.length===0){r(a??new pIt("No DNS entries found"));return}this.setRecords(e,l);let c=this.#i.get(e.hostname),u=this.pick(e,c,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",r(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,n,r);return}let l;typeof a.port=="number"?l=`:${a.port}`:e.port!==""?l=`:${e.port}`:l="",r(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${l}`)}}#r(e,n,r){dIt(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return r(i);let a=new Map;for(let l of o)a.set(`${l.address}:${l.family}`,l);r(null,a.values())})}#n(e,n,r){let i=null,{records:o,offset:a}=n,l;if(this.dualStack?(r==null&&(a==null||a===qDe?(n.offset=0,r=4):(n.offset++,r=(n.offset&1)===1?6:4)),o[r]!=null&&o[r].ips.length>0?l=o[r]:l=o[r===4?6:4]):l=o[r],l==null||l.ips.length===0)return i;l.offset==null||l.offset===qDe?l.offset=0:l.offset++;let c=l.offset%l.ips.length;return i=l.ips[c]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(l.ips.splice(c,1),this.pick(e,n,r)):i}setRecords(e,n){let r=Date.now(),i={records:{4:null,6:null}};for(let o of n){o.timestamp=r,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,n){return new rae(this,e,n)}},rae=class extends fIt{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#r=null;#n=null;constructor(e,{origin:n,handler:r,dispatch:i},o){super(r),this.#n=n,this.#r=r,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#n,this.#t,(n,r)=>{if(n)return this.#r.onError(n);let i={...this.#t,origin:r};this.#i(i,this)});return}this.#r.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#n);default:this.#r.onError(e);break}}};WDe.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new e4("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new e4("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new e4("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new e4("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new e4("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new e4("Invalid pick. Must be a function");let e=t?.dualStack??!0,n;e?n=t?.affinity??null:n=t?.affinity??4;let r={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:n,maxItems:t?.maxItems??1/0},i=new nae(r);return o=>s(function(l,c){let u=l.origin.constructor===URL?l.origin:new URL(l.origin);return uIt(u.hostname)!==0?o(l,c):(i.runLookup(u,l,(d,p)=>{if(d)return c.onError(d);let m=null;m={...l,servername:u.hostname,origin:p,headers:{host:u.hostname,...l.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:c},l))}),!0)},"dnsInterceptor")}});var v2=G((hKn,KDe)=>{"use strict";f();var{kConstruct:mIt}=Fs(),{kEnumerableProperty:t4}=yi(),{iteratorMixin:hIt,isValidHeaderName:UD,isValidHeaderValue:jDe}=I0(),{webidl:Xi}=pc(),iae=require("node:assert"),tW=require("node:util"),Ja=Symbol("headers map"),_0=Symbol("headers map sorted");function HDe(t){return t===10||t===13||t===9||t===32}s(HDe,"isHTTPWhiteSpaceCharCode");function VDe(t){let e=0,n=t.length;for(;n>e&&HDe(t.charCodeAt(n-1));)--n;for(;n>e&&HDe(t.charCodeAt(e));)++e;return e===0&&n===t.length?t:t.substring(e,n)}s(VDe,"headerValueNormalize");function $De(t,e){if(Array.isArray(e))for(let n=0;n<e.length;++n){let r=e[n];if(r.length!==2)throw Xi.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${r.length}.`});oae(t,r[0],r[1])}else if(typeof e=="object"&&e!==null){let n=Object.keys(e);for(let r=0;r<n.length;++r)oae(t,n[r],e[n[r]])}else throw Xi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s($De,"fill");function oae(t,e,n){if(n=VDe(n),UD(e)){if(!jDe(n))throw Xi.errors.invalidArgument({prefix:"Headers.append",value:n,type:"header value"})}else throw Xi.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(YDe(t)==="immutable")throw new TypeError("immutable");return sae(t).append(e,n,!1)}s(oae,"appendHeader");function zDe(t,e){return t[0]<e[0]?-1:1}s(zDe,"compareHeaderName");var nW=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[Ja]=new Map(e[Ja]),this[_0]=e[_0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[Ja]=new Map(e),this[_0]=null)}contains(e,n){return this[Ja].has(n?e:e.toLowerCase())}clear(){this[Ja].clear(),this[_0]=null,this.cookies=null}append(e,n,r){this[_0]=null;let i=r?e:e.toLowerCase(),o=this[Ja].get(i);if(o){let a=i==="cookie"?"; ":", ";this[Ja].set(i,{name:o.name,value:`${o.value}${a}${n}`})}else this[Ja].set(i,{name:e,value:n});i==="set-cookie"&&(this.cookies??=[]).push(n)}set(e,n,r){this[_0]=null;let i=r?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[n]),this[Ja].set(i,{name:e,value:n})}delete(e,n){this[_0]=null,n||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[Ja].delete(e)}get(e,n){return this[Ja].get(n?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:n}}of this[Ja])yield[e,n]}get entries(){let e={};if(this[Ja].size!==0)for(let{name:n,value:r}of this[Ja].values())e[n]=r;return e}rawValues(){return this[Ja].values()}get entriesList(){let e=[];if(this[Ja].size!==0)for(let{0:n,1:{name:r,value:i}}of this[Ja])if(n==="set-cookie")for(let o of this.cookies)e.push([r,o]);else e.push([r,i]);return e}toSortedArray(){let e=this[Ja].size,n=new Array(e);if(e<=32){if(e===0)return n;let r=this[Ja][Symbol.iterator](),i=r.next().value;n[0]=[i[0],i[1].value],iae(i[1].value!==null);for(let o=1,a=0,l=0,c=0,u=0,d,p;o<e;++o){for(p=r.next().value,d=n[o]=[p[0],p[1].value],iae(d[1]!==null),c=0,l=o;c<l;)u=c+(l-c>>1),n[u][0]<=d[0]?c=u+1:l=u;if(o!==u){for(a=o;a>c;)n[a]=n[--a];n[c]=d}}if(!r.next().done)throw new TypeError("Unreachable");return n}else{let r=0;for(let{0:i,1:{value:o}}of this[Ja])n[r++]=[i,o],iae(o!==null);return n.sort(zDe)}}},Mm=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Xi.util.markAsUncloneable(this),e!==mIt&&(this.#t=new nW,this.#e="none",e!==void 0&&(e=Xi.converters.HeadersInit(e,"Headers contructor","init"),$De(this,e)))}append(e,n){Xi.brandCheck(this,t),Xi.argumentLengthCheck(arguments,2,"Headers.append");let r="Headers.append";return e=Xi.converters.ByteString(e,r,"name"),n=Xi.converters.ByteString(n,r,"value"),oae(this,e,n)}delete(e){if(Xi.brandCheck(this,t),Xi.argumentLengthCheck(arguments,1,"Headers.delete"),e=Xi.converters.ByteString(e,"Headers.delete","name"),!UD(e))throw Xi.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Xi.brandCheck(this,t),Xi.argumentLengthCheck(arguments,1,"Headers.get");let n="Headers.get";if(e=Xi.converters.ByteString(e,n,"name"),!UD(e))throw Xi.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Xi.brandCheck(this,t),Xi.argumentLengthCheck(arguments,1,"Headers.has");let n="Headers.has";if(e=Xi.converters.ByteString(e,n,"name"),!UD(e))throw Xi.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,n){Xi.brandCheck(this,t),Xi.argumentLengthCheck(arguments,2,"Headers.set");let r="Headers.set";if(e=Xi.converters.ByteString(e,r,"name"),n=Xi.converters.ByteString(n,r,"value"),n=VDe(n),UD(e)){if(!jDe(n))throw Xi.errors.invalidArgument({prefix:r,value:n,type:"header value"})}else throw Xi.errors.invalidArgument({prefix:r,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,n,!1)}getSetCookie(){Xi.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[_0](){if(this.#t[_0])return this.#t[_0];let e=[],n=this.#t.toSortedArray(),r=this.#t.cookies;if(r===null||r.length===1)return this.#t[_0]=n;for(let i=0;i<n.length;++i){let{0:o,1:a}=n[i];if(o==="set-cookie")for(let l=0;l<r.length;++l)e.push([o,r[l]]);else e.push([o,a])}return this.#t[_0]=e}[tW.inspect.custom](e,n){return n.depth??=e,`Headers ${tW.formatWithOptions(n,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,n){e.#e=n}static getHeadersList(e){return e.#t}static setHeadersList(e,n){e.#t=n}},{getHeadersGuard:YDe,setHeadersGuard:gIt,getHeadersList:sae,setHeadersList:AIt}=Mm;Reflect.deleteProperty(Mm,"getHeadersGuard");Reflect.deleteProperty(Mm,"setHeadersGuard");Reflect.deleteProperty(Mm,"getHeadersList");Reflect.deleteProperty(Mm,"setHeadersList");hIt("Headers",Mm,_0,0,1);Object.defineProperties(Mm.prototype,{append:t4,delete:t4,get:t4,has:t4,set:t4,getSetCookie:t4,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[tW.inspect.custom]:{enumerable:!1}});Xi.converters.HeadersInit=function(t,e,n){if(Xi.util.Type(t)==="Object"){let r=Reflect.get(t,Symbol.iterator);if(!tW.types.isProxy(t)&&r===Mm.prototype.entries)try{return sae(t).entriesList}catch{}return typeof r=="function"?Xi.converters["sequence<sequence<ByteString>>"](t,e,n,r.bind(t)):Xi.converters["record<ByteString, ByteString>"](t,e,n)}throw Xi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};KDe.exports={fill:$De,compareHeaderName:zDe,Headers:Mm,HeadersList:nW,getHeadersGuard:YDe,setHeadersGuard:gIt,setHeadersList:AIt,getHeadersList:sae}});var WD=G((yKn,sPe)=>{"use strict";f();var{Headers:nPe,HeadersList:JDe,fill:yIt,getHeadersGuard:CIt,setHeadersGuard:rPe,setHeadersList:iPe}=v2(),{extractBody:XDe,cloneBody:xIt,mixinBody:vIt,hasFinalizationRegistry:bIt,streamRegistry:EIt,bodyUnusable:IIt}=M5(),aae=yi(),ZDe=require("node:util"),{kEnumerableProperty:S0}=aae,{isValidReasonPhrase:TIt,isCancelled:wIt,isAborted:_It,isBlobLike:SIt,serializeJavascriptValueToJSONString:RIt,isErrorLike:kIt,isomorphicEncode:BIt,environmentSettingsObject:DIt}=I0(),{redirectStatusSet:PIt,nullBodyStatus:NIt}=lD(),{kState:ca,kHeaders:Z1}=Cv(),{webidl:si}=pc(),{FormData:LIt}=mD(),{URLSerializer:ePe}=Ed(),{kConstruct:iW}=Fs(),lae=require("node:assert"),{types:FIt}=require("node:util"),MIt=new TextEncoder("utf-8"),b2=class t{static{s(this,"Response")}static error(){return qD(oW(),"immutable")}static json(e,n={}){si.argumentLengthCheck(arguments,1,"Response.json"),n!==null&&(n=si.converters.ResponseInit(n));let r=MIt.encode(RIt(e)),i=XDe(r),o=qD(n4({}),"response");return tPe(o,n,{body:i[0],type:"application/json"}),o}static redirect(e,n=302){si.argumentLengthCheck(arguments,1,"Response.redirect"),e=si.converters.USVString(e),n=si.converters["unsigned short"](n);let r;try{r=new URL(e,DIt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!PIt.has(n))throw new RangeError(`Invalid status code ${n}`);let i=qD(n4({}),"immutable");i[ca].status=n;let o=BIt(ePe(r));return i[ca].headersList.append("location",o,!0),i}constructor(e=null,n={}){if(si.util.markAsUncloneable(this),e===iW)return;e!==null&&(e=si.converters.BodyInit(e)),n=si.converters.ResponseInit(n),this[ca]=n4({}),this[Z1]=new nPe(iW),rPe(this[Z1],"response"),iPe(this[Z1],this[ca].headersList);let r=null;if(e!=null){let[i,o]=XDe(e);r={body:i,type:o}}tPe(this,n,r)}get type(){return si.brandCheck(this,t),this[ca].type}get url(){si.brandCheck(this,t);let e=this[ca].urlList,n=e[e.length-1]??null;return n===null?"":ePe(n,!0)}get redirected(){return si.brandCheck(this,t),this[ca].urlList.length>1}get status(){return si.brandCheck(this,t),this[ca].status}get ok(){return si.brandCheck(this,t),this[ca].status>=200&&this[ca].status<=299}get statusText(){return si.brandCheck(this,t),this[ca].statusText}get headers(){return si.brandCheck(this,t),this[Z1]}get body(){return si.brandCheck(this,t),this[ca].body?this[ca].body.stream:null}get bodyUsed(){return si.brandCheck(this,t),!!this[ca].body&&aae.isDisturbed(this[ca].body.stream)}clone(){if(si.brandCheck(this,t),IIt(this))throw si.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=cae(this[ca]);return qD(e,CIt(this[Z1]))}[ZDe.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${ZDe.formatWithOptions(n,r)}`}};vIt(b2);Object.defineProperties(b2.prototype,{type:S0,url:S0,status:S0,ok:S0,redirected:S0,statusText:S0,headers:S0,clone:S0,body:S0,bodyUsed:S0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(b2,{json:S0,redirect:S0,error:S0});function cae(t){if(t.internalResponse)return oPe(cae(t.internalResponse),t.type);let e=n4({...t,body:null});return t.body!=null&&(e.body=xIt(e,t.body)),e}s(cae,"cloneResponse");function n4(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new JDe(t?.headersList):new JDe,urlList:t?.urlList?[...t.urlList]:[]}}s(n4,"makeResponse");function oW(t){let e=kIt(t);return n4({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(oW,"makeNetworkError");function QIt(t){return t.type==="error"&&t.status===0}s(QIt,"isNetworkError");function rW(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(n,r){return r in e?e[r]:n[r]},set(n,r,i){return lae(!(r in e)),n[r]=i,!0}})}s(rW,"makeFilteredResponse");function oPe(t,e){if(e==="basic")return rW(t,{type:"basic",headersList:t.headersList});if(e==="cors")return rW(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return rW(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return rW(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});lae(!1)}s(oPe,"filterResponse");function OIt(t,e=null){return lae(wIt(t)),_It(t)?oW(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):oW(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(OIt,"makeAppropriateNetworkError");function tPe(t,e,n){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!TIt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[ca].status=e.status),"statusText"in e&&e.statusText!=null&&(t[ca].statusText=e.statusText),"headers"in e&&e.headers!=null&&yIt(t[Z1],e.headers),n){if(NIt.includes(t.status))throw si.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[ca].body=n.body,n.type!=null&&!t[ca].headersList.contains("content-type",!0)&&t[ca].headersList.append("content-type",n.type,!0)}}s(tPe,"initializeResponse");function qD(t,e){let n=new b2(iW);return n[ca]=t,n[Z1]=new nPe(iW),iPe(n[Z1],t.headersList),rPe(n[Z1],e),bIt&&t.body?.stream&&EIt.register(n,new WeakRef(t.body.stream)),n}s(qD,"fromInnerResponse");si.converters.ReadableStream=si.interfaceConverter(ReadableStream);si.converters.FormData=si.interfaceConverter(LIt);si.converters.URLSearchParams=si.interfaceConverter(URLSearchParams);si.converters.XMLHttpRequestBodyInit=function(t,e,n){return typeof t=="string"?si.converters.USVString(t,e,n):SIt(t)?si.converters.Blob(t,e,n,{strict:!1}):ArrayBuffer.isView(t)||FIt.isArrayBuffer(t)?si.converters.BufferSource(t,e,n):aae.isFormDataLike(t)?si.converters.FormData(t,e,n,{strict:!1}):t instanceof URLSearchParams?si.converters.URLSearchParams(t,e,n):si.converters.DOMString(t,e,n)};si.converters.BodyInit=function(t,e,n){return t instanceof ReadableStream?si.converters.ReadableStream(t,e,n):t?.[Symbol.asyncIterator]?t:si.converters.XMLHttpRequestBodyInit(t,e,n)};si.converters.ResponseInit=si.dictionaryConverter([{key:"status",converter:si.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:si.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:si.converters.HeadersInit}]);sPe.exports={isNetworkError:QIt,makeNetworkError:oW,makeResponse:n4,makeAppropriateNetworkError:OIt,filterResponse:oPe,Response:b2,cloneResponse:cae,fromInnerResponse:qD}});var uPe=G((vKn,cPe)=>{"use strict";f();var{kConnected:aPe,kSize:lPe}=Fs(),uae=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[aPe]===0&&this.value[lPe]===0?void 0:this.value}},dae=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,n){e.on&&e.on("disconnect",()=>{e[aPe]===0&&e[lPe]===0&&this.finalizer(n)})}unregister(e){}};cPe.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:uae,FinalizationRegistry:dae}):{WeakRef,FinalizationRegistry}}});var r4=G((IKn,TPe)=>{"use strict";f();var{extractBody:UIt,mixinBody:qIt,cloneBody:WIt,bodyUnusable:dPe}=M5(),{Headers:xPe,fill:GIt,HeadersList:cW,setHeadersGuard:pae,getHeadersGuard:HIt,setHeadersList:vPe,getHeadersList:fPe}=v2(),{FinalizationRegistry:jIt}=uPe()(),aW=yi(),pPe=require("node:util"),{isValidHTTPToken:VIt,sameOrigin:mPe,environmentSettingsObject:sW}=I0(),{forbiddenMethodsSet:$It,corsSafeListedMethodsSet:zIt,referrerPolicy:YIt,requestRedirect:KIt,requestMode:JIt,requestCredentials:XIt,requestCache:ZIt,requestDuplex:e2t}=lD(),{kEnumerableProperty:Xa,normalizedMethodRecordsBase:t2t,normalizedMethodRecords:n2t}=aW,{kHeaders:R0,kSignal:lW,kState:Cs,kDispatcher:fae}=Cv(),{webidl:vr}=pc(),{URLSerializer:r2t}=Ed(),{kConstruct:uW}=Fs(),i2t=require("node:assert"),{getMaxListeners:hPe,setMaxListeners:gPe,getEventListeners:o2t,defaultMaxListeners:APe}=require("node:events"),s2t=Symbol("abortController"),bPe=new jIt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),dW=new WeakMap;function yPe(t){return e;function e(){let n=t.deref();if(n!==void 0){bPe.unregister(e),this.removeEventListener("abort",e),n.abort(this.reason);let r=dW.get(n.signal);if(r!==void 0){if(r.size!==0){for(let i of r){let o=i.deref();o!==void 0&&o.abort(this.reason)}r.clear()}dW.delete(n.signal)}}}}s(yPe,"buildAbort");var CPe=!1,kv=class t{static{s(this,"Request")}constructor(e,n={}){if(vr.util.markAsUncloneable(this),e===uW)return;let r="Request constructor";vr.argumentLengthCheck(arguments,1,r),e=vr.converters.RequestInfo(e,r,"input"),n=vr.converters.RequestInit(n,r,"init");let i=null,o=null,a=sW.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[fae]=n.dispatcher;let b;try{b=new URL(e,a)}catch(E){throw new TypeError("Failed to parse URL from "+e,{cause:E})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=fW({urlList:[b]}),o="cors"}else this[fae]=n.dispatcher||e[fae],i2t(e instanceof t),i=e[Cs],l=e[lW];let c=sW.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&mPe(i.window,c)&&(u=i.window),n.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in n&&(u="no-window"),i=fW({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:sW.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(n).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),n.referrer!==void 0){let b=n.referrer;if(b==="")i.referrer="no-referrer";else{let E;try{E=new URL(b,a)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}E.protocol==="about:"&&E.hostname==="client"||c&&!mPe(E,sW.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}n.referrerPolicy!==void 0&&(i.referrerPolicy=n.referrerPolicy);let p;if(n.mode!==void 0?p=n.mode:p=o,p==="navigate")throw vr.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),n.credentials!==void 0&&(i.credentials=n.credentials),n.cache!==void 0&&(i.cache=n.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(n.redirect!==void 0&&(i.redirect=n.redirect),n.integrity!=null&&(i.integrity=String(n.integrity)),n.keepalive!==void 0&&(i.keepalive=!!n.keepalive),n.method!==void 0){let b=n.method,E=n2t[b];if(E!==void 0)i.method=E;else{if(!VIt(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if($It.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=t2t[_]??b,i.method=b}!CPe&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),CPe=!0)}n.signal!==void 0&&(l=n.signal),this[Cs]=i;let m=new AbortController;if(this[lW]=m.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)m.abort(l.reason);else{this[s2t]=m;let b=new WeakRef(m),E=yPe(b);try{(typeof hPe=="function"&&hPe(l)===APe||o2t(l,"abort").length>=APe)&&gPe(1500,l)}catch{}aW.addAbortListener(l,E),bPe.register(m,{signal:l,abort:E},E)}}if(this[R0]=new xPe(uW),vPe(this[R0],i.headersList),pae(this[R0],"request"),p==="no-cors"){if(!zIt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);pae(this[R0],"request-no-cors")}if(d){let b=fPe(this[R0]),E=n.headers!==void 0?n.headers:new cW(b);if(b.clear(),E instanceof cW){for(let{name:_,value:k}of E.rawValues())b.append(_,k,!1);b.cookies=E.cookies}else GIt(this[R0],E)}let h=e instanceof t?e[Cs].body:null;if((n.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(n.body!=null){let[b,E]=UIt(n.body,i.keepalive);g=b,E&&!fPe(this[R0]).contains("content-type",!0)&&this[R0].append("content-type",E)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&n.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(g==null&&h!=null){if(dPe(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;h.stream.pipeThrough(b),v={source:h.source,length:h.length,stream:b.readable}}this[Cs].body=v}get method(){return vr.brandCheck(this,t),this[Cs].method}get url(){return vr.brandCheck(this,t),r2t(this[Cs].url)}get headers(){return vr.brandCheck(this,t),this[R0]}get destination(){return vr.brandCheck(this,t),this[Cs].destination}get referrer(){return vr.brandCheck(this,t),this[Cs].referrer==="no-referrer"?"":this[Cs].referrer==="client"?"about:client":this[Cs].referrer.toString()}get referrerPolicy(){return vr.brandCheck(this,t),this[Cs].referrerPolicy}get mode(){return vr.brandCheck(this,t),this[Cs].mode}get credentials(){return this[Cs].credentials}get cache(){return vr.brandCheck(this,t),this[Cs].cache}get redirect(){return vr.brandCheck(this,t),this[Cs].redirect}get integrity(){return vr.brandCheck(this,t),this[Cs].integrity}get keepalive(){return vr.brandCheck(this,t),this[Cs].keepalive}get isReloadNavigation(){return vr.brandCheck(this,t),this[Cs].reloadNavigation}get isHistoryNavigation(){return vr.brandCheck(this,t),this[Cs].historyNavigation}get signal(){return vr.brandCheck(this,t),this[lW]}get body(){return vr.brandCheck(this,t),this[Cs].body?this[Cs].body.stream:null}get bodyUsed(){return vr.brandCheck(this,t),!!this[Cs].body&&aW.isDisturbed(this[Cs].body.stream)}get duplex(){return vr.brandCheck(this,t),"half"}clone(){if(vr.brandCheck(this,t),dPe(this))throw new TypeError("unusable");let e=EPe(this[Cs]),n=new AbortController;if(this.signal.aborted)n.abort(this.signal.reason);else{let r=dW.get(this.signal);r===void 0&&(r=new Set,dW.set(this.signal,r));let i=new WeakRef(n);r.add(i),aW.addAbortListener(n.signal,yPe(i))}return IPe(e,n.signal,HIt(this[R0]))}[pPe.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${pPe.formatWithOptions(n,r)}`}};qIt(kv);function fW(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new cW(t.headersList):new cW}}s(fW,"makeRequest");function EPe(t){let e=fW({...t,body:null});return t.body!=null&&(e.body=WIt(e,t.body)),e}s(EPe,"cloneRequest");function IPe(t,e,n){let r=new kv(uW);return r[Cs]=t,r[lW]=e,r[R0]=new xPe(uW),vPe(r[R0],t.headersList),pae(r[R0],n),r}s(IPe,"fromInnerRequest");Object.defineProperties(kv.prototype,{method:Xa,url:Xa,headers:Xa,redirect:Xa,clone:Xa,signal:Xa,duplex:Xa,destination:Xa,body:Xa,bodyUsed:Xa,isHistoryNavigation:Xa,isReloadNavigation:Xa,keepalive:Xa,integrity:Xa,cache:Xa,credentials:Xa,attribute:Xa,referrerPolicy:Xa,referrer:Xa,mode:Xa,[Symbol.toStringTag]:{value:"Request",configurable:!0}});vr.converters.Request=vr.interfaceConverter(kv);vr.converters.RequestInfo=function(t,e,n){return typeof t=="string"?vr.converters.USVString(t,e,n):t instanceof kv?vr.converters.Request(t,e,n):vr.converters.USVString(t,e,n)};vr.converters.AbortSignal=vr.interfaceConverter(AbortSignal);vr.converters.RequestInit=vr.dictionaryConverter([{key:"method",converter:vr.converters.ByteString},{key:"headers",converter:vr.converters.HeadersInit},{key:"body",converter:vr.nullableConverter(vr.converters.BodyInit)},{key:"referrer",converter:vr.converters.USVString},{key:"referrerPolicy",converter:vr.converters.DOMString,allowedValues:YIt},{key:"mode",converter:vr.converters.DOMString,allowedValues:JIt},{key:"credentials",converter:vr.converters.DOMString,allowedValues:XIt},{key:"cache",converter:vr.converters.DOMString,allowedValues:ZIt},{key:"redirect",converter:vr.converters.DOMString,allowedValues:KIt},{key:"integrity",converter:vr.converters.DOMString},{key:"keepalive",converter:vr.converters.boolean},{key:"signal",converter:vr.nullableConverter(t=>vr.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:vr.converters.any},{key:"duplex",converter:vr.converters.DOMString,allowedValues:e2t},{key:"dispatcher",converter:vr.converters.any}]);TPe.exports={Request:kv,makeRequest:fW,fromInnerRequest:IPe,cloneRequest:EPe}});var HD=G((_Kn,UPe)=>{"use strict";f();var{makeNetworkError:Lo,makeAppropriateNetworkError:pW,filterResponse:mae,makeResponse:mW,fromInnerResponse:a2t}=WD(),{HeadersList:wPe}=v2(),{Request:l2t,cloneRequest:c2t}=r4(),Bv=require("node:zlib"),{bytesMatch:u2t,makePolicyContainer:d2t,clonePolicyContainer:f2t,requestBadPort:p2t,TAOCheck:m2t,appendRequestOriginHeader:h2t,responseLocationURL:g2t,requestCurrentURL:Fg,setRequestReferrerPolicyOnRedirect:A2t,tryUpgradeRequestToAPotentiallyTrustworthyURL:y2t,createOpaqueTimingInfo:Cae,appendFetchMetadata:C2t,corsCheck:x2t,crossOriginResourcePolicyCheck:v2t,determineRequestsReferrer:b2t,coarsenedSharedCurrentTime:GD,createDeferredPromise:E2t,isBlobLike:I2t,sameOrigin:yae,isCancelled:E2,isAborted:_Pe,isErrorLike:T2t,fullyReadBody:w2t,readableStreamClose:_2t,isomorphicEncode:hW,urlIsLocal:S2t,urlIsHttpHttpsScheme:xae,urlHasHttpsScheme:R2t,clampAndCoarsenConnectionTimingInfo:k2t,simpleRangeHeaderValue:B2t,buildContentRange:D2t,createInflate:P2t,extractMimeType:N2t}=I0(),{kState:BPe,kDispatcher:L2t}=Cv(),I2=require("node:assert"),{safelyExtractBody:vae,extractBody:SPe}=M5(),{redirectStatusSet:DPe,nullBodyStatus:PPe,safeMethodsSet:F2t,requestBodyHeader:M2t,subresourceSet:Q2t}=lD(),O2t=require("node:events"),{Readable:U2t,pipeline:q2t,finished:W2t}=require("node:stream"),{addAbortListener:G2t,isErrored:H2t,isReadable:gW,bufferToLowerCasedHeaderName:RPe}=yi(),{dataURLProcessor:j2t,serializeAMimeType:V2t,minimizeSupportedMimeType:$2t}=Ed(),{getGlobalDispatcher:z2t}=Zq(),{webidl:Y2t}=pc(),{STATUS_CODES:K2t}=require("node:http"),J2t=["GET","HEAD"],X2t=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",hae,AW=class extends O2t{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Z2t(t){NPe(t,"fetch")}s(Z2t,"handleFetchDone");function eTt(t,e=void 0){Y2t.argumentLengthCheck(arguments,1,"globalThis.fetch");let n=E2t(),r;try{r=new l2t(t,e)}catch(d){return n.reject(d),n.promise}let i=r[BPe];if(r.signal.aborted)return gae(n,i,null,r.signal.reason),n.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,l=!1,c=null;return G2t(r.signal,()=>{l=!0,I2(c!=null),c.abort(r.signal.reason);let d=a?.deref();gae(n,i,d,r.signal.reason)}),c=FPe({request:i,processResponseEndOfBody:Z2t,processResponse:s(d=>{if(!l){if(d.aborted){gae(n,i,a,c.serializedAbortReason);return}if(d.type==="error"){n.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(a2t(d,"immutable")),n.resolve(a.deref()),n=null}},"processResponse"),dispatcher:r[L2t]}),n.promise}s(eTt,"fetch");function NPe(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let n=t.urlList[0],r=t.timingInfo,i=t.cacheState;xae(n)&&r!==null&&(t.timingAllowPassed||(r=Cae({startTime:r.startTime}),i=""),r.endTime=GD(),t.timingInfo=r,LPe(r,n.href,e,globalThis,i))}s(NPe,"finalizeAndReportTiming");var LPe=performance.markResourceTiming;function gae(t,e,n,r){if(t&&t.reject(r),e.body!=null&&gW(e.body?.stream)&&e.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),n==null)return;let i=n[BPe];i.body!=null&&gW(i.body?.stream)&&i.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(gae,"abortFetch");function FPe({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:l=z2t()}){I2(l);let c=null,u=!1;t.client!=null&&(c=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=GD(u),p=Cae({startTime:d}),m={controller:new AW(l),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:c,crossOriginIsolatedCapability:u};return I2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=f2t(t.client.policyContainer):t.policyContainer=d2t()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,Q2t.has(t.destination),MPe(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(FPe,"fetching");async function MPe(t,e=!1){let n=t.request,r=null;if(n.localURLsOnly&&!S2t(Fg(n))&&(r=Lo("local URLs only")),y2t(n),p2t(n)==="blocked"&&(r=Lo("bad port")),n.referrerPolicy===""&&(n.referrerPolicy=n.policyContainer.referrerPolicy),n.referrer!=="no-referrer"&&(n.referrer=b2t(n)),r===null&&(r=await(async()=>{let o=Fg(n);return yae(o,n.url)&&n.responseTainting==="basic"||o.protocol==="data:"||n.mode==="navigate"||n.mode==="websocket"?(n.responseTainting="basic",await kPe(t)):n.mode==="same-origin"?Lo('request mode cannot be "same-origin"'):n.mode==="no-cors"?n.redirect!=="follow"?Lo('redirect mode cannot be "follow" for "no-cors" request'):(n.responseTainting="opaque",await kPe(t)):xae(Fg(n))?(n.responseTainting="cors",await QPe(t)):Lo("URL scheme must be a HTTP(S) scheme")})()),e)return r;r.status!==0&&!r.internalResponse&&(n.responseTainting,n.responseTainting==="basic"?r=mae(r,"basic"):n.responseTainting==="cors"?r=mae(r,"cors"):n.responseTainting==="opaque"?r=mae(r,"opaque"):I2(!1));let i=r.status===0?r:r.internalResponse;if(i.urlList.length===0&&i.urlList.push(...n.urlList),n.timingAllowFailed||(r.timingAllowPassed=!0),r.type==="opaque"&&i.status===206&&i.rangeRequested&&!n.headers.contains("range",!0)&&(r=i=Lo()),r.status!==0&&(n.method==="HEAD"||n.method==="CONNECT"||PPe.includes(i.status))&&(i.body=null,t.controller.dump=!0),n.integrity){let o=s(l=>Aae(t,Lo(l)),"processBodyError");if(n.responseTainting==="opaque"||r.body==null){o(r.error);return}let a=s(l=>{if(!u2t(l,n.integrity)){o("integrity mismatch");return}r.body=vae(l)[0],Aae(t,r)},"processBody");await w2t(r.body,a,o)}else Aae(t,r)}s(MPe,"mainFetch");function kPe(t){if(E2(t)&&t.request.redirectCount===0)return Promise.resolve(pW(t));let{request:e}=t,{protocol:n}=Fg(e);switch(n){case"about:":return Promise.resolve(Lo("about scheme is not supported"));case"blob:":{hae||(hae=require("node:buffer").resolveObjectURL);let r=Fg(e);if(r.search.length!==0)return Promise.resolve(Lo("NetworkError when attempting to fetch resource."));let i=hae(r.toString());if(e.method!=="GET"||!I2t(i))return Promise.resolve(Lo("invalid method"));let o=mW(),a=i.size,l=hW(`${a}`),c=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=B2t(u,!0);if(d==="failure")return Promise.resolve(Lo("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Lo("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,c),g=SPe(h);o.body=g[0];let y=hW(`${h.size}`),v=D2t(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",c,!0),o.headersList.set("content-range",v,!0)}else{let u=SPe(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",l,!0),o.headersList.set("content-type",c,!0)}return Promise.resolve(o)}case"data:":{let r=Fg(e),i=j2t(r);if(i==="failure")return Promise.resolve(Lo("failed to fetch the data URL"));let o=V2t(i.mimeType);return Promise.resolve(mW({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:vae(i.body)[0]}))}case"file:":return Promise.resolve(Lo("not implemented... yet..."));case"http:":case"https:":return QPe(t).catch(r=>Lo(r));default:return Promise.resolve(Lo("unknown scheme"))}}s(kPe,"schemeFetch");function tTt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(tTt,"finalizeResponse");function Aae(t,e){let n=t.timingInfo,r=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=n),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;n.endTime=o;let l=e.cacheState,c=e.bodyInfo;e.timingAllowPassed||(n=Cae(n),l="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=N2t(e.headersList);d!=="failure"&&(c.contentType=$2t(d))}t.request.initiatorType!=null&&LPe(n,t.request.url.href,t.request.initiatorType,globalThis,l,c,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?r():W2t(i.body.stream,()=>{r()})}s(Aae,"fetchFinale");async function QPe(t){let e=t.request,n=null,r=null,i=t.timingInfo;if(e.serviceWorkers,n===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),r=n=await OPe(t),e.responseTainting==="cors"&&x2t(e,n)==="failure")return Lo("cors failure");m2t(e,n)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||n.type==="opaque")&&v2t(e.origin,e.client,e.destination,r)==="blocked"?Lo("blocked"):(DPe.has(r.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?n=Lo("unexpected redirect"):e.redirect==="manual"?n=r:e.redirect==="follow"?n=await nTt(t,n):I2(!1)),n.timingInfo=i,n)}s(QPe,"httpFetch");function nTt(t,e){let n=t.request,r=e.internalResponse?e.internalResponse:e,i;try{if(i=g2t(r,Fg(n).hash),i==null)return e}catch(a){return Promise.resolve(Lo(a))}if(!xae(i))return Promise.resolve(Lo("URL scheme must be a HTTP(S) scheme"));if(n.redirectCount===20)return Promise.resolve(Lo("redirect count exceeded"));if(n.redirectCount+=1,n.mode==="cors"&&(i.username||i.password)&&!yae(n,i))return Promise.resolve(Lo('cross origin not allowed for request mode "cors"'));if(n.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Lo('URL cannot contain credentials for request mode "cors"'));if(r.status!==303&&n.body!=null&&n.body.source==null)return Promise.resolve(Lo());if([301,302].includes(r.status)&&n.method==="POST"||r.status===303&&!J2t.includes(n.method)){n.method="GET",n.body=null;for(let a of M2t)n.headersList.delete(a)}yae(Fg(n),i)||(n.headersList.delete("authorization",!0),n.headersList.delete("proxy-authorization",!0),n.headersList.delete("cookie",!0),n.headersList.delete("host",!0)),n.body!=null&&(I2(n.body.source!=null),n.body=vae(n.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=GD(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),n.urlList.push(i),A2t(n,r),MPe(t,!0)}s(nTt,"httpRedirectFetch");async function OPe(t,e=!1,n=!1){let r=t.request,i=null,o=null,a=null,l=null,c=!1;r.window==="no-window"&&r.redirect==="error"?(i=t,o=r):(o=c2t(r),i={...t},i.request=o);let u=r.credentials==="include"||r.credentials==="same-origin"&&r.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=hW(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",hW(o.referrer.href),!0),h2t(o),C2t(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",X2t),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(R2t(Fg(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),l==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Lo("only if cached");let m=await rTt(i,u,n);!F2t.has(o.method)&&m.status>=200&&m.status<=399,c&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return r.window==="no-window"?Lo():E2(t)?pW(t):Lo("proxy authentication required");if(a.status===421&&!n&&(r.body==null||r.body.source!=null)){if(E2(t))return pW(t);t.controller.connection.destroy(),a=await OPe(t,e,!0)}return a}s(OPe,"httpNetworkOrCacheFetch");async function rTt(t,e=!1,n=!1){I2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let r=t.request,i=null,o=t.timingInfo;null==null&&(r.cache="no-store");let l=n?"yes":"no";r.mode;let c=null;if(r.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(r.body!=null){let g=s(async function*(b){E2(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=s(()=>{E2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=s(b=>{E2(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");c=async function*(){try{for await(let b of r.body.stream)yield*g(b);y()}catch(b){v(b)}}()}try{let{body:g,status:y,statusText:v,headersList:b,socket:E}=await h({body:c});if(E)i=mW({status:y,statusText:v,headersList:b,socket:E});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=mW({status:y,statusText:v,headersList:b})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),pW(t,g)):Lo(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{E2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:b,value:E}=await t.controller.next();if(_Pe(t))break;g=b?void 0:E}catch(b){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=b,y=!0)}if(g===void 0){_2t(t.controller.controller),tTt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let v=new Uint8Array(g);if(v.byteLength&&t.controller.controller.enqueue(v),H2t(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){_Pe(t)?(i.aborted=!0,gW(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):gW(p)&&t.controller.controller.error(new TypeError("terminated",{cause:T2t(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=Fg(r),v=t.controller.dispatcher;return new Promise((b,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:r.method,body:v.isMockActive?r.body&&(r.body.source||r.body.stream):g,headers:r.headersList.entries,maxRedirections:0,upgrade:r.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=k2t(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=GD(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=GD(t.crossOriginIsolatedCapability)},onHeaders(_,k,D,N){if(_<200)return;let Q=[],Z="",me=new wPe;for(let oe=0;oe<k.length;oe+=2)me.append(RPe(k[oe]),k[oe+1].toString("latin1"),!0);let te=me.get("content-encoding",!0);te&&(Q=te.toLowerCase().split(",").map(oe=>oe.trim())),Z=me.get("location",!0),this.body=new U2t({read:D});let H=[],W=Z&&r.redirect==="follow"&&DPe.has(_);if(Q.length!==0&&r.method!=="HEAD"&&r.method!=="CONNECT"&&!PPe.includes(_)&&!W)for(let oe=Q.length-1;oe>=0;--oe){let V=Q[oe];if(V==="x-gzip"||V==="gzip")H.push(Bv.createGunzip({flush:Bv.constants.Z_SYNC_FLUSH,finishFlush:Bv.constants.Z_SYNC_FLUSH}));else if(V==="deflate")H.push(P2t({flush:Bv.constants.Z_SYNC_FLUSH,finishFlush:Bv.constants.Z_SYNC_FLUSH}));else if(V==="br")H.push(Bv.createBrotliDecompress({flush:Bv.constants.BROTLI_OPERATION_FLUSH,finishFlush:Bv.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let re=this.onError.bind(this);return b({status:_,statusText:N,headersList:me,body:H.length?q2t(this.body,...H,oe=>{oe&&this.onError(oe)}).on("error",re):this.body.on("error",re)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),E(_)},onUpgrade(_,k,D){if(_!==101)return;let N=new wPe;for(let Q=0;Q<k.length;Q+=2)N.append(RPe(k[Q]),k[Q+1].toString("latin1"),!0);return b({status:_,statusText:K2t[_],headersList:N,socket:D}),!0}}))}s(h,"dispatch")}s(rTt,"httpNetworkFetch");UPe.exports={fetch:eTt,Fetch:AW,fetching:FPe,finalizeAndReportTiming:NPe}});var bae=G((kKn,qPe)=>{"use strict";f();qPe.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var GPe=G((DKn,WPe)=>{"use strict";f();var{webidl:k0}=pc(),yW=Symbol("ProgressEvent state"),Eae=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,n={}){e=k0.converters.DOMString(e,"ProgressEvent constructor","type"),n=k0.converters.ProgressEventInit(n??{}),super(e,n),this[yW]={lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total}}get lengthComputable(){return k0.brandCheck(this,t),this[yW].lengthComputable}get loaded(){return k0.brandCheck(this,t),this[yW].loaded}get total(){return k0.brandCheck(this,t),this[yW].total}};k0.converters.ProgressEventInit=k0.dictionaryConverter([{key:"lengthComputable",converter:k0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:k0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:k0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:k0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:k0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:k0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);WPe.exports={ProgressEvent:Eae}});var jPe=G((LKn,HPe)=>{"use strict";f();function iTt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(iTt,"getEncoding");HPe.exports={getEncoding:iTt}});var ZPe=G((QKn,XPe)=>{"use strict";f();var{kState:i4,kError:Iae,kResult:VPe,kAborted:jD,kLastProgressEventFired:Tae}=bae(),{ProgressEvent:oTt}=GPe(),{getEncoding:$Pe}=jPe(),{serializeAMimeType:sTt,parseMIMEType:zPe}=Ed(),{types:aTt}=require("node:util"),{StringDecoder:YPe}=require("string_decoder"),{btoa:KPe}=require("node:buffer"),lTt={enumerable:!0,writable:!1,configurable:!1};function cTt(t,e,n,r){if(t[i4]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[i4]="loading",t[VPe]=null,t[Iae]=null;let o=e.stream().getReader(),a=[],l=o.read(),c=!0;(async()=>{for(;!t[jD];)try{let{done:u,value:d}=await l;if(c&&!t[jD]&&queueMicrotask(()=>{Dv("loadstart",t)}),c=!1,!u&&aTt.isUint8Array(d))a.push(d),(t[Tae]===void 0||Date.now()-t[Tae]>=50)&&!t[jD]&&(t[Tae]=Date.now(),queueMicrotask(()=>{Dv("progress",t)})),l=o.read();else if(u){queueMicrotask(()=>{t[i4]="done";try{let p=uTt(a,n,e.type,r);if(t[jD])return;t[VPe]=p,Dv("load",t)}catch(p){t[Iae]=p,Dv("error",t)}t[i4]!=="loading"&&Dv("loadend",t)});break}}catch(u){if(t[jD])return;queueMicrotask(()=>{t[i4]="done",t[Iae]=u,Dv("error",t),t[i4]!=="loading"&&Dv("loadend",t)});break}})()}s(cTt,"readOperation");function Dv(t,e){let n=new oTt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}s(Dv,"fireAProgressEvent");function uTt(t,e,n,r){switch(e){case"DataURL":{let i="data:",o=zPe(n||"application/octet-stream");o!=="failure"&&(i+=sTt(o)),i+=";base64,";let a=new YPe("latin1");for(let l of t)i+=KPe(a.write(l));return i+=KPe(a.end()),i}case"Text":{let i="failure";if(r&&(i=$Pe(r)),i==="failure"&&n){let o=zPe(n);o!=="failure"&&(i=$Pe(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),dTt(t,i)}case"ArrayBuffer":return JPe(t).buffer;case"BinaryString":{let i="",o=new YPe("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(uTt,"packageData");function dTt(t,e){let n=JPe(t),r=fTt(n),i=0;r!==null&&(e=r,i=r==="UTF-8"?3:2);let o=n.slice(i);return new TextDecoder(e).decode(o)}s(dTt,"decode");function fTt(t){let[e,n,r]=t;return e===239&&n===187&&r===191?"UTF-8":e===254&&n===255?"UTF-16BE":e===255&&n===254?"UTF-16LE":null}s(fTt,"BOMSniffing");function JPe(t){let e=t.reduce((r,i)=>r+i.byteLength,0),n=0;return t.reduce((r,i)=>(r.set(i,n),n+=i.byteLength,r),new Uint8Array(e))}s(JPe,"combineByteSequences");XPe.exports={staticPropertyDescriptors:lTt,readOperation:cTt,fireAProgressEvent:Dv}});var r9e=G((qKn,n9e)=>{"use strict";f();var{staticPropertyDescriptors:o4,readOperation:CW,fireAProgressEvent:e9e}=ZPe(),{kState:T2,kError:t9e,kResult:xW,kEvents:yo,kAborted:pTt}=bae(),{webidl:Mo}=pc(),{kEnumerableProperty:wd}=yi(),Qm=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[T2]="empty",this[xW]=null,this[t9e]=null,this[yo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Mo.converters.Blob(e,{strict:!1}),CW(this,e,"ArrayBuffer")}readAsBinaryString(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Mo.converters.Blob(e,{strict:!1}),CW(this,e,"BinaryString")}readAsText(e,n=void 0){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Mo.converters.Blob(e,{strict:!1}),n!==void 0&&(n=Mo.converters.DOMString(n,"FileReader.readAsText","encoding")),CW(this,e,"Text",n)}readAsDataURL(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Mo.converters.Blob(e,{strict:!1}),CW(this,e,"DataURL")}abort(){if(this[T2]==="empty"||this[T2]==="done"){this[xW]=null;return}this[T2]==="loading"&&(this[T2]="done",this[xW]=null),this[pTt]=!0,e9e("abort",this),this[T2]!=="loading"&&e9e("loadend",this)}get readyState(){switch(Mo.brandCheck(this,t),this[T2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Mo.brandCheck(this,t),this[xW]}get error(){return Mo.brandCheck(this,t),this[t9e]}get onloadend(){return Mo.brandCheck(this,t),this[yo].loadend}set onloadend(e){Mo.brandCheck(this,t),this[yo].loadend&&this.removeEventListener("loadend",this[yo].loadend),typeof e=="function"?(this[yo].loadend=e,this.addEventListener("loadend",e)):this[yo].loadend=null}get onerror(){return Mo.brandCheck(this,t),this[yo].error}set onerror(e){Mo.brandCheck(this,t),this[yo].error&&this.removeEventListener("error",this[yo].error),typeof e=="function"?(this[yo].error=e,this.addEventListener("error",e)):this[yo].error=null}get onloadstart(){return Mo.brandCheck(this,t),this[yo].loadstart}set onloadstart(e){Mo.brandCheck(this,t),this[yo].loadstart&&this.removeEventListener("loadstart",this[yo].loadstart),typeof e=="function"?(this[yo].loadstart=e,this.addEventListener("loadstart",e)):this[yo].loadstart=null}get onprogress(){return Mo.brandCheck(this,t),this[yo].progress}set onprogress(e){Mo.brandCheck(this,t),this[yo].progress&&this.removeEventListener("progress",this[yo].progress),typeof e=="function"?(this[yo].progress=e,this.addEventListener("progress",e)):this[yo].progress=null}get onload(){return Mo.brandCheck(this,t),this[yo].load}set onload(e){Mo.brandCheck(this,t),this[yo].load&&this.removeEventListener("load",this[yo].load),typeof e=="function"?(this[yo].load=e,this.addEventListener("load",e)):this[yo].load=null}get onabort(){return Mo.brandCheck(this,t),this[yo].abort}set onabort(e){Mo.brandCheck(this,t),this[yo].abort&&this.removeEventListener("abort",this[yo].abort),typeof e=="function"?(this[yo].abort=e,this.addEventListener("abort",e)):this[yo].abort=null}};Qm.EMPTY=Qm.prototype.EMPTY=0;Qm.LOADING=Qm.prototype.LOADING=1;Qm.DONE=Qm.prototype.DONE=2;Object.defineProperties(Qm.prototype,{EMPTY:o4,LOADING:o4,DONE:o4,readAsArrayBuffer:wd,readAsBinaryString:wd,readAsText:wd,readAsDataURL:wd,abort:wd,readyState:wd,result:wd,error:wd,onloadstart:wd,onprogress:wd,onload:wd,onabort:wd,onerror:wd,onloadend:wd,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Qm,{EMPTY:o4,LOADING:o4,DONE:o4});n9e.exports={FileReader:Qm}});var vW=G((HKn,i9e)=>{"use strict";f();i9e.exports={kConstruct:Fs().kConstruct}});var a9e=G((VKn,s9e)=>{"use strict";f();var mTt=require("node:assert"),{URLSerializer:o9e}=Ed(),{isValidHeaderName:hTt}=I0();function gTt(t,e,n=!1){let r=o9e(t,n),i=o9e(e,n);return r===i}s(gTt,"urlEquals");function ATt(t){mTt(t!==null);let e=[];for(let n of t.split(","))n=n.trim(),hTt(n)&&e.push(n);return e}s(ATt,"getFieldValues");s9e.exports={urlEquals:gTt,getFieldValues:ATt}});var u9e=G((YKn,c9e)=>{"use strict";f();var{kConstruct:yTt}=vW(),{urlEquals:CTt,getFieldValues:wae}=a9e(),{kEnumerableProperty:w2,isDisturbed:xTt}=yi(),{webidl:Xn}=pc(),{Response:vTt,cloneResponse:bTt,fromInnerResponse:ETt}=WD(),{Request:ey,fromInnerRequest:ITt}=r4(),{kState:Om}=Cv(),{fetching:TTt}=HD(),{urlIsHttpHttpsScheme:bW,createDeferredPromise:s4,readAllBytes:wTt}=I0(),_ae=require("node:assert"),EW=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==yTt&&Xn.illegalConstructor(),Xn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,n={}){Xn.brandCheck(this,t);let r="Cache.match";Xn.argumentLengthCheck(arguments,1,r),e=Xn.converters.RequestInfo(e,r,"request"),n=Xn.converters.CacheQueryOptions(n,r,"options");let i=this.#n(e,n,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,n={}){Xn.brandCheck(this,t);let r="Cache.matchAll";return e!==void 0&&(e=Xn.converters.RequestInfo(e,r,"request")),n=Xn.converters.CacheQueryOptions(n,r,"options"),this.#n(e,n)}async add(e){Xn.brandCheck(this,t);let n="Cache.add";Xn.argumentLengthCheck(arguments,1,n),e=Xn.converters.RequestInfo(e,n,"request");let r=[e];return await this.addAll(r)}async addAll(e){Xn.brandCheck(this,t);let n="Cache.addAll";Xn.argumentLengthCheck(arguments,1,n);let r=[],i=[];for(let m of e){if(m===void 0)throw Xn.errors.conversionFailed({prefix:n,argument:"Argument 1",types:["undefined is not allowed"]});if(m=Xn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[Om];if(!bW(h.url)||h.method!=="GET")throw Xn.errors.exception({header:n,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new ey(m)[Om];if(!bW(h.url))throw Xn.errors.exception({header:n,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=s4();o.push(TTt({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(Xn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=wae(y.headersList.get("vary"));for(let b of v)if(b==="*"){g.reject(Xn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of o)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),r.push(g.promise)}let l=await Promise.all(r),c=[],u=0;for(let m of l){let h={type:"put",request:i[u],response:m};c.push(h),u++}let d=s4(),p=null;try{this.#t(c)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,n){Xn.brandCheck(this,t);let r="Cache.put";Xn.argumentLengthCheck(arguments,2,r),e=Xn.converters.RequestInfo(e,r,"request"),n=Xn.converters.Response(n,r,"response");let i=null;if(e instanceof ey?i=e[Om]:i=new ey(e)[Om],!bW(i.url)||i.method!=="GET")throw Xn.errors.exception({header:r,message:"Expected an http/s scheme when method is not GET"});let o=n[Om];if(o.status===206)throw Xn.errors.exception({header:r,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=wae(o.headersList.get("vary"));for(let g of h)if(g==="*")throw Xn.errors.exception({header:r,message:"Got * vary field value"})}if(o.body&&(xTt(o.body.stream)||o.body.stream.locked))throw Xn.errors.exception({header:r,message:"Response body is locked or disturbed"});let a=bTt(o),l=s4();if(o.body!=null){let g=o.body.stream.getReader();wTt(g).then(l.resolve,l.reject)}else l.resolve(void 0);let c=[],u={type:"put",request:i,response:a};c.push(u);let d=await l.promise;a.body!=null&&(a.body.source=d);let p=s4(),m=null;try{this.#t(c)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,n={}){Xn.brandCheck(this,t);let r="Cache.delete";Xn.argumentLengthCheck(arguments,1,r),e=Xn.converters.RequestInfo(e,r,"request"),n=Xn.converters.CacheQueryOptions(n,r,"options");let i=null;if(e instanceof ey){if(i=e[Om],i.method!=="GET"&&!n.ignoreMethod)return!1}else _ae(typeof e=="string"),i=new ey(e)[Om];let o=[],a={type:"delete",request:i,options:n};o.push(a);let l=s4(),c=null,u;try{u=this.#t(o)}catch(d){c=d}return queueMicrotask(()=>{c===null?l.resolve(!!u?.length):l.reject(c)}),l.promise}async keys(e=void 0,n={}){Xn.brandCheck(this,t);let r="Cache.keys";e!==void 0&&(e=Xn.converters.RequestInfo(e,r,"request")),n=Xn.converters.CacheQueryOptions(n,r,"options");let i=null;if(e!==void 0)if(e instanceof ey){if(i=e[Om],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new ey(e)[Om]);let o=s4(),a=[];if(e===void 0)for(let l of this.#e)a.push(l[0]);else{let l=this.#i(i,n);for(let c of l)a.push(c[0])}return queueMicrotask(()=>{let l=[];for(let c of a){let u=ITt(c,new AbortController().signal,"immutable");l.push(u)}o.resolve(Object.freeze(l))}),o.promise}#t(e){let n=this.#e,r=[...n],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let l;if(a.type==="delete"){if(l=this.#i(a.request,a.options),l.length===0)return[];for(let c of l){let u=n.indexOf(c);_ae(u!==-1),n.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let c=a.request;if(!bW(c.url))throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(c.method!=="GET")throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(a.request);for(let u of l){let d=n.indexOf(u);_ae(d!==-1),n.splice(d,1)}n.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=r,a}}#i(e,n,r){let i=[],o=r??this.#e;for(let a of o){let[l,c]=a;this.#r(e,l,c,n)&&i.push(a)}return i}#r(e,n,r=null,i){let o=new URL(e.url),a=new URL(n.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!CTt(o,a,!0))return!1;if(r==null||i?.ignoreVary||!r.headersList.contains("vary"))return!0;let l=wae(r.headersList.get("vary"));for(let c of l){if(c==="*")return!1;let u=n.headersList.get(c),d=e.headersList.get(c);if(u!==d)return!1}return!0}#n(e,n,r=1/0){let i=null;if(e!==void 0)if(e instanceof ey){if(i=e[Om],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new ey(e)[Om]);let o=[];if(e===void 0)for(let l of this.#e)o.push(l[1]);else{let l=this.#i(i,n);for(let c of l)o.push(c[1])}let a=[];for(let l of o){let c=ETt(l,"immutable");if(a.push(c.clone()),a.length>=r)break}return Object.freeze(a)}};Object.defineProperties(EW.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:w2,matchAll:w2,add:w2,addAll:w2,put:w2,delete:w2,keys:w2});var l9e=[{key:"ignoreSearch",converter:Xn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:Xn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:Xn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Xn.converters.CacheQueryOptions=Xn.dictionaryConverter(l9e);Xn.converters.MultiCacheQueryOptions=Xn.dictionaryConverter([...l9e,{key:"cacheName",converter:Xn.converters.DOMString}]);Xn.converters.Response=Xn.interfaceConverter(vTt);Xn.converters["sequence<RequestInfo>"]=Xn.sequenceConverter(Xn.converters.RequestInfo);c9e.exports={Cache:EW}});var f9e=G((XKn,d9e)=>{"use strict";f();var{kConstruct:VD}=vW(),{Cache:IW}=u9e(),{webidl:Yc}=pc(),{kEnumerableProperty:$D}=yi(),TW=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==VD&&Yc.illegalConstructor(),Yc.util.markAsUncloneable(this)}async match(e,n={}){if(Yc.brandCheck(this,t),Yc.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=Yc.converters.RequestInfo(e),n=Yc.converters.MultiCacheQueryOptions(n),n.cacheName!=null){if(this.#e.has(n.cacheName)){let r=this.#e.get(n.cacheName);return await new IW(VD,r).match(e,n)}}else for(let r of this.#e.values()){let o=await new IW(VD,r).match(e,n);if(o!==void 0)return o}}async has(e){Yc.brandCheck(this,t);let n="CacheStorage.has";return Yc.argumentLengthCheck(arguments,1,n),e=Yc.converters.DOMString(e,n,"cacheName"),this.#e.has(e)}async open(e){Yc.brandCheck(this,t);let n="CacheStorage.open";if(Yc.argumentLengthCheck(arguments,1,n),e=Yc.converters.DOMString(e,n,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new IW(VD,i)}let r=[];return this.#e.set(e,r),new IW(VD,r)}async delete(e){Yc.brandCheck(this,t);let n="CacheStorage.delete";return Yc.argumentLengthCheck(arguments,1,n),e=Yc.converters.DOMString(e,n,"cacheName"),this.#e.delete(e)}async keys(){return Yc.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(TW.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:$D,has:$D,open:$D,delete:$D,keys:$D});d9e.exports={CacheStorage:TW}});var m9e=G((tJn,p9e)=>{"use strict";f();p9e.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var Sae=G((rJn,C9e)=>{"use strict";f();function _Tt(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>=0&&n<=8||n>=10&&n<=31||n===127)return!0}return!1}s(_Tt,"isCTLExcludingHtab");function h9e(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===60||n===62||n===64||n===44||n===59||n===58||n===92||n===47||n===91||n===93||n===63||n===61||n===123||n===125)throw new Error("Invalid cookie name")}}s(h9e,"validateCookieName");function g9e(t){let e=t.length,n=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++n}for(;n<e;){let r=t.charCodeAt(n++);if(r<33||r>126||r===34||r===44||r===59||r===92)throw new Error("Invalid cookie value")}}s(g9e,"validateCookieValue");function A9e(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<32||n===127||n===59)throw new Error("Invalid cookie path")}}s(A9e,"validateCookiePath");function STt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(STt,"validateCookieDomain");var RTt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],kTt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wW=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function y9e(t){return typeof t=="number"&&(t=new Date(t)),`${RTt[t.getUTCDay()]}, ${wW[t.getUTCDate()]} ${kTt[t.getUTCMonth()]} ${t.getUTCFullYear()} ${wW[t.getUTCHours()]}:${wW[t.getUTCMinutes()]}:${wW[t.getUTCSeconds()]} GMT`}s(y9e,"toIMFDate");function BTt(t){if(t<0)throw new Error("Invalid cookie max-age")}s(BTt,"validateCookieMaxAge");function DTt(t){if(t.name.length===0)return null;h9e(t.name),g9e(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(BTt(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(STt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(A9e(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${y9e(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let n of t.unparsed){if(!n.includes("="))throw new Error("Invalid unparsed");let[r,...i]=n.split("=");e.push(`${r.trim()}=${i.join("=")}`)}return e.join("; ")}s(DTt,"stringify");C9e.exports={isCTLExcludingHtab:_Tt,validateCookieName:h9e,validateCookiePath:A9e,validateCookieValue:g9e,toIMFDate:y9e,stringify:DTt}});var v9e=G((sJn,x9e)=>{"use strict";f();var{maxNameValuePairSize:PTt,maxAttributeValueSize:NTt}=m9e(),{isCTLExcludingHtab:LTt}=Sae(),{collectASequenceOfCodePointsFast:_W}=Ed(),FTt=require("node:assert");function MTt(t){if(LTt(t))return null;let e="",n="",r="",i="";if(t.includes(";")){let o={position:0};e=_W(";",t,o),n=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};r=_W("=",e,o),i=e.slice(o.position+1)}return r=r.trim(),i=i.trim(),r.length+i.length>PTt?null:{name:r,value:i,...a4(n)}}s(MTt,"parseSetCookie");function a4(t,e={}){if(t.length===0)return e;FTt(t[0]===";"),t=t.slice(1);let n="";t.includes(";")?(n=_W(";",t,{position:0}),t=t.slice(n.length)):(n=t,t="");let r="",i="";if(n.includes("=")){let a={position:0};r=_W("=",n,a),i=n.slice(a.position+1)}else r=n;if(r=r.trim(),i=i.trim(),i.length>NTt)return a4(t,e);let o=r.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return a4(t,e);let l=Number(i);e.maxAge=l}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",l=i.toLowerCase();l.includes("none")&&(a="None"),l.includes("strict")&&(a="Strict"),l.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${r}=${i}`);return a4(t,e)}s(a4,"parseUnparsedAttributes");x9e.exports={parseSetCookie:MTt,parseUnparsedAttributes:a4}});var I9e=G((cJn,E9e)=>{"use strict";f();var{parseSetCookie:QTt}=v9e(),{stringify:OTt}=Sae(),{webidl:Fi}=pc(),{Headers:SW}=v2();function UTt(t){Fi.argumentLengthCheck(arguments,1,"getCookies"),Fi.brandCheck(t,SW,{strict:!1});let e=t.get("cookie"),n={};if(!e)return n;for(let r of e.split(";")){let[i,...o]=r.split("=");n[i.trim()]=o.join("=")}return n}s(UTt,"getCookies");function qTt(t,e,n){Fi.brandCheck(t,SW,{strict:!1});let r="deleteCookie";Fi.argumentLengthCheck(arguments,2,r),e=Fi.converters.DOMString(e,r,"name"),n=Fi.converters.DeleteCookieAttributes(n),b9e(t,{name:e,value:"",expires:new Date(0),...n})}s(qTt,"deleteCookie");function WTt(t){Fi.argumentLengthCheck(arguments,1,"getSetCookies"),Fi.brandCheck(t,SW,{strict:!1});let e=t.getSetCookie();return e?e.map(n=>QTt(n)):[]}s(WTt,"getSetCookies");function b9e(t,e){Fi.argumentLengthCheck(arguments,2,"setCookie"),Fi.brandCheck(t,SW,{strict:!1}),e=Fi.converters.Cookie(e);let n=OTt(e);n&&t.append("Set-Cookie",n)}s(b9e,"setCookie");Fi.converters.DeleteCookieAttributes=Fi.dictionaryConverter([{converter:Fi.nullableConverter(Fi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Fi.nullableConverter(Fi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Fi.converters.Cookie=Fi.dictionaryConverter([{converter:Fi.converters.DOMString,key:"name"},{converter:Fi.converters.DOMString,key:"value"},{converter:Fi.nullableConverter(t=>typeof t=="number"?Fi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Fi.nullableConverter(Fi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Fi.nullableConverter(Fi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Fi.nullableConverter(Fi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Fi.nullableConverter(Fi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Fi.nullableConverter(Fi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Fi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Fi.sequenceConverter(Fi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);E9e.exports={getCookies:UTt,deleteCookie:qTt,getSetCookies:WTt,setCookie:b9e}});var c4=G((fJn,w9e)=>{"use strict";f();var{webidl:jn}=pc(),{kEnumerableProperty:_d}=yi(),{kConstruct:T9e}=Fs(),{MessagePort:GTt}=require("node:worker_threads"),l4=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,n={}){if(e===T9e){super(arguments[1],arguments[2]),jn.util.markAsUncloneable(this);return}let r="MessageEvent constructor";jn.argumentLengthCheck(arguments,1,r),e=jn.converters.DOMString(e,r,"type"),n=jn.converters.MessageEventInit(n,r,"eventInitDict"),super(e,n),this.#e=n,jn.util.markAsUncloneable(this)}get data(){return jn.brandCheck(this,t),this.#e.data}get origin(){return jn.brandCheck(this,t),this.#e.origin}get lastEventId(){return jn.brandCheck(this,t),this.#e.lastEventId}get source(){return jn.brandCheck(this,t),this.#e.source}get ports(){return jn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,n=!1,r=!1,i=null,o="",a="",l=null,c=[]){return jn.brandCheck(this,t),jn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:n,cancelable:r,data:i,origin:o,lastEventId:a,source:l,ports:c})}static createFastMessageEvent(e,n){let r=new t(T9e,e,n);return r.#e=n,r.#e.data??=null,r.#e.origin??="",r.#e.lastEventId??="",r.#e.source??=null,r.#e.ports??=[],r}},{createFastMessageEvent:HTt}=l4;delete l4.createFastMessageEvent;var RW=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,n={}){let r="CloseEvent constructor";jn.argumentLengthCheck(arguments,1,r),e=jn.converters.DOMString(e,r,"type"),n=jn.converters.CloseEventInit(n),super(e,n),this.#e=n,jn.util.markAsUncloneable(this)}get wasClean(){return jn.brandCheck(this,t),this.#e.wasClean}get code(){return jn.brandCheck(this,t),this.#e.code}get reason(){return jn.brandCheck(this,t),this.#e.reason}},kW=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,n){let r="ErrorEvent constructor";jn.argumentLengthCheck(arguments,1,r),super(e,n),jn.util.markAsUncloneable(this),e=jn.converters.DOMString(e,r,"type"),n=jn.converters.ErrorEventInit(n??{}),this.#e=n}get message(){return jn.brandCheck(this,t),this.#e.message}get filename(){return jn.brandCheck(this,t),this.#e.filename}get lineno(){return jn.brandCheck(this,t),this.#e.lineno}get colno(){return jn.brandCheck(this,t),this.#e.colno}get error(){return jn.brandCheck(this,t),this.#e.error}};Object.defineProperties(l4.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:_d,origin:_d,lastEventId:_d,source:_d,ports:_d,initMessageEvent:_d});Object.defineProperties(RW.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:_d,code:_d,wasClean:_d});Object.defineProperties(kW.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:_d,filename:_d,lineno:_d,colno:_d,error:_d});jn.converters.MessagePort=jn.interfaceConverter(GTt);jn.converters["sequence<MessagePort>"]=jn.sequenceConverter(jn.converters.MessagePort);var Rae=[{key:"bubbles",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];jn.converters.MessageEventInit=jn.dictionaryConverter([...Rae,{key:"data",converter:jn.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:jn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:jn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:jn.nullableConverter(jn.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:jn.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);jn.converters.CloseEventInit=jn.dictionaryConverter([...Rae,{key:"wasClean",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:jn.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:jn.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);jn.converters.ErrorEventInit=jn.dictionaryConverter([...Rae,{key:"message",converter:jn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:jn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:jn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:jn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:jn.converters.any}]);w9e.exports={MessageEvent:l4,CloseEvent:RW,ErrorEvent:kW,createFastMessageEvent:HTt}});var _2=G((hJn,_9e)=>{"use strict";f();var jTt="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",VTt={enumerable:!0,writable:!1,configurable:!1},$Tt={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},zTt={NOT_SENT:0,PROCESSING:1,SENT:2},YTt={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},KTt=2**16-1,JTt={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},XTt=Buffer.allocUnsafe(0),ZTt={string:1,typedArray:2,arrayBuffer:3,blob:4};_9e.exports={uid:jTt,sentCloseFrameState:zTt,staticPropertyDescriptors:VTt,states:$Tt,opcodes:YTt,maxUnsigned16Bit:KTt,parserStates:JTt,emptyBuffer:XTt,sendHints:ZTt}});var zD=G((AJn,S9e)=>{"use strict";f();S9e.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var JD=G((CJn,M9e)=>{"use strict";f();var{kReadyState:YD,kController:ewt,kResponse:twt,kBinaryType:nwt,kWebSocketURL:rwt}=zD(),{states:KD,opcodes:Pv}=_2(),{ErrorEvent:iwt,createFastMessageEvent:owt}=c4(),{isUtf8:swt}=require("node:buffer"),{collectASequenceOfCodePointsFast:awt,removeHTTPWhitespace:R9e}=Ed();function lwt(t){return t[YD]===KD.CONNECTING}s(lwt,"isConnecting");function cwt(t){return t[YD]===KD.OPEN}s(cwt,"isEstablished");function uwt(t){return t[YD]===KD.CLOSING}s(uwt,"isClosing");function dwt(t){return t[YD]===KD.CLOSED}s(dwt,"isClosed");function kae(t,e,n=(i,o)=>new Event(i,o),r={}){let i=n(t,r);e.dispatchEvent(i)}s(kae,"fireEvent");function fwt(t,e,n){if(t[YD]!==KD.OPEN)return;let r;if(e===Pv.TEXT)try{r=F9e(n)}catch{B9e(t,"Received invalid UTF-8 in text frame.");return}else e===Pv.BINARY&&(t[nwt]==="blob"?r=new Blob([n]):r=pwt(n));kae("message",t,owt,{origin:t[rwt].origin,data:r})}s(fwt,"websocketMessageReceived");function pwt(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(pwt,"toArrayBuffer");function mwt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===44||n===47||n===58||n===59||n===60||n===61||n===62||n===63||n===64||n===91||n===92||n===93||n===123||n===125)return!1}return!0}s(mwt,"isValidSubprotocol");function hwt(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(hwt,"isValidStatusCode");function B9e(t,e){let{[ewt]:n,[twt]:r}=t;n.abort(),r?.socket&&!r.socket.destroyed&&r.socket.destroy(),e&&kae("error",t,(i,o)=>new iwt(i,o),{error:new Error(e),message:e})}s(B9e,"failWebsocketConnection");function D9e(t){return t===Pv.CLOSE||t===Pv.PING||t===Pv.PONG}s(D9e,"isControlFrame");function P9e(t){return t===Pv.CONTINUATION}s(P9e,"isContinuationFrame");function N9e(t){return t===Pv.TEXT||t===Pv.BINARY}s(N9e,"isTextBinaryFrame");function gwt(t){return N9e(t)||P9e(t)||D9e(t)}s(gwt,"isValidOpcode");function Awt(t){let e={position:0},n=new Map;for(;e.position<t.length;){let r=awt(";",t,e),[i,o=""]=r.split("=");n.set(R9e(i,!0,!1),R9e(o,!1,!0)),e.position++}return n}s(Awt,"parseExtensions");function ywt(t){for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n<48||n>57)return!1}return!0}s(ywt,"isValidClientWindowBits");var L9e=typeof process.versions.icu=="string",k9e=L9e?new TextDecoder("utf-8",{fatal:!0}):void 0,F9e=L9e?k9e.decode.bind(k9e):function(t){if(swt(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};M9e.exports={isConnecting:lwt,isEstablished:cwt,isClosing:uwt,isClosed:dwt,fireEvent:kae,isValidSubprotocol:mwt,isValidStatusCode:hwt,failWebsocketConnection:B9e,websocketMessageReceived:fwt,utf8Decode:F9e,isControlFrame:D9e,isContinuationFrame:P9e,isTextBinaryFrame:N9e,isValidOpcode:gwt,parseExtensions:Awt,isValidClientWindowBits:ywt}});var DW=G((bJn,Q9e)=>{"use strict";f();var{maxUnsigned16Bit:Cwt}=_2(),BW=16386,Bae,XD=null,u4=BW;try{Bae=require("node:crypto")}catch{Bae={randomFillSync:s(function(e,n,r){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function xwt(){return u4===BW&&(u4=0,Bae.randomFillSync(XD??=Buffer.allocUnsafe(BW),0,BW)),[XD[u4++],XD[u4++],XD[u4++],XD[u4++]]}s(xwt,"generateMask");var Dae=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let n=this.frameData,r=xwt(),i=n?.byteLength??0,o=i,a=6;i>Cwt?(a+=8,o=127):i>125&&(a+=2,o=126);let l=Buffer.allocUnsafe(i+a);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[a-4]=r[0],l[a-3]=r[1],l[a-2]=r[2],l[a-1]=r[3],l[1]=o,o===126?l.writeUInt16BE(i,2):o===127&&(l[2]=l[3]=0,l.writeUIntBE(i,4,6)),l[1]|=128;for(let c=0;c<i;++c)l[a+c]=n[c]^r[c&3];return l}};Q9e.exports={WebsocketFrameSend:Dae}});var Nae=G((TJn,j9e)=>{"use strict";f();var{uid:vwt,states:ZD,sentCloseFrameState:PW,emptyBuffer:bwt,opcodes:Ewt}=_2(),{kReadyState:eP,kSentClose:NW,kByteParser:U9e,kReceivedClose:O9e,kResponse:q9e}=zD(),{fireEvent:Iwt,failWebsocketConnection:Nv,isClosing:Twt,isClosed:wwt,isEstablished:_wt,parseExtensions:Swt}=JD(),{channels:d4}=I5(),{CloseEvent:Rwt}=c4(),{makeRequest:kwt}=r4(),{fetching:Bwt}=HD(),{Headers:Dwt,getHeadersList:Pwt}=v2(),{getDecodeSplit:Nwt}=I0(),{WebsocketFrameSend:Lwt}=DW(),Pae;try{Pae=require("node:crypto")}catch{}function Fwt(t,e,n,r,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let l=kwt({urlList:[a],client:n,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=Pwt(new Dwt(o.headers));l.headersList=p}let c=Pae.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",c),l.headersList.append("sec-websocket-version","13");for(let p of e)l.headersList.append("sec-websocket-protocol",p);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),Bwt({request:l,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){Nv(r,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){Nv(r,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Nv(r,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Nv(r,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=Pae.createHash("sha1").update(c+vwt).digest("base64");if(m!==h){Nv(r,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=Swt(g),!y.has("permessage-deflate"))){Nv(r,"Sec-WebSocket-Extensions header does not match.");return}let v=p.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!Nwt("sec-websocket-protocol",l.headersList).includes(v)){Nv(r,"Protocol was not set in the opening handshake.");return}p.socket.on("data",W9e),p.socket.on("close",G9e),p.socket.on("error",H9e),d4.open.hasSubscribers&&d4.open.publish({address:p.socket.address(),protocol:v,extensions:g}),i(p,y)}})}s(Fwt,"establishWebSocketConnection");function Mwt(t,e,n,r){if(!(Twt(t)||wwt(t)))if(!_wt(t))Nv(t,"Connection was closed before it was established."),t[eP]=ZD.CLOSING;else if(t[NW]===PW.NOT_SENT){t[NW]=PW.PROCESSING;let i=new Lwt;e!==void 0&&n===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&n!==void 0?(i.frameData=Buffer.allocUnsafe(2+r),i.frameData.writeUInt16BE(e,0),i.frameData.write(n,2,"utf-8")):i.frameData=bwt,t[q9e].socket.write(i.createFrame(Ewt.CLOSE)),t[NW]=PW.SENT,t[eP]=ZD.CLOSING}else t[eP]=ZD.CLOSING}s(Mwt,"closeWebSocketConnection");function W9e(t){this.ws[U9e].write(t)||this.pause()}s(W9e,"onSocketData");function G9e(){let{ws:t}=this,{[q9e]:e}=t;e.socket.off("data",W9e),e.socket.off("close",G9e),e.socket.off("error",H9e);let n=t[NW]===PW.SENT&&t[O9e],r=1005,i="",o=t[U9e].closingInfo;o&&!o.error?(r=o.code??1005,i=o.reason):t[O9e]||(r=1006),t[eP]=ZD.CLOSED,Iwt("close",t,(a,l)=>new Rwt(a,l),{wasClean:n,code:r,reason:i}),d4.close.hasSubscribers&&d4.close.publish({websocket:t,code:r,reason:i})}s(G9e,"onSocketClose");function H9e(t){let{ws:e}=this;e[eP]=ZD.CLOSING,d4.socketError.hasSubscribers&&d4.socketError.publish(t),this.destroy()}s(H9e,"onSocketError");j9e.exports={establishWebSocketConnection:Fwt,closeWebSocketConnection:Mwt}});var $9e=G((SJn,V9e)=>{"use strict";f();var{createInflateRaw:Qwt,Z_DEFAULT_WINDOWBITS:Owt}=require("node:zlib"),{isValidClientWindowBits:Uwt}=JD(),qwt=Buffer.from([0,0,255,255]),LW=Symbol("kBuffer"),FW=Symbol("kLength"),Lae=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,n,r){if(!this.#e){let i=Owt;if(this.#t.serverMaxWindowBits){if(!Uwt(this.#t.serverMaxWindowBits)){r(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=Qwt({windowBits:i}),this.#e[LW]=[],this.#e[FW]=0,this.#e.on("data",o=>{this.#e[LW].push(o),this.#e[FW]+=o.length}),this.#e.on("error",o=>{this.#e=null,r(o)})}this.#e.write(e),n&&this.#e.write(qwt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[LW],this.#e[FW]);this.#e[LW].length=0,this.#e[FW]=0,r(null,i)})}};V9e.exports={PerMessageDeflate:Lae}});var i6e=G((BJn,r6e)=>{"use strict";f();var{Writable:Wwt}=require("node:stream"),Gwt=require("node:assert"),{parserStates:Sd,opcodes:f4,states:Hwt,emptyBuffer:z9e,sentCloseFrameState:Y9e}=_2(),{kReadyState:jwt,kSentClose:K9e,kResponse:J9e,kReceivedClose:X9e}=zD(),{channels:MW}=I5(),{isValidStatusCode:Vwt,isValidOpcode:$wt,failWebsocketConnection:sp,websocketMessageReceived:Z9e,utf8Decode:zwt,isControlFrame:e6e,isTextBinaryFrame:Fae,isContinuationFrame:Ywt}=JD(),{WebsocketFrameSend:t6e}=DW(),{closeWebSocketConnection:n6e}=Nae(),{PerMessageDeflate:Kwt}=$9e(),Mae=class extends Wwt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#r=Sd.INFO;#n={};#o=[];#s;constructor(e,n){super(),this.ws=e,this.#s=n??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new Kwt(n))}_write(e,n,r){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(r)}run(e){for(;this.#i;)if(this.#r===Sd.INFO){if(this.#t<2)return e();let n=this.consume(2),r=(n[0]&128)!==0,i=n[0]&15,o=(n[1]&128)===128,a=!r&&i!==f4.CONTINUATION,l=n[1]&127,c=n[0]&64,u=n[0]&32,d=n[0]&16;if(!$wt(i))return sp(this.ws,"Invalid opcode received"),e();if(o)return sp(this.ws,"Frame cannot be masked"),e();if(c!==0&&!this.#s.has("permessage-deflate")){sp(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){sp(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!Fae(i)){sp(this.ws,"Invalid frame type was fragmented.");return}if(Fae(i)&&this.#o.length>0){sp(this.ws,"Expected continuation frame");return}if(this.#n.fragmented&&a){sp(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||a)&&e6e(i)){sp(this.ws,"Control frame either too large or fragmented");return}if(Ywt(i)&&this.#o.length===0&&!this.#n.compressed){sp(this.ws,"Unexpected continuation frame");return}l<=125?(this.#n.payloadLength=l,this.#r=Sd.READ_DATA):l===126?this.#r=Sd.PAYLOADLENGTH_16:l===127&&(this.#r=Sd.PAYLOADLENGTH_64),Fae(i)&&(this.#n.binaryType=i,this.#n.compressed=c!==0),this.#n.opcode=i,this.#n.masked=o,this.#n.fin=r,this.#n.fragmented=a}else if(this.#r===Sd.PAYLOADLENGTH_16){if(this.#t<2)return e();let n=this.consume(2);this.#n.payloadLength=n.readUInt16BE(0),this.#r=Sd.READ_DATA}else if(this.#r===Sd.PAYLOADLENGTH_64){if(this.#t<8)return e();let n=this.consume(8),r=n.readUInt32BE(0);if(r>2**31-1){sp(this.ws,"Received payload length > 2^31 bytes.");return}let i=n.readUInt32BE(4);this.#n.payloadLength=(r<<8)+i,this.#r=Sd.READ_DATA}else if(this.#r===Sd.READ_DATA){if(this.#t<this.#n.payloadLength)return e();let n=this.consume(this.#n.payloadLength);if(e6e(this.#n.opcode))this.#i=this.parseControlFrame(n),this.#r=Sd.INFO;else if(this.#n.compressed){this.#s.get("permessage-deflate").decompress(n,this.#n.fin,(r,i)=>{if(r){n6e(this.ws,1007,r.message,r.message.length);return}if(this.#o.push(i),!this.#n.fin){this.#r=Sd.INFO,this.#i=!0,this.run(e);return}Z9e(this.ws,this.#n.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#r=Sd.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(n),!this.#n.fragmented&&this.#n.fin){let r=Buffer.concat(this.#o);Z9e(this.ws,this.#n.binaryType,r),this.#o.length=0}this.#r=Sd.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return z9e;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let n=Buffer.allocUnsafe(e),r=0;for(;r!==e;){let i=this.#e[0],{length:o}=i;if(o+r===e){n.set(this.#e.shift(),r);break}else if(o+r>e){n.set(i.subarray(0,e-r),r),this.#e[0]=i.subarray(e-r);break}else n.set(this.#e.shift(),r),r+=i.length}return this.#t-=e,n}parseCloseBody(e){Gwt(e.length!==1);let n;if(e.length>=2&&(n=e.readUInt16BE(0)),n!==void 0&&!Vwt(n))return{code:1002,reason:"Invalid status code",error:!0};let r=e.subarray(2);r[0]===239&&r[1]===187&&r[2]===191&&(r=r.subarray(3));try{r=zwt(r)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:n,reason:r,error:!1}}parseControlFrame(e){let{opcode:n,payloadLength:r}=this.#n;if(n===f4.CLOSE){if(r===1)return sp(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#n.closeInfo=this.parseCloseBody(e),this.#n.closeInfo.error){let{code:i,reason:o}=this.#n.closeInfo;return n6e(this.ws,i,o,o.length),sp(this.ws,o),!1}if(this.ws[K9e]!==Y9e.SENT){let i=z9e;this.#n.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#n.closeInfo.code,0));let o=new t6e(i);this.ws[J9e].socket.write(o.createFrame(f4.CLOSE),a=>{a||(this.ws[K9e]=Y9e.SENT)})}return this.ws[jwt]=Hwt.CLOSING,this.ws[X9e]=!0,!1}else if(n===f4.PING){if(!this.ws[X9e]){let i=new t6e(e);this.ws[J9e].socket.write(i.createFrame(f4.PONG)),MW.ping.hasSubscribers&&MW.ping.publish({payload:e})}}else n===f4.PONG&&MW.pong.hasSubscribers&&MW.pong.publish({payload:e});return!0}get closingInfo(){return this.#n.closeInfo}};r6e.exports={ByteParser:Mae}});var c6e=G((NJn,l6e)=>{"use strict";f();var{WebsocketFrameSend:Jwt}=DW(),{opcodes:o6e,sendHints:p4}=_2(),Xwt=Yoe(),s6e=Buffer[Symbol.species],Qae=class{static{s(this,"SendQueue")}#e=new Xwt;#t=!1;#i;constructor(e){this.#i=e}add(e,n,r){if(r!==p4.blob){let o=a6e(e,r);if(!this.#t)this.#i.write(o,n);else{let a={promise:null,callback:n,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=a6e(o,r)}),callback:n,frame:null};this.#e.push(i),this.#t||this.#r()}async#r(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let n=e.shift();n.promise!==null&&await n.promise,this.#i.write(n.frame,n.callback),n.callback=n.frame=null}this.#t=!1}};function a6e(t,e){return new Jwt(Zwt(t,e)).createFrame(e===p4.string?o6e.TEXT:o6e.BINARY)}s(a6e,"createFrame");function Zwt(t,e){switch(e){case p4.string:return Buffer.from(t);case p4.arrayBuffer:case p4.blob:return new s6e(t);case p4.typedArray:return new s6e(t.buffer,t.byteOffset,t.byteLength)}}s(Zwt,"toBuffer");l6e.exports={SendQueue:Qae}});var y6e=G((MJn,A6e)=>{"use strict";f();var{webidl:Ur}=pc(),{URLSerializer:e_t}=Ed(),{environmentSettingsObject:u6e}=I0(),{staticPropertyDescriptors:Lv,states:tP,sentCloseFrameState:t_t,sendHints:QW}=_2(),{kWebSocketURL:d6e,kReadyState:Oae,kController:n_t,kBinaryType:OW,kResponse:f6e,kSentClose:r_t,kByteParser:i_t}=zD(),{isConnecting:o_t,isEstablished:s_t,isClosing:a_t,isValidSubprotocol:l_t,fireEvent:p6e}=JD(),{establishWebSocketConnection:c_t,closeWebSocketConnection:m6e}=Nae(),{ByteParser:u_t}=i6e(),{kEnumerableProperty:ap,isBlobLike:h6e}=yi(),{getGlobalDispatcher:d_t}=Zq(),{types:g6e}=require("node:util"),{ErrorEvent:f_t,CloseEvent:p_t}=c4(),{SendQueue:m_t}=c6e(),B0=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#r="";#n;constructor(e,n=[]){super(),Ur.util.markAsUncloneable(this);let r="WebSocket constructor";Ur.argumentLengthCheck(arguments,1,r);let i=Ur.converters["DOMString or sequence<DOMString> or WebSocketInit"](n,r,"options");e=Ur.converters.USVString(e,r,"url"),n=i.protocols;let o=u6e.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(c){throw new DOMException(c,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof n=="string"&&(n=[n]),n.length!==new Set(n.map(c=>c.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(n.length>0&&!n.every(c=>l_t(c)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[d6e]=new URL(a.href);let l=u6e.settingsObject;this[n_t]=c_t(a,n,l,this,(c,u)=>this.#o(c,u),i),this[Oae]=t.CONNECTING,this[r_t]=t_t.NOT_SENT,this[OW]="blob"}close(e=void 0,n=void 0){Ur.brandCheck(this,t);let r="WebSocket.close";if(e!==void 0&&(e=Ur.converters["unsigned short"](e,r,"code",{clamp:!0})),n!==void 0&&(n=Ur.converters.USVString(n,r,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(n!==void 0&&(i=Buffer.byteLength(n),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");m6e(this,e,n,i)}send(e){Ur.brandCheck(this,t);let n="WebSocket.send";if(Ur.argumentLengthCheck(arguments,1,n),e=Ur.converters.WebSocketSendData(e,n,"data"),o_t(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!s_t(this)||a_t(this)))if(typeof e=="string"){let r=Buffer.byteLength(e);this.#t+=r,this.#n.add(e,()=>{this.#t-=r},QW.string)}else g6e.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},QW.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},QW.typedArray)):h6e(e)&&(this.#t+=e.size,this.#n.add(e,()=>{this.#t-=e.size},QW.blob))}get readyState(){return Ur.brandCheck(this,t),this[Oae]}get bufferedAmount(){return Ur.brandCheck(this,t),this.#t}get url(){return Ur.brandCheck(this,t),e_t(this[d6e])}get extensions(){return Ur.brandCheck(this,t),this.#r}get protocol(){return Ur.brandCheck(this,t),this.#i}get onopen(){return Ur.brandCheck(this,t),this.#e.open}set onopen(e){Ur.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Ur.brandCheck(this,t),this.#e.error}set onerror(e){Ur.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Ur.brandCheck(this,t),this.#e.close}set onclose(e){Ur.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Ur.brandCheck(this,t),this.#e.message}set onmessage(e){Ur.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Ur.brandCheck(this,t),this[OW]}set binaryType(e){Ur.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[OW]="blob":this[OW]=e}#o(e,n){this[f6e]=e;let r=new u_t(this,n);r.on("drain",h_t),r.on("error",g_t.bind(this)),e.socket.ws=this,this[i_t]=r,this.#n=new m_t(e.socket),this[Oae]=tP.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#r=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),p6e("open",this)}};B0.CONNECTING=B0.prototype.CONNECTING=tP.CONNECTING;B0.OPEN=B0.prototype.OPEN=tP.OPEN;B0.CLOSING=B0.prototype.CLOSING=tP.CLOSING;B0.CLOSED=B0.prototype.CLOSED=tP.CLOSED;Object.defineProperties(B0.prototype,{CONNECTING:Lv,OPEN:Lv,CLOSING:Lv,CLOSED:Lv,url:ap,readyState:ap,bufferedAmount:ap,onopen:ap,onerror:ap,onclose:ap,close:ap,onmessage:ap,binaryType:ap,send:ap,extensions:ap,protocol:ap,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(B0,{CONNECTING:Lv,OPEN:Lv,CLOSING:Lv,CLOSED:Lv});Ur.converters["sequence<DOMString>"]=Ur.sequenceConverter(Ur.converters.DOMString);Ur.converters["DOMString or sequence<DOMString>"]=function(t,e,n){return Ur.util.Type(t)==="Object"&&Symbol.iterator in t?Ur.converters["sequence<DOMString>"](t):Ur.converters.DOMString(t,e,n)};Ur.converters.WebSocketInit=Ur.dictionaryConverter([{key:"protocols",converter:Ur.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Ur.converters.any,defaultValue:s(()=>d_t(),"defaultValue")},{key:"headers",converter:Ur.nullableConverter(Ur.converters.HeadersInit)}]);Ur.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Ur.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Ur.converters.WebSocketInit(t):{protocols:Ur.converters["DOMString or sequence<DOMString>"](t)}};Ur.converters.WebSocketSendData=function(t){if(Ur.util.Type(t)==="Object"){if(h6e(t))return Ur.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||g6e.isArrayBuffer(t))return Ur.converters.BufferSource(t)}return Ur.converters.USVString(t)};function h_t(){this.ws[f6e].socket.resume()}s(h_t,"onParserDrain");function g_t(t){let e,n;t instanceof p_t?(e=t.reason,n=t.code):e=t.message,p6e("error",this,()=>new f_t("error",{error:t,message:e})),m6e(this,n)}s(g_t,"onParserError");A6e.exports={WebSocket:B0}});var Uae=G((UJn,C6e)=>{"use strict";f();function A_t(t){return t.indexOf("\0")===-1}s(A_t,"isValidLastEventId");function y_t(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(y_t,"isASCIINumber");function C_t(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(C_t,"delay");C6e.exports={isValidLastEventId:A_t,isASCIINumber:y_t,delay:C_t}});var E6e=G((GJn,b6e)=>{"use strict";f();var{Transform:x_t}=require("node:stream"),{isASCIINumber:x6e,isValidLastEventId:v6e}=Uae(),ty=[239,187,191],qae=10,UW=13,v_t=58,b_t=32,Wae=class extends x_t{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,n,r){if(e.length===0){r();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===ty[0]){r();return}this.checkBOM=!1,r();return;case 2:if(this.buffer[0]===ty[0]&&this.buffer[1]===ty[1]){r();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===ty[0]&&this.buffer[1]===ty[1]&&this.buffer[2]===ty[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,r();return}this.checkBOM=!1;break;default:this.buffer[0]===ty[0]&&this.buffer[1]===ty[1]&&this.buffer[2]===ty[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===qae){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===qae||this.buffer[this.pos]===UW){this.buffer[this.pos]===UW&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===qae||this.buffer[this.pos]===UW){this.buffer[this.pos]===UW&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}r()}parseLine(e,n){if(e.length===0)return;let r=e.indexOf(v_t);if(r===0)return;let i="",o="";if(r!==-1){i=e.subarray(0,r).toString("utf8");let a=r+1;e[a]===b_t&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":n[i]===void 0?n[i]=o:n[i]+=`
${o}`;break;case"retry":x6e(o)&&(n[i]=o);break;case"id":v6e(o)&&(n[i]=o);break;case"event":o.length>0&&(n[i]=o);break}}processEvent(e){e.retry&&x6e(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&v6e(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};b6e.exports={EventSourceStream:Wae}});var B6e=G((VJn,k6e)=>{"use strict";f();var{pipeline:E_t}=require("node:stream"),{fetching:I_t}=HD(),{makeRequest:T_t}=r4(),{webidl:ny}=pc(),{EventSourceStream:w_t}=E6e(),{parseMIMEType:__t}=Ed(),{createFastMessageEvent:S_t}=c4(),{isNetworkError:I6e}=WD(),{delay:R_t}=Uae(),{kEnumerableProperty:S2}=yi(),{environmentSettingsObject:T6e}=I0(),w6e=!1,_6e=3e3,nP=0,S6e=1,rP=2,k_t="anonymous",B_t="use-credentials",m4=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#r=nP;#n=null;#o=null;#s;#a;constructor(e,n={}){super(),ny.util.markAsUncloneable(this);let r="EventSource constructor";ny.argumentLengthCheck(arguments,1,r),w6e||(w6e=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=ny.converters.USVString(e,r,"url"),n=ny.converters.EventSourceInitDict(n,r,"eventSourceInitDict"),this.#s=n.dispatcher,this.#a={lastEventId:"",reconnectionTime:_6e};let i=T6e,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(c){throw new DOMException(c,"SyntaxError")}this.#t=o.href;let a=k_t;n.withCredentials&&(a=B_t,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=T6e.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#n=T_t(l),this.#l()}get readyState(){return this.#r}get url(){return this.#t}get withCredentials(){return this.#i}#l(){if(this.#r===rP)return;this.#r=nP;let e={request:this.#n,dispatcher:this.#s},n=s(r=>{I6e(r)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()},"processEventSourceEndOfBody");e.processResponseEndOfBody=n,e.processResponse=r=>{if(I6e(r))if(r.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let i=r.headersList.get("content-type",!0),o=i!==null?__t(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(r.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#r=S6e,this.dispatchEvent(new Event("open")),this.#a.origin=r.urlList[r.urlList.length-1].origin;let l=new w_t({eventSourceSettings:this.#a,push:s(c=>{this.dispatchEvent(S_t(c.type,c.options))},"push")});E_t(r.body.stream,l,c=>{c?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=I_t(e)}async#c(){this.#r!==rP&&(this.#r=nP,this.dispatchEvent(new Event("error")),await R_t(this.#a.reconnectionTime),this.#r===nP&&(this.#a.lastEventId.length&&this.#n.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#l()))}close(){ny.brandCheck(this,t),this.#r!==rP&&(this.#r=rP,this.#o.abort(),this.#n=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},R6e={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:nP,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:S6e,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:rP,writable:!1}};Object.defineProperties(m4,R6e);Object.defineProperties(m4.prototype,R6e);Object.defineProperties(m4.prototype,{close:S2,onerror:S2,onmessage:S2,onopen:S2,readyState:S2,url:S2,withCredentials:S2});ny.converters.EventSourceInitDict=ny.dictionaryConverter([{key:"withCredentials",converter:ny.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:ny.converters.any}]);k6e.exports={EventSource:m4,defaultReconnectionTime:_6e}});var L6e=G((YJn,Rr)=>{"use strict";f();var D_t=_D(),D6e=oD(),P_t=H5(),N_t=OBe(),L_t=j5(),F_t=pse(),M_t=n8e(),Q_t=l8e(),P6e=Ao(),WW=yi(),{InvalidArgumentError:qW}=P6e,h4=z8e(),O_t=aD(),U_t=zse(),q_t=RDe(),W_t=Jse(),G_t=Lse(),H_t=Gq(),{getGlobalDispatcher:N6e,setGlobalDispatcher:j_t}=Zq(),V_t=eW(),$_t=Bq(),z_t=Dq();Object.assign(D6e.prototype,h4);Rr.exports.Dispatcher=D6e;Rr.exports.Client=D_t;Rr.exports.Pool=P_t;Rr.exports.BalancedPool=N_t;Rr.exports.Agent=L_t;Rr.exports.ProxyAgent=F_t;Rr.exports.EnvHttpProxyAgent=M_t;Rr.exports.RetryAgent=Q_t;Rr.exports.RetryHandler=H_t;Rr.exports.DecoratorHandler=V_t;Rr.exports.RedirectHandler=$_t;Rr.exports.createRedirectInterceptor=z_t;Rr.exports.interceptors={redirect:FDe(),retry:QDe(),dump:UDe(),dns:GDe()};Rr.exports.buildConnector=O_t;Rr.exports.errors=P6e;Rr.exports.util={parseHeaders:WW.parseHeaders,headerNameToString:WW.headerNameToString};function iP(t){return(e,n,r)=>{if(typeof n=="function"&&(r=n,n=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new qW("invalid url");if(n!=null&&typeof n!="object")throw new qW("invalid opts");if(n&&n.path!=null){if(typeof n.path!="string")throw new qW("invalid opts.path");let a=n.path;n.path.startsWith("/")||(a=`/${a}`),e=new URL(WW.parseOrigin(e).origin+a)}else n||(n=typeof e=="object"?e:{}),e=WW.parseURL(e);let{agent:i,dispatcher:o=N6e()}=n;if(i)throw new qW("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...n,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:n.method||(n.body?"PUT":"GET")},r)}}s(iP,"makeDispatcher");Rr.exports.setGlobalDispatcher=j_t;Rr.exports.getGlobalDispatcher=N6e;var Y_t=HD().fetch;Rr.exports.fetch=s(async function(e,n=void 0){try{return await Y_t(e,n)}catch(r){throw r&&typeof r=="object"&&Error.captureStackTrace(r),r}},"fetch");Rr.exports.Headers=v2().Headers;Rr.exports.Response=WD().Response;Rr.exports.Request=r4().Request;Rr.exports.FormData=mD().FormData;Rr.exports.File=globalThis.File??require("node:buffer").File;Rr.exports.FileReader=r9e().FileReader;var{setGlobalOrigin:K_t,getGlobalOrigin:J_t}=moe();Rr.exports.setGlobalOrigin=K_t;Rr.exports.getGlobalOrigin=J_t;var{CacheStorage:X_t}=f9e(),{kConstruct:Z_t}=vW();Rr.exports.caches=new X_t(Z_t);var{deleteCookie:eSt,getCookies:tSt,getSetCookies:nSt,setCookie:rSt}=I9e();Rr.exports.deleteCookie=eSt;Rr.exports.getCookies=tSt;Rr.exports.getSetCookies=nSt;Rr.exports.setCookie=rSt;var{parseMIMEType:iSt,serializeAMimeType:oSt}=Ed();Rr.exports.parseMIMEType=iSt;Rr.exports.serializeAMimeType=oSt;var{CloseEvent:sSt,ErrorEvent:aSt,MessageEvent:lSt}=c4();Rr.exports.WebSocket=y6e().WebSocket;Rr.exports.CloseEvent=sSt;Rr.exports.ErrorEvent=aSt;Rr.exports.MessageEvent=lSt;Rr.exports.request=iP(h4.request);Rr.exports.stream=iP(h4.stream);Rr.exports.pipeline=iP(h4.pipeline);Rr.exports.connect=iP(h4.connect);Rr.exports.upgrade=iP(h4.upgrade);Rr.exports.MockClient=U_t;Rr.exports.MockPool=W_t;Rr.exports.MockAgent=q_t;Rr.exports.mockErrors=G_t;var{EventSource:cSt}=B6e();Rr.exports.EventSource=cSt});var di=G((XJn,F6e)=>{f();F6e.exports={options:{usePureJavaScript:!1}}});var O6e=G((eXn,Q6e)=>{f();var Gae={};Q6e.exports=Gae;var M6e={};Gae.encode=function(t,e,n){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(t instanceof Uint8Array))r=uSt(t,e);else{var i=0,o=e.length,a=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<l.length;++c)u+=l[c]<<8,l[c]=u%o,u=u/o|0;for(;u>0;)l.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)r+=a;for(i=l.length-1;i>=0;--i)r+=e[l[i]]}if(n){var d=new RegExp(".{1,"+n+"}","g");r=r.match(d).join(`\r
`)}return r};Gae.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var n=M6e[e];if(!n){n=M6e[e]=[];for(var r=0;r<e.length;++r)n[e.charCodeAt(r)]=r}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],r=0;r<t.length;r++){var l=n[t.charCodeAt(r)];if(l===void 0)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function uSt(t,e){var n=0,r=e.length,i=e.charAt(0),o=[0];for(n=0;n<t.length();++n){for(var a=0,l=t.at(n);a<o.length;++a)l+=o[a]<<8,o[a]=l%r,l=l/r|0;for(;l>0;)o.push(l%r),l=l/r|0}var c="";for(n=0;t.at(n)===0&&n<t.length()-1;++n)c+=i;for(n=o.length-1;n>=0;--n)c+=e[o[n]];return c}s(uSt,"_encodeWithByteBuffer")});var ao=G((rXn,G6e)=>{f();var U6e=di(),q6e=O6e(),De=G6e.exports=U6e.util=U6e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){De.nextTick=process.nextTick,typeof setImmediate=="function"?De.setImmediate=setImmediate:De.setImmediate=De.nextTick;return}if(typeof setImmediate=="function"){De.setImmediate=function(){return setImmediate.apply(void 0,arguments)},De.nextTick=function(l){return setImmediate(l)};return}if(De.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=l;s(l,"handler");var t="forge.setImmediate",e=[];De.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),r=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=De.setImmediate;De.setImmediate=function(c){Date.now()-n>15?(n=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",r=!r))}}De.nextTick=De.setImmediate})();De.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;De.globalScope=function(){return De.isNodejs?global:typeof self>"u"?window:self}();De.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};De.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};De.isArrayBufferView=function(t){return t&&De.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function oP(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(oP,"_checkBitsParam");De.ByteBuffer=Hae;function Hae(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(De.isArrayBuffer(t)||De.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof Hae||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(Hae,"ByteStringBuffer");De.ByteStringBuffer=Hae;var dSt=4096;De.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>dSt&&(this.data.substr(0,1),this._constructedStringLength=0)};De.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};De.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};De.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};De.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this};De.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};De.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(De.encodeUtf8(t))};De.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};De.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};De.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};De.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};De.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};De.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};De.ByteStringBuffer.prototype.putInt=function(t,e){oP(e);var n="";do e-=8,n+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(n)};De.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};De.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};De.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};De.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};De.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};De.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};De.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};De.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};De.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};De.ByteStringBuffer.prototype.getInt=function(t){oP(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};De.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};De.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};De.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};De.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};De.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};De.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};De.ByteStringBuffer.prototype.copy=function(){var t=De.createBuffer(this.data);return t.read=this.read,t};De.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};De.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};De.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};De.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};De.ByteStringBuffer.prototype.toString=function(){return De.decodeUtf8(this.bytes())};function fSt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=De.isArrayBuffer(t),r=De.isArrayBufferView(t);if(n||r){n?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(fSt,"DataBuffer");De.DataBuffer=fSt;De.DataBuffer.prototype.length=function(){return this.write-this.read};De.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};De.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(n),this.data=new DataView(r.buffer),this};De.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};De.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this};De.DataBuffer.prototype.putBytes=function(t,e){if(De.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(De.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof De.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&De.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(t instanceof De.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=De.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=De.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=De.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=De.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=De.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};De.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};De.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};De.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};De.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};De.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};De.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};De.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};De.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};De.DataBuffer.prototype.putInt=function(t,e){oP(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};De.DataBuffer.prototype.putSignedInt=function(t,e){return oP(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};De.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};De.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};De.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};De.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};De.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};De.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};De.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};De.DataBuffer.prototype.getInt=function(t){oP(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};De.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};De.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};De.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};De.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};De.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};De.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};De.DataBuffer.prototype.copy=function(){return new De.DataBuffer(this)};De.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};De.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};De.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};De.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t};De.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return De.binary.raw.encode(e);if(t==="hex")return De.binary.hex.encode(e);if(t==="base64")return De.binary.base64.encode(e);if(t==="utf8")return De.text.utf8.decode(e);if(t==="utf16")return De.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};De.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=De.encodeUtf8(t)),new De.ByteBuffer(t)};De.fillString=function(t,e){for(var n="";e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return n};De.xorBytes=function(t,e,n){for(var r="",i="",o="",a=0,l=0;n>0;--n,++a)i=t.charCodeAt(a)^e.charCodeAt(a),l>=10&&(r+=o,o="",l=0),o+=String.fromCharCode(i),++l;return r+=o,r};De.hexToBytes=function(t){var e="",n=0;for(t.length&!0&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e};De.bytesToHex=function(t){return De.createBuffer(t).toHex()};De.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Fv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Mv=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],W6e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";De.encode64=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.length;)i=t.charCodeAt(l++),o=t.charCodeAt(l++),a=t.charCodeAt(l++),n+=Fv.charAt(i>>2),n+=Fv.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=Fv.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":Fv.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};De.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",n,r,i,o,a=0;a<t.length;)n=Mv[t.charCodeAt(a++)-43],r=Mv[t.charCodeAt(a++)-43],i=Mv[t.charCodeAt(a++)-43],o=Mv[t.charCodeAt(a++)-43],e+=String.fromCharCode(n<<2|r>>4),i!==64&&(e+=String.fromCharCode((r&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};De.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};De.decodeUtf8=function(t){return decodeURIComponent(escape(t))};De.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:q6e.encode,decode:q6e.decode}};De.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};De.binary.raw.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};De.binary.hex.encode=De.bytesToHex;De.binary.hex.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var i=0,o=n;for(t.length&1&&(i=1,r[o++]=parseInt(t[0],16));i<t.length;i+=2)r[o++]=parseInt(t.substr(i,2),16);return e?o-n:r};De.binary.base64.encode=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.byteLength;)i=t[l++],o=t[l++],a=t[l++],n+=Fv.charAt(i>>2),n+=Fv.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=Fv.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":Fv.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};De.binary.base64.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,o,a,l,c=0,u=n;c<t.length;)i=Mv[t.charCodeAt(c++)-43],o=Mv[t.charCodeAt(c++)-43],a=Mv[t.charCodeAt(c++)-43],l=Mv[t.charCodeAt(c++)-43],r[u++]=i<<2|o>>4,a!==64&&(r[u++]=(o&15)<<4|a>>2,l!==64&&(r[u++]=(a&3)<<6|l));return e?u-n:r.subarray(0,u)};De.binary.base58.encode=function(t,e){return De.binary.baseN.encode(t,W6e,e)};De.binary.base58.decode=function(t,e){return De.binary.baseN.decode(t,W6e,e)};De.text={utf8:{},utf16:{}};De.text.utf8.encode=function(t,e,n){t=De.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};De.text.utf8.decode=function(t){return De.decodeUtf8(String.fromCharCode.apply(null,t))};De.text.utf16.encode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var o=n,a=n,l=0;l<t.length;++l)i[a++]=t.charCodeAt(l),o+=2;return e?o-n:r};De.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};De.deflate=function(t,e,n){if(e=De.decode64(t.deflate(De.encode64(e)).rval),n){var r=2,i=e.charCodeAt(1);i&32&&(r=6),e=e.substring(r,e.length-4)}return e};De.inflate=function(t,e,n){var r=t.inflate(De.encode64(e)).rval;return r===null?null:De.decode64(r)};var jae=s(function(t,e,n){if(!t)throw new Error("WebStorage not available.");var r;if(n===null?r=t.removeItem(e):(n=De.encode64(JSON.stringify(n)),r=t.setItem(e,n)),typeof r<"u"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},"_setStorageObject"),Vae=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(De.decode64(n))),n},"_getStorageObject"),pSt=s(function(t,e,n,r){var i=Vae(t,e);i===null&&(i={}),i[n]=r,jae(t,e,i)},"_setItem"),mSt=s(function(t,e,n){var r=Vae(t,e);return r!==null&&(r=n in r?r[n]:null),r},"_getItem"),hSt=s(function(t,e,n){var r=Vae(t,e);if(r!==null&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),jae(t,e,r)}},"_removeItem"),gSt=s(function(t,e){jae(t,e,null)},"_clearItems"),GW=s(function(t,e,n){var r=null;typeof n>"u"&&(n=["web","flash"]);var i,o=!1,a=null;for(var l in n){i=n[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");r=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,r=t.apply(this,e),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return r},"_callStorageFunction");De.setItem=function(t,e,n,r,i){GW(pSt,arguments,i)};De.getItem=function(t,e,n,r){return GW(mSt,arguments,r)};De.removeItem=function(t,e,n,r){GW(hSt,arguments,r)};De.clearItems=function(t,e,n){GW(gSt,arguments,n)};De.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};De.format=function(t){for(var e=/%./g,n,r,i=0,o=[],a=0;n=e.exec(t);){r=t.substring(a,e.lastIndex-2),r.length>0&&o.push(r),a=e.lastIndex;var l=n[0][1];switch(l){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+l+"?>")}}return o.push(t.substring(a)),o.join("")};De.formatNumber=function(t,e,n,r){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=n===void 0?",":n,l=r===void 0?".":r,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+l:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};De.formatSize=function(t){return t>=1073741824?t=De.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=De.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=De.formatNumber(t/1024,0)+" KiB":t=De.formatNumber(t,0)+" bytes",t};De.bytesFromIP=function(t){return t.indexOf(".")!==-1?De.bytesFromIPv4(t):t.indexOf(":")!==-1?De.bytesFromIPv6(t):null};De.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=De.createBuffer(),n=0;n<t.length;++n){var r=parseInt(t[n],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()};De.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var n=(8-t.length+e)*2,r=De.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){r.fillWithByte(0,n),n=0;continue}var o=De.hexToBytes(t[i]);o.length<2&&r.putByte(0),r.putBytes(o)}return r.getBytes()};De.bytesToIP=function(t){return t.length===4?De.bytesToIPv4(t):t.length===16?De.bytesToIPv6(t):null};De.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")};De.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],n=[],r=0,i=0;i<t.length;i+=2){for(var o=De.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=n[n.length-1],l=e.length;!a||l!==a.end+1?n.push({start:l,end:l}):(a.end=l,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1))}e.push(o)}if(n.length>0){var c=n[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};De.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in De&&!t.update)return e(null,De.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return De.cores=navigator.hardwareConcurrency,e(null,De.cores);if(typeof Worker>"u")return De.cores=1,e(null,De.cores);if(typeof Blob>"u")return De.cores=2,e(null,De.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(a,l,c){if(l===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return De.cores=Math.max(1,u),URL.revokeObjectURL(n),e(null,De.cores)}i(c,function(d,p){a.push(o(c,p)),r(a,l-1,c)})}s(r,"sample");function i(a,l){for(var c=[],u=[],d=0;d<a;++d){var p=new Worker(n);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)c[h].terminate();l(null,u)}}),c.push(p)}for(var d=0;d<a;++d)c[d].postMessage(d)}s(i,"map");function o(a,l){for(var c=[],u=0;u<a;++u)for(var d=l[u],p=c[u]=[],m=0;m<a;++m)if(u!==m){var h=l[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return c.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var HW=G((sXn,H6e)=>{f();var ql=di();ao();H6e.exports=ql.cipher=ql.cipher||{};ql.cipher.algorithms=ql.cipher.algorithms||{};ql.cipher.createCipher=function(t,e){var n=t;if(typeof n=="string"&&(n=ql.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new ql.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})};ql.cipher.createDecipher=function(t,e){var n=t;if(typeof n=="string"&&(n=ql.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new ql.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})};ql.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),ql.cipher.algorithms[t]=e};ql.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in ql.cipher.algorithms?ql.cipher.algorithms[t]:null};var $ae=ql.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};$ae.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=ql.util.createBuffer(),this.output=t.output||ql.util.createBuffer(),this.mode.start(e)};$ae.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};$ae.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return t(this.blockSize,n,!1)},this.mode.unpad=function(n){return t(this.blockSize,n,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Yae=G((lXn,j6e)=>{f();var Wl=di();ao();Wl.cipher=Wl.cipher||{};var wi=j6e.exports=Wl.cipher.modes=Wl.cipher.modes||{};wi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.ecb.prototype.start=function(t){};wi.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=jW(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};wi.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock};wi.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};wi.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Wl.util.createBuffer(),this._partialBytes=0};wi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=jW(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.cfb.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.cfb.prototype.decrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Wl.util.createBuffer(),this._partialBytes=0};wi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=jW(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ofb.prototype.encrypt=function(t,e,n){var r=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb.prototype.decrypt=wi.ofb.prototype.encrypt;wi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Wl.util.createBuffer(),this._partialBytes=0};wi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=jW(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ctr.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}VW(this._inBlock)};wi.ctr.prototype.decrypt=wi.ctr.prototype.encrypt;wi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Wl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};wi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Wl.util.createBuffer(t.iv);this._cipherLength=0;var n;if("additionalData"in t?n=Wl.util.createBuffer(t.additionalData):n=Wl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Wl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=e.length();if(r===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(zae(r*8)))}this._inBlock=this._j0.slice(0),VW(this._inBlock),this._partialBytes=0,n=Wl.util.createBuffer(n),this._aDataLength=zae(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};wi.gcm.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),VW(this._inBlock)};wi.gcm.prototype.decrypt=function(t,e,n){var r=t.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),VW(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};wi.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Wl.util.createBuffer();var r=this._aDataLength.concat(zae(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};wi.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],r=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};wi.gcm.prototype.pow=function(t,e){for(var n=t[3]&1,r=3;r>0;--r)e[r]=t[r]>>>1|(t[r-1]&1)<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)};wi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=t[r]>>>(7-n%8)*4&15,o=this._m[n][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};wi.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)};wi.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,r=4*n,i=16*n,o=new Array(i),a=0;a<i;++a){var l=[0,0,0,0],c=a/r|0,u=(r-1-a%r)*e;l[c]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(l,t),e)}return o};wi.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,r=n>>>1,i=new Array(n);i[r]=t.slice(0);for(var o=r>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<r;){for(var a=1;a<o;++a){var l=i[o],c=i[a];i[o+a]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=r+1;o<n;++o){var u=i[o^r];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function jW(t,e){if(typeof t=="string"&&(t=Wl.util.createBuffer(t)),Wl.util.isArray(t)&&t.length>4){var n=t;t=Wl.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Wl.util.isArray(t)){for(var i=[],o=e/4,r=0;r<o;++r)i.push(t.getInt32());t=i}return t}s(jW,"transformIV");function VW(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(VW,"inc32");function zae(t){return[t/4294967296|0,t&4294967295]}s(zae,"from64To32")});var Qv=G((dXn,Y6e)=>{f();var es=di();HW();Yae();ao();Y6e.exports=es.aes=es.aes||{};es.aes.startEncrypting=function(t,e,n,r){var i=$W({key:t,output:n,decrypt:!1,mode:r});return i.start(e),i};es.aes.createEncryptionCipher=function(t,e){return $W({key:t,output:null,decrypt:!1,mode:e})};es.aes.startDecrypting=function(t,e,n,r){var i=$W({key:t,output:n,decrypt:!0,mode:r});return i.start(e),i};es.aes.createDecryptionCipher=function(t,e){return $W({key:t,output:null,decrypt:!0,mode:e})};es.aes.Algorithm=function(t,e){Xae||$6e();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:s(function(r,i){return Jae(n._w,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return Jae(n._w,r,i,!0)},"decrypt")}}),n._init=!1};es.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,n;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=es.util.createBuffer(e);else if(es.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){n=e,e=es.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(!es.util.isArray(e)){n=e,e=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)e.push(n.getInt32())}}if(!es.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=z6e(e,t.decrypt&&!a),this._init=!0}};es.aes._expandKey=function(t,e){return Xae||$6e(),z6e(t,e)};es.aes._updateBlock=Jae;A4("AES-ECB",es.cipher.modes.ecb);A4("AES-CBC",es.cipher.modes.cbc);A4("AES-CFB",es.cipher.modes.cfb);A4("AES-OFB",es.cipher.modes.ofb);A4("AES-CTR",es.cipher.modes.ctr);A4("AES-GCM",es.cipher.modes.gcm);function A4(t,e){var n=s(function(){return new es.aes.Algorithm(t,e)},"factory");es.cipher.registerAlgorithm(t,n)}s(A4,"registerAlgorithm");var Xae=!1,g4=4,Nu,Kae,V6e,R2,Um;function $6e(){Xae=!0,V6e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Nu=new Array(256),Kae=new Array(256),R2=new Array(4),Um=new Array(4);for(var e=0;e<4;++e)R2[e]=new Array(256),Um[e]=new Array(256);for(var n=0,r=0,i,o,a,l,c,u,d,e=0;e<256;++e){l=r^r<<1^r<<2^r<<3^r<<4,l=l>>8^l&255^99,Nu[n]=l,Kae[l]=n,c=t[l],i=t[n],o=t[i],a=t[o],u=c<<24^l<<16^l<<8^(l^c),d=(i^o^a)<<24^(n^a)<<16^(n^o^a)<<8^(n^i^a);for(var p=0;p<4;++p)R2[p][n]=u,Um[p][l]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;n===0?n=r=1:(n=i^t[t[t[i^a]]],r^=t[t[r]])}}s($6e,"initialize");function z6e(t,e){for(var n=t.slice(0),r,i=1,o=n.length,a=o+6+1,l=g4*a,c=o;c<l;++c)r=n[c-1],c%o===0?(r=Nu[r>>>16&255]<<24^Nu[r>>>8&255]<<16^Nu[r&255]<<8^Nu[r>>>24]^V6e[i]<<24,i++):o>6&&c%o===4&&(r=Nu[r>>>24]<<24^Nu[r>>>16&255]<<16^Nu[r>>>8&255]<<8^Nu[r&255]),n[c]=n[c-o]^r;if(e){var u,d=Um[0],p=Um[1],m=Um[2],h=Um[3],g=n.slice(0);l=n.length;for(var c=0,y=l-g4;c<l;c+=g4,y-=g4)if(c===0||c===l-g4)g[c]=n[y],g[c+1]=n[y+3],g[c+2]=n[y+2],g[c+3]=n[y+1];else for(var v=0;v<g4;++v)u=n[y+v],g[c+(3&-v)]=d[Nu[u>>>24]]^p[Nu[u>>>16&255]]^m[Nu[u>>>8&255]]^h[Nu[u&255]];n=g}return n}s(z6e,"_expandKey");function Jae(t,e,n,r){var i=t.length/4-1,o,a,l,c,u;r?(o=Um[0],a=Um[1],l=Um[2],c=Um[3],u=Kae):(o=R2[0],a=R2[1],l=R2[2],c=R2[3],u=Nu);var d,p,m,h,g,y,v;d=e[0]^t[0],p=e[r?3:1]^t[1],m=e[2]^t[2],h=e[r?1:3]^t[3];for(var b=3,E=1;E<i;++E)g=o[d>>>24]^a[p>>>16&255]^l[m>>>8&255]^c[h&255]^t[++b],y=o[p>>>24]^a[m>>>16&255]^l[h>>>8&255]^c[d&255]^t[++b],v=o[m>>>24]^a[h>>>16&255]^l[d>>>8&255]^c[p&255]^t[++b],h=o[h>>>24]^a[d>>>16&255]^l[p>>>8&255]^c[m&255]^t[++b],d=g,p=y,m=v;n[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++b],n[r?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b],n[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],n[r?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++b]}s(Jae,"_updateBlock");function $W(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="AES-"+e,r;t.decrypt?r=es.cipher.createDecipher(n,t.key):r=es.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof es.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s($W,"_createCipher")});var Ov=G((mXn,K6e)=>{f();var sP=di();sP.pki=sP.pki||{};var Zae=K6e.exports=sP.pki.oids=sP.oids=sP.oids||{};function wt(t,e){Zae[t]=e,Zae[e]=t}s(wt,"_IN");function Eo(t,e){Zae[t]=e}s(Eo,"_I_");wt("1.2.840.113549.1.1.1","rsaEncryption");wt("1.2.840.113549.1.1.4","md5WithRSAEncryption");wt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");wt("1.2.840.113549.1.1.7","RSAES-OAEP");wt("1.2.840.113549.1.1.8","mgf1");wt("1.2.840.113549.1.1.9","pSpecified");wt("1.2.840.113549.1.1.10","RSASSA-PSS");wt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");wt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");wt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");wt("1.3.101.112","EdDSA25519");wt("1.2.840.10040.4.3","dsa-with-sha1");wt("1.3.14.3.2.7","desCBC");wt("1.3.14.3.2.26","sha1");wt("1.3.14.3.2.29","sha1WithRSASignature");wt("2.16.840.1.101.3.4.2.1","sha256");wt("2.16.840.1.101.3.4.2.2","sha384");wt("2.16.840.1.101.3.4.2.3","sha512");wt("2.16.840.1.101.3.4.2.4","sha224");wt("2.16.840.1.101.3.4.2.5","sha512-224");wt("2.16.840.1.101.3.4.2.6","sha512-256");wt("1.2.840.113549.2.2","md2");wt("1.2.840.113549.2.5","md5");wt("1.2.840.113549.1.7.1","data");wt("1.2.840.113549.1.7.2","signedData");wt("1.2.840.113549.1.7.3","envelopedData");wt("1.2.840.113549.1.7.4","signedAndEnvelopedData");wt("1.2.840.113549.1.7.5","digestedData");wt("1.2.840.113549.1.7.6","encryptedData");wt("1.2.840.113549.1.9.1","emailAddress");wt("1.2.840.113549.1.9.2","unstructuredName");wt("1.2.840.113549.1.9.3","contentType");wt("1.2.840.113549.1.9.4","messageDigest");wt("1.2.840.113549.1.9.5","signingTime");wt("1.2.840.113549.1.9.6","counterSignature");wt("1.2.840.113549.1.9.7","challengePassword");wt("1.2.840.113549.1.9.8","unstructuredAddress");wt("1.2.840.113549.1.9.14","extensionRequest");wt("1.2.840.113549.1.9.20","friendlyName");wt("1.2.840.113549.1.9.21","localKeyId");wt("1.2.840.113549.1.9.22.1","x509Certificate");wt("1.2.840.113549.1.12.10.1.1","keyBag");wt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");wt("1.2.840.113549.1.12.10.1.3","certBag");wt("1.2.840.113549.1.12.10.1.4","crlBag");wt("1.2.840.113549.1.12.10.1.5","secretBag");wt("1.2.840.113549.1.12.10.1.6","safeContentsBag");wt("1.2.840.113549.1.5.13","pkcs5PBES2");wt("1.2.840.113549.1.5.12","pkcs5PBKDF2");wt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");wt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");wt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");wt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");wt("1.2.840.113549.2.7","hmacWithSHA1");wt("1.2.840.113549.2.8","hmacWithSHA224");wt("1.2.840.113549.2.9","hmacWithSHA256");wt("1.2.840.113549.2.10","hmacWithSHA384");wt("1.2.840.113549.2.11","hmacWithSHA512");wt("1.2.840.113549.3.7","des-EDE3-CBC");wt("2.16.840.1.101.3.4.1.2","aes128-CBC");wt("2.16.840.1.101.3.4.1.22","aes192-CBC");wt("2.16.840.1.101.3.4.1.42","aes256-CBC");wt("2.5.4.3","commonName");wt("2.5.4.4","surname");wt("2.5.4.5","serialNumber");wt("2.5.4.6","countryName");wt("2.5.4.7","localityName");wt("2.5.4.8","stateOrProvinceName");wt("2.5.4.9","streetAddress");wt("2.5.4.10","organizationName");wt("2.5.4.11","organizationalUnitName");wt("2.5.4.12","title");wt("2.5.4.13","description");wt("2.5.4.15","businessCategory");wt("2.5.4.17","postalCode");wt("2.5.4.42","givenName");wt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");wt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");wt("2.16.840.1.113730.1.1","nsCertType");wt("2.16.840.1.113730.1.13","nsComment");Eo("2.5.29.1","authorityKeyIdentifier");Eo("2.5.29.2","keyAttributes");Eo("2.5.29.3","certificatePolicies");Eo("2.5.29.4","keyUsageRestriction");Eo("2.5.29.5","policyMapping");Eo("2.5.29.6","subtreesConstraint");Eo("2.5.29.7","subjectAltName");Eo("2.5.29.8","issuerAltName");Eo("2.5.29.9","subjectDirectoryAttributes");Eo("2.5.29.10","basicConstraints");Eo("2.5.29.11","nameConstraints");Eo("2.5.29.12","policyConstraints");Eo("2.5.29.13","basicConstraints");wt("2.5.29.14","subjectKeyIdentifier");wt("2.5.29.15","keyUsage");Eo("2.5.29.16","privateKeyUsagePeriod");wt("2.5.29.17","subjectAltName");wt("2.5.29.18","issuerAltName");wt("2.5.29.19","basicConstraints");Eo("2.5.29.20","cRLNumber");Eo("2.5.29.21","cRLReason");Eo("2.5.29.22","expirationDate");Eo("2.5.29.23","instructionCode");Eo("2.5.29.24","invalidityDate");Eo("2.5.29.25","cRLDistributionPoints");Eo("2.5.29.26","issuingDistributionPoint");Eo("2.5.29.27","deltaCRLIndicator");Eo("2.5.29.28","issuingDistributionPoint");Eo("2.5.29.29","certificateIssuer");Eo("2.5.29.30","nameConstraints");wt("2.5.29.31","cRLDistributionPoints");wt("2.5.29.32","certificatePolicies");Eo("2.5.29.33","policyMappings");Eo("2.5.29.34","policyConstraints");wt("2.5.29.35","authorityKeyIdentifier");Eo("2.5.29.36","policyConstraints");wt("2.5.29.37","extKeyUsage");Eo("2.5.29.46","freshestCRL");Eo("2.5.29.54","inhibitAnyPolicy");wt("1.3.6.1.4.1.11129.2.4.2","timestampList");wt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");wt("1.3.6.1.5.5.7.3.1","serverAuth");wt("1.3.6.1.5.5.7.3.2","clientAuth");wt("1.3.6.1.5.5.7.3.3","codeSigning");wt("1.3.6.1.5.5.7.3.4","emailProtection");wt("1.3.6.1.5.5.7.3.8","timeStamping")});var qm=G((AXn,X6e)=>{f();var xs=di();ao();Ov();var rn=X6e.exports=xs.asn1=xs.asn1||{};rn.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};rn.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};rn.create=function(t,e,n,r,i){if(xs.util.isArray(r)){for(var o=[],a=0;a<r.length;++a)r[a]!==void 0&&o.push(r[a]);r=o}var l={tagClass:t,type:e,constructed:n,composed:n||xs.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=rn.copy(l)),l};rn.copy=function(t,e){var n;if(xs.util.isArray(t)){n=[];for(var r=0;r<t.length;++r)n.push(rn.copy(t[r],e));return n}return typeof t=="string"?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:rn.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)};rn.equals=function(t,e,n){if(xs.util.isArray(t)){if(!xs.util.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(!rn.equals(t[r],e[r]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&rn.equals(t.value,e.value);return n&&n.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};rn.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var n,r=e&128;return r?n=t.getInt((e&127)<<3):n=e,n}};function aP(t,e,n){if(n>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=n,r}}s(aP,"_checkBufferLength");var ASt=s(function(t,e){var n=t.getByte();if(e--,n!==128){var r,i=n&128;if(!i)r=n;else{var o=n&127;aP(t,e,o),r=t.getInt(o<<3)}if(r<0)throw new Error("Negative length: "+r);return r}},"_getValueLength");rn.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=xs.util.createBuffer(t));var n=t.length(),r=zW(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=t.length(),i}return r};function zW(t,e,n,r){var i;aP(t,e,2);var o=t.getByte();e--;var a=o&192,l=o&31;i=t.length();var c=ASt(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(r.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var d,p,m=(o&32)===32;if(m)if(d=[],c===void 0)for(;;){if(aP(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(zW(t,e,n+1,r)),e-=i-t.length()}else for(;c>0;)i=t.length(),d.push(zW(t,c,n+1,r)),e-=i-t.length(),c-=i-t.length();if(d===void 0&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&(p=t.bytes(c)),d===void 0&&r.decodeBitStrings&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&c>1){var h=t.read,g=e,y=0;if(l===rn.Type.BITSTRING&&(aP(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var v={strict:!0,decodeBitStrings:!0},b=zW(t,e,n+1,v),E=i-t.length();e-=E,l==rn.Type.BITSTRING&&E++;var _=b.tagClass;E===c&&(_===rn.Class.UNIVERSAL||_===rn.Class.CONTEXT_SPECIFIC)&&(d=[b])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(c===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(l===rn.Type.BMPSTRING)for(d="";c>0;c-=2)aP(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var k=p===void 0?null:{bitStringContents:p};return rn.create(a,l,m,d,k)}s(zW,"_fromDer");rn.toDer=function(t){var e=xs.util.createBuffer(),n=t.tagClass|t.type,r=xs.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=rn.equals(t,t.original))),i)r.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:r.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&r.putBuffer(rn.toDer(t.value[o]))}else if(t.type===rn.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)r.putInt16(t.value.charCodeAt(o));else t.type===rn.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?r.putBytes(t.value.substr(1)):r.putBytes(t.value);if(e.putByte(n),r.length()<=127)e.putByte(r.length()&127);else{var a=r.length(),l="";do l+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(l.length|128);for(var o=l.length-1;o>=0;--o)e.putByte(l.charCodeAt(o))}return e.putBuffer(r),e};rn.oidToDer=function(t){var e=t.split("."),n=xs.util.createBuffer();n.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var r,i,o,a,l=2;l<e.length;++l){r=!0,i=[],o=parseInt(e[l],10);do a=o&127,o=o>>>7,r||(a|=128),i.push(a),r=!1;while(o>0);for(var c=i.length-1;c>=0;--c)n.putByte(i[c])}return n};rn.derToOid=function(t){var e;typeof t=="string"&&(t=xs.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var r=0;t.length()>0;)n=t.getByte(),r=r<<7,n&128?r+=n&127:(e+="."+(r+n),r=0);return e};rn.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(l=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,c==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};rn.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),c=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,c),e.setTime(+e+u)):(e.setFullYear(n,r,i),e.setHours(o,a,l,c)),e};rn.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.integerToDer=function(t){var e=xs.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n};rn.derToInteger=function(t){typeof t=="string"&&(t=xs.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};rn.validate=function(t,e,n,r){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&xs.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=rn.validate(t.value[o],e.value[a],n,r),i?++o:e.value[a].optional&&(i=!0)),!i&&r&&r.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else r&&r.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else r&&(t.tagClass!==e.tagClass&&r.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&r.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var J6e=/[^\\u0000-\\u00ff]/;rn.prettyPrint=function(t,e,n){var r="";e=e||0,n=n||2,e>0&&(r+=`
`);for(var i="",o=0;o<e*n;++o)i+=" ";switch(r+=i+"Tag: ",t.tagClass){case rn.Class.UNIVERSAL:r+="Universal:";break;case rn.Class.APPLICATION:r+="Application:";break;case rn.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case rn.Class.PRIVATE:r+="Private:";break}if(t.tagClass===rn.Class.UNIVERSAL)switch(r+=t.type,t.type){case rn.Type.NONE:r+=" (None)";break;case rn.Type.BOOLEAN:r+=" (Boolean)";break;case rn.Type.INTEGER:r+=" (Integer)";break;case rn.Type.BITSTRING:r+=" (Bit string)";break;case rn.Type.OCTETSTRING:r+=" (Octet string)";break;case rn.Type.NULL:r+=" (Null)";break;case rn.Type.OID:r+=" (Object Identifier)";break;case rn.Type.ODESC:r+=" (Object Descriptor)";break;case rn.Type.EXTERNAL:r+=" (External or Instance of)";break;case rn.Type.REAL:r+=" (Real)";break;case rn.Type.ENUMERATED:r+=" (Enumerated)";break;case rn.Type.EMBEDDED:r+=" (Embedded PDV)";break;case rn.Type.UTF8:r+=" (UTF8)";break;case rn.Type.ROID:r+=" (Relative Object Identifier)";break;case rn.Type.SEQUENCE:r+=" (Sequence)";break;case rn.Type.SET:r+=" (Set)";break;case rn.Type.PRINTABLESTRING:r+=" (Printable String)";break;case rn.Type.IA5String:r+=" (IA5String (ASCII))";break;case rn.Type.UTCTIME:r+=" (UTC time)";break;case rn.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case rn.Type.BMPSTRING:r+=" (BMP String)";break}else r+=t.type;if(r+=`
`,r+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,l="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,l+=rn.prettyPrint(t.value[o],e+1,n),o+1<t.value.length&&(l+=","));r+=i+"Sub values: "+a+l}else{if(r+=i+"Value: ",t.type===rn.Type.OID){var c=rn.derToOid(t.value);r+=c,xs.pki&&xs.pki.oids&&c in xs.pki.oids&&(r+=" ("+xs.pki.oids[c]+") ")}if(t.type===rn.Type.INTEGER)try{r+=rn.derToInteger(t.value)}catch{r+="0x"+xs.util.bytesToHex(t.value)}else if(t.type===rn.Type.BITSTRING){if(t.value.length>1?r+="0x"+xs.util.bytesToHex(t.value.slice(1)):r+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?r+=" (1 unused bit shown)":u>1&&(r+=" ("+u+" unused bits shown)")}}else if(t.type===rn.Type.OCTETSTRING)J6e.test(t.value)||(r+="("+t.value+") "),r+="0x"+xs.util.bytesToHex(t.value);else if(t.type===rn.Type.UTF8)try{r+=xs.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")r+="0x"+xs.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===rn.Type.PRINTABLESTRING||t.type===rn.Type.IA5String?r+=t.value:J6e.test(t.value)?r+="0x"+xs.util.bytesToHex(t.value):t.value.length===0?r+="[null]":r+=t.value}return r}});var Mg=G((xXn,Z6e)=>{f();var YW=di();Z6e.exports=YW.md=YW.md||{};YW.md.algorithms=YW.md.algorithms||{}});var y4=G((bXn,e7e)=>{f();var ry=di();Mg();ao();var ySt=e7e.exports=ry.hmac=ry.hmac||{};ySt.create=function(){var t=null,e=null,n=null,r=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in ry.md.algorithms)e=ry.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=ry.util.createBuffer(a);else if(ry.util.isArray(a)){var l=a;a=ry.util.createBuffer();for(var c=0;c<l.length;++c)a.putByte(l[c])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),n=ry.util.createBuffer(),r=ry.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var l=a.at(c);n.putByte(54^l),r.putByte(92^l)}if(u<e.blockLength)for(var l=e.blockLength-u,c=0;c<l;++c)n.putByte(54),r.putByte(92);t=a,n=n.bytes(),r=r.bytes()}e.start(),e.update(n)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(r),e.update(o),e.digest()},i.digest=i.getMac,i}});var JW=G((IXn,i7e)=>{f();var Qg=di();Mg();ao();var n7e=i7e.exports=Qg.md5=Qg.md5||{};Qg.md.md5=Qg.md.algorithms.md5=n7e;n7e.create=function(){r7e||CSt();var t=null,e=Qg.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Qg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Qg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),t7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Qg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(ele.substr(0,r.blockLength-a));for(var l,c=0,u=r.fullMessageLength.length-1;u>=0;--u)l=r.fullMessageLength[u]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};t7e(d,n,i);var p=Qg.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},r};var ele=null,KW=null,lP=null,C4=null,r7e=!1;function CSt(){ele="\x80",ele+=Qg.util.fillString("\0",64),KW=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],lP=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],C4=new Array(64);for(var t=0;t<64;++t)C4[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);r7e=!0}s(CSt,"_init");function t7e(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,d=0;d<16;++d)e[d]=n.getInt32Le(),c=l^o&(a^l),r=i+c+C4[d]+e[d],u=lP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<32;++d)c=a^l&(o^a),r=i+c+C4[d]+e[KW[d]],u=lP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<48;++d)c=o^a^l,r=i+c+C4[d]+e[KW[d]],u=lP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<64;++d)c=a^(o|~l),r=i+c+C4[d]+e[KW[d]],u=lP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,p-=64}}s(t7e,"_update")});var k2=G((_Xn,s7e)=>{f();var ZW=di();ao();var o7e=s7e.exports=ZW.pem=ZW.pem||{};o7e.encode=function(t,e){e=e||{};var n="-----BEGIN "+t.type+`-----\r
`,r;if(t.procType&&(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},n+=XW(r)),t.contentDomain&&(r={name:"Content-Domain",values:[t.contentDomain]},n+=XW(r)),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),n+=XW(r)),t.headers)for(var i=0;i<t.headers.length;++i)n+=XW(t.headers[i]);return t.procType&&(n+=`\r
`),n+=ZW.util.encode64(t.body,e.maxline||64)+`\r
`,n+="-----END "+t.type+`-----\r
`,n};o7e.decode=function(t){for(var e=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=n.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var l={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:ZW.util.decode64(o[3])};if(e.push(l),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var d=c[u].replace(/\s+$/,""),p=u+1;p<c.length;++p){var m=c[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(r),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(xSt(g[y]));if(l.procType)if(!l.contentDomain&&h.name==="Content-Domain")l.contentDomain=g[0]||"";else if(!l.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++u}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function XW(t){for(var e=t.name+": ",n=[],r=s(function(c,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)n.push(t.values[i].replace(/^(\S+\r\n)/,r));e+=n.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var l=e[a];l===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+l+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(XW,"foldHeader");function xSt(t){return t.replace(/^\s+/,"")}s(xSt,"ltrim")});var cP=G((kXn,l7e)=>{f();var Ms=di();HW();Yae();ao();l7e.exports=Ms.des=Ms.des||{};Ms.des.startEncrypting=function(t,e,n,r){var i=eG({key:t,output:n,decrypt:!1,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Ms.des.createEncryptionCipher=function(t,e){return eG({key:t,output:null,decrypt:!1,mode:e})};Ms.des.startDecrypting=function(t,e,n,r){var i=eG({key:t,output:n,decrypt:!0,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Ms.des.createDecryptionCipher=function(t,e){return eG({key:t,output:null,decrypt:!0,mode:e})};Ms.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:s(function(r,i){return a7e(n._keys,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return a7e(n._keys,r,i,!0)},"decrypt")}}),n._init=!1};Ms.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ms.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=RSt(e),this._init=!0}};Og("DES-ECB",Ms.cipher.modes.ecb);Og("DES-CBC",Ms.cipher.modes.cbc);Og("DES-CFB",Ms.cipher.modes.cfb);Og("DES-OFB",Ms.cipher.modes.ofb);Og("DES-CTR",Ms.cipher.modes.ctr);Og("3DES-ECB",Ms.cipher.modes.ecb);Og("3DES-CBC",Ms.cipher.modes.cbc);Og("3DES-CFB",Ms.cipher.modes.cfb);Og("3DES-OFB",Ms.cipher.modes.ofb);Og("3DES-CTR",Ms.cipher.modes.ctr);function Og(t,e){var n=s(function(){return new Ms.des.Algorithm(t,e)},"factory");Ms.cipher.registerAlgorithm(t,n)}s(Og,"registerAlgorithm");var vSt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],bSt=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],ESt=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ISt=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],TSt=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],wSt=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],_St=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],SSt=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function RSt(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,_,k=0;k<y;k++){var D=t.getInt32(),N=t.getInt32();_=(D>>>4^N)&252645135,N^=_,D^=_<<4,_=(N>>>-16^D)&65535,D^=_,N^=_<<-16,_=(D>>>2^N)&858993459,N^=_,D^=_<<2,_=(N>>>-16^D)&65535,D^=_,N^=_<<-16,_=(D>>>1^N)&1431655765,N^=_,D^=_<<1,_=(N>>>8^D)&16711935,D^=_,N^=_<<8,_=(D>>>1^N)&1431655765,N^=_,D^=_<<1,_=D<<8|N>>>20&240,D=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var Q=0;Q<b.length;++Q){b[Q]?(D=D<<2|D>>>26,N=N<<2|N>>>26):(D=D<<1|D>>>27,N=N<<1|N>>>27),D&=-15,N&=-15;var Z=e[D>>>28]|n[D>>>24&15]|r[D>>>20&15]|i[D>>>16&15]|o[D>>>12&15]|a[D>>>8&15]|l[D>>>4&15],me=c[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(me>>>16^Z)&65535,v[E++]=Z^_,v[E++]=me^_<<16}}return v}s(RSt,"_createKeys");function a7e(t,e,n,r){var i=t.length===32?3:9,o;i===3?o=r?[30,-2,-2]:[0,32,2]:o=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,l=e[0],c=e[1];a=(l>>>4^c)&252645135,c^=a,l^=a<<4,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=c^t[m],g=(c>>>4|c<<28)^t[m+1];a=l,l=c,c=a^(bSt[h>>>24&63]|ISt[h>>>16&63]|wSt[h>>>8&63]|SSt[h&63]|vSt[g>>>24&63]|ESt[g>>>16&63]|TSt[g>>>8&63]|_St[g&63])}a=l,l=c,c=a}l=l>>>1|l<<31,c=c>>>1|c<<31,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(l>>>4^c)&252645135,c^=a,l^=a<<4,n[0]=l,n[1]=c}s(a7e,"_updateBlock");function eG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="DES-"+e,r;t.decrypt?r=Ms.cipher.createDecipher(n,t.key):r=Ms.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof Ms.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s(eG,"_createCipher")});var tG=G((PXn,c7e)=>{f();var Lu=di();y4();Mg();ao();var kSt=Lu.pkcs5=Lu.pkcs5||{},iy;Lu.util.isNodejs&&!Lu.options.usePureJavaScript&&(iy=require("crypto"));c7e.exports=Lu.pbkdf2=kSt.pbkdf2=function(t,e,n,r,i,o){if(typeof i=="function"&&(o=i,i=null),Lu.util.isNodejs&&!Lu.options.usePureJavaScript&&iy.pbkdf2&&(i===null||typeof i!="object")&&(iy.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?iy.pbkdf2Sync.length===4?iy.pbkdf2(t,e,n,r,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):iy.pbkdf2(t,e,n,r,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):iy.pbkdf2Sync.length===4?iy.pbkdf2Sync(t,e,n,r).toString("binary"):iy.pbkdf2Sync(t,e,n,r,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Lu.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Lu.md[i].create()}var a=i.digestLength;if(r>4294967295*a){var l=new Error("Derived key is too long.");if(o)return o(l);throw l}var c=Math.ceil(r/a),u=r-(c-1)*a,d=Lu.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=c;++y){d.start(null,null),d.update(e),d.update(Lu.util.int32ToBytes(y)),m=g=d.digest().getBytes();for(var v=2;v<=n;++v)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Lu.util.xorBytes(m,h,a),g=h;p+=y<c?m:m.substr(0,u)}return p}var y=1,v;function b(){if(y>c)return o(null,p);d.start(null,null),d.update(e),d.update(Lu.util.int32ToBytes(y)),m=g=d.digest().getBytes(),v=2,E()}s(b,"outer");function E(){if(v<=n)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Lu.util.xorBytes(m,h,a),g=h,++v,Lu.util.setImmediate(E);p+=y<c?m:m.substr(0,u),++y,b()}s(E,"inner"),b()}});var nle=G((FXn,m7e)=>{f();var Ug=di();Mg();ao();var d7e=m7e.exports=Ug.sha256=Ug.sha256||{};Ug.md.sha256=Ug.md.algorithms.sha256=d7e;d7e.create=function(){f7e||BSt();var t=null,e=Ug.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Ug.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Ug.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),u7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Ug.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(tle.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u7e(p,n,i);var m=Ug.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},r};var tle=null,f7e=!1,p7e=null;function BSt(){tle="\x80",tle+=Ug.util.fillString("\0",64),p7e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f7e=!0}s(BSt,"_init");function u7e(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E=n.length();E>=64;){for(u=0;u<16;++u)e[u]=n.getInt32();for(;u<64;++u)r=e[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=r+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,v=t.h6,b=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=v^g&(y^v),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&p|m&(d^p),r=b+a+l+p7e[u]+e[u],i=o+c,b=v,v=y,y=g,g=h+r>>>0,h=m,m=p,p=d,d=r+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,E-=64}}s(u7e,"_update")});var rle=G((OXn,h7e)=>{f();var qg=di();ao();var nG=null;qg.util.isNodejs&&!qg.options.usePureJavaScript&&!process.versions["node-webkit"]&&(nG=require("crypto"));var DSt=h7e.exports=qg.prng=qg.prng||{};DSt.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();e.pools=r,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=qg.util.createBuffer();e.key=null,v();function v(b){if(b)return d(b);if(y.length()>=u)return d(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return qg.util.nextTick(function(){o(v)});var E=p(e.key,e.seed);e.generated+=E.length,y.putBytes(E),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),qg.util.setImmediate(v)}s(v,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=qg.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=d(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return l(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),l(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return l();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),l()}s(a,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(l,"_seed");function c(u){var d=null,p=qg.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(D){return m.getRandomValues(D)},"getRandomValues"));var h=qg.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{d(y);for(var v=0;v<y.length;++v)h.putInt32(y[v])}catch(D){if(!(typeof QuotaExceededError<"u"&&D instanceof QuotaExceededError))throw D}}if(h.length()<u)for(var b,E,_,k=Math.floor(Math.random()*65536);h.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(c,"defaultSeedFile"),nG?(e.seedFile=function(u,d){nG.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return nG.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,c(u))}catch(p){d(p)}},e.seedFileSync=c),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var lp=G((WXn,ile)=>{f();var Gl=di();Qv();nle();rle();ao();(function(){if(Gl.random&&Gl.random.getBytes){ile.exports=Gl.random;return}(function(t){var e={},n=new Array(4),r=Gl.util.createBuffer();e.formatKey=function(p){var m=Gl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),Gl.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=Gl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return Gl.aes._updateBlock(p,m,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},e.increment=function(p){return++p[3],p},e.md=Gl.md.sha256;function i(){var p=Gl.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,l=Gl.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(a=s(function(p){return c.getRandomValues(p)},"getRandomValues")),Gl.options.usePureJavaScript||!Gl.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Gl.random)Gl.random=o;else for(var d in o)Gl.random[d]=o[d];Gl.random.createInstance=i,ile.exports=Gl.random})(typeof jQuery<"u"?jQuery:null)})()});var sle=G((jXn,y7e)=>{f();var Rd=di();ao();var ole=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],g7e=[1,2,3,5],PSt=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),NSt=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");y7e.exports=Rd.rc2=Rd.rc2||{};Rd.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Rd.util.createBuffer(t)),e=e||128;var n=t,r=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),l;for(l=r;l<128;l++)n.putByte(ole[n.at(l-1)+n.at(l-r)&255]);for(n.setAt(128-o,ole[n.at(128-o)&a]),l=127-o;l>=0;l--)n.setAt(l,ole[n.at(l+1)^n.at(l+o)]);return n};var A7e=s(function(t,e,n){var r=!1,i=null,o=null,a=null,l,c,u,d,p=[];for(t=Rd.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());n?(l=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=PSt(g[u],g7e[u]),d++},"mixRound"),c=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(l=s(function(g){for(u=3;u>=0;u--)g[u]=NSt(g[u],g7e[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),c=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var v=i.getInt16Le();a!==null&&(n?v^=a.getInt16Le():a.putInt16Le(v)),y.push(v&65535)}d=n?0:63;for(var b=0;b<g.length;b++)for(var E=0;E<g[b][0];E++)g[b][1](y);for(u=0;u<4;u++)a!==null&&(n?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Rd.util.createBuffer(g)),r=!1,i=Rd.util.createBuffer(),o=y||new Rd.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(r||i.putBuffer(g);i.length()>=8;)m([[5,l],[1,c],[6,l],[1,c],[5,l]])},"update"),finish:s(function(g){var y=!0;if(n)if(g)y=g(8,i,!n);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(r=!0,h.update()),!n&&(y=i.length()===0,y))if(g)y=g(8,o,!n);else{var b=o.length(),E=o.at(b-1);E>b?y=!1:o.truncate(E)}return y},"finish")},h},"createCipher");Rd.rc2.startEncrypting=function(t,e,n){var r=Rd.rc2.createEncryptionCipher(t,128);return r.start(e,n),r};Rd.rc2.createEncryptionCipher=function(t,e){return A7e(t,e,!0)};Rd.rc2.startDecrypting=function(t,e,n){var r=Rd.rc2.createDecryptionCipher(t,128);return r.start(e,n),r};Rd.rc2.createDecryptionCipher=function(t,e){return A7e(t,e,!1)}});var dP=G((zXn,w7e)=>{f();var ale=di();w7e.exports=ale.jsbn=ale.jsbn||{};var oy,LSt=0xdeadbeefcafe,C7e=(LSt&16777215)==15715070;function xt(t,e,n){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(xt,"BigInteger");ale.jsbn.BigInteger=xt;function lo(){return new xt(null)}s(lo,"nbi");function FSt(t,e,n,r,i,o){for(;--o>=0;){var a=e*this.data[t++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=a&67108863}return i}s(FSt,"am1");function MSt(t,e,n,r,i,o){for(var a=e&32767,l=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,d=l*c+u*a;c=a*c+((d&32767)<<15)+n.data[r]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*u+(i>>>30),n.data[r++]=c&1073741823}return i}s(MSt,"am2");function x7e(t,e,n,r,i,o){for(var a=e&16383,l=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,d=l*c+u*a;c=a*c+((d&16383)<<14)+n.data[r]+i,i=(c>>28)+(d>>14)+l*u,n.data[r++]=c&268435455}return i}s(x7e,"am3");typeof navigator>"u"?(xt.prototype.am=x7e,oy=28):C7e&&navigator.appName=="Microsoft Internet Explorer"?(xt.prototype.am=MSt,oy=30):C7e&&navigator.appName!="Netscape"?(xt.prototype.am=FSt,oy=26):(xt.prototype.am=x7e,oy=28);xt.prototype.DB=oy;xt.prototype.DM=(1<<oy)-1;xt.prototype.DV=1<<oy;var lle=52;xt.prototype.FV=Math.pow(2,lle);xt.prototype.F1=lle-oy;xt.prototype.F2=2*oy-lle;var QSt="0123456789abcdefghijklmnopqrstuvwxyz",rG=new Array,x4,cp;x4=48;for(cp=0;cp<=9;++cp)rG[x4++]=cp;x4=97;for(cp=10;cp<36;++cp)rG[x4++]=cp;x4=65;for(cp=10;cp<36;++cp)rG[x4++]=cp;function v7e(t){return QSt.charAt(t)}s(v7e,"int2char");function b7e(t,e){var n=rG[t.charCodeAt(e)];return n??-1}s(b7e,"intAt");function OSt(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(OSt,"bnpCopyTo");function USt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(USt,"bnpFromInt");function Uv(t){var e=lo();return e.fromInt(t),e}s(Uv,"nbv");function qSt(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=n==8?t[r]&255:b7e(t,r);if(a<0){t.charAt(r)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+n>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=n,o>=this.DB&&(o-=this.DB)}n==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&xt.ZERO.subTo(this,this)}s(qSt,"bnpFromString");function WSt(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(WSt,"bnpClamp");function GSt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,r,i=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(r=this.data[a]>>l)>0&&(i=!0,o=v7e(r));a>=0;)l<e?(r=(this.data[a]&(1<<l)-1)<<e-l,r|=this.data[--a]>>(l+=this.DB-e)):(r=this.data[a]>>(l-=e)&n,l<=0&&(l+=this.DB,--a)),r>0&&(i=!0),i&&(o+=v7e(r));return i?o:"0"}s(GSt,"bnToString");function HSt(){var t=lo();return xt.ZERO.subTo(this,t),t}s(HSt,"bnNegate");function jSt(){return this.s<0?this.negate():this}s(jSt,"bnAbs");function VSt(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this.data[n]-t.data[n])!=0)return e;return 0}s(VSt,"bnCompareTo");function iG(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}s(iG,"nbits");function $St(){return this.t<=0?0:this.DB*(this.t-1)+iG(this.data[this.t-1]^this.s&this.DM)}s($St,"bnBitLength");function zSt(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}s(zSt,"bnpDLShiftTo");function YSt(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}s(YSt,"bnpDRShiftTo");function KSt(t,e){var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+o+1]=this.data[l]>>r|a,a=(this.data[l]&i)<<n;for(l=o-1;l>=0;--l)e.data[l]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(KSt,"bnpLShiftTo");function JSt(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)e.data[a-n-1]|=(this.data[a]&o)<<i,e.data[a-n]=this.data[a]>>r;r>0&&(e.data[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}s(JSt,"bnpRShiftTo");function XSt(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]-t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[n++]=this.DV+r:r>0&&(e.data[n++]=r),e.t=n,e.clamp()}s(XSt,"bnpSubTo");function ZSt(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e.data[i]=0;for(i=0;i<r.t;++i)e.data[i+n.t]=n.am(0,r.data[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&xt.ZERO.subTo(e,e)}s(ZSt,"bnpMultiplyTo");function e5t(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}s(e5t,"bnpSquareTo");function t5t(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=lo());var o=lo(),a=this.s,l=t.s,c=this.DB-iG(r.data[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=n.t,v=y-u,b=e??lo();for(o.dlShiftTo(v,b),n.compareTo(b)>=0&&(n.data[n.t++]=1,n.subTo(b,n)),xt.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--v>=0;){var E=n.data[--y]==d?this.DM:Math.floor(n.data[y]*m+(n.data[y-1]+g)*h);if((n.data[y]+=o.am(0,E,n,v,0,u))<E)for(o.dlShiftTo(v,b),n.subTo(b,n);n.data[y]<--E;)n.subTo(b,n)}e!=null&&(n.drShiftTo(u,e),a!=l&&xt.ZERO.subTo(e,e)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),a<0&&xt.ZERO.subTo(n,n)}}}s(t5t,"bnpDivRemTo");function n5t(t){var e=lo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(xt.ZERO)>0&&t.subTo(e,e),e}s(n5t,"bnMod");function B2(t){this.m=t}s(B2,"Classic");function r5t(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(r5t,"cConvert");function i5t(t){return t}s(i5t,"cRevert");function o5t(t){t.divRemTo(this.m,null,t)}s(o5t,"cReduce");function s5t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(s5t,"cMulTo");function a5t(t,e){t.squareTo(e),this.reduce(e)}s(a5t,"cSqrTo");B2.prototype.convert=r5t;B2.prototype.revert=i5t;B2.prototype.reduce=o5t;B2.prototype.mulTo=s5t;B2.prototype.sqrTo=a5t;function l5t(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(l5t,"bnpInvDigit");function D2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(D2,"Montgomery");function c5t(t){var e=lo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(xt.ZERO)>0&&this.m.subTo(e,e),e}s(c5t,"montConvert");function u5t(t){var e=lo();return t.copyTo(e),this.reduce(e),e}s(u5t,"montRevert");function d5t(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t.data[e]&32767,r=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t.data[n]+=this.m.am(0,r,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(d5t,"montReduce");function f5t(t,e){t.squareTo(e),this.reduce(e)}s(f5t,"montSqrTo");function p5t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(p5t,"montMulTo");D2.prototype.convert=c5t;D2.prototype.revert=u5t;D2.prototype.reduce=d5t;D2.prototype.mulTo=p5t;D2.prototype.sqrTo=f5t;function m5t(){return(this.t>0?this.data[0]&1:this.s)==0}s(m5t,"bnpIsEven");function h5t(t,e){if(t>4294967295||t<1)return xt.ONE;var n=lo(),r=lo(),i=e.convert(this),o=iG(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)}s(h5t,"bnpExp");function g5t(t,e){var n;return t<256||e.isEven()?n=new B2(e):n=new D2(e),this.exp(t,n)}s(g5t,"bnModPowInt");xt.prototype.copyTo=OSt;xt.prototype.fromInt=USt;xt.prototype.fromString=qSt;xt.prototype.clamp=WSt;xt.prototype.dlShiftTo=zSt;xt.prototype.drShiftTo=YSt;xt.prototype.lShiftTo=KSt;xt.prototype.rShiftTo=JSt;xt.prototype.subTo=XSt;xt.prototype.multiplyTo=ZSt;xt.prototype.squareTo=e5t;xt.prototype.divRemTo=t5t;xt.prototype.invDigit=l5t;xt.prototype.isEven=m5t;xt.prototype.exp=h5t;xt.prototype.toString=GSt;xt.prototype.negate=HSt;xt.prototype.abs=jSt;xt.prototype.compareTo=VSt;xt.prototype.bitLength=$St;xt.prototype.mod=n5t;xt.prototype.modPowInt=g5t;xt.ZERO=Uv(0);xt.ONE=Uv(1);function A5t(){var t=lo();return this.copyTo(t),t}s(A5t,"bnClone");function y5t(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(y5t,"bnIntValue");function C5t(){return this.t==0?this.s:this.data[0]<<24>>24}s(C5t,"bnByteValue");function x5t(){return this.t==0?this.s:this.data[0]<<16>>16}s(x5t,"bnShortValue");function v5t(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(v5t,"bnpChunkSize");function b5t(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(b5t,"bnSigNum");function E5t(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=Uv(n),i=lo(),o=lo(),a="";for(this.divRemTo(r,i,o);i.signum()>0;)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a}s(E5t,"bnpToRadix");function I5t(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,l=0;l<t.length;++l){var c=b7e(t,l);if(c<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&xt.ZERO.subTo(this,this)}s(I5t,"bnpFromRadix");function T5t(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(xt.ONE.shiftLeft(t-1),cle,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(xt.ONE.shiftLeft(t-1),this);else{var r=new Array,i=t&7;r.length=(t>>3)+1,e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}s(T5t,"bnpFromNumber");function w5t(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,r,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}s(w5t,"bnToByteArray");function _5t(t){return this.compareTo(t)==0}s(_5t,"bnEquals");function S5t(t){return this.compareTo(t)<0?this:t}s(S5t,"bnMin");function R5t(t){return this.compareTo(t)>0?this:t}s(R5t,"bnMax");function k5t(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n.data[r]=e(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n.data[r]=e(i,t.data[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}s(k5t,"bnpBitwiseTo");function B5t(t,e){return t&e}s(B5t,"op_and");function D5t(t){var e=lo();return this.bitwiseTo(t,B5t,e),e}s(D5t,"bnAnd");function cle(t,e){return t|e}s(cle,"op_or");function P5t(t){var e=lo();return this.bitwiseTo(t,cle,e),e}s(P5t,"bnOr");function E7e(t,e){return t^e}s(E7e,"op_xor");function N5t(t){var e=lo();return this.bitwiseTo(t,E7e,e),e}s(N5t,"bnXor");function I7e(t,e){return t&~e}s(I7e,"op_andnot");function L5t(t){var e=lo();return this.bitwiseTo(t,I7e,e),e}s(L5t,"bnAndNot");function F5t(){for(var t=lo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(F5t,"bnNot");function M5t(t){var e=lo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(M5t,"bnShiftLeft");function Q5t(t){var e=lo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(Q5t,"bnShiftRight");function O5t(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(O5t,"lbit");function U5t(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+O5t(this.data[t]);return this.s<0?this.t*this.DB:-1}s(U5t,"bnGetLowestSetBit");function q5t(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(q5t,"cbit");function W5t(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=q5t(this.data[n]^e);return t}s(W5t,"bnBitCount");function G5t(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(G5t,"bnTestBit");function H5t(t,e){var n=xt.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}s(H5t,"bnpChangeBit");function j5t(t){return this.changeBit(t,cle)}s(j5t,"bnSetBit");function V5t(t){return this.changeBit(t,I7e)}s(V5t,"bnClearBit");function $5t(t){return this.changeBit(t,E7e)}s($5t,"bnFlipBit");function z5t(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]+t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[n++]=r:r<-1&&(e.data[n++]=this.DV+r),e.t=n,e.clamp()}s(z5t,"bnpAddTo");function Y5t(t){var e=lo();return this.addTo(t,e),e}s(Y5t,"bnAdd");function K5t(t){var e=lo();return this.subTo(t,e),e}s(K5t,"bnSubtract");function J5t(t){var e=lo();return this.multiplyTo(t,e),e}s(J5t,"bnMultiply");function X5t(t){var e=lo();return this.divRemTo(t,e,null),e}s(X5t,"bnDivide");function Z5t(t){var e=lo();return this.divRemTo(t,null,e),e}s(Z5t,"bnRemainder");function e4t(t){var e=lo(),n=lo();return this.divRemTo(t,e,n),new Array(e,n)}s(e4t,"bnDivideAndRemainder");function t4t(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(t4t,"bnpDMultiply");function n4t(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(n4t,"bnpDAddOffset");function uP(){}s(uP,"NullExp");function T7e(t){return t}s(T7e,"nNop");function r4t(t,e,n){t.multiplyTo(e,n)}s(r4t,"nMulTo");function i4t(t,e){t.squareTo(e)}s(i4t,"nSqrTo");uP.prototype.convert=T7e;uP.prototype.revert=T7e;uP.prototype.mulTo=r4t;uP.prototype.sqrTo=i4t;function o4t(t){return this.exp(t,new uP)}s(o4t,"bnPow");function s4t(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,t.data[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t.data[r],n,r,0,e-r);n.clamp()}s(s4t,"bnpMultiplyLowerTo");function a4t(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n.data[this.t+r-e]=this.am(e-r,t.data[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}s(a4t,"bnpMultiplyUpperTo");function v4(t){this.r2=lo(),this.q3=lo(),xt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(v4,"Barrett");function l4t(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=lo();return t.copyTo(e),this.reduce(e),e}s(l4t,"barrettConvert");function c4t(t){return t}s(c4t,"barrettRevert");function u4t(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(u4t,"barrettReduce");function d4t(t,e){t.squareTo(e),this.reduce(e)}s(d4t,"barrettSqrTo");function f4t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(f4t,"barrettMulTo");v4.prototype.convert=l4t;v4.prototype.revert=c4t;v4.prototype.reduce=u4t;v4.prototype.mulTo=f4t;v4.prototype.sqrTo=d4t;function p4t(t,e){var n=t.bitLength(),r,i=Uv(1),o;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?o=new B2(e):e.isEven()?o=new v4(e):o=new D2(e);var a=new Array,l=3,c=r-1,u=(1<<r)-1;if(a[1]=o.convert(this),r>1){var d=lo();for(o.sqrTo(a[1],d);l<=u;)a[l]=lo(),o.mulTo(d,a[l-2],a[l]),l+=2}var p=t.t-1,m,h=!0,g=lo(),y;for(n=iG(t.data[p])-1;p>=0;){for(n>=c?m=t.data[p]>>n-c&u:(m=(t.data[p]&(1<<n+1)-1)<<c-n,p>0&&(m|=t.data[p-1]>>this.DB+n-c)),l=r;(m&1)==0;)m>>=1,--l;if((n-=l)<0&&(n+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;l>1;)o.sqrTo(i,g),o.sqrTo(g,i),l-=2;l>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<n)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--n<0&&(n=this.DB-1,--p)}return o.revert(i)}s(p4t,"bnModPow");function m4t(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}s(m4t,"bnGCD");function h4t(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this.data[r])%t;return n}s(h4t,"bnpModInt");function g4t(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return xt.ZERO;for(var n=t.clone(),r=this.clone(),i=Uv(1),o=Uv(0),a=Uv(0),l=Uv(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?((!a.isEven()||!l.isEven())&&(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(l,o)):(r.subTo(n,r),e&&a.subTo(i,a),l.subTo(o,l))}if(r.compareTo(xt.ONE)!=0)return xt.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}s(g4t,"bnModInverse");var Wm=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],A4t=(1<<26)/Wm[Wm.length-1];function y4t(t){var e,n=this.abs();if(n.t==1&&n.data[0]<=Wm[Wm.length-1]){for(e=0;e<Wm.length;++e)if(n.data[0]==Wm[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<Wm.length;){for(var r=Wm[e],i=e+1;i<Wm.length&&r<A4t;)r*=Wm[i++];for(r=n.modInt(r);e<i;)if(r%Wm[e++]==0)return!1}return n.millerRabin(t)}s(y4t,"bnIsProbablePrime");function C4t(t){var e=this.subtract(xt.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var r=e.shiftRight(n),i=x4t(),o,a=0;a<t;++a){do o=new xt(this.bitLength(),i);while(o.compareTo(xt.ONE)<=0||o.compareTo(e)>=0);var l=o.modPow(r,this);if(l.compareTo(xt.ONE)!=0&&l.compareTo(e)!=0){for(var c=1;c++<n&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(xt.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}s(C4t,"bnpMillerRabin");function x4t(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(x4t,"bnGetPrng");xt.prototype.chunkSize=v5t;xt.prototype.toRadix=E5t;xt.prototype.fromRadix=I5t;xt.prototype.fromNumber=T5t;xt.prototype.bitwiseTo=k5t;xt.prototype.changeBit=H5t;xt.prototype.addTo=z5t;xt.prototype.dMultiply=t4t;xt.prototype.dAddOffset=n4t;xt.prototype.multiplyLowerTo=s4t;xt.prototype.multiplyUpperTo=a4t;xt.prototype.modInt=h4t;xt.prototype.millerRabin=C4t;xt.prototype.clone=A5t;xt.prototype.intValue=y5t;xt.prototype.byteValue=C5t;xt.prototype.shortValue=x5t;xt.prototype.signum=b5t;xt.prototype.toByteArray=w5t;xt.prototype.equals=_5t;xt.prototype.min=S5t;xt.prototype.max=R5t;xt.prototype.and=D5t;xt.prototype.or=P5t;xt.prototype.xor=N5t;xt.prototype.andNot=L5t;xt.prototype.not=F5t;xt.prototype.shiftLeft=M5t;xt.prototype.shiftRight=Q5t;xt.prototype.getLowestSetBit=U5t;xt.prototype.bitCount=W5t;xt.prototype.testBit=G5t;xt.prototype.setBit=j5t;xt.prototype.clearBit=V5t;xt.prototype.flipBit=$5t;xt.prototype.add=Y5t;xt.prototype.subtract=K5t;xt.prototype.multiply=J5t;xt.prototype.divide=X5t;xt.prototype.remainder=Z5t;xt.prototype.divideAndRemainder=e4t;xt.prototype.modPow=p4t;xt.prototype.modInverse=g4t;xt.prototype.pow=o4t;xt.prototype.gcd=m4t;xt.prototype.isProbablePrime=y4t});var b4=G((JXn,k7e)=>{f();var Wg=di();Mg();ao();var S7e=k7e.exports=Wg.sha1=Wg.sha1||{};Wg.md.sha1=Wg.md.algorithms.sha1=S7e;S7e.create=function(){R7e||v4t();var t=null,e=Wg.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Wg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Wg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),_7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Wg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(ule.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};_7e(p,n,i);var m=Wg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},r};var ule=null,R7e=!1;function v4t(){ule="\x80",ule+=Wg.util.fillString("\0",64),R7e=!0}s(v4t,"_init");function _7e(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,c=t.h4,d=0;d<16;++d)r=n.getInt32(),e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<20;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<32;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<40;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<60;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o&a|l&(o^a),r=(i<<5|i>>>27)+u+c+2400959708+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<80;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+3395469782+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,t.h4=t.h4+c|0,p-=64}}s(_7e,"_update")});var dle=G((eZn,D7e)=>{f();var Gg=di();ao();lp();b4();var B7e=D7e.exports=Gg.pkcs1=Gg.pkcs1||{};B7e.encode_rsa_oaep=function(t,e,n){var r,i,o,a;typeof n=="string"?(r=n,i=arguments[3]||void 0,o=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md)),o?o.start():o=Gg.md.sha1.create(),a||(a=o);var l=Math.ceil(t.n.bitLength()/8),c=l-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}r||(r=""),o.update(r,"raw");for(var d=o.digest(),p="",m=c-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=Gg.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=oG(i,l-o.digestLength-1,a),v=Gg.util.xorBytes(g,y,g.length),b=oG(v,o.digestLength,a),E=Gg.util.xorBytes(i,b,i.length);return"\0"+E+v};B7e.decode_rsa_oaep=function(t,e,n){var r,i,o;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=a,v}if(i===void 0?i=Gg.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var l=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=oG(d,i.digestLength,o),m=Gg.util.xorBytes(u,p,u.length),h=oG(m,a-i.digestLength-1,o),g=Gg.util.xorBytes(d,h,d.length),y=g.substring(0,i.digestLength),v=c!=="\0",b=0;b<i.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var E=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var D=g.charCodeAt(k),N=D&1^1,Q=E?65534:0;v|=D&Q,E=E&N,_+=E}if(v||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function oG(t,e,n){n||(n=Gg.md.sha1.create());for(var r="",i=Math.ceil(e/n.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);n.start(),n.update(t+a),r+=n.digest().getBytes()}return r.substring(0,e)}s(oG,"rsa_mgf1")});var ple=G((rZn,fle)=>{f();var qv=di();ao();dP();lp();(function(){if(qv.prime){fle.exports=qv.prime;return}var t=fle.exports=qv.prime=qv.prime||{},e=qv.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new e(null);r.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||qv.random,v={nextBytes:s(function(b){for(var E=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=E.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,v,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?c(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),v=0,b=d(y.bitLength());"millerRabinTests"in h&&(b=h.millerRabinTests);var E=10;"maxBlockTime"in h&&(E=h.maxBlockTime),l(y,p,m,v,b,E,g)}s(a,"primeincFindPrimeWithoutWorkers");function l(p,m,h,g,y,v,b){var E=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return b(null,p);p.dAddOffset(n[g++%8],0)}while(v<0||+new Date-E<v);qv.util.setImmediate(function(){l(p,m,h,g,y,v,b)})}s(l,"_primeinc");function c(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),v=h.workers,b=h.workLoad||100,E=b*30/8,_=h.workerScript||"forge/prime.worker.js";if(v===-1)return qv.util.estimateCores(function(D,N){D&&(N=2),v=N-1,k()});k();function k(){v=Math.max(1,v);for(var D=[],N=0;N<v;++N)D[N]=new Worker(_);for(var Q=v,N=0;N<v;++N)D[N].addEventListener("message",me);var Z=!1;function me(te){if(!Z){--Q;var H=te.data;if(H.found){for(var W=0;W<D.length;++W)D[W].terminate();return Z=!0,g(null,new e(H.prime,16))}y.bitLength()>p&&(y=u(p,m));var re=y.toString(16);te.target.postMessage({hex:re,workLoad:b}),y.dAddOffset(E,0)}}s(me,"workerMessage")}s(k,"generate")}s(c,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(r).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var fP=G((sZn,O7e)=>{f();var Zn=di();qm();dP();Ov();dle();ple();lp();ao();typeof Zi>"u"&&(Zi=Zn.jsbn.BigInteger);var Zi,mle=Zn.util.isNodejs?require("crypto"):null,qe=Zn.asn1,up=Zn.util;Zn.pki=Zn.pki||{};O7e.exports=Zn.pki.rsa=Zn.rsa=Zn.rsa||{};var Zr=Zn.pki,b4t=[6,4,2,4,2,4,6,2],E4t={name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},I4t={name:"RSAPrivateKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},T4t={name:"RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},w4t=Zn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},_4t={name:"DigestInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:qe.Class.UNIVERSAL,type:qe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},S4t=s(function(t){var e;if(t.algorithm in Zr.oids)e=Zr.oids[t.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}var r=qe.oidToDer(e).getBytes(),i=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]),o=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]);o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,r)),o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,""));var a=qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),qe.toDer(i).getBytes()},"emsaPkcs1v15encode"),M7e=s(function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Zi.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Zi.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var r;do r=new Zi(Zn.util.bytesToHex(Zn.random.getBytes(e.n.bitLength()/8)),16);while(r.compareTo(e.n)>=0||!r.gcd(e.n).equals(Zi.ONE));t=t.multiply(r.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(r.modInverse(e.n)).mod(e.n),a},"_modPow");Zr.rsa.encrypt=function(t,e,n){var r=n,i,o=Math.ceil(e.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=Q7e(t,e,n)):(i=Zn.util.createBuffer(),i.putBytes(t));for(var a=new Zi(i.toHex(),16),l=M7e(a,e,r),c=l.toString(16),u=Zn.util.createBuffer(),d=o-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Zn.util.hexToBytes(c)),u.getBytes()};Zr.rsa.decrypt=function(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new Zi(Zn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=M7e(a,e,n),c=l.toString(16),u=Zn.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Zn.util.hexToBytes(c)),r!==!1?sG(u.getBytes(),e,n):u.getBytes()};Zr.rsa.createKeyPairGenerationState=function(t,e,n){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,n=n||{};var r=n.prng||Zn.random,i={nextBytes:s(function(l){for(var c=r.getBytesSync(l.length),u=0;u<l.length;++u)l[u]=c.charCodeAt(u)},"nextBytes")},o=n.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Zi(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};Zr.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new Zi(null);n.fromInt(30);for(var r=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new Zi(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Zi.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),r=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(k4t(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(b4t[r++%8],0):t.pqState===2?t.pqState=t.num.subtract(Zi.ONE).gcd(t.e).compareTo(Zi.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Zi.ONE),t.q1=t.q.subtract(Zi.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Zi.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Zr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zr.rsa.setPublicKey(t.n,t.e)}}a=+new Date,l+=a-o,o=a}return t.keys!==null};Zr.rsa.generateKeyPair=function(t,e,n,r){if(arguments.length===1?typeof t=="object"?(n=t,t=void 0):typeof t=="function"&&(r=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(r=e,e=void 0):typeof e!="number"&&(n=e,e=void 0):(n=t,r=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=e,e=void 0)),n=n||{},t===void 0&&(t=n.bits||2048),e===void 0&&(e=n.e||65537),!Zn.options.usePureJavaScript&&!n.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(r){if(P7e("generateKeyPair"))return mle.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,u){if(l)return r(l);r(null,{privateKey:Zr.privateKeyFromPem(u),publicKey:Zr.publicKeyFromPem(c)})});if(N7e("generateKey")&&N7e("exportKey"))return up.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:F7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return up.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){r(l)}).then(function(l){if(l){var c=Zr.privateKeyFromAsn1(qe.fromDer(Zn.util.createBuffer(l)));r(null,{privateKey:c,publicKey:Zr.setRsaPublicKey(c.n,c.e)})}});if(L7e("generateKey")&&L7e("exportKey")){var i=up.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:F7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,u=up.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(d){var p=d.target.result,m=Zr.privateKeyFromAsn1(qe.fromDer(Zn.util.createBuffer(p)));r(null,{privateKey:m,publicKey:Zr.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){r(d)}},i.onerror=function(l){r(l)};return}}else if(P7e("generateKeyPairSync")){var o=mle.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Zr.privateKeyFromPem(o.privateKey),publicKey:Zr.publicKeyFromPem(o.publicKey)}}}var a=Zr.rsa.createKeyPairGenerationState(t,e,n);if(!r)return Zr.rsa.stepKeyPairGenerationState(a,0),a.keys;R4t(a,n,r)};Zr.setRsaPublicKey=Zr.rsa.setPublicKey=function(t,e){var n={n:t,e};return n.encrypt=function(r,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(l,c,u){return Q7e(l,c,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(l,c){return Zn.pkcs1.encode_rsa_oaep(c,l,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(l){return l},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(r,n,!0);return Zr.rsa.encrypt(a,n,!0)},n.verify=function(r,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(c,u){u=sG(u,n,!0);var d=qe.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!qe.validate(d,_4t,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=qe.derToOid(p.algorithmIdentifier);if(!(g===Zn.oids.md2||g===Zn.oids.md5||g===Zn.oids.sha1||g===Zn.oids.sha224||g===Zn.oids.sha256||g===Zn.oids.sha384||g===Zn.oids.sha512||g===Zn.oids["sha512-224"]||g===Zn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===Zn.oids.md2||g===Zn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(c,u){return u=sG(u,n,!0),c===u},"verify")});var l=Zr.rsa.decrypt(i,n,!0,!1);return o.verify(r,l,n.n.bitLength())},n};Zr.setRsaPrivateKey=Zr.rsa.setPrivateKey=function(t,e,n,r,i,o,a,l){var c={n:t,e,d:n,p:r,q:i,dP:o,dQ:a,qInv:l};return c.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=Zr.rsa.decrypt(u,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:sG};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return Zn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,c,!1)},c.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:S4t},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,c.n.bitLength());return Zr.rsa.encrypt(m,c,p)},c};Zr.wrapRsaPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,qe.toDer(t).getBytes())])};Zr.privateKeyFromAsn1=function(t){var e={},n=[];if(qe.validate(t,E4t,e,n)&&(t=qe.fromDer(Zn.util.createBuffer(e.privateKey))),e={},n=[],!qe.validate(t,I4t,e,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,o,a,l,c,u,d,p;return i=Zn.util.createBuffer(e.privateKeyModulus).toHex(),o=Zn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=Zn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Zn.util.createBuffer(e.privateKeyPrime1).toHex(),c=Zn.util.createBuffer(e.privateKeyPrime2).toHex(),u=Zn.util.createBuffer(e.privateKeyExponent1).toHex(),d=Zn.util.createBuffer(e.privateKeyExponent2).toHex(),p=Zn.util.createBuffer(e.privateKeyCoefficient).toHex(),Zr.setRsaPrivateKey(new Zi(i,16),new Zi(o,16),new Zi(a,16),new Zi(l,16),new Zi(c,16),new Zi(u,16),new Zi(d,16),new Zi(p,16))};Zr.privateKeyToAsn1=Zr.privateKeyToRSAPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.e)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.d)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.p)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.q)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.dP)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.dQ)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.qInv))])};Zr.publicKeyFromAsn1=function(t){var e={},n=[];if(qe.validate(t,w4t,e,n)){var r=qe.derToOid(e.publicKeyOid);if(r!==Zr.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}t=e.rsaPublicKey}if(n=[],!qe.validate(t,T4t,e,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var o=Zn.util.createBuffer(e.publicKeyModulus).toHex(),a=Zn.util.createBuffer(e.publicKeyExponent).toHex();return Zr.setRsaPublicKey(new Zi(o,16),new Zi(a,16))};Zr.publicKeyToAsn1=Zr.publicKeyToSubjectPublicKeyInfo=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.BITSTRING,!1,[Zr.publicKeyToRSAPublicKey(t)])])};Zr.publicKeyToRSAPublicKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Hg(t.e))])};function Q7e(t,e,n){var r=Zn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}r.putByte(0),r.putByte(n);var a=i-3-t.length,l;if(n===0||n===1){l=n===0?0:255;for(var c=0;c<a;++c)r.putByte(l)}else for(;a>0;){for(var u=0,d=Zn.random.getBytes(a),c=0;c<a;++c)l=d.charCodeAt(c),l===0?++u:r.putByte(l);a=u}return r.putByte(0),r.putBytes(t),r}s(Q7e,"_encodePkcs1_v1_5");function sG(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8),o=Zn.util.createBuffer(t),a=o.getByte(),l=o.getByte();if(a!==0||n&&l!==0&&l!==1||!n&&l!=2||n&&l===0&&typeof r>"u")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-r;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(l===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var d=o.getByte();if(d!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(sG,"_decodePkcs1_v1_5");function R4t(t,e,n){typeof e=="function"&&(n=e,e={}),e=e||{};var r={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(r.prng=e.prng),i();function i(){o(t.pBits,function(l,c){if(l)return n(l);if(t.p=c,t.q!==null)return a(l,t.q);o(t.qBits,a)})}s(i,"generate");function o(l,c){Zn.prime.generateProbablePrime(l,r,c)}s(o,"getPrime");function a(l,c){if(l)return n(l);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Zi.ONE).gcd(t.e).compareTo(Zi.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Zi.ONE).gcd(t.e).compareTo(Zi.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(Zi.ONE),t.q1=t.q.subtract(Zi.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Zi.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Zr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zr.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}s(a,"finish")}s(R4t,"_generateKeyPair");function Hg(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=Zn.util.hexToBytes(e);return n.length>1&&(n.charCodeAt(0)===0&&(n.charCodeAt(1)&128)===0||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}s(Hg,"_bnToBytes");function k4t(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(k4t,"_getMillerRabinTests");function P7e(t){return Zn.util.isNodejs&&typeof mle[t]=="function"}s(P7e,"_detectNodeCrypto");function N7e(t){return typeof up.globalScope<"u"&&typeof up.globalScope.crypto=="object"&&typeof up.globalScope.crypto.subtle=="object"&&typeof up.globalScope.crypto.subtle[t]=="function"}s(N7e,"_detectSubtleCrypto");function L7e(t){return typeof up.globalScope<"u"&&typeof up.globalScope.msCrypto=="object"&&typeof up.globalScope.msCrypto.subtle=="object"&&typeof up.globalScope.msCrypto.subtle[t]=="function"}s(L7e,"_detectSubtleMsCrypto");function F7e(t){for(var e=Zn.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}s(F7e,"_intToUint8Array")});var hle=G((cZn,H7e)=>{f();var dn=di();Qv();qm();cP();Mg();Ov();tG();k2();lp();sle();fP();ao();typeof U7e>"u"&&(U7e=dn.jsbn.BigInteger);var U7e,at=dn.asn1,ai=dn.pki=dn.pki||{};H7e.exports=ai.pbe=dn.pbe=dn.pbe||{};var P2=ai.oids,B4t={name:"EncryptedPrivateKeyInfo",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},D4t={name:"PBES2Algorithms",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},P4t={name:"pkcs-12PbeParams",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"iterations"}]};ai.encryptPrivateKeyInfo=function(t,e,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=dn.random.getBytesSync(n.saltSize),i=n.count,o=at.integerToDer(i),a,l,c;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var u,d,p;switch(n.algorithm){case"aes128":a=16,u=16,d=P2["aes128-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=P2["aes192-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=P2["aes256-CBC"],p=dn.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=P2.desCBC,p=dn.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var h="hmacWith"+n.prfAlgorithm.toUpperCase(),g=G7e(h),y=dn.pkcs5.pbkdf2(e,r,i,a,g),v=dn.random.getBytesSync(u),b=p(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes();var E=N4t(r,o,a,h);l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(P2.pkcs5PBES2).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(P2.pkcs5PBKDF2).getBytes()),E]),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(d).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,v)])])])}else if(n.algorithm==="3des"){a=24;var _=new dn.util.ByteBuffer(r),y=ai.pbe.generatePkcs12Key(e,_,1,i,a),v=ai.pbe.generatePkcs12Key(e,_,2,i,a),b=dn.des.createEncryptionCipher(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes(),l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(P2["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,r),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var k=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[l,at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,c)]);return k};ai.decryptPrivateKeyInfo=function(t,e){var n=null,r={},i=[];if(!at.validate(t,B4t,r,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=at.derToOid(r.encryptionOid),l=ai.pbe.getCipher(a,r.encryptionParams,e),c=dn.util.createBuffer(r.encryptedData);return l.update(c),l.finish()&&(n=at.fromDer(l.output)),n};ai.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:at.toDer(t).getBytes()};return dn.pem.encode(n,{maxline:e})};ai.encryptedPrivateKeyFromPem=function(t){var e=dn.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return at.fromDer(e.body)};ai.encryptRsaPrivateKey=function(t,e,n){if(n=n||{},!n.legacy){var r=ai.wrapRsaPrivateKey(ai.privateKeyToAsn1(t));return r=ai.encryptPrivateKeyInfo(r,e,n),ai.encryptedPrivateKeyToPem(r)}var i,o,a,l;switch(n.algorithm){case"aes128":i="AES-128-CBC",a=16,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw c.algorithm=n.algorithm,c}var u=dn.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=l(u);d.start(o),d.update(at.toDer(ai.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:dn.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return dn.pem.encode(p)};ai.decryptRsaPrivateKey=function(t,e){var n=null,r=dn.pem.decode(t)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var o,a;switch(r.dekInfo.algorithm){case"DES-CBC":o=8,a=dn.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=dn.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=dn.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=dn.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=dn.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return dn.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return dn.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return dn.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var l=dn.util.hexToBytes(r.dekInfo.parameters),c=dn.pbe.opensslDeriveBytes(e,l.substr(0,8),o),u=a(c);if(u.start(l),u.update(dn.util.createBuffer(r.body)),u.finish())n=u.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=ai.decryptPrivateKeyInfo(at.fromDer(n),e):n=at.fromDer(n),n!==null&&(n=ai.privateKeyFromAsn1(n)),n};ai.pbe.generatePkcs12Key=function(t,e,n,r,i,o){var a,l;if(typeof o>"u"||o===null){if(!("sha1"in dn.md))throw new Error('"sha1" hash algorithm unavailable.');o=dn.md.sha1.create()}var c=o.digestLength,u=o.blockLength,d=new dn.util.ByteBuffer,p=new dn.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)p.putInt16(t.charCodeAt(l));p.putInt16(0)}var m=p.length(),h=e.length(),g=new dn.util.ByteBuffer;g.fillWithByte(n,u);var y=u*Math.ceil(h/u),v=new dn.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%h));var b=u*Math.ceil(m/u),E=new dn.util.ByteBuffer;for(l=0;l<b;l++)E.putByte(p.at(l%m));var _=v;_.putBuffer(E);for(var k=Math.ceil(i/c),D=1;D<=k;D++){var N=new dn.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var Q=0;Q<r;Q++)o.start(),o.update(N.getBytes()),N=o.digest();var Z=new dn.util.ByteBuffer;for(l=0;l<u;l++)Z.putByte(N.at(l%c));var me=Math.ceil(h/u)+Math.ceil(m/u),te=new dn.util.ByteBuffer;for(a=0;a<me;a++){var H=new dn.util.ByteBuffer(_.getBytes(u)),W=511;for(l=Z.length()-1;l>=0;l--)W=W>>8,W+=Z.at(l)+H.at(l),H.setAt(l,W&255);te.putBuffer(H)}_=te,d.putBuffer(N)}return d.truncate(d.length()-i),d};ai.pbe.getCipher=function(t,e,n){switch(t){case ai.oids.pkcs5PBES2:return ai.pbe.getCipherForPBES2(t,e,n);case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:return ai.pbe.getCipherForPKCS12PBE(t,e,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=t,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};ai.pbe.getCipherForPBES2=function(t,e,n){var r={},i=[];if(!at.validate(e,D4t,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=at.derToOid(r.kdfOid),t!==ai.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=at.derToOid(r.encOid),t!==ai.oids["aes128-CBC"]&&t!==ai.oids["aes192-CBC"]&&t!==ai.oids["aes256-CBC"]&&t!==ai.oids["des-EDE3-CBC"]&&t!==ai.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=r.kdfSalt,l=dn.util.createBuffer(r.kdfIterationCount);l=l.getInt(l.length()<<3);var c,u;switch(ai.oids[t]){case"aes128-CBC":c=16,u=dn.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=dn.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=dn.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=dn.des.createDecryptionCipher;break;case"desCBC":c=8,u=dn.des.createDecryptionCipher;break}var d=W7e(r.prfOid),p=dn.pkcs5.pbkdf2(n,a,l,c,d),m=r.encIv,h=u(p);return h.start(m),h};ai.pbe.getCipherForPKCS12PBE=function(t,e,n){var r={},i=[];if(!at.validate(e,P4t,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=dn.util.createBuffer(r.salt),l=dn.util.createBuffer(r.iterations);l=l.getInt(l.length()<<3);var c,u,d;switch(t){case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=dn.des.startDecrypting;break;case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=s(function(y,v){var b=dn.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=W7e(r.prfOid),m=ai.pbe.generatePkcs12Key(n,a,1,l,c,p);p.start();var h=ai.pbe.generatePkcs12Key(n,a,2,l,u,p);return d(m,h)};ai.pbe.opensslDeriveBytes=function(t,e,n,r){if(typeof r>"u"||r===null){if(!("md5"in dn.md))throw new Error('"md5" hash algorithm unavailable.');r=dn.md.md5.create()}e===null&&(e="");for(var i=[q7e(r,t+e)],o=16,a=1;o<n;++a,o+=16)i.push(q7e(r,i[a-1]+t+e));return i.join("").substr(0,n)};function q7e(t,e){return t.start().update(e).digest().getBytes()}s(q7e,"hash");function W7e(t){var e;if(!t)e="hmacWithSHA1";else if(e=ai.oids[at.derToOid(t)],!e){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return G7e(e)}s(W7e,"prfOidToMessageDigest");function G7e(t){var e=dn.md;switch(t){case"hmacWithSHA224":e=dn.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(G7e,"prfAlgorithmToMessageDigest");function N4t(t,e,n,r){var i=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,t),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,e.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,dn.util.hexToBytes(n.toString(16))),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(ai.oids[r]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.NULL,!1,"")])),i}s(N4t,"createPbkdf2Params")});var gle=G((fZn,$7e)=>{f();var E4=di();qm();ao();var sn=E4.asn1,I4=$7e.exports=E4.pkcs7asn1=E4.pkcs7asn1||{};E4.pkcs7=E4.pkcs7||{};E4.pkcs7.asn1=I4;var j7e={name:"ContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};I4.contentInfoValidator=j7e;var V7e={name:"EncryptedContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};I4.envelopedDataValidator={name:"EnvelopedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(V7e)};I4.encryptedDataValidator={name:"EncryptedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"}].concat(V7e)};var L4t={name:"SignerInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};I4.signedDataValidator={name:"SignedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},j7e,{name:"SignedData.Certificates",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,capture:"signerInfos",optional:!0,value:[L4t]}]};I4.recipientInfoValidator={name:"RecipientInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Ale=G((mZn,z7e)=>{f();var N2=di();ao();N2.mgf=N2.mgf||{};var F4t=z7e.exports=N2.mgf.mgf1=N2.mgf1=N2.mgf1||{};F4t.create=function(t){var e={generate:s(function(n,r){for(var i=new N2.util.ByteBuffer,o=Math.ceil(r/t.digestLength),a=0;a<o;a++){var l=new N2.util.ByteBuffer;l.putInt32(a),t.start(),t.update(n+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()},"generate")};return e}});var K7e=G((AZn,Y7e)=>{f();var aG=di();Ale();Y7e.exports=aG.mgf=aG.mgf||{};aG.mgf.mgf1=aG.mgf1});var lG=G((CZn,J7e)=>{f();var L2=di();lp();ao();var M4t=J7e.exports=L2.pss=L2.pss||{};M4t.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,n=t.mgf,r=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=L2.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||L2.random,l={};return l.encode=function(c,u){var d,p=u-1,m=Math.ceil(p/8),h=c.digest().getBytes();if(m<r+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new L2.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new L2.util.ByteBuffer;b.fillWithByte(0,m-o-r-2),b.putByte(1),b.putBytes(g);var E=b.getBytes(),_=m-r-1,k=n.generate(v,_),D="";for(d=0;d<_;d++)D+=String.fromCharCode(E.charCodeAt(d)^k.charCodeAt(d));var N=65280>>8*m-p&255;return D=String.fromCharCode(D.charCodeAt(0)&~N)+D.substr(1),D+v+"\xBC"},l.verify=function(c,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<r+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-r-1,y=u.substr(0,g),v=u.substr(g,r),b=65280>>8*h-m&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var E=n.generate(v,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^E.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=h-r-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var D=_.substr(-o),N=new L2.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(D),e.start(),e.update(N.getBytes());var Q=e.digest().getBytes();return v===Q},l}});var dG=G((vZn,nNe)=>{f();var er=di();Qv();qm();cP();Mg();K7e();Ov();k2();lG();fP();ao();var j=er.asn1,Wt=nNe.exports=er.pki=er.pki||{},eo=Wt.oids,ua={};ua.CN=eo.commonName;ua.commonName="CN";ua.C=eo.countryName;ua.countryName="C";ua.L=eo.localityName;ua.localityName="L";ua.ST=eo.stateOrProvinceName;ua.stateOrProvinceName="ST";ua.O=eo.organizationName;ua.organizationName="O";ua.OU=eo.organizationalUnitName;ua.organizationalUnitName="OU";ua.E=eo.emailAddress;ua.emailAddress="E";var Z7e=er.pki.rsa.publicKeyValidator,Q4t={name:"Certificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Z7e,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},O4t={name:"rsapss",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},U4t={name:"CertificationRequestInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Z7e,{name:"CertificationRequestInfo.attributes",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:j.Class.UNIVERSAL,type:j.Type.SET,constructed:!0}]}]}]},q4t={name:"CertificationRequest",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[U4t,{name:"CertificationRequest.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Wt.RDNAttributesAsArray=function(t,e){for(var n=[],r,i,o,a=0;a<t.value.length;++a){r=t.value[a];for(var l=0;l<r.value.length;++l)o={},i=r.value[l],o.type=j.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in eo&&(o.name=eo[o.type],o.name in ua&&(o.shortName=ua[o.name])),e&&(e.update(o.type),e.update(o.value)),n.push(o)}return n};Wt.CRIAttributesAsArray=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=t[n],i=j.derToOid(r.value[0].value),o=r.value[1].value,a=0;a<o.length;++a){var l={};if(l.type=i,l.value=o[a].value,l.valueTagClass=o[a].type,l.type in eo&&(l.name=eo[l.type],l.name in ua&&(l.shortName=ua[l.name])),l.type===eo.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Wt.certificateExtensionFromAsn1(l.value[c]))}e.push(l)}return e};function Wv(t,e){typeof e=="string"&&(e={shortName:e});for(var n=null,r,i=0;n===null&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}s(Wv,"_getAttribute");var cG=s(function(t,e,n){var r={};if(t!==eo["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:eo.sha1},mgf:{algorithmOid:eo.mgf1,hash:{algorithmOid:eo.sha1}},saltLength:20});var i={},o=[];if(!j.validate(e,O4t,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=j.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=j.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=j.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},"_readSignatureParameters"),uG=s(function(t){switch(eo[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return er.md.sha1.create();case"md5WithRSAEncryption":return er.md.md5.create();case"sha256WithRSAEncryption":return er.md.sha256.create();case"sha384WithRSAEncryption":return er.md.sha384.create();case"sha512WithRSAEncryption":return er.md.sha512.create();case"RSASSA-PSS":return er.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),eNe=s(function(t){var e=t.certificate,n;switch(e.signatureOid){case eo.sha1WithRSAEncryption:case eo.sha1WithRSASignature:break;case eo["RSASSA-PSS"]:var r,i;if(r=eo[e.signatureParameters.mgf.hash.algorithmOid],r===void 0||er.md[r]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=r,o}if(i=eo[e.signatureParameters.mgf.algorithmOid],i===void 0||er.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=er.mgf[i].create(er.md[r].create()),r=eo[e.signatureParameters.hash.algorithmOid],r===void 0||er.md[r]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=r,o}n=er.pss.create(er.md[r].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,n)},"_verifySignature");Wt.certificateFromPem=function(t,e,n){var r=er.pem.decode(t)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=j.fromDer(r.body,n);return Wt.certificateFromAsn1(o,e)};Wt.certificateToPem=function(t,e){var n={type:"CERTIFICATE",body:j.toDer(Wt.certificateToAsn1(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.publicKeyFromPem=function(t){var e=er.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=j.fromDer(e.body);return Wt.publicKeyFromAsn1(r)};Wt.publicKeyToPem=function(t,e){var n={type:"PUBLIC KEY",body:j.toDer(Wt.publicKeyToAsn1(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.publicKeyToRSAPublicKeyPem=function(t,e){var n={type:"RSA PUBLIC KEY",body:j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||er.md.sha1.create(),r=e.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=j.toDer(Wt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}n.start(),n.update(i);var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Wt.certificationRequestFromPem=function(t,e,n){var r=er.pem.decode(t)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=j.fromDer(r.body,n);return Wt.certificationRequestFromAsn1(o,e)};Wt.certificationRequestToPem=function(t,e){var n={type:"CERTIFICATE REQUEST",body:j.toDer(Wt.certificationRequestToAsn1(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Wv(t.issuer,e)},t.issuer.addField=function(e){dp([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Wv(t.subject,e)},t.subject.addField=function(e){dp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,n){dp(e),t.subject.attributes=e,delete t.subject.uniqueId,n&&(t.subject.uniqueId=n),t.subject.hash=null},t.setIssuer=function(e,n){dp(e),t.issuer.attributes=e,delete t.issuer.uniqueId,n&&(t.issuer.uniqueId=n),t.issuer.hash=null},t.setExtensions=function(e){for(var n=0;n<e.length;++n)tNe(e[n],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var n=null,r,i=0;n===null&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,n){t.md=n||er.md.sha1.create();var r=eo[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.tbsCertificate=Wt.getTBSCertificate(t);var o=j.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var n=!1;if(!t.issued(e)){var r=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=r.attributes,o}var a=e.md;if(a===null){a=uG({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Wt.getTBSCertificate(e),c=j.toDer(l);a.update(c.getBytes())}return a!==null&&(n=eNe({certificate:t,md:a,signature:e.signature})),n},t.isIssuer=function(e){var n=!1,r=t.issuer,i=e.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var o,a,l=0;n&&l<r.attributes.length;++l)o=r.attributes[l],a=i.attributes[l],(o.type!==a.type||o.value!==a.value)&&(n=!1)}return n},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Wt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=eo.subjectKeyIdentifier,n=0;n<t.extensions.length;++n){var r=t.extensions[n];if(r.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return er.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},t};Wt.certificateFromAsn1=function(t,e){var n={},r=[];if(!j.validate(t,Q4t,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var o=j.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificate();a.version=n.certVersion?n.certVersion.charCodeAt(0):0;var l=er.util.createBuffer(n.certSerialNumber);a.serialNumber=l.toHex(),a.signatureOid=er.asn1.derToOid(n.certSignatureOid),a.signatureParameters=cG(a.signatureOid,n.certSignatureParams,!0),a.siginfo.algorithmOid=er.asn1.derToOid(n.certinfoSignatureOid),a.siginfo.parameters=cG(a.siginfo.algorithmOid,n.certinfoSignatureParams,!1),a.signature=n.certSignature;var c=[];if(n.certValidity1UTCTime!==void 0&&c.push(j.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&c.push(j.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(n.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=n.tbsCertificate,e){a.md=uG({signatureOid:a.signatureOid,type:"certificate"});var u=j.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=er.md.sha1.create(),p=j.toDer(n.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return Wv(a.issuer,g)},a.issuer.addField=function(g){dp([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Wt.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(a.issuer.uniqueId=n.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=er.md.sha1.create(),h=j.toDer(n.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return Wv(a.subject,g)},a.subject.addField=function(g){dp([g]),a.subject.attributes.push(g)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(a.subject.uniqueId=n.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),n.certExtensions?a.extensions=Wt.certificateExtensionsFromAsn1(n.certExtensions):a.extensions=[],a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a};Wt.certificateExtensionsFromAsn1=function(t){for(var e=[],n=0;n<t.value.length;++n)for(var r=t.value[n],i=0;i<r.value.length;++i)e.push(Wt.certificateExtensionFromAsn1(r.value[i]));return e};Wt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=j.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===j.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in eo){if(e.name=eo[e.id],e.name==="keyUsage"){var n=j.fromDer(e.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),e.digitalSignature=(r&128)===128,e.nonRepudiation=(r&64)===64,e.keyEncipherment=(r&32)===32,e.dataEncipherment=(r&16)===16,e.keyAgreement=(r&8)===8,e.keyCertSign=(r&4)===4,e.cRLSign=(r&2)===2,e.encipherOnly=(r&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var n=j.fromDer(e.value);n.value.length>0&&n.value[0].type===j.Type.BOOLEAN?e.cA=n.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;n.value.length>0&&n.value[0].type===j.Type.INTEGER?o=n.value[0].value:n.value.length>1&&(o=n.value[1].value),o!==null&&(e.pathLenConstraint=j.derToInteger(o))}else if(e.name==="extKeyUsage")for(var n=j.fromDer(e.value),a=0;a<n.value.length;++a){var l=j.derToOid(n.value[a].value);l in eo?e[eo[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var n=j.fromDer(e.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),e.client=(r&128)===128,e.server=(r&64)===64,e.email=(r&32)===32,e.objsign=(r&16)===16,e.reserved=(r&8)===8,e.sslCA=(r&4)===4,e.emailCA=(r&2)===2,e.objCA=(r&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,n=j.fromDer(e.value),u=0;u<n.value.length;++u){c=n.value[u];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=er.util.bytesToIP(c.value);break;case 8:d.oid=j.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var n=j.fromDer(e.value);e.subjectKeyIdentifier=er.util.bytesToHex(n.value)}}return e};Wt.certificationRequestFromAsn1=function(t,e){var n={},r=[];if(!j.validate(t,q4t,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var o=j.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificationRequest();if(a.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,a.signatureOid=er.asn1.derToOid(n.csrSignatureOid),a.signatureParameters=cG(a.signatureOid,n.csrSignatureParams,!0),a.siginfo.algorithmOid=er.asn1.derToOid(n.csrSignatureOid),a.siginfo.parameters=cG(a.siginfo.algorithmOid,n.csrSignatureParams,!1),a.signature=n.csrSignature,a.certificationRequestInfo=n.certificationRequestInfo,e){a.md=uG({signatureOid:a.signatureOid,type:"certification request"});var l=j.toDer(a.certificationRequestInfo);a.md.update(l.getBytes())}var c=er.md.sha1.create();return a.subject.getField=function(u){return Wv(a.subject,u)},a.subject.addField=function(u){dp([u]),a.subject.attributes.push(u)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a.getAttribute=function(u){return Wv(a,u)},a.addAttribute=function(u){dp([u]),a.attributes.push(u)},a.attributes=Wt.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),a};Wt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Wv(t.subject,e)},t.subject.addField=function(e){dp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Wv(t,e)},t.addAttribute=function(e){dp([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){dp(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){dp(e),t.attributes=e},t.sign=function(e,n){t.md=n||er.md.sha1.create();var r=eo[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.certificationRequestInfo=Wt.getCertificationRequestInfo(t);var o=j.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,n=t.md;if(n===null){n=uG({signatureOid:t.signatureOid,type:"certification request"});var r=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t),i=j.toDer(r);n.update(i.getBytes())}return n!==null&&(e=eNe({certificate:t,md:n,signature:t.signature})),e},t};function T4(t){for(var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),n,r,i=t.attributes,o=0;o<i.length;++o){n=i[o];var a=n.value,l=j.Type.PRINTABLESTRING;"valueTagClass"in n&&(l=n.valueTagClass,l===j.Type.UTF8&&(a=er.util.encodeUtf8(a))),r=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(n.type).getBytes()),j.create(j.Class.UNIVERSAL,l,!1,a)])]),e.value.push(r)}return e}s(T4,"_dnToAsn1");function dp(t){for(var e,n=0;n<t.length;++n){if(e=t[n],typeof e.name>"u"&&(e.type&&e.type in Wt.oids?e.name=Wt.oids[e.type]:e.shortName&&e.shortName in ua&&(e.name=Wt.oids[ua[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Wt.oids)e.type=Wt.oids[e.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=e,r}if(typeof e.shortName>"u"&&e.name&&e.name in ua&&(e.shortName=ua[e.name]),e.type===eo.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=j.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Wt.certificateExtensionToAsn1(tNe(e.extensions[i])))}if(typeof e.value>"u"){var r=new Error("Attribute value not specified.");throw r.attribute=e,r}}}s(dp,"_fillMissingFields");function tNe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Wt.oids&&(t.name=Wt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Wt.oids)t.id=Wt.oids[t.name];else{var n=new Error("Extension ID not specified.");throw n.extension=t,n}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var r=0,i=0,o=0;t.digitalSignature&&(i|=128,r=7),t.nonRepudiation&&(i|=64,r=6),t.keyEncipherment&&(i|=32,r=5),t.dataEncipherment&&(i|=16,r=4),t.keyAgreement&&(i|=8,r=3),t.keyCertSign&&(i|=4,r=2),t.cRLSign&&(i|=2,r=1),t.encipherOnly&&(i|=1,r=0),t.decipherOnly&&(o|=128,r=7);var a=String.fromCharCode(r);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var c in t)t[c]===!0&&(c in eo?l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(eo[c]).getBytes())):c.indexOf(".")!==-1&&l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var r=0,i=0;t.client&&(i|=128,r=7),t.server&&(i|=64,r=6),t.email&&(i|=32,r=5),t.objsign&&(i|=16,r=4),t.reserved&&(i|=8,r=3),t.sslCA&&(i|=4,r=2),t.emailCA&&(i|=2,r=1),t.objCA&&(i|=1,r=0);var a=String.fromCharCode(r);i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=er.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));t.value.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=j.create(j.Class.UNIVERSAL,j.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[j.create(j.Class.CONTEXT_SPECIFIC,4,!0,[T4(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=er.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),v=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=er.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));v.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=t,n}return t}s(tNe,"_fillMissingExtensionFields");function yle(t,e){switch(t){case eo["RSASSA-PSS"]:var n=[];return e.hash.algorithmOid!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.saltLength).getBytes())])),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,n);default:return j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")}}s(yle,"_signatureParametersToAsn1");function W4t(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var n=t.attributes,r=0;r<n.length;++r){var i=n[r],o=i.value,a=j.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===j.Type.UTF8&&(o=er.util.encodeUtf8(o));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(i.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,a,l,o)])]);e.value.push(c)}return e}s(W4t,"_CRIAttributesToAsn1");var G4t=new Date("1950-01-01T00:00:00Z"),H4t=new Date("2050-01-01T00:00:00Z");function X7e(t){return t>=G4t&&t<H4t?j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(t)):j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(t))}s(X7e,"_dateToAsn1");Wt.getTBSCertificate=function(t){var e=X7e(t.validity.notBefore),n=X7e(t.validity.notAfter),r=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes())]),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,er.util.hexToBytes(t.serialNumber)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.siginfo.algorithmOid).getBytes()),yle(t.siginfo.algorithmOid,t.siginfo.parameters)]),T4(t.issuer),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,n]),T4(t.subject),Wt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&r.value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&r.value.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&r.value.push(Wt.certificateExtensionsToAsn1(t.extensions)),r};Wt.getCertificationRequestInfo=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),T4(t.subject),Wt.publicKeyToAsn1(t.publicKey),W4t(t)]);return e};Wt.distinguishedNameToAsn1=function(t){return T4(t)};Wt.certificateToAsn1=function(t){var e=t.tbsCertificate||Wt.getTBSCertificate(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),yle(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.certificateExtensionsToAsn1=function(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,3,!0,[]),n=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(n);for(var r=0;r<t.length;++r)n.value.push(Wt.certificateExtensionToAsn1(t[r]));return e};Wt.certificateExtensionToAsn1=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.id).getBytes())),t.critical&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF"));var n=t.value;return typeof t.value!="string"&&(n=j.toDer(n).getBytes()),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,n)),e};Wt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),yle(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var l=n(a.issuer);return l},e.addCertificate=function(a){if(typeof a=="string"&&(a=er.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var l=e.certs[a.subject.hash];er.util.isArray(l)||(l=[l]),l.push(a),e.certs[a.subject.hash]=l}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=er.pki.certificateFromPem(a));var l=n(a.subject);if(!l)return!1;er.util.isArray(l)||(l=[l]);for(var c=j.toDer(Wt.certificateToAsn1(a)).getBytes(),u=0;u<l.length;++u){var d=j.toDer(Wt.certificateToAsn1(l[u])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var c=e.certs[l];if(!er.util.isArray(c))a.push(c);else for(var u=0;u<c.length;++u)a.push(c[u])}return a},e.removeCertificate=function(a){var l;if(typeof a=="string"&&(a=er.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))return null;var c=n(a.subject);if(!er.util.isArray(c))return l=e.certs[a.subject.hash],delete e.certs[a.subject.hash],l;for(var u=j.toDer(Wt.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var p=j.toDer(Wt.certificateToAsn1(c[d])).getBytes();u===p&&(l=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],l};function n(a){return r(a),e.certs[a.hash]||null}s(n,"getBySubject");function r(a){if(!a.hash){var l=er.md.sha1.create();a.attributes=Wt.RDNAttributesAsArray(T4(a),l),a.hash=l.digest().toHex()}}if(s(r,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Wt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Wt.verifyCertificateChain=function(t,e,n){typeof n=="function"&&(n={verify:n}),n=n||{},e=e.slice(0);var r=e.slice(0),i=n.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,l=0;do{var c=e.shift(),u=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Wt.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(d=!0,u=c),u){var p=u;er.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(c)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Wt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Wt.certificateError.unknown_ca})}if(a===null&&u&&!c.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Wt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Wt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var v=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Wt.certificateError.bad_certificate}),a===null&&v!==null&&!v.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Wt.certificateError.bad_certificate}),a===null&&b!==null&&"pathLenConstraint"in v){var E=l-1;E>v.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Wt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=n.verify?n.verify(_,l,r):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Wt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!er.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++l}while(e.length>0);return!0}});var xle=G((IZn,iNe)=>{f();var ts=di();qm();y4();Ov();gle();hle();lp();fP();b4();ao();dG();var Ie=ts.asn1,_i=ts.pki,mP=iNe.exports=ts.pkcs12=ts.pkcs12||{},rNe={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},j4t={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},rNe,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},V4t={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},$4t={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},z4t={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function pP(t,e,n,r){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var l=t[o].safeBags[a];if(!(r!==void 0&&l.type!==r)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(n)>=0&&i.push(l)}}return i}s(pP,"_getBagsByAttribute");mP.pkcs12FromAsn1=function(t,e,n){typeof e=="string"?(n=e,e=!0):e===void 0&&(e=!0);var r={},i=[];if(!Ie.validate(t,j4t,r,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:r.version.charCodeAt(0),safeContents:[],getBags:s(function(v){var b={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=ts.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=pP(a.safeContents,null,null,v.bagType)),E!==void 0&&(b.localKeyId=pP(a.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(b.friendlyName=pP(a.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:s(function(v,b){return pP(a.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(v,b){return pP(a.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(r.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=r.version.charCodeAt(0),o}if(Ie.derToOid(r.contentType)!==_i.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(r.contentType),o}var l=r.content.value[0];if(l.tagClass!==Ie.Class.UNIVERSAL||l.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Cle(l),r.mac){var c=null,u=0,d=Ie.derToOid(r.macAlgorithm);switch(d){case _i.oids.sha1:c=ts.md.sha1.create(),u=20;break;case _i.oids.sha256:c=ts.md.sha256.create(),u=32;break;case _i.oids.sha384:c=ts.md.sha384.create(),u=48;break;case _i.oids.sha512:c=ts.md.sha512.create(),u=64;break;case _i.oids.md5:c=ts.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new ts.util.ByteBuffer(r.macSalt),m="macIterations"in r?parseInt(ts.util.bytesToHex(r.macIterations),16):1,h=mP.generateKey(n,p,3,m,u,c),g=ts.hmac.create();g.start(c,h),g.update(l.value);var y=g.getMac();if(y.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Y4t(a,l.value,e,n),a};function Cle(t){if(t.composed||t.constructed){for(var e=ts.util.createBuffer(),n=0;n<t.value.length;++n)e.putBytes(t.value[n].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(Cle,"_decodePkcs7Data");function Y4t(t,e,n,r){if(e=Ie.fromDer(e,n),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},l=[];if(!Ie.validate(o,rNe,a,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case _i.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Cle(p).value;break;case _i.oids.encryptedData:d=K4t(p,r),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=Ie.derToOid(a.contentType),c}u.safeBags=J4t(d,n,r),t.safeContents.push(u)}}s(Y4t,"_decodeAuthenticatedSafe");function K4t(t,e){var n={},r=[];if(!Ie.validate(t,ts.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var o=Ie.derToOid(n.contentType);if(o!==_i.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(n.encAlgorithm);var a=_i.pbe.getCipher(o,n.encParameter,e),l=Cle(n.encryptedContentAsn1),c=ts.util.createBuffer(l.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(K4t,"_decryptSafeContents");function J4t(t,e,n){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},l=[];if(!Ie.validate(o,V4t,a,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var u={type:Ie.derToOid(a.bagId),attributes:X4t(a.bagAttributes)};r.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case _i.oids.pkcs8ShroudedKeyBag:if(m=_i.decryptPrivateKeyInfo(m,n),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case _i.oids.keyBag:try{u.key=_i.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case _i.oids.certBag:d=z4t,p=s(function(){if(Ie.derToOid(a.certId)!==_i.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=_i.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(d!==void 0&&!Ie.validate(m,d,a,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}p()}return r}s(J4t,"_decodeSafeContents");function X4t(t){var e={};if(t!==void 0)for(var n=0;n<t.length;++n){var r={},i=[];if(!Ie.validate(t[n],$4t,r,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(r.oid);if(_i.oids[a]!==void 0){e[_i.oids[a]]=[];for(var l=0;l<r.values.length;++l)e[_i.oids[a]].push(r.values[l].value)}}return e}s(X4t,"_decodeBagAttributes");mP.toPkcs12Asn1=function(t,e,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,o;if(i!==null)i=ts.util.hexToBytes(i);else if(r.generateLocalKeyId)if(e){var a=ts.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=_i.certificateFromPem(a));var l=ts.md.sha1.create();l.update(Ie.toDer(_i.certificateToAsn1(a)).getBytes()),i=l.digest().getBytes()}else i=ts.random.getBytes(20);var c=[];i!==null&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,r.friendlyName)])])),c.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,c));var u=[],d=[];e!==null&&(ts.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=_i.certificateFromPem(e));var h=m===0?o:void 0,g=_i.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var v=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(v).getBytes())])]);u.push(b)}var E=null;if(t!==null){var _=_i.wrapRsaPrivateKey(_i.privateKeyToAsn1(t));n===null?E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_i.encryptPrivateKeyInfo(_,n,r)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[E]),D=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(D)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),Q;if(r.useMac){var l=ts.md.sha1.create(),Z=new ts.util.ByteBuffer(ts.random.getBytes(r.saltSize)),me=r.count,t=mP.generateKey(n,Z,3,me,20),te=ts.hmac.create();te.start(l,t),te.update(Ie.toDer(N).getBytes());var H=te.getMac();Q=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,H.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Z.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(me).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),Q])};mP.generateKey=ts.pbe.generatePkcs12Key});var ble=G((_Zn,oNe)=>{f();var Gv=di();qm();Ov();hle();k2();tG();xle();lG();fP();ao();dG();var vle=Gv.asn1,w4=oNe.exports=Gv.pki=Gv.pki||{};w4.pemToDer=function(t){var e=Gv.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Gv.util.createBuffer(e.body)};w4.privateKeyFromPem=function(t){var e=Gv.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=vle.fromDer(e.body);return w4.privateKeyFromAsn1(r)};w4.privateKeyToPem=function(t,e){var n={type:"RSA PRIVATE KEY",body:vle.toDer(w4.privateKeyToAsn1(t)).getBytes()};return Gv.pem.encode(n,{maxline:e})};w4.privateKeyInfoToPem=function(t,e){var n={type:"PRIVATE KEY",body:vle.toDer(t).getBytes()};return Gv.pem.encode(n,{maxline:e})}});var Sle=G((RZn,pNe)=>{f();var vt=di();qm();y4();JW();k2();ble();lp();b4();ao();var hG=s(function(t,e,n,r){var i=vt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),l=t.substr(0,a),c=t.substr(o,a),u=vt.util.createBuffer(),d=vt.hmac.create();n=e+n;var p=Math.ceil(r/16),m=Math.ceil(r/20);d.start("MD5",l);var h=vt.util.createBuffer();u.putBytes(n);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),h.putBuffer(d.digest());d.start("SHA1",c);var y=vt.util.createBuffer();u.clear(),u.putBytes(n);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),y.putBuffer(d.digest());return i.putBytes(vt.util.xorBytes(h.getBytes(),y.getBytes(),r)),i},"prf_TLS1"),Z4t=s(function(t,e,n){var r=vt.hmac.create();r.start("SHA1",t);var i=vt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},"hmac_sha1"),eRt=s(function(t,e,n){var r=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"deflate"),tRt=s(function(t,e,n){var r=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"inflate"),D0=s(function(t,e){var n=0;switch(e){case 1:n=t.getByte();break;case 2:n=t.getInt16();break;case 3:n=t.getInt24();break;case 4:n=t.getInt32();break}return vt.util.createBuffer(t.getBytes(n))},"readVector"),fp=s(function(t,e,n){t.putInt(n.length(),e<<3),t.putBuffer(n)},"writeVector"),z={};z.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};z.SupportedVersions=[z.Versions.TLS_1_1,z.Versions.TLS_1_0];z.Version=z.SupportedVersions[0];z.MaxFragment=15360;z.ConnectionEnd={server:0,client:1};z.PRFAlgorithm={tls_prf_sha256:0};z.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};z.CipherType={stream:0,block:1,aead:2};z.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};z.CompressionMethod={none:0,deflate:1};z.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};z.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};z.Alert={};z.Alert.Level={warning:1,fatal:2};z.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};z.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};z.CipherSuites={};z.getCipherSuite=function(t){var e=null;for(var n in z.CipherSuites){var r=z.CipherSuites[n];if(r.id[0]===t.charCodeAt(0)&&r.id[1]===t.charCodeAt(1)){e=r;break}}return e};z.handleUnexpected=function(t,e){var n=!t.open&&t.entity===z.ConnectionEnd.client;n||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})};z.handleHelloRequest=function(t,e,n){!t.handshaking&&t.handshakes>0&&(z.queue(t,z.createAlert(t,{level:z.Alert.Level.warning,description:z.Alert.Description.no_renegotiation})),z.flush(t)),t.process()};z.parseHelloMessage=function(t,e,n){var r=null,i=t.entity===z.ConnectionEnd.client;if(n<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(r={version:{major:o.getByte(),minor:o.getByte()},random:vt.util.createBuffer(o.getBytes(32)),session_id:D0(o,1),extensions:[]},i?(r.cipher_suite=o.getBytes(2),r.compression_method=o.getByte()):(r.cipher_suites=D0(o,2),r.compression_methods=D0(o,1)),a=n-(a-o.length()),a>0){for(var l=D0(o,2);l.length()>0;)r.extensions.push({type:[l.getByte(),l.getByte()],data:D0(l,2)});if(!i)for(var c=0;c<r.extensions.length;++c){var u=r.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var d=D0(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(D0(d,2).getBytes())}}}if(t.session.version&&(r.version.major!==t.session.version.major||r.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=z.getCipherSuite(r.cipher_suite);else for(var m=vt.util.createBuffer(r.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=z.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure},cipherSuite:vt.util.bytesToHex(r.cipher_suite)});i?t.session.compressionMethod=r.compression_method:t.session.compressionMethod=z.CompressionMethod.none}return r};z.createSecurityParameters=function(t,e){var n=t.entity===z.ConnectionEnd.client,r=e.random.bytes(),i=n?t.session.sp.client_random:r,o=n?r:z.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:z.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};z.handleServerHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){if(r.version.minor<=t.version.minor)t.version.minor=r.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});t.session.version=t.version;var i=r.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=lNe,t.session.resuming=!0,t.session.sp.server_random=r.random.bytes()):(t.expect=rRt,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.session.id=i,t.process()}};z.handleClientHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){var i=r.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==r.version.major||o.version.minor>r.version.minor)&&(o=null,i="")),i.length===0&&(i=vt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=r.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,l=1;l<z.SupportedVersions.length&&(a=z.SupportedVersions[l],!(a.minor<=r.version.minor));++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=wle,t.session.resuming=!0,t.session.sp.client_random=r.random.bytes()):(t.expect=t.verifyClient!==!1?uRt:Tle,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.open=!0,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHello(t)})),t.session.resuming?(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.pending=z.createConnectionState(t),t.state.current.write=t.state.pending.write,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))):(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)})),t.fail||(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerKeyExchange(t)})),t.verifyClient!==!1&&z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificateRequest(t)})),z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHelloDone(t)})))),z.flush(t),t.process()}};z.handleCertificate=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_list:D0(r,3)},o,a,l=[];try{for(;i.certificate_list.length()>0;)o=D0(i.certificate_list,3),a=vt.asn1.fromDer(o),o=vt.pki.certificateFromAsn1(a,!0),l.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var c=t.entity===z.ConnectionEnd.client;(c||t.verifyClient===!0)&&l.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}}):l.length===0?t.expect=c?sNe:Tle:(c?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],z.verifyCertificateChain(t,l)&&(t.expect=c?sNe:Tle)),t.process()};z.handleServerKeyExchange=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});t.expect=iRt,t.process()};z.handleClientKeyExchange=function(t,e,n){if(n<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});var r=e.fragment,i={enc_pre_master_secret:D0(r,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=vt.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==a.pre_master_secret.charCodeAt(0)||l.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=vt.random.getBytes(48)}t.expect=wle,t.session.clientCertificate!==null&&(t.expect=dRt),t.process()};z.handleCertificateRequest=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_types:D0(r,1),certificate_authorities:D0(r,2)};t.session.certificateRequest=i,t.expect=oRt,t.process()};z.handleCertificateVerify=function(t,e,n){if(n<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o={signature:D0(r,2).getBytes()},a=vt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure}})}t.expect=wle,t.process()};z.handleServerHelloDone=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.record_overflow}});if(t.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.insufficient_security}},i=0,o=t.verify(t,r.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!vt.util.isArray(o)?(o.message&&(r.message=o.message),o.alert&&(r.alert.description=o.alert)):typeof o=="number"&&(r.alert.description=o)),t.error(t,r)}t.session.certificateRequest!==null&&(e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)}),z.queue(t,e)),e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createClientKeyExchange(t)}),z.queue(t,e),t.expect=lRt;var a=s(function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createCertificateVerify(l,c)})),z.queue(l,z.createRecord(l,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),l.state.pending=z.createConnectionState(l),l.state.current.write=l.state.pending.write,z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createFinished(l)})),l.expect=lNe,z.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);z.getClientSignature(t,a)};z.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=t.entity===z.ConnectionEnd.client;(t.session.resuming&&n||!t.session.resuming&&!n)&&(t.state.pending=z.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&n||t.session.resuming&&!n)&&(t.state.pending=null),t.expect=n?sRt:fRt,t.process()};z.handleFinished=function(t,e,n){var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o=e.fragment.getBytes();r=vt.util.createBuffer(),r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest());var a=t.entity===z.ConnectionEnd.client,l=a?"server finished":"client finished",c=t.session.sp,u=12,d=hG;if(r=d(c.master_secret,l,r.getBytes(),u),r.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))),t.expect=a?aRt:pRt,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,z.flush(t),t.isConnected=!0,t.connected(t),t.process()};z.handleAlert=function(t,e){var n=e.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case z.Alert.Description.close_notify:i="Connection closed.";break;case z.Alert.Description.unexpected_message:i="Unexpected message.";break;case z.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case z.Alert.Description.decryption_failed:i="Decryption failed.";break;case z.Alert.Description.record_overflow:i="Record overflow.";break;case z.Alert.Description.decompression_failure:i="Decompression failed.";break;case z.Alert.Description.handshake_failure:i="Handshake failure.";break;case z.Alert.Description.bad_certificate:i="Bad certificate.";break;case z.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case z.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case z.Alert.Description.certificate_expired:i="Certificate expired.";break;case z.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case z.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case z.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case z.Alert.Description.access_denied:i="Access denied.";break;case z.Alert.Description.decode_error:i="Decode error.";break;case z.Alert.Description.decrypt_error:i="Decrypt error.";break;case z.Alert.Description.export_restriction:i="Export restriction.";break;case z.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case z.Alert.Description.insufficient_security:i="Insufficient security.";break;case z.Alert.Description.internal_error:i="Internal error.";break;case z.Alert.Description.user_canceled:i="User canceled.";break;case z.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===z.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===z.ConnectionEnd.client?"server":"client",alert:r}),t.process()};z.handleHandshake=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return t.fragmented=e,e.fragment=vt.util.createBuffer(),n.read-=4,t.process();t.fragmented=null,n.read-=4;var o=n.bytes(i+4);n.read+=4,r in mG[t.entity][t.expect]?(t.entity===z.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:vt.md.md5.create(),sha1:vt.md.sha1.create()}),r!==z.HandshakeType.hello_request&&r!==z.HandshakeType.certificate_verify&&r!==z.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),mG[t.entity][t.expect][r](t,e,i)):z.handleUnexpected(t,e)};z.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};z.handleHeartbeat=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt16(),o=n.getBytes(i);if(r===z.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();z.queue(t,z.createRecord(t,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response,o)})),z.flush(t)}else if(r===z.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,vt.util.createBuffer(o))}t.process()};var nRt=0,rRt=1,sNe=2,iRt=3,oRt=4,lNe=5,sRt=6,aRt=7,lRt=8,cRt=0,uRt=1,Tle=2,dRt=3,wle=4,fRt=5,pRt=6,$=z.handleUnexpected,cNe=z.handleChangeCipherSpec,mc=z.handleAlert,Fu=z.handleHandshake,uNe=z.handleApplicationData,hc=z.handleHeartbeat,_le=[];_le[z.ConnectionEnd.client]=[[$,mc,Fu,$,hc],[$,mc,Fu,$,hc],[$,mc,Fu,$,hc],[$,mc,Fu,$,hc],[$,mc,Fu,$,hc],[cNe,mc,$,$,hc],[$,mc,Fu,$,hc],[$,mc,Fu,uNe,hc],[$,mc,Fu,$,hc]];_le[z.ConnectionEnd.server]=[[$,mc,Fu,$,hc],[$,mc,Fu,$,hc],[$,mc,Fu,$,hc],[$,mc,Fu,$,hc],[cNe,mc,$,$,hc],[$,mc,Fu,$,hc],[$,mc,Fu,uNe,hc],[$,mc,Fu,$,hc]];var Hv=z.handleHelloRequest,mRt=z.handleServerHello,dNe=z.handleCertificate,aNe=z.handleServerKeyExchange,Ele=z.handleCertificateRequest,fG=z.handleServerHelloDone,fNe=z.handleFinished,mG=[];mG[z.ConnectionEnd.client]=[[$,$,mRt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Hv,$,$,$,$,$,$,$,$,$,$,dNe,aNe,Ele,fG,$,$,$,$,$,$],[Hv,$,$,$,$,$,$,$,$,$,$,$,aNe,Ele,fG,$,$,$,$,$,$],[Hv,$,$,$,$,$,$,$,$,$,$,$,$,Ele,fG,$,$,$,$,$,$],[Hv,$,$,$,$,$,$,$,$,$,$,$,$,$,fG,$,$,$,$,$,$],[Hv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Hv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,fNe],[Hv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Hv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var hRt=z.handleClientHello,gRt=z.handleClientKeyExchange,ARt=z.handleCertificateVerify;mG[z.ConnectionEnd.server]=[[$,hRt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,dNe,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,gRt,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,ARt,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,fNe],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];z.generateKeys=function(t,e){var n=hG,r=e.client_random+e.server_random;t.session.resuming||(e.master_secret=n(e.pre_master_secret,"master secret",r,48).bytes(),e.pre_master_secret=null),r=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===z.Versions.TLS_1_0.major&&t.version.minor===z.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=n(e.master_secret,"key expansion",r,i),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l};z.createConnectionState=function(t){var e=t.entity===z.ConnectionEnd.client,n=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),r={read:n(),write:n()};if(r.read.update=function(o,a){return r.read.cipherFunction(a,r.read)?r.read.compressFunction(o,a,r.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_record_mac}}),!o.fail},r.write.update=function(o,a){return r.write.compressFunction(o,a,r.write)?r.write.cipherFunction(a,r.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=z.generateKeys(t,i),r.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(r,t,i),i.compression_algorithm){case z.CompressionMethod.none:break;case z.CompressionMethod.deflate:r.read.compressFunction=tRt,r.write.compressFunction=eRt;break;default:throw new Error("Unsupported compression algorithm.")}}return r};z.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,n=vt.util.createBuffer();return n.putInt32(e),n.putBytes(vt.random.getBytes(28)),n};z.createRecord=function(t,e){if(!e.data)return null;var n={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return n};z.createAlert=function(t,e){var n=vt.util.createBuffer();return n.putByte(e.level),n.putByte(e.description),z.createRecord(t,{type:z.ContentType.alert,data:n})};z.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=vt.util.createBuffer(),n=0;n<t.cipherSuites.length;++n){var r=t.cipherSuites[n];e.putByte(r.id[0]),e.putByte(r.id[1])}var i=e.length(),o=vt.util.createBuffer();o.putByte(z.CompressionMethod.none);var a=o.length(),l=vt.util.createBuffer();if(t.virtualHost){var c=vt.util.createBuffer();c.putByte(0),c.putByte(0);var u=vt.util.createBuffer();u.putByte(0),fp(u,2,vt.util.createBuffer(t.virtualHost));var d=vt.util.createBuffer();fp(d,2,u),fp(c,2,d),l.putBuffer(c)}var p=l.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=vt.util.createBuffer();return g.putByte(z.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),fp(g,1,vt.util.createBuffer(m)),fp(g,2,e),fp(g,1,o),p>0&&fp(g,2,l),g};z.createServerHello=function(t){var e=t.session.id,n=e.length+1+2+4+28+2+1,r=vt.util.createBuffer();return r.putByte(z.HandshakeType.server_hello),r.putInt24(n),r.putByte(t.version.major),r.putByte(t.version.minor),r.putBytes(t.session.sp.server_random),fp(r,1,vt.util.createBuffer(e)),r.putByte(t.session.cipherSuite.id[0]),r.putByte(t.session.cipherSuite.id[1]),r.putByte(t.session.compressionMethod),r};z.createCertificate=function(t){var e=t.entity===z.ConnectionEnd.client,n=null;if(t.getCertificate){var r;e?r=t.session.certificateRequest:r=t.session.extensions.server_name.serverNameList,n=t.getCertificate(t,r)}var i=vt.util.createBuffer();if(n!==null)try{vt.util.isArray(n)||(n=[n]);for(var o=null,a=0;a<n.length;++a){var l=vt.pem.decode(n[a])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=vt.util.createBuffer(l.body);o===null&&(o=vt.asn1.fromDer(u.bytes(),!1));var d=vt.util.createBuffer();fp(d,3,u),i.putBuffer(d)}n=vt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var p=3+i.length(),m=vt.util.createBuffer();return m.putByte(z.HandshakeType.certificate),m.putInt24(p),fp(m,3,i),m};z.createClientKeyExchange=function(t){var e=vt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(vt.random.getBytes(46));var n=t.session.sp;n.pre_master_secret=e.getBytes();var r=t.session.serverCertificate.publicKey;e=r.encrypt(n.pre_master_secret);var i=e.length+2,o=vt.util.createBuffer();return o.putByte(z.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};z.createServerKeyExchange=function(t){var e=0,n=vt.util.createBuffer();return e>0&&(n.putByte(z.HandshakeType.server_key_exchange),n.putInt24(e)),n};z.getClientSignature=function(t,e){var n=vt.util.createBuffer();n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest()),n=n.getBytes(),t.getSignature=t.getSignature||function(r,i,o){var a=null;if(r.getPrivateKey)try{a=r.getPrivateKey(r,r.session.clientCertificate),a=vt.pki.privateKeyFromPem(a)}catch(l){r.error(r,{message:"Could not get private key.",cause:l,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}a===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):i=a.sign(i,null),o(r,i)},t.getSignature(t,n,e)};z.createCertificateVerify=function(t,e){var n=e.length+2,r=vt.util.createBuffer();return r.putByte(z.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(e.length),r.putBytes(e),r};z.createCertificateRequest=function(t){var e=vt.util.createBuffer();e.putByte(1);var n=vt.util.createBuffer();for(var r in t.caStore.certs){var i=t.caStore.certs[r],o=vt.pki.distinguishedNameToAsn1(i.subject),a=vt.asn1.toDer(o);n.putInt16(a.length()),n.putBuffer(a)}var l=1+e.length()+2+n.length(),c=vt.util.createBuffer();return c.putByte(z.HandshakeType.certificate_request),c.putInt24(l),fp(c,1,e),fp(c,2,n),c};z.createServerHelloDone=function(t){var e=vt.util.createBuffer();return e.putByte(z.HandshakeType.server_hello_done),e.putInt24(0),e};z.createChangeCipherSpec=function(){var t=vt.util.createBuffer();return t.putByte(1),t};z.createFinished=function(t){var e=vt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var n=t.entity===z.ConnectionEnd.client,r=t.session.sp,i=12,o=hG,a=n?"client finished":"server finished";e=o(r.master_secret,a,e.getBytes(),i);var l=vt.util.createBuffer();return l.putByte(z.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};z.createHeartbeat=function(t,e,n){typeof n>"u"&&(n=e.length);var r=vt.util.createBuffer();r.putByte(t),r.putInt16(n),r.putBytes(e);var i=r.length(),o=Math.max(16,i-n-3);return r.putBytes(vt.random.getBytes(o)),r};z.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===z.ContentType.handshake||e.type===z.ContentType.alert||e.type===z.ContentType.change_cipher_spec))){if(e.type===z.ContentType.handshake){var n=e.fragment.bytes();t.session.md5.update(n),t.session.sha1.update(n),n=null}var r;if(e.fragment.length()<=z.MaxFragment)r=[e];else{r=[];for(var i=e.fragment.bytes();i.length>z.MaxFragment;)r.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i.slice(0,z.MaxFragment))})),i=i.slice(z.MaxFragment);i.length>0&&r.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i)}))}for(var o=0;o<r.length&&!t.fail;++o){var a=r[o],l=t.state.current.write;l.update(t,a)&&t.records.push(a)}}};z.flush=function(t){for(var e=0;e<t.records.length;++e){var n=t.records[e];t.tlsData.putByte(n.type),t.tlsData.putByte(n.version.major),t.tlsData.putByte(n.version.minor),t.tlsData.putInt16(n.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Ile=s(function(t){switch(t){case!0:return!0;case vt.pki.certificateError.bad_certificate:return z.Alert.Description.bad_certificate;case vt.pki.certificateError.unsupported_certificate:return z.Alert.Description.unsupported_certificate;case vt.pki.certificateError.certificate_revoked:return z.Alert.Description.certificate_revoked;case vt.pki.certificateError.certificate_expired:return z.Alert.Description.certificate_expired;case vt.pki.certificateError.certificate_unknown:return z.Alert.Description.certificate_unknown;case vt.pki.certificateError.unknown_ca:return z.Alert.Description.unknown_ca;default:return z.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),yRt=s(function(t){switch(t){case!0:return!0;case z.Alert.Description.bad_certificate:return vt.pki.certificateError.bad_certificate;case z.Alert.Description.unsupported_certificate:return vt.pki.certificateError.unsupported_certificate;case z.Alert.Description.certificate_revoked:return vt.pki.certificateError.certificate_revoked;case z.Alert.Description.certificate_expired:return vt.pki.certificateError.certificate_expired;case z.Alert.Description.certificate_unknown:return vt.pki.certificateError.certificate_unknown;case z.Alert.Description.unknown_ca:return vt.pki.certificateError.unknown_ca;default:return vt.pki.certificateError.bad_certificate}},"_alertDescToCertError");z.verifyCertificateChain=function(t,e){try{var n={};for(var r in t.verifyOptions)n[r]=t.verifyOptions[r];n.verify=function(o,a,l){var c=Ile(o),u=t.verify(t,o,a,l);if(u!==!0){if(typeof u=="object"&&!vt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=yRt(u))}return u},vt.pki.verifyCertificateChain(t.caStore,e,n)}catch(o){var i=o;(typeof i!="object"||vt.util.isArray(i))&&(i={send:!0,alert:{level:z.Alert.Level.fatal,description:Ile(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:z.Alert.Level.fatal,description:Ile(i.error)}),t.error(t,i)}return!t.fail};z.createSessionCache=function(t,e){var n=null;if(t&&t.getSession&&t.setSession&&t.order)n=t;else{n={},n.cache=t||{},n.capacity=Math.max(e||100,1),n.order=[];for(var r in t)n.order.length<=e?n.order.push(r):delete t[r];n.getSession=function(i){var o=null,a=null;if(i?a=vt.util.bytesToHex(i):n.order.length>0&&(a=n.order[0]),a!==null&&a in n.cache){o=n.cache[a],delete n.cache[a];for(var l in n.order)if(n.order[l]===a){n.order.splice(l,1);break}}return o},n.setSession=function(i,o){if(n.order.length===n.capacity){var a=n.order.shift();delete n.cache[a]}var a=vt.util.bytesToHex(i);n.order.push(a),n.cache[a]=o}}return n};z.createConnection=function(t){var e=null;t.caStore?vt.util.isArray(t.caStore)?e=vt.pki.createCaStore(t.caStore):e=t.caStore:e=vt.pki.createCaStore();var n=t.cipherSuites||null;if(n===null){n=[];for(var r in z.CipherSuites)n.push(z.CipherSuites[r])}var i=t.server?z.ConnectionEnd.server:z.ConnectionEnd.client,o=t.sessionCache?z.createSessionCache(t.sessionCache):null,a={version:{major:z.Version.major,minor:z.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:n,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:vt.util.createBuffer(),tlsData:vt.util.createBuffer(),data:vt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===z.ConnectionEnd.client?"client":"server"),p.send&&(z.queue(d,z.createAlert(d,p.alert)),z.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:z.Version.major,minor:z.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===z.ConnectionEnd.client?nRt:cRt,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=z.createConnectionState(a)},a.reset();var l=s(function(d,p){var m=p.type-z.ContentType.change_cipher_spec,h=_le[d.entity][d.expect];m in h?h[m](d,p):z.handleUnexpected(d,p)},"_update"),c=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:vt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==z.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:vt.md.md5.create(),sha1:vt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=z.createRandom().getBytes(),a.open=!0,z.queue(a,z.createRecord(a,{type:z.ContentType.handshake,data:z.createClientHello(a)})),z.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&l(a,a.record)),p},a.prepare=function(d){return z.queue(a,z.createRecord(a,{type:z.ContentType.application_data,data:vt.util.createBuffer(d)})),z.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof vt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,z.queue(a,z.createRecord(a,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request,d,p)})),z.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,z.queue(a,z.createAlert(a,{level:z.Alert.Level.warning,description:z.Alert.Description.close_notify})),z.flush(a)),a.closed(a)),a.reset(d)},a};pNe.exports=vt.tls=vt.tls||{};for(pG in z)typeof z[pG]!="function"&&(vt.tls[pG]=z[pG]);var pG;vt.tls.prf_tls1=hG;vt.tls.hmac_sha1=Z4t;vt.tls.createSessionCache=z.createSessionCache;vt.tls.createConnection=z.createConnection});var gNe=G((DZn,hNe)=>{f();var jv=di();Qv();Sle();var pp=hNe.exports=jv.tls;pp.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=pp.BulkCipherAlgorithm.aes,t.cipher_type=pp.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=pp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:mNe};pp.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=pp.BulkCipherAlgorithm.aes,t.cipher_type=pp.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=pp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:mNe};function mNe(t,e,n){var r=e.entity===jv.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:jv.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},t.write.cipherState={init:!1,cipher:jv.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},t.read.cipherFunction=bRt,t.write.cipherFunction=CRt,t.read.macLength=t.write.macLength=n.mac_length,t.read.macFunction=t.write.macFunction=pp.hmac_sha1}s(mNe,"initConnectionState");function CRt(t,e){var n=!1,r=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(r),e.updateSequenceNumber();var i;t.version.minor===pp.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=jv.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=pp.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(xRt)&&(t.fragment=o.output,t.length=t.fragment.length(),n=!0),n}s(CRt,"encrypt_aes_cbc_sha1");function xRt(t,e,n){if(!n){var r=t-e.length()%t;e.fillWithByte(r-1,r)}return!0}s(xRt,"encrypt_aes_cbc_sha1_padding");function vRt(t,e,n){var r=!0;if(n){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)r=r&&e.at(a)==o;r&&e.truncate(o+1)}return r}s(vRt,"decrypt_aes_cbc_sha1_padding");function bRt(t,e){var n=!1,r;t.version.minor===pp.Versions.TLS_1_0.minor?r=e.cipherState.init?null:e.cipherState.iv:r=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:r}),i.update(t.fragment),n=i.finish(vRt);var o=e.macLength,a=jv.random.getBytesSync(o),l=i.output.length();l>=o?(t.fragment=i.output.getBytes(l-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=jv.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),n=ERt(e.macKey,a,c)&&n,n}s(bRt,"decrypt_aes_cbc_sha1");function ERt(t,e,n){var r=jv.hmac.create();return r.start("SHA1",t),r.update(e),e=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),e===n}s(ERt,"compareMacs")});var Ble=G((LZn,xNe)=>{f();var vs=di();Mg();ao();var hP=xNe.exports=vs.sha512=vs.sha512||{};vs.md.sha512=vs.md.algorithms.sha512=hP;var yNe=vs.sha384=vs.sha512.sha384=vs.sha512.sha384||{};yNe.create=function(){return hP.create("SHA-384")};vs.md.sha384=vs.md.algorithms.sha384=yNe;vs.sha512.sha256=vs.sha512.sha256||{create:s(function(){return hP.create("SHA-512/256")},"create")};vs.md["sha512/256"]=vs.md.algorithms["sha512/256"]=vs.sha512.sha256;vs.sha512.sha224=vs.sha512.sha224||{create:s(function(){return hP.create("SHA-512/224")},"create")};vs.md["sha512/224"]=vs.md.algorithms["sha512/224"]=vs.sha512.sha224;hP.create=function(t){if(CNe||IRt(),typeof t>"u"&&(t="SHA-512"),!(t in F2))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=F2[t],n=null,r=vs.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,u=0;u<c;++u)l.fullMessageLength.push(0);r=vs.util.createBuffer(),n=new Array(e.length);for(var u=0;u<e.length;++u)n[u]=e[u].slice(0);return l},l.start(),l.update=function(c,u){u==="utf8"&&(c=vs.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=l.fullMessageLength.length-1;p>=0;--p)l.fullMessageLength[p]+=d[1],d[1]=d[0]+(l.fullMessageLength[p]/4294967296>>>0),l.fullMessageLength[p]=l.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return r.putBytes(c),ANe(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),l},l.digest=function(){var c=vs.util.createBuffer();c.putBytes(r.bytes());var u=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=u&l.blockLength-1;c.putBytes(Rle.substr(0,l.blockLength-d));for(var p,m,h=l.fullMessageLength[0]*8,g=0;g<l.fullMessageLength.length-1;++g)p=l.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,c.putInt32(h>>>0),h=p>>>0;c.putInt32(h);for(var y=new Array(n.length),g=0;g<n.length;++g)y[g]=n[g].slice(0);ANe(y,i,c);var v=vs.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var g=0;g<b;++g)v.putInt32(y[g][0]),(g!==b-1||t!=="SHA-512/224")&&v.putInt32(y[g][1]);return v},l};var Rle=null,CNe=!1,kle=null,F2=null;function IRt(){Rle="\x80",Rle+=vs.util.fillString("\0",128),kle=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],F2={},F2["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],F2["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],F2["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],F2["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],CNe=!0}s(IRt,"_init");function ANe(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E,_,k,D,N,Q,Z,me,te,H,W,re,oe,V,q,Y,ee,de,ne,fe,pe=n.length();pe>=128;){for(V=0;V<16;++V)e[V][0]=n.getInt32()>>>0,e[V][1]=n.getInt32()>>>0;for(;V<80;++V)ee=e[V-2],q=ee[0],Y=ee[1],r=((q>>>19|Y<<13)^(Y>>>29|q<<3)^q>>>6)>>>0,i=((q<<13|Y>>>19)^(Y<<3|q>>>29)^(q<<26|Y>>>6))>>>0,ne=e[V-15],q=ne[0],Y=ne[1],o=((q>>>1|Y<<31)^(q>>>8|Y<<24)^q>>>7)>>>0,a=((q<<31|Y>>>1)^(q<<24|Y>>>8)^(q<<25|Y>>>7))>>>0,de=e[V-7],fe=e[V-16],Y=i+de[1]+a+fe[1],e[V][0]=r+de[0]+o+fe[0]+(Y/4294967296>>>0)>>>0,e[V][1]=Y>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],E=t[1][1],_=t[2][0],k=t[2][1],D=t[3][0],N=t[3][1],Q=t[4][0],Z=t[4][1],me=t[5][0],te=t[5][1],H=t[6][0],W=t[6][1],re=t[7][0],oe=t[7][1],V=0;V<80;++V)u=((Q>>>14|Z<<18)^(Q>>>18|Z<<14)^(Z>>>9|Q<<23))>>>0,d=((Q<<18|Z>>>14)^(Q<<14|Z>>>18)^(Z<<23|Q>>>9))>>>0,p=(H^Q&(me^H))>>>0,m=(W^Z&(te^W))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,c=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,h=(y&b|_&(y^b))>>>0,g=(v&E|k&(v^E))>>>0,Y=oe+d+m+kle[V][1]+e[V][1],r=re+u+p+kle[V][0]+e[V][0]+(Y/4294967296>>>0)>>>0,i=Y>>>0,Y=c+g,o=l+h+(Y/4294967296>>>0)>>>0,a=Y>>>0,re=H,oe=W,H=me,W=te,me=Q,te=Z,Y=N+i,Q=D+r+(Y/4294967296>>>0)>>>0,Z=Y>>>0,D=_,N=k,_=b,k=E,b=y,E=v,Y=i+a,y=r+o+(Y/4294967296>>>0)>>>0,v=Y>>>0;Y=t[0][1]+v,t[0][0]=t[0][0]+y+(Y/4294967296>>>0)>>>0,t[0][1]=Y>>>0,Y=t[1][1]+E,t[1][0]=t[1][0]+b+(Y/4294967296>>>0)>>>0,t[1][1]=Y>>>0,Y=t[2][1]+k,t[2][0]=t[2][0]+_+(Y/4294967296>>>0)>>>0,t[2][1]=Y>>>0,Y=t[3][1]+N,t[3][0]=t[3][0]+D+(Y/4294967296>>>0)>>>0,t[3][1]=Y>>>0,Y=t[4][1]+Z,t[4][0]=t[4][0]+Q+(Y/4294967296>>>0)>>>0,t[4][1]=Y>>>0,Y=t[5][1]+te,t[5][0]=t[5][0]+me+(Y/4294967296>>>0)>>>0,t[5][1]=Y>>>0,Y=t[6][1]+W,t[6][0]=t[6][0]+H+(Y/4294967296>>>0)>>>0,t[6][1]=Y>>>0,Y=t[7][1]+oe,t[7][0]=t[7][0]+re+(Y/4294967296>>>0)>>>0,t[7][1]=Y>>>0,pe-=128}}s(ANe,"_update")});var vNe=G(Dle=>{f();var TRt=di();qm();var Hl=TRt.asn1;Dle.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Dle.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Hl.Class.UNIVERSAL,type:Hl.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var NNe=G((UZn,PNe)=>{f();var gc=di();dP();lp();Ble();ao();var _Ne=vNe(),wRt=_Ne.publicKeyValidator,_Rt=_Ne.privateKeyValidator;typeof bNe>"u"&&(bNe=gc.jsbn.BigInteger);var bNe,Lle=gc.util.ByteBuffer,kd=typeof Buffer>"u"?Uint8Array:Buffer;gc.pki=gc.pki||{};PNe.exports=gc.pki.ed25519=gc.ed25519=gc.ed25519||{};var Si=gc.ed25519;Si.constants={};Si.constants.PUBLIC_KEY_BYTE_LENGTH=32;Si.constants.PRIVATE_KEY_BYTE_LENGTH=64;Si.constants.SEED_BYTE_LENGTH=32;Si.constants.SIGN_BYTE_LENGTH=64;Si.constants.HASH_BYTE_LENGTH=64;Si.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=gc.random.getBytesSync(Si.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Si.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Si.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=sy({message:e,encoding:"binary"});for(var n=new kd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=new kd(Si.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=e[i];return BRt(n,r),{publicKey:n,privateKey:r}};Si.privateKeyFromAsn1=function(t){var e={},n=[],r=gc.asn1.validate(t,_Rt,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=gc.asn1.derToOid(e.privateKeyOid),a=gc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey,c=sy({message:gc.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};Si.publicKeyFromAsn1=function(t){var e={},n=[],r=gc.asn1.validate(t,wRt,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=gc.asn1.derToOid(e.publicKeyOid),a=gc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return sy({message:l,encoding:"binary"})};Si.publicKeyFromPrivateKey=function(t){t=t||{};var e=sy({message:t.privateKey,encoding:"binary"});if(e.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new kd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=e[32+r];return n};Si.sign=function(t){t=t||{};var e=sy(t),n=sy({message:t.privateKey,encoding:"binary"});if(n.length===Si.constants.SEED_BYTE_LENGTH){var r=Si.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.SEED_BYTE_LENGTH+" or "+Si.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new kd(Si.constants.SIGN_BYTE_LENGTH+e.length);DRt(i,e,e.length,n);for(var o=new kd(Si.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Si.verify=function(t){t=t||{};var e=sy(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=sy({message:t.signature,encoding:"binary"});if(n.length!==Si.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Si.constants.SIGN_BYTE_LENGTH);var r=sy({message:t.publicKey,encoding:"binary"});if(r.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Si.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new kd(Si.constants.SIGN_BYTE_LENGTH+e.length),o=new kd(Si.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Si.constants.SIGN_BYTE_LENGTH;++a)i[a]=n[a];for(a=0;a<e.length;++a)i[a+Si.constants.SIGN_BYTE_LENGTH]=e[a];return PRt(o,i,i.length,r)>=0};function sy(t){var e=t.message;if(e instanceof Uint8Array||e instanceof kd)return e;var n=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,n);e=new Lle(e,n)}else if(!(e instanceof Lle))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new kd(e.length()),i=0;i<r.length;++i)r[i]=e.at(i);return r}s(sy,"messageToNativeBuffer");var Fle=br(),gG=br([1]),SRt=br([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),RRt=br([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ENe=br([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),INe=br([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Ple=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),kRt=br([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function gP(t,e){var n=gc.md.sha512.create(),r=new Lle(t);n.update(r.getBytes(e),"binary");var i=n.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new kd(Si.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(gP,"sha512");function BRt(t,e){var n=[br(),br(),br(),br()],r,i=gP(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Ule(n,i),Ole(t,n),r=0;r<32;++r)e[r+32]=t[r];return 0}s(BRt,"crypto_sign_keypair");function DRt(t,e,n,r){var i,o,a=new Float64Array(64),l=[br(),br(),br(),br()],c=gP(r,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=n+64;for(i=0;i<n;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var d=gP(t.subarray(32),n+32);for(Mle(d),Ule(l,d),Ole(t,l),i=32;i<64;++i)t[i]=r[i];var p=gP(t,n+64);for(Mle(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*c[o];return SNe(t.subarray(32),a),u}s(DRt,"crypto_sign");function PRt(t,e,n,r){var i,o,a=new kd(32),l=[br(),br(),br(),br()],c=[br(),br(),br(),br()];if(o=-1,n<64||NRt(c,r))return-1;for(i=0;i<n;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=r[i];var u=gP(t,n);if(Mle(u),BNe(l,c,u),Ule(c,e.subarray(32)),Qle(l,c),Ole(a,l),n-=64,RNe(e,0,a,0)){for(i=0;i<n;++i)t[i]=0;return-1}for(i=0;i<n;++i)t[i]=e[i+64];return o=n,o}s(PRt,"crypto_sign_open");function SNe(t,e){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)e[i]+=n-16*e[r]*Ple[i-(r-32)],n=e[i]+128>>8,e[i]-=n*256;e[i]+=n,e[r]=0}for(n=0,i=0;i<32;++i)e[i]+=n-(e[31]>>4)*Ple[i],n=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=n*Ple[i];for(r=0;r<32;++r)e[r+1]+=e[r]>>8,t[r]=e[r]&255}s(SNe,"modL");function Mle(t){for(var e=new Float64Array(64),n=0;n<64;++n)e[n]=t[n],t[n]=0;SNe(t,e)}s(Mle,"reduce");function Qle(t,e){var n=br(),r=br(),i=br(),o=br(),a=br(),l=br(),c=br(),u=br(),d=br();S4(n,t[1],t[0]),S4(d,e[1],e[0]),Vo(n,n,d),_4(r,t[0],t[1]),_4(d,e[0],e[1]),Vo(r,r,d),Vo(i,t[3],e[3]),Vo(i,i,RRt),Vo(o,t[2],e[2]),_4(o,o,o),S4(a,r,n),S4(l,o,i),_4(c,o,i),_4(u,r,n),Vo(t[0],a,l),Vo(t[1],u,c),Vo(t[2],c,l),Vo(t[3],a,u)}s(Qle,"add");function TNe(t,e,n){for(var r=0;r<4;++r)DNe(t[r],e[r],n)}s(TNe,"cswap");function Ole(t,e){var n=br(),r=br(),i=br();QRt(i,e[2]),Vo(n,e[0],i),Vo(r,e[1],i),AG(t,r),t[31]^=kNe(n)<<7}s(Ole,"pack");function AG(t,e){var n,r,i,o=br(),a=br();for(n=0;n<16;++n)a[n]=e[n];for(Nle(a),Nle(a),Nle(a),r=0;r<2;++r){for(o[0]=a[0]-65517,n=1;n<15;++n)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,DNe(a,o,1-i)}for(n=0;n<16;n++)t[2*n]=a[n]&255,t[2*n+1]=a[n]>>8}s(AG,"pack25519");function NRt(t,e){var n=br(),r=br(),i=br(),o=br(),a=br(),l=br(),c=br();return Vv(t[2],gG),LRt(t[1],e),M2(i,t[1]),Vo(o,i,SRt),S4(i,i,t[2]),_4(o,t[2],o),M2(a,o),M2(l,a),Vo(c,l,a),Vo(n,c,i),Vo(n,n,o),FRt(n,n),Vo(n,n,i),Vo(n,n,o),Vo(n,n,o),Vo(t[0],n,o),M2(r,t[0]),Vo(r,r,o),wNe(r,i)&&Vo(t[0],t[0],kRt),M2(r,t[0]),Vo(r,r,o),wNe(r,i)?-1:(kNe(t[0])===e[31]>>7&&S4(t[0],Fle,t[0]),Vo(t[3],t[0],t[1]),0)}s(NRt,"unpackneg");function LRt(t,e){var n;for(n=0;n<16;++n)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767}s(LRt,"unpack25519");function FRt(t,e){var n=br(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)M2(n,n),r!==1&&Vo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(FRt,"pow2523");function wNe(t,e){var n=new kd(32),r=new kd(32);return AG(n,t),AG(r,e),RNe(n,0,r,0)}s(wNe,"neq25519");function RNe(t,e,n,r){return MRt(t,e,n,r,32)}s(RNe,"crypto_verify_32");function MRt(t,e,n,r,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^n[r+o];return(1&a-1>>>8)-1}s(MRt,"vn");function kNe(t){var e=new kd(32);return AG(e,t),e[0]&1}s(kNe,"par25519");function BNe(t,e,n){var r,i;for(Vv(t[0],Fle),Vv(t[1],gG),Vv(t[2],gG),Vv(t[3],Fle),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,TNe(t,e,r),Qle(e,t),Qle(t,t),TNe(t,e,r)}s(BNe,"scalarmult");function Ule(t,e){var n=[br(),br(),br(),br()];Vv(n[0],ENe),Vv(n[1],INe),Vv(n[2],gG),Vo(n[3],ENe,INe),BNe(t,n,e)}s(Ule,"scalarbase");function Vv(t,e){var n;for(n=0;n<16;n++)t[n]=e[n]|0}s(Vv,"set25519");function QRt(t,e){var n=br(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)M2(n,n),r!==2&&r!==4&&Vo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(QRt,"inv25519");function Nle(t){var e,n,r=1;for(e=0;e<16;++e)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-r*65536;t[0]+=r-1+37*(r-1)}s(Nle,"car25519");function DNe(t,e,n){for(var r,i=~(n-1),o=0;o<16;++o)r=i&(t[o]^e[o]),t[o]^=r,e[o]^=r}s(DNe,"sel25519");function br(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;++e)n[e]=t[e];return n}s(br,"gf");function _4(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]+n[r]}s(_4,"A");function S4(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]-n[r]}s(S4,"Z");function M2(t,e){Vo(t,e,e)}s(M2,"S");function Vo(t,e,n){var r,i,o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,E=0,_=0,k=0,D=0,N=0,Q=0,Z=0,me=0,te=0,H=0,W=0,re=0,oe=0,V=0,q=0,Y=0,ee=0,de=0,ne=n[0],fe=n[1],pe=n[2],Be=n[3],Se=n[4],Ke=n[5],Fe=n[6],ft=n[7],Tt=n[8],Ct=n[9],bt=n[10],le=n[11],Oe=n[12],ye=n[13],tt=n[14],J=n[15];r=e[0],o+=r*ne,a+=r*fe,l+=r*pe,c+=r*Be,u+=r*Se,d+=r*Ke,p+=r*Fe,m+=r*ft,h+=r*Tt,g+=r*Ct,y+=r*bt,v+=r*le,b+=r*Oe,E+=r*ye,_+=r*tt,k+=r*J,r=e[1],a+=r*ne,l+=r*fe,c+=r*pe,u+=r*Be,d+=r*Se,p+=r*Ke,m+=r*Fe,h+=r*ft,g+=r*Tt,y+=r*Ct,v+=r*bt,b+=r*le,E+=r*Oe,_+=r*ye,k+=r*tt,D+=r*J,r=e[2],l+=r*ne,c+=r*fe,u+=r*pe,d+=r*Be,p+=r*Se,m+=r*Ke,h+=r*Fe,g+=r*ft,y+=r*Tt,v+=r*Ct,b+=r*bt,E+=r*le,_+=r*Oe,k+=r*ye,D+=r*tt,N+=r*J,r=e[3],c+=r*ne,u+=r*fe,d+=r*pe,p+=r*Be,m+=r*Se,h+=r*Ke,g+=r*Fe,y+=r*ft,v+=r*Tt,b+=r*Ct,E+=r*bt,_+=r*le,k+=r*Oe,D+=r*ye,N+=r*tt,Q+=r*J,r=e[4],u+=r*ne,d+=r*fe,p+=r*pe,m+=r*Be,h+=r*Se,g+=r*Ke,y+=r*Fe,v+=r*ft,b+=r*Tt,E+=r*Ct,_+=r*bt,k+=r*le,D+=r*Oe,N+=r*ye,Q+=r*tt,Z+=r*J,r=e[5],d+=r*ne,p+=r*fe,m+=r*pe,h+=r*Be,g+=r*Se,y+=r*Ke,v+=r*Fe,b+=r*ft,E+=r*Tt,_+=r*Ct,k+=r*bt,D+=r*le,N+=r*Oe,Q+=r*ye,Z+=r*tt,me+=r*J,r=e[6],p+=r*ne,m+=r*fe,h+=r*pe,g+=r*Be,y+=r*Se,v+=r*Ke,b+=r*Fe,E+=r*ft,_+=r*Tt,k+=r*Ct,D+=r*bt,N+=r*le,Q+=r*Oe,Z+=r*ye,me+=r*tt,te+=r*J,r=e[7],m+=r*ne,h+=r*fe,g+=r*pe,y+=r*Be,v+=r*Se,b+=r*Ke,E+=r*Fe,_+=r*ft,k+=r*Tt,D+=r*Ct,N+=r*bt,Q+=r*le,Z+=r*Oe,me+=r*ye,te+=r*tt,H+=r*J,r=e[8],h+=r*ne,g+=r*fe,y+=r*pe,v+=r*Be,b+=r*Se,E+=r*Ke,_+=r*Fe,k+=r*ft,D+=r*Tt,N+=r*Ct,Q+=r*bt,Z+=r*le,me+=r*Oe,te+=r*ye,H+=r*tt,W+=r*J,r=e[9],g+=r*ne,y+=r*fe,v+=r*pe,b+=r*Be,E+=r*Se,_+=r*Ke,k+=r*Fe,D+=r*ft,N+=r*Tt,Q+=r*Ct,Z+=r*bt,me+=r*le,te+=r*Oe,H+=r*ye,W+=r*tt,re+=r*J,r=e[10],y+=r*ne,v+=r*fe,b+=r*pe,E+=r*Be,_+=r*Se,k+=r*Ke,D+=r*Fe,N+=r*ft,Q+=r*Tt,Z+=r*Ct,me+=r*bt,te+=r*le,H+=r*Oe,W+=r*ye,re+=r*tt,oe+=r*J,r=e[11],v+=r*ne,b+=r*fe,E+=r*pe,_+=r*Be,k+=r*Se,D+=r*Ke,N+=r*Fe,Q+=r*ft,Z+=r*Tt,me+=r*Ct,te+=r*bt,H+=r*le,W+=r*Oe,re+=r*ye,oe+=r*tt,V+=r*J,r=e[12],b+=r*ne,E+=r*fe,_+=r*pe,k+=r*Be,D+=r*Se,N+=r*Ke,Q+=r*Fe,Z+=r*ft,me+=r*Tt,te+=r*Ct,H+=r*bt,W+=r*le,re+=r*Oe,oe+=r*ye,V+=r*tt,q+=r*J,r=e[13],E+=r*ne,_+=r*fe,k+=r*pe,D+=r*Be,N+=r*Se,Q+=r*Ke,Z+=r*Fe,me+=r*ft,te+=r*Tt,H+=r*Ct,W+=r*bt,re+=r*le,oe+=r*Oe,V+=r*ye,q+=r*tt,Y+=r*J,r=e[14],_+=r*ne,k+=r*fe,D+=r*pe,N+=r*Be,Q+=r*Se,Z+=r*Ke,me+=r*Fe,te+=r*ft,H+=r*Tt,W+=r*Ct,re+=r*bt,oe+=r*le,V+=r*Oe,q+=r*ye,Y+=r*tt,ee+=r*J,r=e[15],k+=r*ne,D+=r*fe,N+=r*pe,Q+=r*Be,Z+=r*Se,me+=r*Ke,te+=r*Fe,H+=r*ft,W+=r*Tt,re+=r*Ct,oe+=r*bt,V+=r*le,q+=r*Oe,Y+=r*ye,ee+=r*tt,de+=r*J,o+=38*D,a+=38*N,l+=38*Q,c+=38*Z,u+=38*me,d+=38*te,p+=38*H,m+=38*W,h+=38*re,g+=38*oe,y+=38*V,v+=38*q,b+=38*Y,E+=38*ee,_+=38*de,i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=v,t[12]=b,t[13]=E,t[14]=_,t[15]=k}s(Vo,"M")});var QNe=G((GZn,MNe)=>{f();var P0=di();ao();lp();dP();MNe.exports=P0.kem=P0.kem||{};var LNe=P0.jsbn.BigInteger;P0.kem.rsa={};P0.kem.rsa.create=function(t,e){e=e||{};var n=e.prng||P0.random,r={};return r.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),l;do l=new LNe(P0.util.bytesToHex(n.getBytesSync(a)),16).mod(i.n);while(l.compareTo(LNe.ONE)<=0);l=P0.util.hexToBytes(l.toString(16));var c=a-l.length;c>0&&(l=P0.util.fillString("\0",c)+l);var u=i.encrypt(l,"NONE"),d=t.generate(l,o);return{encapsulation:u,key:d}},r.decrypt=function(i,o,a){var l=i.decrypt(o,"NONE");return t.generate(l,a)},r};P0.kem.kdf1=function(t,e){FNe(this,t,0,e||t.digestLength)};P0.kem.kdf2=function(t,e){FNe(this,t,1,e||t.digestLength)};function FNe(t,e,n,r){t.generate=function(i,o){for(var a=new P0.util.ByteBuffer,l=Math.ceil(o/r)+n,c=new P0.util.ByteBuffer,u=n;u<l;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(r))}return a.truncate(a.length()-o),a.getBytes()}}s(FNe,"_createKDF")});var WNe=G((VZn,qNe)=>{f();var Mi=di();ao();qNe.exports=Mi.log=Mi.log||{};Mi.log.levels=["none","error","warning","info","debug","verbose","max"];var yG={},Gle=[],yP=null;Mi.log.LEVEL_LOCKED=2;Mi.log.NO_LEVEL_CHECK=4;Mi.log.INTERPOLATE=8;for(jg=0;jg<Mi.log.levels.length;++jg)qle=Mi.log.levels[jg],yG[qle]={index:jg,name:qle.toUpperCase()};var qle,jg;Mi.log.logMessage=function(t){for(var e=yG[t.level].index,n=0;n<Gle.length;++n){var r=Gle[n];if(r.flags&Mi.log.NO_LEVEL_CHECK)r.f(t);else{var i=yG[r.level].index;e<=i&&r.f(r,t)}}};Mi.log.prepareStandard=function(t){"standard"in t||(t.standard=yG[t.level].name+" ["+t.category+"] "+t.message)};Mi.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Mi.util.format.apply(this,e)}};Mi.log.prepareStandardFull=function(t){"standardFull"in t||(Mi.log.prepareStandard(t),t.standardFull=t.standard)};for(Wle=["error","warning","info","debug","verbose"],jg=0;jg<Wle.length;++jg)(function(e){Mi.log[e]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:n,message:r,arguments:i};Mi.log.logMessage(o)}})(Wle[jg]);var Wle,jg;Mi.log.makeLogger=function(t){var e={flags:0,f:t};return Mi.log.setLevel(e,"none"),e};Mi.log.setLevel=function(t,e){var n=!1;if(t&&!(t.flags&Mi.log.LEVEL_LOCKED))for(var r=0;r<Mi.log.levels.length;++r){var i=Mi.log.levels[r];if(e==i){t.level=e,n=!0;break}}return n};Mi.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Mi.log.LEVEL_LOCKED:t.flags&=~Mi.log.LEVEL_LOCKED};Mi.log.addLogger=function(t){Gle.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(ONe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},CP=s(function(t,e){Mi.log.prepareStandard(e);var n=ONe[e.level],r=[e.standard];r=r.concat(e.arguments.slice()),n.apply(console,r)},"f"),R4=Mi.log.makeLogger(CP)):(CP=s(function(e,n){Mi.log.prepareStandardFull(n),console.log(n.standardFull)},"f"),R4=Mi.log.makeLogger(CP)),Mi.log.setLevel(R4,"debug"),Mi.log.addLogger(R4),yP=R4):console={log:s(function(){},"log")};var R4,ONe,CP;yP!==null&&typeof window<"u"&&window.location&&(AP=new URL(window.location.href).searchParams,AP.has("console.level")&&Mi.log.setLevel(yP,AP.get("console.level").slice(-1)[0]),AP.has("console.lock")&&(UNe=AP.get("console.lock").slice(-1)[0],UNe=="true"&&Mi.log.lock(yP)));var AP,UNe;Mi.log.consoleLogger=yP});var HNe=G((YZn,GNe)=>{f();GNe.exports=Mg();JW();b4();nle();Ble()});var $Ne=G((JZn,VNe)=>{f();var Kt=di();Qv();qm();cP();Ov();k2();gle();lp();ao();dG();var Re=Kt.asn1,Mu=VNe.exports=Kt.pkcs7=Kt.pkcs7||{};Mu.messageFromPem=function(t){var e=Kt.pem.decode(t)[0];if(e.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=Re.fromDer(e.body);return Mu.messageFromAsn1(r)};Mu.messageToPem=function(t,e){var n={type:"PKCS7",body:Re.toDer(t.toAsn1()).getBytes()};return Kt.pem.encode(n,{maxline:e})};Mu.messageFromAsn1=function(t){var e={},n=[];if(!Re.validate(t,Mu.asn1.contentInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=Re.derToOid(e.contentType),o;switch(i){case Kt.pki.oids.envelopedData:o=Mu.createEnvelopedData();break;case Kt.pki.oids.encryptedData:o=Mu.createEncryptedData();break;case Kt.pki.oids.signedData:o=Mu.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Mu.createSignedData=function(){var t=null;return t={type:Kt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(r){if(jle(t,r,Mu.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Kt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var r=[],i=0;i<t.certificates.length;++i)r.push(Kt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return r.length>0&&a.value[0].value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,r)),o.length>0&&a.value[0].value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,t.signerInfos)),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(r){var i=r.issuer,o=r.serialNumber;if(r.certificate){var a=r.certificate;typeof a=="string"&&(a=Kt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var l=r.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Kt.pki.privateKeyFromPem(l));var c=r.digestAlgorithm||Kt.pki.oids.sha1;switch(c){case Kt.pki.oids.sha1:case Kt.pki.oids.sha256:case Kt.pki.oids.sha384:case Kt.pki.oids.sha512:case Kt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=r.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===Kt.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===Kt.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Kt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(r){if(r=r||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(Kt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Kt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Kt.util.encodeUtf8(t.content)),r.detached?t.detachedContent=Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();n(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(r){typeof r=="string"&&(r=Kt.pki.certificateFromPem(r)),t.certificates.push(r)},"addCertificate"),addCertificateRevokationList:s(function(r){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var r={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in r||(r[a]=Kt.md[Kt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=r[a]:o.md=Kt.md[Kt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in r)t.digestAlgorithmIdentifiers.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(a).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")]));return r}s(e,"addDigestAlgorithmIds");function n(r){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Re.derToOid(t.contentInfo.value[0].value),a=Re.toDer(i);a.getByte(),Re.getBerValueLength(a),a=a.getBytes();for(var l in r)r[l].start().update(a);for(var c=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==Kt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===Kt.pki.oids.messageDigest?h.value=r[d.digestAlgorithm].digest():h.type===Kt.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push(Hle(h)),d.authenticatedAttributesAsn1.value.push(Hle(h))}a=Re.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=HRt(t.signers)}s(n,"addSignerInfos")};Mu.createEncryptedData=function(){var t=null;return t={type:Kt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){jle(t,e,Mu.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),jNe(t)},"decrypt")},t};Mu.createEnvelopedData=function(){var t=null;return t={type:Kt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var n=jle(t,e,Mu.asn1.envelopedDataValidator);t.recipients=qRt(n.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,WRt(t.recipients)),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,jRt(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var n=e.issuer.attributes,r=0;r<t.recipients.length;++r){var i=t.recipients[r],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===n.length){for(var a=!0,l=0;l<n.length;++l)if(o[l].type!==n[l].type||o[l].value!==n[l].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,n){if(t.encryptedContent.key===void 0&&e!==void 0&&n!==void 0)switch(e.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:case Kt.pki.oids.desCBC:var r=n.decrypt(e.encryptedContent.content);t.encryptedContent.key=Kt.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}jNe(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Kt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,n){if(t.encryptedContent.content===void 0){n=n||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var r,i,o;switch(n){case Kt.pki.oids["aes128-CBC"]:r=16,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes192-CBC"]:r=24,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes256-CBC"]:r=32,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["des-EDE3-CBC"]:r=24,i=8,o=Kt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(e===void 0)e=Kt.util.createBuffer(Kt.random.getBytes(r));else if(e.length()!=r)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+r+".");t.encryptedContent.algorithm=n,t.encryptedContent.key=e,t.encryptedContent.parameter=Kt.util.createBuffer(Kt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var c=t.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}},"encrypt")},t};function ORt(t){var e={},n=[];if(!Re.validate(t,Mu.asn1.recipientInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:e.version.charCodeAt(0),issuer:Kt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Kt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Re.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(ORt,"_recipientFromAsn1");function URt(t){return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.encryptedContent.algorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")]),Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(URt,"_recipientToAsn1");function qRt(t){for(var e=[],n=0;n<t.length;++n)e.push(ORt(t[n]));return e}s(qRt,"_recipientsFromAsn1");function WRt(t){for(var e=[],n=0;n<t.length;++n)e.push(URt(t[n]));return e}s(WRt,"_recipientsToAsn1");function GRt(t){var e=Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.digestAlgorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.signatureAlgorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")])),e.value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var n=Re.create(Re.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<t.unauthenticatedAttributes.length;++r){var i=t.unauthenticatedAttributes[r];n.values.push(Hle(i))}e.value.push(n)}return e}s(GRt,"_signerToAsn1");function HRt(t){for(var e=[],n=0;n<t.length;++n)e.push(GRt(t[n]));return e}s(HRt,"_signersToAsn1");function Hle(t){var e;if(t.type===Kt.pki.oids.contentType)e=Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.value).getBytes());else if(t.type===Kt.pki.oids.messageDigest)e=Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Kt.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Re.utcTimeToDate(i):i=Re.generalizedTimeToDate(i):i=new Date(o)}i>=n&&i<r?e=Re.create(Re.Class.UNIVERSAL,Re.Type.UTCTIME,!1,Re.dateToUtcTime(i)):e=Re.create(Re.Class.UNIVERSAL,Re.Type.GENERALIZEDTIME,!1,Re.dateToGeneralizedTime(i))}return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,[e])])}s(Hle,"_attributeToAsn1");function jRt(t){return[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(Kt.pki.oids.data).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.algorithm).getBytes()),t.parameter?Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(jRt,"_encryptedContentToAsn1");function jle(t,e,n){var r={},i=[];if(!Re.validate(e,n,r,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Re.derToOid(r.contentType);if(a!==Kt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var l="";if(Kt.util.isArray(r.encryptedContent))for(var c=0;c<r.encryptedContent.length;++c){if(r.encryptedContent[c].type!==Re.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=r.encryptedContent[c].value}else l=r.encryptedContent;t.encryptedContent={algorithm:Re.derToOid(r.encAlgorithm),parameter:Kt.util.createBuffer(r.encParameter.value),content:Kt.util.createBuffer(l)}}if(r.content){var l="";if(Kt.util.isArray(r.content))for(var c=0;c<r.content.length;++c){if(r.content[c].type!==Re.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=r.content[c].value}else l=r.content;t.content=Kt.util.createBuffer(l)}return t.version=r.version.charCodeAt(0),t.rawCapture=r,r}s(jle,"_fromAsn1");function jNe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Kt.pki.oids["aes128-CBC"]:case Kt.pki.oids["aes192-CBC"]:case Kt.pki.oids["aes256-CBC"]:e=Kt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Kt.pki.oids.desCBC:case Kt.pki.oids["des-EDE3-CBC"]:e=Kt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(jNe,"_decryptContent")});var YNe=G((eer,zNe)=>{f();var Za=di();Qv();y4();JW();b4();ao();var xG=zNe.exports=Za.ssh=Za.ssh||{};xG.privateKeyToPutty=function(t,e,n){n=n||"",e=e||"";var r="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+r+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+n+`\r
`;var a=Za.util.createBuffer();k4(a,r),Vg(a,t.e),Vg(a,t.n);var l=Za.util.encode64(a.bytes(),64),c=Math.floor(l.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=l;var u=Za.util.createBuffer();Vg(u,t.d),Vg(u,t.p),Vg(u,t.q),Vg(u,t.qInv);var d;if(!e)d=Za.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=CG(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=Za.util.createBuffer();h.putBuffer(CG("\0\0\0\0",e)),h.putBuffer(CG("\0\0\0",e));var g=Za.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(Za.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),d=Za.util.encode64(y.bytes(),64)}c=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=d;var v=CG("putty-private-key-file-mac-key",e),b=Za.util.createBuffer();k4(b,r),k4(b,i),k4(b,n),b.putInt32(a.length()),b.putBuffer(a),b.putInt32(u.length()),b.putBuffer(u);var E=Za.hmac.create();return E.start("sha1",v),E.update(b.bytes()),o+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,o};xG.publicKeyToOpenSSH=function(t,e){var n="ssh-rsa";e=e||"";var r=Za.util.createBuffer();return k4(r,n),Vg(r,t.e),Vg(r,t.n),n+" "+Za.util.encode64(r.bytes())+" "+e};xG.privateKeyToOpenSSH=function(t,e){return e?Za.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Za.pki.privateKeyToPem(t)};xG.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||Za.md.md5.create(),r="ssh-rsa",i=Za.util.createBuffer();k4(i,r),Vg(i,t.e),Vg(i,t.n),n.start(),n.update(i.getBytes());var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function Vg(t,e){var n=e.toString(16);n[0]>="8"&&(n="00"+n);var r=Za.util.hexToBytes(n);t.putInt32(r.length),t.putBytes(r)}s(Vg,"_addBigIntegerToBuffer");function k4(t,e){t.putInt32(e.length),t.putString(e)}s(k4,"_addStringToBuffer");function CG(){for(var t=Za.md.sha1.create(),e=arguments.length,n=0;n<e;++n)t.update(arguments[n]);return t.digest()}s(CG,"_sha1")});var JNe=G((rer,KNe)=>{f();KNe.exports=di();Qv();gNe();qm();HW();cP();NNe();y4();QNe();WNe();HNe();Ale();tG();k2();dle();xle();$Ne();ble();ple();rle();lG();lp();sle();YNe();Sle();ao()});var eLe=G(Q2=>{"use strict";f();Object.defineProperty(Q2,"__esModule",{value:!0});Q2.convert=Q2.Format=void 0;var xP=JNe(),$v;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})($v=Q2.Format||(Q2.Format={}));function XNe(t){var e=xP.pki.pemToDer(t),n=xP.asn1,r=n.fromDer(e.data.toString("binary")).value[0].value,i=r[0],o=i.tagClass===n.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=r.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(XNe,"myASN");function VRt(t){var e=XNe(t),n=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),r=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(n),"Valid	".concat(r),String(t)].join(`
`)}s(VRt,"txtFormat");function ZNe(t,e){switch(e){case $v.der:return xP.pki.pemToDer(t);case $v.pem:return t;case $v.txt:return VRt(t);case $v.asn1:return XNe(t);case $v.fingerprint:var n=xP.md.sha1.create(),r=ZNe(t,$v.der);return n.update(r.getBytes()),n.digest().toHex();case $v.x509:return xP.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(ZNe,"convert");Q2.convert=ZNe});var sLe=G(Bd=>{"use strict";f();var zv=Bd&&Bd.__assign||function(){return zv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zv.apply(this,arguments)},vG=Bd&&Bd.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.convert=Bd.Format=Bd.addToGlobalAgent=Bd.get=void 0;var Vle=require("https"),$Rt=require("tls"),tLe=require("child_process"),nLe=L6e(),ay=eLe();Object.defineProperty(Bd,"Format",{enumerable:!0,get:s(function(){return ay.Format},"get")});Object.defineProperty(Bd,"convert",{enumerable:!0,get:s(function(){return ay.convert},"get")});var rLe=process.platform==="darwin",iLe=Vle.globalAgent,EG={keychain:"all",unique:!0,excludeBundled:!0,format:ay.Format.pem};function oLe(t){if(t===void 0&&(t=EG),!rLe)return[];t=zv(zv({},EG),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,n=["find-certificate","-a","-p"],r=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,tLe.spawnSync)("/usr/bin/security",n.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});r=vG(vG([],r,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,tLe.spawnSync)("/usr/bin/security",n).stdout.toString().split(e).map(function(u){return u.trim()});r=vG(vG([],r,!0),a,!0)}if(t.unique||t.excludeBundled){var l=r.map(function(u){return(0,ay.convert)(u,ay.Format.fingerprint)}),c=t.excludeBundled?$Rt.rootCertificates.map(function(u){return(0,ay.convert)(u,ay.Format.fingerprint)}):[];r=r.filter(function(u,d){var p=l[d];return!(t.unique&&d!==l.indexOf(p)||t.excludeBundled&&c.includes(p))})}return r.map(function(u){return(0,ay.convert)(u,t.format)})}s(oLe,"get");Bd.get=oLe;var bG=iLe.options.ca,zRt=s(function(t){if(t===void 0&&(t=EG),!!rLe){var e;Array.isArray(bG)?e=Array.from(bG):e=typeof bG<"u"?[bG]:[],oLe(zv(zv(zv({},EG),t),{format:ay.Format.pem,excludeBundled:!1})).forEach(function(n){return e.push(n)}),iLe.options.ca=e,Vle.Agent=function(n){return function(r){var i=typeof r<"u"?zv({},r):{};return typeof i.ca>"u"&&(i.ca=e),n.call(this,i)}}(Vle.Agent),(0,nLe.setGlobalDispatcher)(new nLe.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Bd.addToGlobalAgent=zRt});var aLe=G((der,$le)=>{f();function YRt(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var n=typeof __webpack_require__=="function"?__non_webpack_require__:require;let r=n(e(__dirname,"crypt32.node")),i=[],o=new r.Crypt32;try{let a;for(;a=o.next();){let l=new t(a);i.push(l.toString())}}finally{o.done()}return Array.from(new Set(i))}s(YRt,"all");process.platform!=="win32"?$le.exports.all=()=>[]:$le.exports.all=YRt});var gLe=G((yer,hLe)=>{"use strict";f();function mLe(t,e,n){let r=e[n];if(t==null&&r.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${r.name}\` missing`);let i=typeof t;if(r.type&&i!==r.type){if(r.required===!1&&e.slice(n).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${r.name}\`, expected \`${r.type}\` but found \`${typeof t}\``)}return!0}s(mLe,"validateParameter");function JRt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(JRt,"hasOwnProperty");function XRt(t,e){return function(){let n=Array.prototype.slice.call(arguments),r=[];for(let o=0,a=0;o<e.length;++o,++a){let l=e[o],c=n[a];JRt(l,"default")&&c==null&&(c=l.default),l.type==="object"&&l.default!=null&&(c=Object.assign({},l.default,c)),l.name==="options"&&(typeof c=="function"||c==null)&&(c={}),mLe(c,e,o)?r.push(c):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{r.push((l,c)=>{if(l)return a(l);o(c)}),t.apply(this,r)});t.apply(this,r)}}s(XRt,"defineOperation");hLe.exports={defineOperation:XRt,validateParameter:mLe}});var nce=G((ver,CLe)=>{"use strict";f();var P4=Ete()("kerberos"),D4=P4.KerberosClient,ALe=P4.KerberosServer,Yv=gLe().defineOperation,ZRt=1,e3t=2,t3t=4,n3t=8,r3t=16,i3t=32,o3t=64,s3t=128,a3t=256,yLe=0,l3t=9,c3t=6;D4.prototype.step=Yv(D4.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);D4.prototype.wrap=Yv(D4.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);D4.prototype.unwrap=Yv(D4.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);ALe.prototype.step=Yv(ALe.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var u3t=Yv(P4.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),d3t=Yv(P4.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),f3t=Yv(P4.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:yLe}},{name:"callback",type:"function",required:!1}]),p3t=Yv(P4.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);CLe.exports={initializeClient:f3t,initializeServer:p3t,principalDetails:d3t,checkPassword:u3t,GSS_C_DELEG_FLAG:ZRt,GSS_C_MUTUAL_FLAG:e3t,GSS_C_REPLAY_FLAG:t3t,GSS_C_SEQUENCE_FLAG:n3t,GSS_C_CONF_FLAG:r3t,GSS_C_INTEG_FLAG:i3t,GSS_C_ANON_FLAG:o3t,GSS_C_PROT_READY_FLAG:s3t,GSS_C_TRANS_FLAG:a3t,GSS_C_NO_OID:yLe,GSS_MECH_OID_KRB5:l3t,GSS_MECH_OID_SPNEGO:c3t}});var xLe=G((Eer,m3t)=>{m3t.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var bLe=G((Ier,vLe)=>{"use strict";f();var h3t=require("dns"),g3t=nce(),rce=class{static{s(this,"MongoAuthProcess")}constructor(e,n,r,i){i=i||{},this.host=e,this.port=n,this.serviceName=r||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=A3t(this),this.retries=10}init(e,n,r){let i=this;this.username=e,this.password=n;function o(a,l,c){if(!a)return c();h3t.resolveCname(l,(u,d)=>{if(u)return c(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),c()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return r(a);let l={};n!=null&&Object.assign(l,{user:e,password:n});let c=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;g3t.initializeClient(c,l,(u,d)=>{if(u)return r(u,null);i.client=d,r(null,d)})})}transition(e,n){if(this._transition==null)return n(new Error("Transition finished"));this._transition(e,n)}};function A3t(t){return(e,n)=>{t.client.step("",(r,i)=>{if(r)return n(r);t._transition=y3t(t),n(null,i)})}}s(A3t,"firstTransition");function y3t(t){return(e,n)=>{t.client.step(e,(r,i)=>{if(r&&t.retries===0)return n(r);if(r)return t.retries=t.retries-1,t.transition(e,n);t._transition=C3t(t),n(null,i||"")})}}s(y3t,"secondTransition");function C3t(t){return(e,n)=>{t.client.unwrap(e,(r,i)=>{if(r)return n(r,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return n(o,!1);t._transition=x3t(t),n(null,a)})})}}s(C3t,"thirdTransition");function x3t(t){return(e,n)=>{t._transition=null,n(null,!0)}}s(x3t,"fourthTransition");vLe.exports={MongoAuthProcess:rce}});var ILe=G((_er,vP)=>{"use strict";f();var ELe=nce();vP.exports=ELe;vP.exports.Kerberos=ELe;vP.exports.version=xLe().version;vP.exports.processes={MongoAuthProcess:bLe().MongoAuthProcess}});var JLe=G(Cce=>{"use strict";f();Object.defineProperty(Cce,"__esModule",{value:!0});Cce.assertNever=X3t;function X3t(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(X3t,"assertNever")});var BP=G(uy=>{"use strict";f();Object.defineProperty(uy,"__esModule",{value:!0});uy.ChatCompletionContentPartOpaque=uy.ChatCompletionContentPartKind=uy.ChatRole=void 0;var Z3t=JLe(),WG;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(WG||(uy.ChatRole=WG={}));(function(t){function e(n){switch(n){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,Z3t.assertNever)(n,`unknown chat role ${n}}`)}}s(e,"display"),t.display=e})(WG||(uy.ChatRole=WG={}));var XLe;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(XLe||(uy.ChatCompletionContentPartKind=XLe={}));var ZLe;(function(t){function e(n,r){return!n.scope||(n.scope&r)!==0}s(e,"usableIn"),t.usableIn=e})(ZLe||(uy.ChatCompletionContentPartOpaque=ZLe={}))});var xce=G(Xg=>{"use strict";f();Object.defineProperty(Xg,"__esModule",{value:!0});Xg.BaseTokensPerName=Xg.BaseTokensPerMessage=Xg.BaseTokensPerCompletion=Xg.ChatRole=void 0;var eFe;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(eFe||(Xg.ChatRole=eFe={}));Xg.BaseTokensPerCompletion=3;Xg.BaseTokensPerMessage=3;Xg.BaseTokensPerName=1});var nFe=G(HG=>{"use strict";f();Object.defineProperty(HG,"__esModule",{value:!0});HG.toOpenAiChatMessage=tFe;HG.toOpenAIChatMessages=nkt;var dy=BP(),GG=xce(),ekt=tb();function vce(t){return t.filter(e=>e.type===dy.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(vce,"onlyStringContent");function tkt(t){let e=t.map(n=>{if(n.type===dy.ChatCompletionContentPartKind.Text)return{type:"text",text:n.text};if(n.type===dy.ChatCompletionContentPartKind.Image)return{image_url:n.imageUrl,type:"image_url"};if(n.type===dy.ChatCompletionContentPartKind.Opaque&&dy.ChatCompletionContentPartOpaque.usableIn(n,ekt.OutputMode.OpenAI))return n}).filter(n=>!!n);return e.every(n=>n.type==="text")?e.map(n=>n.text).join(""):e}s(tkt,"stringAndImageContent");function tFe(t){switch(t.role){case dy.ChatRole.System:return{role:GG.ChatRole.System,content:vce(t.content),name:t.name};case dy.ChatRole.User:return{role:GG.ChatRole.User,content:tkt(t.content),name:t.name};case dy.ChatRole.Assistant:return{role:GG.ChatRole.Assistant,content:vce(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case dy.ChatRole.Tool:return{role:GG.ChatRole.Tool,content:vce(t.content),tool_call_id:t.toolCallId};default:return}}s(tFe,"toOpenAiChatMessage");function nkt(t){return t.map(tFe).filter(e=>!!e)}s(nkt,"toOpenAIChatMessages")});var iFe=G($G=>{"use strict";f();Object.defineProperty($G,"__esModule",{value:!0});$G.toVsCodeChatMessage=rFe;$G.toVsCodeChatMessages=rkt;var VG=BP();function jG(t){return t.filter(e=>e.type===VG.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(jG,"onlyStringContent");var nb;function rFe(t){switch(nb??=require("vscode"),t.role){case VG.ChatRole.Assistant:let e=nb.LanguageModelChatMessage.Assistant(jG(t.content),t.name);return t.toolCalls&&(e.content=[new nb.LanguageModelTextPart(jG(t.content)),...t.toolCalls.map(n=>{let r;try{r=JSON.parse(n.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+n.id)}return new nb.LanguageModelToolCallPart(n.id,n.function.name,r)})]),e;case VG.ChatRole.User:return nb.LanguageModelChatMessage.User(jG(t.content),t.name);case VG.ChatRole.Tool:{let n=nb.LanguageModelChatMessage.User("");return n.content=[new nb.LanguageModelToolResultPart(t.toolCallId,[new nb.LanguageModelTextPart(jG(t.content))])],n}default:return}}s(rFe,"toVsCodeChatMessage");function rkt(t){return t.map(rFe).filter(e=>!!e)}s(rkt,"toVsCodeChatMessages")});var tb=G(jm=>{"use strict";f();Object.defineProperty(jm,"__esModule",{value:!0});jm.OutputMode=jm.Raw=jm.OpenAI=void 0;jm.toMode=bce;jm.toVSCode=ikt;jm.toOpenAI=okt;var oFe=nFe(),sFe=iFe();jm.OpenAI=xce();jm.Raw=BP();var q2;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(q2||(jm.OutputMode=q2={}));function bce(t,e){switch(t){case q2.Raw:return e;case q2.VSCode:return e instanceof Array?(0,sFe.toVsCodeChatMessages)(e):(0,sFe.toVsCodeChatMessage)(e);case q2.OpenAI:return e instanceof Array?(0,oFe.toOpenAIChatMessages)(e):(0,oFe.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(bce,"toMode");function ikt(t){return bce(q2.VSCode,t)}s(ikt,"toVSCode");function okt(t){return bce(q2.OpenAI,t)}s(okt,"toOpenAI")});var Ece=G(DP=>{"use strict";f();Object.defineProperty(DP,"__esModule",{value:!0});DP.jsonRetainedProps=void 0;DP.forEachNode=aFe;DP.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function aFe(t,e){if(e(t),t.type===1)for(let n of t.children)aFe(n,e)}s(aFe,"forEachNode")});var lFe=G(Ice=>{"use strict";f();Object.defineProperty(Ice,"__esModule",{value:!0});Ice.once=skt;function skt(t){let e,n=!1,r=s((...i)=>(n||(e=t(...i),n=!0),e),"wrappedFunction");return r.clear=()=>{n=!1},r}s(skt,"once")});var Sce=G(Jc=>{"use strict";f();Object.defineProperty(Jc,"__esModule",{value:!0});Jc.BudgetExceededError=Jc.MaterializedChatMessageImage=Jc.MaterializedChatMessageBreakpoint=Jc.MaterializedChatMessageOpaque=Jc.MaterializedChatMessage=Jc.MaterializedChatMessageTextChunk=Jc.GenericMaterializedContainer=void 0;var O4=lFe(),Q0=tb(),fy=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,n,r,i,o,a,l){if(this.parent=e,this.id=n,this.name=r,this.priority=i,this.metadata=a,this.flags=l,this.children=o(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[c,u]=this.children;u.isEmpty?this.children=[c]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=ib(r)?await r.tokenCount(e):await r.upperBoundTokenCount(e);n+=i})),n}async upperBoundTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n}replaceNode(e,n){return AFe(e,this.children,n)}allMetadata(){return gFe(this)}findById(e){return _ce(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)akt(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof $m&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{if(r instanceof $m||r instanceof t){let i=await r.baseMessageTokenCount(e);n+=i}})),n}removeLowestPriorityChild(){let e=[];return wce(this,e),e}};Jc.GenericMaterializedContainer=fy;var PP=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,n,r,i=[],o){this.parent=e,this.text=n,this.priority=r,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,O4.once)(async e=>await e.tokenLength({type:Q0.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};Jc.MaterializedChatMessageTextChunk=PP;var $m=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,n,r,i,o,a,l,c,u){this.parent=e,this.id=n,this.role=r,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=l,this.metadata=c,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,n){let r=AFe(e,this.children,n);return r&&this.onChunksChange(),r}removeLowestPriorityChild(){let e=[];return wce(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return _ce(e,this)}_tokenCount=(0,O4.once)(async e=>{let n=this.toChatMessage();return e.countMessageTokens((0,Q0.toMode)(e.mode,n))});_upperBound=(0,O4.once)(async e=>{let n=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n});baseMessageTokenCount=(0,O4.once)(e=>{let n=this.toChatMessage();return n.content=n.content.map(r=>r.type===Q0.Raw.ChatCompletionContentPartKind.Text?{...r,text:""}:r.type===Q0.Raw.ChatCompletionContentPartKind.Image?void 0:r).filter(r=>!!r),e.countMessageTokens((0,Q0.toMode)(e.mode,n))});_text=(0,O4.once)(()=>{let e=[];for(let{content:n,isTextSibling:r}of mFe(this)){if(n instanceof W2||n instanceof rb){e.push(n);continue}if(n instanceof Vm){e.at(-1)instanceof Vm?e[e.length-1]=n:e.push(n);continue}if(n.lineBreakBefore===1||n.lineBreakBefore===2&&!r){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=n.text:e.push(n.text)}return e});toChatMessage(){let e=this.text.map(n=>{if(typeof n=="string")return{type:Q0.Raw.ChatCompletionContentPartKind.Text,text:n};if(n instanceof W2)return{type:Q0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:yFe(n.src),detail:n.detail}};if(n instanceof rb)return n.value;if(n instanceof Vm)return n.part;throw new Error("Unexpected element type")});if(this.role===Q0.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===Q0.Raw.ChatRole.Assistant){let n={role:this.role,content:e};return this.name&&(n.name=this.name),this.toolCalls?.length&&(n.toolCalls=this.toolCalls.map(r=>({function:r.function,id:r.id,type:r.type}))),n}else return this.role===Q0.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===Q0.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};Jc.MaterializedChatMessage=$m;var rb=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return this.part.tokenUsage&&Q0.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};Jc.MaterializedChatMessageOpaque=rb;var Vm=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return 0}isEmpty=!1};Jc.MaterializedChatMessageBreakpoint=Vm;var W2=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,n,r,i,o=[],a,l){this.parent=e,this.id=n,this.src=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,O4.once)(async e=>e.tokenLength({type:Q0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:yFe(this.src),detail:this.detail}}));isEmpty=!1};Jc.MaterializedChatMessageImage=W2;function ib(t){return t instanceof fy||t instanceof $m}s(ib,"isContainerType");function pFe(t){return t instanceof PP||t instanceof W2||t instanceof rb||t instanceof Vm}s(pFe,"isContentType");function akt(t){if(!ib(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(akt,"assertContainerOrChatMessage");function*mFe(t,e=!1){for(let n of t.children)n instanceof PP?(yield{content:n,isTextSibling:e},e=!0):n instanceof W2||n instanceof rb||n instanceof Vm?yield{content:n,isTextSibling:!1}:n instanceof rb?yield{content:n,isTextSibling:!0}:(n&&(yield*mFe(n,e)),e=!1)}s(mFe,"contentChunks");function lkt(t,e){let n;function r(i,o){if(pFe(i))(!n||i.priority<n.node.priority)&&(n={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)r(a,o);o.pop()}}if(s(r,"findLowestInTree"),r(t,[]),!n)throw new Error("No lowest priority node found");NP(n.node,e)}s(lkt,"removeLowestPriorityLegacy");var cFe=new WeakMap;function hFe(t){let e=cFe.get(t);if(e!==void 0)return e;let n=!1;return t instanceof Vm?n=!0:t instanceof $m?n=t.children.some(r=>r instanceof Vm):t instanceof fy&&(n=t.children.some(hFe)),cFe.set(t,n),n}s(hFe,"hasCachePoint");function ckt(t){if(t instanceof $m)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof $m)return!1;return!0}s(ckt,"shouldLookForCachePointInNode");function wce(t,e){let n;if(t instanceof fy&&t.has(1)){lkt(t,e);return}let r=ckt(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:l}=i[o],c=a[a.length-1].children[l];if(!(r&&hFe(c)&&(n=void 0,c instanceof Vm))){if(c instanceof fy&&c.has(4)){let u=[...a,c];i.splice(o+1,0,...c.children.map((d,p)=>({chain:u,index:p})))}else if(!n||c.priority<n.value.priority)n={chain:a,index:l,value:c};else if(c.priority===n.value.priority){n.lowestNested??=uFe(n.value);let u=uFe(c);u<n.lowestNested&&(n={chain:a,index:l,value:c,lowestNested:u})}}}if(!n)throw new zG(t);pFe(n.value)||n.value instanceof fy&&n.value.has(2)||ib(n.value)&&!n.value.children.length?NP(n.value,e):wce(n.value,e)}s(wce,"removeLowestPriorityChild");var zG=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let n=[e];for(;n[0].parent;)n.unshift(n[0].parent);let r=n.map(i=>i instanceof $m?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${r.join(" -> ")})`)}};Jc.BudgetExceededError=zG;function uFe(t){if(!ib(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let n of t.children)e=Math.min(e,n.priority);return e}s(uFe,"getLowestPriorityAmongChildren");function*gFe(t){yield*t.metadata;for(let e of t.children)ib(e)?yield*gFe(e):yield*e.metadata}s(gFe,"allMetadata");function AFe(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];if(ib(i)){if(i.id===t){let a=e[r];return n.parent=i.parent,e[r]=n,a}let o=i.replaceNode(t,n);if(o)return o}}}s(AFe,"replaceNode");function*dFe(t){let e=[t];for(;e.length>0;){let n=e.pop();yield n,ib(n)&&e.push(...n.children)}}s(dFe,"forEachNode");function ukt(t){let e=t;for(;e.parent;)e=e.parent;return e}s(ukt,"getRoot");function fFe(t){return t instanceof fy&&t.keepWithId!==void 0}s(fFe,"isKeepWith");var Tce=new Set;function dkt(t,e){let n=new Set;for(let r of dFe(t))fFe(r)&&!Tce.has(r.keepWithId)&&n.add(r.keepWithId);if(n.size===0)return!1;for(let r of n)Tce.add(r);try{let r=ukt(t);for(let i of dFe(r))fFe(i)&&n.has(i.keepWithId)?NP(i,e):i instanceof $m&&i.toolCalls&&(i.toolCalls=fkt(i.toolCalls,o=>!(o.keepWith&&n.has(o.keepWith.id))),i.isEmpty&&NP(i,e))}finally{for(let r of n)Tce.delete(r)}}s(dkt,"removeOtherKeepWiths");function _ce(t,e){if(e.id===t)return e;for(let n of e.children)if(ib(n)){let r=_ce(t,n);if(r)return r}}s(_ce,"findNodeById");function NP(t,e){let n=t.parent;if(!n)return;let r=n.children.indexOf(t);r!==-1&&(n.children.splice(r,1),e.push(t),dkt(t,e),n.isEmpty?NP(n,e):n.onChunksChange())}s(NP,"removeNode");function yFe(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let n of Object.keys(e))if(t.startsWith(n))return`data:${e[n]};base64,${t}`;return t}s(yFe,"getEncodedBase64");function fkt(t,e){for(let n=0;n<t.length;n++){if(e(t[n]))continue;let r=t.slice(0,n);for(let i=n+1;i<t.length;i++)e(t[i])&&r.push(t[i]);return r}return t}s(fkt,"filterIfDifferent")});var xFe=G(()=>{"use strict";f();function pkt(t,e,...n){return{ctor:t,props:e,children:n.flat()}}s(pkt,"_vscpp");function CFe(){throw new Error("This should not be invoked!")}s(CFe,"_vscppf");CFe.isFragment=!0;globalThis.vscpp=pkt;globalThis.vscppf=CFe});var kce=G(YG=>{"use strict";f();Object.defineProperty(YG,"__esModule",{value:!0});YG.PromptElement=void 0;xFe();var Rce=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};YG.PromptElement=Rce});var Uce=G(Qi=>{"use strict";f();Object.defineProperty(Qi,"__esModule",{value:!0});Qi.LogicalWrapper=Qi.IfEmpty=Qi.AbstractKeepWith=Qi.TokenLimit=Qi.Expandable=Qi.Chunk=Qi.LegacyPrioritization=Qi.ToolResult=Qi.PrioritizedList=Qi.Image=Qi.TextChunk=Qi.ToolMessage=Qi.AssistantMessage=Qi.UserMessage=Qi.SystemMessage=Qi.BaseChatMessage=void 0;Qi.isChatMessagePromptElement=mkt;Qi.useKeepWith=ykt;var FP=zm(),hp=kce();function mkt(t){return t instanceof KG||t instanceof JG||t instanceof XG}s(mkt,"isChatMessagePromptElement");var G2=class extends hp.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Qi.BaseChatMessage=G2;var KG=class extends G2{static{s(this,"SystemMessage")}constructor(e){e.role=FP.Raw.ChatRole.System,super(e)}};Qi.SystemMessage=KG;var JG=class extends G2{static{s(this,"UserMessage")}constructor(e){e.role=FP.Raw.ChatRole.User,super(e)}};Qi.UserMessage=JG;var XG=class extends G2{static{s(this,"AssistantMessage")}constructor(e){e.role=FP.Raw.ChatRole.Assistant,super(e)}};Qi.AssistantMessage=XG;var hkt=/\s+/g,Bce=class extends G2{static{s(this,"ToolMessage")}constructor(e){e.role=FP.Raw.ChatRole.Tool,super(e)}};Qi.ToolMessage=Bce;var ZG=class extends hp.PromptElement{static{s(this,"TextChunk")}async prepare(e,n,r){let i=this.props.breakOnWhitespace?hkt:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let c of this.props.children||[])if(c&&typeof c=="object"){if(typeof c.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");c.ctor==="br"?o+=`
`:a.push(c)}else c!=null&&(o+=c);let l=await gkt(e,i,o,r);return vscpp(vscppf,null,a,l)}render(e){return e}};Qi.TextChunk=ZG;async function gkt(t,e,n,r){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<n.length;){let a;typeof e=="string"?a=n.indexOf(e,o===-1?0:o+e.length):a=e.exec(n)?.index??-1,a===-1&&(a=n.length);let l=i+n.slice(Math.max(0,o),a);if(await t.countTokens({type:FP.Raw.ChatCompletionContentPartKind.Text,text:l},r)>t.tokenBudget)return i;i=l,o=a}return i}s(gkt,"getTextContentBelowBudget");var Dce=class extends hp.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Qi.Image=Dce;var Pce=class extends hp.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:n=0,descending:r}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=r?n-o:n-e.length+o;return typeof i!="object"?vscpp(ZG,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};Qi.PrioritizedList=Pce;var Nce=class extends hp.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Qi.ToolResult=Nce;var Lce=class extends hp.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Qi.LegacyPrioritization=Lce;var Fce=class extends hp.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Qi.Chunk=Fce;var Mce=class extends hp.PromptElement{static{s(this,"Expandable")}async render(e,n){return vscpp(vscppf,null,await this.props.value(n))}};Qi.Expandable=Mce;var Qce=class extends hp.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Qi.TokenLimit=Qce;var eH=class extends hp.PromptElement{static{s(this,"AbstractKeepWith")}};Qi.AbstractKeepWith=eH;var Akt=0;function ykt(){let t=Akt++;return class extends eH{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(ykt,"useKeepWith");var Oce=class extends hp.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(LP,null,this.props.alt),vscpp(LP,{flexGrow:1},this.props.children))}};Qi.IfEmpty=Oce;var LP=class extends hp.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Qi.LogicalWrapper=LP});var bFe=G(MP=>{"use strict";f();Object.defineProperty(MP,"__esModule",{value:!0});MP.localize=Ckt;MP.localize2=xkt;MP.getConfiguredDefaultLocale=vkt;function vFe(t,e){let n;return e.length===0?n=t:n=t.replace(/\{(\d+)\}/g,function(r,i){let o=i[0];return typeof e[o]<"u"?e[o]:r}),n}s(vFe,"_format");function Ckt(t,e,...n){return vFe(e,n)}s(Ckt,"localize");function xkt(t,e,...n){let r=vFe(e,n);return{original:r,value:r}}s(xkt,"localize2");function vkt(t){}s(vkt,"getConfiguredDefaultLocale")});var Hce=G(Qt=>{"use strict";f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAndroid=Qt.isEdge=Qt.isSafari=Qt.isFirefox=Qt.isChrome=Qt.OS=Qt.setTimeout0=Qt.setTimeout0IsFaster=Qt.translationsConfigFile=Qt.platformLocale=Qt.locale=Qt.Language=Qt.language=Qt.userAgent=Qt.platform=Qt.isCI=Qt.isMobile=Qt.isIOS=Qt.webWorkerOrigin=Qt.isWebWorker=Qt.isWeb=Qt.isElectron=Qt.isNative=Qt.isLinuxSnap=Qt.isLinux=Qt.isMacintosh=Qt.isWindows=Qt.LANGUAGE_DEFAULT=void 0;Qt.PlatformToString=Ekt;Qt.isLittleEndian=Ikt;Qt.isBigSurOrNewer=Tkt;var EFe=bFe();Qt.LANGUAGE_DEFAULT="en";var UP=!1,qP=!1,OP=!1,_Fe=!1,SFe=!1,Wce=!1,RFe=!1,Gce=!1,kFe=!1,BFe=!1,QP,tH=Qt.LANGUAGE_DEFAULT,qce=Qt.LANGUAGE_DEFAULT,DFe,py,my=globalThis,O0;typeof my.vscode<"u"&&typeof my.vscode.process<"u"?O0=my.vscode.process:typeof process<"u"&&(O0=process);var PFe=typeof O0?.versions?.electron=="string",bkt=PFe&&O0?.type==="renderer";if(typeof O0=="object"){UP=O0.platform==="win32",qP=O0.platform==="darwin",OP=O0.platform==="linux",_Fe=OP&&!!O0.env.SNAP&&!!O0.env.SNAP_REVISION,RFe=PFe,kFe=!!O0.env.CI||!!O0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,QP=Qt.LANGUAGE_DEFAULT,tH=Qt.LANGUAGE_DEFAULT;let t=O0.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),n=e.availableLanguages["*"];QP=e.locale,qce=e.osLocale,tH=n||Qt.LANGUAGE_DEFAULT,DFe=e._translationsConfigFile}catch{}SFe=!0}else typeof navigator=="object"&&!bkt?(py=navigator.userAgent,UP=py.indexOf("Windows")>=0,qP=py.indexOf("Macintosh")>=0,Gce=(py.indexOf("Macintosh")>=0||py.indexOf("iPad")>=0||py.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,OP=py.indexOf("Linux")>=0,BFe=py?.indexOf("Mobi")>=0,Wce=!0,QP=EFe.getConfiguredDefaultLocale(EFe.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Qt.LANGUAGE_DEFAULT,tH=QP,qce=navigator.language):console.error("Unable to resolve platform.");function Ekt(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(Ekt,"PlatformToString");var nH=0;qP?nH=1:UP?nH=3:OP&&(nH=2);Qt.isWindows=UP;Qt.isMacintosh=qP;Qt.isLinux=OP;Qt.isLinuxSnap=_Fe;Qt.isNative=SFe;Qt.isElectron=RFe;Qt.isWeb=Wce;Qt.isWebWorker=Wce&&typeof my.importScripts=="function";Qt.webWorkerOrigin=Qt.isWebWorker?my.origin:void 0;Qt.isIOS=Gce;Qt.isMobile=BFe;Qt.isCI=kFe;Qt.platform=nH;Qt.userAgent=py;Qt.language=tH;var IFe;(function(t){function e(){return Qt.language}s(e,"value"),t.value=e;function n(){return Qt.language.length===2?Qt.language==="en":Qt.language.length>=3?Qt.language[0]==="e"&&Qt.language[1]==="n"&&Qt.language[2]==="-":!1}s(n,"isDefaultVariant"),t.isDefaultVariant=n;function r(){return Qt.language==="en"}s(r,"isDefault"),t.isDefault=r})(IFe||(Qt.Language=IFe={}));Qt.locale=QP;Qt.platformLocale=qce;Qt.translationsConfigFile=DFe;Qt.setTimeout0IsFaster=typeof my.postMessage=="function"&&!my.importScripts;Qt.setTimeout0=(()=>{if(Qt.setTimeout0IsFaster){let t=[];my.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),my.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();Qt.OS=qP||Gce?2:UP?1:3;var TFe=!0,wFe=!1;function Ikt(){if(!wFe){wFe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,TFe=new Uint16Array(t.buffer)[0]===513}return TFe}s(Ikt,"isLittleEndian");Qt.isChrome=!!(Qt.userAgent&&Qt.userAgent.indexOf("Chrome")>=0);Qt.isFirefox=!!(Qt.userAgent&&Qt.userAgent.indexOf("Firefox")>=0);Qt.isSafari=!!(!Qt.isChrome&&Qt.userAgent&&Qt.userAgent.indexOf("Safari")>=0);Qt.isEdge=!!(Qt.userAgent&&Qt.userAgent.indexOf("Edg/")>=0);Qt.isAndroid=!!(Qt.userAgent&&Qt.userAgent.indexOf("Android")>=0);function Tkt(t){return parseFloat(t)>=20}s(Tkt,"isBigSurOrNewer")});var LFe=G(Zg=>{"use strict";f();Object.defineProperty(Zg,"__esModule",{value:!0});Zg.arch=Zg.platform=Zg.env=Zg.cwd=void 0;var NFe=Hce(),H2,jce=globalThis.vscode;if(typeof jce<"u"&&typeof jce.process<"u"){let t=jce.process;H2={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?H2={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:H2={get platform(){return NFe.isWindows?"win32":NFe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};Zg.cwd=H2.cwd;Zg.env=H2.env;Zg.platform=H2.platform;Zg.arch=H2.arch});var MFe=G(ln=>{"use strict";f();Object.defineProperty(ln,"__esModule",{value:!0});ln.delimiter=ln.sep=ln.toNamespacedPath=ln.parse=ln.format=ln.extname=ln.basename=ln.dirname=ln.relative=ln.resolve=ln.join=ln.isAbsolute=ln.normalize=ln.posix=ln.win32=void 0;var U4=LFe(),wkt=65,_kt=97,Skt=90,Rkt=122,ab=46,Vl=47,Dd=92,ob=58,kkt=63,rH=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Bkt(t,e){if(t===null||typeof t!="object")throw new rH(e,"Object",t)}s(Bkt,"validateObject");function da(t,e){if(typeof t!="string")throw new rH(e,"string",t)}s(da,"validateString");var Pd=U4.platform==="win32";function li(t){return t===Vl||t===Dd}s(li,"isPathSeparator");function Vce(t){return t===Vl}s(Vce,"isPosixPathSeparator");function sb(t){return t>=wkt&&t<=Skt||t>=_kt&&t<=Rkt}s(sb,"isWindowsDeviceRoot");function iH(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=Vl}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==ab||i.charCodeAt(i.length-2)!==ab){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===ab&&l!==-1?++l:l=-1}return i}s(iH,"normalizeString");function FFe(t,e){Bkt(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${e.ext||""}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(FFe,"_format");ln.win32={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],da(o,"path"),o.length===0)continue}else e.length===0?o=U4.cwd():(o=U4.env[`=${e}`]||U4.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Dd)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)li(d)&&(l=1,u=!0);else if(li(d))if(u=!0,li(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!li(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&li(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!li(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else sb(d)&&o.charCodeAt(1)===ob&&(c=o.slice(0,2),l=2,a>2&&li(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=iH(n,!r,"\\",li),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){da(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return Vce(o)?"\\":t;if(li(o))if(i=!0,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else sb(o)&&t.charCodeAt(1)===ob&&(r=t.slice(0,2),n=2,e>2&&li(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?iH(t.slice(n),!i,"\\",li):"";return a.length===0&&!i&&(a="."),a.length>0&&li(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){da(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return li(n)||e>2&&sb(n)&&t.charCodeAt(1)===ob&&li(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];da(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&li(n.charCodeAt(0))){++i;let o=n.length;o>1&&li(n.charCodeAt(1))&&(++i,o>2&&(li(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&li(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ln.win32.normalize(e)},relative(t,e){if(da(t,"from"),da(e,"to"),t===e)return"";let n=ln.win32.resolve(t),r=ln.win32.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Dd;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Dd;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Dd;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Dd;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Dd&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===Dd)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Dd?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Dd)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===Dd&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ln.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Dd){if(e.charCodeAt(1)===Dd){let n=e.charCodeAt(2);if(n!==kkt&&n!==ab)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(sb(e.charCodeAt(0))&&e.charCodeAt(1)===ob&&e.charCodeAt(2)===Dd)return`\\\\?\\${e}`;return t},dirname(t){da(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return li(i)?t:".";if(li(i)){if(n=r=1,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else sb(i)&&t.charCodeAt(1)===ob&&(n=e>2&&li(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(li(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&da(e,"ext"),da(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&sb(t.charCodeAt(0))&&t.charCodeAt(1)===ob&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(li(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(li(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){da(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===ob&&sb(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(li(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===ab?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:FFe.bind(null,"\\"),parse(t){da(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return li(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(li(i)){if(r=1,li(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!li(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&li(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!li(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(sb(i)&&t.charCodeAt(1)===ob){if(n<=2)return e.root=e.dir=t,e;if(r=2,li(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),li(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===ab?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var Dkt=(()=>{if(Pd){let t=/\\/g;return()=>{let e=U4.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>U4.cwd()})();ln.posix={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:Dkt();da(i,"path"),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===Vl)}return e=iH(e,!n,"/",Vce),n?`/${e}`:e.length>0?e:"."},normalize(t){if(da(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Vl,n=t.charCodeAt(t.length-1)===Vl;return t=iH(t,!e,"/",Vce),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return da(t,"path"),t.length>0&&t.charCodeAt(0)===Vl},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];da(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":ln.posix.normalize(e)},relative(t,e){if(da(t,"from"),da(e,"to"),t===e||(t=ln.posix.resolve(t),e=ln.posix.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===Vl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Vl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===Vl?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===Vl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(da(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Vl,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Vl){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&da(e,"ext"),da(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Vl){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Vl){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){da(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Vl){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===ab?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:FFe.bind(null,"/"),parse(t){da(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===Vl,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===Vl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===ab?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ln.posix.win32=ln.win32.win32=ln.win32;ln.posix.posix=ln.win32.posix=ln.posix;ln.normalize=Pd?ln.win32.normalize:ln.posix.normalize;ln.isAbsolute=Pd?ln.win32.isAbsolute:ln.posix.isAbsolute;ln.join=Pd?ln.win32.join:ln.posix.join;ln.resolve=Pd?ln.win32.resolve:ln.posix.resolve;ln.relative=Pd?ln.win32.relative:ln.posix.relative;ln.dirname=Pd?ln.win32.dirname:ln.posix.dirname;ln.basename=Pd?ln.win32.basename:ln.posix.basename;ln.extname=Pd?ln.win32.extname:ln.posix.extname;ln.format=Pd?ln.win32.format:ln.posix.format;ln.parse=Pd?ln.win32.parse:ln.posix.parse;ln.toNamespacedPath=Pd?ln.win32.toNamespacedPath:ln.posix.toNamespacedPath;ln.sep=Pd?ln.win32.sep:ln.posix.sep;ln.delimiter=Pd?ln.win32.delimiter:ln.posix.delimiter});var HFe=G(q4=>{"use strict";f();Object.defineProperty(q4,"__esModule",{value:!0});q4.URI=void 0;q4.isUriComponents=Ukt;q4.uriToFsPath=lH;var QFe=MFe(),sH=Hce(),Pkt=/^\w[\w\d+.-]*$/,Nkt=/^\//,Lkt=/^\/\//;function Fkt(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Pkt.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Nkt.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Lkt.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Fkt,"_validateUri");function Mkt(t,e){return!t&&!e?"file":t}s(Mkt,"_schemeFix");function Qkt(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Ym&&(e=Ym+e):e=Ym;break}return e}s(Qkt,"_referenceResolution");var $o="",Ym="/",Okt=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,aH=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||$o,this.authority=e.authority||$o,this.path=e.path||$o,this.query=e.query||$o,this.fragment=e.fragment||$o):(this.scheme=Mkt(e,a),this.authority=n||$o,this.path=Qkt(this.scheme,r||$o),this.query=i||$o,this.fragment=o||$o,Fkt(this,a))}get fsPath(){return lH(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=$o),r===void 0?r=this.authority:r===null&&(r=$o),i===void 0?i=this.path:i===null&&(i=$o),o===void 0?o=this.query:o===null&&(o=$o),a===void 0?a=this.fragment:a===null&&(a=$o),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new lb(n,r,i,o,a)}static parse(e,n=!1){let r=Okt.exec(e);return r?new lb(r[2]||$o,oH(r[4]||$o),oH(r[5]||$o),oH(r[7]||$o),oH(r[9]||$o),n):new lb($o,$o,$o,$o,$o)}static file(e){let n=$o;if(sH.isWindows&&(e=e.replace(/\\/g,Ym)),e[0]===Ym&&e[1]===Ym){let r=e.indexOf(Ym,2);r===-1?(n=e.substring(2),e=Ym):(n=e.substring(2,r),e=e.substring(r)||Ym)}return new lb("file",n,e,$o,$o)}static from(e,n){return new lb(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return sH.isWindows&&e.scheme==="file"?r=t.file(QFe.win32.join(lH(e,!0),...n)).path:r=QFe.posix.join(e.path,...n),e.with({path:r})}toString(e=!1){return $ce(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new lb(e);return n._formatted=e.external??null,n._fsPath=e._sep===qFe?e.fsPath??null:null,n}}else return e}};q4.URI=aH;function Ukt(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Ukt,"isUriComponents");var qFe=sH.isWindows?1:void 0,lb=class extends aH{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=lH(this,!1)),this._fsPath}toString(e=!1){return e?$ce(this,!0):(this._formatted||(this._formatted=$ce(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=qFe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},WFe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function OFe(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=WFe[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(OFe,"encodeURIComponentFast");function qkt(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=WFe[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(qkt,"encodeURIComponentMinimal");function lH(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,sH.isWindows&&(n=n.replace(/\//g,"\\")),n}s(lH,"uriToFsPath");function $ce(t,e){let n=e?qkt:OFe,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=Ym,r+=Ym),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:OFe(c,!1,!1)),r}s($ce,"_asFormatted");function GFe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+GFe(t.substr(3)):t}}s(GFe,"decodeURIComponentGraceful");var UFe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function oH(t){return t.match(UFe)?t.replace(UFe,e=>GFe(e)):t}s(oH,"percentDecode")});var Kce=G(cb=>{"use strict";f();Object.defineProperty(cb,"__esModule",{value:!0});cb.PromptReference=cb.ChatResponseReferencePartStatusKind=cb.PromptMetadata=void 0;var WP=HFe(),zce=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};cb.PromptMetadata=zce;var jFe;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(jFe||(cb.ChatResponseReferencePartStatusKind=jFe={}));var Yce=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let n=s(r=>"scheme"in r?WP.URI.from(r):{uri:WP.URI.from(r.uri),range:r.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&n(e.anchor.value)}:n(e.anchor),e.iconPath&&("scheme"in e.iconPath?WP.URI.from(e.iconPath):"light"in e.iconPath?{light:WP.URI.from(e.iconPath.light),dark:WP.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,n,r){this.anchor=e,this.iconPath=n,this.options=r}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};cb.PromptReference=Yce});var oue=G(G4=>{"use strict";f();Object.defineProperty(G4,"__esModule",{value:!0});G4.PromptRenderer=G4.MetadataMap=void 0;var Wkt=Ece(),GP=Sce(),W4=tb(),Na=Uce(),iue=Kce(),VFe;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(VFe||(G4.MetadataMap=VFe={}));var Xce=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new uH(null,0);_tokenLimits=[];tracer=void 0;constructor(e,n,r,i){this._endpoint=e,this._ctor=n,this._props=r,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,n,r,i){let o=new Map;for(let[c,u]of n.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=KFe(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof Na.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),l=s(c=>{let u=0;for(let d=c+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[c,u]of a.entries()){let d=l(c),p=0;for(let{element:v}of u)p+=v.props.flexBasis??1;let m=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,E=b/p;return Math.floor(e.remainingTokenBudget*E)<v.tokenLimit?!1:(p-=b,m+=v.tokenLimit,!0)}),g=u.map((v,b)=>{let E=(v.element.props.flexBasis??1)/p;return{tokenBudget:h[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-m)*E),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:W4.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,b)=>({id:v.element.node.id,tokenBudget:g[b].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=await zFe(v,()=>b.prepare?.(g[E],r,i));v.node.setState(_)}));let y=await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=g[E];return await zFe(v,()=>b.render(v.node.getState(),_,r,i))}));for(let[v,{element:b,promptElementInstance:E}]of u.entries()){let _=g[v],k=y[v];if(!k)continue;let D=await this._processPromptRenderPiece(new j2(_.tokenBudget,this._endpoint),b,E,k,r,i);E instanceof Na.Expandable&&this._growables.push({initialConsume:D,elem:b.node}),e.consume(D)}}}async _processPromptRenderPiece(e,n,r,i,o,a){let l=YFe(i),c=new j2(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await Gkt(this._tokenizer,n,r,l);return c.consume(u),await this._handlePromptChildren(n,l,c,o,a),c.consumed}async renderElementJSON(e){return await this._processPromptPieces(new j2(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,n){let r=await this.renderRaw(e,n);return{...r,messages:(0,W4.toMode)(this._tokenizer.mode,r.messages)}}async renderRaw(e,n){await this._processPromptPieces(new j2(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,n);let{container:r,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,n);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:r,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...r.toChatMessages()],l=await r.tokenCount(this._tokenizer),c=[...r.allMetadata()],u=new Set,d=c.map(m=>{if(!(m instanceof eA))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(dH),p=i.map(m=>{if(!(m instanceof eA)||c.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(dH);return{metadata:{get:s(m=>c.find(h=>h instanceof m),"get"),getAll:s(m=>c.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:d,omittedReferences:p}}async _getFinalElementTree(e,n){let r=this._root.materialize(),i=[...r.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let l=o.length-1;l>=0;l--){let c=o[l];if(c.limit>e)continue;let u=r.findById(c.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<c.limit&&!await this._grow(u,d,c.limit,n))continue;let p=await u.tokenCount(this._tokenizer);for(;p>c.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>c.limit);p=await u.tokenCount(this._tokenizer)}}return{container:r,allMetadata:i,removed:a}}async _grow(e,n,r,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Na.Expandable))throw new Error("unreachable: expected growable");let l=new uH(null,0,o.elem.id),c=new j2(r-n+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(c,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:c.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:W4.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=l.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(n-=o.initialConsume,n+=u,n>=r)break}return!0}_handlePromptChildren(e,n,r,i,o){if(e.ctor===Na.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,n);return}let a=[];for(let l of n){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},cH(l.children));continue}let c=e.node.createChild();a.push({node:c,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(r,a,i,o)}_handleIntrinsic(e,n,r,i,o){switch(n){case"meta":return this._handleIntrinsicMeta(e,r,i);case"br":return this._handleIntrinsicLineBreak(e,r,i,r.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,r,i);case"references":return this._handleIntrinsicReferences(e,r,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,r,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,r.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,r,i,o)}throw new Error(`Unknown intrinsic element ${n}!`)}_handleIntrinsicCacheBreakpoint(e,n,r,i){if(r.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(n,i)}_handleIntrinsicMeta(e,n,r){if(r.length>0)throw new Error("<meta /> must not have children!");n.local?e.addMetadata(n.value):this._root.addMetadata(n.value)}_handleIntrinsicLineBreak(e,n,r,i,o){if(r.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,n){let r=e.appendPieceJSON(n.node);if(this.tracer?.includeInEpoch)for(let i of r.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,n,r){if(r.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...n.value)}_handleIntrinsicReferences(e,n,r){if(r.length>0)throw new Error("<reference /> must not have children!");for(let i of n.value)e.addMetadata(new eA(i))}_handleIntrinsicIgnoredFiles(e,n,r){if(r.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...n.value)}_handleExtrinsicTextChunkChildren(e,n,r,i){let o=[],a=[];for(let l of i){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&o.push(l.value),l.kind==="intrinsic")if(l.name==="br")o.push(`
`);else if(l.name==="references")for(let c of l.props.value)a.push(new eA(c));else this._handleIntrinsic(e,l.name,l.props,cH(l.children),n.childIndex)}e.appendStringChild(o.join(""),r?.priority??Number.MAX_SAFE_INTEGER,a,n.childIndex,!0)}};G4.PromptRenderer=Xce;async function Gkt(t,e,n,r){let i=0;if((0,Na.isChatMessagePromptElement)(n)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,W4.toMode)(t.mode,o))}for(let o of r)o.kind==="literal"&&(i+=await t.tokenLength({type:W4.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(Gkt,"computeTokensConsumedByLiterals");function YFe(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new tue(String(t))):Hkt(t)?cH(t.children,e):jkt(t)?cH(t,e):typeof t.ctor=="string"?e.push(new Zce(t.ctor,t.props,t.children)):e.push(new eue(t.ctor,t.props,t.children)),e)}s(YFe,"flattenAndReduce");function cH(t,e=[]){for(let n of t)YFe(n,e);return e}s(cH,"flattenAndReduceArr");var Zce=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,n,r){this.name=e,this.props=n,this.children=r}},eue=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,n,r){this.ctor=e,this.props=n,this.children=r}},tue=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,n){this.value=e,this.priority=n}},j2=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,n){this.tokenBudget=e,this.endpoint=n}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},uH=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,n,r){let i=new t(null,e);switch(i._metadata=n.references?.map(o=>new eA(iue.PromptReference.fromJSON(o)))??[],i._children=n.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,r);case 2:return HP.fromJSON(i,a,o);default:}}).filter(dH),n.ctor){case 1:i._objFlags=n.flags??0,i._obj=new Na.BaseChatMessage(n.props);break;case 2:{if(n.keepWithId!==void 0){let o=r.get(n.keepWithId);o||(o=(0,Na.useKeepWith)(),r.set(n.keepWithId,o)),i._obj=new o(n.props||{})}else i._obj=new Na.LogicalWrapper(n.props||{});i._objFlags=n.flags??0;break}case 3:i._obj=new Na.Image(n.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,n,r=t._nextId++){this.parent=e,this.childIndex=n,this.id=r}setObj(e){this._obj=e,this._obj instanceof Na.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Na.Chunk&&(this._objFlags|=2),this._obj instanceof Na.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let n=t.fromJSON(this._children.length,e,new Map);return this._children.push(n),n}appendStringChild(e,n,r,i=this._children.length,o=!1){this._children.push(new HP(this,i,e,n,r,o))}appendLineBreak(e,n=this._children.length){this._children.push(new HP(this,n,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((n,r)=>n.childIndex-r.childIndex).map(n=>n.toJSON()).filter(dH),props:{},references:this._metadata.filter(n=>n instanceof eA).map(n=>n.reference.toJSON())};if(this._obj&&(e.props=Jce(this._obj.props,Wkt.jsonRetainedProps)),this._obj instanceof Na.BaseChatMessage)e.ctor=1,Object.assign(e.props,Jce(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Na.Image)return{...e,ctor:3,props:{...e.props,...Jce(this._obj.props,["src","detail"])}};this._obj instanceof Na.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((n,r)=>n.childIndex-r.childIndex),this._obj instanceof Na.Image)return new GP.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Na.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new GP.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Na.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Na.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,n=>this._children.map(r=>r.materialize(n)))}else{let n=new GP.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),r=>this._children.map(i=>i.materialize(r)),this._metadata,this._objFlags);return this._obj instanceof Na.AbstractKeepWith&&(n.keepWithId=this._obj.id),n}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,n=this._children.length){if(!(this._obj instanceof Na.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new nue({type:W4.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},n))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},nue=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,n){this.part=e,this.childIndex=n}toJSON(){}materialize(e){return new GP.MaterializedChatMessageBreakpoint(e,this.part)}},HP=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,n,r){return new t(e,n,r.text,r.priority,r.references?.map(i=>new eA(iue.PromptReference.fromJSON(i))),r.lineBreakBefore)}kind=2;constructor(e,n,r,i,o,a=!1){this.parent=e,this.childIndex=n,this.text=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let n=this.lineBreakBefore?1:this.childIndex===0?2:0;return new GP.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],n)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof eA).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Hkt(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Hkt,"isFragmentCtor");function dH(t){return t!==void 0}s(dH,"isDefined");var rue=class extends iue.PromptMetadata{static{s(this,"InternalMetadata")}},eA=class extends rue{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function jkt(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(jkt,"isIterable");function Jce(t,e){let n={};for(let r of e)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}s(Jce,"pickProps");function KFe(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(KFe,"atPath");var $Fe=new WeakSet;async function zFe(t,e){try{return await e()}catch(n){throw n instanceof Error&&!$Fe.has(n)&&n.constructor.name!=="CancellationError"&&($Fe.add(n),n.message+=` (at tsx element ${KFe(t.path)})`),n}}s(zFe,"annotateError")});var JFe=G(fH=>{"use strict";f();Object.defineProperty(fH,"__esModule",{value:!0});fH.VSCodeTokenizer=void 0;var sue=tb(),aue=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=sue.OutputMode.VSCode;constructor(e,n){if(this.countTokens=e,n!==sue.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,n){return e.type===sue.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,n):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};fH.VSCodeTokenizer=aue});var XFe=G(H4=>{"use strict";f();Object.defineProperty(H4,"__esModule",{value:!0});H4.tracerCss=H4.tracerSrc=void 0;H4.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';H4.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var rMe=G(mH=>{"use strict";f();Object.defineProperty(mH,"__esModule",{value:!0});mH.HTMLTracer=void 0;var ZFe=XFe(),V2=Sce(),Vkt=tb(),lue=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return cue.create({epochs:this.epochs,traceData:tMe(this.traceData)})}serveRouter(e){return new pH({baseAddress:e,epochs:this.epochs,traceData:tMe(this.traceData)})}};mH.HTMLTracer=lue;var pH=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,n){let r=e,i=n,o=new URL(r.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,r,i);break;case`${a}/regen`:this.onRegen(o,r,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:n}=this.opts;return`<body>
			<style>${ZFe.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(n)};
				const DEFAULT_MODEL = ${JSON.stringify(await eMe(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${ZFe.tracerSrc}
			</script>
		</body>`}async onRegen(e,n,r){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),l=await eMe(i.tokenizer,a),c=JSON.stringify(l);r.setHeader("Content-Type","application/json"),r.setHeader("Content-Length",Buffer.byteLength(c)),r.end(c)}onRoot(e,n,r){this.getHTML().then(i=>{r.setHeader("Content-Type","text/html"),r.setHeader("Content-Length",Buffer.byteLength(i)),r.end(i)})}},cue=class t extends pH{static{s(this,"RequestServer")}server;static async create(e){let{createServer:n}=await Promise.resolve().then(()=>require("http")),r=n((a,l)=>{try{o.route(a,l)||(l.statusCode=404,l.end("Not Found"))}catch(c){l.statusCode=500,l.end(String(c))}}),i=await new Promise((a,l)=>{r.listen(0,"127.0.0.1",()=>a(r.address().port)).on("error",l)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},r);return o}constructor(e,n){super(e),this.server=n}dispose(){this.server.closeAllConnections(),this.server.close()}};async function eMe(t,e){return{container:await nMe(t,e.container,!1),removed:e.removed,budget:e.budget}}s(eMe,"serializeRenderData");async function nMe(t,e,n){let r={metadata:e.metadata.map(zkt),priority:e.priority};if(e instanceof V2.MaterializedChatMessageTextChunk)return{...r,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof V2.MaterializedChatMessageImage)return{...r,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof V2.MaterializedChatMessageOpaque||e instanceof V2.MaterializedChatMessageBreakpoint)return;{let i={...r,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>nMe(t,o,n||e instanceof V2.MaterializedChatMessage)))).filter(o=>!!o),tokens:n?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof V2.GenericMaterializedContainer)return{...i,type:0};if(e instanceof V2.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:Vkt.Raw.ChatRole.display(e.role),text:o}}}$kt(e)}s(nMe,"serializeMaterialized");function $kt(t){throw new Error("unreachable")}s($kt,"assertNever");function zkt(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(zkt,"serializeMetadata");var tMe=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var oMe=G(iMe=>{"use strict";f();Object.defineProperty(iMe,"__esModule",{value:!0})});var aMe=G(sMe=>{"use strict";f();Object.defineProperty(sMe,"__esModule",{value:!0})});var cMe=G(lMe=>{"use strict";f();Object.defineProperty(lMe,"__esModule",{value:!0})});var zm=G(bs=>{"use strict";f();var Ykt=bs&&bs.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),$2=bs&&bs.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ykt(e,t,n)};Object.defineProperty(bs,"__esModule",{value:!0});bs.contentType=bs.PromptRenderer=bs.MetadataMap=bs.PromptElement=bs.JSONTree=void 0;bs.renderPrompt=Xkt;bs.renderElementJSON=Zkt;var uue=tb(),uMe=oue(),Kkt=JFe();$2(rMe(),bs);bs.JSONTree=Ece();$2(tb(),bs);$2(Uce(),bs);$2(Kce(),bs);$2(oMe(),bs);$2(aMe(),bs);$2(cMe(),bs);var Jkt=kce();Object.defineProperty(bs,"PromptElement",{enumerable:!0,get:s(function(){return Jkt.PromptElement},"get")});var dMe=oue();Object.defineProperty(bs,"MetadataMap",{enumerable:!0,get:s(function(){return dMe.MetadataMap},"get")});Object.defineProperty(bs,"PromptRenderer",{enumerable:!0,get:s(function(){return dMe.PromptRenderer},"get")});async function Xkt(t,e,n,r,i,o,a=uue.OutputMode.VSCode){let l="countTokens"in r?new Kkt.VSCodeTokenizer((p,m)=>r.countTokens(p,m),a):r,c=new uMe.PromptRenderer(n,t,e,l),u=await c.render(i,o),d=c.getUsedContext();return{...u,usedContext:d}}s(Xkt,"renderPrompt");bs.contentType="application/vnd.codechat.prompt+json.1";function Zkt(t,e,n,r){return new uMe.PromptRenderer({modelMaxPromptTokens:n?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:uue.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===uue.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(n?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(r)}s(Zkt,"renderElementJSON")});var v9=G((Gbr,XQe)=>{f();var P8t="2.0.0",N8t=Number.MAX_SAFE_INTEGER||9007199254740991,L8t=16,F8t=250,M8t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];XQe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:L8t,MAX_SAFE_BUILD_LENGTH:F8t,MAX_SAFE_INTEGER:N8t,RELEASE_TYPES:M8t,SEMVER_SPEC_VERSION:P8t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var b9=G((jbr,ZQe)=>{f();var Q8t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};ZQe.exports=Q8t});var yR=G((dA,eOe)=>{f();var{MAX_SAFE_COMPONENT_LENGTH:Tde,MAX_SAFE_BUILD_LENGTH:O8t,MAX_LENGTH:U8t}=v9(),q8t=b9();dA=eOe.exports={};var W8t=dA.re=[],G8t=dA.safeRe=[],gn=dA.src=[],H8t=dA.safeSrc=[],An=dA.t={},j8t=0,wde="[a-zA-Z0-9-]",V8t=[["\\s",1],["\\d",U8t],[wde,O8t]],$8t=s(t=>{for(let[e,n]of V8t)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},"makeSafeRegex"),ei=s((t,e,n)=>{let r=$8t(e),i=j8t++;q8t(t,i,e),An[t]=i,gn[i]=e,H8t[i]=r,W8t[i]=new RegExp(e,n?"g":void 0),G8t[i]=new RegExp(r,n?"g":void 0)},"createToken");ei("NUMERICIDENTIFIER","0|[1-9]\\d*");ei("NUMERICIDENTIFIERLOOSE","\\d+");ei("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${wde}*`);ei("MAINVERSION",`(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})`);ei("MAINVERSIONLOOSE",`(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})`);ei("PRERELEASEIDENTIFIER",`(?:${gn[An.NUMERICIDENTIFIER]}|${gn[An.NONNUMERICIDENTIFIER]})`);ei("PRERELEASEIDENTIFIERLOOSE",`(?:${gn[An.NUMERICIDENTIFIERLOOSE]}|${gn[An.NONNUMERICIDENTIFIER]})`);ei("PRERELEASE",`(?:-(${gn[An.PRERELEASEIDENTIFIER]}(?:\\.${gn[An.PRERELEASEIDENTIFIER]})*))`);ei("PRERELEASELOOSE",`(?:-?(${gn[An.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${gn[An.PRERELEASEIDENTIFIERLOOSE]})*))`);ei("BUILDIDENTIFIER",`${wde}+`);ei("BUILD",`(?:\\+(${gn[An.BUILDIDENTIFIER]}(?:\\.${gn[An.BUILDIDENTIFIER]})*))`);ei("FULLPLAIN",`v?${gn[An.MAINVERSION]}${gn[An.PRERELEASE]}?${gn[An.BUILD]}?`);ei("FULL",`^${gn[An.FULLPLAIN]}$`);ei("LOOSEPLAIN",`[v=\\s]*${gn[An.MAINVERSIONLOOSE]}${gn[An.PRERELEASELOOSE]}?${gn[An.BUILD]}?`);ei("LOOSE",`^${gn[An.LOOSEPLAIN]}$`);ei("GTLT","((?:<|>)?=?)");ei("XRANGEIDENTIFIERLOOSE",`${gn[An.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ei("XRANGEIDENTIFIER",`${gn[An.NUMERICIDENTIFIER]}|x|X|\\*`);ei("XRANGEPLAIN",`[v=\\s]*(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:${gn[An.PRERELEASE]})?${gn[An.BUILD]}?)?)?`);ei("XRANGEPLAINLOOSE",`[v=\\s]*(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:${gn[An.PRERELEASELOOSE]})?${gn[An.BUILD]}?)?)?`);ei("XRANGE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAIN]}$`);ei("XRANGELOOSE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAINLOOSE]}$`);ei("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Tde}})(?:\\.(\\d{1,${Tde}}))?(?:\\.(\\d{1,${Tde}}))?`);ei("COERCE",`${gn[An.COERCEPLAIN]}(?:$|[^\\d])`);ei("COERCEFULL",gn[An.COERCEPLAIN]+`(?:${gn[An.PRERELEASE]})?(?:${gn[An.BUILD]})?(?:$|[^\\d])`);ei("COERCERTL",gn[An.COERCE],!0);ei("COERCERTLFULL",gn[An.COERCEFULL],!0);ei("LONETILDE","(?:~>?)");ei("TILDETRIM",`(\\s*)${gn[An.LONETILDE]}\\s+`,!0);dA.tildeTrimReplace="$1~";ei("TILDE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAIN]}$`);ei("TILDELOOSE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAINLOOSE]}$`);ei("LONECARET","(?:\\^)");ei("CARETTRIM",`(\\s*)${gn[An.LONECARET]}\\s+`,!0);dA.caretTrimReplace="$1^";ei("CARET",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAIN]}$`);ei("CARETLOOSE",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAINLOOSE]}$`);ei("COMPARATORLOOSE",`^${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]})$|^$`);ei("COMPARATOR",`^${gn[An.GTLT]}\\s*(${gn[An.FULLPLAIN]})$|^$`);ei("COMPARATORTRIM",`(\\s*)${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]}|${gn[An.XRANGEPLAIN]})`,!0);dA.comparatorTrimReplace="$1$2$3";ei("HYPHENRANGE",`^\\s*(${gn[An.XRANGEPLAIN]})\\s+-\\s+(${gn[An.XRANGEPLAIN]})\\s*$`);ei("HYPHENRANGELOOSE",`^\\s*(${gn[An.XRANGEPLAINLOOSE]})\\s+-\\s+(${gn[An.XRANGEPLAINLOOSE]})\\s*$`);ei("STAR","(<|>)?=?\\s*\\*");ei("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ei("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Pj=G((Ybr,tOe)=>{f();var z8t=Object.freeze({loose:!0}),Y8t=Object.freeze({}),K8t=s(t=>t?typeof t!="object"?z8t:t:Y8t,"parseOptions");tOe.exports=K8t});var _de=G((Xbr,iOe)=>{f();var nOe=/^[0-9]+$/,rOe=s((t,e)=>{let n=nOe.test(t),r=nOe.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},"compareIdentifiers"),J8t=s((t,e)=>rOe(e,t),"rcompareIdentifiers");iOe.exports={compareIdentifiers:rOe,rcompareIdentifiers:J8t}});var tu=G((tEr,lOe)=>{f();var Nj=b9(),{MAX_LENGTH:oOe,MAX_SAFE_INTEGER:Lj}=v9(),{safeRe:sOe,safeSrc:aOe,t:Fj}=yR(),X8t=Pj(),{compareIdentifiers:CR}=_de(),Sde=class t{static{s(this,"SemVer")}constructor(e,n){if(n=X8t(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>oOe)throw new TypeError(`version is longer than ${oOe} characters`);Nj("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?sOe[Fj.LOOSE]:sOe[Fj.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Lj||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lj||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lj||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Lj)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Nj("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),CR(this.major,e.major)||CR(this.minor,e.minor)||CR(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(Nj("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return CR(r,i)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(Nj("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return CR(r,i)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let i=new RegExp(`^${this.options.loose?aOe[Fj.PRERELEASELOOSE]:aOe[Fj.PRERELEASE]}$`),o=`-${n}`.match(i);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),CR(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};lOe.exports=Sde});var dT=G((iEr,uOe)=>{f();var cOe=tu(),Z8t=s((t,e,n=!1)=>{if(t instanceof cOe)return t;try{return new cOe(t,e)}catch(r){if(!n)return null;throw r}},"parse");uOe.exports=Z8t});var fOe=G((aEr,dOe)=>{f();var eDt=dT(),tDt=s((t,e)=>{let n=eDt(t,e);return n?n.version:null},"valid");dOe.exports=tDt});var mOe=G((uEr,pOe)=>{f();var nDt=dT(),rDt=s((t,e)=>{let n=nDt(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null},"clean");pOe.exports=rDt});var AOe=G((pEr,gOe)=>{f();var hOe=tu(),iDt=s((t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new hOe(t instanceof hOe?t.version:t,n).inc(e,r,i).version}catch{return null}},"inc");gOe.exports=iDt});var xOe=G((gEr,COe)=>{f();var yOe=dT(),oDt=s((t,e)=>{let n=yOe(t,null,!0),r=yOe(e,null,!0),i=n.compare(r);if(i===0)return null;let o=i>0,a=o?n:r,l=o?r:n,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(a)===0)return l.minor&&!l.patch?"minor":"patch"}let d=c?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"},"diff");COe.exports=oDt});var bOe=G((CEr,vOe)=>{f();var sDt=tu(),aDt=s((t,e)=>new sDt(t,e).major,"major");vOe.exports=aDt});var IOe=G((bEr,EOe)=>{f();var lDt=tu(),cDt=s((t,e)=>new lDt(t,e).minor,"minor");EOe.exports=cDt});var wOe=G((TEr,TOe)=>{f();var uDt=tu(),dDt=s((t,e)=>new uDt(t,e).patch,"patch");TOe.exports=dDt});var SOe=G((SEr,_Oe)=>{f();var fDt=dT(),pDt=s((t,e)=>{let n=fDt(t,e);return n&&n.prerelease.length?n.prerelease:null},"prerelease");_Oe.exports=pDt});var yp=G((BEr,kOe)=>{f();var ROe=tu(),mDt=s((t,e,n)=>new ROe(t,n).compare(new ROe(e,n)),"compare");kOe.exports=mDt});var DOe=G((NEr,BOe)=>{f();var hDt=yp(),gDt=s((t,e,n)=>hDt(e,t,n),"rcompare");BOe.exports=gDt});var NOe=G((MEr,POe)=>{f();var ADt=yp(),yDt=s((t,e)=>ADt(t,e,!0),"compareLoose");POe.exports=yDt});var Mj=G((UEr,FOe)=>{f();var LOe=tu(),CDt=s((t,e,n)=>{let r=new LOe(t,n),i=new LOe(e,n);return r.compare(i)||r.compareBuild(i)},"compareBuild");FOe.exports=CDt});var QOe=G((GEr,MOe)=>{f();var xDt=Mj(),vDt=s((t,e)=>t.sort((n,r)=>xDt(n,r,e)),"sort");MOe.exports=vDt});var UOe=G((VEr,OOe)=>{f();var bDt=Mj(),EDt=s((t,e)=>t.sort((n,r)=>bDt(r,n,e)),"rsort");OOe.exports=EDt});var E9=G((YEr,qOe)=>{f();var IDt=yp(),TDt=s((t,e,n)=>IDt(t,e,n)>0,"gt");qOe.exports=TDt});var Qj=G((XEr,WOe)=>{f();var wDt=yp(),_Dt=s((t,e,n)=>wDt(t,e,n)<0,"lt");WOe.exports=_Dt});var Rde=G((tIr,GOe)=>{f();var SDt=yp(),RDt=s((t,e,n)=>SDt(t,e,n)===0,"eq");GOe.exports=RDt});var kde=G((iIr,HOe)=>{f();var kDt=yp(),BDt=s((t,e,n)=>kDt(t,e,n)!==0,"neq");HOe.exports=BDt});var Oj=G((aIr,jOe)=>{f();var DDt=yp(),PDt=s((t,e,n)=>DDt(t,e,n)>=0,"gte");jOe.exports=PDt});var Uj=G((uIr,VOe)=>{f();var NDt=yp(),LDt=s((t,e,n)=>NDt(t,e,n)<=0,"lte");VOe.exports=LDt});var Bde=G((pIr,$Oe)=>{f();var FDt=Rde(),MDt=kde(),QDt=E9(),ODt=Oj(),UDt=Qj(),qDt=Uj(),WDt=s((t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return FDt(t,n,r);case"!=":return MDt(t,n,r);case">":return QDt(t,n,r);case">=":return ODt(t,n,r);case"<":return UDt(t,n,r);case"<=":return qDt(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");$Oe.exports=WDt});var YOe=G((gIr,zOe)=>{f();var GDt=tu(),HDt=dT(),{safeRe:qj,t:Wj}=yR(),jDt=s((t,e)=>{if(t instanceof GDt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?qj[Wj.COERCEFULL]:qj[Wj.COERCE]);else{let c=e.includePrerelease?qj[Wj.COERCERTLFULL]:qj[Wj.COERCERTL],u;for(;(u=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||u.index+u[0].length!==n.index+n[0].length)&&(n=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],i=n[3]||"0",o=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",l=e.includePrerelease&&n[6]?`+${n[6]}`:"";return HDt(`${r}.${i}.${o}${a}${l}`,e)},"coerce");zOe.exports=jDt});var JOe=G((CIr,KOe)=>{f();var Dde=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}};KOe.exports=Dde});var Cp=G((bIr,tUe)=>{f();var VDt=/\s+/g,Pde=class t{static{s(this,"Range")}constructor(e,n){if(n=zDt(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof Nde)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(VDt," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!ZOe(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&tPt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&ZDt)|(this.options.loose&&ePt))+":"+e,i=XOe.get(r);if(i)return i;let o=this.options.loose,a=o?Fd[Qu.HYPHENRANGELOOSE]:Fd[Qu.HYPHENRANGE];e=e.replace(a,dPt(this.options.includePrerelease)),Es("hyphen replace",e),e=e.replace(Fd[Qu.COMPARATORTRIM],KDt),Es("comparator trim",e),e=e.replace(Fd[Qu.TILDETRIM],JDt),Es("tilde trim",e),e=e.replace(Fd[Qu.CARETTRIM],XDt),Es("caret trim",e);let l=e.split(" ").map(p=>nPt(p,this.options)).join(" ").split(/\s+/).map(p=>uPt(p,this.options));o&&(l=l.filter(p=>(Es("loose invalid filter",p,this.options),!!p.match(Fd[Qu.COMPARATORLOOSE])))),Es("range list",l);let c=new Map,u=l.map(p=>new Nde(p,this.options));for(let p of u){if(ZOe(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return XOe.set(r,d),d}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>eUe(r,n)&&e.set.some(i=>eUe(i,n)&&r.every(o=>i.every(a=>o.intersects(a,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new YDt(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(fPt(this.set[n],e,this.options))return!0;return!1}};tUe.exports=Pde;var $Dt=JOe(),XOe=new $Dt,zDt=Pj(),Nde=I9(),Es=b9(),YDt=tu(),{safeRe:Fd,t:Qu,comparatorTrimReplace:KDt,tildeTrimReplace:JDt,caretTrimReplace:XDt}=yR(),{FLAG_INCLUDE_PRERELEASE:ZDt,FLAG_LOOSE:ePt}=v9(),ZOe=s(t=>t.value==="<0.0.0-0","isNullSet"),tPt=s(t=>t.value==="","isAny"),eUe=s((t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,e)),i=r.pop();return n},"isSatisfiable"),nPt=s((t,e)=>(Es("comp",t,e),t=oPt(t,e),Es("caret",t),t=rPt(t,e),Es("tildes",t),t=aPt(t,e),Es("xrange",t),t=cPt(t,e),Es("stars",t),t),"parseComparator"),Ou=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),rPt=s((t,e)=>t.trim().split(/\s+/).map(n=>iPt(n,e)).join(" "),"replaceTildes"),iPt=s((t,e)=>{let n=e.loose?Fd[Qu.TILDELOOSE]:Fd[Qu.TILDE];return t.replace(n,(r,i,o,a,l)=>{Es("tilde",t,r,i,o,a,l);let c;return Ou(i)?c="":Ou(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Ou(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:l?(Es("replaceTilde pr",l),c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Es("tilde return",c),c})},"replaceTilde"),oPt=s((t,e)=>t.trim().split(/\s+/).map(n=>sPt(n,e)).join(" "),"replaceCarets"),sPt=s((t,e)=>{Es("caret",t,e);let n=e.loose?Fd[Qu.CARETLOOSE]:Fd[Qu.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,o,a,l,c)=>{Es("caret",t,i,o,a,l,c);let u;return Ou(o)?u="":Ou(a)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Ou(l)?o==="0"?u=`>=${o}.${a}.0${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${r} <${+o+1}.0.0-0`:c?(Es("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${l}-${c} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l}-${c} <${+o+1}.0.0-0`):(Es("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${l}${r} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l} <${+o+1}.0.0-0`),Es("caret return",u),u})},"replaceCaret"),aPt=s((t,e)=>(Es("replaceXRanges",t,e),t.split(/\s+/).map(n=>lPt(n,e)).join(" ")),"replaceXRanges"),lPt=s((t,e)=>{t=t.trim();let n=e.loose?Fd[Qu.XRANGELOOSE]:Fd[Qu.XRANGE];return t.replace(n,(r,i,o,a,l,c)=>{Es("xRange",t,r,i,o,a,l,c);let u=Ou(o),d=u||Ou(a),p=d||Ou(l),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&m?(d&&(a=0),l=0,i===">"?(i=">=",d?(o=+o+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(c="-0"),r=`${i+o}.${a}.${l}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Es("xRange return",r),r})},"replaceXRange"),cPt=s((t,e)=>(Es("replaceStars",t,e),t.trim().replace(Fd[Qu.STAR],"")),"replaceStars"),uPt=s((t,e)=>(Es("replaceGTE0",t,e),t.trim().replace(Fd[e.includePrerelease?Qu.GTE0PRE:Qu.GTE0],"")),"replaceGTE0"),dPt=s(t=>(e,n,r,i,o,a,l,c,u,d,p,m)=>(Ou(r)?n="":Ou(i)?n=`>=${r}.0.0${t?"-0":""}`:Ou(o)?n=`>=${r}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Ou(u)?c="":Ou(d)?c=`<${+u+1}.0.0-0`:Ou(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),"hyphenReplace"),fPt=s((t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Es(t[r].semver),t[r].semver!==Nde.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var I9=G((TIr,aUe)=>{f();var T9=Symbol("SemVer ANY"),Mde=class t{static{s(this,"Comparator")}static get ANY(){return T9}constructor(e,n){if(n=nUe(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Fde("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===T9?this.value="":this.value=this.operator+this.semver.version,Fde("comp",this)}parse(e){let n=this.options.loose?rUe[iUe.COMPARATORLOOSE]:rUe[iUe.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new oUe(r[2],this.options.loose):this.semver=T9}toString(){return this.value}test(e){if(Fde("Comparator.test",e,this.options.loose),this.semver===T9||e===T9)return!0;if(typeof e=="string")try{e=new oUe(e,this.options)}catch{return!1}return Lde(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new sUe(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new sUe(this.value,n).test(e.semver):(n=nUe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Lde(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Lde(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};aUe.exports=Mde;var nUe=Pj(),{safeRe:rUe,t:iUe}=yR(),Lde=Bde(),Fde=b9(),oUe=tu(),sUe=Cp()});var w9=G((SIr,lUe)=>{f();var pPt=Cp(),mPt=s((t,e,n)=>{try{e=new pPt(e,n)}catch{return!1}return e.test(t)},"satisfies");lUe.exports=mPt});var uUe=G((BIr,cUe)=>{f();var hPt=Cp(),gPt=s((t,e)=>new hPt(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" ")),"toComparators");cUe.exports=gPt});var fUe=G((NIr,dUe)=>{f();var APt=tu(),yPt=Cp(),CPt=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new yPt(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new APt(r,n))}),r},"maxSatisfying");dUe.exports=CPt});var mUe=G((MIr,pUe)=>{f();var xPt=tu(),vPt=Cp(),bPt=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new vPt(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new xPt(r,n))}),r},"minSatisfying");pUe.exports=bPt});var AUe=G((UIr,gUe)=>{f();var Qde=tu(),EPt=Cp(),hUe=E9(),IPt=s((t,e)=>{t=new EPt(t,e);let n=new Qde("0.0.0");if(t.test(n)||(n=new Qde("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null;i.forEach(a=>{let l=new Qde(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||hUe(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!n||hUe(n,o))&&(n=o)}return n&&t.test(n)?n:null},"minVersion");gUe.exports=IPt});var CUe=G((GIr,yUe)=>{f();var TPt=Cp(),wPt=s((t,e)=>{try{return new TPt(t,e).range||"*"}catch{return null}},"validRange");yUe.exports=wPt});var Gj=G((VIr,EUe)=>{f();var _Pt=tu(),bUe=I9(),{ANY:SPt}=bUe,RPt=Cp(),kPt=w9(),xUe=E9(),vUe=Qj(),BPt=Uj(),DPt=Oj(),PPt=s((t,e,n,r)=>{t=new _Pt(t,r),e=new RPt(e,r);let i,o,a,l,c;switch(n){case">":i=xUe,o=BPt,a=vUe,l=">",c=">=";break;case"<":i=vUe,o=DPt,a=xUe,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kPt(t,e,r))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===SPt&&(h=new bUe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,r)?p=h:a(h.semver,m.semver,r)&&(m=h)}),p.operator===l||p.operator===c||(!m.operator||m.operator===l)&&o(t,m.semver))return!1;if(m.operator===c&&a(t,m.semver))return!1}return!0},"outside");EUe.exports=PPt});var TUe=G((YIr,IUe)=>{f();var NPt=Gj(),LPt=s((t,e,n)=>NPt(t,e,">",n),"gtr");IUe.exports=LPt});var _Ue=G((XIr,wUe)=>{f();var FPt=Gj(),MPt=s((t,e,n)=>FPt(t,e,"<",n),"ltr");wUe.exports=MPt});var kUe=G((t2r,RUe)=>{f();var SUe=Cp(),QPt=s((t,e,n)=>(t=new SUe(t,n),e=new SUe(e,n),t.intersects(e,n)),"intersects");RUe.exports=QPt});var DUe=G((i2r,BUe)=>{f();var OPt=w9(),UPt=yp();BUe.exports=(t,e,n)=>{let r=[],i=null,o=null,a=t.sort((d,p)=>UPt(d,p,n));for(let d of a)OPt(d,e,n)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let l=[];for(let[d,p]of r)d===p?l.push(d):!p&&d===a[0]?l.push("*"):p?d===a[0]?l.push(`<=${p}`):l.push(`${d} - ${p}`):l.push(`>=${d}`);let c=l.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var QUe=G((s2r,MUe)=>{f();var PUe=Cp(),Ude=I9(),{ANY:Ode}=Ude,_9=w9(),qde=yp(),qPt=s((t,e,n={})=>{if(t===e)return!0;t=new PUe(t,n),e=new PUe(e,n);let r=!1;e:for(let i of t.set){for(let o of e.set){let a=GPt(i,o,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},"subset"),WPt=[new Ude(">=0.0.0-0")],NUe=[new Ude(">=0.0.0")],GPt=s((t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Ode){if(e.length===1&&e[0].semver===Ode)return!0;n.includePrerelease?t=WPt:t=NUe}if(e.length===1&&e[0].semver===Ode){if(n.includePrerelease)return!0;e=NUe}let r=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=LUe(i,h,n):h.operator==="<"||h.operator==="<="?o=FUe(o,h,n):r.add(h.semver);if(r.size>1)return null;let a;if(i&&o){if(a=qde(i.semver,o.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of r){if(i&&!_9(h,String(i),n)||o&&!_9(h,String(o),n))return null;for(let g of e)if(!_9(h,String(g),n))return!1;return!0}let l,c,u,d,p=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(l=LUe(i,h,n),l===h&&l!==i)return!1}else if(i.operator===">="&&!_9(i.semver,String(h),n))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=FUe(o,h,n),c===h&&c!==o)return!1}else if(o.operator==="<="&&!_9(o.semver,String(h),n))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),LUe=s((t,e,n)=>{if(!t)return e;let r=qde(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),FUe=s((t,e,n)=>{if(!t)return e;let r=qde(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");MUe.exports=qPt});var Gde=G((c2r,qUe)=>{f();var Wde=yR(),OUe=v9(),HPt=tu(),UUe=_de(),jPt=dT(),VPt=fOe(),$Pt=mOe(),zPt=AOe(),YPt=xOe(),KPt=bOe(),JPt=IOe(),XPt=wOe(),ZPt=SOe(),e9t=yp(),t9t=DOe(),n9t=NOe(),r9t=Mj(),i9t=QOe(),o9t=UOe(),s9t=E9(),a9t=Qj(),l9t=Rde(),c9t=kde(),u9t=Oj(),d9t=Uj(),f9t=Bde(),p9t=YOe(),m9t=I9(),h9t=Cp(),g9t=w9(),A9t=uUe(),y9t=fUe(),C9t=mUe(),x9t=AUe(),v9t=CUe(),b9t=Gj(),E9t=TUe(),I9t=_Ue(),T9t=kUe(),w9t=DUe(),_9t=QUe();qUe.exports={parse:jPt,valid:VPt,clean:$Pt,inc:zPt,diff:YPt,major:KPt,minor:JPt,patch:XPt,prerelease:ZPt,compare:e9t,rcompare:t9t,compareLoose:n9t,compareBuild:r9t,sort:i9t,rsort:o9t,gt:s9t,lt:a9t,eq:l9t,neq:c9t,gte:u9t,lte:d9t,cmp:f9t,coerce:p9t,Comparator:m9t,Range:h9t,satisfies:g9t,toComparators:A9t,maxSatisfying:y9t,minSatisfying:C9t,minVersion:x9t,validRange:v9t,outside:b9t,gtr:E9t,ltr:I9t,intersects:T9t,simplifyRange:w9t,subset:_9t,SemVer:HPt,re:Wde.re,src:Wde.src,tokens:Wde.t,SEMVER_SPEC_VERSION:OUe.SEMVER_SPEC_VERSION,RELEASE_TYPES:OUe.RELEASE_TYPES,compareIdentifiers:UUe.compareIdentifiers,rcompareIdentifiers:UUe.rcompareIdentifiers}});var V0=G(k9=>{"use strict";f();Object.defineProperty(k9,"__esModule",{value:!0});k9.dedent=void 0;function cqe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(l,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?l.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):l},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(l){return l.replace(o,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach(function(l,c){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=l;typeof l=="string"&&l.includes(`
`)&&(p=String(l).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+r[c+1]}),a}s(cqe,"dedent");k9.dedent=cqe;k9.default=cqe});var Aqe=G(r0e=>{"use strict";f();Object.defineProperty(r0e,"__esModule",{value:!0});r0e.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var Eqe=G(o0e=>{"use strict";f();Object.defineProperty(o0e,"__esModule",{value:!0});var yqe=require("worker_threads"),z9t=require("v8"),Y9t=require("os"),Cqe=Aqe(),Xj="ready",xqe="spawning",K9t="busy",Zj="off",vqe=Y9t.cpus().length,bqe=process.version.replace("v","").split("."),J9t=parseInt(bqe[0]),X9t=parseInt(bqe[1]),i0e=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=vqe,this.taskQueue=[],this.workers=[]}resurrect(e){let n=new yqe.Worker(Cqe.workerFile,{eval:!0});e.status=xqe,e.worker=n,n.once("online",()=>process.nextTick(()=>{e.status=Xj,n.removeAllListeners(),this.tick()})),n.once("error",r=>{console.error(r),e.status=Zj,n.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:c})=>c===Zj).forEach(c=>this.resurrect(c)),this.taskQueue.length===0)return;let e;for(let c=0;c<this.workers.length;c++)if(this.workers[c].status===Xj){e=this.workers[c];break}if(typeof e>"u")return;let n=this.taskQueue.shift();e.status=K9t;let{worker:r}=e,{handler:i,config:o,resolve:a,reject:l}=n;try{let c="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}c+=`let ${m} = ${h}
`}let u=z9t.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${c}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;r.once("message",m=>{if(this.free(r),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,l(h)}),r.once("error",m=>{e.status=Zj,l(m),this.tick()}),r.postMessage(p)}catch(c){this.free(r),l(c)}}enqueue({handler:e,config:n,resolve:r,reject:i}){this.taskQueue.push({handler:e,config:n,resolve:r,reject:i}),this.tick()}free(e){for(let n=0;n<this.workers.length;n++)if(e.threadId===this.workers[n].worker.threadId){this.workers[n].status=Xj,this.workers[n].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:vqe,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((n,r)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let l=new yqe.Worker(Cqe.workerFile,{eval:!0});this.workers.push({status:xqe,worker:l}),l.once("online",(c=>()=>{process.nextTick(()=>{this.workers[c].status=Xj,this.workers[c].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&n()})})(a)),l.once("error",(c=>u=>{this.workers[c].status=Zj,this.workers[c].worker.removeAllListeners(),o++,o===this.maxWorkers&&r(u)})(a))}})}async teardown(){if(J9t>=12&&X9t>=5){let e=[];for(let{worker:n}of this.workers)e.push(n.terminate());await Promise.all(e),this.workers=[]}else await new Promise(n=>{let r=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{r++,r===this.workers.length&&(this.workers=[],n())})})}};o0e.default=new i0e});var eV=G(fT=>{"use strict";f();var Z9t=fT&&fT.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fT,"__esModule",{value:!0});var B9=Z9t(Eqe()),e6t=`job needs a function.
Try with:
> job(() => {...}, config)`,t6t=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function n6t(t,e={ctx:{},data:{}}){return new Promise((n,r)=>{if(typeof t!="function")return r(new Error(e6t));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return r(new Error(t6t));B9.default.enqueue({handler:t,config:e,resolve:n,reject:r})})}s(n6t,"job");fT.job=n6t;fT.stop=B9.default.teardown.bind(B9.default);fT.start=B9.default.setup.bind(B9.default)});var Uqe=G(pT=>{"use strict";f();var AA=pT&&pT.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},h0e=pT&&pT.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Sy,Tb;Object.defineProperty(pT,"__esModule",{value:!0});var g0e=class{static{s(this,"AwaitLock")}constructor(){Sy.set(this,!1),Tb.set(this,new Set)}get acquired(){return AA(this,Sy,"f")}acquireAsync({timeout:e}={}){if(!AA(this,Sy,"f"))return h0e(this,Sy,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{AA(this,Tb,"f").add(i)});let n,r;return Promise.race([new Promise(i=>{n=s(()=>{clearTimeout(r),i()},"resolver"),AA(this,Tb,"f").add(n)}),new Promise((i,o)=>{r=setTimeout(()=>{AA(this,Tb,"f").delete(n),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return AA(this,Sy,"f")?!1:(h0e(this,Sy,!0,"f"),!0)}release(){if(!AA(this,Sy,"f"))throw new Error("Cannot release an unacquired lock");if(AA(this,Tb,"f").size>0){let[e]=AA(this,Tb,"f");AA(this,Tb,"f").delete(e),e()}else h0e(this,Sy,!1,"f")}};pT.default=g0e;Sy=new WeakMap,Tb=new WeakMap});var YHe=G((kVr,zHe)=>{f();var WR=1e3,GR=WR*60,HR=GR*60,bT=HR*24,IQt=bT*7,TQt=bT*365.25;zHe.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return wQt(t);if(n==="number"&&isFinite(t))return e.long?SQt(t):_Qt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function wQt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*TQt;case"weeks":case"week":case"w":return n*IQt;case"days":case"day":case"d":return n*bT;case"hours":case"hour":case"hrs":case"hr":case"h":return n*HR;case"minutes":case"minute":case"mins":case"min":case"m":return n*GR;case"seconds":case"second":case"secs":case"sec":case"s":return n*WR;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}s(wQt,"parse");function _Qt(t){var e=Math.abs(t);return e>=bT?Math.round(t/bT)+"d":e>=HR?Math.round(t/HR)+"h":e>=GR?Math.round(t/GR)+"m":e>=WR?Math.round(t/WR)+"s":t+"ms"}s(_Qt,"fmtShort");function SQt(t){var e=Math.abs(t);return e>=bT?P$(t,e,bT,"day"):e>=HR?P$(t,e,HR,"hour"):e>=GR?P$(t,e,GR,"minute"):e>=WR?P$(t,e,WR,"second"):t+" ms"}s(SQt,"fmtLong");function P$(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}s(P$,"plural")});var $fe=G((PVr,KHe)=>{f();function RQt(t){n.debug=n,n.default=n,n.coerce=c,n.disable=o,n.enable=i,n.enabled=a,n.humanize=YHe(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return n.colors[Math.abs(p)%n.colors.length]}s(e,"selectColor"),n.selectColor=e;function n(d){let p,m=null,h,g;function y(...v){if(!y.enabled)return;let b=y,E=Number(new Date),_=E-(p||E);b.diff=_,b.prev=p,b.curr=E,p=E,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,Q)=>{if(N==="%%")return"%";k++;let Z=n.formatters[Q];if(typeof Z=="function"){let me=v[k];N=Z.call(b,me),v.splice(k,1),k--}return N}),n.formatArgs.call(b,v),(b.log||n.log).apply(b,v)}return s(y,"debug"),y.namespace=d,y.useColors=n.useColors(),y.color=n.selectColor(d),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==n.namespaces&&(h=n.namespaces,g=n.enabled(d)),g),"get"),set:s(v=>{m=v},"set")}),typeof n.init=="function"&&n.init(y),y}s(n,"createDebug");function r(d,p){let m=n(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(r,"extend");function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...n.names.map(l),...n.skips.map(l).map(p=>"-"+p)].join(",");return n.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=n.skips.length;p<m;p++)if(n.skips[p].test(d))return!1;for(p=0,m=n.names.length;p<m;p++)if(n.names[p].test(d))return!0;return!1}s(a,"enabled");function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(l,"toNamespace");function c(d){return d instanceof Error?d.stack||d.message:d}s(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),n.enable(n.load()),n}s(RQt,"setup");KHe.exports=RQt});var JHe=G((z0,N$)=>{f();z0.formatArgs=BQt;z0.save=DQt;z0.load=PQt;z0.useColors=kQt;z0.storage=NQt();z0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();z0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function kQt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(kQt,"useColors");function BQt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+N$.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}s(BQt,"formatArgs");z0.log=console.debug||console.log||(()=>{});function DQt(t){try{t?z0.storage.setItem("debug",t):z0.storage.removeItem("debug")}catch{}}s(DQt,"save");function PQt(){let t;try{t=z0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(PQt,"load");function NQt(){try{return localStorage}catch{}}s(NQt,"localstorage");N$.exports=$fe()(z0);var{formatters:LQt}=N$.exports;LQt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ZHe=G((QVr,XHe)=>{"use strict";f();XHe.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var nje=G((UVr,tje)=>{"use strict";f();var FQt=require("os"),eje=require("tty"),Tp=ZHe(),{env:Kl}=process,Pb;Tp("no-color")||Tp("no-colors")||Tp("color=false")||Tp("color=never")?Pb=0:(Tp("color")||Tp("colors")||Tp("color=true")||Tp("color=always"))&&(Pb=1);"FORCE_COLOR"in Kl&&(Kl.FORCE_COLOR==="true"?Pb=1:Kl.FORCE_COLOR==="false"?Pb=0:Pb=Kl.FORCE_COLOR.length===0?1:Math.min(parseInt(Kl.FORCE_COLOR,10),3));function zfe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(zfe,"translateLevel");function Yfe(t,e){if(Pb===0)return 0;if(Tp("color=16m")||Tp("color=full")||Tp("color=truecolor"))return 3;if(Tp("color=256"))return 2;if(t&&!e&&Pb===void 0)return 0;let n=Pb||0;if(Kl.TERM==="dumb")return n;if(process.platform==="win32"){let r=FQt.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Kl)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in Kl)||Kl.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in Kl)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Kl.TEAMCITY_VERSION)?1:0;if(Kl.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Kl){let r=parseInt((Kl.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Kl.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Kl.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Kl.TERM)||"COLORTERM"in Kl?1:n}s(Yfe,"supportsColor");function MQt(t){let e=Yfe(t,t&&t.isTTY);return zfe(e)}s(MQt,"getSupportLevel");tje.exports={supportsColor:MQt,stdout:zfe(Yfe(!0,eje.isatty(1))),stderr:zfe(Yfe(!0,eje.isatty(2)))}});var ije=G((Ic,F$)=>{f();var QQt=require("tty"),L$=require("util");Ic.init=jQt;Ic.log=WQt;Ic.formatArgs=UQt;Ic.save=GQt;Ic.load=HQt;Ic.useColors=OQt;Ic.destroy=L$.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ic.colors=[6,2,3,4,5,1];try{let t=nje();t&&(t.stderr||t).level>=2&&(Ic.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ic.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function OQt(){return"colors"in Ic.inspectOpts?!!Ic.inspectOpts.colors:QQt.isatty(process.stderr.fd)}s(OQt,"useColors");function UQt(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+F$.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=qQt()+e+" "+t[0]}s(UQt,"formatArgs");function qQt(){return Ic.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(qQt,"getDate");function WQt(...t){return process.stderr.write(L$.format(...t)+`
`)}s(WQt,"log");function GQt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(GQt,"save");function HQt(){return process.env.DEBUG}s(HQt,"load");function jQt(t){t.inspectOpts={};let e=Object.keys(Ic.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=Ic.inspectOpts[e[n]]}s(jQt,"init");F$.exports=$fe()(Ic);var{formatters:rje}=F$.exports;rje.o=function(t){return this.inspectOpts.colors=this.useColors,L$.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};rje.O=function(t){return this.inspectOpts.colors=this.useColors,L$.inspect(t,this.inspectOpts)}});var ET=G((jVr,Kfe)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Kfe.exports=JHe():Kfe.exports=ije()});var npe=G((YVr,lje)=>{f();var i6=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,VQt=typeof AbortController=="function",M$=VQt?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new oje}abort(){this.signal.dispatchEvent("abort")}},$Qt=typeof AbortSignal=="function",zQt=typeof M$.AbortSignal=="function",oje=$Qt?AbortSignal:zQt?M$.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let n={type:e,target:this};this.onabort(n),this._listeners.forEach(r=>r(n),this)}}onabort(){}addEventListener(e,n){e==="abort"&&this._listeners.push(n)}removeEventListener(e,n){e==="abort"&&(this._listeners=this._listeners.filter(r=>r!==n))}},epe=new Set,Jfe=s((t,e)=>{let n=`LRU_CACHE_OPTION_${t}`;Q$(n)&&tpe(n,`${t} option`,`options.${e}`,VR)},"deprecatedOption"),Xfe=s((t,e)=>{let n=`LRU_CACHE_METHOD_${t}`;if(Q$(n)){let{prototype:r}=VR,{get:i}=Object.getOwnPropertyDescriptor(r,t);tpe(n,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),YQt=s((t,e)=>{let n=`LRU_CACHE_PROPERTY_${t}`;if(Q$(n)){let{prototype:r}=VR,{get:i}=Object.getOwnPropertyDescriptor(r,t);tpe(n,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),sje=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),Q$=s(t=>!epe.has(t),"shouldWarn"),tpe=s((t,e,n,r)=>{epe.add(t);let i=`The ${e} is deprecated. Please use ${n} instead.`;sje(i,"DeprecationWarning",t,r)},"warn"),IT=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),aje=s(t=>IT(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?jR:null:null,"getUintArray"),jR=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},Zfe=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let n=aje(e);this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},VR=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:E}=e,{length:_,maxAge:k,stale:D}=e instanceof t?{}:e;if(n!==0&&!IT(n))throw new TypeError("max option must be a nonnegative integer");let N=n?aje(n):Array;if(!N)throw new Error("invalid max value: "+n);if(this.max=n,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(n).fill(null),this.valList=new Array(n).fill(null),this.next=new N(n),this.prev=new N(n),this.head=0,this.tail=0,this.free=new Zfe(n),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!IT(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!D,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=IT(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||k||0,this.ttl){if(!IT(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let Q="LRU_CACHE_UNBOUNDED";Q$(Q)&&(epe.add(Q),sje("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Q,t))}D&&Jfe("stale","allowStale"),k&&Jfe("maxAge","ttl"),_&&Jfe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new jR(this.max),this.starts=new jR(this.max),this.setItemTTL=(r,i,o=i6.now())=>{if(this.starts[r]=i!==0?o:0,this.ttls[r]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(r)&&this.delete(this.keyList[r])},i+1);a.unref&&a.unref()}},this.updateItemAge=r=>{this.starts[r]=this.ttls[r]!==0?i6.now():0};let e=0,n=s(()=>{let r=i6.now();if(this.ttlResolution>0){e=r;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return r},"getNow");this.getRemainingTTL=r=>{let i=this.keyMap.get(r);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||n())},this.isStale=r=>this.ttls[r]!==0&&this.starts[r]!==0&&(e||n())-this.starts[r]>this.ttls[r]}updateItemAge(e){}setItemTTL(e,n,r){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new jR(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,n,r,i)=>{if(!IT(r))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(r=i(n,e),!IT(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return r},this.addItemSize=(e,n)=>{this.sizes[e]=n;let r=this.maxSize-this.sizes[e];for(;this.calculatedSize>r;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,n){}requireSize(e,n,r,i){if(r||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.tail;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.head));)n=this.prev[n]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.head;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.tail));)n=this.next[n]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,n={}){for(let r of this.indexes())if(e(this.valList[r],this.keyList[r],this))return this.get(this.keyList[r],n)}forEach(e,n=this){for(let r of this.indexes())e.call(n,this.valList[r],this.keyList[r],this)}rforEach(e,n=this){for(let r of this.rindexes())e.call(n,this.valList[r],this.keyList[r],this)}get prune(){return Xfe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let n of this.rindexes({allowStale:!0}))this.isStale(n)&&(this.delete(this.keyList[n]),e=!0);return e}dump(){let e=[];for(let n of this.indexes({allowStale:!0})){let r=this.keyList[n],i=this.valList[n],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[n];let l=i6.now()-this.starts[n];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[n]),e.unshift([r,a])}return e}load(e){this.clear();for(let[n,r]of e){if(r.start){let i=Date.now()-r.start;r.start=i6.now()-i}this.set(n,r.value,r)}}dispose(e,n,r){}set(e,n,{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,n,a,l),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=n,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),c=!1;else{let d=this.valList[u];n!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=n,this.addItemSize(u,a)),this.moveToTail(u)}if(r!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,r,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let n=this.head,r=this.keyList[n],i=this.valList[n];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,r,"evict"),this.disposeAfter&&this.disposed.push([i,r,"evict"])),this.removeItemSize(n),e&&(this.keyList[n]=null,this.valList[n]=null,this.free.push(n)),this.head=this.next[n],this.keyMap.delete(r),this.size--,n}has(e,{updateAgeOnHas:n=this.updateAgeOnHas}={}){let r=this.keyMap.get(e);return r!==void 0&&!this.isStale(r)?(n&&this.updateItemAge(r),!0):!1}peek(e,{allowStale:n=this.allowStale}={}){let r=this.keyMap.get(e);if(r!==void 0&&(n||!this.isStale(r))){let i=this.valList[r];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,n,r,i){let o=n===void 0?void 0:this.valList[n];if(this.isBackgroundFetch(o))return o;let a=new M$,l={signal:a.signal,options:r,context:i},c=s(m=>(a.signal.aborted||this.set(e,m,l.options),m),"cb"),u=s(m=>{if(this.valList[n]===p&&(!r.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[n]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,l)),"pcall"),p=new Promise(d).then(c,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,n===void 0?(this.set(e,p,l.options),n=this.keyMap.get(e)):this.valList[n]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i});let h={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return n&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),r&&this.updateItemAge(g),y;let v=this.backgroundFetch(e,g,h,p);return n&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],l=this.isBackgroundFetch(a);return this.isStale(o)?l?n?a.__staleWhileFetching:void 0:(i||this.delete(e),n?a:void 0):l?void 0:(this.moveToTail(o),r&&this.updateItemAge(o),a)}}connect(e,n){this.prev[n]=e,this.next[e]=n}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Xfe("del","delete"),this.delete}delete(e){let n=!1;if(this.size!==0){let r=this.keyMap.get(e);if(r!==void 0)if(n=!0,this.size===1)this.clear();else{this.removeItemSize(r);let i=this.valList[r];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return n}clear(){for(let e of this.rindexes({allowStale:!0})){let n=this.valList[e];if(this.isBackgroundFetch(n))n.__abortController.abort();else{let r=this.keyList[e];this.dispose(n,r,"delete"),this.disposeAfter&&this.disposed.push([n,r,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Xfe("reset","clear"),this.clear}get length(){return YQt("length","size"),this.size}static get AbortController(){return M$}static get AbortSignal(){return oje}};lje.exports=VR});var ope=G((XVr,cje)=>{"use strict";f();var o6=class extends Error{static{s(this,"FetchBaseError")}constructor(e,n,r){super(e),this.type=n,this._name=r}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},rpe=class extends o6{static{s(this,"FetchError")}constructor(e,n,r){super(e,n,"FetchError"),r&&(this.code=r.code,this.errno=r.errno,this.erroredSysCall=r.syscall)}},ipe=class extends o6{static{s(this,"AbortError")}constructor(e,n="aborted"){super(e,n,"AbortError")}};cje.exports={FetchBaseError:o6,FetchError:rpe,AbortError:ipe}});var Fy=G((t$r,dje)=>{"use strict";f();var{constants:{MAX_LENGTH:KQt}}=require("buffer"),{pipeline:O$,PassThrough:JQt}=require("stream"),{promisify:XQt}=require("util"),{createGunzip:ZQt,createInflate:eOt,createBrotliDecompress:tOt,constants:{Z_SYNC_FLUSH:uje}}=require("zlib"),nOt=ET()("helix-fetch:utils"),rOt=XQt(O$),iOt=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),oOt=s((t,e,n,r)=>{if(!iOt(t,e))return n;let i=s(o=>{o&&(nOt(`encountered error while decoding stream: ${o}`),r(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return O$(n,ZQt({flush:uje,finishFlush:uje}),i);case"deflate":case"x-deflate":return O$(n,eOt(),i);case"br":return O$(n,tOt(),i);default:return n}},"decodeStream"),sOt=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),U$=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?aOt(t,e):lOt(t,e);default:return 0}},"calcSize"),aOt=s((t,e)=>(e.add(t),t.map(n=>e.has(n)?0:U$(n,e)).reduce((n,r)=>n+r,0)),"calcArraySize"),lOt=s((t,e)=>{if(t==null)return 0;e.add(t);let n=0,r=[];for(let i in t)r.push(i);return r.push(...Object.getOwnPropertySymbols(t)),r.forEach(i=>{if(n+=U$(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}n+=U$(t[i],e)}),n},"calcObjectSize"),cOt=s(t=>U$(t,new WeakSet),"sizeof"),uOt=s(async t=>{let e=new JQt,n=0,r=[];return e.on("data",i=>{if(n+i.length>KQt)throw new Error("Buffer.constants.MAX_SIZE exceeded");r.push(i),n+=i.length}),await rOt(t,e),Buffer.concat(r,n)},"streamToBuffer");dje.exports={decodeStream:oOt,isPlainObject:sOt,sizeof:cOt,streamToBuffer:uOt}});var W$=G((i$r,hje)=>{"use strict";f();var{PassThrough:fje,Readable:My}=require("stream"),{types:{isAnyArrayBuffer:mje}}=require("util"),{FetchError:dOt,FetchBaseError:fOt}=ope(),{streamToBuffer:pOt}=Fy(),mOt=Buffer.alloc(0),wp=Symbol("Body internals"),hOt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),pje=s(async t=>{if(t[wp].disturbed)throw new TypeError("Already read");if(t[wp].error)throw new TypeError(`Stream had error: ${t[wp].error.message}`);t[wp].disturbed=!0;let{stream:e}=t[wp];return e===null?mOt:pOt(e)},"consume"),q$=class{static{s(this,"Body")}constructor(e){let n;e==null?n=null:e instanceof URLSearchParams?n=My.from(e.toString()):e instanceof My?n=e:Buffer.isBuffer(e)?n=My.from(e):mje(e)?n=My.from(Buffer.from(e)):typeof e=="string"||e instanceof String?n=My.from(e):n=My.from(String(e)),this[wp]={stream:n,disturbed:!1,error:null},e instanceof My&&n.on("error",r=>{let i=r instanceof fOt?r:new dOt(`Invalid response body while trying to fetch ${this.url}: ${r.message}`,"system",r);this[wp].error=i})}get body(){return this[wp].stream}get bodyUsed(){return this[wp].disturbed}async buffer(){return pje(this)}async arrayBuffer(){return hOt(await this.buffer())}async text(){return(await pje(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(q$.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var gOt=s(t=>{if(t[wp].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[wp],n=e;if(e instanceof My){n=new fje;let r=new fje;e.pipe(n),e.pipe(r),t[wp].stream=r}return n},"cloneStream"),AOt=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||mje(t)||t instanceof My?null:"text/plain; charset=utf-8","guessContentType");hje.exports={Body:q$,cloneStream:gOt,guessContentType:AOt}});var $R=G((a$r,Cje)=>{"use strict";f();var{validateHeaderName:gje,validateHeaderValue:Aje}=require("http"),{isPlainObject:yOt}=Fy(),Qy=Symbol("Headers internals"),s6=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof gje=="function")gje(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let n=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),n}return e.toLowerCase()},"normalizeName"),yje=s((t,e)=>{let n=typeof t!="string"?String(t):t;if(typeof Aje=="function")Aje(e,n);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(n)){let r=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}return n},"normalizeValue"),G$=class t{static{s(this,"Headers")}constructor(e={}){if(this[Qy]={map:new Map},e instanceof t)e.forEach((n,r)=>{this.append(r,n)});else if(Array.isArray(e))e.forEach(([n,r])=>{this.append(n,r)});else if(yOt(e))for(let[n,r]of Object.entries(e))this.append(n,r)}set(e,n){this[Qy].map.set(s6(e),yje(n,e))}has(e){return this[Qy].map.has(s6(e))}get(e){let n=this[Qy].map.get(s6(e));return n===void 0?null:n}append(e,n){let r=s6(e),i=yje(n,e),o=this[Qy].map.get(r);this[Qy].map.set(r,o?`${o}, ${i}`:i)}delete(e){this[Qy].map.delete(s6(e))}forEach(e,n){for(let r of this.keys())e.call(n,this.get(r),r)}keys(){return Array.from(this[Qy].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Qy].map)}};Object.defineProperties(G$.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));Cje.exports={Headers:G$}});var spe=G((u$r,xje)=>{"use strict";f();var{EventEmitter:COt}=require("events"),ah=Symbol("AbortSignal internals"),zR=class{static{s(this,"AbortSignal")}constructor(){this[ah]={eventEmitter:new COt,onabort:null,aborted:!1}}get aborted(){return this[ah].aborted}get onabort(){return this[ah].onabort}set onabort(e){this[ah].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,n){this[ah].eventEmitter.removeListener(e,n)}addEventListener(e,n){this[ah].eventEmitter.on(e,n)}dispatchEvent(e){let n={type:e,target:this},r=`on${e}`;typeof this[ah][r]=="function"&&this[r](n),this[ah].eventEmitter.emit(e,n)}fire(){this[ah].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(zR.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var j$=class extends zR{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[ah].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[ah].timerId)}};Object.defineProperties(j$.prototype,{clear:{enumerable:!0}});var H$=Symbol("AbortController internals"),V$=class{static{s(this,"AbortController")}constructor(){this[H$]={signal:new zR}}get signal(){return this[H$].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[H$].signal.aborted||this[H$].signal.fire()}};Object.defineProperties(V$.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});xje.exports={AbortController:V$,AbortSignal:zR,TimeoutSignal:j$}});var a6=G((p$r,Eje)=>{"use strict";f();var{randomBytes:xOt}=require("crypto"),{Readable:vOt}=require("stream"),lpe=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),bOt=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),vje=s(t=>`--${t}--\r
\r
`,"getFooter"),bje=s((t,e,n)=>{let r="";return r+=`--${t}\r
`,r+=`Content-Disposition: form-data; name="${e}"`,lpe(n)&&(r+=`; filename="${n.name}"\r
`,r+=`Content-Type: ${n.type||"application/octet-stream"}`),`${r}\r
\r
`},"getHeader");async function*EOt(t,e){for(let[n,r]of t)yield bje(e,n,r),lpe(r)?yield*r.stream():yield r,yield`\r
`;yield vje(e)}s(EOt,"formDataIterator");var IOt=s((t,e)=>{let n=0;for(let[r,i]of t)n+=Buffer.byteLength(bje(e,r,i)),n+=lpe(i)?i.size:Buffer.byteLength(String(i)),n+=Buffer.byteLength(`\r
`);return n+=Buffer.byteLength(vje(e)),n},"getFormDataLength"),ape=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=xOt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=IOt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return vOt.from(EOt(this.fd,this.boundary))}};Eje.exports={isFormData:bOt,FormDataSerializer:ape}});var Tje=G((g$r,Ije)=>{"use strict";f();var{AbortSignal:TOt}=spe(),{Body:wOt,cloneStream:_Ot,guessContentType:SOt}=W$(),{Headers:ROt}=$R(),{isPlainObject:kOt}=Fy(),{isFormData:BOt,FormDataSerializer:DOt}=a6(),POt=20,Nb=Symbol("Request internals"),$$=class t extends wOt{static{s(this,"Request")}constructor(e,n={}){let r=e instanceof t?e:null,i=r?new URL(r.url):new URL(e),o=n.method||r&&r.method||"GET";if(o=o.toUpperCase(),(n.body!=null||r&&r.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=n.body||(r&&r.body?_Ot(r):null),l=new ROt(n.headers||r&&r.headers||{});if(BOt(a)&&!l.has("content-type")){let p=new DOt(a);a=p.stream(),l.set("content-type",p.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",p.length())}if(!l.has("content-type"))if(kOt(a))a=JSON.stringify(a),l.set("content-type","application/json");else{let p=SOt(a);p&&l.set("content-type",p)}super(a);let c=r?r.signal:null;if("signal"in n&&(c=n.signal),c&&!(c instanceof TOt))throw new TypeError("signal needs to be an instance of AbortSignal");let u=n.redirect||r&&r.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=n.cache||r&&r.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Nb]={init:{...n},method:o,redirect:u,cache:d,headers:l,parsedURL:i,signal:c},n.follow===void 0?!r||r.follow===void 0?this.follow=POt:this.follow=r.follow:this.follow=n.follow,this.counter=n.counter||r&&r.counter||0,n.compress===void 0?!r||r.compress===void 0?this.compress=!0:this.compress=r.compress:this.compress=n.compress,n.decode===void 0?!r||r.decode===void 0?this.decode=!0:this.decode=r.decode:this.decode=n.decode}get method(){return this[Nb].method}get url(){return this[Nb].parsedURL.toString()}get headers(){return this[Nb].headers}get redirect(){return this[Nb].redirect}get cache(){return this[Nb].cache}get signal(){return this[Nb].signal}clone(){return new t(this)}get init(){return this[Nb].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties($$.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});Ije.exports={Request:$$}});var cpe=G((C$r,wje)=>{"use strict";f();var{Body:NOt,cloneStream:LOt,guessContentType:FOt}=W$(),{Headers:MOt}=$R(),{isPlainObject:QOt}=Fy(),{isFormData:OOt,FormDataSerializer:UOt}=a6(),lh=Symbol("Response internals"),z$=class t extends NOt{static{s(this,"Response")}constructor(e=null,n={}){let r=new MOt(n.headers),i=e;if(OOt(i)&&!r.has("content-type")){let o=new UOt(i);i=o.stream(),r.set("content-type",o.contentType()),!r.has("transfer-encoding")&&!r.has("content-length")&&r.set("content-length",o.length())}if(i!==null&&!r.has("content-type"))if(QOt(i))i=JSON.stringify(i),r.set("content-type","application/json");else{let o=FOt(i);o&&r.set("content-type",o)}super(i),this[lh]={url:n.url,status:n.status||200,statusText:n.statusText||"",headers:r,httpVersion:n.httpVersion,decoded:n.decoded,counter:n.counter}}get url(){return this[lh].url||""}get status(){return this[lh].status}get statusText(){return this[lh].statusText}get ok(){return this[lh].status>=200&&this[lh].status<300}get redirected(){return this[lh].counter>0}get headers(){return this[lh].headers}get httpVersion(){return this[lh].httpVersion}get decoded(){return this[lh].decoded}static redirect(e,n=302){if(![301,302,303,307,308].includes(n))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:n})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(LOt(this),{...this[lh]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(z$.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});wje.exports={Response:z$}});var Sje=G((E$r,_je)=>{"use strict";f();var qOt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),WOt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),GOt=new Set([500,502,503,504]),HOt={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},jOt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function TT(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(TT,"toNumberOrZero");function VOt(t){return t?GOt.has(t.status):!0}s(VOt,"isErrorResponse");function upe(t){let e={};if(!t)return e;let n=t.trim().split(/,/);for(let r of n){let[i,o]=r.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(upe,"parseCacheControl");function $Ot(t){let e=[];for(let n in t){let r=t[n];e.push(r===!0?n:n+"="+r)}if(e.length)return e.join(", ")}s($Ot,"formatCacheControl");_je.exports=class{static{s(this,"CachePolicy")}constructor(e,n,{shared:r,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!n||!n.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=r!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in n?n.status:200,this._resHeaders=n.headers,this._rescc=upe(n.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=n.headers.vary?e.headers:null,this._reqcc=upe(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":$Ot(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),n.headers["cache-control"]==null&&/no-cache/.test(n.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&WOt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||qOt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let n=upe(e.headers["cache-control"]);return n["no-cache"]||/no-cache/.test(e.headers.pragma)||n["max-age"]&&this.age()>n["max-age"]||n["min-fresh"]&&this.timeToLive()<1e3*n["min-fresh"]||this.stale()&&!(n["max-stale"]&&!this._rescc["must-revalidate"]&&(n["max-stale"]===!0||n["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,n){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||n&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let n=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let r of n)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){let n={};for(let r in e)HOt[r]||(n[r]=e[r]);if(e.connection){let r=e.connection.trim().split(/\s*,\s*/);for(let i of r)delete n[i]}if(n.warning){let r=n.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));r.length?n.warning=r.join(",").trim():delete n.warning}return n}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),n=this.age();return n>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(n)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),n=(this.now()-this._responseTime)/1e3;return e+n}_ageValue(){return TT(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return TT(this._rescc["s-maxage"])}if(this._rescc["max-age"])return TT(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,n=this.date();if(this._resHeaders.expires){let r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<n?0:Math.max(e,(r-n)/1e3)}if(this._resHeaders["last-modified"]){let r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&n>r)return Math.max(e,(n-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),n=e+TT(this._rescc["stale-if-error"]),r=e+TT(this._rescc["stale-while-revalidate"]);return Math.max(0,e,n,r)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+TT(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+TT(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let n=this._copyWithoutHopByHopHeaders(e.headers);if(delete n["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete n["if-none-match"],delete n["if-modified-since"],n;if(this._resHeaders.etag&&(n["if-none-match"]=n["if-none-match"]?`${n["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),n["accept-ranges"]||n["if-match"]||n["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete n["if-modified-since"],n["if-none-match"]){let i=n["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?n["if-none-match"]=i.join(",").trim():delete n["if-none-match"]}}else this._resHeaders["last-modified"]&&!n["if-modified-since"]&&(n["if-modified-since"]=this._resHeaders["last-modified"]);return n}revalidatedPolicy(e,n){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&VOt(n))return{modified:!1,matches:!1,policy:this};if(!n||!n.headers)throw Error("Response headers missing");let r=!1;if(n.status!==void 0&&n.status!=304?r=!1:n.headers.etag&&!/^\s*W\//.test(n.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag:this._resHeaders.etag&&n.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===n.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!n.headers.etag&&!n.headers["last-modified"]&&(r=!0),!r)return{policy:new this.constructor(e,n),modified:n.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in n.headers&&!jOt[a]?n.headers[a]:this._resHeaders[a];let o=Object.assign({},n,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Dje=G((w$r,Bje)=>{"use strict";f();var zOt=Sje(),{Headers:YOt}=$R(),Rje=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),kje=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),dpe=class{static{s(this,"CachePolicyWrapper")}constructor(e,n,r){this.policy=new zOt(Rje(e),kje(n),r)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(Rje(e))}responseHeaders(e){return new YOt(this.policy.responseHeaders(kje(e)))}timeToLive(){return this.policy.timeToLive()}};Bje.exports=dpe});var Lje=G((R$r,Nje)=>{"use strict";f();var{Readable:KOt}=require("stream"),{Headers:Pje}=$R(),{Response:JOt}=cpe(),Lb=Symbol("CacheableResponse internals"),XOt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),fpe=class t extends JOt{static{s(this,"CacheableResponse")}constructor(e,n){super(e,n);let r=new Pje(n.headers);this[Lb]={headers:r,bufferedBody:e}}get headers(){return this[Lb].headers}set headers(e){if(e instanceof Pje)this[Lb].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return KOt.from(this[Lb].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Lb].bufferedBody}async arrayBuffer(){return XOt(this[Lb].bufferedBody)}async text(){return this[Lb].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l}=this;return new t(this[Lb].bufferedBody,{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},ZOt=s(async t=>{let e=await t.buffer(),{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c}=t;return new fpe(e,{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c})},"cacheableResponse");Nje.exports={cacheableResponse:ZOt}});var Y$=G((D$r,Fje)=>{"use strict";f();var ppe=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};Fje.exports={RequestAbortedError:ppe}});var qje=G((L$r,Uje)=>{"use strict";f();var Qje=require("http"),Oje=require("https"),{Readable:eUt}=require("stream"),Oy=ET()("helix-fetch:h1"),{RequestAbortedError:Mje}=Y$(),{decodeStream:tUt}=Fy(),nUt=s((t,e)=>{let{h1:n,options:{h1:r,rejectUnauthorized:i}}=t;return e==="https:"?n.httpsAgent?n.httpsAgent:r||typeof i=="boolean"?(n.httpsAgent=new Oje.Agent(typeof i=="boolean"?{...r||{},rejectUnauthorized:i}:r),n.httpsAgent):void 0:n.httpAgent?n.httpAgent:r?(n.httpAgent=new Qje.Agent(r),n.httpAgent):void 0},"getAgent"),rUt=s(t=>{t.h1={}},"setupContext"),iUt=s(async({h1:t})=>{t.httpAgent&&(Oy("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Oy("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),oUt=s((t,e,n)=>{let{statusCode:r,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c}=t,u=e?tUt(r,c,t,n):t;return{statusCode:r,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),sUt=s(async(t,e,n)=>{let{request:r}=e.protocol==="https:"?Oje:Qje,i=nUt(t,e.protocol),o={...n,agent:i},{socket:a,body:l}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((c,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{Oy(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:c[u],"get")}):o.createConnection=(c,u)=>{Oy(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((c,u)=>{Oy(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(Oy(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new Mje),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new Mje);return}p.addEventListener("abort",m)}d=r(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Oy(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),c(oUt(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Oy(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||(Oy(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),l instanceof eUt?l.pipe(d):(l&&d.write(l),d.end())})},"h1Request");Uje.exports={request:sUt,setupContext:rUt,resetContext:iUt}});var jje=G((Q$r,Hje)=>{"use strict";f();var{connect:aUt,constants:lUt}=require("http2"),{Readable:cUt}=require("stream"),Ts=ET()("helix-fetch:h2"),{RequestAbortedError:Wje}=Y$(),{decodeStream:uUt}=Fy(),{NGHTTP2_CANCEL:l6}=lUt,dUt=5*60*1e3,fUt=5e3,pUt=s(t=>{t.h2={sessionCache:{}}},"setupContext"),mUt=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(n=>{e.on("close",n),Ts(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),Gje=s((t,e,n,r=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=n?uUt(o,t,e,r):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(n&&a!==e)}},"createResponse"),hUt=s((t,e,n,r,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:l,pushedStreamIdleTimeout:c=fUt}}}=t,u=i[":path"],d=`${e}${u}`;Ts(`received PUSH_PROMISE: ${d}, stream #${r.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{r.close(l6)},"rejectPush")),r.on("push",(p,m)=>{Ts(`received push headers for ${e}${u}, stream #${r.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),r.setTimeout(c,()=>{Ts(`closing pushed stream #${r.id} after ${c} ms of inactivity`),r.close(l6)}),l&&l(d,i,Gje(p,r,n))}),r.on("aborted",()=>{Ts(`pushed stream #${r.id} aborted`)}),r.on("error",p=>{Ts(`pushed stream #${r.id} encountered error: ${p}`)}),r.on("frameError",(p,m,h)=>{Ts(`pushed stream #${r.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),gUt=s(async(t,e,n)=>{let{origin:r,pathname:i,search:o,hash:a}=e,l=`${i}${o}${a}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=dUt,pushPromiseHandler:p,pushHandler:m}=c,h={...n},{method:g,headers:y,socket:v,body:b,decode:E}=h;return v&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let D=u[r];if(!D||D.closed||D.destroyed){let te=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),H={...c,rejectUnauthorized:te};v&&!v.inUse&&(H.createConnection=()=>(Ts(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),D=aUt(r,{...H,settings:{enablePush:!!(p||m)}}),D.setMaxListeners(1e3),D.setTimeout(d,()=>{Ts(`closing session ${r} after ${d} ms of inactivity`),D.close()}),D.once("connect",()=>{Ts(`session ${r} established`),Ts(`caching session ${r}`),u[r]=D}),D.on("localSettings",re=>{Ts(`session ${r} localSettings: ${JSON.stringify(re)}`)}),D.on("remoteSettings",re=>{Ts(`session ${r} remoteSettings: ${JSON.stringify(re)}`)}),D.once("close",()=>{Ts(`session ${r} closed`),u[r]===D&&(Ts(`discarding cached session ${r}`),delete u[r])}),D.once("error",re=>{Ts(`session ${r} encountered error: ${re}`),u[r]===D&&(Ts(`discarding cached session ${r}`),delete u[r])}),D.on("frameError",(re,oe,V)=>{Ts(`session ${r} encountered frameError: type: ${re}, code: ${oe}, id: ${V}`)}),D.once("goaway",(re,oe,V)=>{Ts(`session ${r} received GOAWAY frame: errorCode: ${re}, lastStreamID: ${oe}, opaqueData: ${V?V.toString():void 0}`)}),D.on("stream",(re,oe,V)=>{hUt(t,r,E,re,oe,V)})}else v&&v.id!==D.socket.id&&!v.inUse&&(Ts(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());Ts(`${g} ${e.host}${l}`);let N,{signal:Q}=h,Z=s(()=>{Q.removeEventListener("abort",Z),k(new Wje),N&&N.close(l6)},"onAbortSignal");if(Q){if(Q.aborted){k(new Wje);return}Q.addEventListener("abort",Z)}let me=s(te=>{Ts(`session ${r} encountered error during ${h.method} ${e.href}: ${te}`),k(te)},"onSessionError");D.once("error",me),N=D.request({":method":g,":path":l,...y}),N.once("response",te=>{D.off("error",me),Q&&Q.removeEventListener("abort",Z),_(Gje(te,N,h.decode,k))}),N.once("error",te=>{D.off("error",me),Q&&Q.removeEventListener("abort",Z),N.rstCode!==l6&&(Ts(`${h.method} ${e.href} failed with: ${te.message}`),N.close(l6),k(te))}),N.once("frameError",(te,H,W)=>{D.off("error",me),Ts(`encountered frameError during ${h.method} ${e.href}: type: ${te}, code: ${H}, id: ${W}`)}),N.on("push",(te,H)=>{Ts(`received 'push' event: headers: ${JSON.stringify(te)}, flags: ${H}`)}),b instanceof cUt?b.pipe(N):(b&&N.write(b),N.end())})},"request");Hje.exports={request:gUt,setupContext:pUt,resetContext:mUt}});var $je=G((q$r,Vje)=>{"use strict";f();var{EventEmitter:AUt}=require("events"),yUt=s(()=>{let t={},e=new AUt;return e.setMaxListeners(0),{acquire:s(n=>new Promise(r=>{if(!t[n]){t[n]=!0,r();return}let i=s(o=>{t[n]||(t[n]=!0,e.removeListener(n,i),r(o))},"tryAcquire");e.on(n,i)}),"acquire"),release:s((n,r)=>{Reflect.deleteProperty(t,n),setImmediate(()=>e.emit(n,r))},"release")}},"lock");Vje.exports=yUt});var zje=G((H$r,CUt)=>{CUt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var Zje=G((j$r,Xje)=>{"use strict";f();var{Readable:xUt}=require("stream"),vUt=require("tls"),{types:{isAnyArrayBuffer:bUt}}=require("util"),EUt=npe(),mpe=ET()("helix-fetch:core"),{RequestAbortedError:K$}=Y$(),hpe=qje(),J$=jje(),IUt=$je(),{isPlainObject:TUt}=Fy(),{isFormData:wUt,FormDataSerializer:_Ut}=a6(),{version:SUt}=zje(),gpe="h2",Ape="h2c",ype="http/1.0",wT="http/1.1",RUt=100,kUt=60*60*1e3,BUt=[gpe,wT,ype],DUt=`helix-fetch/${SUt}`,PUt={method:"GET",compress:!0,decode:!0},Yje=0,Kje=IUt(),Jje=s((t,e)=>new Promise((n,r)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new K$;r(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){r(new K$);return}i.addEventListener("abort",a)}let l=+t.port||443,c=s(u=>{i&&i.removeEventListener("abort",a),u instanceof K$||(mpe(`connecting to ${t.hostname}:${l} failed with: ${u.message}`),r(u))},"onError");o=vUt.connect(l,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",c),Yje+=1,o.id=Yje,o.secureConnecting=!1,mpe(`established TLS connection: #${o.id} (${o.servername})`),n(o)}),o.once("error",c)}),"connectTLS"),NUt=s(async(t,e)=>{let n=await Kje.acquire(t.origin);try{return n||(n=await Jje(t,e)),n}finally{Kje.release(t.origin,n)}},"connect"),LUt=s(async(t,e,n)=>{let r=`${e.protocol}//${e.host}`,i=t.alpnCache.get(r);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=wT,t.alpnCache.set(r,i),{protocol:i};case"http2:":return i=Ape,t.alpnCache.set(r,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:l={}}}=t,c=!(o===!1||a.rejectUnauthorized===!1||l.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:n,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let d=await NUt(e,u);return i=d.alpnProtocol,i||(i=wT),t.alpnCache.set(r,i),{protocol:i,socket:d}},"determineProtocol"),FUt=s(t=>{let e={};return Object.keys(t).forEach(n=>{e[n.toLowerCase()]=t[n]}),e},"sanitizeHeaders"),MUt=s(async(t,e,n,r)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...n,host:e.host,hostname:e.hostname,port:o},l=await t(a);if(i){let u={...a,ALPNProtocols:r};u.socket=l,u.servername=a.host;let d=await Jje(e,u);return{protocol:d.alpnProtocol||wT,socket:d}}return{protocol:l.alpnProtocol||wT,socket:l}},"getProtocolAndSocketFromFactory"),QUt=s(async(t,e,n)=>{let r=new URL(e),i={...PUt,...n||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=FUt(i.headers||{}),i.headers.host===void 0&&(i.headers.host=r.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(wUt(i.body)){let u=new _Ut(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":TUt(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):bUt(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof xUt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:l,socket:c=null}=t.socketFactory?await MUt(t.socketFactory,r,i,t.alpnProtocols):await LUt(t,r,a);switch(mpe(`${r.host} -> ${l}`),l){case gpe:try{return await J$.request(t,r,c?{...i,socket:c}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${r.protocol}//${r.host}`),u}case Ape:return J$.request(t,new URL(`http://${r.host}${r.pathname}${r.hash}${r.search}`),c?{...i,socket:c}:i);case ype:case wT:return hpe.request(t,r,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),OUt=s(async t=>(t.alpnCache.clear(),Promise.all([hpe.resetContext(t),J$.resetContext(t)])),"resetContext"),UUt=s(t=>{let{options:{alpnProtocols:e=BUt,alpnCacheTTL:n=kUt,alpnCacheSize:r=RUt,userAgent:i=DUt,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new EUt({max:r,ttl:n}),t.userAgent=i,t.socketFactory=o,hpe.setupContext(t),J$.setupContext(t)},"setupContext");Xje.exports={request:QUt,setupContext:UUt,resetContext:OUt,RequestAbortedError:K$,ALPN_HTTP2:gpe,ALPN_HTTP2C:Ape,ALPN_HTTP1_1:wT,ALPN_HTTP1_0:ype}});var tVe=G((z$r,eVe)=>{"use strict";f();var qUt=ET()("helix-fetch:core"),{request:WUt,setupContext:GUt,resetContext:HUt,RequestAbortedError:jUt,ALPN_HTTP2:VUt,ALPN_HTTP2C:$Ut,ALPN_HTTP1_1:zUt,ALPN_HTTP1_0:YUt}=Zje(),Cpe=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},GUt(this)}api(){return{request:s(async(e,n)=>this.request(e,n),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:jUt,ALPN_HTTP2:VUt,ALPN_HTTP2C:$Ut,ALPN_HTTP1_1:zUt,ALPN_HTTP1_0:YUt}}async request(e,n){return WUt(this,e,n)}setCA(e){this.options.ca=e}async reset(){return qUt("resetting context"),HUt(this)}};eVe.exports=new Cpe().api()});var sVe=G((J$r,oVe)=>{"use strict";f();var{EventEmitter:KUt}=require("events"),{Readable:c6}=require("stream"),xpe=ET()("helix-fetch"),JUt=npe(),{Body:XUt}=W$(),{Headers:Ipe}=$R(),{Request:_T}=Tje(),{Response:bpe}=cpe(),{FetchBaseError:ZUt,FetchError:u6,AbortError:X$}=ope(),{AbortController:eqt,AbortSignal:tqt,TimeoutSignal:nqt}=spe(),rqt=Dje(),{cacheableResponse:iqt}=Lje(),{sizeof:oqt}=Fy(),{isFormData:sqt}=a6(),{context:aqt,RequestAbortedError:lqt}=tVe(),nVe=["GET","HEAD"],cqt=500,uqt=100*1024*1024,vpe="push",rVe=s(async(t,e,n)=>{let{request:r}=t.context,i=e instanceof _T&&typeof n>"u"?e:new _T(e,n),{method:o,body:a,signal:l,compress:c,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(l&&l.aborted){let D=new X$("The operation was aborted.");throw i.init.body instanceof c6&&i.init.body.destroy(D),D}try{h=await r(i.url,{...n,method:o,headers:i.headers.plain(),body:m&&!(m instanceof c6)&&!sqt(m)?m:a,compress:c,decode:u,follow:d,redirect:p,signal:l})}catch(D){throw m instanceof c6&&m.destroy(D),D instanceof TypeError?D:D instanceof lqt?new X$("The operation was aborted."):new u6(D.message,"system",D)}let g=s(()=>{l.removeEventListener("abort",g);let D=new X$("The operation was aborted.");i.init.body instanceof c6&&i.init.body.destroy(D),h.readable.emit("error",D)},"abortHandler");l&&l.addEventListener("abort",g);let{statusCode:y,statusText:v,httpVersion:b,headers:E,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:D}=E,N=D==null?null:new URL(D,i.url);switch(i.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",g),new u6(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw l&&l.removeEventListener("abort",g),new u6(`maximum redirect reached at: ${i.url}`,"max-redirect");let Q={headers:new Ipe(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof c6)throw l&&l.removeEventListener("abort",g),new u6("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(Q.method="GET",Q.body=void 0,Q.headers.delete("content-length")),l&&l.removeEventListener("abort",g),rVe(t,new _T(N,Q))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",g)}),_.once("error",()=>{l.removeEventListener("abort",g)})),new bpe(_,{url:i.url,status:y,statusText:v,headers:E,httpVersion:b,decoded:k,counter:i.counter})},"fetch"),iVe=s(async(t,e,n)=>{if(t.options.maxCacheSize===0||!nVe.includes(e.method))return n;let r=new rqt(e,n,{shared:!1});if(r.storable()){let i=await iqt(n);return t.cache.set(e.url,{policy:r,response:i},r.timeToLive()),i}else return n},"cacheResponse"),dqt=s(async(t,e,n)=>{let r=new _T(e,n);if(t.options.maxCacheSize!==0&&nVe.includes(r.method)&&!["no-store","reload"].includes(r.cache)){let{policy:a,response:l}=t.cache.get(r.url)||{};if(a&&a.satisfiesWithoutRevalidation(r)){l.headers=new Ipe(a.responseHeaders(l));let c=l.clone();return c.fromCache=!0,c}}let o=await rVe(t,r);return r.cache!=="no-store"?iVe(t,r,o):o},"cachingFetch"),fqt=s((t,e={})=>{let n=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([r,i])=>{Array.isArray(i)?i.forEach(o=>n.searchParams.append(r,o)):n.searchParams.append(r,i)}),n.href},"createUrl"),pqt=s(t=>new nqt(t),"timeoutSignal"),Epe=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:n}=this.options,r=typeof n=="number"&&n>=0?n:uqt,i=cqt;r===0&&(r=1,i=1);let o=s(({response:l},c)=>oqt(l),"sizeCalculation");this.cache=new JUt({max:i,maxSize:r,sizeCalculation:o}),this.eventEmitter=new KUt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(l,d,u)},this.options.h2.pushHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(b=>b.startsWith(":")).forEach(b=>delete d[b]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:v}=u;this.pushHandler(l,d,new bpe(y,{url:l,status:p,statusText:m,headers:g,httpVersion:h,decoded:v}))}),this.context=aqt(this.options)}api(){return{fetch:s(async(e,n)=>this.fetch(e,n),"fetch"),Body:XUt,Headers:Ipe,Request:_T,Response:bpe,AbortController:eqt,AbortSignal:tqt,FetchBaseError:ZUt,FetchError:u6,AbortError:X$,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:fqt,timeoutSignal:pqt,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,n){return dqt(this,e,n)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(vpe,e)}offPush(e){return this.eventEmitter.off(vpe,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,n,r){xpe(`received server push promise: ${e}, headers: ${JSON.stringify(n)}`);let i=new _T(e,{headers:n}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(xpe(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(n)}`),r())}async pushHandler(e,n,r){xpe(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(n)}, status: ${r.status}, respHeaders: ${JSON.stringify(r.headers)}`);let i=await iVe(this,new _T(e,{headers:n}),r);this.eventEmitter.emit(vpe,e,i)}};oVe.exports=new Epe().api()});var lVe=G((ezr,aVe)=>{"use strict";f();aVe.exports=sVe()});var J$e=G((kai,K$e)=>{f();K$e.exports=Y$e;Y$e.sync=hHt;var $$e=require("fs");function mHt(t,e){var n=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(mHt,"checkPathExt");function z$e(t,e,n){return!t.isSymbolicLink()&&!t.isFile()?!1:mHt(e,n)}s(z$e,"checkStat");function Y$e(t,e,n){$$e.stat(t,function(r,i){n(r,r?!1:z$e(i,t,e))})}s(Y$e,"isexe");function hHt(t,e){return z$e($$e.statSync(t),t,e)}s(hHt,"sync")});var nze=G((Pai,tze)=>{f();tze.exports=Z$e;Z$e.sync=gHt;var X$e=require("fs");function Z$e(t,e,n){X$e.stat(t,function(r,i){n(r,r?!1:eze(i,e))})}s(Z$e,"isexe");function gHt(t,e){return eze(X$e.statSync(t),e)}s(gHt,"sync");function eze(t,e){return t.isFile()&&AHt(t,e)}s(eze,"checkStat");function AHt(t,e){var n=t.mode,r=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=l|c,p=n&u||n&c&&i===a||n&l&&r===o||n&d&&o===0;return p}s(AHt,"checkMode")});var ize=G((Mai,rze)=>{f();var Fai=require("fs"),zz;process.platform==="win32"||global.TESTING_WINDOWS?zz=J$e():zz=nze();rze.exports=cme;cme.sync=yHt;function cme(t,e,n){if(typeof e=="function"&&(n=e,e={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){cme(t,e||{},function(o,a){o?i(o):r(a)})})}zz(t,e||{},function(r,i){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,i=!1),n(r,i)})}s(cme,"isexe");function yHt(t,e){try{return zz.sync(t,e||{})}catch(n){if(e&&e.ignoreErrors||n.code==="EACCES")return!1;throw n}}s(yHt,"sync")});var dze=G((Uai,uze)=>{f();var u3=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",oze=require("path"),CHt=u3?";":":",sze=ize(),aze=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),lze=s((t,e)=>{let n=e.colon||CHt,r=t.match(/\//)||u3&&t.match(/\\/)?[""]:[...u3?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(n)],i=u3?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=u3?i.split(n):[""];return u3&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:r,pathExt:o,pathExtExe:i}},"getPathInfo"),cze=s((t,e,n)=>{typeof e=="function"&&(n=e,e={}),e||(e={});let{pathEnv:r,pathExt:i,pathExtExe:o}=lze(t,e),a=[],l=s(u=>new Promise((d,p)=>{if(u===r.length)return e.all&&a.length?d(a):p(aze(t));let m=r[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=oze.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(c(y,u,0))}),"step"),c=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(l(d+1));let g=i[p];sze(u+g,{pathExt:o},(y,v)=>{if(!y&&v)if(e.all)a.push(u+g);else return m(u+g);return m(c(u,d,p+1))})}),"subStep");return n?l(0).then(u=>n(null,u),n):l(0)},"which"),xHt=s((t,e)=>{e=e||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=lze(t,e),o=[];for(let a=0;a<n.length;a++){let l=n[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,u=oze.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<r.length;p++){let m=d+r[p];try{if(sze.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw aze(t)},"whichSync");uze.exports=cze;cze.sync=xHt});var pze=G((Gai,ume)=>{"use strict";f();var fze=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"},"pathKey");ume.exports=fze;ume.exports.default=fze});var Aze=G((Vai,gze)=>{"use strict";f();var mze=require("path"),vHt=dze(),bHt=pze();function hze(t,e){let n=t.options.env||process.env,r=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=vHt.sync(t.command,{path:n[bHt({env:n})],pathExt:e?mze.delimiter:void 0})}catch{}finally{o&&process.chdir(r)}return a&&(a=mze.resolve(i?t.options.cwd:"",a)),a}s(hze,"resolveCommandAttempt");function EHt(t){return hze(t)||hze(t,!0)}s(EHt,"resolveCommand");gze.exports=EHt});var yze=G((Yai,fme)=>{"use strict";f();var dme=/([()\][%!^"`<>&|;, *?])/g;function IHt(t){return t=t.replace(dme,"^$1"),t}s(IHt,"escapeCommand");function THt(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(dme,"^$1"),e&&(t=t.replace(dme,"^$1")),t}s(THt,"escapeArgument");fme.exports.command=IHt;fme.exports.argument=THt});var xze=G((Xai,Cze)=>{"use strict";f();Cze.exports=/^#!(.*)/});var bze=G((eli,vze)=>{"use strict";f();var wHt=xze();vze.exports=(t="")=>{let e=t.match(wHt);if(!e)return null;let[n,r]=e[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var Ize=G((nli,Eze)=>{"use strict";f();var pme=require("fs"),_Ht=bze();function SHt(t){let n=Buffer.alloc(150),r;try{r=pme.openSync(t,"r"),pme.readSync(r,n,0,150,0),pme.closeSync(r)}catch{}return _Ht(n.toString())}s(SHt,"readShebang");Eze.exports=SHt});var Sze=G((oli,_ze)=>{"use strict";f();var RHt=require("path"),Tze=Aze(),wze=yze(),kHt=Ize(),BHt=process.platform==="win32",DHt=/\.(?:com|exe)$/i,PHt=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function NHt(t){t.file=Tze(t);let e=t.file&&kHt(t.file);return e?(t.args.unshift(t.file),t.command=e,Tze(t)):t.file}s(NHt,"detectShebang");function LHt(t){if(!BHt)return t;let e=NHt(t),n=!DHt.test(e);if(t.options.forceShell||n){let r=PHt.test(e);t.command=RHt.normalize(t.command),t.command=wze.command(t.command),t.args=t.args.map(o=>wze.argument(o,r));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(LHt,"parseNonShell");function FHt(t,e,n){e&&!Array.isArray(e)&&(n=e,e=null),e=e?e.slice(0):[],n=Object.assign({},n);let r={command:t,args:e,options:n,file:void 0,original:{command:t,args:e}};return n.shell?r:LHt(r)}s(FHt,"parse");_ze.exports=FHt});var Bze=G((lli,kze)=>{"use strict";f();var mme=process.platform==="win32";function hme(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(hme,"notFoundError");function MHt(t,e){if(!mme)return;let n=t.emit;t.emit=function(r,i){if(r==="exit"){let o=Rze(i,e);if(o)return n.call(t,"error",o)}return n.apply(t,arguments)}}s(MHt,"hookChildProcess");function Rze(t,e){return mme&&t===1&&!e.file?hme(e.original,"spawn"):null}s(Rze,"verifyENOENT");function QHt(t,e){return mme&&t===1&&!e.file?hme(e.original,"spawnSync"):null}s(QHt,"verifyENOENTSync");kze.exports={hookChildProcess:MHt,verifyENOENT:Rze,verifyENOENTSync:QHt,notFoundError:hme}});var Nze=G((dli,d3)=>{"use strict";f();var Dze=require("child_process"),gme=Sze(),Ame=Bze();function Pze(t,e,n){let r=gme(t,e,n),i=Dze.spawn(r.command,r.args,r.options);return Ame.hookChildProcess(i,r),i}s(Pze,"spawn");function OHt(t,e,n){let r=gme(t,e,n),i=Dze.spawnSync(r.command,r.args,r.options);return i.error=i.error||Ame.verifyENOENTSync(i.status,r),i}s(OHt,"spawnSync");d3.exports=Pze;d3.exports.spawn=Pze;d3.exports.sync=OHt;d3.exports._parse=gme;d3.exports._enoent=Ame});var fjt={};t1(fjt,{getTokenizer:()=>Bo,getTokenizerAsync:()=>XEe,main:()=>xYe});module.exports=jKe(fjt);f();f();xge().install();f();f();var jk="github.copilot";f();f();f();f();f();f();var ss=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,n){super(e,{cause:n}),this.name="CopilotAuthError"}};f();f();var hf=class t{static{s(this,"ExpConfig")}constructor(e,n,r){this.variables=e,this.assignmentContext=n,this.features=r}static createFallbackConfig(e,n){return fN(e,{reason:n}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var gf="X-Copilot-RelatedPluginVersion-",Vk=(q=>(q.Market="X-MSEdge-Market",q.CorpNet="X-FD-Corpnet",q.Build="X-VSCode-Build",q.ApplicationVersion="X-VSCode-AppVersion",q.TargetPopulation="X-VSCode-TargetPopulation",q.ClientId="X-MSEdge-ClientId",q.ExtensionName="X-VSCode-ExtensionName",q.ExtensionVersion="X-VSCode-ExtensionVersion",q.ExtensionRelease="X-VSCode-ExtensionRelease",q.Language="X-VSCode-Language",q.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",q.CopilotEngine="X-Copilot-Engine",q.CopilotOverrideEngine="X-Copilot-OverrideEngine",q.CopilotRepository="X-Copilot-Repository",q.CopilotFileType="X-Copilot-FileType",q.CopilotUserKind="X-Copilot-UserKind",q.CopilotDogfood="X-Copilot-Dogfood",q.CopilotCustomModel="X-Copilot-CustomModel",q.CopilotOrgs="X-Copilot-Orgs",q.CopilotCustomModelNames="X-Copilot-CustomModelNames",q.CopilotTrackingId="X-Copilot-CopilotTrackingId",q.CopilotClientVersion="X-Copilot-ClientVersion",q.CopilotRelatedPluginVersionCppTools=gf+"msvscodecpptools",q.CopilotRelatedPluginVersionCMakeTools=gf+"msvscodecmaketools",q.CopilotRelatedPluginVersionMakefileTools=gf+"msvscodemakefiletools",q.CopilotRelatedPluginVersionCSharpDevKit=gf+"msdotnettoolscsdevkit",q.CopilotRelatedPluginVersionPython=gf+"mspythonpython",q.CopilotRelatedPluginVersionPylance=gf+"mspythonvscodepylance",q.CopilotRelatedPluginVersionJavaPack=gf+"vscjavavscodejavapack",q.CopilotRelatedPluginVersionTypescript=gf+"vscodetypescriptlanguagefeatures",q.CopilotRelatedPluginVersionTypescriptNext=gf+"msvscodevscodetypescriptnext",q.CopilotRelatedPluginVersionCSharp=gf+"msdotnettoolscsharp",q))(Vk||{});var kJe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},HE=class t{constructor(e){this.filters=e;for(let[n,r]of Object.entries(this.filters))r===""&&delete this.filters[n]}static{s(this,"FilterSettings")}extends(e){for(let[n,r]of Object.entries(e.filters))if(this.filters[n]!==r)return!1;return!0}addToTelemetry(e){for(let[n,r]of Object.entries(this.filters)){let i=kJe[n];i!==void 0&&(e.properties[i]=r)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(n=>`${n}:${this.filters[n]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,n){return new t({...this.filters,[e]:n})}};f();var rr=class{static{s(this,"Fetcher")}#e;set rejectUnauthorized(e){this.#e=e}get rejectUnauthorized(){return this.#e}},$k=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,n){super(e,{cause:n}),this.name="HttpTimeoutError"}};function Bc(t){return!t||typeof t!="object"?!1:t instanceof $k||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Bc,"isAbortError");var A_=class extends SyntaxError{constructor(n,r){super(n);this.code=r;this.name="JsonParseError"}static{s(this,"JsonParseError")}},Vh=class extends Error{static{s(this,"FetchResponseError")}constructor(e,n=`HTTP ${e.status} ${e.statusText}`){super(n),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},BJe=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function zk(t,e=!0){return t instanceof Error?e&&"cause"in t&&zk(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof A_||t instanceof Vh||t?.message?.startsWith("net::")||BJe.has(t.code??""):!1}s(zk,"isNetworkError");var cx=class{constructor(e,n,r,i,o){this.status=e;this.statusText=n;this.headers=r;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),n=this.headers.get("content-type");if(!n||!n.includes("json"))throw new A_(`Response content-type is ${n??"missing"} (status=${this.status})`,`ContentType=${n}`);try{return JSON.parse(e)}catch(r){if(r instanceof SyntaxError){let i=r.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||r.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new A_(`Response body truncated: actualLength=${o}`,"Truncated"):new A_(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw r}}body(){return this.getBody()}};function jE(t,e,n,r,i,o,a,l,c){let u={...l,Authorization:`Bearer ${n}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Rs).sessionId,"VScode-MachineId":t.get(Rs).machineId,...Kd(t),"X-GitHub-Api-Version":Af};r&&(u["OpenAI-Intent"]=r);let d={method:"POST",headers:u,json:o,timeout:c},p=t.get(rr);if(a){let h=p.makeAbortController();a.onCancellationRequested(()=>{kt(t,"networking.cancelRequest",or.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),d.signal=h.signal}return p.fetch(e,d).catch(h=>{if(DJe(h))return kt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,d));throw h})}s(jE,"postRequest");function DJe(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(DJe,"isInterruptedNetworkError");f();f();var rc=class{static{s(this,"TelemetryUserConfig")}constructor(e,n,r,i){this.trackingId=n,this.optedIn=r??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ea(e,n=>{let r=n.getTokenValue("rt")==="1",i=n.getTokenValue("ft")??"",o=n.getTokenValue("tid"),a=n.organization_list,l=n.enterprise_list,c=n.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=l?.toString(),this.sku=c,this.optedIn=r,this.ftFlag=i)})}};var JN=Ve(fx()),XN=Ve(require("os"));var PJe=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function NJe(t){let e={type:t.name,value:t.message},n=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(n?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let r of n.slice(t.toString().length+1).split(/\n/).reverse()){let i=r.match(PJe),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(NJe,"buildExceptionDetail");function bJ(t,e){let n=t.get(ur),r=n.getEditorInfo(),i=t.get(rc),o={"#editor":r.devName??r.name,"#editor_version":$h({name:r.devName??r.name,version:r.version}),"#plugin":n.getEditorPluginInfo().name,"#plugin_version":$h(n.getEditorPluginInfo()),"#session_id":t.get(Rs).sessionId,"#machine_id":t.get(Rs).machineId,"#architecture":XN.arch(),"#os_platform":XN.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(bJ,"buildContext");function RAe(t,e){let n=t.get(co),r=t.get(ur).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:n.getBuildType()!=="dev"?`copilot-client@${n.getVersion()}`:void 0,deployed_to:n.getBuildType(),catalog_service:r.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:bJ(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let l=0,c=e;for(;c instanceof Error&&l<10;){let d=NJe(c);o.exception_detail.unshift(d),a.unshift([c,d]),l+=1,c=c.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,JN.SHA256)(JN.enc.Utf16.parse(u.join(`
`))).toString()),o}s(RAe,"buildPayload");f();var Kk=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,n,r){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,n,r,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var BAe=Ve(fx());var Jn=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,n){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let r=this.valueMap.keys().next().value;this.delete(r)}return this.valueMap.set(e,n),this}get(e){if(this.valueMap.has(e)){let n=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,n),n}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,n){new Map(this.valueMap).forEach(e,n)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},Jk=class extends Jn{constructor(n,r=2*60*1e3){super(n);this.defaultTtl=r;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(n){let r=!1,i=this.expiration.get(n);return i!==void 0&&(i>performance.now()&&(r=super.has(n)),r||this.delete(n)),r}get(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.get(n);this.delete(n)}}peek(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.peek(n);this.delete(n)}}set(n,r,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(n,r);return this.expiration.set(n,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(n){return this.expiration.delete(n),super.delete(n)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}};var zh=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Jn}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let n=Date.now(),r=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return n-r[0]<6e5?!0:(r.push(n),r.shift(),this.cache.set(e,r),!1)}};f();var yf=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,n=process.argv,r=process.env){return new t({debug:PAe(n,r),verboseLogging:FJe(n,r),testMode:e,simulation:LJe(r)})}};function Kp(t){return t.get(yf).flags.testMode}s(Kp,"isRunningInTest");function y_(t){return Kp(t)}s(y_,"shouldFailForDebugPurposes");function Xk(t){return t.get(yf).flags.debug}s(Xk,"isDebugEnabled");function DAe(t){return t.get(yf).flags.verboseLogging}s(DAe,"isVerboseLoggingEnabled");function PAe(t,e){return t.includes("--debug")||EJ(e,"DEBUG")}s(PAe,"determineDebugFlag");function LJe(t){return EJ(t,"SIMULATION")}s(LJe,"determineSimulationFlag");function eL(t){return t.get(yf).flags.simulation}s(eL,"isRunningInSimulation");function FJe(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||EJ(e,"VERBOSE")||PAe(t,e)}s(FJe,"determineVerboseLoggingEnabled");function EJ(t,e){for(let n of["GH_COPILOT_","GITHUB_COPILOT_"]){let r=t[`${n}${e}`];if(r)return r==="1"||r?.toLowerCase()==="true"}return!1}s(EJ,"determineEnvFlagEnabled");f();var ya=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var FAe=require("os"),MAe=Ve(require("path"));function Zk(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(Zk,"redactPaths");var MJe=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),QJe=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function TJ(t){if(MJe.has(t))return t;for(let e of QJe)if(e.test(t))return t;return Zk(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(TJ,"redactMessage");function tL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(tL,"escapeForRegExp");var OJe=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+tL((0,FAe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function IJ(t){return t.replace(OJe,"~")}s(IJ,"redactHomeDir");var QAe="[\\\\/]?([^:)]*)(?=:\\d)",NAe=new RegExp(tL(MAe.sep),"g"),LAe=new RegExp(tL(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+QAe,"gi");function wJ(t,e,n=!1,r=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(l+`
`)){a=o.slice(l.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let l of a)if(LAe.test(l))i.stack+=`
${Zk(l.replace(LAe,(c,u)=>"./"+u.replace(NAe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))i.stack+=`
${Zk(l)}`;else{let c=!1;for(let{prefix:u,path:d}of r){let p=new RegExp(tL(d.replace(/[\\/]$/,""))+QAe,"gi");if(p.test(l)){i.stack+=`
${Zk(l.replace(p,(m,h)=>u+h.replace(NAe,"/")))}`,c=!0;break}}if(c)continue;n?i.stack+=`
${IJ(l)}`:i.stack+=`
    at [redacted]:0:0`}}else n&&o&&(i.stack=IJ(o));return t.cause instanceof Error&&(i.cause=wJ(t.cause,e,n,r)),i}s(wJ,"cloneError");function OAe(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(OAe,"errorMessageWithoutPath");function UAe(t,e){return wJ(t,s(function(r){return IJ(OAe(r))},"prepareMessage"),!0,e)}s(UAe,"prepareErrorForRestrictedTelemetry");function qAe(t,e,n=!1){return wJ(t,s(function(i){if(n)return TJ(OAe(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=Zk(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(qAe,"redactError");f();f();var Dc={};t1(Dc,{HasPropertyKey:()=>nL,IsArray:()=>Ca,IsAsyncIterator:()=>_J,IsBigInt:()=>eB,IsBoolean:()=>i1,IsDate:()=>VE,IsFunction:()=>SJ,IsIterator:()=>RJ,IsNull:()=>kJ,IsNumber:()=>Jd,IsObject:()=>_o,IsRegExp:()=>tB,IsString:()=>Uo,IsSymbol:()=>BJ,IsUint8Array:()=>o1,IsUndefined:()=>xa});f();function nL(t,e){return e in t}s(nL,"HasPropertyKey");function _J(t){return _o(t)&&!Ca(t)&&!o1(t)&&Symbol.asyncIterator in t}s(_J,"IsAsyncIterator");function Ca(t){return Array.isArray(t)}s(Ca,"IsArray");function eB(t){return typeof t=="bigint"}s(eB,"IsBigInt");function i1(t){return typeof t=="boolean"}s(i1,"IsBoolean");function VE(t){return t instanceof globalThis.Date}s(VE,"IsDate");function SJ(t){return typeof t=="function"}s(SJ,"IsFunction");function RJ(t){return _o(t)&&!Ca(t)&&!o1(t)&&Symbol.iterator in t}s(RJ,"IsIterator");function kJ(t){return t===null}s(kJ,"IsNull");function Jd(t){return typeof t=="number"}s(Jd,"IsNumber");function _o(t){return typeof t=="object"&&t!==null}s(_o,"IsObject");function tB(t){return t instanceof globalThis.RegExp}s(tB,"IsRegExp");function Uo(t){return typeof t=="string"}s(Uo,"IsString");function BJ(t){return typeof t=="symbol"}s(BJ,"IsSymbol");function o1(t){return t instanceof globalThis.Uint8Array}s(o1,"IsUint8Array");function xa(t){return t===void 0}s(xa,"IsUndefined");function UJe(t){return t.map(e=>rL(e))}s(UJe,"ArrayType");function qJe(t){return new Date(t.getTime())}s(qJe,"DateType");function WJe(t){return new Uint8Array(t)}s(WJe,"Uint8ArrayType");function GJe(t){return new RegExp(t.source,t.flags)}s(GJe,"RegExpType");function HJe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=rL(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=rL(t[n]);return e}s(HJe,"ObjectType");function rL(t){return Ca(t)?UJe(t):VE(t)?qJe(t):o1(t)?WJe(t):tB(t)?GJe(t):_o(t)?HJe(t):t}s(rL,"Visit");function as(t){return rL(t)}s(as,"Clone");function C_(t,e){return e===void 0?as(t):as({...e,...t})}s(C_,"CloneType");f();f();f();function iL(t){return ui(t)&&globalThis.Symbol.asyncIterator in t}s(iL,"IsAsyncIterator");function oL(t){return ui(t)&&globalThis.Symbol.iterator in t}s(oL,"IsIterator");function DJ(t){return ui(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(DJ,"IsStandardObject");function sL(t){return t instanceof globalThis.Promise}s(sL,"IsPromise");function mu(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(mu,"IsDate");function WAe(t){return t instanceof globalThis.Map}s(WAe,"IsMap");function GAe(t){return t instanceof globalThis.Set}s(GAe,"IsSet");function Cf(t){return globalThis.ArrayBuffer.isView(t)}s(Cf,"IsTypedArray");function x_(t){return t instanceof globalThis.Uint8Array}s(x_,"IsUint8Array");function hr(t,e){return e in t}s(hr,"HasPropertyKey");function ui(t){return t!==null&&typeof t=="object"}s(ui,"IsObject");function gr(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(gr,"IsArray");function ls(t){return t===void 0}s(ls,"IsUndefined");function s1(t){return t===null}s(s1,"IsNull");function Yh(t){return typeof t=="boolean"}s(Yh,"IsBoolean");function qn(t){return typeof t=="number"}s(qn,"IsNumber");function aL(t){return globalThis.Number.isInteger(t)}s(aL,"IsInteger");function ic(t){return typeof t=="bigint"}s(ic,"IsBigInt");function Oi(t){return typeof t=="string"}s(Oi,"IsString");function px(t){return typeof t=="function"}s(px,"IsFunction");function a1(t){return typeof t=="symbol"}s(a1,"IsSymbol");function Xd(t){return ic(t)||Yh(t)||s1(t)||qn(t)||Oi(t)||a1(t)||ls(t)}s(Xd,"IsValueType");var Yo;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,l){return t.ExactOptionalPropertyTypes?l in a:a[l]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){let l=ui(a);return t.AllowArrayObject?l:l&&!gr(a)}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return n(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return t.AllowNaN?qn(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let l=ls(a);return t.AllowNullVoid?l||a===null:l}s(o,"IsVoidLike"),t.IsVoidLike=o})(Yo||(Yo={}));f();function jJe(t){return globalThis.Object.freeze(t).map(e=>nB(e))}s(jJe,"ImmutableArray");function VJe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=nB(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=nB(t[n]);return globalThis.Object.freeze(e)}s(VJe,"ImmutableObject");function nB(t){return Ca(t)?jJe(t):VE(t)?t:o1(t)?t:tB(t)?t:_o(t)?VJe(t):t}s(nB,"Immutable");function nt(t,e){let n=e!==void 0?{...e,...t}:t;switch(Yo.InstanceMode){case"freeze":return nB(n);case"clone":return as(n);default:return n}}s(nt,"CreateType");f();var Ar=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var ks=Symbol.for("TypeBox.Transform"),Jp=Symbol.for("TypeBox.Readonly"),oc=Symbol.for("TypeBox.Optional"),xf=Symbol.for("TypeBox.Hint"),Ze=Symbol.for("TypeBox.Kind");function v_(t){return _o(t)&&t[Jp]==="Readonly"}s(v_,"IsReadonly");function ed(t){return _o(t)&&t[oc]==="Optional"}s(ed,"IsOptional");function PJ(t){return Di(t,"Any")}s(PJ,"IsAny");function NJ(t){return Di(t,"Argument")}s(NJ,"IsArgument");function Xp(t){return Di(t,"Array")}s(Xp,"IsArray");function $E(t){return Di(t,"AsyncIterator")}s($E,"IsAsyncIterator");function zE(t){return Di(t,"BigInt")}s(zE,"IsBigInt");function l1(t){return Di(t,"Boolean")}s(l1,"IsBoolean");function Zp(t){return Di(t,"Computed")}s(Zp,"IsComputed");function em(t){return Di(t,"Constructor")}s(em,"IsConstructor");function $Je(t){return Di(t,"Date")}s($Je,"IsDate");function tm(t){return Di(t,"Function")}s(tm,"IsFunction");function nm(t){return Di(t,"Integer")}s(nm,"IsInteger");function Hs(t){return Di(t,"Intersect")}s(Hs,"IsIntersect");function YE(t){return Di(t,"Iterator")}s(YE,"IsIterator");function Di(t,e){return _o(t)&&Ze in t&&t[Ze]===e}s(Di,"IsKindOf");function lL(t){return i1(t)||Jd(t)||Uo(t)}s(lL,"IsLiteralValue");function Zd(t){return Di(t,"Literal")}s(Zd,"IsLiteral");function e0(t){return Di(t,"MappedKey")}s(e0,"IsMappedKey");function cs(t){return Di(t,"MappedResult")}s(cs,"IsMappedResult");function mx(t){return Di(t,"Never")}s(mx,"IsNever");function zJe(t){return Di(t,"Not")}s(zJe,"IsNot");function rB(t){return Di(t,"Null")}s(rB,"IsNull");function rm(t){return Di(t,"Number")}s(rm,"IsNumber");function va(t){return Di(t,"Object")}s(va,"IsObject");function KE(t){return Di(t,"Promise")}s(KE,"IsPromise");function JE(t){return Di(t,"Record")}s(JE,"IsRecord");function ta(t){return Di(t,"Ref")}s(ta,"IsRef");function LJ(t){return Di(t,"RegExp")}s(LJ,"IsRegExp");function c1(t){return Di(t,"String")}s(c1,"IsString");function iB(t){return Di(t,"Symbol")}s(iB,"IsSymbol");function t0(t){return Di(t,"TemplateLiteral")}s(t0,"IsTemplateLiteral");function YJe(t){return Di(t,"This")}s(YJe,"IsThis");function io(t){return _o(t)&&ks in t}s(io,"IsTransform");function n0(t){return Di(t,"Tuple")}s(n0,"IsTuple");function u1(t){return Di(t,"Undefined")}s(u1,"IsUndefined");function Ui(t){return Di(t,"Union")}s(Ui,"IsUnion");function KJe(t){return Di(t,"Uint8Array")}s(KJe,"IsUint8Array");function JJe(t){return Di(t,"Unknown")}s(JJe,"IsUnknown");function XJe(t){return Di(t,"Unsafe")}s(XJe,"IsUnsafe");function ZJe(t){return Di(t,"Void")}s(ZJe,"IsVoid");function hx(t){return _o(t)&&Ze in t&&Uo(t[Ze])}s(hx,"IsKind");function Bs(t){return PJ(t)||NJ(t)||Xp(t)||l1(t)||zE(t)||$E(t)||Zp(t)||em(t)||$Je(t)||tm(t)||nm(t)||Hs(t)||YE(t)||Zd(t)||e0(t)||cs(t)||mx(t)||zJe(t)||rB(t)||rm(t)||va(t)||KE(t)||JE(t)||ta(t)||LJ(t)||c1(t)||iB(t)||t0(t)||YJe(t)||n0(t)||u1(t)||Ui(t)||KJe(t)||JJe(t)||XJe(t)||ZJe(t)||hx(t)}s(Bs,"IsSchema");var Pe={};t1(Pe,{IsAny:()=>$Ae,IsArgument:()=>zAe,IsArray:()=>YAe,IsAsyncIterator:()=>KAe,IsBigInt:()=>JAe,IsBoolean:()=>XAe,IsComputed:()=>ZAe,IsConstructor:()=>e1e,IsDate:()=>t1e,IsFunction:()=>n1e,IsImport:()=>oXe,IsInteger:()=>r1e,IsIntersect:()=>i1e,IsIterator:()=>o1e,IsKind:()=>B1e,IsKindOf:()=>Ai,IsLiteral:()=>sB,IsLiteralBoolean:()=>sXe,IsLiteralNumber:()=>a1e,IsLiteralString:()=>s1e,IsLiteralValue:()=>l1e,IsMappedKey:()=>c1e,IsMappedResult:()=>u1e,IsNever:()=>d1e,IsNot:()=>f1e,IsNull:()=>p1e,IsNumber:()=>m1e,IsObject:()=>h1e,IsOptional:()=>iXe,IsPromise:()=>g1e,IsProperties:()=>cL,IsReadonly:()=>rXe,IsRecord:()=>A1e,IsRecursive:()=>aXe,IsRef:()=>y1e,IsRegExp:()=>C1e,IsSchema:()=>us,IsString:()=>x1e,IsSymbol:()=>v1e,IsTemplateLiteral:()=>b1e,IsThis:()=>E1e,IsTransform:()=>I1e,IsTuple:()=>T1e,IsUint8Array:()=>_1e,IsUndefined:()=>w1e,IsUnion:()=>OJ,IsUnionLiteral:()=>lXe,IsUnknown:()=>S1e,IsUnsafe:()=>R1e,IsVoid:()=>k1e,TypeGuardUnknownTypeError:()=>FJ});f();var FJ=class extends Ar{static{s(this,"TypeGuardUnknownTypeError")}},eXe=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function HAe(t){try{return new RegExp(t),!0}catch{return!1}}s(HAe,"IsPattern");function MJ(t){if(!Uo(t))return!1;for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n>=7&&n<=13||n===27||n===127)return!1}return!0}s(MJ,"IsControlCharacterFree");function jAe(t){return QJ(t)||us(t)}s(jAe,"IsAdditionalProperties");function oB(t){return xa(t)||eB(t)}s(oB,"IsOptionalBigInt");function qo(t){return xa(t)||Jd(t)}s(qo,"IsOptionalNumber");function QJ(t){return xa(t)||i1(t)}s(QJ,"IsOptionalBoolean");function So(t){return xa(t)||Uo(t)}s(So,"IsOptionalString");function tXe(t){return xa(t)||Uo(t)&&MJ(t)&&HAe(t)}s(tXe,"IsOptionalPattern");function nXe(t){return xa(t)||Uo(t)&&MJ(t)}s(nXe,"IsOptionalFormat");function VAe(t){return xa(t)||us(t)}s(VAe,"IsOptionalSchema");function rXe(t){return _o(t)&&t[Jp]==="Readonly"}s(rXe,"IsReadonly");function iXe(t){return _o(t)&&t[oc]==="Optional"}s(iXe,"IsOptional");function $Ae(t){return Ai(t,"Any")&&So(t.$id)}s($Ae,"IsAny");function zAe(t){return Ai(t,"Argument")&&Jd(t.index)}s(zAe,"IsArgument");function YAe(t){return Ai(t,"Array")&&t.type==="array"&&So(t.$id)&&us(t.items)&&qo(t.minItems)&&qo(t.maxItems)&&QJ(t.uniqueItems)&&VAe(t.contains)&&qo(t.minContains)&&qo(t.maxContains)}s(YAe,"IsArray");function KAe(t){return Ai(t,"AsyncIterator")&&t.type==="AsyncIterator"&&So(t.$id)&&us(t.items)}s(KAe,"IsAsyncIterator");function JAe(t){return Ai(t,"BigInt")&&t.type==="bigint"&&So(t.$id)&&oB(t.exclusiveMaximum)&&oB(t.exclusiveMinimum)&&oB(t.maximum)&&oB(t.minimum)&&oB(t.multipleOf)}s(JAe,"IsBigInt");function XAe(t){return Ai(t,"Boolean")&&t.type==="boolean"&&So(t.$id)}s(XAe,"IsBoolean");function ZAe(t){return Ai(t,"Computed")&&Uo(t.target)&&Ca(t.parameters)&&t.parameters.every(e=>us(e))}s(ZAe,"IsComputed");function e1e(t){return Ai(t,"Constructor")&&t.type==="Constructor"&&So(t.$id)&&Ca(t.parameters)&&t.parameters.every(e=>us(e))&&us(t.returns)}s(e1e,"IsConstructor");function t1e(t){return Ai(t,"Date")&&t.type==="Date"&&So(t.$id)&&qo(t.exclusiveMaximumTimestamp)&&qo(t.exclusiveMinimumTimestamp)&&qo(t.maximumTimestamp)&&qo(t.minimumTimestamp)&&qo(t.multipleOfTimestamp)}s(t1e,"IsDate");function n1e(t){return Ai(t,"Function")&&t.type==="Function"&&So(t.$id)&&Ca(t.parameters)&&t.parameters.every(e=>us(e))&&us(t.returns)}s(n1e,"IsFunction");function oXe(t){return Ai(t,"Import")&&nL(t,"$defs")&&_o(t.$defs)&&cL(t.$defs)&&nL(t,"$ref")&&Uo(t.$ref)&&t.$ref in t.$defs}s(oXe,"IsImport");function r1e(t){return Ai(t,"Integer")&&t.type==="integer"&&So(t.$id)&&qo(t.exclusiveMaximum)&&qo(t.exclusiveMinimum)&&qo(t.maximum)&&qo(t.minimum)&&qo(t.multipleOf)}s(r1e,"IsInteger");function cL(t){return _o(t)&&Object.entries(t).every(([e,n])=>MJ(e)&&us(n))}s(cL,"IsProperties");function i1e(t){return Ai(t,"Intersect")&&!(Uo(t.type)&&t.type!=="object")&&Ca(t.allOf)&&t.allOf.every(e=>us(e)&&!I1e(e))&&So(t.type)&&(QJ(t.unevaluatedProperties)||VAe(t.unevaluatedProperties))&&So(t.$id)}s(i1e,"IsIntersect");function o1e(t){return Ai(t,"Iterator")&&t.type==="Iterator"&&So(t.$id)&&us(t.items)}s(o1e,"IsIterator");function Ai(t,e){return _o(t)&&Ze in t&&t[Ze]===e}s(Ai,"IsKindOf");function s1e(t){return sB(t)&&Uo(t.const)}s(s1e,"IsLiteralString");function a1e(t){return sB(t)&&Jd(t.const)}s(a1e,"IsLiteralNumber");function sXe(t){return sB(t)&&i1(t.const)}s(sXe,"IsLiteralBoolean");function sB(t){return Ai(t,"Literal")&&So(t.$id)&&l1e(t.const)}s(sB,"IsLiteral");function l1e(t){return i1(t)||Jd(t)||Uo(t)}s(l1e,"IsLiteralValue");function c1e(t){return Ai(t,"MappedKey")&&Ca(t.keys)&&t.keys.every(e=>Jd(e)||Uo(e))}s(c1e,"IsMappedKey");function u1e(t){return Ai(t,"MappedResult")&&cL(t.properties)}s(u1e,"IsMappedResult");function d1e(t){return Ai(t,"Never")&&_o(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(d1e,"IsNever");function f1e(t){return Ai(t,"Not")&&us(t.not)}s(f1e,"IsNot");function p1e(t){return Ai(t,"Null")&&t.type==="null"&&So(t.$id)}s(p1e,"IsNull");function m1e(t){return Ai(t,"Number")&&t.type==="number"&&So(t.$id)&&qo(t.exclusiveMaximum)&&qo(t.exclusiveMinimum)&&qo(t.maximum)&&qo(t.minimum)&&qo(t.multipleOf)}s(m1e,"IsNumber");function h1e(t){return Ai(t,"Object")&&t.type==="object"&&So(t.$id)&&cL(t.properties)&&jAe(t.additionalProperties)&&qo(t.minProperties)&&qo(t.maxProperties)}s(h1e,"IsObject");function g1e(t){return Ai(t,"Promise")&&t.type==="Promise"&&So(t.$id)&&us(t.item)}s(g1e,"IsPromise");function A1e(t){return Ai(t,"Record")&&t.type==="object"&&So(t.$id)&&jAe(t.additionalProperties)&&_o(t.patternProperties)&&(e=>{let n=Object.getOwnPropertyNames(e.patternProperties);return n.length===1&&HAe(n[0])&&_o(e.patternProperties)&&us(e.patternProperties[n[0]])})(t)}s(A1e,"IsRecord");function aXe(t){return _o(t)&&xf in t&&t[xf]==="Recursive"}s(aXe,"IsRecursive");function y1e(t){return Ai(t,"Ref")&&So(t.$id)&&Uo(t.$ref)}s(y1e,"IsRef");function C1e(t){return Ai(t,"RegExp")&&So(t.$id)&&Uo(t.source)&&Uo(t.flags)&&qo(t.maxLength)&&qo(t.minLength)}s(C1e,"IsRegExp");function x1e(t){return Ai(t,"String")&&t.type==="string"&&So(t.$id)&&qo(t.minLength)&&qo(t.maxLength)&&tXe(t.pattern)&&nXe(t.format)}s(x1e,"IsString");function v1e(t){return Ai(t,"Symbol")&&t.type==="symbol"&&So(t.$id)}s(v1e,"IsSymbol");function b1e(t){return Ai(t,"TemplateLiteral")&&t.type==="string"&&Uo(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(b1e,"IsTemplateLiteral");function E1e(t){return Ai(t,"This")&&So(t.$id)&&Uo(t.$ref)}s(E1e,"IsThis");function I1e(t){return _o(t)&&ks in t}s(I1e,"IsTransform");function T1e(t){return Ai(t,"Tuple")&&t.type==="array"&&So(t.$id)&&Jd(t.minItems)&&Jd(t.maxItems)&&t.minItems===t.maxItems&&(xa(t.items)&&xa(t.additionalItems)&&t.minItems===0||Ca(t.items)&&t.items.every(e=>us(e)))}s(T1e,"IsTuple");function w1e(t){return Ai(t,"Undefined")&&t.type==="undefined"&&So(t.$id)}s(w1e,"IsUndefined");function lXe(t){return OJ(t)&&t.anyOf.every(e=>s1e(e)||a1e(e))}s(lXe,"IsUnionLiteral");function OJ(t){return Ai(t,"Union")&&So(t.$id)&&_o(t)&&Ca(t.anyOf)&&t.anyOf.every(e=>us(e))}s(OJ,"IsUnion");function _1e(t){return Ai(t,"Uint8Array")&&t.type==="Uint8Array"&&So(t.$id)&&qo(t.minByteLength)&&qo(t.maxByteLength)}s(_1e,"IsUint8Array");function S1e(t){return Ai(t,"Unknown")&&So(t.$id)}s(S1e,"IsUnknown");function R1e(t){return Ai(t,"Unsafe")}s(R1e,"IsUnsafe");function k1e(t){return Ai(t,"Void")&&t.type==="void"&&So(t.$id)}s(k1e,"IsVoid");function B1e(t){return _o(t)&&Ze in t&&Uo(t[Ze])&&!eXe.includes(t[Ze])}s(B1e,"IsKind");function us(t){return _o(t)&&($Ae(t)||zAe(t)||YAe(t)||XAe(t)||JAe(t)||KAe(t)||ZAe(t)||e1e(t)||t1e(t)||n1e(t)||r1e(t)||i1e(t)||o1e(t)||sB(t)||c1e(t)||u1e(t)||d1e(t)||f1e(t)||p1e(t)||m1e(t)||h1e(t)||g1e(t)||A1e(t)||y1e(t)||C1e(t)||x1e(t)||v1e(t)||b1e(t)||E1e(t)||T1e(t)||w1e(t)||OJ(t)||_1e(t)||S1e(t)||R1e(t)||k1e(t)||B1e(t))}s(us,"IsSchema");f();var UJ="(true|false)",aB="(0|[1-9][0-9]*)",qJ="(.*)",cXe="(?!.*)",$zt=`^${UJ}$`,Kh=`^${aB}$`,Jh=`^${qJ}$`,D1e=`^${cXe}$`;f();var im={};t1(im,{Clear:()=>dXe,Delete:()=>fXe,Entries:()=>uXe,Get:()=>hXe,Has:()=>pXe,Set:()=>mXe});f();var b_=new Map;function uXe(){return new Map(b_)}s(uXe,"Entries");function dXe(){return b_.clear()}s(dXe,"Clear");function fXe(t){return b_.delete(t)}s(fXe,"Delete");function pXe(t){return b_.has(t)}s(pXe,"Has");function mXe(t,e){b_.set(t,e)}s(mXe,"Set");function hXe(t){return b_.get(t)}s(hXe,"Get");var hu={};t1(hu,{Clear:()=>AXe,Delete:()=>yXe,Entries:()=>gXe,Get:()=>vXe,Has:()=>CXe,Set:()=>xXe});f();var E_=new Map;function gXe(){return new Map(E_)}s(gXe,"Entries");function AXe(){return E_.clear()}s(AXe,"Clear");function yXe(t){return E_.delete(t)}s(yXe,"Delete");function CXe(t){return E_.has(t)}s(CXe,"Has");function xXe(t,e){E_.set(t,e)}s(xXe,"Set");function vXe(t){return E_.get(t)}s(vXe,"Get");f();function P1e(t,e){return t.includes(e)}s(P1e,"SetIncludes");function N1e(t){return[...new Set(t)]}s(N1e,"SetDistinct");function bXe(t,e){return t.filter(n=>e.includes(n))}s(bXe,"SetIntersect");function EXe(t,e){return t.reduce((n,r)=>bXe(n,r),e)}s(EXe,"SetIntersectManyResolve");function L1e(t){return t.length===1?t[0]:t.length>1?EXe(t.slice(1),t[0]):[]}s(L1e,"SetIntersectMany");function F1e(t){let e=[];for(let n of t)e.push(...n);return e}s(F1e,"SetUnionMany");f();function gx(t){return nt({[Ze]:"Any"},t)}s(gx,"Any");f();function I_(t,e){return nt({[Ze]:"Array",type:"array",items:t},e)}s(I_,"Array");f();function M1e(t){return nt({[Ze]:"Argument",index:t})}s(M1e,"Argument");f();function T_(t,e){return nt({[Ze]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(T_,"AsyncIterator");f();f();function Ko(t,e,n){return nt({[Ze]:"Computed",target:t,parameters:e},n)}s(Ko,"Computed");f();f();function IXe(t,e){let{[e]:n,...r}=t;return r}s(IXe,"DiscardKey");function js(t,e){return e.reduce((n,r)=>IXe(n,r),t)}s(js,"Discard");f();function ri(t){return nt({[Ze]:"Never",not:{}},t)}s(ri,"Never");f();f();function $i(t){return nt({[Ze]:"MappedResult",properties:t})}s($i,"MappedResult");f();f();function w_(t,e,n){return nt({[Ze]:"Constructor",type:"Constructor",parameters:t,returns:e},n)}s(w_,"Constructor");f();function Xh(t,e,n){return nt({[Ze]:"Function",type:"Function",parameters:t,returns:e},n)}s(Xh,"Function");f();f();f();f();function lB(t,e){return nt({[Ze]:"Union",anyOf:t},e)}s(lB,"UnionCreate");function TXe(t){return t.some(e=>ed(e))}s(TXe,"IsUnionOptional");function Q1e(t){return t.map(e=>ed(e)?wXe(e):e)}s(Q1e,"RemoveOptionalFromRest");function wXe(t){return js(t,[oc])}s(wXe,"RemoveOptionalFromType");function _Xe(t,e){return TXe(t)?Pc(lB(Q1e(t),e)):lB(Q1e(t),e)}s(_Xe,"ResolveUnion");function Zh(t,e){return t.length===1?nt(t[0],e):t.length===0?ri(e):_Xe(t,e)}s(Zh,"UnionEvaluated");f();function oo(t,e){return t.length===0?ri(e):t.length===1?nt(t[0],e):lB(t,e)}s(oo,"Union");f();f();f();var uL=class extends Ar{static{s(this,"TemplateLiteralParserError")}};function SXe(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(SXe,"Unescape");function WJ(t,e,n){return t[e]===n&&t.charCodeAt(e-1)!==92}s(WJ,"IsNonEscaped");function f1(t,e){return WJ(t,e,"(")}s(f1,"IsOpenParen");function cB(t,e){return WJ(t,e,")")}s(cB,"IsCloseParen");function O1e(t,e){return WJ(t,e,"|")}s(O1e,"IsSeparator");function RXe(t){if(!(f1(t,0)&&cB(t,t.length-1)))return!1;let e=0;for(let n=0;n<t.length;n++)if(f1(t,n)&&(e+=1),cB(t,n)&&(e-=1),e===0&&n!==t.length-1)return!1;return!0}s(RXe,"IsGroup");function kXe(t){return t.slice(1,t.length-1)}s(kXe,"InGroup");function BXe(t){let e=0;for(let n=0;n<t.length;n++)if(f1(t,n)&&(e+=1),cB(t,n)&&(e-=1),O1e(t,n)&&e===0)return!0;return!1}s(BXe,"IsPrecedenceOr");function DXe(t){for(let e=0;e<t.length;e++)if(f1(t,e))return!0;return!1}s(DXe,"IsPrecedenceAnd");function PXe(t){let[e,n]=[0,0],r=[];for(let o=0;o<t.length;o++)if(f1(t,o)&&(e+=1),cB(t,o)&&(e-=1),O1e(t,o)&&e===0){let a=t.slice(n,o);a.length>0&&r.push(__(a)),n=o+1}let i=t.slice(n);return i.length>0&&r.push(__(i)),r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"or",expr:r}}s(PXe,"Or");function NXe(t){function e(i,o){if(!f1(i,o))throw new uL("TemplateLiteralParser: Index must point to open parens");let a=0;for(let l=o;l<i.length;l++)if(f1(i,l)&&(a+=1),cB(i,l)&&(a-=1),a===0)return[o,l];throw new uL("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function n(i,o){for(let a=o;a<i.length;a++)if(f1(i,a))return[o,a];return[o,i.length]}s(n,"Range");let r=[];for(let i=0;i<t.length;i++)if(f1(t,i)){let[o,a]=e(t,i),l=t.slice(o,a+1);r.push(__(l)),i=a}else{let[o,a]=n(t,i),l=t.slice(o,a);l.length>0&&r.push(__(l)),i=a-1}return r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"and",expr:r}}s(NXe,"And");function __(t){return RXe(t)?__(kXe(t)):BXe(t)?PXe(t):DXe(t)?NXe(t):{type:"const",const:SXe(t)}}s(__,"TemplateLiteralParse");function S_(t){return __(t.slice(1,t.length-1))}s(S_,"TemplateLiteralParseExact");var GJ=class extends Ar{static{s(this,"TemplateLiteralFiniteError")}};function LXe(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(LXe,"IsNumberExpression");function FXe(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(FXe,"IsBooleanExpression");function MXe(t){return t.type==="const"&&t.const===".*"}s(MXe,"IsStringExpression");function XE(t){return LXe(t)||MXe(t)?!1:FXe(t)?!0:t.type==="and"?t.expr.every(e=>XE(e)):t.type==="or"?t.expr.every(e=>XE(e)):t.type==="const"?!0:(()=>{throw new GJ("Unknown expression type")})()}s(XE,"IsTemplateLiteralExpressionFinite");function dL(t){let e=S_(t.pattern);return XE(e)}s(dL,"IsTemplateLiteralFinite");f();var HJ=class extends Ar{static{s(this,"TemplateLiteralGenerateError")}};function*U1e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let n of U1e(t.slice(1)))yield`${e}${n}`}s(U1e,"GenerateReduce");function*QXe(t){return yield*U1e(t.expr.map(e=>[...uB(e)]))}s(QXe,"GenerateAnd");function*OXe(t){for(let e of t.expr)yield*uB(e)}s(OXe,"GenerateOr");function*UXe(t){return yield t.const}s(UXe,"GenerateConst");function*uB(t){return t.type==="and"?yield*QXe(t):t.type==="or"?yield*OXe(t):t.type==="const"?yield*UXe(t):(()=>{throw new HJ("Unknown expression")})()}s(uB,"TemplateLiteralExpressionGenerate");function R_(t){let e=S_(t.pattern);return XE(e)?[...uB(e)]:[]}s(R_,"TemplateLiteralGenerate");f();f();function Pi(t,e){return nt({[Ze]:"Literal",const:t,type:typeof t},e)}s(Pi,"Literal");f();function fL(t){return nt({[Ze]:"Boolean",type:"boolean"},t)}s(fL,"Boolean");f();function k_(t){return nt({[Ze]:"BigInt",type:"bigint"},t)}s(k_,"BigInt");f();function vf(t){return nt({[Ze]:"Number",type:"number"},t)}s(vf,"Number");f();function gu(t){return nt({[Ze]:"String",type:"string"},t)}s(gu,"String");function*qXe(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield fL():e==="number"?yield vf():e==="bigint"?yield k_():e==="string"?yield gu():yield(()=>{let n=e.split("|").map(r=>Pi(r.trim()));return n.length===0?ri():n.length===1?n[0]:Zh(n)})()}s(qXe,"FromUnion");function*WXe(t){if(t[1]!=="{"){let e=Pi("$"),n=jJ(t.slice(1));return yield*[e,...n]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let n=qXe(t.slice(2,e)),r=jJ(t.slice(e+1));return yield*[...n,...r]}yield Pi(t)}s(WXe,"FromTerminal");function*jJ(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let n=Pi(t.slice(0,e)),r=WXe(t.slice(e));return yield*[n,...r]}yield Pi(t)}s(jJ,"FromSyntax");function q1e(t){return[...jJ(t)]}s(q1e,"TemplateLiteralSyntax");f();var VJ=class extends Ar{static{s(this,"TemplateLiteralPatternError")}};function GXe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(GXe,"Escape");function W1e(t,e){return t0(t)?t.pattern.slice(1,t.pattern.length-1):Ui(t)?`(${t.anyOf.map(n=>W1e(n,e)).join("|")})`:rm(t)?`${e}${aB}`:nm(t)?`${e}${aB}`:zE(t)?`${e}${aB}`:c1(t)?`${e}${qJ}`:Zd(t)?`${e}${GXe(t.const.toString())}`:l1(t)?`${e}${UJ}`:(()=>{throw new VJ(`Unexpected Kind '${t[Ze]}'`)})()}s(W1e,"Visit");function $J(t){return`^${t.map(e=>W1e(e,"")).join("")}$`}s($J,"TemplateLiteralPattern");f();function ZE(t){let n=R_(t).map(r=>Pi(r));return Zh(n)}s(ZE,"TemplateLiteralToUnion");f();function pL(t,e){let n=Uo(t)?$J(q1e(t)):$J(t);return nt({[Ze]:"TemplateLiteral",type:"string",pattern:n},e)}s(pL,"TemplateLiteral");function HXe(t){return R_(t).map(n=>n.toString())}s(HXe,"FromTemplateLiteral");function jXe(t){let e=[];for(let n of t)e.push(...td(n));return e}s(jXe,"FromUnion");function VXe(t){return[t.toString()]}s(VXe,"FromLiteral");function td(t){return[...new Set(t0(t)?HXe(t):Ui(t)?jXe(t.anyOf):Zd(t)?VXe(t.const):rm(t)?["[number]"]:nm(t)?["[number]"]:[])]}s(td,"IndexPropertyKeys");f();function $Xe(t,e,n){let r={};for(let i of Object.getOwnPropertyNames(e))r[i]=Ax(t,td(e[i]),n);return r}s($Xe,"FromProperties");function zXe(t,e,n){return $Xe(t,e.properties,n)}s(zXe,"FromMappedResult");function G1e(t,e,n){let r=zXe(t,e,n);return $i(r)}s(G1e,"IndexFromMappedResult");function j1e(t,e){return t.map(n=>V1e(n,e))}s(j1e,"FromRest");function YXe(t){return t.filter(e=>!mx(e))}s(YXe,"FromIntersectRest");function KXe(t,e){return mL(YXe(j1e(t,e)))}s(KXe,"FromIntersect");function JXe(t){return t.some(e=>mx(e))?[]:t}s(JXe,"FromUnionRest");function XXe(t,e){return Zh(JXe(j1e(t,e)))}s(XXe,"FromUnion");function ZXe(t,e){return e in t?t[e]:e==="[number]"?Zh(t):ri()}s(ZXe,"FromTuple");function eZe(t,e){return e==="[number]"?t:ri()}s(eZe,"FromArray");function tZe(t,e){return e in t?t[e]:ri()}s(tZe,"FromProperty");function V1e(t,e){return Hs(t)?KXe(t.allOf,e):Ui(t)?XXe(t.anyOf,e):n0(t)?ZXe(t.items??[],e):Xp(t)?eZe(t.items,e):va(t)?tZe(t.properties,e):ri()}s(V1e,"IndexFromPropertyKey");function dB(t,e){return e.map(n=>V1e(t,n))}s(dB,"IndexFromPropertyKeys");function H1e(t,e){return Zh(dB(t,e))}s(H1e,"FromSchema");function Ax(t,e,n){if(ta(t)||ta(e)){let r="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Bs(t)||!Bs(e))throw new Ar(r);return Ko("Index",[t,e])}return cs(e)?G1e(t,e,n):e0(e)?$1e(t,e,n):nt(Bs(e)?H1e(t,td(e)):H1e(t,e),n)}s(Ax,"Index");function nZe(t,e,n){return{[e]:Ax(t,[e],as(n))}}s(nZe,"MappedIndexPropertyKey");function rZe(t,e,n){return e.reduce((r,i)=>({...r,...nZe(t,i,n)}),{})}s(rZe,"MappedIndexPropertyKeys");function iZe(t,e,n){return rZe(t,e.keys,n)}s(iZe,"MappedIndexProperties");function $1e(t,e,n){let r=iZe(t,e,n);return $i(r)}s($1e,"IndexFromMappedKey");f();function B_(t,e){return nt({[Ze]:"Iterator",type:"Iterator",items:t},e)}s(B_,"Iterator");f();function oZe(t){let e=[];for(let n in t)ed(t[n])||e.push(n);return e}s(oZe,"RequiredKeys");function sZe(t,e){let n=oZe(t),r=n.length>0?{[Ze]:"Object",type:"object",properties:t,required:n}:{[Ze]:"Object",type:"object",properties:t};return nt(r,e)}s(sZe,"_Object");var so=sZe;f();function hL(t,e){return nt({[Ze]:"Promise",type:"Promise",item:t},e)}s(hL,"Promise");f();f();function aZe(t){return nt(js(t,[Jp]))}s(aZe,"RemoveReadonly");function lZe(t){return nt({...t,[Jp]:"Readonly"})}s(lZe,"AddReadonly");function cZe(t,e){return e===!1?aZe(t):lZe(t)}s(cZe,"ReadonlyWithFlag");function nd(t,e){let n=e??!0;return cs(t)?z1e(t,n):cZe(t,n)}s(nd,"Readonly");function uZe(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=nd(t[r],e);return n}s(uZe,"FromProperties");function dZe(t,e){return uZe(t.properties,e)}s(dZe,"FromMappedResult");function z1e(t,e){let n=dZe(t,e);return $i(n)}s(z1e,"ReadonlyFromMappedResult");f();function bf(t,e){return nt(t.length>0?{[Ze]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Ze]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(bf,"Tuple");function Y1e(t,e){return t in e?Ef(t,e[t]):$i(e)}s(Y1e,"FromMappedResult");function fZe(t){return{[t]:Pi(t)}}s(fZe,"MappedKeyToKnownMappedResultProperties");function pZe(t){let e={};for(let n of t)e[n]=Pi(n);return e}s(pZe,"MappedKeyToUnknownMappedResultProperties");function mZe(t,e){return P1e(e,t)?fZe(t):pZe(e)}s(mZe,"MappedKeyToMappedResultProperties");function hZe(t,e){let n=mZe(t,e);return Y1e(t,n)}s(hZe,"FromMappedKey");function fB(t,e){return e.map(n=>Ef(t,n))}s(fB,"FromRest");function gZe(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=Ef(t,e[r]);return n}s(gZe,"FromProperties");function Ef(t,e){let n={...e};return ed(e)?Pc(Ef(t,js(e,[oc]))):v_(e)?nd(Ef(t,js(e,[Jp]))):cs(e)?Y1e(t,e.properties):e0(e)?hZe(t,e.keys):em(e)?w_(fB(t,e.parameters),Ef(t,e.returns),n):tm(e)?Xh(fB(t,e.parameters),Ef(t,e.returns),n):$E(e)?T_(Ef(t,e.items),n):YE(e)?B_(Ef(t,e.items),n):Hs(e)?Nc(fB(t,e.allOf),n):Ui(e)?oo(fB(t,e.anyOf),n):n0(e)?bf(fB(t,e.items??[]),n):va(e)?so(gZe(t,e.properties),n):Xp(e)?I_(Ef(t,e.items),n):KE(e)?hL(Ef(t,e.item),n):e}s(Ef,"FromSchemaType");function AZe(t,e){let n={};for(let r of t)n[r]=Ef(r,e);return n}s(AZe,"MappedFunctionReturnType");function K1e(t,e,n){let r=Bs(t)?td(t):t,i=e({[Ze]:"MappedKey",keys:r}),o=AZe(r,i);return so(o,n)}s(K1e,"Mapped");f();function yZe(t){return nt(js(t,[oc]))}s(yZe,"RemoveOptional");function CZe(t){return nt({...t,[oc]:"Optional"})}s(CZe,"AddOptional");function xZe(t,e){return e===!1?yZe(t):CZe(t)}s(xZe,"OptionalWithFlag");function Pc(t,e){let n=e??!0;return cs(t)?J1e(t,n):xZe(t,n)}s(Pc,"Optional");function vZe(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Pc(t[r],e);return n}s(vZe,"FromProperties");function bZe(t,e){return vZe(t.properties,e)}s(bZe,"FromMappedResult");function J1e(t,e){let n=bZe(t,e);return $i(n)}s(J1e,"OptionalFromMappedResult");f();function pB(t,e={}){let n=t.every(i=>va(i)),r=Bs(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return nt(e.unevaluatedProperties===!1||Bs(e.unevaluatedProperties)||n?{...r,[Ze]:"Intersect",type:"object",allOf:t}:{...r,[Ze]:"Intersect",allOf:t},e)}s(pB,"IntersectCreate");function EZe(t){return t.every(e=>ed(e))}s(EZe,"IsIntersectOptional");function IZe(t){return js(t,[oc])}s(IZe,"RemoveOptionalFromType");function X1e(t){return t.map(e=>ed(e)?IZe(e):e)}s(X1e,"RemoveOptionalFromRest");function TZe(t,e){return EZe(t)?Pc(pB(X1e(t),e)):pB(X1e(t),e)}s(TZe,"ResolveIntersect");function mL(t,e={}){if(t.length===1)return nt(t[0],e);if(t.length===0)return ri(e);if(t.some(n=>io(n)))throw new Error("Cannot intersect transform types");return TZe(t,e)}s(mL,"IntersectEvaluated");f();function Nc(t,e){if(t.length===1)return nt(t[0],e);if(t.length===0)return ri(e);if(t.some(n=>io(n)))throw new Error("Cannot intersect transform types");return pB(t,e)}s(Nc,"Intersect");f();function If(...t){let[e,n]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Ar("Ref: $ref must be a string");return nt({[Ze]:"Ref",$ref:e},n)}s(If,"Ref");function wZe(t,e){return Ko("Awaited",[Ko(t,e)])}s(wZe,"FromComputed");function _Ze(t){return Ko("Awaited",[If(t)])}s(_Ze,"FromRef");function SZe(t){return Nc(Z1e(t))}s(SZe,"FromIntersect");function RZe(t){return oo(Z1e(t))}s(RZe,"FromUnion");function kZe(t){return D_(t)}s(kZe,"FromPromise");function Z1e(t){return t.map(e=>D_(e))}s(Z1e,"FromRest");function D_(t,e){return nt(Zp(t)?wZe(t.target,t.parameters):Hs(t)?SZe(t.allOf):Ui(t)?RZe(t.anyOf):KE(t)?kZe(t.item):ta(t)?_Ze(t.$ref):t,e)}s(D_,"Awaited");f();f();f();f();function eye(t){let e=[];for(let n of t)e.push(rd(n));return e}s(eye,"FromRest");function BZe(t){let e=eye(t);return F1e(e)}s(BZe,"FromIntersect");function DZe(t){let e=eye(t);return L1e(e)}s(DZe,"FromUnion");function PZe(t){return t.map((e,n)=>n.toString())}s(PZe,"FromTuple");function NZe(t){return["[number]"]}s(NZe,"FromArray");function LZe(t){return globalThis.Object.getOwnPropertyNames(t)}s(LZe,"FromProperties");function FZe(t){return zJ?globalThis.Object.getOwnPropertyNames(t).map(n=>n[0]==="^"&&n[n.length-1]==="$"?n.slice(1,n.length-1):n):[]}s(FZe,"FromPatternProperties");function rd(t){return Hs(t)?BZe(t.allOf):Ui(t)?DZe(t.anyOf):n0(t)?PZe(t.items??[]):Xp(t)?NZe(t.items):va(t)?LZe(t.properties):JE(t)?FZe(t.patternProperties):[]}s(rd,"KeyOfPropertyKeys");var zJ=!1;function p1(t){zJ=!0;let e=rd(t);return zJ=!1,`^(${e.map(r=>`(${r})`).join("|")})$`}s(p1,"KeyOfPattern");function MZe(t,e){return Ko("KeyOf",[Ko(t,e)])}s(MZe,"FromComputed");function QZe(t){return Ko("KeyOf",[If(t)])}s(QZe,"FromRef");function OZe(t,e){let n=rd(t),r=UZe(n),i=Zh(r);return nt(i,e)}s(OZe,"KeyOfFromType");function UZe(t){return t.map(e=>e==="[number]"?vf():Pi(e))}s(UZe,"KeyOfPropertyKeysToRest");function P_(t,e){return Zp(t)?MZe(t.target,t.parameters):ta(t)?QZe(t.$ref):cs(t)?tye(t,e):OZe(t,e)}s(P_,"KeyOf");function qZe(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=P_(t[r],as(e));return n}s(qZe,"FromProperties");function WZe(t,e){return qZe(t.properties,e)}s(WZe,"FromMappedResult");function tye(t,e){let n=WZe(t,e);return $i(n)}s(tye,"KeyOfFromMappedResult");f();function gL(t){let e=rd(t),n=dB(t,e);return e.map((r,i)=>[e[i],n[i]])}s(gL,"KeyOfPropertyEntries");function GZe(t){let e=[];for(let n of t)e.push(...rd(n));return N1e(e)}s(GZe,"CompositeKeys");function HZe(t){return t.filter(e=>!mx(e))}s(HZe,"FilterNever");function jZe(t,e){let n=[];for(let r of t)n.push(...dB(r,[e]));return HZe(n)}s(jZe,"CompositeProperty");function VZe(t,e){let n={};for(let r of e)n[r]=mL(jZe(t,r));return n}s(VZe,"CompositeProperties");function nye(t,e){let n=GZe(t),r=VZe(t,n);return so(r,e)}s(nye,"Composite");f();f();function AL(t){return nt({[Ze]:"Date",type:"Date"},t)}s(AL,"Date");f();function yL(t){return nt({[Ze]:"Null",type:"null"},t)}s(yL,"Null");f();function CL(t){return nt({[Ze]:"Symbol",type:"symbol"},t)}s(CL,"Symbol");f();function xL(t){return nt({[Ze]:"Undefined",type:"undefined"},t)}s(xL,"Undefined");f();function vL(t){return nt({[Ze]:"Uint8Array",type:"Uint8Array"},t)}s(vL,"Uint8Array");f();function om(t){return nt({[Ze]:"Unknown"},t)}s(om,"Unknown");function $Ze(t){return t.map(e=>YJ(e,!1))}s($Ze,"FromArray");function zZe(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=nd(YJ(t[n],!1));return e}s(zZe,"FromProperties");function bL(t,e){return e===!0?t:nd(t)}s(bL,"ConditionalReadonly");function YJ(t,e){return _J(t)?bL(gx(),e):RJ(t)?bL(gx(),e):Ca(t)?nd(bf($Ze(t))):o1(t)?vL():VE(t)?AL():_o(t)?bL(so(zZe(t)),e):SJ(t)?bL(Xh([],om()),e):xa(t)?xL():kJ(t)?yL():BJ(t)?CL():eB(t)?k_():Jd(t)?Pi(t):i1(t)?Pi(t):Uo(t)?Pi(t):so({})}s(YJ,"FromValue");function rye(t,e){return nt(YJ(t,!0),e)}s(rye,"Const");f();function iye(t,e){return em(t)?bf(t.parameters,e):ri(e)}s(iye,"ConstructorParameters");f();function oye(t,e){if(xa(t))throw new Error("Enum undefined or empty");let n=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(n)].map(o=>Pi(o));return oo(i,{...e,[xf]:"Enum"})}s(oye,"Enum");f();f();f();var JJ=class extends Ar{static{s(this,"ExtendsResolverError")}},rt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(rt||(rt={}));function Tf(t){return t===rt.False?t:rt.True}s(Tf,"IntoBooleanResult");function N_(t){throw new JJ(t)}s(N_,"Throw");function qa(t){return Pe.IsNever(t)||Pe.IsIntersect(t)||Pe.IsUnion(t)||Pe.IsUnknown(t)||Pe.IsAny(t)}s(qa,"IsStructuralRight");function Wa(t,e){return Pe.IsNever(e)?fye(t,e):Pe.IsIntersect(e)?EL(t,e):Pe.IsUnion(e)?tX(t,e):Pe.IsUnknown(e)?gye(t,e):Pe.IsAny(e)?eX(t,e):N_("StructuralRight")}s(Wa,"StructuralRight");function eX(t,e){return rt.True}s(eX,"FromAnyRight");function YZe(t,e){return Pe.IsIntersect(e)?EL(t,e):Pe.IsUnion(e)&&e.anyOf.some(n=>Pe.IsAny(n)||Pe.IsUnknown(n))?rt.True:Pe.IsUnion(e)?rt.Union:Pe.IsUnknown(e)||Pe.IsAny(e)?rt.True:rt.Union}s(YZe,"FromAny");function KZe(t,e){return Pe.IsUnknown(t)?rt.False:Pe.IsAny(t)?rt.Union:Pe.IsNever(t)?rt.True:rt.False}s(KZe,"FromArrayRight");function JZe(t,e){return Pe.IsObject(e)&&IL(e)?rt.True:qa(e)?Wa(t,e):Pe.IsArray(e)?Tf(Ro(t.items,e.items)):rt.False}s(JZe,"FromArray");function XZe(t,e){return qa(e)?Wa(t,e):Pe.IsAsyncIterator(e)?Tf(Ro(t.items,e.items)):rt.False}s(XZe,"FromAsyncIterator");function ZZe(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsBigInt(e)?rt.True:rt.False}s(ZZe,"FromBigInt");function uye(t,e){return Pe.IsLiteralBoolean(t)||Pe.IsBoolean(t)?rt.True:rt.False}s(uye,"FromBooleanRight");function eet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsBoolean(e)?rt.True:rt.False}s(eet,"FromBoolean");function tet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsConstructor(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>Tf(Ro(e.parameters[r],n))===rt.True)?Tf(Ro(t.returns,e.returns)):rt.False:rt.False}s(tet,"FromConstructor");function net(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsDate(e)?rt.True:rt.False}s(net,"FromDate");function ret(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsFunction(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>Tf(Ro(e.parameters[r],n))===rt.True)?Tf(Ro(t.returns,e.returns)):rt.False:rt.False}s(ret,"FromFunction");function dye(t,e){return Pe.IsLiteral(t)&&Dc.IsNumber(t.const)||Pe.IsNumber(t)||Pe.IsInteger(t)?rt.True:rt.False}s(dye,"FromIntegerRight");function iet(t,e){return Pe.IsInteger(e)||Pe.IsNumber(e)?rt.True:qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):rt.False}s(iet,"FromInteger");function EL(t,e){return e.allOf.every(n=>Ro(t,n)===rt.True)?rt.True:rt.False}s(EL,"FromIntersectRight");function oet(t,e){return t.allOf.some(n=>Ro(n,e)===rt.True)?rt.True:rt.False}s(oet,"FromIntersect");function set(t,e){return qa(e)?Wa(t,e):Pe.IsIterator(e)?Tf(Ro(t.items,e.items)):rt.False}s(set,"FromIterator");function aet(t,e){return Pe.IsLiteral(e)&&e.const===t.const?rt.True:qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsString(e)?hye(t,e):Pe.IsNumber(e)?pye(t,e):Pe.IsInteger(e)?dye(t,e):Pe.IsBoolean(e)?uye(t,e):rt.False}s(aet,"FromLiteral");function fye(t,e){return rt.False}s(fye,"FromNeverRight");function cet(t,e){return rt.True}s(cet,"FromNever");function sye(t){let[e,n]=[t,0];for(;Pe.IsNot(e);)e=e.not,n+=1;return n%2===0?e:om()}s(sye,"UnwrapTNot");function uet(t,e){return Pe.IsNot(t)?Ro(sye(t),e):Pe.IsNot(e)?Ro(t,sye(e)):N_("Invalid fallthrough for Not")}s(uet,"FromNot");function det(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsNull(e)?rt.True:rt.False}s(det,"FromNull");function pye(t,e){return Pe.IsLiteralNumber(t)||Pe.IsNumber(t)||Pe.IsInteger(t)?rt.True:rt.False}s(pye,"FromNumberRight");function fet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsInteger(e)||Pe.IsNumber(e)?rt.True:rt.False}s(fet,"FromNumber");function id(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(id,"IsObjectPropertyCount");function aye(t){return IL(t)}s(aye,"IsObjectStringLike");function lye(t){return id(t,0)||id(t,1)&&"description"in t.properties&&Pe.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Pe.IsString(t.properties.description.anyOf[0])&&Pe.IsUndefined(t.properties.description.anyOf[1])||Pe.IsString(t.properties.description.anyOf[1])&&Pe.IsUndefined(t.properties.description.anyOf[0]))}s(lye,"IsObjectSymbolLike");function KJ(t){return id(t,0)}s(KJ,"IsObjectNumberLike");function cye(t){return id(t,0)}s(cye,"IsObjectBooleanLike");function pet(t){return id(t,0)}s(pet,"IsObjectBigIntLike");function met(t){return id(t,0)}s(met,"IsObjectDateLike");function het(t){return IL(t)}s(het,"IsObjectUint8ArrayLike");function get(t){let e=vf();return id(t,0)||id(t,1)&&"length"in t.properties&&Tf(Ro(t.properties.length,e))===rt.True}s(get,"IsObjectFunctionLike");function Aet(t){return id(t,0)}s(Aet,"IsObjectConstructorLike");function IL(t){let e=vf();return id(t,0)||id(t,1)&&"length"in t.properties&&Tf(Ro(t.properties.length,e))===rt.True}s(IL,"IsObjectArrayLike");function yet(t){let e=Xh([gx()],gx());return id(t,0)||id(t,1)&&"then"in t.properties&&Tf(Ro(t.properties.then,e))===rt.True}s(yet,"IsObjectPromiseLike");function mye(t,e){return Ro(t,e)===rt.False||Pe.IsOptional(t)&&!Pe.IsOptional(e)?rt.False:rt.True}s(mye,"Property");function Lc(t,e){return Pe.IsUnknown(t)?rt.False:Pe.IsAny(t)?rt.Union:Pe.IsNever(t)||Pe.IsLiteralString(t)&&aye(e)||Pe.IsLiteralNumber(t)&&KJ(e)||Pe.IsLiteralBoolean(t)&&cye(e)||Pe.IsSymbol(t)&&lye(e)||Pe.IsBigInt(t)&&pet(e)||Pe.IsString(t)&&aye(e)||Pe.IsSymbol(t)&&lye(e)||Pe.IsNumber(t)&&KJ(e)||Pe.IsInteger(t)&&KJ(e)||Pe.IsBoolean(t)&&cye(e)||Pe.IsUint8Array(t)&&het(e)||Pe.IsDate(t)&&met(e)||Pe.IsConstructor(t)&&Aet(e)||Pe.IsFunction(t)&&get(e)?rt.True:Pe.IsRecord(t)&&Pe.IsString(XJ(t))?e[xf]==="Record"?rt.True:rt.False:Pe.IsRecord(t)&&Pe.IsNumber(XJ(t))?id(e,0)?rt.True:rt.False:rt.False}s(Lc,"FromObjectRight");function Cet(t,e){return qa(e)?Wa(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsObject(e)?(()=>{for(let n of Object.getOwnPropertyNames(e.properties)){if(!(n in t.properties)&&!Pe.IsOptional(e.properties[n]))return rt.False;if(Pe.IsOptional(e.properties[n]))return rt.True;if(mye(t.properties[n],e.properties[n])===rt.False)return rt.False}return rt.True})():rt.False}s(Cet,"FromObject");function xet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)&&yet(e)?rt.True:Pe.IsPromise(e)?Tf(Ro(t.item,e.item)):rt.False}s(xet,"FromPromise");function XJ(t){return Kh in t.patternProperties?vf():Jh in t.patternProperties?gu():N_("Unknown record key pattern")}s(XJ,"RecordKey");function ZJ(t){return Kh in t.patternProperties?t.patternProperties[Kh]:Jh in t.patternProperties?t.patternProperties[Jh]:N_("Unable to get record value schema")}s(ZJ,"RecordValue");function wf(t,e){let[n,r]=[XJ(e),ZJ(e)];return Pe.IsLiteralString(t)&&Pe.IsNumber(n)&&Tf(Ro(t,r))===rt.True?rt.True:Pe.IsUint8Array(t)&&Pe.IsNumber(n)||Pe.IsString(t)&&Pe.IsNumber(n)||Pe.IsArray(t)&&Pe.IsNumber(n)?Ro(t,r):Pe.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(mye(r,t.properties[i])===rt.False)return rt.False;return rt.True})():rt.False}s(wf,"FromRecordRight");function vet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?Ro(ZJ(t),ZJ(e)):rt.False}s(vet,"FromRecord");function bet(t,e){let n=Pe.IsRegExp(t)?gu():t,r=Pe.IsRegExp(e)?gu():e;return Ro(n,r)}s(bet,"FromRegExp");function hye(t,e){return Pe.IsLiteral(t)&&Dc.IsString(t.const)||Pe.IsString(t)?rt.True:rt.False}s(hye,"FromStringRight");function Eet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsString(e)?rt.True:rt.False}s(Eet,"FromString");function Iet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsSymbol(e)?rt.True:rt.False}s(Iet,"FromSymbol");function Tet(t,e){return Pe.IsTemplateLiteral(t)?Ro(ZE(t),e):Pe.IsTemplateLiteral(e)?Ro(t,ZE(e)):N_("Invalid fallthrough for TemplateLiteral")}s(Tet,"FromTemplateLiteral");function wet(t,e){return Pe.IsArray(e)&&t.items!==void 0&&t.items.every(n=>Ro(n,e.items)===rt.True)}s(wet,"IsArrayOfTuple");function _et(t,e){return Pe.IsNever(t)?rt.True:Pe.IsUnknown(t)?rt.False:Pe.IsAny(t)?rt.Union:rt.False}s(_et,"FromTupleRight");function Ret(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)&&IL(e)||Pe.IsArray(e)&&wet(t,e)?rt.True:Pe.IsTuple(e)?Dc.IsUndefined(t.items)&&!Dc.IsUndefined(e.items)||!Dc.IsUndefined(t.items)&&Dc.IsUndefined(e.items)?rt.False:Dc.IsUndefined(t.items)&&!Dc.IsUndefined(e.items)||t.items.every((n,r)=>Ro(n,e.items[r])===rt.True)?rt.True:rt.False:rt.False}s(Ret,"FromTuple");function ket(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsUint8Array(e)?rt.True:rt.False}s(ket,"FromUint8Array");function Bet(t,e){return qa(e)?Wa(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsRecord(e)?wf(t,e):Pe.IsVoid(e)?Net(t,e):Pe.IsUndefined(e)?rt.True:rt.False}s(Bet,"FromUndefined");function tX(t,e){return e.anyOf.some(n=>Ro(t,n)===rt.True)?rt.True:rt.False}s(tX,"FromUnionRight");function Det(t,e){return t.anyOf.every(n=>Ro(n,e)===rt.True)?rt.True:rt.False}s(Det,"FromUnion");function gye(t,e){return rt.True}s(gye,"FromUnknownRight");function Pet(t,e){return Pe.IsNever(e)?fye(t,e):Pe.IsIntersect(e)?EL(t,e):Pe.IsUnion(e)?tX(t,e):Pe.IsAny(e)?eX(t,e):Pe.IsString(e)?hye(t,e):Pe.IsNumber(e)?pye(t,e):Pe.IsInteger(e)?dye(t,e):Pe.IsBoolean(e)?uye(t,e):Pe.IsArray(e)?KZe(t,e):Pe.IsTuple(e)?_et(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsUnknown(e)?rt.True:rt.False}s(Pet,"FromUnknown");function Net(t,e){return Pe.IsUndefined(t)||Pe.IsUndefined(t)?rt.True:rt.False}s(Net,"FromVoidRight");function Let(t,e){return Pe.IsIntersect(e)?EL(t,e):Pe.IsUnion(e)?tX(t,e):Pe.IsUnknown(e)?gye(t,e):Pe.IsAny(e)?eX(t,e):Pe.IsObject(e)?Lc(t,e):Pe.IsVoid(e)?rt.True:rt.False}s(Let,"FromVoid");function Ro(t,e){return Pe.IsTemplateLiteral(t)||Pe.IsTemplateLiteral(e)?Tet(t,e):Pe.IsRegExp(t)||Pe.IsRegExp(e)?bet(t,e):Pe.IsNot(t)||Pe.IsNot(e)?uet(t,e):Pe.IsAny(t)?YZe(t,e):Pe.IsArray(t)?JZe(t,e):Pe.IsBigInt(t)?ZZe(t,e):Pe.IsBoolean(t)?eet(t,e):Pe.IsAsyncIterator(t)?XZe(t,e):Pe.IsConstructor(t)?tet(t,e):Pe.IsDate(t)?net(t,e):Pe.IsFunction(t)?ret(t,e):Pe.IsInteger(t)?iet(t,e):Pe.IsIntersect(t)?oet(t,e):Pe.IsIterator(t)?set(t,e):Pe.IsLiteral(t)?aet(t,e):Pe.IsNever(t)?cet(t,e):Pe.IsNull(t)?det(t,e):Pe.IsNumber(t)?fet(t,e):Pe.IsObject(t)?Cet(t,e):Pe.IsRecord(t)?vet(t,e):Pe.IsString(t)?Eet(t,e):Pe.IsSymbol(t)?Iet(t,e):Pe.IsTuple(t)?Ret(t,e):Pe.IsPromise(t)?xet(t,e):Pe.IsUint8Array(t)?ket(t,e):Pe.IsUndefined(t)?Bet(t,e):Pe.IsUnion(t)?Det(t,e):Pe.IsUnknown(t)?Pet(t,e):Pe.IsVoid(t)?Let(t,e):N_(`Unknown left type operand '${t[Ze]}'`)}s(Ro,"Visit");function yx(t,e){return Ro(t,e)}s(yx,"ExtendsCheck");f();f();f();function Fet(t,e,n,r,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=L_(t[a],e,n,r,as(i));return o}s(Fet,"FromProperties");function Met(t,e,n,r,i){return Fet(t.properties,e,n,r,i)}s(Met,"FromMappedResult");function Aye(t,e,n,r,i){let o=Met(t,e,n,r,i);return $i(o)}s(Aye,"ExtendsFromMappedResult");function Qet(t,e,n,r){let i=yx(t,e);return i===rt.Union?oo([n,r]):i===rt.True?n:r}s(Qet,"ExtendsResolve");function L_(t,e,n,r,i){return cs(t)?Aye(t,e,n,r,i):e0(t)?nt(yye(t,e,n,r,i)):nt(Qet(t,e,n,r),i)}s(L_,"Extends");function Oet(t,e,n,r,i){return{[t]:L_(Pi(t),e,n,r,as(i))}}s(Oet,"FromPropertyKey");function Uet(t,e,n,r,i){return t.reduce((o,a)=>({...o,...Oet(a,e,n,r,i)}),{})}s(Uet,"FromPropertyKeys");function qet(t,e,n,r,i){return Uet(t.keys,e,n,r,i)}s(qet,"FromMappedKey");function yye(t,e,n,r,i){let o=qet(t,e,n,r,i);return $i(o)}s(yye,"ExtendsFromMappedKey");f();function Wet(t){return t.allOf.every(e=>m1(e))}s(Wet,"Intersect");function Get(t){return t.anyOf.some(e=>m1(e))}s(Get,"Union");function Het(t){return!m1(t.not)}s(Het,"Not");function m1(t){return t[Ze]==="Intersect"?Wet(t):t[Ze]==="Union"?Get(t):t[Ze]==="Not"?Het(t):t[Ze]==="Undefined"}s(m1,"ExtendsUndefinedCheck");f();function Cye(t,e){return F_(ZE(t),e)}s(Cye,"ExcludeFromTemplateLiteral");function jet(t,e){let n=t.filter(r=>yx(r,e)===rt.False);return n.length===1?n[0]:oo(n)}s(jet,"ExcludeRest");function F_(t,e,n={}){return t0(t)?nt(Cye(t,e),n):cs(t)?nt(xye(t,e),n):nt(Ui(t)?jet(t.anyOf,e):yx(t,e)!==rt.False?ri():t,n)}s(F_,"Exclude");function Vet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=F_(t[r],e);return n}s(Vet,"FromProperties");function $et(t,e){return Vet(t.properties,e)}s($et,"FromMappedResult");function xye(t,e){let n=$et(t,e);return $i(n)}s(xye,"ExcludeFromMappedResult");f();f();f();function vye(t,e){return M_(ZE(t),e)}s(vye,"ExtractFromTemplateLiteral");function zet(t,e){let n=t.filter(r=>yx(r,e)!==rt.False);return n.length===1?n[0]:oo(n)}s(zet,"ExtractRest");function M_(t,e,n){return t0(t)?nt(vye(t,e),n):cs(t)?nt(bye(t,e),n):nt(Ui(t)?zet(t.anyOf,e):yx(t,e)!==rt.False?t:ri(),n)}s(M_,"Extract");function Yet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=M_(t[r],e);return n}s(Yet,"FromProperties");function Ket(t,e){return Yet(t.properties,e)}s(Ket,"FromMappedResult");function bye(t,e){let n=Ket(t,e);return $i(n)}s(bye,"ExtractFromMappedResult");f();function Eye(t,e){return em(t)?nt(t.returns,e):ri(e)}s(Eye,"InstanceType");f();f();function TL(t){return nd(Pc(t))}s(TL,"ReadonlyOptional");f();function eI(t,e,n){return nt({[Ze]:"Record",type:"object",patternProperties:{[t]:e}},n)}s(eI,"RecordCreateFromPattern");function nX(t,e,n){let r={};for(let i of t)r[i]=e;return so(r,{...n,[xf]:"Record"})}s(nX,"RecordCreateFromKeys");function Jet(t,e,n){return dL(t)?nX(td(t),e,n):eI(t.pattern,e,n)}s(Jet,"FromTemplateLiteralKey");function Xet(t,e,n){return nX(td(oo(t)),e,n)}s(Xet,"FromUnionKey");function Zet(t,e,n){return nX([t.toString()],e,n)}s(Zet,"FromLiteralKey");function ett(t,e,n){return eI(t.source,e,n)}s(ett,"FromRegExpKey");function ttt(t,e,n){let r=xa(t.pattern)?Jh:t.pattern;return eI(r,e,n)}s(ttt,"FromStringKey");function ntt(t,e,n){return eI(Jh,e,n)}s(ntt,"FromAnyKey");function rtt(t,e,n){return eI(D1e,e,n)}s(rtt,"FromNeverKey");function itt(t,e,n){return so({true:e,false:e},n)}s(itt,"FromBooleanKey");function ott(t,e,n){return eI(Kh,e,n)}s(ott,"FromIntegerKey");function stt(t,e,n){return eI(Kh,e,n)}s(stt,"FromNumberKey");function wL(t,e,n={}){return Ui(t)?Xet(t.anyOf,e,n):t0(t)?Jet(t,e,n):Zd(t)?Zet(t.const,e,n):l1(t)?itt(t,e,n):nm(t)?ott(t,e,n):rm(t)?stt(t,e,n):LJ(t)?ett(t,e,n):c1(t)?ttt(t,e,n):PJ(t)?ntt(t,e,n):mx(t)?rtt(t,e,n):ri(n)}s(wL,"Record");function _L(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(_L,"RecordPattern");function Iye(t){let e=_L(t);return e===Jh?gu():e===Kh?vf():gu({pattern:e})}s(Iye,"RecordKey");function SL(t){return t.patternProperties[_L(t)]}s(SL,"RecordValue");function att(t,e){return e.parameters=mB(t,e.parameters),e.returns=sm(t,e.returns),e}s(att,"FromConstructor");function ltt(t,e){return e.parameters=mB(t,e.parameters),e.returns=sm(t,e.returns),e}s(ltt,"FromFunction");function ctt(t,e){return e.allOf=mB(t,e.allOf),e}s(ctt,"FromIntersect");function utt(t,e){return e.anyOf=mB(t,e.anyOf),e}s(utt,"FromUnion");function dtt(t,e){return xa(e.items)||(e.items=mB(t,e.items)),e}s(dtt,"FromTuple");function ftt(t,e){return e.items=sm(t,e.items),e}s(ftt,"FromArray");function ptt(t,e){return e.items=sm(t,e.items),e}s(ptt,"FromAsyncIterator");function mtt(t,e){return e.items=sm(t,e.items),e}s(mtt,"FromIterator");function htt(t,e){return e.item=sm(t,e.item),e}s(htt,"FromPromise");function gtt(t,e){let n=xtt(t,e.properties);return{...e,...so(n)}}s(gtt,"FromObject");function Att(t,e){let n=sm(t,Iye(e)),r=sm(t,SL(e)),i=wL(n,r);return{...e,...i}}s(Att,"FromRecord");function ytt(t,e){return e.index in t?t[e.index]:om()}s(ytt,"FromArgument");function Ctt(t,e){let n=v_(e),r=ed(e),i=sm(t,e);return n&&r?TL(i):n&&!r?nd(i):!n&&r?Pc(i):i}s(Ctt,"FromProperty");function xtt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:Ctt(t,e[r])}),{})}s(xtt,"FromProperties");function mB(t,e){return e.map(n=>sm(t,n))}s(mB,"FromTypes");function sm(t,e){return em(e)?att(t,e):tm(e)?ltt(t,e):Hs(e)?ctt(t,e):Ui(e)?utt(t,e):n0(e)?dtt(t,e):Xp(e)?ftt(t,e):$E(e)?ptt(t,e):YE(e)?mtt(t,e):KE(e)?htt(t,e):va(e)?gtt(t,e):JE(e)?Att(t,e):NJ(e)?ytt(t,e):e}s(sm,"FromType");function Tye(t,e){return sm(e,C_(t))}s(Tye,"Instantiate");f();function wye(t){return nt({[Ze]:"Integer",type:"integer"},t)}s(wye,"Integer");f();f();f();function vtt(t,e,n){return{[t]:am(Pi(t),e,as(n))}}s(vtt,"MappedIntrinsicPropertyKey");function btt(t,e,n){return t.reduce((i,o)=>({...i,...vtt(o,e,n)}),{})}s(btt,"MappedIntrinsicPropertyKeys");function Ett(t,e,n){return btt(t.keys,e,n)}s(Ett,"MappedIntrinsicProperties");function _ye(t,e,n){let r=Ett(t,e,n);return $i(r)}s(_ye,"IntrinsicFromMappedKey");function Itt(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),n].join("")}s(Itt,"ApplyUncapitalize");function Ttt(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),n].join("")}s(Ttt,"ApplyCapitalize");function wtt(t){return t.toUpperCase()}s(wtt,"ApplyUppercase");function _tt(t){return t.toLowerCase()}s(_tt,"ApplyLowercase");function Stt(t,e,n){let r=S_(t.pattern);if(!XE(r))return{...t,pattern:Sye(t.pattern,e)};let a=[...uB(r)].map(u=>Pi(u)),l=Rye(a,e),c=oo(l);return pL([c],n)}s(Stt,"FromTemplateLiteral");function Sye(t,e){return typeof t=="string"?e==="Uncapitalize"?Itt(t):e==="Capitalize"?Ttt(t):e==="Uppercase"?wtt(t):e==="Lowercase"?_tt(t):t:t.toString()}s(Sye,"FromLiteralValue");function Rye(t,e){return t.map(n=>am(n,e))}s(Rye,"FromRest");function am(t,e,n={}){return e0(t)?_ye(t,e,n):t0(t)?Stt(t,e,n):Ui(t)?oo(Rye(t.anyOf,e),n):Zd(t)?Pi(Sye(t.const,e),n):nt(t,n)}s(am,"Intrinsic");function kye(t,e={}){return am(t,"Capitalize",e)}s(kye,"Capitalize");f();function Bye(t,e={}){return am(t,"Lowercase",e)}s(Bye,"Lowercase");f();function Dye(t,e={}){return am(t,"Uncapitalize",e)}s(Dye,"Uncapitalize");f();function Pye(t,e={}){return am(t,"Uppercase",e)}s(Pye,"Uppercase");f();f();f();f();f();function Rtt(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=Cx(t[i],e,as(n));return r}s(Rtt,"FromProperties");function ktt(t,e,n){return Rtt(t.properties,e,n)}s(ktt,"FromMappedResult");function Nye(t,e,n){let r=ktt(t,e,n);return $i(r)}s(Nye,"OmitFromMappedResult");function Btt(t,e){return t.map(n=>rX(n,e))}s(Btt,"FromIntersect");function Dtt(t,e){return t.map(n=>rX(n,e))}s(Dtt,"FromUnion");function Ptt(t,e){let{[e]:n,...r}=t;return r}s(Ptt,"FromProperty");function Ntt(t,e){return e.reduce((n,r)=>Ptt(n,r),t)}s(Ntt,"FromProperties");function Ltt(t,e){let n=js(t,[ks,"$id","required","properties"]),r=Ntt(t.properties,e);return so(r,n)}s(Ltt,"FromObject");function Ftt(t){let e=t.reduce((n,r)=>lL(r)?[...n,Pi(r)]:n,[]);return oo(e)}s(Ftt,"UnionFromPropertyKeys");function rX(t,e){return Hs(t)?Nc(Btt(t.allOf,e)):Ui(t)?oo(Dtt(t.anyOf,e)):va(t)?Ltt(t,e):so({})}s(rX,"OmitResolve");function Cx(t,e,n){let r=Ca(e)?Ftt(e):e,i=Bs(e)?td(e):e,o=ta(t),a=ta(e);return cs(t)?Nye(t,i,n):e0(e)?Lye(t,e,n):o&&a?Ko("Omit",[t,r],n):!o&&a?Ko("Omit",[t,r],n):o&&!a?Ko("Omit",[t,r],n):nt({...rX(t,i),...n})}s(Cx,"Omit");function Mtt(t,e,n){return{[e]:Cx(t,[e],as(n))}}s(Mtt,"FromPropertyKey");function Qtt(t,e,n){return e.reduce((r,i)=>({...r,...Mtt(t,i,n)}),{})}s(Qtt,"FromPropertyKeys");function Ott(t,e,n){return Qtt(t,e.keys,n)}s(Ott,"FromMappedKey");function Lye(t,e,n){let r=Ott(t,e,n);return $i(r)}s(Lye,"OmitFromMappedKey");f();f();f();function Utt(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=xx(t[i],e,as(n));return r}s(Utt,"FromProperties");function qtt(t,e,n){return Utt(t.properties,e,n)}s(qtt,"FromMappedResult");function Fye(t,e,n){let r=qtt(t,e,n);return $i(r)}s(Fye,"PickFromMappedResult");function Wtt(t,e){return t.map(n=>iX(n,e))}s(Wtt,"FromIntersect");function Gtt(t,e){return t.map(n=>iX(n,e))}s(Gtt,"FromUnion");function Htt(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}s(Htt,"FromProperties");function jtt(t,e){let n=js(t,[ks,"$id","required","properties"]),r=Htt(t.properties,e);return so(r,n)}s(jtt,"FromObject");function Vtt(t){let e=t.reduce((n,r)=>lL(r)?[...n,Pi(r)]:n,[]);return oo(e)}s(Vtt,"UnionFromPropertyKeys");function iX(t,e){return Hs(t)?Nc(Wtt(t.allOf,e)):Ui(t)?oo(Gtt(t.anyOf,e)):va(t)?jtt(t,e):so({})}s(iX,"PickResolve");function xx(t,e,n){let r=Ca(e)?Vtt(e):e,i=Bs(e)?td(e):e,o=ta(t),a=ta(e);return cs(t)?Fye(t,i,n):e0(e)?Mye(t,e,n):o&&a?Ko("Pick",[t,r],n):!o&&a?Ko("Pick",[t,r],n):o&&!a?Ko("Pick",[t,r],n):nt({...iX(t,i),...n})}s(xx,"Pick");function $tt(t,e,n){return{[e]:xx(t,[e],as(n))}}s($tt,"FromPropertyKey");function ztt(t,e,n){return e.reduce((r,i)=>({...r,...$tt(t,i,n)}),{})}s(ztt,"FromPropertyKeys");function Ytt(t,e,n){return ztt(t,e.keys,n)}s(Ytt,"FromMappedKey");function Mye(t,e,n){let r=Ytt(t,e,n);return $i(r)}s(Mye,"PickFromMappedKey");f();f();function Ktt(t,e){return Ko("Partial",[Ko(t,e)])}s(Ktt,"FromComputed");function Jtt(t){return Ko("Partial",[If(t)])}s(Jtt,"FromRef");function Xtt(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=Pc(t[n]);return e}s(Xtt,"FromProperties");function Ztt(t){let e=js(t,[ks,"$id","required","properties"]),n=Xtt(t.properties);return so(n,e)}s(Ztt,"FromObject");function Qye(t){return t.map(e=>Oye(e))}s(Qye,"FromRest");function Oye(t){return Zp(t)?Ktt(t.target,t.parameters):ta(t)?Jtt(t.$ref):Hs(t)?Nc(Qye(t.allOf)):Ui(t)?oo(Qye(t.anyOf)):va(t)?Ztt(t):zE(t)||l1(t)||nm(t)||Zd(t)||rB(t)||rm(t)||c1(t)||iB(t)||u1(t)?t:so({})}s(Oye,"PartialResolve");function Q_(t,e){return cs(t)?Uye(t,e):nt({...Oye(t),...e})}s(Q_,"Partial");function ent(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Q_(t[r],as(e));return n}s(ent,"FromProperties");function tnt(t,e){return ent(t.properties,e)}s(tnt,"FromMappedResult");function Uye(t,e){let n=tnt(t,e);return $i(n)}s(Uye,"PartialFromMappedResult");f();f();function nnt(t,e){return Ko("Required",[Ko(t,e)])}s(nnt,"FromComputed");function rnt(t){return Ko("Required",[If(t)])}s(rnt,"FromRef");function int(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=js(t[n],[oc]);return e}s(int,"FromProperties");function ont(t){let e=js(t,[ks,"$id","required","properties"]),n=int(t.properties);return so(n,e)}s(ont,"FromObject");function qye(t){return t.map(e=>Wye(e))}s(qye,"FromRest");function Wye(t){return Zp(t)?nnt(t.target,t.parameters):ta(t)?rnt(t.$ref):Hs(t)?Nc(qye(t.allOf)):Ui(t)?oo(qye(t.anyOf)):va(t)?ont(t):zE(t)||l1(t)||nm(t)||Zd(t)||rB(t)||rm(t)||c1(t)||iB(t)||u1(t)?t:so({})}s(Wye,"RequiredResolve");function O_(t,e){return cs(t)?Gye(t,e):nt({...Wye(t),...e})}s(O_,"Required");function snt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=O_(t[r],e);return n}s(snt,"FromProperties");function ant(t,e){return snt(t.properties,e)}s(ant,"FromMappedResult");function Gye(t,e){let n=ant(t,e);return $i(n)}s(Gye,"RequiredFromMappedResult");function lnt(t,e){return e.map(n=>ta(n)?oX(t,n.$ref):r0(t,n))}s(lnt,"DereferenceParameters");function oX(t,e){return e in t?ta(t[e])?oX(t,t[e].$ref):r0(t,t[e]):ri()}s(oX,"Dereference");function cnt(t){return D_(t[0])}s(cnt,"FromAwaited");function unt(t){return Ax(t[0],t[1])}s(unt,"FromIndex");function dnt(t){return P_(t[0])}s(dnt,"FromKeyOf");function fnt(t){return Q_(t[0])}s(fnt,"FromPartial");function pnt(t){return Cx(t[0],t[1])}s(pnt,"FromOmit");function mnt(t){return xx(t[0],t[1])}s(mnt,"FromPick");function hnt(t){return O_(t[0])}s(hnt,"FromRequired");function gnt(t,e,n){let r=lnt(t,n);return e==="Awaited"?cnt(r):e==="Index"?unt(r):e==="KeyOf"?dnt(r):e==="Partial"?fnt(r):e==="Omit"?pnt(r):e==="Pick"?mnt(r):e==="Required"?hnt(r):ri()}s(gnt,"FromComputed");function Ant(t,e){return I_(r0(t,e))}s(Ant,"FromArray");function ynt(t,e){return T_(r0(t,e))}s(ynt,"FromAsyncIterator");function Cnt(t,e,n){return w_(hB(t,e),r0(t,n))}s(Cnt,"FromConstructor");function xnt(t,e,n){return Xh(hB(t,e),r0(t,n))}s(xnt,"FromFunction");function vnt(t,e){return Nc(hB(t,e))}s(vnt,"FromIntersect");function bnt(t,e){return B_(r0(t,e))}s(bnt,"FromIterator");function Ent(t,e){return so(globalThis.Object.keys(e).reduce((n,r)=>({...n,[r]:r0(t,e[r])}),{}))}s(Ent,"FromObject");function Int(t,e){let[n,r]=[r0(t,SL(e)),_L(e)],i=C_(e);return i.patternProperties[r]=n,i}s(Int,"FromRecord");function Tnt(t,e){return ta(e)?{...oX(t,e.$ref),[ks]:e[ks]}:e}s(Tnt,"FromTransform");function wnt(t,e){return bf(hB(t,e))}s(wnt,"FromTuple");function _nt(t,e){return oo(hB(t,e))}s(_nt,"FromUnion");function hB(t,e){return e.map(n=>r0(t,n))}s(hB,"FromTypes");function r0(t,e){return ed(e)?nt(r0(t,js(e,[oc])),e):v_(e)?nt(r0(t,js(e,[Jp])),e):io(e)?nt(Tnt(t,e),e):Xp(e)?nt(Ant(t,e.items),e):$E(e)?nt(ynt(t,e.items),e):Zp(e)?nt(gnt(t,e.target,e.parameters)):em(e)?nt(Cnt(t,e.parameters,e.returns),e):tm(e)?nt(xnt(t,e.parameters,e.returns),e):Hs(e)?nt(vnt(t,e.allOf),e):YE(e)?nt(bnt(t,e.items),e):va(e)?nt(Ent(t,e.properties),e):JE(e)?nt(Int(t,e)):n0(e)?nt(wnt(t,e.items||[]),e):Ui(e)?nt(_nt(t,e.anyOf),e):e}s(r0,"FromType");function Snt(t,e){return e in t?r0(t,t[e]):ri()}s(Snt,"ComputeType");function Hye(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,n)=>({...e,[n]:Snt(t,n)}),{})}s(Hye,"ComputeModuleProperties");var sX=class{static{s(this,"TModule")}constructor(e){let n=Hye(e),r=this.WithIdentifiers(n);this.$defs=r}Import(e,n){let r={...this.$defs,[e]:nt(this.$defs[e],n)};return nt({[Ze]:"Import",$defs:r,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:{...e[r],$id:r}}),{})}};function jye(t){return new sX(t)}s(jye,"Module");f();function Vye(t,e){return nt({[Ze]:"Not",not:t},e)}s(Vye,"Not");f();function $ye(t,e){return tm(t)?bf(t.parameters,e):ri()}s($ye,"Parameters");f();var Rnt=0;function zye(t,e={}){xa(e.$id)&&(e.$id=`T${Rnt++}`);let n=C_(t({[Ze]:"This",$ref:`${e.$id}`}));return n.$id=e.$id,nt({[xf]:"Recursive",...n},e)}s(zye,"Recursive");f();function Yye(t,e){let n=Uo(t)?new globalThis.RegExp(t):t;return nt({[Ze]:"RegExp",type:"RegExp",source:n.source,flags:n.flags},e)}s(Yye,"RegExp");f();function knt(t){return Hs(t)?t.allOf:Ui(t)?t.anyOf:n0(t)?t.items??[]:[]}s(knt,"RestResolve");function Kye(t){return knt(t)}s(Kye,"Rest");f();function Jye(t,e){return tm(t)?nt(t.returns,e):ri(e)}s(Jye,"ReturnType");f();var aX=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new lX(this.schema,e)}},lX=class{static{s(this,"TransformEncodeBuilder")}constructor(e,n){this.schema=e,this.decode=n}EncodeTransform(e,n){let o={Encode:s(a=>n[ks].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(n[ks].Decode(a)),"Decode")};return{...n,[ks]:o}}EncodeSchema(e,n){let r={Decode:this.decode,Encode:e};return{...n,[ks]:r}}Encode(e){return io(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function Xye(t){return new aX(t)}s(Xye,"Transform");f();function Zye(t={}){return nt({[Ze]:t[Ze]??"Unsafe"},t)}s(Zye,"Unsafe");f();function eCe(t){return nt({[Ze]:"Void",type:"void"},t)}s(eCe,"Void");f();var cX={};t1(cX,{Any:()=>gx,Argument:()=>M1e,Array:()=>I_,AsyncIterator:()=>T_,Awaited:()=>D_,BigInt:()=>k_,Boolean:()=>fL,Capitalize:()=>kye,Composite:()=>nye,Const:()=>rye,Constructor:()=>w_,ConstructorParameters:()=>iye,Date:()=>AL,Enum:()=>oye,Exclude:()=>F_,Extends:()=>L_,Extract:()=>M_,Function:()=>Xh,Index:()=>Ax,InstanceType:()=>Eye,Instantiate:()=>Tye,Integer:()=>wye,Intersect:()=>Nc,Iterator:()=>B_,KeyOf:()=>P_,Literal:()=>Pi,Lowercase:()=>Bye,Mapped:()=>K1e,Module:()=>jye,Never:()=>ri,Not:()=>Vye,Null:()=>yL,Number:()=>vf,Object:()=>so,Omit:()=>Cx,Optional:()=>Pc,Parameters:()=>$ye,Partial:()=>Q_,Pick:()=>xx,Promise:()=>hL,Readonly:()=>nd,ReadonlyOptional:()=>TL,Record:()=>wL,Recursive:()=>zye,Ref:()=>If,RegExp:()=>Yye,Required:()=>O_,Rest:()=>Kye,ReturnType:()=>Jye,String:()=>gu,Symbol:()=>CL,TemplateLiteral:()=>pL,Transform:()=>Xye,Tuple:()=>bf,Uint8Array:()=>vL,Uncapitalize:()=>Dye,Undefined:()=>xL,Union:()=>oo,Unknown:()=>om,Unsafe:()=>Zye,Uppercase:()=>Pye,Void:()=>eCe});f();var I=cX;f();f();function Bnt(t){switch(t.errorType){case Je.ArrayContains:return"Expected array to contain at least one matching value";case Je.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Je.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Je.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Je.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Je.ArrayUniqueItems:return"Expected array elements to be unique";case Je.Array:return"Expected array";case Je.AsyncIterator:return"Expected AsyncIterator";case Je.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Je.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Je.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Je.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Je.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Je.BigInt:return"Expected bigint";case Je.Boolean:return"Expected boolean";case Je.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Je.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Je.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Je.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Je.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Je.Date:return"Expected Date";case Je.Function:return"Expected function";case Je.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Je.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Je.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Je.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Je.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Je.Integer:return"Expected integer";case Je.IntersectUnevaluatedProperties:return"Unexpected property";case Je.Intersect:return"Expected all values to match";case Je.Iterator:return"Expected Iterator";case Je.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Je.Never:return"Never";case Je.Not:return"Value should not match";case Je.Null:return"Expected null";case Je.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Je.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Je.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Je.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Je.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Je.Number:return"Expected number";case Je.Object:return"Expected object";case Je.ObjectAdditionalProperties:return"Unexpected property";case Je.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Je.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Je.ObjectRequiredProperty:return"Expected required property";case Je.Promise:return"Expected Promise";case Je.RegExp:return"Expected string to match regular expression";case Je.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Je.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Je.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Je.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Je.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Je.String:return"Expected string";case Je.Symbol:return"Expected symbol";case Je.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Je.Tuple:return"Expected tuple";case Je.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Je.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Je.Uint8Array:return"Expected Uint8Array";case Je.Undefined:return"Expected undefined";case Je.Union:return"Expected union value";case Je.Void:return"Expected void";case Je.Kind:return`Expected kind '${t.schema[Ze]}'`;default:return"Unknown error type"}}s(Bnt,"DefaultErrorFunction");var Dnt=Bnt;function tCe(){return Dnt}s(tCe,"GetErrorFunction");f();var uX=class extends Ar{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function Pnt(t,e){let n=e.find(r=>r.$id===t.$ref);if(n===void 0)throw new uX(t);return zi(n,e)}s(Pnt,"Resolve");function Tl(t,e){return!Oi(t.$id)||e.some(n=>n.$id===t.$id)||e.push(t),e}s(Tl,"Pushref");function zi(t,e){return t[Ze]==="This"||t[Ze]==="Ref"?Pnt(t,e):t}s(zi,"Deref");f();var dX=class extends Ar{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},i0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(i0||(i0={}));var U_=BigInt("14695981039346656037"),[Nnt,Lnt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Fnt=Array.from({length:256}).map((t,e)=>BigInt(e)),nCe=new Float64Array(1),rCe=new DataView(nCe.buffer),iCe=new Uint8Array(nCe.buffer);function*Mnt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let n=0;n<e;n++)yield t>>8*(e-1-n)&255}s(Mnt,"NumberToBytes");function Qnt(t){Fc(i0.Array);for(let e of t)q_(e)}s(Qnt,"ArrayType");function Ont(t){Fc(i0.Boolean),Fc(t?1:0)}s(Ont,"BooleanType");function Unt(t){Fc(i0.BigInt),rCe.setBigInt64(0,t);for(let e of iCe)Fc(e)}s(Unt,"BigIntType");function qnt(t){Fc(i0.Date),q_(t.getTime())}s(qnt,"DateType");function Wnt(t){Fc(i0.Null)}s(Wnt,"NullType");function Gnt(t){Fc(i0.Number),rCe.setFloat64(0,t);for(let e of iCe)Fc(e)}s(Gnt,"NumberType");function Hnt(t){Fc(i0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())q_(e),q_(t[e])}s(Hnt,"ObjectType");function jnt(t){Fc(i0.String);for(let e=0;e<t.length;e++)for(let n of Mnt(t.charCodeAt(e)))Fc(n)}s(jnt,"StringType");function Vnt(t){Fc(i0.Symbol),q_(t.description)}s(Vnt,"SymbolType");function $nt(t){Fc(i0.Uint8Array);for(let e=0;e<t.length;e++)Fc(t[e])}s($nt,"Uint8ArrayType");function znt(t){return Fc(i0.Undefined)}s(znt,"UndefinedType");function q_(t){if(gr(t))return Qnt(t);if(Yh(t))return Ont(t);if(ic(t))return Unt(t);if(mu(t))return qnt(t);if(s1(t))return Wnt(t);if(qn(t))return Gnt(t);if(ui(t))return Hnt(t);if(Oi(t))return jnt(t);if(a1(t))return Vnt(t);if(x_(t))return $nt(t);if(ls(t))return znt(t);throw new dX(t)}s(q_,"Visit");function Fc(t){U_=U_^Fnt[t],U_=U_*Nnt%Lnt}s(Fc,"FNV1A64");function vx(t){return U_=BigInt("14695981039346656037"),q_(t),U_}s(vx,"Hash");f();var fX=class extends Ar{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function Ynt(t){return t[Ze]==="Any"||t[Ze]==="Unknown"}s(Ynt,"IsAnyOrUnknown");function Ei(t){return t!==void 0}s(Ei,"IsDefined");function Knt(t,e,n){return!0}s(Knt,"FromAny");function Jnt(t,e,n){return!0}s(Jnt,"FromArgument");function Xnt(t,e,n){if(!gr(n)||Ei(t.minItems)&&!(n.length>=t.minItems)||Ei(t.maxItems)&&!(n.length<=t.maxItems)||!n.every(o=>wl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of n){let l=vx(a);if(o.has(l))return!1;o.add(l)}return!0}())return!1;if(!(Ei(t.contains)||qn(t.minContains)||qn(t.maxContains)))return!0;let r=Ei(t.contains)?t.contains:ri(),i=n.reduce((o,a)=>wl(r,e,a)?o+1:o,0);return!(i===0||qn(t.minContains)&&i<t.minContains||qn(t.maxContains)&&i>t.maxContains)}s(Xnt,"FromArray");function Znt(t,e,n){return iL(n)}s(Znt,"FromAsyncIterator");function ert(t,e,n){return!(!ic(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==BigInt(0))}s(ert,"FromBigInt");function trt(t,e,n){return Yh(n)}s(trt,"FromBoolean");function nrt(t,e,n){return wl(t.returns,e,n.prototype)}s(nrt,"FromConstructor");function rrt(t,e,n){return!(!mu(n)||Ei(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)||Ei(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)||Ei(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)||Ei(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)||Ei(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0)}s(rrt,"FromDate");function irt(t,e,n){return px(n)}s(irt,"FromFunction");function ort(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return wl(i,[...e,...r],n)}s(ort,"FromImport");function srt(t,e,n){return!(!aL(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(srt,"FromInteger");function art(t,e,n){let r=t.allOf.every(i=>wl(i,e,n));if(t.unevaluatedProperties===!1){let i=new RegExp(p1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a));return r&&o}else if(Bs(t.unevaluatedProperties)){let i=new RegExp(p1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a)||wl(t.unevaluatedProperties,e,n[a]));return r&&o}else return r}s(art,"FromIntersect");function lrt(t,e,n){return oL(n)}s(lrt,"FromIterator");function crt(t,e,n){return n===t.const}s(crt,"FromLiteral");function urt(t,e,n){return!1}s(urt,"FromNever");function drt(t,e,n){return!wl(t.not,e,n)}s(drt,"FromNot");function frt(t,e,n){return s1(n)}s(frt,"FromNull");function prt(t,e,n){return!(!Yo.IsNumberLike(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(prt,"FromNumber");function mrt(t,e,n){if(!Yo.IsObjectLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let r=Object.getOwnPropertyNames(t.properties);for(let i of r){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!wl(o,e,n[i])||(m1(o)||Ynt(o))&&!(i in n))return!1}else if(Yo.IsExactOptionalProperty(n,i)&&!wl(o,e,n[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(n);return t.required&&t.required.length===r.length&&i.length===r.length?!0:i.every(o=>r.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(n).every(o=>r.includes(o)||wl(t.additionalProperties,e,n[o])):!0}s(mrt,"FromObject");function hrt(t,e,n){return sL(n)}s(hrt,"FromPromise");function grt(t,e,n){if(!Yo.IsRecordLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let[r,i]=Object.entries(t.patternProperties)[0],o=new RegExp(r),a=Object.entries(n).every(([u,d])=>o.test(u)?wl(i,e,d):!0),l=typeof t.additionalProperties=="object"?Object.entries(n).every(([u,d])=>o.test(u)?!0:wl(t.additionalProperties,e,d)):!0,c=t.additionalProperties===!1?Object.getOwnPropertyNames(n).every(u=>o.test(u)):!0;return a&&l&&c}s(grt,"FromRecord");function Art(t,e,n){return wl(zi(t,e),e,n)}s(Art,"FromRef");function yrt(t,e,n){let r=new RegExp(t.source,t.flags);return Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)?!1:r.test(n)}s(yrt,"FromRegExp");function Crt(t,e,n){return!Oi(n)||Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)||Ei(t.pattern)&&!new RegExp(t.pattern).test(n)?!1:Ei(t.format)?im.Has(t.format)?im.Get(t.format)(n):!1:!0}s(Crt,"FromString");function xrt(t,e,n){return a1(n)}s(xrt,"FromSymbol");function vrt(t,e,n){return Oi(n)&&new RegExp(t.pattern).test(n)}s(vrt,"FromTemplateLiteral");function brt(t,e,n){return wl(zi(t,e),e,n)}s(brt,"FromThis");function Ert(t,e,n){if(!gr(n)||t.items===void 0&&n.length!==0||n.length!==t.maxItems)return!1;if(!t.items)return!0;for(let r=0;r<t.items.length;r++)if(!wl(t.items[r],e,n[r]))return!1;return!0}s(Ert,"FromTuple");function Irt(t,e,n){return ls(n)}s(Irt,"FromUndefined");function Trt(t,e,n){return t.anyOf.some(r=>wl(r,e,n))}s(Trt,"FromUnion");function wrt(t,e,n){return!(!x_(n)||Ei(t.maxByteLength)&&!(n.length<=t.maxByteLength)||Ei(t.minByteLength)&&!(n.length>=t.minByteLength))}s(wrt,"FromUint8Array");function _rt(t,e,n){return!0}s(_rt,"FromUnknown");function Srt(t,e,n){return Yo.IsVoidLike(n)}s(Srt,"FromVoid");function Rrt(t,e,n){return hu.Has(t[Ze])?hu.Get(t[Ze])(t,n):!1}s(Rrt,"FromKind");function wl(t,e,n){let r=Ei(t.$id)?Tl(t,e):e,i=t;switch(i[Ze]){case"Any":return Knt(i,r,n);case"Argument":return Jnt(i,r,n);case"Array":return Xnt(i,r,n);case"AsyncIterator":return Znt(i,r,n);case"BigInt":return ert(i,r,n);case"Boolean":return trt(i,r,n);case"Constructor":return nrt(i,r,n);case"Date":return rrt(i,r,n);case"Function":return irt(i,r,n);case"Import":return ort(i,r,n);case"Integer":return srt(i,r,n);case"Intersect":return art(i,r,n);case"Iterator":return lrt(i,r,n);case"Literal":return crt(i,r,n);case"Never":return urt(i,r,n);case"Not":return drt(i,r,n);case"Null":return frt(i,r,n);case"Number":return prt(i,r,n);case"Object":return mrt(i,r,n);case"Promise":return hrt(i,r,n);case"Record":return grt(i,r,n);case"Ref":return Art(i,r,n);case"RegExp":return yrt(i,r,n);case"String":return Crt(i,r,n);case"Symbol":return xrt(i,r,n);case"TemplateLiteral":return vrt(i,r,n);case"This":return brt(i,r,n);case"Tuple":return Ert(i,r,n);case"Undefined":return Irt(i,r,n);case"Union":return Trt(i,r,n);case"Uint8Array":return wrt(i,r,n);case"Unknown":return _rt(i,r,n);case"Void":return Srt(i,r,n);default:if(!hu.Has(i[Ze]))throw new fX(i);return Rrt(i,r,n)}}s(wl,"Visit");function pi(...t){return t.length===3?wl(t[0],t[1],t[2]):wl(t[0],[],t[1])}s(pi,"Check");var Je;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Je||(Je={}));var pX=class extends Ar{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function h1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(h1,"EscapeKey");function Ii(t){return t!==void 0}s(Ii,"IsDefined");var bx=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function en(t,e,n,r,i=[]){return{type:t,schema:e,path:n,value:r,message:tCe()({errorType:t,path:n,schema:e,value:r,errors:i}),errors:i}}s(en,"Create");function*krt(t,e,n,r){}s(krt,"FromAny");function*Brt(t,e,n,r){}s(Brt,"FromArgument");function*Drt(t,e,n,r){if(!gr(r))return yield en(Je.Array,t,n,r);Ii(t.minItems)&&!(r.length>=t.minItems)&&(yield en(Je.ArrayMinItems,t,n,r)),Ii(t.maxItems)&&!(r.length<=t.maxItems)&&(yield en(Je.ArrayMaxItems,t,n,r));for(let a=0;a<r.length;a++)yield*_l(t.items,e,`${n}/${a}`,r[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let l of r){let c=vx(l);if(a.has(c))return!1;a.add(c)}return!0}()&&(yield en(Je.ArrayUniqueItems,t,n,r)),!(Ii(t.contains)||Ii(t.minContains)||Ii(t.maxContains)))return;let i=Ii(t.contains)?t.contains:ri(),o=r.reduce((a,l,c)=>_l(i,e,`${n}${c}`,l).next().done===!0?a+1:a,0);o===0&&(yield en(Je.ArrayContains,t,n,r)),qn(t.minContains)&&o<t.minContains&&(yield en(Je.ArrayMinContains,t,n,r)),qn(t.maxContains)&&o>t.maxContains&&(yield en(Je.ArrayMaxContains,t,n,r))}s(Drt,"FromArray");function*Prt(t,e,n,r){iL(r)||(yield en(Je.AsyncIterator,t,n,r))}s(Prt,"FromAsyncIterator");function*Nrt(t,e,n,r){if(!ic(r))return yield en(Je.BigInt,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Je.BigIntExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Je.BigIntExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Je.BigIntMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Je.BigIntMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==BigInt(0)&&(yield en(Je.BigIntMultipleOf,t,n,r))}s(Nrt,"FromBigInt");function*Lrt(t,e,n,r){Yh(r)||(yield en(Je.Boolean,t,n,r))}s(Lrt,"FromBoolean");function*Frt(t,e,n,r){yield*_l(t.returns,e,n,r.prototype)}s(Frt,"FromConstructor");function*Mrt(t,e,n,r){if(!mu(r))return yield en(Je.Date,t,n,r);Ii(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)&&(yield en(Je.DateExclusiveMaximumTimestamp,t,n,r)),Ii(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)&&(yield en(Je.DateExclusiveMinimumTimestamp,t,n,r)),Ii(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)&&(yield en(Je.DateMaximumTimestamp,t,n,r)),Ii(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)&&(yield en(Je.DateMinimumTimestamp,t,n,r)),Ii(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0&&(yield en(Je.DateMultipleOfTimestamp,t,n,r))}s(Mrt,"FromDate");function*Qrt(t,e,n,r){px(r)||(yield en(Je.Function,t,n,r))}s(Qrt,"FromFunction");function*Ort(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*_l(o,[...e,...i],n,r)}s(Ort,"FromImport");function*Urt(t,e,n,r){if(!aL(r))return yield en(Je.Integer,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Je.IntegerExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Je.IntegerExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Je.IntegerMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Je.IntegerMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Je.IntegerMultipleOf,t,n,r))}s(Urt,"FromInteger");function*qrt(t,e,n,r){let i=!1;for(let o of t.allOf)for(let a of _l(o,e,n,r))i=!0,yield a;if(i)return yield en(Je.Intersect,t,n,r);if(t.unevaluatedProperties===!1){let o=new RegExp(p1(t));for(let a of Object.getOwnPropertyNames(r))o.test(a)||(yield en(Je.IntersectUnevaluatedProperties,t,`${n}/${a}`,r))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(p1(t));for(let a of Object.getOwnPropertyNames(r))if(!o.test(a)){let l=_l(t.unevaluatedProperties,e,`${n}/${a}`,r[a]).next();l.done||(yield l.value)}}}s(qrt,"FromIntersect");function*Wrt(t,e,n,r){oL(r)||(yield en(Je.Iterator,t,n,r))}s(Wrt,"FromIterator");function*Grt(t,e,n,r){r!==t.const&&(yield en(Je.Literal,t,n,r))}s(Grt,"FromLiteral");function*Hrt(t,e,n,r){yield en(Je.Never,t,n,r)}s(Hrt,"FromNever");function*jrt(t,e,n,r){_l(t.not,e,n,r).next().done===!0&&(yield en(Je.Not,t,n,r))}s(jrt,"FromNot");function*Vrt(t,e,n,r){s1(r)||(yield en(Je.Null,t,n,r))}s(Vrt,"FromNull");function*$rt(t,e,n,r){if(!Yo.IsNumberLike(r))return yield en(Je.Number,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Je.NumberExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Je.NumberExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Je.NumberMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Je.NumberMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Je.NumberMultipleOf,t,n,r))}s($rt,"FromNumber");function*zrt(t,e,n,r){if(!Yo.IsObjectLike(r))return yield en(Je.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Je.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Je.ObjectMaxProperties,t,n,r));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(r);for(let l of i)a.includes(l)||(yield en(Je.ObjectRequiredProperty,t.properties[l],`${n}/${h1(l)}`,void 0));if(t.additionalProperties===!1)for(let l of a)o.includes(l)||(yield en(Je.ObjectAdditionalProperties,t,`${n}/${h1(l)}`,r[l]));if(typeof t.additionalProperties=="object")for(let l of a)o.includes(l)||(yield*_l(t.additionalProperties,e,`${n}/${h1(l)}`,r[l]));for(let l of o){let c=t.properties[l];t.required&&t.required.includes(l)?(yield*_l(c,e,`${n}/${h1(l)}`,r[l]),m1(t)&&!(l in r)&&(yield en(Je.ObjectRequiredProperty,c,`${n}/${h1(l)}`,void 0))):Yo.IsExactOptionalProperty(r,l)&&(yield*_l(c,e,`${n}/${h1(l)}`,r[l]))}}s(zrt,"FromObject");function*Yrt(t,e,n,r){sL(r)||(yield en(Je.Promise,t,n,r))}s(Yrt,"FromPromise");function*Krt(t,e,n,r){if(!Yo.IsRecordLike(r))return yield en(Je.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Je.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Je.ObjectMaxProperties,t,n,r));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[l,c]of Object.entries(r))a.test(l)&&(yield*_l(o,e,`${n}/${h1(l)}`,c));if(typeof t.additionalProperties=="object")for(let[l,c]of Object.entries(r))a.test(l)||(yield*_l(t.additionalProperties,e,`${n}/${h1(l)}`,c));if(t.additionalProperties===!1){for(let[l,c]of Object.entries(r))if(!a.test(l))return yield en(Je.ObjectAdditionalProperties,t,`${n}/${h1(l)}`,c)}}s(Krt,"FromRecord");function*Jrt(t,e,n,r){yield*_l(zi(t,e),e,n,r)}s(Jrt,"FromRef");function*Xrt(t,e,n,r){if(!Oi(r))return yield en(Je.String,t,n,r);if(Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Je.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Je.StringMaxLength,t,n,r)),!new RegExp(t.source,t.flags).test(r))return yield en(Je.RegExp,t,n,r)}s(Xrt,"FromRegExp");function*Zrt(t,e,n,r){if(!Oi(r))return yield en(Je.String,t,n,r);Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Je.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Je.StringMaxLength,t,n,r)),Oi(t.pattern)&&(new RegExp(t.pattern).test(r)||(yield en(Je.StringPattern,t,n,r))),Oi(t.format)&&(im.Has(t.format)?im.Get(t.format)(r)||(yield en(Je.StringFormat,t,n,r)):yield en(Je.StringFormatUnknown,t,n,r))}s(Zrt,"FromString");function*eit(t,e,n,r){a1(r)||(yield en(Je.Symbol,t,n,r))}s(eit,"FromSymbol");function*tit(t,e,n,r){if(!Oi(r))return yield en(Je.String,t,n,r);new RegExp(t.pattern).test(r)||(yield en(Je.StringPattern,t,n,r))}s(tit,"FromTemplateLiteral");function*nit(t,e,n,r){yield*_l(zi(t,e),e,n,r)}s(nit,"FromThis");function*rit(t,e,n,r){if(!gr(r))return yield en(Je.Tuple,t,n,r);if(t.items===void 0&&r.length!==0)return yield en(Je.TupleLength,t,n,r);if(r.length!==t.maxItems)return yield en(Je.TupleLength,t,n,r);if(t.items)for(let i=0;i<t.items.length;i++)yield*_l(t.items[i],e,`${n}/${i}`,r[i])}s(rit,"FromTuple");function*iit(t,e,n,r){ls(r)||(yield en(Je.Undefined,t,n,r))}s(iit,"FromUndefined");function*oit(t,e,n,r){if(pi(t,e,r))return;let i=t.anyOf.map(o=>new bx(_l(o,e,n,r)));yield en(Je.Union,t,n,r,i)}s(oit,"FromUnion");function*sit(t,e,n,r){if(!x_(r))return yield en(Je.Uint8Array,t,n,r);Ii(t.maxByteLength)&&!(r.length<=t.maxByteLength)&&(yield en(Je.Uint8ArrayMaxByteLength,t,n,r)),Ii(t.minByteLength)&&!(r.length>=t.minByteLength)&&(yield en(Je.Uint8ArrayMinByteLength,t,n,r))}s(sit,"FromUint8Array");function*ait(t,e,n,r){}s(ait,"FromUnknown");function*lit(t,e,n,r){Yo.IsVoidLike(r)||(yield en(Je.Void,t,n,r))}s(lit,"FromVoid");function*cit(t,e,n,r){hu.Get(t[Ze])(t,r)||(yield en(Je.Kind,t,n,r))}s(cit,"FromKind");function*_l(t,e,n,r){let i=Ii(t.$id)?[...e,t]:e,o=t;switch(o[Ze]){case"Any":return yield*krt(o,i,n,r);case"Argument":return yield*Brt(o,i,n,r);case"Array":return yield*Drt(o,i,n,r);case"AsyncIterator":return yield*Prt(o,i,n,r);case"BigInt":return yield*Nrt(o,i,n,r);case"Boolean":return yield*Lrt(o,i,n,r);case"Constructor":return yield*Frt(o,i,n,r);case"Date":return yield*Mrt(o,i,n,r);case"Function":return yield*Qrt(o,i,n,r);case"Import":return yield*Ort(o,i,n,r);case"Integer":return yield*Urt(o,i,n,r);case"Intersect":return yield*qrt(o,i,n,r);case"Iterator":return yield*Wrt(o,i,n,r);case"Literal":return yield*Grt(o,i,n,r);case"Never":return yield*Hrt(o,i,n,r);case"Not":return yield*jrt(o,i,n,r);case"Null":return yield*Vrt(o,i,n,r);case"Number":return yield*$rt(o,i,n,r);case"Object":return yield*zrt(o,i,n,r);case"Promise":return yield*Yrt(o,i,n,r);case"Record":return yield*Krt(o,i,n,r);case"Ref":return yield*Jrt(o,i,n,r);case"RegExp":return yield*Xrt(o,i,n,r);case"String":return yield*Zrt(o,i,n,r);case"Symbol":return yield*eit(o,i,n,r);case"TemplateLiteral":return yield*tit(o,i,n,r);case"This":return yield*nit(o,i,n,r);case"Tuple":return yield*rit(o,i,n,r);case"Undefined":return yield*iit(o,i,n,r);case"Union":return yield*oit(o,i,n,r);case"Uint8Array":return yield*sit(o,i,n,r);case"Unknown":return yield*ait(o,i,n,r);case"Void":return yield*lit(o,i,n,r);default:if(!hu.Has(o[Ze]))throw new pX(t);return yield*cit(o,i,n,r)}}s(_l,"Visit");function eg(...t){let e=t.length===3?_l(t[0],t[1],"",t[2]):_l(t[0],[],"",t[1]);return new bx(e)}s(eg,"Errors");f();f();var W_=class extends Ar{static{s(this,"TransformDecodeCheckError")}constructor(e,n,r){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},mX=class extends Ar{static{s(this,"TransformDecodeError")}constructor(e,n,r,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=n,this.value=r,this.error=i}};function Ds(t,e,n){try{return io(t)?t[ks].Decode(n):n}catch(r){throw new mX(t,e,n,r)}}s(Ds,"Default");function uit(t,e,n,r){return gr(r)?Ds(t,n,r.map((i,o)=>lm(t.items,e,`${n}/${o}`,i))):Ds(t,n,r)}s(uit,"FromArray");function dit(t,e,n,r){if(!ui(r)||Xd(r))return Ds(t,n,r);let i=gL(t),o=i.map(d=>d[0]),a={...r};for(let[d,p]of i)d in a&&(a[d]=lm(p,e,`${n}/${d}`,a[d]));if(!io(t.unevaluatedProperties))return Ds(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.unevaluatedProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=Ds(c,`${n}/${d}`,u[d]));return Ds(t,n,u)}s(dit,"FromIntersect");function fit(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=lm(o,[...e,...i],n,r);return Ds(t,n,a)}s(fit,"FromImport");function pit(t,e,n,r){return Ds(t,n,lm(t.not,e,n,r))}s(pit,"FromNot");function mit(t,e,n,r){if(!ui(r))return Ds(t,n,r);let i=rd(t),o={...r};for(let u of i)hr(o,u)&&(ls(o[u])&&(!u1(t.properties[u])||Yo.IsExactOptionalProperty(o,u))||(o[u]=lm(t.properties[u],e,`${n}/${u}`,o[u])));if(!Bs(t.additionalProperties))return Ds(t,n,o);let a=Object.getOwnPropertyNames(o),l=t.additionalProperties,c={...o};for(let u of a)i.includes(u)||(c[u]=Ds(l,`${n}/${u}`,c[u]));return Ds(t,n,c)}s(mit,"FromObject");function hit(t,e,n,r){if(!ui(r))return Ds(t,n,r);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...r};for(let d of Object.getOwnPropertyNames(r))o.test(d)&&(a[d]=lm(t.patternProperties[i],e,`${n}/${d}`,a[d]));if(!Bs(t.additionalProperties))return Ds(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.test(d)||(u[d]=Ds(c,`${n}/${d}`,u[d]));return Ds(t,n,u)}s(hit,"FromRecord");function git(t,e,n,r){let i=zi(t,e);return Ds(t,n,lm(i,e,n,r))}s(git,"FromRef");function Ait(t,e,n,r){let i=zi(t,e);return Ds(t,n,lm(i,e,n,r))}s(Ait,"FromThis");function yit(t,e,n,r){return gr(r)&&gr(t.items)?Ds(t,n,t.items.map((i,o)=>lm(i,e,`${n}/${o}`,r[o]))):Ds(t,n,r)}s(yit,"FromTuple");function Cit(t,e,n,r){for(let i of t.anyOf){if(!pi(i,e,r))continue;let o=lm(i,e,n,r);return Ds(t,n,o)}return Ds(t,n,r)}s(Cit,"FromUnion");function lm(t,e,n,r){let i=Tl(t,e),o=t;switch(t[Ze]){case"Array":return uit(o,i,n,r);case"Import":return fit(o,i,n,r);case"Intersect":return dit(o,i,n,r);case"Not":return pit(o,i,n,r);case"Object":return mit(o,i,n,r);case"Record":return hit(o,i,n,r);case"Ref":return git(o,i,n,r);case"Symbol":return Ds(o,n,r);case"This":return Ait(o,i,n,r);case"Tuple":return yit(o,i,n,r);case"Union":return Cit(o,i,n,r);default:return Ds(o,n,r)}}s(lm,"Visit");function G_(t,e,n){return lm(t,e,"",n)}s(G_,"TransformDecode");f();var H_=class extends Ar{static{s(this,"TransformEncodeCheckError")}constructor(e,n,r){super("The encoded value does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},hX=class extends Ar{static{s(this,"TransformEncodeError")}constructor(e,n,r,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=n,this.value=r,this.error=i}};function sc(t,e,n){try{return io(t)?t[ks].Encode(n):n}catch(r){throw new hX(t,e,n,r)}}s(sc,"Default");function xit(t,e,n,r){let i=sc(t,n,r);return gr(i)?i.map((o,a)=>cm(t.items,e,`${n}/${a}`,o)):i}s(xit,"FromArray");function vit(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=sc(t,n,r);return cm(o,[...e,...i],n,a)}s(vit,"FromImport");function bit(t,e,n,r){let i=sc(t,n,r);if(!ui(r)||Xd(r))return i;let o=gL(t),a=o.map(p=>p[0]),l={...i};for(let[p,m]of o)p in l&&(l[p]=cm(m,e,`${n}/${p}`,l[p]));if(!io(t.unevaluatedProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.unevaluatedProperties,d={...l};for(let p of c)a.includes(p)||(d[p]=sc(u,`${n}/${p}`,d[p]));return d}s(bit,"FromIntersect");function Eit(t,e,n,r){return sc(t.not,n,sc(t,n,r))}s(Eit,"FromNot");function Iit(t,e,n,r){let i=sc(t,n,r);if(!ui(i))return i;let o=rd(t),a={...i};for(let d of o)hr(a,d)&&(ls(a[d])&&(!u1(t.properties[d])||Yo.IsExactOptionalProperty(a,d))||(a[d]=cm(t.properties[d],e,`${n}/${d}`,a[d])));if(!Bs(t.additionalProperties))return a;let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=sc(c,`${n}/${d}`,u[d]));return u}s(Iit,"FromObject");function Tit(t,e,n,r){let i=sc(t,n,r);if(!ui(r))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),l={...i};for(let p of Object.getOwnPropertyNames(r))a.test(p)&&(l[p]=cm(t.patternProperties[o],e,`${n}/${p}`,l[p]));if(!Bs(t.additionalProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.additionalProperties,d={...l};for(let p of c)a.test(p)||(d[p]=sc(u,`${n}/${p}`,d[p]));return d}s(Tit,"FromRecord");function wit(t,e,n,r){let i=zi(t,e),o=cm(i,e,n,r);return sc(t,n,o)}s(wit,"FromRef");function _it(t,e,n,r){let i=zi(t,e),o=cm(i,e,n,r);return sc(t,n,o)}s(_it,"FromThis");function Sit(t,e,n,r){let i=sc(t,n,r);return gr(t.items)?t.items.map((o,a)=>cm(o,e,`${n}/${a}`,i[a])):[]}s(Sit,"FromTuple");function Rit(t,e,n,r){for(let i of t.anyOf){if(!pi(i,e,r))continue;let o=cm(i,e,n,r);return sc(t,n,o)}for(let i of t.anyOf){let o=cm(i,e,n,r);if(pi(t,e,o))return sc(t,n,o)}return sc(t,n,r)}s(Rit,"FromUnion");function cm(t,e,n,r){let i=Tl(t,e),o=t;switch(t[Ze]){case"Array":return xit(o,i,n,r);case"Import":return vit(o,i,n,r);case"Intersect":return bit(o,i,n,r);case"Not":return Eit(o,i,n,r);case"Object":return Iit(o,i,n,r);case"Record":return Tit(o,i,n,r);case"Ref":return wit(o,i,n,r);case"This":return _it(o,i,n,r);case"Tuple":return Sit(o,i,n,r);case"Union":return Rit(o,i,n,r);default:return sc(o,n,r)}}s(cm,"Visit");function j_(t,e,n){return cm(t,e,"",n)}s(j_,"TransformEncode");f();function kit(t,e){return io(t)||ll(t.items,e)}s(kit,"FromArray");function Bit(t,e){return io(t)||ll(t.items,e)}s(Bit,"FromAsyncIterator");function Dit(t,e){return io(t)||ll(t.returns,e)||t.parameters.some(n=>ll(n,e))}s(Dit,"FromConstructor");function Pit(t,e){return io(t)||ll(t.returns,e)||t.parameters.some(n=>ll(n,e))}s(Pit,"FromFunction");function Nit(t,e){return io(t)||io(t.unevaluatedProperties)||t.allOf.some(n=>ll(n,e))}s(Nit,"FromIntersect");function Lit(t,e){let n=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),r=t.$defs[t.$ref];return io(t)||ll(r,[...n,...e])}s(Lit,"FromImport");function Fit(t,e){return io(t)||ll(t.items,e)}s(Fit,"FromIterator");function Mit(t,e){return io(t)||ll(t.not,e)}s(Mit,"FromNot");function Qit(t,e){return io(t)||Object.values(t.properties).some(n=>ll(n,e))||Bs(t.additionalProperties)&&ll(t.additionalProperties,e)}s(Qit,"FromObject");function Oit(t,e){return io(t)||ll(t.item,e)}s(Oit,"FromPromise");function Uit(t,e){let n=Object.getOwnPropertyNames(t.patternProperties)[0],r=t.patternProperties[n];return io(t)||ll(r,e)||Bs(t.additionalProperties)&&io(t.additionalProperties)}s(Uit,"FromRecord");function qit(t,e){return io(t)?!0:ll(zi(t,e),e)}s(qit,"FromRef");function Wit(t,e){return io(t)?!0:ll(zi(t,e),e)}s(Wit,"FromThis");function Git(t,e){return io(t)||!ls(t.items)&&t.items.some(n=>ll(n,e))}s(Git,"FromTuple");function Hit(t,e){return io(t)||t.anyOf.some(n=>ll(n,e))}s(Hit,"FromUnion");function ll(t,e){let n=Tl(t,e),r=t;if(t.$id&&gX.has(t.$id))return!1;switch(t.$id&&gX.add(t.$id),t[Ze]){case"Array":return kit(r,n);case"AsyncIterator":return Bit(r,n);case"Constructor":return Dit(r,n);case"Function":return Pit(r,n);case"Import":return Lit(r,n);case"Intersect":return Nit(r,n);case"Iterator":return Fit(r,n);case"Not":return Mit(r,n);case"Object":return Qit(r,n);case"Promise":return Oit(r,n);case"Record":return Uit(r,n);case"Ref":return qit(r,n);case"This":return Wit(r,n);case"Tuple":return Git(r,n);case"Union":return Hit(r,n);default:return io(t)}}s(ll,"Visit");var gX=new Set;function g1(t,e){return gX.clear(),ll(t,e)}s(g1,"HasTransform");var AX=class{static{s(this,"TypeCheck")}constructor(e,n,r,i){this.schema=e,this.references=n,this.checkFunc=r,this.code=i,this.hasTransform=g1(e,n)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return eg(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new W_(this.schema,e,this.Errors(e).First());return this.hasTransform?G_(this.schema,this.references,e):e}Encode(e){let n=this.hasTransform?j_(this.schema,this.references,e):e;if(!this.checkFunc(n))throw new H_(this.schema,e,this.Errors(e).First());return n}},A1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function n(o){return o===95}s(n,"IsUnderscore"),t.IsUnderscore=n;function r(o){return o>=65&&o<=90||o>=97&&o<=122}s(r,"IsAlpha"),t.IsAlpha=r;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(A1||(A1={}));var RL;(function(t){function e(o){return o.length===0?!1:A1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function n(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let l=o.charCodeAt(a);if(!(A1.IsAlpha(l)||A1.IsNumeric(l)||A1.DollarSign(l)||A1.IsUnderscore(l)))return!1}return!0}s(n,"IsAccessor");function r(o){return o.replace(/'/g,"\\'")}s(r,"EscapeHyphen");function i(o,a){return n(a)?`${o}.${a}`:`${o}['${r(a)}']`}s(i,"Encode"),t.Encode=i})(RL||(RL={}));var yX;(function(t){function e(n){let r=[];for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);A1.IsNumeric(o)||A1.IsAlpha(o)?r.push(n.charAt(i)):r.push(`_${o}_`)}return r.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(yX||(yX={}));var CX;(function(t){function e(n){return n.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(CX||(CX={}));var xX=class extends Ar{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},kL=class extends Ar{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},tI;(function(t){function e(a,l,c){return Yo.ExactOptionalPropertyTypes?`('${l}' in ${a} ? ${c} : true)`:`(${RL.Encode(a,l)} !== undefined ? ${c} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){return Yo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return Yo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return Yo.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Yo.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(tI||(tI={}));var ds;(function(t){function e(le){return le[Ze]==="Any"||le[Ze]==="Unknown"}s(e,"IsAnyOrUnknown");function*n(le,Oe,ye){yield"true"}s(n,"FromAny");function*r(le,Oe,ye){yield"true"}s(r,"FromArgument");function*i(le,Oe,ye){yield`Array.isArray(${ye})`;let[tt,J]=[Fe("value","any"),Fe("acc","number")];qn(le.maxItems)&&(yield`${ye}.length <= ${le.maxItems}`),qn(le.minItems)&&(yield`${ye}.length >= ${le.minItems}`);let ie=pe(le.items,Oe,"value");if(yield`${ye}.every((${tt}) => ${ie})`,us(le.contains)||qn(le.minContains)||qn(le.maxContains)){let We=us(le.contains)?le.contains:ri(),Ne=pe(We,Oe,"value"),be=qn(le.minContains)?[`(count >= ${le.minContains})`]:[],ze=qn(le.maxContains)?[`(count <= ${le.maxContains})`]:[],it=`const count = value.reduce((${J}, ${tt}) => ${Ne} ? acc + 1 : acc, 0)`,gt=["(count > 0)",...be,...ze].join(" && ");yield`((${tt}) => { ${it}; return ${gt}})(${ye})`}le.uniqueItems===!0&&(yield`((${tt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(le,Oe,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(le,Oe,ye){yield`(typeof ${ye} === 'bigint')`,ic(le.exclusiveMaximum)&&(yield`${ye} < BigInt(${le.exclusiveMaximum})`),ic(le.exclusiveMinimum)&&(yield`${ye} > BigInt(${le.exclusiveMinimum})`),ic(le.maximum)&&(yield`${ye} <= BigInt(${le.maximum})`),ic(le.minimum)&&(yield`${ye} >= BigInt(${le.minimum})`),ic(le.multipleOf)&&(yield`(${ye} % BigInt(${le.multipleOf})) === 0`)}s(a,"FromBigInt");function*l(le,Oe,ye){yield`(typeof ${ye} === 'boolean')`}s(l,"FromBoolean");function*c(le,Oe,ye){yield*ne(le.returns,Oe,`${ye}.prototype`)}s(c,"FromConstructor");function*u(le,Oe,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,qn(le.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${le.exclusiveMaximumTimestamp}`),qn(le.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${le.exclusiveMinimumTimestamp}`),qn(le.maximumTimestamp)&&(yield`${ye}.getTime() <= ${le.maximumTimestamp}`),qn(le.minimumTimestamp)&&(yield`${ye}.getTime() >= ${le.minimumTimestamp}`),qn(le.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${le.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(le,Oe,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(le,Oe,ye){let tt=globalThis.Object.getOwnPropertyNames(le.$defs).reduce((J,ie)=>[...J,le.$defs[ie]],[]);yield*ne(If(le.$ref),[...Oe,...tt],ye)}s(p,"FromImport");function*m(le,Oe,ye){yield`Number.isInteger(${ye})`,qn(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),qn(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),qn(le.maximum)&&(yield`${ye} <= ${le.maximum}`),qn(le.minimum)&&(yield`${ye} >= ${le.minimum}`),qn(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(m,"FromInteger");function*h(le,Oe,ye){let tt=le.allOf.map(J=>pe(J,Oe,ye)).join(" && ");if(le.unevaluatedProperties===!1){let J=Se(`${new RegExp(p1(le))};`),ie=`Object.getOwnPropertyNames(${ye}).every(key => ${J}.test(key))`;yield`(${tt} && ${ie})`}else if(us(le.unevaluatedProperties)){let J=Se(`${new RegExp(p1(le))};`),ie=`Object.getOwnPropertyNames(${ye}).every(key => ${J}.test(key) || ${pe(le.unevaluatedProperties,Oe,`${ye}[key]`)})`;yield`(${tt} && ${ie})`}else yield`(${tt})`}s(h,"FromIntersect");function*g(le,Oe,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(le,Oe,ye){typeof le.const=="number"||typeof le.const=="boolean"?yield`(${ye} === ${le.const})`:yield`(${ye} === '${CX.Escape(le.const)}')`}s(y,"FromLiteral");function*v(le,Oe,ye){yield"false"}s(v,"FromNever");function*b(le,Oe,ye){yield`(!${pe(le.not,Oe,ye)})`}s(b,"FromNot");function*E(le,Oe,ye){yield`(${ye} === null)`}s(E,"FromNull");function*_(le,Oe,ye){yield tI.IsNumberLike(ye),qn(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),qn(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),qn(le.maximum)&&(yield`${ye} <= ${le.maximum}`),qn(le.minimum)&&(yield`${ye} >= ${le.minimum}`),qn(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(_,"FromNumber");function*k(le,Oe,ye){yield tI.IsObjectLike(ye),qn(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),qn(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let tt=Object.getOwnPropertyNames(le.properties);for(let J of tt){let ie=RL.Encode(ye,J),We=le.properties[J];if(le.required&&le.required.includes(J))yield*ne(We,Oe,ie),(m1(We)||e(We))&&(yield`('${J}' in ${ye})`);else{let Ne=pe(We,Oe,ie);yield tI.IsExactOptionalProperty(ye,J,Ne)}}if(le.additionalProperties===!1)if(le.required&&le.required.length===tt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${tt.length}`;else{let J=`[${tt.map(ie=>`'${ie}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${J}.includes(key))`}if(typeof le.additionalProperties=="object"){let J=pe(le.additionalProperties,Oe,`${ye}[key]`),ie=`[${tt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${ie}.includes(key) || ${J}))`}}s(k,"FromObject");function*D(le,Oe,ye){yield`${ye} instanceof Promise`}s(D,"FromPromise");function*N(le,Oe,ye){yield tI.IsRecordLike(ye),qn(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),qn(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let[tt,J]=Object.entries(le.patternProperties)[0],ie=Se(`${new RegExp(tt)}`),We=pe(J,Oe,"value"),Ne=us(le.additionalProperties)?pe(le.additionalProperties,Oe,ye):le.additionalProperties===!1?"false":"true",be=`(${ie}.test(key) ? ${We} : ${Ne})`;yield`(Object.entries(${ye}).every(([key, value]) => ${be}))`}s(N,"FromRecord");function*Q(le,Oe,ye){let tt=zi(le,Oe);if(fe.functions.has(le.$ref))return yield`${Be(le.$ref)}(${ye})`;yield*ne(tt,Oe,ye)}s(Q,"FromRef");function*Z(le,Oe,ye){let tt=Se(`${new RegExp(le.source,le.flags)};`);yield`(typeof ${ye} === 'string')`,qn(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),qn(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),yield`${tt}.test(${ye})`}s(Z,"FromRegExp");function*me(le,Oe,ye){yield`(typeof ${ye} === 'string')`,qn(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),qn(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),le.pattern!==void 0&&(yield`${Se(`${new RegExp(le.pattern)};`)}.test(${ye})`),le.format!==void 0&&(yield`format('${le.format}', ${ye})`)}s(me,"FromString");function*te(le,Oe,ye){yield`(typeof ${ye} === 'symbol')`}s(te,"FromSymbol");function*H(le,Oe,ye){yield`(typeof ${ye} === 'string')`,yield`${Se(`${new RegExp(le.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*W(le,Oe,ye){yield`${Be(le.$ref)}(${ye})`}s(W,"FromThis");function*re(le,Oe,ye){if(yield`Array.isArray(${ye})`,le.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${le.maxItems})`;for(let tt=0;tt<le.items.length;tt++)yield`${pe(le.items[tt],Oe,`${ye}[${tt}]`)}`}s(re,"FromTuple");function*oe(le,Oe,ye){yield`${ye} === undefined`}s(oe,"FromUndefined");function*V(le,Oe,ye){yield`(${le.anyOf.map(J=>pe(J,Oe,ye)).join(" || ")})`}s(V,"FromUnion");function*q(le,Oe,ye){yield`${ye} instanceof Uint8Array`,qn(le.maxByteLength)&&(yield`(${ye}.length <= ${le.maxByteLength})`),qn(le.minByteLength)&&(yield`(${ye}.length >= ${le.minByteLength})`)}s(q,"FromUint8Array");function*Y(le,Oe,ye){yield"true"}s(Y,"FromUnknown");function*ee(le,Oe,ye){yield tI.IsVoidLike(ye)}s(ee,"FromVoid");function*de(le,Oe,ye){let tt=fe.instances.size;fe.instances.set(tt,le),yield`kind('${le[Ze]}', ${tt}, ${ye})`}s(de,"FromKind");function*ne(le,Oe,ye,tt=!0){let J=Oi(le.$id)?[...Oe,le]:Oe,ie=le;if(tt&&Oi(le.$id)){let We=Be(le.$id);if(fe.functions.has(We))return yield`${We}(${ye})`;{fe.functions.set(We,"<deferred>");let Ne=Ke(We,le,Oe,"value",!1);return fe.functions.set(We,Ne),yield`${We}(${ye})`}}switch(ie[Ze]){case"Any":return yield*n(ie,J,ye);case"Argument":return yield*r(ie,J,ye);case"Array":return yield*i(ie,J,ye);case"AsyncIterator":return yield*o(ie,J,ye);case"BigInt":return yield*a(ie,J,ye);case"Boolean":return yield*l(ie,J,ye);case"Constructor":return yield*c(ie,J,ye);case"Date":return yield*u(ie,J,ye);case"Function":return yield*d(ie,J,ye);case"Import":return yield*p(ie,J,ye);case"Integer":return yield*m(ie,J,ye);case"Intersect":return yield*h(ie,J,ye);case"Iterator":return yield*g(ie,J,ye);case"Literal":return yield*y(ie,J,ye);case"Never":return yield*v(ie,J,ye);case"Not":return yield*b(ie,J,ye);case"Null":return yield*E(ie,J,ye);case"Number":return yield*_(ie,J,ye);case"Object":return yield*k(ie,J,ye);case"Promise":return yield*D(ie,J,ye);case"Record":return yield*N(ie,J,ye);case"Ref":return yield*Q(ie,J,ye);case"RegExp":return yield*Z(ie,J,ye);case"String":return yield*me(ie,J,ye);case"Symbol":return yield*te(ie,J,ye);case"TemplateLiteral":return yield*H(ie,J,ye);case"This":return yield*W(ie,J,ye);case"Tuple":return yield*re(ie,J,ye);case"Undefined":return yield*oe(ie,J,ye);case"Union":return yield*V(ie,J,ye);case"Uint8Array":return yield*q(ie,J,ye);case"Unknown":return yield*Y(ie,J,ye);case"Void":return yield*ee(ie,J,ye);default:if(!hu.Has(ie[Ze]))throw new xX(le);return yield*de(ie,J,ye)}}s(ne,"Visit");let fe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function pe(le,Oe,ye,tt=!0){return`(${[...ne(le,Oe,ye,tt)].join(" && ")})`}s(pe,"CreateExpression");function Be(le){return`check_${yX.Encode(le)}`}s(Be,"CreateFunctionName");function Se(le){let Oe=`local_${fe.variables.size}`;return fe.variables.set(Oe,`const ${Oe} = ${le}`),Oe}s(Se,"CreateVariable");function Ke(le,Oe,ye,tt,J=!0){let[ie,We]=[`
`,it=>"".padStart(it," ")],Ne=Fe("value","any"),be=ft("boolean"),ze=[...ne(Oe,ye,tt,J)].map(it=>`${We(4)}${it}`).join(` &&${ie}`);return`function ${le}(${Ne})${be} {${ie}${We(2)}return (${ie}${ze}${ie}${We(2)})
}`}s(Ke,"CreateFunction");function Fe(le,Oe){let ye=fe.language==="typescript"?`: ${Oe}`:"";return`${le}${ye}`}s(Fe,"CreateParameter");function ft(le){return fe.language==="typescript"?`: ${le}`:""}s(ft,"CreateReturns");function Tt(le,Oe,ye){let tt=Ke("check",le,Oe,"value"),J=Fe("value","any"),ie=ft("boolean"),We=[...fe.functions.values()],Ne=[...fe.variables.values()],be=Oi(le.$id)?`return function check(${J})${ie} {
  return ${Be(le.$id)}(value)
}`:`return ${tt}`;return[...Ne,...We,be].join(`
`)}s(Tt,"Build");function Ct(...le){let Oe={language:"javascript"},[ye,tt,J]=le.length===2&&gr(le[1])?[le[0],le[1],Oe]:le.length===2&&!gr(le[1])?[le[0],[],le[1]]:le.length===3?[le[0],le[1],le[2]]:le.length===1?[le[0],[],Oe]:[null,[],Oe];if(fe.language=J.language,fe.variables.clear(),fe.functions.clear(),fe.instances.clear(),!us(ye))throw new kL(ye);for(let ie of tt)if(!us(ie))throw new kL(ie);return Tt(ye,tt,J)}s(Ct,"Code"),t.Code=Ct;function bt(le,Oe=[]){let ye=Ct(le,Oe,{language:"javascript"}),tt=globalThis.Function("kind","format","hash",ye),J=new Map(fe.instances);function ie(ze,it,gt){if(!hu.Has(ze)||!J.has(it))return!1;let Ot=hu.Get(ze),cn=J.get(it);return Ot(cn,gt)}s(ie,"typeRegistryFunction");function We(ze,it){return im.Has(ze)?im.Get(ze)(it):!1}s(We,"formatRegistryFunction");function Ne(ze){return vx(ze)}s(Ne,"hashFunction");let be=tt(ie,We,Ne);return new AX(le,Oe,be,ye)}s(bt,"Compile"),t.Compile=bt})(ds||(ds={}));var CF=Ve(fx());f();f();var ac=[];for(let t=0;t<256;++t)ac.push((t+256).toString(16).slice(1));function oCe(t,e=0){return(ac[t[e+0]]+ac[t[e+1]]+ac[t[e+2]]+ac[t[e+3]]+"-"+ac[t[e+4]]+ac[t[e+5]]+"-"+ac[t[e+6]]+ac[t[e+7]]+"-"+ac[t[e+8]]+ac[t[e+9]]+"-"+ac[t[e+10]]+ac[t[e+11]]+ac[t[e+12]]+ac[t[e+13]]+ac[t[e+14]]+ac[t[e+15]]).toLowerCase()}s(oCe,"unsafeStringify");f();var sCe=require("crypto");var DL=new Uint8Array(256),BL=DL.length;function vX(){return BL>DL.length-16&&((0,sCe.randomFillSync)(DL),BL=0),DL.slice(BL,BL+=16)}s(vX,"rng");f();f();var aCe=require("crypto"),bX={randomUUID:aCe.randomUUID};function jit(t,e,n){if(bX.randomUUID&&!e&&!t)return bX.randomUUID();t=t||{};let r=t.random??t.rng?.()??vX();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[n+i]=r[i];return e}return oCe(r)}s(jit,"v4");var an=jit;var xF=Ve(ii());function dS(t){return t===1}s(dS,"isRestricted");var Yot=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],TB=8192,Kot=21;var Rl=class{static{s(this,"TelemetryReporters")}getReporter(e,n=0){return dS(n)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(vF(e))return this.reporterRestricted;if(y_(e))return new Kk}getFTReporter(e){if(Mbe(e))return this.reporterFT;if(y_(e))return new Kk}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.dispose(),this.reporter=void 0);let n=Promise.resolve();this.reporterRestricted&&(n=this.reporterRestricted.dispose(),this.reporterRestricted=void 0);let r=Promise.resolve();this.reporterFT&&(r=this.reporterFT.dispose(),this.reporterFT=void 0),await Promise.all([e,n,r])}},Jot=I.Object({},{additionalProperties:I.String()}),Xot=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),Zot=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function est(t){return Zot.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(est,"isOomError");function tst(t){return zk(t)?"network":est(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(tst,"getErrorType");var or=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=ds.Compile(Jot)}static{this.validateTelemetryMeasurements=ds.Compile(Xot)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,n,r){this.properties=e,this.measurements=n,this.issuedTime=r}static createAndMarkAsIssued(e,n){return new t(e||{},n||{},ra())}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=ra())}async extendWithExpTelemetry(e){let{filters:n,exp:r}=await e.get(Nt).getFallbackExpAndFilters();r.addToTelemetry(this),n.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=$h(e.get(ur).getEditorInfo()),this.properties.editor_plugin_version=$h(e.get(ur).getEditorPluginInfo());let n=e.get(Rs);this.properties.client_machineid=n.machineId,this.properties.client_sessionid=n.sessionId,this.properties.copilot_version=`copilot/${lI(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let r=e.get(ur);this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=$h(r.getEditorInfo());let i=e.get(rr);this.properties.fetcher=i.name;let o=i.proxySettings;this.properties.proxy_enabled=o?"true":"false",this.properties.proxy_auth=o?.proxyAuth?"true":"false",this.properties.proxy_kerberos_spn=o?.kerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=i.rejectUnauthorized?"true":"false"}extendWithConfigProperties(e){let n=Wbe(e);n["copilot.build"]=Gbe(e),n["copilot.buildType"]=Rf(e),this.properties={...this.properties,...n}}extendWithRequestId(e){let n={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...n}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,n){if(dS(e))return n;let r={};for(let i in n)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(r[i]=n[i]);return r}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let n={};for(let r in e){let i=t.keysExemptedFromSanitization.includes(r)?r:r.replace(/\./g,"_");n[i]=e[r]}return n}static multiplexProperties(e){let n={...e};for(let r in e){let i=e[r],o=i?.length??0;if(o>TB){let a=0,l=0;for(;o>0&&l<Kot;){l+=1;let c=r;l>1&&(c=r+"_"+(l<10?"0":"")+l);let u=a+TB;o<TB&&(u=a+o),n[c]=i.slice(a,u),o-=TB,a+=TB}}}return n}updateMeasurements(e){let n=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=n,this.displayedTime!==void 0){let r=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}this.measurements.current_time===void 0&&(this.measurements.current_time=ist(e))}validateData(e,n){let r;if(t.validateTelemetryProperties.Check(this.properties)||(r={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);r===void 0?r={problem:"measurements",error:i}:(r.problem="both",r.error+=`; ${i}`)}if(r===void 0)return!0;if(y_(e))throw new Error(`Invalid telemetry data: ${r.problem} ${r.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return aI(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:r.problem,validationError:r.error}),n),dS(n)&&aI(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:r.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,n,r,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),r==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,n)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,Qbe(e))}},ig=class t extends or{static{s(this,"TelemetryWithExp")}constructor(e,n,r,i){super(e,n,r),this.filtersAndExp=i}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new HE({}),exp:hf.createEmptyConfig()})}};function wB(t,e,n,r){t.get(Rl).getReporter(t,e)?.sendTelemetryEvent(n,or.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(wB,"sendTelemetryEvent");function nst(t,e,n,r){t.get(Rl).getReporter(t,e)?.sendTelemetryErrorEvent(n,or.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(nst,"sendTelemetryErrorEvent");function rst(t,e,n,r){t.get(Rl).getFTReporter(t)?.sendTelemetryEvent(n,or.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(rst,"sendFTTelemetryEvent");function fS(t){return t.isFimEnabled?{promptPrefixCharLen:t.prefix.length,promptSuffixCharLen:t.suffix.length}:{promptCharLen:t.prefix.length}}s(fS,"telemetrizePromptLength");function ra(){return performance.now()}s(ra,"now");function ist(t){return Math.floor(t/1e3)}s(ist,"nowSeconds");function vF(t){return t.get(rc).optedIn}s(vF,"shouldSendRestricted");function Mbe(t){return t.get(rc).ftFlag!==""}s(Mbe,"shouldSendFinetuningTelemetry");function kt(t,e,n,r){return t.get(ya).register(ost(t,e,ra(),n?.extendedBy(),r))}s(kt,"telemetry");async function ost(t,e,n,r,i=0){let o=r||or.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",n),(!dS(i)||vF(t))&&wB(t,i,e,o),dS(i)&&Yot.includes(e)&&Mbe(t)&&rst(t,i,e,o)}s(ost,"_telemetry");function fN(t,e){return t.get(ya).register(sst(t,e,ra()))}s(fN,"telemetryExpProblem");async function sst(t,e,n){let r="expProblem",i=or.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",n),wB(t,0,r,i)}s(sst,"_telemetryExpProblem");function JZ(t,e,n,r){return t.get(ya).register(ast(t,e,n,r))}s(JZ,"telemetryRaw");async function ast(t,e,n,r){let i={...n,...Qbe(t)};wB(t,0,e,{properties:i,measurements:r})}s(ast,"_telemetryRaw");function Qbe(t){let e=t.get(ur),n={unique_id:an(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:$h(e.getEditorInfo())},r=t.get(rc);return r.trackingId&&(n.copilot_trackingId=r.trackingId),r.organizationsList&&(n.organizations_list=r.organizationsList),r.enterpriseList&&(n.enterprise_list=r.enterpriseList),r.sku&&(n.sku=r.sku),n}s(Qbe,"createRequiredProperties");var KZ=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let n;try{n=JSON.stringify(e)}catch{n=String(e)}super(n),this.name="CopilotNonError",this.code=(0,CF.SHA256)(CF.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function ba(t,e,n,r,i){return t.get(ya).register(Obe(t,e,ra(),n,{...r},i))}s(ba,"telemetryException");async function Obe(t,e,n,r,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Bc(a)||a instanceof ss||a instanceof xF.ConnectionError||a instanceof xF.ResponseError)return}else{if(a=new KZ(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let l=t.get(ur).getEditorInfo(),c;l.root&&(c=[{prefix:`${l.name}:`,path:l.root}]);let u=vF(t),d=qAe(a,c,u),p=tst(a),m=p==="exception",h=or.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",n),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=TJ(y.value):y.value="[redacted]");if(o??=RAe(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},r&&(o.context["#origin"]=r,o.transaction=r),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=UAe(a,c),v=or.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(v.properties.errno=o.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",n),v.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=v.properties.unique_id,wB(t,1,`error.${p}`,v)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(zh).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),wB(t,0,`error.${p}`,h)}s(Obe,"_telemetryException");function Au(t,e,n,r){let i=s(async(...o)=>{try{await e(...o)}catch(a){await Obe(t,a,ra(),n,r)}},"wrapped");return(...o)=>t.get(ya).register(i(...o))}s(Au,"telemetryCatch");function aI(t,e,n,r){return t.get(ya).register(lst(t,e,ra(),n?.extendedBy(),r))}s(aI,"telemetryError");async function lst(t,e,n,r,i=0){if(dS(i)&&!vF(t))return;let o=r||or.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",n),nst(t,i,e,o)}s(lst,"_telemetryError");function Ube(t,e,n,r,i){let o=or.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(n.logprobs)for(let[a,l]of Object.entries(n.logprobs))o.properties["logprobs_"+a]=JSON.stringify(l)??"unset";return o.extendWithRequestId(r),kt(t,"engine.completion",o,1)}s(Ube,"logEngineCompletion");function qbe(t,e,n){let r={};if(e.isFimEnabled?r={promptPrefixJson:JSON.stringify(e.prefix),promptSuffixJson:JSON.stringify(e.suffix)}:r={promptJson:JSON.stringify(e.prefix)},e.context){let o=n.properties["request.option.extra"]?JSON.parse(n.properties["request.option.extra"]):{};o.context=e.context,r["request.option.extra"]=JSON.stringify(o)}let i=n.extendedBy(r);return kt(t,"engine.prompt",i,1)}s(qbe,"logEnginePrompt");f();f();var Hbe=Ve(ii()),jbe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),XZ;(n=>(n.method="github/didChangeAuth",n.type=new Hbe.ProtocolNotificationType(n.method)))(XZ||={});f();var Vbe=Ve(ii()),ZZ;(n=>(n.method="copilot/ipCodeCitation",n.type=new Vbe.NotificationType(n.method)))(ZZ||={});f();var $be=Ve(ii()),bF;(n=>(n.method="context/update",n.type=new $be.ProtocolRequestType(n.method)))(bF||={});f();f();var Dx="Cancelled";f();var sr=Ve(ii()),_B=I.String(),cd=I.Object({uri:_B}),cI=I.Intersect([cd,I.Object({version:I.Optional(I.Integer())})]),zfn=I.Required(cI),kl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),Ea=I.Object({start:kl,end:kl}),eee=I.Union([I.Integer(),I.String()]),Yfn=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var zbe=Ve(ii()),tee;(n=>(n.method="textDocument/didFocus",n.type=new zbe.ProtocolNotificationType(n.method)))(tee||={});f();var cst=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean(),showInlineMessage:I.Boolean()}),ust=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),Ybe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),Kbe=I.Object({editorInfo:I.Optional(Ybe),editorPluginInfo:I.Optional(Ybe),relatedPluginInfo:I.Optional(I.Array(ust)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(cst)),githubAppId:I.Optional(I.String())});f();var SB=Ve(ii());var EF=(n=>(n[n.Invoked=1]="Invoked",n[n.Automatic=2]="Automatic",n))(EF||{}),dst=I.Enum(EF),fst=I.Object({triggerKind:dst,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:Ea,tooltipSignature:I.Optional(I.String())}))}),Jbe=I.Object({textDocument:cI,position:kl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:fst,data:I.Optional(I.Unknown())}),nee;(n=>(n.method="textDocument/inlineCompletion",n.type=new SB.ProtocolRequestType(n.method)))(nee||={});var Xbe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),Zbe=I.Object({item:Xbe}),ree;(n=>(n.method="textDocument/didShowCompletion",n.type=new SB.ProtocolNotificationType(n.method)))(ree||={});var eEe=I.Object({item:Xbe,acceptedLength:I.Integer({minimum:1})}),iee;(n=>(n.method="textDocument/didPartiallyAcceptCompletion",n.type=new SB.ProtocolNotificationType(n.method)))(iee||={});f();var tEe=Ve(ii()),oee;(n=>(n.method="textDocument/inlineCompletionPrompt",n.type=new tEe.ProtocolRequestType(n.method)))(oee||={});f();var nEe=Ve(ii()),rEe=I.Object({textDocument:cI,position:kl}),pst=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),iEe=I.Object({item:pst}),see;(n=>(n.method="textDocument/didShowInlineEdit",n.type=new nEe.ProtocolNotificationType(n.method)))(see||={});f();var IF=Ve(ii());var oEe=I.Object({textDocument:cI,position:kl,partialResultToken:I.Optional(eee),workDoneToken:I.Optional(eee)}),TF;(r=>(r.method="textDocument/copilotPanelCompletion",r.type=new IF.ProtocolRequestType(r.method),r.partialResult=new IF.ProgressType))(TF||={});f();var sEe=Ve(ii()),aee;(n=>(n.method="copilot/related",n.type=new sEe.ProtocolRequestType(n.method)))(aee||={});f();var aEe=Ve(ii()),lee;(n=>(n.method="statusNotification",n.type=new aEe.ProtocolNotificationType(n.method)))(lee||={});var lEe=Ve(require("events"));var wF="CopilotToken",a0=class{static{s(this,"CopilotTokenNotifier")}#e=new lEe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.#e.emit(wF,e)}onToken(e){return this.#e.on(wF,e),sr.Disposable.create(()=>this.#e.off(wF,e))}};function ea(t,e){let n=Au(t,e,`event.${wF}`);return t.get(a0).onToken(n)}s(ea,"onCopilotToken");function RB(t,e){return t.get(a0).emitToken(e)}s(RB,"emitCopilotToken");function cEe(t){return t.get(a0).lastToken}s(cEe,"getLastCopilotToken");f();var _F=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function cee(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(n=>t.includes(n))}s(cee,"findKnownOrg");function uEe(t){let e=t.organization_list??[];return cee(e)??""}s(uEe,"getUserKind");f();f();var uI=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(uI||{}),Ha=class{static{s(this,"LogTarget")}},og=class{static{s(this,"TelemetryLogSender")}},_t=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,n,...r){e.get(Ha).logIt(e,n,this.category,...r)}debug(e,...n){this.log(e,4,...n)}info(e,...n){this.log(e,3,...n)}warn(e,...n){this.log(e,2,...n)}error(e,...n){e.get(og).sendError(e,this.category,...n),this.errorWithoutTelemetry(e,...n)}errorWithoutTelemetry(e,...n){this.log(e,1,...n)}exception(e,n,r){if(n instanceof Error&&n.name==="Canceled"&&n.message==="Canceled")return;let i=r;r.startsWith(".")&&(i=r.substring(1),r=`${this.category}${r}`),e.get(og).sendException(e,n,r);let o=n instanceof Error?n:new Error(`Non-error thrown: ${String(n)}`);this.log(e,1,`${i}:`,o)}},Wn=new _t("default");f();var ja=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,n,...r){return this.showWarningMessage(n,...r)}};f();var cc=class{static{s(this,"UrlOpener")}};var mst=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],dEe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",fEe="https://gh.io/copilot-network-errors",yu=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,n){if(!(n instanceof Error))return;let r=n;r.code&&mst.includes(r.code)&&!this.didNotifyBefore(r.code)&&(this.notifiedErrorCodes.push(r.code),this.displayCertificateErrorNotification(e,r))}async displayCertificateErrorNotification(e,n){new _t("certificates").error(e,`${dEe} Please visit ${fEe} to learn more. Original cause:`,n);let r={title:"Learn more"};return e.get(ja).showWarningMessage(dEe,r).then(i=>{if(i?.title===r.title)return e.get(cc).open(fEe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();function SF(){return typeof process>"u"}s(SF,"isWeb");var uee=class extends Vh{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function kf(t,e,n,r={}){r={...r,headers:{Authorization:`Bearer ${e.accessToken}`,...SF()?{}:Kd(t),...r.headers}};let i=await t.get(rr).fetch(new URL(n,e.apiUrl).href,r);if(i.status>=500)throw new Vh(i);if(!i.headers.get("x-github-request-id"))throw new uee(i);return i}s(kf,"apiFetch");f();f();var hEe=require("os"),kF=require("path");f();var pEe;(()=>{"use strict";var t={975:H=>{function W(V){if(typeof V!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(V))}s(W,"e");function re(V,q){for(var Y,ee="",de=0,ne=-1,fe=0,pe=0;pe<=V.length;++pe){if(pe<V.length)Y=V.charCodeAt(pe);else{if(Y===47)break;Y=47}if(Y===47){if(!(ne===pe-1||fe===1))if(ne!==pe-1&&fe===2){if(ee.length<2||de!==2||ee.charCodeAt(ee.length-1)!==46||ee.charCodeAt(ee.length-2)!==46){if(ee.length>2){var Be=ee.lastIndexOf("/");if(Be!==ee.length-1){Be===-1?(ee="",de=0):de=(ee=ee.slice(0,Be)).length-1-ee.lastIndexOf("/"),ne=pe,fe=0;continue}}else if(ee.length===2||ee.length===1){ee="",de=0,ne=pe,fe=0;continue}}q&&(ee.length>0?ee+="/..":ee="..",de=2)}else ee.length>0?ee+="/"+V.slice(ne+1,pe):ee=V.slice(ne+1,pe),de=pe-ne-1;ne=pe,fe=0}else Y===46&&fe!==-1?++fe:fe=-1}return ee}s(re,"r");var oe={resolve:s(function(){for(var V,q="",Y=!1,ee=arguments.length-1;ee>=-1&&!Y;ee--){var de;ee>=0?de=arguments[ee]:(V===void 0&&(V=process.cwd()),de=V),W(de),de.length!==0&&(q=de+"/"+q,Y=de.charCodeAt(0)===47)}return q=re(q,!Y),Y?q.length>0?"/"+q:"/":q.length>0?q:"."},"resolve"),normalize:s(function(V){if(W(V),V.length===0)return".";var q=V.charCodeAt(0)===47,Y=V.charCodeAt(V.length-1)===47;return(V=re(V,!q)).length!==0||q||(V="."),V.length>0&&Y&&(V+="/"),q?"/"+V:V},"normalize"),isAbsolute:s(function(V){return W(V),V.length>0&&V.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var V,q=0;q<arguments.length;++q){var Y=arguments[q];W(Y),Y.length>0&&(V===void 0?V=Y:V+="/"+Y)}return V===void 0?".":oe.normalize(V)},"join"),relative:s(function(V,q){if(W(V),W(q),V===q||(V=oe.resolve(V))===(q=oe.resolve(q)))return"";for(var Y=1;Y<V.length&&V.charCodeAt(Y)===47;++Y);for(var ee=V.length,de=ee-Y,ne=1;ne<q.length&&q.charCodeAt(ne)===47;++ne);for(var fe=q.length-ne,pe=de<fe?de:fe,Be=-1,Se=0;Se<=pe;++Se){if(Se===pe){if(fe>pe){if(q.charCodeAt(ne+Se)===47)return q.slice(ne+Se+1);if(Se===0)return q.slice(ne+Se)}else de>pe&&(V.charCodeAt(Y+Se)===47?Be=Se:Se===0&&(Be=0));break}var Ke=V.charCodeAt(Y+Se);if(Ke!==q.charCodeAt(ne+Se))break;Ke===47&&(Be=Se)}var Fe="";for(Se=Y+Be+1;Se<=ee;++Se)Se!==ee&&V.charCodeAt(Se)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+q.slice(ne+Be):(ne+=Be,q.charCodeAt(ne)===47&&++ne,q.slice(ne))},"relative"),_makeLong:s(function(V){return V},"_makeLong"),dirname:s(function(V){if(W(V),V.length===0)return".";for(var q=V.charCodeAt(0),Y=q===47,ee=-1,de=!0,ne=V.length-1;ne>=1;--ne)if((q=V.charCodeAt(ne))===47){if(!de){ee=ne;break}}else de=!1;return ee===-1?Y?"/":".":Y&&ee===1?"//":V.slice(0,ee)},"dirname"),basename:s(function(V,q){if(q!==void 0&&typeof q!="string")throw new TypeError('"ext" argument must be a string');W(V);var Y,ee=0,de=-1,ne=!0;if(q!==void 0&&q.length>0&&q.length<=V.length){if(q.length===V.length&&q===V)return"";var fe=q.length-1,pe=-1;for(Y=V.length-1;Y>=0;--Y){var Be=V.charCodeAt(Y);if(Be===47){if(!ne){ee=Y+1;break}}else pe===-1&&(ne=!1,pe=Y+1),fe>=0&&(Be===q.charCodeAt(fe)?--fe==-1&&(de=Y):(fe=-1,de=pe))}return ee===de?de=pe:de===-1&&(de=V.length),V.slice(ee,de)}for(Y=V.length-1;Y>=0;--Y)if(V.charCodeAt(Y)===47){if(!ne){ee=Y+1;break}}else de===-1&&(ne=!1,de=Y+1);return de===-1?"":V.slice(ee,de)},"basename"),extname:s(function(V){W(V);for(var q=-1,Y=0,ee=-1,de=!0,ne=0,fe=V.length-1;fe>=0;--fe){var pe=V.charCodeAt(fe);if(pe!==47)ee===-1&&(de=!1,ee=fe+1),pe===46?q===-1?q=fe:ne!==1&&(ne=1):q!==-1&&(ne=-1);else if(!de){Y=fe+1;break}}return q===-1||ee===-1||ne===0||ne===1&&q===ee-1&&q===Y+1?"":V.slice(q,ee)},"extname"),format:s(function(V){if(V===null||typeof V!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof V);return function(q,Y){var ee=Y.dir||Y.root,de=Y.base||(Y.name||"")+(Y.ext||"");return ee?ee===Y.root?ee+de:ee+"/"+de:de}(0,V)},"format"),parse:s(function(V){W(V);var q={root:"",dir:"",base:"",ext:"",name:""};if(V.length===0)return q;var Y,ee=V.charCodeAt(0),de=ee===47;de?(q.root="/",Y=1):Y=0;for(var ne=-1,fe=0,pe=-1,Be=!0,Se=V.length-1,Ke=0;Se>=Y;--Se)if((ee=V.charCodeAt(Se))!==47)pe===-1&&(Be=!1,pe=Se+1),ee===46?ne===-1?ne=Se:Ke!==1&&(Ke=1):ne!==-1&&(Ke=-1);else if(!Be){fe=Se+1;break}return ne===-1||pe===-1||Ke===0||Ke===1&&ne===pe-1&&ne===fe+1?pe!==-1&&(q.base=q.name=fe===0&&de?V.slice(1,pe):V.slice(fe,pe)):(fe===0&&de?(q.name=V.slice(1,ne),q.base=V.slice(1,pe)):(q.name=V.slice(fe,ne),q.base=V.slice(fe,pe)),q.ext=V.slice(ne,pe)),fe>0?q.dir=V.slice(0,fe-1):de&&(q.dir="/"),q},"parse"),sep:"/",delimiter:":",win32:null,posix:null};oe.posix=oe,H.exports=oe}},e={};function n(H){var W=e[H];if(W!==void 0)return W.exports;var re=e[H]={exports:{}};return t[H](re,re.exports,n),re.exports}s(n,"r"),n.d=(H,W)=>{for(var re in W)n.o(W,re)&&!n.o(H,re)&&Object.defineProperty(H,re,{enumerable:!0,get:W[re]})},n.o=(H,W)=>Object.prototype.hasOwnProperty.call(H,W),n.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var r={};let i;n.r(r),n.d(r,{URI:s(()=>m,"URI"),Utils:s(()=>te,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function c(H,W){if(!H.scheme&&W)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(c,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(W){return W instanceof m||!!W&&typeof W.authority=="string"&&typeof W.fragment=="string"&&typeof W.path=="string"&&typeof W.query=="string"&&typeof W.scheme=="string"&&typeof W.fsPath=="string"&&typeof W.with=="function"&&typeof W.toString=="function"}scheme;authority;path;query;fragment;constructor(W,re,oe,V,q,Y=!1){typeof W=="object"?(this.scheme=W.scheme||u,this.authority=W.authority||u,this.path=W.path||u,this.query=W.query||u,this.fragment=W.fragment||u):(this.scheme=function(ee,de){return ee||de?ee:"file"}(W,Y),this.authority=re||u,this.path=function(ee,de){switch(ee){case"https":case"http":case"file":de?de[0]!==d&&(de=d+de):de=d}return de}(this.scheme,oe||u),this.query=V||u,this.fragment=q||u,c(this,Y))}get fsPath(){return E(this,!1)}with(W){if(!W)return this;let{scheme:re,authority:oe,path:V,query:q,fragment:Y}=W;return re===void 0?re=this.scheme:re===null&&(re=u),oe===void 0?oe=this.authority:oe===null&&(oe=u),V===void 0?V=this.path:V===null&&(V=u),q===void 0?q=this.query:q===null&&(q=u),Y===void 0?Y=this.fragment:Y===null&&(Y=u),re===this.scheme&&oe===this.authority&&V===this.path&&q===this.query&&Y===this.fragment?this:new g(re,oe,V,q,Y)}static parse(W,re=!1){let oe=p.exec(W);return oe?new g(oe[2]||u,N(oe[4]||u),N(oe[5]||u),N(oe[7]||u),N(oe[9]||u),re):new g(u,u,u,u,u)}static file(W){let re=u;if(i&&(W=W.replace(/\\/g,d)),W[0]===d&&W[1]===d){let oe=W.indexOf(d,2);oe===-1?(re=W.substring(2),W=d):(re=W.substring(2,oe),W=W.substring(oe)||d)}return new g("file",re,W,u,u)}static from(W){let re=new g(W.scheme,W.authority,W.path,W.query,W.fragment);return c(re,!0),re}toString(W=!1){return _(this,W)}toJSON(){return this}static revive(W){if(W){if(W instanceof m)return W;{let re=new g(W);return re._formatted=W.external,re._fsPath=W._sep===h?W.fsPath:null,re}}return W}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(W=!1){return W?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let W={$mid:1};return this._fsPath&&(W.fsPath=this._fsPath,W._sep=h),this._formatted&&(W.external=this._formatted),this.path&&(W.path=this.path),this.scheme&&(W.scheme=this.scheme),this.authority&&(W.authority=this.authority),this.query&&(W.query=this.query),this.fragment&&(W.fragment=this.fragment),W}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(H,W,re){let oe,V=-1;for(let q=0;q<H.length;q++){let Y=H.charCodeAt(q);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||W&&Y===47||re&&Y===91||re&&Y===93||re&&Y===58)V!==-1&&(oe+=encodeURIComponent(H.substring(V,q)),V=-1),oe!==void 0&&(oe+=H.charAt(q));else{oe===void 0&&(oe=H.substr(0,q));let ee=y[Y];ee!==void 0?(V!==-1&&(oe+=encodeURIComponent(H.substring(V,q)),V=-1),oe+=ee):V===-1&&(V=q)}}return V!==-1&&(oe+=encodeURIComponent(H.substring(V))),oe!==void 0?oe:H}s(v,"m");function b(H){let W;for(let re=0;re<H.length;re++){let oe=H.charCodeAt(re);oe===35||oe===63?(W===void 0&&(W=H.substr(0,re)),W+=y[oe]):W!==void 0&&(W+=H[re])}return W!==void 0?W:H}s(b,"y");function E(H,W){let re;return re=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?W?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(re=re.replace(/\//g,"\\")),re}s(E,"v");function _(H,W){let re=W?b:v,oe="",{scheme:V,authority:q,path:Y,query:ee,fragment:de}=H;if(V&&(oe+=V,oe+=":"),(q||V==="file")&&(oe+=d,oe+=d),q){let ne=q.indexOf("@");if(ne!==-1){let fe=q.substr(0,ne);q=q.substr(ne+1),ne=fe.lastIndexOf(":"),ne===-1?oe+=re(fe,!1,!1):(oe+=re(fe.substr(0,ne),!1,!1),oe+=":",oe+=re(fe.substr(ne+1),!1,!0)),oe+="@"}q=q.toLowerCase(),ne=q.lastIndexOf(":"),ne===-1?oe+=re(q,!1,!0):(oe+=re(q.substr(0,ne),!1,!0),oe+=q.substr(ne))}if(Y){if(Y.length>=3&&Y.charCodeAt(0)===47&&Y.charCodeAt(2)===58){let ne=Y.charCodeAt(1);ne>=65&&ne<=90&&(Y=`/${String.fromCharCode(ne+32)}:${Y.substr(3)}`)}else if(Y.length>=2&&Y.charCodeAt(1)===58){let ne=Y.charCodeAt(0);ne>=65&&ne<=90&&(Y=`${String.fromCharCode(ne+32)}:${Y.substr(2)}`)}oe+=re(Y,!0,!1)}return ee&&(oe+="?",oe+=re(ee,!1,!1)),de&&(oe+="#",oe+=W?de:v(de,!1,!1)),oe}s(_,"b");function k(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+k(H.substr(3)):H}}s(k,"C");let D=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(H){return H.match(D)?H.replace(D,W=>k(W)):H}s(N,"w");var Q=n(975);let Z=Q.posix||Q,me="/";var te;(function(H){H.joinPath=function(W,...re){return W.with({path:Z.join(W.path,...re)})},H.resolvePath=function(W,...re){let oe=W.path,V=!1;oe[0]!==me&&(oe=me+oe,V=!0);let q=Z.resolve(oe,...re);return V&&q[0]===me&&!W.authority&&(q=q.substring(1)),W.with({path:q})},H.dirname=function(W){if(W.path.length===0||W.path===me)return W;let re=Z.dirname(W.path);return re.length===1&&re.charCodeAt(0)===46&&(re=""),W.with({path:re})},H.basename=function(W){return Z.basename(W.path)},H.extname=function(W){return Z.extname(W.path)}})(te||(te={})),pEe=r})();var{URI:Px,Utils:RF}=pEe;function gEe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+gEe(t.substring(3)):t}}s(gEe,"decodeURIComponentGraceful");var mEe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function dee(t){return t.match(mEe)?t.replace(mEe,e=>gEe(e)):t}s(dee,"percentDecode");function cl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Px.file(t).toString()}s(cl,"makeFsUri");function pS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Px.parse(e[1]+e[2],!0):Px.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(pS,"parseUri");function AEe(t){return pS(t),t}s(AEe,"validateUri");function Bl(t){try{return pS(t).toString()}catch{return t}}s(Bl,"normalizeUri");var yEe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function ia(t){let e=pS(t);if(!yEe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,hEe.platform)()==="win32"){let n=e.path;return e.authority?n=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(n)&&(n=n.substring(1)),(0,kF.normalize)(n)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(ia,"fsPath");function Wo(t){try{return ia(t)}catch{return}}s(Wo,"getFsPath");function BF(t){let e=Wo(t);if(e)return Px.file(e).toString()}s(BF,"getFsUri");function dI(t,...e){let n,r=Wo(t);return r?n=cl((0,kF.resolve)(r,...e)):n=RF.resolvePath(pS(t),...e.map(i=>CEe(i))).toString(),typeof t=="string"?n:{uri:n}}s(dI,"resolveFilePath");function vo(t,...e){let n=RF.joinPath(pS(t),...e.map(CEe)).toString();return typeof t=="string"?n:{uri:n}}s(vo,"joinPath");function CEe(t){return hst(t)?t.replaceAll("\\","/"):t}s(CEe,"pathToURIPath");function hst(t){return/^[^/\\]*\\/.test(t)}s(hst,"isWinPath");function Ti(t){return dee((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ti,"basename");function ud(t){let e=RF.dirname(pS(t)),n;return yEe.has(e.scheme)&&e.scheme!=="file"?n=e.with({scheme:"file",fragment:""}).toString():n=e.toString(),typeof t=="string"?n:{uri:n}}s(ud,"dirname");var ul=class{static{s(this,"NetworkConfiguration")}},kB={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function fee(t,e,n){if(n&&Kp(t)){for(let r of n){let i=Nr(t,r);if(i)return i}return}for(let r of e){let i=Nr(t,r);if(i)return i}}s(fee,"urlConfigOverride");function gst(t,e){switch(e){case"api":return fee(t,[mt.DebugOverrideCapiUrl,mt.DebugOverrideCapiUrlLegacy],[mt.DebugTestOverrideCapiUrl,mt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return fee(t,[mt.DebugOverrideProxyUrl,mt.DebugOverrideProxyUrlLegacy],[mt.DebugTestOverrideProxyUrl,mt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!PF(t))return fee(t,[mt.DebugSnippyOverrideUrl])}}s(gst,"getEndpointOverrideUrl");function Nx(t,e,n,...r){let i=gst(t,n)??e.endpoints[n];return vo(i,...r)}s(Nx,"getEndpointUrl");function DF(t){return cEe(t)?.endpoints??kB}s(DF,"getLastKnownEndpoints");var dd=new _t("auth"),bEe=60;function mS(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",n=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?n||=e.replace("://","://api."):n?.includes("://api.")&&(e||=n.replace("://api.","://")),(!e||!n)&&(e="https://github.com",n="https://api.github.com"),{apiUrl:n,serverUrl:e}}s(mS,"fillGitHubUrls");function xEe(){return Math.floor(Date.now()/1e3)}s(xEe,"nowSeconds");async function NF(t,e){let n=or.createAndMarkAsIssued({},{});kt(t,"auth.new_login");let r=await Ast(t,e),i=await r.json(),o=i.user_notification;if(vEe(t,o,e),r.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return dd.info(t,d),aI(t,"auth.unknown_401",n),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!r.ok||!i.token){dd.info(t,`Invalid copilot token: missing token: ${r.status} ${r.statusText}`),aI(t,"auth.invalid_token",n.extendedBy({status:r.status.toString(),status_text:r.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&vEe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=xEe()+i.refresh_in+bEe;let l=await pee(t,e),c;l.ok&&(c=await l.json());let u=new x1(i,c);return RB(t,u),kt(t,"auth.new_token",n.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:xEe()})),{kind:"success",envelope:i,userInfo:c}}s(NF,"authFromGitHubToken");async function Ast(t,e){let n={"X-GitHub-Api-Version":Af},r=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await kf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(yu).notifyUser(t,i),i}}s(Ast,"fetchCopilotToken");async function pee(t,e){let n={"X-GitHub-Api-Version":Af},r=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await kf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(yu).notifyUser(t,i),i}}s(pee,"fetchCopilotUserInfo");function vEe(t,e,n){e&&t.get(ja).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async r=>{let i=r?.title===e.title,o=i||r?.title==="Dismiss";if(i){let a=t.get(ur).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(cc).open(l)}e.notification_id&&o&&await yst(t,e.notification_id,n)}).catch(r=>{dd.exception(t,r,"copilotToken.notification")})}s(vEe,"notifyUser");async function yst(t,e,n){let r=n.devOverride?.notificationUrl??"copilot_internal/notification",i=await kf(t,n,r,{method:"POST",headers:{"X-GitHub-Api-Version":Af},body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&dd.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(yst,"sendNotificationResultToGitHub");var x1=class{constructor(e,n){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new _F(n)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??kB}needsRefresh(){return(this.envelope.expires_at-bEe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return cee(this.organization_list||[])!==void 0}parseToken(e){let n=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,l]=o.split("=");n.set(a,l)}return n}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();f();var _Ee=Ve(IEe()),SEe=Ve(wEe()),l0=Ve(require("os"));var hS=class{constructor(e,n,r,i=!1){this.ctx=e;this.namespace=n;this.includeAuthorizationHeader=i;this.onCopilotToken=s(e=>{this.token=e;let n=e.getTokenValue("tid");n!==void 0&&(this.tags["ai.user.id"]=n)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,n)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let r=e.headers??{};r["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(r.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:r,body:e.data};this.ctx.get(rr).fetch(e.urlString,i).then(o=>o.text().then(a=>{n(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{Wn.errorWithoutTelemetry(this.ctx,"Error sending telemetry",o),n(0,{})})},"sendPOST")};this.client=new SEe.ApplicationInsights({instrumentationKey:r,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:e.get(ul).getTelemetryUrl(),extensionConfig:{[_Ee.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=Cst(e),this.commonProperties=xst(e),this.#e=ea(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,n,r){n={...n,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...n,...r},baseType:"EventData",baseData:{name:i,properties:n,measurements:r}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(this.qualifyEventName(e),n,r)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Cst(t){let e={},n=t.get(Rs);e["ai.session.id"]=n.sessionId;let r=t.get(rc);return r.trackingId&&(e["ai.user.id"]=r.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${l0.type()} ${l0.release()}`,e["ai.device.osArchitecture"]=l0.arch(),e["ai.device.osPlatform"]=l0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(co).getVersion(),e}s(Cst,"getTags");function xst(t){let e={};e.common_os=l0.platform(),e.common_platformversion=l0.release(),e.common_arch=l0.arch(),e.common_cpu=Array.from(new Set(l0.cpus().map(r=>r.model))).join();let n=t.get(Rs);return e.common_vscodemachineid=n.machineId,e.common_vscodesessionid=n.sessionId,e.common_uikind=n.uiKind,e.common_remotename=n.remoteName,e.common_isnewappinstall="",e}s(xst,"getCommonProperties");var vst="7d7048df-6dd0-4048-bb23-b716c1461f8f",bst="3fdd7f28-937a-48c8-9a21-ba337db23bd1",Est="f0000000-0000-0000-0000-000000000000",c0=class{constructor(){this._initialized=!1}static{s(this,"TelemetryInitialization")}get isInitialized(){return this._initialized}get isEnabled(){return this._enabled??!1}async initialize(e,n,r){let i=e.get(Rl).deactivate();if(this._namespace=n,this._enabled=r,this._initialized=!0,r){let o=e.get(Rl);o.setReporter(new hS(e,n,vst)),o.setRestrictedReporter(new hS(e,n,bst)),o.setFTReporter(new hS(e,n,Est,!0))}await i}reInitialize(e){return this._initialized?this.initialize(e,this._namespace,this._enabled):Promise.reject(new Error("Cannot re-initialize telemetry that has not been initialized."))}};function MF(t,e,n){return t.get(c0).initialize(t,e,n)}s(MF,"setupTelemetryReporters");var dr=class{constructor(e,n,r){this.authPersistence=e;this._copilotTokenManager=n;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;#t;getCopilotTokenManager(){return this._copilotTokenManager}updateEnterpriseConfig(e,n){if(this.#t=void 0,this.authPersistence.setAuthAuthority(void 0),n?.uri?.match(/^https?:\/\//))try{this.authPersistence.setAuthAuthority(new URL(n.uri).host),this.#t=n.uri}catch(r){dd.exception(e,r,`Ignoring invalid github-enterprise.uri: <${n.uri}>`)}}getConfiguredUrls(){let e=this.#t??"https://github.com";return{serverUrl:e,apiUrl:e.replace("://","://api.")}}async checkAndUpdateStatus(e,n){let r=n?.localChecksOnly??!1,i;return n?.githubAppId!==void 0?i=await this.getPersistedSession(e,n):i=await this.getSession(e),i===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:i.login}:(n?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(e,i,n?.freshSignIn??!1),user:i.login})}async getTokenWithSignUpLimited(e,n,r){try{await this._copilotTokenManager.getToken()}catch(i){if(i instanceof Bf)return r&&i.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e,n)?this.getTokenWithSignUpLimited(e,n,!1):i.result.reason==="HTTP401"?"NotSignedIn":i.result.reason;throw i}return"OK"}async getSession(e){let n=Ist(this.env)??this.#e;if(n)return{...n,...mS(n)};if(n!==null)return await this.getPersistedSession(e)}async getPersistedSession(e,n){let r=await this.authPersistence.getAuthRecord(n);if(r===void 0)return;let i={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&Rf(e)==="dev"&&(i.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),i}async signUpLimited(e,n){let r="copilot_internal/subscribe_limited_user";try{return(await(await kf(e,n,r,{method:"POST",headers:{"X-GitHub-Api-Version":Af},body:JSON.stringify({restricted_telemetry:e.get(c0).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(i){return dd.exception(e,i,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:n,githubAppId:r,serverUrl:i}){await this.authPersistence.saveAuthRecord({oauth_token:e,user:n,githubAppId:r},new URL(i||this.getConfiguredUrls().serverUrl).host),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,n=!0){this.#e=e,n&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord(),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function Ist(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Ist,"getSessionFromEnv");f();var Yi=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#r;#n=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,n,r){this.#t===e&&this.#i===n&&!r&&!this.#r&&!this.#n||(this.#t=e,this.#i=n,this.#r=r,this.#n=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,n){this.forceStatus("Error",e,n)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#r};this.didChange(e)}},QF=class extends Yi{static{s(this,"NoOpStatusReporter")}didChange(){}};var Mn=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Bf=class extends ss{constructor(n){super(n.message??"");this.result=n}static{s(this,"TokenResultError")}},OF=class extends Mn{constructor(n,r=!1){super(r);this.ctx=n;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubTokenBase")}async fetchCopilotTokenResult(){let n=await this.getGitHubSession();if(!n)throw new Bf({reason:"NotSignedIn"});if(!n?.accessToken)throw new Bf({reason:"HTTP401"});let r=await NF(this.ctx,n);if(r.kind==="failure"){if(r.message)throw new Bf(r);let i=new Error(`Unexpected error getting Copilot token: ${r.reason}`);throw i.code=`CopilotToken.${r.reason}`,i}return{envelope:r.envelope,userInfo:r.userInfo}}async getToken(){if(!this.primed){let n=new Error("Token requested before initialization");if(REe(this.ctx))throw n;dd.exception(this.ctx,n,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let n=this.fetchCopilotTokenResult().then(r=>{let i=new x1(r.envelope,r.userInfo);return this.tokenPromise!==n?i:(this.token=i,this.tokenPromise=void 0,this.ctx.get(Yi).forceNormal(),this.token)},r=>{if(this.tokenPromise!==n)throw r;this.tokenPromise=void 0;let i=this.ctx.get(Yi);if(r instanceof Bf)switch(r.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(r.message||"No access to Copilot found.");break}else i.setWarning(String(r));throw r});this.tokenPromise=n}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(n){n!==void 0?(kt(this.ctx,"auth.reset_token_"+n),dd.debug(this.ctx,`Resetting copilot token on HTTP error ${n}`)):dd.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},gS=class extends OF{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(dr).getSession(this.ctx)}};f();var sg=class{static{s(this,"Clock")}now(){return new Date}};f();var fm=class{static{s(this,"ExpConfigMaker")}},BB=class extends fm{constructor(n={}){super();this.defaultFilters=n}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(n,r,i){let o=n.get(rr),a=Object.keys(i).length===0?this.defaultFilters:i,l=new URL("telemetry",r.telemetry).href,c;try{c=await o.fetch(l,{method:"GET",headers:a,timeout:5e3})}catch(m){return hf.createFallbackConfig(n,`Error fetching ExP config: ${String(m)}`)}if(!c.ok)return hf.createFallbackConfig(n,`ExP responded with ${c.status}`);let u;try{u=await c.json()}catch(m){if(m instanceof SyntaxError)return ba(n,m,"fetchExperiments"),hf.createFallbackConfig(n,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new hf(d.Parameters,u.AssignmentContext,p.join(";"))}},UF=class extends fm{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(hf.createEmptyConfig())}};f();f();var qF=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let n=this.getValue(e),r=this.getUpcomingValues(e);return[n,r]}},mee=class extends qF{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},kEe=s(t=>new mee(t),"DEFAULT_GRANULARITY"),WF=class extends qF{constructor(n,r=.5,i=new Date().setUTCHours(0,0,0,0)){super(n);this.prefix=n;this.fetchBeforeFactor=r;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(n){isNaN(n)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=n}setByCallBuckets(n){isNaN(n)?this.numByCallBuckets=void 0:this.numByCallBuckets=n}getValue(n){return this.prefix+this.getTimePeriodBucketString(n)+(this.numByCallBuckets?this.timeHash(n):"")}getTimePeriodBucketString(n){return this.timePeriodLengthMs?this.dateToTimePartString(n):""}getUpcomingValues(n){let r=[],i=this.getUpcomingTimePeriodBucketStrings(n),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let l of o)r.push(this.prefix+a+l);return r}getUpcomingTimePeriodBucketStrings(n){if(this.timePeriodLengthMs===void 0)return[""];if((n.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(n)];{let r=new Date(n.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(n),this.getTimePeriodBucketString(r)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(n=>n.toString())}timeHash(n){return this.numByCallBuckets==null?0:7883*(n.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(n){return this.timePeriodLengthMs==null?"":Math.floor((n.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var BEe="X-Copilot-ClientTimeBucket",GF=class{constructor(e,n){this.specs=new Map;this.prefix=e,this.clock=n,this.defaultGranularity=kEe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[n,r]of this.specs.entries())if(e.extends(n))return r;return this.defaultGranularity}update(e,n,r){if(n=n>1?n:NaN,r=r>0?r:NaN,isNaN(n)&&isNaN(r))this.specs.delete(e);else{let i=new WF(this.prefix);isNaN(n)||i.setByCallBuckets(n),isNaN(r)||i.setTimePeriod(r*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let n=this.selectGranularity(e),[r,i]=n.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(BEe,r),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(BEe,o))}}};f();f();f();function Tst(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(Tst,"getIntegrationId");function Lx(t){let e={...Kd(t),"X-GitHub-Api-Version":Af},n=Tst(t.get(ur));return n&&(e["Copilot-Integration-Id"]=n),e}s(Lx,"getCapiHeaders");function HF(t,e,...n){return Nx(t,e,"api",...n)}s(HF,"getCapiUrl");async function fI(t,e){let n=await t.get(Mn).getToken(),r=HF(t,n,e),i={Authorization:`Bearer ${n.token}`,...Lx(t)};return await t.get(rr).fetch(new URL(r).href,{method:"GET",headers:i})}s(fI,"fetchCapiUrl");async function DEe(t,e,n){let r=await t.get(Mn).getToken(),i=HF(t,r,e),o={Authorization:`Bearer ${r.token}`,...Lx(t)};return await t.get(rr).fetch(new URL(i).href,{method:"POST",headers:o,body:n})}s(DEe,"postCapiUrl");f();var PEe=10*60*1e3,Sr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},NEe=new Set([Sr.O1Ga,Sr.O3Mini,Sr.O1Mini,Sr.Gemini20Pro,Sr.Gemini20Flash]);function Df(t){switch(t){case"edits":case"user":case"inline":return[Sr.Gpt4o,Sr.Gpt4turbo,Sr.Gpt4,Sr.O1Mini,Sr.O1Ga,Sr.Claude35Sonnet,Sr.O3Mini,Sr.Gemini20Flash,Sr.Claude37Sonnet,Sr.Claude37SonnetThought,Sr.Gpt45,Sr.Gpt41,Sr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[Sr.Gpt4oMini,Sr.Gpt35turbo,Sr.Gpt41,Sr.CopilotBase];case"gitCommit":return[Sr.Gpt4oMini,Sr.Gpt4o,Sr.Gpt4,Sr.Gpt41,Sr.CopilotBase];case"codeReview":return[Sr.Gpt4,Sr.Gpt41,Sr.CopilotBase];case"nesStubs":return[Sr.Gpt4oMini,Sr.Gpt41,Sr.CopilotBase]}}s(Df,"getSupportedModelFamiliesForPrompt");var $F={textEmbedding3Small:"text-embedding-3-small"},wst=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),_st=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:wst,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),LEe=I.Object({data:I.Array(_st)}),Cu=class{static{s(this,"ModelMetadataProvider")}},jF=class extends Cu{constructor(n){super();this.ctx=n;this._metadata=[];this._lastFetchTime=0;ea(n,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(r=>r.is_chat_fallback)}async fetchMetadata(){let n=await fI(this.ctx,"/models");if(n.status<200||n.status>=300){if(n.status===429&&this._metadata.length>0){Wn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:n.status,statusText:n.statusText});return}throw Wn.error(this.ctx,"Failed to fetch models from CAPI",{status:n.status,statusText:n.statusText}),new Vh(n)}await this.processModels(n)}async fetchModel(n){let r=await fI(this.ctx,`/models/${n}`);if(!r.ok){Wn.error(this.ctx,`Failed to fetch model ${n} from CAPI`,{status:r.status,statusText:r.statusText});return}return await r.json()}async acceptModelPolicy(n){return(await DEe(this.ctx,`/models/${n}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(n){try{let r=await n.json();this._metadata=r.data,this._lastFetchTime=Date.now()}catch(r){Wn.error(this.ctx,"Failed to parse models from CAPI",{error:r})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>PEe}},VF=class extends Cu{constructor(n,r){super();this.ctx=n;this.delegate=r;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let n=this.ctx.get(Nt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatExpModelIds(r),o=[];if(i){let a=i?.split(",");for(let l of a){let c=await this.fetchModel(l.trim());c!==void 0&&(c.isExperimental=!0,o.push(c))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(n){let r=this._exp_models_cache.get(n);if(r){let[o,a]=r;if(Date.now()-a<PEe)return o}let i=await this.delegate.fetchModel(n);if(i)return this._exp_models_cache.set(n,[i,Date.now()]),i}async acceptModelPolicy(n){return await this.delegate.acceptModelPolicy(n)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function FEe(t){let e=Nr(t,mt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(FEe,"getUserSelectedModelConfiguration");f();f();f();var AS=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var MEe=Ve(require("node:fs/promises")),zF=Ve(require("node:path"));async function YF(t){return await MEe.readFile(hee(t))}s(YF,"readFile");function hee(t){return zF.default.resolve(zF.default.extname(__filename)!==".ts"?__dirname:zF.default.resolve(__dirname,"../../dist"),t)}s(hee,"locateFile");var yS=Ve(JEe());var PB=new Map;function Bo(t="o200k_base"){let e=PB.get(t);return e!==void 0?e:PB.get("o200k_base")}s(Bo,"getTokenizer");async function XEe(t="o200k_base"){return await wee,Bo(t)}s(XEe,"getTokenizerAsync");async function Gst(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await YF(t),n=new Map,r=[];for(let i=0;i<e.length;i++){if(e[i]!==255||r.length===0){r.push(e[i]);continue}n.set(Uint8Array.from(r),n.size),r=[]}return n.set(Uint8Array.from(r),n.size),n}s(Gst,"parseTikTokenNoIndex");var tM=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let n=(0,yS.createTokenizer)(await Gst(`resources/${e}.tiktoken.noindex`),(0,yS.getSpecialTokensByEncoder)(e),(0,yS.getRegexByEncoder)(e),32768);return new t(n)}catch(n){throw n instanceof Error?new AS("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(-o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(-o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(-n),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(0,o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(0,o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(0,n),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},Tee=class{constructor(){this.hash=s(e=>{let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);n=(n<<5)-n+i,n&=n&65535}return n},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},Hst={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},nM=class{constructor(e="o200k_base",n){this.languageId=n;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){throw new Error("Not implemented")}detokenize(e){throw new Error("Not implemented")}tokenizeStrings(e){throw new Error("Not implemented")}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?Hst[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(-Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(0,Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeLastLinesTokens(e,n){throw new Error("Not implemented")}},wee=(async()=>{PB.set("mock",new Tee),PB.set("cl100k_base",await tM.create("cl100k_base")),PB.set("o200k_base",await tM.create("o200k_base"))})();f();f();var jst=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},eIe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},_ee,rM,tIe,See=class extends Ar{static{s(this,"AssertError")}constructor(e){let n=e.First();super(n===void 0?"Invalid Value":n.message),_ee.add(this),rM.set(this,void 0),jst(this,rM,e,"f"),this.error=n}Errors(){return new bx(eIe(this,_ee,"m",tIe).call(this))}};rM=new WeakMap,_ee=new WeakSet,tIe=s(function*(){this.error&&(yield this.error),yield*eIe(this,rM,"f")},"_AssertError_Iterator");function ZEe(t,e,n){if(!pi(t,e,n))throw new See(eg(t,e,n))}s(ZEe,"AssertValue");function iM(...t){return t.length===3?ZEe(t[0],t[1],t[2]):ZEe(t[0],[],t[1])}s(iM,"Assert");f();f();f();function Vst(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=Ki(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=Ki(t[n]);return e}s(Vst,"FromObject");function $st(t){return t.map(e=>Ki(e))}s($st,"FromArray");function zst(t){return t.slice()}s(zst,"FromTypedArray");function Yst(t){return new Map(Ki([...t.entries()]))}s(Yst,"FromMap");function Kst(t){return new Set(Ki([...t.entries()]))}s(Kst,"FromSet");function Jst(t){return new Date(t.toISOString())}s(Jst,"FromDate");function Ki(t){if(gr(t))return $st(t);if(mu(t))return Jst(t);if(Cf(t))return zst(t);if(WAe(t))return Yst(t);if(GAe(t))return Kst(t);if(ui(t))return Vst(t);if(Xd(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Ki,"Clone");var u0=class extends Ar{static{s(this,"ValueCreateError")}constructor(e,n){super(n),this.schema=e}};function Ji(t){return px(t)?t():Ki(t)}s(Ji,"FromDefault");function Xst(t,e){return hr(t,"default")?Ji(t.default):{}}s(Xst,"FromAny");function Zst(t,e){return{}}s(Zst,"FromArgument");function eat(t,e){if(t.uniqueItems===!0&&!hr(t,"default"))throw new u0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!hr(t,"default"))throw new u0(t,"Array with the contains constraint requires a default value");return"default"in t?Ji(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(n=>fd(t.items,e)):[]}s(eat,"FromArray");function tat(t,e){return hr(t,"default")?Ji(t.default):async function*(){}()}s(tat,"FromAsyncIterator");function nat(t,e){return hr(t,"default")?Ji(t.default):BigInt(0)}s(nat,"FromBigInt");function rat(t,e){return hr(t,"default")?Ji(t.default):!1}s(rat,"FromBoolean");function iat(t,e){if(hr(t,"default"))return Ji(t.default);{let n=fd(t.returns,e);return typeof n=="object"&&!Array.isArray(n)?class{constructor(){for(let[r,i]of Object.entries(n)){let o=this;o[r]=i}}}:class{}}}s(iat,"FromConstructor");function oat(t,e){return hr(t,"default")?Ji(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(oat,"FromDate");function sat(t,e){return hr(t,"default")?Ji(t.default):()=>fd(t.returns,e)}s(sat,"FromFunction");function aat(t,e){let n=globalThis.Object.values(t.$defs),r=t.$defs[t.$ref];return fd(r,[...e,...n])}s(aat,"FromImport");function lat(t,e){return hr(t,"default")?Ji(t.default):t.minimum!==void 0?t.minimum:0}s(lat,"FromInteger");function cat(t,e){if(hr(t,"default"))return Ji(t.default);{let n=t.allOf.reduce((r,i)=>{let o=fd(i,e);return typeof o=="object"?{...r,...o}:o},{});if(!pi(t,e,n))throw new u0(t,"Intersect produced invalid value. Consider using a default value.");return n}}s(cat,"FromIntersect");function uat(t,e){return hr(t,"default")?Ji(t.default):function*(){}()}s(uat,"FromIterator");function dat(t,e){return hr(t,"default")?Ji(t.default):t.const}s(dat,"FromLiteral");function fat(t,e){if(hr(t,"default"))return Ji(t.default);throw new u0(t,"Never types cannot be created. Consider using a default value.")}s(fat,"FromNever");function pat(t,e){if(hr(t,"default"))return Ji(t.default);throw new u0(t,"Not types must have a default value")}s(pat,"FromNot");function mat(t,e){return hr(t,"default")?Ji(t.default):null}s(mat,"FromNull");function hat(t,e){return hr(t,"default")?Ji(t.default):t.minimum!==void 0?t.minimum:0}s(hat,"FromNumber");function gat(t,e){if(hr(t,"default"))return Ji(t.default);{let n=new Set(t.required),r={};for(let[i,o]of Object.entries(t.properties))n.has(i)&&(r[i]=fd(o,e));return r}}s(gat,"FromObject");function Aat(t,e){return hr(t,"default")?Ji(t.default):Promise.resolve(fd(t.item,e))}s(Aat,"FromPromise");function yat(t,e){let[n,r]=Object.entries(t.patternProperties)[0];if(hr(t,"default"))return Ji(t.default);if(n===Jh||n===Kh)return{};{let i=n.slice(1,n.length-1).split("|"),o={};for(let a of i)o[a]=fd(r,e);return o}}s(yat,"FromRecord");function Cat(t,e){return hr(t,"default")?Ji(t.default):fd(zi(t,e),e)}s(Cat,"FromRef");function xat(t,e){if(hr(t,"default"))return Ji(t.default);throw new u0(t,"RegExp types cannot be created. Consider using a default value.")}s(xat,"FromRegExp");function vat(t,e){if(t.pattern!==void 0){if(hr(t,"default"))return Ji(t.default);throw new u0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(hr(t,"default"))return Ji(t.default);throw new u0(t,"String types with formats must specify a default value")}else return hr(t,"default")?Ji(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(vat,"FromString");function bat(t,e){return hr(t,"default")?Ji(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(bat,"FromSymbol");function Eat(t,e){if(hr(t,"default"))return Ji(t.default);if(!dL(t))throw new u0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return R_(t)[0]}s(Eat,"FromTemplateLiteral");function Iat(t,e){if(nIe++>Dat)throw new u0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return hr(t,"default")?Ji(t.default):fd(zi(t,e),e)}s(Iat,"FromThis");function Tat(t,e){return hr(t,"default")?Ji(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((n,r)=>fd(t.items[r],e))}s(Tat,"FromTuple");function wat(t,e){if(hr(t,"default"))return Ji(t.default)}s(wat,"FromUndefined");function _at(t,e){if(hr(t,"default"))return Ji(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return fd(t.anyOf[0],e)}s(_at,"FromUnion");function Sat(t,e){return hr(t,"default")?Ji(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(Sat,"FromUint8Array");function Rat(t,e){return hr(t,"default")?Ji(t.default):{}}s(Rat,"FromUnknown");function kat(t,e){if(hr(t,"default"))return Ji(t.default)}s(kat,"FromVoid");function Bat(t,e){if(hr(t,"default"))return Ji(t.default);throw new Error("User defined types must specify a default value")}s(Bat,"FromKind");function fd(t,e){let n=Tl(t,e),r=t;switch(r[Ze]){case"Any":return Xst(r,n);case"Argument":return Zst(r,n);case"Array":return eat(r,n);case"AsyncIterator":return tat(r,n);case"BigInt":return nat(r,n);case"Boolean":return rat(r,n);case"Constructor":return iat(r,n);case"Date":return oat(r,n);case"Function":return sat(r,n);case"Import":return aat(r,n);case"Integer":return lat(r,n);case"Intersect":return cat(r,n);case"Iterator":return uat(r,n);case"Literal":return dat(r,n);case"Never":return fat(r,n);case"Not":return pat(r,n);case"Null":return mat(r,n);case"Number":return hat(r,n);case"Object":return gat(r,n);case"Promise":return Aat(r,n);case"Record":return yat(r,n);case"Ref":return Cat(r,n);case"RegExp":return xat(r,n);case"String":return vat(r,n);case"Symbol":return bat(r,n);case"TemplateLiteral":return Eat(r,n);case"This":return Iat(r,n);case"Tuple":return Tat(r,n);case"Undefined":return wat(r,n);case"Union":return _at(r,n);case"Uint8Array":return Sat(r,n);case"Unknown":return Rat(r,n);case"Void":return kat(r,n);default:if(!hu.Has(r[Ze]))throw new u0(r,"Unknown type");return Bat(r,n)}}s(fd,"Visit");var Dat=512,nIe=0;function Pf(...t){return nIe=0,t.length===2?fd(t[0],t[1]):fd(t[0],[])}s(Pf,"Create");var oM=class extends Ar{static{s(this,"ValueCastError")}constructor(e,n){super(n),this.schema=e}};function Pat(t,e,n){if(t[Ze]==="Object"&&typeof n=="object"&&!s1(n)){let r=t,i=Object.getOwnPropertyNames(n),o=Object.entries(r.properties),[a,l]=[1/o.length,o.length];return o.reduce((c,[u,d])=>{let p=d[Ze]==="Literal"&&d.const===n[u]?l:0,m=pi(d,e,n[u])?a:0,h=i.includes(u)?a:0;return c+(p+m+h)},0)}else return pi(t,e,n)?1:0}s(Pat,"ScoreUnion");function Nat(t,e,n){let r=t.anyOf.map(a=>zi(a,e)),[i,o]=[r[0],0];for(let a of r){let l=Pat(a,e,n);l>o&&(i=a,o=l)}return i}s(Nat,"SelectUnion");function Lat(t,e,n){if("default"in t)return typeof n=="function"?t.default:Ki(t.default);{let r=Nat(t,e,n);return NB(r,e,n)}}s(Lat,"CastUnion");function Fat(t,e,n){return pi(t,e,n)?Ki(n):Pf(t,e)}s(Fat,"DefaultClone");function Mat(t,e,n){return pi(t,e,n)?n:Pf(t,e)}s(Mat,"Default");function Qat(t,e,n){if(pi(t,e,n))return Ki(n);let r=gr(n)?Ki(n):Pf(t,e),i=qn(t.minItems)&&r.length<t.minItems?[...r,...Array.from({length:t.minItems-r.length},()=>null)]:r,a=(qn(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(c=>pm(t.items,e,c));if(t.uniqueItems!==!0)return a;let l=[...new Set(a)];if(!pi(t,e,l))throw new oM(t,"Array cast produced invalid data due to uniqueItems constraint");return l}s(Qat,"FromArray");function Oat(t,e,n){if(pi(t,e,n))return Pf(t,e);let r=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!r.has(o)&&n.prototype[o]===void 0||(i.prototype[o]=pm(a,e,n.prototype[o]));return i}s(Oat,"FromConstructor");function Uat(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return pm(i,[...e,...r],n)}s(Uat,"FromImport");function qat(t,e,n){let r=Pf(t,e),i=ui(r)&&ui(n)?{...r,...n}:n;return pi(t,e,i)?i:Pf(t,e)}s(qat,"FromIntersect");function Wat(t,e,n){throw new oM(t,"Never types cannot be cast")}s(Wat,"FromNever");function Gat(t,e,n){if(pi(t,e,n))return n;if(n===null||typeof n!="object")return Pf(t,e);let r=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!r.has(o)&&n[o]===void 0||(i[o]=pm(a,e,n[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(n))o.includes(a)||(i[a]=pm(t.additionalProperties,e,n[a]))}return i}s(Gat,"FromObject");function Hat(t,e,n){if(pi(t,e,n))return Ki(n);if(n===null||typeof n!="object"||Array.isArray(n)||n instanceof Date)return Pf(t,e);let r=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[r],o={};for(let[a,l]of Object.entries(n))o[a]=pm(i,e,l);return o}s(Hat,"FromRecord");function jat(t,e,n){return pm(zi(t,e),e,n)}s(jat,"FromRef");function Vat(t,e,n){return pm(zi(t,e),e,n)}s(Vat,"FromThis");function $at(t,e,n){return pi(t,e,n)?Ki(n):gr(n)?t.items===void 0?[]:t.items.map((r,i)=>pm(r,e,n[i])):Pf(t,e)}s($at,"FromTuple");function zat(t,e,n){return pi(t,e,n)?Ki(n):Lat(t,e,n)}s(zat,"FromUnion");function pm(t,e,n){let r=Oi(t.$id)?Tl(t,e):e,i=t;switch(t[Ze]){case"Array":return Qat(i,r,n);case"Constructor":return Oat(i,r,n);case"Import":return Uat(i,r,n);case"Intersect":return qat(i,r,n);case"Never":return Wat(i,r,n);case"Object":return Gat(i,r,n);case"Record":return Hat(i,r,n);case"Ref":return jat(i,r,n);case"This":return Vat(i,r,n);case"Tuple":return $at(i,r,n);case"Union":return zat(i,r,n);case"Date":case"Symbol":case"Uint8Array":return Fat(t,e,n);default:return Mat(i,r,n)}}s(pm,"Visit");function NB(...t){return t.length===3?pm(t[0],t[1],t[2]):pm(t[0],[],t[1])}s(NB,"Cast");f();function Yat(t){return hx(t)&&t[Ze]!=="Unsafe"}s(Yat,"IsCheckable");function Kat(t,e,n){return gr(n)?n.map(r=>pd(t.items,e,r)):n}s(Kat,"FromArray");function Jat(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return pd(i,[...e,...r],n)}s(Jat,"FromImport");function Xat(t,e,n){let r=t.unevaluatedProperties,o=t.allOf.map(l=>pd(l,e,Ki(n))).reduce((l,c)=>ui(c)?{...l,...c}:c,{});if(!ui(n)||!ui(o)||!hx(r))return o;let a=rd(t);for(let l of Object.getOwnPropertyNames(n))a.includes(l)||pi(r,e,n[l])&&(o[l]=pd(r,e,n[l]));return o}s(Xat,"FromIntersect");function Zat(t,e,n){if(!ui(n)||gr(n))return n;let r=t.additionalProperties;for(let i of Object.getOwnPropertyNames(n)){if(hr(t.properties,i)){n[i]=pd(t.properties[i],e,n[i]);continue}if(hx(r)&&pi(r,e,n[i])){n[i]=pd(r,e,n[i]);continue}delete n[i]}return n}s(Zat,"FromObject");function elt(t,e,n){if(!ui(n))return n;let r=t.additionalProperties,i=Object.getOwnPropertyNames(n),[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of i){if(l.test(c)){n[c]=pd(a,e,n[c]);continue}if(hx(r)&&pi(r,e,n[c])){n[c]=pd(r,e,n[c]);continue}delete n[c]}return n}s(elt,"FromRecord");function tlt(t,e,n){return pd(zi(t,e),e,n)}s(tlt,"FromRef");function nlt(t,e,n){return pd(zi(t,e),e,n)}s(nlt,"FromThis");function rlt(t,e,n){if(!gr(n))return n;if(ls(t.items))return[];let r=Math.min(n.length,t.items.length);for(let i=0;i<r;i++)n[i]=pd(t.items[i],e,n[i]);return n.length>r?n.slice(0,r):n}s(rlt,"FromTuple");function ilt(t,e,n){for(let r of t.anyOf)if(Yat(r)&&pi(r,e,n))return pd(r,e,n);return n}s(ilt,"FromUnion");function pd(t,e,n){let r=Oi(t.$id)?Tl(t,e):e,i=t;switch(i[Ze]){case"Array":return Kat(i,r,n);case"Import":return Jat(i,r,n);case"Intersect":return Xat(i,r,n);case"Object":return Zat(i,r,n);case"Record":return elt(i,r,n);case"Ref":return tlt(i,r,n);case"This":return nlt(i,r,n);case"Tuple":return rlt(i,r,n);case"Union":return ilt(i,r,n);default:return n}}s(pd,"Visit");function sM(...t){return t.length===3?pd(t[0],t[1],t[2]):pd(t[0],[],t[1])}s(sM,"Clean");f();function aM(t){return Oi(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(aM,"IsStringNumeric");function olt(t){return ic(t)||Yh(t)||qn(t)}s(olt,"IsValueToString");function LB(t){return t===!0||qn(t)&&t===1||ic(t)&&t===BigInt("1")||Oi(t)&&(t.toLowerCase()==="true"||t==="1")}s(LB,"IsValueTrue");function FB(t){return t===!1||qn(t)&&(t===0||Object.is(t,-0))||ic(t)&&t===BigInt("0")||Oi(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(FB,"IsValueFalse");function slt(t){return Oi(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(slt,"IsTimeStringWithTimeZone");function alt(t){return Oi(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(alt,"IsTimeStringWithoutTimeZone");function llt(t){return Oi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(llt,"IsDateTimeStringWithTimeZone");function clt(t){return Oi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(clt,"IsDateTimeStringWithoutTimeZone");function ult(t){return Oi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(ult,"IsDateString");function dlt(t,e){let n=iIe(t);return n===e?n:t}s(dlt,"TryConvertLiteralString");function flt(t,e){let n=oIe(t);return n===e?n:t}s(flt,"TryConvertLiteralNumber");function plt(t,e){let n=rIe(t);return n===e?n:t}s(plt,"TryConvertLiteralBoolean");function mlt(t,e){return Oi(t.const)?dlt(e,t.const):qn(t.const)?flt(e,t.const):Yh(t.const)?plt(e,t.const):e}s(mlt,"TryConvertLiteral");function rIe(t){return LB(t)?!0:FB(t)?!1:t}s(rIe,"TryConvertBoolean");function hlt(t){let e=s(n=>n.split(".")[0],"truncateInteger");return aM(t)?BigInt(e(t)):qn(t)?BigInt(Math.trunc(t)):FB(t)?BigInt(0):LB(t)?BigInt(1):t}s(hlt,"TryConvertBigInt");function iIe(t){return a1(t)&&t.description!==void 0?t.description.toString():olt(t)?t.toString():t}s(iIe,"TryConvertString");function oIe(t){return aM(t)?parseFloat(t):LB(t)?1:FB(t)?0:t}s(oIe,"TryConvertNumber");function glt(t){return aM(t)?parseInt(t):qn(t)?Math.trunc(t):LB(t)?1:FB(t)?0:t}s(glt,"TryConvertInteger");function Alt(t){return Oi(t)&&t.toLowerCase()==="null"?null:t}s(Alt,"TryConvertNull");function ylt(t){return Oi(t)&&t==="undefined"?void 0:t}s(ylt,"TryConvertUndefined");function Clt(t){return mu(t)?t:qn(t)?new Date(t):LB(t)?new Date(1):FB(t)?new Date(0):aM(t)?new Date(parseInt(t)):alt(t)?new Date(`1970-01-01T${t}.000Z`):slt(t)?new Date(`1970-01-01T${t}`):clt(t)?new Date(`${t}.000Z`):llt(t)?new Date(t):ult(t)?new Date(`${t}T00:00:00.000Z`):t}s(Clt,"TryConvertDate");function xlt(t,e,n){return(gr(n)?n:[n]).map(i=>mm(t.items,e,i))}s(xlt,"FromArray");function vlt(t,e,n){return hlt(n)}s(vlt,"FromBigInt");function blt(t,e,n){return rIe(n)}s(blt,"FromBoolean");function Elt(t,e,n){return Clt(n)}s(Elt,"FromDate");function Ilt(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return mm(i,[...e,...r],n)}s(Ilt,"FromImport");function Tlt(t,e,n){return glt(n)}s(Tlt,"FromInteger");function wlt(t,e,n){return t.allOf.reduce((r,i)=>mm(i,e,r),n)}s(wlt,"FromIntersect");function _lt(t,e,n){return mlt(t,n)}s(_lt,"FromLiteral");function Slt(t,e,n){return Alt(n)}s(Slt,"FromNull");function Rlt(t,e,n){return oIe(n)}s(Rlt,"FromNumber");function klt(t,e,n){if(!ui(n))return n;for(let r of Object.getOwnPropertyNames(t.properties))hr(n,r)&&(n[r]=mm(t.properties[r],e,n[r]));return n}s(klt,"FromObject");function Blt(t,e,n){if(!ui(n))return n;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,l]of Object.entries(n))n[a]=mm(o,e,l);return n}s(Blt,"FromRecord");function Dlt(t,e,n){return mm(zi(t,e),e,n)}s(Dlt,"FromRef");function Plt(t,e,n){return iIe(n)}s(Plt,"FromString");function Nlt(t,e,n){return Oi(n)||qn(n)?Symbol(n):n}s(Nlt,"FromSymbol");function Llt(t,e,n){return mm(zi(t,e),e,n)}s(Llt,"FromThis");function Flt(t,e,n){return gr(n)&&!ls(t.items)?n.map((i,o)=>o<t.items.length?mm(t.items[o],e,i):i):n}s(Flt,"FromTuple");function Mlt(t,e,n){return ylt(n)}s(Mlt,"FromUndefined");function Qlt(t,e,n){for(let r of t.anyOf){let i=mm(r,e,Ki(n));if(pi(r,e,i))return i}return n}s(Qlt,"FromUnion");function mm(t,e,n){let r=Tl(t,e),i=t;switch(t[Ze]){case"Array":return xlt(i,r,n);case"BigInt":return vlt(i,r,n);case"Boolean":return blt(i,r,n);case"Date":return Elt(i,r,n);case"Import":return Ilt(i,r,n);case"Integer":return Tlt(i,r,n);case"Intersect":return wlt(i,r,n);case"Literal":return _lt(i,r,n);case"Null":return Slt(i,r,n);case"Number":return Rlt(i,r,n);case"Object":return klt(i,r,n);case"Record":return Blt(i,r,n);case"Ref":return Dlt(i,r,n);case"String":return Plt(i,r,n);case"Symbol":return Nlt(i,r,n);case"This":return Llt(i,r,n);case"Tuple":return Flt(i,r,n);case"Undefined":return Mlt(i,r,n);case"Union":return Qlt(i,r,n);default:return n}}s(mm,"Visit");function lM(...t){return t.length===3?mm(t[0],t[1],t[2]):mm(t[0],[],t[1])}s(lM,"Convert");f();function sIe(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!pi(e,n,r))throw new W_(e,r,eg(e,n,r).First());return g1(e,n)?G_(e,n,r):r}s(sIe,"Decode");f();function v1(t,e){let n=hr(t,"default")?t.default:void 0,r=px(n)?n():Ki(n);return ls(e)?r:ui(e)&&ui(r)?Object.assign(r,e):e}s(v1,"ValueOrDefault");function Ree(t){return hx(t)&&"default"in t}s(Ree,"HasDefaultProperty");function Olt(t,e,n){if(gr(n)){for(let i=0;i<n.length;i++)n[i]=vu(t.items,e,n[i]);return n}let r=v1(t,n);if(!gr(r))return r;for(let i=0;i<r.length;i++)r[i]=vu(t.items,e,r[i]);return r}s(Olt,"FromArray");function Ult(t,e,n){return mu(n)?n:v1(t,n)}s(Ult,"FromDate");function qlt(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return vu(i,[...e,...r],n)}s(qlt,"FromImport");function Wlt(t,e,n){let r=v1(t,n);return t.allOf.reduce((i,o)=>{let a=vu(o,e,r);return ui(a)?{...i,...a}:a},{})}s(Wlt,"FromIntersect");function Glt(t,e,n){let r=v1(t,n);if(!ui(r))return r;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=vu(t.properties[o],e,r[o]);ls(a)||(r[o]=vu(t.properties[o],e,r[o]))}if(!Ree(t.additionalProperties))return r;for(let o of Object.getOwnPropertyNames(r))i.includes(o)||(r[o]=vu(t.additionalProperties,e,r[o]));return r}s(Glt,"FromObject");function Hlt(t,e,n){let r=v1(t,n);if(!ui(r))return r;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of Object.getOwnPropertyNames(r))l.test(c)&&Ree(a)&&(r[c]=vu(a,e,r[c]));if(!Ree(i))return r;for(let c of Object.getOwnPropertyNames(r))l.test(c)||(r[c]=vu(i,e,r[c]));return r}s(Hlt,"FromRecord");function jlt(t,e,n){return vu(zi(t,e),e,v1(t,n))}s(jlt,"FromRef");function Vlt(t,e,n){return vu(zi(t,e),e,n)}s(Vlt,"FromThis");function $lt(t,e,n){let r=v1(t,n);if(!gr(r)||ls(t.items))return r;let[i,o]=[t.items,Math.max(t.items.length,r.length)];for(let a=0;a<o;a++)a<i.length&&(r[a]=vu(i[a],e,r[a]));return r}s($lt,"FromTuple");function zlt(t,e,n){let r=v1(t,n);for(let i of t.anyOf){let o=vu(i,e,Ki(r));if(pi(i,e,o))return o}return r}s(zlt,"FromUnion");function vu(t,e,n){let r=Tl(t,e),i=t;switch(i[Ze]){case"Array":return Olt(i,r,n);case"Date":return Ult(i,r,n);case"Import":return qlt(i,r,n);case"Intersect":return Wlt(i,r,n);case"Object":return Glt(i,r,n);case"Record":return Hlt(i,r,n);case"Ref":return jlt(i,r,n);case"This":return Vlt(i,r,n);case"Tuple":return $lt(i,r,n);case"Union":return zlt(i,r,n);default:return v1(i,n)}}s(vu,"Visit");function cM(...t){return t.length===3?vu(t[0],t[1],t[2]):vu(t[0],[],t[1])}s(cM,"Default");f();f();var hm={};t1(hm,{Delete:()=>Klt,Format:()=>MB,Get:()=>Xlt,Has:()=>Jlt,Set:()=>Ylt,ValuePointerRootDeleteError:()=>dM,ValuePointerRootSetError:()=>uM});f();var uM=class extends Ar{static{s(this,"ValuePointerRootSetError")}constructor(e,n,r){super("Cannot set root value"),this.value=e,this.path=n,this.update=r}},dM=class extends Ar{static{s(this,"ValuePointerRootDeleteError")}constructor(e,n){super("Cannot delete root value"),this.value=e,this.path=n}};function aIe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(aIe,"Escape");function*MB(t){if(t==="")return;let[e,n]=[0,0];for(let r=0;r<t.length;r++)t.charAt(r)==="/"?(r===0||(n=r,yield aIe(t.slice(e,n))),e=r+1):n=r;yield aIe(t.slice(e))}s(MB,"Format");function Ylt(t,e,n){if(e==="")throw new uM(t,e,n);let[r,i,o]=[null,t,""];for(let a of MB(e))i[a]===void 0&&(i[a]={}),r=i,i=i[a],o=a;r[o]=n}s(Ylt,"Set");function Klt(t,e){if(e==="")throw new dM(t,e);let[n,r,i]=[null,t,""];for(let o of MB(e)){if(r[o]===void 0||r[o]===null)return;n=r,r=r[o],i=o}if(Array.isArray(n)){let o=parseInt(i);n.splice(o,1)}else delete n[i]}s(Klt,"Delete");function Jlt(t,e){if(e==="")return!0;let[n,r,i]=[null,t,""];for(let o of MB(e)){if(r[o]===void 0)return!1;n=r,r=r[o],i=o}return Object.getOwnPropertyNames(n).includes(i)}s(Jlt,"Has");function Xlt(t,e){if(e==="")return t;let n=t;for(let r of MB(e)){if(n[r]===void 0)return;n=n[r]}return n}s(Xlt,"Get");f();function Zlt(t,e){if(!ui(e))return!1;let n=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],r=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return n.length!==r.length?!1:n.every(i=>pI(t[i],e[i]))}s(Zlt,"ObjectType");function ect(t,e){return mu(e)&&t.getTime()===e.getTime()}s(ect,"DateType");function tct(t,e){return!gr(e)||t.length!==e.length?!1:t.every((n,r)=>pI(n,e[r]))}s(tct,"ArrayType");function nct(t,e){return!Cf(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((n,r)=>pI(n,e[r]))}s(nct,"TypedArrayType");function rct(t,e){return t===e}s(rct,"ValueType");function pI(t,e){if(mu(t))return ect(t,e);if(Cf(t))return nct(t,e);if(gr(t))return tct(t,e);if(ui(t))return Zlt(t,e);if(Xd(t))return rct(t,e);throw new Error("ValueEquals: Unable to compare value")}s(pI,"Equal");var ict=so({type:Pi("insert"),path:gu(),value:om()}),oct=so({type:Pi("update"),path:gu(),value:om()}),sct=so({type:Pi("delete"),path:gu()}),cIe=oo([ict,oct,sct]),fM=class extends Ar{static{s(this,"ValueDiffError")}constructor(e,n){super(n),this.value=e}};function pM(t,e){return{type:"update",path:t,value:e}}s(pM,"CreateUpdate");function uIe(t,e){return{type:"insert",path:t,value:e}}s(uIe,"CreateInsert");function dIe(t){return{type:"delete",path:t}}s(dIe,"CreateDelete");function lIe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new fM(t,"Cannot diff objects with symbols")}s(lIe,"AssertDiffable");function*act(t,e,n){if(lIe(e),lIe(n),!DJ(n))return yield pM(t,n);let r=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(n);for(let o of i)hr(e,o)||(yield uIe(`${t}/${o}`,n[o]));for(let o of r)hr(n,o)&&(pI(e,n)||(yield*mM(`${t}/${o}`,e[o],n[o])));for(let o of r)hr(n,o)||(yield dIe(`${t}/${o}`))}s(act,"ObjectType");function*lct(t,e,n){if(!gr(n))return yield pM(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*mM(`${t}/${r}`,e[r],n[r]);for(let r=0;r<n.length;r++)r<e.length||(yield uIe(`${t}/${r}`,n[r]));for(let r=e.length-1;r>=0;r--)r<n.length||(yield dIe(`${t}/${r}`))}s(lct,"ArrayType");function*cct(t,e,n){if(!Cf(n)||e.length!==n.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(n).constructor.name)return yield pM(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*mM(`${t}/${r}`,e[r],n[r])}s(cct,"TypedArrayType");function*uct(t,e,n){e!==n&&(yield pM(t,n))}s(uct,"ValueType");function*mM(t,e,n){if(DJ(e))return yield*act(t,e,n);if(gr(e))return yield*lct(t,e,n);if(Cf(e))return yield*cct(t,e,n);if(Xd(e))return yield*uct(t,e,n);throw new fM(e,"Unable to diff value")}s(mM,"Visit");function fIe(t,e){return[...mM("",t,e)]}s(fIe,"Diff");function dct(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(dct,"IsRootUpdate");function fct(t){return t.length===0}s(fct,"IsIdentity");function pIe(t,e){if(dct(e))return Ki(e[0].value);if(fct(e))return Ki(t);let n=Ki(t);for(let r of e)switch(r.type){case"insert":{hm.Set(n,r.path,r.value);break}case"update":{hm.Set(n,r.path,r.value);break}case"delete":{hm.Delete(n,r.path);break}}return n}s(pIe,"Patch");f();function mIe(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=g1(e,n)?j_(e,n,r):r;if(!pi(e,n,i))throw new H_(e,i,eg(e,n,i).First());return i}s(mIe,"Encode");f();function hM(t){return ui(t)&&!gr(t)}s(hM,"IsStandardObject");var gM=class extends Ar{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function pct(t,e,n,r){if(!hM(n))hm.Set(t,e,Ki(r));else{let i=Object.getOwnPropertyNames(n),o=Object.getOwnPropertyNames(r);for(let a of i)o.includes(a)||delete n[a];for(let a of o)i.includes(a)||(n[a]=null);for(let a of o)kee(t,`${e}/${a}`,n[a],r[a])}}s(pct,"ObjectType");function mct(t,e,n,r){if(!gr(n))hm.Set(t,e,Ki(r));else{for(let i=0;i<r.length;i++)kee(t,`${e}/${i}`,n[i],r[i]);n.splice(r.length)}}s(mct,"ArrayType");function hct(t,e,n,r){if(Cf(n)&&n.length===r.length)for(let i=0;i<n.length;i++)n[i]=r[i];else hm.Set(t,e,Ki(r))}s(hct,"TypedArrayType");function gct(t,e,n,r){n!==r&&hm.Set(t,e,r)}s(gct,"ValueType");function kee(t,e,n,r){if(gr(r))return mct(t,e,n,r);if(Cf(r))return hct(t,e,n,r);if(hM(r))return pct(t,e,n,r);if(Xd(r))return gct(t,e,n,r)}s(kee,"Visit");function hIe(t){return Cf(t)||Xd(t)}s(hIe,"IsNonMutableValue");function Act(t,e){return hM(t)&&gr(e)||gr(t)&&hM(e)}s(Act,"IsMismatchedValue");function gIe(t,e){if(hIe(t)||hIe(e))throw new gM("Only object and array types can be mutated at the root level");if(Act(t,e))throw new gM("Cannot assign due type mismatch of assignable values");kee(t,"",t,e)}s(gIe,"Mutate");f();var AM=class extends Ar{static{s(this,"ParseError")}constructor(e){super(e)}},Bee;(function(t){let e=new Map([["Assert",(o,a,l)=>(iM(o,a,l),l)],["Cast",(o,a,l)=>NB(o,a,l)],["Clean",(o,a,l)=>sM(o,a,l)],["Clone",(o,a,l)=>Ki(l)],["Convert",(o,a,l)=>lM(o,a,l)],["Decode",(o,a,l)=>g1(o,a)?G_(o,a,l):l],["Default",(o,a,l)=>cM(o,a,l)],["Encode",(o,a,l)=>g1(o,a)?j_(o,a,l):l]]);function n(o){e.delete(o)}s(n,"Delete"),t.Delete=n;function r(o,a){e.set(o,a)}s(r,"Set"),t.Set=r;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Bee||(Bee={}));var AIe=["Clone","Clean","Default","Convert","Assert","Decode"];function yct(t,e,n,r){return t.reduce((i,o)=>{let a=Bee.Get(o);if(ls(a))throw new AM(`Unable to find Parse operation '${o}'`);return a(e,n,i)},r)}s(yct,"ParseValue");function yIe(...t){let[e,n,r,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?gr(t[0])?[t[0],t[1],[],t[2]]:[AIe,t[0],t[1],t[2]]:t.length===2?[AIe,t[0],[],t[1]]:(()=>{throw new AM("Invalid Arguments")})();return yct(e,n,r,i)}s(yIe,"Parse");f();var Mx={};t1(Mx,{Assert:()=>iM,Cast:()=>NB,Check:()=>pi,Clean:()=>sM,Clone:()=>Ki,Convert:()=>lM,Create:()=>Pf,Decode:()=>sIe,Default:()=>cM,Diff:()=>fIe,Edit:()=>cIe,Encode:()=>mIe,Equal:()=>pI,Errors:()=>eg,Hash:()=>vx,Mutate:()=>gIe,Parse:()=>yIe,Patch:()=>pIe,ValueErrorIterator:()=>bx});f();var Cct={capabilities:{family:"gpt-3.5-turbo",object:"model_capabilities",supports:{streaming:!0},tokenizer:"cl100k_base",type:"completion"},id:"copilot-codex",model_picker_enabled:!0,name:"GPT-3.5 Turbo",object:"model",preview:!1,version:"copilot-codex"},xct="gpt-4o-copilot",Nf=class t{constructor(e,n=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;n&&ea(this._ctx,r=>this.refreshAvailableModels(r))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let n of this.onModelsFetchedCallbacks)n()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return xct}parseModelsResponse(e){try{return Mx.Parse(LEe,e)}catch(n){Wn.exception(this._ctx,n,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let n=await this.fetchModels(e);n&&(this.fetchedModelData=n)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",e.getTokenValue("fcv1")=="1"?Promise.resolve([Cct]):await this.fetch()}async fetch(){let e=await fI(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(Wn.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let r=this.getGenericCompletionModels().find(i=>i.modelId===e);return r?r.tokenizer:"o200k_base"}static filterCompletionModels(e,n){return e.filter(r=>r.capabilities.type==="completion").filter(r=>!n||r.preview===!1||r.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,n){return e.filter(r=>!n||r.preview===!1||r.preview===void 0)}static mapCompletionModels(e){return e.map(n=>({modelId:n.id,label:n.name,preview:!!n.preview,tokenizer:n.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let n=this.getDefaultModelId(),r=FEe(this._ctx);if(r){let l=this.getGenericCompletionModels().map(c=>c.modelId);l.includes(r)||(l.length>0&&Wn.error(this._ctx,`User selected model ${r} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),r=null),n===r&&(r=null)}let i=Nr(this._ctx,mt.DebugOverrideEngine)||Nr(this._ctx,mt.DebugOverrideEngineLegacy);if(i)return new Qx(i,"override");let o=e?this._ctx.get(Nt).customEngine(e):"",a=e?this._ctx.get(Nt).customEngineTargetEngine(e):void 0;return r?o&&a&&r===a?new Qx(o,"exp"):new Qx(r,"modelpicker"):o?new Qx(o,"exp"):this.customModels.length>0?new Qx(this.customModels[0],"custommodel"):new Qx(n,"default")}},Qx=class{constructor(e,n){this.modelId=e;this.modelChoiceSource=n}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Ox(t,e=void 0){let n=t.get(Nf),r=n.getCurrentModelRequestInfo(e),i=n.getTokenizerForModel(r.modelId);return{headers:r.headers,modelId:r.modelId,engineChoiceSource:r.modelChoiceSource,tokenizer:i}}s(Ox,"getEngineRequestInfo");f();f();var go=class{static{s(this,"FileSystem")}};var FIe=Ve(LIe());function MIe(t){return t!==void 0&&t!==0}s(MIe,"isRepoInfo");function QIe(t){if(t===void 0||t===0)return"";let e=b1(t);if(e==="github/github")return e;let n=Vct(t)?.toLowerCase();return n!==void 0?n:""}s(QIe,"getDogFood");function b1(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(b1,"tryGetGitHubNWO");function Vct(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(Vct,"tryGetADONWO");function Ux(t,e){let n=ud(e);return $ct(t,n)}s(Ux,"extractRepoInfoInBackground");var $ct=Jct(zct,1e4);async function zct(t,e){let n=BF(e);if(!n)return;let r=await Yct(t,n);if(!r)return;let i=t.get(go),o=vo(r,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let l=Kct(a)??"",c=Lee(l),u={uri:r};return c===void 0?{baseFolder:u,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:l,...c}}s(zct,"extractRepoInfo");function Lee(t){let e;try{if(e=(0,FIe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Lee,"parseRepoUrl");async function Yct(t,e){let n=e+"_add_to_make_longer",r=t.get(go);for(;e!=="file:///"&&e.length<n.length;){let i=vo(e,".git","config"),o=!1;try{await r.stat(i),o=!0}catch{o=!1}if(o)return e;n=e,e=ud(e)}}s(Yct,"getRepoBaseUri");function Kct(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,n=/^\s*\[remote.([^"\s]+)/,r=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,l=!1;for(let c of t.split(`
`))if(l&&o!==void 0){if(o+=c,c.endsWith("\\"))o=o.substring(0,o.length-1);else if(l=!1,a==="origin")return o}else{let u=c.match(e)??c.match(n);if(u)a=u[1];else if(c.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=c.match(r);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),l=!0;else if(a==="origin")return o}}}}return o}s(Kct,"getRepoUrlFromConfigText");var Nee=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function Jct(t,e){let n=new Jn(e),r=new Set;return(i,...o)=>{let a=JSON.stringify(o),l=n.get(a);if(l)return l.result;if(r.has(a))return 0;let c=t(i,...o);return r.add(a),c.then(u=>{n.set(a,new Nee(u)),r.delete(a)}),0}}s(Jct,"computeInBackgroundAndMemoize");f();f();f();f();var Xct={tokenizerName:"o200k_base"};function Zct(t){return{...Xct,...t}}s(Zct,"cursorContextOptions");function QB(t,e={}){let n=Zct(e),r=Bo(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let i=t.source.slice(0,t.offset);return n.maxLineCount!==void 0&&(i=i.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(i=r.takeLastLinesTokens(i,n.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:r.tokenLength(i),tokenizerName:n.tokenizerName}}s(QB,"getCursorContext");f();f();var eut={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function OIe(t){let e=eut[t.semantics],n=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${n} ${e} from ${t.relativePath}:`:`Compare ${n} ${e}:`,snippet:t.snippet}}s(OIe,"announceSnippet");var Fee=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,n){if(this.cache[e]=n,this.keys.length>this.size){this.keys.push(e);let r=this.keys.shift()??"";delete this.cache[r]}}get(e){return this.cache[e]}};var Mee=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=iut.get(e.languageId)??rut}tokenize(e){return new Set(tut(e).filter(n=>!this.stopsForLanguage.has(n)))}},UIe=new Fee(20),CS=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Mee(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,n="descending"){return n=="ascending"?e.sort((r,i)=>r.score>i.score?1:-1):n=="descending"?e.sort((r,i)=>r.score>i.score?-1:1):e}async retrieveAllSnippets(e,n="descending"){let r=[];if(e.source.length===0||(await this.referenceTokens).size===0)return r;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=UIe.get(o)??[],l=a.length==0,c=l?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(l){let g=new Set;c.slice(d,p).forEach(y=>y.forEach(v=>g.add(v),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(r.length&&d>0&&r[r.length-1].endLine>d){r[r.length-1].score<h&&(r[r.length-1].score=h,r[r.length-1].startLine=d,r[r.length-1].endLine=p);continue}r.push({score:h,startLine:d,endLine:p})}return l&&UIe.put(o,a),this.sortScoredSnippets(r,n)}findMatches(e,n){return this.findBestMatch(e,n)}async findBestMatch(e,n){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let r=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<n;a++)if(i[a].score!==0){let l=r.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:l,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function tut(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(tut,"splitIntoWords");var nut=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),rut=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...nut]),iut=new Map([]);f();f();f();function Qee(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}s(Qee,"virtualNode");function qIe(t,e,n,r,i){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:i}}s(qIe,"lineNode");function Oee(t){return{type:"blank",lineNumber:t,subs:[]}}s(Oee,"blankNode");function yM(t){return{type:"top",indentation:-1,subs:t??[]}}s(yM,"topNode");function uc(t){return t.type==="blank"}s(uc,"isBlank");function hI(t){return t.type==="line"}s(hI,"isLine");function gI(t){return t.type==="virtual"}s(gI,"isVirtual");function WIe(t,e){return Uc(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}s(WIe,"clearLabelsIf");function AI(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>AI(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>AI(n,e)),label:t.label?e(t.label):void 0}}}s(AI,"mapLabels");function Uc(t,e,n){function r(i){n==="topDown"&&e(i),i.subs.forEach(o=>{r(o)}),n==="bottomUp"&&e(i)}s(r,"_visit"),r(t)}s(Uc,"visitTree");function Uee(t,e,n,r){let i=e;function o(a){i=n(a,i)}return s(o,"visitor"),Uc(t,o,r),i}s(Uee,"foldTree");function CM(t,e,n){let r=s(o=>{if(n!==void 0&&n(o))return o;{let a=o.subs.map(r).filter(l=>l!==void 0);return o.subs=a,e(o)}},"rebuild"),i=r(t);return i!==void 0?i:yM()}s(CM,"rebuildTree");f();function aut(t){let e=t.split(`
`),n=e.map(u=>u.match(/^\s*/)[0].length),r=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,n[u]);return[qIe(n[u],u,r[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<r.length&&(r[h]===""||n[h]>d);)if(r[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(Oee(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,l]=o(0,-1),c=l;for(;c<r.length&&r[c]==="";)a.push(Oee(c)),c+=1;if(c<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${c} out of ${r.length}`);return yM(a)}s(aut,"parseRaw");function OB(t,e){function n(r){if(hI(r)){let i=e.find(o=>o.matches(r.sourceLine));i&&(r.label=i.label)}}s(n,"visitor"),Uc(t,n,"bottomUp")}s(OB,"labelLines");function xM(t){function e(n){if(gI(n)&&n.label===void 0){let r=n.subs.filter(i=>!uc(i));r.length===1&&(n.label=r[0].label)}}s(e,"visitor"),Uc(t,e,"bottomUp")}s(xM,"labelVirtualInherited");function UB(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=s(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}s(UB,"buildLabelRules");function qee(t){let n=CM(t,s(function(r){if(r.subs.length===0||r.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return r;let i=[],o;for(let a=0;a<r.subs.length;a++){let l=r.subs[a],c=r.subs[a-1];if(l.label==="opener"&&c!==void 0&&hI(c))c.subs.push(l),l.subs.forEach(u=>c.subs.push(u)),l.subs=[];else if(l.label==="closer"&&o!==void 0&&(hI(l)||gI(l))&&l.indentation>=o.indentation){let u=i.length-1;for(;u>0&&uc(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),l.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[Qee(l.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,l]}else o.subs.push(l)}else i.push(l),uc(l)||(o=l)}return r.subs=i,r},"rebuilder"));return WIe(t,r=>r==="newVirtual"),n}s(qee,"combineClosersAndOpeners");function GIe(t,e=uc,n){return CM(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],l,c=!1;function u(d=!1){if(l!==void 0&&(o.length>0||!d)){let p=Qee(l,a,n);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&c&&(u(),a=[]),c=m,a.push(p),uc(p)||(l=l??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(GIe,"groupBlocks");function yI(t){return CM(t,s(function(n){return gI(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&gI(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}s(yI,"flattenVirtual");var lut={opener:/^[[({]/,closer:/^[\])}]/},cut=UB(lut),HIe={};function Wee(t,e){HIe[t]=e}s(Wee,"registerLanguageSpecificParser");function qB(t,e){let n=aut(t),r=HIe[e??""];return r?r(n):(OB(n,cut),qee(n))}s(qB,"parseTree");function vM(t,e){let n=[],r=e.length;if(r==0)return[];if(r<t)return[[0,r]];for(let i=0;i<r-t+1;i++)n.push([i,i+t]);return n}s(vM,"getBasicWindowDelineations");var bM=class t extends CS{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return vM(this.windowLength,e)}_getCursorContextInfo(e){return QB(e,{maxLineCount:this.windowLength})}similarityScore(e,n){return uut(e,n)}};function uut(t,e){let n=new Set;return t.forEach(r=>{e.has(r)&&n.add(r)}),n.size/(t.size+e.size-n.size)}s(uut,"computeScore");f();f();var EM=Ve(jIe());var Hee={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function d0(t){return t in Hee&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(d0,"isSupportedLanguageId");function IM(t){if(!(t in Hee))throw new Error(`Unrecognized language: ${t}`);return Hee[t]}s(IM,"languageIdToWasmLanguage");var Gee=new Map;async function dut(t){let e;try{e=await YF(`tree-sitter-${t}.wasm`)}catch(n){throw n instanceof Error&&"code"in n&&typeof n.code=="string"&&n.name==="Error"?new AS(`Could not load tree-sitter-${t}.wasm`,n):n}return EM.default.Language.load(e)}s(dut,"loadWasmLanguage");function fut(t){let e=IM(t);if(!Gee.has(e)){let n=dut(e);Gee.set(e,n)}return Gee.get(e)}s(fut,"getLanguage");var jee=class extends Error{static{s(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};async function E1(t,e){await EM.default.init({locateFile:s(o=>hee(o),"locateFile")});let n;try{n=new EM.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new jee(`Could not init Parse for language <${t}>`,o):o}let r=await fut(t);n.setLanguage(r);let i=n.parse(e);return n.delete(),i}s(E1,"parseTreeSitter");function VIe(t){switch(IM(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(VIe,"getBlockCloseToken");function put(t,e){let n=[];for(let r of t){if(!r[1]){let i=e.tree.getLanguage();r[1]=i.query(r[0])}n.push(...r[1].matches(e))}return n}s(put,"innerQuery");var mut=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function $Ie(t){return put([mut],t).length==1}s($Ie,"queryPythonIsDocstring");var TM=class t extends CS{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return vM(this.windowLength,e)}_getCursorContextInfo(e){return QB(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,n=this.referenceDoc.offset,r=e?this.referenceDoc.source.slice(e,n):QB(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(r)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,n){return hut(e,n)}async getEnclosingMemberStart(e,n){let r;try{r=await E1(this.referenceDoc.languageId,e);let i=r.rootNode.namedDescendantForIndex(n);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{r?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function hut(t,e){let n=new Set;return e.forEach(r=>{t.has(r)&&n.add(r)}),n.size}s(hut,"computeScore");var gut=0,Aut=60,yut=4,Cut=1,xut=20,vut=1e4,WB={snippetLength:Aut,threshold:gut,maxTopSnippets:yut,maxCharPerFile:vut,maxNumberOfFiles:xut,maxSnippetsPerFile:Cut,useSubsetMatching:!1};var wM={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function but(t,e){return(e.useSubsetMatching?TM.FACTORY(e.snippetLength):bM.FACTORY(e.snippetLength)).to(t)}s(but,"getMatcher");async function zIe(t,e,n){let r=but(t,n);return n.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<n.maxCharPerFile&&o.source.length>0).slice(0,n.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await r.findMatches(a,n.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>n.threshold).sort((o,a)=>o.score-a.score).slice(-n.maxTopSnippets)}s(zIe,"getSimilarSnippets");var GB=500,HB=8192-GB,YIe=4;var _M=10,SM=15;var Eut={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function jB(t){return t=t.toLowerCase(),Eut[t]??t}s(jB,"normalizeLanguageId");var Vee=class{constructor(e){this.ctx=e;this.cache=new Jn(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,n){let r=e.stringify()+`
`+JSON.stringify(n),i=this.cache.get(r);return i||(i=new $ee(()=>this.ctx.get(fm).fetchExperiments(this.ctx,n,e.toHeaders()),1e3*60*60),this.cache.set(r,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},$ee=class{constructor(e,n=1/0){this.producer=e;this.expirationMs=n}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function Tut(t){return"uri"in t}s(Tut,"isCompletionsFiltersInfo");var Nt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Vee(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,n){this.dynamicFilters[e]=n}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let n of this.dynamicFilterGroups)Object.assign(e,n());for(let[n,r]of Object.entries(this.dynamicFilters))e[n]=r();return e}registerUpcomingDynamicFilter(e,n){this.upcomingDynamicFilters[e]=n}async updateExPValuesAndAssignments(e,n=or.createAndMarkAsIssued(),r=void 0){if(n instanceof ig)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&Tut(e)?Ux(this.ctx,e.uri):void 0,o=b1(i)??"",a=QIe(i)??"",l=e?.languageId??"",c=Ox(this.ctx).modelId;r??=await this.ctx.get(Mn).getToken();let u=uEe(r),d=r.getTokenValue("ft")??"",p=r.getTokenValue("ol")??"",m=r.getTokenValue("cml")??"",h=r.getTokenValue("tid")??"",g=r.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":l,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":c,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),E=v.extendFilters(b),_=await this.getExpConfig(E.newFilterSettings,g);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),D=k.newFilterSettings,N=await this.getExpConfig(D,g),Q=new Promise(Z=>setTimeout(Z,t.upcomingDynamicFilterCheckDelayMs));for(let Z of k.otherFilterSettingsToPrefetch)Q=Q.then(async()=>{await new Promise(me=>setTimeout(me,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(Z,g)});return this.prepareForUpcomingFilters(D,g),new ig(n.properties,n.measurements,n.issuedTime,{filters:D,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Rs).machineId;this.granularityDirectory=new GF(e,this.ctx.get(sg))}return this.granularityDirectory}makeFilterSettings(e){return new HE({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,n){try{return this.assignments.fetchExpConfig(e,n)}catch(r){return hf.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(r)}`)}}async prepareForUpcomingFilters(e,n){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[r,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,i()),n)}stringify(){let e=this.assignments.getCachedExpConfig(new HE({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),n=DF(this.ctx),r=await this.getExpConfig(e,n);return{filters:e,exp:r}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??SM}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??_M}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let n=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return n?n.split(",").map(r=>r.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??HB+GB}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}ideEnableCopilotNewBilling(e){return e.filtersAndExp.exp.variables.ideenablecopilotnewbilling??!1}recentEditsInPrompt(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinprompt??!1}recentEditsEditCount(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditcount??5}recentEditsMaxFiles(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxfiles??5}recentEditsContextLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditscontextlines??3}recentEditsEditMergeLineDistance(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditmergelinedistance??3}recentEditsRemoveDeletedLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditsremovedeletedlines??!1}recentEditsInsertionsBeforeDeletions(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinsertionsbeforedeletions??!1}recentEditsAppendNoReplyMarker(e){return e.filtersAndExp.exp.variables.copilotrecenteditsappendnoreplymarker??!1}recentEditsMaxLinesBetweenEdits(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesbetweenedits??100}recentEditsActiveDocDistanceLimitFromCursor(e){return e.filtersAndExp.exp.variables.copilotrecenteditsactivedocdistancelimitfromcursor??100}recentEditsMaxLinesPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesperedit??10}recentEditsMaxCharsPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxcharsperedit??2e3}recentEditsSummarizationFormat(e){return e.filtersAndExp.exp.variables.copilotrecenteditsummarizationformat??"diff"}recentEditsDebounceTimeout(e){return e.filtersAndExp.exp.variables.copilotrecenteditsdebouncetimeout??500}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}triggerCompletionAfterAccept(e){return e.filtersAndExp.exp.variables.copilottriggercompletionafteraccept}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}vscodeDebounceThreshold(e){return e.filtersAndExp.exp.variables.copilotvscodedebouncethreshold}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??100}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}enableMultilineAfterAccept(e){return e.filtersAndExp.exp.variables.copilotmultilineafteraccept??!1}completionsElisionStrategy(e){switch(e.filtersAndExp.exp.variables.copilotcompletionselisionstrategy??""){case"elidableText":return"elidableText";case"elidableTextWithoutChunks":return"elidableTextWithoutChunks";default:return"wishlist"}}approximateElision(e){return e.filtersAndExp.exp.variables.copilotapproximateelision??!1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}};f();var cg=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let n;return this.children.find(r=>(n=r.statementAt(e),n!==void 0)),n??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",n=""){let r=[`${e}${this.description}`];return this.children.forEach(i=>{r.push(i.dump(`${n}+- `,i.nextSibling===void 0?`${n}   `:`${n}|  `))}),r.join(`
`)}dumpPath(e="",n="",r=!1){if(this.parent){let i=this.parent.dumpPath(e,n,!0),o=i.length-i.lastIndexOf(`
`)-1-n.length,a=" ".repeat(o),l=r?`
${n}${a}+- `:"";return i+this.description+l}else{let i=r?`
${n}+- `:"";return e+this.description+i}}},qc=class{constructor(e,n,r,i){this.languageId=e;this.text=n;this.startOffset=r;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return VB.languageIds.has(e)||$B.languageIds.has(e)||zB.languageIds.has(e)||YB.languageIds.has(e)||KB.languageIds.has(e)||JB.languageIds.has(e)||XB.languageIds.has(e)||ZB.languageIds.has(e)}static create(e,n,r,i){if(VB.languageIds.has(e))return new VB(e,n,r,i);if($B.languageIds.has(e))return new $B(e,n,r,i);if(zB.languageIds.has(e))return new zB(e,n,r,i);if(JB.languageIds.has(e))return new JB(e,n,r,i);if(YB.languageIds.has(e))return new YB(e,n,r,i);if(KB.languageIds.has(e))return new KB(e,n,r,i);if(XB.languageIds.has(e))return new XB(e,n,r,i);if(ZB.languageIds.has(e))return new ZB(e,n,r,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let n;return this.statements.find(r=>(n=r.statementAt(e),n!==void 0)),n}async build(){let e=[];this.clear();let n=await this.parse();this.getStatementQuery(n).captures(n.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await E1(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,n){return e.query(n)}offsetToPosition(e){let n=this.text.slice(0,e).split(`
`),r=n.length-1,i=n[n.length-1].length;return{row:r,column:i}}dump(e=""){let n=[];return this.statements.forEach((r,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);n.push(r.dump(`${e} ${o} `,`${e} ${a} `))}),n.join(`
`)}},zee=class t extends cg{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},VB=class extends qc{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new zee(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Yee=class t extends cg{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},$B=class extends qc{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Yee(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},Kee=class t extends cg{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},zB=class extends qc{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new Kee(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Jee=class t extends cg{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},YB=class extends qc{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Jee(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Xee=class t extends cg{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},KB=class extends qc{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Xee(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},Zee=class t extends cg{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},JB=class extends qc{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new Zee(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},ete=class t extends cg{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},XB=class extends qc{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new ete(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},tte=class t extends cg{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},ZB=class extends qc{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new tte(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var nte={};t1(nte,{activationEvents:()=>jut,badges:()=>Hut,browser:()=>Vut,bugs:()=>Fut,build:()=>kut,buildType:()=>But,categories:()=>Wut,contributes:()=>rte,default:()=>Zut,dependencies:()=>Jut,description:()=>Sut,devDependencies:()=>Kut,displayName:()=>_ut,enabledApiProposals:()=>zut,engines:()=>qut,extensionPack:()=>Uut,homepage:()=>Nut,icon:()=>Qut,keywords:()=>Gut,license:()=>Lut,main:()=>$ut,name:()=>wut,overrides:()=>Xut,preview:()=>Put,pricing:()=>Out,publisher:()=>Dut,qna:()=>Mut,scripts:()=>Yut,version:()=>Rut});var wut="copilot",_ut="GitHub Copilot",Sut="Your AI pair programmer",Rut="1.329.0",kut="1606",But="prod",Dut="GitHub",Put=!1,Nut="https://github.com/features/copilot?editor=vscode",Lut="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",Fut={url:"https://github.com/microsoft/vscode-copilot-release/issues"},Mut="https://github.com/github-community/community/discussions/categories/copilot",Qut="assets/Copilot-App-Icon.png",Out="Trial",Uut=["GitHub.copilot-chat","GitHub.copilot"],qut={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},Wut=["AI","Chat","Programming Languages","Machine Learning"],Gut=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],Hut=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],jut=["onStartupFinished"],Vut="./dist/web",$ut="./dist/extension",zut=["inlineCompletionsAdditions"],rte={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completion Model"__ command or open the model picker from the Copilot menu. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers)"},"github.copilot.inlineSuggest.enable":{type:"boolean",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Show inline suggestions"},"github.copilot.editor.enableAutoCompletions":{type:"boolean",scope:"language-overridable",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Automatically show inline completions"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},Yut={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},Kut={"@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},Jut={"@adobe/helix-fetch":"github:devm33/helix-fetch#1088e599270f36632703f138d88c2100cbe468db","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},Xut={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},Zut={name:wut,displayName:_ut,description:Sut,version:Rut,build:kut,buildType:But,publisher:Dut,preview:Put,homepage:Nut,license:Lut,bugs:Fut,qna:Mut,icon:Qut,pricing:Out,extensionPack:Uut,engines:qut,categories:Wut,keywords:Gut,badges:Hut,activationEvents:jut,browser:Vut,main:$ut,enabledApiProposals:zut,contributes:rte,scripts:Yut,devDependencies:Kut,dependencies:Jut,overrides:Xut};var mt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",UseAsyncCompletions:"internal.useAsyncCompletions",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",VSCodeDebounceThreshold:"internal.vscodeDebounceThreshold",RecentEditsInPrompt:"internal.recentEditsInPrompt",RecentEditsEditCount:"internal.recentEditsEditCount",RecentEditsMaxFiles:"internal.recentEditsMaxFiles",RecentEditsContextLines:"internal.recentEditsContextLines",RecentEditsEditMergeLineDistance:"internal.recentEditsEditMergeLineDistance",RecentEditsRemoveDeletedLines:"internal.recentEditsRemoveDeletedLines",InsertionsBeforeDeletions:"internal.recentEditsInsertionsBeforeDeletions",RecentEditsAppendNoReplyMarker:"internal.recentEditsAppendNoReplyMarker",RecentEditsMaxLinesBetweenEdits:"internal.recentEditsMaxLinesBetweenEdits",RecentEditsActiveDocDistanceLimitFromCursor:"internal.recentEditsActiveDocDistanceLimitFromCursor",RecentEditsSummarizationFormat:"internal.recentEditsSummarizationFormat",RecentEditsMaxLinesPerEdit:"internal.recentEditsMaxLinesPerEdit",RecentEditsMaxCharsPerEdit:"internal.recentEditsMaxCharsPerEdit",RecentEditsDebounceTimeout:"internal.recentEditsDebounceTimeout",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",MultilineAfterAccept:"internal.multilineAfterAccept",NESXTab:"internal.useXTab"};function XIe(t){return["server","parsingandserver"].includes(t)}s(XIe,"shouldDoServerTrimming");var gm=class{static{s(this,"BlockModeConfig")}},vS=class extends gm{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,n,r){let i=e.get(Nt).overrideBlockMode(r);if(i)return KIe(i,n);let o=e.get(Nt).enableProgressiveReveal(r);return Nr(e,mt.AlwaysRequestMultiline)??o?KIe("moremultiline",n):n=="ruby"?"parsing":d0(n)?"parsingandserver":"server"}};function edt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(edt,"blockModeRequiresTreeSitter");function KIe(t,e){return t==="moremultiline"&&qc.isSupported(e)?t:edt(t)&&!d0(e)?"server":t}s(KIe,"toApplicableBlockMode");var ug=class{static{s(this,"ConfigProvider")}},bS=class extends ug{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return ndt(e)}getOptionalConfig(e){return rdt(e)}dumpForTelemetry(){return{}}},CI=class extends ug{constructor(n,r){super();this.baseConfigProvider=n;this.overrides=r}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(n){return this.overrides.get(n)}getConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getConfig(n)}getOptionalConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getOptionalConfig(n)}setConfig(n,r){r!==void 0?this.overrides.set(n,r):this.overrides.delete(n)}dumpForTelemetry(){let n=this.baseConfigProvider.dumpForTelemetry();for(let r of[mt.ShowEditorCompletions,mt.EnableAutoCompletions,mt.DelayCompletions,mt.FilterCompletions]){let i=this.overrides.get(r);i!==void 0&&(n[r]=JSON.stringify(i))}return n}};function tdt(t){return t?.type==="object"&&"properties"in t}s(tdt,"isContributesObject");function ZIe(t,e){let n=t,r=[];for(let i of e.split(".")){let o=[...r,i].join(".");n&&typeof n=="object"&&o in n?(n=n[o],r.length=0):r.push(i)}if(!(n===void 0||r.length>0))return n}s(ZIe,"getConfigKeyRecursively");function ndt(t){if(xS.has(t))return xS.get(t);throw new Error(`Missing config default value: ${jk}.${t}`)}s(ndt,"getConfigDefaultForKey");function rdt(t){return xS.get(t)}s(rdt,"getOptionalConfigDefaultForKey");var xS=new Map([[mt.DebugOverrideCppHeadersEnableSwitch,!1],[mt.RelatedFilesVSCodeCSharp,!1],[mt.RelatedFilesVSCodeTypeScript,!1],[mt.RelatedFilesVSCode,!1],[mt.IncludeNeighboringFiles,!1],[mt.ExcludeRelatedFiles,!1],[mt.ContextProviders,[]],[mt.DebugUseEditorFetcher,null],[mt.DebugUseElectronFetcher,null],[mt.DebugOverrideLogLevels,{}],[mt.DebugSnippyOverrideUrl,""],[mt.FetchStrategy,"auto"],[mt.UseSubsetMatching,null],[mt.ContextProviderTimeBudget,void 0],[mt.DebugOverrideCapiUrl,""],[mt.DebugTestOverrideCapiUrl,""],[mt.DebugOverrideProxyUrl,""],[mt.DebugTestOverrideProxyUrl,""],[mt.DebugOverrideEngine,""],[mt.UseAsyncCompletions,void 0],[mt.EnableSpeculativeRequests,void 0],[mt.AlwaysRequestMultiline,void 0],[mt.ModelAlwaysTerminatesSingleline,void 0],[mt.TrimCompletionsAggressively,void 0],[mt.VSCodeDebounceThreshold,void 0],[mt.RecentEditsInPrompt,void 0],[mt.RecentEditsEditCount,void 0],[mt.RecentEditsMaxFiles,void 0],[mt.RecentEditsContextLines,void 0],[mt.RecentEditsEditMergeLineDistance,void 0],[mt.RecentEditsRemoveDeletedLines,void 0],[mt.InsertionsBeforeDeletions,void 0],[mt.RecentEditsAppendNoReplyMarker,void 0],[mt.RecentEditsMaxLinesBetweenEdits,void 0],[mt.RecentEditsActiveDocDistanceLimitFromCursor,void 0],[mt.RecentEditsSummarizationFormat,void 0],[mt.RecentEditsMaxLinesPerEdit,void 0],[mt.RecentEditsMaxCharsPerEdit,void 0],[mt.RecentEditsDebounceTimeout,void 0],[mt.MultilineAfterAccept,void 0],[mt.NESXTab,void 0],[mt.UseWorkspaceContextCoordinator,void 0],[mt.ShowEditorCompletions,void 0],[mt.DelayCompletions,void 0],[mt.FilterCompletions,void 0]]);for(let t of Object.values(mt)){let e=rte.configuration[0],n=[],r=`${jk}.${t}`.split(".");for(;r.length>0;){n.push(r.shift());let i=e.properties[n.join(".")];if(tdt(i))n.length=0,e=i;else if(r.length==0&&i?.default!==void 0){if(xS.has(t))throw new Error(`Duplicate config default value ${jk}.${t}`);xS.set(t,i.default)}}if(!xS.has(t))throw new Error(`Missing config default value ${jk}.${t}`)}function Nr(t,e){return t.get(ug).getConfig(e)}s(Nr,"getConfig");function Wbe(t){return t.get(ug).dumpForTelemetry()}s(Wbe,"dumpForTelemetry");var co=class{constructor(){this.packageJson=nte}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function PF(t){return t.get(co).isProduction()}s(PF,"isProduction");function REe(t){return t.get(co).getBuildType()==="dev"}s(REe,"isDevBuild");function Rf(t){return t.get(co).getBuildType()}s(Rf,"getBuildType");function Gbe(t){return t.get(co).getBuild()}s(Gbe,"getBuild");function lI(t){return t.get(co).getVersion()}s(lI,"getVersion");var Rs=class{constructor(e,n,r="none",i="desktop"){this.sessionId=e;this.machineId=n;this.remoteName=r;this.uiKind=i}static{s(this,"EditorSession")}};function $h({name:t,version:e}){return`${t}/${e}`}s($h,"formatNameAndVersion");var ur=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},Af="2025-05-01";function Kd(t){let e=t.get(ur);return{"Editor-Version":$h(e.getEditorInfo()),"Editor-Plugin-Version":$h(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":lI(t)}}s(Kd,"editorVersionHeaders");var JIe="Iv1.b507a08c87ecfe98",Ia=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??JIe}fallbackAppId(){return JIe}};f();f();f();var xI={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var e2e=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],t2e={".php":[".blade"]},e8=Object.keys(xI).flatMap(t=>xI[t].extensions);var ite=Ve(require("node:path"));var IS=class{constructor(e,n,r){this.languageId=e;this.isGuess=n;this.fileExtension=r}static{s(this,"Language")}},t8=class{static{s(this,"LanguageDetection")}},ote=new Map,ES=new Map;for(let[t,{extensions:e,filenames:n}]of Object.entries(xI)){for(let r of e)ote.set(r,[...ote.get(r)??[],t]);for(let r of n??[])ES.set(r,[...ES.get(r)??[],t])}var ste=class extends t8{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let n=Ti(e.uri),r=ite.extname(n).toLowerCase(),i=this.extensionWithoutTemplateLanguage(n,r),o=this.detectLanguageId(n,i),a=this.computeFullyQualifiedExtension(r,i);return o?new IS(o.languageId,o.isGuess,a):new IS(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,n){if(e2e.includes(n)){let r=e.substring(0,e.lastIndexOf(".")),i=ite.extname(r).toLowerCase();if(i.length>0&&e8.includes(i)&&this.isExtensionValidForTemplateLanguage(n,i))return i}return n}isExtensionValidForTemplateLanguage(e,n){let r=t2e[e];return!r||r.includes(n)}detectLanguageId(e,n){if(ES.has(e))return{languageId:ES.get(e)[0],isGuess:!1};let r=ote.get(n)??[];if(r.length>0)return{languageId:r[0],isGuess:r.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),ES.has(e))return{languageId:ES.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,n){return e!==n?n+e:e}},ate=class extends t8{constructor(n){super();this.delegate=n}static{s(this,"GroupingLanguageDetection")}detectLanguage(n){let r=this.delegate.detectLanguage(n),i=r.languageId;return i==="c"||i==="cpp"?new IS("cpp",r.isGuess,r.fileExtension):r}},lte=class extends t8{constructor(n){super();this.delegate=n}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new IS(n.languageId,!0,""):this.delegate.detectLanguage(n)}},idt=new ate(new lte(new ste));function qx({uri:t,languageId:e}){let n=idt.detectLanguage({uri:t,languageId:"UNKNOWN"});return n.languageId==="UNKNOWN"?e:n.languageId}s(qx,"detectLanguage");f();f();f();f();function I1(t){if(t.isCancellationRequested)throw new RM}s(I1,"throwIfCancellationRequested");function BM(t){return t instanceof RM?!0:t instanceof Error&&t.name===cte&&t.message===cte}s(BM,"isCancellationError");var RM=class extends Error{static{s(this,"CancellationError")}constructor(){super(cte),this.name=this.message}},cte="Canceled",kM=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function vI(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(vI,"isTypeDefinition");var md=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,n){this.start=e,this.length=n}static fromBounds(e,n){return new t(e,n-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,n){let r=[],i=this.start;for(i=r2e(e,e.length,i),n2e(r,n);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?r.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(r.push(`
`),i=r2e(e,e.length,++i),n2e(r,n)):i++;return r.join("")}};function n2e(t,e){for(let n=0;n<e;n++)t.push(" ")}s(n2e,"appendIndent");function r2e(t,e,n){for(;n<e&&(t[n]===" "||t[n]==="	");)n++;return n}s(r2e,"consumeIndent");var Wx=class{constructor(e,n,r,i,o,a,l,c,u){this.fileName=e;this.fullyQualifiedName=n;this.unqualifiedName=r;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=l;this.kind=c;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},dc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,n){let r=await E1(this.languageId,e),i=r.getLanguage(),a=this.getOrCreateQuery(i,n).matches(r.rootNode);return{tree:r,matches:a}}async executeQuery(e,n,r){let i;try{i=await this.findMatches(n,r);let o=new kM,a=[];for(let l of i.matches){let c=this.createSymbolRange(o,e,n,l.captures);c&&a.push(c)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,n){let r=this.queriesCache.get(n);return r||(r=e.query(n),this.queriesCache.set(n,r)),r}createSymbolRange(e,n,r,i){let o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let b=0;b<i.length;b++){let E=i[b].name;E==="name"?(u=i[b].node.startIndex,d=i[b].node.endIndex):E==="reference"?(u=i[b].node.startIndex,d=i[b].node.endIndex,l=i[b].node.startIndex,c=i[b].node.endIndex,h=E):E==="body"?(p=i[b].node.startIndex,m=i[b].node.endIndex):E==="comment"?(o=o===0?i[b].node.startIndex:Math.min(o,i[b].node.startIndex),a=Math.max(a,i[b].node.endIndex)):E==="receiver"?g=md.fromBounds(i[b].node.startIndex,i[b].node.endIndex).getText(r):(l=i[b].node.startIndex,c=i[b].node.endIndex,h=E)}h==="definition.module.filescoped"&&(m=r.length,c=m);let y=md.fromBounds(l,c),v=l>0||c>0||u>0||d>0?new Wx(n,"","",md.fromBounds(o,a),md.fromBounds(u,d),md.fromBounds(p,m),y,t.kindFromString(h),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(r),E=this.createNameFromScopes(r,e.toArray());return E=g?`${g}.${E}`:E,new Wx(n,E,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,n){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(n.extentRange);)e.pop();e.push(n)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var DM=class extends dc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,n){return this.executeQuery(e,n,odt)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},PM=class extends dc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,sdt)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,adt),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var odt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`;var sdt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,adt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var NM=class extends dc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,n){return this.executeQuery(e,n,ldt)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},LM=class extends dc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,cdt)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,udt),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var ldt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`;var cdt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,udt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var ddt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),FM=class extends dc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,n){return this.executeQuery(e,n,fdt)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},MM=class extends dc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,pdt)).filter(i=>!ddt.has(i.unqualifiedName))}},fdt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,pdt=`
(call_expression function: (_) @name) @reference
`;f();var mdt=new Set(["int","str","float","bool","list","dict","tuple","set"]),QM=class extends dc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,n){return this.executeQuery(e,n,hdt)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},OM=class extends dc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,gdt)).filter(i=>!mdt.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,Adt),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var hdt=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,gdt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;var Adt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var ydt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),TS=class extends dc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,n){return this.executeQuery(e,n,Cdt)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},wS=class extends dc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,xdt)).filter(i=>!ydt.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}},Cdt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,xdt=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var vdt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),UM=class extends TS{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,n){return Promise.all([this.executeQuery(e,n,bdt),super.extractSymbols(e,n)]).then(([r,i])=>[...r,...i])}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},qM=class extends wS{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){let[r,i]=await Promise.all([this.executeQuery(e,n,Edt),super.extractReferences(e,n)]);return[...r.filter(o=>!vdt.has(o.unqualifiedName)),...i]}},bdt=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,Edt=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var WM=[{symbolExtractor:new NM,referenceExtractor:new LM,languageId:"java"},{symbolExtractor:new DM,referenceExtractor:new PM,languageId:"go"},{symbolExtractor:new QM,referenceExtractor:new OM,languageId:"python"},{symbolExtractor:new TS,referenceExtractor:new wS,languageId:"typescript"},{symbolExtractor:new UM,referenceExtractor:new qM,languageId:"typescriptreact"},{symbolExtractor:new FM,referenceExtractor:new MM,languageId:"javascript"}];function o2e(t){let e=qx({uri:t});if(e&&WM.some(n=>e===n.languageId))return e}s(o2e,"getSupportedLanguageIdForMultiLanguageProvider");var s2e=WM.map(t=>t.referenceExtractor),GM=WM.map(t=>t.symbolExtractor),ute=WM.map(t=>xI[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();var Idt={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},Tdt=UB(Idt);function a2e(t){let e=t;return OB(e,Tdt),e=qee(e),e=yI(e),xM(e),Uc(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!uc(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}s(a2e,"processJava");f();var wdt={heading:/^# /,subheading:/^## /,subsubheading:/### /},_dt=UB(wdt);function l2e(t){let e=t;if(OB(e,_dt),uc(e))return e;function n(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(n,"headingLevel");let r=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=n(o);if(a===void 0||uc(o))r[r.length-1].subs.push(o);else{for(;r.length<a;)r.push(r[r.length-1]);for(r[a-1].subs.push(o),r[a]=o;r.length>a+1;)r.pop()}}return e=GIe(e),e=yI(e),xM(e),e}s(l2e,"processMarkdown");f();function c2e(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(c2e,"deparseLine");Wee("markdown",l2e);Wee("java",a2e);var Sdt={worthUp:.9,worthSibling:.88,worthDown:.8};function dte(t,e,n=Bo(),r=Sdt){let i=AI(t,o=>o?1:void 0);return Uc(i,o=>{if(uc(o))return;let a=o.subs.reduce((l,c)=>Math.max(l,c.label??0),0);o.label=Math.max(o.label??0,a*r.worthUp)},"bottomUp"),Uc(i,o=>{if(uc(o))return;let a=o.subs.map(u=>u.label??0),l=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(l=l.map((d,p)=>Math.max(d,Math.pow(r.worthSibling,Math.abs(u-p))*a[u])));let c=o.label;c!==void 0&&(l=l.map(u=>Math.max(u,r.worthDown*c))),o.subs.forEach((u,d)=>u.label=l[d])},"topDown"),Rdt(i,e,n)}s(dte,"fromTreeWithFocussedLines");function Rdt(t,e,n=Bo()){let r=Uee(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[c2e(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Bt(r,e,n)}s(Rdt,"fromTreeWithValuedLines");function bu(t,e=!0,n=!0,r,i=Bo()){let o=typeof t=="string"?qB(t):qB(t.source,t.languageId);yI(o);let a=AI(o,l=>e&&l!=="closer");return Uc(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Uc(a,l=>{if(l.label){let c=!1;for(let u of[...l.subs].reverse())u.label&&!c?c=!0:u.label=!1}else for(let c of l.subs)c.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),n&&Uc(a,l=>{l.label||=(hI(l)||uc(l))&&l.lineNumber==0},"topDown"),dte(a,r,i)}s(bu,"elidableTextForSourceCode");f();var n8=class t{constructor(e,n,r,i="strict",o){this.text=e;this._value=n;this._cost=r;this.metadata=o;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=n=>Bo().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){return new t(this.text,this.value,this.cost,"none",this.metadata)}};var HM="elidableTextChunk",Bt=class t{constructor(e,n,r=Bo()){this.metadata=n;this.tokenizer=r;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,l=Array.isArray(o)?o[0]:o;typeof l=="string"?l.split(`
`).forEach(c=>i.push(new n8(c,a,r.tokenLength(c+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(c=>i.push(c.copy().adjustValue(a))):"source"in l&&"languageId"in l&&bu(l).lines.forEach(c=>i.push(c.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>Bo().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}elide(e,n="[...]",r=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){let l=this.lines.map(c=>c.copy());return kdt(l,e,n,r,i,o,a)}};function kdt(t,e,n,r,i,o,a){if(o.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let l=0,c=0,u=0;for(let v of t)l+=v.cost,c=Math.max(c,v.value),u=Math.max(u,v.text.length),i==="removeLeastBangForBuck"&&v.adjustValue(1/v.cost);let d=c+1,p=u+1,m=n.trim(),h=s(v=>v?.text.match(/^\s*/)?.[0].length??0,"getIndentation"),g=s(v=>v?.text.trim()===m,"isEllipsis"),y=t.length+1;for(;l>e&&y-- >0;){let v=-1,b=1/0;for(let Q=0;Q<t.length;Q++){let Z=t[Q];(Z.value<b||Z.value===b&&a==="bottomToTop")&&(b=Z.value,v=Q)}let E=t[v],_=E.metadata?.get(HM);if(_!==void 0&&_.size>0)for(let Q of t){let Z=Q.metadata?.get(HM);Z&&Z.size>0&&[..._].every(me=>Z.has(me))&&Q.text.trim()!==m&&Q.adjustValue(0)}let k=0;if(r){let Q=t.slice(0,v+1).reverse().find(te=>te.text.trim()!==""),Z=t[v-1],me=t[v+1];k=Math.min(Q?h(Q):0,g(Z)?h(Z):p,g(me)?h(me):p)}let D=" ".repeat(k)+n,N=new n8(D,d,o.tokenLength(D+`
`),"loose",E.metadata);l-=E.cost,t.splice(v,1,N),l+=N.cost,g(t[v+1])&&(l-=t[v+1].cost,t.splice(v+1,1)),g(t[v-1])&&(l-=t[v-1].cost,t.splice(v-1,1),v--),l>e&&t.every(Q=>Q.value===d)&&(r=!1)}if(y<0)throw new Error("Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text");t=t.filter(v=>v.value!==0);for(let v=t.length-1;v>0;v--)g(t[v])&&g(t[v-1])&&t.splice(v,1);return{getText:s(()=>t.map(v=>v.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(kdt,"elide");f();f();function Am(){}s(Am,"Diff");Am.prototype={diff:s(function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function l(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(l,"done"),e=this.castInput(e,i),n=this.castInput(n,i),e=this.removeEmpty(this.tokenize(e,i)),n=this.removeEmpty(this.tokenize(n,i));var c=n.length,u=e.length,d=1,p=c+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(r=i.timeout)!==null&&r!==void 0?r:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],n,e,0,i);if(g[0].oldPos+1>=u&&y+1>=c)return l(u2e(a,g[0].lastComponent,n,e,a.useLongestToken));var v=-1/0,b=1/0;function E(){for(var k=Math.max(v,-d);k<=Math.min(b,d);k+=2){var D=void 0,N=g[k-1],Q=g[k+1];N&&(g[k-1]=void 0);var Z=!1;if(Q){var me=Q.oldPos-k;Z=Q&&0<=me&&me<c}var te=N&&N.oldPos+1<u;if(!Z&&!te){g[k]=void 0;continue}if(!te||Z&&N.oldPos<Q.oldPos?D=a.addToPath(Q,!0,!1,0,i):D=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(D,n,e,k,i),D.oldPos+1>=u&&y+1>=c)return l(u2e(a,D.lastComponent,n,e,a.useLongestToken));g[k]=D,D.oldPos+1>=u&&(b=Math.min(b,k-1)),y+1>=c&&(v=Math.max(v,k+1))}d++}if(s(E,"execEditLength"),o)s(function k(){setTimeout(function(){if(d>p||Date.now()>h)return o();E()||k()},0)},"exec")();else for(;d<=p&&Date.now()<=h;){var _=E();if(_)return _}},"diff"),addToPath:s(function(e,n,r,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===n&&a.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,n,r,i,o){for(var a=n.length,l=r.length,c=e.oldPos,u=c-i,d=0;u+1<a&&c+1<l&&this.equals(r[c+1],n[u+1],o);)u++,c++,d++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!o.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,u},"extractCommon"),equals:s(function(e,n,r){return r.comparator?r.comparator(e,n):e===n||r.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function u2e(t,e,n,r,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var l=0,c=o.length,u=0,d=0;l<c;l++){var p=o[l];if(p.removed)p.value=t.join(r.slice(d,d+p.count)),d+=p.count;else{if(!p.added&&i){var m=n.slice(u,u+p.count);m=m.map(function(h,g){var y=r[d+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(n.slice(u,u+p.count));u+=p.count,p.added||(d+=p.count)}}return o}s(u2e,"buildValues");var xIn=new Am;function d2e(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}s(d2e,"longestCommonPrefix");function f2e(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}s(f2e,"longestCommonSuffix");function fte(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}s(fte,"replacePrefix");function pte(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}s(pte,"replaceSuffix");function r8(t,e){return fte(t,e,"")}s(r8,"removePrefix");function jM(t,e){return pte(t,e,"")}s(jM,"removeSuffix");function p2e(t,e){return e.slice(0,Bdt(t,e))}s(p2e,"maximumOverlap");function Bdt(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var r=e.length;t.length<e.length&&(r=t.length);var i=Array(r),o=0;i[0]=0;for(var a=1;a<r;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var l=n;l<t.length;l++){for(;o>0&&t[l]!=e[o];)o=i[o];t[l]==e[o]&&o++}return o}s(Bdt,"overlapCount");var VM="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Ddt=new RegExp("[".concat(VM,"]+|\\s+|[^").concat(VM,"]"),"ug"),$M=new Am;$M.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};$M.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else n=t.match(Ddt)||[];var r=[],i=null;return n.forEach(function(o){/\s/.test(o)?i==null?r.push(o):r.push(r.pop()+o):/\s/.test(i)?r[r.length-1]==i?r.push(r.pop()+o):r.push(i+o):r.push(o),i=o}),r};$M.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};$M.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,r=null,i=null;return t.forEach(function(o){o.added?r=o:o.removed?i=o:((r||i)&&m2e(n,i,r,o),n=o,r=null,i=null)}),(r||i)&&m2e(n,i,r,null),t};function m2e(t,e,n,r){if(e&&n){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],l=n.value.match(/\s*$/)[0];if(t){var c=d2e(i,a);t.value=pte(t.value,a,c),e.value=r8(e.value,c),n.value=r8(n.value,c)}if(r){var u=f2e(o,l);r.value=fte(r.value,l,u),e.value=jM(e.value,u),n.value=jM(n.value,u)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(t&&r){var d=r.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=d2e(d,p);e.value=r8(e.value,h);var g=f2e(r8(d,h),m);e.value=jM(e.value,g),r.value=fte(r.value,d,g),t.value=pte(t.value,d,d.slice(0,d.length-g.length))}else if(r){var y=r.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],b=p2e(v,y);e.value=jM(e.value,b)}else if(t){var E=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=p2e(E,_);e.value=r8(e.value,k)}}s(m2e,"dedupeWhitespaceInChangeObjects");var Pdt=new Am;Pdt.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(VM,"]+|[^\\S\\n\\r]+|[^").concat(VM,"]"),"ug");return t.match(e)||[]};var Ate=new Am;Ate.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var i=0;i<r.length;i++){var o=r[i];i%2&&!e.newlineIsToken?n[n.length-1]+=o:n.push(o)}return n};Ate.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Am.prototype.equals.call(this,t,e,n)};var Ndt=new Am;Ndt.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Ldt=new Am;Ldt.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function mte(t){"@babel/helpers - typeof";return mte=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mte(t)}s(mte,"_typeof");var i8=new Am;i8.useLongestToken=!0;i8.tokenize=Ate.tokenize;i8.castInput=function(t,e){var n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(hte(t,null,null,i),i,"  ")};i8.equals=function(t,e,n){return Am.prototype.equals.call(i8,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function hte(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=hte(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),mte(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var l=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&l.push(c);for(l.sort(),o=0;o<l.length;o+=1)c=l[o],a[c]=hte(t[c],e,n,r,c);e.pop(),n.pop()}else a=t;return a}s(hte,"canonicalize");var gte=new Am;gte.tokenize=function(t){return t.slice()};gte.join=gte.removeEmpty=function(t){return t};var h2e=require("fs");async function g2e(t,e,n,r,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(n.toLowerCase()),o.size===0)return[];let l=e,c=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of m){if(l<=5)return u;I1(i);let v=y.node.extentRange.length/g,b=Math.min(l,v*c),E=(await Mdt([y])).elide(b).getText();l-=r.tokenLength(E),u.push({uri:h,value:E})}}return u}s(g2e,"symbolRangesToCodeSnippets");async function Mdt(t){if(t.length===0)return new Bt([]);let e=t[0].node.fileName,n=[],r="";try{let i=Wo(e);i&&(r=(await h2e.promises.readFile(i)).toString())}catch{}for(let i of t)A2e(i,r).forEach(o=>n.push(o));return new Bt(n)}s(Mdt,"sameFileSymbolRangeToElidableText");function A2e(t,e){let r=[],i=t.node,o=e.substring(yte(e,i.commentRange.start),i.commentRange.end);r.push([Cte(o),1-3e-4]);let a=yte(e,i.bodyRange.start),l=yte(e,i.extentRange.start),c=i.bodyRange.length===0?e.substring(l,i.extentRange.end):e.substring(i.commentRange.length===0?l:i.commentRange.end,a);if(vI(i.kind)&&(c="BEGIN "+c.trimStart()),r.push([Cte(c),1-1e-4]),t.children.length>0)for(let u of t.children)r.push(...A2e(u,e));else{let u=1-(vI(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);r.push([Cte(d),u])}return vI(i.kind)&&r.push(["END "+c.substring(6),1-1e-4]),r.filter(u=>u[0].length>0)}s(A2e,"prepareForElidableText");function yte(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(yte,"shiftLeftToNearestLineEndingOrAlphanumeric");function Cte(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let n=t.length-1;for(;n>=0&&(t[n]==="\r"||t[n]===`
`||t[n]===" "||t[n]==="	");)n--;return t.substring(e,n+1)}s(Cte,"trimLineEndingsAndTrailingWhitespace");var xte=class{constructor(e,n){this.referenceExtractors=new Map;this.index=e;for(let r of n)this.referenceExtractors.set(r.languageId,r)}static{s(this,"ContextRetrievalStrategy")}},Gx=class extends xte{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,n,r,i){super(e,n),this.caseSensitive=r,this.typesOnly=i}async getContextAtPositionAsync(e,n,r,i,o,a){let l=this.referenceExtractors.get(i);if(!l)return[];I1(a);let c=await l.extractReferences(e,n);I1(a);let u=Array.from(c);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,r));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>vI(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,n,r){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,r),l=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),c=s(p=>l(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=c(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(l(p));if(!(!m||m.length>n.mlcpMaxSymbolMatches)){if(d.length+m.length>n.mlcpMaxContextItems){d.push(...m.slice(0,n.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,n){if(I1(n),vI(e.kind)){let r=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",n),i=await Promise.all(r.map(o=>this.makeSymbolRangeNodeFromDefinition(o,n)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,n,r){let i=e.extentRange.end<=r,o=n.extentRange.end<=r;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-r),l=Math.abs(n.extentRange.start-r);return a-l}},zM=class{constructor(e,n){this.strategies=new Map;this.strategies.set("go",new Gx(e,n,!0,!0)),this.strategies.set("java",new Gx(e,n,!0,!0)),this.strategies.set("python",new Gx(e,n,!0,!1)),this.strategies.set("typescript",new Gx(e,n,!0,!0)),this.strategies.set("typescriptreact",new Gx(e,n,!0,!0)),this.strategies.set("javascript",new Gx(e,n,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,n,r,i,o,a,l){let c=await this.getContextAtPositionAsync(e,n,r,i,o,l);I1(l);let u=Bo();return g2e(c,a,e,u,l)}async getContextAtPositionAsync(e,n,r,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,n,r,i,o,a):[]}};f();f();f();f();var bI={Id:"id"},f0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Ni={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var YM=class{constructor(e,n,r){this.tableName=e;this.createOptimizations=n;this.extraCreateDeclarations=r;this.primaryKey=new vte(bI.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,n){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let r=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&r.push("ON CONFLICT DO NOTHING"),r.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},o8=class t extends YM{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${f0.FilePath}');`]);this.fields=[new l8(f0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new hd(f0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},s8=class t extends YM{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Ni.DocumentId}', '${Ni.ExtentStart}', '${Ni.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Ni.UnqualifiedName}');`],`FOREIGN KEY(${Ni.DocumentId}) REFERENCES Document(${bI.Id}) ON DELETE CASCADE`);this.fields=[new hd(Ni.DocumentId),new l8(Ni.FullyQualifiedName,{notNull:!0}),new l8(Ni.UnqualifiedName,{notNull:!0}),new hd(Ni.CommentStart,{notNull:!0}),new hd(Ni.CommentLength,{notNull:!0}),new hd(Ni.NameStart,{notNull:!0}),new hd(Ni.NameLength,{notNull:!0}),new hd(Ni.BodyStart,{notNull:!0}),new hd(Ni.BodyLength,{notNull:!0}),new hd(Ni.ExtentStart,{notNull:!0}),new hd(Ni.ExtentLength,{notNull:!0}),new hd(Ni.SymbolKind,{notNull:!0}),new hd(Ni.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},a8=class{constructor(e,n){this.name=e;this.notNull=n?.notNull??!1}static{s(this,"SQLField")}},l8=class extends a8{static{s(this,"StringColumn")}constructor(e,n){super(e,{notNull:n?.notNull}),this.collate=n?.collate??!1,this.noCase=n?.noCase??!1,this.unique=n?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,r=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,n,r,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},hd=class extends a8{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},vte=class extends a8{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var KM=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let n=await e;if(n)return await this.create(n),n}async create(e){let n=s(i=>new Promise((o,a)=>{e.run(i,l=>{l?a(l):o()})}),"runQuery"),r=this.queryGenerator.createTableQueries();for(let i of r)await n(i)}async insert(e,n){let r=await this.init;r&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(n,e.length);r.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?o(l):i(this)})})}async getAllRows(){let e=await this.init;return e?Lf(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let n=await this.init;if(n)return Lf(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${bI.Id} = ?`,[e])}},T1=class t extends KM{static{s(this,"DocumentTable")}static{this.tableName=o8.tableName}createQueryGenerator(){return new o8}async updateTimestamp(e,n){let r=await this.init;r&&await Lf(r,`UPDATE ${t.tableName} SET ${f0.LastWriteTimeUtc} = ? WHERE ${f0.FilePath} = ?`,[n,e])}async deleteAllWithPath(e){let n=await this.init;n&&await Lf(n,`DELETE FROM ${t.tableName} WHERE ${f0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let n=await this.init;return n?Lf(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${f0.FilePath} = ?`,[e]):[]}},za=class t extends KM{static{s(this,"SymbolTable")}static{this.tableName=s8.tableName}createQueryGenerator(){return new s8}async clearAllSymbolsFromDocument(e){let n=await this.init;if(n)return Lf(n,`DELETE FROM ${t.tableName} WHERE ${Ni.DocumentId} = ?`,[e])}};async function Lf(t,e,n){return new Promise((r,i)=>t.all(e,n,(o,a)=>{o&&i(o),r(a)}))}s(Lf,"runPromisifiedDBQuery");var ZM=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${T1.tableName} ON ${za.tableName}.${Ni.DocumentId} = ${T1.tableName}.${bI.Id}`;this.db=this.initDb(e),this.documentTable=new T1(this.db),this.symbolTable=new za(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let n;try{n=await Promise.resolve().then(()=>Ve(R2e()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let r;try{r=await new Promise((i,o)=>{let a=new n.default.Database(e,l=>{l?o(l):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Lf(r,"pragma journal_mode=wal",[]),await Lf(r,"pragma synchronous=normal",[]),await Lf(r,"pragma optimize=0x10002",[]),await Lf(r,"pragma foreign_keys = ON",[]),r}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((n,r)=>{e.close(i=>i?r(i):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,n){return await this.query([`SELECT * FROM ${za.tableName}`,this.innerJoinStatement,`WHERE ${Ni.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Ni.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,n])}async querySymbolsUsingUnqualifiedNames(e,n){let r=e.map(()=>"?").join(", "),i=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${za.tableName}`,this.innerJoinStatement,`WHERE ${Ni.UnqualifiedName} ${i}IN (${r})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${za.tableName}`,this.innerJoinStatement,`WHERE ${Ni.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,n){return this.query([`SELECT * FROM ${za.tableName}`,this.innerJoinStatement,`WHERE ${T1.tableName}.${f0.FilePath} = ? AND ${za.tableName}.${Ni.ExtentStart} <= ? AND (${za.tableName}.${Ni.ExtentStart} + ${za.tableName}.${Ni.ExtentLength}) >= ?`].join(`
`),[e,n,n])}async querySymbolsContainedByRange(e,n,r){return this.query([`SELECT * FROM ${za.tableName}`,this.innerJoinStatement,`WHERE ${T1.tableName}.${f0.FilePath} = ? AND ${za.tableName}.${Ni.ExtentStart} >= ? AND (${za.tableName}.${Ni.ExtentStart} + ${za.tableName}.${Ni.ExtentLength}) <= ?`,`ORDER BY ${za.tableName}.${Ni.ExtentStart}`].join(`
`),[e,n,r])}async querySymbolsByQualifiedNamePrefix(e,n){return this.query([`SELECT * FROM ${za.tableName}`,this.innerJoinStatement,`WHERE ${T1.tableName}.${f0.FilePath} = ? AND ${za.tableName}.${Ni.FullyQualifiedName} LIKE ?`,`ORDER BY ${za.tableName}.${Ni.ExtentStart}`].join(`
`),[e,`${n}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,n,r=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:n}],r)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,n){return this.documentTable.updateTimestamp(e,n)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,n){let r=await this.db;return r?(await this.documentTable.init,await this.symbolTable.init,Lf(r,e,n)):[]}};var eQ=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new ZM(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,n,r){let i=await this.getOrCreateDocumentAsync(e,n);await this.database.clearAllSymbolsFromDocument(i.id),r.length>0&&await this.database.insertSymbols(r.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,n)}async addDocumentsAsync(e){for(let n of e)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,n){return await this.database.updateDocumentTimestamp(e.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(e,n){return RS(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,n))}async findPotentialDefinitionsAsync(e,n,r){let i=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let c=await this.database.querySymbolsUsingUnqualifiedNames(l,n);i.push(...c),I1(r)}return RS(i)}async getDefinitionsAsync(e){return RS(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,n){let r=await this.database.querySymbolsContainingPosition(e.toLowerCase(),n);return RS(r)}async findSymbolsContainedByRangeAsync(e,n,r){return RS(await this.database.querySymbolsContainedByRange(e.toLowerCase(),n,r))}async findSymbolsByFullyQualifiedNamePrefix(e,n){return RS(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let n=await this.database.getDocument(e);if(n?.at(0))return n[0]}async getOrCreateDocumentAsync(e,n){let r=await this.database.getDocument(e);if(r?.at(0))return r[0];await this.database.insertDocument(e,n,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function RS(t){return t.map(e=>new Wx(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new md(e.commentStart,e.commentLength),new md(e.nameStart,e.nameLength),new md(e.bodyStart,e.bodyLength),new md(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(RS,"symbolsToSymbolRanges");var nQ=Ve(require("fs/promises"));var tQ=class{static{s(this,"Index")}constructor(e,n){this.storage=new eQ(e),this.symbolExtractors=n}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,n){let r=Wo(e);if(!r)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await nQ.stat(r)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let l=this.symbolExtractors.find(d=>d.languageId==n);if(!l)return;let c=(await nQ.readFile(r)).toString(),u=await l.extractSymbols(e,c);await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,u)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(n=>n.filePath)}};f();function _te(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(n=>Hdt(n))}s(_te,"isIndexWorkerData");var u8=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},Hx=class extends u8{constructor(n,r){super(r);this.id=n;this.id=n}static{s(this,"IndexRequest")}},rQ=class extends u8{constructor(n){super(Wc.Cancel);this.messageIdToCancel=n}static{s(this,"CancellationNotification")}},Wc={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},iQ=class extends Hx{constructor(n,r,i){super(n,Wc.CreateIndex);this.baseWorkspaceFolderUri=r;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},oQ=class extends Hx{constructor(n,r){super(n,Wc.RemoveIndex);this.baseWorkspaceFolderUri=r}static{s(this,"RemoveIndexRequest")}},sQ=class extends Hx{constructor(n,r,i){super(n,Wc.AddOrInvalidated);this.fileUri=r;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},aQ=class extends Hx{constructor(n,r){super(n,Wc.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=r}static{s(this,"GetAllDocumentsRequest")}},lQ=class extends Hx{constructor(n,r,i,o,a,l){super(n,Wc.GetContext);this.fileUri=r;this.code=i;this.offset=o;this.languageId=a;this.params=l}static{s(this,"GetContextRequest")}},cQ=class extends Hx{static{s(this,"ExitRequest")}constructor(e){super(e,Wc.Exit)}},ym=class extends u8{constructor(n,r,i){super(Wc.Response);this.id=n;this.error=r;this.data=i;r&&"code"in r&&typeof r.code=="string"&&(this.code=r.code)}static{s(this,"ResponseMessage")}};function Hdt(t){return"databaseFilePath"in t&&"rootPath"in t}s(Hdt,"isIndexableWorkspaceFolder");var k2e=Ve(ii()),EI=require("worker_threads");var uQ=class{static{s(this,"IndexInfo")}constructor(e){this.index=new tQ(e,GM),this.contextRetreival=new zM(this.index.reader,s2e)}},Ste=class t{constructor(e,n){this.indices=new Map;this.cancellationTokens=new Map;for(let r of n){let i=ia(r.rootPath);this.indices.set(i,new uQ(r.databaseFilePath))}this.port=e,this.port.on("message",r=>void this.dispatchMessage(r,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,n,r){try{let i=new k2e.CancellationTokenSource;r.set(e.id,i);let o;switch(e.operation){case Wc.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,n,i.token);break;case Wc.GetContext:o=await t.dispatchGetContext(e,n,i.token);break;case Wc.Cancel:r.get(e.id)?.cancel(),o=new ym(e.id,void 0,void 0);break;case Wc.Exit:o=await this.dispatchExit(e,n,i.token);break;case Wc.CreateIndex:o=await t.dispatchCreateIndex(e,n,i.token);break;case Wc.RemoveIndex:o=await t.dispatchRemoveIndex(e,n,i.token);break;case Wc.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,n,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),r.get(e.id)?.dispose(),r.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new ym(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,n,r){let i=ia(e.baseWorkspaceFolderUri),o,a;return n.has(i)?a=await n.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new ym(e.id,o,a)}static async dispatchAddOrInvalidate(e,n,r){let i=ia(e.fileUri),o=t.getIndexInfo(i,n)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new ym(e.id,a,void 0)}static async dispatchGetContext(e,n,r){let i=ia(e.fileUri),o=t.getIndexInfo(i,n)?.contextRetreival,a,l;return o?l=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,r):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new ym(e.id,a,l)}async dispatchExit(e,n,r){for(let i of n.values())await i.index.dispose();n.clear(),this.port?.postMessage(new ym(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,n,r){let i=ia(e.baseWorkspaceFolderUri);return n.has(i)||n.set(i,new uQ(e.databaseFilePath)),new ym(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,n,r){let i=ia(e.baseWorkspaceFolderUri);if(n.has(i)){let o=n.get(i);o&&await o.index.dispose(),n.delete(i)}return new ym(e.id,void 0,void 0)}static getIndexInfo(e,n){for(let[r,i]of n)if(e.startsWith(r))return i}};function B2e(){return _te(EI.workerData)}s(B2e,"isIndexWorker");function D2e(){let t=EI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!_te(EI.workerData))throw new Error("Worker data must provide a valid database path.");let e=EI.workerData.cwd;process.cwd=()=>e,new Ste(t,EI.workerData.indexWorkspaceRoots)}s(D2e,"runIndexWorker");f();var d8=Ve(require("util"));function P2e(t){let e=new console.Console(process.stderr,process.stderr);function n(r,...i){if(Rf(t)==="dev")return t.get(Ha).logIt(t,r,"console",...i)}return s(n,"logIt"),e.debug=(...r)=>n(4,...r),e.info=(...r)=>n(3,...r),e.warn=(...r)=>n(2,...r),e.error=(...r)=>n(1,...r),e.assert=(r,...i)=>{r||(i.length===0?n(2,"Assertion failed"):n(2,"Assertion failed:",d8.format(...i)))},e.dir=(r,i)=>n(4,d8.inspect(r,i)),e.log=e.debug.bind(e),e.trace=(...r)=>{let i=new Error(d8.format(...r));i.name="Trace",e.log(i)},e}s(P2e,"createConsole");var AYe=Ve(require("fs/promises")),yYe=Ve(require("os")),Rp=Ve(xm()),CYe=require("worker_threads");f();f();var zQ=require("assert");f();f();var rft={right:lft,center:cft},ift=0,qQ=1,oft=2,WQ=3,ene=class{static{s(this,"UI")}constructor(e){var n;this.width=e.width,this.wrap=(n=e.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...e){let n=this.div(...e);n.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let n=e.map(r=>typeof r=="string"?this.colFromString(r):r);return this.rows.push(n),n}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let n=e.split(`
`).map(i=>i.split("	")),r=0;return n.forEach(i=>{i.length>1&&p0.stringWidth(i[0])>r&&(r=Math.min(Math.floor(this.width*.5),p0.stringWidth(i[0])))}),n.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?r:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let n=p0.stripAnsi(e);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(n=>{this.rowToString(n,e)}),e.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(e,n){return this.rasterize(e).forEach((r,i)=>{let o="";r.forEach((a,l)=>{let{width:c}=e[l],u=this.negatePadding(e[l]),d=a;if(u>p0.stringWidth(a)&&(d+=" ".repeat(u-p0.stringWidth(a))),e[l].align&&e[l].align!=="left"&&this.wrap){let m=rft[e[l].align];d=m(d,u),p0.stringWidth(d)<u&&(d+=" ".repeat((c||0)-p0.stringWidth(d)-1))}let p=e[l].padding||[0,0,0,0];p[WQ]&&(o+=" ".repeat(p[WQ])),o+=_Te(e[l],d,"| "),o+=d,o+=_Te(e[l],d," |"),p[qQ]&&(o+=" ".repeat(p[qQ])),i===0&&n.length>0&&(o=this.renderInline(o,n[n.length-1]))}),n.push({text:o.replace(/ +$/,""),span:e.span})}),n}renderInline(e,n){let r=e.match(/^ */),i=r?r[0].length:0,o=n.text,a=p0.stringWidth(o.trimRight());return n.span?this.wrap?i<a?e:(n.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(n.hidden=!0,o+e):e}rasterize(e){let n=[],r=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=r[a],this.wrap?i=p0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[ift]||0).fill("")),i.push(...new Array(o.padding[oft]||0).fill(""))),i.forEach((l,c)=>{n[c]||n.push([]);let u=n[c];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(l)})}),n}negatePadding(e){let n=e.width||0;return e.padding&&(n-=(e.padding[WQ]||0)+(e.padding[qQ]||0)),e.border&&(n-=4),n}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||p0.stringWidth(a.text));let n=e.length,r=this.width,i=e.map(a=>{if(a.width)return n--,r-=a.width,a.width}),o=n?Math.floor(r/n):0;return i.map((a,l)=>a===void 0?Math.max(o,sft(e[l])):a)}};function _Te(t,e,n){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?n:"  ":""}s(_Te,"addBorder");function sft(t){let e=t.padding||[],n=1+(e[WQ]||0)+(e[qQ]||0);return t.border?n+4:n}s(sft,"_minWidth");function aft(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(aft,"getWindowWidth");function lft(t,e){t=t.trim();let n=p0.stringWidth(t);return n<e?" ".repeat(e-n)+t:t}s(lft,"alignRight");function cft(t,e){t=t.trim();let n=p0.stringWidth(t);return n>=e?t:" ".repeat(e-n>>1)+t}s(cft,"alignCenter");var p0;function STe(t,e){return p0=e,new ene({width:t?.width||aft(),wrap:t?.wrap})}s(STe,"cliui");f();var RTe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function tne(t){return t.replace(RTe,"")}s(tne,"stripAnsi");function kTe(t,e){let[n,r]=t.match(RTe)||["",""];t=tne(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return n&&r&&(i=`${n}${i}${r}`),i}s(kTe,"wrap");function nne(t){return STe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:tne,wrap:kTe})}s(nne,"ui");f();var PS=require("path"),GQ=require("fs");function rne(t,e){let n=(0,PS.resolve)(".",t),r;for((0,GQ.statSync)(n).isDirectory()||(n=(0,PS.dirname)(n));;){if(r=e(n,(0,GQ.readdirSync)(n)),r)return(0,PS.resolve)(n,r);if(n=(0,PS.dirname)(r=n),r===n)break}}s(rne,"default");var VTe=require("util"),$Te=require("fs"),zTe=require("url");f();var LTe=require("util"),$Q=require("path");f();function _I(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let n="",r=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);r&&(r=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?r=!0:a!=="-"&&a!=="_"&&(n+=a)}return n}}s(_I,"camelCase");function HQ(t,e){let n=t.toLowerCase();e=e||"-";let r="";for(let i=0;i<t.length;i++){let o=n.charAt(i),a=t.charAt(i);o!==a&&i>0?r+=`${e}${n.charAt(i)}`:r+=a}return r}s(HQ,"decamelize");function jQ(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(jQ,"looksLikeNumber");f();f();function BTe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,n=null,r=null,i=null,o=[];for(let a=0;a<t.length;a++){if(n=r,r=t.charAt(a),r===" "&&!i){n!==" "&&e++;continue}r===i?i=null:(r==="'"||r==='"')&&!i&&(i=r),o[e]||(o[e]=""),o[e]+=r}return o}s(BTe,"tokenizeArgString");f();var qf;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(qf||(qf={}));var w1,VQ=class{static{s(this,"YargsParser")}constructor(e){w1=e}parse(e,n){let r=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),i=BTe(e),o=typeof e=="string",a=uft(Object.assign(Object.create(null),r.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},r.configuration),c=Object.assign(Object.create(null),r.default),u=r.configObjects||[],d=r.envPrefix,p=l["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=r.__||w1.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,E=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(r.array||[]).filter(Boolean).forEach(function(J){let ie=typeof J=="object"?J.key:J,We=Object.keys(J).map(function(Ne){return{boolean:"bools",string:"strings",number:"numbers"}[Ne]}).filter(Boolean).pop();We&&(v[We][ie]=!0),v.arrays[ie]=!0,v.keys.push(ie)}),[].concat(r.boolean||[]).filter(Boolean).forEach(function(J){v.bools[J]=!0,v.keys.push(J)}),[].concat(r.string||[]).filter(Boolean).forEach(function(J){v.strings[J]=!0,v.keys.push(J)}),[].concat(r.number||[]).filter(Boolean).forEach(function(J){v.numbers[J]=!0,v.keys.push(J)}),[].concat(r.count||[]).filter(Boolean).forEach(function(J){v.counts[J]=!0,v.keys.push(J)}),[].concat(r.normalize||[]).filter(Boolean).forEach(function(J){v.normalize[J]=!0,v.keys.push(J)}),typeof r.narg=="object"&&Object.entries(r.narg).forEach(([J,ie])=>{typeof ie=="number"&&(v.nargs[J]=ie,v.keys.push(J))}),typeof r.coerce=="object"&&Object.entries(r.coerce).forEach(([J,ie])=>{typeof ie=="function"&&(v.coercions[J]=ie,v.keys.push(J))}),typeof r.config<"u"&&(Array.isArray(r.config)||typeof r.config=="string"?[].concat(r.config).filter(Boolean).forEach(function(J){v.configs[J]=!0}):typeof r.config=="object"&&Object.entries(r.config).forEach(([J,ie])=>{(typeof ie=="boolean"||typeof ie=="function")&&(v.configs[J]=ie)})),Be(r.key,a,r.default,v.arrays),Object.keys(c).forEach(function(J){(v.aliases[J]||[]).forEach(function(ie){c[ie]=c[J]})});let _=null;tt();let k=[],D=Object.assign(Object.create(null),{_:[]}),N={};for(let J=0;J<i.length;J++){let ie=i[J],We=ie.replace(/^-{3,}/,"---"),Ne,be,ze,it,gt,Ot;if(ie!=="--"&&/^-/.test(ie)&&Tt(ie))Q(ie);else if(We.match(/^---+(=|$)/)){Q(ie);continue}else if(ie.match(/^--.+=/)||!l["short-option-groups"]&&ie.match(/^-.+=/))it=ie.match(/^--?([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&(Se(it[1],v.arrays)?J=me(J,it[1],i,it[2]):Se(it[1],v.nargs)!==!1?J=Z(J,it[1],i,it[2]):te(it[1],it[2],!0));else if(ie.match(E)&&l["boolean-negation"])it=ie.match(E),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],te(be,Se(be,v.arrays)?[!1]:!1));else if(ie.match(/^--.+/)||!l["short-option-groups"]&&ie.match(/^-[^-]+/))it=ie.match(/^--?(.+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],Se(be,v.arrays)?J=me(J,be,i):Se(be,v.nargs)!==!1?J=Z(J,be,i):(gt=i[J+1],gt!==void 0&&(!gt.match(/^-/)||gt.match(b))&&!Se(be,v.bools)&&!Se(be,v.counts)||/^(true|false)$/.test(gt)?(te(be,gt),J++):te(be,bt(be))));else if(ie.match(/^-.\..+=/))it=ie.match(/^-([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&te(it[1],it[2]);else if(ie.match(/^-.\..+/)&&!ie.match(b))gt=i[J+1],it=ie.match(/^-(.\..+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],gt!==void 0&&!gt.match(/^-/)&&!Se(be,v.bools)&&!Se(be,v.counts)?(te(be,gt),J++):te(be,bt(be)));else if(ie.match(/^-[^-]+/)&&!ie.match(b)){ze=ie.slice(1,-1).split(""),Ne=!1;for(let cn=0;cn<ze.length;cn++){if(gt=ie.slice(cn+2),ze[cn+1]&&ze[cn+1]==="="){Ot=ie.slice(cn+3),be=ze[cn],Se(be,v.arrays)?J=me(J,be,i,Ot):Se(be,v.nargs)!==!1?J=Z(J,be,i,Ot):te(be,Ot),Ne=!0;break}if(gt==="-"){te(ze[cn],gt);continue}if(/[A-Za-z]/.test(ze[cn])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(gt)&&Se(gt,v.bools)===!1){te(ze[cn],gt),Ne=!0;break}if(ze[cn+1]&&ze[cn+1].match(/\W/)){te(ze[cn],gt),Ne=!0;break}else te(ze[cn],bt(ze[cn]))}be=ie.slice(-1)[0],!Ne&&be!=="-"&&(Se(be,v.arrays)?J=me(J,be,i):Se(be,v.nargs)!==!1?J=Z(J,be,i):(gt=i[J+1],gt!==void 0&&(!/^(-|--)[^-]/.test(gt)||gt.match(b))&&!Se(be,v.bools)&&!Se(be,v.counts)||/^(true|false)$/.test(gt)?(te(be,gt),J++):te(be,bt(be))))}else if(ie.match(/^-[0-9]$/)&&ie.match(b)&&Se(ie.slice(1),v.bools))be=ie.slice(1),te(be,bt(be));else if(ie==="--"){k=i.slice(J+1);break}else if(l["halt-at-non-option"]){k=i.slice(J);break}else Q(ie)}Y(D,!0),Y(D,!1),oe(D),q(),ne(D,v.aliases,c,!0),ee(D),l["set-placeholder-key"]&&de(D),Object.keys(v.counts).forEach(function(J){fe(D,J.split("."))||te(J,0)}),p&&k.length&&(D[m]=[]),k.forEach(function(J){D[m].push(J)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(D).filter(J=>J!=="--"&&J.includes("-")).forEach(J=>{delete D[J]}),l["strip-aliased"]&&[].concat(...Object.keys(a).map(J=>a[J])).forEach(J=>{l["camel-case-expansion"]&&J.includes("-")&&delete D[J.split(".").map(ie=>_I(ie)).join(".")],delete D[J]});function Q(J){let ie=re("_",J);(typeof ie=="string"||typeof ie=="number")&&D._.push(ie)}s(Q,"pushPositional");function Z(J,ie,We,Ne){let be,ze=Se(ie,v.nargs);if(ze=typeof ze!="number"||isNaN(ze)?1:ze,ze===0)return ye(Ne)||(_=Error(y("Argument unexpected for: %s",ie))),te(ie,bt(ie)),J;let it=ye(Ne)?0:1;if(l["nargs-eats-options"])We.length-(J+1)+it<ze&&(_=Error(y("Not enough arguments following: %s",ie))),it=ze;else{for(be=J+1;be<We.length&&(!We[be].match(/^-[^0-9]/)||We[be].match(b)||Tt(We[be]));be++)it++;it<ze&&(_=Error(y("Not enough arguments following: %s",ie)))}let gt=Math.min(it,ze);for(!ye(Ne)&&gt>0&&(te(ie,Ne),gt--),be=J+1;be<gt+J+1;be++)te(ie,We[be]);return J+gt}s(Z,"eatNargs");function me(J,ie,We,Ne){let be=[],ze=Ne||We[J+1],it=Se(ie,v.nargs);if(Se(ie,v.bools)&&!/^(true|false)$/.test(ze))be.push(!0);else if(ye(ze)||ye(Ne)&&/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)){if(c[ie]!==void 0){let gt=c[ie];be=Array.isArray(gt)?gt:[gt]}}else{ye(Ne)||be.push(W(ie,Ne,!0));for(let gt=J+1;gt<We.length&&!(!l["greedy-arrays"]&&be.length>0||it&&typeof it=="number"&&be.length>=it||(ze=We[gt],/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)));gt++)J=gt,be.push(W(ie,ze,o))}return typeof it=="number"&&(it&&be.length<it||isNaN(it)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",ie))),te(ie,be),J}s(me,"eatArray");function te(J,ie,We=o){if(/-/.test(J)&&l["camel-case-expansion"]){let ze=J.split(".").map(function(it){return _I(it)}).join(".");H(J,ze)}let Ne=W(J,ie,We),be=J.split(".");pe(D,be,Ne),v.aliases[J]&&v.aliases[J].forEach(function(ze){let it=ze.split(".");pe(D,it,Ne)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(ze){let it=ze.split("."),gt=[].concat(be);gt.shift(),it=it.concat(gt),(v.aliases[J]||[]).includes(it.join("."))||pe(D,it,Ne)}),Se(J,v.normalize)&&!Se(J,v.arrays)&&[J].concat(v.aliases[J]||[]).forEach(function(it){Object.defineProperty(N,it,{enumerable:!0,get(){return ie},set(gt){ie=typeof gt=="string"?w1.normalize(gt):gt}})})}s(te,"setArg");function H(J,ie){v.aliases[J]&&v.aliases[J].length||(v.aliases[J]=[ie],h[ie]=!0),v.aliases[ie]&&v.aliases[ie].length||H(ie,J)}s(H,"addNewAlias");function W(J,ie,We){We&&(ie=dft(ie)),(Se(J,v.bools)||Se(J,v.counts))&&typeof ie=="string"&&(ie=ie==="true");let Ne=Array.isArray(ie)?ie.map(function(be){return re(J,be)}):re(J,ie);return Se(J,v.counts)&&(ye(Ne)||typeof Ne=="boolean")&&(Ne=ine()),Se(J,v.normalize)&&Se(J,v.arrays)&&(Array.isArray(ie)?Ne=ie.map(be=>w1.normalize(be)):Ne=w1.normalize(ie)),Ne}s(W,"processValue");function re(J,ie){return!l["parse-positional-numbers"]&&J==="_"||!Se(J,v.strings)&&!Se(J,v.bools)&&!Array.isArray(ie)&&(jQ(ie)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${ie}`)))||!ye(ie)&&Se(J,v.numbers))&&(ie=Number(ie)),ie}s(re,"maybeCoerceNumber");function oe(J){let ie=Object.create(null);ne(ie,v.aliases,c),Object.keys(v.configs).forEach(function(We){let Ne=J[We]||ie[We];if(Ne)try{let be=null,ze=w1.resolve(w1.cwd(),Ne),it=v.configs[We];if(typeof it=="function"){try{be=it(ze)}catch(gt){be=gt}if(be instanceof Error){_=be;return}}else be=w1.require(ze);V(be)}catch(be){be.name==="PermissionDenied"?_=be:J[We]&&(_=Error(y("Invalid JSON config file: %s",Ne)))}})}s(oe,"setConfig");function V(J,ie){Object.keys(J).forEach(function(We){let Ne=J[We],be=ie?ie+"."+We:We;typeof Ne=="object"&&Ne!==null&&!Array.isArray(Ne)&&l["dot-notation"]?V(Ne,be):(!fe(D,be.split("."))||Se(be,v.arrays)&&l["combine-arrays"])&&te(be,Ne)})}s(V,"setConfigObject");function q(){typeof u<"u"&&u.forEach(function(J){V(J)})}s(q,"setConfigObjects");function Y(J,ie){if(typeof d>"u")return;let We=typeof d=="string"?d:"",Ne=w1.env();Object.keys(Ne).forEach(function(be){if(We===""||be.lastIndexOf(We,0)===0){let ze=be.split("__").map(function(it,gt){return gt===0&&(it=it.substring(We.length)),_I(it)});(ie&&v.configs[ze.join(".")]||!ie)&&!fe(J,ze)&&te(ze.join("."),Ne[be])}})}s(Y,"applyEnvVars");function ee(J){let ie,We=new Set;Object.keys(J).forEach(function(Ne){if(!We.has(Ne)&&(ie=Se(Ne,v.coercions),typeof ie=="function"))try{let be=re(Ne,ie(J[Ne]));[].concat(v.aliases[Ne]||[],Ne).forEach(ze=>{We.add(ze),J[ze]=be})}catch(be){_=be}})}s(ee,"applyCoercions");function de(J){return v.keys.forEach(ie=>{~ie.indexOf(".")||typeof J[ie]>"u"&&(J[ie]=void 0)}),J}s(de,"setPlaceholderKeys");function ne(J,ie,We,Ne=!1){Object.keys(We).forEach(function(be){fe(J,be.split("."))||(pe(J,be.split("."),We[be]),Ne&&(g[be]=!0),(ie[be]||[]).forEach(function(ze){fe(J,ze.split("."))||pe(J,ze.split("."),We[be])}))})}s(ne,"applyDefaultsAndAliases");function fe(J,ie){let We=J;l["dot-notation"]||(ie=[ie.join(".")]),ie.slice(0,-1).forEach(function(be){We=We[be]||{}});let Ne=ie[ie.length-1];return typeof We!="object"?!1:Ne in We}s(fe,"hasKey");function pe(J,ie,We){let Ne=J;l["dot-notation"]||(ie=[ie.join(".")]),ie.slice(0,-1).forEach(function(Ot){Ot=DTe(Ot),typeof Ne=="object"&&Ne[Ot]===void 0&&(Ne[Ot]={}),typeof Ne[Ot]!="object"||Array.isArray(Ne[Ot])?(Array.isArray(Ne[Ot])?Ne[Ot].push({}):Ne[Ot]=[Ne[Ot],{}],Ne=Ne[Ot][Ne[Ot].length-1]):Ne=Ne[Ot]});let be=DTe(ie[ie.length-1]),ze=Se(ie.join("."),v.arrays),it=Array.isArray(We),gt=l["duplicate-arguments-array"];!gt&&Se(be,v.nargs)&&(gt=!0,(!ye(Ne[be])&&v.nargs[be]===1||Array.isArray(Ne[be])&&Ne[be].length===v.nargs[be])&&(Ne[be]=void 0)),We===ine()?Ne[be]=ine(Ne[be]):Array.isArray(Ne[be])?gt&&ze&&it?Ne[be]=l["flatten-duplicate-arrays"]?Ne[be].concat(We):(Array.isArray(Ne[be][0])?Ne[be]:[Ne[be]]).concat([We]):!gt&&!!ze==!!it?Ne[be]=We:Ne[be]=Ne[be].concat([We]):Ne[be]===void 0&&ze?Ne[be]=it?We:[We]:gt&&!(Ne[be]===void 0||Se(be,v.counts)||Se(be,v.bools))?Ne[be]=[Ne[be],We]:Ne[be]=We}s(pe,"setKey");function Be(...J){J.forEach(function(ie){Object.keys(ie||{}).forEach(function(We){v.aliases[We]||(v.aliases[We]=[].concat(a[We]||[]),v.aliases[We].concat(We).forEach(function(Ne){if(/-/.test(Ne)&&l["camel-case-expansion"]){let be=_I(Ne);be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].concat(We).forEach(function(Ne){if(Ne.length>1&&/[A-Z]/.test(Ne)&&l["camel-case-expansion"]){let be=HQ(Ne,"-");be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].forEach(function(Ne){v.aliases[Ne]=[We].concat(v.aliases[We].filter(function(be){return Ne!==be}))}))})})}s(Be,"extendAliases");function Se(J,ie){let We=[].concat(v.aliases[J]||[],J),Ne=Object.keys(ie),be=We.find(ze=>Ne.includes(ze));return be?ie[be]:!1}s(Se,"checkAllAliases");function Ke(J){let ie=Object.keys(v);return[].concat(ie.map(Ne=>v[Ne])).some(function(Ne){return Array.isArray(Ne)?Ne.includes(J):Ne[J]})}s(Ke,"hasAnyFlag");function Fe(J,...ie){return[].concat(...ie).some(function(Ne){let be=J.match(Ne);return be&&Ke(be[1])})}s(Fe,"hasFlagsMatching");function ft(J){if(J.match(b)||!J.match(/^-[^-]+/))return!1;let ie=!0,We,Ne=J.slice(1).split("");for(let be=0;be<Ne.length;be++){if(We=J.slice(be+2),!Ke(Ne[be])){ie=!1;break}if(Ne[be+1]&&Ne[be+1]==="="||We==="-"||/[A-Za-z]/.test(Ne[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||Ne[be+1]&&Ne[be+1].match(/\W/))break}return ie}s(ft,"hasAllShortFlags");function Tt(J){return l["unknown-options-as-args"]&&Ct(J)}s(Tt,"isUnknownOptionAsArg");function Ct(J){return J=J.replace(/^-{3,}/,"--"),J.match(b)||ft(J)?!1:!Fe(J,/^-+([^=]+?)=[\s\S]*$/,E,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(Ct,"isUnknownOption");function bt(J){return!Se(J,v.bools)&&!Se(J,v.counts)&&`${J}`in c?c[J]:le(Oe(J))}s(bt,"defaultValue");function le(J){return{[qf.BOOLEAN]:!0,[qf.STRING]:"",[qf.NUMBER]:void 0,[qf.ARRAY]:[]}[J]}s(le,"defaultForType");function Oe(J){let ie=qf.BOOLEAN;return Se(J,v.strings)?ie=qf.STRING:Se(J,v.numbers)?ie=qf.NUMBER:Se(J,v.bools)?ie=qf.BOOLEAN:Se(J,v.arrays)&&(ie=qf.ARRAY),ie}s(Oe,"guessType");function ye(J){return J===void 0}s(ye,"isUndefined");function tt(){Object.keys(v.counts).find(J=>Se(J,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",J)),!0):Se(J,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",J)),!0):!1)}return s(tt,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(N,D),configuration:l,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function uft(t){let e=[],n=Object.create(null),r=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});r;){r=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(l){return e[o].indexOf(l)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),r=!0;break}}return e.forEach(function(i){i=i.filter(function(a,l,c){return c.indexOf(a)===l});let o=i.pop();o!==void 0&&typeof o=="string"&&(n[o]=i)}),n}s(uft,"combineAliases");function ine(t){return t!==void 0?t+1:1}s(ine,"increment");function DTe(t){return t==="__proto__"?"___proto___":t}s(DTe,"sanitizeKey");function dft(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(dft,"stripQuotes");var FTe=require("fs");var one,sne,ane,PTe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,NTe=(sne=(one=process==null?void 0:process.versions)===null||one===void 0?void 0:one.node)!==null&&sne!==void 0?sne:(ane=process==null?void 0:process.version)===null||ane===void 0?void 0:ane.slice(1);if(NTe&&Number(NTe.match(/^([^.]+)/)[1])<PTe)throw Error(`yargs parser supports a minimum Node.js version of ${PTe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var fft=process?process.env:{},MTe=new VQ({cwd:process.cwd,env:s(()=>fft,"env"),format:LTe.format,normalize:$Q.normalize,resolve:$Q.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,FTe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),y8=s(function(e,n){return MTe.parse(e.slice(),n).argv},"Parser");y8.detailed=function(t,e){return MTe.parse(t.slice(),e)};y8.camelCase=_I;y8.decamelize=HQ;y8.looksLikeNumber=jQ;var QTe=y8;var bm=require("path");f();function pft(){return mft()?0:1}s(pft,"getProcessArgvBinIndex");function mft(){return hft()&&!process.defaultApp}s(mft,"isBundledElectronApp");function hft(){return!!process.versions.electron}s(hft,"isElectronApp");function OTe(){return process.argv[pft()]}s(OTe,"getProcessArgvBin");f();var ms=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var NS=require("fs"),UTe=require("util"),qTe=require("path");var WTe={fs:{readFileSync:NS.readFileSync,writeFile:NS.writeFile},format:UTe.format,resolve:qTe.resolve,exists:s(t=>{try{return(0,NS.statSync)(t).isFile()}catch{return!1}},"exists")};f();var vm,lne=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let n=e.shift(),r=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(r=e.pop()),r=r||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r(),vm.format.apply(vm.format,[this.cache[this.locale][n]||n].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),n=e.shift(),r=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?n:r;this.cache[this.locale][n]&&(a=this.cache[this.locale][n][i===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:r},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let l=[a];return~a.indexOf("%d")&&l.push(i),vm.format.apply(vm.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.cache[this.locale][n]=e[n])}_taggedLiteral(e,...n){let r="";return e.forEach(function(i,o){let a=n[o+1];r+=i,typeof a<"u"&&(r+="%s")}),this.__.apply(this,[r].concat([].slice.call(n,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,n=this.writeQueue[0],r=n.directory,i=n.locale,o=n.cb,a=this._resolveLocaleFile(r,i),l=JSON.stringify(this.cache[i],null,2);vm.fs.writeFile(a,l,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(c)})}_readLocaleFile(){let e={},n=this._resolveLocaleFile(this.directory,this.locale);try{vm.fs.readFileSync&&(e=JSON.parse(vm.fs.readFileSync(n,"utf-8")))}catch(r){if(r instanceof SyntaxError&&(r.message="syntax error in "+n),r.code==="ENOENT")e={};else throw r}this.cache[this.locale]=e}_resolveLocaleFile(e,n){let r=vm.resolve(e,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(r)&&~n.lastIndexOf("_")){let i=vm.resolve(e,"./",n.split("_")[0]+".json");this._fileExistsSync(i)&&(r=i)}return r}_fileExistsSync(e){return vm.exists(e)}};function GTe(t,e){vm=e;let n=new lne(t);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}s(GTe,"y18n");var gft=s(t=>GTe(t,WTe),"y18n"),HTe=gft;var Aft="require is not supported by ESM",jTe="loading a directory of commands is not supported yet for ESM",C8;try{C8=(0,zTe.fileURLToPath)(importMetaUrlShim)}catch{C8=process.cwd()}var yft=C8.substring(0,C8.lastIndexOf("node_modules")),YTe={assert:{notStrictEqual:zQ.notStrictEqual,strictEqual:zQ.strictEqual},cliui:nne,findUp:rne,getEnv:s(t=>process.env[t],"getEnv"),inspect:VTe.inspect,getCallerFile:s(()=>{throw new ms(jTe)},"getCallerFile"),getProcessArgvBin:OTe,mainFilename:yft||process.cwd(),Parser:QTe,path:{basename:bm.basename,dirname:bm.dirname,extname:bm.extname,relative:bm.relative,resolve:bm.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:$Te.readFileSync,require:s(()=>{throw new ms(Aft)},"require"),requireDirectory:s(()=>{throw new ms(jTe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:HTe({directory:(0,bm.resolve)(C8,"../../../locales"),updateFiles:!1})};f();f();f();function Iu(t,e,n,r){n.assert.notStrictEqual(t,e,r)}s(Iu,"assertNotStrictEqual");function cne(t,e){e.assert.strictEqual(typeof t,"string")}s(cne,"assertSingleKey");function LS(t){return Object.keys(t)}s(LS,"objectKeys");f();function hs(t){return!!t&&!!t.then&&typeof t.then=="function"}s(hs,"isPromise");f();f();f();function zx(t){let n=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),r=/\.*[\][<>]/g,i=n.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(r,""),demanded:[],optional:[]};return n.forEach((a,l)=>{let c=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&l===n.length-1&&(c=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(r,"").split("|"),variadic:c}):o.demanded.push({cmd:a.replace(r,"").split("|"),variadic:c})}),o}s(zx,"parseCommand");var Cft=["first","second","third","fourth","fifth","sixth"];function xn(t,e,n){function r(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[zx(`cmd ${t}`),e,n]}s(r,"parseArgs");try{let i=0,[o,a,l]=r(),c=[].slice.call(a);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=l||c.length;if(u<o.demanded.length)throw new ms(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new ms(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=c.shift(),h=KTe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&JTe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(c.length===0)return;let m=c.shift(),h=KTe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&JTe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(xn,"argsert");function KTe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(KTe,"guessType");function JTe(t,e,n){throw new ms(`Invalid ${Cft[n]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(JTe,"argumentTypeError");var YQ=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,n,r=!0,i=!1){if(xn("<array|function> [boolean] [boolean] [boolean]",[e,n,r],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=n,a.global=r}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=n,o.global=r,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,n){let r=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...r[n]||[],n];return i.option?!o.includes(i.option):!0}),e.option=n,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function XTe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(XTe,"commandMiddlewareFactory");function SI(t,e,n,r){return n.reduce((i,o)=>{if(o.applyBeforeValidation!==r)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(hs(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,l])=>Object.assign(a,l));{let a=o(i,e);return hs(a)?a.then(l=>Object.assign(i,l)):Object.assign(i,a)}},t)}s(SI,"applyMiddleware");f();function RI(t,e,n=r=>{throw r}){try{let r=xft(t)?t():t;return hs(r)?r.then(i=>e(i)):e(r)}catch(r){return n(r)}}s(RI,"maybeAsyncResult");function xft(t){return typeof t=="function"}s(xft,"isFunction");f();function une(t){if(typeof require>"u")return null;for(let e=0,n=Object.keys(require.cache),r;e<n.length;e++)if(r=require.cache[n[e]],r.exports===t)return r;return null}s(une,"whichModule");var MS=/(^\*)|(^\$0)/,dne=class{static{s(this,"CommandInstance")}constructor(e,n,r,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=r,this.validation=n}addDirectory(e,n,r,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,l,c)=>{let u=o(a,l,c);if(u){if(this.requireCache.has(l))return u;this.requireCache.add(l),this.addHandler(u)}return u},this.shim.requireDirectory({require:n,filename:r},e,i)}addHandler(e,n,r,i,o,a){let l=[],c=XTe(o);if(i=i||(()=>{}),Array.isArray(e))if(vft(e))[e,...l]=e;else for(let u of e)this.addHandler(u);else if(Eft(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(ZTe(r)){this.addHandler([e].concat(l),n,r.builder,r.handler,r.middlewares,r.deprecated);return}if(typeof e=="string"){let u=zx(e);l=l.map(m=>zx(m).cmd);let d=!1,p=[u.cmd].concat(l).filter(m=>MS.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],l=p.slice(1),e=e.replace(MS,u.cmd)),l.forEach(m=>{this.aliasMap[m]=u.cmd}),n!==!1&&this.usage.command(e,n,d,l,a),this.handlers[u.cmd]={original:e,description:n,handler:i,builder:r||{},middlewares:c,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,n,r,i,o,a){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=n.getInternalMethods().getContext(),u=c.commands.slice(),d=!e;e&&(c.commands.push(e),c.fullCommands.push(l.original));let p=this.applyBuilderUpdateUsageAndParse(d,l,n,r.aliases,u,i,o,a);return hs(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,l,m.innerArgv,c,o,m.aliases,n)):this.applyMiddlewareAndGetResult(d,l,p.innerArgv,c,o,p.aliases,n)}applyBuilderUpdateUsageAndParse(e,n,r,i,o,a,l,c){let u=n.builder,d=r;if(KQ(u)){r.getInternalMethods().getUsageInstance().freeze();let p=u(r.getInternalMethods().reset(i),c);if(hs(p))return p.then(m=>(d=twe(m)?m:r,this.parseAndUpdateUsage(e,n,d,o,a,l)))}else bft(u)&&(r.getInternalMethods().getUsageInstance().freeze(),d=r.getInternalMethods().reset(i),Object.keys(n.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,n,d,o,a,l)}parseAndUpdateUsage(e,n,r,i,o,a){e&&r.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(r)&&r.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,n),n.description);let l=r.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return hs(l)?l.then(c=>({aliases:r.parsed.aliases,innerArgv:c})):{aliases:r.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,n){let r=MS.test(n.original)?n.original.replace(MS,"").trim():n.original,i=e.filter(o=>!MS.test(o));return i.push(r),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,n,r,i,o,a,l,c){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);r=RI(r,d=>(u(d),d))}if(n.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(r,u,!1,!1),r=SI(r,a,l,!1),r=RI(r,d=>{let p=n.handler(d);return hs(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),hs(r)&&!a.getInternalMethods().hasParseCallback()&&r.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),r}applyMiddlewareAndGetResult(e,n,r,i,o,a,l){let c={};if(o)return r;l.getInternalMethods().getHasOutput()||(c=this.populatePositionals(n,r,i,l));let u=this.globalMiddleware.getMiddleware().slice(0).concat(n.middlewares),d=SI(r,l,u,!0);return hs(d)?d.then(p=>this.handleValidationAndGetResult(e,n,p,i,a,l,u,c)):this.handleValidationAndGetResult(e,n,d,i,a,l,u,c)}populatePositionals(e,n,r,i){n._=n._.slice(r.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),l={};for(this.validation.positionalCount(o.length,n._.length);o.length;){let c=o.shift();this.populatePositional(c,n,l)}for(;a.length;){let c=a.shift();this.populatePositional(c,n,l)}return n._=r.commands.concat(n._.map(c=>""+c)),this.postProcessPositionals(n,l,this.cmdToParseOptions(e.original),i),l}populatePositional(e,n,r){let i=e.cmd[0];e.variadic?r[i]=n._.splice(0).map(String):n._.length&&(r[i]=[String(n._.shift())])}cmdToParseOptions(e){let n={array:[],default:{},alias:{},demand:{}},r=zx(e);return r.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a,n.demand[o]=!0}),r.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a}),n}postProcessPositionals(e,n,r,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(r.default,o.default);for(let u of Object.keys(r.alias))o.alias[u]=(o.alias[u]||[]).concat(r.alias[u]);o.array=o.array.concat(r.array),o.config={};let a=[];if(Object.keys(n).forEach(u=>{n[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let l=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:l}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(n);Object.keys(n).forEach(d=>{u.push(...c.aliases[d])}),Object.keys(c.argv).forEach(d=>{u.includes(d)&&(n[d]||(n[d]=c.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(c.argv,d)&&(Array.isArray(e[d])||Array.isArray(c.argv[d]))?e[d]=[].concat(e[d],c.argv[d]):e[d]=c.argv[d])})}}isDefaulted(e,n){let{default:r}=e.getOptions();return Object.prototype.hasOwnProperty.call(r,n)||Object.prototype.hasOwnProperty.call(r,this.shim.Parser.camelCase(n))}isInConfigs(e,n){let{configObjects:r}=e.getOptions();return r.some(i=>Object.prototype.hasOwnProperty.call(i,n))||r.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(n)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let r=MS.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(r,this.defaultCommand.description)}let n=this.defaultCommand.builder;if(KQ(n))return n(e,!0);ZTe(n)||Object.keys(n).forEach(r=>{e.option(r,n[r])})}moduleName(e){let n=une(e);if(!n)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(n.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:n,desc:r}){for(let i of[e,n,r]){if(typeof i=="string"||i===!1)return i;Iu(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Iu(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function ewe(t,e,n,r){return new dne(t,e,n,r)}s(ewe,"command");function ZTe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(ZTe,"isCommandBuilderDefinition");function vft(t){return t.every(e=>typeof e=="string")}s(vft,"isCommandAndAliases");function KQ(t){return typeof t=="function"}s(KQ,"isCommandBuilderCallback");function bft(t){return typeof t=="object"}s(bft,"isCommandBuilderOptionDefinitions");function Eft(t){return typeof t=="object"&&!Array.isArray(t)}s(Eft,"isCommandHandlerDefinition");f();f();function Yx(t={},e=()=>!0){let n={};return LS(t).forEach(r=>{e(r,t[r])&&(n[r]=t[r])}),n}s(Yx,"objFilter");f();function Kx(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let n=e;n._handle&&n.isTTY&&typeof n._handle.setBlocking=="function"&&n._handle.setBlocking(t)})}s(Kx,"setBlocking");function Ift(t){return typeof t=="boolean"}s(Ift,"isBoolean");function rwe(t,e){let n=e.y18n.__,r={},i=[];r.failFn=s(function(W){i.push(W)},"failFn");let o=null,a=null,l=!0;r.showHelpOnFail=s(function(W=!0,re){let[oe,V]=typeof W=="string"?[!0,W]:[W,re];return t.getInternalMethods().isGlobalContext()&&(a=V),o=V,l=oe,r},"showHelpOnFailFn");let c=!1;r.fail=s(function(W,re){let oe=t.getInternalMethods().getLoggerInstance();if(i.length)for(let V=i.length-1;V>=0;--V){let q=i[V];if(Ift(q)){if(re)throw re;if(W)throw Error(W)}else q(W,re,r)}else{if(t.getExitProcess()&&Kx(!0),!c){c=!0,l&&(t.showHelp("error"),oe.error()),(W||re)&&oe.error(W||re);let V=o||a;V&&((W||re)&&oe.error(""),oe.error(V))}if(re=re||new ms(W),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,re);throw re}},"fail");let u=[],d=!1;r.usage=(H,W)=>H===null?(d=!0,u=[],r):(d=!1,u.push([H,W||""]),r),r.getUsage=()=>u,r.getUsageDisabled=()=>d,r.getPositionalGroupName=()=>n("Positionals:");let p=[];r.example=(H,W)=>{p.push([H,W||""])};let m=[];r.command=s(function(W,re,oe,V,q=!1){oe&&(m=m.map(Y=>(Y[2]=!1,Y))),m.push([W,re||"",oe,V,q])},"command"),r.getCommands=()=>m;let h={};r.describe=s(function(W,re){Array.isArray(W)?W.forEach(oe=>{r.describe(oe,re)}):typeof W=="object"?Object.keys(W).forEach(oe=>{r.describe(oe,W[oe])}):h[W]=re},"describe"),r.getDescriptions=()=>h;let g=[];r.epilog=H=>{g.push(H)};let y=!1,v;r.wrap=H=>{y=!0,v=H},r.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=Z(),y=!0),v);let b="__yargsString__:";r.deferY18nLookup=H=>b+H,r.help=s(function(){if(k)return k;_();let W=t.customScriptName?t.$0:e.path.basename(t.$0),re=t.getDemandedOptions(),oe=t.getDemandedCommands(),V=t.getDeprecatedOptions(),q=t.getGroups(),Y=t.getOptions(),ee=[];ee=ee.concat(Object.keys(h)),ee=ee.concat(Object.keys(re)),ee=ee.concat(Object.keys(oe)),ee=ee.concat(Object.keys(Y.default)),ee=ee.filter(N),ee=Object.keys(ee.reduce((Fe,ft)=>(ft!=="_"&&(Fe[ft]=!0),Fe),{}));let de=r.getWrap(),ne=e.cliui({width:de,wrap:!!de});if(!d){if(u.length)u.forEach(Fe=>{ne.div({text:`${Fe[0].replace(/\$0/g,W)}`}),Fe[1]&&ne.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),ne.div();else if(m.length){let Fe=null;oe._?Fe=`${W} <${n("command")}>
`:Fe=`${W} [${n("command")}]
`,ne.div(`${Fe}`)}}if(m.length>1||m.length===1&&!m[0][2]){ne.div(n("Commands:"));let Fe=t.getInternalMethods().getContext(),ft=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((Ct,bt)=>Ct[0].localeCompare(bt[0])));let Tt=W?`${W} `:"";m.forEach(Ct=>{let bt=`${Tt}${ft}${Ct[0].replace(/^\$0 ?/,"")}`;ne.span({text:bt,padding:[0,2,0,2],width:E(m,de,`${W}${ft}`)+4},{text:Ct[1]});let le=[];Ct[2]&&le.push(`[${n("default")}]`),Ct[3]&&Ct[3].length&&le.push(`[${n("aliases:")} ${Ct[3].join(", ")}]`),Ct[4]&&(typeof Ct[4]=="string"?le.push(`[${n("deprecated: %s",Ct[4])}]`):le.push(`[${n("deprecated")}]`)),le.length?ne.div({text:le.join(" "),padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}let fe=(Object.keys(Y.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ee=ee.filter(Fe=>!t.parsed.newAliases[Fe]&&fe.every(ft=>(Y.alias[ft]||[]).indexOf(Fe)===-1));let pe=n("Options:");q[pe]||(q[pe]=[]),D(ee,Y.alias,q,pe);let Be=s(Fe=>/^--/.test(JQ(Fe)),"isLongSwitch"),Se=Object.keys(q).filter(Fe=>q[Fe].length>0).map(Fe=>{let ft=q[Fe].filter(N).map(Tt=>{if(fe.includes(Tt))return Tt;for(let Ct=0,bt;(bt=fe[Ct])!==void 0;Ct++)if((Y.alias[bt]||[]).includes(Tt))return bt;return Tt});return{groupName:Fe,normalizedKeys:ft}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:ft})=>{let Tt=ft.reduce((Ct,bt)=>(Ct[bt]=[bt].concat(Y.alias[bt]||[]).map(le=>Fe===r.getPositionalGroupName()?le:(/^[0-9]$/.test(le)?Y.boolean.includes(bt)?"-":"--":le.length>1?"--":"-")+le).sort((le,Oe)=>Be(le)===Be(Oe)?0:Be(le)?1:-1).join(", "),Ct),{});return{groupName:Fe,normalizedKeys:ft,switches:Tt}});if(Se.filter(({groupName:Fe})=>Fe!==r.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:ft})=>!Fe.every(Tt=>Be(ft[Tt])))&&Se.filter(({groupName:Fe})=>Fe!==r.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:ft})=>{Fe.forEach(Tt=>{Be(ft[Tt])&&(ft[Tt]=Tft(ft[Tt],4))})}),Se.forEach(({groupName:Fe,normalizedKeys:ft,switches:Tt})=>{ne.div(Fe),ft.forEach(Ct=>{let bt=Tt[Ct],le=h[Ct]||"",Oe=null;le.includes(b)&&(le=n(le.substring(b.length))),Y.boolean.includes(Ct)&&(Oe=`[${n("boolean")}]`),Y.count.includes(Ct)&&(Oe=`[${n("count")}]`),Y.string.includes(Ct)&&(Oe=`[${n("string")}]`),Y.normalize.includes(Ct)&&(Oe=`[${n("string")}]`),Y.array.includes(Ct)&&(Oe=`[${n("array")}]`),Y.number.includes(Ct)&&(Oe=`[${n("number")}]`);let ye=s(ie=>typeof ie=="string"?`[${n("deprecated: %s",ie)}]`:`[${n("deprecated")}]`,"deprecatedExtra"),tt=[Ct in V?ye(V[Ct]):null,Oe,Ct in re?`[${n("required")}]`:null,Y.choices&&Y.choices[Ct]?`[${n("choices:")} ${r.stringifiedValues(Y.choices[Ct])}]`:null,Q(Y.default[Ct],Y.defaultDescription[Ct])].filter(Boolean).join(" ");ne.span({text:JQ(bt),padding:[0,2,0,2+nwe(bt)],width:E(Tt,de)+4},le);let J=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;tt&&!J?ne.div({text:tt,padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}),p.length&&(ne.div(n("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,W)}),p.forEach(Fe=>{Fe[1]===""?ne.div({text:Fe[0],padding:[0,2,0,2]}):ne.div({text:Fe[0],padding:[0,2,0,2],width:E(p,de)+4},{text:Fe[1]})}),ne.div()),g.length>0){let Fe=g.map(ft=>ft.replace(/\$0/g,W)).join(`
`);ne.div(`${Fe}
`)}return ne.toString().replace(/\s*$/,"")},"help");function E(H,W,re){let oe=0;return Array.isArray(H)||(H=Object.values(H).map(V=>[V])),H.forEach(V=>{oe=Math.max(e.stringWidth(re?`${re} ${JQ(V[0])}`:JQ(V[0]))+nwe(V[0]),oe)}),W&&(oe=Math.min(oe,parseInt((W*.5).toString(),10))),oe}s(E,"maxWidth");function _(){let H=t.getDemandedOptions(),W=t.getOptions();(Object.keys(W.alias)||[]).forEach(re=>{W.alias[re].forEach(oe=>{h[oe]&&r.describe(re,h[oe]),oe in H&&t.demandOption(re,H[oe]),W.boolean.includes(oe)&&t.boolean(re),W.count.includes(oe)&&t.count(re),W.string.includes(oe)&&t.string(re),W.normalize.includes(oe)&&t.normalize(re),W.array.includes(oe)&&t.array(re),W.number.includes(oe)&&t.number(re)})})}s(_,"normalizeAliases");let k;r.cacheHelpMessage=function(){k=this.help()},r.clearCachedHelpMessage=function(){k=void 0},r.hasCachedHelpMessage=function(){return!!k};function D(H,W,re,oe){let V=[],q=null;return Object.keys(re).forEach(Y=>{V=V.concat(re[Y])}),H.forEach(Y=>{q=[Y].concat(W[Y]),q.some(ee=>V.indexOf(ee)!==-1)||re[oe].push(Y)}),V}s(D,"addUngroupedKeys");function N(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),r.showHelp=H=>{let W=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:W[H])(r.help())},r.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):n("generated-value"),")"].join(""),r.stringifiedValues=s(function(W,re){let oe="",V=re||", ",q=[].concat(W);return!W||!q.length||q.forEach(Y=>{oe.length&&(oe+=V),oe+=JSON.stringify(Y)}),oe},"stringifiedValues");function Q(H,W){let re=`[${n("default:")} `;if(H===void 0&&!W)return null;if(W)re+=W;else switch(typeof H){case"string":re+=`"${H}"`;break;case"object":re+=JSON.stringify(H);break;default:re+=H}return`${re}]`}s(Q,"defaultString");function Z(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(Z,"windowWidth");let me=null;r.version=H=>{me=H},r.showVersion=H=>{let W=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:W[H])(me)},r.reset=s(function(W){return o=null,c=!1,u=[],d=!1,g=[],p=[],m=[],h=Yx(h,re=>!W[re]),r},"reset");let te=[];return r.freeze=s(function(){te.push({failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),r.unfreeze=s(function(W=!1){let re=te.pop();re&&(W?(h={...re.descriptions,...h},m=[...re.commands,...m],u=[...re.usages,...u],p=[...re.examples,...p],g=[...re.epilogs,...g]):{failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=re)},"unfreeze"),r}s(rwe,"usage");function fne(t){return typeof t=="object"}s(fne,"isIndentedText");function Tft(t,e){return fne(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(Tft,"addIndentation");function nwe(t){return fne(t)?t.indentation:0}s(nwe,"getIndentation");function JQ(t){return fne(t)?t.text:t}s(JQ,"getText");f();f();var iwe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,owe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var pne=class{static{s(this,"Completion")}constructor(e,n,r,i){var o,a,l;this.yargs=e,this.usage=n,this.command=r,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,n,r,i){let o=this.command.getCommandHandlers();for(let l=0,c=e.length;l<c;++l)if(o[e[l]]&&o[e[l]].builder){let u=o[e[l]].builder;if(KQ(u)){this.indexAfterLastReset=l+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,r),this.optionCompletions(a,e,n,r),this.choicesFromOptionsCompletions(a,e,n,r),this.choicesFromPositionalsCompletions(a,e,n,r),i(null,a)}commandCompletions(e,n,r){let i=this.yargs.getInternalMethods().getContext().commands;!r.match(/^-/)&&i[i.length-1]!==r&&!this.previousArgHasChoices(n)&&this.usage.getCommands().forEach(o=>{let a=zx(o[0]).cmd;if(n.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let l=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,n,r,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(n)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(l=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(l);!a.includes(l)&&!o.hiddenOptions.includes(l)&&!this.argsContainKey(n,l,c)&&this.completeOptionKey(l,e,i,c&&!!o.default[l])})}}choicesFromOptionsCompletions(e,n,r,i){if(this.previousArgHasChoices(n)){let o=this.getPreviousArgChoices(n);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,n,r,i){if(i===""&&e.length>0&&this.previousArgHasChoices(n))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=o[r._.length-a-1];if(!l)return;let c=this.yargs.getOptions().choices[l]||[];for(let u of c)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let n=e[e.length-1],r="";if(!n.startsWith("-")&&e.length>1&&(r=n,n=e[e.length-2]),!n.startsWith("-"))return;let i=n.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],l;for(let c of a)if(Object.prototype.hasOwnProperty.call(o.key,c)&&Array.isArray(o.choices[c])){l=o.choices[c];break}if(l)return l.filter(c=>!r||c.startsWith(r))}previousArgHasChoices(e){let n=this.getPreviousArgChoices(e);return n!==void 0&&n.length>0}argsContainKey(e,n,r){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(n)||r&&i(`no-${n}`))return!0;if(this.aliases){for(let o of this.aliases[n])if(i(o))return!0}return!1}completeOptionKey(e,n,r,i){var o,a,l,c;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(b=>{let E=h[b];return typeof E=="string"&&E.length>0}),y=g?h[g]:void 0,v=(c=(l=h[e])!==null&&l!==void 0?l:y)!==null&&c!==void 0?c:"";u=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(r)&&p(e)?"-":"--";n.push(m+u),i&&n.push(m+"no-"+u)}customCompletion(e,n,r,i){if(Iu(this.customCompletionFunction,null,this.shim),_ft(this.customCompletionFunction)){let o=this.customCompletionFunction(r,n);return hs(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return Sft(this.customCompletionFunction)?this.customCompletionFunction(r,n,(o=i)=>this.defaultCompletion(e,n,r,o),o=>{i(null,o)}):this.customCompletionFunction(r,n,o=>{i(null,o)})}getCompletion(e,n){let r=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,r,n):a=>this.defaultCompletion(e,a,r,n);return hs(i)?i.then(o):o(i)}generateCompletionScript(e,n){let r=this.zshShell?owe:iwe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),r=r.replace(/{{app_name}}/g,i),r=r.replace(/{{completion_command}}/g,n),r.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function swe(t,e,n,r){return new pne(t,e,n,r)}s(swe,"completion");function _ft(t){return t.length<3}s(_ft,"isSyncCompletionFunction");function Sft(t){return t.length>3}s(Sft,"isFallbackCompletionFunction");f();f();function awe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let n=[],r;for(r=0;r<=e.length;r++)n[r]=[r];let i;for(i=0;i<=t.length;i++)n[0][i]=i;for(r=1;r<=e.length;r++)for(i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:r>1&&i>1&&e.charAt(r-2)===t.charAt(i-1)&&e.charAt(r-1)===t.charAt(i-2)?n[r][i]=n[r-2][i-2]+1:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[e.length][t.length]}s(awe,"levenshtein");var lwe=["$0","--","_"];function cwe(t,e,n){let r=n.y18n.__,i=n.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let v of Object.keys(h)){let b=h[v];b&&g.indexOf(b)<0&&g.push(b)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),E=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!lwe.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&E.push(k)}),y&&(_.commands.length>0||b.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||E.push(""+k)}),y){let D=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,N=_.commands.length+D;N<p._.length&&p._.slice(N).forEach(Q=>{Q=String(Q),!_.commands.includes(Q)&&!E.includes(Q)&&E.push(Q)})}E.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",E.length,E.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(v=>{lwe.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(m.choices,v)&&[].concat(p[v]).forEach(b=>{m.choices[v].indexOf(b)===-1&&b!==void 0&&(h[v]=(h[v]||[]).concat(b))})});let g=Object.keys(h);if(!g.length)return;let y=r("Invalid values:");g.forEach(v=>{y+=`
  ${r("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(h[v]),e.stringifiedValues(m.choices[v]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){xn("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(Iu(m,void 0,n),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function l(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(l,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let v=g,b=y;v=l(p,v),y=l(p,y),v&&!y&&m.push(` ${g} -> ${b}`)})}),m.length){let h=`${r("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let c={};o.conflicts=s(function(p,m){xn("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),c[p]||(c[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):c[p].push(m))},"conflicts"),o.getConflicting=()=>c,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{c[m]&&c[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach(m=>{c[m].forEach(h=>{h&&p[n.Parser.camelCase(m)]!==void 0&&p[n.Parser.camelCase(h)]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((v,b)=>b.length-v.length);let g=null,y=1/0;for(let v=0,b;(b=m[v])!==void 0;v++){let E=awe(p,b);E<=3&&E<y&&(y=E,g=b)}g&&e.fail(r("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=Yx(a,m=>!p[m]),c=Yx(c,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:c})},"freeze"),o.unfreeze=s(function(){let p=u.pop();Iu(p,void 0,n),{implied:a,conflicting:c}=p},"unfreeze"),o}s(cwe,"validation");f();var mne=[],x8;function XQ(t,e,n,r){x8=r;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=kft(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}Rft(a),mne.push(a),i=o?JSON.parse(x8.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=XQ(i,x8.path.dirname(a),n,x8)}return mne=[],n?uwe(i,t):Object.assign({},i,t)}s(XQ,"applyExtends");function Rft(t){if(mne.indexOf(t)>-1)throw new ms(`Circular extended configurations: '${t}'.`)}s(Rft,"checkForCircularExtends");function kft(t,e){return x8.path.resolve(t,e)}s(kft,"getPathToDefaultConfig");function uwe(t,e){let n={};function r(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(r,"isObject"),Object.assign(n,t);for(let i of Object.keys(e))r(e[i])&&r(n[i])?n[i]=uwe(t[i],e[i]):n[i]=e[i];return n}s(uwe,"mergeDeep");var In=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ue=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},wa,kI,v8,Wf,m0,ZQ,Jx,BI,eO,Gf,tO,Hf,dg,h0,jf,nO,QS,Dl,Qn,rO,iO,g0,DI,OS,PI,Xx,oO,Lr,NI,LI,FI,jr,sO,fg,oa;function kwe(t){return(e=[],n=t.process.cwd(),r)=>{let i=new Tne(e,n,r,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(kwe,"YargsFactory");var dwe=Symbol("copyDoubleDash"),fwe=Symbol("copyDoubleDash"),hne=Symbol("deleteFromParserHintObject"),pwe=Symbol("emitWarning"),mwe=Symbol("freeze"),hwe=Symbol("getDollarZero"),MI=Symbol("getParserConfiguration"),gwe=Symbol("getUsageConfiguration"),gne=Symbol("guessLocale"),Awe=Symbol("guessVersion"),ywe=Symbol("parsePositionalNumbers"),Ane=Symbol("pkgUp"),Zx=Symbol("populateParserHintArray"),US=Symbol("populateParserHintSingleValueDictionary"),yne=Symbol("populateParserHintArrayDictionary"),Cne=Symbol("populateParserHintDictionary"),xne=Symbol("sanitizeKey"),vne=Symbol("setKey"),bne=Symbol("unfreeze"),Cwe=Symbol("validateAsync"),xwe=Symbol("getCommandInstance"),vwe=Symbol("getContext"),bwe=Symbol("getHasOutput"),Ewe=Symbol("getLoggerInstance"),Iwe=Symbol("getParseContext"),Twe=Symbol("getUsageInstance"),wwe=Symbol("getValidationInstance"),aO=Symbol("hasParseCallback"),_we=Symbol("isGlobalContext"),QI=Symbol("postProcess"),Swe=Symbol("rebase"),Ene=Symbol("reset"),b8=Symbol("runYargsParserAndExecuteCommands"),Ine=Symbol("runValidation"),Rwe=Symbol("setHasOutput"),OI=Symbol("kTrackManuallySetKeys"),Tne=class{static{s(this,"YargsInstance")}constructor(e=[],n,r,i){this.customScriptName=!1,this.parsed=!1,wa.set(this,void 0),kI.set(this,void 0),v8.set(this,{commands:[],fullCommands:[]}),Wf.set(this,null),m0.set(this,null),ZQ.set(this,"show-hidden"),Jx.set(this,null),BI.set(this,!0),eO.set(this,{}),Gf.set(this,!0),tO.set(this,[]),Hf.set(this,void 0),dg.set(this,{}),h0.set(this,!1),jf.set(this,null),nO.set(this,!0),QS.set(this,void 0),Dl.set(this,""),Qn.set(this,void 0),rO.set(this,void 0),iO.set(this,{}),g0.set(this,null),DI.set(this,null),OS.set(this,{}),PI.set(this,{}),Xx.set(this,void 0),oO.set(this,!1),Lr.set(this,void 0),NI.set(this,!1),LI.set(this,!1),FI.set(this,!1),jr.set(this,void 0),sO.set(this,{}),fg.set(this,null),oa.set(this,void 0),In(this,Lr,i,"f"),In(this,Xx,e,"f"),In(this,kI,n,"f"),In(this,rO,r,"f"),In(this,Hf,new YQ(this),"f"),this.$0=this[hwe](),this[Ene](),In(this,wa,ue(this,wa,"f"),"f"),In(this,jr,ue(this,jr,"f"),"f"),In(this,oa,ue(this,oa,"f"),"f"),In(this,Qn,ue(this,Qn,"f"),"f"),ue(this,Qn,"f").showHiddenOpt=ue(this,ZQ,"f"),In(this,QS,this[fwe](),"f")}addHelpOpt(e,n){let r="help";return xn("[string|boolean] [string]",[e,n],arguments.length),ue(this,jf,"f")&&(this[hne](ue(this,jf,"f")),In(this,jf,null,"f")),e===!1&&n===void 0?this:(In(this,jf,typeof e=="string"?e:r,"f"),this.boolean(ue(this,jf,"f")),this.describe(ue(this,jf,"f"),n||ue(this,jr,"f").deferY18nLookup("Show help")),this)}help(e,n){return this.addHelpOpt(e,n)}addShowHiddenOpt(e,n){if(xn("[string|boolean] [string]",[e,n],arguments.length),e===!1&&n===void 0)return this;let r=typeof e=="string"?e:ue(this,ZQ,"f");return this.boolean(r),this.describe(r,n||ue(this,jr,"f").deferY18nLookup("Show hidden options")),ue(this,Qn,"f").showHiddenOpt=r,this}showHidden(e,n){return this.addShowHiddenOpt(e,n)}alias(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[yne](this.alias.bind(this),"alias",e,n),this}array(e){return xn("<array|string>",[e],arguments.length),this[Zx]("array",e),this[OI](e),this}boolean(e){return xn("<array|string>",[e],arguments.length),this[Zx]("boolean",e),this[OI](e),this}check(e,n){return xn("<function> [boolean]",[e,n],arguments.length),this.middleware((r,i)=>RI(()=>e(r,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&ue(this,jr,"f").fail(o.toString(),o):ue(this,jr,"f").fail(ue(this,Lr,"f").y18n.__("Argument check failed: %s",e.toString())),r),o=>(ue(this,jr,"f").fail(o.message?o.message:o.toString(),o),r)),!1,n),this}choices(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[yne](this.choices.bind(this),"choices",e,n),this}coerce(e,n){if(xn("<object|string|array> [function]",[e,n],arguments.length),Array.isArray(e)){if(!n)throw new ms("coerce callback must be provided");for(let r of e)this.coerce(r,n);return this}else if(typeof e=="object"){for(let r of Object.keys(e))this.coerce(r,e[r]);return this}if(!n)throw new ms("coerce callback must be provided");return ue(this,Qn,"f").key[e]=!0,ue(this,Hf,"f").addCoerceMiddleware((r,i)=>{let o;return Object.prototype.hasOwnProperty.call(r,e)?RI(()=>(o=i.getAliases(),n(r[e])),l=>{r[e]=l;let c=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&c!==!0)for(let u of o[e])r[u]=l;return r},l=>{throw new ms(l.message)}):r},e),this}conflicts(e,n){return xn("<string|object> [string|array]",[e,n],arguments.length),ue(this,oa,"f").conflicts(e,n),this}config(e="config",n,r){return xn("[object|string] [string|function] [function]",[e,n,r],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=XQ(e,ue(this,kI,"f"),this[MI]()["deep-merge-config"]||!1,ue(this,Lr,"f")),ue(this,Qn,"f").configObjects=(ue(this,Qn,"f").configObjects||[]).concat(e),this):(typeof n=="function"&&(r=n,n=void 0),this.describe(e,n||ue(this,jr,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{ue(this,Qn,"f").config[i]=r||!0}),this)}completion(e,n,r){return xn("[string] [string|boolean|function] [function]",[e,n,r],arguments.length),typeof n=="function"&&(r=n,n=void 0),In(this,m0,e||ue(this,m0,"f")||"completion","f"),!n&&n!==!1&&(n="generate completion script"),this.command(ue(this,m0,"f"),n),r&&ue(this,Wf,"f").registerFunction(r),this}command(e,n,r,i,o,a){return xn("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,n,r,i,o,a],arguments.length),ue(this,wa,"f").addHandler(e,n,r,i,o,a),this}commands(e,n,r,i,o,a){return this.command(e,n,r,i,o,a)}commandDir(e,n){xn("<string> [object]",[e,n],arguments.length);let r=ue(this,rO,"f")||ue(this,Lr,"f").require;return ue(this,wa,"f").addDirectory(e,r,ue(this,Lr,"f").getCallerFile(),n),this}count(e){return xn("<array|string>",[e],arguments.length),this[Zx]("count",e),this[OI](e),this}default(e,n,r){return xn("<object|string|array> [*] [string]",[e,n,r],arguments.length),r&&(cne(e,ue(this,Lr,"f")),ue(this,Qn,"f").defaultDescription[e]=r),typeof n=="function"&&(cne(e,ue(this,Lr,"f")),ue(this,Qn,"f").defaultDescription[e]||(ue(this,Qn,"f").defaultDescription[e]=ue(this,jr,"f").functionDescription(n)),n=n.call()),this[US](this.default.bind(this),"default",e,n),this}defaults(e,n,r){return this.default(e,n,r)}demandCommand(e=1,n,r,i){return xn("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,n,r,i],arguments.length),typeof n!="number"&&(r=n,n=1/0),this.global("_",!1),ue(this,Qn,"f").demandedCommands._={min:e,max:n,minMsg:r,maxMsg:i},this}demand(e,n,r){return Array.isArray(n)?(n.forEach(i=>{Iu(r,!0,ue(this,Lr,"f")),this.demandOption(i,r)}),n=1/0):typeof n!="number"&&(r=n,n=1/0),typeof e=="number"?(Iu(r,!0,ue(this,Lr,"f")),this.demandCommand(e,n,r,r)):Array.isArray(e)?e.forEach(i=>{Iu(r,!0,ue(this,Lr,"f")),this.demandOption(i,r)}):typeof r=="string"?this.demandOption(e,r):(r===!0||typeof r>"u")&&this.demandOption(e),this}demandOption(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[US](this.demandOption.bind(this),"demandedOptions",e,n),this}deprecateOption(e,n){return xn("<string> [string|boolean]",[e,n],arguments.length),ue(this,Qn,"f").deprecatedOptions[e]=n,this}describe(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[vne](e,!0),ue(this,jr,"f").describe(e,n),this}detectLocale(e){return xn("<boolean>",[e],arguments.length),In(this,BI,e,"f"),this}env(e){return xn("[string|boolean]",[e],arguments.length),e===!1?delete ue(this,Qn,"f").envPrefix:ue(this,Qn,"f").envPrefix=e||"",this}epilogue(e){return xn("<string>",[e],arguments.length),ue(this,jr,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,n){return xn("<string|array> [string]",[e,n],arguments.length),Array.isArray(e)?e.forEach(r=>this.example(...r)):ue(this,jr,"f").example(e,n),this}exit(e,n){In(this,h0,!0,"f"),In(this,Jx,n,"f"),ue(this,Gf,"f")&&ue(this,Lr,"f").process.exit(e)}exitProcess(e=!0){return xn("[boolean]",[e],arguments.length),In(this,Gf,e,"f"),this}fail(e){if(xn("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new ms("Invalid first argument. Expected function or boolean 'false'");return ue(this,jr,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,n){return xn("<array> [function]",[e,n],arguments.length),n?ue(this,Wf,"f").getCompletion(e,n):new Promise((r,i)=>{ue(this,Wf,"f").getCompletion(e,(o,a)=>{o?i(o):r(a)})})}getDemandedOptions(){return xn([],0),ue(this,Qn,"f").demandedOptions}getDemandedCommands(){return xn([],0),ue(this,Qn,"f").demandedCommands}getDeprecatedOptions(){return xn([],0),ue(this,Qn,"f").deprecatedOptions}getDetectLocale(){return ue(this,BI,"f")}getExitProcess(){return ue(this,Gf,"f")}getGroups(){return Object.assign({},ue(this,dg,"f"),ue(this,PI,"f"))}getHelp(){if(In(this,h0,!0,"f"),!ue(this,jr,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[b8](ue(this,Xx,"f"),void 0,void 0,0,!0);if(hs(n))return n.then(()=>ue(this,jr,"f").help())}let e=ue(this,wa,"f").runDefaultBuilderOn(this);if(hs(e))return e.then(()=>ue(this,jr,"f").help())}return Promise.resolve(ue(this,jr,"f").help())}getOptions(){return ue(this,Qn,"f")}getStrict(){return ue(this,NI,"f")}getStrictCommands(){return ue(this,LI,"f")}getStrictOptions(){return ue(this,FI,"f")}global(e,n){return xn("<string|array> [boolean]",[e,n],arguments.length),e=[].concat(e),n!==!1?ue(this,Qn,"f").local=ue(this,Qn,"f").local.filter(r=>e.indexOf(r)===-1):e.forEach(r=>{ue(this,Qn,"f").local.includes(r)||ue(this,Qn,"f").local.push(r)}),this}group(e,n){xn("<string|array> <string>",[e,n],arguments.length);let r=ue(this,PI,"f")[n]||ue(this,dg,"f")[n];ue(this,PI,"f")[n]&&delete ue(this,PI,"f")[n];let i={};return ue(this,dg,"f")[n]=(r||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return xn("<string>",[e],arguments.length),ue(this,Qn,"f").hiddenOptions.push(e),this}implies(e,n){return xn("<string|object> [number|string|array]",[e,n],arguments.length),ue(this,oa,"f").implies(e,n),this}locale(e){return xn("[string]",[e],arguments.length),e===void 0?(this[gne](),ue(this,Lr,"f").y18n.getLocale()):(In(this,BI,!1,"f"),ue(this,Lr,"f").y18n.setLocale(e),this)}middleware(e,n,r){return ue(this,Hf,"f").addMiddleware(e,!!n,r)}nargs(e,n){return xn("<string|object|array> [number]",[e,n],arguments.length),this[US](this.nargs.bind(this),"narg",e,n),this}normalize(e){return xn("<array|string>",[e],arguments.length),this[Zx]("normalize",e),this}number(e){return xn("<array|string>",[e],arguments.length),this[Zx]("number",e),this[OI](e),this}option(e,n){if(xn("<string|object> [object]",[e,n],arguments.length),typeof e=="object")Object.keys(e).forEach(r=>{this.options(r,e[r])});else{typeof n!="object"&&(n={}),this[OI](e),ue(this,fg,"f")&&(e==="version"||n?.alias==="version")&&this[pwe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),ue(this,Qn,"f").key[e]=!0,n.alias&&this.alias(e,n.alias);let r=n.deprecate||n.deprecated;r&&this.deprecateOption(e,r);let i=n.demand||n.required||n.require;i&&this.demand(e,i),n.demandOption&&this.demandOption(e,typeof n.demandOption=="string"?n.demandOption:void 0),n.conflicts&&this.conflicts(e,n.conflicts),"default"in n&&this.default(e,n.default),n.implies!==void 0&&this.implies(e,n.implies),n.nargs!==void 0&&this.nargs(e,n.nargs),n.config&&this.config(e,n.configParser),n.normalize&&this.normalize(e),n.choices&&this.choices(e,n.choices),n.coerce&&this.coerce(e,n.coerce),n.group&&this.group(e,n.group),(n.boolean||n.type==="boolean")&&(this.boolean(e),n.alias&&this.boolean(n.alias)),(n.array||n.type==="array")&&(this.array(e),n.alias&&this.array(n.alias)),(n.number||n.type==="number")&&(this.number(e),n.alias&&this.number(n.alias)),(n.string||n.type==="string")&&(this.string(e),n.alias&&this.string(n.alias)),(n.count||n.type==="count")&&this.count(e),typeof n.global=="boolean"&&this.global(e,n.global),n.defaultDescription&&(ue(this,Qn,"f").defaultDescription[e]=n.defaultDescription),n.skipValidation&&this.skipValidation(e);let o=n.describe||n.description||n.desc,a=ue(this,jr,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),n.hidden&&this.hide(e),n.requiresArg&&this.requiresArg(e)}return this}options(e,n){return this.option(e,n)}parse(e,n,r){xn("[string|array] [function|boolean|object] [function]",[e,n,r],arguments.length),this[mwe](),typeof e>"u"&&(e=ue(this,Xx,"f")),typeof n=="object"&&(In(this,DI,n,"f"),n=r),typeof n=="function"&&(In(this,g0,n,"f"),n=!1),n||In(this,Xx,e,"f"),ue(this,g0,"f")&&In(this,Gf,!1,"f");let i=this[b8](e,!!n),o=this.parsed;return ue(this,Wf,"f").setParsed(this.parsed),hs(i)?i.then(a=>(ue(this,g0,"f")&&ue(this,g0,"f").call(this,ue(this,Jx,"f"),a,ue(this,Dl,"f")),a)).catch(a=>{throw ue(this,g0,"f")&&ue(this,g0,"f")(a,this.parsed.argv,ue(this,Dl,"f")),a}).finally(()=>{this[bne](),this.parsed=o}):(ue(this,g0,"f")&&ue(this,g0,"f").call(this,ue(this,Jx,"f"),i,ue(this,Dl,"f")),this[bne](),this.parsed=o,i)}parseAsync(e,n,r){let i=this.parse(e,n,r);return hs(i)?i:Promise.resolve(i)}parseSync(e,n,r){let i=this.parse(e,n,r);if(hs(i))throw new ms(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return xn("<object>",[e],arguments.length),In(this,iO,e,"f"),this}pkgConf(e,n){xn("<string> [string]",[e,n],arguments.length);let r=null,i=this[Ane](n||ue(this,kI,"f"));return i[e]&&typeof i[e]=="object"&&(r=XQ(i[e],n||ue(this,kI,"f"),this[MI]()["deep-merge-config"]||!1,ue(this,Lr,"f")),ue(this,Qn,"f").configObjects=(ue(this,Qn,"f").configObjects||[]).concat(r)),this}positional(e,n){xn("<string> <object>",[e,n],arguments.length);let r=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];n=Yx(n,(a,l)=>a==="type"&&!["string","number","boolean"].includes(l)?!1:r.includes(a));let i=ue(this,v8,"f").fullCommands[ue(this,v8,"f").fullCommands.length-1],o=i?ue(this,wa,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return LS(o).forEach(a=>{let l=o[a];Array.isArray(l)?l.indexOf(e)!==-1&&(n[a]=!0):l[e]&&!(a in n)&&(n[a]=l[e])}),this.group(e,ue(this,jr,"f").getPositionalGroupName()),this.option(e,n)}recommendCommands(e=!0){return xn("[boolean]",[e],arguments.length),In(this,oO,e,"f"),this}required(e,n,r){return this.demand(e,n,r)}require(e,n,r){return this.demand(e,n,r)}requiresArg(e){return xn("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&ue(this,Qn,"f").narg[e]?this:(this[US](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,n){return xn("[string] [string]",[e,n],arguments.length),e=e||this.$0,ue(this,QS,"f").log(ue(this,Wf,"f").generateCompletionScript(e,n||ue(this,m0,"f")||"completion")),this}showHelp(e){if(xn("[string|function]",[e],arguments.length),In(this,h0,!0,"f"),!ue(this,jr,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[b8](ue(this,Xx,"f"),void 0,void 0,0,!0);if(hs(r))return r.then(()=>{ue(this,jr,"f").showHelp(e)}),this}let n=ue(this,wa,"f").runDefaultBuilderOn(this);if(hs(n))return n.then(()=>{ue(this,jr,"f").showHelp(e)}),this}return ue(this,jr,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,n){return xn("[boolean|string] [string]",[e,n],arguments.length),ue(this,jr,"f").showHelpOnFail(e,n),this}showVersion(e){return xn("[string|function]",[e],arguments.length),ue(this,jr,"f").showVersion(e),this}skipValidation(e){return xn("<array|string>",[e],arguments.length),this[Zx]("skipValidation",e),this}strict(e){return xn("[boolean]",[e],arguments.length),In(this,NI,e!==!1,"f"),this}strictCommands(e){return xn("[boolean]",[e],arguments.length),In(this,LI,e!==!1,"f"),this}strictOptions(e){return xn("[boolean]",[e],arguments.length),In(this,FI,e!==!1,"f"),this}string(e){return xn("<array|string>",[e],arguments.length),this[Zx]("string",e),this[OI](e),this}terminalWidth(){return xn([],0),ue(this,Lr,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return xn("<object>",[e],arguments.length),In(this,BI,!1,"f"),ue(this,Lr,"f").y18n.updateLocale(e),this}usage(e,n,r,i){if(xn("<string|null|undefined> [string|boolean] [function|object] [function]",[e,n,r,i],arguments.length),n!==void 0){if(Iu(e,null,ue(this,Lr,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,n,r,i);throw new ms(".usage() description must start with $0 if being used as alias for .command()")}else return ue(this,jr,"f").usage(e),this}usageConfiguration(e){return xn("<object>",[e],arguments.length),In(this,sO,e,"f"),this}version(e,n,r){let i="version";if(xn("[boolean|string] [string] [string]",[e,n,r],arguments.length),ue(this,fg,"f")&&(this[hne](ue(this,fg,"f")),ue(this,jr,"f").version(void 0),In(this,fg,null,"f")),arguments.length===0)r=this[Awe](),e=i;else if(arguments.length===1){if(e===!1)return this;r=e,e=i}else arguments.length===2&&(r=n,n=void 0);return In(this,fg,typeof e=="string"?e:i,"f"),n=n||ue(this,jr,"f").deferY18nLookup("Show version number"),ue(this,jr,"f").version(r||void 0),this.boolean(ue(this,fg,"f")),this.describe(ue(this,fg,"f"),n),this}wrap(e){return xn("<number|null|undefined>",[e],arguments.length),ue(this,jr,"f").wrap(e),this}[(wa=new WeakMap,kI=new WeakMap,v8=new WeakMap,Wf=new WeakMap,m0=new WeakMap,ZQ=new WeakMap,Jx=new WeakMap,BI=new WeakMap,eO=new WeakMap,Gf=new WeakMap,tO=new WeakMap,Hf=new WeakMap,dg=new WeakMap,h0=new WeakMap,jf=new WeakMap,nO=new WeakMap,QS=new WeakMap,Dl=new WeakMap,Qn=new WeakMap,rO=new WeakMap,iO=new WeakMap,g0=new WeakMap,DI=new WeakMap,OS=new WeakMap,PI=new WeakMap,Xx=new WeakMap,oO=new WeakMap,Lr=new WeakMap,NI=new WeakMap,LI=new WeakMap,FI=new WeakMap,jr=new WeakMap,sO=new WeakMap,fg=new WeakMap,oa=new WeakMap,dwe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[fwe](){return{log:s((...e)=>{this[aO]()||console.log(...e),In(this,h0,!0,"f"),ue(this,Dl,"f").length&&In(this,Dl,ue(this,Dl,"f")+`
`,"f"),In(this,Dl,ue(this,Dl,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[aO]()||console.error(...e),In(this,h0,!0,"f"),ue(this,Dl,"f").length&&In(this,Dl,ue(this,Dl,"f")+`
`,"f"),In(this,Dl,ue(this,Dl,"f")+e.join(" "),"f")},"error")}}[hne](e){LS(ue(this,Qn,"f")).forEach(n=>{if((i=>i==="configObjects")(n))return;let r=ue(this,Qn,"f")[n];Array.isArray(r)?r.includes(e)&&r.splice(r.indexOf(e),1):typeof r=="object"&&delete r[e]}),delete ue(this,jr,"f").getDescriptions()[e]}[pwe](e,n,r){ue(this,eO,"f")[r]||(ue(this,Lr,"f").process.emitWarning(e,n),ue(this,eO,"f")[r]=!0)}[mwe](){ue(this,tO,"f").push({options:ue(this,Qn,"f"),configObjects:ue(this,Qn,"f").configObjects.slice(0),exitProcess:ue(this,Gf,"f"),groups:ue(this,dg,"f"),strict:ue(this,NI,"f"),strictCommands:ue(this,LI,"f"),strictOptions:ue(this,FI,"f"),completionCommand:ue(this,m0,"f"),output:ue(this,Dl,"f"),exitError:ue(this,Jx,"f"),hasOutput:ue(this,h0,"f"),parsed:this.parsed,parseFn:ue(this,g0,"f"),parseContext:ue(this,DI,"f")}),ue(this,jr,"f").freeze(),ue(this,oa,"f").freeze(),ue(this,wa,"f").freeze(),ue(this,Hf,"f").freeze()}[hwe](){let e="",n;return/\b(node|iojs|electron)(\.exe)?$/.test(ue(this,Lr,"f").process.argv()[0])?n=ue(this,Lr,"f").process.argv().slice(1,2):n=ue(this,Lr,"f").process.argv().slice(0,1),e=n.map(r=>{let i=this[Swe](ue(this,kI,"f"),r);return r.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<r.length?i:r}).join(" ").trim(),ue(this,Lr,"f").getEnv("_")&&ue(this,Lr,"f").getProcessArgvBin()===ue(this,Lr,"f").getEnv("_")&&(e=ue(this,Lr,"f").getEnv("_").replace(`${ue(this,Lr,"f").path.dirname(ue(this,Lr,"f").process.execPath())}/`,"")),e}[MI](){return ue(this,iO,"f")}[gwe](){return ue(this,sO,"f")}[gne](){if(!ue(this,BI,"f"))return;let e=ue(this,Lr,"f").getEnv("LC_ALL")||ue(this,Lr,"f").getEnv("LC_MESSAGES")||ue(this,Lr,"f").getEnv("LANG")||ue(this,Lr,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[Awe](){return this[Ane]().version||"unknown"}[ywe](e){let n=e["--"]?e["--"]:e._;for(let r=0,i;(i=n[r])!==void 0;r++)ue(this,Lr,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(n[r]=Number(i));return e}[Ane](e){let n=e||"*";if(ue(this,OS,"f")[n])return ue(this,OS,"f")[n];let r={};try{let i=e||ue(this,Lr,"f").mainFilename;!e&&ue(this,Lr,"f").path.extname(i)&&(i=ue(this,Lr,"f").path.dirname(i));let o=ue(this,Lr,"f").findUp(i,(a,l)=>{if(l.includes("package.json"))return"package.json"});Iu(o,void 0,ue(this,Lr,"f")),r=JSON.parse(ue(this,Lr,"f").readFileSync(o,"utf8"))}catch{}return ue(this,OS,"f")[n]=r||{},ue(this,OS,"f")[n]}[Zx](e,n){n=[].concat(n),n.forEach(r=>{r=this[xne](r),ue(this,Qn,"f")[e].push(r)})}[US](e,n,r,i){this[Cne](e,n,r,i,(o,a,l)=>{ue(this,Qn,"f")[o][a]=l})}[yne](e,n,r,i){this[Cne](e,n,r,i,(o,a,l)=>{ue(this,Qn,"f")[o][a]=(ue(this,Qn,"f")[o][a]||[]).concat(l)})}[Cne](e,n,r,i,o){if(Array.isArray(r))r.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(r))for(let a of LS(r))e(a,r[a]);else o(n,this[xne](r),i)}[xne](e){return e==="__proto__"?"___proto___":e}[vne](e,n){return this[US](this[vne].bind(this),"key",e,n),this}[bne](){var e,n,r,i,o,a,l,c,u,d,p,m;let h=ue(this,tO,"f").pop();Iu(h,void 0,ue(this,Lr,"f"));let g;e=this,n=this,r=this,i=this,o=this,a=this,l=this,c=this,u=this,d=this,p=this,m=this,{options:{set value(y){In(e,Qn,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){In(n,Gf,y,"f")}}.value,groups:{set value(y){In(r,dg,y,"f")}}.value,output:{set value(y){In(i,Dl,y,"f")}}.value,exitError:{set value(y){In(o,Jx,y,"f")}}.value,hasOutput:{set value(y){In(a,h0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){In(l,NI,y,"f")}}.value,strictCommands:{set value(y){In(c,LI,y,"f")}}.value,strictOptions:{set value(y){In(u,FI,y,"f")}}.value,completionCommand:{set value(y){In(d,m0,y,"f")}}.value,parseFn:{set value(y){In(p,g0,y,"f")}}.value,parseContext:{set value(y){In(m,DI,y,"f")}}.value}=h,ue(this,Qn,"f").configObjects=g,ue(this,jr,"f").unfreeze(),ue(this,oa,"f").unfreeze(),ue(this,wa,"f").unfreeze(),ue(this,Hf,"f").unfreeze()}[Cwe](e,n){return RI(n,r=>(e(r),r))}getInternalMethods(){return{getCommandInstance:this[xwe].bind(this),getContext:this[vwe].bind(this),getHasOutput:this[bwe].bind(this),getLoggerInstance:this[Ewe].bind(this),getParseContext:this[Iwe].bind(this),getParserConfiguration:this[MI].bind(this),getUsageConfiguration:this[gwe].bind(this),getUsageInstance:this[Twe].bind(this),getValidationInstance:this[wwe].bind(this),hasParseCallback:this[aO].bind(this),isGlobalContext:this[_we].bind(this),postProcess:this[QI].bind(this),reset:this[Ene].bind(this),runValidation:this[Ine].bind(this),runYargsParserAndExecuteCommands:this[b8].bind(this),setHasOutput:this[Rwe].bind(this)}}[xwe](){return ue(this,wa,"f")}[vwe](){return ue(this,v8,"f")}[bwe](){return ue(this,h0,"f")}[Ewe](){return ue(this,QS,"f")}[Iwe](){return ue(this,DI,"f")||{}}[Twe](){return ue(this,jr,"f")}[wwe](){return ue(this,oa,"f")}[aO](){return!!ue(this,g0,"f")}[_we](){return ue(this,nO,"f")}[QI](e,n,r,i){return r||hs(e)||(n||(e=this[dwe](e)),(this[MI]()["parse-positional-numbers"]||this[MI]()["parse-positional-numbers"]===void 0)&&(e=this[ywe](e)),i&&(e=SI(e,this,ue(this,Hf,"f").getMiddleware(),!1))),e}[Ene](e={}){In(this,Qn,ue(this,Qn,"f")||{},"f");let n={};n.local=ue(this,Qn,"f").local||[],n.configObjects=ue(this,Qn,"f").configObjects||[];let r={};n.local.forEach(a=>{r[a]=!0,(e[a]||[]).forEach(l=>{r[l]=!0})}),Object.assign(ue(this,PI,"f"),Object.keys(ue(this,dg,"f")).reduce((a,l)=>{let c=ue(this,dg,"f")[l].filter(u=>!(u in r));return c.length>0&&(a[l]=c),a},{})),In(this,dg,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{n[a]=(ue(this,Qn,"f")[a]||[]).filter(l=>!r[l])}),o.forEach(a=>{n[a]=Yx(ue(this,Qn,"f")[a],l=>!r[l])}),n.envPrefix=ue(this,Qn,"f").envPrefix,In(this,Qn,n,"f"),In(this,jr,ue(this,jr,"f")?ue(this,jr,"f").reset(r):rwe(this,ue(this,Lr,"f")),"f"),In(this,oa,ue(this,oa,"f")?ue(this,oa,"f").reset(r):cwe(this,ue(this,jr,"f"),ue(this,Lr,"f")),"f"),In(this,wa,ue(this,wa,"f")?ue(this,wa,"f").reset():ewe(ue(this,jr,"f"),ue(this,oa,"f"),ue(this,Hf,"f"),ue(this,Lr,"f")),"f"),ue(this,Wf,"f")||In(this,Wf,swe(this,ue(this,jr,"f"),ue(this,wa,"f"),ue(this,Lr,"f")),"f"),ue(this,Hf,"f").reset(),In(this,m0,null,"f"),In(this,Dl,"","f"),In(this,Jx,null,"f"),In(this,h0,!1,"f"),this.parsed=!1,this}[Swe](e,n){return ue(this,Lr,"f").path.relative(e,n)}[b8](e,n,r,i=0,o=!1){let a=!!r||o;e=e||ue(this,Xx,"f"),ue(this,Qn,"f").__=ue(this,Lr,"f").y18n.__,ue(this,Qn,"f").configuration=this[MI]();let l=!!ue(this,Qn,"f").configuration["populate--"],c=Object.assign({},ue(this,Qn,"f").configuration,{"populate--":!0}),u=ue(this,Lr,"f").Parser.detailed(e,Object.assign({},ue(this,Qn,"f"),{configuration:{"parse-positional-numbers":!1,...c}})),d=Object.assign(u.argv,ue(this,DI,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(y=>{y===ue(this,jf,"f")&&d[y]?h=!0:y===ue(this,fg,"f")&&d[y]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&ue(this,jr,"f").clearCachedHelpMessage();try{if(this[gne](),n)return this[QI](d,l,!!r,!1);ue(this,jf,"f")&&[ue(this,jf,"f")].concat(m[ue(this,jf,"f")]||[]).filter(_=>_.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),In(this,nO,!1,"f");let y=ue(this,wa,"f").getCommands(),v=ue(this,Wf,"f").completionKey in d,b=h||v||o;if(d._.length){if(y.length){let E;for(let _=i||0,k;d._[_]!==void 0;_++)if(k=String(d._[_]),y.includes(k)&&k!==ue(this,m0,"f")){let D=ue(this,wa,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[QI](D,l,!!r,!1)}else if(!E&&k!==ue(this,m0,"f")){E=k;break}!ue(this,wa,"f").hasDefaultCommand()&&ue(this,oO,"f")&&E&&!b&&ue(this,oa,"f").recommendCommands(E,y)}ue(this,m0,"f")&&d._.includes(ue(this,m0,"f"))&&!v&&(ue(this,Gf,"f")&&Kx(!0),this.showCompletionScript(),this.exit(0))}if(ue(this,wa,"f").hasDefaultCommand()&&!b){let E=ue(this,wa,"f").runCommand(null,this,u,0,o,h||g||o);return this[QI](E,l,!!r,!1)}if(v){ue(this,Gf,"f")&&Kx(!0),e=[].concat(e);let E=e.slice(e.indexOf(`--${ue(this,Wf,"f").completionKey}`)+1);return ue(this,Wf,"f").getCompletion(E,(_,k)=>{if(_)throw new ms(_.message);(k||[]).forEach(D=>{ue(this,QS,"f").log(D)}),this.exit(0)}),this[QI](d,!l,!!r,!1)}if(ue(this,h0,"f")||(h?(ue(this,Gf,"f")&&Kx(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(ue(this,Gf,"f")&&Kx(!0),a=!0,ue(this,jr,"f").showVersion("log"),this.exit(0))),!a&&ue(this,Qn,"f").skipValidation.length>0&&(a=Object.keys(d).some(E=>ue(this,Qn,"f").skipValidation.indexOf(E)>=0&&d[E]===!0)),!a){if(u.error)throw new ms(u.error.message);if(!v){let E=this[Ine](m,{},u.error);r||(p=SI(d,this,ue(this,Hf,"f").getMiddleware(),!0)),p=this[Cwe](E,p??d),hs(p)&&!r&&(p=p.then(()=>SI(d,this,ue(this,Hf,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof ms)ue(this,jr,"f").fail(y.message,y);else throw y}return this[QI](p??d,l,!!r,!0)}[Ine](e,n,r,i){let o={...this.getDemandedOptions()};return a=>{if(r)throw new ms(r.message);ue(this,oa,"f").nonOptionCount(a),ue(this,oa,"f").requiredArguments(a,o);let l=!1;ue(this,LI,"f")&&(l=ue(this,oa,"f").unknownCommands(a)),ue(this,NI,"f")&&!l?ue(this,oa,"f").unknownArguments(a,e,n,!!i):ue(this,FI,"f")&&ue(this,oa,"f").unknownArguments(a,e,{},!1,!1),ue(this,oa,"f").limitedChoices(a),ue(this,oa,"f").implications(a),ue(this,oa,"f").conflicting(a)}}[Rwe](){In(this,h0,!0,"f")}[OI](e){if(typeof e=="string")ue(this,Qn,"f").key[e]=!0;else for(let n of e)ue(this,Qn,"f").key[n]=!0}};function twe(t){return!!t&&typeof t.getInternalMethods=="function"}s(twe,"isYargsInstance");var Bft=kwe(YTe),Bwe=Bft;f();f();var E8="apps",wne="hosts",I8=class{constructor(e,n){this.ctx=e;this.persistenceManager=n}static{s(this,"AuthPersistence")}#e;setAuthAuthority(e){this.#e=e}async getAuthRecord({githubAppId:e}={}){let n=this.getAuthAuthority(),r=await this.persistenceManager.read(E8,this.authRecordKey(this.ctx,n,e));return!e&&!r?(e=this.ctx.get(Ia).fallbackAppId(),r=await this.persistenceManager.read(E8,this.authRecordKey(this.ctx,n,e))):e??=this.ctx.get(Ia).findAppIdToAuthenticate(),r?{...r,oauth_token:r.access_token||r.oauth_token,user:r.login||r.user,githubAppId:e}:await this.legacyAuthRecordMaybe(n)}async legacyAuthRecordMaybe(e){let n=await this.persistenceManager.read(wne,e);if(n){let r=this.ctx.get(Ia).fallbackAppId();return{...n,githubAppId:r}}}async saveAuthRecord(e,n=this.getAuthAuthority()){await this.persistenceManager.update(E8,this.authRecordKey(this.ctx,n,e.githubAppId),e)}async deleteAuthRecord(){let e=this.getAuthAuthority(),n=await this.getAuthRecord();if(n){let r=this.ctx.get(Ia).fallbackAppId();n.githubAppId===r&&await this.persistenceManager.delete(wne,e),await this.persistenceManager.delete(E8,this.authRecordKey(this.ctx,e)),await this.persistenceManager.delete(E8,this.authRecordKey(this.ctx,e,r))}}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(wne)}authRecordKey(e,n,r){let i=r??e.get(Ia).findAppIdToAuthenticate();return`${n}:${i}`}getAuthAuthority(){return this.#e??"github.com"}};f();f();var Dwe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function Pwe(t,e,n){let r=or.createAndMarkAsIssued({authSource:e,authType:n});return kt(t,Dwe.NewGitHubLogin,r)}s(Pwe,"telemetryNewGitHubLogin");function Nwe(t,e){let n=or.createAndMarkAsIssued({authType:e});return kt(t,Dwe.GitHubLoginSuccess,n)}s(Nwe,"telemetryGitHubLoginSuccess");var _ne=class extends ss{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function Dft(t,e,{serverUrl:n}){let r={method:"POST",headers:{Accept:"application/json",...Kd(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",n).href;try{i=await t.get(rr).fetch(o,r)}catch(a){throw a instanceof Error&&zk(a)?new ss(`Could not log in with device flow on ${n}: ${a.message}`):a}if(!i.ok)throw new ss(`Could not log in with device flow on ${n}: HTTP ${i.status}`);return await i.json()}s(Dft,"requestDeviceFlowStage1");async function Pft(t,e,n,{serverUrl:r}){let i={method:"POST",headers:{Accept:"application/json",...Kd(t)},json:{client_id:n,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(rr).fetch(new URL("login/oauth/access_token",r).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new _ne(a):new ss(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(Pft,"requestDeviceFlowStage2");async function Nft(t,e){Nwe(t,"deviceFlow");let r=await(await kf(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in r)throw new ss(`Error retrieving user information: ${String(r.errors)}`);return r}s(Nft,"requestUserInfo");var UI=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,n,r){try{return await this.getTokenUnguarded(e,n,r)}catch(i){throw e.get(yu).notifyUser(e,i),i}}async getTokenUnguarded(e,n,r){Pwe(e,"unknown","deviceFlow");let i=await Dft(e,n,r),o=(async()=>{let a=i.expires_in,l,c=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*c));let u=await Pft(e,i.device_code,n,r);if(a-=c,l=u.access_token,l){let d=await Nft(e,{...r,accessToken:l});return{...r,githubAppId:n,login:d.login,accessToken:l}}c=u.interval??c}throw new ss("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();var A0=class{static{s(this,"CitationManager")}},lO=class extends A0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,n){}};f();f();f();var Lft={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1,showInlineMessage:!1},Go=class{constructor(){this.capabilities={...Lft}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let n;for(n in e){let r=e[n];r!==void 0&&(this.capabilities[n]=r)}}getCapabilities(){return this.capabilities}};f();f();f();f();function _1(t,e){let n=y0(t,e);return n===-1?void 0:t[n]}s(_1,"findLastMonotonous");function y0(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(y0,"findLastIdxMonotonous");function Lwe(t,e){let n=qI(t,e);return n===t.length?void 0:t[n]}s(Lwe,"findFirstMonotonous");function qI(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(qI,"findFirstIdxMonotonousOrArrLen");var T8=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let r of this._array)if(this._prevFindLastPredicate(r)&&!e(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let n=y0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=n+1,n===-1?void 0:this._array[n]}};f();var Sne=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?cO.isErrorNoTelemetry(e)?new cO(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(n=>{n(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},Fwe=new Sne;function WI(t){Fwe.onUnexpectedError(t)}s(WI,"onBugIndicatingError");function qS(t){Fft(t)||Fwe.onUnexpectedError(t)}s(qS,"onUnexpectedError");var Rne="Canceled";function Fft(t){return t instanceof pg?!0:t instanceof Error&&t.name===Rne&&t.message===Rne}s(Fft,"isCancellationError");var pg=class extends Error{static{s(this,"CancellationError")}constructor(){super(Rne),this.name=this.message}};function w8(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(w8,"illegalArgument");function Mwe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(Mwe,"illegalState");var cO=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let n=new t;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},yr=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function GI(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}s(GI,"equals");function*WS(t,e){let n,r;for(let i of t)r!==void 0&&e(r,i)?n.push(i):(n&&(yield n),n=[i]),r=i;n&&(yield n)}s(WS,"groupAdjacentBy");function Owe(t,e){for(let n=0;n<=t.length;n++)e(n===0?void 0:t[n-1],n===t.length?void 0:t[n])}s(Owe,"forEachAdjacent");function Uwe(t,e){for(let n=0;n<t.length;n++)e(n===0?void 0:t[n-1],t[n],n+1===t.length?void 0:t[n+1])}s(Uwe,"forEachWithNeighbors");function qwe(t){return t.filter(e=>!!e)}s(qwe,"coalesce");function Wwe(t,e){for(let n of e)t.push(n)}s(Wwe,"pushMany");var Gwe;(l=>{function t(c){return c<0}l.isLessThan=t,s(t,"isLessThan");function e(c){return c<=0}l.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function n(c){return c>0}l.isGreaterThan=n,s(n,"isGreaterThan");function r(c){return c===0}l.isNeitherLessOrGreaterThan=r,s(r,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(Gwe||={});function C0(t,e){return(n,r)=>e(t(n),t(r))}s(C0,"compareBy");var x0=s((t,e)=>t-e,"numberComparator");function Hwe(t){return(e,n)=>-t(e,n)}s(Hwe,"reverseOrder");var uO=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let n=this.firstIdx;for(;n<this.items.length&&e(this.items[n]);)n++;let r=n===this.firstIdx?null:this.items.slice(this.firstIdx,n);return this.firstIdx=n,r}takeFromEndWhile(e){let n=this.lastIdx;for(;n>=0&&e(this.items[n]);)n--;let r=n===this.lastIdx?null:this.items.slice(n+1,this.lastIdx+1);return this.lastIdx=n,r}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let n=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,n}},Qwe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(n=>(e(n),!0))}toArray(){let e=[];return this.iterate(n=>(e.push(n),!0)),e}filter(e){return new t(n=>this.iterate(r=>e(r)?n(r):!0))}map(e){return new t(n=>this.iterate(r=>n(e(r))))}some(e){let n=!1;return this.iterate(r=>(n=e(r),!n)),n}findFirst(e){let n;return this.iterate(r=>e(r)?(n=r,!1):!0),n}findLast(e){let n;return this.iterate(r=>(e(r)&&(n=r),!0)),n}findLastMaxBy(e){let n,r=!0;return this.iterate(i=>((r||Gwe.isGreaterThan(e(i,n)))&&(r=!1,n=i),!0)),n}};f();function zwe(t,e){let n=Object.create(null);for(let r of t){let i=e(r),o=n[i];o||(o=n[i]=[]),o.push(r)}return n}s(zwe,"groupBy");var Vwe,$we,jwe=class{constructor(e,n){this.toKey=n;this._map=new Map;this[Vwe]="SetWithKey";for(let r of e)this.add(r)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let n=this.toKey(e);return this._map.set(n,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,n){this._map.forEach(r=>e.call(n,r,r,this))}[($we=Symbol.iterator,Vwe=Symbol.toStringTag,$we)](){return this.values()}};f();function kne(t,e){let n=this,r=!1,i;return function(){if(r)return i;if(r=!0,e)try{i=t.apply(n,arguments)}finally{e()}else i=t.apply(n,arguments);return i}}s(kne,"createSingleCallFunction");f();var Bne;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function n(){return e}_.empty=n,s(n,"empty");function*r(k){yield k}_.single=r,s(r,"single");function i(k){return t(k)?k:r(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let D=k.length-1;D>=0;D--)yield k[D]}_.reverse=a,s(a,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,s(l,"isEmpty");function c(k){return k[Symbol.iterator]().next().value}_.first=c,s(c,"first");function u(k,D){let N=0;for(let Q of k)if(D(Q,N++))return!0;return!1}_.some=u,s(u,"some");function d(k,D){for(let N of k)if(D(N))return N}_.find=d,s(d,"find");function*p(k,D){for(let N of k)D(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,D){let N=0;for(let Q of k)yield D(Q,N++)}_.map=m,s(m,"map");function*h(k,D){let N=0;for(let Q of k)yield*D(Q,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let D of k)yield*D}_.concat=g,s(g,"concat");function y(k,D,N){let Q=N;for(let Z of k)Q=D(Q,Z);return Q}_.reduce=y,s(y,"reduce");function*v(k,D,N=k.length){for(D<-k.length&&(D=0),D<0&&(D+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);D<N;D++)yield k[D]}_.slice=v,s(v,"slice");function b(k,D=Number.POSITIVE_INFINITY){let N=[];if(D===0)return[N,k];let Q=k[Symbol.iterator]();for(let Z=0;Z<D;Z++){let me=Q.next();if(me.done)return[N,_.empty()];N.push(me.value)}return[N,{[Symbol.iterator](){return Q}}]}_.consume=b,s(b,"consume");async function E(k){let D=[];for await(let N of k)D.push(N);return Promise.resolve(D)}_.asyncToArray=E,s(E,"asyncToArray")})(Bne||={});f();var Dne=class{constructor(e,n){this.uri=e;this.value=n}static{s(this,"ResourceMapEntry")}};function Qft(t){return Array.isArray(t)}s(Qft,"isEntries");var Kwe,dO=class t{constructor(e,n){this[Kwe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=n??t.defaultToKey;else if(Qft(e)){this.map=new Map,this.toKey=n??t.defaultToKey;for(let[r,i]of e)this.set(r,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,n){return this.map.set(this.toKey(e),new Dne(e,n)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,n){typeof n<"u"&&(e=e.bind(n));for(let[r,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(Kwe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},Jwe,Ywe=class{constructor(e,n){this[Jwe]="ResourceSet";!e||typeof e=="function"?this._map=new dO(e):(this._map=new dO(n),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,n){this._map.forEach((r,i)=>e.call(n,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(Jwe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var Xwe,Pne=class{constructor(){this[Xwe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=0){let r=this._map.get(e);if(r)return n!==0&&this.touch(r,n),r.value}set(e,n,r=0){let i=this._map.get(e);if(i)i.value=n,r!==0&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}[(Xwe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._tail,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.previous,r--;this._tail=n,this._size=r,n&&(n.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===2){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}},Nne=class extends Pne{static{s(this,"Cache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=2){return super.get(e,n)}peek(e){return super.get(e,0)}set(e,n){return super.set(e,n,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},fO=class extends Nne{static{s(this,"LRUCache")}constructor(e,n=1){super(e,n)}trim(e){this.trimOld(e)}set(e,n){return super.set(e,n),this.checkTrim(),this}};var GS=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,n){let r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(n)}delete(e,n){let r=this.map.get(e);r&&(r.delete(n),r.size===0&&this.map.delete(e))}forEach(e,n){let r=this.map.get(e);r&&r.forEach(n)}get(e){let n=this.map.get(e);return n||new Set}};var Oft=!1,HS=null;var Zwe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let n=this.livingDisposables.get(e);return n||(n={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,n)),n}trackDisposable(e){let n=this.getDisposableData(e);n.source||(n.source=new Error().stack)}setParent(e,n){let r=this.getDisposableData(e);r.parent=n}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,n){let r=n.get(e);if(r)return r;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),n):e;return n.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,r])=>r.source!==null&&!this.getRootParent(r,e).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(e=10,n){let r;if(n)r=n;else{let c=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,c).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(r=u.filter(p=>!(p.parent&&d.has(p.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function i(c){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=c.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new GS;for(let c of r){let u=i(c);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),c)}r.sort(C0(c=>c.idx,x0));let a="",l=0;for(let c of r.slice(0,e)){l++;let u=i(c),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${r.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=zwe([...g].map(v=>i(v)[p]),v=>v);delete y[u[p]];for(let[v,b]of Object.entries(y))d.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);d.unshift(m)}a+=`


==================== Leaking disposable ${l}/${r.length}: ${c.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return r.length>e&&(a+=`


... and ${r.length-e} more leaking disposables

`),{leaks:r,details:a}}};function Uft(t){HS=t}s(Uft,"setDisposableTracker");if(Oft){let t="__is_disposable_tracked__";Uft(new class{trackDisposable(e){let n=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(n)},3e3)}setParent(e,n){if(e&&e!==Ho.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ho.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function jS(t){return HS?.trackDisposable(t),t}s(jS,"trackDisposable");function VS(t){HS?.markAsDisposed(t)}s(VS,"markAsDisposed");function Lne(t,e){HS?.setParent(t,e)}s(Lne,"setParentOfDisposable");function qft(t,e){if(HS)for(let n of t)HS.setParent(n,e)}s(qft,"setParentOfDisposables");function e_e(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(e_e,"isDisposable");function pO(t){if(Bne.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(r){e.push(r)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(pO,"dispose");function t_e(...t){let e=_a(()=>pO(t));return qft(t,e),e}s(t_e,"combinedDisposable");function _a(t){let e=jS({dispose:kne(()=>{VS(e),t()})});return e}s(_a,"toDisposable");var Tu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;jS(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(VS(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{pO(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Lne(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Lne(e,null))}},Ho=class{constructor(){this._store=new Tu;jS(this),Lne(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){VS(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Vf=class extends Ho{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ea(e,n=>{this.processUserInfoQuotaSnapshot(n.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let n=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(n)try{let r=new URLSearchParams(n),i=parseInt(r.get("ent")||"0",10),o=parseFloat(r.get("ov")||"0.0"),a=r.get("ovPerm")==="true",l=parseFloat(r.get("rem")||"0.0"),c=r.get("rst"),u;c?u=new Date(c):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-l/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(r){console.error("Failed to parse quota header",r)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var n_e=Ve(require("events"));var mO="CompletionRequested",mg=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new n_e.default;notifyRequest(e,n,r,i,o){return this.#e.emit(mO,{completionId:n,completionState:e,telemetryData:r,cancellationToken:i,options:o})}onRequest(e){let n=Au(this.ctx,e,`event.${mO}`);return this.#e.on(mO,n),sr.Disposable.create(()=>this.#e.off(mO,n))}};f();var Fne=class extends Error{constructor(n){super(`No instance of ${n.name} has been registered`);this.ctor=n;this.name="UnregisteredContextError",this.code=n.name}static{s(this,"UnregisteredContextError")}},$S=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let n=this.tryGet(e);if(n)return n;throw new Fne(e)}tryGet(e){let n=this.instances.get(e);if(n)return n}set(e,n){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,n),this.instances.set(e,n)}forceSet(e,n){this.assertIsInstance(e,n),this.instances.set(e,n)}assertIsInstance(e,n){if(!(n instanceof e)){let r=JSON.stringify(n);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${r}).`)}}};f();f();f();var hO=class t{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let r of e)if(t.isIncremental(r)){let i=o_e(r.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+r.text+this._content.substring(a,this._content.length);let l=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,d=r_e(r.text,!1,o);if(c-l===d.length)for(let m=0,h=d.length;m<h;m++)u[m+l+1]=d[m];else d.length<1e4?u.splice(l+1,c-l,...d):this._lineOffsets=u=u.slice(0,l+1).concat(d,u.slice(c+1));let p=r.text.length-(a-o);if(p!==0)for(let m=l+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=r_e(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return e=this.ensureBeforeEOL(e,n[o]),{line:o,character:e-n[o]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line];if(e.character<=0)return r;let i=e.line+1<n.length?n[e.line+1]:this._content.length,o=Math.min(r+e.character,i);return this.ensureBeforeEOL(o,r)}ensureBeforeEOL(e,n){for(;e>n&&i_e(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},ev;(function(t){function e(i,o,a,l){return new hO(i,o,a,l)}s(e,"create"),t.create=e;function n(i,o,a){if(i instanceof hO)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(n,"update"),t.update=n;function r(i,o){let a=i.getText(),l=Mne(o.map(Wft),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),c=0,u=[];for(let d of l){let p=i.offsetAt(d.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&u.push(a.substring(c,p)),d.newText.length&&u.push(d.newText),c=i.offsetAt(d.range.end)}return u.push(a.substr(c)),u.join("")}s(r,"applyEdits"),t.applyEdits=r})(ev||(ev={}));function Mne(t,e){if(t.length<=1)return t;let n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);Mne(r,e),Mne(i,e);let o=0,a=0,l=0;for(;o<r.length&&a<i.length;)e(r[o],i[a])<=0?t[l++]=r[o++]:t[l++]=i[a++];for(;o<r.length;)t[l++]=r[o++];for(;a<i.length;)t[l++]=i[a++];return t}s(Mne,"mergeSort");function r_e(t,e,n=0){let r=e?[n]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);i_e(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}s(r_e,"computeLineOffsets");function i_e(t){return t===13||t===10}s(i_e,"isEOL");function o_e(t){let e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}s(o_e,"getWellformedRange");function Wft(t){let e=o_e(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(Wft,"getWellformedEdit");f();var s_e;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(s_e||(s_e={}));var Qne;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(Qne||(Qne={}));var a_e;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(a_e||(a_e={}));var gO;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(gO||(gO={}));var Hc;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=gO.MAX_VALUE),i===Number.MAX_VALUE&&(i=gO.MAX_VALUE),{line:r,character:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&je.uinteger(i.line)&&je.uinteger(i.character)}s(n,"is"),t.is=n})(Hc||(Hc={}));var Xo;(function(t){function e(r,i,o,a){if(je.uinteger(r)&&je.uinteger(i)&&je.uinteger(o)&&je.uinteger(a))return{start:Hc.create(r,i),end:Hc.create(o,a)};if(Hc.is(r)&&Hc.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&Hc.is(i.start)&&Hc.is(i.end)}s(n,"is"),t.is=n})(Xo||(Xo={}));var AO;(function(t){function e(r,i){return{uri:r,range:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&Xo.is(i.range)&&(je.string(i.uri)||je.undefined(i.uri))}s(n,"is"),t.is=n})(AO||(AO={}));var l_e;(function(t){function e(r,i,o,a){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&Xo.is(i.targetRange)&&je.string(i.targetUri)&&Xo.is(i.targetSelectionRange)&&(Xo.is(i.originSelectionRange)||je.undefined(i.originSelectionRange))}s(n,"is"),t.is=n})(l_e||(l_e={}));var One;(function(t){function e(r,i,o,a){return{red:r,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&je.numberRange(i.red,0,1)&&je.numberRange(i.green,0,1)&&je.numberRange(i.blue,0,1)&&je.numberRange(i.alpha,0,1)}s(n,"is"),t.is=n})(One||(One={}));var c_e;(function(t){function e(r,i){return{range:r,color:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&Xo.is(i.range)&&One.is(i.color)}s(n,"is"),t.is=n})(c_e||(c_e={}));var u_e;(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&je.string(i.label)&&(je.undefined(i.textEdit)||YS.is(i))&&(je.undefined(i.additionalTextEdits)||je.typedArray(i.additionalTextEdits,YS.is))}s(n,"is"),t.is=n})(u_e||(u_e={}));var d_e;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(d_e||(d_e={}));var f_e;(function(t){function e(r,i,o,a,l,c){let u={startLine:r,endLine:i};return je.defined(o)&&(u.startCharacter=o),je.defined(a)&&(u.endCharacter=a),je.defined(l)&&(u.kind=l),je.defined(c)&&(u.collapsedText=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&je.uinteger(i.startLine)&&je.uinteger(i.startLine)&&(je.undefined(i.startCharacter)||je.uinteger(i.startCharacter))&&(je.undefined(i.endCharacter)||je.uinteger(i.endCharacter))&&(je.undefined(i.kind)||je.string(i.kind))}s(n,"is"),t.is=n})(f_e||(f_e={}));var Une;(function(t){function e(r,i){return{location:r,message:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&AO.is(i.location)&&je.string(i.message)}s(n,"is"),t.is=n})(Une||(Une={}));var p_e;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(p_e||(p_e={}));var m_e;(function(t){t.Unnecessary=1,t.Deprecated=2})(m_e||(m_e={}));var h_e;(function(t){function e(n){let r=n;return je.objectLiteral(r)&&je.string(r.href)}s(e,"is"),t.is=e})(h_e||(h_e={}));var yO;(function(t){function e(r,i,o,a,l,c){let u={range:r,message:i};return je.defined(o)&&(u.severity=o),je.defined(a)&&(u.code=a),je.defined(l)&&(u.source=l),je.defined(c)&&(u.relatedInformation=c),u}s(e,"create"),t.create=e;function n(r){var i;let o=r;return je.defined(o)&&Xo.is(o.range)&&je.string(o.message)&&(je.number(o.severity)||je.undefined(o.severity))&&(je.integer(o.code)||je.string(o.code)||je.undefined(o.code))&&(je.undefined(o.codeDescription)||je.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(je.string(o.source)||je.undefined(o.source))&&(je.undefined(o.relatedInformation)||je.typedArray(o.relatedInformation,Une.is))}s(n,"is"),t.is=n})(yO||(yO={}));var zS;(function(t){function e(r,i,...o){let a={title:r,command:i};return je.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&je.string(i.title)&&je.string(i.command)}s(n,"is"),t.is=n})(zS||(zS={}));var YS;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function n(o,a){return{range:{start:o,end:o},newText:a}}s(n,"insert"),t.insert=n;function r(o){return{range:o,newText:""}}s(r,"del"),t.del=r;function i(o){let a=o;return je.objectLiteral(a)&&je.string(a.newText)&&Xo.is(a.range)}s(i,"is"),t.is=i})(YS||(YS={}));var qne;(function(t){function e(r,i,o){let a={label:r};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&je.string(i.label)&&(je.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(je.string(i.description)||i.description===void 0)}s(n,"is"),t.is=n})(qne||(qne={}));var KS;(function(t){function e(n){let r=n;return je.string(r)}s(e,"is"),t.is=e})(KS||(KS={}));var g_e;(function(t){function e(o,a,l){return{range:o,newText:a,annotationId:l}}s(e,"replace"),t.replace=e;function n(o,a,l){return{range:{start:o,end:o},newText:a,annotationId:l}}s(n,"insert"),t.insert=n;function r(o,a){return{range:o,newText:"",annotationId:a}}s(r,"del"),t.del=r;function i(o){let a=o;return YS.is(a)&&(qne.is(a.annotationId)||KS.is(a.annotationId))}s(i,"is"),t.is=i})(g_e||(g_e={}));var Wne;(function(t){function e(r,i){return{textDocument:r,edits:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&$ne.is(i.textDocument)&&Array.isArray(i.edits)}s(n,"is"),t.is=n})(Wne||(Wne={}));var Gne;(function(t){function e(r,i,o){let a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="create"&&je.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||je.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||je.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||KS.is(i.annotationId))}s(n,"is"),t.is=n})(Gne||(Gne={}));var Hne;(function(t){function e(r,i,o,a){let l={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(l.options=o),a!==void 0&&(l.annotationId=a),l}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="rename"&&je.string(i.oldUri)&&je.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||je.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||je.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||KS.is(i.annotationId))}s(n,"is"),t.is=n})(Hne||(Hne={}));var jne;(function(t){function e(r,i,o){let a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="delete"&&je.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||je.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||je.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||KS.is(i.annotationId))}s(n,"is"),t.is=n})(jne||(jne={}));var Vne;(function(t){function e(n){let r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>je.string(i.kind)?Gne.is(i)||Hne.is(i)||jne.is(i):Wne.is(i)))}s(e,"is"),t.is=e})(Vne||(Vne={}));var A_e;(function(t){function e(r){return{uri:r}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&je.string(i.uri)}s(n,"is"),t.is=n})(A_e||(A_e={}));var y_e;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&je.string(i.uri)&&je.integer(i.version)}s(n,"is"),t.is=n})(y_e||(y_e={}));var $ne;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&je.string(i.uri)&&(i.version===null||je.integer(i.version))}s(n,"is"),t.is=n})($ne||($ne={}));var C_e;(function(t){function e(r,i,o,a){return{uri:r,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&je.string(i.uri)&&je.string(i.languageId)&&je.integer(i.version)&&je.string(i.text)}s(n,"is"),t.is=n})(C_e||(C_e={}));var zne;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){let r=n;return r===t.PlainText||r===t.Markdown}s(e,"is"),t.is=e})(zne||(zne={}));var _8;(function(t){function e(n){let r=n;return je.objectLiteral(n)&&zne.is(r.kind)&&je.string(r.value)}s(e,"is"),t.is=e})(_8||(_8={}));var x_e;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(x_e||(x_e={}));var v_e;(function(t){t.PlainText=1,t.Snippet=2})(v_e||(v_e={}));var b_e;(function(t){t.Deprecated=1})(b_e||(b_e={}));var E_e;(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i&&je.string(i.newText)&&Xo.is(i.insert)&&Xo.is(i.replace)}s(n,"is"),t.is=n})(E_e||(E_e={}));var I_e;(function(t){t.asIs=1,t.adjustIndentation=2})(I_e||(I_e={}));var T_e;(function(t){function e(n){let r=n;return r&&(je.string(r.detail)||r.detail===void 0)&&(je.string(r.description)||r.description===void 0)}s(e,"is"),t.is=e})(T_e||(T_e={}));var w_e;(function(t){function e(n){return{label:n}}s(e,"create"),t.create=e})(w_e||(w_e={}));var __e;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}s(e,"create"),t.create=e})(__e||(__e={}));var CO;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function n(r){let i=r;return je.string(i)||je.objectLiteral(i)&&je.string(i.language)&&je.string(i.value)}s(n,"is"),t.is=n})(CO||(CO={}));var S_e;(function(t){function e(n){let r=n;return!!r&&je.objectLiteral(r)&&(_8.is(r.contents)||CO.is(r.contents)||je.typedArray(r.contents,CO.is))&&(n.range===void 0||Xo.is(n.range))}s(e,"is"),t.is=e})(S_e||(S_e={}));var R_e;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}s(e,"create"),t.create=e})(R_e||(R_e={}));var k_e;(function(t){function e(n,r,...i){let o={label:n};return je.defined(r)&&(o.documentation=r),je.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(k_e||(k_e={}));var B_e;(function(t){t.Text=1,t.Read=2,t.Write=3})(B_e||(B_e={}));var D_e;(function(t){function e(n,r){let i={range:n};return je.number(r)&&(i.kind=r),i}s(e,"create"),t.create=e})(D_e||(D_e={}));var P_e;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(P_e||(P_e={}));var N_e;(function(t){t.Deprecated=1})(N_e||(N_e={}));var L_e;(function(t){function e(n,r,i,o,a){let l={name:n,kind:r,location:{uri:o,range:i}};return a&&(l.containerName=a),l}s(e,"create"),t.create=e})(L_e||(L_e={}));var F_e;(function(t){function e(n,r,i,o){return o!==void 0?{name:n,kind:r,location:{uri:i,range:o}}:{name:n,kind:r,location:{uri:i}}}s(e,"create"),t.create=e})(F_e||(F_e={}));var M_e;(function(t){function e(r,i,o,a,l,c){let u={name:r,detail:i,kind:o,range:a,selectionRange:l};return c!==void 0&&(u.children=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return i&&je.string(i.name)&&je.number(i.kind)&&Xo.is(i.range)&&Xo.is(i.selectionRange)&&(i.detail===void 0||je.string(i.detail))&&(i.deprecated===void 0||je.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(n,"is"),t.is=n})(M_e||(M_e={}));var Q_e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Q_e||(Q_e={}));var xO;(function(t){t.Invoked=1,t.Automatic=2})(xO||(xO={}));var O_e;(function(t){function e(r,i,o){let a={diagnostics:r};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&je.typedArray(i.diagnostics,yO.is)&&(i.only===void 0||je.typedArray(i.only,je.string))&&(i.triggerKind===void 0||i.triggerKind===xO.Invoked||i.triggerKind===xO.Automatic)}s(n,"is"),t.is=n})(O_e||(O_e={}));var U_e;(function(t){function e(r,i,o){let a={title:r},l=!0;return typeof i=="string"?(l=!1,a.kind=i):zS.is(i)?a.command=i:a.edit=i,l&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&je.string(i.title)&&(i.diagnostics===void 0||je.typedArray(i.diagnostics,yO.is))&&(i.kind===void 0||je.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||zS.is(i.command))&&(i.isPreferred===void 0||je.boolean(i.isPreferred))&&(i.edit===void 0||Vne.is(i.edit))}s(n,"is"),t.is=n})(U_e||(U_e={}));var q_e;(function(t){function e(r,i){let o={range:r};return je.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&Xo.is(i.range)&&(je.undefined(i.command)||zS.is(i.command))}s(n,"is"),t.is=n})(q_e||(q_e={}));var W_e;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&je.uinteger(i.tabSize)&&je.boolean(i.insertSpaces)}s(n,"is"),t.is=n})(W_e||(W_e={}));var G_e;(function(t){function e(r,i,o){return{range:r,target:i,data:o}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&Xo.is(i.range)&&(je.undefined(i.target)||je.string(i.target))}s(n,"is"),t.is=n})(G_e||(G_e={}));var H_e;(function(t){function e(r,i){return{range:r,parent:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&Xo.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(n,"is"),t.is=n})(H_e||(H_e={}));var j_e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(j_e||(j_e={}));var V_e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(V_e||(V_e={}));var $_e;(function(t){function e(n){let r=n;return je.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}s(e,"is"),t.is=e})($_e||($_e={}));var z_e;(function(t){function e(r,i){return{range:r,text:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&Xo.is(i.range)&&je.string(i.text)}s(n,"is"),t.is=n})(z_e||(z_e={}));var Y_e;(function(t){function e(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&Xo.is(i.range)&&je.boolean(i.caseSensitiveLookup)&&(je.string(i.variableName)||i.variableName===void 0)}s(n,"is"),t.is=n})(Y_e||(Y_e={}));var K_e;(function(t){function e(r,i){return{range:r,expression:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&Xo.is(i.range)&&(je.string(i.expression)||i.expression===void 0)}s(n,"is"),t.is=n})(K_e||(K_e={}));var J_e;(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}s(e,"create"),t.create=e;function n(r){let i=r;return je.defined(i)&&Xo.is(r.stoppedLocation)}s(n,"is"),t.is=n})(J_e||(J_e={}));var Yne;(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})(Yne||(Yne={}));var Kne;(function(t){function e(r){return{value:r}}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&(i.tooltip===void 0||je.string(i.tooltip)||_8.is(i.tooltip))&&(i.location===void 0||AO.is(i.location))&&(i.command===void 0||zS.is(i.command))}s(n,"is"),t.is=n})(Kne||(Kne={}));var X_e;(function(t){function e(r,i,o){let a={position:r,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return je.objectLiteral(i)&&Hc.is(i.position)&&(je.string(i.label)||je.typedArray(i.label,Kne.is))&&(i.kind===void 0||Yne.is(i.kind))&&i.textEdits===void 0||je.typedArray(i.textEdits,YS.is)&&(i.tooltip===void 0||je.string(i.tooltip)||_8.is(i.tooltip))&&(i.paddingLeft===void 0||je.boolean(i.paddingLeft))&&(i.paddingRight===void 0||je.boolean(i.paddingRight))}s(n,"is"),t.is=n})(X_e||(X_e={}));var Z_e;(function(t){function e(n){return{kind:"snippet",value:n}}s(e,"createSnippet"),t.createSnippet=e})(Z_e||(Z_e={}));var eSe;(function(t){function e(n,r,i,o){return{insertText:n,filterText:r,range:i,command:o}}s(e,"create"),t.create=e})(eSe||(eSe={}));var tSe;(function(t){function e(n){return{items:n}}s(e,"create"),t.create=e})(tSe||(tSe={}));var nSe;(function(t){t.Invoked=0,t.Automatic=1})(nSe||(nSe={}));var rSe;(function(t){function e(n,r){return{range:n,text:r}}s(e,"create"),t.create=e})(rSe||(rSe={}));var iSe;(function(t){function e(n,r){return{triggerKind:n,selectedCompletionInfo:r}}s(e,"create"),t.create=e})(iSe||(iSe={}));var oSe;(function(t){function e(n){let r=n;return je.objectLiteral(r)&&Qne.is(r.uri)&&je.string(r.name)}s(e,"is"),t.is=e})(oSe||(oSe={}));var sSe;(function(t){function e(o,a,l,c){return new Jne(o,a,l,c)}s(e,"create"),t.create=e;function n(o){let a=o;return!!(je.defined(a)&&je.string(a.uri)&&(je.undefined(a.languageId)||je.string(a.languageId))&&je.uinteger(a.lineCount)&&je.func(a.getText)&&je.func(a.positionAt)&&je.func(a.offsetAt))}s(n,"is"),t.is=n;function r(o,a){let l=o.getText(),c=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=l.length;for(let d=c.length-1;d>=0;d--){let p=c[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)l=l.substring(0,m)+p.newText+l.substring(h,l.length);else throw new Error("Overlapping edit");u=m}return l}s(r,"applyEdits"),t.applyEdits=r;function i(o,a){if(o.length<=1)return o;let l=o.length/2|0,c=o.slice(0,l),u=o.slice(l);i(c,a),i(u,a);let d=0,p=0,m=0;for(;d<c.length&&p<u.length;)a(c[d],u[p])<=0?o[m++]=c[d++]:o[m++]=u[p++];for(;d<c.length;)o[m++]=c[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(sSe||(sSe={}));var Jne=class{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],n=this._content,r=!0;for(let i=0;i<n.length;i++){r&&(e.push(i),r=!1);let o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Hc.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return Hc.create(o,e-n[o])}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}},je;(function(t){let e=Object.prototype.toString;function n(h){return typeof h<"u"}s(n,"defined"),t.defined=n;function r(h){return typeof h>"u"}s(r,"undefined"),t.undefined=r;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function l(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(l,"numberRange"),t.numberRange=l;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(c,"integer"),t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(je||(je={}));var Po=class{static{s(this,"LocationFactory")}static{this.range=Xo.create.bind(Xo)}static{this.position=Hc.create.bind(Hc)}},S1=class t{constructor(e,n,r){this.uri=e;this._textDocument=n;this.detectedLanguageId=r}static{s(this,"CopilotTextDocument")}static withChanges(e,n,r){let i=ev.create(e.clientUri,e.clientLanguageId,r,e.getText());return ev.update(i,n,r),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let n=ev.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return ev.update(n,e.map(r=>({text:r.newText,range:r.range})),this.version),new t(this.uri,n,this.detectedLanguageId)}static create(e,n,r,i,o=qx({uri:e,languageId:n})){return new t(Bl(e),ev.create(e,n,r,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let n=typeof e=="number"?e:e.line;if(n<0||n>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let r=Xo.create(n,0,n+1,0),i=this.getText(r).replace(/\r\n$|\r$|\n$/g,""),o=Xo.create(Hc.create(n,0),Hc.create(n,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var S8={isBlocked:!1,reason:"VALID_FILE"},vO={isBlocked:!1,reason:"NO_MATCHING_POLICY"},aSe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},HI={all:"all",repo:"repo"},R1=new _t("contentExclusion");f();f();var bO=class{static{s(this,"PolicyEvaluator")}};f();f();f();var lSe=new _t("repository"),jI=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let n=this.getAll(e);return n?n[n.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,n){e in this.data||(this.data[e]=[]),this.data[e].push(n)}getSectionValues(e,n){let r=`${e}.`.toLowerCase(),i=`.${n}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(r)&&o.endsWith(i)).map(o=>o.slice(r.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((n,[r,i])=>(i.forEach(o=>n.add(r,o)),n),new t)}normalizeKey(e){let n=e.split(".");return n[0]=n[0].toLowerCase(),n[n.length-1]=n[n.length-1].toLowerCase(),n.join(".")}},Em=class{static{s(this,"GitConfigLoader")}},EO=class extends Em{constructor(n){super();this.loaders=n}static{s(this,"GitFallbackConfigLoader")}async getConfig(n,r){for(let i of this.loaders){let o=await i.getConfig(n,r);if(o)return o}}};f();var cSe=require("os");var IO=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Px.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Px.parse(this.url)}catch(n){this._error=n;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let n=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");n&&(this._hostname=n)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,cSe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let n=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(n),this.setPath(this.url.substring(n.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var TO=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,n){let r=await e.get(Em).getConfig(e,n);if(!r)return;let i=this.getRemotes(r),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let n=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(r=>({name:r,url:new IO(this.applyInsteadOfRules(n,e.get(`remote.${r}.url`)??""))})).filter(r=>r.url.isRemote())}applyInsteadOfRules(e,n){for(let r of e)if(n.startsWith(r.insteadOf))return r.base+n.slice(r.insteadOf.length);return n}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(n=>({base:n,insteadOf:e.get(`url.${n}.insteadof`)})).sort((n,r)=>r.base.length-n.base.length)}};var Gft=100,Xne=class{constructor(e,n){this.baseFolder=e;this.remote=n;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let n=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");n&&(this._tenant=n.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let n=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");n?(this._adoOrganization=n.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},k1=class t{constructor(e){this.ctx=e;this.remoteResolver=new TO;this.cache=new Jn(Gft)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let n,r=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(r,o),o}r.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(r,i),i;n=e,e=ud(e)}while(e!==n);this.updateCache(r,void 0)}updateCache(e,n){e.forEach(r=>this.cache.set(r,n))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Xne(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,n){try{let r=e.get(go),i=vo(n,".git");if((await r.stat(i)).type&1)return await this.getConfigLocationForGitfile(r,n,i);let a=vo(i,"config");return await r.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,n,r){let o=(await e.readFileString(r)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=dI(n,o[1]),l=vo(a,"config");if(await this.tryStat(e,l)!==void 0)return l;let c=vo(a,"config.worktree");if(await this.tryStat(e,c)!==void 0)return c;let u=vo(a,"commondir");a=dI(a,(await e.readFileString(u)).trimEnd());let d=vo(a,"config");return await e.stat(d),d}static async tryStat(e,n){try{return await e.stat(n)}catch{return}}};f();var uSe=s((t,e)=>{if(Mx.Check(t,e))return e;let n=`Typebox schema validation failed:
${[...Mx.Errors(t,e)].map(r=>`${r.path} ${r.message}`).join(`
`)}`;throw new Error(n)},"assertShape");f();f();f();var wO=new WeakMap;function _O(t,e){if(t==null||typeof t!="object")return String(t);let n,r="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&wO.has(t))return wO.get(t);switch(wO.set(t,"~"+ ++e),o){case"[object Set]":n=Array.from(t);case"[object Array]":for(n||(n=t),r+="a";i<n.length;r+=_O(n[i++],e));break;case"[object Object]":for(r+="o",n=Object.keys(t).sort();i<n.length;r+=n[i]+_O(t[n[i++]],e));break;case"[object Map]":for(r+="o",n=Array.from(t.keys()).sort();i<n.length;r+=n[i]+_O(t.get(n[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return wO.set(t,r),r}s(_O,"t");function SO(t){return _O(t,0)}s(SO,"r");var Zne=new WeakMap;function dSe(t,e,n=SO(e)){let r,i,o=Zne.get(t);o||(Zne.set(t,o=[[],i=[],r=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=r[d++];u.r(m));}s(p,"o"),Zne.delete(t),t(i).then(function(m){if(m.length!==r.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?r[d-1].r(u):r[d-1].s(u));},p)}));let a=o[0].indexOf(n);if(~a)return o[2][a].p;let l=o[0].push(n)-1,c=o[2][l]={};return o[1][l]=e,c.p=new Promise(function(u,d){c.s=u,c.r=d})}s(dSe,"n");var fSe=new WeakMap;function Hft(t,e,n,r=SO(n)){if(e||(e=fSe.get(t)),e||fSe.set(t,e=new Map),e.has(r))return Promise.resolve(e.get(r));let i=dSe(t,n,r);return e.set(r,i),i.catch(()=>e.delete(r)),i}s(Hft,"n");function pSe(t,e){return function(n,r){return Hft(t,e,n,r)}}s(pSe,"o");f();var NSe=Ve(wSe(),1);f();var B8=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var Xft={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},D8=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),Zft=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),_Se=s(t=>t.join(""),"rangesToString"),SSe=s((t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=n+1,a=!1,l=!1,c=!1,u=!1,d=n,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===n+1){u=!0,o++;continue}if(y==="]"&&a&&!c){d=o+1;break}if(a=!0,y==="\\"&&!c){c=!0,o++;continue}if(y==="["&&!c){for(let[v,[b,E,_]]of Object.entries(Xft))if(t.startsWith(v,o)){if(p)return["$.",!1,t.length-n,!0];o+=v.length,_?i.push(b):r.push(b),l=l||E;continue e}}if(c=!1,p){y>p?r.push(D8(p)+"-"+D8(y)):y===p&&r.push(D8(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){r.push(D8(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}r.push(D8(y)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let y=r[0].length===2?r[0].slice(-1):r[0];return[Zft(y),!1,d-n,!1]}let m="["+(u?"^":"")+_Se(r)+"]",h="["+(u?"":"^")+_Se(i)+"]";return[r.length&&i.length?"("+m+"|"+h+")":r.length?m:h,l,d-n,!0]},"parseClass");f();var tv=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var ept=new Set(["!","?","+","*","@"]),RSe=s(t=>ept.has(t),"isExtglobType"),tpt="(?!(?:^|/)\\.\\.?(?:$|/))",RO="(?!\\.)",npt=new Set(["[","."]),rpt=new Set(["..","."]),ipt=new Set("().*{}+?[]^$\\!"),opt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),nre="[^/]",kSe=nre+"*?",BSe=nre+"+?",JS=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#r=[];#n;#o;#s;#a=!1;#l;#c;#d=!1;constructor(e,n,r={}){this.type=e,e&&(this.#t=!0),this.#n=n,this.#e=this.#n?this.#n.#e:this,this.#l=this.#e===this?r:this.#e.#l,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#n?this.#n.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#c=this.#r.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let n=e,r=n.#n;for(;r;){for(let i=n.#o+1;!r.type&&i<r.#r.length;i++)for(let o of e.#r){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#r[i])}n=r,r=n.#n}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#n===this))throw new Error("invalid part: "+n);this.#r.push(n)}}toJSON(){let e=this.type===null?this.#r.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#r.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#n?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#n?.isStart())return!1;if(this.#o===0)return!0;let e=this.#n;for(let n=0;n<this.#o;n++){let r=e.#r[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#n?.type==="!")return!0;if(!this.#n?.isEnd())return!1;if(!this.type)return this.#n?.isEnd();let e=this.#n?this.#n.#r.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#r)n.copyIn(r);return n}static#u(e,n,r,i){let o=!1,a=!1,l=-1,c=!1;if(n.type===null){let h=r,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===l+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(h===l+2&&c)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,l=h,c=!1,g+=y;continue}if(!i.noext&&RSe(y)&&e.charAt(h)==="("){n.push(g),g="";let v=new t(y,n);h=t.#u(e,v,h,i),n.push(v);continue}g+=y}return n.push(g),h}let u=r+1,d=new t(null,n),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===l+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(u===l+2&&c)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,l=u,c=!1,m+=h;continue}if(RSe(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,n);continue}if(h===")")return m===""&&n.#r.length===0&&(n.#d=!0),d.push(m),m="",n.push(...p,d),u;m+=h}return n.type=null,n.#t=void 0,n.#r=[e.substring(r-1)],u}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#u(e,r,0,n),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[n,r,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let l=(this.#l.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${n}$`,l),{_src:n,_glob:e})}get options(){return this.#l}toRegExpSource(e){let n=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#r.map(h=>{let[g,y,v,b]=typeof h=="string"?t.#m(h,this.#t,c):h.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,g}).join(""),d="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&rpt.has(this.#r[0]))){let g=npt,y=n&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),v=!n&&!e&&g.has(u.charAt(0));d=y?tpt:v?RO:""}let p="";return this.isEnd()&&this.#e.#a&&this.#n?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,tv(u),this.#t=!!this.#t,this.#i]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(n);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#r=[c],this.type=null,this.#t=void 0,[c,tv(this.toString()),!1,!1]}let a=!r||e||n||!RO?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!n?RO:"")+BSe;else{let c=this.type==="!"?"))"+(this.isStart()&&!n&&!e?RO:"")+kSe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+c}return[l,tv(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#r.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,i,o,a]=n.toRegExpSource(e);return this.#i=this.#i||a,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#m(e,n,r=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let c=e.charAt(l);if(i){i=!1,o+=(ipt.has(c)?"\\":"")+c;continue}if(c==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,p,m]=SSe(e,l);if(p){o+=u,a=a||d,l+=p-1,n=n||m;continue}}if(c==="*"){r&&e==="*"?o+=BSe:o+=kSe,n=!0;continue}if(c==="?"){o+=nre,n=!0;continue}o+=opt(c)}return[o,tv(e),!!n,a]}};f();var rre=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Sa=s((t,e,n={})=>(B8(e),!n.nocomment&&e.charAt(0)==="#"?!1:new XS(e,n).match(t)),"minimatch"),spt=/^\*+([^+@!?\*\[\(]*)$/,apt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),lpt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),cpt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),upt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),dpt=/^\*+\.\*+$/,fpt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),ppt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),mpt=/^\.\*+$/,hpt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),gpt=/^\*+$/,Apt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),ypt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),Cpt=/^\?+([^+@!?\*\[\(]*)?$/,xpt=s(([t,e=""])=>{let n=LSe([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocase"),vpt=s(([t,e=""])=>{let n=FSe([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocaseDot"),bpt=s(([t,e=""])=>{let n=FSe([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTestDot"),Ept=s(([t,e=""])=>{let n=LSe([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTest"),LSe=s(([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},"qmarksTestNoExt"),FSe=s(([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},"qmarksTestNoExtDot"),MSe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",DSe={win32:{sep:"\\"},posix:{sep:"/"}},Ipt=MSe==="win32"?DSe.win32.sep:DSe.posix.sep;Sa.sep=Ipt;var zf=Symbol("globstar **");Sa.GLOBSTAR=zf;var Tpt="[^/]",wpt=Tpt+"*?",_pt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Spt="(?:(?!(?:\\/|^)\\.).)*?",Rpt=s((t,e={})=>n=>Sa(n,t,e),"filter");Sa.filter=Rpt;var $f=s((t,e={})=>Object.assign({},t,e),"ext"),kpt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Sa;let e=Sa;return Object.assign(s((r,i,o={})=>e(r,i,$f(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,$f(t,o))}static defaults(i){return e.defaults($f(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,$f(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,$f(t,o))}},unescape:s((r,i={})=>e.unescape(r,$f(t,i)),"unescape"),escape:s((r,i={})=>e.escape(r,$f(t,i)),"escape"),filter:s((r,i={})=>e.filter(r,$f(t,i)),"filter"),defaults:s(r=>e.defaults($f(t,r)),"defaults"),makeRe:s((r,i={})=>e.makeRe(r,$f(t,i)),"makeRe"),braceExpand:s((r,i={})=>e.braceExpand(r,$f(t,i)),"braceExpand"),match:s((r,i,o={})=>e.match(r,i,$f(t,o)),"match"),sep:e.sep,GLOBSTAR:zf})},"defaults");Sa.defaults=kpt;var QSe=s((t,e={})=>(B8(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,NSe.default)(t)),"braceExpand");Sa.braceExpand=QSe;var Bpt=s((t,e={})=>new XS(t,e).makeRe(),"makeRe");Sa.makeRe=Bpt;var Dpt=s((t,e,n={})=>{let r=new XS(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t},"match");Sa.match=Dpt;var PSe=/[?*]|[+@!]\(.*?\)|\[|\]/,Ppt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),XS=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){B8(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||MSe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!PSe.test(o[2]))&&!PSe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(n=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let a=i;for(;r[a+1]==="**";)a++;a>i&&r.splice(i+1,a-i);let l=r[i+1],c=r[i+2],u=r[i+3];if(l!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;n=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<r.length-1;a++){let l=r[a];a===1&&l===""&&r[0]===""||(l==="."||l==="")&&(n=!0,r.splice(a,1),a--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let a=r[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){n=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<n.length;)if(e[i]===n[o])a.push(l==="b"?n[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&n[o]===e[i+1])a.push(e[i]),i++;else if(r&&n[o]==="**"&&e[i]===n[o+1])a.push(n[o]),o++;else if(e[i]==="*"&&n[o]&&(this.options.dot||!n[o].startsWith("."))&&n[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(n[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(n[o]),i++,o++}else return!1;return e.length===n.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),E=!b&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),_=v?3:y?0:void 0,k=E?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[D,N]=[e[_],n[k]];D.toLowerCase()===N.toLowerCase()&&(n[k]=D,k>_?n=n.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var a=0,l=0,c=e.length,u=n.length;a<c&&l<u;a++,l++){this.debug("matchOne loop");var d=n[l],p=e[a];if(this.debug(n,d,p),d===!1)return!1;if(d===zf){this.debug("GLOBSTAR",[n,d,p]);var m=a,h=l+1;if(h===u){for(this.debug("** at the end");a<c;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<c;){var g=e[m];if(this.debug(`
globstar while`,e,m,n,h,g),this.matchOne(e.slice(m),n.slice(h),r))return this.debug("globstar found match!",m,c,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,n,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,m,n,h),m===c))}let y;if(typeof d=="string"?(y=p===d,this.debug("string match",d,p,y)):(y=d.test(p),this.debug("pattern match",d,p,y)),!y)return!1}if(a===c&&l===u)return!0;if(a===c)return r;if(l===u)return a===c-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return QSe(this.pattern,this.options)}parse(e){B8(e);let n=this.options;if(e==="**")return zf;if(e==="")return"";let r,i=null;(r=e.match(gpt))?i=n.dot?ypt:Apt:(r=e.match(spt))?i=(n.nocase?n.dot?upt:cpt:n.dot?lpt:apt)(r[1]):(r=e.match(Cpt))?i=(n.nocase?n.dot?vpt:xpt:n.dot?bpt:Ept)(r):(r=e.match(dpt))?i=n.dot?ppt:fpt:(r=e.match(mpt))&&(i=hpt);let o=JS.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?wpt:n.dot?_pt:Spt,i=new Set(n.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?Ppt(d):d===zf?zf:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==zf||h===zf||(h===void 0?m!==void 0&&m!==zf?u[p+1]="(?:\\/|"+r+"\\/)?"+m:u[p]=r:m===void 0?u[p-1]=h+"(?:\\/|"+r+")?":m!==zf&&(u[p-1]=h+"(?:\\/|\\/"+r+"\\/)"+m,u[p+1]=zf))}),u.filter(d=>d!==zf).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let c=o[l],u=i;if(r.matchBase&&c.length===1&&(u=[a]),this.matchOne(u,c,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Sa.defaults(e).Minimatch}};Sa.AST=JS;Sa.Minimatch=XS;Sa.escape=rre;Sa.unescape=tv;var ire="contentExclusion",kO=class extends bO{static{s(this,"CopilotContentExclusion")}#e;#t=new Jn(1e4);#i=new Jn(200);constructor(e){super(),this.#e=e}async evaluate(e,n){try{e=dI(e).toString();let r=await this.getGitRepo({uri:e}),i=await this.#r(r?.url??HI.all);if(!i)return vO;let o=r?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let l=this.evaluateTextBasedRules(e,i,n);if(l.isBlocked)return l}catch(r){return R1.exception(this.#e,r,`${ire}.evaluate`),aSe}return S8}evaluateFilePathRules(e,n,r){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=S8,a,l=dee(e.replace(n,""));e:for(let c of r)for(let u of c.paths)if(Sa(l,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=ore(c,"FILE_BLOCKED_PATH"),a=u;break e}return R1.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:n,fileName:l,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,n,r){let i=n.filter(l=>l.ifAnyMatch),o=n.filter(l=>l.ifNoneMatch);if(!r||i.length===0&&o.length===0)return S8;let a=this.evaluateFileContent(i,o,r);return R1.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,n,r){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>OSe(a)).some(a=>a.test(r)))return ore(i,"FILE_BLOCKED_TEXT_BASED");for(let i of n)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>OSe(a)).some(a=>a.test(r)))return ore(i,"FILE_BLOCKED_TEXT_BASED");return S8}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(n=>this.#o(n)))}catch(e){ba(this.#e,e,`${ire}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#r(e){if(this.#n?.length)return this.#n;let n=await this.#o(e.toLowerCase());if(n.length!==0)return n}#n;setTestingRules(e){this.#n=e}#o=pSe(async e=>{let n=await this.#e.get(Mn).getGitHubSession();if(!n)throw new ss("No token found");let r=n.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(r,n.apiUrl),o=e.includes(HI.all);e.filter(u=>u!==HI.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==HI.all).join(",")),i.searchParams.set("scope",o?HI.all:HI.repo);let l=await kf(this.#e,n,i.href),c=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:c.message}),new Vh(l)}return this.#s("fetch.success"),uSe(Mpt,c).map(u=>u.rules)},this.#i);async getGitRepo(e){let r=await this.#e.get(k1).getRepo(ud(e));if(!r||!r?.remote)return;let i=r.remote.getUrlForApi();if(i)return{baseFolder:r.baseFolder,url:i}}#s(e,n,r){kt(this.#e,`${ire}.${e}`,or.createAndMarkAsIssued(n,r))}};function OSe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}s(OSe,"stringToRegex");function ore(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(ore,"fileBlockedEvaluationResult");var Npt=I.Object({name:I.String(),type:I.String()}),Lpt=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:Npt}),sre=I.Array(Lpt),Fpt=I.Object({rules:sre,last_updated_at:I.String(),scope:I.String()}),Mpt=I.Array(Fpt);var jc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new kO(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let n=await this.ctx.get(kn).getTextDocumentValidation(e.document),r=n.status==="invalid",i=n.status==="invalid"?n.reason:void 0;this.updateStatusIcon(r,i)},"onDidChangeActiveTextEditor");this.ctx.get(kn).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ea(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,n,r){let i=Wo(e)!==void 0;if(i||R1.debug(this.ctx,`Unsupported file URI <${e}>`),!this.#e||!i)return{isBlocked:!1};let o=[],a=s(async(u,d)=>{let p=Date.now(),m=await d.evaluate(e,n),h=Date.now();return o.push({key:u,result:m,elapsedMs:h-p}),m},"track"),c=(await Promise.all([a("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){R1.error(this.ctx,"Error tracking telemetry",u)}return r==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,n){this.#e&&(e?this.ctx.get(Yi).setInactive(n??"Copilot is disabled"):this.ctx.get(Yi).clearInactive())}#i(e,n,r,i){let o=n+e;if(this.evaluateResultCache.get(o)===r.reason)return!1;if(this.evaluateResultCache.set(o,r.reason??"UNKNOWN"),r.reason===vO.reason)return R1.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${n}`),!1;let l={isBlocked:r.isBlocked?"true":"false",reason:r.reason??"UNKNOWN"},c={elapsedMs:i};return kt(this.ctx,e,or.createAndMarkAsIssued(l,c)),kt(this.ctx,e,or.createAndMarkAsIssued({...l,path:n},c),1),R1.debug(this.ctx,`[${e}] ${n}`,r),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function VI(t,e,n){let r=await t.get(jc).evaluate(e.uri,n);return r.isBlocked?{status:"invalid",reason:r.message??"Document is blocked by repository policy"}:{status:"valid"}}s(VI,"isDocumentValid");var kn=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),n=[];for(let r of e)(await VI(this.ctx,r,r.getText())).status==="valid"&&n.push(r);return n}getTextDocumentUnsafe(e){let n=Bl(e.uri);return this.getTextDocumentsUnsafe().find(r=>r.uri===n)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(n=>{if(n.status==="valid")return n.document})}validateTextDocument(e,n){return VI(this.ctx,e,n)}async getTextDocumentValidation(e){try{let n=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return n===void 0?this.notFoundResult(e):this.validateTextDocument(e,n)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let n=this.getTextDocumentUnsafe(e);if(!n)return this.notFoundResult(e);let r=await this.validateTextDocument(e,n.getText());return r.status==="valid"?{status:"valid",document:n}:r}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(go).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(go).readFileString(e)}getWorkspaceFolder(e){let n=Bl(e.uri);return this.getWorkspaceFolders().find(r=>n.startsWith(Bl(r.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let n=Bl(e.uri);for(let r of this.getWorkspaceFolders()){let i=Bl(r.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(n.startsWith(i))return n.slice(i.length)}return Ti(n)}};function gs(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(gs,"statusFromTextDocumentResult");var Cr=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(kn).getRelativePath(e)??Ti(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let r=await this.ctx.get(kn).getTextDocumentWithValidation({uri:e});if(r.status!=="notfound")return r;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await VI(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:S1.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(go).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(go).stat(e)).size/1024/1024}};f();f();var hg=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}static{s(this,"Deferred")}};function $I(t,e=void 0){return new Promise(n=>setTimeout(()=>n(e),t))}s($I,"delay");f();var are=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let n of this.observers)n.next(e)}error(e){for(let n of this.observers)n.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},BO=class extends are{static{s(this,"ReplaySubject")}subscribe(e){let n=super.subscribe(e);return this._value!==void 0&&e.next(this._value),n}next(e){this._value=e,super.next(e)}};var Ad=class{constructor(e){this.ctx=e;this.#e=new _t("AsyncCompletionManager");this.requests=new Jn(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,n){for(let[r,i]of this.requests)if(lre(e,n,i))return!0;return!1}updateCompletion(e,n){let r=this.requests.get(e);r!==void 0&&(r.partialCompletionText=n,r.subject.next(r))}queueCompletionRequest(e,n,r,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,n.substring(n.lastIndexOf(`
`)+1));let a=new BO;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a}),o.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),a.error(l.reason);return}let c={cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,c),a.next(c),a.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),a.error(l)})}getFirstMatchingRequestWithTimeout(e,n,r,i,o){let a=this.ctx.get(Nt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,n,r,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,n,r,i),new Promise(l=>setTimeout(()=>l(null),a))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,n,r,i){i||(this.mostRecentRequestId=e);let o=!1,a=new hg,l=new Map,c=s(d=>()=>{let p=l.get(d);p!==void 0&&(p(),l.delete(d),!o&&l.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(lre(n,r,d)){if(d.state===0){let p=n.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){c(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),c(d.headerRequestId)()},"next");for(let[d,p]of this.requests)lre(n,r,p)?l.set(d,p.subject.subscribe({next:u,error:c(d),complete:c(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of l.values())d()})}cancelRequest(e,n){e===this.mostRecentRequestId&&n.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${n.headerRequestId}`),n.cancellationTokenSource.cancel(),this.requests.delete(n.headerRequestId))}};function lre(t,e,n){if(n.prompt.suffix!==e.suffix||!t.startsWith(n.prefix))return!1;let r=t.substring(n.prefix.length);return n.state===0?n.choice.completionText.startsWith(r)&&n.choice.completionText.trimEnd().length>r.length:n.partialCompletionText===void 0?!0:n.partialCompletionText.startsWith(r)}s(lre,"isCandidate");f();f();var N8=class{constructor(e){this.maxSize=e;this.root=new P8;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,n){let{node:r,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of r.children)if(o.startsWith(i)){let l=o.slice(0,i.length),c=new P8;r.removeChild(o),r.addChild(l,c),c.addChild(o.slice(l.length),a),r=c,i=i.slice(l.length);break}if(i.length>0){let o=new P8;r.addChild(i,o),r=o}}r.value=n,this.leafNodes.add(r),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:n,remainingKey:r})=>n.value!==void 0?{remainingKey:r,value:n.value}:void 0).filter(n=>n!==void 0)}delete(e){let{node:n,remainingKey:r}=this.findClosestNode(e);r.length>0||this.deleteNode(n)}findClosestNode(e){let n=!0,r=this.root,i=[{node:r,remainingKey:e}];for(;e.length>0&&n;){n=!1;for(let[o,a]of r.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),r=a,n=!0;break}}return{node:r,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:n,edge:r}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),n.removeChild(r),n.addChild(r+o,a);return}if(n.removeChild(r),n.parent===void 0)return;let i=n.parent;if(n.value===void 0&&n.childCount===1){let[o,a]=Array.from(n.children)[0],l=i.edge+o;n.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(l,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let n of this.leafNodes)(e===void 0||n.touched<e.touched)&&(e=n);return e}},P8=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,n){this._children.set(e,n),n.parent={node:this,edge:e}}removeChild(e){let n=this._children.get(e);n&&(n.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var Im=class{constructor(){this.cache=new N8(100)}static{s(this,"CompletionsCache")}findAll(e,n){return this.cache.findAll(e).flatMap(({remainingKey:r,value:i})=>i.content.filter(o=>o.suffix===n&&o.choice.completionText.startsWith(r)&&o.choice.completionText.length>r.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(r.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:r.length})})))}append(e,n,r){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:n,choice:r}]})}else this.cache.set(e,{content:[{suffix:n,choice:r}]})}clear(){this.cache=new N8(100)}};f();f();f();var nv=class{constructor(e,n,r){this.languageId=e;this.prefix=n;this.completion=r}static{s(this,"BlockTrimmer")}static isSupported(e){return qc.isSupported(e)}async withParsedStatementTree(e){var r=[];try{let n=KK(r,qc.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await n.build();return await e(n)}catch(i){var o=i,a=!0}finally{JK(r,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let n;if(e&&this.isCompoundStatement(e))n=e;else if(e){let r=e.parent;for(;r&&!this.isCompoundStatement(r);)r=r.parent;n=r}if(n){let r=this.asCompletionOffset(n.node.endIndex);if(r&&this.completion.substring(r).trim()!=="")return r}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let n=this.asCompletionOffset(e.node.endIndex),r=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,n??0),Math.max(0,r??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var DO=class extends nv{constructor(n,r,i,o=3,a=7){super(n,r,i);this.lineLimit=o;this.lookAhead=a;let l=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=c&&c>0&&(this.lookAheadOffset=l[c-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async n=>{let r=n.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(r);return i=this.trimAtFirstBlankLine(i),r&&(i=this.trimAtStatementChange(r,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let n=this.completion.match(/\S/);return n&&n.index!==void 0?this.prefix.length+n.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(n){let r=[...this.trimmedCompletion(n).matchAll(/\r?\n\s*\r?\n/g)];for(;r.length>0&&(n===void 0||n>r[0].index);){let i=r.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return n}trimAtStatementChange(n,r){let i=this.prefix.length,o=this.prefix.length+(r??this.completion.length);if(n.node.endIndex>i&&this.isCompoundStatement(n))return n.nextSibling&&n.node.endIndex<o?this.asCompletionOffset(n.node.endIndex):r;let a=n,l=n.nextSibling;for(;l&&l.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(l);)a=l,l=l.nextSibling;return l&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):r}};async function USe(t,e){var l=[];try{let n=t.getText();let r=t.offsetAt(e);let i=KK(l,qc.create(t.detectedLanguageId,n,0,n.length));await i.build();let o=i.statementAt(r);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(r<a.node.startIndex)return"mid-block";return"block-end"}catch(c){var u=c,d=!0}finally{JK(l,u,d)}}s(USe,"getBlockPositionType");f();f();var B1={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function qSe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?n=.031231253521808708:n=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?n=.06751619128429062:n=.09625089153176467:n=.027268163053989804:t[308]>1e-35?n=.060174483556283756:n=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?n=-.03969241799174589:n=.01086816842550381:t[31]>1e-35?n=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?n=-.04224490699947552:n=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?n=-.13448447971850278:n=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?n=-.07256260662659254:t[4]>60.50000000000001?n=-.08227503453609311:n=-.020596416747563847:n=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?n=-.10046536995362734:t[133]>1e-35?n=-.06407649822752297:t[225]>1e-35?n=.08035785003303324:t[92]>1e-35?n=.018901360933204676:t[20]>1e-35?n=.05252546973665552:t[8]>2592.5000000000005?n=-.040543705016462955:n=-.011236043818320725:t[9]>17.500000000000004?n=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?n=.03527165701669741:n=-.0071847350825815035:t[127]>1e-35?n=.024373016379595405:t[9]>2.5000000000000004?n=-.0035090719709448288:n=-.03514829488063766;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?r=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?r=-.003764520033319488:r=.06570817919969299:t[4]>61.50000000000001?r=.028346156293069538:r=.0908154644362606:r=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?r=.0019305229020073053:r=.09279357295883772:r=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?r=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?r=.044727478132905285:t[115]>1e-35?r=.10245804828855934:t[9]>17.500000000000004?r=-.03353173647469207:t[2]>98.50000000000001?r=-.10048106638102179:r=-.05484231104348874:t[31]>1e-35?r=.016807537467116516:t[9]>6.500000000000001?r=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?r=-.01882594250504289:r=-.05585658862796076:r=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?r=-.09262278043707878:t[133]>1e-35?r=-.058454257768893625:t[32]>1e-35?r=-.09769348447126434:t[25]>1e-35?r=-.0725430043727677:t[122]>1e-35?r=-.10047841601578077:r=-.00580671054458958:t[9]>13.500000000000002?r=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?r=-.0076376731757173515:r=.03394923033036848:t[127]>1e-35?r=.02070489091204209:r=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?c=.021942996005324917:c=.042349138084484074:t[308]>1e-35?c=.036507270845732874:c=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?c=.00210930790963475:t[31]>1e-35?c=.006825358293027163:t[9]>6.500000000000001?c=-.013772084269062394:t[308]>1e-35?c=-.008307929099892574:t[19]>1e-35?c=-.027706313312904487:c=-.04891108984170914:t[134]>1e-35?c=-.0605730733844732:t[25]>1e-35?c=-.05347926493253117:t[227]>1e-35?c=-.049415829249003666:t[32]>1e-35?c=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?c=-.00016302718260794637:c=-.10247095758122947:t[210]>1e-35?c=-.022149002072787024:t[95]>1e-35?c=.15222631630626304:c=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?c=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?c=-.045352728133789516:t[8]>683.5000000000001?c=.00474372227519902:c=.02635476098707525:t[92]>1e-35?c=.05659380819933452:t[105]>1e-35?c=.07431443210341222:t[186]>1e-35?c=.0915821133384904:c=-.016414750130401053:t[127]>1e-35?c=.011824693641866162:t[23]>1e-35?c=.0228468674288774:t[284]>1e-35?c=.06606936863302432:c=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let E;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?E=-.046284053681928526:t[210]>1e-35?E=49778070699847876e-21:t[13]>1e-35?E=.03328070054739309:t[128]>1e-35?E=-.054790214922938896:t[126]>1e-35?E=-.08524792218532945:E=.014414055975542446:t[1]>38.50000000000001?E=-.07287851335872973:E=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?E=-.12459748864088374:E=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?E=.13044981041138526:t[9]>71.50000000000001?E=-.056068402282406865:t[9]>12.500000000000002?E=.038957722962512764:E=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?E=-.0852126122372075:t[225]>1e-35?E=.10082066771689505:t[1]>161.50000000000003?E=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?E=-.010835400874777133:E=.004607419973807752:E=-.016989075258564062:E=.009205417251698097:t[23]>1e-35?t[20]>1e-35?E=.10184317139657878:t[0]>5724.500000000001?E=-.1163666496650542:t[1]>106.50000000000001?E=.1303850608190687:t[129]>1e-35?E=.10745031509534769:E=.006166901738036226:t[31]>1e-35?E=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?E=.005004582564506611:E=-.10481581731668346:t[19]>1e-35?E=-.009850706427306281:E=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let D;t[131]>1e-35?D=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?D=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?D=-.022305242912035072:D=.024792895826340516:D=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?D=.2080083584805785:D=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?D=.060783227455868206:D=-.056904865557409035:D=-.03278952553107572:t[192]>1e-35?D=.13117402617043625:D=.01647119888257836:D=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?D=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?D=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?D=-.11083976837572328:t[146]>1e-35?D=-.03359294484446772:D=-.0042815953591236475:t[190]>1e-35?D=-.09264239592903775:t[10]>1e-35?D=.022282638485105657:D=-.0205994057928458:t[5]>4918.500000000001?D=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?D=.08935072241972036:D=-.03781647876237494:D=.0062655753179671515:t[31]>1e-35?D=.008603500300349887:t[230]>1e-35?D=.03350056932774173:t[23]>1e-35?t[241]>1e-35?D=.10277555508503314:D=.0017901817172993888:t[2]>98.50000000000001?D=-.05920081229672715:D=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let Q;t[131]>1e-35?Q=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?Q=.07473600489975568:t[0]>93.50000000000001?Q=-.021596848506011502:Q=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Q=.10264284346448256:Q=.031042487183181262:Q=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?Q=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?Q=.006271403149804702:Q=-.030013637555715046:t[0]>4449.500000000001?Q=-.06556876058654929:Q=.06437994816903034:t[32]>1e-35?Q=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?Q=-.09349726304052086:t[210]>1e-35?Q=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?Q=-.029188394315052574:Q=.017219308333820193:Q=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?Q=-.04428555753857688:Q=.0001456106867817353:t[5]>213.50000000000003?Q=.01740292726636365:Q=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?Q=.03410288911259329:t[121]>1e-35?Q=-.06056527462120627:t[8]>2592.5000000000005?Q=.12166808844363577:t[191]>1e-35?Q=.11669879218998758:Q=-.001664858391716235:Q=-.01262927450503166:Q=-.04506589951879664:t[227]>1e-35?Q=-.08548904959752329:Q=.02156080776537726;let Z;t[306]>1e-35?t[149]>1e-35?Z=-.1389218965136736:Z=-.032218642644416894:t[13]>1e-35?Z=.006465035217331847:t[50]>1e-35?Z=-.1381687930130022:t[179]>1e-35?Z=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?Z=-.03262719498763048:Z=.023342916702125613:t[191]>1e-35?Z=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?Z=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?Z=-.09989343595668776:Z=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?Z=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?Z=-.09165257825246746:t[9]>32.50000000000001?Z=.02484870392366004:Z=-.008499493096971395:t[8]>24.500000000000004?Z=.02459679192828244:Z=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?Z=.0015644546318714849:Z=-.06579524865022705:Z=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?Z=.03331853632960164:Z=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?Z=-.019091477207111116:Z=.037878468575478504:t[94]>1e-35?Z=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?Z=.16919658785098224:t[243]>1e-35?Z=-.06580584936754524:Z=.01567555159935563:t[129]>1e-35?Z=.06721746994993226:t[10]>32.50000000000001?Z=-.046394462507797975:Z=-.006436180519584767;let me;t[131]>1e-35?me=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?me=.019122095523977856:t[298]>1e-35?me=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?me=-.026094309429557913:t[204]>1e-35?me=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?me=.012643810980689466:me=-.07884161741497837:me=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?me=.04493082949897325:me=.18046359750455776:t[7]>18.500000000000004?me=-.018667348656891496:me=.02584325784698236:me=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?me=.04749240016989375:me=-.0333334578246718:t[5]>3276.5000000000005?me=.11330554740098908:t[7]>94.50000000000001?me=.1296600395033268:me=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?me=-.13787130789142835:t[0]>1847.5000000000002?me=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?me=.028856848462727104:me=-.11197632885851168:me=.08169801342016791:t[1]>22.500000000000004?me=-.021052888644970163:me=.019048604298876753:t[7]>4.500000000000001?me=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?me=.03432638833359197:me=-.0036767863082454973:t[1]>48.50000000000001?me=.03087375270128195:t[2]>3.5000000000000004?me=-.04219917149740248:me=.018818493993207935;let te;t[306]>1e-35?te=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?te=-.09091897542577475:te=.04042943082645558:t[218]>1e-35?te=.056254985867151:te=-.053848117950183044:te=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?te=.021581808008986944:te=-.05639286496176611:te=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?te=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?te=.023885302967553288:te=.1617794086125622:t[212]>1e-35?te=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?te=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?te=.01894935813286188:te=-.06449356357429188:te=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?te=-.034718828212885515:te=.0898976288814321:t[1]>17.500000000000004?te=-.15440137451988326:te=-.03864183216821465:te=.009988507307006308:te=-.08540311947043305:t[50]>1e-35?te=-.13323659732101975:t[134]>1e-35?te=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?te=.08082476177379844:te=-.041665761903645876:t[179]>1e-35?te=-.12405023987936657:t[39]>1e-35?te=-.06247416524997478:t[138]>1e-35?te=-.10724031753676487:te=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let W;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?W=-.03461119351456781:W=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?W=-.12404435523286539:W=-.0034376913880382956:W=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?W=.0037507103585310234:W=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?W=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?W=-.04832024079663151:t[37]>1e-35?W=-.037103393468366934:W=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?W=.032539071163832034:t[5]>1643.5000000000002?W=.036408625378035665:t[0]>1500.5000000000002?W=-.1346358322854993:W=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?W=-.1133991164577881:t[9]>52.50000000000001?W=-.024478640359723122:W=.03673777861098756:W=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?W=.002583438691776944:W=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?W=-.02141222346712401:W=.06392462314316179:t[4]>12.500000000000002?W=.08700122294434816:t[8]>267.50000000000006?W=.056923170082743224:W=-.07716309825583327:t[32]>1e-35?W=-.03961343943752142:W=.002674914122888783:t[1]>42.50000000000001?W=-.05217539654421676:t[145]>1e-35?W=.09553630282946368:W=-.009424791262477729;let re;t[183]>1e-35?re=-.05753337139158443:t[308]>1e-35?re=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?re=-.10477869875380448:re=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?re=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?re=-.04442302951713574:re=.00012409888451734224:re=-.092199119633697:t[225]>1e-35?re=.13773072450201831:t[0]>2882.5000000000005?re=.0028540012229920533:t[298]>1e-35?re=.07134486044361629:re=.014297412329837425:t[145]>1e-35?re=.05608385321902638:t[92]>1e-35?re=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?re=-.0039957800609801315:re=.0776927564241081:t[203]>1e-35?re=-.05502900859432093:t[105]>1e-35?re=.06062892720841595:re=-.009574839629252128:t[31]>1e-35?re=.009488858841144216:t[23]>1e-35?t[20]>1e-35?re=.08818126313644752:t[8]>161.50000000000003?re=.014353968957885408:re=-.022240738532827903:t[210]>1e-35?re=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?re=-.043902062079383485:re=-.014741559220396223:re=-.00934935734853194:t[6]>32.50000000000001?re=.1514593126307404:re=.010771222510801532:t[10]>22.500000000000004?re=.01412495209334078:re=-.08576940379502533;let oe;t[0]>384.50000000000006?t[84]>1e-35?oe=-.06647690967306838:t[2]>101.50000000000001?oe=-.024451334501552457:t[306]>1e-35?oe=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?oe=.0031858381443673127:oe=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?oe=-.08601340441214533:t[1]>29.500000000000004?oe=.10487598629539963:t[8]>597.5000000000001?oe=-.0786529133673238:oe=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?oe=-.04883600353740688:t[126]>1e-35?oe=-.03794042763348827:oe=-.003358871967539988:t[210]>1e-35?oe=.054991356498447566:t[6]>19.500000000000004?oe=-.007418396981635549:oe=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?oe=-.02143003429501711:oe=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?oe=-.006636355416244082:oe=-.06483095743431454:t[4]>21.500000000000004?oe=-.028975965946833545:oe=.022012264796522657:oe=-.06653648243193663:t[5]>4593.500000000001?oe=.01753551428088607:t[217]>1e-35?oe=-.028864824937700297:t[94]>1e-35?oe=-.04885192273020658:t[279]>1e-35?oe=.08105715462329498:t[121]>1e-35?oe=-.04576676034750651:oe=.004795141324949362:t[1]>42.50000000000001?oe=-.047446619702809195:t[145]>1e-35?oe=.08400495571952321:oe=-.00854528836489364;let V;t[294]>1e-35?V=-.042529778074638265:t[266]>1e-35?V=-.1180276669679798:t[134]>1e-35?V=-.026818144353279623:t[183]>1e-35?V=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?V=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?V=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?V=-.03049646619610203:t[1]>50.50000000000001?V=.20634590755061122:V=.06956378103625731:t[0]>3770.5000000000005?V=-.07946414366134913:t[19]>1e-35?V=.17083312065604694:t[2]>21.500000000000004?V=-.02327981978127724:V=.129717297518715:t[145]>1e-35?V=.006891245076133524:V=-.0789123467863741:t[3]>99.50000000000001?V=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?V=.06447639919732716:V=-.05457561977645972:t[306]>1e-35?V=-.029995903305383882:t[191]>1e-35?V=.030596508110850414:t[242]>1e-35?V=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?V=.09518584795377832:V=-.018197744600833596:t[13]>1e-35?V=.006751790086127549:t[148]>1e-35?V=.01904174573618417:t[99]>1e-35?V=.025287735102561926:t[4]>14.500000000000002?V=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?V=-.09467943982430241:t[243]>1e-35?V=-.02521824751996268:V=.005437570718352172:V=-.022476214821960674;let q;t[0]>384.50000000000006?t[84]>1e-35?q=-.06088131453064195:t[147]>1e-35?q=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?q=.04219361472548491:q=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?q=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?q=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?q=-.11431764534511478:q=.013549717238356157:q=-.020987333767091276:t[6]>2.5000000000000004?q=-.02914877855133127:q=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?q=-.10087072787978416:t[37]>1e-35?q=-.030467397753331196:t[229]>1e-35?q=-.1017559811057469:t[4]>20.500000000000004?q=-.00413177742240167:t[20]>1e-35?q=.05213315982685969:q=.0037921635866823133:t[8]>51.50000000000001?q=.07327913092421544:t[6]>49.50000000000001?q=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?q=.02744420891894289:q=.11288946357194463:q=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?q=-.012329314369909049:q=.026816658655600168:q=-.0872405354618811:q=.007872673500247845:t[1]>42.50000000000001?q=-.04309044198258254:t[145]>1e-35?q=.07572529147860785:t[7]>5.500000000000001?q=-.013837187093264945:t[1]>17.500000000000004?q=.04208698439539668:q=-.06284346769019863;let Y;t[294]>1e-35?Y=-.0384794324818203:t[266]>1e-35?Y=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Y=.07432960094940501:Y=-.035248735855751855:t[134]>1e-35?Y=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Y=-.01706896375068821:Y=.08212247914968074:t[2]>59.50000000000001?Y=-.09546478958824225:t[6]>53.50000000000001?Y=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Y=.02816463285971267:Y=.15449139016588445:Y=-.10199787406123524:Y=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Y=-.13924786681478077:Y=-.0072772442570213335:t[39]>1e-35?Y=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Y=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Y=-.11174465335620831:Y=.00013144040097180107:Y=-.08493919336681105:t[42]>1e-35?Y=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Y=-.015540659878839153:Y=-.14442609417300142:t[21]>1e-35?Y=-.025251979447574083:Y=.0023698372645272847:t[18]>1e-35?Y=.07269739695712212:t[8]>2592.5000000000005?Y=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Y=-.01835130329646532:t[9]>45.50000000000001?Y=.02023047454629885:Y=.16469378262221102:Y=-.042975030085836426;let ee;t[8]>2915.5000000000005?t[297]>1e-35?ee=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ee=-.01034964686484714:ee=-.07357437440667927:ee=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ee=-.09476398869062203:t[9]>72.50000000000001?ee=-.0757383854264379:ee=.02806542779508718:ee=-.05147742568418084:ee=.10212721564444344:ee=.0518263760642861:ee=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ee=-.10669213185972036:ee=.027050434286384796:t[302]>1e-35?ee=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ee=.06354599160071946:t[1]>67.50000000000001?ee=.05317447949011187:ee=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ee=-.09369289448773599:t[0]>2215.5000000000005?ee=.04077965380363924:t[0]>807.5000000000001?ee=-.0591771776458298:ee=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ee=-.016323380219241672:ee=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ee=.03720704290087811:ee=-.008730548158766654:t[4]>80.50000000000001?ee=-.05346644687473197:ee=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ee=.019984510398089086:ee=-.03917825025861855:t[9]>170.50000000000003?ee=-.09759719821334525:ee=-.0023586682752856298;let de;t[183]>1e-35?t[17]>1e-35?de=.030100940443356424:t[10]>1.5000000000000002?de=-.10861112216742408:de=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?de=-.032062878390325456:de=-.10808232631806887:t[8]>1641.5000000000002?de=-.06147013392655731:t[4]>12.500000000000002?de=.03324767551088266:t[145]>1e-35?de=.028851633810612017:de=-.054871239091792784:t[134]>1e-35?de=-.023813968121342108:t[266]>1e-35?de=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?de=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?de=-.025350325484720576:de=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?de=.056817276537534815:de=-.07674158463557636:de=-.06335553143454145:t[1]>56.50000000000001?de=.16390494217299284:de=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?de=.041717597065890205:de=-.10357913492269129:t[10]>29.500000000000004?de=.1365512866715726:de=.020600048310575665:de=.09708785634773187:de=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?de=-.03146213719547347:de=.11784024316238083:de=-.050940520532045355:de=-.047988344143075616:t[191]>1e-35?de=.028764654731460032:de=.0011911575567860023;let ne;t[294]>1e-35?t[10]>50.50000000000001?ne=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?ne=-.05103908560370243:ne=.05002066201169583:ne=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?ne=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?ne=.127983140816313:ne=-.05436534163636867:ne=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?ne=-.009504203657088933:t[8]>819.5000000000001?ne=.18689664822602375:ne=.03635576744011826:ne=-.029862411809998525:t[223]>1e-35?ne=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?ne=-.09405026597863717:t[0]>4153.500000000001?ne=.053577663326799765:ne=-.05062127873995668:ne=.06512222894425874:t[39]>1e-35?ne=-.04985311717827547:t[51]>1e-35?ne=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?ne=-.02860634573675884:ne=.08863753005590103:ne=.11158892111063744:t[0]>655.5000000000001?ne=-.031005736641654926:ne=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?ne=-.00843386136334982:ne=-.05273594615999777:ne=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?ne=-.015774115523598486:ne=.10147367091236065:ne=-.048307000563071016:ne=.002118376117677254;let fe;t[8]>1014.5000000000001?t[9]>137.50000000000003?fe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?fe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?fe=.07211107542565391:fe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?fe=-.0751486415451188:t[1]>59.50000000000001?fe=.13459005084554104:fe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?fe=.06715575425741895:fe=-.005895690393702183:t[8]>2915.5000000000005?fe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?fe=-.00029068886245881074:fe=.0613467393188786:t[148]>1e-35?fe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?fe=.003887223773199377:fe=-.08553893131979015:fe=.025654192706396767:fe=-.05651733979610658:fe=-.02039913645229667:t[2]>7.500000000000001?fe=-.1058450646728524:fe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?fe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?fe=.1283258201586378:fe=-.01718135372229775:fe=-.07702452408491414:t[125]>1e-35?fe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?fe=.04273051857848212:fe=-.04533122948101463:t[2]>196.50000000000003?fe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?fe=.0231032972703664:fe=-.04807386814498683:fe=.002729435991332102;let pe;t[179]>1e-35?pe=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?pe=.026484626664041125:t[10]>1.5000000000000002?pe=-.10187000872941615:pe=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?pe=.09574540795390041:pe=-.06454986703691233:pe=-.11411849349353141:t[266]>1e-35?pe=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?pe=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?pe=-.04403391373512386:pe=.1132928075412222:t[2]>47.50000000000001?pe=-.09700191391838056:pe=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?pe=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?pe=-.001668912999010927:pe=-.02363511102970245:t[8]>58.50000000000001?pe=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?pe=.0911011436534449:t[1]>28.500000000000004?pe=-.07192390493729035:pe=.06913818091291246:pe=-.012312625373699222:pe=.06784496312307986:pe=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?pe=.0026564453057705273:pe=-.025425772389361445:t[122]>1e-35?pe=-.12046786388602149:t[0]>3183.5000000000005?pe=.01162092842804907:t[91]>1e-35?pe=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?pe=-.0001647792543020228:pe=-.023664538532907665:pe=.01609078206180752;let Be;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Be=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Be=-.017696526862422682:Be=.1450050954613223:Be=-.05406930069823832:Be=-.08308700260259043:t[120]>1e-35?Be=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Be=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Be=.038431826961746934:Be=-.05937462906539856:t[9]>65.50000000000001?Be=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Be=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Be=-.09579030954062734:Be=.025064711572811746:Be=.02579440518821548:Be=.1044440128091862:Be=-.058348633139536844:Be=.07766788227934436:Be=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Be=.07463684068207214:Be=.18244269035484484:t[6]>39.50000000000001?Be=-.06050050067471004:Be=.05787759066913493:Be=.010783225857972171:Be=.1674891243602606:t[4]>9.500000000000002?Be=-.004814132027475892:Be=-.14543299413454813:Be=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Be=-.07634466313617769:Be=.0287825335169114:Be=-.06894721943300268:Be=-.00023988459059521937;let Se;t[131]>1e-35?t[1]>93.50000000000001?Se=-.05706887458825395:t[2]>1.5000000000000002?Se=.011446637886629108:Se=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Se=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Se=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Se=.026278724448495064:Se=.17053138400480508:t[0]>4463.500000000001?Se=-.06482289890096041:Se=.03026516489536295:Se=-.031785170717683144:Se=.1312690622980455:t[13]>1e-35?Se=.14336922540461444:Se=.03523850945454039:Se=-.015407465968975714:t[39]>1e-35?Se=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Se=-.0659975068798723:Se=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Se=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Se=.057409156184759516:Se=.2024322059866388:Se=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Se=.010648654146284154:t[308]>1e-35?Se=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Se=.12364025998551711:Se=-.02247495081065243:t[1]>22.500000000000004?Se=-.0726295464624251:Se=.03481895086048152:t[0]>4331.500000000001?Se=-.04775443357020673:Se=.07172377425057568:t[2]>89.50000000000001?Se=-.11782645274716962:Se=.00010092665257989378;let Ke;t[147]>1e-35?Ke=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Ke=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Ke=-.016101990375700172:t[0]>2579.5000000000005?Ke=-.13045089661551845:Ke=-.02874367814784938:Ke=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Ke=.17084176915326055:Ke=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Ke=.10591712319944074:Ke=-.024082167264285:Ke=.16497698867036126:Ke=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ke=-.021012910475524206:Ke=-.13058422554298485:t[0]>1102.5000000000002?Ke=.10955864175201457:Ke=-.03566689354348996:t[1]>11.500000000000002?Ke=-.02093884208606101:Ke=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Ke=-.013861861436128482:Ke=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Ke=.10163873449625677:Ke=-.02779270277623805:t[1]>26.500000000000004?Ke=-.08035058228527389:Ke=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Ke=-.007028075523033826:Ke=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Ke=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Ke=-.0032075580718124892:Ke=-.04442829143298883:Ke=-.06597073245775804:Ke=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let ft;t[179]>1e-35?ft=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ft=-.07595415373151816:ft=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ft=.022822510448266862:ft=.17491569312933697:ft=-.058362287133533565:t[2]>2.5000000000000004?ft=-.03633895806364428:ft=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ft=-.07294848747514579:ft=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ft=-.07009535282685533:t[8]>2640.0000000000005?ft=-.051761240111316276:t[131]>1e-35?ft=-.06245774419231631:ft=.03495606662854905:ft=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ft=.0015036626973581122:ft=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ft=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ft=.022343994371919224:ft=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ft=.07724450228328664:t[0]>3853.5000000000005?ft=-.15671707454435677:t[10]>28.500000000000004?ft=-.10179090671841723:ft=.014878216919760927:ft=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ft=.14054154485273487:ft=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ft=-.08632985141410315:ft=.005524157938954954:ft=-.08802502622523681:ft=-.0004649168897260341;let Tt;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?Tt=-.007458687464321174:Tt=-.09444966249102484:t[1]>23.500000000000004?Tt=.08564129697360716:Tt=-.07105002902845851:Tt=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?Tt=-.10326216566705966:t[1]>26.500000000000004?Tt=.0050539832484585365:Tt=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?Tt=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?Tt=.05783632021087773:t[10]>17.500000000000004?Tt=-.06720598671764105:t[1]>47.50000000000001?Tt=.097495825172558:Tt=-.013372242800584872:Tt=-.06463226787713715:t[42]>1e-35?Tt=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?Tt=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?Tt=.11051270080118503:Tt=.027719462817590454:t[8]>597.5000000000001?Tt=-.08441503592016869:Tt=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?Tt=-.12190088985091102:Tt=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?Tt=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?Tt=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?Tt=.016585157185448045:Tt=-.11032043771149425:Tt=.01586986028570486:t[8]>388.50000000000006?Tt=-.10592413013261853:Tt=.04930703248769364:t[13]>1e-35?Tt=.003621937787920821:Tt=-.0013786331198611841;let Ct;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?Ct=.009769895322846493:Ct=-.10620052926943656:t[9]>19.500000000000004?Ct=.03781202525403449:t[9]>14.500000000000002?Ct=-.11485785321365344:t[9]>6.500000000000001?Ct=.07677177833073881:t[0]>4342.500000000001?Ct=-.07079285609687631:t[49]>1e-35?Ct=.06156814809246001:Ct=-.014788509042554625:Ct=-.032659201618470655:t[5]>5207.500000000001?Ct=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?Ct=-.03094160322187924:t[1]>29.500000000000004?Ct=.09474646043921069:Ct=.023445783928231618:Ct=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?Ct=-.07164443768784848:t[1]>29.500000000000004?Ct=.089473622509272:t[8]>597.5000000000001?Ct=-.08155349903101317:Ct=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?Ct=-.004003900679358653:t[190]>1e-35?Ct=-.09236113461485262:t[8]>3198.5000000000005?Ct=-.0124130160451179:Ct=.018453070064009328:t[15]>1e-35?Ct=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?Ct=-.0009580759587680961:Ct=-.03227283036698222:Ct=.01369287669536875:t[1]>50.50000000000001?Ct=-.04213060332500437:t[35]>1e-35?Ct=-.11508095777767471:t[190]>1e-35?Ct=-.08611884672400155:t[297]>1e-35?Ct=.05723551879433584:Ct=-.004829340082311461;let bt;t[183]>1e-35?bt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?bt=-.11753465135886734:bt=-.007515490299047085:bt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?bt=-.12371142493530439:t[1]>36.50000000000001?bt=.032189417575190435:bt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?bt=-.0784518658439288:t[2]>54.50000000000001?bt=.12477882322370665:bt=.000313468482399738:bt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?bt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?bt=.0353146070135579:bt=-.06327619611098285:bt=.02813577701641991:bt=-.12354390728506215:t[34]>1e-35?bt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?bt=-.01245803535276381:bt=-.07169472553475001:t[1]>11.500000000000002?bt=.12989984824561698:bt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?bt=.010390226893521422:t[10]>14.500000000000002?bt=.16790888126487719:bt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?bt=-.043398307129729134:bt=.09963544907820426:t[9]>30.500000000000004?bt=-.13540713124984502:t[9]>17.500000000000004?bt=.0509435850590757:bt=-.04761897852404613:t[4]>78.50000000000001?bt=.09197086656470652:bt=.0006771050176682337;let le;t[122]>1e-35?t[6]>36.50000000000001?le=.05686884451670743:le=-.05334759543084309:t[266]>1e-35?le=-.08603579519816038:t[157]>1e-35?le=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?le=-.0499592651503952:t[0]>725.5000000000001?le=.11780353905132664:le=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?le=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?le=-.03190157229022304:le=.07985197845805492:le=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?le=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?le=-.027174047777029083:le=.057117284879796476:t[3]>43.50000000000001?le=-.0016147040913107311:le=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?le=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?le=-.01466076988151239:le=.13375695925484857:le=-.04885873081899647:t[0]>5566.500000000001?le=.11086813028591343:t[8]>992.5000000000001?le=-.07622304217072383:le=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?le=.03285858361708423:le=-.12354858211764992:le=.0672788301823281:t[15]>1e-35?le=.08658836986585006:le=-.02741484278509758:t[290]>1e-35?le=-.08161310335133287:t[135]>1e-35?le=-.04824156054814152:le=.0009156904299554183;let Oe;t[3]>7.500000000000001?Oe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Oe=.03642374718166293:Oe=.16379973756366603:Oe=-.03946685266127979:t[186]>1e-35?Oe=.07618896623420895:t[96]>1e-35?Oe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Oe=-.022822371600847505:Oe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Oe=.044416424920571296:Oe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Oe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Oe=.1061937286809567:t[7]>54.50000000000001?Oe=.11487507743121311:t[8]>819.5000000000001?Oe=-.07181278009001418:t[10]>25.500000000000004?Oe=.13499019430369633:t[1]>31.500000000000004?Oe=.09032979489780704:Oe=-.12754166393372374:t[9]>37.50000000000001?Oe=-.05093963635361407:Oe=-.005026651151683848:t[9]>2.5000000000000004?Oe=.07619735785573735:Oe=.012363301341532136:t[26]>1e-35?Oe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Oe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Oe=-.10764172927882483:Oe=.01890760098464703:Oe=.06573095405846417:t[8]>634.5000000000001?Oe=-.00783575973273707:Oe=-.050612689680229306:t[1]>22.500000000000004?Oe=-.0016842490401359626:Oe=.0738227088444087:Oe=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let tt;t[189]>1e-35?t[0]>5269.500000000001?tt=-.103183298350443:t[2]>51.50000000000001?tt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?tt=-.05186168947388339:tt=.0496996365539082:t[10]>23.500000000000004?tt=.1404445738719:t[93]>1e-35?tt=.0027146310074558505:t[5]>3821.5000000000005?tt=.002153033152069652:t[4]>2.5000000000000004?tt=.007663539551317215:tt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?tt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?tt=-.021479467709980358:tt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?tt=.021660293256233334:tt=-.0927396152303864:tt=.0665074081601698:t[0]>1550.5000000000002?tt=.08972407105958534:tt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?tt=.06761927942466854:tt=-.015762168112653286:t[17]>1e-35?tt=.10311304131145381:tt=-.017672785252336027:tt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?tt=-.10638321435298535:tt=.0007073011744385905:t[18]>1e-35?tt=-.027056185501334325:t[145]>1e-35?tt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?tt=.09762140519655171:t[9]>110.50000000000001?tt=-.06581942957595835:t[6]>54.50000000000001?tt=.04959634035251596:tt=.0022616298654554207:tt=-.007437620924990854;let J;t[179]>1e-35?J=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?J=.1470294450403005:J=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?J=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?J=.07965955447707423:t[10]>10.500000000000002?J=-.09236156404262426:J=.03396273196231458:J=-.13246465021467432:J=.07092822261735353:J=-.08753829085942:J=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?J=.004705878789890202:J=.13775378964952867:J=-.04770928980587811:t[10]>29.500000000000004?J=.011221519891071544:t[0]>3853.5000000000005?J=.06365381191628273:J=.15506252245336827:t[1]>37.50000000000001?J=-.07254777021042061:J=.026514587757252385:t[308]>1e-35?J=.04115804816617256:t[10]>26.500000000000004?J=.02077721353011946:t[5]>3548.5000000000005?J=-.1280907116663952:J=-.021974774274438:t[306]>1e-35?J=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?J=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?J=-.005710865560475598:t[94]>1e-35?J=-.06751507982853555:J=.027250040757588703:t[9]>52.50000000000001?J=.07060357924595577:J=-.030297760713011795:J=-.0006005400085266517;let ie;t[113]>1e-35?ie=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ie=-.06996356565314456:ie=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ie=-.08317707559926495:t[21]>1e-35?ie=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ie=-.010538203005984922:ie=.08454819465349446:t[9]>124.50000000000001?ie=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ie=-.08542251249346582:t[9]>50.50000000000001?ie=-.023428882537657472:ie=.010042500833979073:ie=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ie=.03006025206979096:t[9]>108.50000000000001?ie=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ie=.04222035773042132:ie=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ie=-.07209095448054853:ie=.028065954981903313:ie=.08714651929917122:ie=-.006678820669279169:t[10]>40.50000000000001?ie=.006982396294941626:ie=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ie=-.09351114982645548:t[4]>3.5000000000000004?ie=-.004837550129223451:ie=-.08324141237464677:t[303]>1e-35?ie=.10703037493990825:t[9]>156.50000000000003?ie=-.10803018621648303:t[116]>1e-35?ie=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ie=.10261721665006701:ie=.018994509090668264:ie=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let Ne;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ne=.08396556264106572:Ne=-.0562516995099192:Ne=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Ne=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Ne=.0052017514017035915:Ne=-.11194119432743639:Ne=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Ne=-.025692451287403446:Ne=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Ne=-.11892250746801664:t[10]>22.500000000000004?Ne=.07548493166973796:Ne=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Ne=.13750699058082427:t[18]>1e-35?Ne=.06535408879552801:Ne=-.054118179035040674:Ne=.1344282838979622:t[0]>3982.5000000000005?Ne=-.10409582202467015:t[19]>1e-35?Ne=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Ne=.012705935670766466:Ne=.14149359442527545:Ne=-.047977876173706004:t[20]>1e-35?Ne=.057945228080337946:t[0]>3642.5000000000005?Ne=-.008726535792122467:Ne=-.08424769891378858:t[34]>1e-35?Ne=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Ne=.01196849566739346:Ne=.1614642278429876:Ne=-.043022338150701625:t[3]>5.500000000000001?Ne=-.03907848255033881:Ne=.018280601026175593:Ne=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let ze;t[120]>1e-35?ze=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ze=-.042799574885345304:ze=.07412430171193245:ze=-.11248270469336048:t[193]>1e-35?ze=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?ze=.028911612178122104:ze=.12326369727728437:t[0]>4091.5000000000005?ze=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?ze=.1159839898100149:ze=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?ze=-.0216343737351583:ze=-.1220272260878369:t[2]>18.500000000000004?ze=.09152924475072398:t[8]>55.50000000000001?ze=.039508716651005665:ze=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?ze=.06793009902674053:ze=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?ze=-.04391068849624096:ze=.04009967593394672:t[8]>1085.5000000000002?ze=-.024773826356034825:ze=-.13919707884246582:ze=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?ze=-.11567917501901476:ze=-.006813640337684114:t[3]>7.500000000000001?ze=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?ze=-.001754586408351048:ze=-.055422422450722056:ze=-.06090032532532226:t[0]>5269.500000000001?ze=.11787981735983527:ze=-.00198119768540783:ze=.00210412924303036;let it;t[294]>1e-35?t[10]>50.50000000000001?it=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?it=-.06063239096209816:it=.03317022411417386:it=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?it=-.013608609329298802:it=.09078000157330264:t[99]>1e-35?it=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?it=-.07536137260189814:it=.006253266595455118:t[10]>28.500000000000004?it=-.006106041147592768:t[9]>156.50000000000003?it=-.11828932797811101:t[94]>1e-35?it=-.02566078479505714:t[303]>1e-35?it=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?it=-.08401252789168523:t[5]>4244.500000000001?it=.026372887658499107:t[1]>16.500000000000004?it=-.027836756345634026:it=.09205362097909099:it=.00934612788718244:t[203]>1e-35?it=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?it=-.09580979052540028:t[1]>50.50000000000001?it=-.06402211827281554:it=.08342858760095972:t[2]>36.50000000000001?it=.008114897658204584:t[92]>1e-35?it=.09541587072672864:it=-.022342147210555434:it=-.01660492519175128:it=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?it=.15846731118501817:it=.039498507912023195:t[245]>1e-35?it=.07008718676813333:it=.0019806389728814727;let gt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?gt=-.01192072916082109:gt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?gt=.06874032717466054:t[4]>40.50000000000001?gt=-.07752510020707537:t[1]>76.50000000000001?gt=-.09944032260703917:t[8]>1381.5000000000002?gt=-.054466635810800745:t[1]>32.50000000000001?gt=.05974084520839573:gt=-.0384718740755954:gt=-.11374190719134032:t[0]>2151.5000000000005?gt=-.13703645155803298:gt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?gt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?gt=.013539805885738608:gt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?gt=.09941880179344399:gt=-.01608127391210995:gt=.08025226531247417:t[9]>67.50000000000001?gt=.13525448212444113:t[6]>61.50000000000001?gt=-.05511099182158894:t[94]>1e-35?gt=-.06821509831783572:t[128]>1e-35?gt=.11361314817714643:gt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?gt=-.09954181329804547:t[197]>1e-35?gt=.10102833149755386:t[188]>1e-35?gt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?gt=-.03781554214742005:gt=.09927933385592314:gt=-.020006000056720083:gt=-.10520473615957895:gt=-.12006990846253787:gt=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let cn;t[147]>1e-35?t[1]>53.50000000000001?cn=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?cn=-.030504020655417463:cn=.07102458639110094:cn=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?cn=.055304563442710876:t[1]>53.50000000000001?cn=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?cn=-.1568835288372895:cn=-.0279829124400056:cn=.04493843959601833:cn=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?cn=-.054133834303687026:t[9]>48.50000000000001?cn=.11263810289007213:t[9]>9.500000000000002?cn=-.02202034562838259:t[4]>45.50000000000001?cn=-.03410927569045158:cn=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?cn=-.029687297407295893:cn=.10673602850001934:t[4]>42.50000000000001?cn=.0036275562945108117:cn=-.0760789221330622:cn=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?cn=.08274426793676076:cn=-.07076234425516396:cn=.13890177606150175:cn=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?cn=-.09250637750836187:cn=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?cn=-.01897867921812603:cn=.04890781705365262:cn=-.11569892307597907:t[2]>106.50000000000001?cn=.09032697440623969:cn=.00047935919155035045;let Lt;t[115]>1e-35?Lt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Lt=-.10131179514695865:t[8]>938.5000000000001?Lt=.10203729808015481:Lt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Lt=.03574015165562999:Lt=-.07763042506449493:Lt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Lt=.0665706259130275:Lt=-.06586817559309924:Lt=.11925564412287476:Lt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Lt=.046017146627455346:Lt=-.08623321630086885:t[8]>1765.5000000000002?Lt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Lt=.11143827902215087:Lt=-.01817808730473413:Lt=.16980985030210127:Lt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Lt=.010168994879727824:Lt=-.09099594488792513:t[9]>1.5000000000000002?Lt=.0533459678147928:Lt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Lt=-.062346959148773695:t[1]>47.50000000000001?Lt=-.0021578343835599316:t[2]>27.500000000000004?Lt=.19567373210166172:Lt=.07851555379116423:t[18]>1e-35?Lt=.03711549097804649:t[8]>359.50000000000006?Lt=.012492346746905587:t[4]>20.500000000000004?Lt=.047511695735697544:Lt=-.07999269063948773:Lt=6802045404471004e-20;let Gn;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Gn=.0011484728213539738:Gn=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Gn=-.09828874964938798:t[8]>1586.5000000000002?Gn=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Gn=.011938269926919522:Gn=.17541983715953954:t[19]>1e-35?Gn=.023002786011088672:Gn=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Gn=.06508934844183291:Gn=-.10168553534835639:Gn=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Gn=.021140806225203937:Gn=-.1167833342453639:t[2]>33.50000000000001?Gn=.13163585734056618:Gn=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Gn=.06314479201263888:Gn=-.09639088327091713:t[10]>29.500000000000004?Gn=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Gn=40577156464836036e-21:Gn=.12322387121810757:Gn=-.03697224045046014:t[1]>22.500000000000004?Gn=.016474835887320276:Gn=.16919298733903063:Gn=.07633203630214054:Gn=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Gn=.14150493354700563:Gn=-.01831155354975749:t[1]>28.500000000000004?Gn=-.07952557178685365:t[10]>28.500000000000004?Gn=.0665695554984927:Gn=-.053640139319277094:Gn=.0004754840665898665;let Yn;t[76]>1e-35?Yn=-.06814884255939921:t[179]>1e-35?Yn=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Yn=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Yn=.004193658608848433:Yn=-.1066968975983452:t[8]>302.50000000000006?Yn=.05476730110440451:Yn=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Yn=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Yn=.013555772109446666:Yn=-.09856116699770784:Yn=.0284329611813383:t[2]>52.50000000000001?Yn=.04008708444763762:t[9]>29.500000000000004?Yn=-.1289599546008197:Yn=-.018566534248335896:t[8]>747.5000000000001?Yn=.02236484980076122:Yn=.1148871655157582:t[8]>3084.0000000000005?Yn=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Yn=.03164751204281298:Yn=.11752140436184891:t[9]>42.50000000000001?Yn=-.07180559595410106:t[22]>1e-35?Yn=.09325040416256854:Yn=-.016041122807939914:Yn=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Yn=-.010718250133458515:Yn=.09818827994853763:Yn=.010180038981174032:Yn=-.039472162599295535:t[9]>170.50000000000003?Yn=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Yn=-.08674788057474031:Yn=.02077653508548371:Yn=-.0003536561382007414;let fr;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?fr=.018337297491457794:fr=-.05926206443180149:fr=.024026520855881126:t[288]>1e-35?t[184]>1e-35?fr=.10747078482128616:t[126]>1e-35?fr=-.10550625192391357:t[7]>71.50000000000001?fr=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?fr=.1317396472229434:fr=-.025035791351328947:fr=-.0728334305864372:t[8]>963.5000000000001?fr=.023642201723096064:fr=.183010326734258:t[128]>1e-35?fr=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?fr=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?fr=-.1088876900335281:fr=.02758317023002635:fr=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?fr=-.01928020117446408:fr=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?fr=.07893723375925096:fr=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?fr=-.10301657587280551:fr=.005787463140224318:fr=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?fr=-.019296977889522397:fr=-.07274529751752634:t[1]>30.500000000000004?fr=-.050368901143148286:fr=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?fr=.0015332402792773946:fr=.09930153676749967:fr=-.06370844564357069:fr=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ut;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ut=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ut=.08513773825688947:ut=-.1184664832315282:ut=.05676963535893477:ut=.14263843210340613:ut=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ut=-.10669720555606924:ut=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ut=.0664744575868955:ut=-.08469256188890871:ut=-.026746678040592144:t[281]>1e-35?ut=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ut=.012131807587207655:ut=-.12776015795398743:ut=.04320472481083551:ut=.08390980661550446:t[10]>227.50000000000003?ut=-.09771783809101153:t[10]>130.50000000000003?ut=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ut=-.07610698254064358:t[8]>902.5000000000001?ut=-.03136381213599649:t[131]>1e-35?ut=.0704821739127936:t[224]>1e-35?ut=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ut=.10431473040024908:t[8]>841.5000000000001?ut=.07304745320500514:ut=-.038011541882439825:ut=-.01679746695007364:t[0]>3129.5000000000005?ut=.05589952587431965:t[210]>1e-35?ut=.06227198085800842:ut=-.0011341890997947812:t[8]>740.5000000000001?ut=.04817300084412584:ut=-.000577001010789238;let yt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?yt=-.10504730480402079:t[5]>3341.5000000000005?yt=.11087894671081754:yt=-.0406668834674614:yt=.03308382165616109:t[8]>104.50000000000001?yt=-.10431436764549162:yt=.0073928337244891455:t[4]>34.50000000000001?yt=-.10571751512748416:yt=-.006081128814142983:t[13]>1e-35?yt=.1299673566095023:t[4]>60.50000000000001?yt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?yt=.04857126072645073:yt=-.03431365358104773:t[4]>16.500000000000004?yt=.04101865986596709:yt=.16480274980378218:t[10]>26.500000000000004?yt=.03673978504199255:t[10]>9.500000000000002?yt=-.10996402743800027:t[308]>1e-35?yt=.0553693735082498:yt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?yt=.010902983761213922:yt=.1325118659895645:yt=-.064362945508595:t[1]>66.50000000000001?yt=.033416767779331176:yt=-.054080316225040496:t[42]>1e-35?yt=-.07762364337810815:t[10]>1089.5000000000002?yt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?yt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?yt=.0220102041325908:yt=-.06516708740003069:yt=.012833498905748267:t[224]>1e-35?yt=-.007038418272997865:yt=.00037666304316290967;let Xt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Xt=.07554189644995735:Xt=-.052089349455904946:Xt=-.10148206848169845:t[113]>1e-35?Xt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Xt=.07172653627995676:Xt=-.07602959317610998:Xt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Xt=-.0399322883690891:Xt=.06523495517476098:Xt=-.10358715295743802:t[193]>1e-35?Xt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Xt=.015928764772252406:Xt=.1341513061552287:Xt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Xt=-.033592997607280156:Xt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Xt=-.08402551858097379:Xt=.017401984506038796:t[1]>25.500000000000004?Xt=.13337205393591278:Xt=-.01160208350090984:Xt=.06708317942315471:t[8]>227.50000000000003?Xt=-.08486943882418681:Xt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Xt=-.10496268177586783:Xt=-.020921489532370493:Xt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Xt=.11639296062157028:Xt=-.004275784356569115:t[32]>1e-35?Xt=-.07297384970166025:Xt=.006026841626381599:Xt=.002034611134960428;let Gt;t[248]>1e-35?Gt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Gt=-.06455513326540585:t[1]>29.500000000000004?Gt=.07718474591552532:t[4]>7.500000000000001?Gt=.040139336931404826:Gt=-.09685734690563386:Gt=.00015327283570347363:t[9]>88.50000000000001?Gt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Gt=-.04077257804338707:Gt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Gt=.03778141591008941:Gt=-.06459919920634845:Gt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Gt=.14063930759326346:t[0]>179.50000000000003?Gt=.07287482250668585:t[8]>1180.5000000000002?Gt=-.14419393112726253:t[10]>28.500000000000004?Gt=-.07993142770099469:t[17]>1e-35?Gt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Gt=.05527969663610186:Gt=-.10824385941441346:t[3]>11.500000000000002?Gt=.12358502961047915:Gt=-.017509147119622873:t[0]>74.50000000000001?Gt=-.014907705458730486:t[8]>95.50000000000001?Gt=-.02225118168342062:Gt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Gt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Gt=.04962819555610421:Gt=-.07213577821855309:Gt=.09139529824708481:t[19]>1e-35?Gt=.013439401088345224:Gt=-.049274647207292056:Gt=.10531673719686951;let yn;t[40]>1e-35?t[0]>1937.5000000000002?yn=-.06421671152073961:yn=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?yn=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?yn=-.03520420769287065:t[8]>1085.5000000000002?yn=-.019817352506127633:yn=.11444439424520964:yn=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?yn=-.010490117519863269:yn=.08104430117757461:t[121]>1e-35?t[243]>1e-35?yn=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?yn=.06619344145920268:t[0]>4091.5000000000005?yn=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?yn=.10016091391222309:yn=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?yn=-.019511460451434884:yn=-.11643672465055221:t[2]>18.500000000000004?yn=.07848228087333317:t[8]>55.50000000000001?yn=.032583027899956235:yn=-.11209832692153521:t[11]>1e-35?yn=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?yn=-.09996887746328006:t[9]>2.5000000000000004?yn=.02157682011863397:yn=-.05247727848991843:yn=.07409150201483244:t[1]>38.50000000000001?yn=-.11378466075449625:t[224]>1e-35?yn=-.10741749127732923:t[1]>26.500000000000004?yn=.07343136534146562:yn=-.07013573628594773:t[25]>1e-35?yn=-.04626669734164317:yn=.05518333197956482:yn=.00032434010867555516;let vn;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?vn=.026313251010808853:vn=-.08997339150292381:vn=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?vn=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?vn=.0905155504503746:t[8]>1049.5000000000002?vn=-.062312558183394054:t[8]>719.5000000000001?vn=.09583836191410239:t[0]>3719.5000000000005?vn=-.0778097309430818:vn=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?vn=-.12920865648544927:t[0]>2699.5000000000005?vn=-.07086587879041864:vn=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?vn=-.11377786322600797:vn=-.009486325820117998:t[1]>55.50000000000001?vn=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?vn=-.07938291201004219:t[2]>36.50000000000001?vn=.01520046732530246:vn=.13649854049662832:vn=-.07145015938528873:t[8]>407.50000000000006?vn=-.00350257360822279:vn=.11332047082193297:vn=-.10060624458629897:vn=.05429496612497562:t[8]>1446.5000000000002?vn=.006073419197482838:vn=-.08718676350883998:vn=-.11532497988252638:vn=.10766270463068293:t[34]>1e-35?vn=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?vn=-.0004109812623829506:vn=.021601073497455662:vn=-7343540098965853e-20;let jt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?jt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?jt=.05995640200798119:t[0]>3443.5000000000005?jt=-.14698883458733583:jt=-.030039164579240187:t[189]>1e-35?jt=-.06086763220538141:t[1]>86.50000000000001?jt=-.05096727866142538:t[4]>64.50000000000001?jt=.11240554253834577:t[4]>45.50000000000001?jt=-.030279760168394117:t[6]>45.50000000000001?jt=.10161088917815142:t[10]>77.50000000000001?jt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?jt=-.06672020005240323:jt=.08831457502630258:t[8]>2592.5000000000005?jt=-.052617701047376654:t[10]>29.500000000000004?jt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?jt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?jt=-.064099222705728:jt=.044332487521538365:t[0]>2882.5000000000005?jt=.031099546885005065:jt=.12938467051623853:t[0]>4221.500000000001?jt=-.0928676413498701:t[9]>30.500000000000004?jt=-.05781824812803708:jt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?jt=-.06648105454098469:jt=.05985487552383097:jt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?jt=.05282385499619401:t[1]>66.50000000000001?jt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?jt=.027885690791379255:jt=-.08407126408362446:jt=.014432924125571093:jt=-9903435845205118e-20;let nn;t[76]>1e-35?nn=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?nn=.013633653464240465:nn=-.10164319411983509:nn=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?nn=.00632864847804078:nn=-.08393000368134668:nn=.07870508617440916:t[284]>1e-35?nn=.1092302727710421:nn=-.0025505047582483234:t[248]>1e-35?nn=.07101822393621864:t[274]>1e-35?nn=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?nn=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?nn=.025081789181021243:nn=-.014813325803582618:t[9]>33.50000000000001?nn=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?nn=.11926990418060353:nn=.01852125513565268:nn=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?nn=-.1178464984373743:t[283]>1e-35?nn=.043370859226927405:t[5]>4320.500000000001?nn=-.01103141226366587:t[8]>1104.5000000000002?nn=-.023053423988095886:nn=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?nn=.000579145585864887:nn=.03389152834202143:t[128]>1e-35?nn=-.14527722052568462:t[210]>1e-35?nn=-.08915971541902741:t[7]>9.500000000000002?nn=-.03307314577076116:t[18]>1e-35?nn=-.05521712302023565:nn=.009315605032770029:nn=.0036332551852289933;let Jt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Jt=-.07583539600416284:t[188]>1e-35?Jt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Jt=-.011038193049597113:Jt=.08154028164397753:t[1]>85.50000000000001?Jt=.10259361975201933:Jt=.011640408330521594:Jt=-.00023319159023748508:t[92]>1e-35?Jt=.13771692859530546:Jt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Jt=.09967230141007705:t[30]>1e-35?Jt=-.08888529037551285:Jt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Jt=.08284665960761373:Jt=-.029292565021289504:t[7]>7.500000000000001?Jt=-.09945093355204493:Jt=-.008381393701708593:t[20]>1e-35?Jt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Jt=.07585582641438211:t[8]>284.50000000000006?Jt=-.029387993239886723:Jt=.07716738177321587:t[1]>18.500000000000004?Jt=.026745348497993746:Jt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Jt=.02337306890530338:Jt=-.10390355904767366:Jt=.07390521199638532:Jt=-.06788247515155237:Jt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Jt=-.06360325615644084:Jt=.04342192339836601:Jt=-.10598779152030145:Jt=.05253384605768211;let Tn;t[3]>7.500000000000001?t[157]>1e-35?Tn=-.07514182877923786:Tn=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Tn=.028692053800951845:Tn=.14081686716133598:Tn=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Tn=.0037139292567243084:Tn=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Tn=.01202688580305612:Tn=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Tn=.043935495082738626:Tn=-.05639305759669704:t[247]>1e-35?Tn=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Tn=.10331836202616368:Tn=.0006926658459781341:t[96]>1e-35?Tn=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Tn=-.0741403257305367:Tn=.022900127535540854:t[7]>3.5000000000000004?Tn=.038110741403836294:Tn=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Tn=-.09552842289807008:t[1]>27.500000000000004?Tn=.012505935885798007:Tn=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Tn=-.1046104767723845:Tn=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Tn=.023466328488582572:Tn=.11730925774586994:Tn=-.04771965631104874:Tn=.17059689880751394:Tn=-.08181850955999449:t[26]>1e-35?Tn=-.12727482696678769:Tn=-.014343123272734182;let Nn;t[147]>1e-35?t[1]>53.50000000000001?Nn=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Nn=-.02763546051134888:Nn=.06423344777499343:Nn=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Nn=.049825139823021586:t[7]>22.500000000000004?Nn=-.01131680751379858:t[0]>2579.5000000000005?Nn=-.10673674485369694:Nn=-.015387212937189957:Nn=.04347325151148724:t[179]>1e-35?Nn=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Nn=.0650355590939066:Nn=-.0473332870892226:Nn=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Nn=.11139543329789044:t[126]>1e-35?Nn=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Nn=.06370903833231022:t[10]>29.500000000000004?Nn=.03415223859607161:t[10]>3.5000000000000004?Nn=-.07415518117873297:Nn=-.0014119203473324082:Nn=.12617652343819508:t[9]>41.50000000000001?Nn=-.10311145857176976:t[8]>2757.5000000000005?Nn=-.08106484219011428:t[7]>71.50000000000001?Nn=-.09783384432091176:t[1]>88.50000000000001?Nn=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Nn=-.008884084501608536:Nn=.061339437777743616:Nn=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Nn=.01526664064166223:Nn=.13534828515415498:Nn=-.06985484465894776:Nn=.0005758961943178744;let Kn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Kn=-.029152732370514342:Kn=.07173628916139178:t[1]>36.50000000000001?Kn=-.08859111297255318:Kn=.0018030071815630785:Kn=.13652461563759322:Kn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Kn=-.07145140450454163:t[21]>1e-35?Kn=-.07422841663493233:Kn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Kn=.11864240653986852:t[3]>33.50000000000001?Kn=-.08821209591953476:Kn=.05706392280054726:Kn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Kn=.01953613016837112:Kn=-.059781039130025006:t[148]>1e-35?Kn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Kn=.07207826841738371:t[202]>1e-35?Kn=.08163917539410503:Kn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Kn=-.06858280496900336:Kn=-.1781828899516648:Kn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Kn=.018232649414147116:Kn=-.04419781124222661:Kn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Kn=.11452368095776105:Kn=-.036496437259924026:Kn=-.040445338739465486:Kn=.0816572651001145:Kn=-.08968914517368663:Kn=.0002826343082585516;let qr;t[189]>1e-35?t[0]>5269.500000000001?qr=-.08839493050459957:t[10]>85.50000000000001?qr=.10046908365702462:t[8]>2592.5000000000005?qr=-.09632233975926387:t[8]>2000.5000000000002?qr=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?qr=.035504970430426296:t[1]>31.500000000000004?qr=-.1133764813142531:qr=-.01138280942244812:t[8]>1125.5000000000002?qr=.09800530246229806:qr=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?qr=.07316772160107896:qr=-.059095014819051765:qr=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?qr=-.09150209066166894:t[8]>3084.0000000000005?qr=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?qr=-.04449234460408263:qr=.05568837973347338:qr=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?qr=.12741077850267066:qr=.007372371864985329:t[2]>39.50000000000001?qr=.02295917234617787:qr=.14966532083907075:t[1]>39.50000000000001?qr=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?qr=-.02511861881285652:t[1]>27.500000000000004?qr=.08683660011672288:qr=.02956214835267301:t[9]>15.500000000000002?qr=-.016538805462996232:qr=.04352738094981517:qr=-.05561856645643868:t[9]>170.50000000000003?qr=-.07996752635874248:t[179]>1e-35?qr=-.09065975936933919:qr=-.00042817975060427177;let Jr;t[39]>1e-35?t[4]>25.500000000000004?Jr=.03443173196222934:Jr=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Jr=-.0013415395759330318:Jr=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Jr=.002297618040307216:Jr=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Jr=-.015297257305397608:Jr=.09651828834062742:Jr=-.06636003334371929:t[10]>11.500000000000002?Jr=.17631616138309397:t[0]>1639.5000000000002?Jr=3804386478092585e-20:Jr=-.09099296398683193:Jr=-.06874415876172972:t[0]>2151.5000000000005?Jr=-.1311264883406766:Jr=.00809052010141122:t[253]>1e-35?Jr=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Jr=.045038497754638605:Jr=-.07770167665661752:Jr=-.08596294280650517:Jr=.08538655727027213:Jr=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Jr=.054627956617973275:t[1]>61.50000000000001?Jr=-.11994465088415499:t[4]>8.500000000000002?Jr=.06676200239406452:Jr=-.027503148069376867:t[8]>676.5000000000001?Jr=-.10363964928357075:t[4]>8.500000000000002?Jr=-.07589816227175682:Jr=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Jr=.009093153189012338:Jr=-.06119765876605404:Jr=.0004668642103528348;let Mr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Mr=-.10100794502567233:Mr=.08000205636470442:Mr=-.11945419826856896:t[113]>1e-35?Mr=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Mr=.1224302423880318:Mr=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Mr=.0019277012166729114:t[1]>28.500000000000004?Mr=-.054445821715687494:Mr=.045645722976713245:t[30]>1e-35?Mr=.13402660155331655:Mr=.008921176001777645:Mr=-.058547426505451076:Mr=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Mr=-.13526418192218206:Mr=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Mr=.0007263224246135398:Mr=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Mr=-.11575657261278308:Mr=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Mr=-.01995960178292952:Mr=.11216586049153021:Mr=-.10050961087149474:Mr=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Mr=.10303451081526649:Mr=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Mr=-.043799548968209395:Mr=-.12451444314954115:t[4]>12.500000000000002?Mr=-.03838117361958468:Mr=.06504990789767144:t[57]>1e-35?Mr=.06890006938293915:Mr=.0003914274695562949;let $r;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?$r=.004271749009686975:$r=-.10523878297127605:$r=.04633982158107851:$r=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?$r=-.08655730561951676:t[8]>919.5000000000001?$r=-.0676453705610183:t[7]>18.500000000000004?$r=-.027787974193650575:$r=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?$r=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?$r=-.03473877164537313:t[8]>719.5000000000001?$r=.10471053866934404:$r=.008236107678382981:t[4]>57.50000000000001?$r=.09412219478825269:t[10]>66.50000000000001?$r=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?$r=-.040681323751002293:$r=.06374650297561021:$r=.12884615227401788:t[10]>5.500000000000001?$r=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?$r=-.05474068967150784:$r=.03744700650806603:$r=-.07846396348680855:t[1]>42.50000000000001?$r=.018972315810821302:$r=.10953621007604744:t[5]>4439.500000000001?$r=.010999776705494586:t[1]>40.50000000000001?$r=-.12394200059775967:t[10]>2.5000000000000004?$r=.013528093962849453:$r=-.09222088417048682:$r=-.12662967149701485:$r=.09327296405849603:t[3]>99.50000000000001?$r=-.013581954439986752:$r=.0005526498251862075;let tr;t[187]>1e-35?t[243]>1e-35?tr=-.08392792551692502:t[10]>68.50000000000001?tr=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?tr=-.0825306209711224:tr=.049559996084532945:tr=-.1064938580886302:tr=.03353240732240275:tr=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?tr=.16966001471529374:t[1]>57.50000000000001?tr=-.005772777673676247:tr=.09383677041525058:t[8]>747.5000000000001?tr=.054068175469351235:tr=-.049968216310277036:t[8]>753.5000000000001?tr=-.0679383555784074:t[4]>8.500000000000002?tr=-.059757341189735386:tr=.05701083682780414:tr=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?tr=.05820296128730006:tr=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?tr=.15340611616954566:tr=.04385036188666874:t[0]>4449.500000000001?tr=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?tr=.004840354641006495:tr=.09967827580276283:tr=.11605363537391578:t[9]>19.500000000000004?tr=-.0735831692725717:tr=.019973331823355176:t[306]>1e-35?t[149]>1e-35?tr=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?tr=-.02442182361342386:tr=.10334853004243093:tr=-.030431948680167104:tr=-956078595250818e-19;let zr;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?zr=-.040232505718244854:t[0]>3030.5000000000005?zr=.0634109586813073:zr=-.04043617034245621:zr=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?zr=-.007859096946435131:zr=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?zr=.05515771679628051:zr=-.04214471312668263:zr=-.09589322222261765:t[193]>1e-35?zr=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?zr=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?zr=-.08152604001147906:t[11]>1e-35?zr=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?zr=.13100930780107503:t[10]>25.500000000000004?zr=.05921074710011526:zr=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?zr=.0009447118243153454:zr=-.09820565036865991:zr=.057146909749745546:t[0]>2115.5000000000005?zr=-.12331216726611678:zr=.007281983677694285:t[2]>56.50000000000001?zr=.012310154675612615:zr=-.08873665774670461:t[6]>25.500000000000004?zr=.134708740821879:t[9]>5.500000000000001?zr=-.0805901581148979:t[224]>1e-35?zr=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?zr=.10842593386554122:t[2]>13.500000000000002?zr=.06466798320378395:zr=-.08578130788886655:zr=-.03590892078300114:zr=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let U;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?U=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?U=.020637047900190317:U=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?U=-.04632587527094407:U=.08603684785510396:U=-.05101401015448496:U=.025466432054358498:U=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?U=.020385355430046367:U=.12032592051335252:U=-.012387370292173013:t[2]>23.500000000000004?U=-.12568545484492677:U=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?U=.043528764484784536:U=.14352071657196003:U=-.009332833816977268:U=.11186782227735846:U=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?U=-.05649104643152564:U=.03884200719305747:t[42]>1e-35?U=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?U=-.04103416502526736:U=.04881823954656287:t[4]>15.500000000000002?U=.009342724662897898:t[0]>3969.5000000000005?U=-.025637309961309498:U=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?U=-.08185697075265091:t[0]>2215.5000000000005?U=.030063975892297354:t[0]>807.5000000000001?U=-.03924325550733229:U=.0415330999189793:U=-.00024374664461674863;let he;t[3]>7.500000000000001?he=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?he=.025798416259686565:he=.13251610353146012:he=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?he=-.11098564237775424:he=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?he=.15347826616466054:t[3]>4.500000000000001?he=.10379320730958941:he=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?he=.03159791088468647:he=-.10612873364104258:he=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?he=-.02335760775001469:he=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?he=-.011164334474672973:he=-.06594044410501655:t[207]>1e-35?he=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?he=-.01725821503981916:he=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?he=-.04226531631656534:he=-.14409800530171432:he=-.03245576341206398:t[8]>4214.500000000001?he=.0895409165534886:t[247]>1e-35?he=-.06506383629143335:t[118]>1e-35?he=-.07214270121257443:t[8]>546.5000000000001?he=-.004385020865473831:he=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?he=.046278501133958524:he=-.030835570926968044:t[0]>493.50000000000006?he=-.12794504651610425:he=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let X;t[7]>17.500000000000004?t[115]>1e-35?X=.08741852531696623:t[167]>1e-35?X=.10078975495600809:X=-.0018324767784017562:t[290]>1e-35?X=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?X=.1379733311640402:X=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?X=-.09360083033774169:X=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?X=-.015599362579530679:t[0]>4593.500000000001?X=-.12029549262691491:X=-.018917032256501397:X=.04632831686576592:X=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?X=-.05894883236412263:X=.05213944998315824:X=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?X=.07577412405680808:X=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?X=-.0277076900736147:t[1]>65.50000000000001?X=-.023587471585763506:X=.10184896592433082:X=-.057699270527916825:X=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?X=.06566902102799584:t[10]>25.500000000000004?X=-.07033633753181047:X=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?X=-.08108035861059537:X=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?X=-.12431182772561139:X=.01886235886984271:X=.0025579594894418116;let M;t[8]>2915.5000000000005?t[101]>1e-35?M=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?M=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?M=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?M=.0687641681341721:t[10]>102.50000000000001?M=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?M=-.06762578396473291:t[10]>65.50000000000001?M=-.05226727783610509:t[282]>1e-35?M=.09911438410640917:t[19]>1e-35?M=.06915156336429933:M=-.006565637886508241:M=-.08344300251849307:M=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?M=.19428463865406298:M=.016073883020956765:t[13]>1e-35?M=.06864077097923665:M=-.01388867527034731:t[0]>1847.5000000000002?M=.004655280608161356:t[1]>40.50000000000001?M=.031406054057765996:M=.12798062439212832:M=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?M=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?M=-.0706095614785733:M=.04227164041372561:M=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?M=-.07139533369873902:M=.008952586782921625:M=.06086212582180936:M=-.0816938490403437:M=-.051224901945956025:M=-.10525399124186095:M=.000270924147208224;let ke;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ke=.029186512383291244:t[7]>1.5000000000000002?ke=-.14984127276725573:t[1]>40.50000000000001?ke=.032757060730648144:ke=-.07675575422749602:t[6]>8.500000000000002?ke=.10599766037117893:ke=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ke=-.051394622947855385:ke=.03237141302699347:ke=.12526173027943244:ke=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ke=-.07383912482657777:t[0]>5147.500000000001?ke=.07008813937042091:t[10]>38.50000000000001?ke=-.06779203808365307:ke=-.013782769999524498:ke=.0880038869117715:ke=-.12846294176070952:t[281]>1e-35?ke=-.06810806903850834:t[10]>227.50000000000003?ke=-.08937977001661111:t[10]>130.50000000000003?ke=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ke=.011036530162093841:ke=-.11500797478569702:ke=.03702229366129399:ke=.07242026683784307:t[189]>1e-35?ke=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ke=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ke=-.02608892716555304:ke=.09609599320761308:t[9]>105.50000000000001?ke=-.06848127135991534:ke=.0023675721254089715:t[86]>1e-35?ke=-.11049635625500497:ke=-.004847764219432233;let $e;t[125]>1e-35?t[0]>3969.5000000000005?$e=-.09462233499115416:$e=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?$e=-.030700661288166148:$e=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?$e=.03149547314036763:$e=-.08166208257451366:t[0]>5850.500000000001?$e=-.10228136324773157:t[102]>1e-35?$e=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?$e=.01782894842128785:t[13]>1e-35?$e=.002680190260979968:$e=.1773965720476949:t[2]>72.50000000000001?$e=.09090831938627947:t[1]>59.50000000000001?$e=-.12297206702816128:t[0]>4977.500000000001?$e=.09899015653118268:$e=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?$e=-.0675900954187773:$e=.012336403425364092:$e=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?$e=-.02671721777458802:$e=-.09242452991958029:t[284]>1e-35?$e=-.08585691288582491:$e=.013332890564324447:t[4]>14.500000000000002?$e=-.005245022074799553:t[23]>1e-35?$e=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?$e=-.09289852307936758:t[116]>1e-35?$e=-.09686573010015055:t[8]>804.5000000000001?$e=.03812547148215318:$e=.005162744968176633:t[9]>43.50000000000001?$e=-.059246106396159376:$e=.050370113808135275:$e=.000794041852811028;let qt;t[3]>7.500000000000001?qt=.0004981426543104341:t[9]>114.50000000000001?qt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?qt=-.019061766497948867:qt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?qt=-.006044199577160493:qt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?qt=.11486607015912494:t[9]>16.500000000000004?qt=-.08686820858087294:qt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?qt=-.022230207980026437:qt=.1056683690528792:qt=-.05859530800943035:qt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?qt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?qt=-.05177544573528314:qt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?qt=.15159657923771555:qt=-.0060542654587671055:t[9]>5.500000000000001?qt=-.042808028205051786:t[1]>48.50000000000001?qt=-.010449538258110742:qt=.10026907521968294:qt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?qt=-.02272452389409874:qt=-.11202691218244319:t[5]>1809.5000000000002?qt=-.04460413584255906:qt=.08196329474205256:t[10]>69.50000000000001?qt=.10221481166238167:qt=.0004063052701699382:t[243]>1e-35?qt=-.07563941678849846:t[18]>1e-35?qt=.02563513231103432:qt=-.004740081147303786;let Sn;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Sn=.057446442918106:Sn=-.04404018270156349:Sn=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Sn=-.05930486238817954:t[1]>29.500000000000004?Sn=.06955866121256543:t[8]>597.5000000000001?Sn=-.06538593556505168:Sn=.06212512595497445:Sn=.00021102929959182257:t[9]>90.50000000000001?Sn=.0958061289119631:t[102]>1e-35?Sn=.07172059675638813:t[1]>47.50000000000001?Sn=-.03879798603977766:t[297]>1e-35?Sn=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?Sn=.003805910996312012:Sn=.09304295674749524:t[11]>1e-35?t[18]>1e-35?Sn=.11252376801858695:t[288]>1e-35?Sn=-.10293901912180432:Sn=.014669268837893872:t[1]>42.50000000000001?Sn=-.05988274123836837:t[145]>1e-35?Sn=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?Sn=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?Sn=-.03366718308159971:Sn=.11936550608549797:t[1]>31.500000000000004?Sn=-.07454716789539667:Sn=.027859650621164217:t[10]>10.500000000000002?Sn=-.11806374092321247:Sn=-.03506042229223101:Sn=-.0007080765837654515:t[10]>6.500000000000001?Sn=-.028077713664996503:t[2]>7.500000000000001?Sn=.15803724124216814:Sn=.0351381284833169:Sn=-.07877953381054767;let mn;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?mn=.14144941521975005:mn=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?mn=.10514088112381886:t[7]>18.500000000000004?mn=-.10370643555956745:mn=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?mn=-.0508129468802936:t[224]>1e-35?mn=-.037816066368733595:t[10]>43.50000000000001?mn=.07793408602607932:mn=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?mn=.036972453794202324:mn=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?mn=.09475302525132188:mn=-.03580104945898193:mn=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?mn=-.1282448778804823:mn=-.014395808269207212:mn=-.008940927190750592:mn=-.1459118815453748:t[0]>4897.500000000001?mn=-.09733068457286576:t[1]>57.50000000000001?mn=.06575271409540207:mn=-.019556422817450115:mn=-.10623959222984136:t[18]>1e-35?mn=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?mn=.008125645893104896:mn=-.11084368630465868:mn=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?mn=-.05854904579626861:t[4]>5.500000000000001?mn=.02985784951394175:mn=-.03247600140149334:mn=-.11152899295304973:mn=-.00035424577714215764;let lr;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?lr=-.06563670567578264:lr=.067656954313663:lr=-.10388217548685377:t[8]>2302.5000000000005?lr=.07190621943790435:t[4]>67.50000000000001?lr=.060020507643618604:t[4]>38.50000000000001?lr=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?lr=-.06568134366461277:t[8]>1075.5000000000002?lr=-.004768057709758692:lr=.11785959165999467:lr=-.05080221682879267:lr=.14814206127494542:lr=-.07241946332311736:t[253]>1e-35?lr=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?lr=-.02471195342450034:lr=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?lr=-.10741850739482771:lr=.010051635824944:lr=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?lr=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?lr=-.08992396138178163:lr=.010944365997007212:lr=.06221307021813793:lr=.1286024087559141:t[127]>1e-35?lr=.06568148624531012:t[10]>40.50000000000001?lr=-.07567979134643352:t[5]>5647.500000000001?lr=.07594672895572069:lr=-.018158016446439187:t[6]>55.50000000000001?lr=.009293422430111872:t[4]>45.50000000000001?lr=-.017749818406964022:t[2]>46.50000000000001?lr=.01714136511113982:lr=-724762291423549e-19;let pr;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?pr=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?pr=.07084726276890757:pr=-.11232323677722932:pr=.04812773089510436:pr=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?pr=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?pr=.0879462816013881:pr=-.002966662093626573:t[306]>1e-35?pr=-.04588085188342676:pr=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?pr=-.006600332774461143:pr=.1272481351557754:pr=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?pr=.011884312066620044:pr=.11678751052403374:t[4]>8.500000000000002?pr=.03627129613273813:pr=-.12132783497902287:pr=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?pr=-.06830131718398992:t[0]>5147.500000000001?pr=.062360406249609306:t[4]>4.500000000000001?pr=-.013162203864592055:pr=-.07153029184927609:pr=.07628618062271557:pr=-.12085065687320373:t[190]>1e-35?pr=-.045816889524231186:t[137]>1e-35?pr=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?pr=.025895337822752502:pr=-.06503949350616421:t[10]>227.50000000000003?pr=-.09989456525790491:t[10]>130.50000000000003?pr=.08616651057030683:pr=.0001234981796706021;let bn;t[8]>1014.5000000000001?t[9]>137.50000000000003?bn=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?bn=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?bn=-.141732381961068:bn=-.0317152307496497:bn=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?bn=.12191801556691254:bn=-.0003444689085397977:bn=.005739668504631604:t[146]>1e-35?t[308]>1e-35?bn=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?bn=-.05676033995381961:bn=.10933961076803381:t[4]>26.500000000000004?bn=-.11667582544549814:t[8]>1765.5000000000002?bn=.032174455312047705:bn=-.0755016390126608:t[293]>1e-35?bn=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?bn=.026571311956824436:t[15]>1e-35?bn=.06175459479851121:bn=-.018778084411148754:t[9]>40.50000000000001?bn=-.09420232889965811:bn=-.004578248021263184:t[2]>1.5000000000000002?bn=.005453714644971445:bn=-.03907138175699279:bn=-.055296364182154736:t[23]>1e-35?bn=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?bn=-.09358146510580179:bn=.060524657996178094:bn=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?bn=-.12698331085931538:bn=.006059605604079918:t[2]>196.50000000000003?bn=-.09451315810804783:bn=.0011390147031687425;let Ht;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?Ht=.05517359070460923:Ht=-.04758751221404857:Ht=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?Ht=.1040436595565776:t[9]>21.500000000000004?Ht=.04032250517675179:t[107]>1e-35?Ht=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?Ht=.1192453009230486:t[1]>51.50000000000001?Ht=.0443376336292195:Ht=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?Ht=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?Ht=-.08999822408398037:Ht=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?Ht=-.061850439226075:Ht=.08849196353361093:Ht=.10536348167793089:t[92]>1e-35?Ht=.04894947712119185:t[9]>16.500000000000004?Ht=.05900227903883853:t[9]>5.500000000000001?Ht=-.11946594348916476:Ht=-.03652096348071964:t[1]>41.50000000000001?Ht=-.07411603110840567:Ht=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?Ht=.08493634342741495:t[11]>1e-35?Ht=-.10899097825564363:Ht=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?Ht=.08356655906359918:t[7]>25.500000000000004?Ht=-.09475076526194888:t[10]>5.500000000000001?Ht=-.01999406228763778:Ht=.06696212545889428:t[6]>20.500000000000004?Ht=.14713592661393468:Ht=.0459917279002218:Ht=.00027445928493734093;let Qr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Qr=-.06904501553217077:Qr=.05696231672035904:Qr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Qr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Qr=-.011419256378538392:t[0]>3830.5000000000005?Qr=.140315841503076:Qr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Qr=-.04027822909411164:Qr=.03176085103667189:Qr=.06779515865838849:t[4]>15.500000000000002?Qr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Qr=.06124039747298539:Qr=-.04312732764434027:Qr=.09161522761808062:Qr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Qr=.11211681010488772:t[13]>1e-35?Qr=.06725735814960367:Qr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Qr=.11743605068905603:Qr=-.011309033539148687:Qr=-.07896094707523052:Qr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Qr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Qr=.02836295848998302:Qr=.12210680366745175:Qr=-.058302317470509096:t[5]>4144.500000000001?Qr=.06123341960495106:Qr=-.03840046906926525:Qr=-.05221474543453495:Qr=.03988215485860711:Qr=-.00033074684693083496;let Qs=Qpt(e+n+r+i+o+a+l+c+u+d+p+m+h+g+y+v+b+E+_+k+D+N+Q+Z+me+te+H+W+re+oe+V+q+Y+ee+de+ne+fe+pe+Be+Se+Ke+Fe+ft+Tt+Ct+bt+le+Oe+ye+tt+J+ie+We+Ne+be+ze+it+gt+Ot+cn+Lt+Gn+Yn+fr+Ae+Ge+ut+yt+Xt+Gt+yn+vn+jt+nn+Jt+Tn+Nn+Kn+qr+Jr+Mr+$r+tr+zr+_e+U+he+ve+X+M+ke+$e+qt+Sn+mn+lr+pr+bn+Ht+Qr);return[1-Qs,Qs]}s(qSe,"multilineModelPredict");function Qpt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(Qpt,"sigmoid");var Opt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},WSe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function GSe(t,e,n,r=!0){let i=t.split(`
`);if(r&&(i=i.filter(l=>l.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(Opt[n]??[]).some(l=>o.includes(l))}s(GSe,"hasComment");var PO=class{static{s(this,"PromptFeatures")}constructor(e,n){let[r,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=n,this.length=e.length,this.firstLineLength=r.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=GSe(e,-2,n),this.rstripSecondToLastLineHasComment=GSe(e.trimEnd(),-2,n),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let n=e.split(`
`),r=n.length,i=n[0],o=n[r-1];return o==""&&r>1&&(o=n[r-2]),[i,o]}},cre=class{static{s(this,"MultilineModelFeatures")}constructor(e,n,r){this.language=r,this.prefixFeatures=new PO(e,r),this.suffixFeatures=new PO(n,r)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let n=new Array(Object.keys(WSe).length+1).fill(0);n[WSe[this.language]??0]=1;let r=new Array(Object.keys(B1).length+1).fill(0);r[B1[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(B1).length+1).fill(0);i[B1[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(B1).length+1).fill(0);o[B1[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(B1).length+1).fill(0);return a[B1[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(n,r,i,o,a)}};function Upt(t,e){return new cre(t.prefix,t.suffix,e)}s(Upt,"constructMultilineFeatures");function HSe(t,e){let n=Upt(t,e).constructFeatures();return qSe(n)[1]}s(HSe,"requestMultilineScore");f();f();f();f();async function*D1(t,e){for await(let n of t)yield e(n)}s(D1,"asyncIterableMap");async function*jSe(t,e){for await(let n of t)await e(n)&&(yield n)}s(jSe,"asyncIterableFilter");async function*L8(t,e){for await(let n of t){let r=await e(n);r!==void 0&&(yield r)}}s(L8,"asyncIterableMapFilter");async function*VSe(...t){for(let e of t)yield*e}s(VSe,"asyncIterableConcat");f();async function F8(t,e,n,r){let i=or.createAndMarkAsIssued({messageId:e,conversationId:n});return await t.get(Nt).updateExPValuesAndAssignments(r,i)}s(F8,"createTelemetryWithExpWithId");function fc(t,{turn:e,conversation:n}={},r){return F8(t,e?.telemetryId??"",n?.telemetryId??"",r)}s(fc,"createTelemetryWithExpWithTurn");function M8(t,e,n,r,i,o,a,l){let c=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:c.join(",")},d={promptTokenLen:r,messageCharLen:n};return i&&(u.suggestion=i),o&&(u.suggestionId=o),l.length>0&&(u.skillResolutionsJson=JSON.stringify(qpt(l))),a=a.extendedBy(u,d),a}s(M8,"extendUserMessageTelemetryData");function qpt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(n=>n.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(qpt,"mapSkillResolutionsForTelemetry");function $Se(t,e,n,r,i,o,a){return r!=null&&(a=a.extendedBy({offTopic:r.toString()})),NO(t,o,e,n,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s($Se,"createUserMessageTelemetryData");function zSe(t,e,n,r,i,o,a,l){let c=Gpt(r);return NO(t,a,n,r,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:r.length,numCodeBlocks:c.length,numTokens:i},l).properties.messageId}s(zSe,"createModelMessageTelemetryData");function YSe(t,e,n,r,i,o,a){NO(t,o,n,r,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:n},{messageCharLen:r.length},a)}s(YSe,"createOffTopicMessageTelemetryData");function KSe(t,e,n,r,i,o,a,l,c){let u=NO(t,l,n,r,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:n,suggestionId:a},{promptTokenLen:i,messageCharLen:r.length},c);return Wpt(t,n,o,u.properties.messageId,u.properties.conversationId,a,c,l),u.properties.messageId}s(KSe,"createSuggestionMessageTelemetryData");var JSe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function XSe(t,e,n){let r=await fc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";v0(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},n,"index.codesearch",r)}s(XSe,"telemetryIndexCodesearch");function NO(t,e,n,r,i,o,a){let l=a??or.createAndMarkAsIssued(),c={messageText:r,...i};if(!("messageId"in i)&&!("messageId"in l.properties)){let m=an();i.messageId=m,c.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=l.extendedBy(i,o),d=l.extendedBy(c),p=wu(n);return kt(t,`${p}.message`,u),kt(t,`${p}.messageText`,d,1),u}s(NO,"telemetryMessage");function ZSe(t,e,n,r){v0(t,r,{uiKind:e},{},"conversation.suggestionShown",n)}s(ZSe,"createSuggestionShownTelemetryData");function Wpt(t,e,n,r,i,o,a,l){v0(t,l,{suggestion:n,messageId:r,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(Wpt,"createSuggestionSelectedTelemetryData");function v0(t,e,n,r,i,o){let a=o??or.createAndMarkAsIssued();e&&(n.languageId=e.detectedLanguageId,r.documentLength=e.getText().length,r.documentLineCount=e.lineCount);let l=a.extendedBy(n,r);return kt(t,i,l),l}s(v0,"telemetryUserAction");function e5(t,e,n){let r=n.extendedBy({messagesJson:JSON.stringify(e)});return kt(t,"engine.messages",r,1)}s(e5,"logEngineMessages");function wu(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(wu,"telemetryPrefixForUiKind");function Gpt(t){let e=t.split(`
`),n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(r.length>0&&o==="```"?n.push(r.pop()):r.length===0&&r.push(o.substring(3)))}return n}s(Gpt,"getCodeBlocks");function e5e(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(e5e,"uiKindToIntent");function rv(t){return t==="inline"?"conversationInline":"conversationPanel"}s(rv,"conversationSourceToUiKind");function t5e(t,e,n,r,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:n.toString(),uiKind:"agentPanel"},a={totalTimeMs:r};r5e(t,"round",i.extendedBy(o,a))}s(t5e,"createAgentRoundTelemetryData");function n5e(t,e,n,r,i,o,a,l){let c={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:n.name,toolType:n.type,toolProviderId:n.toolProvider.id,toolCallId:r,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};r5e(t,"toolCall",l.extendedBy(c,u))}s(n5e,"createToolInvocationTelemetryData");function r5e(t,e,n){return kt(t,`${wu("agentPanel")}.${e}`,n)}s(r5e,"logAgenticEvent");f();var yd=new _t("streamChoices"),ure=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new pre;this.tool_calls=[];this.function_call=new fre;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let n of e.delta.tool_calls){let r=n.index;this.tool_calls[r]||(this.tool_calls[r]=new dre),this.tool_calls[r].update(n)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function Hpt(t){let e=t.split(`
`),n=e.pop();return[e.filter(r=>r!=""),n]}s(Hpt,"splitChunk");var dre=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},fre=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},pre=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([n,r])=>{r.forEach(i=>this.update_namespace(n,i))})}update_namespace(e,n){this.current[e]||(this.current[e]=[]);let r=this.current[e],i=r.findIndex(o=>o.id===n.id);i>=0?r[i]=n:r.push(n)}for(e){return this.current[e]??[]}},iv=class t{constructor(e,n,r,i,o,a,l){this.ctx=e;this.expectedNumChoices=n;this.response=r;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=l;this.requestId=ov(this.response);this.stats=new mre;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,n,r,i,o,a){let l=r.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,n,r,l,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),yd.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),yd.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let n="",r=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;yd.debug(this.ctx,"chunk",a.toString());let[l,c]=Hpt(n+a.toString());n=c;for(let u of l){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(r,i,o,e);return}r=null;let p;try{p=JSON.parse(d)}catch{yd.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&jpt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?yd.error(this.ctx,"Error in response:",p.error.message):yd.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(this.requestId.created==0&&(this.requestId=ov(this.response,p),this.requestId.created===0&&p.choices?.length&&yd.error(this.ctx,'Request id invalid, should have "completionId" and "created":',this.requestId)),i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){n="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];yd.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new ure);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let E=g.text.join("");if(y=this.asSolutionDecision(await e(E,{text:E,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>Q8(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){r=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=h.finish_reason??"client-trimmed";if(kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:i??"",engineChoiceSource:Ox(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,l]of Object.entries(this.solutions)){let c=Number(a);if(l!=null&&(kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(c),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:c,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(n.length>0)try{let a=JSON.parse(n);a.error!==void 0&&yd.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{yd.error(this.ctx,`Error parsing extraData: ${n}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,n,r,i){for(let[o,a]of Object.entries(this.solutions)){let l=Number(o);if(a==null)continue;let c=a.text.join("");if(await i(c,{text:c,index:l,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>Q8(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(l),kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:n??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:n,usage:r},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(yd.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(n=>n==null)}};function LO(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(yd.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),yd.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),yd.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=Q8(e.solution);return FO(t,r,o,e.index,e.requestId,i,n)}s(LO,"prepareSolutionForReturn");function Q8(t){let e=t.text.join(""),n=Vpt(t),r=$pt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:n,function_call:r,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),l=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),c=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:l,text_offset:c,tokens:u}}}s(Q8,"convertToAPIJsonData");function jpt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(jpt,"isCopilotConfirmation");function Vpt(t){let e=[];for(let n of t.tool_calls)if(n.name){let r=n.arguments.length>0?JSON.parse(n.arguments.join("")):{};e.push({type:"function",function:{name:n.name,arguments:r},approxNumTokens:n.arguments.length+1})}return e}s(Vpt,"extractToolCalls");function $pt(t){if(t.function_call.name){let e=t.function_call.arguments.length>0?JSON.parse(t.function_call.arguments.join("")):{};return{name:t.function_call.name,arguments:e}}}s($pt,"extractFunctionCall");var mre=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let n=this.choices.get(e);return n||(n=new hre,this.choices.set(e,n)),n}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,n])=>`${e}: ${n.yieldedTokens} -> ${n.seenTokens}`).join(", ")}},hre=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function MO(t,e){return t!==null&&typeof t=="object"&&e in t}s(MO,"hasKey");function Su(t,e){return MO(t,e)?t[e]:void 0}s(Su,"getKey");var o5e=Ve(ii());var $s=new _t("fetchCompletions");function ov(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(ov,"getRequestId");function t5(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(t5,"getProcessingTime");function s5e(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(s5e,"uiKindToIntent");var Cd=class{static{s(this,"OpenAIFetcher")}};function zpt(t,e,n,r){return Nx(t,e,"proxy","v1/engines",n,r)}s(zpt,"getProxyEngineUrl");function QO(t,e,n,r){for(let[i,o]of Object.entries(t)){if(n.includes(i))continue;let a=o;if(i==="extra"&&r){let l={...a};for(let c of r)delete l[c];a=l}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(QO,"sanitizeRequestOptionTelemetry");async function i5e(t,e,n,r,i,o,a,l,c,u,d){let p=t.get(Yi),m=zpt(t,a,n,r),h=c.extendedBy({endpoint:r,engineName:n,uiKind:l},fS(e));QO(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,kt(t,"request.sent",h);let g=ra(),y=s5e(l);return jE(t,m,a.token,y,i,o,u,d).then(v=>{let b=ov(v,void 0);h.extendWithRequestId(b);let E=ra()-g;return h.measurements.totalTimeMs=E,$s.info(t,`Request ${i} at <${m}> finished with ${v.status} status after ${E}ms`),h.properties.status=String(v.status),$s.debug(t,"request.response properties",h.properties),$s.debug(t,"request.response measurements",h.measurements),$s.debug(t,"prompt:",e),kt(t,"request.response",h),v}).catch(v=>{if(Bc(v))throw kt(t,"request.cancel",h),v;p.setWarning(Su(v,"message")??"");let b=h.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",b),h.properties.message=String(Su(v,"name")??""),h.properties.code=String(Su(v,"code")??""),h.properties.errno=String(Su(v,"errno")??""),h.properties.type=String(Su(v,"type")??"");let E=ra()-g;throw h.measurements.totalTimeMs=E,$s.info(t,`Request ${i} at <${m}> rejected with ${String(v)} after ${E}ms`),$s.debug(t,"request.error properties",h.properties),$s.debug(t,"request.error measurements",h.measurements),kt(t,"request.error",h),v}).finally(()=>{qbe(t,e,h)})}s(i5e,"fetchWithInstrumentation");async function Ypt(t,e,n,r,i,o,a,l,c,u){let d=c.extendedBy({endpoint:"chat/completions",engineModelId:n,uiKind:l});QO(o,d,["messages"]),d.properties.headerRequestId=i,kt(t,"request.sent",d);let p=ra(),m=s5e(l),h={...Lx(t)};try{let g=await jE(t,r,a.token,m,i,o,u,h),y=ov(g,void 0);d.extendWithRequestId(y);let v=ra()-p;return d.measurements.totalTimeMs=v,$s.info(t,`Request ${i} at <${r}> finished with ${g.status} status after ${v}ms`),$s.debug(t,"request.response properties",d.properties),$s.debug(t,"request.response measurements",d.measurements),$s.debug(t,"messages:",JSON.stringify(e)),kt(t,"request.response",d),g}catch(g){if(Bc(g))throw kt(t,"request.cancel",d),g;let y=d.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",y),d.properties.message=String(Su(g,"name")??""),d.properties.code=String(Su(g,"code")??""),d.properties.errno=String(Su(g,"errno")??""),d.properties.type=String(Su(g,"type")??"");let v=ra()-p;throw d.measurements.totalTimeMs=v,$s.info(t,`Request ${i} at <${r}> rejected with ${String(g)} after ${v}ms`),$s.debug(t,"request.error properties",d.properties),$s.debug(t,"request.error measurements",d.measurements),kt(t,"request.error",d),g}finally{e5(t,e,d)}}s(Ypt,"fetchChatWithInstrumentation");function gre(t){return jSe(t,e=>e.completionText.trim().length>0)}s(gre,"postProcessChoices");var Kpt="github.copilot.completions.quotaExceeded",O8=class extends Cd{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Yi),l="completions",c=await e.get(Mn).getToken(),u=await this.fetchWithParameters(e,l,n,c,r,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){$s.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(l,e,n);return this.handleError(e,a,h,u,c)}let p=iv.create(e,n.count,u,r,[],o).processSSE(i),m=D1(p,h=>LO(e,h,r));return{type:"success",choices:gre(m),getProcessingTime:s(()=>t5(u),"getProcessingTime")}}async fetchAndStreamChat(e,n,r,i,o,a,l,c={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:n,model:l.id,stream:!0,...c},m=r.extendedBy({endpoint:d,model:l.name}),h=e.get(Yi),g=await e.get(Mn).getToken(),y=await Ypt(e,n,l.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){$s.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=or.createAndMarkAsIssued({endpoint:d,engineName:l.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let b=iv.create(e,1,y,m,[],o5e.CancellationToken.None).processSSE(),E=D1(b,_=>LO(e,_,r));return{type:"success",choices:gre(E),getProcessingTime:s(()=>t5(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Yi),l="speculation",c=await e.get(Mn).getToken(),u={prompt:{prefix:n.prompt,suffix:"",isFimEnabled:!1},speculation:n.speculation,ourRequestId:an(),engineModelId:n.engineModelId,uiKind:n.uiKind,headers:n.headers,stops:n.stops},d=await this.fetchSpeculationWithParameters(e,l,u,c,r,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){$s.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,u);return this.handleError(e,a,g,d,c)}let m=iv.create(e,1,d,r,[],o).processSSE(i),h=D1(m,g=>LO(e,g,r));return{type:"success",choices:gre(h),getProcessingTime:s(()=>t5(d),"getProcessingTime")}}createTelemetryData(e,n,r){return or.createAndMarkAsIssued({endpoint:e,engineName:r.engineModelId,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchSpeculationWithParameters(e,n,r,i,o,a){let l={prompt:r.prompt.prefix,speculation:r.speculation,temperature:0,stream:!0,stop:r.stops??[]};return await $I(0),a?.isCancellationRequested?"not-sent":await i5e(e,r.prompt,r.engineModelId,n,r.ourRequestId,l,i,r.uiKind,o,a,r.headers)}async fetchWithParameters(e,n,r,i,o,a){let l=e.get(Nt).disableLogProb(o),c=e.get(Nt).enablePromptContextProxyField(o),u={prompt:r.prompt.prefix,suffix:r.prompt.suffix,max_tokens:UO(e),temperature:n5(e,r.count),top_p:OO(e),n:r.count,stop:a5e(e,r.languageId),stream:!0,extra:r.extra};(r.requestLogProbs||!l)&&(u.logprobs=2);let d=b1(r.repoInfo);return d!==void 0&&(u.nwo=d),r.postOptions&&Object.assign(u,r.postOptions),c&&r.prompt.context&&(u.extra.context=r.prompt.context),await $I(0),a?.isCancellationRequested?"not-sent":await i5e(e,r.prompt,r.engineModelId,n,r.ourRequestId,u,i,r.uiKind,o,a,r.headers)}async handleError(e,n,r,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",n.setError("Completions limit reached",{command:Kpt,title:"Learn More"});let c=ea(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(n.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return n.setError(a),$s.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let l=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;$s.error(e,l),n.setWarning(l),r.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?($s.warn(e,`Response status was ${i.status}:`,a),n.setWarning(`Last response was a ${i.status} error: ${a}`),r.properties.error=`Response status was ${i.status}: ${a}`):(n.setWarning(`Last response was a ${i.status} error`),r.properties.error=`Response status was ${i.status}`);return r.properties.status=String(i.status),kt(e,"request.shownWarning",r),i.status===401||i.status===403?(e.get(Mn).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",$s.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?($s.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):($s.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function FO(t,e,n,r,i,o,a){return Ube(t,e,n,i,r),{completionText:e,meanLogProb:Jpt(t,n),meanAlternativeLogProb:Xpt(t,n),choiceIndex:r,requestId:i,blockFinished:o,tokens:n.tokens,numTokens:n.tokens.length,telemetryData:a,copilotAnnotations:n.copilot_annotations,clientCompletionId:an(),finishReason:n.finish_reason}}s(FO,"convertToAPIChoice");function Jpt(t,e){if(e?.logprobs?.token_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)n+=e.logprobs.token_logprobs[o],r+=1;return r>0?n/r:void 0}catch(n){Wn.exception(t,n,"Error calculating mean prob")}}s(Jpt,"calculateMeanLogProb");function Xpt(t,e){if(e?.logprobs?.top_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],n+=Math.max(...Object.values(a)),r+=1}return r>0?n/r:void 0}catch(n){Wn.exception(t,n,"Error calculating mean prob")}}s(Xpt,"calculateMeanAlternativeLogProb");function n5(t,e){return Kp(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(n5,"getTemperatureForSamples");var Zpt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function a5e(t,e){return Zpt[e??""]??[`


`,"\n```"]}s(a5e,"getStops");function OO(t){return 1}s(OO,"getTopP");function UO(t){return GB}s(UO,"getMaxSolutionTokens");var Are=class t{constructor(e,n){this.index=e;this.documentPrefix=n;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let n=new t(this.index,this.documentPrefix);return n.startOffset=this.startOffset,n.text=this.text.substring(0,this.startOffset+e),n.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,n}},qO=class{constructor(e,n,r,i,o,a){this.ctx=e;this.prefix=n;this.languageId=r;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,n)=>{let r=n.index??0,i=this.getCompletion(r,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),n.finished&&await this.trimAll(n,i),o}return n.finished?await this.trimAll(n,i):await this.trimOnce(n,i)}}getCompletion(e,n){let r=this.completions.get(e);return r||(r=new Are(e,this.prefix),this.completions.set(e,r)),r.updateText(n),r}async trimOnce(e,n){let r=await this.trim(n);return r===void 0?{yieldSolution:!1,continueStreaming:!0}:n.isFirstCompletion?(n.trimAt(r),{yieldSolution:!0,continueStreaming:!0,finishOffset:r}):(this.cacheCompletion(e,n,r),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,n){let r,i;do r=await this.trim(n),n.isFirstCompletion?(i=r,n.trimAt(r??n.effectiveText.length)):this.cacheCompletion(e,n,r);while(r!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new DO(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,n,r){let i=n.trimAt(r??n.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=FO(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,r!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,n,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,n,r){if(e.copilotAnnotations===void 0)return;let i=r.addedToPrefix.length,a=i+e.completionText.length>=n.text.length,l={};for(let[c,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(l[c]=d)}return Object.keys(l).length>0?l:void 0}};f();var WO=new _t("getCompletions");function GO(t,e,n){n.telemetry.markAsDisplayed(),n.telemetry.properties.reason=r5(n.resultType),kt(t,`${e}.shown`,n.telemetry)}s(GO,"telemetryShown");function l5e(t,e,n){let r=e+".accepted";kt(t,r,n)}s(l5e,"telemetryAccepted");function c5e(t,e,n){let r=e+".rejected";kt(t,r,n)}s(c5e,"telemetryRejected");function P1(t,e={}){return{...e,telemetryBlob:t}}s(P1,"mkCanceledResultTelemetry");function zs(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(zs,"mkBasicResultTelemetry");function u5e(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let n=ra()-e.telemetryBlob.issuedTime,r=r5(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:r,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([c,u])=>`
${u.toFixed(2)}	${c}`).join("")??"";return WO.debug(t,`ghostText produced from ${r} in ${Math.round(n)}ms with foundOffset ${a}${l}`),JZ(t,"ghostText.produced",o,{timeToProduceMs:n,foundOffset:a}),e.value}if(WO.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){kt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}JZ(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(u5e,"handleGhostTextResultTelemetry");function r5(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(r5,"resultTypeToString");f();f();f();async function emt(t){if(t.isCancellationRequested)return;let e=new hg,n=t.onCancellationRequested(()=>{e.resolve(),n.dispose()});await e.promise}s(emt,"cancellationTokenToPromise");async function d5e(t,e){if(e){let n=emt(e);await Promise.race([t,n])}else await t}s(d5e,"raceCancellation");async function HO(t,e){let n=new Map,r=[];for(let[i,o]of t.entries()){let a=(async()=>{let l;o instanceof Promise?l=await tmt(o,e):l=await nmt(o,e),n.set(i,l)})();r.push(a)}return await Promise.allSettled(r.values()),n}s(HO,"resolveAll");async function tmt(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;r={status:"full",resolutionTime:0,value:Array.isArray(o)?o:[o]}}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await d5e(i,e),r.resolutionTime=performance.now()-n,r}s(tmt,"resolvePromise");async function nmt(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;r.status!="partial"&&(r={status:"partial",resolutionTime:0,value:[]}),r.value.push(o)}e?.isCancellationRequested||(r.status!=="partial"?r={status:"full",resolutionTime:0,value:[]}:r.status="full")}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await d5e(i,e),r.resolutionTime=performance.now()-n,r}s(nmt,"resolveIterable");f();var rmt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},imt="ms-vscode.cpptools",omt="CppCompletionContextProvider";function f5e(t,e,n,r){(e.includes(omt)||e.length===1&&e[0]==="*")&&m5e(t,n,r)}s(f5e,"fillInCppVSActiveExperiments");function p5e(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(imt))&&m5e(t,n,r)}s(p5e,"fillInCppVSCodeActiveExperiments");function m5e(t,e,n){try{let r=rmt,i=t.get(Nt).cppContextProviderParams(n);if(i)try{r=JSON.parse(i)}catch(o){Wn.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(r))e.set(o,a)}catch(r){Wn.exception(t,r,"fillInCppActiveExperiments")}}s(m5e,"addActiveExperiments");f();function jO(t,e,n){try{let r=t.get(Nt).csharpContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return Wn.debug(t,"Failed to get the active C# experiments for the Context Provider API",r),!1}return!0}s(jO,"fillInCSharpActiveExperiments");f();var sv="fallbackContextProvider",q8={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20};function h5e(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(sv))&&smt(t,n,r)}s(h5e,"fillInMultiLanguageActiveExperiments");function smt(t,e,n){try{let r=q8,i=t.get(Nt).multiLanguageContextProviderParams(n);if(i)try{r=JSON.parse(i)}catch(o){Wn.error(t,"Failed to parse multiLanguageContextProviderParams",o)}for(let[o,a]of Object.entries(r))e.set(o,a)}catch(r){Wn.exception(t,r,"fillInMultiLanguageActiveExperiments")}}s(smt,"addActiveExperiments");function g5e(t){let e={mlcpMaxContextItems:q8.mlcpMaxContextItems,mlcpMaxSymbolMatches:q8.mlcpMaxSymbolMatches};for(let[n,r]of Object.entries(t))n in e&&(e[n]=r);return e}s(g5e,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var A5e=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")])),tags:I.Optional(I.Array(I.String()))}),y5e=I.Intersect([I.Object({name:I.String(),value:I.String()}),A5e]),C5e=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),A5e]),amt=[y5e,C5e],lmt=I.Union(amt),cmt=new Map([["Trait",ds.Compile(y5e)],["CodeSnippet",ds.Compile(C5e)]]),umt=s(t=>t,"ensureTypesAreEqual");umt(!0);var dmt=I.Object({contextItems:I.Array(lmt)}),fmt=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),yre=I.Object({id:I.String()}),pmt=I.Intersect([yre,fmt]),mmt=I.Intersect([yre,dmt]),x5e=I.Object({providers:I.Array(pmt)}),v5e=I.Object({providers:I.Array(yre)}),Cre=I.Object({providers:I.Array(mmt),updating:I.Optional(I.Array(I.String()))}),VO=I.Intersect([Jbe,I.Object({contextItems:I.Optional(Cre)})]);function $O(t,e){return t.map(n=>{let r=n.data.filter(i=>i.type===e);return r.length>0?{...n,data:r}:void 0}).filter(n=>n!==void 0)}s($O,"filterContextItemsByType");function b5e(t){let e=[],n=0;return t.forEach(r=>{let i=!1;for(let[o,a]of cmt.entries())if(a.Check(r)){e.push({...r,type:o}),i=!0;break}i||n++}),[e,n]}s(b5e,"filterSupportedContextItems");function hmt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(hmt,"validateContextItemId");function E5e(t,e){let n=new Set,r=[];for(let i of e){let o=i.id??an();if(!hmt(o)){let a=an();Wn.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(n.has(o)){let a=an();Wn.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}n.add(o),r.push({...i,id:o})}return r}s(E5e,"addOrValidateContextItemsIDs");f();var Pl=class{constructor(e=()=>new xre){this.createStatistics=e;this.statistics=new Jn(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let n=this.statistics.get(e);if(n)return n;let r=this.createStatistics();return this.statistics.set(e,r),r}getPreviousStatisticsForCompletion(e){let n=Array.from(this.statistics.keys());for(let r=n.length-1;r>=0;r--){let i=n[r];if(i!==e)return this.statistics.peek(i)}}},xre=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,n){let r=this._expectations.get(e)??[];this._expectations.set(e,[...r,...n])}clearExpectations(){this._expectations.clear()}setLastResolution(e,n){this._lastResolution.set(e,n)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[n,r]of this._expectations){if(r.length===0)continue;let i=this._lastResolution.get(n)??"none";if(i==="none"||i==="error"){this._statistics.set(n,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of r){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let l=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/r.length,c=l===1?"full":l===0?"none":"partial";this._statistics.set(n,{resolution:i,usage:c,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function I5e(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(I5e,"componentStatisticsToPromptMatcher");var T5e=Ve(ii());var Ra=class{static{s(this,"ContextProviderRegistry")}},gg=class{static{s(this,"DefaultContextProviders")}},i5=class extends gg{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(n){this.ids.push(n)}getIds(){return this.ids}},vre=class extends Ra{constructor(n,r){super();this.ctx=n;this.match=r;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(n){if(n.id.includes(",")||n.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${n.id} is invalid.`);if(this._providers.find(r=>r.id===n.id))throw new Error(`A context provider with id ${n.id} has already been registered`);this._providers.push(n)}unregisterContextProvider(n){this._providers=this._providers.filter(r=>r.id!==n)}get providers(){return this._providers.slice()}async resolveAllProviders(n,r,i,o,a){if(o?.isCancellationRequested)return Wn.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;jO(this.ctx,l,i);let c=[];if(this._providers.length===0)return c;let u=await this.matchProviders(r,i),d=u.filter(E=>E[1]>0),p=u.filter(E=>E[1]<=0);if(p5e(this.ctx,d.map(E=>E[0].id),l,i),h5e(this.ctx,d.map(E=>E[0].id),l,i),p.forEach(([E,_])=>{let k={providerId:E.id,matchScore:_,resolution:"none",resolutionTimeMs:0,data:[]};c.push(k)}),d.length===0)return c;if(o?.isCancellationRequested)return Wn.debug(this.ctx,"Resolving context providers cancelled"),[];let m=new T5e.CancellationTokenSource;if(o){let E=o.onCancellationRequested(_=>{m.cancel(),E.dispose()})}let h=Xk(this.ctx)&&!eL(this.ctx)?0:gmt(this.ctx,i),g=h>0?Date.now()+h:Number.MAX_SAFE_INTEGER,y;h>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},h));let v=new Map;for(let[E]of d){let _={completionId:n,documentContext:r,activeExperiments:l,timeBudget:h,timeoutEnd:g,data:a},k=this.ctx.get(Pl).getPreviousStatisticsForCompletion(n)?.get(E.id);k&&(_.previousUsageStatistics=k);let D=E.resolver.resolve(_,m.token);v.set(E.id,D)}let b=await HO(v,m.token);y&&clearTimeout(y);for(let[E,_]of d){let k=b.get(E.id);if(k)if(this.ctx.get(Pl).getStatisticsForCompletion(n).setLastResolution(E.id,k.status),k.status==="error")BM(k.reason)||Wn.error(this.ctx,`Error resolving context from ${E.id}: `,k.reason),c.push({providerId:E.id,matchScore:_,resolution:k.status,resolutionTimeMs:k.resolutionTime,data:[]});else{(k.status==="none"||k.status==="partial")&&Wn.info(this.ctx,`Context provider ${E.id} exceeded time budget of ${h}ms`);let[D,N]=b5e(k.value??[]),Q=D;k.status==="full"&&(Q=D.filter(te=>te.tags?.includes("backup")!==!0)),N&&Wn.error(this.ctx,`Dropped ${N} context items from ${E.id} due to invalid schema`);let Z=E5e(this.ctx,Q),me={providerId:E.id,matchScore:_,resolution:k.status,resolutionTimeMs:k.resolutionTime,data:Z};c.push(me)}else Wn.error(this.ctx,`Context provider ${E.id} not found in results`)}return c.sort((E,_)=>_.matchScore-E.matchScore)}async matchProviders(n,r){let i=YO(this.ctx,r),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!o&&!i.includes(l.id))return[l,0];let c=await this.match(this.ctx,l.selector,n);return[l,c]}))}},bre=class extends Ra{constructor(n){super();this.delegate=n;this._cachedContextItems=new Jn(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(n){this.delegate.registerContextProvider(n)}unregisterContextProvider(n){this.delegate.unregisterContextProvider(n)}get providers(){return this.delegate.providers}async resolveAllProviders(n,r,i,o,a){let l=this._cachedContextItems.get(n);if(n&&l&&l.length>0)return l;let c=await this.delegate.resolveAllProviders(n,r,i,o,a);return c.length>0&&n&&this._cachedContextItems.set(n,c),c}};function zO(t,e){return new bre(new vre(t,e))}s(zO,"getContextProviderRegistry");function w5e(t,e,n){let r=t.get(Pl).getStatisticsForCompletion(e);return n.map(o=>{let{providerId:a,resolution:l,resolutionTimeMs:c,matchScore:u,data:d}=o,p=r.get(a),m=p?.usage??"none";(u<=0||l==="none"||l==="error")&&(m="none");let h={providerId:a,resolution:l,resolutionTimeMs:c,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(w5e,"telemetrizeContextItems");function _5e(t){return t.matchScore>0&&t.resolution!=="error"}s(_5e,"matchContextItems");function YO(t,e){let n=Ere(t,e),r=Nr(t,mt.ContextProviders)??[];if(n.length===1&&n[0]==="*"||r.length===1&&r[0]==="*")return["*"];let i=t.get(gg).getIds();return Array.from(new Set([...i,...n,...r]))}s(YO,"getActiveContextProviders");function Ere(t,e){return Xk(t)?["*"]:t.get(Nt).contextProviders(e)}s(Ere,"getExpContextProviders");function Ire(t,e){return YO(t,e).length>0}s(Ire,"useContextProviderAPI");function gmt(t,e){let n=Nr(t,mt.ContextProviderTimeBudget);return n!==void 0&&typeof n=="number"?n:t.get(Nt).contextProviderTimeBudget(e)}s(gmt,"getContextProviderTimeBudget");var Yf=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Jn(25)}static{s(this,"ContextProviderBridge")}schedule(e,n,r,i,o){let a=this.ctx.get(Ra),{textDocument:l,originalPosition:c,originalOffset:u,originalVersion:d,editsWithPosition:p}=e,m=a.resolveAllProviders(n,{uri:l.uri,languageId:l.detectedLanguageId,version:d,offset:u,position:c,proposedEdits:p.length>0?p:void 0},r,i,o?.data);this.scheduledResolutions.set(n,m)}async resolution(e){let n=this.scheduledResolutions.get(e);return n?await n:[]}};f();f();var KO=class{constructor(e,n,r){this.languageId=e;this.nodeMatch=n;this.nodeTypesWithBlockOrStmtChild=r}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,n,r){let i=await E1(this.languageId,e);try{let a=i.rootNode.descendantForIndex(n);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let c=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((c==""?a.namedChildren[0]:a.childForFieldName(c))?.type==l)break}a=a.parent}return a?r(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,n,r){return this.getNodeMatchAtPosition(e,n,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let c=l.startPosition.row==o.endPosition.row&&l.startPosition.column>=o.endPosition.column,u=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(c||u)o=l,l=l.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return r(o)}})}async isBlockBodyFinished(e,n,r){let i=(e+n).trimEnd(),o=await this.getNextBlockAtPosition(i,r,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,n){let r=e.trimEnd();return this.getNodeMatchAtPosition(r,n,i=>i.startIndex)}},JO=class extends KO{constructor(n,r,i,o,a){super(n,o,a);this.blockEmptyMatch=r;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(n){return this.lineMatch.test(n.trimStart())}async isBlockBodyEmpty(n,r){let i=await this.getNextBlockAtPosition(n,r,o=>{o.startIndex<r&&(r=o.startIndex);let a=n.substring(r,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(n,r){return r=R5e(n,r),this.isBlockStart(Amt(n,r))&&this.isBlockBodyEmpty(n,r)}};function Amt(t,e){let n=t.lastIndexOf(`
`,e-1),r=t.indexOf(`
`,e);return r<0&&(r=t.length),t.slice(n+1,r)}s(Amt,"getLineAtOffset");function R5e(t,e){let n=e;for(;n>0&&/\s/.test(t.charAt(n-1));)n--;return n}s(R5e,"rewindToNearestNonWs");function S5e(t,e){let n=t.startIndex,r=t.startIndex-t.startPosition.column,i=e.substring(r,n);if(/^\s*$/.test(i))return i}s(S5e,"indent");function ymt(t,e,n){if(e.startPosition.row<=t.startPosition.row)return!1;let r=S5e(t,n),i=S5e(e,n);return r!==void 0&&i!==void 0&&r.startsWith(i)}s(ymt,"outdented");var Ag=class extends KO{constructor(n,r,i,o,a,l,c){super(n,r,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=c}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(n,r){let i=n.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(n.parent?.type=="class_definition"||n.parent?.type=="function_definition")&&n.children.length==1&&$Ie(n.parent))}async isEmptyBlockStart(n,r){if(r>n.length)throw new RangeError("Invalid offset");for(let o=r;o<n.length&&n.charAt(o)!=`
`;o++)if(/\S/.test(n.charAt(o)))return!1;r=R5e(n,r);let i=await E1(this.languageId,n);try{let o=i.rootNode.descendantForIndex(r-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&ymt(d,p,n)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=r}d=d.parent}}let a=null,l=null,c=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){l=u;break}if(this.nodeMatch[u.type]){c=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,r)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(v=>v.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(v=>v.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(v=>v.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,r):!0}}if(c!=null){let d=this.nodeMatch[c.type],p=c.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,r);if(this.nodeTypesWithBlockOrStmtChild.has(c.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(c.type),h=m==""?c.children[0]:c.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},Cmt={python:new Ag("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new Ag("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new Ag("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new Ag("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new JO("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new JO("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new Ag("csharp",{},new Map([]),[],"block",null,!0),java:new Ag("java",{},new Map([]),[],"block",null,!0),php:new Ag("php",{},new Map([]),[],"block",null,!0),cpp:new Ag("cpp",{},new Map([]),[],"block",null,!0)};function Tre(t){if(!d0(t))throw new Error(`Language ${t} is not supported`);return Cmt[IM(t)]}s(Tre,"getBlockParser");async function k5e(t,e,n){return d0(t)?Tre(t).isEmptyBlockStart(e,n):!1}s(k5e,"isEmptyBlockStart");async function B5e(t,e,n,r){if(d0(t))return Tre(t).isBlockBodyFinished(e,n,r)}s(B5e,"isBlockBodyFinished");async function D5e(t,e,n){if(d0(t))return Tre(t).getNodeStart(e,n)}s(D5e,"getNodeStart");var mPn=new _t("parseBlock");function W8(t,e,n,r){let i=e.getText(Po.range(Po.position(0,0),n))+(r?`
`:""),o=e.offsetAt(n)+(r?1:0),a=e.detectedLanguageId;return l=>B5e(a,i,l,o)}s(W8,"parsingBlockFinished");function ZO(t,e){return k5e(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(ZO,"isEmptyBlockStartUtil");async function P5e(t,e,n,r){let o=e.getText(Po.range(Po.position(0,0),n))+r,a=await D5e(e.detectedLanguageId,o,e.offsetAt(n));if(a)return e.positionAt(a)}s(P5e,"getNodeStartUtil");var xmt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),vmt=new RegExp(`^(${xmt.join("|")})`);function bmt(t){return vmt.test(t.trimLeft().toLowerCase())}s(bmt,"isContinuationLine");function XO(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(XO,"indentationOfLine");function G8(t,e){let n=t.getText(),r=t.offsetAt(e);return wre(n,r,t.detectedLanguageId)}s(G8,"contextIndentation");function wre(t,e,n){let r=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<d.length;)g=XO(d[h]),y=h,h+=m;if(n==="python"&&m===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=XO(d[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,l]=o(r,r.length-1,-1),c=(()=>{if(!(a===void 0||l===void 0))for(let d=l-1;d>=0;d--){let p=XO(r[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:c,current:a??0,next:u}}s(wre,"contextIndentationFromText");var Emt=!1;function Imt(t,e,n){let r=t.split(`
`),i=n!==void 0,o=n?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&r[0].trim()!==""&&a++,!i&&Emt&&r[0].trim()===""&&a++,i||a++,r.length===a)return"continue";let l=Math.max(e.current,e.next??0);for(let c=a;c<r.length;c++){let u=r[c];c==0&&o!==void 0&&(u=o+u);let d=XO(u);if(d!==void 0&&(d<l||d===l&&!bmt(u)))return r.slice(0,c).join(`
`).length}return"continue"}s(Imt,"completionCutOrContinue");function N5e(t,e){return async n=>{let r=Imt(n,t,e);return r==="continue"?void 0:r}}s(N5e,"indentationBlockFinished");f();f();f();function L5e(t,e){return{...wM,useSubsetMatching:_re(t,e)}}s(L5e,"getCppSimilarFilesOptions");function F5e(t){return wM.maxTopSnippets}s(F5e,"getCppNumberOfSnippets");var Tmt=new Map([["cpp",L5e]]);function eU(t,e,n){let r=Tmt.get(n);return r?r(t,e):{...WB,useSubsetMatching:_re(t,e)}}s(eU,"getSimilarFilesOptions");var wmt=new Map([["cpp",F5e]]);function M5e(t,e){let n=wmt.get(e);return n?n(t):YIe}s(M5e,"getNumberOfSnippets");function _re(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Nr(t,mt.UseSubsetMatching))??!1}s(_re,"useSubsetMatching");f();f();var _mt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function Smt(t){return _mt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(Smt,"isOomError");function av(t,e,n,r=Wn){if(!Bc(e)){if(e instanceof Error){let i=e;Smt(i)?t.get(Yi).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Yi).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Yi).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Yi).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Yi).setWarning("Current working directory does not exist")}r.exception(t,e,n)}}s(av,"handleException");function Q5e(t){process.addListener("uncaughtException",n=>{av(t,n,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",n=>{if(!e)try{e=!0,av(t,n,"unhandledRejection")}finally{e=!1}})}s(Q5e,"registerDefaultHandlers");f();f();var Rmt="content_excluded";async function O5e(t,e,n,r){let i=$O(n,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),l=t.get(kn),c=new Map;await Promise.all(Array.from(o).map(async d=>{c.set(d,await l.getTextDocumentValidation({uri:d}))}));let u=t.get(Pl).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>c.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,Rmt]]),m}).map(d=>d.data)}s(O5e,"getCodeSnippetsFromContextItems");function U5e(t,e){let n=t.get(kn);return e.map(r=>({snippet:r,relativePath:n.getRelativePath(r)}))}s(U5e,"addRelativePathToCodeSnippets");f();function dl(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(dl,"Text");function lv(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(lv,"Code");function o5(t){return t.children}s(o5,"Chunk");f();function Gr(t,e,n){let r=[];Array.isArray(e.children)?r=e.children:e.children&&(r=[e.children]);let i={...e,children:r};return n&&(i.key=n),{type:t,props:i}}s(Gr,"functionComponentFunction");function N1(t){return{type:"f",children:t}}s(N1,"fragmentFunction");N1.isFragmentFunction=!0;var q5e=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(xd,u=>{u.codeSnippets!==n&&r(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!n||n.length===0||!i)return;let a=U5e(t.ctx,n),l=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=l.get(d);p===void 0&&(p=[],l.set(d,p)),p.push(u)}let c=[];for(let[u,d]of l.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&c.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(c.length!==0)return c.sort((u,d)=>d.importance-u.importance),c.reverse(),c.map(u=>{let d=[];return d.push(Gr(dl,{expElidableTextWeight:1,children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(Gr(lv,{source:p,expElidableTextWeight:.99,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(Gr(dl,{expElidableTextWeight:.5,children:"---"}))}),Gr(o5,{children:d})})},"CodeSnippets");f();f();f();f();f();f();var As=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},H8=class{constructor(){this._first=As.Undefined;this._last=As.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===As.Undefined}clear(){let e=this._first;for(;e!==As.Undefined;){let n=e.next;e.prev=As.Undefined,e.next=As.Undefined,e=n}this._first=As.Undefined,this._last=As.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,n){let r=new As(e);if(this._first===As.Undefined)this._first=r,this._last=r;else if(n){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(r))}}shift(){if(this._first!==As.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==As.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==As.Undefined&&e.next!==As.Undefined){let n=e.prev;n.next=e.next,e.next.prev=n}else e.prev===As.Undefined&&e.next===As.Undefined?(this._first=As.Undefined,this._last=As.Undefined):e.next===As.Undefined?(this._last=this._last.prev,this._last.next=As.Undefined):e.prev===As.Undefined&&(this._first=this._first.next,this._first.prev=As.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==As.Undefined;)yield e.element,e=e.next}};f();var kmt=globalThis.performance&&typeof globalThis.performance.now=="function",s5=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=kmt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var W5e=!1,Bmt=!1,zI;(oe=>{oe.None=s(()=>Ho.None,"None");function e(V){if(Bmt){let{onDidAddListener:q}=V,Y=j8.create(),ee=0;V.onDidAddListener=()=>{++ee===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),q?.()}}}s(e,"_addLeakageTraceLogic");function n(V,q){return h(V,()=>{},0,void 0,!0,void 0,q)}oe.defer=n,s(n,"defer");function r(V){return(q,Y=null,ee)=>{let de=!1,ne;return ne=V(fe=>{if(!de)return ne?ne.dispose():de=!0,q.call(Y,fe)},null,ee),de&&ne.dispose(),ne}}oe.once=r,s(r,"once");function i(V,q){return oe.once(oe.filter(V,q))}oe.onceIf=i,s(i,"onceIf");function o(V,q,Y){return p((ee,de=null,ne)=>V(fe=>ee.call(de,q(fe)),null,ne),Y)}oe.map=o,s(o,"map");function a(V,q,Y){return p((ee,de=null,ne)=>V(fe=>{q(fe),ee.call(de,fe)},null,ne),Y)}oe.forEach=a,s(a,"forEach");function l(V,q,Y){return p((ee,de=null,ne)=>V(fe=>q(fe)&&ee.call(de,fe),null,ne),Y)}oe.filter=l,s(l,"filter");function c(V){return V}oe.signal=c,s(c,"signal");function u(...V){return(q,Y=null,ee)=>{let de=t_e(...V.map(ne=>ne(fe=>q.call(Y,fe))));return m(de,ee)}}oe.any=u,s(u,"any");function d(V,q,Y,ee){let de=Y;return o(V,ne=>(de=q(de,ne),de),ee)}oe.reduce=d,s(d,"reduce");function p(V,q){let Y,ee={onWillAddFirstListener(){Y=V(de.fire,de)},onDidRemoveLastListener(){Y?.dispose()}};q||e(ee);let de=new b0(ee);return q?.add(de),de.event}s(p,"snapshot");function m(V,q){return q instanceof Array?q.push(V):q&&q.add(V),V}s(m,"addAndReturnDisposable");function h(V,q,Y=100,ee=!1,de=!1,ne,fe){let pe,Be,Se,Ke=0,Fe,ft={leakWarningThreshold:ne,onWillAddFirstListener(){pe=V(Ct=>{Ke++,Be=q(Be,Ct),ee&&!Se&&(Tt.fire(Be),Be=void 0),Fe=s(()=>{let bt=Be;Be=void 0,Se=void 0,(!ee||Ke>1)&&Tt.fire(bt),Ke=0},"doFire"),typeof Y=="number"?(clearTimeout(Se),Se=setTimeout(Fe,Y)):Se===void 0&&(Se=0,queueMicrotask(Fe))})},onWillRemoveListener(){de&&Ke>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,pe.dispose()}};fe||e(ft);let Tt=new b0(ft);return fe?.add(Tt),Tt.event}oe.debounce=h,s(h,"debounce");function g(V,q=0,Y){return oe.debounce(V,(ee,de)=>ee?(ee.push(de),ee):[de],q,void 0,!0,void 0,Y)}oe.accumulate=g,s(g,"accumulate");function y(V,q=(ee,de)=>ee===de,Y){let ee=!0,de;return l(V,ne=>{let fe=ee||!q(ne,de);return ee=!1,de=ne,fe},Y)}oe.latch=y,s(y,"latch");function v(V,q,Y){return[oe.filter(V,q,Y),oe.filter(V,ee=>!q(ee),Y)]}oe.split=v,s(v,"split");function b(V,q=!1,Y=[],ee){let de=Y.slice(),ne=V(Be=>{de?de.push(Be):pe.fire(Be)});ee&&ee.add(ne);let fe=s(()=>{de?.forEach(Be=>pe.fire(Be)),de=null},"flush"),pe=new b0({onWillAddFirstListener(){ne||(ne=V(Be=>pe.fire(Be)),ee&&ee.add(ne))},onDidAddFirstListener(){de&&(q?setTimeout(fe):fe())},onDidRemoveLastListener(){ne&&ne.dispose(),ne=null}});return ee&&ee.add(pe),pe.event}oe.buffer=b,s(b,"buffer");function E(V,q){return s((ee,de,ne)=>{let fe=q(new k);return V(function(pe){let Be=fe.evaluate(pe);Be!==_&&ee.call(de,Be)},void 0,ne)},"fn")}oe.chain=E,s(E,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(q){return this.steps.push(q),this}forEach(q){return this.steps.push(Y=>(q(Y),Y)),this}filter(q){return this.steps.push(Y=>q(Y)?Y:_),this}reduce(q,Y){let ee=Y;return this.steps.push(de=>(ee=q(ee,de),ee)),this}latch(q=(Y,ee)=>Y===ee){let Y=!0,ee;return this.steps.push(de=>{let ne=Y||!q(de,ee);return Y=!1,ee=de,ne?de:_}),this}evaluate(q){for(let Y of this.steps)if(q=Y(q),q===_)break;return q}}function D(V,q,Y=ee=>ee){let ee=s((...pe)=>fe.fire(Y(...pe)),"fn"),de=s(()=>V.on(q,ee),"onFirstListenerAdd"),ne=s(()=>V.removeListener(q,ee),"onLastListenerRemove"),fe=new b0({onWillAddFirstListener:de,onDidRemoveLastListener:ne});return fe.event}oe.fromNodeEventEmitter=D,s(D,"fromNodeEventEmitter");function N(V,q,Y=ee=>ee){let ee=s((...pe)=>fe.fire(Y(...pe)),"fn"),de=s(()=>V.addEventListener(q,ee),"onFirstListenerAdd"),ne=s(()=>V.removeEventListener(q,ee),"onLastListenerRemove"),fe=new b0({onWillAddFirstListener:de,onDidRemoveLastListener:ne});return fe.event}oe.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function Q(V,q){return new Promise(Y=>r(V)(Y,null,q))}oe.toPromise=Q,s(Q,"toPromise");function Z(V){let q=new b0;return V.then(Y=>{q.fire(Y)},()=>{q.fire(void 0)}).finally(()=>{q.dispose()}),q.event}oe.fromPromise=Z,s(Z,"fromPromise");function me(V,q){return V(Y=>q.fire(Y))}oe.forward=me,s(me,"forward");function te(V,q,Y){return q(Y),V(ee=>q(ee))}oe.runAndSubscribe=te,s(te,"runAndSubscribe");class H{constructor(q,Y){this._observable=q;this._counter=0;this._hasChanged=!1;let ee={onWillAddFirstListener:s(()=>{q.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{q.removeObserver(this)},"onDidRemoveLastListener")};Y||e(ee),this.emitter=new b0(ee),Y&&Y.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(q){this._counter++}handlePossibleChange(q){}handleChange(q,Y){this._hasChanged=!0}endUpdate(q){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function W(V,q){return new H(V,q).emitter.event}oe.fromObservable=W,s(W,"fromObservable");function re(V){return(q,Y,ee)=>{let de=0,ne=!1,fe={beginUpdate(){de++},endUpdate(){de--,de===0&&(V.reportChanges(),ne&&(ne=!1,q.call(Y)))},handlePossibleChange(){},handleChange(){ne=!0}};V.addObserver(fe),V.reportChanges();let pe={dispose(){V.removeObserver(fe)}};return ee instanceof Tu?ee.add(pe):Array.isArray(ee)&&ee.push(pe),pe}}oe.fromObservableLight=re,s(re,"fromObservableLight")})(zI||={});var Sre=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new s5,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},G5e=-1;var Rre=class t{constructor(e,n,r=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=n;this.name=r;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,n){let r=this.threshold;if(r<=0||n<r)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=r*.5;let[o,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(o);let c=new kre(l,o);this._errorHandler(c)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[r,i]of this._stacks)(!e||n<i)&&(e=[r,i],n=i);return e}},j8=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},kre=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,n){super(e),this.name="ListenerLeakError",this.stack=n}},Bre=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,n){super(e),this.name="ListenerRefusalError",this.stack=n}},Dmt=0,a5=class{constructor(e){this.value=e;this.id=Dmt++}static{s(this,"UniqueContainer")}},Pmt=2,Nmt=s((t,e)=>{if(t instanceof a5)e(t);else for(let n=0;n<t.length;n++){let r=t[n];r&&e(r)}},"forEachListener"),b0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=G5e>0||this._options?.leakWarningThreshold?new Rre(e?.onListenerError??qS,this._options?.leakWarningThreshold??G5e):void 0,this._perfMon=this._options?._profName?new Sre(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(W5e){let e=this._listeners;queueMicrotask(()=>{Nmt(e,n=>n.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,n,r)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new Bre(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||qS)(d),Ho.None}if(this._disposed)return Ho.None;n&&(e=e.bind(n));let i=new a5(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=j8.create(),o=this._leakageMon.check(i.stack,this._size+1)),W5e&&(i.stack=a??j8.create()),this._listeners?this._listeners instanceof a5?(this._deliveryQueue??=new Dre,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=_a(()=>{o?.(),this._removeListener(i)});return r instanceof Tu?r.add(l):Array.isArray(r)&&r.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,r=n.indexOf(e);if(r===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[r]=void 0;let i=this._deliveryQueue.current===this;if(this._size*Pmt<=n.length){let o=0;for(let a=0;a<n.length;a++)n[a]?n[o++]=n[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=o}}_deliver(e,n){if(!e)return;let r=this._options?.onListenerError||qS;if(!r){e.value(n);return}try{e.value(n)}catch(i){r(i)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof a5)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Dre=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,n,r){this.i=0,this.end=r,this.current=e,this.value=n}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var H5e=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),tU;(r=>{function t(i){return i===r.None||i===r.Cancelled||i instanceof l5?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}r.isCancellationToken=t,s(t,"isCancellationToken"),r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:zI.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:H5e})})(tU||={});var l5=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?H5e:(this._emitter||(this._emitter=new b0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},L1=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new l5),this._token}cancel(){this._token?this._token instanceof l5&&this._token.cancel():this._token=tU.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof l5&&this._token.dispose():this._token=tU.None}};function j5e(t){return t}s(j5e,"identity");var nU=class{constructor(e,n){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=j5e):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let n=this._computeKey(e);return this.lastArgKey!==n&&(this.lastArgKey=n,this.lastCache=this._fn(e)),this.lastCache}},F1=class{constructor(e,n){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=j5e):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let n=this._computeKey(e);if(this._map2.has(n))return this._map2.get(n);let r=this._fn(e);return this._map.set(e,r),this._map2.set(n,r),r}};f();f();var yg=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function YI(t){return t<0?0:t>4294967295?4294967295:t|0}s(YI,"toUint32");function Pre(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(Pre,"escapeRegExpCharacters");function Cg(t){return t.split(/\r\n|\r|\n/)}s(Cg,"splitLines");function V8(t,e){let n=Math.min(t.length,e.length),r;for(r=0;r<n;r++)if(t.charCodeAt(r)!==e.charCodeAt(r))return r;return n}s(V8,"commonPrefixLength");function u5(t,e){let n=Math.min(t.length,e.length),r,i=t.length-1,o=e.length-1;for(r=0;r<n;r++)if(t.charCodeAt(i-r)!==e.charCodeAt(o-r))return r;return n}s(u5,"commonSuffixLength");var Fmt=/^[\t\n\r\x20-\x7E]*$/;function Nre(t){return Fmt.test(t)}s(Nre,"isBasicASCII");var K9n=String.fromCharCode(65279);function Y5e(t){return t.charAt(0).toUpperCase()+t.slice(1)}s(Y5e,"uppercaseFirstLetter");var V5e=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=Mmt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let n=this._data,r=n.length/3,i=1;for(;i<=r;)if(e<n[3*i])i=2*i;else if(e>n[3*i+1])i=2*i+1;else return n[3*i+2];return 0}};function Mmt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(Mmt,"getGraphemeBreakRawData");var $5e=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new yg(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new nU({getCacheKey:JSON.stringify},e=>{function n(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(n,"arrayToMap");function r(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(r,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let l;for(let d of a){let p=n(o[d]);l=i(l,p)}let c=n(o._common),u=r(c,l);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new yg(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},z5e=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&t.isInvisibleCharacter(r))return!0}return!1}static get codePoints(){return t.getData()}};f();f();function K5e(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let n=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let r=0;r<t.length;r++)n[r][0]=r;for(let r=0;r<e.length;r++)n[0][r]=r;for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)n[i][r]=Math.min((i==0?r:n[i-1][r])+1,(r==0?i:n[i][r-1])+1,(i==0||r==0?Math.max(i,r):n[i-1][r-1])+(t[i]==e[r]?0:1));return{score:n[t.length-1][e.length-1]}}s(K5e,"findEditDistanceScore");var J5e=50;function Qmt(t){let e=t*4,n=t*.1;return Math.floor(e+n)}s(Qmt,"approximateMaxCharacters");function $8(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(xd,h=>{let g=h.document;(h.document.uri!==n?.uri||g.getText()!==n?.getText())&&r(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=Qmt(a);return Gr(N1,{children:[Gr(Omt,{document:n,position:i,maxCharacters:m}),Gr(Lre,{document:n,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})]})}s($8,"CurrentFile");function Omt(t){if(t.document===void 0||t.position===void 0)return Gr(dl,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Gr(lv,{children:e})}s(Omt,"BeforeCursor");function Lre(t,e){let[n,r]=e.useState("");if(t.document===void 0||t.position===void 0)return Gr(dl,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Gr(dl,{});if(n===o)return Gr(dl,{children:n});let a=o;if(n!==""){let l=Bo(t.tokenizer),c=l.takeFirstTokens(o,J5e);c.tokens.length>0&&100*K5e(c.tokens,l.takeFirstTokens(n,J5e).tokens)?.score<(t.suffixMatchThreshold??_M)*c.tokens.length&&(a=n)}return a!==n&&r(a),Gr(dl,{children:a})}s(Lre,"AfterCursor");f();var rU=class{static{s(this,"WishlistElision")}elide(e,n,r,i,o){if(n<=0)throw new Error("Prefix limit must be greater than 0");let[a,l]=this.preparePrefixBlocks(e,o),{elidedSuffix:c,adjustedPrefixTokenLimit:u}=this.elideSuffix(r,i,n,l,o),d=this.elidePrefix(a,u,l,o);return{blocks:[c,...d],cycles:1}}preparePrefixBlocks(e,n){let r=0,i=new Set;return[e.map((a,l)=>{let c=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=n.tokenLength(m);return c+=h,r+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:c,markedForRemoval:!1,originalIndex:l,lines:d}}),r]}elideSuffix(e,n,r,i,o){let a=e.value;if(a.length===0||n<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:r+Math.max(0,n)};i<r&&(n=n+(r-i),r=i);let l=o.takeFirstTokens(a,n);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:r+Math.max(0,n-l.tokens.length)}}elidePrefix(e,n,r,i){let o=this.removeLowWeightPrefixBlocks(e,n,r),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[l,c]=this.trimPrefixLinesToFit(a,n,i),u=c;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=n&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=l.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,n,r){let i=r;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=n)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(l=>a.chunks?.has(l))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,n,r){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let l=e[a],c=l.tokens;if(i+c<=n)o.unshift(l),i+=c;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let c=r.takeLastTokens(a.line,n);return o.push({line:c.text,componentPath:a.componentPath,tokens:c.tokens.length}),[o,c.tokens.length]}let l=`Cannot fit prefix within limit of ${n} tokens`;throw new Error(l)}return[o,i]}};function Fre(t){return t.map(e=>e.elidedValue).join("")}s(Fre,"makePrompt");function Z5e(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(Z5e,"makePrefixPrompt");function e4e(t){return t.filter(e=>e.type==="context").map(e=>e.elidedValue.trim()).filter(e=>e.length>0)}s(e4e,"makeContextPrompt");var iU=class{constructor(e="[...]",n=`
`,r=!1,i=60){this.ellipsis=e;this.delimiter=n;this.turnOffChunks=r;this.keepLinesBeforeCursor=i}static{s(this,"ElidableTextElision")}elide(e,n,r,i,o){let a;if(r.value.length===0||i<=o.tokenLength(this.ellipsis))a=[],n=n+Math.max(0,i);else{let h=X5e([r],o).elide(i,this.ellipsis,!0,"removeLeastDesirable",o,"bottomToTop");n=n+Math.max(0,i-o.tokenLength(h.getText())),a=h.getLines()}let c=X5e(e.map(m=>this.turnOffChunks?{...m,chunks:void 0}:m),o,this.keepLinesBeforeCursor).elide(n),u=n-o.tokenLength(c.getText()),d=[...c.getLines(),...a],p=[r,...e];return{cycles:1,blocks:p.map((m,h)=>{let g=d.filter(y=>y.metadata?.get("componentPath")===m.componentPath);if(g.length===0)return{...m,tokens:o.tokenLength(m.value),elidedValue:"",elidedTokens:0};{let y=g.map(v=>v.text).join(this.delimiter);return h===p.length-1&&u>0&&y.trim()===this.ellipsis?y=this.ellipsis+this.delimiter+o.takeLastTokens(m.value,u-o.tokenLength(this.ellipsis+this.delimiter)).text:h!==0&&h!==p.length-1&&(y=y.endsWith(this.delimiter)?y:y+this.delimiter),{...m,tokens:o.tokenLength(m.value),elidedValue:y,elidedTokens:o.tokenLength(y)}}})}}},t4e=(n=>(n.componentPath="componentPath",n[n.chunk=HM]="chunk",n))(t4e||{});function X5e(t,e,n=0){let r=new Bt(t.map(i=>{let o=new Map([["componentPath",i.componentPath],[t4e.chunk,i.chunks]]);return i.isCode?new Bt([[bu(i.value,!0,!0,o,e),i.expElidableTextWeight]]):new Bt([[i.value,i.expElidableTextWeight]],o,e)}),void 0,e);return n>0&&r.lines.forEach((i,o)=>{o+1>=r.lines.length-n&&i.setValue(1)}),r}s(X5e,"prepareWeightedBlocks");var oU=class{constructor(e,n="o200k_base",r){this.delegate=e;this.approximateTokenizer=new nM(n,r)}static{s(this,"ApproximateElision")}elide(e,n,r,i,o){let{blocks:[a,...l]}=this.delegate.elide(e,n,r,i,this.approximateTokenizer),c=Fre(l);if(o.tokenLength(c+a.elidedValue)>n+i){let{blocks:d}=this.delegate.elide(e,n,r,i,o);return{blocks:d,cycles:2}}else return{blocks:[a,...l],cycles:1}}};f();var sU=class{constructor(e,n=Mre()){this.snapshot=e;this.transformers=n}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,n,r,i){let o=this.transformers.reduce((l,c)=>c(e,n,l),{...i});if(r(e,n,o))for(let l of e.children??[])this.walkSnapshotNode(l,e,r,o)}};function Mre(){return[(t,e,n)=>{n.weight===void 0&&(n.weight=1);let r=t.props?.weight??1,i=typeof r=="number"?Math.max(0,Math.min(1,r)):1;return{...n,weight:i*n.weight}},(t,e,n)=>{n.expElidableTextWeight===void 0&&(n.expElidableTextWeight=1);let r=t.props?.expElidableTextWeight??1,i=typeof r=="number"?Math.max(0,Math.min(1,r)):1;return{...n,expElidableTextWeight:i*n.expElidableTextWeight}},(t,e,n)=>{if(t.name===o5.name){let r=n.chunks?new Set(n.chunks):new Set;return r.add(t.path),{...n,chunks:r}}return n},(t,e,n)=>t.props?.source!==void 0?{...n,source:t.props.source}:n,(t,e,n)=>t.name===lv.name?{...n,isCode:!0}:n]}s(Mre,"defaultTransformers");f();var z8={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Qre={};for(let[t,e]of Object.entries(z8))if(e.markdownLanguageIds)for(let n of e.markdownLanguageIds)Qre[n]=t;else Qre[t]=t;function r4e(t){return Qre[t]}s(r4e,"mdCodeBlockLangToLanguageId");var Umt={start:"//",end:""},qmt=["php","plaintext"],Ore={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function i4e(t){return Object.values(Ore).includes(t.trim())}s(i4e,"isShebangLine");function Wmt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(Wmt,"hasLanguageMarker");function Gmt(t,e){let n=z8[e]?z8[e].lineComment:Umt;if(n){let r=n.end==""?"":" "+n.end;return`${n.start} ${t}${r}`}return""}s(Gmt,"comment");function aU(t,e){if(t==="")return"";let n=t.endsWith(`
`),i=(n?t.slice(0,-1):t).split(`
`).map(o=>Gmt(o,e)).join(`
`);return n?i+`
`:i}s(aU,"commentBlockAsSingles");function o4e(t){let{languageId:e}=t;return qmt.indexOf(e)===-1&&!Wmt(t)?e in Ore?Ore[e]:`Language: ${e}`:""}s(o4e,"getLanguageMarker");function s4e(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(s4e,"getPathMarker");function Y8(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(Y8,"newLineEnded");function a4e(t){return n4e(typeof t=="string"?t:"plaintext")}s(a4e,"getLanguage");function n4e(t){return z8[t]!==void 0?{languageId:t,...z8[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(n4e,"_getLanguage");var Hmt=5;function Ure(t){return t.children}s(Ure,"CompletionsContext");var lU=class{constructor(){this.renderId=0}static{s(this,"CompletionsPromptRenderer")}render(e,n,r){let i=this.renderId++,o=performance.now();try{if(r?.isCancellationRequested)return{status:"cancelled"};let a=n.delimiter??"",l=n.tokenizer??"o200k_base",{prefixBlocks:c,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,n.languageId,n.separateContext),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,n),h=performance.now(),[g,y]=$mt(n),{blocks:[v,...b],cycles:E}=g.elide(c,p,u,m,Bo(l)),_=performance.now(),k=n.separateContext?Z5e(b):Fre(b),D=n.separateContext?e4e(b):void 0,N=v.elidedValue,Q=b.reduce((me,te)=>me+te.elidedTokens,0),Z=Q+v.elidedTokens;return d.push(...Vmt([...b,v])),{prefix:k,prefixTokens:Q,suffix:N,suffixTokens:v.elidedTokens,context:D,tokens:Z,status:"ok",metadata:{renderId:i,rendererName:"completions",tokenizer:l,elisionStrategy:y,elisionCycles:E,actualTokens:Z,elisionTimeMs:_-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((me,te)=>me+(te.updateDataTimeMs??0),0),status:"ok"}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,n){let r=e?.value??"",i=n.promptTokenLimit,o=n.suffixPercent;if(r.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=r.length>0?i-Hmt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,n,r,i){let o=[],a=[],l=[],c=!1,u=!1;if(new sU(e,jmt).walkSnapshot((m,h,g)=>{if(m===e||(m.name===$8.name?c=!0:m.name===Lre.name&&(u=!0),m.statistics.updateDataTimeMs&&m.statistics.updateDataTimeMs>0&&l.push({componentPath:m.path,updateDataTimeMs:m.statistics.updateDataTimeMs}),m.value===void 0||m.value===""))return!0;let y=g.chunks,v=g.isCode;if(u)a.push({value:l4e(m.value),type:"suffix",weight:g.weight,expElidableTextWeight:g.expElidableTextWeight,componentPath:m.path,nodeStatistics:m.statistics,chunks:y,source:g.source,isCode:v});else{let b=m.value.endsWith(n)?m.value:m.value+n,E=g.isInCompletionsContext?this.contextValue(b,i,r):m.value;o.push({type:g.isInCompletionsContext?"context":"prefix",value:l4e(E),weight:g.weight,expElidableTextWeight:g.expElidableTextWeight,componentPath:m.path,nodeStatistics:m.statistics,chunks:y,source:g.source,isCode:v})}return!0}),!c)throw new Error(`Node of type ${$8.name} not found`);if(a.length>1)throw new Error("Only one suffix is allowed");let p=a.length===1?a[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:o,suffixBlock:p,componentStatistics:l}}contextValue(e,n,r){return n||i4e(e)?e:aU(e,r)}},jmt=[...Mre(),(t,e,n)=>t.name===Ure.name?{...n,isInCompletionsContext:!0}:n];function Vmt(t){return t.map(e=>{let n={componentPath:e.componentPath};return e.tokens!==0&&(n.expectedTokens=e.tokens,n.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(n.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(n.source=e.source),n})}s(Vmt,"computeComponentStatistics");function l4e(t){return t.replace(/\r\n?/g,`
`)}s(l4e,"normalizeLineEndings");function $mt(t){let e=t.elisionStrategy,n=t.elisionStrategy==="wishlist"?new rU:new iU(t.ellipsis,t.delimiter,t.elisionStrategy==="elidableTextWithoutChunks",t.aroundCursorLines);return t.approximateElision?[new oU(n,t.tokenizer,t.languageId),"approximate"+Y5e(e)]:[n,e]}s($mt,"chooseElisionStrategy");f();var c4e=s((t,e)=>{let[n,r]=e.useState();if(e.useData(xd,i=>{r(i.telemetryData)}),n&&t.by(t.ctx,n))return t.children},"Gated");f();var u4e=s((t,e)=>{let[n,r]=e.useState();if(e.useData(xd,i=>{i.document.uri!==n?.uri&&r(i.document)}),n){let i=t.ctx.get(kn),o=i.getRelativePath(n),a={uri:n.uri,source:n.getText(),relativePath:o,languageId:n.detectedLanguageId},l=i.findNotebook(n);return a.relativePath&&!l?Gr(zmt,{docInfo:a}):Gr(Ymt,{docInfo:a})}},"DocumentMarker"),zmt=s(t=>Gr(dl,{children:s4e(t.docInfo)}),"PathMarker"),Ymt=s(t=>Gr(dl,{children:o4e(t.docInfo)}),"LanguageMarker");f();f();f();function f4e(t){return Object.values(t).flatMap(e=>e.edits).sort((e,n)=>e.timestamp-n.timestamp)}s(f4e,"getAllRecentEditsByTimestamp");function p4e(t,e){let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;let r=t.length-1,i=e.length-1;for(;r>=n&&i>=n&&t[r]===e[i];)r--,i--;return n>r&&n>i?null:{start:n,endPrev:r,endNew:i}}s(p4e,"findChangeSpan");function Kmt(t,e,n,r,i,o,a){let l=Math.max(0,r-a),c=Math.min(n.length,o+a+1);return{file:t,pre:l,post:c,before:e.slice(l,r),removed:e.slice(r,i+1),added:n.slice(r,o+1),after:n.slice(o+1,c)}}s(Kmt,"getDiff");function Jmt(t){return[...t.before,...t.removed,...t.added,...t.after].reduce((n,r)=>n+r.length+1,0)}s(Jmt,"measureDiffSize");function Xmt(t,e=!1,n=!1,r=!1){let i=[];i.push(`--- a/${t.file}`),i.push(`+++ b/${t.file}`);let o=t.before.length+t.removed.length+t.after.length,a=t.before.length+t.added.length+t.after.length;i.push(`@@ -${t.pre+1},${o} +${t.pre+1},${a} @@`);for(let l of t.before)i.push(" "+l);if(n)for(let l of t.added)i.push("+"+l);if(!e){let l=r?" --- IGNORE ---":"";for(let c of t.removed)i.push("-"+c+l)}if(!n)for(let l of t.added)i.push("+"+l);for(let l of t.after)i.push(" "+l);return i.join(`
`)+`
`}s(Xmt,"unifiedDiff");function Zmt(t,e=!1){let{before:n,removed:r,added:i,after:o}=t,a=[];return a.push(">>>>>>> SEARCH"),a.push(...n),e?a.push("..."):a.push(...r),a.push(...o),a.push("======="),a.push(...n),a.push(...i),a.push(...o),a.push("<<<<<<<<< REPLACE"),a.join(`
`)}s(Zmt,"aidersDiff");function eht(t,e=!1){let{before:n,removed:r,added:i,after:o}=t,a=e?["..."]:r.map(d=>`${d} --- DO NOT REPLY WITH CODE FROM THIS LINE ---`),l=[...n,...a,...o],c=[...n,...i,...o],u=[];return u.push("--- User edited code: ---"),u.push(...l),a.length===0?u.push(`--- and added ${i.length} line${i.length===1?"":"s"} to make: ---`):i.length===0?u.push(`--- and deleted ${a.length} line${a.length===1?"":"s"} to make: ---`):u.push("--- and replaced it with: ---"),u.push(...c),u.push("--- End of edit ---"),u.join(`
`)}s(eht,"findReplaceDiff");function d4e(t,e){for(let n of e){let r=t.slice(0,n.startLine),i=t.slice(n.endLine+1),o=n.diff.added?n.diff.added:[];t=[...r,...o,...i]}return t}s(d4e,"applyEditsToLines");function tht(t,e,n){let{added:r}=e.diff,i=e.startLine,o=e.startLine+r.length,a=t.startLine,l=t.endLine+1;return a<=o+n&&l>=i-n}s(tht,"editsOverlap");function nht(t,e,n,r,i){let o=[...e];if(o.length>0){let a=o[o.length-1];if(tht(n,a,i.editMergeLineDistance)){let c=d4e(t.split(`
`),o.slice(0,-1)),u=p4e(c,r);u&&(n=m4e(n.file,c,r,u,i),o=[...o.slice(0,-1),n])}else o.push(n)}else o.push(n);if(o.length>i.maxEditsPerFile){let a=o.slice(0,o.length-i.maxEditsPerFile);o=o.slice(o.length-i.maxEditsPerFile,o.length),t=d4e(t.split(`
`),a).join(`
`)}return{originalContent:t,edits:o}}s(nht,"updateEdits");function m4e(t,e,n,r,i){let{start:o,endPrev:a,endNew:l}=r;if(!i||typeof i.diffContextLines!="number")throw new Error("Invalid configuration passed to buildIncomingEdit");let c=Kmt(t,e,n,o,a,l,i.diffContextLines);return{file:t,startLine:o,endLine:a,diff:c,timestamp:performance.now()}}s(m4e,"buildIncomingEdit");function rht(t,e){let n={...t},r=Object.entries(t).filter(([o])=>t[o].edits.length).sort(([o,a],[l,c])=>a.edits[a.edits.length-1].timestamp-c.edits[c.edits.length-1].timestamp),i=Math.max(0,r.length-e);if(i)for(let o=0;o<i;o++){let a=r[o][0];delete n[a]}return n}s(rht,"trimOldFilesFromState");function h4e(t={},e,n,r){if(n.length>2*1024*1024)return t;let i=t[e];if(!i)return{...t,[e]:{originalContent:n,currentContent:n,edits:[]}};if(i.currentContent===n)return t;let o=i.currentContent.split(`
`),a=n.split(`
`),l=p4e(o,a);if(!l)return{...t,[e]:{...i,currentContent:n}};let c=m4e(e,o,a,l,r);if(Jmt(c.diff)>r.maxCharsPerEdit)return{...t,[e]:{originalContent:n,currentContent:n,edits:[]}};let{originalContent:u,edits:d}=nht(i.originalContent,i.edits,c,a,r),p={...t,[e]:{originalContent:u,currentContent:n,edits:d}};return rht(p,r.maxFiles)}s(h4e,"recentEditsReducer");function g4e(t,e){let n=t.diff.removed.filter(o=>o.trim().length>0),r=t.diff.added.filter(o=>o.trim().length>0),i;if(e.removeDeletedLines&&r.length===0)i=null;else if(n.length===0&&r.length===0)i=null;else if(n.join("").trim()===r.join("").trim())i=null;else if(t.diff.added.length>e.maxLinesPerEdit||t.diff.removed.length>e.maxLinesPerEdit)i=null;else if(e.summarizationFormat==="aiders-diff")i=Zmt(t.diff);else if(e.summarizationFormat==="diff")i=Xmt(t.diff,e.removeDeletedLines,e.insertionsBeforeDeletions,e.appendNoReplyMarker);else if(e.summarizationFormat==="find-replace")i=eht(t.diff);else throw new Error(`Unknown summarization format: ${e.summarizationFormat}`);return i}s(g4e,"summarizeEdit");f();f();f();f();f();f();function K8(t,e="Unreachable"){throw new Error(e)}s(K8,"assertNever");function Nl(t,e="unexpected state"){if(!t)throw new yr(`Assertion Failed: ${e}`)}s(Nl,"assert");function Ru(t){if(!t()){debugger;t(),qS(new yr("Assertion Failed"))}}s(Ru,"assertFn");function cv(t,e){let n=0;for(;n<t.length-1;){let r=t[n],i=t[n+1];if(!e(r,i))return!1;n++}return!0}s(cv,"checkAdjacentItems");f();var M1=s((t,e)=>t===e,"strictEquals");f();var ku=class{constructor(e,n,r){this.owner=e;this.debugNameSource=n;this.referenceFn=r}static{s(this,"DebugNameData")}getDebugName(e){return x4e(e,this)}},A4e=new Map,qre=new WeakMap;function x4e(t,e){let n=qre.get(t);if(n)return n;let r=iht(t,e);if(r){let i=A4e.get(r)??0;i++,A4e.set(r,i);let o=i===1?r:`${r}#${i}`;return qre.set(t,o),o}}s(x4e,"getDebugName");function iht(t,e){let n=qre.get(t);if(n)return n;let r=e.owner?sht(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return r+i}else return r+o;let a=e.referenceFn;if(a!==void 0&&(i=cU(a),i!==void 0))return r+i;if(e.owner!==void 0){let l=oht(e.owner,t);if(l!==void 0)return r+l}}s(iht,"computeDebugName");function oht(t,e){for(let n in t)if(t[n]===e)return n}s(oht,"findKey");var y4e=new Map,C4e=new WeakMap;function sht(t){let e=C4e.get(t);if(e)return e;let n=aht(t),r=y4e.get(n)??0;r++,y4e.set(n,r);let i=r===1?n:`${n}#${r}`;return C4e.set(t,i),i}s(sht,"formatOwner");function aht(t){let e=t.constructor;return e?e.name:"Object"}s(aht,"getClassName");function cU(t){let e=t.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(r?r[1]:void 0)?.trim()}s(cU,"getFunctionName");f();var KI;function dU(t){KI?KI instanceof uU?KI.loggers.push(t):KI=new uU([KI,t]):KI=t}s(dU,"addLogger");function Ns(){return KI}s(Ns,"getLogger");var Wre;function v4e(t){Wre=t}s(v4e,"setLogObservableFn");function b4e(t){Wre&&Wre(t)}s(b4e,"logObservable");var uU=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let n of this.loggers)n.handleObservableCreated(e)}handleOnListenerCountChanged(e,n){for(let r of this.loggers)r.handleOnListenerCountChanged(e,n)}handleObservableUpdated(e,n){for(let r of this.loggers)r.handleObservableUpdated(e,n)}handleAutorunCreated(e){for(let n of this.loggers)n.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let n of this.loggers)n.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,n,r){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,n,r)}handleAutorunStarted(e){for(let n of this.loggers)n.handleAutorunStarted(e)}handleAutorunFinished(e){for(let n of this.loggers)n.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,n,r){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,n,r)}handleDerivedCleared(e){for(let n of this.loggers)n.handleDerivedCleared(e)}handleBeginTransaction(e){for(let n of this.loggers)n.handleBeginTransaction(e)}handleEndTransaction(e){for(let n of this.loggers)n.handleEndTransaction(e)}};var E4e;function I4e(t){E4e=t}s(I4e,"_setRecomputeInitiallyAndOnChange");var T4e;function w4e(t){T4e=t}s(w4e,"_setKeepObserved");var Gre;function _4e(t){Gre=t}s(_4e,"_setDerivedOpts");var fU=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,n){let r=n===void 0?void 0:e,i=n===void 0?e:n;return Gre({owner:r,debugName:s(()=>{let o=cU(i);if(o!==void 0)return o;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(l)return`${this.debugName}.${l[2]}`;if(!r)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return Gre({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,n){return e.add(E4e(this,n)),this}keepObserved(e){return e.add(T4e(this)),this}get debugValue(){return this.get()}},uv=class extends fU{constructor(){super();this.observers=new Set;Ns()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(n){let r=this.observers.size;this.observers.add(n),r===0&&this.onFirstObserverAdded(),r!==this.observers.size&&Ns()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(n){let r=this.observers.delete(n);r&&this.observers.size===0&&this.onLastObserverRemoved(),r&&Ns()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let n=!!Ns();return b4e(this),n||Ns()?.handleObservableCreated(this),this}};function mU(t,e){let n=new d5(t,e);try{t(n)}finally{n.finish()}}s(mU,"transaction");function Hre(t,e,n){t?e(t):mU(e,n)}s(Hre,"subtransaction");var d5=class{constructor(e,n){this._fn=e;this._getDebugName=n;this.updatingObservers=[];Ns()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():cU(this._fn)}updateObserver(e,n){this.updatingObservers.push({observer:e,observable:n}),e.beginUpdate(n)}finish(){let e=this.updatingObservers;for(let n=0;n<e.length;n++){let{observer:r,observable:i}=e[n];r.endUpdate(i)}this.updatingObservers=null,Ns()?.handleEndTransaction(this)}};function Tm(t,e){let n;return typeof t=="string"?n=new ku(void 0,t,void 0):n=new ku(t,void 0,void 0),new pU(n,e,M1)}s(Tm,"observableValue");var pU=class extends uv{constructor(n,r,i){super();this._debugNameData=n;this._equalityComparator=i;this._value=r,Ns()?.handleObservableUpdated(this,{hadValue:!1,newValue:r,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(n,r,i){if(i===void 0&&this._equalityComparator(this._value,n))return;let o;r||(r=o=new d5(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(n),Ns()?.handleObservableUpdated(this,{oldValue:a,newValue:n,change:i,didChange:!0,hadValue:!0});for(let l of this.observers)r.updateObserver(l,this),l.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(n){this._value=n}};f();f();function JI(t){return new f5(new ku(void 0,void 0,t),t,void 0,void 0)}s(JI,"autorun");function jre(t,e){return new f5(new ku(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(jre,"autorunOpts");function hU(t,e){return new f5(new ku(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(hU,"autorunHandleChanges");function Vre(t,e){let n=new Tu,r=hU({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{n.clear(),e(i,o,n)});return _a(()=>{r.dispose(),n.dispose()})}s(Vre,"autorunWithStoreHandleChanges");function $re(t){let e=new Tu,n=jre({owner:void 0,debugName:void 0,debugReferenceFn:t},r=>{e.clear(),t(r,e)});return _a(()=>{n.dispose(),e.dispose()})}s($re,"autorunWithStore");var f5=class{constructor(e,n,r,i){this._debugNameData=e;this._runFn=n;this.createChangeSummary=r;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Ns()?.handleAutorunCreated(this),this._runIfNeeded(),jS(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ns()?.handleAutorunDisposed(this),VS(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Ns()?.handleAutorunStarted(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,n)}catch(r){WI(r)}finally{this._isRunning=!1}}}finally{this.disposed||Ns()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Ru(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,n){if(this._isDependency(e)){Ns()?.handleAutorunDependencyChanged(this,e,n);try{(this._handleChange?this._handleChange({changedObservable:e,change:n,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(r){WI(r)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new yr("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let n=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),n}};(e=>e.Observer=f5)(JI||={});f();function gU(t,e){return new XI(new ku(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??M1)}s(gU,"derivedOpts");_4e(gU);var XI=class extends uv{constructor(n,r,i,o,a=void 0,l){super();this._debugNameData=n;this._computeFn=r;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Ns()?.handleDerivedCleared(this);for(let n of this.dependencies)n.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let r;try{this._isReaderValid=!0,r=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),r}else{do{if(this.state===1){for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n;let r=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=r&&!this._equalityComparator(i,this.value),Ns()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:r})}catch(a){WI(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(n){if(this._isUpdating)throw new yr("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let r=this.updateCount===1;if(this.state===3&&(this.state=1,!r))for(let i of this.observers)i.handlePossibleChange(this);if(r)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(n){if(this.updateCount--,this.updateCount===0){let r=[...this.observers];for(let i of r)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Ru(()=>this.updateCount>=0)}handlePossibleChange(n){if(this.state===3&&this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){this.state=1;for(let r of this.observers)r.handlePossibleChange(this)}}handleChange(n,r){if(this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){Ns()?.handleDerivedDependencyChanged(this,n,r);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:n,change:r,didChange:s(a=>a===n,"didChange")},this.changeSummary):!0}catch(a){WI(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(n){if(!this._isReaderValid)throw new yr("The reader object cannot be used outside its compute function!");n.addObserver(this);let r=n.get();return this.dependencies.add(n),this.dependenciesToBeRemoved.delete(n),r}addObserver(n){let r=!this.observers.has(n)&&this.updateCount>0;super.addObserver(n),r&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(n)?this._removedObserverToCallEndUpdateOn.delete(n):n.beginUpdate(this))}removeObserver(n){this.observers.has(n)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(n)),super.removeObserver(n)}};f();f();function zre(...t){let e,n,r;return t.length===3?[e,n,r]=t:[n,r]=t,new dv(new ku(e,void 0,r),n,r,()=>dv.globalTransaction,M1)}s(zre,"observableFromEvent");var dv=class extends uv{constructor(n,r,i,o,a){super();this._debugNameData=n;this.event=r;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(n=>{let r=this._getValue(n),i=this.value,o=!this.hasValue||!this._equalityComparator(i,r),a=!1;o&&(this.value=r,this.hasValue&&(a=!0,Hre(this._getTransaction(),l=>{Ns()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue});for(let c of this.observers)l.updateObserver(c,this),c.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),a||Ns()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let n=this.getDebugName();return"From Event"+(n?`: ${n}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(n=>{n.Observer=dv;function e(r,i){let o=!1;dv.globalTransaction===void 0&&(dv.globalTransaction=r,o=!0);try{i()}finally{o&&(dv.globalTransaction=void 0)}}n.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(zre||={});function R4e(t){let e=new AU(!1,void 0);return t.addObserver(e),_a(()=>{t.removeObserver(e)})}s(R4e,"keepObserved");w4e(R4e);function k4e(t,e){let n=new AU(!0,e);return t.addObserver(n),e?e(t.get()):t.reportChanges(),_a(()=>{t.removeObserver(n)})}s(k4e,"recomputeInitiallyAndOnChange");I4e(k4e);var AU=class{constructor(e,n){this._forceRecompute=e;this._handleValue=n;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,n){}};function E0(t,e,n,r){let i=new yU(n,r);return gU({debugReferenceFn:n,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new yU(n)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(E0,"mapObservableArrayCached");var yU=class{constructor(e,n){this._map=e;this._keySelector=n;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let n=[],r=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)r.delete(o);else{let l=new Tu;a={out:this._map(i,l),store:l},this._cache.set(o,a)}n.push(a.out)}for(let i of r)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=n}getItems(){return this._items}};function Yre(t,e){let n;return Vre({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((r,i)=>{if(r.didChange(t)){let o=r.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(r,i)=>{let o=t.read(r),a=n;i.didChange&&(n=o,e(o,a,i.deltas))})}s(Yre,"runOnChange");f();f();f();var CU;function B4e(t){CU||(CU=new X8,dU(CU)),CU.addFilteredObj(t)}s(B4e,"logObservableToConsole");var X8=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return lht([p5(dht("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[p5(" "),Kf(J8(e.oldValue,70),{color:"red",strikeThrough:!0}),p5(" "),Kf(J8(e.newValue,60),{color:"green"})]:[p5(" (unchanged)")]:[p5(" "),Kf(J8(e.newValue,60),{color:"green"}),p5(" (initial)")]}handleObservableCreated(e){if(e instanceof XI){let n=e;if(this.changedObservablesSets.set(n,new Set),!1){let i=[];n.__debugUpdating=i;let o=n.beginUpdate;n.beginUpdate=l=>(i.push(l),o.apply(n,[l]));let a=n.endUpdate;n.endUpdate=l=>{let c=i.indexOf(l);return c===-1&&console.error("endUpdate called without beginUpdate",n.debugName,l.debugName),i.splice(c,1),a.apply(n,[l])}}}}handleOnListenerCountChanged(e,n){}handleObservableUpdated(e,n){if(this._isIncluded(e)){if(e instanceof XI){this._handleDerivedRecomputed(e,n);return}console.log(...this.textToConsoleArgs([m5("observable value changed"),Kf(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n)]))}}formatChanges(e){if(e.size!==0)return Kf(" (changed deps: "+[...e].map(n=>n.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(n)}_handleDerivedRecomputed(e,n){if(!this._isIncluded(e))return;let r=this.changedObservablesSets.get(e);r&&(console.log(...this.textToConsoleArgs([m5("derived recomputed"),Kf(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([m5("derived cleared"),Kf(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,n){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([m5("observable from event triggered"),Kf(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(n)}handleAutorunStarted(e){let n=this.changedObservablesSets.get(e);n&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([m5("autorun"),Kf(e.debugName,{color:"BlueViolet"}),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),n.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let n=e.getDebugName();n===void 0&&(n=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([m5("transaction"),Kf(n,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function lht(t){let e=new Array,n=[],r="";function i(a){if("length"in a)for(let l of a)l&&i(l);else"text"in a?(r+=`%c${a.text}`,e.push(a.style),a.data&&n.push(...a.data)):"data"in a&&n.push(...a.data)}s(i,"process"),i(t);let o=[r,...e];return o.push(...n),o}s(lht,"consoleTextToArgs");function p5(t){return Kf(t,{color:"black"})}s(p5,"normalText");function m5(t){return Kf(fht(`${t}: `,10),{color:"black",bold:!0})}s(m5,"formatKind");function Kf(t,e={color:"black"}){function n(i){return Object.entries(i).reduce((o,[a,l])=>`${o}${a}:${l};`,"")}s(n,"objToCss");let r={color:e.color};return e.strikeThrough&&(r["text-decoration"]="line-through"),e.bold&&(r["font-weight"]="bold"),{text:t,style:n(r)}}s(Kf,"styled");function J8(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?cht(t,e):uht(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(J8,"formatValue");function cht(t,e){let n="[ ",r=!0;for(let i of t){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${J8(i,e-n.length)}`}return n+=" ]",n}s(cht,"formatArray");function uht(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let n="{ ",r=!0;for(let[i,o]of Object.entries(t)){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${i}: ${J8(o,e-n.length)}`}return n+=" }",n}s(uht,"formatObject");function dht(t,e){let n="";for(let r=1;r<=e;r++)n+=t;return n}s(dht,"repeat");function fht(t,e){for(;t.length<e;)t+=" ";return t}s(fht,"padStr");v4e(B4e);var pht=!1;pht&&dU(new X8);f();function xg(t,e,n){let r=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return hU({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let l=r.get(o.changedObservable);return a[l]===void 0&&(a[l]={value:void 0,changes:[]}),a[l].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[l,c]of Object.entries(e)){let u=c.read(o);a[l]===void 0&&(a[l]={value:u,changes:[],previous:i.get(l)}),a[l].value=u,a[l].previous=i.get(l)===void 0?void 0:i.get(l),i.set(l,u)}n(a)})}s(xg,"autorunWithChanges");var Q1=class extends Ho{constructor(n,r,i=!1){super();this.recentEditMap={};this.recentEdits=[];this.recentEditSummaries=new WeakMap;this.debounceTimeouts={};this.workspace=n,this._started=!1,this.recentEditsConfig=r,i||this.start()}static{s(this,"RecentEditsProvider")}getRecentEdits(){return this.recentEdits}getEditSummary(n){return this.recentEditSummaries.get(n)??null}updateRecentEdits(n,r){this.recentEditMap=h4e(this.recentEditMap,n,r,this.recentEditsConfig),this.recentEdits=f4e(this.recentEditMap),this.recentEdits.forEach(i=>{if(!this.recentEditSummaries.has(i)){let o=g4e(i,this.recentEditsConfig);this.recentEditSummaries.set(i,o)}})}setConfig(n){this.recentEditsConfig=n}start(){this._started||(this._started=!0,E0(this,this.workspace.openDocuments,(n,r)=>{r.add(xg(this,{value:n.value,selection:n.selection,languageId:n.languageId},i=>{if(i.value.changes.length>0){let o=i.value.previous?.value,a=i.value.value.value,l=n.id.toString();clearTimeout(this.debounceTimeouts[l]),!this.recentEditMap[l]&&o?this.updateRecentEdits(l,o):this.recentEditsConfig.debounceTimeout===0?this.updateRecentEdits(l,a):this.debounceTimeouts[l]=setTimeout(()=>{this.updateRecentEdits(l,a)},this.recentEditsConfig.debounceTimeout??500)}}))},n=>n.id).recomputeInitiallyAndOnChange(this._store))}};f();f();f();f();var ZI;(n=>{n.PlainText="plaintext";function e(r){return r}n.create=e,s(e,"create")})(ZI||={});f();f();var Rt=class t{constructor(e,n){this.start=e;this.endExclusive=n;if(e>n)throw new yr(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,n){return new t(e,n)}static addRange(e,n){let r=0;for(;r<n.length&&n[r].endExclusive<e.start;)r++;let i=r;for(;i<n.length&&n[i].start<=e.endExclusive;)i++;if(r===i)n.splice(r,0,e);else{let o=Math.min(e.start,n[r].start),a=Math.max(e.endExclusive,n[i-1].endExclusive);n.splice(r,i-r,new t(o,a))}}static tryCreate(e,n){if(!(e>n))return new t(e,n)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,n){return new t(e,e+n)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);if(n<=r)return new t(n,r)}intersectionLength(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,r-n)}intersects(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<r}intersectsOrTouches(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<=r}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new yr(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new yr(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let n=[];for(let r=this.start;r<this.endExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.start;n<this.endExclusive;n++)e(n)}};f();var ir=class t{static{s(this,"Position")}constructor(e,n){this.lineNumber=e,this.column=n}with(e=this.lineNumber,n=this.column){return e===this.lineNumber&&n===this.column?this:new t(e,n)}delta(e=0,n=0){return this.with(this.lineNumber+e,this.column+n)}equals(e){return t.equals(this,e)}static equals(e,n){return!e&&!n?!0:!!e&&!!n&&e.lineNumber===n.lineNumber&&e.column===n.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<n.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<=n.column}static compare(e,n){let r=e.lineNumber|0,i=n.lineNumber|0;if(r===i){let o=e.column|0,a=n.column|0;return o-a}return r-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var zt=class t{static{s(this,"Range")}constructor(e,n,r,i){e>r||e===r&&n>i?(this.startLineNumber=r,this.startColumn=i,this.endLineNumber=e,this.endColumn=n):(this.startLineNumber=e,this.startColumn=n,this.endLineNumber=r,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<e.startColumn||n.lineNumber===e.endLineNumber&&n.column>e.endColumn)}static strictContainsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<=e.startColumn||n.lineNumber===e.endLineNumber&&n.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<=e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,n){let r,i,o,a;return n.startLineNumber<e.startLineNumber?(r=n.startLineNumber,i=n.startColumn):n.startLineNumber===e.startLineNumber?(r=n.startLineNumber,i=Math.min(n.startColumn,e.startColumn)):(r=e.startLineNumber,i=e.startColumn),n.endLineNumber>e.endLineNumber?(o=n.endLineNumber,a=n.endColumn):n.endLineNumber===e.endLineNumber?(o=n.endLineNumber,a=Math.max(n.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(r,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,n){let r=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,l=n.startLineNumber,c=n.startColumn,u=n.endLineNumber,d=n.endColumn;return r<l?(r=l,i=c):r===l&&(i=Math.max(i,c)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),r>o||r===o&&i>a?null:new t(r,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,n){return!e&&!n?!0:!!e&&!!n&&e.startLineNumber===n.startLineNumber&&e.startColumn===n.startColumn&&e.endLineNumber===n.endLineNumber&&e.endColumn===n.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new ir(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new ir(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,n){return new t(this.startLineNumber,this.startColumn,e,n)}setStartPosition(e,n){return new t(e,n,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,n=e){return new t(e.lineNumber,e.column,n.lineNumber,n.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<e.startColumn)}static areIntersecting(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<=n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,n){if(e&&n){let o=e.startLineNumber|0,a=n.startLineNumber|0;if(o===a){let l=e.startColumn|0,c=n.startColumn|0;if(l===c){let u=e.endLineNumber|0,d=n.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=n.endColumn|0;return p-m}return u-d}return l-c}return o-a}return(e?1:0)-(n?1:0)}static compareRangesUsingEnds(e,n){return e.endLineNumber===n.endLineNumber?e.endColumn===n.endColumn?e.startLineNumber===n.startLineNumber?e.startColumn-n.startColumn:e.startLineNumber-n.startLineNumber:e.endColumn-n.endColumn:e.endLineNumber-n.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Yt=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,n){return n?e.startLineNumber<n.startLineNumber&&n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,n.startLineNumber),new t(n.endLineNumberExclusive,e.endLineNumberExclusive)]:n.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=n.endLineNumberExclusive?[]:n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(n.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(n.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let n=new e2(e[0].slice());for(let r=1;r<e.length;r++)n=n.getUnion(new e2(e[r].slice()));return n.ranges}static join(e){if(e.length===0)throw new yr("lineRanges cannot be empty");let n=e[0].startLineNumber,r=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)n=Math.min(n,e[i].startLineNumber),r=Math.max(r,e[i].endLineNumberExclusive);return new t(n,r)}static ofLength(e,n){return new t(e,e+n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,n){if(e>n)throw new yr(`startLineNumber ${e} cannot be after endLineNumberExclusive ${n}`);this.startLineNumber=e,this.endLineNumberExclusive=n}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let n=Math.max(this.startLineNumber,e.startLineNumber),r=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(n<=r)return new t(n,r)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new zt(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new zt(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let n=[];for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)e(n)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Rt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,n){return new t(this.startLineNumber-e,this.endLineNumberExclusive+n)}},e2=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let n=qI(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),r=y0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)this._normalizedRanges.splice(n,0,e);else if(n===r-1){let i=this._normalizedRanges[n];this._normalizedRanges[n]=i.join(e)}else{let i=this._normalizedRanges[n].join(this._normalizedRanges[r-1]).join(e);this._normalizedRanges.splice(n,r-n,i)}}contains(e){let n=_1(this._normalizedRanges,r=>r.startLineNumber<=e);return!!n&&n.endLineNumberExclusive>e}intersects(e){let n=_1(this._normalizedRanges,r=>r.startLineNumber<e.endLineNumberExclusive);return!!n&&n.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let n=[],r=0,i=0,o=null;for(;r<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(r<this._normalizedRanges.length&&i<e._normalizedRanges.length){let l=this._normalizedRanges[r],c=e._normalizedRanges[i];l.startLineNumber<c.startLineNumber?(a=l,r++):(a=c,i++)}else r<this._normalizedRanges.length?(a=this._normalizedRanges[r],r++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Yt(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(n.push(o),o=a)}return o!==null&&n.push(o),new t(n)}subtractFrom(e){let n=qI(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),r=y0(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)return new t([e]);let i=[],o=e.startLineNumber;for(let a=n;a<r;a++){let l=this._normalizedRanges[a];l.startLineNumber>o&&i.push(new Yt(o,l.startLineNumber)),o=l.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Yt(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let n=[],r=0,i=0;for(;r<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[r],a=e._normalizedRanges[i],l=o.intersect(a);l&&!l.isEmpty&&n.push(l),o.endLineNumberExclusive<a.endLineNumberExclusive?r++:i++}return new t(n)}getWithDelta(e){return new t(this._normalizedRanges.map(n=>n.delta(e)))}};var Ll=class t{constructor(e,n){this.lineCount=e;this.columnCount=n}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,n){return n.isLessThan(e)?t.zero:e.lineCount===n.lineCount?new t(0,n.columnCount-e.columnCount):new t(n.lineCount-e.lineCount,n.columnCount)}static betweenPositions(e,n){return e.lineNumber===n.lineNumber?new t(0,n.column-e.column):new t(n.lineNumber-e.lineNumber,n.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let n=0,r=0;for(let i of e)i===`
`?(n++,r=0):r++;return new t(n,r)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new zt(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new zt(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new zt(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Yt.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new ir(e.lineNumber,e.column+this.columnCount):new ir(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return zt.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Fl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new Kre(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Cg(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},Kre=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Rt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=y0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new ir(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ll.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ll(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var vg=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(n=>n.id===e))}};var xU=class extends Ho{constructor(n,r,i,o,a,l){super();this.id=n;this.workspaceRoot=l;this.value=Tm(this,r),this.selection=Tm(this,i),this.languageId=Tm(this,o),this._register(_a(a))}static{s(this,"MutableObservableDocument")}applyEdit(n,r=void 0){let i=this.value.get().apply(n);this.value.set(i,r,n)}updateSelection(n,r=void 0){this.selection.set(n,r)}};var $4e=Ve(ii());f();f();f();f();var bU=!1,EU=!1,vU=!1,mht=!1,hht=!1,D4e=!1,ght=!1,Aht=!1,yht=!1,Cht=!1;var O1,U1=globalThis,Jf;typeof U1.vscode<"u"&&typeof U1.vscode.process<"u"?Jf=U1.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Jf=process);var P4e=typeof Jf?.versions?.electron=="string",xht=P4e&&Jf?.type==="renderer";typeof Jf=="object"?(bU=Jf.platform==="win32",EU=Jf.platform==="darwin",vU=Jf.platform==="linux",mht=vU&&!!Jf.env.SNAP&&!!Jf.env.SNAP_REVISION,ght=P4e,yht=!!Jf.env.CI||!!Jf.env.BUILD_ARTIFACTSTAGINGDIRECTORY,hht=!0):typeof navigator=="object"&&!xht?(O1=navigator.userAgent,bU=O1.indexOf("Windows")>=0,EU=O1.indexOf("Macintosh")>=0,Aht=(O1.indexOf("Macintosh")>=0||O1.indexOf("iPad")>=0||O1.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,vU=O1.indexOf("Linux")>=0,Cht=O1?.indexOf("Mobi")>=0,D4e=!0):console.error("Unable to resolve platform.");var Jre=0;EU?Jre=1:bU?Jre=3:vU&&(Jre=2);var t2=bU,N4e=EU;var vht=D4e&&typeof U1.importScripts=="function",IMn=vht?U1.origin:void 0;var bg=O1;var bht=typeof U1.postMessage=="function"&&!U1.importScripts,TMn=(()=>{if(bht){let t=[];U1.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),U1.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();var Eht=!!(bg&&bg.indexOf("Chrome")>=0),wMn=!!(bg&&bg.indexOf("Firefox")>=0),_Mn=!!(!Eht&&bg&&bg.indexOf("Safari")>=0),SMn=!!(bg&&bg.indexOf("Edg/")>=0),RMn=!!(bg&&bg.indexOf("Android")>=0);var n2,Xre=globalThis.vscode;if(typeof Xre<"u"&&typeof Xre.process<"u"){let t=Xre.process;n2={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?n2={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:n2={get platform(){return t2?"win32":N4e?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Z8=n2.cwd,L4e=n2.env,F4e=n2.platform,LMn=n2.arch;var Tht=65,wht=97,_ht=90,Sht=122,mv=46,Ml=47,vd=92,fv=58,Rht=63,IU=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function kht(t,e){if(t===null||typeof t!="object")throw new IU(e,"Object",t)}s(kht,"validateObject");function sa(t,e){if(typeof t!="string")throw new IU(e,"string",t)}s(sa,"validateString");var bd=F4e==="win32";function oi(t){return t===Ml||t===vd}s(oi,"isPathSeparator");function Zre(t){return t===Ml}s(Zre,"isPosixPathSeparator");function pv(t){return t>=Tht&&t<=_ht||t>=wht&&t<=Sht}s(pv,"isWindowsDeviceRoot");function TU(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=Ml}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==mv||i.charCodeAt(i.length-2)!==mv){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===mv&&l!==-1?++l:l=-1}return i}s(TU,"normalizeString");function Bht(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(Bht,"formatExt");function M4e(t,e){kht(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${Bht(e.ext)}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(M4e,"_format");var aa={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],sa(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=Z8():(o=L4e[`=${e}`]||Z8(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===vd)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)oi(d)&&(l=1,u=!0);else if(oi(d))if(u=!0,oi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!oi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else pv(d)&&o.charCodeAt(1)===fv&&(c=o.slice(0,2),l=2,a>2&&oi(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=TU(n,!r,"\\",oi),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){sa(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return Zre(o)?"\\":t;if(oi(o))if(i=!0,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else pv(o)&&t.charCodeAt(1)===fv&&(r=t.slice(0,2),n=2,e>2&&oi(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?TU(t.slice(n),!i,"\\",oi):"";return a.length===0&&!i&&(a="."),a.length>0&&oi(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){sa(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return oi(n)||e>2&&pv(n)&&t.charCodeAt(1)===fv&&oi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];sa(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&oi(n.charCodeAt(0))){++i;let o=n.length;o>1&&oi(n.charCodeAt(1))&&(++i,o>2&&(oi(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&oi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return aa.normalize(e)},relative(t,e){if(sa(t,"from"),sa(e,"to"),t===e)return"";let n=aa.resolve(t),r=aa.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===vd;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===vd;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===vd;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===vd;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===vd&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===vd)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===vd?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===vd)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===vd&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=aa.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===vd){if(e.charCodeAt(1)===vd){let n=e.charCodeAt(2);if(n!==Rht&&n!==mv)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(pv(e.charCodeAt(0))&&e.charCodeAt(1)===fv&&e.charCodeAt(2)===vd)return`\\\\?\\${e}`;return t},dirname(t){sa(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return oi(i)?t:".";if(oi(i)){if(n=r=1,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else pv(i)&&t.charCodeAt(1)===fv&&(n=e>2&&oi(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(oi(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&sa(e,"suffix"),sa(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&pv(t.charCodeAt(0))&&t.charCodeAt(1)===fv&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(oi(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(oi(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){sa(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===fv&&pv(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(oi(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===mv?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:M4e.bind(null,"\\"),parse(t){sa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return oi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(oi(i)){if(r=1,oi(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!oi(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&oi(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!oi(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(pv(i)&&t.charCodeAt(1)===fv){if(n<=2)return e.root=e.dir=t,e;if(r=2,oi(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),oi(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===mv?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Dht=(()=>{if(bd){let t=/\\/g;return()=>{let e=Z8().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>Z8()})(),ka={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:Dht();sa(i,`paths[${r}]`),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===Ml)}return e=TU(e,!n,"/",Zre),n?`/${e}`:e.length>0?e:"."},normalize(t){if(sa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ml,n=t.charCodeAt(t.length-1)===Ml;return t=TU(t,!e,"/",Zre),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return sa(t,"path"),t.length>0&&t.charCodeAt(0)===Ml},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];sa(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":ka.normalize(e)},relative(t,e){if(sa(t,"from"),sa(e,"to"),t===e||(t=ka.resolve(t),e=ka.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===Ml&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Ml)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===Ml?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===Ml)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(sa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ml,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Ml){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&sa(e,"ext"),sa(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Ml){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Ml){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){sa(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Ml){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===mv?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:M4e.bind(null,"/"),parse(t){sa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===Ml,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===Ml){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===mv?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ka.win32=aa.win32=aa;ka.posix=aa.posix=ka;var MMn=bd?aa.normalize:ka.normalize,QMn=bd?aa.isAbsolute:ka.isAbsolute,OMn=bd?aa.join:ka.join,UMn=bd?aa.resolve:ka.resolve,qMn=bd?aa.relative:ka.relative,WMn=bd?aa.dirname:ka.dirname,Q4e=bd?aa.basename:ka.basename,O4e=bd?aa.extname:ka.extname,GMn=bd?aa.format:ka.format,HMn=bd?aa.parse:ka.parse,jMn=bd?aa.toNamespacedPath:ka.toNamespacedPath,VMn=bd?aa.sep:ka.sep,$Mn=bd?aa.delimiter:ka.delimiter;f();f();var Nht=/^\w[\w\d+.-]*$/,Lht=/^\//,Fht=/^\/\//;function Mht(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Nht.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Lht.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Fht.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Mht,"_validateUri");function Qht(t,e){return!t&&!e?"file":t}s(Qht,"_schemeFix");function Oht(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==wm&&(e=wm+e):e=wm;break}return e}s(Oht,"_referenceResolution");var jo="",wm="/",Uht=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,gv=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||jo,this.authority=e.authority||jo,this.path=e.path||jo,this.query=e.query||jo,this.fragment=e.fragment||jo):(this.scheme=Qht(e,a),this.authority=n||jo,this.path=Oht(this.scheme,r||jo),this.query=i||jo,this.fragment=o||jo,Mht(this,a))}get fsPath(){return eie(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=jo),r===void 0?r=this.authority:r===null&&(r=jo),i===void 0?i=this.path:i===null&&(i=jo),o===void 0?o=this.query:o===null&&(o=jo),a===void 0?a=this.fragment:a===null&&(a=jo),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new hv(n,r,i,o,a)}static parse(e,n=!1){let r=Uht.exec(e);return r?new hv(r[2]||jo,wU(r[4]||jo),wU(r[5]||jo),wU(r[7]||jo),wU(r[9]||jo),n):new hv(jo,jo,jo,jo,jo)}static file(e){let n=jo;if(t2&&(e=e.replace(/\\/g,wm)),e[0]===wm&&e[1]===wm){let r=e.indexOf(wm,2);r===-1?(n=e.substring(2),e=wm):(n=e.substring(2,r),e=e.substring(r)||wm)}return new hv("file",n,e,jo,jo)}static from(e,n){return new hv(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return t2&&e.scheme==="file"?r=t.file(aa.join(eie(e,!0),...n)).path:r=ka.join(e.path,...n),e.with({path:r})}toString(e=!1){return tie(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new hv(e);return n._formatted=e.external??null,n._fsPath=e._sep===W4e?e.fsPath??null:null,n}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var W4e=t2?1:void 0,hv=class extends gv{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=eie(this,!1)),this._fsPath}toString(n=!1){return n?tie(this,!0):(this._formatted||(this._formatted=tie(this,!1)),this._formatted)}toJSON(){let n={$mid:1};return this._fsPath&&(n.fsPath=this._fsPath,n._sep=W4e),this._formatted&&(n.external=this._formatted),this.path&&(n.path=this.path),this.scheme&&(n.scheme=this.scheme),this.authority&&(n.authority=this.authority),this.query&&(n.query=this.query),this.fragment&&(n.fragment=this.fragment),n}},G4e={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function U4e(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=G4e[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(U4e,"encodeURIComponentFast");function qht(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=G4e[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(qht,"encodeURIComponentMinimal");function eie(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,t2&&(n=n.replace(/\//g,"\\")),n}s(eie,"uriToFsPath");function tie(t,e){let n=e?qht:U4e,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=wm,r+=wm),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:U4e(c,!1,!1)),r}s(tie,"_asFormatted");function H4e(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+H4e(t.substr(3)):t}}s(H4e,"decodeURIComponentGraceful");var q4e=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function wU(t){return t.match(q4e)?t.replace(q4e,e=>H4e(e)):t}s(wU,"percentDecode");var _m=class t{constructor(e){this.uri=e;this._uri=gv.parse(Bl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new F1({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return Q4e(this.uri)}get extension(){return O4e(this.uri)}toUri(){return this._uri}};f();f();var Xf=class t{constructor(e){this.edits=e;let n=-1;for(let r of e){if(!(r.replaceRange.start>=n))throw new yr(`Edits must be disjoint and sorted. Found ${r} after ${n}`);n=r.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Ka.fromJson))}static from(e){let n=e.map(i=>new Ka(Rt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return n.reverse(),new t(n)}static single(e,n){return new t([new Ka(e,n)])}normalize(){let e=[],n;for(let r of this.edits)r.newText.length===0&&r.replaceRange.length===0||(n&&n.replaceRange.endExclusive===r.replaceRange.start?n=new Ka(n.replaceRange.join(r.replaceRange),n.newText+r.newText):(n&&e.push(n),n=r));return n&&e.push(n),new t(e)}normalizeEOL(e){return new t(this.edits.map(n=>n.normalizeEOL(e)))}isNoop(e){return this.edits.every(n=>n.isNoop(e))}toString(){return`[${this.edits.map(n=>n.toString()).join(", ")}]`}apply(e){let n=[],r=0;for(let i of this.edits)n.push(e.substring(r,i.replaceRange.start)),n.push(i.newText),r=i.replaceRange.endExclusive;return n.push(e.substring(r)),n.join("")}compose(e){return Wht(this,e)}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(new Ka(Rt.ofStartAndLength(i.replaceRange.start+r,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),r+=i.newText.length-i.replaceRange.length;return new t(n)}getNewTextRanges(){let e=[],n=0;for(let r of this.edits)e.push(Rt.ofStartAndLength(r.replaceRange.start+n,r.newText.length)),n+=r.newText.length-r.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)a?l.replaceRange.intersects(a.replaceRange)?i++:l.replaceRange.start<a.replaceRange.start?(n.push(new Ka(l.replaceRange.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.replaceRange.length):(n.push(new Ka(l.replaceRange.delta(o),l.newText)),i++);else break}return new t(n)}removeCommonSuffixPrefix(e){let n=[];for(let r of this.edits){let i=r.removeCommonSuffixPrefix(e);i.isEmpty||n.push(i)}return new t(n)}applyToOffset(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return r.replaceRange.start+n;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRange(e){return new Rt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRangeOrUndefined(e){let n=this.applyToOffsetOrUndefined(e.start);if(n===void 0)return;let r=this.applyToOffsetOrUndefined(e.endExclusive);if(r!==void 0)return new Rt(n,r)}applyInverseToOffset(e){let n=0;for(let r of this.edits){let i=r.newText.length;if(r.replaceRange.start<=e-n){if(e-n<r.replaceRange.start+i)return r.replaceRange.start;n+=i-r.replaceRange.length}else break}return e-n}},Ka=class t{constructor(e,n){this.replaceRange=e;this.newText=n}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Rt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let n=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),r=V8(n,this.newText),i=Math.min(n.length-r,this.newText.length-r,u5(n,this.newText)),o=new Rt(this.replaceRange.start+r,this.replaceRange.endExclusive-i),a=this.newText.substring(r,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let n=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,n)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function Wht(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;n.shift(),r.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.replaceRange.length}if(!l)r.push(new Ka(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(l.replaceRange.start+a);d>0&&(u=l.newText.slice(0,d));let p=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new Ka(Rt.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-p));n.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Rt(Math.min(l.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);r.push(new Ka(h,m))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return new Xf(r).normalize()}s(Wht,"joinEdits");f();f();var j4e=-1;function h5(){return j4e!==-1?j4e:Date.now()}s(h5,"now");function V4e(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(V4e,"lineRangeDistance");f();var g5=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,n){let r=e.edits.map(i=>new q1(n.getTransformer().getRange(i.range),i.newText));return new t(r)}toEdit(e){let n=this.edits.map(r=>Ls.replace(e.getTransformer().getOffsetRange(r.range),r.newText));return ys.create(n)}mapEdits(e){return new t(this.edits.map(e))}},q1=class t{constructor(e,n){this.range=e;this.newText=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new yr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.newText,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}static fromSingleEdit(e,n){return new t(n.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.newText+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}toSingleEdit(e){let r=e.getTransformer().getOffsetRange(this.range);return Ls.replace(r,this.newText)}};var No=class t{constructor(e){this.edits=e;Nl(cv(e,(n,r)=>n.lineRange.endLineNumberExclusive<=r.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(n=>Sm.deserialize(n)))}static fromEdit(e){let n=g5.fromEdit(e.edit,e.base);return t.fromTextEdit(n,e.base)}static fromTextEdit(e,n){let r=e.edits,i=[],o=[];for(let a=0;a<r.length;a++){let l=r[a],c=a+1<r.length?r[a+1]:void 0;if(o.push(l),c&&c.range.startLineNumber===l.range.endLineNumber)continue;let u=q1.joinEdits(o,n);o.length=0;let d=Sm.fromSingleTextEdit(u,n);i.push(d)}return new t(i)}static createFromUnsorted(e){let n=e.slice();return n.sort(C0(r=>r.lineRange.startLineNumber,x0)),new t(n)}isEmpty(){return this.edits.length===0}toEdit(e){let n=[];for(let r of this.edits){let i=r.toSingleEdit(e);n.push(i)}return ys.create(n)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],n=0;for(let r of this.edits)e.push(Yt.ofLength(r.lineRange.startLineNumber+n,r.newLines.length)),n+=r.newLines.length-r.lineRange.length;return e}mapLineNumber(e){let n=0;for(let r of this.edits){if(r.lineRange.endLineNumberExclusive>e)break;n+=r.newLines.length-r.lineRange.length}return e+n}mapLineRange(e){return new Yt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,n){return this.inverse(n).mapLineRange(e)}touches(e){return this.edits.some(n=>e.edits.some(r=>n.lineRange.intersect(r.lineRange)))}rebase(e){return new t(this.edits.map(n=>new Sm(e.mapLineRange(n.lineRange),n.newLines)))}humanReadablePatch(e){let n=[];function r(l,c,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=l===-1?"   ":l.toString().padStart(3," "),h=c===-1?"   ":c.toString().padStart(3," ");n.push(`${p} ${m} ${h} ${d}`)}s(r,"pushLine");function i(){n.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let l of WS(this.edits,(c,u)=>V4e(c.lineRange,u.lineRange)<=5)){a?a=!1:i();let c=l[0].lineRange.startLineNumber-2;for(let u of l){for(let m=Math.max(1,c);m<u.lineRange.startLineNumber;m++)r(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];r(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];r(-1,d.startLineNumber+o+m,"added",h)}c=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=c;u<=Math.min(c+2,e.length);u++)r(u,u+o,"unmodified",e[u-1])}return n.join(`
`)}apply(e){let n=[],r=0;for(let i of this.edits){for(;r<i.lineRange.startLineNumber-1;)n.push(e[r]),r++;for(let o of i.newLines)n.push(o);r=i.lineRange.endLineNumberExclusive-1}for(;r<e.length;)n.push(e[r]),r++;return n}inverse(e){let n=this.getNewLineRanges();return new t(this.edits.map((r,i)=>new Sm(n[i],e.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1))))}},Sm=class t{constructor(e,n){this.lineRange=e;this.newLines=n}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Yt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,n){let r=Cg(e.newText),i=e.range.startLineNumber,o=n.getValueOfRange(zt.fromPositions(new ir(e.range.startLineNumber,1),e.range.getStartPosition()));r[0]=o+r[0];let a=e.range.endLineNumber+1,l=n.getTransformer().getLineLength(e.range.endLineNumber)+1,c=n.getValueOfRange(zt.fromPositions(e.range.getEndPosition(),new ir(e.range.endLineNumber,l)));r[r.length-1]=r[r.length-1]+c;let u=e.range.startColumn===n.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&r[0].length===o.length&&(i++,r.shift()),r.length>0&&i<a&&d&&r[r.length-1].length===c.length&&(a--,r.pop()),new t(new Yt(i,a),r)}toLineEdit(){return new No([this])}toSingleTextEdit(e){if(this.newLines.length===0){let n=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===n.lineCount+2){let r;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;r=new ir(o,a)}else r=new ir(1,1);let i=n.addToPosition(new ir(1,1));return new q1(zt.fromPositions(r,i),"")}else return new q1(new zt(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let n,r,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(n=o-1,r=e.getTransformer().getLineLength(n)+1,i=this.newLines.map(a=>`
`+a).join("")):(n=o,r=1,i=this.newLines.map(a=>a+`
`).join("")),new q1(zt.fromPositions(new ir(n,r)),i)}else{let n=this.lineRange.endLineNumberExclusive-1,r=e.getTransformer().getLineLength(n)+1,i=new zt(this.lineRange.startLineNumber,1,n,r),o=this.newLines.join(`
`);return new q1(i,o)}}toSingleEdit(e){let n=this.toSingleTextEdit(e),r=e.getTransformer().getOffsetRange(n.range);return Ls.replace(r,n.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let n=this.lineRange.startLineNumber,r=this.lineRange.endLineNumberExclusive,i=0;for(;n<r&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(n);)n++,i++;let o=0;for(;n<r&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(r-1);)r--,o++;return i===0&&o===0?this:new t(new Yt(n,r),this.newLines.slice(i,this.newLines.length-o))}},Ght;(e=>{function t(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="number"&&typeof n[1]=="number"&&Array.isArray(n[2])&&n[2].every(r=>typeof r=="string")}e.is=t,s(t,"is")})(Ght||={});var Eg=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedLineEdit")}static fromEdit(e){let n=No.fromEdit(e);return new t(e.base,n)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Vc(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(r=>!r.lineRange.isEmpty||r.newLines.length>0,"isNotEmptyEdit"),n=this.edit.edits.map(r=>r.removeCommonSuffixPrefixLines(this.base)).filter(r=>e(r));return new t(this.base,new No(n))}};var ys=class t{constructor(e){this.edits=e;Nl(cv(e,(n,r)=>n.range.endExclusive<=r.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(n=>Ls.deserialize(n)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,n){return new t([Ls.replace(e,n)])}static insert(e,n){return new t([Ls.insert(e,n)])}static fromOffsetEdit(e){return new t(e.edits.map(n=>Ls.replace(n.replaceRange,n.newText)))}static compose(e){let n;for(let r of e)n===void 0?n=r:n=n.compose(r);return n??t.empty}static trySwap(e,n){let r=e.inverse((a,l)=>" ".repeat(l-a)),i=n.tryRebase(r);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Xf(this.edits.map(e=>new Ka(e.range,e.newText)))}compose(e){return Hht(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let n="",r=0;for(let i of this.edits)n+=e.substring(r,i.range.start),n+=i.newText,r=i.range.endExclusive;return n+=e.substring(r),n}normalize(){let e=[],n;for(let r of this.edits)if(!(r.newText.length===0&&r.range.length===0))if(n&&n.range.endExclusive===r.range.start){let i=n.data?.merge(r.data)??void 0;n=Ls.replaceWithData(n.range.join(r.range),n.newText+r.newText,i)}else n&&e.push(n),n=r;return n&&e.push(n),new t(e)}normalizeOnSource(e){let n=this.apply(e),i=Ls.replace(Rt.ofLength(e.length),n).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Ls.replaceWithData(Rt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new _U(i)}if(this.edits.length!==e.arrayLength)throw w8(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let n=[],r=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=r[o];n.push(a);for(let l=o;l<r.length;++l){let c=a.newText.length-a.range.length,u=r[l];r[l]=Ls.replaceWithData(Rt.ofStartAndLength(u.range.start+c,u.range.length),u.newText,u.data)}}return new _U(n)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let n=this.toOffsetEdit(),r=n.applyInverseToOffset(e.start),i=n.applyInverseToOffset(e.endExclusive);return new Rt(r,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let n=0;n<this.edits.length;++n)if(!this.edits[n].equals(e.edits[n]))return!1;return!0}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(Ls.replace(Rt.ofStartAndLength(i.range.start+r,i.newText.length),e(i.range.start,i.range.endExclusive))),r+=i.newText.length-i.range.length;return new t(n)}inverseOnString(e){return this.inverse((n,r)=>e.substring(n,r))}mapData(e){return t.create(this.edits.map(n=>n.mapData(e)))}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)if(!a)n.push(Ls.replace(l.range.delta(o),l.newText)),i++;else{if(l.range.intersectsOrTouches(a.range))return;l.range.start<a.range.start?(n.push(Ls.replace(l.range.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.range.length)}else break}return new t(n)}};function Hht(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;n.shift(),r.push(u),i+=u.newText.length-u.range.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.range.start+i>o.range.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.range.length}if(!l)r.push(Ls.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-l.range.start;u>0&&r.push(Ls.replaceWithData(Rt.emptyAt(l.range.start),l.newText.slice(0,u),l.data));let d=c.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Ls.replaceWithData(Rt.emptyAt(c.range.endExclusive),c.newText.slice(-d),c.data);n.unshift(m),i-=m.newText.length-m.range.length}let p=new Rt(Math.min(l.range.start,o.range.start-a),o.range.endExclusive-i);r.push(Ls.replaceWithData(p,o.newText,o.data))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return ys.create(r).normalize()}s(Hht,"joinEdits");var Ls=class t{constructor(e,n,r){this.range=e;this.newText=n;this.data=r}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Rt(e[0],e[1]),e[2],void 0)}static replace(e,n){return new t(e,n,void 0)}static insert(e,n){return new t(new Rt(e,e),n,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,n,r){return new t(e,n,r)}static insertWithData(e,n,r){return new t(new Rt(e,e),n,r)}static deleteWithData(e,n){return new t(e,"",n)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return ys.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let n=this.range.substring(e),r=jht(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaStart(r),this.newText.substring(r),this.data)}removeCommonSuffix(e){let n=this.range.substring(e),r=Vht(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaEnd(-r),this.newText.substring(0,this.newText.length-r),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function jht(t,e){let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;return n}s(jht,"commonPrefixLength");function Vht(t,e){let n=0;for(;n<t.length&&n<e.length&&t[t.length-1-n]===e[e.length-1-n];)n++;return n}s(Vht,"commonSuffixLength");var Vc=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return Ru(()=>null.base.equals(this.base.apply(e))),Ru(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return Eg.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},_U=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return ys.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new Ig(this.edits.map(e=>e.toEdit()))}},Ig=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return ys.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let n=e,r=[];for(let i of this.edits){let o=ys.trySwap(n,i);if(!o)return;r.push(o.e1),n=o.e2}return{edits:new t(r),editLast:n}}mapData(e){return new t(this.edits.map(n=>n.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(n=>ys.deserialize(n)))}toHumanReadablePatch(e){let n=e,r=[];for(let i of this.edits){let o=No.fromEdit(new Vc(n,i));r.push(o.humanReadablePatch(n.getLines())),n=n.apply(i)}return r.join(`
---
`)}};var Av=class extends vg{constructor(n,r=!1){super();this._openDocuments=Tm(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this._started=!1;this.ctx=n,this._started=!1,r||this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let n=this.ctx.get(kn);for(let r of n.getTextDocumentsUnsafe())r&&this.addLspDocument(r.uri,r.clientLanguageId,r.getText());n.onDidOpenTextDocument(async r=>{this.addLspDocument(r.document.uri,r.document.languageId,r.document.text)}),n.onDidCloseTextDocument(async r=>{this.removeClosedLspDocument(r.document.uri)}),n.onDidChangeTextDocument(async r=>{this.onDidChangeLspDocument(r.document.uri,r.contentChanges)})}addLspDocument(n,r,i){let o=_m.create(n);return this.addDocument({id:o,initialValue:i,languageId:ZI.create(r)},void 0)}onDidChangeLspDocument(n,r){let i=_m.create(n),o=this._documents.get(i);o&&o.applyLspContentChanges(r)}onUserPositionChange(n,r){let i=_m.create(n),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(r)}removeClosedLspDocument(n){let r=_m.create(n);this._documents.get(r)?.dispose()}addDocument(n,r=void 0){let i=this._documents.get(n.id);if(i)return i;let o=new nie(n.id,new Fl(n.initialValue??""),[],n.languageId??ZI.PlainText,()=>{this._documents.delete(n.id);let a=this._openDocuments.get(),l=a.filter(c=>c.id!==o.id);l.length!==a.length&&this._openDocuments.set(l,r,{added:[],removed:[o]})},n.workspaceRoot);return this._documents.set(n.id,o),this._openDocuments.set([...this._openDocuments.get(),o],r,{added:[o],removed:[]}),o}async getDocument(n){if(await this.ctx.get(kn).getTextDocument(n))return this._documents.get(n)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let n of this._documents.values())n.dispose();this._documents.clear()}getWorkspaceRoot(n){return this._documents.get(n)?.workspaceRoot}},nie=class extends xU{static{s(this,"MutableObservableLspDocument")}constructor(e,n,r,i,o,a){super(e,n,r,i,o,a)}applyLspContentChanges(e){let n=this.editFromLspContentChanges(e);this.applyEdit(n.compose(),void 0)}updateSelectionFromLspPosition(e){let n=this.value.get().getTransformer().getOffset(new ir(e.lineNumber+1,e.column+1));this.updateSelection([new Rt(n,n)])}editFromLspContentChanges(e){return new Ig(e.map(r=>this.editFromLspContentChange(r)))}editFromLspContentChange(e){if($4e.TextDocumentContentChangeEvent.isIncremental(e)){let n=this.value.get().getTransformer(),r=n.getOffset(new ir(e.range.start.line+1,e.range.start.character+1)),i=n.getOffset(new ir(e.range.end.line+1,e.range.end.character+1));if(r>i)throw new yr(`Invalid range: [${r}, ${i}) from ${JSON.stringify(e.range)}`);return ys.replace(new Rt(r,i),e.text)}throw new Error("Full replacement edits are not supported")}};function z4e(t,e,n){return t.get(r2).safeStartIfApplicable(e,n)}s(z4e,"startRecentEditsPromptFeatureIfApplicable");var Y4e={maxFiles:5,maxEditsPerFile:5,diffContextLines:3,editMergeLineDistance:3,maxCharsPerEdit:2e3,debounceTimeout:500,summarizationFormat:"diff",removeDeletedLines:!1,insertionsBeforeDeletions:!1,appendNoReplyMarker:!1,activeDocDistanceLimitFromCursor:100,maxLinesPerEdit:10},r2=class{constructor(e){this.ctx=e;this._started=!1;this._config=Y4e}static{s(this,"RecentEditsPromptFeature")}safeStartIfApplicable(e,n){this.shouldStart(e,n)&&this.safeStart(e,n)}get config(){return this._config}retrieveConfig(e,n){let r=Nr(this.ctx,mt.RecentEditsRemoveDeletedLines)??n.recentEditsRemoveDeletedLines(e),i=Nr(this.ctx,mt.InsertionsBeforeDeletions)??n.recentEditsInsertionsBeforeDeletions(e),o=Nr(this.ctx,mt.RecentEditsAppendNoReplyMarker)??n.recentEditsAppendNoReplyMarker(e),a=Nr(this.ctx,mt.RecentEditsActiveDocDistanceLimitFromCursor)??n.recentEditsActiveDocDistanceLimitFromCursor(e),l=Nr(this.ctx,mt.RecentEditsSummarizationFormat)??n.recentEditsSummarizationFormat(e),c=Nr(this.ctx,mt.RecentEditsMaxLinesPerEdit)??n.recentEditsMaxLinesPerEdit(e),u=Nr(this.ctx,mt.RecentEditsEditCount)??n.recentEditsEditCount(e),d=Nr(this.ctx,mt.RecentEditsMaxFiles)??n.recentEditsMaxFiles(e),p=Nr(this.ctx,mt.RecentEditsContextLines)??n.recentEditsContextLines(e),m=Nr(this.ctx,mt.RecentEditsEditMergeLineDistance)??n.recentEditsEditMergeLineDistance(e),h=Nr(this.ctx,mt.RecentEditsMaxCharsPerEdit)??n.recentEditsMaxCharsPerEdit(e),g=Nr(this.ctx,mt.RecentEditsDebounceTimeout)??n.recentEditsDebounceTimeout(e);return{maxFiles:d,maxEditsPerFile:u,diffContextLines:p,editMergeLineDistance:m,maxCharsPerEdit:h,debounceTimeout:g,summarizationFormat:l,removeDeletedLines:r,insertionsBeforeDeletions:i,appendNoReplyMarker:o,activeDocDistanceLimitFromCursor:a,maxLinesPerEdit:c}}setConfig(e){this._config=e,this.ctx.get(Q1).setConfig(this._config)}shouldStart(e,n){return this._started?!1:rie(this.ctx,n,e)}safeStart(e,n){this._started||(this._started=!0,this.setConfig(this.retrieveConfig(e,n)),this.ctx.get(Av).start(),this.ctx.get(Q1).start())}};function K4e(t,e){let n=new Av(t,e);t.set(Av,n),t.set(Q1,new Q1(n,Y4e,e)),t.set(r2,new r2(t))}s(K4e,"setupRecentEditsPromptFeature");function rie(t,e,n){return Nr(t,mt.RecentEditsInPrompt)??e.recentEditsInPrompt(n)}s(rie,"isRecentEditsActive");var J4e=s((t,e)=>{let n=t.get(Nt);return rie(t,n,e)},"recentEditsPredicate");function $ht(t,e=!1,n=void 0,r){if(e&&(n===void 0||r===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-n)<=r||Math.abs(o-n)<=r))}s($ht,"editIsTooCloseToCursor");var X4e=s((t,e)=>{let[n,r]=e.useState();return e.useData(xd,i=>{if(!i.document)return;let o=i.telemetryData,a=t.ctx.get(Nt);z4e(t.ctx,o,a);let l=t.ctx.get(r2).config,c=t.ctx.get(Q1),u=c.getRecentEdits(),d=new Set,p=t.ctx.get(kn),m=[];for(let g=u.length-1;g>=0&&!(m.length>=l.maxEditsPerFile);g--){let y=!d.has(u[g].file);if(d.size+(y?1:0)>l.maxFiles)break;let b=u[g],E=b.file===i.document?.uri,_=E?i.position.line:void 0;if($ht(b,E,_,l.activeDocDistanceLimitFromCursor))continue;let D=c.getEditSummary(b);if(D){d.add(b.file);let N=p.getRelativePath({uri:b.file});m.unshift(Y8(`File: ${N}`)+Y8(D))}}if(m.length===0){r(void 0);return}let h=Y8("These are recently edited files. Do not suggest code that has been deleted.")+m.join("")+Y8("End of recent edits");r(h)}),n?Gr(dl,{children:n}):void 0},"RecentEdits");f();f();f();f();var iie=new Jn;function Z4e(t){return[...t].sort((e,n)=>{let r=iie.get(e.uri)??0;return(iie.get(n.uri)??0)-r})}s(Z4e,"sortByAccessTimes");var eRe=s(t=>t.get(kn).onDidFocusTextDocument(e=>{e&&iie.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var SU=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,n,r,i){let o=new Map,a=0;for(let l of e)if(!(a+l.getText().length>W1.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&n.startsWith("file:")&&l.uri!==n&&RU(r,l.detectedLanguageId)&&(o.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),a+=l.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,n,r){let i=new Map,o=new Map;return i=await this.truncateDocs(Z4e(await this.docManager.textDocuments()),e,n,r),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function tRe(t,e,n){return async function(...r){return await Promise.race([t.apply(this,r),new Promise(i=>{setTimeout(i,e,n)})])}}s(tRe,"shortCircuit");f();function Yht(...t){return JSON.stringify(t,(e,n)=>typeof n=="object"?n:String(n))}s(Yht,"defaultHash");function oie(t,e={}){let{hash:n=Yht,cache:r=new Map}=e;return function(...i){let o=n.apply(this,i);if(r.has(o))return r.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(l=>{throw r.delete(o),l})),r.set(o,a),a}}s(oie,"memoize");var nRe={entries:[],traits:[]},kU={entries:new Map,traits:[]},sie=class extends Jn{constructor(n,r=2*60*1e3){super(n);this.defaultEvictionTimeMs=r;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(n){let r=this._cacheTimestamps.get(n);return r?++r.retryCount:(this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),0)}has(n){return this.isValid(n)?super.has(n):(this.deleteExpiredEntry(n),!1)}get(n){let r=super.get(n);if(this.isValid(n))return r;this.deleteExpiredEntry(n)}set(n,r){let i=super.set(n,r);return this.isValid(n)||this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(n){let r=this._cacheTimestamps.get(n);return r!==void 0&&Date.now()-r.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(n){this._cacheTimestamps.has(n)&&this._cacheTimestamps.delete(n),super.delete(n)}},fl=new _t("relatedFiles"),Kht=1e3,BU=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},i2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,n,r){let i=await this.getRelatedFilesResponse(e,n,r);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let l=o.entries.get(a.type);l||(l=new Map,o.entries.set(a.type,l));for(let c of a.uris)try{fl.debug(this.context,`Processing ${c}`);let u=await this.getFileContent(c);if(!u||u.length==0){fl.debug(this.context,`Skip ${c} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(c,u)){fl.debug(this.context,`Skip ${c} due content exclusion.`);continue}u=t.dropBOM(u),l.set(c,u)}catch(u){fl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(go).readFileString(e)}catch(n){fl.debug(this.context,n)}}async isContentExcluded(e,n){try{return(await this.context.get(jc).evaluate(e,n)).isBlocked}catch(r){fl.exception(this.context,r,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},Jht=3,rRe=new sie(Kht);async function iRe(t,e,n,r,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,n,r)}catch(c){fl.exception(t,c,".getRelatedFiles"),a=void 0}a===void 0&&(rRe.bumpRetryCount(e.uri)>=Jht?a=kU:a=void 0);let l=performance.now()-o;if(fl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(c=>c.size).reduce((c,u)=>c+u,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),a===void 0)throw new BU;return a}s(iRe,"getRelatedFiles");var aie=oie(iRe,{cache:rRe,hash:s((t,e,n,r,i)=>`${e.uri}`,"hash")});aie=tRe(aie,200,kU);async function DU(t,e,n,r,i,o=!1){let a=t.get(i2),l=kU;try{let c={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};l=o?await iRe(t,c,n,r,a):await aie(t,c,n,r,a)}catch(c){l=kU,c instanceof BU&&kt(t,"getRelatedFilesList",n)}return fl.debug(t,l!=null?`Fetched following traits ${l.traits.map(c=>`{${c.name} : ${c.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}s(DU,"getRelatedFilesAndTraits");function RU(t,e){return jB(t)===jB(e)}s(RU,"considerNeighborFile");var W1=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,n,r,i,o,a,l){let c=e.get(kn);t.instance===void 0&&(t.instance=new SU(c));let u={...await t.instance.getNeighborFiles(n,r,t.MAX_NEIGHBOR_FILES),traits:[]};if(Xht(e,i))return u;let d=await c.getTextDocument({uri:n});if(!d)return fl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${n}`),u;let p=c.getWorkspaceFolder(d);if(!p)return fl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${n} is not under the workspace folder`),u;let m=await DU(e,d,i,o,a,l);return m.entries.size===0?(fl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${n}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((v,b)=>{let E=t.getRelativePath(b,p.uri);if(!E||u.docs.has(b))return;let _={relativePath:E,uri:b,source:v};y.unshift(_),u.docs.set(b,_)}),y.length>0&&u.neighborSource.set(g,y.map(v=>v.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,n){let r=n.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(r)?e.toString().slice(r.length):t.basename(e)}};function Xht(t,e){return t.get(Nt).excludeRelatedFiles(e)||Nr(t,mt.ExcludeRelatedFiles)}s(Xht,"isExcludeRelatedFilesActive");function oRe(t,e){return t.get(Nt).includeNeighboringFiles(e)||Nr(t,mt.IncludeNeighboringFiles)}s(oRe,"isIncludeNeighborFilesActive");f();f();var Zht={WorkspaceDocumentProvider:{UpdateInterval:500,Laziness:.5,MaxSupport:1e3,ProviderWeights:{recentDocumentProvider:1,relatedFilesShim:.8,fileDirectoryDocumentProvider:.2}},RecentDocumentProvider:{DebounceInterval:50,MaxClosedDocs:20,DistributionHalflife:1e3*60*5/Math.log(2),DocumentActivityWeights:{Edit:1,Focus:1,Open:1}},FileDirectoryDocumentProvider:{MaxDirectorySize:200,MaxResults:100,Decay:.5,CacheTime:1e3*60,InvalidCacheTime:1e3*60*60*24}},PU=class{constructor(e){this.ctx=e;this.params=Zht}static{s(this,"WorkspaceContextConfig")}get(e){let n=e(this.params);return n&&typeof n=="object"?JSON.parse(JSON.stringify(n)):n}getProviderWeight(e){return this.get(n=>n.WorkspaceDocumentProvider.ProviderWeights[e])}};f();f();f();function lie(t){let e=new Map;for(let{uri:n,weight:r}of t)e.set(n,(e.get(n)??0)+r);return e}s(lie,"asDistribution");function sRe(t){let e=Array.from(t.values()).reduce((r,i)=>r+Math.max(i,0),0),n=new Map;if(e>0){for(let[r,i]of t)n.set(r,Math.max(i,0)/e);return n}}s(sRe,"normalizeDistribution");var eD=class{constructor(e,n){this.ctx=e;this.config=n;this.id="workspaceDocumentProvider";this.distribution=void 0;this._documents=[];this.providers=new Map;this.interval=void 0;this._similarFiles=new Map;this.updateId=0;this.lastUpdateTime=performance.now();let r=this.config.get(i=>i.WorkspaceDocumentProvider.UpdateInterval);if(r<=0){Wn.error(this.ctx,"Workspace document provider update interval is 0, skipping updates");return}this.interval=setInterval(()=>{let i=new sr.CancellationTokenSource;$I(r).then(()=>{i.cancel(),i.dispose()}),this.forceUpdate(i.token,!0).catch(o=>{Wn.error(this.ctx,"Error resolving workspace documents:",o)})},r)}static{s(this,"WorkspaceDocumentProvider")}async forceUpdate(e,n=!1){if(this.providers.size===0)return;let r=performance.now(),i={updateId:this.updateId++,intervalTime:r-this.lastUpdateTime,resolveTime:0,updateTime:void 0,similarFilesTime:void 0,providerStatistics:[],wasCancelled:!1};this.lastUpdateTime=r;let{result:o,statistics:a}=await this.resolveAllProviders(this.documents,e),l=performance.now();if(i.resolveTime=l-r,i.providerStatistics=a,e?.isCancellationRequested&&!n){i.wasCancelled=!0,this.ctx.get(Ql).pushTelemetry(i);return}this.updateDocuments(o);let c=performance.now();i.updateTime=c-l,await this.updateSimilarFiles(),i.similarFilesTime=performance.now()-c,this.ctx.get(Ql).pushTelemetry(i)}get documents(){return[...this._documents]}getDocuments(){return Promise.resolve(this.documents)}getSimilarFiles(e){let n=Array.from(this._similarFiles.entries()).filter(([r])=>r!==e);return{docs:new Map(n)}}registerDocumentProvider(e){if(this.providers.has(e.id))throw new Error(`Document provider with id ${e.id} already registered`);let n=this.config.getProviderWeight(e.id);if(n===void 0)throw new Error(`Document provider ${e.id} not found in config`);this.providers.set(e.id,{provider:e,weight:n})}async resolveAllProviders(e,n){let r=new Map;for(let[l,{provider:c}]of this.providers.entries()){let u=c.getDocuments(e,n);r.set(l,u)}let i=await HO(r,n),o=new Map,a=[];for(let[l,c]of i.entries()){let u={id:l,status:c.status,resolutionTime:c.resolutionTime,resolvedItems:0,normalizedItems:0};if(a.push(u),c.status==="error"){Wn.error(this.ctx,`Error resolving workspace documents from provider ${l}:`,c.reason);continue}if((c.status==="none"||c.status==="partial")&&Wn.info(this.ctx,`Document provider ${l} exceeded time budget`),c.status==="partial"||c.status==="full"){u.resolvedItems=c.value.length;let d=sRe(lie(c.value));u.normalizedItems=d?d.size:0,d?o.set(l,d):Wn.info(this.ctx,`Document provider ${l} normalized to an empty distribution`)}}return{result:o,statistics:a}}updateDocuments(e){let n=new Map,r=0;for(let[a,l]of e.entries()){let c=!1,u=this.providers.get(a).weight??0;for(let[d,p]of l){let m=BF(d);if(m!==void 0){c=!0;let h=n.get(m)??0;n.set(m,h+p*u)}}c&&(r+=u)}if(r<=0){Wn.info(this.ctx,"No documents proposed by any workspace document provider");return}if(this.distribution!==void 0){let a=this.config.get(l=>l.WorkspaceDocumentProvider.Laziness);this.distribution.size==0&&(a=0);for(let[l,c]of this.distribution){let u=n.get(l)??0;n.set(l,u+c*(r*a))}}let i=this.config.get(a=>a.WorkspaceDocumentProvider.MaxSupport),o=Array.from(n.entries()).sort((a,l)=>l[1]-a[1]).slice(0,i).map(([a,l])=>({uri:a,weight:l}));this.distribution=sRe(lie(o)),this._documents=Array.from(this.distribution.entries()).map(([a,l])=>({uri:a,weight:l}))}async updateSimilarFiles(){let e=new Map,n=this.ctx.get(Cr);for(let r of this._documents){let i=await n.getOrReadTextDocument(r);if(i.status!=="valid")continue;let o={relativePath:n.getRelativePath(r),uri:r.uri,source:egt(i.document.getText()),languageId:i.document.detectedLanguageId};if(e.set(r.uri,o),e.size>=WB.maxNumberOfFiles)break}this._similarFiles=e}dispose(){this.interval&&(clearInterval(this.interval),this.interval=void 0)}};function egt(t){return t.charCodeAt(0)===65279?t.slice(1):t}s(egt,"dropBOM");var Ql=class{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new hg;this.telemetryQueue=new Jn(20);let n=e.get(a0);this.tokenEventDisposable=n.onToken(()=>{this.maybeStart()}),this.maybeStart()}static{s(this,"WorkspaceContextCoordinator")}pushTelemetry(e){this.telemetryQueue.set(e.updateId,e)}popTelemetry(){let e=Array.from(this.telemetryQueue.values());return this.telemetryQueue.clear(),e}async maybeStart(){if(this.didStart||this.didDispose)return;let e=Nr(this.ctx,mt.UseWorkspaceContextCoordinator);if(e===void 0)try{let n=await this.ctx.get(Nt).updateExPValuesAndAssignments();e=this.isEnabled(n)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}isEnabled(e){return Nr(this.ctx,mt.UseWorkspaceContextCoordinator)??this.ctx.get(Nt).workspaceContextCoordinator(e)}getFeature(){if(this.isActive())return{config:this.config,documentProvider:this.wdp}}async getInitializedFeature(){return await this.deferredStart.promise,this.getFeature()}start(){this.didStart=!0,this.config=new PU(this.ctx),this.wdp=new eD(this.ctx,this.config),this.deferredStart.resolve()}dispose(){this.isActive()?this.wdp.dispose():this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}};f();f();f();f();var aRe=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState([]);e.useData(xd,async c=>{c.document.uri!==n?.uri&&o([]),r(c.document);let u=W1.defaultEmptyResult();if(!c.turnOffSimilarFiles){let p=t.ctx.get(Ql);p.isEnabled(c.telemetryData)?p.isActive()?u=(await p.getInitializedFeature()).documentProvider.getSimilarFiles(c.document.uri):p.maybeStart():u=await W1.getNeighborFilesAndTraits(t.ctx,c.document.uri,c.document.detectedLanguageId,c.telemetryData,c.cancellationToken,c.data)}let d=await a(c.telemetryData,c.document,c,u);o(d)});async function a(c,u,d,p){let m=NU(t.ctx,c,u.detectedLanguageId);return(await l(m,c,u,d,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...OIe(g),score:g.score}))}s(a,"produceSimilarFiles");async function l(c,u,d,p,m){let h=c.similarFilesOptions||eU(t.ctx,u,d.detectedLanguageId),y=t.ctx.get(kn).getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:y,languageId:d.detectedLanguageId};return await zIe(v,Array.from(m.docs.values()),h)}return s(l,"findSimilarSnippets"),Gr(N1,{children:[...i.map((c,u)=>Gr(rgt,{snippet:c}))]})},"SimilarFiles"),rgt=s((t,e)=>Gr(o5,{children:[Gr(dl,{expElidableTextWeight:1,children:t.snippet.headline}),Gr(lv,{expElidableTextWeight:.99,children:t.snippet.snippet})]}),"SimilarFile");f();var lRe=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(xd,a=>{a.traits!==n&&r(a.traits);let l=jB(a.document.detectedLanguageId);l!==i&&o(l)}),!(!n||n.length===0||!i))return Gr(N1,{children:[Gr(dl,{expElidableTextWeight:1,children:`Consider this related information:
`}),...n.map(a=>Gr(dl,{source:a,expElidableTextWeight:.99,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");f();function cRe(t,e,n){let r=$O(n,"Trait");for(let o of r)igt(t,e,o.data,o.providerId);return r.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(cRe,"getTraitsFromContextItems");function igt(t,e,n,r){let i=t.get(Pl).getStatisticsForCompletion(e);n.forEach(o=>{i.addExpectations(r,[[o,"included"]])})}s(igt,"setupExpectationsForTraits");var ogt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function uRe(t,e,n,r,i,o){if(n.length>0){let a={};a.detectedLanguageId=r,a.languageId=i;for(let c of n){let u=ogt.get(c.name);u&&(a[u]=c.value)}let l=o.extendedBy(a,{});return kt(e,t,l)}}s(uRe,"ReportTraitsTelemetry");f();f();f();var LU=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let n=this.currentIndex;if(this.states[n]===void 0){let i=typeof e=="function"?e():e;this.states[n]=i}let r=s(i=>{let o=typeof i=="function"?i(this.states[n]):i;this.states[n]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[n],r]}hasChanged(){return this.stateChanged}},FU=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,n){this.consumers.push(r=>{if(e(r))return n(r)})}async updateData(e){if(this.consumers.length>0){let n=performance.now();for(let r of this.consumers)await r(e);this.measureUpdateTime(performance.now()-n)}}};var MU=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,n,r,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);o=this.virtualizeElement(e.component,n,r);let c=this.collectChildPaths(o);this.cleanupState(l,c)}else if(e.children){let l=[];for(let c=0;c<e.children.length;c++){let u=e.children[c];if(u){let d=this.reconcileNode(u,e.path,c,i);d!==void 0&&l.push(d)}}o.children=l}return o}virtualizeElement(e,n,r){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${n}[${r}]`,props:{value:e},component:e};if(sgt(e.type)){let i=e.type(e.props.children),o=n!=="$"?`[${r}]`:"",a=`${n}${o}.${i.type}`,l=i.children.map((c,u)=>this.virtualizeElement(c,a,u));return this.ensureUniqueKeys(l),{name:i.type,path:a,children:l.flat().filter(c=>c!==void 0),component:e}}return this.virtualizeFunctionComponent(n,r,e,e.type)}}virtualizeFunctionComponent(e,n,r,i){let o=r.props.key?`["${r.props.key}"]`:`[${n}]`,a=`${e}${o}.${i.name}`,l=new uie(this.getOrCreateLifecycleData(a)),c=i(r.props,l),p=(Array.isArray(c)?c:[c]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:r.props,children:p,component:r,lifecycle:l}}ensureUniqueKeys(e){let n=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&n.set(o,(n.get(o)||0)+1)}let r=Array.from(n.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(r.length>0)throw new Error(`Duplicate keys found: ${r.join(", ")}`)}collectChildPaths(e){let n=[];if(e?.children)for(let r of e.children)r&&(n.push(r.path),n.push(...this.collectChildPaths(r)));return n}cleanupState(e,n){for(let r of e)n.includes(r)||this.lifecycleData.delete(r)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new cie([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,n){if(!n)throw new Error("Can't pump data into undefined node.");await n.lifecycle?.dataHook.updateData(e);for(let r of n.children||[])await this.recursivelyPumpData(e,r)}},cie=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},uie=class{constructor(e){this.lifecycleData=e;this.stateHook=new LU(e.state),this.dataHook=new FU(n=>{e._updateTimeMs=n})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,n){this.dataHook.useData(e,n)}isRemountRequired(){return this.stateHook.hasChanged()}};function sgt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(sgt,"isFragmentFunction");var tD=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new MU(e)}snapshotNode(e,n){if(!e)return;if(n?.isCancellationRequested)return"cancelled";let r=[];for(let i of e.children??[]){let o=this.snapshotNode(i,n);if(o==="cancelled")return"cancelled";o!==void 0&&r.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:r,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let n=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!n)throw new Error("Invalid virtual prompt tree");let r=this.snapshotNode(n,e);return r==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:r,status:"ok"}}catch(n){return{snapshot:void 0,status:"error",error:n}}}createPipe(){return this.reconciler.createPipe()}};var Rm=class{static{s(this,"CompletionsPromptFactory")}};function QU(t,e){return new die(new fie(new pie(t,e)))}s(QU,"createCompletionsPromptFactory");var die=class extends Rm{constructor(n){super();this.delegate=n}static{s(this,"SequentialCompletionsPromptFactory")}prompt(n,r){return this.lastPromise=this.promptAsync(n,r),this.lastPromise}async promptAsync(n,r){if(await this.lastPromise,r?.isCancellationRequested)return A5;try{return await this.delegate.prompt(n,r)}catch{return mie}}},agt=1200,fie=class extends Rm{constructor(n){super();this.delegate=n}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(n,r){let i=new sr.CancellationTokenSource,o=i.token;return r?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(n,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(hRe)},agt)})])}};function xd(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(xd,"isCompletionRequestData");var pie=class extends Rm{constructor(n,r){super();this.ctx=n;this.renderer=new lU;this.virtualPrompt=r??new tD(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(n,r){try{return await this.createPromptUnsafe(n,r)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:n,completionState:r,telemetryData:i,promptOpts:o},a){let{maxPromptLength:l,suffixPercent:c,suffixMatchThreshold:u}=NU(this.ctx,i,r.textDocument.detectedLanguageId),d=await this.failFastPrompt(r.textDocument,r.position,c??0,a);if(d)return d;let p=performance.now(),{traits:m,codeSnippets:h,turnOffSimilarFiles:g,resolvedContextItems:y}=await this.resolveContext(n,r,i,a,o);if(await this.updateComponentData(r.textDocument,r.position,m,h,i,g,l??HB,a,o,u,o?.tokenizer),a?.isCancellationRequested)return A5;let v=this.virtualPrompt.snapshot(a),b=v.status;if(b==="cancelled")return A5;if(b==="error")return this.errorPrompt(v.error);let E=this.renderer.render(v.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:l??HB,suffixPercent:c??SM,separateContext:o?.separateContext??!1,elisionStrategy:this.ctx.get(Nt).completionsElisionStrategy(i),approximateElision:this.ctx.get(Nt).approximateElision(i),languageId:r.textDocument.detectedLanguageId},a);if(E.status==="cancelled")return A5;if(E.status==="error")return this.errorPrompt(E.error);let[_,k]=y5(E.prefix),D={...E,prefix:_},N;if(Ire(this.ctx,i)){let Z=I5e(E.metadata.componentStatistics);this.ctx.get(Pl).getStatisticsForCompletion(n).computeMatch(Z),N=w5e(this.ctx,n,y),Wn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(N)}'`)}let Q=performance.now();return this.resetIfEmpty(E),this.successPrompt(D,Q,p,k,N)}async updateComponentData(n,r,i,o,a,l,c,u,d={},p,m){let h=this.createRequestData(n,r,a,u,d,c,i,o,l,p,m);await this.pipe.pump(h)}async resolveContext(n,r,i,o,a={}){let l=[],c,u,d=!1;if(Ire(this.ctx,i)){l=await this.ctx.get(Yf).resolution(n);let{textDocument:p}=r,m=l.filter(_5e);lgt(this.ctx,p.detectedLanguageId,m,i)||(d=!0),c=cRe(this.ctx,n,m),uRe("contextProvider.traits",this.ctx,c,p.detectedLanguageId,p.detectedLanguageId,i),u=await O5e(this.ctx,n,m,p.detectedLanguageId)}return{traits:c,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:l}}async failFastPrompt(n,r,i,o){if(o?.isCancellationRequested)return A5;if((await this.ctx.get(jc).evaluate(n.uri,n.getText(),"UPDATE")).isBlocked)return mRe;if((i>0?n.getText().length:n.offsetAt(r))<fRe)return pRe}completionsPrompt(){return Gr(N1,{children:[Gr(Ure,{children:[Gr(u4e,{ctx:this.ctx,weight:.7,expElidableTextWeight:.9}),Gr(lRe,{weight:.6,expElidableTextWeight:.5}),Gr(q5e,{ctx:this.ctx,weight:.9,expElidableTextWeight:.7}),Gr(aRe,{ctx:this.ctx,weight:.8,expElidableTextWeight:.6}),Gr(c4e,{ctx:this.ctx,by:J4e,children:Gr(X4e,{ctx:this.ctx,weight:.99,expElidableTextWeight:.9})})]}),Gr($8,{weight:1,expElidableTextWeight:1})]})}createRequestData(n,r,i,o,a,l,c,u,d,p,m){return{document:n,position:r,telemetryData:i,cancellationToken:o,data:a.data,traits:c,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:l,tokenizer:m}}resetIfEmpty(n){n.prefix.length===0&&n.suffix.length===0&&this.reset()}successPrompt(n,r,i,o,a){return{type:"prompt",prompt:{prefix:n.prefix,prefixTokens:n.prefixTokens,suffix:n.suffix,suffixTokens:n.suffixTokens,context:n.context,isFimEnabled:n.suffix.length>0},computeTimeMs:r-i,trailingWs:o,neighborSource:new Map,metadata:n.metadata,contextProvidersTelemetry:a}}errorPrompt(n){return ba(this.ctx,n,"PromptComponents.CompletionsPromptFactory"),this.reset(),mie}reset(){this.virtualPrompt=new tD(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}};function lgt(t,e,n,r){let i=["cpp","c"];return oRe(t,r)||i.includes(e)||!n.some(a=>a.data.some(l=>l.type==="CodeSnippet"))}s(lgt,"similarFilesEnabled");async function dRe(t){try{await wee}catch(e){av(t,e,"initializeTokenizers")}}s(dRe,"waitForTokenizers");var fRe=10,pRe={type:"contextTooShort"},mRe={type:"copilotContentExclusion"},mie={type:"promptError"},A5={type:"promptCancelled"},hRe={type:"promptTimeout"};function y5(t){let e=t.split(`
`),n=e[e.length-1],r=n.length-n.trimEnd().length,i=t.slice(0,t.length-r),o=t.slice(i.length);return[n.length==r?i:t,o]}s(y5,"trimLastLine");function C5(t,e,n,r,i,o={}){let l=t.get(kn).findNotebook(n.textDocument),c=l?.getCellFor(n.textDocument);l&&c&&(n=ugt(n,l,c)),r.extendWithConfigProperties(t),r.sanitizeKeys();let u=t.get(Nt).enablePromptContextProxyField(r);return t.get(Rm).prompt({completionId:e,completionState:n,telemetryData:r,promptOpts:{...o,separateContext:u}},i)}s(C5,"extractPrompt");function cgt(t,e){let n=t.document.detectedLanguageId,r=t.document.getText();return n===e?r:aU(r,e)}s(cgt,"addNeighboringCellsToPrompt");function ugt(t,e,n){let i=e.getCells().filter(l=>l.index<n.index&&RU(n.document.detectedLanguageId,l.document.detectedLanguageId)),o=i.length>0?i.map(l=>cgt(l,n.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(ugt,"applyEditsForNotebook");function NU(t,e,n){let i=t.get(Nt).maxPromptCompletionTokens(e)-UO(t),o=M5e(e,n),a=eU(t,e,n),l={maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o},c=t.get(Nt).suffixPercent(e),u=t.get(Nt).suffixMatchThreshold(e);return c>0&&u>0&&(l={...l,suffixPercent:c,suffixMatchThreshold:u}),l}s(NU,"getPromptOptions");f();f();var gRe=2.98410452738298,ARe=-.838732736843507,yRe=1.50314646255716,CRe=-.237798634012662,OU={python:.314368072478742},xRe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var dgt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function fgt(t,e){let n=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),r=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(n),o=e.get(r);return o+(i-o)*(t-r)/(n-r)}s(fgt,"linearInterpolation");var x5=class{static{s(this,"Regressor")}constructor(e,n,r){this.name=e,this.coefficient=n,this.transformation=r||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},hie=class{constructor(e,n,r){this.link=dgt;if(this.intercept=e,this.coefficients=n,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),r)for(let i in r)this.logitsToQuantiles.set(r[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,n){let r=this.intercept;for(let i of this.coefficients){let o=n[i.name];if(o===void 0)return NaN;r+=i.contribution(o)}return this.link.link(r)}quantile(e,n){let r=this.predict(e,n);return fgt(r,this.logitsToQuantiles)}},vRe=new hie(gRe,[new x5("compCharLen",ARe,t=>Math.log(1+t)),new x5("meanLogProb",yRe),new x5("meanAlternativeLogProb",CRe)].concat(Object.entries(OU).map(t=>new x5(t[0],t[1]))),xRe);function bRe(t,e){let n={...e.measurements};return Object.keys(OU).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),vRe.predict(t,n)}s(bRe,"ghostTextScoreConfidence");function ERe(t,e){let n={...e.measurements};return Object.keys(OU).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),vRe.quantile(t,n)}s(ERe,"ghostTextScoreQuantile");f();f();var pgt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function UU(t){let e=t.slice();return e.reverse(),IRe(e)||IRe(e.filter(n=>n.trim().length>0))}s(UU,"isRepetitive");function IRe(t){let e=mgt(t);for(let n of pgt){if(t.length<n.last_tokens_to_consider)continue;if(n.last_tokens_to_consider-1-e[n.last_tokens_to_consider-1]<=n.max_token_sequence_length)return!0}return!1}s(IRe,"isRepeatedPattern");function mgt(t){let e=Array(t.length).fill(0);e[0]=-1;let n=-1;for(let r=1;r<t.length;r++){for(;n>=0&&t[n+1]!==t[r];)n=e[n];t[n+1]===t[r]&&n++,e[r]=n}return e}s(mgt,"kmp_prefix_function");function hgt(t,e,n,r){let i="}";try{i=VIe(e.detectedLanguageId)??"}"}catch{}return ggt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},n,r,i)}s(hgt,"maybeSnipCompletion");function ggt(t,e,n,r){let i=Agt(n),o=i.lines;if(o.length===1)return n;for(let a=1;a<o.length;a++){let l=!0,c=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let y=e.line+1+d+c;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")c++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===r))){l=!1;break}}if(l)return o.slice(0,a).join(i.newLineCharacter)}return n}s(ggt,"maybeSnipCompletionImpl");function Agt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(Agt,"splitByNewLine");function ygt(t,e,n,r){let i="",o=e.line+1,a=r?n.trim():n;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,r&&(i=i.trim()),i===a)return!0;o++}return!1}s(ygt,"matchesNextLine");function nD(t,e,n,r,i,o){if(UU(r.tokens)){let l=or.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),kt(t,"repetition.detected",l,1),o.info(t,"Filtered out repetitive solution");return}let a={...r};if(ygt(e,n,a.completionText,!i)){let l=or.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),kt(t,"completion.alreadyInDocument",l),kt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=hgt(t,e,n,a.completionText),a.completionText?a:void 0}s(nD,"postProcessChoiceInContext");function TRe(t,e,n){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(n.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let l of i){let c=n.completionText.indexOf(l,o+1);if(c>o)a++,o=c;else break}return a}}return 0}s(TRe,"checkSuffix");var SRe=Ve(fx());var fo=new _t("ghostText");async function RRe(t,e,n,r,i,o,a){fo.debug(t,`Getting ${o} from network`),n=n.extendedBy();let l=e.isCycling?3:1,c=n5(t,l),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:XIe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:l,temperature:c},p=Nr(t,mt.ModelAlwaysTerminatesSingleline)??t.get(Nt).modelAlwaysTerminatesSingleline(n),m=e.blockMode==="moremultiline"&&nv.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(c),n:JSON.stringify(l),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(n.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},v=await t.get(Cd).fetchAndStreamCompletions(t,y,n,i,r);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:zs(n)}:v.type==="canceled"?(fo.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:P1(n)}):a(h,v.getProcessingTime(),v.choices)}catch(y){if(Bc(y))return{type:"canceled",reason:"network request aborted",telemetryData:P1(n,{cancelledNetworkRequest:!0})};if(fo.exception(t,y,"Error on ghost text request"),t.get(yu).notifyUser(t,y),y_(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:zs(n)}}}s(RRe,"genericGetCompletionsFromNetwork");function gie(t,e,n){if(n||(n=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&n.findIndex(r=>r.completionText.trim()===t.completionText.trim())===-1)return e.requestForNextLine&&(t.completionText=`
`+t.completionText),t}s(gie,"postProcessChoices");async function xgt(t,e,n,r,i){return RRe(t,e,n,r,i,"completions",async(o,a,l)=>{let u=await l[Symbol.asyncIterator]().next();if(u.done)return fo.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:zs(n)};if(r?.isCancellationRequested)return fo.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:P1(n)};let d=u.value;if(d===void 0)return fo.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:zs(n)};BRe(t,"performance",d,o,a),fo.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=gie(d,e);p&&(qU(t,e,p),fo.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of l){if(g===void 0)continue;fo.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=gie(g,e,h);y&&(h.push(y),qU(t,e,y))}})();return Kp(t)&&await m,p?{type:"success",value:[Aie(p,{forceSingleLine:!1}),m],telemetryData:zs(n),telemetryBlob:n,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:zs(n)}})}s(xgt,"getCompletionsFromNetwork");async function vgt(t,e,n,r,i){return RRe(t,e,n,r,i,"all completions",async(o,a,l)=>{let c=[];for await(let u of l){if(r?.isCancellationRequested)return fo.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:P1(n)};let d=gie(u,e,c);d&&c.push(d)}if(c.length>0){for(let u of c)qU(t,e,u);BRe(t,"cyclingPerformance",c[0],o,a)}return{type:"success",value:[c,Promise.resolve()],telemetryData:zs(n),telemetryBlob:n,resultType:3}})}s(vgt,"getAllCompletionsFromNetwork");function Aie(t,e){let n={...t};if(e.forceSingleLine){let{completionText:r}=n,i=r.match(/^\r?\n/);i?n.completionText=i[0]+r.split(`
`)[1]:n.completionText=r.split(`
`)[0]}return n}s(Aie,"makeGhostAPIChoice");function wRe(t){return e=>{let n=e?.split(`
`)??[];if(n.length>t+1)return n.slice(0,t+1).join(`
`).length}}s(wRe,"takeNLines");async function bgt(t,e,n,r,i,o,a,l,c){let u=t.get(gm).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return o&&l?{blockMode:"parsing",requestMultiline:!0,finishedCb:wRe(1),stop:[`

`]}:{blockMode:"server",requestMultiline:!0,finishedCb:s(d=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let d;try{d=await kgt(t,u,e.textDocument,e.position,i,o,a,n)}catch(p){fo.exception(t,p,".getGhostTextStrategy"),d={requestMultiline:!1}}if(d.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=Po.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,finishedCb:_Re(t,u,e.textDocument,p,d.blockPosition,a,!0,n.prompt,c)}}return o&&l?{blockMode:"parsing",requestMultiline:!0,finishedCb:wRe(1),stop:[`

`]}:{blockMode:u,requestMultiline:!1,finishedCb:_Re(t,u,e.textDocument,e.position,d.blockPosition,a,!1,n.prompt,c)}}}}s(bgt,"getGhostTextStrategy");function _Re(t,e,n,r,i,o,a,l,c){if(e==="moremultiline"&&nv.isSupported(n.detectedLanguageId)){let u=n.getText(Po.range(Po.position(0,0),r))+(o?`
`:""),d=i==="empty-block"||i==="block-end"?t.get(Nt).longLookaheadSize(c):t.get(Nt).shortLookaheadSize(c);return new qO(t,u,n.detectedLanguageId,!a,d,(p,m)=>{let h={prefix:u+p,prompt:{...l,prefix:l.prefix+p}};qU(t,h,m)}).getFinishedCallback()}return a?W8(t,n,r,o):u=>{}}s(_Re,"buildFinishedCallback");var Egt={isCycling:!1,promptOnly:!1,isSpeculative:!1};async function Igt(t,e,n,r,i,o){let a=r.issuedTime,l=[];function c(_){let k=ra();l.push([_,k-a]),a=k}s(c,"recordPerformance"),c("telemetry");let u=t.get(Zf),d=u.clientCompletionId,p=t.get(Nt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:zs(r)};let m=wgt(e.textDocument,e.position);if(m===void 0)return fo.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:zs(r)};let h=i,g=new sr.CancellationTokenSource;i=g.token;let y=Ox(t,r),v={...Egt,...o,tokenizer:y.tokenizer},b=await C5(t,n,e,r,i,v);return c("prompt"),b.type==="copilotContentExclusion"?(fo.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:zs(r)}):b.type==="contextTooShort"?(fo.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:zs(r)}):b.type==="promptError"?(fo.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:zs(r)}):v.promptOnly?{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:b}:b.type==="promptCancelled"?(fo.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:zs(r)}):b.type==="promptTimeout"?(fo.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:zs(r)}):b.prompt.prefix.length===0&&b.prompt.suffix.length===0?(fo.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:zs(r)}):i?.isCancellationRequested?(fo.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:zs(r)}):t.get(Yi).withProgress(async()=>{let[_]=y5(e.textDocument.getText(Po.range(Po.position(0,0),e.position))),k=p.triggerCompletionAfterAccept(r),D=t.get(Zf).hasAcceptedCurrentCompletion(_,b.prompt.suffix),N=Nr(t,mt.MultilineAfterAccept)??p.enableMultilineAfterAccept(r),Q=k&&!N?D:void 0,Z=b.prompt;Q&&(b.prompt={...b.prompt,prefix:b.prompt.prefix+`
`});let me=await bgt(t,e,b,v.isCycling,m,D,Q??!1,N,r);if(c("strategy"),i?.isCancellationRequested)return fo.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:zs(r)};let te=Tgt(t,_,Z,me.requestMultiline);c("cache");let H=Ux(t,e.textDocument.uri),W={blockMode:me.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:H,engineModelId:y.modelId,ourRequestId:n,prefix:_,prompt:b.prompt,multiline:me.requestMultiline,indentation:G8(e.textDocument,e.position),isCycling:v.isCycling,headers:y.headers,requestForNextLine:Q,stop:me.stop};W.headers={...W.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":v.isSpeculative?"true":"false"};let re=Lgt(t,e.textDocument,W,e.position,b,r,y,v),oe=Nr(t,mt.EnableSpeculativeRequests),V=p.enableSpeculativeRequests(r),q=(oe??V)&&!v.isSpeculative&&!v.isCycling,Y=Promise.resolve();if(te===void 0&&!v.isCycling&&t.get(Ad).shouldWaitForAsyncCompletions(_,b.prompt)){let Be=await t.get(Ad).getFirstMatchingRequestWithTimeout(n,_,b.prompt,v.isSpeculative,re);if(c("asyncWait"),Be){let Se=!me.requestMultiline;te=[[Aie(Be[0],{forceSingleLine:Se})],4],Y=Be[1]}if(h?.isCancellationRequested)return fo.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:zs(re)}}let ee=me.blockMode==="moremultiline"&&nv.isSupported(e.textDocument.detectedLanguageId);if(te!==void 0&&(te[0]=te[0].map(Be=>nD(t,e.textDocument,e.position,Be,ee,fo)).filter(Be=>Be!==void 0)),te!==void 0&&te[0].length===0)return fo.debug(t,`Found empty inline suggestions locally via ${r5(te[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:zs(re)};if(te!==void 0&&te[0].length>0&&(!v.isCycling||te[0].length>1))fo.debug(t,`Found inline suggestions locally via ${r5(te[1])}`);else{if(v.isCycling){let Be=await vgt(t,W,re,i,me.finishedCb);if(Be.type==="success"){let Se=te?.[0]??[];Be.value[0].forEach(Ke=>{Se.findIndex(Fe=>Fe.completionText.trim()===Ke.completionText.trim())===-1&&Se.push(Ke)}),te=[Se,3]}else if(te===void 0)return Be}else{if(i?.isCancellationRequested)return fo.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:P1(re)};let Se=xgt(t,W,re,i,s((Fe,ft)=>(t.get(Ad).updateCompletion(n,Fe),me.finishedCb(Fe,ft)),"finishedCb"));t.get(Ad).queueCompletionRequest(n,_,b.prompt,g,Se);let Ke=await t.get(Ad).getFirstMatchingRequest(n,_,b.prompt,v.isSpeculative);if(Ke===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:zs(re)};te=[[Ke[0]],4],Y=Ke[1]}c("network")}if(te===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:zs(re)};let[de,ne]=te,fe=de.map(Be=>nD(t,e.textDocument,e.position,Be,ee,fo)).filter(Be=>Be!==void 0),pe=[];for(let Be of fe){let Se=Ngt(t,e.textDocument,W,Be,re),Ke=m?TRe(e.textDocument,e.position,Be):0,ft={completion:Bgt(Be.choiceIndex,Be.completionText,b.trailingWs),telemetry:Se,isMiddleOfTheLine:m,suffixCoverage:Ke,copilotAnnotations:Be.copilotAnnotations};pe.push(ft)}if(h?.isCancellationRequested)return fo.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:P1(re)};if(re.properties.clientCompletionId=pe?.[0]?.telemetry?.properties.clientCompletionId,re.measurements.foundOffset=pe?.[0]?.telemetry?.measurements?.foundOffset??-1,fo.debug(t,`Produced ${pe.length} results from ${r5(ne)} at ${re.measurements.foundOffset} offset`),d!==u.clientCompletionId){let Be=u.getCompletionsForUserTyping(_,b.prompt.suffix);if(Be&&Be.length>0)return fo.debug(t,"Current completion changed before returning"),{type:"canceled",reason:"current completion changed before returning",telemetryData:P1(re)}}if(q&&pe.length>0&&ne!==2){e=e.applyEdits([{newText:pe[0].completion.completionText,range:{start:e.position,end:e.position}}]);let Be=new sr.CancellationTokenSource().token;Y.then(()=>{yie(t,e,Be,{isSpeculative:!0,opportunityId:v.opportunityId})})}return v.isSpeculative||u.setGhostText(_,b.prompt.suffix,fe,ne),c("complete"),{type:"success",value:[pe,ne],telemetryData:zs(re),telemetryBlob:re,resultType:ne,performanceMetrics:l}})}s(Igt,"getGhostTextWithoutAbortHandling");async function yie(t,e,n,r){let i=an(),o=await Pgt(t,e.textDocument,i,r);try{return t.get(Yf).schedule(e,i,o,n,r),t.get(mg).notifyRequest(e,i,o,n,r),await Igt(t,e,i,o,n,r)}catch(a){if(Bc(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:P1(o,{cancelledNetworkRequest:!0})};throw a}}s(yie,"getGhostText");function Tgt(t,e,n,r){let i=t.get(Zf).getCompletionsForUserTyping(e,n.suffix),o=Dgt(t,e,n.suffix,r);if(i&&i.length>0){let a=(o??[]).filter(l=>!i.some(c=>c.completionText===l.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(Tgt,"getLocalInlineSuggestion");function wgt(t,e){let n=_gt(e,t),r=Sgt(e,t);return n&&!r?void 0:n&&r}s(wgt,"isInlineSuggestion");function _gt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(_gt,"isMiddleOfTheLine");function Sgt(t,e){let r=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(r)}s(Sgt,"isValidMiddleOfTheLinePosition");function Rgt(t,e){return e.lineAt(t).text.trim().length===0}s(Rgt,"isNewLine");var G1=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function kgt(t,e,n,r,i,o,a,l){if(t.get(G1).requestMultilineOverride)return{requestMultiline:!0};if(n.lineCount>=8e3)kt(t,"ghostText.longFileMultilineSkip",or.createAndMarkAsIssued({languageId:n.detectedLanguageId,lineCount:String(n.lineCount),currentLine:String(r.line)}));else{if(e=="moremultiline"&&nv.isSupported(n.detectedLanguageId)){let d=await USe(n,r);return o||d==="empty-block"?{requestMultiline:!0,blockPosition:d}:{requestMultiline:!1,blockPosition:d}}if(a){let d=G8(n,r),p=d.current>0?n.lineAt(r).text[0]:void 0,m={range:{start:r,end:r},newText:`
`+(p?p.repeat(d.current):"")};n=n.applyEdits([m])}if(["typescript","typescriptreact"].includes(n.detectedLanguageId)&&Rgt(r,n))return{requestMultiline:!0};let u=!1;return!i&&d0(n.detectedLanguageId)?u=await ZO(n,r):i&&d0(n.detectedLanguageId)&&(u=await ZO(n,r)||await ZO(n,n.lineAt(r).range.end)),u||["javascript","javascriptreact","python"].includes(n.detectedLanguageId)&&(u=HSe(l.prompt,n.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}s(kgt,"shouldRequestMultiline");function qU(t,e,n){t.get(Im).append(e.prefix,e.prompt.suffix,n)}s(qU,"appendToCache");function Bgt(t,e,n){if(n.length>0){if(e.startsWith(n))return{completionIndex:t,completionText:e,displayText:e.substring(n.length),displayNeedsWsOffset:!1};{let r=e.substring(0,e.length-e.trimStart().length);return n.startsWith(r)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(Bgt,"adjustLeadingWhitespace");function Dgt(t,e,n,r){let i=t.get(Im).findAll(e,n);return i.length===0?(fo.debug(t,"Found no completions in cache"),[]):(fo.debug(t,`Found ${i.length} completions in cache`),i.map(o=>Aie(o,{forceSingleLine:!r})))}s(Dgt,"getCompletionsFromCache");async function Pgt(t,e,n,r){let i={headerRequestId:n};r?.opportunityId&&(i.opportunityId=r.opportunityId),r?.selectedCompletionInfo?.text&&(i.completionsActive="true"),r?.isSpeculative&&(i.reason="speculative");let o=or.createAndMarkAsIssued(i);return await t.get(Nt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(Pgt,"createTelemetryWithExp");function Ngt(t,e,n,r,i){let o=r.requestId,a={choiceIndex:r.choiceIndex.toString(),clientCompletionId:r.clientCompletionId};r.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(r.generatedChoiceIndex+1)+r.choiceIndex).toString());let l=r.completionText.split(`
`).length,c={compCharLen:r.completionText.length,numLines:n.requestForNextLine?l-1:l};r.meanLogProb&&(c.meanLogProb=r.meanLogProb),r.meanAlternativeLogProb&&(c.meanAlternativeLogProb=r.meanAlternativeLogProb);let u=r.telemetryData.extendedBy(a,c);return u.issuedTime=i.issuedTime,u.measurements.timeToProduceMs=performance.now()-i.issuedTime,kRe(u,e),u.extendWithRequestId(o),u.measurements.confidence=bRe(t,u),u.measurements.quantile=ERe(t,u),fo.debug(t,`Extended telemetry for ${r.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}s(Ngt,"telemetryWithAddData");function Lgt(t,e,n,r,i,o,a,l){let c={languageId:e.detectedLanguageId};n.requestForNextLine!==void 0&&(c.requestForNextLine=n.requestForNextLine.toString()),c.isSpeculative=l.isSpeculative.toString();let u=o.extendedBy(c);kRe(u,e);let d=n.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(n.multiline),u.properties.isCycling=JSON.stringify(n.isCycling);let p=e.lineAt(r.line),m=e.getText(Po.range(p.range.start,r)),h=e.getText(Po.range(r,p.range.end)),g=Array.from(i.neighborSource.entries()).map(_=>[_[0],_[1].map(k=>(0,SRe.SHA256)(k).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:n.blockMode},v={...fS(i.prompt),promptEndPos:e.offsetAt(r),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let b=t.get(Ql);if(b.isActive()){let _=b.popTelemetry();_.length>0&&(y.workspaceContextStatsJson=JSON.stringify(_))}let E=u.extendedBy(y,v);return kt(t,"ghostText.issued",E),u}s(Lgt,"telemetryIssued");function kRe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(kRe,"addDocumentTelemetry");function BRe(t,e,n,r,i){let o=Date.now()-r,a=o-i,l=n.telemetryData.extendedBy({},{completionCharLen:n.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:n.meanLogProb||NaN,meanAlternativeLogProb:n.meanAlternativeLogProb||NaN});l.extendWithRequestId(n.requestId),kt(t,`ghostText.${e}`,l)}s(BRe,"telemetryPerformance");var Zf=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,n,r,i){i!==2&&(this.prefix=e,this.suffix=n,this.choices=r)}getCompletionsForUserTyping(e,n){let r=this.getRemainingPrefix(e,n);if(r!==void 0&&DRe(this.choices[0].completionText,r))return Fgt(this.choices,r)}hasAcceptedCurrentCompletion(e,n){let r=this.getRemainingPrefix(e,n);if(r===void 0)return!1;let i=r===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,n){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===n&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function Fgt(t,e){return t.filter(n=>DRe(n.completionText,e)).map(n=>({...n,completionText:n.completionText.substring(e.length)}))}s(Fgt,"adjustChoicesStart");function DRe(t,e){return t.startsWith(e)&&t.length>e.length}s(DRe,"startsWithAndExceeds");f();f();f();var o2=class{constructor(e,n,r){this._referenceCount=0;this._isDisposed=!1;this._offset=r;let i=e.get(kn);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===n){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let l=a.text.length-a.rangeLength;this._offset=this._offset+l}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,n){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},n)}};f();var Cie=class t{constructor(e,n,r=[],i,o,a){this._textDocument=e;this._position=n;this.originalPosition=i??sr.Position.create(n.line,n.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...r]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,n,r){return new t(e,n,r??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(r=>r.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let n={range:e.range,newText:e.text};return this.applyEdits([n],!0)}applyEdits(e,n=!1){if(n&&e.length>1)throw new Error("Selected completion info should be a single edit");let r=this._textDocument,i=this._position,o=r.offsetAt(i),a=this.editsWithPosition;for(let{range:l,newText:c}of e){let u=r.getText(l),d=r.offsetAt(l.end);if(r=r.applyEdits([{range:l,newText:c}]),o<r.offsetAt(l.start)){let m={range:l,newText:c,positionAfterEdit:sr.Position.create(i.line,i.character)};n&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=c.length-u.length,i=r.positionAt(o);let p={range:l,newText:c,positionAfterEdit:sr.Position.create(i.line,i.character)};n&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(r,i,a)}};function Tg(t,e){return new Cie(t,e)}s(Tg,"createCompletionState");f();function xie(t,e,n=(r,i)=>r===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let r=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),l=e[0];for(let u=0;u<t.length+1;u++)u===0?r[u]=1:r[u]=n(t[u-1],l,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=r,r=d,d=a,a=i,i=d,l=e[u],r[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+r[p-1],g=n(t[p-1],l,p-1,u)+o[p-1];r[p]=Math.min(h,m,g),r[p]===g?i[p]=a[p-1]:r[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let c=0;for(let u=0;u<t.length+1;u++)r[u]<r[c]&&(c=u);return{distance:r[c],startOffset:i[c],endOffset:c}}s(xie,"editDistance");function Mgt(){return new Map}s(Mgt,"emptyLexDictionary");function Qgt(t){let e=new Array(t.size);for(let[n,r]of t)e[r]=n;return e}s(Qgt,"reverseLexDictionary");function*Ogt(t){let e="",n;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(n||={});let r=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===r&&o!==2?e+=i:(e.length>0&&(yield e),e=i,r=o)}e.length>0&&(yield e)}s(Ogt,"lexGeneratorWords");function PRe(t,e,n,r){let i=[],o=0;for(let a of n(t))r(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(PRe,"lexicalAnalyzer");function NRe(t){return t!==" "}s(NRe,"notSingleSpace");function LRe(t,e,n=Ogt){let[r,i]=PRe(t,Mgt(),n,NRe),[o,a]=PRe(e,i,n,NRe);if(o.length===0||r.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:r.length,needleLexLength:o.length};let l=Qgt(a),c=o.length,u=l[o[0][0]],d=l[o[c-1][0]];function p(y,v,b,E){if(E===0||E===c-1){let _=l[r[b][0]];return E==0&&_.endsWith(u)||E==c-1&&_.startsWith(d)?0:1}else return y===v?0:1}s(p,"compare");let m=xie(r.map(y=>y[0]),o.map(y=>y[0]),p),h=r[m.startOffset][1],g=m.endOffset<r.length?r[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:r.length,needleLexLength:o.length}}s(LRe,"lexEditDistance");f();function FRe(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(FRe,"computeCompCharLen");function MRe(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(MRe,"computeCompletionText");function QRe(t,e,n){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||n===3?e:e-t.range.end.character+t.range.start.character}s(QRe,"computePartialLength");var yv=new _t("postInsertion"),ORe=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],URe=50,Ugt=1500,qgt=.5,Wgt=500,vie={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function qRe(t,e,n,r,i){let o=await t.get(Cr).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return yv.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,l=a.getText(),c=l.substring(0,r),u=a.positionAt(r),d=await C5(t,n.properties.headerRequestId,Tg(a,u),n),p=d.type==="prompt"?d.prompt:{prefix:c,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=l.substring(r,i);return p.suffix=l.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=l.substring(r),h=wre(c,r,a.detectedLanguageId),y=await N5e(h,void 0)(m),v=Math.min(l.length,r+(y?y*2:Wgt)),b=l.substring(r,v);return{prompt:p,capturedCode:b,terminationOffset:y??-1}}}s(qRe,"captureCode");function WU(t,e,n,r,i){i.forEach(({completionText:c,completionTelemetryData:u})=>{yv.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),c5e(t,e,u)});let o=new o2(t,r,n-1),a=new o2(t,r,n),l=s(async c=>{yv.debug(t,`Original offset: ${n}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await qRe(t,r,u,o.offset+1,a.offset),h;d.isFimEnabled?h={hypotheticalPromptPrefixJson:JSON.stringify(d.prefix),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)}:h={hypotheticalPromptJson:JSON.stringify(d.prefix)};let g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:c.seconds,insertionOffset:n,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});yv.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),kt(t,e+".capturedAfterRejected",g,1)},"checkInCode");ORe.filter(c=>c.captureRejection).map(c=>o.push(Au(t,()=>l(c),"postRejectionTasks"),c.seconds*1e3))}s(WU,"postRejectionTasks");function s2(t,e,n,r,i,o,a,l){let c=o.extendedBy({compType:a.compType},{compCharLen:FRe(a,n)});yv.debug(t,`${e}.accepted choiceIndex: ${c.properties.choiceIndex}`),l5e(t,e,c);let u=n;n=MRe(n,a);let d=n.trim(),p=new o2(t,i,r),m=new o2(t,i,r+n.length),h=s(async g=>{await Vgt(t,e,d,r,i,g,c,p,m)},"stillInCodeCheck");if(vie.triggerPostInsertionSynchroneously&&Kp(t)){let g=h({seconds:0,captureCode:vie.captureCode,captureRejection:vie.captureRejection});t.get(ya).register(g)}else ORe.map(g=>p.push(Au(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Au(t,Ggt,"post insertion citation check")(t,i,u,n,r,l)}s(s2,"postInsertionTasks");async function Ggt(t,e,n,r,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(kn).getTextDocument({uri:e});if(a){let l=bie(a.getText(),r,URe,i);l.stillInCodeHeuristic&&(i=l.foundOffset)}for(let l of o.ip_code_citations){let c=Hgt(n.length,r.length,l.start_offset);if(c===void 0){yv.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+c,d=a?.positionAt(u),p=i+jgt(n.length,r.length,l.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(A0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:l.details.citations})}}s(Ggt,"citationCheck");function Hgt(t,e,n){if(!(e<t&&n>e))return n}s(Hgt,"computeCitationStart");function jgt(t,e,n){return e<t?Math.min(n,e):n}s(jgt,"computeCitationEnd");function bie(t,e,n,r){let i=t.substring(Math.max(0,r-n),Math.min(t.length,r+e.length+n)),o=LRe(i,e),a=o.lexDistance/o.needleLexLength,{distance:l}=xie(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:l,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,r-n),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=qgt?1:0}}s(bie,"find");async function Vgt(t,e,n,r,i,o,a,l,c){let u=await t.get(Cr).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=bie(p,n,URe,l.offset);m.stillInCodeHeuristic||(m=bie(p,n,Ugt,l.offset)),yv.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${n}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${r}, tracked at ${l.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset}).extendedBy({},m);if(kt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:v}=await qRe(t,i,h,l.offset,c.offset),b;g.isFimEnabled?b={hypotheticalPromptPrefixJson:JSON.stringify(g.prefix),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)}:b={hypotheticalPromptJson:JSON.stringify(g.prefix)};let E=a.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});yv.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),kt(t,e+".capturedAfterAccepted",E,1)}}}s(Vgt,"checkStillInCode");var Eie=new _t("ghostText"),Bu=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},n){this.#t=e,this.#e=n,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function $gt(t){let e=[];return t.shownCompletions.forEach(n=>{if(n.displayText&&n.telemetry){let r,i;t.partiallyAcceptedLength?(r=n.displayText.substring(t.partiallyAcceptedLength-1),i=n.telemetry.extendedBy({compType:"partial"},{compCharLen:r.length})):(r=n.displayText,i=n.telemetry);let o={completionText:r,completionTelemetryData:i,offset:n.offset};e.push(o)}}),e}s($gt,"computeRejectedCompletions");function Iie(t,e){let n=t.get(Bu);if(!n.position||!n.uri)return;let r=$gt(n);r.length>0&&WU(t,"ghostText",e??r[0].offset,n.uri,r),n.resetState(),n.resetPartialAcceptanceState()}s(Iie,"rejectLastShown");function WRe(t,e,n,r){let i=t.get(Bu);return i.position&&i.uri&&!(i.position.line===n.line&&i.position.character===n.character&&i.uri.toString()===e.uri.toString())&&r!==2&&Iie(t,e.offsetAt(i.position)),i.setState(e,n),i.index}s(WRe,"setLastShown");function GRe(t,e){let n=t.get(Bu);if(n.index=e.index,!n.shownCompletions.find(r=>r.index===e.index)&&(e.uri===n.uri&&n.position?.line===e.position.line&&n.position?.character==e.position.character&&n.shownCompletions.push(e),e.displayText)){let r=e.resultType!==0;Eie.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${r}`),e.telemetry.measurements.compCharLen=e.displayText.length,GO(t,"ghostText",e)}}s(GRe,"handleGhostTextShown");function GU(t,e){let n=t.get(Bu);n.resetState(),Eie.debug(t,"Ghost text post insert");let r=n.partiallyAcceptedLength?{compType:"partial",acceptedLength:e.displayText.length}:{compType:"full"};return n.resetPartialAcceptanceState(),s2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,r,e.copilotAnnotations)}s(GU,"handleGhostTextPostInsert");function HRe(t,e,n,r=0){let i=t.get(Bu);n===e.insertText.length&&i.resetState(),Eie.debug(t,"Ghost text partial post insert");let o=QRe(e,n,r);if(o)return i.partiallyAcceptedLength=n,s2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(HRe,"handlePartialGhostTextPostInsert");function jRe(t){let e=new $S;return e.set(ug,t),e.set(sg,new sg),e.set(co,new co),e.set(Im,new Im),e.set(a0,new a0),e.set(Nt,new Nt(e)),e.set(zh,new zh),e.set(rc,new rc(e)),e.set(Rl,new Rl),e.set(c0,new c0),e.set(yu,new yu),e.set(Cd,new O8),e.set(gm,new vS),e.set(fm,new BB),e.set(ya,new ya),e.set(mg,new mg(e)),e.set(Cr,new Cr(e)),K4e(e,!0),e.set(Ql,new Ql(e)),e.set(Rm,QU(e)),e.set(Bu,new Bu),e.set(Zf,new Zf),e.set(G1,G1.default),e.set(k1,new k1(e)),e.set(Nf,new Nf(e)),e.set(Ia,new Ia),e.set(Ad,new Ad(e)),e.set(Go,new Go),e.set(Vf,new Vf(e)),e}s(jRe,"createCommonContext");f();f();var HU=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var v5=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var wVn=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),rD=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,n){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Nt).updateExPValuesAndAssignments(),a=await this.ctx.get(Cd).fetchAndStreamSpeculation(this.ctx,i,o,(l,c)=>{},n);switch(a.type){case"success":return a;case"canceled":throw new HU(a.reason);case"failed":throw new v5(a.reason)}}};f();f();var VRe=Ve(require("node:util"));function $Re(t,...e){return`[${t}] ${zgt(e)}`}s($Re,"formatLogMessage");function zgt(t){return VRe.default.formatWithOptions({maxStringLength:1/0},...t)}s(zgt,"format");function jU(t){return DAe(t)}s(jU,"verboseLogging");var VU=class extends Ha{constructor(n){super();this.console=n}static{s(this,"ConsoleLog")}logIt(n,r,i,...o){r==1?this.console.error(`[${i}]`,...o):(r==2||jU(n))&&this.console.warn(`[${i}]`,...o)}};f();var zRe=require("node:util");var b5=class extends og{static{s(this,"TelemetryLogSenderImpl")}sendError(e,n,...r){aI(e,"log",or.createAndMarkAsIssued({context:n,level:uI[1],message:Ygt(...r)}),1)}sendException(e,n,r){ba(e,n,r)}};function Ygt(...t){return t.map(e=>(0,zRe.inspect)(e)).join(" ")}s(Ygt,"telemetryMessage");f();var lLe=Ve(require("crypto")),cLe=Ve(require("fs")),uLe=Ve(sLe()),dLe=require("tls"),fLe=Ve(aLe());var B4=new _t("certificates"),el=class{static{s(this,"RootCertificateReader")}};function IG(t,e=process.platform){return new Yle(t,[new Kle,new Jle,KRt(t,e)])}s(IG,"getRootCertificateReader");function KRt(t,e){switch(e){case"linux":return new Xle(t);case"darwin":return new Zle(t);case"win32":return new ece(t);default:return new tce}}s(KRt,"createPlatformReader");var zle=class extends el{constructor(n,r){super();this.ctx=n;this.delegate=r}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(n){return B4.warn(this.ctx,"Failed to read root certificates:",n),[]}}},Yle=class extends el{constructor(n,r){super();this.ctx=n;this.delegates=r.map(i=>new zle(n,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(n=>n.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(n){let r=Date.now(),i=n.filter(o=>{try{let a=new lLe.X509Certificate(o),l=Date.parse(a.validTo);return isNaN(l)||l>r}catch(a){return B4.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return n.length!==i.length&&B4.info(this.ctx,`Removed ${n.length-i.length} expired certificates`),i}},Kle=class extends el{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return dLe.rootCertificates}},Jle=class extends el{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await pLe(e):[]}},Xle=class extends el{constructor(n){super();this.ctx=n}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let n=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await pLe(r);B4.debug(this.ctx,`Read ${i.length} certificates from ${r}`),n=n.concat(i)}return n}},Zle=class extends el{constructor(n){super();this.ctx=n}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let n=uLe.get();return B4.debug(this.ctx,`Read ${n.length} certificates from Mac keychain`),n}},ece=class extends el{constructor(n){super();this.ctx=n}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let n=fLe.all();return B4.debug(this.ctx,`Read ${n.length} certificates from Windows store`),n}},tce=class extends el{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function pLe(t){let e;try{e=await cLe.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let n=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!n)return[];let r=n.filter(o=>o.length>0),i=new Set(r);return Array.from(i)}s(pLe,"readCertsFromFile");f();var TLe=Ve(require("http"));var v3t=407,Ac=new _t("proxySocketFactory"),$g=class{static{s(this,"ProxySocketFactory")}},O2=class extends Error{static{s(this,"ProxySocketError")}constructor(e,n,r){super(e),this.code=n?.code,this.syscall=n?.syscall,this.errno=n?.errno,/^Failed to establish a socket connection to proxies:/.test(n?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(n?.message??"")?this.code="ProxyInitializeSecurityContext":n?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(n?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),r!==void 0&&(this.code=r)}};function TG(t){return new ice(t,new oce(t))}s(TG,"getProxySocketFactory");var ice=class extends $g{constructor(n,r,i=new bP,o=process.platform){super();this.ctx=n;this.delegate=r;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Jn(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(n,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(Ac.debug(this.ctx,"Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(n,r));try{return await this.delegate.createSocket(n,r)}catch(i){if(i instanceof O2&&i.code===`ProxyStatusCode${v3t}`){Ac.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(n,r);if(o)return Ac.debug(this.ctx,"Proxy authorization successful, caching result"),kt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),o}throw i}}async reauthorize(n,r){let i=await this.authorize(r);i&&(Ac.debug(this.ctx,"Proxy re-authorization successful, received token"),n.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(n,r){let i=await this.authorize(r);if(Ac.debug(this.ctx,"Proxy authorization successful, received token"),i)return Ac.debug(this.ctx,"Trying to create socket with proxy authorization"),n.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(n,r)}async authorize(n){Ac.debug(this.ctx,"Loading kerberos module");let r=await this.kerberosLoader.load(),i=this.computeSpn(n);Ac.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await r.initializeClient(i);Ac.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return Ac.debug(this.ctx,"Received kerberos server response"),a}computeSpn(n){let r=n.kerberosServicePrincipal;if(r)return Ac.debug(this.ctx,"Using configured kerberos spn",r),r;let i=this.platform==="win32"?`HTTP/${n.host}`:`HTTP@${n.host}`;return Ac.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(n){return n.host+":"+n.port}},oce=class extends $g{constructor(n){super();this.ctx=n}static{s(this,"TunnelingProxySocketFactory")}async createSocket(n,r){let i=this.createConnectRequestOptions(n,r);return new Promise((o,a)=>{Ac.debug(this.ctx,"Attempting to establish connection to proxy");let l=TLe.request(i);l.useChunkedEncodingByDefault=!1,l.once("connect",(c,u,d)=>{Ac.debug(this.ctx,"Socket Connect returned status code",c.statusCode),l.removeAllListeners(),u.removeAllListeners(),c.statusCode!==200?(u.destroy(),a(new O2(`tunneling socket could not be established, statusCode=${c.statusCode}`,void 0,`ProxyStatusCode${c.statusCode}`))):d.length>0?(u.destroy(),a(new O2(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(Ac.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),l.once("error",c=>{Ac.debug(this.ctx,"Proxy socket connection error",c.message),l.removeAllListeners(),a(new O2(`tunneling socket could not be established, cause=${c.message}`,c))}),l.on("timeout",()=>{Ac.debug(this.ctx,"Proxy socket connection timeout"),a(new O2(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.host}:${i.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(n,r){let i=`${n.hostname}:${n.port}`,o={...r,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive"},timeout:n.timeout};return n.localAddress&&(o.localAddress=n.localAddress),this.configureProxyAuthorization(o,n),o}configureProxyAuthorization(n,r){n.headers["Proxy-Authorization"]=[],n.proxyAuth&&n.headers["Proxy-Authorization"].push("Basic "+Buffer.from(n.proxyAuth).toString("base64")),r.headers&&r.headers["Proxy-Authorization"]&&n.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}},bP=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ve(ILe()))}};f();var RLe=require("node:os");var b3t=new _t("repository"),U2="\\\\",kLe="(?:[#;].*)",N4=`(?:[^"${U2}]|${U2}.)`,E3t="[0-9A-Za-z-]",wLe=`[A-Za-z]${E3t}*`,BLe=`\\s*${kLe}?$`,DLe=`(?:[^"${U2};#]|${U2}.)`,I3t=`(?:"${N4}*"|"${N4}*(?<strCont>${U2})$)`,T3t=`(?:${DLe}|${I3t})+`,w3t=`(?:(?<cont>${U2})$)`,PLe=`(?<value>${T3t})${w3t}?${BLe}`,_Le=new RegExp(`^${PLe}`),_3t=new RegExp(`^(?<value>${N4}*(?:(?<strCont>${U2})$|(?<quote>")))`),S3t=new RegExp(`^\\s*(?:(?<key>${wLe})\\s*=\\s*${PLe}|(?<soloKey>${wLe})${BLe})`),R3t=new RegExp(`(?<value>${DLe}+)|"(?<string>${N4}*)"`,"g"),SLe="[-.0-9A-Za-z]+",k3t=`\\s+"(?<ext>${N4}*)"`,B3t=`\\s+"(?<extOnly>${N4}*)"`,D3t=new RegExp(`^\\s*\\[(?:(?<simple>${SLe})${k3t}|${B3t}|(?<simpleOnly>${SLe}))\\]`),P3t=new RegExp(`^\\s*${kLe}$`),sce=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(D3t);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(S3t);if(e){if(e.groups?.key){let n=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),n)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let n=e,r=[this.matchedValue(n)];for(;n?.groups?.cont||n?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}n.groups.strCont?(n=this.line.match(_3t),n?(r.push(this.matchedValue(n)),n.groups?.quote&&(n=this.line.slice(n[0].length).match(_Le),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(n=this.line.match(_Le),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))}return this.normalizeValue(r.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let n=!1,r=[...e.matchAll(R3t)].map(i=>i.groups?.value?(n=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(n=!1,this.unescapeValue(i.groups.string))).join("");return n?r.trimEnd():r}unescapeValue(e){let n={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(r,i)=>n[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){P3t.test(this.line)&&(this.line="")}},wG=class extends Em{static{s(this,"GitParsingConfigLoader")}async getConfig(e,n){let r=await k1.getRepoConfigLocation(e,n);if(!r)return;let i=await this.getParsedConfig(e,r);if(i)return this.mergeConfig(await this.baseConfig(e,r),i)}mergeConfig(...e){return e.filter(n=>n!==void 0).reduce((n,r)=>n.concat(r),new jI)}async getParsedConfig(e,n,r=!0){let i=await this.tryLoadConfig(e,n,r);if(!i)return;let o=new sce(i),a=new jI;return o.parse((l,c)=>a.add(l,c)),a}async tryLoadConfig(e,n,r){try{return await e.get(go).readFileString(n)}catch(i){(r||!(i instanceof Error)||i.code!=="ENOENT")&&b3t.warn(e,`Failed to load git config from ${JSON.stringify(n)}:`,i);return}}async baseConfig(e,n){let r=await this.commondirConfigUri(e,n),i=vo(this.xdgConfigUri(),"git","config"),o=vo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),r?await this.getParsedConfig(e,r,!1):void 0)}async commondirConfigUri(e,n){if(Ti(n).toLowerCase()!=="config.worktree")return;let r=ud(n),i=vo(r,"commondir");try{let o=(await e.get(go).readFileString(i)).trimEnd();return vo(dI(r,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?cl(process.env.XDG_CONFIG_HOME):vo(this.homeUri(),".config")}homeUri(){return cl((0,RLe.homedir)())}};f();var NLe=require("child_process");var _G=class extends Em{static{s(this,"GitCLIConfigLoader")}runCommand(e,n,r){return new Promise((i,o)=>{(0,NLe.execFile)(n,r,{cwd:e},(a,l)=>{a?o(a):i(l)})})}async tryRunCommand(e,n,r,i){try{return await this.runCommand(n,r,i)}catch(o){lSe.info(e,`Failed to run command '${r}' in ${n}:`,o);return}}async getConfig(e,n){let r=Wo(n);if(r===void 0)return;let i=await this.tryRunCommand(e,r,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let n=new jI;for(let r of e.split("\0").filter(i=>i)){let i=r.split(`
`,1)[0],o=r.slice(i.length+1);n.add(i,o)}return n}extraArgs(){return[]}};f();var FLe=Ve(require("node:events"));var LLe="onWorkspaceChanged",N0=class{constructor(){this.emitter=new FLe.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(LLe,e)}emit(e){this.emitter.emit(LLe,e)}};function MLe(t){let e=jRe(t);return N3t(e),e.set(el,IG(e)),e.set($g,TG(e)),e.set(Em,new EO([new _G,new wG])),e.set(N0,new N0),e.set(rD,new rD(e)),e}s(MLe,"createProductionContext");function N3t(t){t.set(yf,yf.fromEnvironment(!1)),t.set(og,new b5),t.set(Ha,new VU(console))}s(N3t,"setupRudimentaryLogging");var utr=new _t("context");f();f();var On=new _t("chat");f();f();var ml=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(ml||{});function Vn(t){return t?(t=L0(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(Vn,"getTextPart");var QLe=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),OLe=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function Kv(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(Kv,"parseToolCallArguments");function ULe(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(ULe,"toOpenAIToolCall");function qLe(t,e,n,r,i,o,a,l){let c=JSON.parse(JSON.stringify(e));return n.tool_calls&&(c.tool_calls=n.tool_calls),e5(t,[c],l),{message:e,choiceIndex:r,requestId:i,blockFinished:o,finishReason:a,tokens:n.tokens,numTokens:n.tokens.length,tool_calls:n.tool_calls,function_call:n.function_call,telemetryData:l}}s(qLe,"convertToChatCompletion");function EP(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(EP,"isChatCompletionContentPartArray");function SG(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(SG,"isChatMessageArray");function L0(t){if(typeof t=="string")return t;if(EP(t))return t;if(SG(t)){let e=t.filter(r=>r.role==="assistant"),n=[];for(let r of e)Array.isArray(r.content)?n.push(...r.content):n.push({type:"text",text:r.content});return n}return""}s(L0,"resolveAsChatMessageContent");function IP(t,e){return(typeof t=="string"||EP(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(IP,"appendChatMessageContent");function ace(t,e){if(t){if(typeof t=="string"||EP(t))return[{role:"assistant",content:t}];if(SG(t))return e?t:t.filter(n=>n.role!=="tool").map(n=>n.tool_calls?{...n,tool_calls:void 0,tool_call_id:void 0}:n)}else return[];return[]}s(ace,"resolveResponseAsChatMessages");f();var lce=new _t("streamMessages");function WLe(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(lce.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),lce.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),lce.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=Q8(e.solution),a={role:"assistant",content:r};return qLe(t,a,o,e.index,e.requestId,i,e.reason??"",n)}s(WLe,"prepareChatCompletionForReturn");var mp=new _t("fetchChat"),RG=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,n,r,i,o){let a=await this.fetchWithParameters(e,n.endpoint,n,r,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(c){mp.exception(e,c,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(n.endpoint,e,n);return this.handleError(e,l,a)}if(e.get(Vf).processQuotaHeaders(a.headers),n.postOptions?.stream===!1){let l=await a.text(),c=JSON.parse(l),u=c.choices!=null?c.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??an(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:Vn(u.content).split(" "),requestId:{headerRequestId:d,completionId:c.id?c.id:"",created:c.created?Number(c.created):0,deploymentId:"",serverExperiments:""},telemetryData:r,numTokens:0},m=Vn(u.content);return await i(m,{text:m,copilotReferences:c.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>t5(a),"getProcessingTime")}}else{let c=iv.create(e,n.count,a,r,[],o).processSSE(i);return{type:"success",chatCompletions:D1(c,d=>WLe(e,d,r)),getProcessingTime:s(()=>t5(a),"getProcessingTime")}}}createTelemetryData(e,n,r){return or.createAndMarkAsIssued({endpoint:e,engineName:r.engineName,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchWithParameters(e,n,r,i,o){let a={messages:r.messages,tools:r.tools,tool_choice:r.tool_choice,model:r.model,temperature:n5(e,r.count),top_p:OO(e),n:r.count,stop:[`


`],copilot_thread_id:r.copilot_thread_id},l=b1(r.repoInfo);return l!==void 0&&(a.nwo=l),r.postOptions&&Object.assign(a,r.postOptions),r.intent&&(a.intent=r.intent,r.intent_model&&(a.intent_model=r.intent_model),r.intent_tokenizer&&(a.intent_tokenizer=r.intent_tokenizer),r.intent_threshold&&(a.intent_threshold=r.intent_threshold),r.intent_content&&(a.intent_content=r.intent_content)),o?.isCancellationRequested?"not-sent":await L3t(e,r.messages,r.copilotApiBaseUrl,r.engineName,n,r.ourRequestId,a,r.authToken,r.uiKind,i,r.llmInteraction,o)}async handleError(e,n,r){if(r.clientError&&!r.headers.get("x-github-request-id")){let a=`Last response was a ${r.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;mp.error(e,a),n.properties.error=`Response status was ${r.status} with no x-github-request-id header`}else n.properties.error=`Response status was ${r.status}`;if(n.properties.status=String(r.status),kt(e,"request.shownWarning",n),r.status===401)try{let a=await r.text(),l=JSON.parse(a);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(r.status===401||r.status===403)return e.get(Mn).resetToken(r.status),{type:"failed",reason:`token expired or invalid: ${r.status}`,code:r.status};if(r.status===499)return mp.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:r.status};let i=await r.text();if(r.status===466)return mp.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:r.status};if(r.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:r.status};if(r.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:r.status};if(r.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:r.status};if(r.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Mn).getToken();if(r.status===402){if(i.includes("free_quota_exceeded")){let c=r.headers.get("retry-after");return{type:"failed",reason:c?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(c).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:r.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:r.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:r.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:r.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:r.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:r.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:r.status}}}return{type:"failed",reason:"Quota Exceeded.",code:r.status}}return mp.error(e,"Unhandled status from server:",r.status,i),{type:"failed",reason:`unhandled status from server: ${r.status} ${i}`,code:r.status}}};async function L3t(t,e,n,r,i,o,a,l,c,u,d,p){let m=vo(n,r,i);if(!l)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:r,uiKind:c});QO(a,h,["messages"]),h.properties.headerRequestId=o,kt(t,"request.sent",h);let g=ra(),y=e5e(c),v={...Lx(t),...d.toCapiHeaders()};return a.messages?.some(b=>Array.isArray(b.content)?b.content.some(E=>"image_url"in E):!1)&&(v["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(b=>{F3t(b)&&b.tool_calls&&(b.tool_calls=b.tool_calls.map(E=>ULe(E)))}),jE(t,m,l,y,o,a,p,v).then(b=>{let E=ov(b,void 0);h.extendWithRequestId(E);let _=ra()-g;return h.measurements.totalTimeMs=_,mp.info(t,`Request ${o} at <${m}> finished with ${b.status} status after ${_}ms`),mp.debug(t,"request.response properties",h.properties),mp.debug(t,"request.response measurements",h.measurements),mp.debug(t,"messages:",JSON.stringify(e)),kt(t,"request.response",h),b}).catch(b=>{if(Bc(b))throw b;let E=h.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",E),h.properties.message=String(Su(b,"name")??""),h.properties.code=String(Su(b,"code")??""),h.properties.errno=String(Su(b,"errno")??""),h.properties.type=String(Su(b,"type")??"");let _=ra()-g;throw h.measurements.totalTimeMs=_,mp.info(t,`Request ${o} at <${m}> rejected with ${String(b)} after ${_}ms`),mp.debug(t,"request.error properties",h.properties),mp.debug(t,"request.error measurements",h.measurements),kt(t,"request.error",h),b}).finally(()=>{e5(t,e,h)})}s(L3t,"fetchWithInstrumentation");function F3t(t){return"tool_calls"in t}s(F3t,"isChatMessageWithToolCalls");var Js=class{constructor(e){this.ctx=e;this.fetcher=new RG}static{s(this,"ChatMLFetcher")}async fetchResponse(e,n,r,i){let o=an(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction||(a.max_tokens=l.maxResponseTokens),a.stream=!!l.stream),e.logitBias&&(a.logit_bias=e.logitBias);let c=await this.ctx.get(Mn).getToken(),u=Nx(this.ctx,c,e.copilotApiProvider??"api"),d=e.endpoint??"completions",p=e.authToken??c.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return l&&(m.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,n,r)}async fetch(e,n,r,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),n||(()=>{}),r);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,n,r,i){let o=[],a=L8(n.chatCompletions,c=>this.postProcess(c,i));On.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let c of a)On.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(c,null,2)}`),o.push(c),l++;if(o.length==1){let c=o[0];switch(c.finishReason){case"stop":return{type:"success",value:Vn(c.message?.content)??"",toolCalls:c.tool_calls,requestId:r,numTokens:c.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:c.tool_calls,requestId:r};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:r};case"length":return{type:"length",reason:"Response too long.",requestId:r,truncatedValue:Vn(c.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:r};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:r}}}else if(o.length>1){let c=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(c.length>0)return{type:"successMultiple",value:c.map(u=>Vn(u.message.content)),toolCalls:c.map(u=>u.tool_calls).filter(u=>u),requestId:r}}return{type:"no_choices",reason:"Response contained no choices.",requestId:r}}postProcess(e,n){return UU(e.tokens)?(n.extendWithRequestId(e.requestId),kt(this.ctx,"conversation.repetition.detected",n,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,n){return On.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:n}}processFailedResponse(e,n){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:n}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:n}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:n}:{type:"failed",reason:e.reason,requestId:n,code:e.type==="failed"?e.code:void 0}}processError(e,n){return Bc(e)?{type:"canceled",reason:"network request aborted",requestId:n}:(On.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};f();var zg=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var Jv=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();f();var Gm=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(Cr).getOrReadTextDocument({uri:e})}};var M3t=".github/copilot-instructions.md",Q3t=".github/git-commit-instructions.md",O3t="global-copilot-instructions",U3t="global-git-commit-instructions",Yg=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,n){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:n}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,n){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:n}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let n=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&n.push({kind:1,content:[this.globalCopilotInstructions],reference:O3t}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&n.push({kind:1,content:[this.globalGitCommitInstructions],reference:U3t}),n}async _collectInstructionsFromFile(e,n,r,i,o,a){try{let l=vo(n.uri,r),c=await e.getByUri(l);if(c.status!=="valid"||!c.document)return;let u=c.document.getText().trim();u&&o.push({kind:a,content:[{instruction:u,languageId:i}],reference:l})}catch{}}async readFromWorkspaces(e,n,r={}){let i=[];if(!n.length)return i;let o=new Gm(e),a=n.flatMap(l=>{let c=[];return r.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(o,l,M3t,r.languageId,i,0)),r.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(o,l,Q3t,void 0,i,0)),c});return await Promise.all(a),i}};f();var yc=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},kG=class extends yc{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(n,r){this.items.push({editConversationId:n.editConversationId,editTurnId:n.editTurnId,...r})}};f();f();f();function BG(){return an()}s(BG,"uuidV4");f();var Xv=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var Kg=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var TP="filepath:",jl="...existing code...",cce="copilot-edited-file";f();function L4(t){let e=t.matchAll(/^\s*(```+)/gm),n=Math.max(3,...Array.from(e,r=>r[1].length+1));return"`".repeat(n)}s(L4,"getFenceForCodeBlock");var F0=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=L4(this.params.code),n=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&n.push(`// ${TP} ${ia(this.params.uri)}`),n.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),n}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var uce=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},wP=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),n=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(n.push({role:"assistant",content:this.props.inProgressRewriteContent}),n.push({role:"user",content:"Please continue providing the next part of the response."})),n}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((n,r)=>{let i=Vn(r.content);return r.role==="system"?`${n}<SYSTEM>
${i}
</SYSTEM>


`:n+i},"")}]}transformToSpeculationPrompt(e,n,r){return e.reduce((o,a)=>{if(a.role==="system"){let l=Vn(a.content).endsWith(`
`)?Vn(a.content):`${Vn(a.content)}
`;return`${o}<SYSTEM>
${l}
End your response with </${cce}>.
</SYSTEM>


`}return o+Vn(a.content)},"")+`


The resulting document:
<${cce}>
${r}${n}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let n=[];return n.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${jl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),n.join(`
`)}buildUserMessage(e){let n=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new F0({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});n.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else n.push("I am in an empty editor.");let i=new uce({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&n.push(i);let o=new F0({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return n.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),n.join(`
`)}};f();var Pa=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var q3t=1e3,W3t={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:Sr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},F4=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new _t("CopilotEditsCodeMapper")}async mapCode(e,n,r,i,o=!1){if(!e.resource)throw new Kg("No uri found in code block");if(r.isCancellationRequested)throw new Xv;if(!e.code.includes(jl))if(this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`),o)this.logger.debug(this.ctx,`Running in agent mode, continue to do the code mapping for ${e.resource}`);else return i&&await this.reportCodeBlock(e,i),e.code;let a=await this.ctx.get(Cr).getOrReadTextDocument({uri:e.resource});if(a.status==="notfound")return i&&await this.reportCodeBlock(e,i),e.code;if(a.status==="invalid"){let v=`Failed to find file ${e.resource} with status ${a.status} and reason ${a.reason}`,b=new Kg(v);throw this.logger.error(this.ctx,v,b),b}let l=new wP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Gm(this.ctx)}),c=await l.render();c=l.transformToFastApplyMessage(c),i&&await i({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock});let u=await this.ctx.get(Nt).updateExPValuesAndAssignments(),d=BG(),p=[],m=0,h=0,g=a.document.getText(),y=g.length+e.code.length+q3t;for(;;){let v={copilotApiProvider:"proxy",modelConfiguration:W3t,messages:c,uiKind:o?"agentPanel":"editsPanel",temperature:0,llmInteraction:n,prediction:{type:"content",content:g}};this.logger.debug(this.ctx,`Send map code request ${d} in iteration ${h} with params: ${JSON.stringify(v,null,2)}`);let E=await this.ctx.get(Js).fetchResponse(v,r,u);if(this.logger.debug(this.ctx,`Received map code response ${d} in iteration ${h} with result: ${JSON.stringify(E,null,2)}`),m=this.calculateResponseLength(E,p,m),E.type==="length"){if(m>y)throw new Kg(`Code mapper might be in a loop: Rewritten length: ${m}, Document length: ${g.length}, Code block length ${e.code.length}`);c=await new wP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Gm(this.ctx),inProgressRewriteContent:E.truncatedValue}).render()}else if(E.type==="success"){let _=p.join("");if(_)return i&&await i({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ti(e.resource),partialText:_,languageId:a.document.detectedLanguageId,markdownCodeFence:L4(_)}),_;{let k=`No valid completion found for uri ${e.resource}`;throw new Kg(k)}}else{if(E.type==="canceled")throw new Pa;{let _=`Failed to map code for uri ${e.resource} with result type ${E.type}`;throw this.logger.error(this.ctx,_,E),new Kg(_)}}h+=1}}calculateResponseLength(e,n,r){return e.type==="success"?(n.push(e.value),r+=e.value.length):e.type==="length"&&(n.push(e.truncatedValue),r+=e.truncatedValue.length),r}async reportCodeBlock(e,n){await n({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock}),await n({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ti(e.resource)})}};f();var Kc=class extends Error{constructor(n){super(n.message);this.editConversationError=n;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var Zv=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,n){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return n||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var DG=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var eb=class{constructor(e,n){this.request=e;this.id=an();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];n&&n.length>0&&(this.workingSet=n)}static{s(this,"EditTurn")}},dce=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(n=>n.id===e)}getTurns(){return[...this.turns]}},PG=class{constructor(e=[],n="panel",r="en"){this._id=an();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=n,this.userLanguage=r,this.turnsManager=new dce(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new DG(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var NG=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,n){switch(n.type){case"success":return n.value;case"offTopic":{e.currentTurn.status="off-topic";let r="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:r,type:"offtopic-detection"},new Kc({message:r,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Dx,type:"user"},new Kc({message:Dx});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:n.reason,type:"server"},new Kc({message:Zv.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw e.currentTurn.status="filtered",new Kc({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new Kc({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new Kc({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new Kc({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new Kc({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new Kc({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new Kc({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new Kc({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*HLe(t){yield t}s(HLe,"stringToAsyncIterable");f();f();var Jg=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,n,r={}){try{let i=e.get(Yg),o=i.getGlobalInstructions(r),a=await i.readFromWorkspaces(e,n,r),l=[...o,...a];return this.processInstructions(l,r)}catch{return}}static processInstructions(e,n={}){if(!e||e.length===0)return;let r=[];for(let o of e){let a=this.createInstructionElement(o,n);a&&r.push(a)}return r.length===0?void 0:`${n.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${r.join(`
`)}</instructions>`}static createInstructionElement(e,n={}){let r=[];for(let i of e.content)i.languageId?n.languageId&&i.languageId===n.languageId&&r.push(`For ${i.languageId} code: ${i.instruction}`):r.push(i.instruction);if(r.length!==0)return r.join(`
`)}static async appendToUserMessage(e,n,r="",i={}){if(!n||n.length===0)return r;let o=await t.getInstructions(e,n,i);return o?o+`

`+r:r}};f();var ly=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,n){let r=e.mapToUriInWorkingSet(n);return r||cl(n)}static uriToPath(e){let n=Wo(e);if(n)return n;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var LG=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),n=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)n.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&n.push({role:"assistant",content:i.response.message});let r=await Jg.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return n.push({role:"user",content:r}),n}getExampleFilePath(e){return this.getFilePath(ly.posixFilePathToUri(e))}getFilePath(e){return ly.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let n of this.props.workingSet){let r=await this.props.textDocumentProvider.getByUri(n.uri);r.status==="valid"&&e.set(n.uri,r.document)}return e}buildSystemMessage(e){let n=[];return n.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${TP} ${this.exampleFilePath}`,`// ${jl}`,"{ changed code }",`// ${jl}`,"{ changed code }",`// ${jl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&n.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&n.push(`You use the ${this.props.modelName} large language model.`),n.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${TP} ${this.tsExampleFilePath}`,"class Person {",`   // ${jl}`,"   age: number;",`   // ${jl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),n.join(`
`)}buildUserMessage(e){let n=[];if(e.size>0){n.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[r,i]of e){let o=new F0({code:i.getText(),languageId:i.detectedLanguageId,uri:r});n.push("<file>",...o.renderAsArray(),"</file>")}}return n.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${jl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&n.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),n.push("</reminder>"),n.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),n.join(`
`)}};f();f();var FG=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:n}=await this._source.next();n?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}async readUntil(e){let n="";for(;!this.endOfStream;){let r=this.readImmediateExcept(e);if(n+=r,await this.peek(1)===e)break}return n}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let n=this._buffer.indexOf(e);return this.readImmediate(n===-1?this._buffer.length:n)}readImmediate(e){let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}};var fce="<file>",_P="```",RP="###",H3t=/^(`+)([^ \n]*)/,SP="filepath:";async function*VLe(t,e){let n=new FG(t[Symbol.asyncIterator]()),r=[];for(;!n.endOfStream;){for(;!n.endOfStream;){let y=await n.peek(Math.max(_P.length,fce.length,RP.length));if(y.startsWith(fce)||y.startsWith(_P))break;if(y.startsWith(RP)){let v=await n.readLineIncludingLF(),b=v.substring(RP.length).trim();await e(b)?r.length=0:r.push(v)}else await jLe(n,r)}if(n.endOfStream)break;let i=await n.readLineIncludingLF(),o=i.startsWith(fce);for(;!n.endOfStream&&!i.startsWith(_P);)i=await n.readLineIncludingLF();if(n.endOfStream)break;let a=i.match(H3t),l=a?a[2]:void 0,c=a4e(l?r4e(l):void 0),u=[`${c.lineComment.start} ${SP}`,`:: ${SP}`,`<!-- ${SP}`,`// ${SP}`,`# ${SP}`],d=Math.max(...u.map(y=>y.length)),p=c.lineComment.end??"",m="</file>",h,g=[];for(;!n.endOfStream;){let y=await n.peek(Math.max(_P.length,d));if(y.startsWith(_P)){let v=await n.readLineIncludingLF();if(!o)break;if(await n.peek(m.length)===m){await n.readLineIncludingLF();break}else{g.push(v);continue}}if(!h&&u.some(v=>y.startsWith(v))){let v=await n.readLineIncludingLF(),b=u.reduce((E,_)=>y.startsWith(_)?v.substring(_.length):E,v);b=b.split("-->")[0].trim(),b.endsWith(p)&&(b=b.substring(0,b.length-p.length)),b=b.trim(),h=await e(b);continue}await jLe(n,g)}yield{resource:h,language:l,code:g.join(""),markdownBeforeBlock:r.join("")},r.length=0}}s(VLe,"getCodeBlocksFromResponse");async function jLe(t,e){for(;!t.endOfStream;){let n=t.readImmediateExcept(`
`);if(n.length>0&&e?.push(n),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(jLe,"pipeOneLine");function $Le(t){if(t.startsWith(`${RP} `))return"";let e=t.indexOf(`
${RP} `);return e===-1?"":t.substring(0,e)+`
`}s($Le,"parseOverallDescription");f();f();var MG=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var j3t=new _t("CopilotEditsConversations"),tl=class{constructor(e){this.editConversations=new Jn(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",n){let r=new PG([],e,n);return this.editConversations.set(r.id,r),r}destroy(e){this.editConversations.delete(e)!==!0&&j3t.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,n){return this.get(e).addTurn(n),n}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getEditConversation(e)}getEditConversation(e){let n=this.editConversations.get(e);if(!n)throw new MG(`Conversation with id ${e} does not exist`);return n}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let n=this.getAll();for(let r of n)if(r.hasTurn(e))return r}};f();f();var Xs=class{static{s(this,"ModelConfigurationProvider")}},QG=class extends Xs{constructor(n){super();this.ctx=n}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(n,r){let i=[];for(let o of n){let a=await this.getFirstMatchingChatModelConfiguration(o,r);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw On.error(this.ctx,`No model configuration found for families: ${n.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Cu).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(n){let r=await this.ctx.get(Cu).getMetadata(),i=$3t(r,n);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(n,r){let i=await this.getFirstMatchingModelMetadata({family:n,type:"chat",supports:r});if(i!==void 0)return n===Sr.Gpt35turbo||n===Sr.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:mce(6144,i),maxResponseTokens:pce(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===Sr.Gpt4||n===Sr.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:mce(10240,i),maxResponseTokens:pce(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===Sr.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:await V3t(this.ctx,i),maxResponseTokens:pce(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(n){let r=await this.getFirstMatchingModelMetadata({family:n,type:"embeddings"});if(r!==void 0)switch(n){case $F.textEmbedding3Small:return{modelId:r.id,modelFamily:n,maxBatchSize:r.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function V3t(t,e){let n=t.get(Nt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatMaxRequestTokens(r);return i===-1&&(i=16384),mce(i,e)}s(V3t,"getExpRequestTokens");function mce(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(mce,"getRequestTokens");function pce(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(pce,"getResponseTokens");function $3t(t,e){return t.filter(n=>n.capabilities.type!==e.type||n.capabilities.family!==e.family&&!(n.is_chat_fallback===!0&&n.id===e.family)||n.capabilities.family===e.family&&n.is_chat_fallback===!0?!1:n.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(r=>e.supports?.[r]===n.capabilities.supports?.[r]))}s($3t,"filterModelsByCapabilities");var Co=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,n,r,i){if(r)return e.get(Xs).getBestChatModelConfig([r]);if(e.get(Vf).quotaExhausted&&!(await e.get(Mn).getToken()).userInfo?.isFreeUser){let o=await e.get(Cu).getFallbackModel();if(o)return e.get(Xs).getBestChatModelConfig([o?.id])}return e.get(Xs).getBestChatModelConfig(Df(n),i)}static transformMessages(e,n){return n===Sr.O1Ga||n===Sr.O1Mini?e.map(r=>r.role!=="user"?{role:"user",content:r.content}:r):e}};var cy=class{constructor(e,n){this.chatFetcher=n;this.ctx=e,this.chatFetcher=this.chatFetcher??new Js(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,n){try{await this.reportBegin(e);let r=await this.getEditCodeResult(e,n),i=NG.processResult(e,r);await this.parseAndSendProgressBack(e,i,n),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(r){if(r instanceof Xv)await this.reportEnd(e,{message:Dx});else if(r instanceof Kc)await this.reportEnd(e,r.editConversationError);else{let i=r instanceof Error?r.message:String(r);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,n){await this.abortIfCancelled(e,n);let r=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Nt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,n);let o=await Co.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Co.transformMessages(r,o.modelFamily);return await this.abortIfCancelled(e,n),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},n,i)}async buildEditCodePromptMessages(e){let n=e.currentTurn,r=await Co.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new LG({userMessage:n.request.message,workspaceFolder:n.workspaceFolder,workingSet:n.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new Gm(this.ctx),modelName:r.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,n){if(n.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Dx,type:"user"},new Xv;this.ctx.get(tl).get(e.editConversationId)}async parseAndSendProgressBack(e,n,r){try{let i=HLe(n),o=new F4(this.ctx),a=s(async u=>ly.pathToUri(e,u),"createUri"),l=[],c=$Le(n);c&&await this.ctx.get(yc).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:c}),await this.abortIfCancelled(e,r);for await(let u of VLe(i,a))l.push(o.mapCode(u,e.toLlmInteraction(),r,async d=>{await this.ctx.get(yc).reportTurn(e,d)}));await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,n)}catch(i){if(i instanceof Kg||i instanceof v5)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof Xv)e.currentTurn.status="cancelled",e.currentTurn.response={message:Dx,type:"user"},await this.reportEnd(e,{message:Dx});else throw i}}async reportNoCodeBlocks(e,n){await this.ctx.get(yc).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:n})}async reportBegin(e){await this.ctx.get(yc).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,n){await this.ctx.get(yc).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:n})}};f();var YLe="github.com",zLe=`https://${YLe}`,M4=class extends ul{constructor(n,r={}){super();this.env=r;this.recalculateUrlDefaults(zLe),ea(n,i=>this.onCopilotToken(n,i))}static{s(this,"DefaultNetworkConfiguration")}onCopilotToken(n,r){this.updateServiceEndpoints(n,r.envelope.endpoints)}getAuthAuthority(){return this.baseUrlObject.host}getAPIUrl(n){return this.join(this.apiUrl,n)}getLoginReachabilityUrl(){return this.loginReachabilityUrl}getTelemetryUrl(n){return this.join(this.telemetryUrl,n)}setTelemetryUrlForTesting(n){this.telemetryUrl=n}validateBaseUrl(n,r){return this.isPermittedUrl(n,r)?!0:(n.get(ja).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${r}".`),!1)}updateBaseUrl(n,r){r||=zLe;let i=this.baseUrlObject;this.validateBaseUrl(n,r)&&this.withTelemetryReInitialization(n,()=>{this.recalculateUrlDefaults(r),i.href!==this.baseUrlObject.href&&n.get(Mn).resetToken()})}updateBaseUrlFromTokenEndpoint(n,r){try{let i=new URL(r);i.hostname.startsWith("api.")?this.updateBaseUrl(n,`https://${i.hostname.substring(4)}`):this.updateBaseUrl(n)}catch{this.updateBaseUrl(n)}}updateServiceEndpoints(n,r){r&&this.isPermittedUrl(n,r.telemetry)&&this.withTelemetryReInitialization(n,()=>{this.telemetryUrl=this.join(r.telemetry,"telemetry")})}withTelemetryReInitialization(n,r){let i=this.telemetryUrl;if(r(),i===this.telemetryUrl)return;let o=n.get(c0);o.isInitialized&&o.reInitialize(n)}recalculateUrlDefaults(n){let r=this.parseUrls(n);this.baseUrlObject=r.base;let i=r.api,o=this.baseUrlObject.host!==YLe;this.apiUrl=i.href,this.loginReachabilityUrl=this.join(this.baseUrlObject.href,"/login/device"),this.telemetryUrl=this.join(o?this.prefixWith("copilot-telemetry-service.",this.baseUrlObject).href:kB.telemetry,"/telemetry")}parseUrls(n){if(this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN)try{return{base:new URL(this.env.GITHUB_SERVER_URL),api:new URL(this.env.GITHUB_API_URL)}}catch{}let r=new URL(n),i=this.prefixWith("api.",r);return{base:r,api:i}}isPermittedUrl(n,r){return this.isValidUrl(r)&&this.hasSupportedProtocol(n,r)}isValidUrl(n){try{if(n)return new URL(n),!0}catch{}return!1}hasSupportedProtocol(n,r){let i=new URL(r).protocol;return i==="https:"||!PF(n)&&i==="http:"}join(n,r){return r?new URL(r,n).href:n}prefixWith(n,r){return new URL(`${r.protocol}//${n}${r.host}`)}};f();var Asr=new _t("exp");function KLe(t){let e=t.get(Nt);e.registerStaticFilters(K3t(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Nr(t,mt.DebugOverrideEngine)||Nr(t,mt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>SF()?"copilot-web":t.get(ur).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>hce(!t.get(co).isProduction()&&t.get(ur).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(ur).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>z3t(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(ur).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>hce(t.get(ur).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Y3t(t)),e.registerDynamicFilterGroup(()=>{let n={};for(let r of t.get(ur).getRelatedPluginInfo()){let i=gf+r.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(Vk).includes(i)){fN(t,{reason:`A filter could not be registered for the unrecognized related plugin "${r.name}".`});continue}n[i]=hce(r.version)}return n})}s(KLe,"setupExperimentationService");function z3t(t){let e=t.get(ur).getEditorPluginInfo();return e.name==="copilot"&&Rf(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(z3t,"getPluginRelease");function Y3t(t){let e=t.get(ur).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(Y3t,"getTargetPopulation");function K3t(t){return J3t(t)}s(K3t,"createAllFilters");function J3t(t){let e=t.get(Rs);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(co).isProduction()?lI(t):"1.999.0"}}s(J3t,"createDefaultFilters");function hce(t){return t.split("-")[0]}s(hce,"trimVersionSuffix");f();var kP=(n=>(n.enabled="enabled",n.disabled="disabled",n))(kP||{}),M0=class{static{s(this,"McpManager")}};f();var Hm=class{static{s(this,"McpRuntimeNotifier")}},OG=class extends Hm{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var Q4=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var gce=class{constructor(e,n){this.baseDebounceTime=e;this.expectedTotalTime=n;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),n=Date.now()-this.providerInvocationTime;return Math.max(0,e-n)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},UG=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let r=this._getExpectedTotalTime(200);return new gce(200,r)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),c=1;for(let d of this._recentUserActions){let p=l-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;c*=1+(h-1)*m}let u=e*c;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var Qo;(r=>{function t(i){return new Ace(i)}r.ok=t,s(t,"ok");function e(i){return new yce(i)}r.error=e,s(e,"error");function n(i){return r.error(new Error(i))}r.fromString=n,s(n,"fromString")})(Qo||={});var Ace=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},yce=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var qG=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,n){let r=Array.from(e.keys()).sort((i,o)=>n(e[i],e[o]));return new t(r)}apply(e){if(e.length!==this.arrayLength)throw w8(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((n,r)=>e[this._indexMap[r]])}mapIndexBack(e){let n=this._indexMap.at(e);if(n===void 0)throw w8(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return n}inverse(){let e=this._indexMap.slice();for(let n=0;n<this._indexMap.length;n++)e[this._indexMap[n]]=n;return new t(e)}};f();f();var jP=Ve(zm());function fMe(t){return t.map(eBt).join(`
`)}s(fMe,"stringifyChatMessages");function eBt({role:t,content:e}){if(t!==jP.Raw.ChatRole.User&&t!==jP.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let n=t===jP.Raw.ChatRole.User?"User":"System",r=e.at(0);return r?.type!==jP.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${n}
------
${r.text}
==================`}s(eBt,"stringifyMessage");f();f();var tBt=Symbol("MicrotaskDelay");function nBt(t){let e=new L1,n=t(e.token),r=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new pg)});Promise.resolve(n).then(l=>{a.dispose(),e.dispose(),i(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return r.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return r.finally(i)}}}s(nBt,"createCancelablePromise");function hy(t,e){return e?new Promise((n,r)=>{let i=setTimeout(()=>{o.dispose(),n()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),r(new pg)})}):nBt(n=>hy(t,n))}s(hy,"timeout");var hH=class{constructor(e,n){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof n=="number"&&this.setIfNotSet(e,n)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,n){if(this._isDisposed)throw new yr("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},n)}setIfNotSet(e,n){if(this._isDisposed)throw new yr("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},n))}};var VP=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,n)=>{this.completeCallback=e,this.errorCallback=n})}complete(e){return new Promise(n=>{this.completeCallback(e),this.outcome={outcome:0,value:e},n()})}error(e){return new Promise(n=>{this.errorCallback(e),this.outcome={outcome:1,value:e},n()})}cancel(){return this.error(new pg)}},rBt;(n=>{async function t(r){let i,o=await Promise.all(r.map(a=>a.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return o}n.settled=t,s(t,"settled");function e(r){return new Promise(async(i,o)=>{try{await r(i,o)}catch(a){o(a)}})}n.withAsyncBody=e,s(e,"withAsyncBody")})(rBt||={});var $P=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(n=>{n.emitMany(e)})}static fromPromise(e){return new t(async n=>{n.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async n=>{await Promise.all(e.map(async r=>n.emitOne(await r)))})}static merge(e){return new t(async n=>{await Promise.all(e.map(async r=>{for await(let i of r)n.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new b0,queueMicrotask(async()=>{let r={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(r)),this.resolve()}catch(i){this.reject(i)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await zI.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,n){return new t(async r=>{for await(let i of e)r.emitOne(n(i))})}map(e){return t.map(this,e)}static filter(e,n){return new t(async r=>{for await(let i of e)n(i)&&r.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,n=>!!n)}coalesce(){return t.coalesce(this)}static async toPromise(e){let n=[];for await(let r of e)n.push(r);return n}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var gH=class{constructor(e){this._deferred=new VP;this._asyncIterable=new $P(i=>{if(n){i.reject(n);return}return r&&i.emitMany(r),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let n,r;this._emitFn=i=>{r||(r=[]),r.push(i)},this._errorFn=i=>{n||(n=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var zP=class t{constructor(e,n){this.firstEditStrategy=e;this.maxLinesPerEdit=n}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},AH=class t{constructor(e,n,r,i,o){this.id=e;this.documents=n;this.activeDocumentIdx=r;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new L1;this.liveDependentants=0;this.fetchIssued=!1;this._result=new VP;Nl(n.length>0),Nl(r>=0&&r<n.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(n=>n.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(n=>YP.deserialize(n)),e.activeDocumentIdx,[],zP.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((n,r)=>` * [${r+1}/${this.documents.length}] ${r===this.activeDocumentIdx?"(active document) ":""}`+n.toMarkdown()).join(`

`)}`}},YP=class t{constructor(e,n,r,i,o,a,l,c,u,d,p,m,h=i.length,g=new Yt(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=n;this.languageId=r;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=l;this.recentEdits=c;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Yt.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Fl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(_m.create(e.id),e.workspaceRoot?gv.parse(e.workspaceRoot):void 0,ZI.create(e.languageId),e.documentLinesBeforeEdit,No.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?zt.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Fl(e.documentBeforeEdits),Ig.deserialize(e.recentEdits),new Fl(e.documentAfterEditsNoShortening),n=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Yt.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Ri=class t{constructor(e,n){this.nextEdit=e;this.telemetry=n}static{s(this,"StatelessNextEditResult")}static noEdit(e,n){let r=Qo.error(e),i=n.build(r);return new t(r,i)}static edit(e,n){let r=Qo.ok(e),i=n.build(r);return new t(r,i)}},ub=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let r=Date.now()-this.startTime,i=this._prompt?fMe(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,l=e.isOk(),c=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:K8(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:c,noNextEditReasonMessage:u,statelessNextEditProviderDuration:r,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,n){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=n,Nl(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function iBt(t,...e){let n=t;for(let r of e)n=r(n);return n}s(iBt,"chainStatelessNextEditProviders");var j4=class{constructor(e,n){this.ID=e;this._providers=n;let r={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=iBt(r,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,n){return this._impl.provideNextEdit(e,n)}},V4=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,n){let r=await this._baseProvider.provideNextEdit(e,n);if(r.nextEdit.isError())return r;let i=r.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return r;if(a.length===0)return new Ri(Qo.error({kind:"filteredOut",message:"uncategorized"}),r.telemetry);let l=qG.createSortPermutation(a,C0(u=>u.lineRange.startLineNumber,x0)),c=new No(l.apply(a));return new Ri(Qo.ok({edit:c,permutation:l.inverse()}),r.telemetry)}},$4=class extends V4{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,n){return n.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,n){let r=e.lineRange.toOffsetRange().slice(n),i=e.newLines,o=i.length===0;if(o&&r.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++){let l=r[a],c=i[a];if(l.trim()!==c.trim())return!1}return!0}},z4=class extends V4{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,n){return n.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,n,r){return n.startLineNumber>1&&e.lineRange.startLineNumber===1||n.endLineNumberExclusive<r&&e.lineRange.endLineNumberExclusive===n.length}};f();f();var oBt=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),sBt=new Map(Object.entries(oBt).map(([t,e])=>[t,{languageId:t,...e}]));function mMe(t){return due(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(mMe,"getLanguage");function due(t){return sBt.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(due,"_getLanguage");f();var Y4=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Nd.isRange(e)&&typeof e.newText=="string":!1}static replace(e,n){return new t(e,n)}static insert(e,n){return t.replace(new Nd(e,e),n)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let n=new t(new Nd(new Io(0,0),new Io(0,0)),"");return n.newEol=e,n}get range(){return this._range}set range(e){if(e&&!Nd.isRange(e))throw db("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw db("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw db("newEol");this._newEol=e}constructor(e,n){this._range=e,this._newText=n}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Io=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isBefore(n)&&(n=i)}return n}static Max(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isAfter(n)&&(n=i)}return n}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:n,character:r}=e;return typeof n=="number"&&typeof r=="number"}get line(){return this._line}get character(){return this._character}constructor(e,n){if(e<0)throw db("line must be non-negative");if(n<0)throw db("character must be non-negative");this._line=e,this._character=n}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,n=0){if(e===null||n===null)throw db();let r;return typeof e>"u"?r=0:typeof e=="number"?r=e:(r=typeof e.lineDelta=="number"?e.lineDelta:0,n=typeof e.characterDelta=="number"?e.characterDelta:0),r===0&&n===0?this:new t(this.line+r,this.character+n)}with(e,n=this.character){if(e===null||n===null)throw db();let r;return typeof e>"u"?r=this.line:typeof e=="number"?r=e:(r=typeof e.line=="number"?e.line:this.line,n=typeof e.character=="number"?e.character:this.character),r===this.line&&n===this.character?this:new t(r,n)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Nd=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Io.isPosition(e.start)&&Io.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,n,r,i){let o,a;if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof i=="number"?(o=new Io(e,n),a=new Io(r,i)):Io.isPosition(e)&&Io.isPosition(n)&&(o=e,a=n),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Io.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let n=Io.Max(e.start,this._start),r=Io.Min(e.end,this._end);if(!n.isAfter(r))return new t(n,r)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let n=Io.Min(e.start,this._start),r=Io.Max(e.end,this.end);return new t(n,r)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,n=this.end){if(e===null||n===null)throw db();let r;return e?Io.isPosition(e)?r=e:(r=e.start||this.start,n=e.end||this.end):r=this.start,r.isEqual(this._start)&&n.isEqual(this.end)?this:new t(r,n)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return aBt(this)}};function db(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(db,"illegalArgument");function aBt(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(aBt,"getDebugDescriptionOfRange");f();function hMe(t){let n=t.split(/\r?\n/).map(lBt),r=n.filter(o=>o===1).length,i=n.filter(o=>o===2).length;return r>i}s(hMe,"looksLikeCode");function lBt(t){if(t.length===0)return 0;let e=0,n=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),Nre(t)||(e+=1);{Nre(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(n+=1),t.match(/^\s/)&&(n+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;n+=o}return e>n?2:n>e?1:0}s(lBt,"guessLineType");var K4;(n=>{function t(r){return r.length===0?[]:r.split(/\r\n|\r|\n/g)}n.fromString=t,s(t,"fromString");function e(r){if(r.lineCount===0)return[];let i=[];for(let o=0;o<r.lineCount;o++)i.push(r.lineAt(o).text);return i}n.fromDocument=e,s(e,"fromDocument")})(K4||={});function cBt(t){return t.replace(/^\s+/g,"")}s(cBt,"trimLeadingWhitespace");function fue(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(fue,"isImportStatement");var uBt=new F1(t=>{let e=mMe(t),{start:n,end:r}=e.lineComment,i=`(?:${Pre(n)})`,o=r?`(?:${Pre(r)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function pue(t,e){let n=t.match(uBt.get(e));if(!n)return;let r=n.index;if(typeof r>"u")return;let i=t.substring(0,r),o=n[0],a=cBt(n[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(pue,"extractEndLineComment");function CH(t,e){let n=pue(t,e);if(!(n&&n.content.trim().length>0&&hMe(n.commentWithoutTokens)))return n}s(CH,"extractExplicativeEndLineComment");var J4=class t extends V4{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,n,r){return e.newLines.some(i=>fue(i,n))||dBt(e,r).some(i=>fue(i,n))}filterEdit(e,n){let r=e.languageId;return n.filter(o=>!t.isImportChange(o,r,e.documentLinesBeforeEdit))}};function dBt(t,e){return qwe(t.lineRange.mapToLineArray(n=>e[n-1]))}s(dBt,"getOldLines");f();var hue=Ve(zm());f();f();f();var Km;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function r(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=r,s(r,"getServiceDependencies")})(Km||={});var tA=U0("instantiationService");function fBt(t,e,n){e[Km.DI_TARGET]===e?e[Km.DI_DEPENDENCIES].push({id:t,index:n}):(e[Km.DI_DEPENDENCIES]=[{id:t,index:n}],e[Km.DI_TARGET]=e)}s(fBt,"storeServiceDependency");function U0(t){if(Km.serviceIds.has(t))return Km.serviceIds.get(t);let e=s(function(n,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");fBt(e,n,i)},"id");return e.toString=()=>t,Km.serviceIds.set(t,e),e}s(U0,"createDecorator");f();f();var q0=class{static{s(this,"SyncDescriptor")}constructor(e,n=[],r=!1){this.ctor=e,this.staticArguments=n,this.supportsDelayedInstantiation=r}};f();var mue=class{constructor(e,n){this.key=e;this.data=n;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},KP=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let n of this._nodes.values())n.outgoing.size===0&&e.push(n);return e}insertEdge(e,n){let r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(n);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){let n=this._hashFn(e);this._nodes.delete(n);for(let r of this._nodes.values())r.outgoing.delete(n),r.incoming.delete(n)}lookupOrInsertNode(e){let n=this._hashFn(e),r=this._nodes.get(n);return r||(r=new mue(n,e),this._nodes.set(n,r)),r}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[n,r]of this._nodes)e.push(`${n}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,n]of this._nodes){let r=new Set([e]),i=this._findCycle(n,r);if(i)return i}}_findCycle(e,n){for(let[r,i]of e.outgoing){if(n.has(r))return[...n,r].join(" -> ");n.add(r);let o=this._findCycle(i,n);if(o)return o;n.delete(r)}}};f();var z2=class{constructor(...e){this._entries=new Map;for(let[n,r]of e)this.set(n,r)}static{s(this,"ServiceCollection")}set(e,n){let r=this._entries.get(e);return this._entries.set(e,n),r}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var pBt=!1,xH=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},vH=class t{constructor(e=new z2,n=!1,r,i=pBt){this._services=e;this._strict=n;this._parent=r;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(tA,this),this._globalGraph=i?r?._globalGraph??new KP(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,pO(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)e_e(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,n){this._throwIfDisposed();let r=this,i=new class extends t{dispose(){r._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),n?.add(i),i}invokeFunction(e,...n){this._throwIfDisposed();let r=JP.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw Mwe("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(a,r);if(!l)throw new Error(`[invokeFunction] unknown service '${a}'`);return l},"get")},...n)}finally{i=!0,r.stop()}}createInstance(e,...n){this._throwIfDisposed();let r,i;return e instanceof q0?(r=JP.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(n),r)):(r=JP.traceCreation(this._enableTracing,e),i=this._createInstance(e,n,r)),r.stop(),i}_createInstance(e,n=[],r){let i=Km.getServiceDependencies(e).sort((l,c)=>l.index-c.index),o=[];for(let l of i){let c=this._getOrCreateServiceInstance(l.id,r);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),o.push(c)}let a=i.length>0?i[0].index:n.length;if(n.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${n.length} static arguments`);let l=a-n.length;l>0?n=n.concat(new Array(l)):n=n.slice(0,a)}return Reflect.construct(e,n.concat(o))}_setCreatedServiceInstance(e,n){if(this._services.get(e)instanceof q0)this._services.set(e,n);else if(this._parent)this._parent._setCreatedServiceInstance(e,n);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let n=this._services.get(e);return!n&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):n}_getOrCreateServiceInstance(e,n){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let r=this._getServiceInstanceOrDescriptor(e);return r instanceof q0?this._safeCreateAndCacheServiceInstance(e,r,n.branch(e,!0)):(n.branch(e,!1),r)}_safeCreateAndCacheServiceInstance(e,n,r){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,n,r)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,n,r){let i=new KP(c=>c.id.toString()),o=0,a=[{id:e,desc:n,_trace:r}],l=new Set;for(;a.length;){let c=a.pop();if(!l.has(String(c.id))){if(l.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new xH(i);for(let u of Km.getServiceDependencies(c.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(u.id)),d instanceof q0){let p={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};i.insertEdge(c,p),a.push(p)}}}}for(;;){let c=i.roots();if(c.length===0){if(!i.isEmpty())throw new xH(i);break}for(let{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof q0){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,n,r=[],i,o){if(this._services.get(e)instanceof q0)return this._createServiceInstance(e,n,r,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,n,r,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${n.name}`)}_createServiceInstance(e,n,r=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(n,r,o);return a.add(l),l}}_throwIfStrict(e,n){if(n&&console.warn(e),this._strict)throw new Error(e)}};var JP=class t{constructor(e,n){this.type=e;this.name=n;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,n){return e?new t(2,n.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,n){return e?new t(1,n.name):t._None}static{this._totals=0}branch(e,n){let r=new t(3,e.toString());return this._dep.push([e,n,r]),r}stop(){let e=Date.now()-this._start;t._totals+=e;let n=!1;function r(o,a){let l=[],c=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){n=!0,l.push(`${c}CREATES -> ${u}`);let m=r(o+1,p);m&&l.push(m)}else l.push(`${c}uses -> ${u}`);return l.join(`
`)}s(r,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||n)&&t.all.add(i.join(`
`))}};var bH=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new z2(...e):e??new z2}static{s(this,"InstantiationServiceBuilder")}define(e,n){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,n)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new vH(this._collection,!0)}};var IH=U0("ITelemetrySender"),Jm=U0("IChatMLFetcher");var EH=class{constructor(){this._stream=new gH;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,n){n.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(n.codeVulnAnnotations=void 0),n.codeVulnAnnotations&&(n.codeVulnAnnotations=n.codeVulnAnnotations.filter(r=>!this._seenAnnotationTypes.has(r.details.type)),n.codeVulnAnnotations.forEach(r=>this._seenAnnotationTypes.add(r.details.type))),this._stream.emitOne({text:e,delta:n})}resolve(){this._stream.resolve()}};f();var gy=U0("IParserService");f();var X4=class{static{s(this,"DiffChange")}constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},XP=class{constructor(e,n=!0){this.lines=e;this.trimWhitespace=n}static{s(this,"LineSequence")}getElements(){let e=[];for(let n=0,r=this.lines.length;n<r;n++)e[n]=this.trimWhitespace?this.lines[n].trim():this.lines[n];return e}getCharCount(){let e=0;for(let n of this.lines)e+=n.length;return e}},ZP=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},fb=class{static{s(this,"Debug")}static Assert(e,n){if(!e)throw new Error(n)}},pb=class{static{s(this,"MyArray")}static Copy(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}static Copy2(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}};var TH=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new X4(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},e9=class t{static{s(this,"LcsDiff")}constructor(e,n){let[r,i]=t._getElements(e),[o,a]=t._getElements(n);this._originalStringElements=r,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let n=e.getElements(),r=new Int32Array(n.length);for(let i=0,o=n.length;i<o;i++)r[i]=this._stringHash(n[i],0);return[n,r]}static _numberHash(e,n){return(n<<5)-n+e|0}static _stringHash(e,n){n=this._numberHash(149417,n);for(let r=0,i=e.length;r<i;r++)n=this._numberHash(e.charCodeAt(r),n);return n}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._originalStringElements[e]===this._modifiedStringElements[n]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,n,r,i){return this.ComputeDiffRecursive(e,n,r,i)}ComputeDiffRecursive(e,n,r,i){for(;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let d;return r<=i?(fb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),d=[new X4(e,0,r,i-r+1)]):e<=n?(fb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new X4(e,n-e+1,r,0)]):(fb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),fb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],l=this.ComputeRecursionPoint(e,n,r,i,o,a),c=o[0],u=a[0];if(l!==null)return l;{let d=this.ComputeDiffRecursive(e,c,r,u),p=this.ComputeDiffRecursive(c+1,n,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,n,r,i,o,a,l,c,u,d,p,m,h,g,y,v,b){let E=null,_=null,k=new TH,D=n,N=r,Q=h[0]-v[0]-i,Z=-1073741824,me=this.m_forwardHistory.length-1;do{let te=Q+e;te===D||te<N&&u[te-1]<u[te+1]?(p=u[te+1],g=p-Q-i,p<Z&&k.MarkNextChange(),Z=p,k.AddModifiedElement(p+1,g),Q=te+1-e):(p=u[te-1]+1,g=p-Q-i,p<Z&&k.MarkNextChange(),Z=p-1,k.AddOriginalElement(p,g+1),Q=te-1-e),me>=0&&(u=this.m_forwardHistory[me],e=u[0],D=1,N=u.length-1)}while(--me>=-1);E=k.getReverseChanges(),k=new TH,D=a,N=l,Q=h[0]-v[0]-c,Z=1073741824,me=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let te=Q+o;te===D||te<N&&d[te-1]>=d[te+1]?(p=d[te+1]-1,g=p-Q-c,p>Z&&k.MarkNextChange(),Z=p+1,k.AddOriginalElement(p+1,g+1),Q=te+1-o):(p=d[te-1],g=p-Q-c,p>Z&&k.MarkNextChange(),Z=p,k.AddModifiedElement(p+1,g+1),Q=te-1-o),me>=0&&(d=this.m_reverseHistory[me],o=d[0],D=1,N=d.length-1)}while(--me>=-1);return _=k.getChanges(),this.ConcatenateChanges(E,_)}ComputeRecursionPoint(e,n,r,i,o,a){let l=0,c=0,u=0,d=0,p=0,m=0;e--,r--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=n-e+(i-r),g=h+1,y=new Int32Array(g),v=new Int32Array(g),b=i-r,E=n-e,_=e-r,k=n-i,N=(E-b)%2===0;y[b]=e,v[E]=n;for(let Q=1;Q<=h/2+1;Q++){let Z=0,me=0;u=this.ClipDiagonalBound(b-Q,Q,b,g),d=this.ClipDiagonalBound(b+Q,Q,b,g);for(let te=u;te<=d;te+=2){te===u||te<d&&y[te-1]<y[te+1]?l=y[te+1]:l=y[te-1]+1,c=l-(te-b)-_;let H=l;for(;l<n&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[te]=l,l+c>Z+me&&(Z=l,me=c),!N&&Math.abs(te-E)<=Q-1&&l>=v[te])return o[0]=l,a[0]=c,H<=v[te]&&Q<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}p=this.ClipDiagonalBound(E-Q,Q,E,g),m=this.ClipDiagonalBound(E+Q,Q,E,g);for(let te=p;te<=m;te+=2){te===p||te<m&&v[te-1]>=v[te+1]?l=v[te+1]-1:l=v[te-1],c=l-(te-E)-k;let H=l;for(;l>e&&c>r&&this.ElementsAreEqual(l,c);)l--,c--;if(v[te]=l,N&&Math.abs(te-b)<=Q&&l<=y[te])return o[0]=l,a[0]=c,H>=y[te]&&Q<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}if(Q<=1447){let te=new Int32Array(d-u+2);te[0]=b-u+1,pb.Copy2(y,u,te,1,d-u+1),this.m_forwardHistory.push(te),te=new Int32Array(m-p+2),te[0]=E-p+1,pb.Copy2(v,p,te,1,m-p+1),this.m_reverseHistory.push(te)}}return this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N)}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){let i=new Array(e.length+n.length-1);return pb.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],pb.Copy(n,1,i,e.length,n.length-1),i}else{let i=new Array(e.length+n.length);return pb.Copy(e,0,i,0,e.length),pb.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(fb.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),fb.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(o=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(l=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new X4(i,o,a,l),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;let o=r,a=i-r-1,l=n%2===0;if(e<0){let c=o%2===0;return l===c?0:1}else{let c=a%2===0;return l===c?i-1:i-2}}};f();f();function gMe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(gMe,"isObject");function wH(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(wH,"assertType");function AMe(t){let e=new Set;return JSON.stringify(t,(n,r)=>{if(gMe(r)||Array.isArray(r)){if(e.has(r))return"[Circular]";e.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}s(AMe,"safeStringify");var _H=!1,yue=!0,mBt=200,t9=class{constructor(e,n){this.ID=e;this._parserService=n;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,n){let r=new ub(e),i=e.getActiveDocument(),o=Y2(i);if(!o||!o.isEmpty())return Ri.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},r);let a=i.documentLinesBeforeEdit,l=i.recentEdit.apply(a),c=[];for(let E of e.documents)E.id!==i.id&&(c.push(`RELATED DOC: ${E.getDisplayPath()}`),c.push("```patch"),c.push(...CBt(E)),c.push("```"),c.push(""));c.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...a),c.push("```"),c.push("");let u="// ...rest of the lines omitted...",d=new Yt(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let E=p<l.length;c.push(`IN PROGRESS VERSION ${E?" PREFIX":""}: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,p)),E&&(c.push(u),m={editRange:new Yt(d.endLineNumberExclusive,p+1),omittedMessage:u}),c.push("```"),c.push("")}c.push(`NEXT VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,d.endLineNumberExclusive-1)),c.push("");let h=l.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(c.join(`
`),h,n);if(n.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r);if(g.isError())return g.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r):Ri.noEdit({kind:"fetchFailure",error:new Error(AMe(g.err))},r);let{result:y}=g.val;if(y.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},r);let v=SH(i.languageId,l,d,void 0,y,m),b=await vue(this._parserService,v,i,{requireEditWithinNLines:5});if(b){let E=new No([b]);return Ri.edit({edit:E},r)}else return Ri.noEdit({kind:"filteredOut",message:"uncategorized"},r)}};t9=pu([Gs(1,gy)],t9);var Z4=class extends t9{constructor(n,r){super(Z4.ID,n);this._chatMLFetcher=r}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(n,r,i){if(i.isCancellationRequested)return Qo.error({kind:"cancel"});let o=await Cue(this.ID,this._chatMLFetcher,[{role:hue.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:hue.OpenAI.ChatRole.User,content:n}],{convergence:r},i);if(o.isError())return o;let{ignored:a,result:l,headersTime:c}=o.val;return l=l.replace(/^```[^\n]*\n/,""),Qo.ok({ignored:a,result:l,headersTime:c})}};Z4=pu([Gs(0,gy),Gs(1,Jm)],Z4);async function Cue(t,e,n,r,i){let o=new EH,a=!1,l,c=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=gBt(c,r),d=e.fetchOne(n,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),o.update(y,b),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;typeof l>"u"&&(l=Date.now()),h&&(a=!0);let g=await d;return g.type!=="success"?Qo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Qo.ok({headersTime:l,ignored:p,result:m})}s(Cue,"fetchUntilConvergence");function Y2(t){let e=new Rt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:hBt(t)}s(Y2,"getOrDeduceSelectionFromLastEdit");function hBt(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],n=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(n.length===0)return new zt(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[n.endLineNumberExclusive-2],l=u5(a,o),c=o.length-l+1;return new zt(i,c,i,c)}s(hBt,"deduceSelectionFromLastEdit");async function gBt(t,e){let n=ABt(t,e.ignoreReplyTextBefore),r=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=r.replace(/\s/g,""),l=[],c=[],u=[],d=[],p=s(m=>{let h=c[0];return{ignored:l[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of n){if(m.kind==="ignore"){l[m.index]=(l[m.index]??"")+m.text;continue}let h=m.text;if(c[m.index]=c[m.index]??"",c[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=c[m.index];if(r.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||r.indexOf(y.join(`
`)+`
`)<=0)continue;let b=d[m.index].substring(d[m.index].length-o);if(a.indexOf(b)>0)return p("convergence!")}return{ignored:l[0]??"",result:c[0]??"",shouldCancelRequest:!1}}s(gBt,"fetchCompletionUntilConvergence");function ABt(t,e){let n=[],r=[];return new $P(async i=>{for await(let o of t)for(let a of o.choices){let l=a.index,c=a.text??"";if(!e||n[l]){i.emitOne({kind:"completion",index:l,text:c});continue}r[l]=(r[l]??"")+c;let u=r[l].match(e);!u||typeof u.index>"u"||(n[l]=!0,i.emitOne({kind:"ignore",index:l,text:r[l].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:r[l].substring(u.index+u[0].length)}),r[l]=void 0)}for(let o=0;o<r.length;o++)typeof r[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:r[o]})})}s(ABt,"getTextAfterFirstPattern");function yBt(t,e,n){let r=e.startLineNumber,i=e.endLineNumberExclusive,o=n.slice(0);for(;r+1<i&&o.length>0;){let a=t[i-2],l=o[o.length-1];if(a!==l)break;i--,o.pop()}for(;r+1<i&&o.length>0;){let a=t[r-1],l=o[0];if(a!==l)break;r++,o.shift()}return new Sm(new Yt(r,i),o)}s(yBt,"createReducedLineEdit");var eR=class{constructor(e,n,r,i){this.languageId=e;this.oldLines=n;this.oldLines=n,this.edit=yBt(n,r,i);let o=new No([this.edit]);this.newLines=o.apply(n)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let n=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),r=this.edit.newLines;return o(n,r)<e;function o(a,l){for(let c=0;c<Math.min(a.length,l.length);c++)if(a[c]!==l[c])return c;return Math.min(a.length,l.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),v=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),b=y.join(`
`),E=v.join(`
`),{editDistance:_}=d(b,E);return new gue(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),n=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),r=!1,i=new XP(this.oldLines,r),o=new XP(this.newLines,r),a=new e9(i,o),l=e(a.ComputeDiff(),i,o),c=n(l),u=[];{let p=0;for(let m of l)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(GI(this.newLines,u))return new Aue(this.languageId,this.oldLines,this.edit,this.newLines,l,c);return CMe(this.languageId,this.oldLines,u);function d(p,m){let h=new ZP(p),g=new ZP(m),v=new e9(h,g).ComputeDiff(),b=0,E=0;for(let N of v)b+=N.originalLength,E+=N.modifiedLength;let _=p.length,k=m.length,D=b+E;return{aChanged:b,bChanged:E,aLength:_,bLength:k,editDistance:D}}}},gue=class{constructor(e,n,r,i,o){this.originalStart=e;this.originalLength=n;this.modifiedStart=r;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},Aue=class{constructor(e,n,r,i,o,a){this.languageId=e;this.oldLines=n;this.edit=r;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new No([this.edit]);{let n=this.groupInHunks();return new No(n.map(r=>{let i=r[0],o=r[r.length-1];return new Sm(new Yt(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!yue)return this;let e=this.groupInHunks(),n=[];for(let r of e)r.every(o=>o.originalLength===0)||r.reduce((a,l)=>a+l.editDistance,0)>mBt&&(n=n.concat(r));if(n.length===this.diff.length)return null;if(n.length>0){let r=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(r)}return this}containWithinLines(e){let n=this.groupInHunks(),r=[];for(let i of n)for(let o of i){let a=o.originalStart+1,l=o.originalStart+o.originalLength+1;if(!xue(new Yt(a,l),e)){r=r.concat(i);break}}if(r.length===this.diff.length)return null;if(r.length>0){let i=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let n of this.diff){let r=e.length>0?e[e.length-1]:null;if(!r){e.push([n]);continue}let i=r[r.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,n.originalStart);if(o.length>1){e.push([n]);continue}if(o[0].trim().length>10){e.push([n]);continue}if(r.reduce((c,u)=>c+u.originalLength,0)>1){e.push([n]);continue}r.push(n)}return e}_recreateNewLinesWithoutDiffs(e){let n=[],r=0;for(let i of e)n=n.concat(this.newLines.slice(r,i.modifiedStart)),n=n.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),r=i.modifiedStart+i.modifiedLength;return n=n.concat(this.newLines.slice(r)),n}async resolveParseErrorCountIfPossible(e,n){let r=new No([this.edit]),i=n(r);this.parseErrorCount=await n9(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(n=>this._createPossibleEditFromLines(n).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let n of this.diff){let r=this.oldLines.slice(n.originalStart,n.originalStart+n.originalLength),i=this.newLines.slice(n.modifiedStart,n.modifiedStart+n.modifiedLength);if(n.modifiedLength===0){if(r.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,0,...r),e(a)}continue}if(n.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,n.modifiedLength),e(a)}continue}for(let o=0;o<r.length&&o<i.length;o++){let a=r[o],l=i[o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,1),e(d)}}}for(let o=1;o<=r.length&&o<=i.length;o++){let a=r[r.length-o],l=i[i.length-o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],n=0,r=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(n,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:l,newDiffModifiedLines:c}=this._eliminateCommentsDiff(o,a);r=r||l,e=e.concat(c),n=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(n)),r?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,n){if(n.length===0){let c=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=CH(d,this.languageId);p&&p.content.trim().length===0?c=!0:u=!0}if(c&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let r=e.map(c=>CH(c,this.languageId)),i=n.map(c=>CH(c,this.languageId)),o=r.filter(c=>!!c).length,a=i.filter(c=>!!c).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:n};if(o>0)return{hasChanges:!1,newDiffModifiedLines:n};let l=!1;for(let c=0;c<n.length;c++){let u=n[c],d=i[c];if(!d)continue;let{content:p}=d;n[c]=u.substring(0,p.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:n}}_createPossibleEditFromLines(e){return CMe(this.languageId,this.oldLines,e)}};function xue(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(xue,"editIsInsideEditWindow");function CMe(t,e,n){let i=e.length+1,o=n.slice(0);return new eR(t,e,new Yt(1,i),o).resolveDiff()}s(CMe,"createPossibleEditFromLines");function SH(t,e,n,r,i,o){if(i.trim().length===0)return[];let a=K4.fromString(i.trimEnd()),l=o?a.some(v=>v.indexOf(o.omittedMessage)>=0):!1,c=[],u=s((v,b)=>{c.push(new eR(t,e,v,b))},"generateEdit");function d(){r&&u(r,a)}s(d,"generateEditCompletionRange");function p(){if(l)return;let b=new Yt(n.endLineNumberExclusive,e.length+1);b.length>a.length+5||u(b,a)}s(p,"generateEditAllDoc");function m(){for(let v=1;v<a.length;v++){let E=a.slice(a.length-v).join(`
`);for(let _=n.endLineNumberExclusive-1;_<e.length;_++){let D=e.slice(_,_+v).join(`
`);E===D&&u(new Yt(n.endLineNumberExclusive,_+1),a.slice(0,a.length-v))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!l)return;let v=[];for(let b of a){if(b.indexOf(o.omittedMessage)>=0){u(o.editRange,v.map(E=>E));return}v.push(b)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let v=i.substring(0,i.lastIndexOf(`
`)+1);c.push(...SH(t,e,n,r,v,o))}return g(c);function g(v){return y(v,s(E=>E.edit.lineRange.startLineNumber+","+E.edit.lineRange.endLineNumberExclusive+","+E.edit.newLines.join("|"),"keyfn"))}function y(v,b){let E=new Set,_=[];for(let k of v){let D=b(k);E.has(D)||(E.add(D),_.push(k))}return _}}s(SH,"generatePossibleEdits");async function vue(t,e,n,r){let a=e.filter(p=>p.hasEditWithinFirstLines(r.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),l=_H?await n9(t,n.languageId,n.documentAfterEditsNoShortening.value):"unknown";if(_H){let p=s(m=>{let h=n.documentAfterEditsNoShortening;return n.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let c=a.filter(p=>l==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=l),u=c.length>0?c:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(vue,"selectBestEdit");function CBt(t){let n=[],r=t.documentLinesBeforeEdit,i=0,o=0,a=-1,l=s((c,u)=>{c>a+1&&n.push("[...]"),u?n.push(`-${r[c]}`):n.push(`${r[c]}`),a=c},"addOldLineIndex");for(let c of t.recentEdit.edits){for(;i<c.lineRange.startLineNumber-1;)Math.min(c.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&l(i,!1),i++;for(;i<c.lineRange.endLineNumberExclusive-1;)l(i,!0),i++;n.push(c.newLines.map(u=>`+${u}`).join(`
`)),o=c.lineRange.endLineNumberExclusive}for(;i<r.length;)i-o+2<=2&&l(i,!1),i++;return n.push("[...]"),n}s(CBt,"summariseDocDiff");function xMe(t){let e=[];for(let n of t.recentEdit.edits){let r=t.documentLinesBeforeEdit.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1),i=n.newLines;if(r.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=n.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${r.length} +${o},${i.length} @@`),e.push(...r.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(xMe,"summarizeEditsAsUnifiedDiff");async function n9(t,e,n){return await t.getTreeSitterAST({languageId:e,getText:s(()=>n,"getText")})?.getParseErrorCount()??"unknown"}s(n9,"getParseErrorCount");f();var Ay=Ve(zm());f();var r9=U0("ITokenizerProvider");var mb=class extends Ay.PromptRenderer{constructor(n,r,i={validate:!0},o,a,l){let c=o.acquireTokenizer({tokenizer:l.tokenizerName}),u={modelMaxPromptTokens:l.tokenBudget};super(u,n,r,c);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(n,r,i,o={validate:!0}){return n.invokeFunction(a=>{let l=a.get(r9);return new mb(r,i,o,l,n,a.get(Jm))})}createElement(n,...r){return this._instantiationService.createInstance(n.ctor,n.props,...r)}async render(n,r,i){let o=await super.render(n,r);i={...{trace:!0},...i};for(let c=1;c<o.messages.length;c++){let u=o.messages[c],d=o.messages[c-1];if(u.role===Ay.Raw.ChatRole.System&&d.role===Ay.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===Ay.Raw.ChatCompletionContentPartKind.Text&&m.type===Ay.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:Ay.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(c,1),c--}}let l=o.messages[o.messages.length-1];if(this.options.validate&&l&&l.role!==Ay.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(n){return(await super.render(void 0,n)).tokenCount}};mb=pu([Gs(3,r9),Gs(4,tA),Gs(5,Jm)],mb);f();var vMe=Ve(zm());var RH=class extends vMe.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();f();var K2=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Rt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=y0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new ir(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ll.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ll(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var bue=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Rt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Nd(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},Xm=class extends bue{constructor(n){super();this.value=n;this._transformer=new K2(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(n){let r=this._transformer.getOffset(new ir(n+1,1)),i=r+this.getLineLength(n);return this.value.substring(r,i)}getLineLength(n){return this._transformer.getLineLength(n+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(n){return n.substring(this.value)}getPositionAtOffset(n){return xBt(this._transformer.getPosition(n))}getOffsetAtPosition(n){return n=this._validatePosition(n),this._transformer.getOffset(vBt(n))}_validatePosition(n){if(n.line<0)return new Io(0,0);let r=this._transformer.textLength.lineCount+1;if(n.line>=r){let o=this._transformer.getLineLength(r);return new Io(r-1,o)}if(n.character<0)return new Io(n.line,0);let i=this._transformer.getLineLength(n.line+1);return n.character>i?new Io(n.line,i):n}};function xBt(t){return new Io(t.lineNumber-1,t.column-1)}s(xBt,"corePositionToVSCodePosition");function vBt(t){return new ir(t.line+1,t.character+1)}s(vBt,"vsCodePositionToCorePosition");f();f();function bMe(t){if(t.length===0)return 1/0;let e=t[0];for(let n=1;n<t.length;n++)e=Math.min(e,t[n]);return e}s(bMe,"min");f();function Eue(t,e){let n=e(t);return{...n,range:[n.range.start,n.range.endExclusive],children:n.children?.map(r=>Eue(r,e))}}s(Eue,"toAstNode");function EMe(t,e){let n=qI(e,a=>a.endExclusive>=t.start),r=y0(e,a=>a.start<=t.endExclusive)+1;if(n===r)return[t];let i=[],o=t.start;for(let a=n;a<r;a++){let l=e[a];l.start>o&&i.push(new Rt(o,l.start)),o=l.endExclusive}return o<t.endExclusive&&i.push(new Rt(o,t.endExclusive)),i}s(EMe,"subtractRange");f();f();f();var kH=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,n){e=YI(e);let r=this.values,i=this.prefixSum,o=n.length;return o===0?!1:(this.values=new Uint32Array(r.length+o),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e),e+o),this.values.set(n,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,n){return e=YI(e),n=YI(n),this.values[e]===n?!1:(this.values[e]=n,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,n){e=YI(e),n=YI(n);let r=this.values,i=this.prefixSum;if(e>=r.length)return!1;let o=r.length-e;return n>=o&&(n=o),n===0?!1:(this.values=new Uint32Array(r.length-n),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e+n),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=YI(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let n=this.prefixSumValidIndex[0]+1;n===0&&(this.prefixSum[0]=this.values[0],n++),e>=this.values.length&&(e=this.values.length-1);for(let r=n;r<=e;r++)this.prefixSum[r]=this.prefixSum[r-1]+this.values[r];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let n=0,r=this.values.length-1,i=0,o=0,a=0;for(;n<=r;)if(i=n+(r-n)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)r=i-1;else if(e>=o)n=i+1;else break;return new Iue(i,e-a)}};var Iue=class{constructor(e,n){this.index=e;this.remainder=n;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=n}static{s(this,"PrefixSumIndexOfResult")}};var i9=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Cg(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let n=new Uint32Array(this._lines.length);for(let r=0;r<this._lines.length;r++)n[r]=this._lines[r].length+this._eol.length;this._lineStarts=new kH(n)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:n}=e;for(let r=n.length-1;r>=0;r--){let i=n[r],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,n){if(n.length===0)return;let r=Cg(n);if(r.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]+this._lines[e.line].substring(e.character));return}r[r.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]);let i=new Uint32Array(r.length-1);for(let o=1;o<r.length;o++)this._lines.splice(e.line+1+o-1,0,r[o]),i[o-1]=r[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,n){this._lines[e]=n,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let n=this._lineStarts.getIndexOf(e),r=this._lines[n.index].length;return new Io(n.index,Math.min(n.remainder,r))}toRange(e){return new Nd(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Rt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let n=e.map(r=>new Y4(this.validateRange(r.range),r.newText));return new Xf(n.map(r=>new Ka(this.toOffsetRange(r.range),r.newText)))}toTextEdits(e){return e.edits.map(n=>new Y4(this.toRange(n.replaceRange),n.newText))}validatePosition(e){if(!(e instanceof Io))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:n,character:r}=e,i=!1;if(n<0)n=0,r=0,i=!0;else if(n>=this._lines.length)n=this._lines.length-1,r=this._lines[n].length,i=!0;else{let o=this._lines[n].length;r<0?(r=0,i=!0):r>o&&(r=o,i=!0)}return i?new Io(n,r):e}validateRange(e){return new Nd(this.validatePosition(e.start),this.validatePosition(e.end))}};var BH=class{constructor(e,n){this.originalText=e;this.edits=n;this._positionOffsetTransformer=new yg(()=>new i9(this.text));this._originalPositionOffsetTransformer=new yg(()=>new i9(this.originalText));this._text=new yg(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let n=this.originalPositionOffsetTransformer.toOffsetRange(e),r=this.projectOffsetRange(n);return this.positionOffsetTransformer.toRange(r)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let n=this.positionOffsetTransformer.toOffsetEdit(e),r=this.projectBackOffsetEdit(n);return this.originalPositionOffsetTransformer.toTextEdits(r)}};var Tue=class{constructor(e,n,r,i,o){this.parent=e;this.overlayNode=n;this.range=r;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},X2=class extends BH{constructor(n,r){super(n.getText(),r);this.baseDocument=n}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function PH(t,e,n){let r=[],i=[],o=[];for(let l=0;l<n.length;l++){let{document:c,overlayNodeRoot:u,selection:d}=n[l],p=c.getText(),m=d?c.rangeToOffsetRange(d):void 0,h=IMe(u,c),g=wue.fromRootNode(h,p),y=_ue.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(Q=>Q.node.range.intersectsOrTouches(m)?(Q.node.children.length===0&&Q.markAsSurviving(),!0):!1),r.push(y),i.push(y.getTextFragment());let v=s(Q=>m?Q.range.endExclusive<m.start?m.start-Q.range.endExclusive:Q.range.start>m.endExclusive?3*(Q.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),b=new F1(Q=>m?Q.children.length===0?Q.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:bMe(Q.children.map(Z=>b.get(Z)))+1:0),E=new F1(Q=>{let Z=Q.parent?E.get(Q.parent):Number.MAX_SAFE_INTEGER,me=b.get(Q);return Math.min(Z,me)}),_=!!e.tryPreserveTypeChecking,k=s(Q=>_&&Q.node?.kind==="import_statement"?0:100*E.get(Q)+Q.depth+10*(v(Q)/p.length),"costFn"),D=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(c):e.costFnOverride;if(D!==void 0){let Q=k;k=s(Z=>{let me=Q(Z);return me===!1?!1:Z.node?D(Z.node,me,c):me},"costFn")}let N=y.getDescendantsAndSelf();for(let Q of N){if(!Q.node.node)continue;let Z=k(Q.node);Z!==!1&&o.push({idx:l,node:Q,cost:Z})}}o.sort(C0(l=>l.cost,x0));for(let{node:l,idx:c}of o){if(l.markAsSurviving(),r.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[c]=r[c].getTextFragment()}let a=[];for(let l=0;l<i.length;l++){let c=i[l],{document:u}=n[l],d=new X2(u,c.toTextEditFromOriginal(u.getText().length)),p=d,m=r[l];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:EMe(Rt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:Eue(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(PH,"summarizeDocumentsSyncImpl");function IMe(t,e,n=void 0){let r=new Rt(t.startIndex,t.endIndex),i=[],o=new Tue(n,t,r,i,e);for(let a of t.children)i.push(IMe(a,e,o));return o}s(IMe,"createRemovableNodeFromOverlayNode");var wue=class t{constructor(e,n,r,i,o,a){this.node=e;this.range=n;this.children=r;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,n){let r=new Rt(0,n.length);if(e.range.equals(r))return t.fromNode(e,n);let i=new Rt(0,e.range.start),o=new Rt(e.range.endExclusive,n.length),a=[],l=new t(void 0,r,a,0,null,n);return i.isEmpty||a.push(new t(void 0,i,[],0,l,n)),a.push(t.fromNode(e,n,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,l,n)),l}static fromNode(e,n,r=0,i=null){let o=[],a=new t(e,e.range,o,r,i,n);if(e.children.length>0){let l=e.range.start;for(let u of e.children){let d=new Rt(l,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],r,a,n)),o.push(t.fromNode(u,n,r+1,a)),l=u.range.endExclusive}let c=new Rt(l,e.range.endExclusive);c.isEmpty||o.push(new t(void 0,c,[],r,a,n))}return a}getLeadingWs(){return bBt(this.document,this.range)}getTrailingWs(){return EBt(this.document,this.range)}};function bBt(t,e){let n=e.substring(t),r=n.length-n.trimStart().length;return n.substring(0,r)}s(bBt,"getLeadingWs");function EBt(t,e){let n=e.substring(t),r=n.length-n.trimEnd().length;return n.substring(n.length-r)}s(EBt,"getTrailingWs");var _ue=class t{constructor(e,n,r,i,o){this.node=e;this.parent=n;this.childNodes=r;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,n,r){return t.fromNodeParent(e,null,n,r)}static fromNodeParent(e,n,r,i){let o=[],a=new t(e,n,o,r,i);for(let l of e.children){let c=t.fromNodeParent(l,a,r,i);o.push(c)}return a}visitAll(e){if(e(this))for(let n of this.childNodes)n.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new hb(this.node.range,this.node.document);if(!this._surviving)return new J2("");let e=Array.from(WS(this.childNodes.map(r=>({node:r,fragment:r.getTextFragment()})),(r,i)=>r.fragment.length===0==(i.fragment.length===0)));for(let r=0;r<e.length;r++){let i=e[r],o=i[0].fragment.length===0;if(o&&r>0&&r<e.length-1){let a=e[r-1].at(-1),l=e[r+1].at(0);if(a.fragment instanceof hb&&l.fragment instanceof hb){let c=a.fragment.trimEnd(),u=l.fragment.trimStart();if(c.endsWith("{")&&u.startsWith("}")){e[r-1][e[r-1].length-1].fragment=c,i.length=1,i[0].fragment=new J2(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[r+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(r>0||r<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),l=a.lastIndexOf(`
`);l!==-1&&(a=a.substring(l+1));let c=i.at(-1).node.node.getTrailingWs();i[0].fragment=new J2(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+c)}}let n=[];for(let r of e)for(let i of r)IBt(n,i.fragment);return DH.from(n)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let n of this.childNodes)n._getDescendantsAndSelf(e)}},o9=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let n=[],r=0,i="";function o(l){(r!==l||i.length>0)&&(n.push(new Ka(new Rt(r,l),i)),i="")}s(o,"emit");function a(l){if(l instanceof DH)for(let c of l.fragments)a(c);else l instanceof J2?i+=l.text:l instanceof hb&&(o(l.range.start),r=l.range.endExclusive)}return s(a,"process"),a(this),o(e),new Xf(n)}},J2=class extends o9{constructor(n){super();this.text=n}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},hb=class t extends o9{constructor(n,r){super();this.range=n;this.originalText=r}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let n=this.text.trimStart();return n.length===this.length?this:new t(new Rt(this.range.endExclusive-n.length,this.range.endExclusive),this.originalText)}trimEnd(){let n=this.text.trimEnd();return n.length===this.length?this:new t(new Rt(this.range.start,this.range.start+n.length),this.originalText)}startsWith(n){return this.text.startsWith(n)}endsWith(n){return this.text.endsWith(n)}tryJoin(n){return this.range.endExclusive===n.range.start?new t(new Rt(this.range.start,n.range.endExclusive),this.originalText):null}},DH=class t extends o9{constructor(n){super();this.fragments=n;this.length=this.fragments.reduce((n,r)=>n+r.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(n){return n.length===0?new J2(""):n.length===1?n[0]:new t(n)}get text(){return this.fragments.map(n=>n.text).join("")}};function IBt(t,e){if(e.length===0)return;let n=t[t.length-1];if(n&&n instanceof hb&&e instanceof hb){let r=n.tryJoin(e);if(r){t[t.length-1]=r;return}}t.push(e)}s(IBt,"pushFragment");f();var NH=Ve(zm());function s9(t){if(Array.isArray(t))return t.map(n=>s9(n));let e=(0,NH.toMode)(NH.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let n of e.content)n.type==="text"&&(n.text=n.text.trimEnd());return e}s(s9,"rawMessageToCAPI");f();f();var LH=class{constructor(e,n,r,i){this.startIndex=e;this.endIndex=n;this.kind=r;this.children=i;if(e>n)throw new yr("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new yr("Invalid child startIndex");if(a.endIndex>n)throw new yr("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function n(r,i=""){e.push(`${i}${r.kind} [${r.startIndex}, ${r.endIndex}]`),r.children.forEach(o=>n(o,i+"    "))}return s(n,"toString"),n(this),e.join(`
`)}};function wMe(t,e,n){let r=t.getText().split(/\r\n|\r|\n/g),i=n||{tabSize:4},o={getLineCount:s(()=>r.length,"getLineCount"),getLineContent:s(a=>r[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=TBt(o,e),[l]=_Me(t,a,void 0);return l.adjust(t,SMe(e)),l.toOverlayNode(t,!0)}catch{return new FH(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(wMe,"getStructureUsingIndentation");function _Me(t,e,n){if(typeof n<"u"&&n>=e.length)throw new Error(`Invalid region index ${n}`);let r=typeof n>"u"?1:e.getStartLineNumber(n),i=typeof n>"u"?t.getLineCount():e.getEndLineNumber(n),o=[],a=null;for(n=typeof n>"u"?0:n+1;n<e.length;){let l=e.getStartLineNumber(n),c=e.getEndLineNumber(n);if(l>i||c>i)break;let u=a;if([a,n]=_Me(t,e,n),u&&a.startLineNumber<=u.endLineNumber)throw new yr("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<r)throw new yr("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new FH(r,i,o),n]}s(_Me,"createFoldingRangeTree");var FH=class{constructor(e,n,r){this.startLineNumber=e;this.endLineNumber=n;this.children=r;if(e>n)throw new yr("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,n){n?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,n){if(this.endLineNumber<n){let r=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(r),o=/^<\/\w/.test(r);(i||o)&&this.endLineNumber++}for(let r=this.children.length-1;r>=0;r--){let i=this.children[r],o=r+1<this.children.length?this.children[r+1].startLineNumber-1:n;i._adjustRegular(e,o)}}toOverlayNode(e,n){let r=[],i=n&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let l=Sue(e,a,a,"LINE",[]);l&&r.push(l)}r.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Sue(e,o,o,"LINE",[]);a&&r.push(a)}return Sue(e,this.startLineNumber,this.endLineNumber,"FOLD",r)}};function Sue(t,e,n,r,i){let o=t.getOffsetAtPosition(new Io(e-1,0)),a=n<t.getLineCount()?new Io(n,0):new Io(n-1,t.getLineLength(n-1)),l=t.getOffsetAtPosition(a);return new LH(o,l,r,i)}s(Sue,"createOverlayNode");function TBt(t,e){return wBt(t,SMe(e))}s(TBt,"generateFoldingRegions");function SMe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(SMe,"isOffSide");function wBt(t,e){let n=t.getOptions().tabSize,r=new Rue,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let l=t.getLineContent(a),c=SBt(l,n),u=i[i.length-1];if(c===-1){e&&(u.endAbove=a);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let d=u.endAbove-1;d-a>=1&&r.insertFirst(a,d,c)}u.indent===c?u.endAbove=a:i.push({indent:c,endAbove:a,line:a})}return r.toIndentRanges()}s(wBt,"_computeRanges");var _Bt=65535,Z2=16777215,TMe=4278190080,Rue=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,n,r){if(e>Z2||n>Z2)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=n,this._length++,r<1e3&&(this._indentOccurrences[r]=(this._indentOccurrences[r]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=this._length-1,i=0;r>=0;r--,i++)e[i]=this._startIndexes[r],n[i]=this._endIndexes[r];return new kue(e,n)}};function SBt(t,e){let n=0,r=0,i=t.length;for(;r<i;){let o=t.charCodeAt(r);if(o===32)n++;else if(o===9)n=n-n%e+e;else break;r++}return r===i?-1:n}s(SBt,"computeIndentLevel");var kue=class{static{s(this,"FoldingRegions")}constructor(e,n){this._startIndexes=e,this._endIndexes=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],n=s((r,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=r&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let r=0,i=this._startIndexes.length;r<i;r++){let o=this._startIndexes[r],a=this._endIndexes[r];if(o>Z2||a>Z2)throw new Error("startLineNumber or endLineNumber must not exceed "+Z2);for(;e.length>0&&!n(o,a);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(r),this._startIndexes[r]=o+((l&255)<<24),this._endIndexes[r]=a+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Z2}getEndLineNumber(e){return this._endIndexes[e]&Z2}getParentIndex(e){this.ensureParentIndices();let n=((this._startIndexes[e]&TMe)>>>24)+((this._endIndexes[e]&TMe)>>>16);return n===_Bt?-1:n}contains(e,n){return this.getStartLineNumber(e)<=n&&this.getEndLineNumber(e)>=n}findIndex(e){let n=0,r=this._startIndexes.length;if(r===0)return-1;for(;n<r;){let i=Math.floor((n+r)/2);e<this.getStartLineNumber(i)?r=i:n=i+1}return n-1}findRange(e){let n=this.findIndex(e);if(n>=0){if(this.getEndLineNumber(n)>=e)return n;for(n=this.getParentIndex(n);n!==-1;){if(this.contains(n,e))return n;n=this.getParentIndex(n)}}return-1}};f();function eT(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(eT,"fromUnknown");var hl=Ve(zm());var MH="current-version",W0="next-version",kMe=2,BMe=10,DMe=.7,RBt=/```[^\n]*\n/,yy=class extends j4{constructor(n,r,i){super(yy.ID,[o=>new J4(o),o=>new $4(o),o=>new z4(o)]);this.fetcher=n;this._parserService=r;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new UG}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(n,r){if(n.getActiveDocument().id!==r.getActiveDocument().id||n.documents.length!==r.documents.length)return!1;let i=new Map(n.documents.map(a=>[a.id,a]));for(let a of r.documents){let l=i.get(a.id);if(!l||!o(l,a))return!1}return!0;function o(a,l){if(a.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let c=Y2(a),u=c?Bue(a,c):null,d=Y2(l),p=d?Bue(l,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(kMe,BMe)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(n,r){let i=new ub(n),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(n,i,o,r)}catch(c){return Ri.noEdit({kind:"unexpected",error:eT(c)},i)}let l=o.getArtificalDelay();return l>0&&await hy(l),a}async doGetNextEdit(n,r,i,o){return n.documents.some(c=>{if(c.recentEdit.edits.length===0)return!1;for(let u of c.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(n,i,o,r):Ri.noEdit({kind:"activeDocumentHasNoEdits"},r)}async sendRequestAndProcessResult(n,r,i,o){let a=await this.createPrompt(n,i);if(!a)return Ri.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Ri.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(r,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Ri.noEdit(k,o)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:c,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:v}=a;o.setFetchStartedAt(),n.fetchIssued=!0;let b=await Cue(this.ID,this.fetcher,s9(p),{convergence:g,ignoreReplyTextBefore:RBt,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),i.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(b.isError())return b.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Ri.noEdit({kind:"fetchFailure",error:eT(b.err.err)},o);let{result:E}=b.val;if(E.length===0){let k=`<${W0}>
`,D=b.val.ignored.indexOf(k);D>=0&&(E=b.val.ignored.substring(D+k.length))}if(E=kBt(E),E.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},o);let _;if(l&&c&&u){let k=BBt(y,l,c,E);if(!k||k.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let D=DBt(l,k);if(D.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(_H){let Z=await n9(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),me=D.apply(y.documentAfterEditsNoShortening.value);if(await n9(this._parserService,y.languageId,me)>Z)return Ri.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=PBt(y,D);let N=_.edits[0].lineRange.startLineNumber,Q=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!xue(new Yt(N,Q),u))return Ri.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=SH(y.languageId,v,m,h,E,void 0),D=await vue(this._parserService,k,y,{requireEditWithinNLines:100});if(!D)return Ri.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new No([D])}return NBt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):LBt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):FBt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):MBt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):Ri.edit({edit:_},o)}async debounce(n,r){let i=n.getDebounceTime();r.setDebounceTime(i),await hy(i)}async createPrompt(n,r){let i=n.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=i.documentAfterEdits.value.split(a),c=Y2(i);if(c===null)return;let u=Bue(i,c),d=new Xm(i.documentAfterEditsNoShortening.value),p=await UBt(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let me=QBt(i.documentAfterEditsLines,c.startLineNumber),te=Math.max(1,Math.min(me,c.startLineNumber-kMe)),H=c.startLineNumber-te,W=Math.min(l.length,c.endLineNumber+BMe),re=W-c.endLineNumber,oe=u.line-H,V=u.line+re,q=new Nd(oe,0,V,d.getLineLength(V));return{firstEditableLineInShortenedDocument:te,lastEditableLineInShortenedDocument:W,editWindow:q}}(),y=PH(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],v=new Yt(1,m),b=new Yt(m,h+1),E=y.text,{messages:_,prediction:k,editWindowIsInPrompt:D}=await this._renderPrompt({request:n,activeDocumentSlice:E,languageId:i.languageId},r),N=E.split(/\r\n|\r|\n/).length,Q=y.projectRange(g),Z=y.positionOffsetTransformer.toOffsetRange(Q);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Yt(Q.start.line+1,Q.end.line+2),allowedEditLineRange:new Yt(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:D,activeDocument:i,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:E,expectedConvergencePrefix:Z.start,maxCompletionLineCount:N+20}}async _renderPrompt(n,r){let o=await mb.create(this._instantiationService,Pue,n).render(void 0,r,{trace:!1}),a=o.metadata.get(WH)?.prediction,l=!!o.metadata.get(OH);return{messages:o.messages,prediction:a,editWindowIsInPrompt:l}}};yy=pu([Gs(0,Jm),Gs(1,gy),Gs(2,tA)],yy);function kBt(t){function e(n,r,i){let o=n.lastIndexOf(r);if(o===-1)return n;let a=n.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${W0}>`,`
`),t=e(t,`\`\`\`
</${W0}>`,`
`),t=e(t,`</${W0}>`,`
`),t}s(kBt,"removeSuffixFromReply");function Bue(t,e){let n=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),r=t.toOffsetOnDocumentAfterEditsNoShortening(n);return new Xm(t.documentAfterEditsNoShortening.value).getPositionAtOffset(r)}s(Bue,"getCursorPositionInOuterDocument");function BBt(t,e,n,r){let i=K4.fromString(e.text),o=K4.fromString(r.trimEnd()),l=new eR(t.languageId,i,new Yt(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),c=e.isOriginal?l:l.containWithinLines(n);if(!c)return null;let u=yue?c.eliminateLargeChangeHunks():c;return u?u.toLineEdit("multiple-hunks"):null}s(BBt,"generateSummarizedEditWindowEdit");function DBt(t,e){let n=e.toEdit(new Fl(t.text));return t.projectBackOffsetEdit(n.toOffsetEdit())}s(DBt,"convertSummarizedEditWindowEditToOuterDocumentEdit");function PBt(t,e){let n=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Ls.replace(new Rt(a,a+i.replaceRange.length),i.newText)}),r=new Vc(t.documentAfterEdits,ys.create(n));return No.fromEdit(r)}s(PBt,"convertOuterDocumentEditToProjectedEdit");function NBt(t,e){let n=e.toEdit(t.documentAfterEdits),r=PMe(t.documentAfterEdits.value,n),i=new QH,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(PMe(o,a)),o=a.apply(o);return!!i.isUndoneBy(r)}s(NBt,"editWouldUndo");function LBt(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!QMe(n))return!1;for(let r=t.recentEdits.edits.length-1;r>=0;r--){let i=t.recentEdits.edits[r],o=n.tryRebase(i);if(!o)return!0;n=o}return!1}s(LBt,"editWouldDeleteWhatWasJustInserted");function FBt(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!QMe(n))return!1;for(let r of n.edits){let i=t.documentAfterEdits.value.substring(r.range.start,r.range.endExclusive);if(pue(i,t.languageId))return!0}return!1}s(FBt,"editWouldDeleteAComment");function MBt(t,e){if(e.edits.length!==1)return!1;let n=e.edits[0];if(!n.lineRange.isEmpty)return!1;let r=s(l=>l.trim().length>5,"isSignificantLine"),i=new Set(n.newLines.filter(r));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(r));return Due(o,i)/i.size>.8}s(MBt,"editWouldDuplicateExistingLines");function QMe(t){let e=t.edits.reduce((r,i)=>r+i.range.length,0);return t.edits.reduce((r,i)=>r+i.newText.length,0)===0&&e>0}s(QMe,"editIsDeletion");function QBt(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(QBt,"findLineNumberAboveWithContent");var QH=class t{constructor(e=new Set,n=new Set){this.inserted=e;this.deleted=n}static{s(this,"InformationDelta")}combine(e){return new t(LMe(this.inserted,e.inserted),LMe(this.deleted,e.deleted))}isUndoneBy(e){let n=FMe(e.inserted,e.deleted),r=FMe(e.deleted,e.inserted),i=Due(r,this.inserted),o=Due(n,this.deleted);return r.size>6&&i/r.size>DMe||n.size>6&&o/n.size>DMe}};function PMe(t,e){let n=new Set,r=new Set,i=s(a=>{if(!a)return;let l=t.substring(a.start,a.endExclusive);for(let c of l.split(/\r\n|\r|\n/)){c=c.trim();for(let u of NMe(c))r.add(u)}},"tryAddDeleted"),o=s(a=>{for(let l of a.split(/\r\n|\r|\n/)){l=l.trim();for(let c of NMe(l))n.add(c)}},"tryAddInserted");for(let a of e.edits){let l=a.removeCommonPrefix(t).removeCommonSuffix(t),c=a.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(i(l.range),i(c.range),i(l.range.intersect(c.range)),o(OBt(l.newText,c.newText)))}return new QH(n,r)}s(PMe,"getInformationDelta");function OBt(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.slice(0,t.length-r),o=e.slice(r);if(i===o)return i}return""}s(OBt,"trimOverlap");function NMe(t){let e=[];for(let n=4;n<t.length;n++){let r=t.slice(n-4,n);e.push(r)}return e}s(NMe,"to4grams");function LMe(t,e){let n=new Set;for(let r of t)n.add(r);for(let r of e)n.add(r);return n}s(LMe,"setUnion");function FMe(t,e){let n=new Set;for(let r of t)e.has(r)||n.add(r);return n}s(FMe,"setMinus");function Due(t,e){let n=0;for(let r of t)e.has(r)&&n++;return n}s(Due,"setIntersectionCount");async function UBt(t,e){let r=await t.getTreeSitterAST(e)?.getStructure();return r||wMe(new Xm(e.getText()),e.languageId,void 0)}s(UBt,"getStructure");var Pue=class extends hl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,n){let{request:r,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${W0}>`,`\`\`\`${o}`,`${i}`,"```",`</${W0}>`].join(`
`),l=(0,hl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new WH(a)}),vscpp(hl.SystemMessage,{priority:1e3},vscpp(RH,null),this._getInstructions()),vscpp(hl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(hl.Chunk,{priority:300},vscpp(UH,{doc:c}))):vscpp(hl.Chunk,{priority:100+u},vscpp(UH,{doc:c}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(hl.Chunk,{priority:300},vscpp(qH,{doc:c}))):vscpp(hl.Chunk,{priority:200+u},vscpp(qH,{doc:c}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(hl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new OH}),"Here is the piece of code I am currently editing in"," ",r.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",MH,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",MH,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",MH,"> and </",MH,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",W0,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",W0,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",W0,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",W0,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",W0,">IDENTICAL</",W0,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",W0,">.")}}},OH=class extends hl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},UH=class extends hl.PromptElement{static{s(this,"OriginalDocument")}async render(e,n){let{doc:r}=this.props,i=[];for(let o=0;o<r.documentLinesBeforeEdit.length;o++){let a=r.documentLinesBeforeEdit[o];i.push(`${r.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,r.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},qH=class extends hl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,n){let{doc:r}=this.props,i=[];return i.push("```"),i.push(`---${r.getDisplayPath()}:`),i.push(`+++${r.getDisplayPath()}:`),i.push(...xMe(r)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},WH=class extends hl.PromptMetadata{constructor(n){super();this.prediction=n}static{s(this,"PredictionMetadata")}};f();f();function OMe(t,e){let n=[];for(let[r,i]of t.entries())i===e&&n.push(r);return n}s(OMe,"findIndexes");function qBt(t,e,n,r=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=OMe(n,e[o]).slice(0,r);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=n[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let c=[...e],d=OMe(t,e[l]).slice(-r).reverse();for(let p of d){let m=!1,h=l;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...c]}return e}s(qBt,"deduplicateEditRegion");function UMe(t,e,n){let r=t.getLines(),i=r.slice(0,e[0]),o=r.slice(e[1]+1);return{updatedEditWindow:qBt(i,n.split(/\r?\n/),o).join(`
`)}}s(UMe,"postProcessUpdatedEditWindow");f();var Nue={id:"xtab-274-2-full-ft",name:"xtab-4o-mini-finetuned"};f();var GH=Ve(zm());function qMe(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===GH.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===GH.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(qMe,"getTextPart");function WBt(t){return{type:GH.Raw.ChatCompletionContentPartKind.Text,text:t}}s(WBt,"toTextPart");function Lue(t){return[WBt(t)]}s(Lue,"toTextParts");f();var HH=U0("IDiffService");var Uue=Ve(zm());f();var jH="<|cursor|>",tT="<|code_to_edit|>",tR="<|/code_to_edit|>",GMe="<|area_around_code_to_edit|>",HMe="<|/area_around_code_to_edit|>",GBt="<|current_file_content|>",HBt="<|/current_file_content|>",jBt="<|edit_diff_history|>",VBt="<|/edit_diff_history|>",$Bt="<|recently_viewed_code_snippets|>",zBt="<|/recently_viewed_code_snippets|>",YBt="<|recently_viewed_code_snippet|>",KBt="<|/recently_viewed_code_snippet|>",jMe=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${tT} and ${tR} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${jH}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${tT} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${tT} and ${tR} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${tT} or ${tR} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function VMe(t,e,n,r){let i=t.getActiveDocument(),o=ZBt(t,r),a=JBt(t,r,2e3),l=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${$Bt}
${o}
${zBt}

${GBt}
current_file_path: ${l}
${e}
${HBt}

${jBt}
${a}
${VBt}

${n}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${jH}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${tT}\` and \`${tR}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(VMe,"getUserPrompt");function JBt(t,e,n){let r=[];for(let a of t.xtabEditHistory.reverse()){let l=XBt(a);if(l===null)continue;let c=e(l);if(n-=c,n<0)break;r.push(l)}let i=r.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(JBt,"getEditDiffHistory");function XBt(t){let e=[],n=No.fromEdit(t.edit);for(let i of n.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(c=>c.trim().length>0).length===0&&a.filter(c=>c.trim().length>0).length===0)continue;let l=i.lineRange.startLineNumber-1;e.push(`@@ -${l},${o.length} +${l},${a.length} @@`),e.push(...o.map(c=>`-${c}`)),e.push(...a.map(c=>`+${c}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(XBt,"generateDocDiff");function WMe(t,e,n=!1){let r=n?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[YBt,r,e,KBt].join(`
`)}s(WMe,"formatCodeSnippet");function ZBt(t,e,n=2e3,r=!1){n=n||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),l=[],c=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);r&&(p=p.map((v,b)=>`${b+1}|${v}`));let m=p.map(v=>e(v)+1),h=e(WMe(d.path,"",!0)),g=m.reduce((v,b)=>v+b,0)+h,y=!1;for(;p.length>0&&c+g>n;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(c+=g,l.push(WMe(d.path,p.join(`
`),y)))}return l.join(`

`)}s(ZBt,"getRecentCodeSnippets");function Fue(t,e,n){if(!t.length)return[0,0];let r=n*4,i=0,o=e?t.length-1:0;for(;i<r;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Fue,"truncateCode");var $Me=2,zMe=10,Mue=15,Que=1e3,Oue=2e3;var nA=class extends j4{constructor(n,r){super(nA.ID,[i=>new J4(i),i=>new $4(i),i=>new z4(i)]);this.diffService=n;this._chatMLFetcher=r;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(n,r){let i=new ub(n);try{if(n.xtabEditHistory.length===0)return Ri.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(n,r,i);return new Ri(o,i.build(o))}catch(o){return Ri.noEdit({kind:"unexpected",error:eT(o)},i)}}async doGetNextEdit(n,r,i){let o=n.getActiveDocument(),a=Y2(o);if(a===null)return Qo.error({kind:"uncategorized",error:eT(new Error("NoSelection"))});let l=s(ee=>Math.floor(ee.length/4),"computeTokens"),c=new ir(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(c),d=o.documentAfterEdits.value,p=d.substring(0,u)+jH+d.substring(u),m=c.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-Mue),y=Math.min(h.length,m+Mue+1),v=$Me,b=zMe,E=Math.max(0,m-v),_=Math.min(h.length,m+b+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new zt(E,0,_,0)),D;D=d.split(/\r?\n/).slice(E,_);let N=[E,_],Q=h.slice(E,_),Z=[GMe,...h.slice(g,E),tT,...Q,tR,...h.slice(_,y),HMe].join(`
`),me=Z,te;{let ee=l(Z),de=0;if(ee>=Oue)te=Z,de=g;else{let ne=Math.floor((Oue-ee)/2),[fe]=Fue(h.slice(0,g),!0,ne),[,pe]=Fue(h.slice(y),!1,ne);de=Math.max(fe,m-Que);let Be=Math.min(pe+y,m+Que+1);te=[...h.slice(de,g),Z,...h.slice(y,Be)].join(`
`)}}let H=VMe(n,te,me,l),W=[{role:Uue.Raw.ChatRole.System,content:Lue(jMe)},{role:Uue.Raw.ChatRole.User,content:Lue(H)}];if(i.setPrompt(W),await this.debounce(i),r.isCancellationRequested)return Qo.error({kind:"gotCancelled",message:"afterDebounce"});n.fetchIssued=!0;let re=new s5,oe,V=await this._chatMLFetcher.fetchOne(s9(W),async(ee,de,ne)=>{oe===void 0&&(oe=re.elapsed())},{id:Nue.id,name:Nue.name},{temperature:0},r);if(V.type==="canceled")return Qo.error({kind:"gotCancelled",message:"afterFetchCall"});if(V.type!=="success")return Qo.error({kind:"fetchFailure",error:eT(V)});oe&&i.setTtft(oe),i.setResponse(V.value);let q=nA.getBacktickSection(V.value);return await this.generateReturnEditFormat(o,k,D.join(`
`),q,N,i)}async generateReturnEditFormat(n,r,i,o,a,l){let{updatedEditWindow:c}=UMe(n.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,c,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=c.split(/\r?\n/),p=u.changes.map(m=>new Sm(new Yt(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Qo.error({kind:"noSuggestions"}):Qo.ok({editWindow:r,edit:new No(p)})}static getBacktickSection(n){return n.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(n){let r=Date.now()-n.startTime,i=Math.max(0,nA.DEBOUNCE_MS-r);n.setDebounceTime(i),await hy(i)}};nA=pu([Gs(0,HH),Gs(1,Jm)],nA);f();var VH=class t extends Ho{constructor(n,r=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=r;this.idToEntry=new Map,this.history=new H8,E0(this,n.openDocuments,(i,o)=>{o.add(xg(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Nl(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let l=a.rootedEdits.changes[0];if(l.edits.length===0)return;let c=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new Vc(u,l);if(c===void 0){this.pushToHistory(i.id,d);return}let p=c.entry.edit,m=No.fromEdit(p),h=No.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){c.removeFromHistory();let g=p.edit.compose(l),y=new Vc(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(n,r){let i={docId:n,edit:r},o=this.history.push(i);if(this.idToEntry.set(n,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let l=this.idToEntry.get(a.docId);l!==void 0&&a===l.entry&&this.idToEntry.delete(a.docId)}}}};f();f();f();f();var que=class t{constructor(e){this.edits=e;Ru(()=>cv(e,(n,r)=>n.range.getEndPosition().isBeforeOrEqual(r.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,n){let r=e.edits.map(i=>new rA(n.getTransformer().getRange(i.replaceRange),i.newText));return new t(r)}static single(e,n){return new t([new rA(e,n)])}static insert(e,n){return new t([new rA(zt.fromPositions(e,e),n)])}normalize(){let e=[];for(let n of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(n.range.getStartPosition())){let r=e[e.length-1];e[e.length-1]=new rA(r.range.plusRange(n.range),r.text+n.text)}else n.isEmpty||e.push(n);return new t(e)}mapPosition(e){let n=0,r=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let l=o.range.getEndPosition(),c=Ll.ofText(o.text);if(e.isBefore(l)){let u=new ir(a.lineNumber+n,a.column+(a.lineNumber+n===r?i:0)),d=c.addToPosition(u);return $H(u,d)}a.lineNumber+n!==r&&(i=0),n+=c.lineCount-(o.range.endLineNumber-o.range.startLineNumber),c.lineCount===0?l.lineNumber!==a.lineNumber?i+=c.columnCount-(l.column-1):i+=c.columnCount-(l.column-a.column):i=c.columnCount,r=l.lineNumber+n}return new ir(e.lineNumber+n,e.column+(e.lineNumber+n===r?i:0))}mapRange(e){function n(a){return a instanceof ir?a:a.getStartPosition()}s(n,"getStart");function r(a){return a instanceof ir?a:a.getEndPosition()}s(r,"getEnd");let i=n(this.mapPosition(e.getStartPosition())),o=r(this.mapPosition(e.getEndPosition()));return $H(i,o)}inverseMapPosition(e,n){return this.inverse(n).mapPosition(e)}inverseMapRange(e,n){return this.inverse(n).mapRange(e)}apply(e){let n="",r=new ir(1,1);for(let o of this.edits){let a=o.range,l=a.getStartPosition(),c=a.getEndPosition(),u=$H(r,l);u.isEmpty()||(n+=e.getValueOfRange(u)),n+=o.text,r=c}let i=$H(r,e.endPositionExclusive);return i.isEmpty()||(n+=e.getValueOfRange(i)),n}applyToString(e){let n=new Gue(e);return this.apply(n)}inverse(e){let n=this.getNewRanges();return new t(this.edits.map((r,i)=>new rA(n[i],e.getValueOfRange(r.range))))}getNewRanges(){let e=[],n=0,r=0,i=0;for(let o of this.edits){let a=Ll.ofText(o.text),l=ir.lift({lineNumber:o.range.startLineNumber+r,column:o.range.startColumn+(o.range.startLineNumber===n?i:0)}),c=a.createRange(l);e.push(c),r=c.endLineNumber-o.range.endLineNumber,i=c.endColumn-o.range.endColumn,n=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new yr;if(this.edits.length===1)return this.edits[0];let n=this.edits[0].range.getStartPosition(),r=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let l=this.edits[o+1],c=zt.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),u=e.getValueOfRange(c);i+=u}}return new rA(zt.fromPositions(n,r),i)}equals(e){return GI(this.edits,e.edits,(n,r)=>n.equals(r))}},rA=class t{constructor(e,n){this.range=e;this.text=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new yr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.text,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,n){return e.range.equalsRange(n.range)&&e.text===n.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new que([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.text+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}removeCommonPrefix(e){let n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=V8(n,r),o=Ll.ofText(n.substring(0,i)).addToPosition(this.range.getStartPosition()),a=r.substring(i),l=zt.fromPositions(o,this.range.getEndPosition());return new t(l,a)}isEffectiveDeletion(e){let n=this.text.replaceAll(`\r
`,`
`),r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=V8(n,r);n=n.substring(i),r=r.substring(i);let o=u5(n,r);return n=n.substring(0,n.length-o),r=r.substring(0,r.length-o),n===""}};function $H(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return zt.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new yr("start must be before end");return new zt(t.lineNumber,t.column,e.lineNumber,e.column)}s($H,"rangeFromPositions");var zH=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new ir(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new K2(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Cg(e)}},Wue=class extends zH{constructor(n,r){Nl(r>=1);super();this._getLineContent=n;this._lineCount=r}static{s(this,"LineBasedText")}getValueOfRange(n){if(n.startLineNumber===n.endLineNumber)return this._getLineContent(n.startLineNumber).substring(n.startColumn-1,n.endColumn-1);let r=this._getLineContent(n.startLineNumber).substring(n.startColumn-1);for(let i=n.startLineNumber+1;i<n.endLineNumber;i++)r+=`
`+this._getLineContent(i);return r+=`
`+this._getLineContent(n.endLineNumber).substring(0,n.endColumn-1),r}getLineLength(n){return this._getLineContent(n).length}get length(){let n=this._getLineContent(this._lineCount);return new Ll(this._lineCount-1,n.length)}},nT=class extends Wue{static{s(this,"ArrayText")}constructor(e){super(n=>e[n-1],e.length)}},Gue=class extends zH{constructor(n){super();this.value=n;this._t=new K2(this.value)}static{s(this,"StringText")}getValueOfRange(n){return this._t.getOffsetRange(n).substring(this.value)}get length(){return this._t.textLength}};f();var nR=class{constructor(e,n,r){this.changes=e;this.moves=n;this.hitTimeout=r}static{s(this,"LinesDiff")}},rR=class t{static{s(this,"MovedText")}constructor(e,n){this.lineRangeMapping=e,this.changes=n}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var gp=class t{static{s(this,"LineRangeMapping")}static inverse(e,n,r){let i=[],o=1,a=1;for(let c of e){let u=new t(new Yt(o,c.original.startLineNumber),new Yt(a,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,a=c.modified.endLineNumberExclusive}let l=new t(new Yt(o,n+1),new Yt(a,r+1));return l.modified.isEmpty||i.push(l),i}static clip(e,n,r){let i=[];for(let o of e){let a=o.original.intersect(n),l=o.modified.intersect(r);a&&!a.isEmpty&&l&&!l.isEmpty&&i.push(new t(a,l))}return i}constructor(e,n){this.original=e,this.modified=n}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),n=this.modified.toInclusiveRange();if(e&&n)return new Ld(e,n);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new yr("not a valid diff");return new Ld(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Ld(new zt(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new zt(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,n){if(YMe(this.original.endLineNumberExclusive,e)&&YMe(this.modified.endLineNumberExclusive,n))return new Ld(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Ld(zt.fromPositions(new ir(this.original.startLineNumber,1),iR(new ir(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(new ir(this.modified.startLineNumber,1),iR(new ir(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Ld(zt.fromPositions(iR(new ir(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),iR(new ir(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(iR(new ir(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),n),iR(new ir(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));throw new yr}};function iR(t,e){if(t.lineNumber<1)return new ir(1,1);if(t.lineNumber>e.length)return new ir(e.length,e[e.length-1].length+1);let n=e[t.lineNumber-1];return t.column>n.length+1?new ir(t.lineNumber,n.length+1):t}s(iR,"normalizePosition");function YMe(t,e){return t>=1&&t<=e.length}s(YMe,"isValidLineNumber");var gb=class t extends gp{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let n=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.originalRange))),r=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.modifiedRange)));return new t(n,r,e)}constructor(e,n,r){super(e,n),this.innerChanges=r}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Ld=class t{static{s(this,"RangeMapping")}static fromEdit(e){let n=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,n[o]))}static fromEditJoin(e){let n=e.getNewRanges(),r=e.edits.map((i,o)=>new t(i.range,n[o]));return t.join(r)}static join(e){if(e.length===0)throw new yr("Cannot join an empty list of range mappings");let n=e[0];for(let r=1;r<e.length;r++)n=n.join(e[r]);return n}static assertSorted(e){for(let n=1;n<e.length;n++){let r=e[n-1],i=e[n];if(!(r.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&r.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new yr("Range mappings must be sorted")}}constructor(e,n){this.originalRange=e,this.modifiedRange=n}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let n=e.getValueOfRange(this.modifiedRange);return new rA(this.originalRange,n)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};function Hue(t,e,n,r=!1){let i=[];for(let o of WS(t.map(a=>t8t(a,e,n)),(a,l)=>a.original.overlapOrTouch(l.original)||a.modified.overlapOrTouch(l.modified))){let a=o[0],l=o[o.length-1];i.push(new gb(a.original.join(l.original),a.modified.join(l.modified),o.map(c=>c.innerChanges[0])))}return Ru(()=>!r&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||n.length.lineCount-i[i.length-1].modified.endLineNumberExclusive!==e.length.lineCount-i[i.length-1].original.endLineNumberExclusive)?!1:cv(i,(o,a)=>a.original.startLineNumber-o.original.endLineNumberExclusive===a.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<a.original.startLineNumber&&o.modified.endLineNumberExclusive<a.modified.startLineNumber)),i}s(Hue,"lineRangeMappingFromRangeMappings");function t8t(t,e,n){let r=0,i=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+r<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+r<=t.modifiedRange.endLineNumber&&(i=-1),t.modifiedRange.startColumn-1>=n.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+i&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+i&&(r=1);let o=new Yt(t.originalRange.startLineNumber+r,t.originalRange.endLineNumber+1+i),a=new Yt(t.modifiedRange.startLineNumber+r,t.modifiedRange.endLineNumber+1+i);return new gb(o,a,[t])}s(t8t,"getLineRangeMapping");f();var oA=class t{constructor(e,n){this.diffs=e;this.hitTimeout=n}static{s(this,"DiffAlgorithmResult")}static trivial(e,n){return new t([new zo(Rt.ofLength(e.length),Rt.ofLength(n.length))],!1)}static trivialTimedOut(e,n){return new t([new zo(Rt.ofLength(e.length),Rt.ofLength(n.length))],!0)}},zo=class t{constructor(e,n){this.seq1Range=e;this.seq2Range=n}static{s(this,"SequenceDiff")}static invert(e,n){let r=[];return Owe(e,(i,o)=>{r.push(t.fromOffsetPairs(i?i.getEndExclusives():iA.zero,o?o.getStarts():new iA(n,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+n)))}),r}static fromOffsetPairs(e,n){return new t(new Rt(e.offset1,n.offset1),new Rt(e.offset2,n.offset2))}static assertSorted(e){let n;for(let r of e){if(n&&!(n.seq1Range.endExclusive<=r.seq1Range.start&&n.seq2Range.endExclusive<=r.seq2Range.start))throw new yr("Sequence diffs must be sorted");n=r}}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let n=this.seq1Range.intersect(e.seq1Range),r=this.seq2Range.intersect(e.seq2Range);if(!(!n||!r))return new t(n,r)}getStarts(){return new iA(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new iA(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}},iA=class t{constructor(e,n){this.offset1=e;this.offset2=n}static{s(this,"OffsetPair")}static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}},Ab=class t{static{s(this,"InfiniteTimeout")}static{this.instance=new t}isValid(){return!0}},YH=class{constructor(e){this.timeout=e;this.startTime=Date.now();this.valid=!0;if(e<=0)throw new yr("timeout must be positive")}static{s(this,"DateTimeout")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};f();f();var oR=class{constructor(e,n){this.width=e;this.height=n;this.array=[];this.array=new Array(e*n)}static{s(this,"Array2D")}get(e,n){return this.array[e+n*this.width]}set(e,n,r){this.array[e+n*this.width]=r}};function l9(t){return t===32||t===9}s(l9,"isSpace");var a9=class t{constructor(e,n,r){this.range=e;this.lines=n;this.source=r;this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){let a=n[o];for(let c=0;c<a.length;c++){i++;let u=a[c],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}i++;let l=t.getKey(`
`);this.histogram[l]=(this.histogram[l]||0)+1}this.totalCount=i}static{s(this,"LineRangeFragment")}static{this.chrKeys=new Map}static getKey(e){let n=this.chrKeys.get(e);return n===void 0&&(n=this.chrKeys.size,this.chrKeys.set(e,n)),n}computeSimilarity(e){let n=0,r=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<r;i++)n+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-n/(this.totalCount+e.totalCount)}};var KH=class{static{s(this,"DynamicProgrammingDiffing")}compute(e,n,r=Ab.instance,i){if(e.length===0||n.length===0)return oA.trivial(e,n);let o=new oR(e.length,n.length),a=new oR(e.length,n.length),l=new oR(e.length,n.length);for(let g=0;g<e.length;g++)for(let y=0;y<n.length;y++){if(!r.isValid())return oA.trivialTimedOut(e,n);let v=g===0?0:o.get(g-1,y),b=y===0?0:o.get(g,y-1),E;e.getElement(g)===n.getElement(y)?(g===0||y===0?E=0:E=o.get(g-1,y-1),g>0&&y>0&&a.get(g-1,y-1)===3&&(E+=l.get(g-1,y-1)),E+=i?i(g,y):1):E=-1;let _=Math.max(v,b,E);if(_===E){let k=g>0&&y>0?l.get(g-1,y-1):0;l.set(g,y,k+1),a.set(g,y,3)}else _===v?(l.set(g,y,0),a.set(g,y,1)):_===b&&(l.set(g,y,0),a.set(g,y,2));o.set(g,y,_)}let c=[],u=e.length,d=n.length;function p(g,y){(g+1!==u||y+1!==d)&&c.push(new zo(new Rt(g+1,u),new Rt(y+1,d))),u=g,d=y}s(p,"reportDecreasingAligningPositions");let m=e.length-1,h=n.length-1;for(;m>=0&&h>=0;)a.get(m,h)===3?(p(m,h),m--,h--):a.get(m,h)===1?m--:h--;return p(-1,-1),c.reverse(),new oA(c,!1)}};f();var sR=class{static{s(this,"MyersDiffAlgorithm")}compute(e,n,r=Ab.instance){if(e.length===0||n.length===0)return oA.trivial(e,n);let i=e,o=n;function a(y,v){for(;y<i.length&&v<o.length&&i.getElement(y)===o.getElement(v);)y++,v++;return y}s(a,"getXAfterSnake");let l=0,c=new jue;c.set(0,a(0,0));let u=new Vue;u.set(0,c.get(0)===0?null:new JH(null,0,0,c.get(0)));let d=0;e:for(;;){if(l++,!r.isValid())return oA.trivialTimedOut(i,o);let y=-Math.min(l,o.length+l%2),v=Math.min(l,i.length+l%2);for(d=y;d<=v;d+=2){let b=0,E=d===v?-1:c.get(d+1),_=d===y?-1:c.get(d-1)+1;b++;let k=Math.min(Math.max(E,_),i.length),D=k-d;if(b++,k>i.length||D>o.length)continue;let N=a(k,D);c.set(d,N);let Q=k===E?u.get(d+1):u.get(d-1);if(u.set(d,N!==k?new JH(Q,k,D,N-k):Q),c.get(d)===i.length&&c.get(d)-d===o.length)break e}}let p=u.get(d),m=[],h=i.length,g=o.length;for(;;){let y=p?p.x+p.length:0,v=p?p.y+p.length:0;if((y!==h||v!==g)&&m.push(new zo(new Rt(y,h),new Rt(v,g))),!p)break;h=p.x,g=p.y,p=p.prev}return m.reverse(),new oA(m,!1)}},JH=class{constructor(e,n,r,i){this.prev=e;this.x=n;this.y=r;this.length=i}static{s(this,"SnakePath")}},jue=class{constructor(){this.positiveArr=new Int32Array(10);this.negativeArr=new Int32Array(10)}static{s(this,"FastInt32Array")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let r=this.negativeArr;this.negativeArr=new Int32Array(r.length*2),this.negativeArr.set(r)}this.negativeArr[e]=n}else{if(e>=this.positiveArr.length){let r=this.positiveArr;this.positiveArr=new Int32Array(r.length*2),this.positiveArr.set(r)}this.positiveArr[e]=n}}},Vue=class{constructor(){this.positiveArr=[];this.negativeArr=[]}static{s(this,"FastArrayNegativeIndices")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){e<0?(e=-e-1,this.negativeArr[e]=n):this.positiveArr[e]=n}};f();f();var yb=class{constructor(e,n,r){this.lines=e;this.range=n;this.considerWhitespaceChanges=r;this.elements=[];this.firstElementOffsetByLineIdx=[];this.lineStartOffsets=[];this.trimmedWsLengthsByLineIdx=[];this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],a=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);let l=0;if(!r){let u=o.trimStart();l=o.length-u.length,o=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(l);let c=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-l,o.length):o.length;for(let u=0;u<c;u++)this.elements.push(o.charCodeAt(u));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{s(this,"LinesSliceCharSequence")}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Rt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(n=>String.fromCharCode(n)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let n=XMe(e>0?this.elements[e-1]:-1),r=XMe(e<this.elements.length?this.elements[e]:-1);if(n===7&&r===8)return 0;if(n===8)return 150;let i=0;return n!==r&&(i+=10,n===0&&r===1&&(i+=1)),i+=JMe(n),i+=JMe(r),i}translateOffset(e,n="right"){let r=y0(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[r];return new ir(this.range.startLineNumber+r,1+this.lineStartOffsets[r]+i+(i===0&&n==="left"?0:this.trimmedWsLengthsByLineIdx[r]))}translateRange(e){let n=this.translateOffset(e.start,"right"),r=this.translateOffset(e.endExclusive,"left");return r.isBefore(n)?zt.fromPositions(r,r):zt.fromPositions(n,r)}findWordContaining(e){if(e<0||e>=this.elements.length||!aR(this.elements[e]))return;let n=e;for(;n>0&&aR(this.elements[n-1]);)n--;let r=e;for(;r<this.elements.length&&aR(this.elements[r]);)r++;return new Rt(n,r)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!aR(this.elements[e]))return;let n=e;for(;n>0&&aR(this.elements[n-1])&&!KMe(this.elements[n]);)n--;let r=e;for(;r<this.elements.length&&aR(this.elements[r])&&!KMe(this.elements[r]);)r++;return new Rt(n,r)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,n){return this.elements[e]===this.elements[n]}extendToFullLines(e){let n=_1(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,r=Lwe(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new Rt(n,r)}};function aR(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}s(aR,"isWordChar");function KMe(t){return t>=65&&t<=90}s(KMe,"isUpperCase");var n8t={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function JMe(t){return n8t[t]}s(JMe,"getCategoryBoundaryScore");function XMe(t){return t===10?8:t===13?7:l9(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}s(XMe,"getCategory");function eQe(t,e,n,r,i,o){let{moves:a,excludedChanges:l}=i8t(t,e,n,o);if(!o.isValid())return[];let c=t.filter(d=>!l.has(d)),u=o8t(c,r,i,e,n,o);return Wwe(a,u),a=s8t(a),a=a.filter(d=>{let p=d.original.toOffsetRange().slice(e).map(h=>h.trim());return p.join(`
`).length>=15&&r8t(p,h=>h.length>=2)>=2}),a=a8t(t,a),a}s(eQe,"computeMovedLines");function r8t(t,e){let n=0;for(let r of t)e(r)&&n++;return n}s(r8t,"countWhere");function i8t(t,e,n,r){let i=[],o=t.filter(c=>c.modified.isEmpty&&c.original.length>=3).map(c=>new a9(c.original,e,c)),a=new Set(t.filter(c=>c.original.isEmpty&&c.modified.length>=3).map(c=>new a9(c.modified,n,c))),l=new Set;for(let c of o){let u=-1,d;for(let p of a){let m=c.computeSimilarity(p);m>u&&(u=m,d=p)}if(u>.9&&d&&(a.delete(d),i.push(new gp(c.range,d.range)),l.add(c.source),l.add(d.source)),!r.isValid())return{moves:i,excludedChanges:l}}return{moves:i,excludedChanges:l}}s(i8t,"computeMovesFromSimpleDeletionsToSimpleInsertions");function o8t(t,e,n,r,i,o){let a=[],l=new GS;for(let m of t)for(let h=m.original.startLineNumber;h<m.original.endLineNumberExclusive-2;h++){let g=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;l.add(g,{range:new Yt(h,h+3)})}let c=[];t.sort(C0(m=>m.modified.startLineNumber,x0));for(let m of t){let h=[];for(let g=m.modified.startLineNumber;g<m.modified.endLineNumberExclusive-2;g++){let y=`${n[g-1]}:${n[g+1-1]}:${n[g+2-1]}`,v=new Yt(g,g+3),b=[];l.forEach(y,({range:E})=>{for(let k of h)if(k.originalLineRange.endLineNumberExclusive+1===E.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new Yt(k.originalLineRange.startLineNumber,E.endLineNumberExclusive),k.modifiedLineRange=new Yt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(k);return}let _={modifiedLineRange:v,originalLineRange:E};c.push(_),b.push(_)}),h=b}if(!o.isValid())return[]}c.sort(Hwe(C0(m=>m.modifiedLineRange.length,x0)));let u=new e2,d=new e2;for(let m of c){let h=m.modifiedLineRange.startLineNumber-m.originalLineRange.startLineNumber,g=u.subtractFrom(m.modifiedLineRange),y=d.subtractFrom(m.originalLineRange).getWithDelta(h),v=g.getIntersection(y);for(let b of v.ranges){if(b.length<3)continue;let E=b,_=b.delta(-h);a.push(new gp(_,E)),u.addRange(E),d.addRange(_)}}a.sort(C0(m=>m.original.startLineNumber,x0));let p=new T8(t);for(let m=0;m<a.length;m++){let h=a[m],g=p.findLastMonotonous(N=>N.original.startLineNumber<=h.original.startLineNumber),y=_1(t,N=>N.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-g.original.startLineNumber,h.modified.startLineNumber-y.modified.startLineNumber),b=p.findLastMonotonous(N=>N.original.startLineNumber<h.original.endLineNumberExclusive),E=_1(t,N=>N.modified.startLineNumber<h.modified.endLineNumberExclusive),_=Math.max(b.original.endLineNumberExclusive-h.original.endLineNumberExclusive,E.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),k;for(k=0;k<v;k++){let N=h.original.startLineNumber-k-1,Q=h.modified.startLineNumber-k-1;if(N>r.length||Q>i.length||u.contains(Q)||d.contains(N)||!ZMe(r[N-1],i[Q-1],o))break}k>0&&(d.addRange(new Yt(h.original.startLineNumber-k,h.original.startLineNumber)),u.addRange(new Yt(h.modified.startLineNumber-k,h.modified.startLineNumber)));let D;for(D=0;D<_;D++){let N=h.original.endLineNumberExclusive+D,Q=h.modified.endLineNumberExclusive+D;if(N>r.length||Q>i.length||u.contains(Q)||d.contains(N)||!ZMe(r[N-1],i[Q-1],o))break}D>0&&(d.addRange(new Yt(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+D)),u.addRange(new Yt(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+D))),(k>0||D>0)&&(a[m]=new gp(new Yt(h.original.startLineNumber-k,h.original.endLineNumberExclusive+D),new Yt(h.modified.startLineNumber-k,h.modified.endLineNumberExclusive+D)))}return a}s(o8t,"computeUnchangedMoves");function ZMe(t,e,n){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let i=new sR().compute(new yb([t],new zt(1,1,1,t.length),!1),new yb([e],new zt(1,1,1,e.length),!1),n),o=0,a=zo.invert(i.diffs,t.length);for(let d of a)d.seq1Range.forEach(p=>{l9(t.charCodeAt(p))||o++});function l(d){let p=0;for(let m=0;m<t.length;m++)l9(d.charCodeAt(m))||p++;return p}s(l,"countNonWsChars");let c=l(t.length>e.length?t:e);return o/c>.6&&c>10}s(ZMe,"areLinesSimilar");function s8t(t){if(t.length===0)return t;t.sort(C0(n=>n.original.startLineNumber,x0));let e=[t[0]];for(let n=1;n<t.length;n++){let r=e[e.length-1],i=t[n],o=i.original.startLineNumber-r.original.endLineNumberExclusive,a=i.modified.startLineNumber-r.modified.endLineNumberExclusive;if(o>=0&&a>=0&&o+a<=2){e[e.length-1]=r.join(i);continue}e.push(i)}return e}s(s8t,"joinCloseConsecutiveMoves");function a8t(t,e){let n=new T8(t);return e=e.filter(r=>{let i=n.findLastMonotonous(l=>l.original.startLineNumber<r.original.endLineNumberExclusive)||new gp(new Yt(1,1),new Yt(1,1)),o=_1(t,l=>l.modified.startLineNumber<r.modified.endLineNumberExclusive);return i!==o}),e}s(a8t,"removeMovesInSameDiff");f();function $ue(t,e,n){let r=n;return r=tQe(t,e,r),r=tQe(t,e,r),r=l8t(t,e,r),r}s($ue,"optimizeSequenceDiffs");function tQe(t,e,n){if(n.length===0)return n;let r=[];r.push(n[0]);for(let o=1;o<n.length;o++){let a=r[r.length-1],l=n[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=l.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=c&&!(t.getElement(l.seq1Range.start-u)!==t.getElement(l.seq1Range.endExclusive-u)||e.getElement(l.seq2Range.start-u)!==e.getElement(l.seq2Range.endExclusive-u));u++);if(u--,u===c){r[r.length-1]=new zo(new Rt(a.seq1Range.start,l.seq1Range.endExclusive-c),new Rt(a.seq2Range.start,l.seq2Range.endExclusive-c));continue}l=l.delta(-u)}r.push(l)}let i=[];for(let o=0;o<r.length-1;o++){let a=r[o+1],l=r[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=a.seq1Range.start-l.seq1Range.endExclusive,u;for(u=0;u<c&&!(!t.isStronglyEqual(l.seq1Range.start+u,l.seq1Range.endExclusive+u)||!e.isStronglyEqual(l.seq2Range.start+u,l.seq2Range.endExclusive+u));u++);if(u===c){r[o+1]=new zo(new Rt(l.seq1Range.start+c,a.seq1Range.endExclusive),new Rt(l.seq2Range.start+c,a.seq2Range.endExclusive));continue}u>0&&(l=l.delta(u))}i.push(l)}return r.length>0&&i.push(r[r.length-1]),i}s(tQe,"joinSequenceDiffsByShifting");function l8t(t,e,n){if(!t.getBoundaryScore||!e.getBoundaryScore)return n;for(let r=0;r<n.length;r++){let i=r>0?n[r-1]:void 0,o=n[r],a=r+1<n.length?n[r+1]:void 0,l=new Rt(i?i.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),c=new Rt(i?i.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);o.seq1Range.isEmpty?n[r]=nQe(o,t,e,l,c):o.seq2Range.isEmpty&&(n[r]=nQe(o.swap(),e,t,c,l).swap())}return n}s(l8t,"shiftSequenceDiffs");function nQe(t,e,n,r,i){let a=1;for(;t.seq1Range.start-a>=r.start&&t.seq2Range.start-a>=i.start&&n.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let l=0;for(;t.seq1Range.start+l<r.endExclusive&&t.seq2Range.endExclusive+l<i.endExclusive&&n.isStronglyEqual(t.seq2Range.start+l,t.seq2Range.endExclusive+l)&&l<100;)l++;if(a===0&&l===0)return t;let c=0,u=-1;for(let d=-a;d<=l;d++){let p=t.seq2Range.start+d,m=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,g=e.getBoundaryScore(h)+n.getBoundaryScore(p)+n.getBoundaryScore(m);g>u&&(u=g,c=d)}return t.delta(c)}s(nQe,"shiftDiffToBetterPosition");function rQe(t,e,n){let r=[];for(let i of n){let o=r[r.length-1];if(!o){r.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?r[r.length-1]=new zo(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):r.push(i)}return r}s(rQe,"removeShortMatches");function zue(t,e,n,r,i=!1){let o=zo.invert(n,t.length),a=[],l=new iA(0,0);function c(d,p){if(d.offset1<l.offset1||d.offset2<l.offset2)return;let m=r(t,d.offset1),h=r(e,d.offset2);if(!m||!h)return;let g=new zo(m,h),y=g.intersect(p),v=y.seq1Range.length,b=y.seq2Range.length;for(;o.length>0;){let E=o[0];if(!(E.seq1Range.intersects(g.seq1Range)||E.seq2Range.intersects(g.seq2Range)))break;let k=r(t,E.seq1Range.start),D=r(e,E.seq2Range.start),N=new zo(k,D),Q=N.intersect(E);if(v+=Q.seq1Range.length,b+=Q.seq2Range.length,g=g.join(N),g.seq1Range.endExclusive>=E.seq1Range.endExclusive)o.shift();else break}(i&&v+b<g.seq1Range.length+g.seq2Range.length||v+b<(g.seq1Range.length+g.seq2Range.length)*2/3)&&a.push(g),l=g.getEndExclusives()}for(s(c,"scanWord");o.length>0;){let d=o.shift();d.seq1Range.isEmpty||(c(d.getStarts(),d),c(d.getEndExclusives().delta(-1),d))}return c8t(n,a)}s(zue,"extendDiffsToEntireWordIfAppropriate");function c8t(t,e){let n=[];for(;t.length>0||e.length>0;){let r=t[0],i=e[0],o;r&&(!i||r.seq1Range.start<i.seq1Range.start)?o=t.shift():o=e.shift(),n.length>0&&n[n.length-1].seq1Range.endExclusive>=o.seq1Range.start?n[n.length-1]=n[n.length-1].join(o):n.push(o)}return n}s(c8t,"mergeSequenceDiffs");function iQe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let l=[r[0]];for(let c=1;c<r.length;c++){let p=function(h,g){let y=new Rt(d.seq1Range.endExclusive,u.seq1Range.start);return t.getText(y).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var a=p;s(p,"shouldJoinDiffs");let u=r[c],d=l[l.length-1];p(d,u)?(o=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}r=l}while(i++<10&&o);return r}s(iQe,"removeVeryShortMatchingLinesBetweenDiffs");function oQe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let c=[r[0]];for(let u=1;u<r.length;u++){let m=function(g,y){let v=new Rt(p.seq1Range.endExclusive,d.seq1Range.start);if(t.countLinesIn(v)>5||v.length>500)return!1;let E=t.getText(v).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let _=t.countLinesIn(g.seq1Range),k=g.seq1Range.length,D=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,Q=t.countLinesIn(y.seq1Range),Z=y.seq1Range.length,me=e.countLinesIn(y.seq2Range),te=y.seq2Range.length,H=2*40+50;function W(re){return Math.min(re,H)}return s(W,"cap"),Math.pow(Math.pow(W(_*40+k),1.5)+Math.pow(W(D*40+N),1.5),1.5)+Math.pow(Math.pow(W(Q*40+Z),1.5)+Math.pow(W(me*40+te),1.5),1.5)>(H**1.5)**1.5*1.3};var l=m;s(m,"shouldJoinDiffs");let d=r[u],p=c[c.length-1];m(p,d)?(o=!0,c[c.length-1]=c[c.length-1].join(d)):c.push(d)}r=c}while(i++<10&&o);let a=[];return Uwe(r,(c,u,d)=>{let p=u;function m(E){return E.length>0&&E.trim().length<=3&&u.seq1Range.length+u.seq2Range.length>100}s(m,"shouldMarkAsChanged");let h=t.extendToFullLines(u.seq1Range),g=t.getText(new Rt(h.start,u.seq1Range.start));m(g)&&(p=p.deltaStart(-g.length));let y=t.getText(new Rt(u.seq1Range.endExclusive,h.endExclusive));m(y)&&(p=p.deltaEnd(y.length));let v=zo.fromOffsetPairs(c?c.getEndExclusives():iA.zero,d?d.getStarts():iA.max),b=p.intersect(v);a.length>0&&b.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(b):a.push(b)}),a}s(oQe,"removeVeryShortMatchingTextBetweenLongDiffs");f();var c9=class{constructor(e,n){this.trimmedHash=e;this.lines=n}static{s(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let n=e===0?0:sQe(this.lines[e-1]),r=e===this.lines.length?0:sQe(this.lines[e]);return 1e3-(n+r)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,n){return this.lines[e]===this.lines[n]}};function sQe(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}s(sQe,"getIndentation");var XH=class{constructor(){this.dynamicProgrammingDiffing=new KH;this.myersDiffingAlgorithm=new sR}static{s(this,"DefaultLinesDiffComputer")}computeDiff(e,n,r){if(e.length<=1&&GI(e,n,(D,N)=>D===N))return new nR([],[],!1);if(e.length===1&&e[0].length===0||n.length===1&&n[0].length===0)return new nR([new gb(new Yt(1,e.length+1),new Yt(1,n.length+1),[new Ld(new zt(1,1,e.length,e[e.length-1].length+1),new zt(1,1,n.length,n[n.length-1].length+1))])],[],!1);let i=r.maxComputationTimeMs===0?Ab.instance:new YH(r.maxComputationTimeMs),o=!r.ignoreTrimWhitespace,a=new Map;function l(D){let N=a.get(D);return N===void 0&&(N=a.size,a.set(D,N)),N}s(l,"getOrCreateHash");let c=e.map(D=>l(D.trim())),u=n.map(D=>l(D.trim())),d=new c9(c,e),p=new c9(u,n),m=d.length+p.length<1700?this.dynamicProgrammingDiffing.compute(d,p,i,(D,N)=>e[D]===n[N]?n[N].length===0?.1:1+Math.log(1+n[N].length):.99):this.myersDiffingAlgorithm.compute(d,p,i),h=m.diffs,g=m.hitTimeout;h=$ue(d,p,h),h=iQe(d,p,h);let y=[],v=s(D=>{if(o)for(let N=0;N<D;N++){let Q=b+N,Z=E+N;if(e[Q]!==n[Z]){let me=this.refineDiff(e,n,new zo(new Rt(Q,Q+1),new Rt(Z,Z+1)),i,o,r);for(let te of me.mappings)y.push(te);me.hitTimeout&&(g=!0)}}},"scanForWhitespaceChanges"),b=0,E=0;for(let D of h){Ru(()=>D.seq1Range.start-b===D.seq2Range.start-E);let N=D.seq1Range.start-b;v(N),b=D.seq1Range.endExclusive,E=D.seq2Range.endExclusive;let Q=this.refineDiff(e,n,D,i,o,r);Q.hitTimeout&&(g=!0);for(let Z of Q.mappings)y.push(Z)}v(e.length-b);let _=Hue(y,new nT(e),new nT(n)),k=[];return r.computeMoves&&(k=this.computeMoves(_,e,n,c,u,i,o,r)),Ru(()=>{function D(Q,Z){if(Q.lineNumber<1||Q.lineNumber>Z.length)return!1;let me=Z[Q.lineNumber-1];return!(Q.column<1||Q.column>me.length+1)}s(D,"validatePosition");function N(Q,Z){return!(Q.startLineNumber<1||Q.startLineNumber>Z.length+1||Q.endLineNumberExclusive<1||Q.endLineNumberExclusive>Z.length+1)}s(N,"validateRange");for(let Q of _){if(!Q.innerChanges)return!1;for(let Z of Q.innerChanges)if(!(D(Z.modifiedRange.getStartPosition(),n)&&D(Z.modifiedRange.getEndPosition(),n)&&D(Z.originalRange.getStartPosition(),e)&&D(Z.originalRange.getEndPosition(),e)))return!1;if(!N(Q.modified,n)||!N(Q.original,e))return!1}return!0}),new nR(_,k,g)}computeMoves(e,n,r,i,o,a,l,c){return eQe(e,n,r,i,o,a).map(p=>{let m=this.refineDiff(n,r,new zo(p.original.toOffsetRange(),p.modified.toOffsetRange()),a,l,c),h=Hue(m.mappings,new nT(n),new nT(r),!0);return new rR(p,h)})}refineDiff(e,n,r,i,o,a){let c=u8t(r).toRangeMapping2(e,n),u=new yb(e,c.originalRange,o),d=new yb(n,c.modifiedRange,o),p=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,i):this.myersDiffingAlgorithm.compute(u,d,i),m=!1,h=p.diffs;m&&zo.assertSorted(h),h=$ue(u,d,h),m&&zo.assertSorted(h),h=zue(u,d,h,(y,v)=>y.findWordContaining(v)),m&&zo.assertSorted(h),a.extendToSubwords&&(h=zue(u,d,h,(y,v)=>y.findSubWordContaining(v),!0),m&&zo.assertSorted(h)),h=rQe(u,d,h),m&&zo.assertSorted(h),h=oQe(u,d,h),m&&zo.assertSorted(h);let g=h.map(y=>new Ld(u.translateRange(y.seq1Range),d.translateRange(y.seq2Range)));return m&&Ld.assertSorted(g),{mappings:g,hitTimeout:p.hitTimeout}}};function u8t(t){return new gp(new Yt(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new Yt(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}s(u8t,"toLineRangeMapping");var ZH=class{static{s(this,"DiffServiceImpl")}constructor(){}dispose(){}async computeDiff(e,n,r){let i=await d8t(e,n,r);return{identical:i.identical,quitEarly:i.quitEarly,changes:a(i.changes),moves:i.moves.map(l=>new rR(new gp(new Yt(l[0],l[1]),new Yt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>new gb(new Yt(c[0],c[1]),new Yt(c[2],c[3]),c[4]?.map(u=>new Ld(new zt(u[0],u[1],u[2],u[3]),new zt(u[4],u[5],u[6],u[7])))))}}};async function d8t(t,e,n){let r=t.split(/\r\n|\r|\n/),i=e.split(/\r\n|\r|\n/),a=new XH().computeDiff(r,i,n),l=a.changes.length>0?!1:t===e;function c(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])])}return s(c,"getLineChanges"),{identical:l,quitEarly:a.hitTimeout,changes:c(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,c(u.changes)])}}s(d8t,"computeDiff");f();var Yue=Ve(require("crypto"));var u9=Yue.randomUUID.bind(Yue);var hQe=Ve(zm()),ede=Ve(BP());f();var ej=U0("ISnippyService");f();f();var d9=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),tj=65;function f8t(t){let e=0,n;d9.lastIndex=0;do if(n=d9.exec(t),n&&(e+=1),e>=tj)break;while(n);return e}s(f8t,"lexemeLength");function p8t(t,e){let n=0,r;d9.lastIndex=0;do if(r=d9.exec(t),r&&(n+=1,n>=e))return d9.lastIndex;while(r);return t.length}s(p8t,"offsetFirstLexemes");function aQe(t,e){let n=t.split("").reverse().join(""),r=p8t(n,e);return n.length-r}s(aQe,"offsetLastLexemes");function Kue(t){return f8t(t)>=tj}s(Kue,"hasMinLexemeLength");f();f();var lQe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.matched_source=="string"&&typeof n.occurrences=="string"&&typeof n.capped=="boolean"&&typeof n.cursor=="string"&&typeof n.github_url=="string"}e.is=t,s(t,"is")})(lQe||={});var Jue;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.kind=="string"&&typeof n.reason=="string"&&typeof n.code=="number"&&typeof n.msg=="string"}e.is=t,s(t,"is")})(Jue||={});var cQe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"snippets"in n&&Array.isArray(n.snippets)&&n.snippets.every(lQe.is)}e.is=t,s(t,"is")})(cQe||={});var Xue;(e=>{function t(n){if(Jue.is(n))return Qo.error(n);if(cQe.is(n))return Qo.ok(n)}e.to=t,s(t,"to")})(Xue||={});var uQe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.commit_id=="string"&&typeof n.license=="string"&&typeof n.nwo=="string"&&typeof n.path=="string"&&typeof n.url=="string"}e.is=t,s(t,"is")})(uQe||={});var dQe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.has_next_page=="boolean"&&typeof n.cursor=="string"}e.is=t,s(t,"is")})(dQe||={});var fQe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.count=="object"&&Object.values(n.count).every(r=>typeof r=="string")}e.is=t,s(t,"is")})(fQe||={});var pQe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"file_matches"in n&&Array.isArray(n.file_matches)&&n.file_matches.every(uQe.is)&&"page_info"in n&&dQe.is(n.page_info)&&"license_stats"in n&&fQe.is(n.license_stats)}e.is=t,s(t,"is")})(pQe||={});var Zue;(e=>{function t(n){if(Jue.is(n))return Qo.error(n);if(pQe.is(n))return Qo.ok(n)}e.to=t,s(t,"to")})(Zue||={});var nj=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let n={source:e};return this.fetch("Match",n,Xue.to)}async fetchFilesForMatch(e){let n={cursor:e};return this.fetch("FilesForMatch",n,Zue.to)}async fetch(e,n,r){let i=this.ctx.get(rr),o=await this.ctx.get(Mn).getToken(),a=Nx(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${o.token}`,...Kd(this.ctx),"X-GitHub-Api-Version":Af},c=i.makeAbortController(),u=await i.fetch(a,{method:"POST",headers:l,json:n,signal:c.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return r(d)}};var mQe=new _t("[CODE REFERENCING]"),lR=class{constructor(e,n){this.instantiationService=n;this.ctx=e,this.fetcher=this.instantiationService.createInstance(nj,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,n,r){let i=this.computeSourceToCheck(n,r);if(!i)return;let a=await this.ctx.get(kn).getTextDocument({uri:e.toString()});if(!a){mQe.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=a.version,c;try{c=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!c)throw new Error(`Failed to parse match response: ${c}`);if(c.isError())throw new Error(`Failed to match: ${c.err}`);if(c.val.snippets.length===0)return;let{snippets:u}=c.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:v}=g.val;return{match:h,files:y,licenseStats:v}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){mQe.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),v=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:v,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:l,details:y.map(E=>({license:E,url:`${h.match.github_url}`}))};await this.ctx.get(A0).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,n){if(n.newText==="")return;let r=ys.single(n),o=r.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(r),l=o.start,c=a.value.substring(o.start,o.endExclusive);if(!Kue(c)){let m=a.value.slice(0,o.start),h=aQe(m,tj);l=h,c=a.value.slice(h,o.start+n.newText.length)}if(!Kue(c))return;let u=a.getTransformer(),d=u.getPosition(l),p=u.getPosition(o.endExclusive);return{source:c,startOffset:l,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};lR=pu([Gs(1,tA)],lR);async function gQe(t){let e=new bH;return e.define(IH,new tde(t)),e.define(HH,new ZH),e.define(gy,new q0(nde,[!0])),e.define(ej,new q0(lR,[t])),e.define(Jm,await rde.Create(t)),e.define(r9,new q0(ide)),e.seal()}s(gQe,"createInstantiationService");var tde=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,n,r){let i=Object.fromEntries(Object.entries(n??{}).filter(([l,c])=>c!==void 0)),o=Object.fromEntries(Object.entries(r??{}).filter(([l,c])=>c!==void 0)),a=or.createAndMarkAsIssued(i,o);kt(this.ctx,e,a)}},nde=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},rde=class t{constructor(e,n){this.ctx=e;this.modelConfiguration=n}static{s(this,"CLSChatMLFetcher")}static async Create(e){let n=await Co.getModelConfiguration(e,"nesStubs");return new t(e,n)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,n,r,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),l=u9(),c=await this.ctx.get(Cd).fetchAndStreamChat(this.ctx,a,ig.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(u,d)=>{if(n)return await n(u,0,{text:d.text})},r,i,o);if(c.type==="success"){let u=[];if(n)for await(let p of c.choices)if(p.finishReason!=="snippy")await n(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return{type:t.clsResponseTypeToResponseType(c.type),reason:c.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:qMe(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(n=>n.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},ide=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new rj("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let n=this.tokenizers.get(e.tokenizer);return n||(n=new rj(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,n)),n}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},rj=class{constructor(e){this.mode=hQe.OutputMode.Raw;this.tokenizer=Bo(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===ede.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let n=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let r of e.content)if(r.type===ede.ChatCompletionContentPartKind.Text)n+=this.tokenLength(r.text);else throw new Error(`Unsupported message content part type: ${r.type}`);else throw new Error("Unsupported message content type");return n}countMessagesTokens(e){let n=0;for(let r of e)n+=this.countMessageTokens(r);return n}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var ij=class extends Ho{constructor(n){super();this.workspace=n;this._garbageCollector=new ade(20);this._documentCaches=new Map;E0(this,n.openDocuments,(r,i)=>{let o=new ode(r.id,r.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(xg(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(_a(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(n,r){let i=this._documentCaches.get(n);i&&i.reject(r)}isRejected(n,r){let i=this._documentCaches.get(n);return i?i.isRejected(r):!1}},ode=class{constructor(e,n,r){this.docId=e;this._garbageCollector=r;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let n of[...this._rejectedEdits])n.handleEdit(e)}reject(e){if(this.isRejected(e))return;let n=new sde(e.toEdit(),()=>{this._rejectedEdits.delete(n)});this._rejectedEdits.add(n),this._garbageCollector.put(n)}isRejected(e){for(let n of this._rejectedEdits)if(n.isRejected(e))return!0;return!1}},sde=class{constructor(e,n){this._edit=e;this._onDispose=n}static{s(this,"RejectedEdit")}handleEdit(e){let n=this._edit.tryRebase(e);n?this._edit=n:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},ade=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var f9=class{constructor(e,n){this.prev=null;this.next=null;this.key=e,this.value=n}static{s(this,"Node")}},oj=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new f9("",null),this._tail=new f9("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let n=e.prev,r=e.next;n.next=r,r.prev=n}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let n=this._cache.get(e);if(n)return this._removeNode(n),this._cache.delete(e),n.value}get(e){let n=this._cache.get(e);if(n)return this._moveToHead(n),n.value}keys(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.key),n=n.next;return e}getValues(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.value),n=n.next;return e}put(e,n){let r=this._cache.get(e);if(r)r.value=n,this._moveToHead(r);else if(r=new f9(e,n),this._cache.set(e,r),this._addNode(r),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var sj=class extends Ho{constructor(n){super();this.workspace=n;this._documentCaches=new Map;this._sharedCache=new oj(50);E0(this,n.openDocuments,(r,i)=>{let o=new lde(r.id,r.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(xg(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(_a(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(n,r,i){let o=this._documentCaches.get(n);o&&o.setNextEdits(r,i)}lookupNextEdit(n){let r=this._documentCaches.get(n);if(r)return r.lookupNextEdit()}},lde=class{constructor(e,n,r){this.docId=e;this._sharedCache=r;this._value=n}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,n){let r=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(r.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:n,documentBeforeEdit:r}),r=r.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),n=this._sharedCache.get(e);if(n)return n}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var aj=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,n,r,i,o,a;if(this._request){let c=this._request.getActiveDocument();e=this._request.documents.length,n=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),r=c.recentEdits.edits.length,i=c.languageId,o=c.lineCountBeforeClipping,a=c.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:n,activeDocumentEditsCount:r,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},cR=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let n=this._map.get(e);n&&n.builder.setAsShown()}scheduleSendingTelemetry(e,n){let r=setTimeout(()=>{this._doSendTelemetry(n),this._map.delete(e)},12e4);this._map.set(e,{builder:n,timeout:r})}sendTelemetryFor(e,n){let r=this._map.get(e);if(!r)return;this._map.delete(e),clearTimeout(r.timeout);let i=r.builder;i.setAcceptance(n),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let n=e.build(),{opportunityId:r,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:E,logProbThreshold:_,documentsCount:k,editsCount:D,activeDocumentEditsCount:N,promptLineCount:Q,promptCharCount:Z,isDefaultEndpoint:me,hadLowLogProbSuggestion:te,nonTerminatingError:H,nEditsSuggested:W,kthEditPicked:re,lineDistanceToMostRecentEdit:oe,debounceTime:V,hasNextEdit:q,nextEditLogprob:Y,maxLinesPerEdit:ee,noNextEditReasonKind:de,noNextEditReasonMessage:ne,firstEditStrategy:fe,firstPickStrategyOverride:pe,fetchTime:Be,fetchResult:Se,fetchError:Ke,fetchStartedAfterMs:Fe}=n;this._sendTelemetryToBoth({opportunityId:r,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:E,nonTerminatingError:H,noNextEditReasonKind:de,noNextEditReasonMessage:ne,firstEditStrategy:fe,firstPickStrategyOverride:pe,fetchResult:Se,fetchError:Ke},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(me),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:D,activeDocumentEditsCount:N,promptLineCount:Q,promptCharCount:Z,hadLowLogProbSuggestion:this._boolToNum(te),nEditsSuggested:W,kthEditPicked:re,lineDistanceToMostRecentEdit:oe,debounceTime:V,fetchStartedAfterMs:Fe,fetchTime:Be,hasNextEdit:this._boolToNum(q),nextEditLogprob:Y,maxLinesPerEdit:ee})}_sendTelemetryToBoth(e,n){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,n)}_boolToNum(e){return e===void 0?void 0:e?1:0}};cR=pu([Gs(0,IH)],cR);f();var uR=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var rT=!1,AQe=300,dR=class extends Ho{constructor(n,r,i,o,a,l,c){super();this._workspace=n;this._statelessNextEditProvider=r;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=l;this._snippyService=c;this._rejectionCollector=new ij(this._workspace);this._nextEditCache=new sj(this._workspace);this._recentlyShownCache=new dde;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;E0(this,this._workspace.openDocuments,(u,d)=>{d.add(Yre(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(cR)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(n,r){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===n&&i.documentAfterEditsNoShortening.value!==r.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(n,r,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(n);if(!o)return{result:void 0};let a=o.value.get(),l=new aj(this._statelessNextEditProvider.ID);l.setOpportunityId(r.requestUuid??u9());let c=this._recentlyShownCache.get(n,a),u=this._nextEditCache.lookupNextEdit(n),d,p,m,h;if(c)d=c[0],h=c[1],p=a,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),await hy(AQe);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(u.subsequentN),await hy(AQe);else{h=new ude,l.setHeaderRequestId(h.headerRequestId);let v=o.value.get();p=v;let b=await this.fetchNextEdit(h,n,l,i),E=v.value!==o.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":break;case"fetchFailure":case"unexpected":m=b.err.error;break;default:K8(b.err)}else if(!E){let _=b.val;_.isEmpty()||(d=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(n,_,h))}}if(l.markEndTime(),m)throw this._telemetrySender.sendTelemetry(l),m;if(!d)return this._telemetrySender.sendTelemetry(l),new uR(void 0);if(this._rejectionCollector.isRejected(n,d))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new uR(void 0);Nl(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new uR({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,l),d.isNeutral()||this._recentlyShownCache.add(n,a,[d,h]),y}async _shortenDocument(n,r){let i=n.lastEdit.getEditedState(),{document:o,clippedRange:a}=r==="noShortening"?this.getProjectedDocumentNoShortening(n.lastEdit):r==="clipping"?this.getProjectedDocumentClipping(n.lastEdit):await this.getProjectedDocumentSummarizedDocument(n.languageId,n.lastEdit),l=ys.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:c,editLast:u}=cde(n.lastEdits.swap(l)),d=c.compose(),p=new X2(new Xm(n.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(c.apply(o.text))),m=new Fl(o.text),g=Eg.fromEdit(new Vc(m,d)).removeCommonSuffixPrefixLines(),y=c.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new Fl(p.text).getTransformer().getRange(y));let b=n.lastSelection?p.projectOffsetRange(n.lastSelection):void 0,E=this._workspace.getWorkspaceRoot(n.docId),_=s(Q=>{let me=new Eg(new Fl(p.text),Q).toEdit();return yQe(me,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(Q=>p.projectBack(Q),"toOffsetOnDocumentAfterEditsNoShortening"),D=s(Q=>p.project(Q),"toProjectedOffset"),N=new YP(n.docId,E,n.languageId,g.base.getLines(),g.edit,v,m,c,i,_,k,D,n.lastEdit.base.getTextLength().lineCount,a,b);return{recentEdit:n.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(n,r,i,o){let a=await this._historyContextProvider.getHistoryContext(r);if(!a)return Qo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=cde(a.getDocumentAndIdx(r)),c=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(c);let u=await Promise.all(a.documents.map(Q=>this._shortenDocument(Q,c))),d=u[l.idx],p=this._xtabHistoryTracker.getHistory(),m=new AH(n.headerRequestId,u.map(Q=>Q.nextEditDoc),l.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,rT&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let Q=this._hookupCancellation(g,o);try{y=await g.result}finally{Q.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let Q=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let Z=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(me){throw g.setResultError(me),me}finally{Z.dispose(),Q()}}i.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return Qo.error({kind:"noSuggestions"});let _=new Eg(new Fl(d.projectedDocument.text),b).toEdit(),k=yQe(_,d.projectedDocument),D=_.edits.length===k.edits.length?v.val.permutation:void 0,N=k.decompose(D);return Qo.ok(N)}_hookupCancellation(n,r){let i=new Tu,o=!1,a=s(()=>{o||(o=!0,n.liveDependentants--)},"removeDependant"),l=i.add(new hH);return i.add(r.onCancellationRequested(()=>{if(a(),n.liveDependentants>0){rT&&console.log(`=> ignoring UI cancellation signal for ${n.seqid} because others depend on this request`);return}if(!n.fetchIssued){rT&&console.log(`=> canceling ${n.seqid} due to UI cancellation signal`),n.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(n.liveDependentants>0){rT&&console.log(`=> ignoring timer cancellation signal for ${n.seqid} because others depend on this request`);return}rT&&console.log(`=> canceling ${n.seqid} due to timer after UI cancellation signal`),n.cancellationTokenSource.cancel()},500)})),i.add(_a(()=>{a()})),n.liveDependentants++,i}_findExistingPendingRequest(n){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,n))return this._pendingStatelessNextEditRequest}handleShown(n){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(n)}handleAcceptance(n,r){this._telemetrySender.sendTelemetryFor(r,"accepted"),this.runSnippy(n,r),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(n,r){wH(r.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&r.result&&(this._recentlyShownCache.remove(r.result.edit),this._rejectionCollector.reject(n,r.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(r,"rejected")}getProjectedDocumentNoShortening(n){return{document:new X2(new Xm(n.base.value),new Xf([])),clippedRange:new Yt(1,n.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(n){let r=n.base.getTransformer(),i=r.getRange(n.edit.getRange()??new Rt(0,0)),o=Yt.fromRange(i);function a(p,m){return new Yt(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let l=new Yt(1,r.textLength.lineCount+1),c=cde(l.intersect(a(o,100))),u=Yt.subtract(l,c);return{document:new X2(new Xm(n.base.value),new Xf(u.map(p=>Ka.delete(r.getOffsetRange(new zt(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:c}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new zP("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(n,r){let i=await A8t(this._parseService,{getText:s(()=>r.base.value,"getText"),languageId:n});if(!i)return this.getProjectedDocumentClipping(r);let o=new Xm(r.base.value),a=r.edit.edits.at(0)?.range??new Rt(0,0),l;if(r.edit.edits.length!==0){let h=r.edit.edits.at(0),g=r.edit.edits.at(-1);l=o.offsetRangeToRange(new Rt(h.range.start,g.range.endExclusive))}let c=CQe(o.offsetRangeToRange(a)),u=PH(200*50,{costFnOverride:s((h,g,y)=>{let v=CQe(y.offsetRangeToRange(h.range)),b=g8t(c,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:l}])[0],d=u.projectBack(1)-1,p=r.base.getTransformer().getPosition(d).lineNumber,m=new Yt(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(n,r){r.result!==void 0&&this._snippyService.handlePostInsertion(n.toUri(),r.result.documentBeforeEdits,r.result.edit)}};dR=pu([Gs(4,gy),Gs(5,tA),Gs(6,ej)],dR);function yQe(t,e){let n=e.projectBackOffsetEdit(t.toOffsetEdit());return ys.fromOffsetEdit(n)}s(yQe,"projectBackEdit");function CQe(t){return new Yt(t.start.line+1,t.end.line+1)}s(CQe,"lineRangeFromVSCodeRange");function g8t(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(g8t,"lineRangeDist");async function A8t(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(A8t,"getStructure");function cde(t){if(!t)throw new yr("expected value to be defined, but it was not");return t}s(cde,"assertDefined");var ude=class{constructor(){this.headerRequestId=u9()}static{s(this,"NextEditFetchRequest")}},dde=class{constructor(){this._cache=new fO(10)}static{s(this,"RecentlyShownCache")}add(e,n,r){let i=this._key(e,n);this._cache.set(i,r)}get(e,n){let r=this._key(e,n);return this._cache.get(r)}remove(e){for(let n of this._cache)if(n[1][0]===e){this._cache.delete(n[0]);break}}_key(e,n){return e.uri+";"+n.value}};f();f();f();f();var iT=0;function lj(t){return t===0}s(lj,"lengthIsZero");var G0=2**26;function fR(t,e){return t*G0+e}s(fR,"toLength");function Cy(t){let e=t,n=Math.floor(e/G0),r=e-n*G0;return new Ll(n,r)}s(Cy,"lengthToObj");function p9(t,e){let n=t+e;return e>=G0&&(n=n-t%G0),n}s(p9,"lengthAdd");function xQe(t,e){return t.reduce((n,r)=>p9(n,e(r)),iT)}s(xQe,"sumLengths");function fde(t,e){return t===e}s(fde,"lengthEquals");function m9(t,e){let n=t,r=e;if(r-n<=0)return iT;let o=Math.floor(n/G0),a=Math.floor(r/G0),l=r-a*G0;if(o===a){let c=n-o*G0;return fR(0,l-c)}else return fR(a-o,l)}s(m9,"lengthDiffNonNegative");function vQe(t,e){let n=t,r=Math.floor(n/G0),i=n-r*G0,o=e,a=Math.floor(o/G0),l=o-a*G0;return new zt(r+1,i+1,a+1,l+1)}s(vQe,"lengthsToRange");f();var pR=class{constructor(e,n,r){this.startOffset=e;this.endOffset=n;this.newLength=r}static{s(this,"TextEditInfo")}toString(){return`[${Cy(this.startOffset)}...${Cy(this.endOffset)}) -> ${Cy(this.newLength)}`}};function EQe(t,e){if(t.length===0)return e;if(e.length===0)return t;let n=new uO(bQe(t)),r=bQe(e);r.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=n.dequeue();function o(u){if(u===void 0){let p=n.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!lj(u);){let[p,m]=i.splitAt(u);d.push(p),u=m9(p.lengthAfter,u),i=m??n.dequeue()}return lj(u)||d.push(new h9(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function l(u,d,p){if(a.length>0&&fde(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new pR(m.startOffset,d,p9(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(l,"pushEdit");let c=iT;for(let u of r){let d=o(u.lengthBefore);if(u.modified){let p=xQe(d,h=>h.lengthBefore),m=p9(c,p);l(c,m,u.lengthAfter),c=m}else for(let p of d){let m=c;c=p9(c,p.lengthBefore),p.modified&&l(m,c,p.lengthAfter)}}return a}s(EQe,"combineTextEditInfos");var h9=class t{constructor(e,n,r){this.modified=e;this.lengthBefore=n;this.lengthAfter=r}static{s(this,"LengthMapping")}splitAt(e){let n=m9(e,this.lengthAfter);return fde(n,iT)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,iT,n)]:[new t(this.modified,e,e),new t(this.modified,n,n)]}toString(){return`${this.modified?"M":"U"}:${Cy(this.lengthBefore)} -> ${Cy(this.lengthAfter)}`}};function bQe(t){let e=[],n=iT;for(let r of t){let i=m9(n,r.startOffset);lj(i)||e.push(new h9(!1,i,i));let o=m9(r.startOffset,r.endOffset);e.push(new h9(!0,o,r.newLength)),n=r.endOffset}return e}s(bQe,"toLengthMapping");var g9=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let n=e.edits.map(r=>new cj(r.range,Ll.ofText(r.newText)));return new t(n)}static _fromTextEditInfo(e){let n=e.map(r=>{let i=Cy(r.newLength);return new cj(vQe(r.startOffset,r.endOffset),new Ll(i.lineCount,i.columnCount))});return new t(n)}_toTextEditInfo(){return this.edits.map(e=>new pR(fR(e.range.startLineNumber-1,e.range.startColumn-1),fR(e.range.endLineNumber-1,e.range.endColumn-1),fR(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let n=this._toTextEditInfo(),r=e._toTextEditInfo(),i=EQe(n,r);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return zt.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},cj=class{constructor(e,n){this.range=e;this.newLength=n}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var uj=class{constructor(e){this.documents=e;Nl(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(n=>n.docId===e)}getDocumentAndIdx(e){let n=this.documents.findIndex(r=>r.docId.uri===e.uri);if(n!==-1)return{doc:this.documents[n],idx:n}}},dj=class{constructor(e,n,r,i,o){this.docId=e;this.languageId=n;this.base=r;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new Vc(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var fj=class extends Ho{constructor(){super();this.branch=Tm("branchName",void 0);this._register($re((n,r)=>{this.init(r)}))}static{s(this,"ObservableGitStub")}async init(n){}};var mj=class extends Ho{constructor(n,r=!1){super();this._documentState=new Map;this._lastDocuments=new mde(50);this.workspace=n,this._lastGitCheckout=void 0,this._started=!1,r||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let n=new fj;this._register(JI(r=>{r.readObservable(n.branch)!==void 0&&(this._lastGitCheckout=h5(),this._documentState.forEach(o=>o.applyAllEdits()))})),E0(this,this.workspace.openDocuments,(r,i)=>{let o=r.selection.get().at(0),a=new pde(r.id,r.value.get().value,r.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(xg(this,{value:r.value,selection:r.selection,languageId:r.languageId},l=>{l.languageId.changes.length>0&&(a.languageId=l.languageId.value);let c=this._isAwaitingGitCheckoutCooldown();for(let u of l.value.changes)this._lastDocuments.push(a),a.handleEdit(u,c);l.selection.changes.length>0&&(a.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(_a(()=>{let l=this._documentState.get(r.id);l&&this._lastDocuments.remove(l),this._documentState.delete(r.id)}))},r=>r.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(n,r=5,i=100){let o=this._documentState.get(n);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(n))return;let a=[],l=!1;for(let c of this._lastDocuments.getItemsReversed()){let u=c.getRecentEdit(r,i);if(u!==void 0){if(u.editCount===0&&l)break;if(await this.workspace.getDocument(c.docId)&&(c.docId===n&&(l=!0),a.push(u.history),r-=u.editCount,r<=0))break}}if(a.reverse(),!!a.some(c=>c.docId===n))return new uj(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let n=h5()-this._lastGitCheckout<2*1e3;return n||(this._lastGitCheckout=void 0),n}getRecentDocumentUris(){return this._lastDocuments.getItems().map(n=>n.docId.uri)}},pde=class t{constructor(e,n,r,i){this.docId=e;this.languageId=r;this._edits=[];this._isUserDocument=!1;this._baseValue=new Fl(n),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,n){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let r=g5.fromEdit(e,this._currentValue),i=g9.fromTextEdit(r);if(n){this._baseValue=this._currentValue,this._edits=[];return}function o(l){return pj(l.edits,c=>c.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&y8t(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=h5(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:h5()})}getRecentEdit(e,n){if(!this._isUserDocument)return;let{editCount:r}=this._applyStaleEdits(e,n),i=new Ig(this._edits.map(o=>o.edit));return{history:new dj(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:r}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,n){let r=this._currentValue,i=ys.empty,o=g9.empty,a,l=0,c=ys.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(h5()-u.instant>10*60*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();wH(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(n>0&&m>n)break;let h=pj(u.textLengthEdit.edits,D=>D.range.endLineNumber-D.range.startLineNumber+D.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||pj(u.edit.edits,D=>D.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||pj(u.edit.edits,D=>D.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)c=u.edit;else{let D=ys.trySwap(u.edit,c);if(D)c=D.e1;else{if(h>=2)break;c=u.edit.compose(c)}}let v=u.edit.inverseOnString(r.value);r=r.apply(v);let b=u.edit.compose(i),E=No.fromEdit(new Vc(r,b)),k=new Eg(r,E).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,i=b,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:l}}toString(){return new Ig(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function pj(t,e){let n=0;for(let r of t)n+=e(r);return n}s(pj,"sum");function y8t(t,e){let n=e.getNewRanges();return t.edits.every(r=>C8t(r.range,n))}s(y8t,"editExtends");function C8t(t,e){return e.some(n=>t.start===n.endExclusive||t.endExclusive===n.start)}s(C8t,"doesTouch");var mde=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let n=this._arr.indexOf(e);n!==-1?this._arr.splice(n,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let n=this._arr.indexOf(e);n!==-1&&this._arr.splice(n,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var IQe=10,Zm=class{constructor(e){this.lastResultsById=new Jn(IQe);this.lastResultsByUri=new Jn(IQe);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,n,r){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),i.handleRejection(o.documentId,o.nextEditResult));let a=_m.create(e),l=await i.getNextEdit(a,{triggerKind:1},r);if(l.result==null)return;let c=await this.ctx.get(kn).getTextDocument({uri:e});if(!c)return;let u=c.positionAt(l.result.edit.range.start),d=c.positionAt(l.result.edit.range.endExclusive),p=an(),m={resultId:p,nextEditResult:l,documentId:a};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:l.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:n}},id:p}]}async handleAcceptance(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&(this.lastResultsByUri.delete(r.resultId),this.lastResultsById.delete(r.resultId),await n.handleAcceptance(r.documentId,r.nextEditResult))}async handleShown(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&n.handleShown(r.nextEditResult)}async createNextEditProvider(){let e=await gQe(this.ctx),n;try{let o=await this.ctx.get(Nt).updateExPValuesAndAssignments(),a=x8t(this.ctx,o);n=e.createInstance(a?nA:yy)}catch{n=e.createInstance(yy)}let r=this.ctx.get(vg),i=new mj(r);return e.createInstance(dR,r,n,i,new VH(r))}};function x8t(t,e){let n=Nr(t,mt.NESXTab);return n!==void 0?n:t.get(Nt).enableNESXTab(e)}s(x8t,"shouldUseXTab");f();var Cb=require("fs"),TQe=require("os"),wQe=Ve(require("path")),mR=require("process");var Cc=class{static{s(this,"PersistenceManager")}},hde=class extends Cc{constructor(n){super();this.directory=n}static{s(this,"FilePersistenceManager")}async read(n,r){try{return(await this.readJsonObject(n))[r]}catch{return}}async update(n,r,i){await Cb.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${n}.json`,a=await this.readJsonObject(n);a[r]=i,await Cb.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(n,r){let i=`${this.directory}/${n}.json`;try{let o=await this.readJsonObject(n);delete o[r];let a=JSON.stringify(o)+`
`;a===`{}
`?await Cb.promises.rm(i):await Cb.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(n){let r=`${this.directory}/${n}.json`;try{await Cb.promises.rm(r)}catch{}}async listSettings(){try{return(await Cb.promises.readdir(this.directory)).filter(r=>r.endsWith(".json")).map(r=>r.slice(0,-5))}catch{return[]}}async listKeys(n){return Object.keys(await this.readJsonObject(n))}async readJsonObject(n){let r=`${this.directory}/${n}.json`;try{let i=await Cb.promises.readFile(r,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function v8t(){return mR.env.XDG_CONFIG_HOME&&wQe.isAbsolute(mR.env.XDG_CONFIG_HOME)?mR.env.XDG_CONFIG_HOME+"/github-copilot":(0,TQe.platform)()==="win32"?mR.env.USERPROFILE+"\\AppData\\Local\\github-copilot":mR.env.HOME+"/.config/github-copilot"}s(v8t,"getXdgConfigPath");function _Qe(){return new hde(v8t())}s(_Qe,"makeXdgPersistenceManager");f();var SQe=require("crypto"),sA=Ve(require("fs/promises")),RQe=require("os"),xy=Ve(require("path"));var vy=class{constructor(e){this.ctx=e;this.logger=new _t("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,n=process.arch;return this.rgPath=await this.resolvePathByOs(e,n),this.rgPath}async resolvePathByOs(e,n){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${n}`),n!=="arm64"&&n!=="x64")throw new Error(`Unsupported architecture: ${n}`);let r=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=xy.extname(__filename)===".ts"?xy.resolve(__dirname,"../../../packages/ripgrep/bin"):xy.resolve(__dirname,"./bin"),o=xy.resolve(i,e,n,r);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await sA.readFile(o),l=(0,SQe.createHash)("sha256").update(a).digest("hex"),c=xy.join((0,RQe.homedir)(),".cache/pkg",l);await sA.mkdir(c,{recursive:!0});let u=Ti(cl(o)),d=xy.join(c,u);try{await sA.stat(d)}catch{await sA.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await sA.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var kQe=require("child_process"),gde=require("perf_hooks");var by=new _t("ripgrepProcessManager"),eh=class{constructor(e,n,r){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=n??this.maxProcesses,this.maxPendingTasks=r??this.maxPendingTasks,by.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){by.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(n){by.error(this.ctx,"Failed to kill process. ",n)}}),this.activeProcesses.clear()}execute(e,n,r,i,o){return new Promise((a,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){by.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){by.error(this.ctx,`Invalid timeout value: ${o}`),l(new Error(`Invalid timeout value: ${o}`));return}by.debug(this.ctx,`Adding task to queue: ${e} ${n.join(" ")}`),this.taskQueue.push({id:BG(),command:e,args:n,options:i,resolve:a,reject:l,timeoutInMs:o??this.defaultTimeoutInMs,token:r});let c=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);by.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${c}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),n=gde.performance.now();by.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let r=(0,kQe.spawn)(e.command,e.args,e.options);this.activeProcesses.add(r);let i="",o="",a,l=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(r),r.stdout?.removeAllListeners(),r.stderr?.removeAllListeners(),r.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{r.killed||(r.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{r.killed||(r.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),l(),this.runNextTask()}),r.stdout?.on("data",c=>{i+=c.toString()}),r.stderr?.on("data",c=>{o+=c.toString()}),r.on("close",c=>{let d=gde.performance.now()-n;by.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),l(),c===0?e.resolve(i):c===1?e.resolve(""):e.reject(new Error(`Process exited with code ${c}: ${o}`)),this.runNextTask()}),r.on("error",c=>{l(),e.reject(new Error(`Failed to start process: ${c.message}`)),this.runNextTask()})}catch(r){e.reject(new Error(`Error spawning process: ${r.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var BQe=100,DQe=1e3*60*5;function PQe(t){let e=new Ade(t);t.get(Ra).registerContextProvider(e),t.get(gg).add(e.id),t.get(Ql).getInitializedFeature().then(n=>{n.documentProvider.registerDocumentProvider(e)}).catch(n=>{av(t,n,"registerRelatedFilesShim")})}s(PQe,"registerRelatedFilesShim");var Ade=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new Jk(BQe,DQe);this.relatedFilesCache=new Jk(BQe,DQe);this.resolver={resolve:s(async(n,r)=>{let i=n.documentContext.uri,o=n.documentContext.languageId;return await this.getTraits(i,o,r)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,n,r){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,n,n,r),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,n,r,i){try{let o=await this.ctx.get(Nt).updateExPValuesAndAssignments({uri:e,languageId:r}),a={uri:e,clientLanguageId:n,detectedLanguageId:r},l=await DU(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let c=l.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of l.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,c),this.relatedFilesCache.set(e,Array.from(u))}catch(o){av(this.ctx,o,"relatedFilesShim")}}async*getDocuments(e,n){for(let r of e.slice(0,W1.MAX_NEIGHBOR_FILES)){if(n?.isCancellationRequested)return;if(!this.relatedFilesCache.has(r.uri)){let a=qx({uri:r.uri})??"UNKNOWN";await this.requestRelatedFilesAndTraits(r.uri,a,a,n)}let i=this.relatedFilesCache.get(r.uri)??[];if(i.length===0)continue;let o=r.weight/i.length;for(let a of i)yield{uri:a,weight:o}}}};f();f();f();var NQe=Ve(require("node:events"));var hj="onWorkspaceWatcherChanged";var gj=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.emitter=new NQe.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(hj,Au(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(hj,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(hj,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(hj,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var Xc=class{constructor(e){this.ctx=e;this.watchers=new Jn(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let n=this.watchers.get(e.uri);if(n)return n;let r=this.getParentFolder(e.uri);return r?this.watchers.get(r):void 0}getParentFolder(e){return[...this.watchers.keys()].find(r=>{let i=r.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==r&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(On.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let n=this.createWatcher(e);this.watchers.set(e.uri,n)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let n=[];for(let o of this.watchers.values())n.push(o.workspaceFolder);let r=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=n.filter(o=>o.uri!==e.uri&&o.uri.startsWith(r));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,n){this.getWatcher(e)?.onFileChange(n)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var hR=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,n){}onFileChange(e){}},b8t="workspaceLifecycleManager",Zc=new _t(b8t),aA=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let n=ea(e,async()=>{n.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?Zc.debug(this.ctx,`listener ${e.constructor.name} is already started`):(Zc.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):Zc.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);Zc.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(N0).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(kn).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,n){let r=e.uri,i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return r!==i&&r.startsWith(i)}async onWorkspacesAdded(e,n){if(!e.length){Zc.debug(n,"No workspaces to add.");return}Zc.debug(n,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let r=[...this.watchedWorkspaces,...e];Zc.debug(n,`Combined workspaces: ${r.map(l=>l.uri).join(", ")}`);let i=r.filter((l,c,u)=>u.findIndex(d=>d.uri===l.uri)===c&&!u.some(d=>t.isSubfolder(l,d)));Zc.debug(n,`Filtered workspaces: ${i.map(l=>l.uri).join(", ")}`);let o=i.filter(l=>!this.watchedWorkspaces.some(c=>c.uri===l.uri));Zc.debug(n,`New workspaces: ${o.map(l=>l.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(l=>!i.some(c=>c.uri===l.uri));Zc.debug(n,`Removed workspaces: ${a.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=i;for(let l of a){Zc.debug(n,`Terminating watching for removed workspace: ${l.uri}`),n.get(Xc).terminateWatching(l);for(let u of this.activeListeners)Zc.debug(n,`Notifying listener of removed workspace: ${l.uri}`),await u.onWorkspaceRemoved(l)}for(let l of o){if(!l.uri)continue;Zc.debug(n,`Starting to watch new workspace: ${l.uri}`);let c=n.get(Xc);if(c.shouldStartWatching(l)){c.startWatching(l);let u=c.terminateSubfolderWatchers(l);if(u.length){Zc.debug(n,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.onWorkspaceSubfoldersTerminated(l,u)}for(let d of this.activeListeners)Zc.debug(n,`Adding file change listener for workspace: ${l.uri}`),c.onFileChange(l,d.onFileChange.bind(d))}}for(let l of this.activeListeners)for(let c of o)Zc.debug(n,`Notifying ${l.constructor.name} of added workspace: ${c.uri}`),await l.onWorkspaceAdded(c)}async onWorkspacesRemoved(e,n){if(e.length)for(let r of e){if(!r.uri)continue;n.get(Xc).terminateWatching(r),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==r.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(r)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(n=>n!==e)}removeAllListeners(){this.activeListeners=[]}};function Aj(t){t.set(aA,new aA(t))}s(Aj,"setupWorkspaceLifecycleListener");f();f();var yj=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var vb={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},lA={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},yde=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.id}_${this.name}`}},xb=class extends yde{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ci=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},oT=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},sT=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Wi=class{static{s(this,"LanguageModelToolResult")}constructor(e,n){this.status=n,this.content=e}},FQe=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),Cj=(n=>(n.Accept="accept",n.Dismiss="dismiss",n))(Cj||{}),MQe=I.Object({result:I.Enum(Cj)});var Ap=class extends xb{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:vb,type:"shared"})}};f();var E8t=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),I8t=new Map;for(let[t,e]of E8t)I8t.set(e,t);f();function gR(t){return`[${Ti(t)}](${t})`}s(gR,"formatUriForFileWidget");function cA(t){let e=T8t(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(cA,"resolvePathInput");function T8t(t){if(t.startsWith("/")||OQe()&&_8t(t)||OQe()&&t.startsWith("\\\\"))return cl(t)}s(T8t,"resolveFsUri");function OQe(){return process.platform==="win32"}s(OQe,"isWindows");function w8t(t){return t>=65&&t<=90||t>=97&&t<=122}s(w8t,"isWindowsDriveLetter");function _8t(t){return w8t(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(_8t,"hasDriveLetter");function A9(t){let e="";return t.length>0&&(e=t.map(n=>n instanceof Ci?n.value:n instanceof sT?"":n instanceof oT?JSON.stringify(n.value):"").join(`
`)),e===""?"(empty)":e}s(A9,"parseToolResultToString");function xj(t){let{content:e}=t;return{message:A9(e)}}s(xj,"formatToolErrorResult");function UQe(t){let{content:e}=t;return{data:e.map(n=>n instanceof Ci?{type:"text",value:n.value}:n instanceof sT?{type:"text",value:"<unsupported>"}:n instanceof oT?{type:"data",value:{mimeType:n.value.mimeType,data:n.value.data}}:{type:"text",value:""})}}s(UQe,"formatToolSuccessResult");var vj=class extends Ap{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,n,r){try{let i=await this.mapCode(n.input,e,r),o=await this.invokeClientEditFileTool(e,n,i,r);return this.getFinalEditFileResult(n,o)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Wi([new Ci(o)],"error")}}async mapCode(e,n,r){let{filePath:i}=e,o=cA(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new F4(n.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},n.toLlmInteraction(),r,void 0,!0)}async invokeClientEditFileTool(e,n,r,i){let o=e.ctx.get(eu).getToolByNameAndProvider("insert_edit_into_file",lA);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(eu).invokeTool(e,o.id,{toolInvocationToken:n.toolInvocationToken,input:{filePath:n.input.filePath,code:r,explanation:n.input.explanation},roundId:n.roundId,toolCallId:n.toolCallId},i)}getFinalEditFileResult(e,n){if(n.status!=="success")return n;let r=A9(n.content),i=qx({uri:cA(e.input.filePath),languageId:"UNKNOWN"}),o=[];o.push(`<file_after_edit path="${e.input.filePath}">`),o.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let a=new F0({code:r,languageId:i,noFilePath:!0});return o.push(...a.renderAsArray()),o.push("</file_after_edit>"),new Wi([new Ci(o.join(`
`))],"success")}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=cA(r.filePath);return{progressMessage:`Editing ${gR(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var qQe=new _t("findFilesTool"),bj=class t extends Ap{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Wi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(vy).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=n.input,l=e.turn.workspaceFolders;if(!l?.length)return new Wi([new Ci("Failed to invoke tool file_search since no workspace folders found")],"error");let c=e.ctx.get(eh),u={},d=l.map(async g=>{if(r.isCancellationRequested)throw new Error("Canceled");try{qQe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await c.execute(i,["--files","-g",o],r,{cwd:ia(g.uri)},t.timeOutInSeconds*1e3);qQe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${ia(vo(g.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${v}`)}});try{await Promise.all(d)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new Wi([new Ci(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new Wi([new Ci(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Wi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for files matching query: ${r.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var WQe=new _t("findTextInFilesTool"),Ej=class t extends Ap{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Wi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(vy).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:o,isRegexp:a=!1,includePattern:l}=n.input,c=20,u=e.turn.workspaceFolders;if(!u?.length)return new Wi([new Ci("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(eh),p={},m=u.map(async v=>{if(r.isCancellationRequested)throw new Error("Canceled");try{WQe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${v.uri.toString()}`);let b=[a?"--regexp":"--fixed-strings",o,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",ia(v.uri)],E=await d.execute(i,b,r,{cwd:ia(v.uri)},t.timeOutInSeconds*1e3);WQe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${v.uri.toString()} with results: ${E}`),p[v.uri.toString()]=E.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let E=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${E}`)}});try{await Promise.all(m)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Wi([new Ci(b)],"error")}let h=[],g=c;for(;g>0;){let v=!1;for(let b in p)p[b].length>0&&g>0&&(h.push(p[b].shift()),g--,v=!0);if(!v)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new Wi([new Ci(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Wi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for text in files matching query: ${r.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var Ij=class extends Ap{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,n,r){let{path:i}=n.input,o=cA(i),l=await e.ctx.get(go).readDirectory(o.toString());return l.length===0?new Wi([new Ci("Folder is empty")],"success"):new Wi([new Ci(l.map(([c,u])=>`${c}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,n){let r=cA(e.input.path);return{progressMessage:`Reading directory ${gR(r)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var Tj=class extends Ap{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,n,r){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=n.input,l=cA(i);if(!l)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(Cr).getOrReadTextDocument({uri:l});if(u.status==="valid"){let d=new F0({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:l});return new Wi([new Ci(d.renderAsString(`
`))],"success")}else return new Wi([new Ci(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Wi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running read_file tool"};let i=cA(r.filePath);return{progressMessage:`Reading file ${gR(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function GQe(){return[new Ij,new Tj,new vj,new bj,new Ej]}s(GQe,"getAllClsTools");var eu=class{constructor(e){this.ctx=e;this._toolRegistry=new yj;for(let n of GQe())this._toolRegistry.registerTool(n)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,n,r){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(n,r)??{}}async invokeTool(e,n,r,i){if(i.isCancellationRequested)throw new Pa;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invoke?.(e,r,i)??new Wi([],"success")}async invokeToolConfirmation(e,n,r,i){if(i.isCancellationRequested)throw new Pa;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invokeConfirmation?.(e,r,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,n){return this._toolRegistry.listTools().find(r=>r.name===e&&r.toolProvider.id===n.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let c of this._toolRegistry.listTools())e.has(c.toolProvider.id)||e.set(c.toolProvider.id,[]),e.get(c.toolProvider.id)?.push(c);let n=e.get(vb.id)?.find(c=>c.name==="insert_edit_into_file");n&&e.get(vb.id)?.splice(e.get(vb.id)?.indexOf(n)??0,1);let r=e.get(lA.id)?.find(c=>c.name==="insert_edit_into_file");r&&e.get(lA.id)?.splice(e.get(lA.id)?.indexOf(r)??0,1);let i=new Map;n&&r&&i.set(n.nameForModel,n);let o=e.get(lA.id)??[],a=e.get(vb.id)??[],l=Array.from(e.entries()).filter(([c])=>c!==vb.id&&c!==lA.id).flatMap(([,c])=>c);return o.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),a.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),l.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),i}};f();f();var aT=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var VQe=require("crypto"),Cde=require("fs"),xde=Ve(require("path"));var HQe="symbolDatabaseLookup",jQe="multiLanguageContextProviderDocumentSymbols",lT=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let n=await this.persistenceManager.read(HQe,e);return n||(n=await this.createDBFile(e)),xde.default.join(this.persistenceManager.directory,jQe,n)}async init(){let e=xde.default.join(this.persistenceManager.directory,jQe);await this.createIfNotExists(e)}async dirExists(e){try{return await Cde.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await Cde.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let n=`${(0,VQe.randomUUID)()}.db`;return await this.persistenceManager.update(HQe,e,n),n}async deleteDBFile(e){}};f();f();var cT=class{static{s(this,"FileSearch")}};f();var y9=class{constructor(e,n){this.workspaceUris=e;this.params=n}static{s(this,"FileWatcher")}};f();f();f();var wj=Ve(require("path")),$Qe=require("worker_threads");function zQe(t,e){return new $Qe.Worker(wj.default.resolve(wj.default.extname(__filename)!==".ts"?__dirname:wj.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(zQe,"createWorker");f();var _j=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,n=!1){return new Promise((r,i)=>{n?this.outstandingPromises.unshift({factory:e,c:r,e:i}):this.outstandingPromises.push({factory:e,c:r,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let n=e.factory();n.then(e.c,e.e),n.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var YQe=Ve(ii());var Sj="main.js",Rj=class{constructor(e,n=3){this.promiseResolvers=new Map;this.id=0;try{let r={cwd:process.cwd(),indexWorkspaceRoots:e};this.worker=zQe(Sj,r),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",i=>{this.handleUnexpectedError(i)}),this.postMessageQueue=new _j(n)}catch(r){throw console.error(`Failed to create worker: ${r.message}`),r}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new cQ(this.id++),YQe.CancellationToken.None,!0)}async indexFile(e,n,r){return await this.postMessageInQueue(new sQ(this.id++,e,n),r)}async getAllFileNames(e,n){return this.postMessageInQueue(new aQ(this.id++,e),n)}getContext(e,n,r,i,o,a){return this.postMessageInQueue(new lQ(this.id++,e,n,r,i,o),a,!0)}tryCreateIndex(e,n,r){return this.postMessageInQueue(new iQ(this.id++,e,n),r)}async postMessageInQueue(e,n,r=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,n),r)}tryRemoveIndex(e,n){return this.postMessageAndWait(new oQ(this.id++,e),n)}async postMessageAndWait(e,n){if(this.fatalError)return Promise.reject(this.fatalError);let r=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=n.onCancellationRequested(()=>{this.worker.postMessage(new rQ(e.id))});try{return await r}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let n=this.promiseResolvers.get(e.id);if(!n)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,n.reject(e.error)):n.resolve(e.data)}handleUnexpectedError(e){let n;if(e instanceof Error){n=e,n.code==="MODULE_NOT_FOUND"&&n.message?.endsWith(Sj+"'")&&(n=new Error(`Failed to load ${Sj}`),n.code="CopilotPromptLoadFailure");let r=new Error().stack;n.stack&&r?.match(/^Error\n/)&&(n.stack+=r.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(n=new Error(`${Sj} exited with status ${e.status}`),n.code=`CopilotPromptWorkerExit${e.status}`):n=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let r of this.promiseResolvers.values())r.reject(n);this.promiseResolvers.clear(),this.fatalError=n}};var C9=Ve(ii());var H0=new _t(sv),uT=class{constructor(e,n,r,i){this.ctx=e;this.watcher=n;this.workspaceDatabasePersistenceManager=r;this.workspaceInit=new Map;this.watcher.onFileChange(async(o,a)=>{await this.indexFile(a,this.languageId(a)??"plaintext")}),this.watcher.onWorkspaceChange(async(o,a)=>{if(o===1){H0.debug(this.ctx,`workspace removed: ${a}`),await this.indexClient.tryRemoveIndex(a,C9.CancellationToken.None);return}H0.debug(this.ctx,`workspace added: ${a}`),await this.indexAddedWorkspace(a)}),this.indexClient=new Rj(i);for(let o of i){let a=o.rootPath;this.workspaceInit.set(a,this.doWorkspaceIndex(a).then(()=>{H0.debug(this.ctx,`workspace ${a} indexed`),this.workspaceInit.delete(a)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[n]of this.workspaceInit)if(e.startsWith(n))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let n=await R8t(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(n.rootPath,n.databaseFilePath,C9.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let r=this.doWorkspaceIndex(e).then(()=>{H0.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,r)}async doWorkspaceIndex(e){H0.debug(this.ctx,`indexing workspace ${e}`);let n=ute.map(d=>`*${d}`);if(n.length===0)return;let i=`**/${ute.length===1?n[0]:`{${n.join(",")}}`}`,o=this.ctx.get(cT),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,C9.CancellationToken.None)]),l=a[0],c=a[1],u=Array.from(new Set([...l,...c]));H0.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),H0.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,n){try{H0.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,n,C9.CancellationToken.None)}catch(r){H0.debug(this.ctx,`failed to index ${e} with ${r}`)}}languageId(e){return o2e(e)}};async function R8t(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(R8t,"createIndexableWorkspaceFolder");f();f();var KQe=100,k8t=5e3,kj=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,n,r,i,o,a,l,c){let u=Date.now(),d=this.get(r,i,n,u);if(d)return this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(n,r,i,o,l,c);let p=new sr.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(n,r,i,o,l,p.token);return d=this.setBasedOnLastDelimiter(r,i,n,u,h,m),this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,n,r,i){if(this.cachedValue&&this.cachedValue.uri===r&&!(Math.abs(this.cachedValue.cursorPosition-n)>KQe)){if(n>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,n).match(/[^A-Za-z0-9]/))return}else if(n<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>k8t))return this.cachedValue}}setBasedOnLastDelimiter(e,n,r,i,o,a){let l=e.substring(0,n),c=/[A-Za-z0-9]+$/.exec(l),u=n;c&&(u=c.index),n-u>KQe&&(u=n);let d={cursorPosition:u,uri:r,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:an(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var Bj=class{constructor(e){this.id=sv;this.selector=GM.map(e=>({language:e.languageId}));try{this.documentManager=e.get(kn),this.resolver=new vde(this.documentManager,e)}catch(n){throw H0.error(e,"Failed to create multi-language context provider",n),n}}static{s(this,"MultiLanguageContextProvider")}},vde=class{constructor(e,n){this.ctx=n;this.documentManager=e,this.cachedContextFetcher=new kj}static{s(this,"MultiLanguageContextResolver")}resolve(e,n){return this.resolveImpl(e,n)}async resolveImpl(e,n){let r=this.ctx.get(aT).indexWatcher;if(!r)return[];if(r.isInitializing(e.documentContext.uri))return[];let i=r.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,l=e.documentContext.proposedEdits??[],c=Tg(o,a);c=c.applyEdits(l);let u=g5e(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,c.textDocument.getText(),c.textDocument.offsetAt(c.position),e.documentContext.languageId,c.editsWithPosition.length===0,u,n);return H0.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(BM(o))return[];throw H0.error(this.ctx,"Failed to get context",o),o}}};var x9=class extends hR{constructor(n){super();this.started=!1;this.ctx=n,this.ctx.get(aA).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Ra).providers.some(n=>n.id===sv)){let n=this.ctx.get(lT);this.fileWatcher=new bde([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new uT(this.ctx,this.fileWatcher,n,[]),this.fileSearch=new Ede(this.ctx),this.ctx.set(y9,this.fileWatcher),this.ctx.set(cT,this.fileSearch),this.ctx.set(uT,this.multiLanguageContextIndexWatcher),this.ctx.get(Ra).registerContextProvider(new Bj(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let n=await this.ctx.get(Nt).updateExPValuesAndAssignments(),r=YO(this.ctx,n);return r.includes(sv)||r.length===1&&r[0]==="*"}async onWorkspaceAdded(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,n.uri)}async onWorkspaceRemoved(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,n.uri)}async onWorkspaceSubfoldersTerminated(n,r){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(n,r)}async onFileChange(n){if(await this.isEnabled())for(let r of n.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(n.type),r.uri)}toFileWatcherType(n){switch(n){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},bde=class extends y9{constructor(n,r){super(n,r);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(n){this.fileChangeListeners.push(n)}onWorkspaceChange(n){this.workspaceChangeListeners.push(n)}dispose(){}async triggerFileChange(n,r){for(let i of this.fileChangeListeners)await i(n,r)}async triggerWorkspaceChange(n,r){for(let i of this.workspaceChangeListeners)await i(n,r)}},Ede=class extends cT{constructor(n){super();this.ctx=n}static{s(this,"LspFileSearch")}async findFiles(n,r,i){return(await this.ctx.get(Xc).getWatchedFiles(r)).map(a=>this.ctx.get(kn).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var Ide=class extends aT{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new x9(e),e.set(x9,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function JQe(t){let e=t.get(Cc),n=new lT(e);t.set(lT,n),t.set(aT,new Ide(t))}s(JQe,"setupMultiLanguageContextProviderFeature");f();f();f();var uA=new Map;uA.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});uA.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});uA.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});uA.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});uA.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});uA.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var D8t=new _t("sdk");function Dj(t,e){uA.has(t.get(ur).getEditorPluginInfo().name)||D8t.warn(t,...e)}s(Dj,"deprecationWarning");var ZVe=Ve(Gde()),ch=Ve(xm());f();f();f();var $n={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var xc=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(WUe(e))}};function st(t,e){let n=ds.Compile(t);return async(r,i,o)=>{if(!n.Check(o)){let a=WUe(n.Errors(o));return[null,{code:$n.InvalidParams,message:a}]}return e(r,i,o)}}s(st,"addMethodHandlerValidation");function WUe(t){return`Schema validation failed with the following errors:
${Array.from(t).map(n=>`- ${n.path}: ${n.message}`).join(`
`)}`}s(WUe,"createErrorMessage");f();var Hde=Ve(ii());f();var fA=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var Hj="github.copilot.finishDeviceFlow",jde=class extends fA{constructor(){super(...arguments);this.name=Hj;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(n,r){let i=this.ctx.get(dr).pendingSignIn;if(!i)throw new Hde.ResponseError($n.InvalidRequest,"No pending sign in");try{await this.ctx.get(cc).open(i.verificationUri)}catch(o){dd.warn(this.ctx,"Failed to open",i.verificationUri),dd.exception(this.ctx,o,Hj)}try{return await i.status}catch(o){throw new Hde.ResponseError($n.DeviceFlowFailed,String(o))}finally{this.ctx.get(dr).pendingSignIn=void 0}}},GUe=[jde];f();f();var ns=class extends Jn{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var S9="github.copilot.didAcceptCompletionItem",Vde=class extends fA{constructor(){super(...arguments);this.name=S9;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(n,[r]){let o=this.ctx.get(ns).get(r);return o?(GU(this.ctx,o),!0):!1}},HUe=[Vde];f();var S9t="github.copilot.didAcceptNextEditSuggestionItem",$de=class extends fA{constructor(){super(...arguments);this.name=S9t;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(n,[r]){return await this.ctx.get(Zm).handleAcceptance(r),!0}},jUe=[$de];f();var Yde="github.copilot.didAcceptPanelCompletionItem",zde=class extends fA{constructor(){super(...arguments);this.name=Yde;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(n,r){let[i]=r,a=this.ctx.get(ns).get(i);return a?(s2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},VUe=[zde];var R9t=[...GUe,...HUe,...jUe,...VUe];function $Ue(t,e){let n=new Map;for(let r of R9t){let i=new r(t),o=ds.Compile(i.arguments);n.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((r,i)=>{let o=n.get(r.command);if(!o)throw new Error(`Unknown command: ${r.command}`);let a=Iy(r.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(r.arguments))return o.command.handle(i,a);throw new xc(o.typeCheck.Errors(r.arguments))}),[...n.keys()]}s($Ue,"registerCommands");f();var zUe=Ve(require("node:events"));var j0=class extends CI{constructor(n){super(new bS,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...n},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(r=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${k9t(r.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(mt[r],this.env[o]),this.setConfig(mt[r],this.env[o]))}})}setConfig(n,r){super.setConfig(n,r??this.envSettings.get(n)),this.emitters.get(n)?.emit("change",r)}onConfigChange(n,r){this.emitters.has(n)||this.emitters.set(n,new zUe.default),this.emitters.get(n)?.on("change",r)}};function k9t(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(k9t,"camelCaseToSnakeCaseAllCaps");var B9t="unknown-editor",YUe="unknown-editor-plugin",jj=class extends ur{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,n,r=[]){this._editorInfo=n,this._editorPluginInfo=e,this._relatedPluginInfo=r}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:B9t,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:YUe,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function KUe(t){return t.getEditorPluginInfo().name!==YUe}s(KUe,"hasValidInfo");f();var XUe=require("node:events");var JUe="initialize",Ty=class{constructor(){this.emitter=new XUe.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(JUe,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(JUe)}};f();var wy=Ve(xm());var D9t=new Map([[4,wy.MessageType.Log],[3,wy.MessageType.Info],[2,wy.MessageType.Warning],[1,wy.MessageType.Error]]),Vj=class extends Ha{static{s(this,"NotificationLogger")}logIt(e,n,r,...i){if(n==4&&!jU(e)&&r!=="console")return;let o={type:D9t.get(n),message:$Re(r,...i)},a=e.get(Cn).connection;try{a.sendNotification(new wy.NotificationType("window/logMessage"),o)}catch(l){if(l instanceof wy.ConnectionError)return;throw l}}};f();var ZUe=Ve(Ta());var $j=class{constructor(e,n=!1){this.ctx=e;this.codeSnippets=n}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,n,r){this.ctx.get(Cn).connection.sendNotification(new ZUe.NotificationType(this.notificationName),{type:"event",name:e,properties:n||{},measurements:r||{}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(e,n,r)}dispose(){return Promise.resolve()}};async function eqe(t){let e=t.get(Rl),n=e.deactivate();e.setReporter(new $j(t)),e.setRestrictedReporter(new $j(t,!0)),await n}s(eqe,"setupRedirectingTelemetryReporters");f();f();var zj=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,n){n?kt(e,"installed.reinstall"):kt(e,"installed.new")}handleUpgrade(e){kt(e,"installed.upgrade")}handleUninstall(e){kt(e,"uninstalled")}};var R9=Ve(Gde());var xR=class extends zj{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let n=e.get(ur).getEditorPluginInfo();return await e.get(Cc).read("versions",n.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Cc).listSettings()).length>0}async markInstalled(e){let n=e.get(ur).getEditorPluginInfo();await e.get(Cc).update("versions",n.name,n.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let n=e.get(ur).getEditorPluginInfo(),r=await e.get(Cc).read("versions",n.name);return r===void 0&&await this.hasPersistedSettings(e)?!0:(0,R9.gt)((0,R9.coerce)(n.version),(0,R9.coerce)(r))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let n=e.get(ur).getEditorPluginInfo();await e.get(Cc).delete("versions",n.name),(await e.get(Cc).listKeys("versions")).length===0&&await e.get(Cc).deleteSetting("versions")}};f();var tqe=require("events"),Jde=Ve(require("path")),Yj=Ve(Ta());var Kde="didChangeWatchedFiles",P9t={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},th=class t{constructor(e){this.ctx=e;this.emitter=new tqe.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new Yj.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Cn).connection}init(){this.ctx.get(Go).getCapabilities().watchedFiles&&this.connection.onNotification(Yj.DidChangeWatchedFilesNotification.type,n=>{"workspaceUri"in n&&typeof n.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(n)})}async getWatchedFiles(e){if(!this.ctx.get(Go).getCapabilities().watchedFiles)return P9t;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],l=[];for(let c of i){typeof c=="object"&&(c=c.uri);let u=Jde.extname(c).toLowerCase();if(!e8.includes(u)){l.push({uri:c});continue}let d=await this.getValidDocument(c);if(d===void 0){a.push({uri:c});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:l}}onDidChangeWatchedFiles(e){this.emitter.on(Kde,e)}offDidChangeWatchedFiles(e){this.emitter.off(Kde,e)}async didChangeWatchedFilesHandler(e){let n=[],r=[],i=[];for(let o of e.changes){let a=o.uri,l={uri:a,isRestricted:!1,isUnknownFileExtension:!1},c=Jde.extname(o.uri).toLowerCase();if(!e8.includes(c))l.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?l.isRestricted=!0:l.document=u}switch(o.type){case 1:r.push(l);break;case 2:n.push(l);break;case 3:i.push(l);break}}this.emitter.emit(Kde,{workspaceFolder:{uri:e.workspaceUri},created:r,changed:n,deleted:i})}async getValidDocument(e){let r=await this.ctx.get(Cr).getOrReadTextDocument({uri:e});return r.status==="valid"?r.document:void 0}};f();f();var N9t=I.Object({uri:I.String({minLength:1})});async function L9t(t,e,n){let r=await t.get(Cr).getOrReadTextDocument(n);return[{status:gs(r),...r.status==="invalid"&&{reason:r.reason},...r.status==="notfound"&&{reason:r.message}},null]}s(L9t,"handleCheckFileStatusChecked");var nqe=st(N9t,L9t);f();var F9t=I.Object({});function rqe(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(rqe,"calculatePercentRemaining");async function M9t(t,e,n){let r=await t.get(dr).getSession(t);if(r){let i=await pee(t,r);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:rqe(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:rqe(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:$n.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:$n.InternalError,message:"Not signed in"}]}s(M9t,"handleCheckQuotaChecked");var iqe=st(F9t,M9t);f();var Q9t=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function O9t(t,e,n){return[await t.get(dr).checkAndUpdateStatus(t,n.options),null]}s(O9t,"handleCheckStatusChecked");var oqe=st(Q9t,O9t);f();f();f();f();f();f();function sqe(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(sqe,"filterUnsupportedReferences");function aqe(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(aqe,"convertToCopilotReferences");var lqe=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var bb=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,n){let r=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(n.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(r,o,sqe(n.copilotReferences),n.copilotErrors??[],n.copilotConfirmation)}append(e,n,r,i,o){this.deltaApplier(e,n,r,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...n.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let n=[],r=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return n.push(...r),n.push(...i),n}};f();var nl=class{static{s(this,"ConversationInspector")}};f();var Xde={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var Is=class{constructor(e){this.ctx=e;this.progressEntries=new Jn(250)}static{s(this,"ConversationProgress")}async begin(e,n,r){let i={status:"open",handler:r};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,n)}async report(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,n,r)}async end(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,n,r))}async cancel(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,n,r))}getProgressEntry(e){let n=this.progressEntries.get(e.id);if(n===void 0)throw new Error(`No work done token for conversation ${e.id}`);return n.status!=="open"&&On.error(this.ctx,`Work done token for conversation ${e.id} is already ${n.status}, last updated at ${n.updatedAt}`),n}};f();f();var pA=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e,n){let r=this.githubRepositoryInfoCache.get(`${e}/${n}`);if(r)return r;let i=await this._doGetRepositoryInfo(e,n);if(i.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(`${e}/${n}`,o),o}throw new Error(`Failed to fetch repository info for ${e}/${n}`)}async _doGetRepositoryInfo(e,n){let r=await this.ctx.get(Mn).getGitHubSession(),i={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};r&&(i.Authorization=`Bearer ${r.accessToken}`);let o=this.ctx.get(ul).getAPIUrl(`repos/${e}/${n}`);return this.ctx.get(rr).fetch(o,{method:"GET",headers:i})}async isAvailable(e,n){try{return(await this._doGetRepositoryInfo(e,n)).ok}catch{return!1}}};f();f();f();var uqe=Ve(V0());var mA=class{constructor(e,n,r){this.doc=e;this.selection=n;this.visibleRange=r}static{s(this,"ElidableDocument")}fromSelectedCode(e){let n=this.getExpandedSelection(),r=n;if(e.trimNewLines){let o=this.doc.getText(n),a=o.match(/^\n*/)?.[0].length??0,l=o.match(/\n*$/)?.[0].length??0;r={start:this.getLineStart(n.start.line+a),end:this.expandLineToEnd(n.end.line-l)}}let i=new Bt([(0,uqe.default)(this.doc.getText(r)).trim()]);return[this.wrapInTicks(i),r]}fromAllCode(e){let n=this.getDocumentRange(),r=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,r)?i=r:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:n.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):n.start},a={start:i.start,end:r.start.line>0&&r.start.line>i.start.line?this.expandLineToEnd(r.start.line-1):i.start},l={start:r.end.line<this.doc.lineCount-1&&r.end.line<i.end.line?this.getLineStart(r.end.line+1):i.end,end:i.end},c={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):n.end,end:n.end},u=[[o,.6],[a,.8],[r,1],[l,.4],[c,.2]],d=new Bt(u.filter(([p,m])=>!vR(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:bu(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||vR(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,n){return e.start.line<=n.start.line&&e.end.line>=n.end.line}rangeEquals(e,n){return e.start.line==n.start.line&&e.end.line==n.end.line}wrapInTicks(e,n){return new Bt([["```"+this.doc.detectedLanguageId,1],[e,n??1],["```",1]])}addLineNumbers(e){let n=this.doc.getText(e).split(`
`),r=this.doc.lineCount.toString().length;return n.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(r," ")}:${o}`).join(`
`)}};function vR(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(vR,"isEmptyRange");var dqe=Ve(require("path"));var fqe=I.Object({uri:I.String(),visibleRange:I.Optional(Ea),selection:I.Optional(Ea)}),Zde=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=await n.getOrReadTextDocument(e),i=gs(r);if(await this.turnContext.collectFile(nu,e.uri,i),r.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new mA(r.document,e.selection,e.visibleRange),l=n.getRelativePath(r.document);if(i==="empty")return new Bt([`The currently open file \`${l}\` is empty.`]);let c=[[`Code excerpt from the currently open file \`${l}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(vR(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Bt([...c,...u])}else if(r.status==="invalid")return new Bt([`The currently open file \`${dqe.basename(e.uri)}\` is content excluded.`])}},nu="current-editor",Kj=class{constructor(e){this._resolver=e;this.id=nu;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new Zde(e)}};f();f();var gl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(n=>n.id===e)}getDescriptors(){return[...this.skills]}},e0e=class{constructor(e,n,r){this.delegate=e;this.stepId=n;this.stepTitle=r}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let n=await this.delegate.resolveSkill(e);return n||await e.steps.finish(this.stepId),n}catch(n){throw await e.steps.error(this.stepId,n instanceof Error?n.message:`Error resolving ${this.stepTitle}`),n}}},t0e=class{constructor(e,n){this.delegate=e;this.stepId=n}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,n){try{let r=await this.delegate.processSkill(e,n);return await n.steps.finish(this.stepId),r}catch(r){throw await n.steps.error(this.stepId,r instanceof Error?r.message:`Error processing ${this.stepId}`),r}}},$l=class{constructor(e,n,r,i,o,a="explicit",l=[],c=()=>!0){this.id=e;this._description=n;this.stepTitle=r;this._resolver=i;this._processor=o;this.type=a;this._examples=l;this._isAvailable=c}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new e0e(this._resolver(e),this.id,this.stepTitle)}processor(e){return new t0e(this._processor(e),this.id)}};var pqe=I.Object({name:I.String(),url:I.String()}),mqe=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(pqe)})),remotes:I.Optional(I.Array(pqe))}),n0e=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(hA,"git repository information");let n=[];return n.push([new Bt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(n.push([new Bt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&n.push([new Bt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):n.push([new Bt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&n.push([new Bt([`- Remotes: ${e.remotes.map(r=>r.name).join(", ")}`]),1]),new Bt(n)}},hA="git-metadata",Jj=class extends $l{static{s(this,"GitMetadataSkill")}constructor(e){super(hA,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,n=>new n0e(n))}};async function hqe(t){let e=await t.skillResolver.resolve(nu);if(e){let a=e.uri,l=Ux(t.ctx,a);if(MIe(l))return{repoInfo:l,skillUsed:nu}}let n=await t.skillResolver.resolve(hA);if(!n||!n.remotes||n.remotes.length===0){On.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=n.remotes.find(a=>a.name==="origin")??n.remotes[0],o=Lee(i.url);if(o)return{repoInfo:{baseFolder:{uri:n.path},url:i.url,...o},skillUsed:hA}}s(hqe,"extractRepoInfo");async function gqe(t){let e=[];return await U9t(t,e),await q9t(t,e),await W9t(t,e),e}s(gqe,"skillsToReference");async function U9t(t,e){let n=await G9t(t);n&&e.push(n)}s(U9t,"addRepositoryReference");async function q9t(t,e){let n=await H9t(t);n&&e.push(n)}s(q9t,"addSelectionReference");async function W9t(t,e){let n=[],r=await V9t(t);r&&n.push(r),n.push(...await $9t(t)),n.length>0&&e.push(...n)}s(W9t,"addFileReferences");async function G9t(t){let e=await hqe(t);if(e){let n=t.ctx.get(pA),r=e.repoInfo.owner,i=e.repoInfo.repo;if(await n.isAvailable(r,i))return{type:"github.repository",id:`${r}/${i}`,data:{type:"repository",name:i,ownerLogin:r,id:(await n.getRepositoryInfo(r,i)).id}}}}s(G9t,"gitMetadataToReference");async function H9t(t){let e=await t.skillResolver.resolve(nu);if(e&&e.selection){let r=await t.ctx.get(Cr).getOrReadTextDocument(e),i=gs(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),r.status==="valid")return j9t(e,r.document)}}s(H9t,"currentEditorToSelectionReference");function j9t(t,e){if(t.selection&&!vR(t.selection)){let n=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:n}}}}s(j9t,"extractSelection");async function V9t(t){let e=await t.skillResolver.resolve(nu);if(e){let r=await t.ctx.get(Cr).getOrReadTextDocument(e),i=gs(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),r.status==="valid")return{type:"client.file",id:r.document.uri,data:{content:r.document.getText(),language:r.document.detectedLanguageId}}}}s(V9t,"currentEditorToFileReference");async function $9t(t){let e=[],n=t.turn.request.references;if(n&&n.length>0){let r=t.ctx.get(Cr);for(let i of n)if(i.type==="file"){let o=await r.getOrReadTextDocument(i),a=gs(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let l=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:l,language:o.document.detectedLanguageId}})}}}return e}s($9t,"fileReferenceToPlatformFileReference");f();f();f();f();var Iqe=Ve(eV()),s0e=Ve(require("path"));var Tqe=500,r6t=Math.floor(.25*Tqe),tV=class{static{s(this,"FixedSizeChunking")}async chunk(e,n){let r=[],i=s0e.default.extname(__filename)===".ts"?s0e.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return r=await Iqe.job(async({text:o,uri:a,tokenizerName:l,directory:c,chunkSize:u,overlap:d})=>{let m=await require(c).getTokenizerAsync(l),h=m.tokenize(o),g=h.length,y=[],v=0;for(;v<g;){let b=v+u>=g,E=b?g:v+u,_=h.slice(v,E),k=m.detokenize(_),D=o.indexOf(k);y.push({id:`${a.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:D,end:D+k.length}}),v=b?E:E-d}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:n.tokenizer,directory:i,chunkSize:Tqe,overlap:r6t}}),r}};var i6t="fixedSize",o6t=new Map([["fixedSize",tV]]);function wqe(t){let e=t==="default"?i6t:t,n=o6t.get(e);if(!n)throw new Error(`Chunking constructor for type ${t} not found`);return n}s(wqe,"getChunkingAlgorithm");f();f();var nV=Ve(fx()),gA=Ve(require("fs")),_qe=require("os"),xp=Ve(require("path")),bR=require("process");var a0e=5e4,s6t=new _t("workspaceChunks"),rV=class t{constructor(e,n){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let r=Ti(n.uri),i=(0,nV.SHA256)(n.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=xp.join(a6t(),"project-context",`${r}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let n=(0,nV.SHA256)(e).toString().substring(0,this.pathHashLength),r=xp.basename(e);return xp.join(this.cacheRootPath,`${r}.${n}.json`)}async getChunksCacheFromCacheFile(e){let n=await gA.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(n)try{return JSON.parse(n)}catch{}}async getChunksCache(e){let n=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(n)}async setChunksCache(e,n){let r=this.getChunksCacheFile(e);try{await gA.promises.mkdir(xp.dirname(r),{recursive:!0}),await gA.promises.writeFile(r,JSON.stringify(n),{encoding:"utf8"})}catch(i){s6t.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let n=this.getChunksCacheFile(e);await gA.promises.rm(n).catch(()=>{})}async enumerateChunksCacheFileNames(){return await gA.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let n of await this.enumerateChunksCacheFileNames()){let r=xp.join(this.cacheRootPath,n);if(!this.chunksCountCache.has(r)){let i=await this.getChunksCacheFromCacheFile(r);this.chunksCountCache.set(r,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(r)||0}return e}async*getChunksForFile({uri:e}){let n=await this.getChunksCache(e);n!==void 0&&(yield*n.documentChunks)}async*getChunksFromCacheFile(e){let n=await this.getChunksCacheFromCacheFile(e);yield*n?n.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let n=await this.enumerateChunksCacheFileNames();for(let r of n)yield*this.getChunksFromCacheFile(xp.join(this.cacheRootPath,r))}}async getFileHash(e){let n=Wo(e),r="";return n&&(r=await gA.promises.readFile(n,{encoding:"utf8"}).catch(()=>"")),(0,nV.SHA256)(r).toString()}async addChunks({uri:e},n){let r=Array.isArray(n)?()=>Promise.resolve(n):n,i=Wo(e);if(!i)return;async function o(p){try{return(await gA.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&a!==void 0&&l.lastModified===a){this.chunksCountCache.set(i,l.documentChunks.length);return}let c=await this.getFileHash(e),u=await r();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:c,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let n=cl(e),r=await this.getChunksCache(n);return r===void 0?[]:(await this.removeChunksCache(n),r.documentChunks)}async deleteChunks({uri:e}){let n=Wo(e);if(!n)return[];let r;try{r=await gA.promises.readdir(n)}catch{return await this.deleteChunksForSource(n)}let i=[];for(let o of r){let a=cl(xp.join(n,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await gA.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function a6t(){return bR.env.XDG_CACHE_HOME&&xp.isAbsolute(bR.env.XDG_CACHE_HOME)?bR.env.XDG_CACHE_HOME+"/github-copilot":(0,_qe.platform)()==="win32"?bR.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":bR.env.HOME+"/.cache/github-copilot"}s(a6t,"getXdgCachePath");var l0e=1e4;var iV=class{constructor(e,n,r){this.workspaceFolder=n;this.implementation=r;this._chunkLimiter=new u0e;this.status="notStarted",this.workspaceChunks=new rV(e,n),this.cancellationToken=new c0e,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,n){return n?await this.chunkFiles(e,n):await this.chunkWorkspace(e)}async chunkWorkspace(e){let n=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(n,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let r=await e.get(Xc).getWatchedFiles(this.workspaceFolder);this._totalFileCount=r.length,r.length>l0e&&(this._fileCountExceeded=!0,r=r.slice(0,l0e));let i=r.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){ba(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(n,performance.now()),await this.workspaceChunks.getChunksCount()>a0e&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,n){await this.updateModelConfig(e);let r=n.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(r)}catch(i){ba(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>a0e&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>l0e&&(this._fileCountExceeded=!0),VSe(...n.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,n){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(n,()=>this.implementation.chunk(n,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Co.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,n){this._chunkingTimeMs=n-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},c0e=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},u0e=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((n,r)=>{this.tasks.push({factory:e,resolve:n,reject:r}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:n,reject:r}=this.tasks.shift();this.runningTasks++;let i=e();i.then(n,r),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var fa=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,n){let r=wqe(n),i=new r;return new iV(this.ctx,e,i)}getImplementation(e,n="default"){let r=this.getParentFolder(e);if(r)return this.workspaceChunkingProviders.get(r.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,n),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let n=[];for(let r of this.workspaceChunkingProviders.values())n.push(r.workspaceFolder);return n.find(r=>{let i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==r.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let n=this.getImplementation(e);return{fileCountExceeded:n.fileCountExceeded,chunkCountExceeded:n.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,n){let r=this.getImplementation(n);r.terminateChunking();let o=or.createAndMarkAsIssued().extendedBy(void 0,{fileCount:r.filesUpdatedCount});kt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(n.uri)}async clearChunks(e,n){this.terminateChunking(e,n),await this.getImplementation(n).clearChunks()}async deleteSubfolderChunks(e,n){return await this.getImplementation(e).deleteSubfolderChunks(n.uri)}async deleteFileChunks(e,n){let r=this.getImplementation(e),i=[];Array.isArray(n)||(n=[n]);for(let o of n)i.push(...await r.deleteFileChunks(o));return i}async chunk(e,n,r,i){let o;return r&&(Array.isArray(r)?o=r:i=r),i||(i="default"),o?await this.chunkFiles(e,n,o,i):await this.chunkFolder(e,n,i)}async chunkFolder(e,n,r="default"){let i=this.getImplementation(n,r),o=await i.chunk(e),l=or.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return kt(e,"index.chunk",l),o}async chunkFiles(e,n,r,i="default"){return await this.getImplementation(n,i).chunk(e,r)}};f();f();f();f();f();function sV(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(sV,"toChatModeEnum");var Eb=class{constructor(e,n){this.request=e;this.telemetryId=an();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=n??this.telemetryId}static{s(this,"Turn")}},oV=class t{constructor(e=[],n="panel",r="en",i){this.turns=e;this.source=n;this.userLanguage=r;this._telemetryId=an();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),n=new t(e,this.source,this.userLanguage,this.id);return n._telemetryId=this.telemetryId,n._timestamp=this.timestamp,n}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(n=>n.id===e)}};f();f();f();var Sqe={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},Rqe="Alright, This response contains a code citation.";f();var kqe=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var Bqe=Ve(require("fs")),Uu=Ve(require("path"));var d0e=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],f0e="test_",D9={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},P9=class{constructor(e,n,r=void 0){this.ctx=e;this.fileExists=n;this.baseUri=r}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let n=Ti(e),r=Uu.extname(n).replace(".",""),i=D9[r]??{location:"sameFolder",prefix:f0e,suffix:d0e},o=[];if(i.prefix&&o.push(i.prefix+n),i.suffix)for(let u of i.suffix??[]){let d=n.replace(`.${r}`,u+"."+r);o.push(d)}let a=i.location??"sameFolder",l;if(a==="sameFolder"){if(l=Wo(ud(e)),l===void 0)return}else{let u=Wo(e);if(u===void 0)return;l=this.determineTestFolder(u,a)}for(let u of o){let d=Uu.join(l,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let c=cl(l);if(await this.fileExists(c))return vo(c,o[0])}parseTestFilePath(e){try{return cl(e)}catch(n){Wn.error(this.ctx,`Failed to parse test file path: ${e}`,n);return}}async findImplFileForTestFile(e){let n=Ti(e),r=Uu.extname(n).replace(".",""),i=D9[r]??{location:"sameFolder",prefix:f0e,suffix:d0e},o=[];if(i.prefix&&o.push(n.substring(i.prefix.length)),i.suffix)for(let c of i.suffix??[]){let d=n.substring(0,n.length-c.length-1-r.length)+"."+r;o.push(d)}let a=i.location??"sameFolder",l;a==="sameFolder"?l=ud(e):l=this.determineImplFolder(e);for(let c of o){let u=vo(l,c);if(await this.fileExists(u))return u}}findExampleTestFile(e){let n=Wo(e);if(n===void 0)return;let r=Uu.extname(Ti(e)).replace(".",""),i,o=D9[r]?.location??"sameFolder";o==="sameFolder"?i=Uu.dirname(n):i=this.determineTestFolder(n,o);let a=this.findFiles(i,`.${r}`,D9[r]);if(a.length>0)return cl(a[0])}findFiles(e,n,r){let i=this._readdir(e),o=[];for(let a of i){let l=`${e}${Uu.sep}${a}`;r?.prefix&&a.startsWith(r.prefix)&&o.push(l),r?.suffix&&r?.suffix.some(c=>a.endsWith(c+n))&&o.push(l)}return o}_readdir(e){return Bqe.readdirSync(e,{withFileTypes:!0}).filter(n=>n.isFile()).map(n=>n.name)}determineTestFolder(e,n){let r=(this.baseUri&&Wo(this.baseUri))??"",i=Uu.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,r,i,n);return[r,...o].filter(a=>a).join(Uu.sep)}getRelativeTestFolder(e,n,r,i){let o=Uu.dirname(e).replace(n,"");switch(r){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let n=Uu.extname(Ti(e)).replace(".",""),r=ud(e);switch(n){case"php":case"dart":case"py":return r.replace("tests","src");case"ps1":return r.replace("Tests","src");case"rb":return r.replace("/test","");case"cs":return r.replace("src/tests","src");case"java":case"scala":case"kt":return r.replace("src/test","src/main");default:return r.replace("test/","src/")}}};function N9(t){let e=Ti(t),n=Uu.extname(e),r=D9[n.replace(".","")];return r?!(r.suffix&&!r.suffix.some(o=>e.endsWith(o+n))||r.prefix&&!e.startsWith(r.prefix)):!!(d0e.some(o=>e.endsWith(o+n))||e.startsWith(f0e))}s(N9,"isTestFile");f();var Dqe=["indexed","indexing","not_indexed"],Ib=class{constructor(){this._cache=new Jn(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,n,r){let i=e.ctx;if(!r)return!1;let o=`repos/${n}/copilot_internal/embeddings_index`,a=await kf(i,r,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,n,r,i=!1){let o=b1(n);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let l=await this.queryIndexingStatus(e,o,r);return this._cache.set(o,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();f();async function Pqe(t,e,n,r){let i=Bo(e.tokenizer),o=n.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],l=await t.get(Mn).getToken(),c=HF(t,l,"embeddings"),u=l.token,d=0;for(;d<o.length&&!r.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await l6t(t,c,u,e.modelId,p,r);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(Pqe,"fetchEmbeddings");async function l6t(t,e,n,r,i,o){let a=an(),l=i.map(u=>u.text),c=await jE(t,e,n,void 0,a,{input:l,model:r,dimensions:1024},o,Lx(t));if(c.status!==200||o.isCancellationRequested){ba(t,new _y(`Failed to request dense embeddings, status: ${c.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await c.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(l6t,"sendEmbeddingsRequest");f();f();var aV=class{static{s(this,"CosineSimilarityScoring")}score(e,n){let r=Math.sqrt(e.reduce((a,l)=>a+l*l,0)),i=Math.sqrt(n.reduce((a,l)=>a+l*l,0));return e.reduce((a,l,c)=>a+l*n[c],0)/(r*i)}terminateScoring(){}};var c6t="cosine",u6t=new Map([["cosine",aV]]);function Nqe(t){let e=t==="default"?c6t:t,n=u6t.get(e);if(!n)throw new Error(`Scoring constructor for type ${t} not found`);return n}s(Nqe,"getScoringAlgorithm");f();var $0=class{constructor(){this.workspaceScoringProviders=new Jn(25)}static{s(this,"ScoringProvider")}createImplementation(e,n){let r=Nqe(n);return new r}getImplementation(e,n,r="default"){let i=this.workspaceScoringProviders.get(n.uri);return i||(i=this.createImplementation(e,r),this.workspaceScoringProviders.set(n.uri,i)),i}score(e,n,r,i,o){return this.getImplementation(e,n,o).score(r,i)}terminateScoring(e,n,r){this.getImplementation(e,n,r).terminateScoring(),this.workspaceScoringProviders.delete(n.uri)}};var Lqe={modelFamily:$F.textEmbedding3Small,scoringType:"default",dimensions:null};async function Fqe(t,e,n,r,i,o,a,l=Lqe){let c={...Lqe,...l},u=f6t(t,e,n,r);On.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(Xs).getFirstMatchingEmbeddingModelConfiguration(c.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${c.modelFamily}`);let p=performance.now(),m=await Pqe(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(D=>D.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let v=performance.now(),b=p6t(t,e,m,y,c.scoringType),E=performance.now();a.rerankingTimeMs=Math.floor(E-v);let _=b.slice(0,i);return On.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(D=>u.find(N=>N.id===D.id).id)}s(Fqe,"rerankSnippets");function f6t(t,e,n,r){let i=r.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:n.toLowerCase()}),i}s(f6t,"formatEmbeddingsInput");function p6t(t,e,n,r,i){let o=t.get($0);return n.map(l=>({id:l.id,score:o.score(t,e,r.embedding,l.embedding,i)})).sort((l,c)=>c.score-l.score)}s(p6t,"scoreEmbeddings");f();f();f();var m0e=Ve(eV());var m6t=.75,h6t=1.2,g6t=47,lV=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++}async query(e){let n=await cV();try{return await this.doQuery(e)}finally{await n.stopWorkerPool()}}async doQuery(e){let n=e.map(l=>l.toLowerCase()),r=await this.calculateIDFValues(n),i=Math.min(10*e.length,g6t),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(n,this.avgTokenCount,r,o)}async calculateIDFValues(e){let n=this.ctx.get(fa).getChunks(this.workspaceFolder),r=D1(n,o=>({...o,chunk:o.chunk.toLowerCase()})),i=D1(r,o=>o.chunk);return await A6t(e,i)}async calculateBM25Scores(e,n,r,i){let o=this.ctx.get(fa).getChunks(this.workspaceFolder),a=new p0e(i);for await(let l of o){let c=await y6t({...l,chunk:l.chunk.toLowerCase()},e,n,r);a.add({...c,chunk:l.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((n,r)=>n+r.tokenCount,0)}terminateRanking(){}};async function A6t(t,e){let n=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),r=new Int32Array(n),i=[],o=0;for await(let c of e){o++;let u=m0e.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:c,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(r,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(n),l={};for(let c=0;c<t.length;c++)l[t[c]]=Math.log((o-a[c]+.5)/(a[c]+.5)+1);return l}s(A6t,"calculateIDFValues");async function y6t(t,e,n,r){return{score:await m0e.job(({keywords:o,document:a,docLength:l,avgTokenCount:c,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,v=g*(y*(d+1)),b=y+d*(1-p+p*l/c);m+=v/b}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:n,idfValues:r,k1:h6t,b:m6t}}),...t}}s(y6t,"calculateBM25Score");var p0e=class{constructor(e,n=-1/0){this.maxSize=e;this.minScore=n;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let n=this.store.at(0).score*(1-e);return this.store.filter(r=>r.score>=n)}return this.store}add(e){if(e.score<=this.minScore)return;let n=this.store.findIndex(r=>r.score<e.score);for(this.store.splice(n>=0?n:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var x6t="bm25",v6t=new Map([["bm25",lV]]);function Mqe(t){let e=t==="default"?x6t:t,n=v6t.get(e);if(!n)throw new Error(`Ranking constructor for type ${t} not found`);return n}s(Mqe,"getRankingAlgorithm");var vc=class{constructor(){this.workspaceRankingProviders=new Jn(25)}static{s(this,"RankingProvider")}createImplementation(e,n,r){let i=Mqe(r);return new i(e,n)}getImplementation(e,n,r="default"){let i=this.workspaceRankingProviders.get(n.uri);return i||(i=this.createImplementation(e,n,r),this.workspaceRankingProviders.set(n.uri,i)),i}status(e,n,r){return this.getImplementation(e,n,r).status}async initialize(e,n,r,i="default"){await this.getImplementation(e,n,i).initialize(r)}async addChunks(e,n,r,i="default"){await this.getImplementation(e,n,i).addChunks(r)}async query(e,n,r,i){return this.getImplementation(e,n,i).query(r)}async terminateRanking(e,n,r){await this.getImplementation(e,n,r).terminateRanking(),this.workspaceRankingProviders.delete(n.uri)}deleteEmbeddings(e,n,r,i){return this.getImplementation(e,n,i).deleteEmbeddings(r)}};f();async function Qqe(t,e){let n=t.ctx,r=await Co.getModelConfiguration(n,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:r},o=await n.get(bc).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:r,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new Js(n),c=await fc(n,t),u=await l.fetchResponse(a,e,c.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(On.debug(n,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";ba(n,new _y(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(Qqe,"parseUserQuery");var Oqe=Ve(V0());var _y=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},uV=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,n){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");n===void 0&&(n=!0);let r=e.ctx,i=r.get(fa),o=i.status(e.turn.workspaceFolder),a=r.get(vc),l=a.status(r,e.turn.workspaceFolder);if(o==="completed"&&l==="completed")return Promise.resolve("indexed");if(o==="started"||l==="started")return Promise.resolve("indexing");if(n){let c=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(r,c).then(u=>{if(i.status(c)==="completed")return a.initialize(r,c,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(l==="notStarted"){let u=i.getChunks(c);return Promise.race([a.initialize(r,c,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,n){let r=e.turn.workspaceFolder;if(!r)return[];let i=e.ctx,a=await i.get(fa).chunkCount(r);if(a===0)return[];n.chunkCount=a;let l,c=performance.now();try{l=await Qqe(e,e.cancelationToken)}catch(g){let y=new _y(g);ba(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(n.synonymTimeMs=Math.floor(u-c),l===void 0)return[];let d=i.get(vc),p=[],m=performance.now();try{let g=await d.query(i,r,l);n.localSnippetCount=g.length,p=g}catch(g){let y=new _y(g);ba(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return n.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,n,r){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=Vn(e.turn.request.message),l=[];try{l=await Fqe(o,i,a,n,5,e.cancelationToken,r)}catch(d){let p=new _y(d);ba(o,p,"LocalSnippetProvider.rerankSnippets")}let c=[],u=o.get(Cr);for(let d of l){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=n.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),v=Po.range(g,y);c.push({uri:m.document.uri,range:v,snippet:h.chunk})}}return c}async provideSnippets(e){let n=this.collectInfoMessage(e);n&&await e.info(n);let r={...JSe},i=await this.collectLocalSnippets(e,r);if(i.length===0)return{snippets:[],measurements:r};let o=e.ctx;return On.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,r),measurements:r}}collectInfoMessage(e){let n=e.turn.workspaceFolder;if(!n)return;let o=e.ctx.get(fa).checkLimits(n);if(o.fileCountExceeded||o.chunkCountExceeded)return Oqe.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var qqe=Ve(Uqe()),pV=Ve(eV()),Wqe=Ve(require("os")),Gqe=Ve(V0());var I6t=Math.min(Math.max(Math.ceil(Wqe.cpus().length/2),1),10),L9=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new qqe.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await pV.start({maxWorkers:I6t})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await pV.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let n of e)await n.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},cV=L9.startWorkerPool.bind(L9);var G4r=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),A0e=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(ER);return}let n=[],r=this.turnContext.ctx.get(Cr),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:l,range:c}=o,u=await r.getOrReadTextDocument(o);if(u.status==="valid"){let d=new mA(u.document,c,c),p=new Bt([l]),h=N9(a)?.5:.8;n.push([`Code excerpt from file \`${Wo(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(IR,a,gs(u),c)}}if(n.length>0)return n.unshift([new Bt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Bt(n)}removeDuplicateSnippets(e){let n={};return e.forEach(r=>{let i=`${r.uri}#[${r.range.start.line},${r.range.start.character}]-[${r.range.end.line},${r.range.end.character}]`;n[i]||(n[i]=r)}),Object.values(n)}},ER="collect-project-context",dV=class extends hR{constructor(n,r=[new uV]){super();this.ctx=n;this.snippetProviders=r;this.ready=!1;this.ctx.get(aA).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(n){if(!await this.isEnabled()||(this.workerPoolToken=await cV(),!n.uri))return;let r=this.ctx.get(fa),i=this.ctx.get(Xc),o=this.ctx.get(vc),a=await r.chunk(this.ctx,n);r.status(n)!=="completed"&&i.terminateWatching(n),await o.initialize(this.ctx,n,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(n){if(!await this.isEnabled())return;let r=this.ctx.get(fa);if(!n)return;let i=r.getParentFolder(n);if(i){let l=await r.deleteSubfolderChunks(i,n);await this.ctx.get(vc).deleteEmbeddings(this.ctx,i,l);return}r.terminateChunking(this.ctx,n),await this.ctx.get(vc).terminateRanking(this.ctx,n),this.ctx.get($0).terminateScoring(this.ctx,n),r.workspaceCount===0&&await L9.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(n,r){let i=this.ctx.get(fa),o=this.ctx.get(vc),a=this.ctx.get($0);for(let l of r)i.terminateChunking(this.ctx,l),await o.terminateRanking(this.ctx,l),a.terminateScoring(this.ctx,n)}async onFileChange(n){if(!await this.isEnabled())return;let r=await cV();try{let i=n.documents.map(c=>c.uri),o=n.workspaceFolder;if(!o)return;let a=this.ctx.get(fa),l=this.ctx.get(vc);if(n.type==="delete"||n.type==="update"){let c=await a.deleteFileChunks(o,i);await l.deleteEmbeddings(this.ctx,o,c)}if(n.type==="create"||n.type==="update"){let c=await a.chunk(this.ctx,o,n.documents);await l.addChunks(this.ctx,o,c)}}finally{await r.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(n){await n.steps.start(ER,"Collecting relevant project context"),await n.info(Gqe.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let r=this.snippetProviders.map(async l=>l.snippetProviderStatus(n)),i=await Promise.all(r),o="not_indexed",a;for(let l of Dqe){let c=i.findIndex(u=>u===l);if(c!==-1){o=l,a=this.snippetProviders[c];break}}switch(o){case"indexed":{let{snippets:l,measurements:c}=await a.provideSnippets(n);if(await XSe(n,a.providerType,c),l.length===0){await n.steps.error(ER,"No project context found");return}return await n.steps.finish(ER),l}case"indexing":{await n.steps.error(ER,"Indexing repository, please try again later");return}case"not_indexed":{await n.steps.error(ER,"No project context available");return}}}},IR="project-context",fV=class extends $l{static{s(this,"ProjectContextSkill")}constructor(e){super(IR,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,n=>new A0e(n),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var Hqe=I.Object({labels:I.Array(I.String())}),y0e=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let n=[];return n.push([new Bt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(r=>{n.push([new Bt([`- ${r}`]),.9]),this.turnContext.collectLabel(nh,r)}),new Bt(n)}},nh="project-labels",mV=class{constructor(e){this._resolver=e;this.id=nh;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new y0e(e)}};f();var hV=Ve(V0());var Vqe={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},$qe=hV.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,zqe=hV.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,T6t=hV.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,C0e=`

`,jqe=$qe+C0e+zqe;function Yqe(t){let e=1;if(t.length===0)return{reply:jqe,vulnerabilities:e};if(t==="0")return{reply:jqe,vulnerabilities:0};if(t==="help")return{reply:T6t,vulnerabilities:e};let n=t.slice(-1);isNaN(Number(n))||(e=Number(n),t=t.slice(0,-1));let r="";for(let i of t)i==="p"?r+=$qe+C0e:i==="c"&&(r+=zqe+C0e);return{reply:r.trimEnd(),vulnerabilities:e}}s(Yqe,"parseVulnerabilitiesInstructions");var Kqe=Ve(V0());var w6t="Oops, your response got filtered. Vote down if you think this shouldn't have happened",_6t="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",x0e=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,n){throw new Error(n.length>0?n:"Debug Fail")}},S6t=new x0e,v0e=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new zl(_6t,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},R6t=new v0e,b0e=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,n){let r="warning";n.includes("info")&&(r="info");let i=n.replace("info","").replace("warning","").trim(),o=[{severity:r,message:i.length>0?i:"Debug Notification"}];return new zl("Alright, I'm producing a notification",void 0,[],o)}},k6t=new b0e,E0e=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new zl(w6t,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},B6t=new E0e,I0e=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new zl(await Xqe(e))}},D6t=new I0e,T0e=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[nh,nu]}instructions(e,n){return"Create a function that prints a christmas tree"}},P6t=new T0e,w0e=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new zl(Vn(e.turn.request.message))}},N6t=new w0e,_0e=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,n){let r=e.ctx.get(Yl).getLastTurnPrompts();if(r!==void 0&&r.size>0){let i="Here are the prompts used in the last turn:";return r.forEach((o,a)=>{i+=Kqe.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new zl(i)}return new zl("No prompt available")}},L6t=new _0e,S0e=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,n,r){let i,o;if(n.length>0){let a=n.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new zl(await Zqe(e,r,i))}},F6t=new S0e,R0e=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,n){let{reply:r,vulnerabilities:i}=Yqe(n);for(let o=0;o<i;o++)e.turn.annotations.push(Vqe);return new zl(r,void 0,e.turn.annotations)}},M6t=new R0e,k0e=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(Sqe),new zl(Rqe,void 0,e.turn.annotations)}},Q6t=new k0e,B0e=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new zl(kqe)}},O6t=new B0e,D0e=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,n){return"Write out the OWASP top 10 with code examples in java"}},U6t=new D0e,P0e=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[IR]}},q6t=new P0e,N0e=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new zl("Alright, I'm producing a notification",void 0,[],[],[],e)}},W6t=new N0e;function Jqe(){return[S6t,R6t,k6t,B6t,P6t,D6t,N6t,L6t,F6t,M6t,Q6t,W6t,O6t,U6t,q6t]}s(Jqe,"getDebugTemplates");f();f();function wb(t,e){if(t.length==0)return new Bt([]);let n=t.map((r,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(r)&&r.length==2&&(o*=r[1],r=r[0]),[r,o]});return new Bt(n)}s(wb,"weighElidableList");var eWe=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:Ea}))}),L0e=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=await n.getOrReadTextDocument(e);if(await this.turnContext.collectFile(_b,e.uri,gs(r)),r.status==="valid"){let i=n.getRelativePath(r.document);this.turnContext.collectLabel(_b,`problems in ${i}`);let o=this.getElidableProblems(e,r,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(_b,"problem markers")}getElidableProblems(e,n,r){let i=[];return i.push(new Bt([`Problems and errors in the active document (\`${r}\`):`])),i.push(...this.createElidableProblems(e,n)),wb(i,"linear")}createElidableProblems(e,n){return e.problems.map(r=>{let i=[];i.push(new Bt([`- "${r.message}" at line ${r.range.start.line}.`+(n.document?" Excerpt from the code:":"")]));let o=r.range,a;if(o&&(this.isEmpty(o)?a=n.document.lineAt(o.start).text:a=n.document.getText(o),a)){let l=n.document.detectedLanguageId;i.push(new Bt([["```"+l,1],[bu(a),.8],["```",1]]))}return new Bt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let n=(await Co.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Bt([r])}},_b="problems-in-active-document",gV=class extends $l{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(_b,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,n=>new L0e(n),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var AV=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let n=this.turnContext.ctx.get(kn).getWorkspaceFolder(e),r=this.fileExistFn(),i=new P9(this.turnContext.ctx,r,n?.uri),o=await i.findTestFileForSourceFile(e.uri),a=N9(e.uri);if(o&&!a){let l=e.detectedLanguageId;if(await r(o))return await this.asTestFilePrompt(l,o);{let c=i.findExampleTestFile(e.uri);if(c)return await this.asExampleFilePrompt(l,c)}}}async fromTestFile(e){if(!N9(e))return;let r=this.turnContext.ctx.get(kn).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new P9(this.turnContext.ctx,i,r?.uri).findImplFileForTestFile(e.uri);if(a){let l=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(l,a)}}async asImplFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Bt([[`${G6t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Bt([])}async asTestFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Bt([[`${H6t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Bt([])}async asExampleFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Bt([[`${j6t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Bt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let n=this.turnContext.ctx.get(Cr),r=await n.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(rh,e,gs(r)),r.status==="valid"){let i=n.getRelativePath(r.document);return[bu(r.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(go).stat(e),!0}catch{return!1}}}},G6t="Code excerpt from the implementation source file",H6t="Code excerpt from the test file",j6t="Code excerpt from an example test file";var tWe=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),M0e=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=new AV(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(rh,e.testFileUri,gs(i)),i.status==="valid")return await r.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(rh,e.sourceFileUri,gs(i)),i.status==="valid")return await r.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(rh,e.sourceFileUri,gs(i)),i.status==="valid")return await r.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(rh,e.testFileUri,gs(i)),i.status==="valid")return await r.fromTestFile(i.document)}}},rh="test-context",yV=class extends $l{static{s(this,"TestContextSkill")}constructor(e){super(rh,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,n=>new M0e(n))}};f();var nWe=Ve(V0());var rWe=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:Ea}))}),Q0e=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(mT,"test failures");let n=await this.createElidableFailures(e.failures);if(n){let r=new Bt(["The latest test run produced the following failures and errors:"]);return new Bt([[r,1],[n,1]])}}}async createElidableFailures(e){let n=this.turnContext.ctx.get(Cr),r=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let l=await n.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(mT,o,gs(l)),l.status==="valid"){let c=n.getRelativePath(l.document),u=this.createElidableFailuresOfDoc(a,c),d=this.appendCode(u,c,l.document);r.push([d,1])}}if(r.length>0)return new Bt(r)}groupFailuresByFile(e){let n=new Map;for(let r of e){let i=n.get(r.testFileUri)||[];i.push(r),n.set(r.testFileUri,i)}return n}createElidableFailuresOfDoc(e,n){let r=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,l=` in file \`${n}\` `,c=". ";i.failureReason&&(c=" with the following error:",i.failureReason.includes(`
`)?c+="\n```\n"+i.failureReason+"\n```\n":c+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Bt([nWe.default`\n\n- Test ${o}${a}${l}failed${c}The failed test is ${u}.\n`]),1]});return new Bt(r)}appendCode(e,n,r){let i=[new Bt([`
The code of file \`${n}\` is:
`]),.6],o=[new Bt([["```"+r.detectedLanguageId,1],[bu(r.getText()),.9],["```",1]]),.7];return new Bt([[e,1],i,o])}},mT="test-failures",CV=class extends $l{static{s(this,"TestFailuresSkill")}constructor(e){super(mT,"Test failures and errors of the latest test run","Collecting test failures",()=>e,n=>new Q0e(n))}};var vp=Ve(V0());var zl=class{constructor(e,n,r=[],i=[],o=[],a){this.message=e;this.error=n;this.annotations=r;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},hT=class{constructor(e,n,r,i,o=[],a=[],l,c=!1){this.id=e;this.description=n;this.shortDescription=r;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=l;this.producesCodeEdits=c}static{s(this,"StaticPromptTemplate")}instructions(e,n,r="panel"){let i;return r==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+n}requiredSkills(){return this.skills}},V6t=new hT("tests","Generate unit tests","Generate Tests",vp.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[rh,mT],["chat-panel","editor"]),$6t=new hT("simplify","Simplify the code","Simplify This",vp.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],vp.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),z6t=new hT("fix","Fix problems and compile errors","Fix This",vp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[_b],["editor","chat-panel","inline"],vp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),Y6t=new hT("explain","Explain how the code works","Explain This",vp.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],vp.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),K6t=new hT("doc","Document the current selection of code","Generate Docs",vp.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],vp.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),O0e=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let n=W0e(e.conversation),r=vp.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return n?new zl(r+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${n}
\`\`\``):new zl(r)}},J6t=new O0e,U0e=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let n=q0e(e.ctx).filter(i=>i!=this),r=vp.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${n.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new zl(r)}},X6t=new U0e;function F9(){return[V6t,$6t,z6t,Y6t,K6t,J6t,X6t,...Jqe()]}s(F9,"getPromptTemplates");function q0e(t){let e=F9();return!Xk(t)&&!Kp(t)&&(e=e.filter(n=>!n.id.startsWith("debug."))),e}s(q0e,"getUserFacingPromptTemplates");var G0e=class{constructor(e,n){this.conversation=e;this.capabilities=n}static{s(this,"ConversationHolder")}},Gi=class{constructor(e){this.ctx=e;this.conversations=new Jn(100)}static{s(this,"Conversations")}create({capabilities:e,source:n,userLanguage:r,conversationId:i}={}){let o=new oV([],n??"panel",r,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(gl).getDescriptors().map(l=>l.id)),this.conversations.set(o.id,new G0e(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,n,r,i,o,a,l,c){let u=this.get(e);return n.request.references=r&&r.length>0?r:[],i&&(n.request.activeEditor=i),o&&(n.workspaceFolder=o),a&&a.length>0&&(n.workspaceFolders=a),l&&l.length>0&&(n.ignoredSkills=l.map(d=>({skillId:d}))),c&&(n.agent={agentSlug:c.agentSlug},n.confirmationResponse=c),await this.determineAndApplyAgent(u,n),await this.determineAndApplyTemplate(u,n),u.addTurn(n),n}async determineAndApplyAgent(e,n){if(e.source==="panel"&&Vn(n.request.message).trim().startsWith("@")){let[r,i]=this.extractKeywordAndQuestionFromRequest(Vn(n.request.message),"@");(await yA(this.ctx)).find(l=>l.slug===r)&&(n.request.message=i,n.request.type="user",n.agent={agentSlug:r})}}async determineAndApplyTemplate(e,n){if(Vn(n.request.message).trim().startsWith("/")){let[r,i]=this.extractKeywordAndQuestionFromRequest(Vn(n.request.message),"/"),o=F9().find(a=>a.id===r);if(o){n.request.message=i,n.request.type="user",await this.determineAndApplyAgent(e,n);let a=o.instructions?o.instructions(this.ctx,n.request.message,e.source):i;n.template={templateId:r,userQuestion:n.request.message},n.request.message=a,n.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,n){let[r,...i]=e.trim().split(" "),o=i.join(" ");return[r.replace(n,""),o]}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let n=this.ctx.get(gl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),r=this.getCapabilities(e).skills;return[...n,...r]}filterSupportedSkills(e,n){let r=this.getSupportedSkills(e);return n.filter(i=>r.includes(i))}getHolder(e){let n=this.conversations.get(e);if(!n)throw new Error(`Conversation with id ${e} does not exist`);return n}getAll(){let e=this.conversations.values();return Array.from(e).map(n=>n.conversation)}findByTurnId(e){for(let n of this.getAll()){let r=n.findTurn(e);if(r)return{conversation:n,turn:r}}}};f();function CWe(t){return typeof t>"u"||t===null}s(CWe,"isNothing");function Z6t(t){return typeof t=="object"&&t!==null}s(Z6t,"isObject");function e7t(t){return Array.isArray(t)?t:CWe(t)?[]:[t]}s(e7t,"toArray");function t7t(t,e){var n,r,i,o;if(e)for(o=Object.keys(e),n=0,r=o.length;n<r;n+=1)i=o[n],t[i]=e[i];return t}s(t7t,"extend");function n7t(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}s(n7t,"repeat");function r7t(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(r7t,"isNegativeZero");var i7t=CWe,o7t=Z6t,s7t=e7t,a7t=n7t,l7t=r7t,c7t=t7t,Al={isNothing:i7t,isObject:o7t,toArray:s7t,repeat:a7t,isNegativeZero:l7t,extend:c7t};function xWe(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}s(xWe,"formatError");function Q9(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=xWe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(Q9,"YAMLException$1");Q9.prototype=Object.create(Error.prototype);Q9.prototype.constructor=Q9;Q9.prototype.toString=s(function(e){return this.name+": "+xWe(this,e)},"toString");var Md=Q9;function H0e(t,e,n,r,i){var o="",a="",l=Math.floor(i/2)-1;return r-e>l&&(o=" ... ",e=r-l+o.length),n-r>l&&(a=" ...",n=r+l-a.length),{str:o+t.slice(e,n).replace(/\t/g,"\u2192")+a,pos:r-e+o.length}}s(H0e,"getLine");function j0e(t,e){return Al.repeat(" ",e-t.length)+t}s(j0e,"padStart");function u7t(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(t.buffer);)i.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l="",c,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)u=H0e(t.buffer,r[a-c],i[a-c],t.position-(r[a]-r[a-c]),p),l=Al.repeat(" ",e.indent)+j0e((t.line-c+1).toString(),d)+" | "+u.str+`
`+l;for(u=H0e(t.buffer,r[a],i[a],t.position,p),l+=Al.repeat(" ",e.indent)+j0e((t.line+1).toString(),d)+" | "+u.str+`
`,l+=Al.repeat("-",e.indent+d+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=i.length);c++)u=H0e(t.buffer,r[a+c],i[a+c],t.position-(r[a]-r[a+c]),p),l+=Al.repeat(" ",e.indent)+j0e((t.line+c+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}s(u7t,"makeSnippet");var d7t=u7t,f7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],p7t=["scalar","sequence","mapping"];function m7t(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}s(m7t,"compileStyleAliases");function h7t(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(f7t.indexOf(n)===-1)throw new Md('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=m7t(e.styleAliases||null),p7t.indexOf(this.kind)===-1)throw new Md('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(h7t,"Type$1");var ru=h7t;function iWe(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}s(iWe,"compileList");function g7t(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(r,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}s(g7t,"compileMap");function $0e(t){return this.extend(t)}s($0e,"Schema$1");$0e.prototype.extend=s(function(e){var n=[],r=[];if(e instanceof ru)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Md("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof ru))throw new Md("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Md("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Md("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof ru))throw new Md("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create($0e.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=iWe(i,"implicit"),i.compiledExplicit=iWe(i,"explicit"),i.compiledTypeMap=g7t(i.compiledImplicit,i.compiledExplicit),i},"extend");var A7t=$0e,y7t=new ru("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),C7t=new ru("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),x7t=new ru("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),v7t=new A7t({explicit:[y7t,C7t,x7t]});function b7t(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(b7t,"resolveYamlNull");function E7t(){return null}s(E7t,"constructYamlNull");function I7t(t){return t===null}s(I7t,"isNull");var T7t=new ru("tag:yaml.org,2002:null",{kind:"scalar",resolve:b7t,construct:E7t,predicate:I7t,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function w7t(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(w7t,"resolveYamlBoolean");function _7t(t){return t==="true"||t==="True"||t==="TRUE"}s(_7t,"constructYamlBoolean");function S7t(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(S7t,"isBoolean");var R7t=new ru("tag:yaml.org,2002:bool",{kind:"scalar",resolve:w7t,construct:_7t,predicate:S7t,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function k7t(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(k7t,"isHexCode");function B7t(t){return 48<=t&&t<=55}s(B7t,"isOctCode");function D7t(t){return 48<=t&&t<=57}s(D7t,"isDecCode");function P7t(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!k7t(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!B7t(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!D7t(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}s(P7t,"resolveYamlInteger");function N7t(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}s(N7t,"constructYamlInteger");function L7t(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Al.isNegativeZero(t)}s(L7t,"isInteger");var F7t=new ru("tag:yaml.org,2002:int",{kind:"scalar",resolve:P7t,construct:N7t,predicate:L7t,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),M7t=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Q7t(t){return!(t===null||!M7t.test(t)||t[t.length-1]==="_")}s(Q7t,"resolveYamlFloat");function O7t(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}s(O7t,"constructYamlFloat");var U7t=/^[-+]?[0-9]+e/;function q7t(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Al.isNegativeZero(t))return"-0.0";return n=t.toString(10),U7t.test(n)?n.replace("e",".e"):n}s(q7t,"representYamlFloat");function W7t(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Al.isNegativeZero(t))}s(W7t,"isFloat");var G7t=new ru("tag:yaml.org,2002:float",{kind:"scalar",resolve:Q7t,construct:O7t,predicate:W7t,represent:q7t,defaultStyle:"lowercase"}),H7t=v7t.extend({implicit:[T7t,R7t,F7t,G7t]}),j7t=H7t,vWe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),bWe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function V7t(t){return t===null?!1:vWe.exec(t)!==null||bWe.exec(t)!==null}s(V7t,"resolveYamlTimestamp");function $7t(t){var e,n,r,i,o,a,l,c=0,u=null,d,p,m;if(e=vWe.exec(t),e===null&&(e=bWe.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(n,r,i,o,a,l,c)),u&&m.setTime(m.getTime()-u),m}s($7t,"constructYamlTimestamp");function z7t(t){return t.toISOString()}s(z7t,"representYamlTimestamp");var Y7t=new ru("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:V7t,construct:$7t,instanceOf:Date,represent:z7t});function K7t(t){return t==="<<"||t===null}s(K7t,"resolveYamlMerge");var J7t=new ru("tag:yaml.org,2002:merge",{kind:"scalar",resolve:K7t}),X0e=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function X7t(t){if(t===null)return!1;var e,n,r=0,i=t.length,o=X0e;for(n=0;n<i;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}s(X7t,"resolveYamlBinary");function Z7t(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=X0e,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(r.charAt(e));return n=i%4*6,n===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):n===18?(l.push(a>>10&255),l.push(a>>2&255)):n===12&&l.push(a>>4&255),new Uint8Array(l)}s(Z7t,"constructYamlBinary");function eNt(t){var e="",n=0,r,i,o=t.length,a=X0e;for(r=0;r<o;r++)r%3===0&&r&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[r];return i=o%3,i===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):i===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):i===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}s(eNt,"representYamlBinary");function tNt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(tNt,"isBinary");var nNt=new ru("tag:yaml.org,2002:binary",{kind:"scalar",resolve:X7t,construct:Z7t,predicate:tNt,represent:eNt}),rNt=Object.prototype.hasOwnProperty,iNt=Object.prototype.toString;function oNt(t){if(t===null)return!0;var e=[],n,r,i,o,a,l=t;for(n=0,r=l.length;n<r;n+=1){if(i=l[n],a=!1,iNt.call(i)!=="[object Object]")return!1;for(o in i)if(rNt.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(oNt,"resolveYamlOmap");function sNt(t){return t!==null?t:[]}s(sNt,"constructYamlOmap");var aNt=new ru("tag:yaml.org,2002:omap",{kind:"sequence",resolve:oNt,construct:sNt}),lNt=Object.prototype.toString;function cNt(t){if(t===null)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],lNt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[e]=[i[0],r[i[0]]]}return!0}s(cNt,"resolveYamlPairs");function uNt(t){if(t===null)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}s(uNt,"constructYamlPairs");var dNt=new ru("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:cNt,construct:uNt}),fNt=Object.prototype.hasOwnProperty;function pNt(t){if(t===null)return!0;var e,n=t;for(e in n)if(fNt.call(n,e)&&n[e]!==null)return!1;return!0}s(pNt,"resolveYamlSet");function mNt(t){return t!==null?t:{}}s(mNt,"constructYamlSet");var hNt=new ru("tag:yaml.org,2002:set",{kind:"mapping",resolve:pNt,construct:mNt}),EWe=j7t.extend({implicit:[Y7t,J7t],explicit:[nNt,aNt,dNt,hNt]}),Rb=Object.prototype.hasOwnProperty,xV=1,IWe=2,TWe=3,vV=4,V0e=1,gNt=2,oWe=3,ANt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,yNt=/[\x85\u2028\u2029]/,CNt=/[,\[\]\{\}]/,wWe=/^(?:!|!!|![a-z\-]+!)$/i,_We=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function sWe(t){return Object.prototype.toString.call(t)}s(sWe,"_class");function CA(t){return t===10||t===13}s(CA,"is_EOL");function AT(t){return t===9||t===32}s(AT,"is_WHITE_SPACE");function Qd(t){return t===9||t===32||t===10||t===13}s(Qd,"is_WS_OR_EOL");function wR(t){return t===44||t===91||t===93||t===123||t===125}s(wR,"is_FLOW_INDICATOR");function xNt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(xNt,"fromHexCode");function vNt(t){return t===120?2:t===117?4:t===85?8:0}s(vNt,"escapedHexLen");function bNt(t){return 48<=t&&t<=57?t-48:-1}s(bNt,"fromDecimalCode");function aWe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(aWe,"simpleEscapeSequence");function ENt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(ENt,"charFromCodepoint");var SWe=new Array(256),RWe=new Array(256);for(gT=0;gT<256;gT++)SWe[gT]=aWe(gT)?1:0,RWe[gT]=aWe(gT);var gT;function INt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||EWe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(INt,"State$1");function kWe(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=d7t(n),new Md(e,n)}s(kWe,"generateError");function zn(t,e){throw kWe(t,e)}s(zn,"throwError");function bV(t,e){t.onWarning&&t.onWarning.call(null,kWe(t,e))}s(bV,"throwWarning");var lWe={YAML:s(function(e,n,r){var i,o,a;e.version!==null&&zn(e,"duplication of %YAML directive"),r.length!==1&&zn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&zn(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&zn(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&bV(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,n,r){var i,o;r.length!==2&&zn(e,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],wWe.test(i)||zn(e,"ill-formed tag handle (first argument) of the TAG directive"),Rb.call(e.tagMap,i)&&zn(e,'there is a previously declared suffix for "'+i+'" tag handle'),_We.test(o)||zn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{zn(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Sb(t,e,n,r){var i,o,a,l;if(e<n){if(l=t.input.slice(e,n),r)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||zn(t,"expected valid JSON character");else ANt.test(l)&&zn(t,"the stream contains non-printable characters");t.result+=l}}s(Sb,"captureSegment");function cWe(t,e,n,r){var i,o,a,l;for(Al.isObject(n)||zn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,l=i.length;a<l;a+=1)o=i[a],Rb.call(e,o)||(e[o]=n[o],r[o]=!0)}s(cWe,"mergeMappings");function _R(t,e,n,r,i,o,a,l,c){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&zn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&sWe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&sWe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)cWe(t,e,o[u],n);else cWe(t,e,o,n);else!t.json&&!Rb.call(n,i)&&Rb.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,zn(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}s(_R,"storeMappingPair");function Z0e(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):zn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(Z0e,"readLineBreak");function rl(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;AT(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(CA(i))for(Z0e(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&bV(t,"deficient indentation"),r}s(rl,"skipSeparationSpace");function TV(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Qd(n)))}s(TV,"testDocumentSeparator");function efe(t,e){e===1?t.result+=" ":e>1&&(t.result+=Al.repeat(`
`,e-1))}s(efe,"writeFoldedLines");function TNt(t,e,n){var r,i,o,a,l,c,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),Qd(h)||wR(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Qd(i)||n&&wR(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Qd(i)||n&&wR(i))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Qd(r))break}else{if(t.position===t.lineStart&&TV(t)||n&&wR(h))break;if(CA(h))if(c=t.line,u=t.lineStart,d=t.lineIndent,rl(t,!1,-1),t.lineIndent>=e){l=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=u,t.lineIndent=d;break}}l&&(Sb(t,o,a,!1),efe(t,t.line-c),o=a=t.position,l=!1),AT(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Sb(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(TNt,"readPlainScalar");function wNt(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Sb(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else CA(n)?(Sb(t,r,i,!0),efe(t,rl(t,!1,e)),r=i=t.position):t.position===t.lineStart&&TV(t)?zn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);zn(t,"unexpected end of the stream within a single quoted scalar")}s(wNt,"readSingleQuotedScalar");function _Nt(t,e){var n,r,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Sb(t,n,t.position,!0),t.position++,!0;if(l===92){if(Sb(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),CA(l))rl(t,!1,e);else if(l<256&&SWe[l])t.result+=RWe[l],t.position++;else if((a=vNt(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=xNt(l))>=0?o=(o<<4)+a:zn(t,"expected hexadecimal character");t.result+=ENt(o),t.position++}else zn(t,"unknown escape sequence");n=r=t.position}else CA(l)?(Sb(t,n,r,!0),efe(t,rl(t,!1,e)),n=r=t.position):t.position===t.lineStart&&TV(t)?zn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}zn(t,"unexpected end of the stream within a double quoted scalar")}s(_Nt,"readDoubleQuotedScalar");function SNt(t,e){var n=!0,r,i,o,a=t.tag,l,c=t.anchor,u,d,p,m,h,g=Object.create(null),y,v,b,E;if(E=t.input.charCodeAt(t.position),E===91)d=93,h=!1,l=[];else if(E===123)d=125,h=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),E=t.input.charCodeAt(++t.position);E!==0;){if(rl(t,!0,e),E=t.input.charCodeAt(t.position),E===d)return t.position++,t.tag=a,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=l,!0;n?E===44&&zn(t,"expected the node content, but found ','"):zn(t,"missed comma between flow collection entries"),v=y=b=null,p=m=!1,E===63&&(u=t.input.charCodeAt(t.position+1),Qd(u)&&(p=m=!0,t.position++,rl(t,!0,e))),r=t.line,i=t.lineStart,o=t.position,SR(t,e,xV,!1,!0),v=t.tag,y=t.result,rl(t,!0,e),E=t.input.charCodeAt(t.position),(m||t.line===r)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),rl(t,!0,e),SR(t,e,xV,!1,!0),b=t.result),h?_R(t,l,g,v,y,b,r,i,o):p?l.push(_R(t,null,g,v,y,b,r,i,o)):l.push(y),rl(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(n=!0,E=t.input.charCodeAt(++t.position)):n=!1}zn(t,"unexpected end of the stream within a flow collection")}s(SNt,"readFlowCollection");function RNt(t,e){var n,r,i=V0e,o=!1,a=!1,l=e,c=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)V0e===i?i=p===43?oWe:gNt:zn(t,"repeat of a chomping mode identifier");else if((d=bNt(p))>=0)d===0?zn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?zn(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(AT(p)){do p=t.input.charCodeAt(++t.position);while(AT(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!CA(p)&&p!==0)}for(;p!==0;){for(Z0e(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),CA(p)){c++;continue}if(t.lineIndent<l){i===oWe?t.result+=Al.repeat(`
`,o?1+c:c):i===V0e&&o&&(t.result+=`
`);break}for(r?AT(p)?(u=!0,t.result+=Al.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=Al.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=Al.repeat(`
`,c):t.result+=Al.repeat(`
`,o?1+c:c),o=!0,a=!0,c=0,n=t.position;!CA(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Sb(t,n,t.position,!1)}return!0}s(RNt,"readBlockScalar");function uWe(t,e){var n,r=t.tag,i=t.anchor,o=[],a,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,zn(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!Qd(a))));){if(l=!0,t.position++,rl(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,SR(t,e,TWe,!1,!0),o.push(t.result),rl(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)zn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(uWe,"readBlockSequence");function kNt(t,e,n){var r,i,o,a,l,c,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,v=!1,b=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,zn(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,(E===63||E===58)&&Qd(r))E===63?(v&&(_R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):zn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=r;else{if(a=t.line,l=t.lineStart,c=t.position,!SR(t,n,IWe,!1,!0))break;if(t.line===o){for(E=t.input.charCodeAt(t.position);AT(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Qd(E)||zn(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(_R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!1,i=!1,h=t.tag,g=t.result;else if(b)zn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(b)zn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(v&&(a=t.line,l=t.lineStart,c=t.position),SR(t,e,vV,!0,i)&&(v?g=t.result:y=t.result),v||(_R(t,p,m,h,g,y,a,l,c),h=g=y=null),rl(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&E!==0)zn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&_R(t,p,m,h,g,null,a,l,c),b&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),b}s(kNt,"readBlockMapping");function BNt(t){var e,n=!1,r=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&zn(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):zn(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Qd(a);)a===33&&(r?zn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),wWe.test(i)||zn(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),CNt.test(o)&&zn(t,"tag suffix cannot contain flow indicator characters")}o&&!_We.test(o)&&zn(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{zn(t,"tag name is malformed: "+o)}return n?t.tag=o:Rb.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:zn(t,'undeclared tag handle "'+i+'"'),!0}s(BNt,"readTagProperty");function DNt(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&zn(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Qd(n)&&!wR(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&zn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(DNt,"readAnchorProperty");function PNt(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Qd(r)&&!wR(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&zn(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Rb.call(t.anchorMap,n)||zn(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],rl(t,!0,-1),!0}s(PNt,"readAlias");function SR(t,e,n,r,i){var o,a,l,c=1,u=!1,d=!1,p,m,h,g,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=vV===n||TWe===n,r&&rl(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;BNt(t)||DNt(t);)rl(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=u||i),(c===1||vV===n)&&(xV===n||IWe===n?y=e:y=e+1,v=t.position-t.lineStart,c===1?l&&(uWe(t,v)||kNt(t,v,y))||SNt(t,y)?d=!0:(a&&RNt(t,y)||wNt(t,y)||_Nt(t,y)?d=!0:PNt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&zn(t,"alias node should not have any properties")):TNt(t,y,xV===n)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(d=l&&uWe(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&zn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Rb.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||zn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&zn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):zn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(SR,"composeNode");function NNt(t){var e=t.position,n,r,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(rl(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!Qd(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&zn(t,"directive name must not be less than one character in length");a!==0;){for(;AT(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!CA(a));break}if(CA(a))break;for(n=t.position;a!==0&&!Qd(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}a!==0&&Z0e(t),Rb.call(lWe,r)?lWe[r](t,r,i):bV(t,'unknown document directive "'+r+'"')}if(rl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,rl(t,!0,-1)):o&&zn(t,"directives end mark is expected"),SR(t,t.lineIndent-1,vV,!1,!0),rl(t,!0,-1),t.checkLineBreaks&&yNt.test(t.input.slice(e,t.position))&&bV(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&TV(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,rl(t,!0,-1));return}if(t.position<t.length-1)zn(t,"end of the stream or a document separator is expected");else return}s(NNt,"readDocument");function BWe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new INt(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,zn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)NNt(n);return n.documents}s(BWe,"loadDocuments");function LNt(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=BWe(t,n);if(typeof e!="function")return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}s(LNt,"loadAll$1");function FNt(t,e){var n=BWe(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Md("expected a single document in the stream, but found more")}}s(FNt,"load$1");var MNt=LNt,QNt=FNt,DWe={loadAll:MNt,load:QNt},PWe=Object.prototype.toString,NWe=Object.prototype.hasOwnProperty,tfe=65279,ONt=9,O9=10,UNt=13,qNt=32,WNt=33,GNt=34,z0e=35,HNt=37,jNt=38,VNt=39,$Nt=42,LWe=44,zNt=45,EV=58,YNt=61,KNt=62,JNt=63,XNt=64,FWe=91,MWe=93,ZNt=96,QWe=123,eLt=124,OWe=125,iu={};iu[0]="\\0";iu[7]="\\a";iu[8]="\\b";iu[9]="\\t";iu[10]="\\n";iu[11]="\\v";iu[12]="\\f";iu[13]="\\r";iu[27]="\\e";iu[34]='\\"';iu[92]="\\\\";iu[133]="\\N";iu[160]="\\_";iu[8232]="\\L";iu[8233]="\\P";var tLt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],nLt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function rLt(t,e){var n,r,i,o,a,l,c;if(e===null)return{};for(n={},r=Object.keys(e),i=0,o=r.length;i<o;i+=1)a=r[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),c=t.compiledTypeMap.fallback[a],c&&NWe.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[a]=l;return n}s(rLt,"compileStyleMap");function iLt(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Md("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Al.repeat("0",r-e.length)+e}s(iLt,"encodeHex");var oLt=1,U9=2;function sLt(t){this.schema=t.schema||EWe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Al.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=rLt(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?U9:oLt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(sLt,"State");function dWe(t,e){for(var n=Al.repeat(" ",e),r=0,i=-1,o="",a,l=t.length;r<l;)i=t.indexOf(`
`,r),i===-1?(a=t.slice(r),r=l):(a=t.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}s(dWe,"indentString");function Y0e(t,e){return`
`+Al.repeat(" ",t.indent*e)}s(Y0e,"generateNextLine");function aLt(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}s(aLt,"testImplicitResolving");function IV(t){return t===qNt||t===ONt}s(IV,"isWhitespace");function q9(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==tfe||65536<=t&&t<=1114111}s(q9,"isPrintable");function fWe(t){return q9(t)&&t!==tfe&&t!==UNt&&t!==O9}s(fWe,"isNsCharOrWhitespace");function pWe(t,e,n){var r=fWe(t),i=r&&!IV(t);return(n?r:r&&t!==LWe&&t!==FWe&&t!==MWe&&t!==QWe&&t!==OWe)&&t!==z0e&&!(e===EV&&!i)||fWe(e)&&!IV(e)&&t===z0e||e===EV&&i}s(pWe,"isPlainSafe");function lLt(t){return q9(t)&&t!==tfe&&!IV(t)&&t!==zNt&&t!==JNt&&t!==EV&&t!==LWe&&t!==FWe&&t!==MWe&&t!==QWe&&t!==OWe&&t!==z0e&&t!==jNt&&t!==$Nt&&t!==WNt&&t!==eLt&&t!==YNt&&t!==KNt&&t!==VNt&&t!==GNt&&t!==HNt&&t!==XNt&&t!==ZNt}s(lLt,"isPlainSafeFirst");function cLt(t){return!IV(t)&&t!==EV}s(cLt,"isPlainSafeLast");function M9(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}s(M9,"codePointAt");function UWe(t){var e=/^\n* /;return e.test(t)}s(UWe,"needIndentIndicator");var qWe=1,K0e=2,WWe=3,GWe=4,TR=5;function uLt(t,e,n,r,i,o,a,l){var c,u=0,d=null,p=!1,m=!1,h=r!==-1,g=-1,y=lLt(M9(t,0))&&cLt(M9(t,t.length-1));if(e||a)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=M9(t,c),!q9(u))return TR;y=y&&pWe(u,d,l),d=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=M9(t,c),u===O9)p=!0,h&&(m=m||c-g-1>r&&t[g+1]!==" ",g=c);else if(!q9(u))return TR;y=y&&pWe(u,d,l),d=u}m=m||h&&c-g-1>r&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?qWe:o===U9?TR:K0e:n>9&&UWe(t)?TR:a?o===U9?TR:K0e:m?GWe:WWe}s(uLt,"chooseScalarStyle");function dLt(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===U9?'""':"''";if(!t.noCompatMode&&(tLt.indexOf(e)!==-1||nLt.test(e)))return t.quotingType===U9?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=r||t.flowLevel>-1&&n>=t.flowLevel;function c(u){return aLt(t,u)}switch(s(c,"testAmbiguity"),uLt(e,l,t.indent,a,c,t.quotingType,t.forceQuotes&&!r,i)){case qWe:return e;case K0e:return"'"+e.replace(/'/g,"''")+"'";case WWe:return"|"+mWe(e,t.indent)+hWe(dWe(e,o));case GWe:return">"+mWe(e,t.indent)+hWe(dWe(fLt(e,a),o));case TR:return'"'+pLt(e)+'"';default:throw new Md("impossible error: invalid scalar style")}}()}s(dLt,"writeScalar");function mWe(t,e){var n=UWe(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),o=i?"+":r?"":"-";return n+o+`
`}s(mWe,"blockHeader");function hWe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(hWe,"dropEndingNewline");function fLt(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,n.lastIndex=u,gWe(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=n.exec(t);){var l=a[1],c=a[2];o=c[0]===" ",r+=l+(!i&&!o&&c!==""?`
`:"")+gWe(c,e),i=o}return r}s(fLt,"foldString");function gWe(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,o,a=0,l=0,c="";r=n.exec(t);)l=r.index,l-i>e&&(o=a>i?a:l,c+=`
`+t.slice(i,o),i=o+1),a=l;return c+=`
`,t.length-i>e&&a>i?c+=t.slice(i,a)+`
`+t.slice(a+1):c+=t.slice(i),c.slice(1)}s(gWe,"foldLine");function pLt(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=M9(t,i),r=iu[n],!r&&q9(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||iLt(n);return e}s(pLt,"escapeString");function mLt(t,e,n){var r="",i=t.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],t.replacer&&(l=t.replacer.call(n,String(o),l)),(Ry(t,e,l,!1,!1)||typeof l>"u"&&Ry(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}s(mLt,"writeFlowSequence");function AWe(t,e,n,r){var i="",o=t.tag,a,l,c;for(a=0,l=n.length;a<l;a+=1)c=n[a],t.replacer&&(c=t.replacer.call(n,String(a),c)),(Ry(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Ry(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Y0e(t,e)),t.dump&&O9===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(AWe,"writeBlockSequence");function hLt(t,e,n){var r="",i=t.tag,o=Object.keys(n),a,l,c,u,d;for(a=0,l=o.length;a<l;a+=1)d="",r!==""&&(d+=", "),t.condenseFlow&&(d+='"'),c=o[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Ry(t,e,c,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ry(t,e,u,!1,!1)&&(d+=t.dump,r+=d));t.tag=i,t.dump="{"+r+"}"}s(hLt,"writeFlowMapping");function gLt(t,e,n,r){var i="",o=t.tag,a=Object.keys(n),l,c,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Md("sortKeys must be a boolean or a function");for(l=0,c=a.length;l<c;l+=1)m="",(!r||i!=="")&&(m+=Y0e(t,e)),u=a[l],d=n[u],t.replacer&&(d=t.replacer.call(n,u,d)),Ry(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&O9===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=Y0e(t,e)),Ry(t,e+1,d,!0,p)&&(t.dump&&O9===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(gLt,"writeBlockMapping");function yWe(t,e,n){var r,i,o,a,l,c;for(i=n?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,PWe.call(l.represent)==="[object Function]")r=l.represent(e,c);else if(NWe.call(l.represent,c))r=l.represent[c](e,c);else throw new Md("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}s(yWe,"detectType");function Ry(t,e,n,r,i,o,a){t.tag=null,t.dump=n,yWe(t,n,!1)||yWe(t,n,!0);var l=PWe.call(t.dump),c=r,u;r&&(r=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(n),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),l==="[object Object]")r&&Object.keys(t.dump).length!==0?(gLt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(hLt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?AWe(t,e-1,t.dump,i):AWe(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(mLt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&dLt(t,t.dump,e,o,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Md("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(Ry,"writeNode");function ALt(t,e){var n=[],r=[],i,o;for(J0e(t,n,r),i=0,o=r.length;i<o;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(o)}s(ALt,"getDuplicateReferences");function J0e(t,e,n){var r,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)J0e(t[i],e,n);else for(r=Object.keys(t),i=0,o=r.length;i<o;i+=1)J0e(t[r[i]],e,n)}s(J0e,"inspectNode");function yLt(t,e){e=e||{};var n=new sLt(e);n.noRefs||ALt(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Ry(n,0,r,!0,!0)?n.dump+`
`:""}s(yLt,"dump$1");var CLt=yLt,xLt={dump:CLt};function nfe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(nfe,"renamed");var F3r=DWe.load,M3r=DWe.loadAll,rfe=xLt.dump;var Q3r=nfe("safeLoad","load"),O3r=nfe("safeLoadAll","loadAll"),U3r=nfe("safeDump","dump");var yT=Ve(V0());var ife=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Yl=class{constructor(){this.dump=new Jn(25);this.promptsDump=new Jn(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,n,r){let i=this.getDump(e);i.resolvedSkills[n]=r}getResolvedSkill(e,n){return this.getDump(e).resolvedSkills[n]}addResolution(e,n){this.getDump(e).resolutions.push(n)}getDump(e){let n=this.dump.get(e);return n||(n=new ife,this.dump.set(e,n)),n}addPrompt(e,n,r){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(r,n)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function HWe(t){let e=t.copy();return e.turns=e.turns.filter(n=>n.status!=="in-progress"&&(n.response===void 0||n.response?.type==="model")),e}s(HWe,"filterConversationTurns");function W0e(t){return HWe(t).getLastTurn()?.id}s(W0e,"getLastTurnId");async function Xqe(t){let e=HWe(t.conversation),n=W0e(t.conversation);if(!n)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Yl).getDump(n),o=ELt(i,e.turns);Wn.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await ILt(i,t.ctx);return yT.default`
        ${bLt(t.conversation,n)}
        ${vLt(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(Xqe,"getConversationDump");function vLt(t){let e=t.get(ur);return yT.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(vLt,"getEditorInfoDumpMessage");function bLt(t,e){return yT.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(bLt,"getInfoDumpMessage");async function Zqe(t,e,n){let r=t.ctx.get(gl),i="# Available skills",o=r.getDescriptors().filter(a=>t.ctx.get(Gi).getSupportedSkills(t.conversation.id).includes(a.id));if(n&&(o=o.filter(a=>a.id===n)),o.length===0)return`No skill with id ${n} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&Vn(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${Vn(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=yT.default`
            \n\n
            **Description**
            
            ${a.description()}`;let l=r.getSkill(a.id),c=await l?.resolver(t).resolveSkill(t);if(c){i+=yT.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${rfe(c)}
                \`\`\``;let u=await l?.processor(t).processSkill(c,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=yT.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(Zqe,"getSkillsDump");function ELt(t,e){let n={state:{skills:t.resolvedSkills},turns:e.map((r,i)=>{let o={request:Vn(r.request.message)};return r.response&&(o.response=Vn(r.response.message)),o})};return rfe(n)}s(ELt,"toSimulationFormat");async function ILt(t,e){let n=t.resolutions.map(o=>o.files).flat(),r=n.filter((o,a)=>o&&n.indexOf(o)===a),i;for(let o of r)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(Cr).getOrReadTextDocument(o),l;a.status==="valid"&&(l=a.document);let c=l?.getText();Wn.debug(e,`conversation.dump.file
`,c),i+=`
**${o.uri}**

\`\`\`${l?.detectedLanguageId}
${c}
\`\`\``}return i}s(ILt,"fileDump");f();function ofe(t,e){let n=Bo(e.tokenizer),r=0;for(let i of t)r+=e.baseTokensPerMessage,i.role&&(r+=n.tokenize(i.role).length),i.name&&(r+=n.tokenize(i.name).length+e.baseTokensPerName),i.content&&(r+=n.tokenize(Vn(i.content)).length);return r+=e.baseTokensPerCompletion,r}s(ofe,"countMessagesTokens");f();function jWe(t,e,n,r,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",c=r?`The user is using ${r} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=n?`The user is logged in as ${n} on GitHub.`:"";return[o,c,u,d,l,a].filter(p=>p&&p!="").join(`
`)}s(jWe,"chatBasePrompt");f();f();f();f();f();function VWe(t){let e=t.split(`
`),n=[],r=!1,i=[];for(let o of e)o.startsWith("```")?(r?(n.push([bu(i.join(`
`)),1]),i=[],n.push([new Bt([o]),1])):n.push([new Bt([o]),1]),r=!r):r?i.push(o):n.push([new Bt([o]),.8]);return r&&(n.push([bu(i.join(`
`)),1]),n.push([new Bt(["```"]),1])),new Bt(n)}s(VWe,"fromMessage");function RR(t){let e=sfe(t),n=[];for(let r=0;r<e.length;r++){let i=e[r],o=$We(i.request,r+1),a=i.response&&i.response?.type!=="meta"?$We(i.response):"",l=o;a!==""&&(l+=`
`+a+(e.length>1&&r!==e.length-1?`
`:"")),n.push(VWe(l))}return n.length>0?new Bt([[new Bt(["Consider the following conversation history:"]),1],[wb(n,"inverseLinear"),1]]):null}s(RR,"fromHistory");var TLt=5;function sfe(t,e){return t.filter(r=>(r.status==="success"||r.status==="in-progress")&&Vn(r.request.message)!=""&&r.agent?.agentSlug===e).reverse().slice(0,TLt).reverse()}s(sfe,"filterTurns");function $We(t,e=0){let n;switch(t.type){case"user":case"template":n="User";break;case"model":n="GitHub Copilot";break;default:n=t.type}let r=Vn(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${n}:${r}${Vn(t.message)}`}s($We,"formatTurnMessage");f();f();f();var wLt=4,afe={skillIds:[]},wV=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,n,r,i,o){let a=e.conversation.getLastTurn().request.message;if(n.length>0){let l=await Co.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),c={promptType:"meta",supportedSkillDescriptors:n,modelConfiguration:l},u=await this.ctx.get(bc).toPrompt(e,c),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:l,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,r,d);return m.type!=="success"&&(On.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,r,d)),await e.ctx.get(nl).inspectFetchResult(m),this.handleResult(m,d,Vn(a),o,u.toolConfig)}else return afe}handleResult(e,n,r,i,o){if(e.type!=="success")return this.telemetryError(n,e),afe;let l;if(e.toolCalls&&e.toolCalls.length>0)l=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,wLt);else return On.error(this.ctx,"Missing tool call in meta prompt response"),afe;let c=n.extendedBy({uiKind:i,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=c.extendedBy({messageText:r});return kt(this.ctx,`${wu(i)}.metaPrompt`,c,0),kt(this.ctx,`${wu(i)}.promptContext`,u,1),{skillIds:l??[]}}telemetryError(e,n){let r=e.extendedBy({resultType:n.type,reason:n.reason??""});kt(this.ctx,"conversation.promptContextError",r,1)}};f();f();f();var _V=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let n=[];return ce(e,n,"org.springframework.boot","Spring Boot"),ce(e,n,"jakarta.jakartaee-api","Jakarta EE"),ce(e,n,"javax:javaee-api","Java EE"),ce(e,n,"org.apache.struts:struts2-core","Apache Struts"),ce(e,n,"org.hibernate:hibernate-core","Hibernate"),ce(e,n,"org.apache.wicket:wicket-core","Apache Wicket"),ce(e,n,"javax.faces:jsf-api","JSF"),ce(e,n,"org.grails:grails-core","Grails"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"com.google.guava","Google Guava"),ce(e,n,"org.apache.commons:commons-lang3","Apache Commons Lang"),ce(e,n,"org.apache.commons:commons-io","Apache Commons IO"),ce(e,n,"joda-time:joda-time","Joda-Time"),ce(e,n,"com.google.code.gson:gson","Google Gson"),ce(e,n,"org.apache.commons:commons-math3","Apache Commons Math"),ce(e,n,"org.apache.commons:commons-collections4","Apache Commons Collections"),ce(e,n,"org.apache.commons:commons-net","Apache Commons Net"),ce(e,n,"org.apache.poi:poi","Apache POI"),ce(e,n,"com.fasterxml.jackson.core:jackson-databind","Jackson"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"org.junit.jupiter:junit-jupiter","JUnit"),ce(e,n,"junit:junit","JUnit"),ce(e,n,"org.testng:testng","TestNG"),ce(e,n,"org.spockframework:spock-core","Spock"),ce(e,n,"io.cucumber:cucumber-java","Cucumber"),ce(e,n,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"org.mockito","Mockito"),ce(e,n,"org.assertj","AssertJ"),ce(e,n,"org.hamcrest","Hamcrest"),ce(e,n,"org.powermock","PowerMock"),ce(e,n,"org.jmock","JMock"),ce(e,n,"org.easymock","EasyMock"),ce(e,n,"org.jmockit:jmockit","JMockit"),ce(e,n,"com.github.tomakehurst:wiremock","WireMock"),ce(e,n,"org.dbunit:dbunit","DBUnit"),ce(e,n,"com.icegreen:greenmail","GreenMail"),ce(e,n,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),ce(e,n,"org.seleniumhq.selenium:selenium-java","Selenium"),ce(e,n,"io.rest-assured:rest-assured","Rest-Assured"),ce(e,n,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),ce(e,n,"org.apache.jmeter:ApacheJMeter","JMeter"),n}},SV=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"@types/node","Node.js"),ce(e,n,"react-native","React Native"),n.find(r=>r.name==="React Native")||ce(e,n,"react","React"),ce(e,n,"angular","Angular"),ce(e,n,"vue","Vue.js"),ce(e,n,"ember","Ember.js"),ce(e,n,"backbone","Backbone.js"),ce(e,n,"meteor","Meteor"),ce(e,n,"polymer","Polymer"),ce(e,n,"aurelia","Aurelia"),ce(e,n,"knockout","Knockout.js"),ce(e,n,"dojo","Dojo Toolkit"),ce(e,n,"mithril","Mithril.js"),ce(e,n,"marionette","Marionette.js"),ce(e,n,"marko","Marko.js"),ce(e,n,"svelte","Svelte"),ce(e,n,"hyperapp","Hyperapp"),ce(e,n,"inferno","Inferno.js"),ce(e,n,"preact","Preact"),ce(e,n,"riot","Riot.js"),ce(e,n,"moon","Moon.js"),ce(e,n,"stencil","Stencil.js"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"lodash","Lodash"),ce(e,n,"moment","Moment.js"),ce(e,n,"axios","Axios"),ce(e,n,"redux","Redux"),ce(e,n,"recoil","Recoil"),ce(e,n,"jquery","jQuery"),ce(e,n,"d3","D3.js"),ce(e,n,"underscore","Underscore.js"),ce(e,n,"ramda","Ramda"),ce(e,n,"immutable","Immutable.js"),ce(e,n,"rxjs","RxJS"),ce(e,n,"three","Three.js"),ce(e,n,"socket.io","Socket.IO"),ce(e,n,"express","Express.js"),ce(e,n,"next","Next.js"),ce(e,n,"puppeteer","Puppeteer"),ce(e,n,"cheerio","Cheerio"),ce(e,n,"nodemailer","Nodemailer"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"jest","Jest"),ce(e,n,"mocha","Mocha"),ce(e,n,"jasmine","Jasmine"),ce(e,n,"ava","AVA"),ce(e,n,"qunit","QUnit"),ce(e,n,"tape","Tape"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"chai","Chai"),ce(e,n,"sinon","Sinon"),ce(e,n,"enzyme","Enzyme"),ce(e,n,"protractor","Protractor"),ce(e,n,"supertest","Supertest"),ce(e,n,"nock","Nock"),ce(e,n,"cypress","Cypress"),ce(e,n,"@testing-library/react","React Testing Library"),n}},RV=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"github.com/gorilla/mux","Gorilla Mux"),ce(e,n,"github.com/go-chi/chi","Chi"),ce(e,n,"github.com/gin-gonic/gin","Gin"),ce(e,n,"github.com/labstack/echo","Echo"),ce(e,n,"github.com/revel/revel","Revel"),ce(e,n,"github.com/astaxie/beego","Beego"),ce(e,n,"github.com/go-martini/martini","Martini"),ce(e,n,"github.com/gobuffalo/buffalo","Buffalo"),ce(e,n,"github.com/goji/goji","Goji"),ce(e,n,"github.com/hoisie/web","Web.go"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"net/http","net/http"),ce(e,n,"fmt","fmt"),ce(e,n,"io","io"),ce(e,n,"time","time"),ce(e,n,"math","math"),ce(e,n,"strconv","strconv"),ce(e,n,"strings","strings"),ce(e,n,"sort","sort"),ce(e,n,"encoding/json","encoding/json"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"github.com/onsi/ginkgo","ginkgo"),ce(e,n,"github.com/onsi/gomega","gomega"),ce(e,n,"github.com/stretchr/testify","testify"),ce(e,n,"gopkg.in/check.v1","gocheck"),ce(e,n,"github.com/franela/goblin","goblin"),ce(e,n,"github.com/DATA-DOG/godog","godog"),ce(e,n,"github.com/stesla/gospec","gospec"),ce(e,n,"github.com/rjeczalik/gotest","gotest"),ce(e,n,"github.com/smartystreets/goconvey","goconvey"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"github.com/stretchr/testify","Testify"),ce(e,n,"github.com/smartystreets/goconvey","GoConvey"),ce(e,n,"github.com/onsi/ginkgo","Ginkgo"),ce(e,n,"github.com/golang/mock","GoMock"),ce(e,n,"gopkg.in/check.v1","GoCheck"),ce(e,n,"github.com/franela/goblin","Goblin"),ce(e,n,"github.com/DATA-DOG/godog","GoDog"),ce(e,n,"github.com/onsi/gomega","Gomega"),ce(e,n,"github.com/stesla/gospec","GoSpec"),ce(e,n,"github.com/rjeczalik/gotest","GoTest"),n}},kV=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"flask","Flask"),ce(e,n,"django","Django"),ce(e,n,"pyramid","Pyramid"),ce(e,n,"tornado","Tornado"),ce(e,n,"fastapi","FastAPI"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"requests","requests"),ce(e,n,"numpy","numpy"),ce(e,n,"pandas","pandas"),ce(e,n,"scipy","scipy"),ce(e,n,"matplotlib","matplotlib"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"pytest","Pytest"),ce(e,n,"unittest","Unittest"),ce(e,n,"doctest","Doctest"),ce(e,n,"nose","Nose"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"mock","Mock"),ce(e,n,"hypothesis","Hypothesis"),ce(e,n,"behave","Behave"),ce(e,n,"lettuce","Lettuce"),ce(e,n,"testify","Testify"),ce(e,n,"pyhamcrest","PyHamcrest"),n}},BV=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"laravel/framework","Laravel"),ce(e,n,"symfony/symfony","Symfony"),ce(e,n,"slim/slim","Slim"),ce(e,n,"cakephp/cakephp","CakePHP"),ce(e,n,"yiisoft/yii2","Yii"),ce(e,n,"zendframework/zendframework","Zend Framework"),ce(e,n,"phalcon/cphalcon","Phalcon"),ce(e,n,"bcosca/fatfree","Fat-Free"),ce(e,n,"fuel/fuel","FuelPHP"),ce(e,n,"phpixie/framework","PHPixie"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"monolog/monolog","Monolog"),ce(e,n,"vlucas/phpdotenv","PHP dotenv"),ce(e,n,"symfony/console","Symfony Console"),ce(e,n,"guzzlehttp/guzzle","GuzzleHttp"),ce(e,n,"ramsey/uuid","Ramsey UUID"),ce(e,n,"doctrine/orm","Doctrine ORM"),ce(e,n,"php-di/php-di","PHP-DI"),ce(e,n,"phpunit/php-timer","PHPUnit Timer"),ce(e,n,"symfony/finder","Symfony Finder"),ce(e,n,"symfony/yaml","Symfony Yaml"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"phpunit/phpunit","PHPUnit"),ce(e,n,"behat/behat","Behat"),ce(e,n,"phpspec/phpspec","PHPSpec"),ce(e,n,"codeception/codeception","Codeception"),ce(e,n,"atoum/atoum","Atoum"),ce(e,n,"pestphp/pest","PestPHP"),ce(e,n,"kahlan/kahlan","Kahlan"),ce(e,n,"peridot-php/peridot","Peridot"),ce(e,n,"phake/phake","Phake"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"mockery/mockery","Mockery"),ce(e,n,"php-mock/php-mock","PHP-Mock"),ce(e,n,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),ce(e,n,"padraic/mockery","Padraic Mockery"),ce(e,n,"phpspec/prophecy","PHPSpec Prophecy"),ce(e,n,"phpunit/php-invoker","PHPUnit Invoker"),ce(e,n,"phpunit/php-token-stream","PHPUnit Token Stream"),ce(e,n,"phpunit/php-code-coverage","PHPUnit Code Coverage"),ce(e,n,"phpunit/php-timer","PHPUnit Timer"),ce(e,n,"phpunit/php-text-template","PHPUnit Text Template"),n}},DV=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"Microsoft.NETCore.App",".NET Core"),ce(e,n,"Microsoft.AspNetCore.App","ASP.NET Core"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"EntityFramework","Entity Framework"),ce(e,n,"Newtonsoft.Json","Newtonsoft.Json"),ce(e,n,"AutoMapper","AutoMapper"),ce(e,n,"Serilog","Serilog"),ce(e,n,"Dapper","Dapper"),ce(e,n,"Polly","Polly"),ce(e,n,"FluentValidation","FluentValidation"),ce(e,n,"MediatR","MediatR"),ce(e,n,"Hangfire","Hangfire"),ce(e,n,"RabbitMQ.Client","RabbitMQ.Client"),ce(e,n,"MassTransit","MassTransit"),ce(e,n,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),ce(e,n,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),ce(e,n,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),ce(e,n,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"xunit","xUnit"),ce(e,n,"NUnit","NUnit"),ce(e,n,"SpecFlow","SpecFlow"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"Moq","Moq"),ce(e,n,"FluentAssertions","FluentAssertions"),ce(e,n,"Bogus","Bogus"),ce(e,n,"RestSharp","RestSharp"),ce(e,n,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),n}},PV=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"flutter","Flutter"),ce(e,n,"angular","AngularDart"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"dartx","dartx"),ce(e,n,"provider","Provider"),ce(e,n,"rxdart","RxDart"),ce(e,n,"dio","Dio"),ce(e,n,"json_serializable","json_serializable"),ce(e,n,"freezed","Freezed"),ce(e,n,"moor","Moor"),ce(e,n,"hive","Hive"),ce(e,n,"http","http"),ce(e,n,"path","path"),ce(e,n,"intl","intl"),ce(e,n,"equatable","equatable"),ce(e,n,"get_it","get_it"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"test","test"),ce(e,n,"flutter_test","flutter_test"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"mockito","mockito"),ce(e,n,"bloc_test","bloc_test"),n}},NV=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"rails","Rails"),ce(e,n,"sinatra","Sinatra"),ce(e,n,"hanami","Hanami"),ce(e,n,"grape","Grape"),ce(e,n,"roda","Roda"),ce(e,n,"padrino","Padrino"),ce(e,n,"cuba","Cuba"),ce(e,n,"ramaze","Ramaze"),ce(e,n,"nyara","Nyara"),ce(e,n,"rack","Rack"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"active_record","ActiveRecord"),ce(e,n,"sequel","Sequel"),ce(e,n,"rom","ROM"),ce(e,n,"datamapper","DataMapper"),ce(e,n,"mongoid","Mongoid"),ce(e,n,"neo4j","Neo4j"),ce(e,n,"redis","Redis"),ce(e,n,"cassandra","Cassandra"),ce(e,n,"couchrest","CouchRest"),ce(e,n,"riak","Riak"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"rspec","RSpec"),ce(e,n,"minitest","Minitest"),ce(e,n,"cucumber","Cucumber"),ce(e,n,"spinach","Spinach"),ce(e,n,"turnip","Turnip"),ce(e,n,"bacon","Bacon"),ce(e,n,"shoulda","Shoulda"),ce(e,n,"test-unit","Test::Unit"),ce(e,n,"wrong","Wrong"),ce(e,n,"contest","Contest"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"factory_bot","FactoryBot"),ce(e,n,"faker","Faker"),ce(e,n,"ffaker","FFaker"),ce(e,n,"fabrication","Fabrication"),ce(e,n,"machinist","Machinist"),ce(e,n,"mocha","Mocha"),ce(e,n,"flexmock","FlexMock"),ce(e,n,"rr","RR"),ce(e,n,"bourne","Bourne"),ce(e,n,"not_a_mock","NotAMock"),n}},LV=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return ce(e,n,"tokio","tokio"),ce(e,n,"async-std","async-std"),ce(e,n,"hyper","hyper"),ce(e,n,"actix-web","actix-web"),ce(e,n,"rocket","rocket"),n}determineCoreLibraries(e){let n=[];return ce(e,n,"serde","serde"),ce(e,n,"regex","regex"),ce(e,n,"rand","rand"),ce(e,n,"log","log"),ce(e,n,"lazy_static","lazy_static"),ce(e,n,"libc","libc"),ce(e,n,"futures","futures"),ce(e,n,"rayon","rayon"),ce(e,n,"reqwest","reqwest"),ce(e,n,"warp","warp"),n}determineTestingFrameworks(e){let n=[];return ce(e,n,"test-case","test-case"),ce(e,n,"proptest","proptest"),ce(e,n,"quickcheck","quickcheck"),n}determineTestingLibraries(e){let n=[];return ce(e,n,"mockall","mockall"),ce(e,n,"double","double"),ce(e,n,"rstest","rstest"),ce(e,n,"mockiato","mockiato"),ce(e,n,"mock_derive","mock_derive"),ce(e,n,"mocktopus","mocktopus"),ce(e,n,"mockers","mockers"),ce(e,n,"mock_it","mock_it"),n}},FV=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(n=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(n.name))}determineApplicationFrameworks(e){return e.libraries.filter(n=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(n.name))}determineCoreLibraries(e){return e.libraries.filter(n=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(n.name))}determineTestingFrameworks(e){return e.libraries.filter(n=>["unity","criterion","cmocka","check","ctest","minunit"].includes(n.name))}determineTestingLibraries(e){return e.libraries.filter(n=>["cmock","fff","trompeloeil","fakeit"].includes(n.name))}};function ce(t,e,n,r){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(n.toLowerCase())>-1);i&&e.push({name:r,version:i.version})}s(ce,"addFromLibraries");var MV=class{constructor(e,n){this.languageId=e;this.delegates=n}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(n=>n.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(n=>n.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(n=>n.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(n=>n.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(n=>n.determineTestingLibraries(e)).flat()}};function YWe(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(YWe,"determineProgrammingLanguage");var zWe=[new _V,new SV,new RV,new kV,new BV,new DV,new PV,new NV,new LV,new FV];function KWe(t){let e=zWe.find(n=>typeof n.languageId=="string"?n.languageId===t:Array.isArray(n.languageId)?n.languageId.includes(t):!1)??new MV(t,zWe);return new lfe(e)}s(KWe,"getMetadataLookup");var lfe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let n=[];return e.forEach(r=>{n.find(i=>i.name===r.name)||n.push(r)}),n}};var JWe=I.Object({name:I.String(),version:I.Optional(I.String())}),XWe=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(JWe),buildTools:I.Array(JWe)}),cfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let n=[];n.push([new Bt([`The user is working on a project with the following characteristics:
`]),1]);let r=KWe(e.language.id);return this.addProgrammingLanguage(e,n),this.addBuildTools(e,n,r),this.addApplicationFramework(e,n,r),this.addCoreLibraries(e,n,r),this.addTestingFrameworks(e,n,r),this.addTestingLibraries(e,n,r),new Bt(n)}addProgrammingLanguage(e,n){let r=YWe(e);this.turnContext.collectLabel(xA,r),n.push([new Bt([`- programming language: ${r}`]),1])}addBuildTools(e,n,r){this.addToPrompt(n,"- build tools:",r.determineBuildTools(e))}addApplicationFramework(e,n,r){this.addToPrompt(n,"- application frameworks:",r.determineApplicationFrameworks(e))}addCoreLibraries(e,n,r){this.addToPrompt(n,"- core libraries:",r.determineCoreLibraries(e))}addTestingFrameworks(e,n,r){this.addToPrompt(n,"- testing frameworks:",r.determineTestingFrameworks(e))}addTestingLibraries(e,n,r){this.addToPrompt(n,"- testing libraries:",r.determineTestingLibraries(e))}addToPrompt(e,n,r){if(r.length>0){r.forEach(o=>{this.turnContext.collectLabel(xA,`${o.name}${o.version?" "+o.version:""}`)});let i=r.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Bt([`${n}
${i}`]),1])}}},xA="project-metadata",QV=class{constructor(e){this._resolver=e;this.id=xA;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new cfe(e)}};f();var ZWe=Ve(require("path"));var ufe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,n)).filter(a=>a!==void 0).flat();if(o.length>0)return r.push([new Bt(["The user wants you to consider the following referenced files when computing your answer."]),1]),r.push(...o),new Bt(r)}filterIncludedFiles(e){return e.filter(n=>n.type==="file"&&!this.turnContext.isFileIncluded(n.uri))}async toFileChunks(e,n){return await Promise.all(e.map(async r=>{if(r.type==="file"&&r.uri)return await this.elideReferencedFiles(n,r)}))}async elideReferencedFiles(e,n){let r=await e.getOrReadTextDocument(n),i=gs(r);if(await this.turnContext.collectFile(UV,n.uri,i),r.status==="valid"){let o=e.getRelativePath(r.document);if(i==="included"){let a=new mA(r.document,n.selection,n.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Bt([`The referenced file \`${o}\` is empty.`]),1]]}else if(r.status==="invalid")return[[new Bt([`The referenced file \`${ZWe.basename(n.uri)}\` is content excluded.`]),1]]}},dfe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},UV="references",OV=class{constructor(){this.id=UV;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new dfe}processor(e){return new ufe(e)}};var CT=s(()=>[xA,nh,UV,nu],"mandatorySkills"),qV=class{constructor(e,n){this.chatFetcher=n;this.metaPromptFetcher=new wV(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,n,r,i,o,a){let l=[];if(o){let c=o.requiredSkills?await o.requiredSkills(e.ctx):[];l.push(...c.filter(u=>!CT().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),n,r,i)).skillIds.reverse().forEach(u=>{!l.includes(u)&&!CT().includes(u)&&l.push(u)});if(a){let c=await a.additionalSkills(e.ctx);l.push(...c.filter(u=>!CT().includes(u)))}return l.push(...CT()),l=l.filter(c=>!this.isIgnoredSkill(c,e.turn)),{skillIds:e.ctx.get(Gi).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,n,r){let i=await this.getNonSelectableSkills(e),o=e.get(Gi).getSupportedSkills(n.id),a=e.get(gl).getDescriptors(),l=[];for(let c of a){if(i.includes(c.id)||!o.includes(c.id))continue;(c.isAvailable?await c.isAvailable(e):!0)&&!this.isIgnoredSkill(c.id,r)&&l.push(c)}return l}async getNonSelectableSkills(e){let n=await yA(e),r=(await Promise.all(n.map(i=>i.additionalSkills(e)))).flat();return[...CT(),...r]}isIgnoredSkill(e,n){return n.ignoredSkills?.some(r=>r.skillId===e)}};f();f();var WV=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(n=>n.roundId===e)}async start(e,n,r,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(l=>l.id===n))On.error(this.ctx,`Tool call ${n} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:n,name:r,progressMessage:i,status:"running"};o.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,n){await this.update(e,n,r=>{r.status="completed"})}async result(e,n,r){await this.update(e,n,i=>{i.status="completed",i.result=r.data})}async cancel(e,n){await this.update(e,n,r=>{r.status="cancelled"})}async finishAll(e="completed"){let n=this.rounds.filter(r=>{let i=r.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return r.toolCalls=i,!0});n.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:n})}async error(e,n,r){await this.update(e,n,i=>{i.status="error",i.error=r||"Unknown error"})}async update(e,n,r){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===n);o?(r(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):On.error(this.ctx,`Tool call ${n} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var GV=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,n,r){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:n,description:r,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,n=>{n.status="completed"})}async cancel(e){await this.updateStep(e,n=>{n.status="cancelled"})}async finishAll(e="completed"){let n=this.steps.filter(r=>r.status==="running").map(r=>(r.status=e,r));n.length>0&&await this.progress.report(this.conversation,this.turn,{steps:n})}async error(e,n){return this.updateStep(e,r=>{r.status="failed",r.error={message:n||"Unknown error"}})}async updateStep(e,n){let r=this.steps.find(i=>i.id===e);r?(n(r),await this.progress.report(this.conversation,this.turn,{steps:[r]})):On.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var _Lt="X-Initiator",SLt="X-Interaction-ID",RLt="X-Interaction-Type";var HV=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},ffe=class extends HV{static{s(this,"User")}static id(){return"user"}},pfe=class extends HV{static{s(this,"Agent")}static id(){return"agent"}},mfe=class{static{s(this,"GenericLlmInteraction")}constructor(e,n,r){this.initiator=e.id(),this.interactionType=n,this.interactionId=r}toCapiHeaders(){return{[_Lt]:this.initiator,[SLt]:this.interactionId,[RLt]:this.interactionType.toString()}}},Od=class t extends mfe{static{s(this,"LlmInteraction")}static user(e,n){return new t(ffe,e,n)}static agent(e,n){return new t(pfe,e,n)}};var kb=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.cancelationToken=i;this.skillResolver=new hfe(this),this.steps=new GV(e,n,r,e.get(Is)),this.collector=new gfe(n,r,e.get(Is)),this.agentToolCalls=new WV(e,n,r,e.get(Is))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?Od.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?Od.agent("conversation-panel",this.turn.telemetryId):Od.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,n,r,i){let o={type:"file",collector:e,uri:n,status:r};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,n){this.collector.collect({type:"label",collector:e,label:n})}isFileIncluded(e){return this.collector.collectibles.some(n=>n.type==="file"&&n.status==="included"&&n.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,n){await this.ctx.get(Is).report(this.conversation,this.turn,{notifications:[{severity:n,message:e}]})}},jV=class extends Error{constructor(n,r){super(`Cycle detected while resolving skills: ${r.join(" -> ")} -> ${n}`);this.skillId=n;this.skillStack=r}static{s(this,"CycleError")}},W9=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},hfe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Gi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let r=this.turnContext.ctx.get(Yl).getResolvedSkill(this.turnContext.turn.id,e);if(r)return this.resolveStack.pop(),r;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new jV(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let r=this.turnContext.ctx.get(gl).getSkill(e);try{let i=await r?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Yl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof jV||i instanceof W9)throw i;On.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},gfe=class{constructor(e,n,r){this.conversation=e;this.turn=n;this.conversationProgress=r;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(n=>n.collector===e)}};async function eGe(t,e){let[n,r,i]=await kLt(t,e);return i.push(...PLt(t)),n.length>0||r.length>0?[new Bt([[new Bt(["Consider the additional context:"]),1],[wb(n,"inverseLinear"),.9],...r]),i]:[null,i]}s(eGe,"fromSkills");async function kLt(t,e){let n=[],r=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await NLt(t,a.skillId,e?.languageId??""))continue;let[l,c]=await BLt(t,a.skillId);l&&(CT().indexOf(a.skillId)===-1?r.push(l):i.push(l)),n.push(c)}return r.reverse(),i.reverse(),n.reverse(),[r,i,n]}s(kLt,"handleSkillsInReverse");async function BLt(t,e){let r=t.ctx.get(gl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let l=r?.processor(t),c=Date.now(),u=await l?.processSkill(o,t),d=Date.now()-c;return u?await DLt(t,r,l,u,a,d):[void 0,await $V(t,r,"unprocessable",void 0,a,d)]}else return[void 0,await $V(t,r,"unresolvable",void 0,a)]}catch(i){if(On.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof W9)throw i;return[void 0,await $V(t,r,"failed")]}}s(BLt,"safelyProcessSkill");async function DLt(t,e,n,r,i,o){let a;return typeof r=="string"?a=new Bt([[r,1]]):a=r,[[a,n?.value()||0],await $V(t,e,"resolved",a,i,o)]}s(DLt,"handleProcessedSkill");async function $V(t,e,n,r,i,o){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),c={skillId:e?.id??"unknown",resolution:n,files:l,resolutionTimeMs:i,processingTimeMs:o};if(r){let u=await t.ctx.get(Xs).getBestChatModelConfig(Df("user")),d=r.elide(u.maxRequestTokens).getText();c.tokensPreEliding=Bo(u.tokenizer).tokenLength(d)}return t.ctx.get(Yl).addResolution(t.turn.id,c),c}s($V,"determineResolution");function PLt(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(PLt,"handleIgnoredSkills");async function NLt(t,e,n){if(e!==xA&&e!==nh)return!0;let r=t.ctx.get(Nt),i=await r.updateExPValuesAndAssignments({languageId:n});return r.ideChatEnableProjectMetadata(i)?e===xA:e===nh}s(NLt,"includeSkill");var tGe=Ve(V0());var xT=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,n){let r=[],i=RR(e.conversation.turns.slice(0,-1));i!==null&&r.push([i,.6]);let[o,a]=await this.elidableSkills(e,n);return o!==null&&(i!==null&&r.push(["",.1]),r.push([o,.8])),[new Bt(r),a]}async elidableSkills(e,n){return await eGe(e,n)}async promptContent(e,n,r){let i;e.turn.workspaceFolder&&(i=await Jg.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=L0(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[l,c]=await this.elidableContent(e,r);return[[{role:"system",content:n},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:a}],c]}},zV=class extends xT{static{s(this,"PanelUserPromptStrategy")}suffix(e){return tGe.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var nGe=Ve(V0());var YV=class extends xT{static{s(this,"InlineUserPromptStrategy")}suffix(e){return nGe.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var Afe=Ve(V0());var KV=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let n=RR(e.turns.slice(0,-1)),r=[];return n!==null&&r.push([n,.6]),new Bt(r)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return Afe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(n=>`${this.skillToPrompt(n)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let n=QLe(e.map(r=>r.id));return I.Object({skillIds:I.Array(n,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(n){return{skillIds:Kv(n).skillIds}}}}skillToPrompt(e){let n=e.description?e.description():e.id,r=`Skill Id: ${e.id}
Skill Description: ${n}`,i=e.examples?e.examples():[];return i.length>0&&(r+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),r}promptContent(e,n,r){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:n},{role:"user",content:o},{role:"system",content:this.suffix(r)},{role:"user",content:Afe.default`
                    This is the user's question: 
                    ${Vn(i).trim()} 
                `.trim()}],[]]}};f();var rGe=Ve(V0());var JV=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let n=Kv(e);return{suggestedTitle:n.suggestedTitle,followUp:n.followUp}}}}suffix(e){return rGe.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let n=RR(e.turns.slice()),r=[];return n!==null&&r.push([n,.6]),new Bt(r)}promptContent(e,n,r){return[[{role:"system",content:n},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var LLt=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],XV=class extends xT{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,n,r){if(r.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=L0(e.conversation.getLastTurn().request.message),o=[{role:"system",content:n},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:LLt,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(n){let r=Kv(n).keywords;if(!r||!Array.isArray(r))return{keywords:[]};let i=new Set;for(let o of r)if(!(!MO(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!MO(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var yfe=class{constructor(e,n,r){this.promptType=e;this.strategy=r;this.modelFamilies=Array.isArray(n)?n:[n]}static{s(this,"PromptStrategyDescriptor")}};function G9(t,e,n){return new yfe(t,e,n)}s(G9,"descriptor");var iGe=[G9("user",Df("user"),()=>new zV),G9("inline",Df("inline"),()=>new YV),G9("meta",Df("meta"),()=>new KV),G9("suggestions",Df("suggestions"),()=>new JV),G9("synonyms",Df("synonyms"),()=>new XV)],ZV=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,n,r){let i=iGe.find(o=>o.promptType===n&&o.modelFamilies.includes(r));if(!i)throw new Error(`No prompt strategy found for promptType: ${n} and modelFamily: ${r}`);return i.strategy(e)}get descriptors(){return iGe}};var sGe=require("console");var bc=class{constructor(e,n=new ZV){this.ctx=e;this.promptStrategyFactory=n}static{s(this,"ConversationPromptEngine")}async toPrompt(e,n){let r=await this.promptStrategyFactory.createPromptStrategy(this.ctx,n.promptType,n.modelConfiguration.modelFamily),[i,o]=await r.promptContent(e,await this.safetyPrompt(n.userSelectedModelName??n.modelConfiguration.uiName),n),[a,l]=this.elideChatMessages(i,n.modelConfiguration);return await this.ctx.get(nl).inspectPrompt({type:n.promptType,prompt:oGe(a),tokens:l}),this.ctx.get(Yl).addPrompt(e.turn.id,oGe(a),n.promptType),{messages:a,tokens:l,skillResolutions:o,toolConfig:r.toolConfig?.(n)}}elideChatMessages(e,n){let r=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,sGe.assert)(r.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,n),o=n.maxRequestTokens-i,a=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:FLt(l.content.elide(o).getText())}).filter(l=>l.content.length>0);return[a,ofe(a,n)]}computeNonElidableTokens(e,n){let r=e.filter(i=>typeof i.content=="string");return r.push({role:"user",content:""}),ofe(r,n)}async safetyPrompt(e){let n=await this.ctx.get(dr).getSession(this.ctx),r=this.ctx.get(ur).getEditorInfo().readableName??this.ctx.get(ur).getEditorInfo().name,i=MLt(process.platform);return jWe(this.ctx,r,n?.login,i,e)}};function FLt(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(FLt,"processResultOfElidableText");function oGe(t){return t.map(e=>Vn(e.content)).join(`

`)}s(oGe,"debugChatMessages");function MLt(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(MLt,"mapPlatformToOs");var e$=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,n,r,i){let o=await Co.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},l=await this.ctx.get(bc).toPrompt(e,a),c=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),u={modelConfiguration:o,messages:l.messages,uiKind:r,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=l.toolConfig.tool_choice,u.tools=l.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,n,c);if(d.type!=="success"&&(On.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,n,c)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){On.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=l.toolConfig.extractArguments(p);if(!m||!h){On.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:l.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){On.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){On.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{On.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var kR=class{constructor(e,n,r){this.turnContext=e;this.chatFetcher=n;this.computeSuggestions=r}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,n,r,i,o,a,l,c){switch($Se(this.turnContext.ctx,l,a,e.type=="offTopic",e.requestId,c,o.extendedBy({},{fileCount:this.turnContext.ctx.get(fa).workspaceCount})),await this.turnContext.ctx.get(nl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(r,e.numTokens,e.requestId,n,l,i,o,c);case"offTopic":return this.processOffTopicFetchResult(o,l,c);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:Vn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:Zv.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",r&&r.length>0?this.turnContext.turn.response={message:r,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,n,r,i,o,a,l,c){if(e&&e.length>0){a.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},zSe(this.turnContext.ctx,this.turnContext.conversation,o,e,n,r,c,l);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,c):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:Vn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,n,r,i){let a=await new e$(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,n,r);if(a===void 0)return;let l=this.enrichFollowup(a,n,r,i);return On.debug(this.turnContext.ctx,"Computed followup",l),On.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:l,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,n,r,i){let o=r.extendedBy({messageSource:"chat.suggestions",suggestionId:an(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return ZSe(this.turnContext.ctx,n,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,n,r){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",YSe(this.turnContext.ctx,this.turnContext.conversation,n,i,e.properties.messageId,r,e),{error:{message:i,responseIsFiltered:!0}}}};f();var t$=I.Union([I.String(),I.Number()]),vT=I.Union([I.String(),I.Number()]),QLt=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),n$=I.Object({uri:I.String(),position:I.Optional(kl)}),H9=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(Ea),selection:I.Optional(Ea),status:I.Optional(QLt),range:I.Optional(Ea)}),OLt=I.Object({type:I.Literal("directory"),uri:I.String()}),BR=I.Union([H9,OLt,lqe]),bp=I.Union([I.Literal("panel"),I.Literal("inline")]),ULt=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),Cfe=I.Union([I.String(),I.Array(ULt)]),aGe=I.Object({request:Cfe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(vT)});function r$(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(r$,"convertToMessageContent");function i$(t,e){if(t=L0(t),typeof t=="string")return t+e;let n=t.map(r=>r.type==="text").lastIndexOf(!0);if(n>=0){let r=[...t],i=r[n];return r[n]={type:"text",text:i.text+e},r}return[...t,{type:"text",text:e}]}s(i$,"appendToMessage");var o$=I.Union([I.Literal("Ask"),I.Literal("Agent")]),qLt=I.Object({type:I.String(),description:I.String()}),lGe=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),qLt),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),s$=I.Object({uri:I.String(),name:I.String()});var xfe="generate-response",a$=class extends Error{constructor(n,r,i,o){super(n);this.authorizationUri=r;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},j9=class{constructor(e,n,r){this.agent=e;this.turnContext=n;this.chatFetcher=r;this.conversationProgress=n.ctx.get(Is),this.chatFetcher=this.chatFetcher??new Js(n.ctx),this.postProcessor=new kR(n,this.chatFetcher,!1),this.conversation=n.conversation,this.turn=n.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,n,r,i){try{await this.processWithAgent(e,n,this.turnContext,i)}catch(o){On.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof a$?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,n,r,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await fc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(r);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await r.ctx.get(nl).inspectPrompt(l),await r.steps.start(xfe,"Generating response");let c=this.augmentTelemetry(a,o,this.turn.template,i);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(r,a.messages,n,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),c,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,r),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let n=this.createMessagesFromHistory(e),r=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,n):n.push({role:"user",content:L0(e.turn.request.message),copilot_references:r.length>0?r:void 0}),{messages:n,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let n=this.turn.agent?.agentSlug;if(n){for(let r of e.conversation.turns)if(r.agent?.agentSlug===n&&r.agent.sessionId)return r.agent.sessionId}return an()}addConfirmationResponse(e,n){n.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return sfe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(n=>{let r=[];if(n.request&&r.push({role:"user",content:L0(n.request.message)}),n.response&&n.response.type==="model"){let i=aqe(n.response.references);r.push({role:"assistant",content:L0(n.response.message),copilot_references:i.length>0?i:void 0})}return r})}async computeCopilotReferences(e){return await gqe(e)}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,n,r,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new bb((p,m,h,g,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=i$(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),v&&(this.turn.confirmationRequest=v)}),c=await this.turnContext.ctx.get(Mn).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:n,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:Vn(this.turn.request.message)},authToken:c?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,r,i,(p,m)=>l.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,r,l.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),Vn(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new a$("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,n,r,i){return M8(this.conversation,"conversationPanel",Vn(this.turn.request.message).length,e.tokens,r?.templateId,void 0,n,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(xfe,e.error.message):await n.steps.finish(xfe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var V9=class{constructor(e,n,r,i,o,a){this.id=e;this.slug=n;this.name=r;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new j9(this,e)}},l$=class extends V9{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new j9(this,e)}};f();var WLt="github",ih=class{static{s(this,"RemoteAgentRegistry")}},c$=class extends ih{constructor(n){super();this.ctx=n;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let n=await fI(this.ctx,"/agents");return n.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await n.text())):(Wn.error(this.ctx,"Failed to fetch agents from CAPI",{status:n.status,statusText:n.statusText}),[])}parseAgents(n){let r;try{r=JSON.parse(n).agents,Array.isArray(r)||Wn.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return n.includes("access denied")||Wn.warn(this.ctx,"Invalid remote agent response:",n,i),[]}return r.filter(i=>i.slug!==WLt).map(i=>new V9(i.id,i.slug,i.name,i.description,i.avatar_url))}};var vfe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[IR]}};async function yA(t){let e=[];return e.push(new l$),e.push(...await t.get(ih).agents()),e.push(new vfe),e}s(yA,"getAgents");f();var cGe=Ve(Ta());async function u$(t){let e=await t.get(dr).checkAndUpdateStatus(t);if(e.status!=="OK")throw new cGe.ResponseError($n.NoCopilotToken,`Not authenticated: ${e.status}`)}s(u$,"verifyAuthenticated");function To(t){return async(e,n,r)=>(await u$(e),t(e,n,r))}s(To,"ensureAuthenticated");var GLt=I.Object({});async function HLt(t,e,n){return[(await yA(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(HLt,"handleConversationAgentsChecked");var uGe=To(st(GLt,HLt));f();f();var $9=Ve(Ta());function jLt(t,e,n){let r=or.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(n),actualDocumentVersion:String(e.version)});return kt(t,"getCompletions.docVersionMismatch",r)}s(jLt,"telemetryVersionMismatch");async function oh(t,e,n){let i=t.get(kn).getTextDocumentUnsafe(e);if(!i)throw new $9.ResponseError($n.InvalidParams,`Document for URI could not be found: ${e.uri}`);await u$(t);let o=await VI(t,e,i.getText());if(o.status==="invalid")throw t.get(Yi).setInactive(o.reason),new $9.ResponseError($n.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw n?.isCancellationRequested||(jLt(t,i,e.version),Ec.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new $9.ResponseError($n.ContentModified,"Document Version Mismatch");return i}s(oh,"getTextDocument");async function vA(t,e,n){let r=e.textDocument??e.doc;if(!r){await u$(t);return}try{return await oh(t,r,n)}catch(i){if(i instanceof $9.ResponseError&&i.code===$n.CopilotNotAvailable)return;throw i}}s(vA,"getTextDocumentIfAvailable");var VLt=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),$Lt=I.Object({turnId:vT,codeBlockIndex:I.Number(),source:VLt,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(n$),textDocument:I.Optional(cd),position:I.Optional(kl),conversationSource:I.Optional(bp)});async function zLt(t,e,n){let r=await vA(t,n,e),i={totalCharacters:n.totalCharacters,copiedCharacters:n.copiedCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,currentLine:o.line});let a=rv(n.conversationSource),l=await fc(t,t.get(Gi).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return v0(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a},i,`${wu(a)}.acceptedCopy`,l),["OK",null]}s(zLt,"handleConversationCodeCopyChecked");var dGe=st($Lt,zLt);f();var YLt=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),KLt=I.Object({turnId:vT,source:YLt,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(n$),textDocument:I.Optional(cd),position:I.Optional(kl),conversationSource:I.Optional(bp)});async function JLt(t,e,n){let r=await vA(t,n,e),i={totalCharacters:n.totalCharacters,acceptedLength:n.acceptedLength??n.totalCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,insertionOffset:r.offsetAt(o),currentLine:o.line});let a=rv(n.conversationSource),l=await fc(t,t.get(Gi).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return v0(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a,compType:n.acceptedLength&&n.acceptedLength<n.totalCharacters?"partial":"full"},i,`${wu(a)}.acceptedInsert`,l),["OK",null]}s(JLt,"handleConversationCodeInsertChecked");var fGe=st(KLt,JLt);f();f();var d$=I.Array(Ea);function f$(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(f$,"resolveAsActiveEditor");f();var pGe=Ve(Ta());var p$=new pGe.ProgressType,bfe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,n,r){await e.get(Cn).connection.sendProgress(p$,this.progressToken,{kind:"begin",title:`Conversation ${n.id} Turn ${r.id}`,conversationId:n.id,turnId:r.id,agentSlug:r.agent?.agentSlug})}async report(e,n,r,i){await e.get(Cn).connection.sendProgress(p$,this.progressToken,{kind:"report",conversationId:n.id,turnId:r.id,...i})}async end(e,n,r,i){await e.get(Cn).connection.sendProgress(p$,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,...i})}async cancel(e,n,r,i){await e.get(Cn).connection.sendProgress(p$,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,cancellationReason:"CancelledByUser",error:i})}};function DR(t){return new bfe(t.workDoneToken)}s(DR,"createProgressHandler");f();f();f();var qu=class extends Error{constructor(n){super(n.message);this.conversationError=n;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var ky=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var PR=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var mGe="```",z9=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,XLt=String.raw`${mGe}[\w]*?\n(?<codeblock>[\s\S]*?)\n${mGe}`,ZLt=new RegExp(z9+`
`+XLt,"gs"),Efe=["replace","delete"];function Ife(t,e){let n=t.matchAll(ZLt),r=Array.from(n),i=[];for(let o of r){let a=o.groups;if(!a||!Efe.includes(a.mode))continue;let l=a.start?parseInt(a.start)-1:-1,c=a.end?parseInt(a.end)-1:l,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((y,v)=>{d[v]=y.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:l,end:c},h=Tfe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(Ife,"extractEditsFromTaggedCodeblocks");function Tfe(t,e){if(t.length===0)return;t.sort((r,i)=>r.start!==i.start?i.start-r.start:i.end-r.end);let n=e.getText().split(`
`);for(let r of t){let i=r.start,o=r.end,a=r.mode,l=r.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=n.length||o>=n.length)){if(a==="delete")n.splice(i,o-i+1);else if(a==="replace"){let c=n[i].match(/^\s*/)?.[0]??"";l.forEach((u,d)=>{l[d]=c+u}),n.splice(i,o-i+1,...l)}}}return n.join(`
`)}s(Tfe,"applyEditsToDocument");f();f();f();f();var By=class{constructor(e,n,r=[]){this.textDocumentResult=e;this.range=n;this.descriptions=r;this.descriptions=r}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,n=new F0({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),r=["<attachment>"];return r.push(...this.descriptions),r.push(...n.renderAsArray()),r.push("</attachment>"),r}};var eFt=new _t("activeEditorPrompt");async function hGe(t,e){let n=[],r=t.turnContext.turn.request.activeEditor;if(r){if(e.isCancellationRequested)throw new Pa;let i=await t.textDocumentProvider.getByUri(r.uri);if(i.status==="valid")if(r.selection&&tFt(r.selection)){let o=new By(i,r.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ti(r.uri)}, lines ${r.selection.start.line+1} to ${r.selection.end.line+1}:`]);n.push(...o.render());let a=new By(i,void 0,["User's active file for additional context:"]);n.push(...a.render())}else if(r.visibleRange){let o=new By(i,r.visibleRange,["User's current visible code:",`Excerpt from ${Ti(r.uri)}, lines ${r.visibleRange.start.line+1} to ${r.visibleRange.end.line+1}:`]);n.push(...o.render())}else{let o=new By(i,void 0,["User's active file for additional context:"]);n.push(...o.render())}else eFt.warn(t.context,`Failed to read file in active editor ${r.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return n}s(hGe,"processActiveEditor");function tFt(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(tFt,"notEmptySelection");f();f();function gGe(t){return t.reduce((n,r)=>n+r.value.length,0)+Math.max(0,t.length-1)}s(gGe,"partsLength");async function yGe(t,e=1/0,n){let r=AGe(0,t,e),i=e-gGe(r);for(;;){let o=!1,a=[];for(let l of r)if(l.type==="text")a.push(l);else if(l.type==="dir"){a.push({type:"text",uri:l.uri,value:l.value});let c=await l.getChildren();if(n?.isCancellationRequested)return nFt();let u=AGe(l.level+1,c,i-1);u.length&&(o=!0,i-=gGe(u)+1,a.push(...u))}if(r=a,!o)break}return{files:r.map(o=>o.uri).filter(o=>o!==void 0),tree:r.map(o=>o.value).join(`
`)}}s(yGe,"visualFileTree");function AGe(t,e,n){let r="	".repeat(t),i=[],o=n;for(let a=0;a<e.length;++a){let l=e[a],c=r+l.name+(l.type===2?"/":"");if(c.length>o){let u=r+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}l.type===2?i.push({type:"dir",uri:l.uri,level:t,value:c,getChildren:l.getChildren}):i.push({type:"text",uri:l.uri,value:c}),o-=c.length,a!==e.length-1&&(o-=1)}return i}s(AGe,"toParts");var nFt=s(()=>({tree:"",files:[]}),"emptyTree");var rFt=new _t("fileReferencesPrompt");async function CGe(t,e,n,r){let i=await xGe(t,e,n,r);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:l,tree:c}of i){o+=`${l}/
`;for(let u of c.tree.split(`
`))o+=`	${u}
`}}let a=L4(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(CGe,"generateWorkspaceStructurePrompt");async function xGe(t,e,n,r){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,l=await yGe(await vGe(t,i.uri,n,r),n.maxLength/e.length,r);return{label:o,uri:a,tree:l}})):[]}s(xGe,"generateWorkspaceStructure");async function vGe(t,e,n,r){if(r.isCancellationRequested)return[];let i;try{i=await t.get(go).readDirectory(e)}catch{return[]}return r.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let l=vo(e,o);return n.excludeDotFiles&&o.startsWith(".")||sFt(l)?null:a&2?{type:2,uri:l,name:o,getChildren:s(()=>vGe(t,l,n,r),"getChildren")}:{type:1,uri:l,name:o}})).then(o=>o.filter(a=>a!=null)))}s(vGe,"buildFileList");var iFt=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],oFt=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function sFt(t){return!!(oFt.includes(Ti(t).toLowerCase())||Wo(t)?.toLowerCase()?.split(/[/\\]/g)?.some(n=>iFt.includes(n)))}s(sFt,"shouldAlwaysIgnoreFile");async function bGe(t,e,n){if(n.length===0)return[];try{let r=n.map(a=>({uri:a.uri,name:Ti(a.uri)})),i=await xGe(t,r,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:l,tree:c}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${ia(l)})`),o.push(c.tree),o.push("</attachment>");return o}catch(r){return rFt.warn(t,`Failed to generate directory structure: ${String(r)}`),[]}}s(bGe,"processDirectoryReferences");var aFt=new _t("fileReferencesPrompt");async function EGe(t,e){let n=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],r=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=n.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&r.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,l,c]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Pa;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new By(h,void 0,[]);g&&m.push(...g.render())}else aFt.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),hGe(t,e),bGe(t.context,e,r)]),u=a.flat(),d=c||[];return u.length>0||l.length>0||d.length>0?["<attachments>",...u,...l,...d,"</attachments>"]:[]}s(EGe,"processFileReferences");var IGe=new _t("editAgentPrompt"),m$=class{constructor(e,n){this._toolsService=e;this.props=n;this.ctx=n.turnContext.ctx,this.turnContext=n.turnContext,this.currentTurn=n.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let n=this.turnContext.conversation.turns.slice(0,-1),r=this.createChatMessagesFromHistory(n),i=ace(this.currentTurn.response?.message,!0),o=await Jg.appendToUserMessage(this.ctx,this.props.workspaceFolders,Vn(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...r,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return EP(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let n=[];for(let r of e)if(r.request&&n.push({role:"user",content:L0(r.request.message)}),r.response){let i=ace(r.response.message,!0);i.forEach(o=>n.push(this.fixToolCallsInResponse(o,i)))}return n}fixToolCallsInResponse(e,n){if(e.tool_calls&&e.tool_calls.length){let r=e.tool_calls,i=[];for(let o of r)n.find(l=>l.role==="tool"&&l.tool_call_id===o.id)?i.push(o):IGe.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,n){let r={role:"assistant",content:e,tool_calls:n.length?n:void 0};this.currentTurn.response?this.currentTurn.response.message=IP(this.currentTurn.response.message,r):this.currentTurn.response={message:[r],type:"model"}}addToolCallResult(e,n){let r="";switch(e.status){case"error":r="Tool call failed with error: ";break;case"cancelled":r="Tool call is cancelled with result: ";break;default:case"success":r=""}let i=r+A9(e.content),o={role:"tool",content:i,tool_call_id:n};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(SG(this.currentTurn.response.message)&&this.currentTurn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===n)){IGe.info(this.ctx,`Tool call result for ${n} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=IP(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,n=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${r?"or replace_string_in_file":""} tool instead.`),n&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),n&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),r?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${r?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${r?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${n?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${jl}`),o.push("changed code"),o.push(`// ${jl}`),o.push("changed code"),o.push(`// ${jl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${jl}`),o.push("	age: number;"),o.push(`	// ${jl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,n){let r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await EGe({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},n);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(n)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${jl}\` to represent regions of unchanged code.`),r&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(n=>` - ${Wo(n.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await CGe(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};f();function Y9(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(Y9,"toString");var TGe=15,NR=new _t("toolCallingLoop"),h$=class t{constructor(e,n,r,i){this.turnContext=e;this.chatFetcher=n;this.modelConfiguration=r;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(Is),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(eu),this.prompt=new m$(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new Gm(this.turnContext.ctx)}),this.requestId=an(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let n=0,r;for(;;){n++,this.abortIfCanceled(e),this.validateIteration(n,r);let i=performance.now(),o=await this.runOne(n,e);if(t5e(this.turnContext.ctx,this.turnContext,n,performance.now()-i,this.baseTelemetryWithExp),r={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,n){this.abortIfCanceled(n);let r=await this.prompt.render(n),i="",o=new bb((u,d,p,m)=>{let h=u.trim().match(z9)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(n);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(n);let l={messages:r,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};NR.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let c=await this.chatFetcher.fetchResponse(l,n,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,c,i,a,n)}async processChatFetchResult(e,n,r,i,o){switch(this.abortIfCanceled(o),NR.debug(this.turnContext.ctx,`Processing fetch type: ${n.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(n,null,2)}`),n.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(r,[]),{response:n,round:{response:n.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new qu({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Pa;case"failed":throw this.turn.status="error",new qu({message:Zv.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw this.turn.status="filtered",new qu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new qu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new qu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new qu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new qu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new qu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new qu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(n,r,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new qu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,n,r,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(l=>{if(!l.id){let c=`cls_${t.NextToolCallId++}`;l.id=c}return l});this.prompt.addToolCallModelResponse(n,a);for(let l of a)await this.handleSingleToolCall(l,r,i,o);return{response:e,round:{response:n,toolInputRetry:0,toolCalls:a.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,n,r,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(n,e.function.name);if(o){let a=performance.now(),l="success";try{let c=Kv(e),u=this.toolsService.prepareInvocation(o.id,{input:c},i),d=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,d,o.id,c,r,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(r,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:c,roundId:r,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=UQe(p);await this.turnContext.agentToolCalls.result(r,e.id,m)}else if(p.status==="error"){let m=xj(p);await this.turnContext.agentToolCalls.error(r,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(r,e.id);this.prompt.addToolCallResult(p,e.id)}catch(c){if(c instanceof ky||c instanceof Pa)throw this.turn.status="cancelled",l="cancelled",this.prompt.addToolCallResult(new Wi([new Ci("")],"cancelled"),e.id),new ky(c.message);{NR.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${Y9(c)}`,c),l="error";let u=new Wi([new Ci(Y9(c).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=xj(u);await this.turnContext.agentToolCalls.error(r,e.id,d.message)}}finally{let c=performance.now()-a;n5e(this.turnContext.ctx,this.turnContext,o,e.id,r,c,l,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;NR.error(this.turnContext.ctx,a);let l=new Wi([new Ci(a)],"error");this.prompt.addToolCallResult(l,e.id);let c=xj(l);await this.turnContext.agentToolCalls.error(r,e.id,c.message)}}getAvailableChatTools(e){return e.map(n=>({type:"function",function:{name:n.nameForModel,description:n.description,parameters:n.inputSchema}}))}findToolByName(e,n){return e.find(r=>r.nameForModel===n)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Pa}async requestToolInvocationApproval(e,n,r,i,o,a,l,c){if(e.confirmationMessages&&n){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,r,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:l},c);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new ky("Cancelled by user");case"accept":return Promise.resolve();default:throw new ky(`Invalid confirmation result ${u.result}`)}}else NR.debug(this.turnContext.ctx,`Tool call confirmation not required for ${r} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${n}'`)}validateIteration(e,n){if(n&&e>TGe)throw NR.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${TGe} for turn ${this.turn.id}`),new PR}};var g$=new _t("agenticTurnProcessor"),A$=class{constructor(e,n){this.turnContext=e;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Is),this.chatFetcher=this.chatFetcher??new Js(e.ctx),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModelAndToolCall(e,n,this.turnContext,r,i,o)}catch(a){On.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:Xde.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,n,r,i,o,a){if(n.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await fc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});n.onCancellationRequested(async()=>{g$.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let c=await Co.getModelConfiguration(this.turnContext.ctx,"edits",a);await new h$(this.turnContext,this.chatFetcher,c,l).run(n),await this.endProgress({})}catch(c){if(c instanceof ky)g$.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,c),this.turn.status="cancelled",await this.cancelProgress();else if(c instanceof Pa)g$.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,c),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(c instanceof PR)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:{message:c.message,code:Xde.ToolRoundExceedError,responseIsIncomplete:!0}});else if(c instanceof qu)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:c.conversationError});else throw g$.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,c),c}}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=IP(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var wfe="collect-context",_fe="generate-response",y$=class{constructor(e,n,r){this.turnContext=e;this.strategy=n;this.chatFetcher=r;this.conversationProgress=e.ctx.get(Is),this.chatFetcher=this.chatFetcher??new Js(e.ctx),this.postProcessor=new kR(e,this.chatFetcher,n.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModel(e,n,this.turnContext,r,i,o)}catch(a){On.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,n,r,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await fc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=F9().find(m=>m.id===this.turn.template?.templateId);if(c?.response){await this.handleTemplateResponse(c,this.turn.template.userQuestion,n);return}let u=(await yA(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await r.steps.start(wfe,"Collecting context"),await this.collectContext(r,n,l,this.strategy.uiKind,c,u);let d=a?(await this.turnContext.ctx.get(Xs).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(r,o?.detectedLanguageId??"",void 0,d);if(!p)await r.steps.error(wfe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await r.steps.finish(wfe),await r.steps.start(_fe,"Generating response");let m=this.augmentTelemetry(p,l,c,i,o);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,n,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,r),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let n=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(n&&n.type==="authorizationRequired")return{unauthorized:{...n,agentName:e.name,agentSlug:e.slug}}}catch(n){On.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,n);let r=n instanceof Error?n.message:String(n);return this.turn.status="error",this.turn.response={message:r,type:"meta"},{error:{message:r,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,n,r){if(!e.response)return;let i=await e.response(this.turnContext,n,r);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,n,r,i,o,a){let c=await new qV(this.turnContext.ctx,this.chatFetcher).collectContext(e,n,r,i,o,a);return this.turn.skills=c.skillIds.map(u=>({skillId:u})),c}async fetchConversationResponse(e,n,r,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",c=0,u=new bb((h,g,y,v)=>{let b=h.trim().match(z9)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:b,notifications:v.map(E=>({severity:"warning",message:E.message}))}),this.turn.response?this.turn.response.message=i$(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),l+=h,this.strategy.currentDocument){let E=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);E&&E.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:E}),c+=E.length)}}),d=await Co.getModelConfiguration(this.turnContext.ctx,"user",a);e=Co.transformMessages(e,d.modelFamily);let p={modelConfiguration:d,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:Vn(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,n,r,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:c}),await this.postProcessor.postProcess(m,n,u.appliedText,r,i,Vn(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,n,r,i,o){let a;return i?(this.turn.request.type="follow-up",KSe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,Vn(this.turn.request.message),e.tokens,i.type,i.id,o,n),a=M8(this.conversation,this.strategy.uiKind,Vn(this.turn.request.message).length,e.tokens,i.type,i.id,n,e.skillResolutions)):a=M8(this.conversation,this.strategy.uiKind,Vn(this.turn.request.message).length,e.tokens,r?.id,void 0,n,e.skillResolutions),a}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(_fe,e.error.message):await n.steps.finish(_fe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var C$=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,n,r,i){let o="user",a=await Co.getModelConfiguration(e.ctx,o),l={promptType:o,modelConfiguration:a,languageId:n,userSelectedModelName:i};return await this.ctx.get(bc).toPrompt(e,l)}extractEditsFromResponse(e,n){return[]}},x$=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,n,r){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=r?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(Xs).getBestChatModelConfig(Df(a)),c={promptType:a,modelConfiguration:l,languageId:n};return c.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(bc).toPrompt(e,c)}async processResponse(e){let n=[],r=Vn(e.response?.message??"");if(r&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(r,this.currentDocument);i&&n.push(i)}return n}async getCurrentEditorSkill(e){let n=await e.skillResolver.resolve(nu);if(n)return n}async getDocumentIfValid(e){let n=await this.ctx.get(Cr).getOrReadTextDocument({uri:e});if(n.status==="valid")return n.document}async processInlineResponse(e,n){let i=Ife(e,n).filter(a=>Efe.includes(a.mode)),o=Tfe(i,n);if(o)return await this.ctx.get(nl).documentDiff({original:n.getText(),updated:o}),{uri:n.uri,text:o}}extractEditsFromResponse(e,n){return Ife(e,n)}};f();f();var wGe=Ve(Ta()),_Ge=Ve(xm());var Wu=class{constructor(e,n,r){this.ctx=e;this.skillId=n;this.requestType=new wGe.ProtocolRequestType("conversation/context");this.typeCheck=ds.Compile(r)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let n=this.ctx.get(Cn).connection,r={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await n.sendRequest(this.requestType,r),[a,l]=o;if(l){let c=new _Ge.ResponseError(l.code,l.message,l.data);On.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,c);return}i=a}catch(o){On.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new xc(this.typeCheck.Errors(i));return i}}};var Sfe=class{constructor(e,n,r="",i="",o=[],a=[]){this.progressToken=e;this.chunks=n;this.followUp=r;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},Dy=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,n,r="",i="",o=[],a=[]){let l=new Sfe(e,n,r,i,o,a);return this.turns.push(l),l}get(e){return this.turns.find(n=>n.progressToken===e)}},v$=class{constructor(e,n){this.turnContext=e;this.syntheticTurn=n;this.conversationProgress=e.ctx.get(Is)}static{s(this,"SyntheticTurnProcessor")}async process(e,n){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,n)}catch(r){On.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,r);let i=r.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,n,r){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,n),await this.resolveSyntheticSkill(e,r),await this.processSyntheticChunks(e,r),await this.endSyntheticProgress(e,r),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=r.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,n){let r=this.turnContext.ctx.get(Gi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>r.skills.includes(o));for(let o of i){let l=await new Wu(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);l&&!n.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,n){for(let r of e.chunks)n.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:r}),await $I(1))}async endSyntheticProgress(e,n){n.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:an()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var Py=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,n,r){let i=e.ctx.get(Dy).get(n);if(i)return new v$(e,i);let a=(await yA(e.ctx)).find(c=>c.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new x$(e.ctx):l=new C$(e.ctx),e.turn.chatMode==="Agent"?new A$(e):(r!==void 0&&(l.computeSuggestions=r),new y$(e,l))}};f();var SGe=Ve(Ta());var LR=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let n=new Set;for(let r of e){if(n.has(r.uri))throw new SGe.ResponseError($n.InvalidParams,`Duplicate workspace folder uri ${r.uri}`);n.add(r.uri)}}};f();function b$(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ti(t.uri)}]}s(b$,"resolveAsWorkspaceFolders");f();f();var lFt=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),Ud=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,n)=>this._isCancelled?lFt(e,n):(this.handlers.push(e.bind(n)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(n=>n.isCancellationRequested),e.forEach(n=>{n.onCancellationRequested(r=>this.cancel(r))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(n=>n(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Gu=class{constructor(){this.tokens=new Jn(250)}static{s(this,"ProgressTokens")}add(e,n){let r=new sr.CancellationTokenSource,i=new Ud([n,r.token]);return this.tokens.set(e.toString(),r),i}cancel(e){let n=this.tokens.get(e.toString());n&&(n.cancel(),this.tokens.delete(e.toString()))}};var cFt=I.Object({conversationId:I.Optional(t$),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(aGe,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(cd),textDocument:I.Optional(cd),selection:I.Optional(Ea),visibleRanges:I.Optional(d$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(BR)),source:I.Optional(bp),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(s$)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(o$),needToolCallConfirmation:I.Optional(I.Boolean())});async function uFt(t,e,n){LR.validate(n.workspaceFolders);let r=await vA(t,n,e),i=t.get(Gi).create(n);await dFt(t,i,n,r);let o=i.turns[i.turns.length-1],a=DR(n),l=t.get(Gu).add(a.progressToken,e),c=new kb(t,i,o,l);return await(await t.get(Py).createProcessor(c,a.progressToken,n.computeSuggestions)).process(a,l,void 0,r,n.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:n.model},null]}s(uFt,"handleConversationCreateChecked");async function dFt(t,e,n,r){for(let i of n.turns){let o=r$(i.request),a=new Eb({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=sV(n.chatMode),a.needToolCallConfirmation=n.needToolCallConfirmation;let l=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,c=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:b$(l),u=f$({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});await t.get(Gi).addTurn(e.id,a,n.references,u,l,c,n.ignoredSkills,void 0)}}s(dFt,"addTurns");var RGe=st(cFt,uFt);f();var fFt=I.Object({conversationId:I.String()});function pFt(t,e,n){return t.get(Gi).destroy(n.conversationId),["OK",null]}s(pFt,"handleConversationDestroyChecked");var kGe=To(st(fFt,pFt));f();var mFt=I.Object({});function hFt(t,e,n){return[{path:t.get(Cc).directory},null]}s(hFt,"handleConversationPersistenceChecked");var BGe=To(st(mFt,hFt));f();f();var PGe=Ve(require("node:events"));var Rfe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let n=await e.get(dr).getSession(e),r=e.get(Ia),i=r.fallbackAppId();return n&&n.githubAppId&&n.githubAppId!==i?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:r.githubAppId}}},kfe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Mn).getToken()).envelope.chat_enabled?"ok":"failed"}}},gFt=[new Rfe,new kfe],DGe="onPreconditionsChanged",Ep=class{constructor(e,n=gFt){this.ctx=e;this.checks=n;this.emitter=new PGe.default;ea(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let n=e.every(i=>i.status==="ok")?"ok":"failed",r={results:e,status:n};return this.emit(r),r}onChange(e){this.emitter.on(DGe,e)}emit(e){this.emitter.emit(DGe,e)}};var AFt=I.Object({forceCheck:I.Optional(I.Boolean())});async function yFt(t,e,n){let r=n.forceCheck??!1;return[await t.get(Ep).check(r),null]}s(yFt,"handleConversationPreconditionsChecked");var NGe=To(st(AFt,yFt));f();var CFt=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(cd),textDocument:I.Optional(cd),source:I.Optional(bp)});async function xFt(t,e,n){let r=await vA(t,n,e),i=rv(n.source),o="unrated";n.rating>0?o="positive":n.rating<0&&(o="negative");let a=await fc(t,t.get(Gi).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return v0(t,r,{rating:o,uiKind:i},{},`${wu(i)}.messageRating`,a),["OK",null]}s(xFt,"handleConversationRatingChecked");var LGe=st(CFt,xFt);f();f();var E$=class extends xb{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:lA,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,n){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,n,r){let i={name:this.name,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId};try{return await e.ctx.get(Jv).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Pa;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(zg).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var vFt=I.Object({tools:I.Array(lGe)});function bFt(t,e,n){return n.tools.forEach(r=>{t.get(eu).registerTool(new E$({name:r.name,description:r.description,inputSchema:r.inputSchema,confirmationMessages:r.confirmationMessages}))}),["OK",null]}s(bFt,"conversationRegisterToolsChecked");var FGe=st(vFt,bFt);f();var EFt=I.Object({});function IFt(t,e,n){return[q0e(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(IFt,"handleConversationTemplatesChecked");var MGe=To(st(EFt,IFt));f();var TFt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:t$,turnId:I.Optional(vT),message:Cfe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(cd),textDocument:I.Optional(cd),selection:I.Optional(Ea),visibleRanges:I.Optional(d$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(BR)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(s$)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:OLe,model:I.Optional(I.String()),chatMode:I.Optional(o$),needToolCallConfirmation:I.Optional(I.Boolean())});async function wFt(t,e,n){LR.validate(n.workspaceFolders);let r=await vA(t,n,e),i=t.get(Gi),o=i.get(n.conversationId),a=r$(n.message),l=new Eb({message:a,type:"user"},n.turnId);l.chatMode=sV(n.chatMode),l.needToolCallConfirmation=n.needToolCallConfirmation;let c=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,u=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:b$(c),d=f$({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});l=await i.addTurn(o.id,l,n.references,d,c,u,n.ignoredSkills,n.confirmationResponse);let p=DR(n),m=t.get(Gu).add(p.progressToken,e),h=new kb(t,o,l,m);return await(await t.get(Py).createProcessor(h,p.progressToken,n.computeSuggestions)).process(p,m,n.followUp,r,n.model),[{conversationId:o.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:n.model},null]}s(wFt,"handleConversationTurnChecked");var QGe=st(TFt,wFt);f();var _Ft=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(bp)});async function SFt(t,e,n){t.get(Gi).deleteTurn(n.conversationId,n.turnId);let i=rv(n.source),o=await fc(t,t.get(Gi).findByTurnId(n.turnId),{languageId:""});return v0(t,void 0,{messageId:n.turnId,uiKind:i,conversationId:n.conversationId},{},`${wu(i)}.messageDelete`,o),["OK",null]}s(SFt,"handleConversationTurnDeleteChecked");var OGe=To(st(_Ft,SFt));f();var RFt=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function kFt(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(kFt,"buildSystemMessage");function BFt(t){let n=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),r=t.selection.start.line+1,i=t.selection.end.line+1,o=n.map((a,l)=>{let c=t.selection.start.line+l+1;return`/* ${c>r&&c<i?"Selected ":""}Line ${c} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${r} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(BFt,"buildUserMessage");function DFt(t,e){let n=[],r=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,l,c,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(c)-1;if(h<0||h>=r.length)continue;let g=r[h],y=Math.max(g.search(/\S/),0),v=g.trimEnd().length,b={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:v}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};n.push(b)}return n}s(DFt,"parseReviewComments");async function PFt(t,e,n){if(!n.document.text)return[null,{code:$n.InvalidRequest,message:"Document text is required"}];if(!n.document.uri)return[null,{code:$n.InvalidRequest,message:"Document URI is required"}];if(!n.document.languageId)return[null,{code:$n.InvalidRequest,message:"Document language ID is required"}];let r=n.document.text.split(`
`);if(n.selection.start.line<0||n.selection.end.line>=r.length)return[null,{code:$n.InvalidRequest,message:"Invalid selection range"}];if(n.selection.start.line>n.selection.end.line)return[null,{code:$n.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(Js),o=await Co.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:kFt()},{role:"user",content:BFt(n)}],l=await t.get(Nt).updateExPValuesAndAssignments(),c=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Od.user("code-review",an())},e,l);if(c.type!=="success")return[null,{code:$n.InternalError,message:"Failed to generate code review"}];let u=DFt(n.document,c.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(PFt,"handleCopilotCodeReviewChecked");var UGe=To(st(RFt,PFt));f();f();var Bb=class{constructor(e,n,r,i,o){this.ctx=e;this.editConversation=n;this.currentTurn=r;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of r.workingSet)this.workingSetUriToPathMap.set(a.uri,ly.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[n,r]of this.workingSetUriToPathMap)if(r===e)return n}toLlmInteraction(){return Od.user("conversation-edit-panel",this.editTurnId)}};f();async function I$(t,e,n,r){let o=t.get(tl).create("panel","en"),a=new eb({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",c=new Bb(t,o,a,r,Sr.Gpt4o),u=t.get(yc);await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(I$,"streamMockedResult");f();var NFt=I.Object({enableMock:I.Boolean()}),bA=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function LFt(t,e,n){return t.get(bA).setMockEnabled(n.enableMock),["OK",null]}s(LFt,"handleTestingSetCopilotEditsResponseChecked");var qGe=st(NFt,LFt);var FFt=I.Object({request:I.String(),response:I.Optional(I.String())}),MFt=I.Union([I.Literal("panel")]),QFt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(FFt,{minItems:1}),workingSet:I.Optional(I.Array(H9)),source:I.Optional(MFt),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function OFt(t,e){let n=t.create(e.source,e.userLanguage);for(let r of e.turns){let i=new eb({message:r.request,type:"user"},e.workingSet);r.response&&(i.response={message:r.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(n.id,i)}return n}s(OFt,"buildEditConversation");async function UFt(t,e,n){if(t.get(bA).isMockEnabled())return await I$(t,an(),an(),n.partialResultToken),[[],null];let r=OFt(t.get(tl),n),i=r.getLastTurn(),o=new Bb(t,r,i,n.partialResultToken,n.model),a=t.get(Gu).add(n.partialResultToken,e);return[await t.get(cy).createOrContinueEditConversation(o,a),null]}s(UFt,"handleEditConversationCreateChecked");var WGe=To(st(QFt,UFt));f();var qFt=I.Object({editConversationId:I.String()});function WFt(t,e,n){return t.get(tl).destroy(n.editConversationId),["OK",null]}s(WFt,"handleEditConversationDestroyChecked");var GGe=To(st(qFt,WFt));f();var GFt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(H9)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function HFt(t,e,n){let r=t.get(e),i=new eb({message:n.message,type:"user"},n.workingSet);return n.workspaceFolder&&(i.workspaceFolder=n.workspaceFolder),t.addTurn(r.id,i),r}s(HFt,"buildEditConversation");async function jFt(t,e,n){if(t.get(bA).isMockEnabled())return await I$(t,n.editConversationId,an(),n.partialResultToken),[[],null];let r=t.get(tl),i=HFt(r,n.editConversationId,n),o=i.getLastTurn(),a=new Bb(t,i,o,n.partialResultToken,n.model),l=t.get(Gu).add(n.partialResultToken,e);return[await t.get(cy).createOrContinueEditConversation(a,l),null]}s(jFt,"handleEditConversationTurnChecked");var HGe=To(st(GFt,jFt));f();var VFt=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(bp)});async function $Ft(t,e,n){t.get(tl).deleteTurn(n.editConversationId,n.editTurnId);let i=await F8(t,n.editTurnId,n.editConversationId,{languageId:""});return v0(t,void 0,{messageId:n.editTurnId,uiKind:"editsPanel",conversationId:n.editConversationId},{},`${wu("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s($Ft,"handleEditConversationTurnDeleteChecked");var jGe=To(st(VFt,$Ft));f();var zFt=I.Object({}),YFt=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(kP)}))}))});function KFt(t,e,n){return[t.get(M0).getAllTools(),null]}s(KFt,"handleGetMCPToolsChecked");function JFt(t,e,n){for(let{name:i,tools:o}of n.servers)for(let{name:a,status:l}of o)t.get(M0).updateMCPToolStatus(i,a,l);return[t.get(M0).getAllTools(),null]}s(JFt,"handleUpdateMCPToolsStatusChecked");var VGe=st(zFt,KFt),$Ge=st(YFt,JFt);f();var XFt=I.Object({});async function ZFt(t,e,n){let r=await t.get(Mn).getToken();return[eMt(await t.get(Cu).getMetadata(),r),null]}s(ZFt,"handleCopilotModelsChecked");function eMt(t,e){let n=e.getTokenValue("editor_preview_features")=="0",r=Nf.filterModelsWithEditorPreviewFeatures(t,n),i=[];return r.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!NEe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(eMt,"filterModels");var zGe=To(st(XFt,ZFt));f();var tMt=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function nMt(t,e,n){return n.model&&n.status==="enabled"?await t.get(Cu).acceptModelPolicy(n.model)?["OK",null]:[null,{code:$n.InternalError,message:"Failed to accept model policy"}]:[null,{code:$n.InvalidRequest,message:"Invalid model or status"}]}s(nMt,"handleCopilotModelsPolicyChecked");var YGe=To(st(tMt,nMt));f();f();var Ny=10;function KGe(t,e){let n=e,r=t.lineAt(e.line);return r.isEmptyOrWhitespace||(n=r.range.end),n}s(KGe,"panelPositionForDocument");f();var Bfe=new _t("solutions");async function*rMt(t){for await(let e of t){let n={...e};n.completionText=n.completionText.trimEnd(),yield n}}s(rMt,"trimChoices");var FR=class{constructor(e,n,r,i){this.textDocument=e;this.startPosition=n;this.cancellationToken=r;this.solutionCountTarget=i;this.targetPosition=KGe(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};function T$(t){return t.replace(/\s+/g,"")}s(T$,"normalizeCompletionText");async function iMt(t,e){let n=e.targetPosition,r=e.textDocument,i=Ux(t,r.uri),o=an(),a=or.createAndMarkAsIssued({headerRequestId:o,languageId:r.detectedLanguageId,source:"open copilot"},{});e.savedTelemetryData=await t.get(Nt).updateExPValuesAndAssignments({uri:r.uri,languageId:r.detectedLanguageId},a);let l=await C5(t,o,Tg(r,n),e.savedTelemetryData);if(l.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(l.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(l.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(l.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(l.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let c=l.prompt,u=l.trailingWs;u.length>0&&(e.startPosition=Po.position(e.startPosition.line,e.startPosition.character-u.length));let d=e.cancellationToken;e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...fS(c),solutionCount:e.solutionCountTarget,promptEndPos:r.offsetAt(n)}),Bfe.debug(t,"prompt:",c),kt(t,"solution.requested",e.savedTelemetryData);let p=t.get(gm).forLanguage(t,r.detectedLanguageId,e.savedTelemetryData),m=d0(r.detectedLanguageId),h=G8(r,n),g={language:r.detectedLanguageId,next_indent:h.next??0,prompt_tokens:c.prefixTokens??0,suffix_tokens:c.suffixTokens??0},y={};p==="parsing"&&!m&&(y.stop=[`

`,`\r
\r
`]);let v=Ox(t,e.savedTelemetryData),b={prompt:c,languageId:r.detectedLanguageId,repoInfo:i,ourRequestId:o,engineModelId:v.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:y,headers:v.headers,extra:g},E;switch(p){case"server":E=s(()=>{},"finishedCb"),g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsingandserver":E=m?W8(t,r,e.startPosition,!1):()=>{},g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsing":default:E=m?W8(t,r,e.startPosition,!1):()=>{};break}let _=e.savedTelemetryData,k=await t.get(Cd).fetchAndStreamCompletions(t,b,_.extendedBy(),E,d);if(k.type==="failed"||k.type==="canceled")return{status:"FinishedWithError",error:`${k.type}: ${k.reason}`};let D=k.choices;D=rMt(D),D=L8(D,Z=>nD(t,r,n,Z,!1,Bfe));let N=L8(D,async Z=>{let me=Z.completionText;Bfe.info(t,`Open Copilot completion: [${Z.completionText}]`);let te=await P5e(t,r,n,Z.completionText)??Po.position(n.line,0),[H]=y5(r.getText(Po.range(te,n)));me=H+me;let W=Z.completionText;u.length>0&&W.startsWith(u)&&(W=W.substring(u.length));let re=Z.meanLogProb,oe=re!==void 0?Math.exp(re):0,V=_.extendedBy({choiceIndex:Z.choiceIndex.toString()});return{completionText:W,insertText:me,range:Po.range(te,n),meanProb:oe,meanLogProb:re||0,requestId:Z.requestId,choiceIndex:Z.choiceIndex,telemetryData:V,copilotAnnotations:Z.copilotAnnotations}});return XGe(d,N[Symbol.asyncIterator]())}s(iMt,"launchSolutions");async function JGe(t,e){let n=await t;switch(n.status){case"Solution":await e.onSolution(n.solution),await JGe(n.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(n.error);break}}s(JGe,"reportSolutions");async function w$(t,e,n){return t.get(Yi).withProgress(async()=>{let i=iMt(t,e);return await JGe(i,n)})}s(w$,"runSolutions");async function XGe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let n=await e.next();return n.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:n.value,next:XGe(t,e)}}s(XGe,"generateSolutionsStream");var eHe=Ve(fx()),J9=Ve(Ta());f();f();function _$(t,e){let n=t.split(`
`),r=e,i=e,o=n[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),r={line:e.line,character:a});let l=o.indexOf("^");if(l!==-1){let c=o.indexOf("^",l+1);if(c===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,l)+o.substring(l+1,c)+o.substring(c+1),r={line:e.line,character:e.character},i={line:e.line,character:e.character+c-l-1}}return{cursorLine:o,lines:n,start:r,end:i}}s(_$,"parseChallengeDoc");var oMt=I.Object({text:I.String(),score:I.Number()}),sMt=I.Object({documents:I.Array(oMt),options:I.Optional(I.Object({}))});async function S$(t,e,n){let r=an();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:l,lines:c,start:u}=_$(o,t),d=[l.slice(Math.min(u.character,t.character))].concat(c.slice(t.line+1)).join(`
`);n.offset=c.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await n.onSolution({requestId:{headerRequestId:r,completionId:an(),created:0,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:ig.createEmptyConfigForTesting()})}await n.onFinishedNormally()}s(S$,"runTestSolutions");var sh=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function aMt(t,e,n){return t.forceSet(sh,new sh(n.documents)),["OK",null]}s(aMt,"handleTestingSetPanelCompletionDocumentsChecked");var ZGe=st(sMt,aMt);var tHe=TF.type;function lMt(t,e,n,r,i){let o=T$(r.completionText),a=(0,eHe.SHA256)(o).toString();return t.get(ns).set(a,{displayText:r.completionText,insertText:r.insertText,offset:n,uuid:a,range:r.range,uri:e.textDocument.uri,telemetry:r.telemetryData.extendedBy({},{rank:i-1}),index:r.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:r.copilotAnnotations}),{range:r.range,insertText:r.insertText,command:{command:Yde,title:`Accept completion ${i}`,arguments:[a]}}}s(lMt,"makeCompletion");function Pfe(t,e){return`${t}/${e}`}s(Pfe,"progressMessage");var Dfe=class{constructor(e,n,r){this.ctx=e;this.params=n;this.onCompletion=r;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}async onSolution(e){this.count+=1;let n=lMt(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(n.command.arguments[0])||(this.items.set(n.command.arguments[0],n),await this.onCompletion(n)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(J9.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:Pfe(this.count,Ny),percentage:Math.round(100*this.count/Ny)})}onFinishedNormally(){return cMt(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(J9.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function cMt(t,e,n=0){t!==void 0&&await e.connection.sendProgress(J9.WorkDoneProgress.type,t,{kind:"end",message:Pfe(n,Ny)})}s(cMt,"reportDone");var K9;async function uMt(t,e,n){let r=await oh(t,n.textDocument,e),i=n.position;n.workDoneToken!==void 0&&await t.get(Cn).connection.sendProgress(J9.WorkDoneProgress.type,n.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:Pfe(0,Ny),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),l=n.partialResultToken;l!==void 0&&(a=s(async d=>{await t.get(Cn).connection.sendProgress(TF.partialResult,l,{items:[d]})},"onCompletion"));let c=new Dfe(t,n,a),u=t.get(sh);if(u.documents){let d=u.documents;await S$(i,d,c)}else{c.offset=r.offsetAt(i);let d=new FR(r,i,e,Ny);await w$(t,d,c)}return c.error!==void 0?[null,{code:$n.InternalError,message:c.error}]:[{items:o},null]}s(uMt,"handleChecked");async function dMt(t,e,n){K9&&(K9.cancel(),K9.dispose()),K9=new sr.CancellationTokenSource;let r=K9.token,i=new Ud([e,r]);try{return await uMt(t,i,n)}catch(o){if(r.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:$n.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(dMt,"handleCheckedWithAbort");var nHe=st(oEe,dMt);f();f();f();function pMt(t){let e=t.get(ul).getLoginReachabilityUrl(),n=t.get(ul).getAPIUrl(),r=DF(t),i=new URL("_ping",r.proxy).href,o=new URL("_ping",r.api).href,a=new URL("_ping",r.telemetry).href;function l(c){return new URL(c).host}return s(l,"label"),[{label:l(e),url:e},{label:l(n),url:n},{label:l(i),url:i},{label:l(o),url:o},{label:l(a),url:a}]}s(pMt,"urlsToCheck");async function rHe(t){let e=pMt(t).map(async({label:n,url:r})=>{let{message:i,status:o}=await mMt(t,r);return{label:n,url:r,message:i,status:o}});return await Promise.all(e)}s(rHe,"checkReachability");async function mMt(t,e){try{let n=await t.get(rr).fetch(e,{}),r=n.status>=200&&n.status<400?"reachable":"unreachable";return{message:`HTTP ${n.status}`+(n.statusText?` - ${n.statusText}`:""),status:r}}catch(n){return{message:String(n),status:"unreachable"}}}s(mMt,"determineReachability");var Ip=Ve(require("os")),MR=Ve(require("tls"));async function iHe(t){return{sections:[hMt(t),gMt(),await yMt(t),AMt(),CMt(t),await xMt(t)]}}s(iHe,"collectDiagnostics");function oHe(t){return t.sections.map(vMt).join(Ip.EOL+Ip.EOL)}s(oHe,"formatDiagnosticsAsMarkdown");function hMt(t){return{name:"Copilot",items:{Version:lI(t),Build:Rf(t),Editor:Kd(t)["Editor-Version"]}}}s(hMt,"collectCopilotSection");function gMt(){return{name:"Environment",items:{http_proxy:Ly("http_proxy"),https_proxy:Ly("https_proxy"),no_proxy:Ly("no_proxy"),SSL_CERT_FILE:Ly("SSL_CERT_FILE"),SSL_CERT_DIR:Ly("SSL_CERT_DIR"),OPENSSL_CONF:Ly("OPENSSL_CONF")}}}s(gMt,"collectEnvironmentSection");function AMt(){return{name:"Node setup",items:{"Number of root certificates":MR.rootCertificates.length,"Operating system":Ip.type(),"Operating system version":Ip.release(),"Operating system architecture":Ip.arch(),NODE_OPTIONS:Ly("NODE_OPTIONS"),NODE_EXTRA_CA_CERTS:Ly("NODE_EXTRA_CA_CERTS"),NODE_TLS_REJECT_UNAUTHORIZED:Ly("NODE_TLS_REJECT_UNAUTHORIZED"),"tls default min version":MR.DEFAULT_MIN_VERSION,"tls default max version":MR.DEFAULT_MAX_VERSION}}}s(AMt,"collectNodeSection");async function yMt(t){let e={};try{let n=await t.get(Mn).getToken();e["Send Restricted Telemetry"]=n.getTokenValue("rt")==="1"?"enabled":"disabled",e.Chat=n.envelope?.chat_enabled?"enabled":void 0,e["Content exclusion"]=n.envelope?.copilotignore_enabled?"enabled":"unavailable"}catch{}return Object.keys(e).forEach(n=>e[n]===void 0&&delete e[n]),{name:"Feature Flags",items:e}}s(yMt,"collectFeatureFlagsSection");function CMt(t){let e=t.get(rr);return{name:"Network Configuration",items:{"Proxy host":e.proxySettings?.host,"Proxy port":e.proxySettings?.port,"Kerberos SPN":e.proxySettings?.kerberosServicePrincipal,"Reject unauthorized":e.rejectUnauthorized?"enabled":"disabled",Fetcher:e.name}}}s(CMt,"collectNetworkConfigSection");async function xMt(t){return{name:"Reachability",items:Object.fromEntries((await rHe(t)).map(({label:n,status:r,message:i})=>[n,i]))}}s(xMt,"collectReachabilitySection");function Ly(t){let e=Object.keys(process.env).find(n=>n.toLowerCase()===t.toLowerCase());return e?process.env[e]:void 0}s(Ly,"findEnvironmentVariable");function vMt(t){return`## ${t.name}`+Ip.EOL+Ip.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"n/a"}`).join(Ip.EOL)}s(vMt,"formatSectionAsMarkdown");var bMt=I.Object({});async function EMt(t){return[{report:oHe(await iHe(t))},null]}s(EMt,"handleDiagnosticsChecked");var sHe=st(bMt,EMt);f();f();f();f();function aHe(t,e,n){function r(o,a,l){let c=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(c,""),p=u.length-d.length;return l(p)+d}).join(`
`)}s(r,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>r(a," ",l=>"	".repeat(Math.floor(l/i))+" ".repeat(l%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>r(a,"	",l=>" ".repeat(l*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),n){let a=s(l=>{if(l==="")return l;let c=l.split(`
`)[0],u=c.length-c.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return r(l,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return l},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(aHe,"normalizeIndentCharacter");function lHe(t,e,n,r,i,o,a){let l=r.lineAt(i),c=e.map(u=>{let d=Po.range(Po.position(i.line,0),Po.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=aHe(o,u.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(l.text)))p=u.completion.completionText;else{let h=Po.range(d.start,i);p=r.getText(h)+u.completion.displayText}return{uuid:an(),insertText:p,range:d,uri:r.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:r.offsetAt(i),resultType:n,copilotAnnotations:u.copilotAnnotations}});if(n===2&&a!==void 0){let u=c.find(d=>d.index===a);if(u){let d=c.filter(p=>p.index!==a);c=[u,...d]}}return c}s(lHe,"completionsFromGhostTextResults");async function Nfe(t,e,n,r={}){let i=0;r.selectedCompletionInfo?.text&&!r.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(r.selectedCompletionInfo),i=e.position.character-r.selectedCompletionInfo.range.end.character);let o=await yie(t,e,n,r);if(o.type!=="success")return o;let[a,l]=o.value;if(n?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let c=WRe(t,e.textDocument,e.position,l),u=lHe(t,a,l,e.textDocument,e.position,r.formattingOptions,c);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let d=u.map(p=>{let{start:m,end:h}=p.range,g=sr.Range.create(m,sr.Position.create(h.line,h.character-i));return{...p,range:g}});return{...o,value:d}}s(Nfe,"getInlineCompletionsResult");async function R$(t,e,n,r,i={}){IMt(t,e,n);let o=await Nfe(t,Tg(e,n),r,i);return u5e(t,o)}s(R$,"getInlineCompletions");function IMt(t,e,n){let r=e.getText({start:{line:Math.max(n.line-1,0),character:0},end:n}),i=e.getText({start:n,end:{line:Math.min(n.line+2,e.lineCount-1),character:e.lineCount-1>n.line?0:n.character}});WO.debug(t,`Requesting for ${e.uri} at ${n.line}:${n.character}`,`between ${JSON.stringify(r)} and ${JSON.stringify(i)}.`)}s(IMt,"logCompletionLocation");var mHe=Ve(Ta());f();var cHe=require("crypto");var QR=class{static{s(this,"LspClientContextProvider")}constructor(e,n,r){this.id=n,this.selector=r,this.resolver=new Ffe(e,this.id)}},Ffe=class{constructor(e,n){this.ctx=e;this.id=n;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,n){let r=[];if(this.contextItems.length>0)r=this.contextItems;else if(this.update){let i=this.ctx.get(Cn),o=(0,cHe.randomUUID)(),a=i.connection.onProgress(bF.type,o,l=>{r.push(...l)});n.onCancellationRequested(()=>{a?.dispose()});try{let l=await i.connection.sendRequest(bF.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},n);r.push(...l)}finally{a?.dispose()}}return this.reset(),Promise.resolve(r)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function OR(t,e,n){try{let r=t.get(Ra),i=new Map;r.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof QR&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof QR&&(a.resolver.setUpdate(!0),a.resolver.data=n)})}catch(r){Wn.error(t,"Failed to set context items on context providers",r)}}s(OR,"setContextItems");var Lfe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function uHe(t,e,n){return e.map(i=>{try{if(typeof i=="string")return Sa(n.uri,i,Lfe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=n.languageId==(i.language||"")),"scheme"in i&&(o&&=Sa(n.uri,i.scheme||"",Lfe)),"pattern"in i&&(o&&=Sa(n.uri,i.pattern||"",Lfe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(uHe,"match");f();var TMt=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),Db=class{constructor(e,n){this.documents=e;this.basename=n}static{s(this,"ExternalTestingCompletionDocuments")}};function wMt(t,e,n){return t.forceSet(Db,new Db(n.documents,n.basename||"")),["OK",null]}s(wMt,"handleTestingSetCompletionDocumentsChecked");var dHe=new _t("setCompletionDocuments"),pHe=st(TMt,wMt);function k$(t,e,n,r){let i=t.get(Db);if(i.documents){let o=r?3:1;if(n&&i.basename&&i.basename.trim().length>0){dHe.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=_Mt(i,n);return a&&a.length>0?fHe(a,o,e):void 0}else return dHe.debug(t,"Returning completions for all pre-set documents"),fHe(i.documents,o,e)}}s(k$,"getTestCompletions");function fHe(t,e,n){return t.slice(0,e).map(r=>{let{cursorLine:i,lines:o,start:a,end:l}=_$(r,n);return{insertText:[i.slice(Math.min(a.character,n.character))].concat(o.slice(n.line+1)).join(`
`),range:{start:a,end:l}}})}s(fHe,"sliceAndMapCompletions");function _Mt(t,e){return t.basename===Ti(e)?t.documents||[]:[]}s(_Mt,"getFilteredDocs");var hHe=I.Object({doc:I.Object({position:kl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:_B,version:I.Number()}),contextItems:I.Optional(Cre)}),X9;async function gHe(t,e,n,r){X9&&(X9.cancel(),X9.dispose()),X9=new sr.CancellationTokenSource;let i=new Ud([e,X9.token]);n.contextItems&&OR(t,n.contextItems);let o=k$(t,n.doc.position,n.doc.uri,r);if(o)return[{completions:o.map(m=>({uuid:an(),text:m.insertText,displayText:m.insertText,position:n.doc.position,range:m.range,docVersion:n.doc.version}))},null];let a;try{a=await oh(t,n.doc,i)}catch(p){if(!(p instanceof mHe.ResponseError))throw p;switch(p.code){case $n.CopilotNotAvailable:case $n.ContentModified:return[{completions:[]},null]}throw p}let l=n.doc.position,c=await R$(t,a,l,i,{isCycling:r,formattingOptions:n.doc});if(!c)return[{completions:[]},null];let u=t.get(ns);for(let p of c)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:c.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(gHe,"handleGetCompletionsHelper");var AHe=st(hHe,(t,e,n)=>gHe(t,e,n,!1)),yHe=st(hHe,(t,e,n)=>gHe(t,e,n,!0));f();var CHe=Ve(fx()),UR=Ve(Ta());var SMt=I.Object({doc:I.Object({position:kl,uri:_B,version:I.Number()}),panelId:I.String()});function RMt(t,e,n,r,i){let o=T$(i.completionText),a=(0,CHe.SHA256)(o).toString();return t.get(ns).set(a,{displayText:i.insertText,insertText:i.completionText,offset:r,uuid:a,range:n,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:n.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations}),{panelId:e.panelId,range:n,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(RMt,"makeSolution");var Mfe=class{constructor(e,n,r){this.ctx=e;this.params=n;this.range=r;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}onSolution(e){return this.service.connection.sendNotification(new UR.NotificationType("PanelSolution"),RMt(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return xHe(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new UR.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function xHe(t,e){return e.connection.sendNotification(new UR.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(xHe,"reportDone");var Z9;async function kMt(t,e,n){Z9&&(Z9.cancel(),Z9.dispose()),Z9=new sr.CancellationTokenSource;let r=new Ud([e,Z9.token]),i=n.doc.position,o=Po.range(i,i),a=new Mfe(t,n,o),l=t.get(sh);if(l.documents){let c=l.documents;S$(i,c,a)}else{let c;try{c=await oh(t,n.doc,r)}catch(d){if(!(d instanceof UR.ResponseError))throw d;switch(d.code){case $n.CopilotNotAvailable:case $n.ContentModified:return BMt(t,n)}throw d}a.offset=c.offsetAt(i);let u=new FR(c,i,r,Ny);w$(t,u,a)}return[{solutionCountTarget:Ny},null]}s(kMt,"handleGetPanelCompletionsChecked");async function BMt(t,e){return await xHe(e.panelId,t.get(Cn)),[{solutionCountTarget:0},null]}s(BMt,"produceEmptySolutions");var vHe=st(SMt,kMt);f();var DMt=I.Object({});function PMt(t,e,n){return[{version:t.get(co).getDisplayVersion(),buildType:Rf(t),runtimeVersion:`node/${process.versions.node}`},null]}s(PMt,"handleGetVersionChecked");var bHe=st(DMt,PMt);f();var NMt=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function LMt(t,e){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&n.push(`
Current git branch name: ${e}`),t&&n.push(`
Respond in the following locale: ${t}`),n.join(`
`)}s(LMt,"buildSystemMessage");function FMt(t,e){let n=[];return t.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(r=>`- ${r}`).join(`
`),""),t.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(r=>`- ${r}`).join(`
`),""),n.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&n.push("<custom-instructions>",e,"</custom-instructions>"),n.join(`
`)}s(FMt,"buildUserMessage");async function MMt(t,e,n){if(n.changes.length===0)return[null,{code:$n.InvalidRequest,message:"No changes provided"}];let r=new Js(t),i=await Co.getModelConfiguration(t,"gitCommit"),o=[{uri:n.workspaceFolder?n.workspaceFolder:cl(process.cwd())}],a=await Jg.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),l=t.get(Gi),c=l.create({capabilities:{skills:[hA]}}),u=new Eb({message:"",type:"user"});await l.addTurn(c.id,u);let d=DR({workDoneToken:an()});await t.get(Is).begin(c,u,d);let h=(await new kb(t,c,u,e).skillResolver.resolve(hA))?.head?.name,g=[{role:"system",content:await LMt(n.userLanguage,h)},{role:"user",content:FMt(n,a)}],y=await t.get(Nt).updateExPValuesAndAssignments(),v=await r.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Od.user("git-commit",an())},e,y);if(v.type!=="success")return[null,{code:$n.InternalError,message:"Failed to generate commit message"}];let b=v.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:b?b[1].trim():v.value.trim()},null]}s(MMt,"handleGitCommitGenerateChecked");var EHe=To(st(NMt,MMt));f();var THe=nee.type,e6;function IHe(t){return{title:"Completion Accepted",command:S9,arguments:[t]}}s(IHe,"makeCommand");async function QMt(t,e,n){e6&&(e6.cancel(),e6.dispose());let r=n.context.triggerKind===1;e6=new sr.CancellationTokenSource;let i=e6.token,o=new Ud([e,i]);n.contextItems&&OR(t,n.contextItems,n.data);let a=k$(t,n.position,n.textDocument.uri,r);if(a)return[{items:a.map(h=>({command:IHe(an()),...h}))},null];let l=await oh(t,n.textDocument,o),c=n.position,u=await R$(t,l,c,o,{isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(!u)return e.isCancellationRequested?[null,{code:$n.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:$n.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(ns);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:IHe(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(QMt,"handleChecked");var wHe=st(VO,(t,e,n)=>QMt(t,e,n));f();var _He=oee.type,t6;async function UMt(t,e,n){t6&&(t6.cancel(),t6.dispose());let r=n.context.triggerKind===1;t6=new sr.CancellationTokenSource;let i=t6.token,o=new Ud([e,i]);n.contextItems&&OR(t,n.contextItems);let a=await oh(t,n.textDocument,o),l=await Nfe(t,Tg(a,n.position),o,{promptOnly:!0,isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}s(UMt,"handleChecked");var SHe=st(VO,(t,e,n)=>UMt(t,e,n));f();f();function Qfe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,n=t.indexOf("-----END CERTIFICATE-----"),r=30,i=t.substring(e,e+r)+"..."+t.substring(n-r,n-1);return qR(i)}s(Qfe,"asReadableCert");function qR(t){return t.replace(/\s/g,"")}s(qR,"normalizeNewlines");var WMt=I.Object({});async function GMt(t){return[{certificates:(await t.get(el).getAllRootCAs()).map(qR)},null]}s(GMt,"handleListCertificatesChecked");var RHe=st(WMt,GMt);f();async function HMt(t,e,n){let r=t.get(Zm);if(n.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Bl(n.textDocument.uri);t.get(vg).onUserPositionChange(i,new ir(n.position.line,n.position.character));let o=await r.handleNextEditRequest(i,n.textDocument.version,e);return o?[{edits:o.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:S9,arguments:[l.id]}}))},null]:[{edits:[]},null]}s(HMt,"handleChecked");var kHe=st(rEe,HMt);f();var jMt=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function VMt(t,e,n){let r=t.get(ns),i=r.get(n.uuid);if(i){r.delete(n.uuid);let o=$Mt(n,i);s2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(VMt,"notifyAcceptedChecked");function $Mt(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s($Mt,"getSuggestionStatus");var BHe=st(jMt,VMt);f();var zMt=I.Object({uuids:I.Array(I.String())});function YMt(t,e,n){let r=t.get(ns),i=n.uuids.flatMap(o=>r.get(o)??[]);if(i.length>0){let o=i[0];for(let l of n.uuids)r.delete(l);let a=i.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));WU(t,"ghostText",o.offset,o.uri,a),t.get(Bu).resetState()}return["OK",null]}s(YMt,"notifyRejectedChecked");var DHe=st(zMt,YMt);f();var KMt=I.Object({uuid:I.String({minLength:1})});function JMt(t,e,n){let i=t.get(ns).get(n.uuid);return i&&GO(t,i.triggerCategory,i),["OK",null]}s(JMt,"notifyShownChecked");var PHe=st(KMt,JMt);f();var XMt=x5e;function ZMt(t,e,n){let r=t.get(Ra),i={unregistered:[],registered:[]};return n.providers.forEach(o=>{try{let a=new QR(t,o.id,o.selector);r.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(ZMt,"registerContextProviders");var NHe=st(XMt,ZMt);f();f();var LHe=require("net");function Ofe(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(Ofe,"getProxyFromEnvironment");function eQt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(eQt,"getRejectUnauthorizedFromEnvironment");var FHe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function MHe(t){let n={proxy:Ofe(t),proxyStrictSSL:eQt(t)},r=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return r&&(n.proxyKerberosServicePrincipal=r),n}s(MHe,"getHttpSettingsFromEnvironment");function n6(t){(0,LHe.isIPv6)(t)?t="https://["+t+"]":/:\/\//.test(t)||(t=`https://${t}`);let{hostname:e,port:n,username:r,password:i}=new URL(t);return{host:e,port:tQt(n),proxyAuth:nQt(r,i)}}s(n6,"proxySettingFromUrl");function tQt(t){if(!t)return 80;let e=Number(t);if(isNaN(e))throw new TypeError("Invalid proxy port");return e}s(tQt,"parsePort");function nQt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(nQt,"getAuth");f();var qfe=I.Object({host:I.String(),port:I.Number(),username:I.Optional(I.String()),password:I.Optional(I.String()),rejectUnauthorized:I.Optional(I.Boolean())}),rQt=I.Object({uri:I.Optional(I.String())}),iQt=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),OHe=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),"github-enterprise":I.Optional(rQt),http:I.Optional(FHe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),Wfe=Object.keys(OHe.properties).filter(t=>t!=="github"),oQt=I.Intersect([OHe,iQt]),sQt=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),networkProxy:I.Optional(qfe),authProvider:I.Optional(I.Never())}),QHe=ds.Compile(sQt),Ufe=ds.Compile(oQt);async function UHe(t,e){if(!QHe.Check(e))throw new xc(QHe.Errors(e));let n=Array.isArray(e.settings)?{}:e.settings;n&&await Gfe(t,n),e.networkProxy!==void 0&&B$(t,e.networkProxy),await r6(t,n)}s(UHe,"notifyChangeConfiguration");async function Gfe(t,e){for(let i of Ufe.Errors(e)){let o=i.path.split("/")?.[1];Ec.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!Ufe.Check(e))throw new xc(Ufe.Errors(e));let n=t.get(j0);n.setConfig(mt.ShowEditorCompletions,e.showEditorCompletions),n.setConfig(mt.DelayCompletions,e.delayCompletions),n.setConfig(mt.EnableAutoCompletions,e.enableAutoCompletions),n.setConfig(mt.FilterCompletions,e.filterCompletions),e.http&&Hfe(t,e.http);let r=e["github-enterprise"];r&&(t.get(ul).updateBaseUrl(t,r.uri),t.get(dr).updateEnterpriseConfig(t,r)),e.github?.copilot&&await aQt(t,e.github.copilot)}s(Gfe,"applySettingsToConfiguration");async function aQt(t,e){let n=t.get(j0);for(let r of Object.values(mt)){let i=ZIe(e,r);n.setConfig(r,i)}e.mcp?await uQt(t,e.mcp):await dQt(t),e.globalCopilotInstructions&&lQt(t,e.globalCopilotInstructions),e.globalGitCommitInstructions&&cQt(t,e.globalGitCommitInstructions)}s(aQt,"applyCopilotConfiguration");function lQt(t,e){try{t.get(Yg).setGlobalCopilotInstructions(e)}catch(n){Ec.error(t,"Failed to apply global Copilot instructions configuration",n)}}s(lQt,"applyGlobalCopilotInstructionsConfiguration");function cQt(t,e){try{t.get(Yg).setGlobalGitCommitInstructions(e)}catch(n){Ec.error(t,"Failed to apply global Git commit instructions configuration",n)}}s(cQt,"applyGlobalGitCommitInstructionsConfiguration");function Hfe(t,e){let n=t.get(j0),r=t.get(rr);if(e.proxy===void 0&&(e=MHe(n.env)),r.rejectUnauthorized=e?.proxyStrictSSL,!e.proxy){r.proxySettings=void 0;return}try{r.proxySettings=n6(e.proxy),e.proxyAuthorization&&(r.proxySettings.proxyAuth=e.proxyAuthorization),e.proxyKerberosServicePrincipal&&(r.proxySettings.kerberosServicePrincipal=e.proxyKerberosServicePrincipal)}catch(i){if(!(i instanceof TypeError))throw i;Ec.warn(t,"Invalid proxy URL",e.proxy,i),r.proxySettings=void 0}}s(Hfe,"applyHttpConfiguration");function B$(t,e){if(!e){t.get(rr).proxySettings=void 0,t.get(rr).rejectUnauthorized=void 0;return}let n;e.username&&(e.password?n=e.username+":"+e.password:n=e.username),t.get(rr).proxySettings={host:e.host,port:e.port,proxyAuth:n},t.get(rr).rejectUnauthorized=e.rejectUnauthorized??!0}s(B$,"applyNetworkProxyConfiguration");async function uQt(t,e){try{let n=JSON.parse(e);await t.get(M0).updateMCPServers(n)}catch(n){Ec.error(t,"Failed to apply MCP configuration",n)}}s(uQt,"applyMCPConfiguration");async function dQt(t){await t.get(M0).updateMCPServers({})}s(dQt,"removeMCPConfiguration");async function r6(t,e){if(!t.get(Go).getCapabilities().redirectedTelemetry){let n=(e?.telemetry?.telemetryLevel??"all")==="all";await MF(t,"agent",n)}await t.get(Mn).primeToken()}s(r6,"initializePostConfigurationDependencies");var qHe=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),fQt=I.Object({editorInfo:qHe,editorPluginInfo:qHe,editorConfiguration:I.Optional(I.Object({})),networkProxy:I.Optional(qfe),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function pQt(t,e,n){t.get(ur).setEditorAndPluginInfo(n.editorPluginInfo,n.editorInfo),Dj(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),n.editorConfiguration&&await Gfe(t,n.editorConfiguration);let r=t.get(rr),i=t.get(j0).env,o=Ofe(i);if(n.editorInfo.name==="VisualStudio"){if(o)r.proxySettings=n6(o);else if(n.networkProxy){B$(t,n.networkProxy);let a=i.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.AGENT_KERBEROS_SERVICE_PRINCIPAL;r.proxySettings&&a&&(r.proxySettings.kerberosServicePrincipal??=a)}}else n.networkProxy?B$(t,n.networkProxy):o&&(r.proxySettings=n6(o));return await r6(t,n.editorConfiguration),["OK",null]}s(pQt,"handleSetEditorInfoChecked");var WHe=st(fQt,pQt);f();var mQt=I.Object({options:I.Optional(I.Object({}))});async function hQt(t,e,n){let r=t.get(dr).pendingSignIn?.status;if(r===void 0)return[null,{code:$n.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await r,[i,null]}catch(o){return[null,{code:$n.DeviceFlowFailed,message:String(o)}]}finally{t.get(dr).pendingSignIn=void 0}}s(hQt,"handleSignInConfirmChecked");var GHe=st(mQt,hQt);f();var gQt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function AQt(t,e,n){try{let r=t.get(dr),i=await r.checkAndUpdateStatus(t,{githubAppId:n.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=n.githubAppId??t.get(Ia).findAppIdToAuthenticate(),a=await t.get(UI).getToken(t,o,r.getConfiguredUrls()),l=a.waitForAuth.then(async c=>(t.get(Ia).githubAppId=o,await t.get(dr).setPersistedSession(c),await t.get(dr).checkAndUpdateStatus(t,{freshSignIn:!0})));return t.get(dr).pendingSignIn={verificationUri:a.verification_uri,status:l},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:Hj,title:"Sign in with GitHub",arguments:[]}},null]}catch(r){if(!(r instanceof ss))throw r;return[null,{code:$n.DeviceFlowFailed,message:r.message}]}}s(AQt,"handleSignInInitiateChecked");var jfe=st(gQt,AQt);f();var yQt=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function CQt(t,e,n){let r=n.githubToken,i=n.user,o=n.githubAppId;return await t.get(dr).setPersistedSession({accessToken:r,login:i,githubAppId:o}),[await t.get(dr).checkAndUpdateStatus(t),null]}s(CQt,"handleSignInWithGithubTokenChecked");var HHe=st(yQt,CQt);f();var xQt=I.Object({options:I.Optional(I.Object({}))});async function vQt(t,e,n){return await t.get(dr).deletePersistedSession(),[await t.get(dr).checkAndUpdateStatus(t),null]}s(vQt,"handleSignOutChecked");var jHe=st(xQt,vQt);f();var bQt=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),Vfe=class extends Error{constructor(n,r){super(n);this.code=r;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function EQt(t,e,n){let r=t.get(co),i=t.get(ur).getEditorPluginInfo(),o=n.properties||{},a;n.platform&&n.exception_detail&&uA.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:bJ(t),sensitive_context:{},deployed_to:r.getBuildType(),platform:n.platform,exception_detail:n.exception_detail},uA.get(i.name)),n.transaction&&(a.transaction=n.transaction),r.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let l=new Vfe(n.stacktrace??"N/A",i.name);return l.stack=void 0,ba(t,l,void 0,o,a),["OK",null]}s(EQt,"handleTelemetryExceptionChecked");var VHe=st(bQt,EQt);f();f();f();f();f();f();var $He=Ve(require("tls"));var D$=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(el)}async enhanceProxySettings(e){let n=await this.getCertificates();return{...e,ca:n}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),r=$He.createSecureContext({_vscodeAdditionalCaCerts:e}),i=r.context;for(let o of e)i.addCACert(o);return{secureContext:r,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let n=await this.#e;e.secureContext=n.secureContext,e.ca=n.certs,e.cert=n.certs}};f();var YR=Ve(lVe(),1),nzr={ALPN_HTTP2:YR.default.ALPN_HTTP2,ALPN_HTTP2C:YR.default.ALPN_HTTP2C,ALPN_HTTP1_1:YR.default.ALPN_HTTP1_1,ALPN_HTTP1_0:YR.default.ALPN_HTTP1_0},{fetch:rzr,context:cVe,reset:izr,noCache:ozr,h1:szr,keepAlive:azr,h1NoCache:lzr,keepAliveNoCache:czr,cacheStats:uzr,clearCache:dzr,offPush:fzr,onPush:pzr,createUrl:mzr,timeoutSignal:hzr,Body:gzr,Headers:uVe,Request:Azr,Response:yzr,AbortController:Z$,AbortError:ez,AbortSignal:dVe,FetchBaseError:Czr,FetchError:xzr,ALPN_HTTP2:vzr,ALPN_HTTP2C:bzr,ALPN_HTTP1_1:Ezr,ALPN_HTTP1_0:Izr}=YR.default;var KR=class extends rr{constructor(n){super();this.ctx=n;this.name="HelixFetcher";this.createSocketFactory=s((n,r)=>async i=>{i.rejectUnauthorized=r,i.timeout=n.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(n);return await this.proxySocketFactory.createSocket(i,o)},"createSocketFactory");this.fetchApi=this.createFetchApi(n),this.certificateConfigurator=new D$(n),this.proxySocketFactory=n.get($g)}static{s(this,"HelixFetcher")}set proxySettings(n){this._proxySettings=n,this.fetchApi=this.createFetchApi(this.ctx)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(n){super.rejectUnauthorized=n,this.fetchApi=this.createFetchApi(this.ctx)}get rejectUnauthorized(){return super.rejectUnauthorized}createFetchApi(n){let r=n.get(co);return super.rejectUnauthorized===!1&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0"),cVe({userAgent:`GithubCopilot/${r.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,super.rejectUnauthorized):void 0,rejectUnauthorized:super.rejectUnauthorized})}async fetch(n,r){let i=r.signal,o=!1;if(r.timeout){let u=this.makeAbortController();setTimeout(()=>{u.abort(),o=!0},r.timeout),r.signal?.addEventListener("abort",()=>u.abort()),r.signal?.aborted&&u.abort(),i=u.signal}let a={...r,body:r.body?r.body:r.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let c=await this.fetchApi.fetch(n,a).catch(u=>{throw o?new $k(`Request to <${n}> timed out after ${r.timeout}ms`,u):u});return new cx(c.status,c.statusText,c.headers,()=>c.text(),()=>c.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new Z$}};f();f();var d6=require("fs"),pVe=require("path");var JR=class extends go{static{s(this,"LocalFileSystem")}async readFileString(e){return(await d6.promises.readFile(ia(e))).toString()}async stat(e){let{targetStat:n,lstat:r,stat:i}=await this.statWithLink(ia(e));return{ctime:n.ctimeMs,mtime:n.mtimeMs,size:n.size,type:this.getFileType(n,r,i)}}async readDirectory(e){let n=ia(e),r=await d6.promises.readdir(n,{withFileTypes:!0}),i=[];for(let o of r){let{targetStat:a,lstat:l,stat:c}=await this.statWithLink((0,pVe.join)(n,o.name));i.push([o.name,this.getFileType(a,l,c)])}return i}async statWithLink(e){let n=await d6.promises.lstat(e);if(n.isSymbolicLink())try{let r=await d6.promises.stat(e);return{lstat:n,stat:r,targetStat:r}}catch{}return{lstat:n,targetStat:n}}getFileType(e,n,r){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),n.isSymbolicLink()&&r&&(i|=64),i}};f();var tz=class extends ih{constructor(n=[]){super();this._agents=n}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var nz=class extends nl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(n){this.shouldInspect()&&this.prompts.push(n)}inspectFetchResult(n){this.shouldInspect()&&this.fetchResults.push(n)}documentDiff(n){this.shouldInspect()&&this.diffs.push(n)}};f();var Tpe=class extends el{constructor(n){super();this.certificates=n}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},mVe=s(t=>new Tpe(t),"createTestCertificateReader");function Spe(t,e,n){let r=new wpe;r.set("x-github-request-id","1");for(let[i,o]of Object.entries(n||{}))r.set(i,o);return new cx(t,"status text",r,()=>Promise.resolve(e??""),()=>null)}s(Spe,"createFakeResponse");function hVe(t,e,n){let r;return typeof e=="string"?r=e:r=JSON.stringify(e),Spe(t,r,Object.assign({"content-type":"application/json"},n))}s(hVe,"createFakeJsonResponse");var f6=class extends rr{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}makeAbortController(){return new _pe}};var rz=class extends f6{static{s(this,"NoFetchFetcher")}fetch(e,n){throw new Error("NoFetchFetcher does not support fetching")}};var wpe=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,n){this.headers.set(e.toLowerCase(),n)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,n){this.headers.set(e.toLowerCase(),n)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}},_pe=class{constructor(){this.signal={aborted:!1,addEventListener:s(()=>{},"addEventListener"),removeEventListener:s(()=>{},"removeEventListener")}}static{s(this,"FakeAbortController")}abort(){this.signal.aborted=!0}};f();function mqt(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(mqt,"fakeChatModelConfiguration");function hqt(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(hqt,"fakeEmbeddingModelConfiguration");var iz=class extends Xs{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let n=e[0];return Promise.resolve(mqt(n))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(hqt(e))}};f();var oz=class extends cc{constructor(){super(...arguments);this.openedUrls=[];this.opened=new hg}static{s(this,"TestUrlOpener")}open(n){return this.openedUrls.push(n),this.opened.resolve(),Promise.resolve()}},sz=class extends ja{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(n){this.actionToPerform=n}showWarningMessage(n,...r){this.sentMessages.push(n);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=r.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=r?Promise.resolve(r[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function gVe(t,e,n,r){return S1.create(AEe(t),e,n,r,e)}s(gVe,"createTextDocument");var Rpe=class extends kn{constructor(n){super(n);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(n){this._workspaceFolders=n.map(r=>({uri:r.uri,name:r.name??Ti(r.uri)}))}async readTextDocumentFromDisk(n){return super.readTextDocumentFromDisk(n)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(n,r,i){let o=gVe(n,r,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(n,r){let i=this._openTextDocuments.findIndex(a=>a.uri===n.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=gVe(n,o.clientLanguageId,o.version+1,r)}setNotebookDocument(n,r){this._notebookDocuments.set(n.uri.replace(/#.*/,""),r)}findNotebook({uri:n}){return this._notebookDocuments.get(n.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(n){switch(n.eventName){case"focus":this._focusSubscribers.forEach(r=>r(n.args));break;case"change":this._changeSubscribers.forEach(r=>r(n.args));break;case"open":this._openSubscribers.forEach(r=>r(n.args));break;case"close":this._closeSubscribers.forEach(r=>r(n.args));break}}},az=class extends Rpe{constructor(n){super(n);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(n){return Promise.resolve(this.contents.get(n))}setDiskContents(n,r){this.contents.set(n,r)}};var kpe=class extends Ha{static{s(this,"NullLog")}logIt(...e){}};function gqt(t){let e=new $S;return e.set(ug,t),e.set(CI,t),e.set(co,new co),e.set(yf,new yf({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(el,mVe([])),e.set($g,TG(e)),e.set(sg,new sg),e.set(fm,new UF),e.set(a0,new a0),e.set(zh,new zh),e.set(rc,new rc(e,"tid=test",!0)),e.set(Rl,new Rl),e.set(ja,new sz),e.set(cc,new oz),e.set(og,new b5),e.set(Ha,new kpe),e.set(yu,new yu),e.set(Rs,new Rs("test-session","test-machine")),e.set(ul,new M4(e)),e.set(c0,new c0),MF(e,"copilot-test",!0),e.set(Nt,new Nt(e)),e.set(Im,new Im),e.set(gm,new vS),e.set(Mn,new Fb("tid=test")),e.set(Yi,new QF),e.set(ya,new ya),e.set(mg,new mg(e)),e.set(Ql,new Ql(e)),e.set(Rm,QU(e)),e.set(Bu,new Bu),e.set(Zf,new Zf),e.set(G1,G1.default),e.set(N0,new N0),e.set(Nf,new Nf(e,!1)),e.set(Ia,new Ia),e.set(Cr,new Cr(e)),e.set(A0,new lO),e.set(Pl,new Pl),e.set(Ra,zO(e,async(n,r,i)=>r.find(o=>o==="*")?1:r.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(Yf,new Yf(e)),Aqt(e),e.set(Ad,new Ad(e)),e.set(Go,new Go),e}s(gqt,"_createBaselineContext");function Aqt(t){t.set(Gi,new Gi(t)),t.set(Is,new Is(t)),t.set(bc,new bc(t)),t.set(gl,new gl),t.set(Yl,new Yl),t.set(nl,new nz),t.set(Ep,new Ep(t,[])),t.set(Xs,new iz),t.set(ih,new tz),t.set(pA,new pA(t)),t.set(Ib,new Ib),t.set(fa,new fa(t)),t.set(vc,new vc),t.set($0,new $0)}s(Aqt,"registerConversation");function AVe(){let t=gqt(new CI(new bS,new Map));return t.set(rr,new rz),t.set(ur,new Bpe),t.set(kn,new az(t)),t.set(go,new JR),t.set(jc,new jc(t)),t.set(tl,new tl(t)),t.set(yc,new kG(t)),t.set(Vf,new Vf(t)),t.set(gg,new i5),t.set(Hm,new OG),Aj(t),t}s(AVe,"createLibTestingContext");var Bpe=class extends ur{constructor(n={name:"lib-tests-plugin",version:"2"},r={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=n;this.editorInfo=r;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var CVe=Ve(require("fs"));var yVe=`${process.env.HOME}/.copilot-testing-gh-token`,lz,cz;async function xVe(t){t.forceSet(Mn,new Fb(await yqt()))}s(xVe,"setTestingCopilotTokenManager");var yqt=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return process.env.GH_COPILOT_IDE_TOKEN;let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return t;if(cz)return cz;let e=t||process.env.GITHUB_COPILOT_TOKEN||await Cqt(),n=AVe(),r=new KR(n);return n.forceSet(rr,r),cz=NF(n,{...mS({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.envelope.token;throw new ss('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),cz},"getCopilotToken");async function Cqt(){try{lz??=(await CVe.promises.readFile(yVe)).toString().trim()}catch{lz??=process.env.GITHUB_TOKEN??""}if(!lz)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${yVe}. Run "npm run get_token" to get one.`);return lz}s(Cqt,"getTestingGitHubToken");function vVe(t){return new x1({token:`test token ${an()}`,refresh_in:0,expires_at:0,...t},void 0)}s(vVe,"createTestCopilotToken");var Dpe=class extends Mn{constructor(n){super();this.copilotToken=n;this.wasReset=!1;this.ghSession=bVe()}static{s(this,"FakeCopilotTokenManagerFromCopilotToken")}async getGitHubSession(){return Promise.resolve(this.ghSession)}getToken(){return Promise.resolve(this.copilotToken)}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},uz=class extends Dpe{static{s(this,"TestCopilotTokenManager")}constructor(e){super(vVe(e))}},Fb=class extends uz{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};function bVe(t={}){return{accessToken:an(),...t,...mS(t)}}s(bVe,"testGitHubSession");var dz=class extends dr{static{s(this,"NotAuthManager")}constructor(){super(null,null,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},XR=class extends dr{constructor(n=new Fb("tid=valid-copilot-token"),r=""){super(null,n,{});this.githubAppId=r}static{s(this,"AlwaysAuthManager")}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};var xqt=I.Object({options:I.Optional(I.Object({}))});async function vqt(t,e,n){return t.forceSet(dr,new XR),t.get(Mn).resetToken(),t.get(Yi).forceNormal(),await new Promise(r=>setTimeout(r,0)),["OK",null]}s(vqt,"handleTestingAlwaysAuthChecked");var EVe=st(xqt,vqt);f();var bqt=I.Object({messages:I.Array(I.Object({role:I.Enum(ml),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(Sr)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function Eqt(t,e,n){let r=new Js(t),i=await t.get(Xs).getBestChatModelConfig([n.modelFamily??Sr.CopilotBase]),o=await F8(t,"","");return[await r.fetchResponse({modelConfiguration:i,messages:n.messages,uiKind:"conversationIntegrationTest",stop:n.stop,intentParams:{intent:!0},llmInteraction:Od.user("test",an())},e,o),null]}s(Eqt,"handleChatMLChecked");var IVe=To(st(bqt,Eqt));f();f();var TVe=require("crypto"),wVe=require("http"),_Ve=require("stream"),SVe=require("util"),e3=Ve(xm());var Iqt=9e4,Tqt=new e3.ProtocolRequestType("copilot/fetch"),wqt=new e3.ProtocolRequestType("copilot/fetchCancel"),_qt=new e3.ProgressType,Sqt=new e3.ProtocolRequestType("copilot/fetchDisconnectAll"),EA=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},ZR=class extends rr{constructor(n){super();this.ctx=n;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${n.get(co).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Cn).connection.sendRequest(Sqt,{})}makeAbortController(){return new Z$}async fetch(n,r){r.headers||={},r.headers["user-agent"]=this.userAgent;let{signal:i}=r,o=this.ctx.get(Cn).connection,a=(0,TVe.randomUUID)(),l=new sr.CancellationTokenSource,c=new _Ve.PassThrough,u=s(()=>{o.sendRequest(wqt,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{c.emit("error",new ez("EditorFetch request aborted")),c.end()},"destroyBodyStream");if(i){if(!(i instanceof dVe))throw new EA("EditorFetcher received unexpected abort signal");if(i.aborted)throw new ez("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(_qt,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&c.emit("error",new EA(m.error)),c.end()):m.kind==="report"&&c.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new EA("Request timed out from lsp server"))},r.timeout??Iqt),y=s(()=>{h(new ez("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(Tqt,kqt(n,a,r),l.token).then(m).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,SVe.inspect)(v.data)}`),h(new EA(b))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new EA("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new cx(p.status,wVe.STATUS_CODES[p.status]??"",new uVe(p.headers),()=>Rqt(c),()=>c)}};function Rqt(t){return new Promise((e,n)=>{let r="";t.on("error",n),t.on("end",()=>e(r)),t.on("data",i=>r+=String(i))})}s(Rqt,"consumeStream");function kqt(t,e,n){let{timeout:r,method:i}=n,o=n.headers??{},a=n.json?JSON.stringify(n.json):n.body;return n.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:r,method:i,workDoneToken:e}}s(kqt,"convertOptionsToParams");var Bqt=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function Dqt(t,e,n){let r=new ZR(t),i=r.makeAbortController(),o=i.signal,{url:a,cancelBeforeRequest:l,cancelAfterRequest:c,cancelAfterFirstChunk:u,...d}=n;l&&i.abort();let p=r.fetch(a,{signal:o,...d});c&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof EA?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let v=m.body();for await(let b of v){let E=b.toString();return i.abort(),[{status:h,headers:g,body:E},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof EA?y.message:String(y)}`},null]}}s(Dqt,"handleTestingFetchChecked");var RVe=st(Bqt,Dqt);f();var Pqt=I.Object({});async function Nqt(t,e,n){return await t.get(ya).flush(),["OK",null]}s(Nqt,"handleTestingFlushPromiseQueueChecked");var kVe=st(Pqt,Nqt);f();var Lqt=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function Fqt(t,e,n){try{await t.get(aA).start();let r=t.get(uT),i=n.timeout??1e3,o=Date.now(),a=[],l=!0;for(;l;)try{a=await r.indexClient.getContext(n.filePath,n.code,n.offset,n.languageId,q8,e)}catch{}finally{l=(n.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(Fqt,"handleTestingGetContextChecked");var BVe=st(Lqt,Fqt);f();var Mqt=I.Object({uri:I.String()});async function Qqt(t,e,n){let i=await t.get(kn).getTextDocument(n);return[{uri:n.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(Qqt,"handleGetDocumentChecked");var DVe=st(Mqt,Qqt);f();var Oqt=I.Object({options:I.Optional(I.Object({}))});async function Uqt(t,e,n){t.forceSet(dr,new dz),t.get(Mn).resetToken();try{await t.get(Mn).getToken()}catch{}return await new Promise(r=>setTimeout(r,0)),["OK",null]}s(Uqt,"handleTestingNeverAuthChecked");var PVe=st(Oqt,Uqt);f();f();var Ppe=class extends f6{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,n){return e.endsWith("telemetry")?Promise.resolve(hVe(200,this.fullConfig)):Promise.resolve(Spe(404,""))}},fz=class extends Ppe{constructor(n,r){super(n);this.delegate=r}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(n,r){return n.endsWith("telemetry")?super.fetch(n,r):this.delegate.fetch(n,r)}makeAbortController(){return this.delegate.makeAbortController()}};var qqt=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function Wqt(t,e,n){if(n.expFlags){let r={AssignmentContext:"assignmentcontext",Parameters:{...n.expFlags}};t.forceSet(rr,new fz(r,t.get(rr)))}return["OK",null]}s(Wqt,"handleTestingOverrideExpFlagsChecked");var NVe=st(qqt,Wqt);f();var Gqt=I.Object({rules:sre});function Hqt(t,e,n){let r=t.get(jc);return r?(r.setTestingRules(n.rules),["OK",null]):[null,{code:$n.InternalError,message:"Could not set content exclusion rules"}]}s(Hqt,"handleTestingSetContentExclusionRulesChecked");var LVe=st(Gqt,Hqt);f();var jqt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(BR)),options:I.Optional(I.Object({}))});function Vqt(t,e,n){return t.get(Dy).add(n.workDoneToken,n.chunks,n.followUp,n.suggestedTitle,n.skills,n.references),["OK",null]}s(Vqt,"handleTestingSetSyntheticTurnsChecked");var FVe=st(jqt,Vqt);f();var $qt=I.Object({});async function zqt(t,e,n){let r=t.get(ja),i=t.get(Ha);return await r.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,l,c){return i.logIt(t,a,"triggerShowMessage",`${l} (${String(c)})`)}s(o,"sendNotification")}s(zqt,"handleTriggerShowMessageChecked");var MVe=st($qt,zqt);f();var Yqt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function Kqt(t,e,n){return await xVe(t),t.forceSet(dr,new XR(t.get(Mn),n.githubAppId)),["OK",null]}s(Kqt,"handleTestingUseTestingTokenChecked");var QVe=st(Yqt,Kqt);f();var Jqt=I.Object({});async function Xqt(t,e,n){return await new xR().uninstall(t),["OK",null]}s(Xqt,"handleUninstallChecked");var OVe=st(Jqt,Xqt);f();var Zqt=v5e;function eWt(t,e,n){let r=t.get(Ra),i={unregistered:[],notUnregistered:[]};return n.providers.forEach(o=>{try{r.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(eWt,"unregisterContextProviders");var UVe=st(Zqt,eWt);f();var Npe=Ve(require("os"));var tWt=I.Object({expectedCertificate:I.String()});async function nWt(t,e,n){let i=(await IG(t).getAllRootCAs()).map(qR),o=qR(n.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${Qfe(o)}. Only found those installed on the system:${Npe.EOL}${i.map(a=>"- "+Qfe(a)).join(Npe.EOL)}`},null]}s(nWt,"handleVerifyCertificateChecked");var qVe=st(tWt,nWt);f();var rWt=I.Object({});async function iWt(){return[{status:!!await new bP().load()},null]}s(iWt,"handleVerifyKerberosChecked");var WVe=st(rWt,iWt);f();var oWt=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function sWt(t,e,n){let i=await t.get(kn).getTextDocument(n);return i?i.getText()!==n.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${n.source}`},null]:i.version!==n.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${n.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${n.uri}>`},null]}s(sWt,"handleVerifyStateChecked");var GVe=st(oWt,sWt);f();var aWt=I.Object({});function lWt(t,e,n){return[t.get(kn).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(lWt,"handleVerifyWorkspaceStateChecked");var HVe=st(aWt,lWt);var ST=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function jVe(){let t=new Map;return t.set(THe.method,wHe),t.set(_He.method,SHe),t.set("getCompletions",AHe),t.set("getCompletionsCycling",yHe),t.set("getPanelCompletions",vHe),t.set(tHe.method,nHe),t.set("getVersion",bHe),t.set("setEditorInfo",WHe),t.set("checkStatus",oqe),t.set("checkQuota",iqe),t.set("checkFileStatus",nqe),t.set("signInInitiate",jfe),t.set("signIn",jfe),t.set("signInConfirm",GHe),t.set("signInWithGithubToken",HHe),t.set("signOut",jHe),t.set("notifyShown",PHe),t.set("notifyAccepted",BHe),t.set("notifyRejected",DHe),t.set("telemetry/exception",VHe),t.set("textDocument/copilotInlineEdit",kHe),t.set("testing/overrideExpFlags",NVe),t.set("testing/alwaysAuth",EVe),t.set("testing/neverAuth",PVe),t.set("testing/useTestingToken",QVe),t.set("testing/setCompletionDocuments",pHe),t.set("testing/setPanelCompletionDocuments",ZGe),t.set("testing/triggerShowMessageRequest",MVe),t.set("testing/flushPromiseQueue",kVe),t.set("testing/getDocument",DVe),t.set("testing/chatml",IVe),t.set("testing/setSyntheticTurns",FVe),t.set("testing/fetch",RVe),t.set("testing/setContentExclusionRules",LVe),t.set("testing/setCopilotEditsResponse",qGe),t.set("testing/getContext",BVe),t.set("uninstall",OVe),t.set("debug/diagnostics",sHe),t.set("debug/listCertificates",RHe),t.set("debug/verifyState",GVe),t.set("debug/verifyCertificate",qVe),t.set("debug/verifyKerberos",WVe),t.set("debug/verifyWorkspaceState",HVe),t.set("context/registerProviders",NHe),t.set("context/unregisterProviders",UVe),t.set("conversation/preconditions",NGe),t.set("conversation/persistence",BGe),t.set("conversation/create",RGe),t.set("conversation/turn",QGe),t.set("conversation/turnDelete",OGe),t.set("conversation/destroy",kGe),t.set("conversation/rating",LGe),t.set("conversation/copyCode",dGe),t.set("conversation/insertCode",fGe),t.set("conversation/templates",MGe),t.set("conversation/agents",uGe),t.set("conversation/registerTools",FGe),t.set("copilot/models",zGe),t.set("copilot/setModelPolicy",YGe),t.set("copilot/codeReview",UGe),t.set("git/commitGenerate",EHe),t.set("editConversation/create",WGe),t.set("editConversation/turn",HGe),t.set("editConversation/turnDelete",jGe),t.set("editConversation/destroy",GGe),t.set("mcp/getTools",VGe),t.set("mcp/updateToolsStatus",$Ge),new ST(t)}s(jVe,"getAllMethods");f();f();f();var VVe=Ve(xm());var IA=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new VVe.NotificationType(this.name)}};var Lpe=class extends IA{constructor(){super(...arguments);this.name=XZ.method;this.params=jbe}static{s(this,"DidChangeAuthNotificationHandler")}handle(n){let r=this.ctx.get(dr);n?.handle&&n?.accessToken?r.setTransientSession({accessToken:n.accessToken,login:n.handle,githubAppId:n.githubAppId}):r.setTransientSession(null)}},$Ve=[Lpe];f();var Fpe=class extends IA{constructor(){super(...arguments);this.name=ree.method;this.params=Zbe}static{s(this,"DidShowCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],o=this.ctx.get(ns).get(r);o&&GRe(this.ctx,o)}},Mpe=class extends IA{constructor(){super(...arguments);this.name=see.method;this.params=iEe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(n){let r=n.item.command.arguments[0];await this.ctx.get(Zm).handleShown(r)}},Qpe=class extends IA{constructor(){super(...arguments);this.name=iee.method;this.params=eEe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],i=n.acceptedLength,o=this.ctx.get(ns),a=o.get(r);a&&(o.delete(r),i>=a.insertText.length?GU(this.ctx,a):HRe(this.ctx,a,i))}},zVe=[Fpe,Mpe,Qpe];f();var pz=class extends IA{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(n){this.ctx.get(Gu).cancel(n.token)}};var cWt=[...$Ve,...zVe,pz];function YVe(t,e){for(let n of cWt){let r=new n(t),i=ds.Compile(r.params);e.onNotification(r.type,Au(t,async o=>{Iy(o),i.Check(o)?await r.handle(o):Ec.error(t,`Notification ${r.name}:`,new xc(i.Errors(o)))},`Notification ${r.name}`))}}s(YVe,"registerNotifications");f();var JVe=Ve(require("events")),mz=Ve(Ta());var KVe=new _t("AgentTextDocumentConfiguration"),Ope=class{constructor(e){this.ctx=e;this.emitter=new JVe.default}static{s(this,"AgentTextDocumentsConfiguration")}create(e,n,r,i){try{return S1.create(e,n,r,i)}catch(o){throw KVe.exception(this.ctx,o,".create"),o}}update(e,n,r){try{let i=[];for(let a of n)if(mz.TextDocumentContentChangeEvent.isIncremental(a)){let l={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(l)}let o={document:{uri:e.uri,version:r},contentChanges:i};return this.emitter.emit("change",o),S1.withChanges(e,n,r)}catch(i){throw KVe.exception(this.ctx,i,".update"),i}}},Mb=class extends kn{constructor(n){super(n);this._documents=new Map;this.workspaceFolders=[];this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((n,r,i)=>this.connection.onNotification(tee.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};n.call(r,"uri"in a?{document:a}:void 0)}),"onDidFocusTextDocument");this._textDocumentConfiguration=new Ope(n),this._notebookDocuments=new mz.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(Cn).connection}init(n){this.connection.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Bl(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=Bl(i.uri),c=this._documents.get(l);c!==void 0&&(c=this._textDocumentConfiguration.update(c,o,a),this._documents.set(l,c))}),this.connection.onDidCloseTextDocument(r=>{let i=Bl(r.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...n)}didChangeWorkspaceFolders(n){n.added.forEach(r=>this.registerWorkspaceFolder(r)),n.removed.forEach(r=>this.unregisterWorkspaceFolder(r))}unregisterWorkspaceFolder(n){let r=this.workspaceFolders.findIndex(i=>i.uri===n.uri);r>=0&&this.workspaceFolders.splice(r,1)}registerWorkspaceFolder(n){this.workspaceFolders.push(n)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(n){return this._documents.get(Bl(n.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(n){let r=this._notebookDocuments.findNotebookDocumentForCell(n.uri);if(r)return{getCells:s(()=>r.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=r.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(r.cells[o],o):void 0},"getCellFor")}}wrapCell(n,r){let i=this._notebookDocuments.getCellTextDocument(n);if(i)return{kind:n.kind,metadata:n.metadata??{},index:r,document:i}}};var XVe=ds.Compile(Kbe);function Iy(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Iy(t[e]);else if(typeof t=="object"){let e=t;for(let n in e)e[n]===null?delete e[n]:e[n]=Iy(e[n])}return t}}s(Iy,"purgeNulls");var Cn=class{constructor(e,n){this.ctx=e;this.connection=n;this.initialized=!1;this.#i=this.ctx.get(Ha)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,n=this.connection;n.onRequest(this.messageHandler.bind(this)),YVe(e,n);let r={name:"GitHub Copilot Language Server",version:e.get(co).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async c=>{try{if(i&&c&&typeof c=="object"&&!("settings"in c)){let u=await n.workspace.getConfiguration(["github.copilot",...Wfe].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of Wfe)d[p]=u.shift();c.settings=d}return UHe(e,Iy(c))}catch(u){Ec.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(c){try{e.get(Mb).didChangeWorkspaceFolders(c),e.get(N0).emit(c)}catch(u){Ec.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:u})=>a({added:[{uri:u,name:c??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:u})=>a({added:[],removed:[{uri:u,name:c??u}]})),n.onInitialize(async c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let u=c.capabilities.copilot,d=Iy(c.initializationOptions);if(d){if(!XVe.Check(d))throw new xc(XVe.Errors(d));let g=d,y=e.get(ur);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):Ec.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Ia).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities)}let p=c.capabilities.workspace?.workspaceFolders??!1;e.get(Mb).init(c.workspaceFolders??[]),eRe(this.ctx),e.get(N0).emit({added:c.workspaceFolders??[],removed:[]}),i=c.capabilities.workspace?.configuration,u&&(e.get(Go).setCapabilities(u),"openURL"in u&&Dj(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,Ec.info(e,`${r.name} ${r.version} initialized`),p&&n.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await r6(e),this.installationTelemetryTimer=setTimeout(()=>{new xR().startup(e).catch(()=>{})},1e3),e.get(Ty).emit(),await dRe(e))},"onInitialized");return n.onInitialized(Au(e,h,"onInitialized")),e.get(th).init(),u?.token&&e.get(dr).setTransientSession(null),u?.redirectedTelemetry&&await eqe(e),ZVe.lt(process.versions.node,"20.8.0")&&Ec.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:ch.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:$Ue(e,n)},inlineCompletionProvider:{}},serverInfo:r}}),n.onShutdown(async()=>{await(this.#e??=this.deactivate())}),n.onExit(()=>void this.onExit()),n.onDidChangeConfiguration(Au(e,o,"onDidChangeConfiguration")),n.listen();let l=new Vj;this.ctx.forceSet(Ha,l)}async messageHandler(e,n,r){let i=this.ctx.get(ST).handlers.get(e);if(!i)return new ch.ResponseError($n.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new ch.ResponseError($n.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new ch.ResponseError($n.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!KUe(this.ctx.get(ur)))throw new ch.ResponseError($n.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(n)&&(n=n[0]),Iy(n);try{let[o,a]=await i(this.ctx,r,n);return a?new ch.ResponseError(a.code,a.message,a.data):o}catch(o){if(r.isCancellationRequested)return new ch.ResponseError($n.RequestCancelled,"Request was canceled");if(o instanceof ss)return new ch.ResponseError($n.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof ch.ResponseError||Ec.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(eh).dispose()}catch(e){Ec.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Ha,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),Iie(e),await Promise.race([new Promise(n=>setTimeout(n,100)),e.get(ya).flush()]),await Promise.race([new Promise(n=>setTimeout(n,1800)),e.get(Rl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},Ec=new _t("lsp");var hz=class t extends i2{constructor(n){super(n);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Cn)}static mapProviderNameToNeighboringFileType(n){let r="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(n){case r:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(n){let r={entries:[],traits:n.traits};for(let i of n.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};r.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),fl.warn(this.context,`unknown providerName ${i.providerName}`))}return r}async getRelatedFilesResponse(n,r,i){fl.debug(this.context,`Fetching related files for ${n.uri}`);let o=this.context.get(Go).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,r,o),!o)return fl.debug(this.context,"`copilot/related` not supported"),nRe;try{let a=await this.service.connection.sendRequest(aee.type,{textDocument:{uri:n.uri},data:n.data,telemetry:{properties:r.properties,measurements:r.measurements}},i);return this.convert(a)}catch(a){fl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(n,r,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,kt(n,"copilotRelated.hasRelatedCapability",r)}catch(o){fl.exception(n,o,"copilotRelated")}}};f();var e$e=Ve(Ta());var Upe=new _t("copilotTokenManager"),qpe=class t extends gS{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new e$e.ProtocolRequestType("copilot/token")}constructor(e,n=!1){super(e,n)}async fetchCopilotTokenResult(){let e=this.ctx.get(Cn).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let n=await e.sendRequest(t.RequestType,{force:!1});if(!n?.envelope)throw Upe.debug(this.ctx,"Envelope missing from copilot/token response"),new Bf({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:r,handle:i,githubAppId:o,envelope:a,tokenEndpoint:l}=n;Upe.debug(this.ctx,"Retrieved envelope from copilot/token");let c=new x1(a,void 0);if(c.isExpired())throw new ss("Expired token in copilot/token response");if(i&&r){let u;if(l!==void 0){try{u=new URL(l).origin}catch{Upe.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}this.ctx.get(ul).updateBaseUrlFromTokenEndpoint(this.ctx,l)}this.ctx.get(dr).setTransientSession({accessToken:r,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Bf({reason:"NotSignedIn"});return RB(this.ctx,c),{envelope:a,userInfo:void 0}}catch(n){throw n instanceof Error?new ss(n.message,n):n}}},p6=class extends Mn{constructor(n,r=new gS(n,!0)){super();this.ctx=n;this.fallback=r;this.client=new qpe(n,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(Go).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(n){this.getDelegate().resetToken(n)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var uWt=new _t("Public Code References"),gz=class extends A0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,n){let r=n.location?.start.line!==void 0?n.location.start.line+1:"-",i=n.location?.start.character!==void 0?n.location.start.character+1:"-",o=(n.matchingText??"").replace(/[\r\n]/g," ");uWt.info(e,`Text found matching public code in ${n.inDocumentUri} [Ln ${r}, Col ${i}] near ${o}...:`+n.details.map((a,l)=>`
  ${l+1}) [${a.license}] ${a.url}`).join("")),!(n.version===void 0||n.location===void 0)&&e.get(Go).getCapabilities().ipCodeCitation===!0&&await e.get(Cn).connection.sendNotification(ZZ.type,{uri:n.inDocumentUri,version:n.version,range:n.location,matchingText:n.matchingText??"",citations:n.details})}};f();f();function t$e(t){dWt(t)}s(t$e,"activateExtensibilityPlatformFeature");function dWt(t){t.set(ih,new c$(t)),t.set(pA,new pA(t))}s(dWt,"registerContextDependencies");f();var n$e=I.String(),Wpe=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(yz,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},yz="build-logs",Az=class extends $l{static{s(this,"BuildLogsSkill")}constructor(e){super(yz,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,n=>new Wpe(n))}};f();var fWt=I.Object({uri:I.String(),visibleRange:I.Optional(Ea),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),r$e=I.Object({files:I.Array(fWt)}),pWt=3,Gpe=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let n=await this.getDocuments(e);if(n.length>0){let r=this.toElidableDocs(n),i=wb(r,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let n=this.sortFiles(e.files);n=this.filterIncludedDocs(n);let r=this.turnContext.ctx.get(Cr),i=[];for(let o of n){let a=await r.getOrReadTextDocument(o),l=gs(a);if(await this.turnContext.collectFile(xz,o.uri,l),a.status==="valid"&&l!=="empty"&&(i.push([a.document,o]),i.length===pWt))break}return i.reverse()}sortFiles(e){return e.sort((n,r)=>n.activeAt&&r.activeAt?new Date(n.activeAt).getTime()-new Date(r.activeAt).getTime():n.activeAt?-1:r.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(n=>!this.turnContext.isFileIncluded(n.uri))}toElidableDocs(e){return e.map(n=>{let[r,i]=n,o=this.turnContext.ctx.get(Cr).getRelativePath(r),a=new mA(r,void 0,i.visibleRange);return new Bt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let n=(await Co.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Bt([r])}},xz="recent-files",Cz=class extends $l{static{s(this,"RecentFilesSkill")}constructor(e){super(xz,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,n=>new Gpe(n))}};f();var i$e=I.String(),Hpe=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(bz,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},bz="runtime-logs",vz=class extends $l{static{s(this,"RuntimeLogsSkill")}constructor(e){super(bz,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,n=>new Hpe(n))}};f();var Ez=Ve(xm());var Iz=class extends nl{constructor(n){super();this.ctx=n}static{s(this,"AgentConversationInspector")}shouldInspect(){return eL(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Cn).connection}async inspectPrompt(n){return this.connection?.sendNotification(new Ez.NotificationType("conversation/inspectPrompt"),n)}async inspectFetchResult(n){return this.connection?.sendNotification(new Ez.NotificationType("conversation/inspectFetchResult"),n)}async documentDiff(n){return this.connection?.sendNotification(new Ez.NotificationType("conversation/documentDiff"),n)}};f();var o$e=Ve(Ta());var m6=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Ep).onChange(n=>{this.sendNotification(n)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Cn).connection.sendNotification(new o$e.NotificationType(this.notificationEndpoint),e)}};function s$e(t){mWt(t),hWt(t),t$e(t)}s(s$e,"activateConversationFeature");function mWt(t){t.set(Gi,new Gi(t)),t.set(Yl,new Yl),t.set(bc,new bc(t)),t.set(Xs,new QG(t)),t.set(Dy,new Dy),t.set(Is,new Is(t)),t.set(Ep,new Ep(t)),t.set(m6,new m6(t)),t.set(Cu,new VF(t,new jF(t))),t.set(Py,new Py),t.set(Ib,new Ib),t.set(nl,new Iz(t)),t.set(fa,new fa(t)),t.set(vc,new vc),t.set($0,new $0)}s(mWt,"registerContextDependencies");function hWt(t){let e=new gl;e.registerSkill(new fV(new dV(t))),e.registerSkill(new QV(new Wu(t,xA,XWe))),e.registerSkill(new mV(new Wu(t,nh,Hqe))),e.registerSkill(new Kj(new Wu(t,nu,fqe))),e.registerSkill(new OV),e.registerSkill(new Cz(new Wu(t,xz,r$e))),e.registerSkill(new Jj(new Wu(t,hA,mqe))),e.registerSkill(new gV(new Wu(t,_b,eWe))),e.registerSkill(new vz(new Wu(t,bz,i$e))),e.registerSkill(new Az(new Wu(t,yz,n$e))),e.registerSkill(new yV(new Wu(t,rh,tWe))),e.registerSkill(new CV(new Wu(t,mT,rWe))),t.set(gl,e)}s(hWt,"registerSkills");f();var a$e=Ve(ii());var Tz=class extends yc{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,n){await this.ctx.get(Cn).connection.sendProgress(new a$e.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...n}])}};f();var l$e=Ve(Ta()),c$e=Ve(xm());var wz=class extends zg{constructor(){super(...arguments);this.requestType=new l$e.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=ds.Compile(MQe)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new c$e.ResponseError(c.code,c.message,c.data);throw On.error(this.ctx,`ResponseError while invoking client tool confirmation ${r.name}`,u),new Error(`Failed to invoke client tool confirmation ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool confirmation ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new xc(this.typeCheck.Errors(o));return o}};f();var u$e=Ve(Ta()),d$e=Ve(xm());var _z=class extends Jv{constructor(){super(...arguments);this.requestType=new u$e.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=ds.Compile(FQe)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new d$e.ResponseError(c.code,c.message,c.data);throw On.error(this.ctx,`ResponseError while invoking client tool ${r.name}`,u),new Error(`Failed to invoke client tool ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new xc(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(n){let r=n.content.map(i=>typeof i.value=="string"?new Ci(i.value):new sT(i.value));return new Wi(r,n.status??"success")}};f();f();function f$e(t,e,n){try{let r=t.get(Nt).javaContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return Wn.debug(t,"Failed to get the active Java experiments for the Context Provider API",r),!1}return!0}s(f$e,"fillInJavaActiveExperiments");var jpe=Ve(xm());var gWt={type:new jpe.NotificationType("featureFlagsNotification")},AWt={type:new jpe.NotificationType("copilot/didChangeFeatureFlags")},h6=class{constructor(e){this.ctx=e;ea(e,n=>this.sendNotification(n))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let n=this.ctx,r=n.get(Nt),i=await r.updateExPValuesAndAssignments(),o=r.ideEnableCopilotNewBilling(i),a={};n.get(Nt).excludeRelatedFiles(i)&&(a.ExcludeRelatedFiles=!0);let l=Ere(n,i);l.length>0&&(a.ExpContextProviders=l);let c=new Map;f5e(n,l,c,i),jO(n,c,i),f$e(n,c,i);for(let[p,m]of c.entries())a[p]=m;let u=n.get(Go),d=n.get(Cn).connection;if(u.getCapabilities().didChangeFeatureFlags)await d.sendNotification(AWt.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:a,cnb:o});else{let p={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,cnb:o,ae:a};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(p.xc=!0),await d.sendNotification(gWt.type,p)}}};f();var Sz=class extends Yi{constructor(n){super();this.ctx=n;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(n){let r=n.kind;n.busy&&r!=="Error"&&(r="InProgress"),this.ctx.get(Cn).connection.sendNotification(lee.type,{busy:n.busy,kind:n.kind,status:r,message:n.message??""}),this.ctx.get(Cn).connection.sendNotification("didChangeStatus",{busy:n.busy,kind:n.kind,message:n.message})}};f();var p$e=new JR;f();f();f();var ou=new _t("CopilotMCP");async function Vpe(t,e){await t.get(Hm).notifyLog(e)}s(Vpe,"notifyMCPRuntimeLog");async function Uy(t,e){await Vpe(t,{...e,level:"error"})}s(Uy,"notifyMCPRuntimeError");async function g6(t,e){await Vpe(t,{...e,level:"warning"})}s(g6,"notifyMCPRuntimeWarning");async function t3(t,e){await Vpe(t,{...e,level:"info"})}s(t3,"notifyMCPRuntimeInfo");f();var $pe=/[^a-z0-9_-]/gi,yWt=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function m$e(){let t={};for(let e of yWt){let n=process.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(m$e,"getDefaultEnvironment");async function h$e(t,e,n){if(!e.description){let r=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;ou.warn(t,r),await g6(t,{message:r,server:n,tool:e.name}),e.description="<empty>"}if($pe.lastIndex=0,$pe.test(e.name)){let r=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;ou.warn(t,r),await g6(t,{message:r,server:n,tool:e.name}),e._nameForModel=e.name.replace($pe,"_")}else e._nameForModel=e.name;return e}s(h$e,"normalizeTool");f();f();f();f();var to;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function n(i){throw new Error}s(n,"assertNever"),t.assertNever=n,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(r,"joinValues"),t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(to||(to={}));var Ype;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ype||(Ype={}));var pn=to.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wy=s(t=>{switch(typeof t){case"undefined":return pn.undefined;case"string":return pn.string;case"number":return isNaN(t)?pn.nan:pn.number;case"boolean":return pn.boolean;case"function":return pn.function;case"bigint":return pn.bigint;case"symbol":return pn.symbol;case"object":return Array.isArray(t)?pn.array:t===null?pn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pn.promise:typeof Map<"u"&&t instanceof Map?pn.map:typeof Set<"u"&&t instanceof Set?pn.set:typeof Date<"u"&&t instanceof Date?pn.date:pn.object;default:return pn.unknown}},"getParsedType"),St=to.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),CWt=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),Y0=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(o){return o.message},r={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let l=r,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}},"processError");return i(this),r}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,to.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},r=[];for(let i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};Y0.create=t=>new Y0(t);var i3=s((t,e)=>{let n;switch(t.code){case St.invalid_type:t.received===pn.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case St.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,to.jsonStringifyReplacer)}`;break;case St.unrecognized_keys:n=`Unrecognized key(s) in object: ${to.joinValues(t.keys,", ")}`;break;case St.invalid_union:n="Invalid input";break;case St.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${to.joinValues(t.options)}`;break;case St.invalid_enum_value:n=`Invalid enum value. Expected ${to.joinValues(t.options)}, received '${t.received}'`;break;case St.invalid_arguments:n="Invalid function arguments";break;case St.invalid_return_type:n="Invalid function return type";break;case St.invalid_date:n="Invalid date";break;case St.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:to.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case St.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case St.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case St.custom:n="Invalid input";break;case St.invalid_intersection_types:n="Intersection results could not be merged";break;case St.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case St.not_finite:n="Number must be finite";break;default:n=e.defaultError,to.assertNever(t)}return{message:n}},"errorMap"),C$e=i3;function xWt(t){C$e=t}s(xWt,"setErrorMap");function Rz(){return C$e}s(Rz,"getErrorMap");var kz=s(t=>{let{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",c=r.filter(u=>!!u).slice().reverse();for(let u of c)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},"makeIssue"),vWt=[];function tn(t,e){let n=Rz(),r=kz({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===i3?void 0:i3].filter(i=>!!i)});t.common.issues.push(r)}s(tn,"addIssueToContext");var su=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let i of n){if(i.status==="aborted")return Fr;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let i of n){let o=await i.key,a=await i.value;r.push({key:o,value:a})}return t.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let i of n){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Fr;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}},Fr=Object.freeze({status:"aborted"}),r3=s(t=>({status:"dirty",value:t}),"DIRTY"),Hu=s(t=>({status:"valid",value:t}),"OK"),Kpe=s(t=>t.status==="aborted","isAborted"),Jpe=s(t=>t.status==="dirty","isDirty"),RT=s(t=>t.status==="valid","isValid"),C6=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function Bz(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}s(Bz,"__classPrivateFieldGet");function x$e(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}s(x$e,"__classPrivateFieldSet");var Pn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Pn||(Pn={}));var A6,y6,Sp=class{static{s(this,"ParseInputLazyPath")}constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},g$e=s((t,e)=>{if(RT(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new Y0(t.common.issues);return this._error=n,this._error}}},"handleResult");function ti(t){if(!t)return{};let{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,l)=>{var c,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},"customMap"),description:i}}s(ti,"processCreateParams");var ni=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Wy(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Wy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new su,ctx:{common:e.parent.common,data:e.data,parsedType:Wy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if(C6(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){let n=this._parse(e);return Promise.resolve(n)}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;let i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wy(e)},o=this._parseSync({data:e,path:i.path,parent:i});return g$e(i,o)}"~validate"(e){var n,r;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wy(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return RT(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>RT(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wy(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(C6(i)?i:Promise.resolve(i));return g$e(r,o)}refine(e,n){let r=s(i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),l=s(()=>o.addIssue({code:St.custom,...r(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new K0({schema:this,typeName:kr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(n=>this["~validate"](n),"validate")}}optional(){return _p.create(this,this._def)}nullable(){return wA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hy.create(this)}promise(){return Ub.create(this,this._def)}or(e){return FT.create([this,e],this._def)}and(e){return MT.create(this,e,this._def)}transform(e){return new K0({...ti(this._def),schema:this,typeName:kr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let n=typeof e=="function"?e:()=>e;return new WT({...ti(this._def),innerType:this,defaultValue:n,typeName:kr.ZodDefault})}brand(){return new x6({typeName:kr.ZodBranded,type:this,...ti(this._def)})}catch(e){let n=typeof e=="function"?e:()=>e;return new GT({...ti(this._def),innerType:this,catchValue:n,typeName:kr.ZodCatch})}describe(e){let n=this.constructor;return new n({...this._def,description:e})}pipe(e){return v6.create(this,e)}readonly(){return HT.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},bWt=/^c[^\s-]{8,}$/i,EWt=/^[0-9a-z]+$/,IWt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,TWt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wWt=/^[a-z0-9_-]{21}$/i,_Wt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,SWt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,RWt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kWt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",zpe,BWt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DWt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,PWt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,NWt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,LWt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,FWt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,v$e="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MWt=new RegExp(`^${v$e}$`);function b$e(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(b$e,"timeRegexSource");function QWt(t){return new RegExp(`^${b$e(t)}$`)}s(QWt,"timeRegex");function E$e(t){let e=`${v$e}T${b$e(t)}`,n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}s(E$e,"datetimeRegex");function OWt(t,e){return!!((e==="v4"||!e)&&BWt.test(t)||(e==="v6"||!e)&&PWt.test(t))}s(OWt,"isValidIP");function UWt(t,e){if(!_Wt.test(t))return!1;try{let[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(UWt,"isValidJWT");function qWt(t,e){return!!((e==="v4"||!e)&&DWt.test(t)||(e==="v6"||!e)&&NWt.test(t))}s(qWt,"isValidCidr");var Qb=class t extends ni{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pn.string){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.string,received:o.parsedType}),Fr}let r=new su,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")RWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"email",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")zpe||(zpe=new RegExp(kWt,"u")),zpe.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"emoji",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")TWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"uuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")wWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"nanoid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")bWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")EWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid2",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")IWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ulid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),tn(i,{validation:"url",code:St.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"regex",code:St.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?E$e(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?MWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?QWt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?SWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"duration",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?OWt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ip",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?UWt(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"jwt",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?qWt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cidr",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?LWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?FWt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64url",code:St.invalid_string,message:o.message}),r.dirty()):to.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:St.invalid_string,...Pn.errToObj(r)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pn.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Pn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Pn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Pn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Pn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Pn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Pn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Pn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Pn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Pn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Pn.errToObj(n)})}nonempty(e){return this.min(1,Pn.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};Qb.create=t=>{var e;return new Qb({checks:[],typeName:kr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};function WWt(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(WWt,"floatSafeRemainder");var kT=class t extends ni{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pn.number){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.number,received:o.parsedType}),Fr}let r,i=new su;for(let o of this._def.checks)o.kind==="int"?to.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?WWt(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_finite,message:o.message}),i.dirty()):to.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Pn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Pn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pn.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&to.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};kT.create=t=>new kT({checks:[],typeName:kr.ZodNumber,coerce:t?.coerce||!1,...ti(t)});var BT=class t extends ni{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pn.bigint)return this._getInvalidInput(e);let r,i=new su;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):to.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.bigint,received:n.parsedType}),Fr}gte(e,n){return this.setLimit("min",e,!0,Pn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pn.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};BT.create=t=>{var e;return new BT({checks:[],typeName:kr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};var DT=class extends ni{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pn.boolean){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.boolean,received:r.parsedType}),Fr}return Hu(e.data)}};DT.create=t=>new DT({typeName:kr.ZodBoolean,coerce:t?.coerce||!1,...ti(t)});var PT=class t extends ni{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pn.date){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.date,received:o.parsedType}),Fr}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_date}),Fr}let r=new su,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):to.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Pn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Pn.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};PT.create=t=>new PT({checks:[],coerce:t?.coerce||!1,typeName:kr.ZodDate,...ti(t)});var o3=class extends ni{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==pn.symbol){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.symbol,received:r.parsedType}),Fr}return Hu(e.data)}};o3.create=t=>new o3({typeName:kr.ZodSymbol,...ti(t)});var NT=class extends ni{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.undefined,received:r.parsedType}),Fr}return Hu(e.data)}};NT.create=t=>new NT({typeName:kr.ZodUndefined,...ti(t)});var LT=class extends ni{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==pn.null){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.null,received:r.parsedType}),Fr}return Hu(e.data)}};LT.create=t=>new LT({typeName:kr.ZodNull,...ti(t)});var Ob=class extends ni{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Hu(e.data)}};Ob.create=t=>new Ob({typeName:kr.ZodAny,...ti(t)});var Gy=class extends ni{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hu(e.data)}};Gy.create=t=>new Gy({typeName:kr.ZodUnknown,...ti(t)});var uh=class extends ni{static{s(this,"ZodNever")}_parse(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.never,received:n.parsedType}),Fr}};uh.create=t=>new uh({typeName:kr.ZodNever,...ti(t)});var s3=class extends ni{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.void,received:r.parsedType}),Fr}return Hu(e.data)}};s3.create=t=>new s3({typeName:kr.ZodVoid,...ti(t)});var Hy=class t extends ni{static{s(this,"ZodArray")}_parse(e){let{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==pn.array)return tn(n,{code:St.invalid_type,expected:pn.array,received:n.parsedType}),Fr;if(i.exactLength!==null){let a=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(a||l)&&(tn(n,{code:a?St.too_big:St.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(tn(n,{code:St.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(tn(n,{code:St.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>i.type._parseAsync(new Sp(n,a,n.path,l)))).then(a=>su.mergeArray(r,a));let o=[...n.data].map((a,l)=>i.type._parseSync(new Sp(n,a,n.path,l)));return su.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new t({...this._def,minLength:{value:e,message:Pn.toString(n)}})}max(e,n){return new t({...this._def,maxLength:{value:e,message:Pn.toString(n)}})}length(e,n){return new t({...this._def,exactLength:{value:e,message:Pn.toString(n)}})}nonempty(e){return this.min(1,e)}};Hy.create=(t,e)=>new Hy({type:t,minLength:null,maxLength:null,exactLength:null,typeName:kr.ZodArray,...ti(e)});function n3(t){if(t instanceof qd){let e={};for(let n in t.shape){let r=t.shape[n];e[n]=_p.create(n3(r))}return new qd({...t._def,shape:s(()=>e,"shape")})}else return t instanceof Hy?new Hy({...t._def,type:n3(t.element)}):t instanceof _p?_p.create(n3(t.unwrap())):t instanceof wA?wA.create(n3(t.unwrap())):t instanceof TA?TA.create(t.items.map(e=>n3(e))):t}s(n3,"deepPartialify");var qd=class t extends ni{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=to.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==pn.object){let u=this._getOrReturnCtx(e);return tn(u,{code:St.invalid_type,expected:pn.object,received:u.parsedType}),Fr}let{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof uh&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let c=[];for(let u of a){let d=o[u],p=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Sp(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof uh){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(tn(i,{code:St.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let p=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Sp(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of c){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>su.mergeObjectSync(r,u)):su.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Pn.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((n,r)=>{var i,o,a,l;let c=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Pn.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:kr.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let n={};return to.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}omit(e){let n={};return to.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}deepPartial(){return n3(this)}partial(e){let n={};return to.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new t({...this._def,shape:s(()=>n,"shape")})}required(e){let n={};return to.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof _p;)o=o._def.innerType;n[r]=o}}),new t({...this._def,shape:s(()=>n,"shape")})}keyof(){return I$e(to.objectKeys(this.shape))}};qd.create=(t,e)=>new qd({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:uh.create(),typeName:kr.ZodObject,...ti(e)});qd.strictCreate=(t,e)=>new qd({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:uh.create(),typeName:kr.ZodObject,...ti(e)});qd.lazycreate=(t,e)=>new qd({shape:t,unknownKeys:"strip",catchall:uh.create(),typeName:kr.ZodObject,...ti(e)});var FT=class extends ni{static{s(this,"ZodUnion")}_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Y0(l.ctx.common.issues));return tn(n,{code:St.invalid_union,unionErrors:a}),Fr}if(s(i,"handleResults"),n.common.async)return Promise.all(r.map(async o=>{let a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of r){let u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(c=>new Y0(c));return tn(n,{code:St.invalid_union,unionErrors:l}),Fr}}get options(){return this._def.options}};FT.create=(t,e)=>new FT({options:t,typeName:kr.ZodUnion,...ti(e)});var qy=s(t=>t instanceof QT?qy(t.schema):t instanceof K0?qy(t.innerType()):t instanceof OT?[t.value]:t instanceof UT?t.options:t instanceof qT?to.objectValues(t.enum):t instanceof WT?qy(t._def.innerType):t instanceof NT?[void 0]:t instanceof LT?[null]:t instanceof _p?[void 0,...qy(t.unwrap())]:t instanceof wA?[null,...qy(t.unwrap())]:t instanceof x6||t instanceof HT?qy(t.unwrap()):t instanceof GT?qy(t._def.innerType):[],"getDiscriminator"),Dz=class t extends ni{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.object)return tn(n,{code:St.invalid_type,expected:pn.object,received:n.parsedType}),Fr;let r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:St.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Fr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let i=new Map;for(let o of n){let a=qy(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:kr.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...ti(r)})}};function Xpe(t,e){let n=Wy(t),r=Wy(e);if(t===e)return{valid:!0,data:t};if(n===pn.object&&r===pn.object){let i=to.objectKeys(e),o=to.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let c=Xpe(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(n===pn.array&&r===pn.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],c=Xpe(a,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===pn.date&&r===pn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(Xpe,"mergeValues");var MT=class extends ni{static{s(this,"ZodIntersection")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=s((o,a)=>{if(Kpe(o)||Kpe(a))return Fr;let l=Xpe(o.value,a.value);return l.valid?((Jpe(o)||Jpe(a))&&n.dirty(),{status:n.value,value:l.data}):(tn(r,{code:St.invalid_intersection_types}),Fr)},"handleParsed");return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};MT.create=(t,e,n)=>new MT({left:t,right:e,typeName:kr.ZodIntersection,...ti(n)});var TA=class t extends ni{static{s(this,"ZodTuple")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.array)return tn(r,{code:St.invalid_type,expected:pn.array,received:r.parsedType}),Fr;if(r.data.length<this._def.items.length)return tn(r,{code:St.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fr;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:St.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let o=[...r.data].map((a,l)=>{let c=this._def.items[l]||this._def.rest;return c?c._parse(new Sp(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>su.mergeArray(n,a)):su.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};TA.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new TA({items:t,typeName:kr.ZodTuple,rest:null,...ti(e)})};var Pz=class t extends ni{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.object)return tn(r,{code:St.invalid_type,expected:pn.object,received:r.parsedType}),Fr;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in r.data)i.push({key:o._parse(new Sp(r,l,r.path,l)),value:a._parse(new Sp(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?su.mergeObjectAsync(n,i):su.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ni?new t({keyType:e,valueType:n,typeName:kr.ZodRecord,...ti(r)}):new t({keyType:Qb.create(),valueType:e,typeName:kr.ZodRecord,...ti(n)})}},a3=class extends ni{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.map)return tn(r,{code:St.invalid_type,expected:pn.map,received:r.parsedType}),Fr;let i=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new Sp(r,l,r.path,[u,"key"])),value:o._parse(new Sp(r,c,r.path,[u,"value"]))}));if(r.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Fr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{let l=new Map;for(let c of a){let u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Fr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}};a3.create=(t,e,n)=>new a3({valueType:e,keyType:t,typeName:kr.ZodMap,...ti(n)});var l3=class t extends ni{static{s(this,"ZodSet")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.set)return tn(r,{code:St.invalid_type,expected:pn.set,received:r.parsedType}),Fr;let i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(tn(r,{code:St.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(tn(r,{code:St.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let d of c){if(d.status==="aborted")return Fr;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}s(a,"finalizeSet");let l=[...r.data.values()].map((c,u)=>o._parse(new Sp(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,n){return new t({...this._def,minSize:{value:e,message:Pn.toString(n)}})}max(e,n){return new t({...this._def,maxSize:{value:e,message:Pn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};l3.create=(t,e)=>new l3({valueType:t,minSize:null,maxSize:null,typeName:kr.ZodSet,...ti(e)});var Nz=class t extends ni{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.function)return tn(n,{code:St.invalid_type,expected:pn.function,received:n.parsedType}),Fr;function r(l,c){return kz({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rz(),i3].filter(u=>!!u),issueData:{code:St.invalid_arguments,argumentsError:c}})}s(r,"makeArgsIssue");function i(l,c){return kz({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rz(),i3].filter(u=>!!u),issueData:{code:St.invalid_return_type,returnTypeError:c}})}s(i,"makeReturnsIssue");let o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Ub){let l=this;return Hu(async function(...c){let u=new Y0([]),d=await l._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(r(c,h)),u}),p=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let l=this;return Hu(function(...c){let u=l._def.args.safeParse(c,o);if(!u.success)throw new Y0([r(c,u.error)]);let d=Reflect.apply(a,this,u.data),p=l._def.returns.safeParse(d,o);if(!p.success)throw new Y0([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:TA.create(e).rest(Gy.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new t({args:e||TA.create([]).rest(Gy.create()),returns:n||Gy.create(),typeName:kr.ZodFunction,...ti(r)})}},QT=class extends ni{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};QT.create=(t,e)=>new QT({getter:t,typeName:kr.ZodLazy,...ti(e)});var OT=class extends ni{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return tn(n,{received:n.data,code:St.invalid_literal,expected:this._def.value}),Fr}return{status:"valid",value:e.data}}get value(){return this._def.value}};OT.create=(t,e)=>new OT({value:t,typeName:kr.ZodLiteral,...ti(e)});function I$e(t,e){return new UT({values:t,typeName:kr.ZodEnum,...ti(e)})}s(I$e,"createZodEnum");var UT=class t extends ni{static{s(this,"ZodEnum")}constructor(){super(...arguments),A6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{expected:to.joinValues(r),received:n.parsedType,code:St.invalid_type}),Fr}if(Bz(this,A6,"f")||x$e(this,A6,new Set(this._def.values),"f"),!Bz(this,A6,"f").has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{received:n.data,code:St.invalid_enum_value,options:r}),Fr}return Hu(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return t.create(e,{...this._def,...n})}exclude(e,n=this._def){return t.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};A6=new WeakMap;UT.create=I$e;var qT=class extends ni{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),y6.set(this,void 0)}_parse(e){let n=to.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==pn.string&&r.parsedType!==pn.number){let i=to.objectValues(n);return tn(r,{expected:to.joinValues(i),received:r.parsedType,code:St.invalid_type}),Fr}if(Bz(this,y6,"f")||x$e(this,y6,new Set(to.getValidEnumValues(this._def.values)),"f"),!Bz(this,y6,"f").has(e.data)){let i=to.objectValues(n);return tn(r,{received:r.data,code:St.invalid_enum_value,options:i}),Fr}return Hu(e.data)}get enum(){return this._def.values}};y6=new WeakMap;qT.create=(t,e)=>new qT({values:t,typeName:kr.ZodNativeEnum,...ti(e)});var Ub=class extends ni{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.promise&&n.common.async===!1)return tn(n,{code:St.invalid_type,expected:pn.promise,received:n.parsedType}),Fr;let r=n.parsedType===pn.promise?n.data:Promise.resolve(n.data);return Hu(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}};Ub.create=(t,e)=>new Ub({type:t,typeName:kr.ZodPromise,...ti(e)});var K0=class extends ni{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===kr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{tn(r,a),a.fatal?n.abort():n.dirty()},"addIssue"),get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return Fr;let c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Fr:c.status==="dirty"||n.value==="dirty"?r3(c.value):c});{if(n.value==="aborted")return Fr;let l=this._def.schema._parseSync({data:a,path:r.path,parent:r});return l.status==="aborted"?Fr:l.status==="dirty"||n.value==="dirty"?r3(l.value):l}}if(i.type==="refinement"){let a=s(l=>{let c=i.refinement(l,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(r.common.async===!1){let l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Fr:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Fr:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!RT(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>RT(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:n.value,value:l})):a);to.assertNever(i)}};K0.create=(t,e,n)=>new K0({schema:t,typeName:kr.ZodEffects,effect:e,...ti(n)});K0.createWithPreprocess=(t,e,n)=>new K0({schema:e,effect:{type:"preprocess",transform:t},typeName:kr.ZodEffects,...ti(n)});var _p=class extends ni{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===pn.undefined?Hu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_p.create=(t,e)=>new _p({innerType:t,typeName:kr.ZodOptional,...ti(e)});var wA=class extends ni{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===pn.null?Hu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};wA.create=(t,e)=>new wA({innerType:t,typeName:kr.ZodNullable,...ti(e)});var WT=class extends ni{static{s(this,"ZodDefault")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===pn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};WT.create=(t,e)=>new WT({innerType:t,typeName:kr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ti(e)});var GT=class extends ni{static{s(this,"ZodCatch")}_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return C6(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Y0(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Y0(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};GT.create=(t,e)=>new GT({innerType:t,typeName:kr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ti(e)});var c3=class extends ni{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==pn.nan){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.nan,received:r.parsedType}),Fr}return{status:"valid",value:e.data}}};c3.create=t=>new c3({typeName:kr.ZodNaN,...ti(t)});var GWt=Symbol("zod_brand"),x6=class extends ni{static{s(this,"ZodBranded")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},v6=class t extends ni{static{s(this,"ZodPipeline")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Fr:o.status==="dirty"?(n.dirty(),r3(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})},"handleAsync")();{let i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Fr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new t({in:e,out:n,typeName:kr.ZodPipeline})}},HT=class extends ni{static{s(this,"ZodReadonly")}_parse(e){let n=this._def.innerType._parse(e),r=s(i=>(RT(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return C6(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};HT.create=(t,e)=>new HT({innerType:t,typeName:kr.ZodReadonly,...ti(e)});function A$e(t,e){let n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}s(A$e,"cleanParams");function T$e(t,e={},n){return t?Ob.create().superRefine((r,i)=>{var o,a;let l=t(r);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){let p=A$e(e,r),m=(d=(u=p.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!l){let c=A$e(e,r),u=(a=(o=c.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:u})}}):Ob.create()}s(T$e,"custom");var HWt={object:qd.lazycreate},kr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(kr||(kr={}));var jWt=s((t,e={message:`Input not instance of ${t.name}`})=>T$e(n=>n instanceof t,e),"instanceOfType"),w$e=Qb.create,_$e=kT.create,VWt=c3.create,$Wt=BT.create,S$e=DT.create,zWt=PT.create,YWt=o3.create,KWt=NT.create,JWt=LT.create,XWt=Ob.create,ZWt=Gy.create,eGt=uh.create,tGt=s3.create,nGt=Hy.create,rGt=qd.create,iGt=qd.strictCreate,oGt=FT.create,sGt=Dz.create,aGt=MT.create,lGt=TA.create,cGt=Pz.create,uGt=a3.create,dGt=l3.create,fGt=Nz.create,pGt=QT.create,mGt=OT.create,hGt=UT.create,gGt=qT.create,AGt=Ub.create,y$e=K0.create,yGt=_p.create,CGt=wA.create,xGt=K0.createWithPreprocess,vGt=v6.create,bGt=s(()=>w$e().optional(),"ostring"),EGt=s(()=>_$e().optional(),"onumber"),IGt=s(()=>S$e().optional(),"oboolean"),TGt={string:s(t=>Qb.create({...t,coerce:!0}),"string"),number:s(t=>kT.create({...t,coerce:!0}),"number"),boolean:s(t=>DT.create({...t,coerce:!0}),"boolean"),bigint:s(t=>BT.create({...t,coerce:!0}),"bigint"),date:s(t=>PT.create({...t,coerce:!0}),"date")},wGt=Fr,ge=Object.freeze({__proto__:null,defaultErrorMap:i3,setErrorMap:xWt,getErrorMap:Rz,makeIssue:kz,EMPTY_PATH:vWt,addIssueToContext:tn,ParseStatus:su,INVALID:Fr,DIRTY:r3,OK:Hu,isAborted:Kpe,isDirty:Jpe,isValid:RT,isAsync:C6,get util(){return to},get objectUtil(){return Ype},ZodParsedType:pn,getParsedType:Wy,ZodType:ni,datetimeRegex:E$e,ZodString:Qb,ZodNumber:kT,ZodBigInt:BT,ZodBoolean:DT,ZodDate:PT,ZodSymbol:o3,ZodUndefined:NT,ZodNull:LT,ZodAny:Ob,ZodUnknown:Gy,ZodNever:uh,ZodVoid:s3,ZodArray:Hy,ZodObject:qd,ZodUnion:FT,ZodDiscriminatedUnion:Dz,ZodIntersection:MT,ZodTuple:TA,ZodRecord:Pz,ZodMap:a3,ZodSet:l3,ZodFunction:Nz,ZodLazy:QT,ZodLiteral:OT,ZodEnum:UT,ZodNativeEnum:qT,ZodPromise:Ub,ZodEffects:K0,ZodTransformer:K0,ZodOptional:_p,ZodNullable:wA,ZodDefault:WT,ZodCatch:GT,ZodNaN:c3,BRAND:GWt,ZodBranded:x6,ZodPipeline:v6,ZodReadonly:HT,custom:T$e,Schema:ni,ZodSchema:ni,late:HWt,get ZodFirstPartyTypeKind(){return kr},coerce:TGt,any:XWt,array:nGt,bigint:$Wt,boolean:S$e,date:zWt,discriminatedUnion:sGt,effect:y$e,enum:hGt,function:fGt,instanceof:jWt,intersection:aGt,lazy:pGt,literal:mGt,map:uGt,nan:VWt,nativeEnum:gGt,never:eGt,null:JWt,nullable:CGt,number:_$e,object:rGt,oboolean:IGt,onumber:EGt,optional:yGt,ostring:bGt,pipeline:vGt,preprocess:xGt,promise:AGt,record:cGt,set:dGt,strictObject:iGt,string:w$e,symbol:YWt,transformer:y$e,tuple:lGt,undefined:KWt,union:oGt,unknown:ZWt,void:tGt,NEVER:wGt,ZodIssueCode:St,quotelessJson:CWt,ZodError:Y0});var Zpe="2025-03-26",R$e=[Zpe,"2024-11-05","2024-10-07"],Lz="2.0",k$e=ge.union([ge.string(),ge.number().int()]),B$e=ge.string(),_Gt=ge.object({progressToken:ge.optional(k$e)}).passthrough(),dh=ge.object({_meta:ge.optional(_Gt)}).passthrough(),J0=ge.object({method:ge.string(),params:ge.optional(dh)}),b6=ge.object({_meta:ge.optional(ge.object({}).passthrough())}).passthrough(),_A=ge.object({method:ge.string(),params:ge.optional(b6)}),fh=ge.object({_meta:ge.optional(ge.object({}).passthrough())}).passthrough(),Fz=ge.union([ge.string(),ge.number().int()]),D$e=ge.object({jsonrpc:ge.literal(Lz),id:Fz}).merge(J0).strict(),P$e=s(t=>D$e.safeParse(t).success,"isJSONRPCRequest"),N$e=ge.object({jsonrpc:ge.literal(Lz)}).merge(_A).strict(),L$e=s(t=>N$e.safeParse(t).success,"isJSONRPCNotification"),F$e=ge.object({jsonrpc:ge.literal(Lz),id:Fz,result:fh}).strict(),eme=s(t=>F$e.safeParse(t).success,"isJSONRPCResponse"),qb;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(qb||(qb={}));var M$e=ge.object({jsonrpc:ge.literal(Lz),id:Fz,error:ge.object({code:ge.number().int(),message:ge.string(),data:ge.optional(ge.unknown())})}).strict(),Q$e=s(t=>M$e.safeParse(t).success,"isJSONRPCError"),O$e=ge.union([D$e,N$e,F$e,M$e]),VT=fh.strict(),Mz=_A.extend({method:ge.literal("notifications/cancelled"),params:b6.extend({requestId:Fz,reason:ge.string().optional()})}),U$e=ge.object({name:ge.string(),version:ge.string()}).passthrough(),SGt=ge.object({experimental:ge.optional(ge.object({}).passthrough()),sampling:ge.optional(ge.object({}).passthrough()),roots:ge.optional(ge.object({listChanged:ge.optional(ge.boolean())}).passthrough())}).passthrough(),RGt=J0.extend({method:ge.literal("initialize"),params:dh.extend({protocolVersion:ge.string(),capabilities:SGt,clientInfo:U$e})});var kGt=ge.object({experimental:ge.optional(ge.object({}).passthrough()),logging:ge.optional(ge.object({}).passthrough()),completions:ge.optional(ge.object({}).passthrough()),prompts:ge.optional(ge.object({listChanged:ge.optional(ge.boolean())}).passthrough()),resources:ge.optional(ge.object({subscribe:ge.optional(ge.boolean()),listChanged:ge.optional(ge.boolean())}).passthrough()),tools:ge.optional(ge.object({listChanged:ge.optional(ge.boolean())}).passthrough())}).passthrough(),tme=fh.extend({protocolVersion:ge.string(),capabilities:kGt,serverInfo:U$e,instructions:ge.optional(ge.string())}),BGt=_A.extend({method:ge.literal("notifications/initialized")});var Qz=J0.extend({method:ge.literal("ping")}),DGt=ge.object({progress:ge.number(),total:ge.optional(ge.number())}).passthrough(),Oz=_A.extend({method:ge.literal("notifications/progress"),params:b6.merge(DGt).extend({progressToken:k$e})}),Uz=J0.extend({params:dh.extend({cursor:ge.optional(B$e)}).optional()}),qz=fh.extend({nextCursor:ge.optional(B$e)}),q$e=ge.object({uri:ge.string(),mimeType:ge.optional(ge.string())}).passthrough(),W$e=q$e.extend({text:ge.string()}),G$e=q$e.extend({blob:ge.string().base64()}),PGt=ge.object({uri:ge.string(),name:ge.string(),description:ge.optional(ge.string()),mimeType:ge.optional(ge.string())}).passthrough(),NGt=ge.object({uriTemplate:ge.string(),name:ge.string(),description:ge.optional(ge.string()),mimeType:ge.optional(ge.string())}).passthrough(),LGt=Uz.extend({method:ge.literal("resources/list")}),nme=qz.extend({resources:ge.array(PGt)}),FGt=Uz.extend({method:ge.literal("resources/templates/list")}),rme=qz.extend({resourceTemplates:ge.array(NGt)}),MGt=J0.extend({method:ge.literal("resources/read"),params:dh.extend({uri:ge.string()})}),ime=fh.extend({contents:ge.array(ge.union([W$e,G$e]))}),QGt=_A.extend({method:ge.literal("notifications/resources/list_changed")}),OGt=J0.extend({method:ge.literal("resources/subscribe"),params:dh.extend({uri:ge.string()})}),UGt=J0.extend({method:ge.literal("resources/unsubscribe"),params:dh.extend({uri:ge.string()})}),qGt=_A.extend({method:ge.literal("notifications/resources/updated"),params:b6.extend({uri:ge.string()})}),WGt=ge.object({name:ge.string(),description:ge.optional(ge.string()),required:ge.optional(ge.boolean())}).passthrough(),GGt=ge.object({name:ge.string(),description:ge.optional(ge.string()),arguments:ge.optional(ge.array(WGt))}).passthrough(),HGt=Uz.extend({method:ge.literal("prompts/list")}),ome=qz.extend({prompts:ge.array(GGt)}),jGt=J0.extend({method:ge.literal("prompts/get"),params:dh.extend({name:ge.string(),arguments:ge.optional(ge.record(ge.string()))})}),Wz=ge.object({type:ge.literal("text"),text:ge.string()}).passthrough(),Gz=ge.object({type:ge.literal("image"),data:ge.string().base64(),mimeType:ge.string()}).passthrough(),Hz=ge.object({type:ge.literal("audio"),data:ge.string().base64(),mimeType:ge.string()}).passthrough(),H$e=ge.object({type:ge.literal("resource"),resource:ge.union([W$e,G$e])}).passthrough(),VGt=ge.object({role:ge.enum(["user","assistant"]),content:ge.union([Wz,Gz,Hz,H$e])}).passthrough(),sme=fh.extend({description:ge.optional(ge.string()),messages:ge.array(VGt)}),$Gt=_A.extend({method:ge.literal("notifications/prompts/list_changed")}),zGt=ge.object({title:ge.optional(ge.string()),readOnlyHint:ge.optional(ge.boolean()),destructiveHint:ge.optional(ge.boolean()),idempotentHint:ge.optional(ge.boolean()),openWorldHint:ge.optional(ge.boolean())}).passthrough(),YGt=ge.object({name:ge.string(),description:ge.optional(ge.string()),inputSchema:ge.object({type:ge.literal("object"),properties:ge.optional(ge.object({}).passthrough())}).passthrough(),annotations:ge.optional(zGt)}).passthrough(),KGt=Uz.extend({method:ge.literal("tools/list")}),ame=qz.extend({tools:ge.array(YGt)}),jz=fh.extend({content:ge.array(ge.union([Wz,Gz,Hz,H$e])),isError:ge.boolean().default(!1).optional()}),dai=jz.or(fh.extend({toolResult:ge.unknown()})),JGt=J0.extend({method:ge.literal("tools/call"),params:dh.extend({name:ge.string(),arguments:ge.optional(ge.record(ge.unknown()))})}),XGt=_A.extend({method:ge.literal("notifications/tools/list_changed")}),j$e=ge.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),ZGt=J0.extend({method:ge.literal("logging/setLevel"),params:dh.extend({level:j$e})}),eHt=_A.extend({method:ge.literal("notifications/message"),params:b6.extend({level:j$e,logger:ge.optional(ge.string()),data:ge.unknown()})}),tHt=ge.object({name:ge.string().optional()}).passthrough(),nHt=ge.object({hints:ge.optional(ge.array(tHt)),costPriority:ge.optional(ge.number().min(0).max(1)),speedPriority:ge.optional(ge.number().min(0).max(1)),intelligencePriority:ge.optional(ge.number().min(0).max(1))}).passthrough(),rHt=ge.object({role:ge.enum(["user","assistant"]),content:ge.union([Wz,Gz,Hz])}).passthrough(),iHt=J0.extend({method:ge.literal("sampling/createMessage"),params:dh.extend({messages:ge.array(rHt),systemPrompt:ge.optional(ge.string()),includeContext:ge.optional(ge.enum(["none","thisServer","allServers"])),temperature:ge.optional(ge.number()),maxTokens:ge.number().int(),stopSequences:ge.optional(ge.array(ge.string())),metadata:ge.optional(ge.object({}).passthrough()),modelPreferences:ge.optional(nHt)})}),oHt=fh.extend({model:ge.string(),stopReason:ge.optional(ge.enum(["endTurn","stopSequence","maxTokens"]).or(ge.string())),role:ge.enum(["user","assistant"]),content:ge.discriminatedUnion("type",[Wz,Gz,Hz])}),sHt=ge.object({type:ge.literal("ref/resource"),uri:ge.string()}).passthrough(),aHt=ge.object({type:ge.literal("ref/prompt"),name:ge.string()}).passthrough(),lHt=J0.extend({method:ge.literal("completion/complete"),params:dh.extend({ref:ge.union([aHt,sHt]),argument:ge.object({name:ge.string(),value:ge.string()}).passthrough()})}),lme=fh.extend({completion:ge.object({values:ge.array(ge.string()).max(100),total:ge.optional(ge.number().int()),hasMore:ge.optional(ge.boolean())}).passthrough()}),cHt=ge.object({uri:ge.string().startsWith("file://"),name:ge.optional(ge.string())}).passthrough(),uHt=J0.extend({method:ge.literal("roots/list")}),dHt=fh.extend({roots:ge.array(cHt)}),fHt=_A.extend({method:ge.literal("notifications/roots/list_changed")}),fai=ge.union([Qz,RGt,lHt,ZGt,jGt,HGt,LGt,FGt,MGt,OGt,UGt,JGt,KGt]),pai=ge.union([Mz,Oz,BGt,fHt]),mai=ge.union([VT,oHt,dHt]),hai=ge.union([Qz,iHt,uHt]),gai=ge.union([Mz,Oz,eHt,qGt,QGt,XGt,$Gt]),Aai=ge.union([VT,tme,lme,sme,ome,nme,rme,ime,jz,ame]),jT=class extends Error{static{s(this,"McpError")}constructor(e,n,r){super(`MCP error ${e}: ${n}`),this.code=e,this.data=r,this.name="McpError"}};var pHt=6e4,Vz=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(Mz,n=>{let r=this._requestHandlerAbortControllers.get(n.params.requestId);r?.abort(n.params.reason)}),this.setNotificationHandler(Oz,n=>{this._onprogress(n)}),this.setRequestHandler(Qz,n=>({}))}_setupTimeout(e,n,r,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let n=this._timeoutInfo.get(e);if(!n)return!1;let r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(e),new jT(qb.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(e){let n=this._timeoutInfo.get(e);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=n=>{this._onerror(n)},this._transport.onmessage=(n,r)=>{eme(n)||Q$e(n)?this._onresponse(n):P$e(n)?this._onrequest(n,r):L$e(n)?this._onnotification(n):this._onerror(new Error(`Unknown message type: ${JSON.stringify(n)}`))},await this._transport.start()}_onclose(){var e;let n=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let r=new jT(qb.ConnectionClosed,"Connection closed");for(let i of n.values())i(r)}_onerror(e){var n;(n=this.onerror)===null||n===void 0||n.call(this,e)}_onnotification(e){var n;let r=(n=this._notificationHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,n){var r,i,o,a;let l=(r=this._requestHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackRequestHandler;if(l===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:qb.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:n?.authInfo,requestId:e.id};Promise.resolve().then(()=>l(e,u)).then(d=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:qb.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:n,...r}=e.params,i=Number(n),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),l=this._timeoutInfo.get(i);if(l&&a&&l.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){a(c);return}o(r)}_onresponse(e){let n=Number(e.id),r=this._responseHandlers.get(n);if(r===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(n),this._progressHandlers.delete(n),this._cleanupTimeout(n),eme(e))r(e);else{let i=new jT(e.error.code,e.error.message,e.error.data);r(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,n,r){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=r??{};return new Promise((l,c)=>{var u,d,p,m,h;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=r?.signal)===null||d===void 0||d.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};r?.onprogress&&(this._progressHandlers.set(g,r.onprogress),y.params={...e.params,_meta:{progressToken:g}});let v=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(D=>this._onerror(new Error(`Failed to send cancellation: ${D}`))),c(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=r?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return c(_);try{let D=n.parse(_.result);l(D)}catch(D){c(D)}}}),(p=r?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;v((_=r?.signal)===null||_===void 0?void 0:_.reason)});let b=(m=r?.timeout)!==null&&m!==void 0?m:pHt,E=s(()=>v(new jT(qb.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(g,b,r?.maxTotalTimeout,E,(h=r?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),c(_)})})}async notification(e,n){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let r={...e,jsonrpc:"2.0"};await this._transport.send(r,n)}setRequestHandler(e,n){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(i,o)=>Promise.resolve(n(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,n){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(n(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function V$e(t,e){return Object.entries(e).reduce((n,[r,i])=>(i&&typeof i=="object"?n[r]=n[r]?{...n[r],...i}:i:n[r]=i,n),{...t})}s(V$e,"mergeCapabilities");var $z=class extends Vz{static{s(this,"Client")}constructor(e,n){var r;super(n),this._clientInfo=e,this._capabilities=(r=n?.capabilities)!==null&&r!==void 0?r:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=V$e(this._capabilities,e)}assertCapability(e,n){var r;if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r[e]))throw new Error(`Server does not support ${e} (required for ${n})`)}async connect(e,n){if(await super.connect(e),e.sessionId===void 0)try{let r=await this.request({method:"initialize",params:{protocolVersion:Zpe,capabilities:this._capabilities,clientInfo:this._clientInfo}},tme,n);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!R$e.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,this._instructions=r.instructions,await this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var n,r,i,o,a;switch(e){case"logging/setLevel":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var n;switch(e){case"notifications/roots/list_changed":if(!(!((n=this._capabilities.roots)===null||n===void 0)&&n.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},VT,e)}async complete(e,n){return this.request({method:"completion/complete",params:e},lme,n)}async setLoggingLevel(e,n){return this.request({method:"logging/setLevel",params:{level:e}},VT,n)}async getPrompt(e,n){return this.request({method:"prompts/get",params:e},sme,n)}async listPrompts(e,n){return this.request({method:"prompts/list",params:e},ome,n)}async listResources(e,n){return this.request({method:"resources/list",params:e},nme,n)}async listResourceTemplates(e,n){return this.request({method:"resources/templates/list",params:e},rme,n)}async readResource(e,n){return this.request({method:"resources/read",params:e},ime,n)}async subscribeResource(e,n){return this.request({method:"resources/subscribe",params:e},VT,n)}async unsubscribeResource(e,n){return this.request({method:"resources/unsubscribe",params:e},VT,n)}async callTool(e,n=jz,r){return this.request({method:"tools/call",params:e},n,r)}async listTools(e,n){return this.request({method:"tools/list",params:e},ame,n)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};f();var Fze=Ve(Nze(),1),E6=Ve(require("node:process"),1),Mze=require("node:stream");f();var Yz=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let n=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),UHt(n)}clear(){this._buffer=void 0}};function UHt(t){return O$e.parse(JSON.parse(t))}s(UHt,"deserializeMessage");function Lze(t){return JSON.stringify(t)+`
`}s(Lze,"serializeMessage");var qHt=E6.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function WHt(){let t={};for(let e of qHt){let n=E6.default.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(WHt,"getDefaultEnvironment");var Kz=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new Yz,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new Mze.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,n)=>{var r,i,o,a,l,c;this._process=(0,Fze.default)(this._serverParams.command,(r=this._serverParams.args)!==null&&r!==void 0?r:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:WHt(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:E6.default.platform==="win32"&&GHt(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}n(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(l=this._process.stdout)===null||l===void 0||l.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,n;return this._stderrStream?this._stderrStream:(n=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&n!==void 0?n:null}processReadBuffer(){for(var e,n;;)try{let r=this._readBuffer.readMessage();if(r===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,r)}catch(r){(n=this.onerror)===null||n===void 0||n.call(this,r)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(n=>{var r;if(!(!((r=this._process)===null||r===void 0)&&r.stdin))throw new Error("Not connected");let i=Lze(e);this._process.stdin.write(i)?n():this._process.stdin.once("drain",n)})}};function GHt(){return"type"in E6.default}s(GHt,"isElectron");var Jz=class{constructor(e,n,r){this.transport=null;this.ctx=e,this.mcp=new $z({name:n,version:r}),this.name=n}static{s(this,"MCPStdioServer")}async connect(e){e.env={...m$e(),...e.env||{}},e.stderr="pipe",this.transport=new Kz(e),this.addMCPListeners();try{await this.mcp.connect(this.transport)}catch(n){throw ou.error(this.ctx,"Connection failed:",n),await Uy(this.ctx,{message:`Failed to connect to MCP server: ${n instanceof Error?n.message:String(n)}`,server:this.name}),n}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let n=await this.mcp.listTools();e=Promise.all(n.tools.map(async r=>{let i={name:r.name,description:r.description,inputSchema:{...r.inputSchema||{},properties:r.inputSchema?.properties||{},type:r.inputSchema?.type||"object"},_status:"enabled",_nameForModel:r.name,annotations:r.annotations};return await h$e(this.ctx,i,this.name),i}))}return e}async callTool(e,n){let r=new Wi([],"error");try{let i=await this.mcp.callTool({name:e,arguments:n});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);ou.error(this.ctx,o),await Uy(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);ou.error(this.ctx,o),await Uy(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));ou.error(this.ctx,o),await Uy(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}return r}addMCPListeners(){this.transport&&(this.transport.stderr&&this.transport.stderr.on("data",e=>{g6(this.ctx,{message:`[server stderr] ${e.toString().trimEnd()}`,server:this.name})}),this.mcp.onclose=()=>{ou.info(this.ctx,`MCP server ${this.name} connection closed.`),t3(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{ou.error(this.ctx,`MCP server ${this.name} error:`,e),Uy(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})})}formatToolResult(e){let n=new Wi([],e.isError===!0?"error":"success");for(let r of e.content)r.type==="text"?n.content.push(new Ci(r.text)):(r.type==="image"||r.type==="audio")&&n.content.push(new oT({mimeType:r.mimeType,data:r.data}));return n}async cleanup(){this.transport&&await this.mcp.close()}};f();var Xz=class extends xb{static{s(this,"McpLanguageModelTool")}constructor(e,n){super({...e,toolProvider:{id:e.serverName,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=n}prepareInvocation(e,n){let r={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:r}}async invoke(e,n,r){return await this.invoker(n.input)}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Pa;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(zg).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Qze=Ve(Ta());var Zz=class t extends M0{constructor(n){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.ctx=n}static{s(this,"CLSMCPManager")}static{this.notificationType=new Qze.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(n){await this.clearAllServers();for(let r of Object.keys(n))await this.addServer({name:r,...n[r]});await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(n,r,i){let o=this.getTool(n,r);if(!o){ou.error(this.ctx,`Not found MCP ${n} server ${r} tool`);return}o._status=i,i==="enabled"?this.ctx.get(eu).getToolById(`${n}.${r}`)||this.registerTool(n,o):this.unregisterTool(n,r)}async callTool(n,r,i){let o=this.MCPServersMap.get(n);if(o){let{status:a,server:l}=o;if(a==="running"&&l)return await l.callTool(r,i)}throw new Error(`MCP server ${n} is not running`)}getTool(n,r){let o=this.getAllTools().find(a=>a.name===n)?.tools;return!o||o.length===0?null:o.find(a=>a.name===r)||null}async getAndCacheAllTools(){let n=[];for(let r of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(r);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let l=a.name,c=this.getToolStatus(r,l);c&&(a._status=c)}),n.push({name:r,status:i.status,tools:o})}else i.status==="error"?n.push({name:r,status:i.status,tools:[],error:i.error}):n.push({name:r,status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${r}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));ou.error(this.ctx,a),await Uy(this.ctx,{message:a,server:r}),n.push({name:r,status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=n}getToolStatus(n,r){let i=this.getTool(n,r);return i?i._status:null}async addServer(n){try{await t3(this.ctx,{message:`Starting server ${n.name}`,server:n.name}),this.MCPServersMap.set(n.name,{status:"stopped",server:null});let r=new Jz(this.ctx,n.name,n.version||"1.0.0");await r.connect(n),this.MCPServersMap.set(n.name,{status:"running",server:r}),await t3(this.ctx,{message:"Connection state: Running",server:n.name})}catch(r){ou.error(this.ctx,`Error initializing MCP server ${n.name}:`,r);let i=r instanceof Error?`message: ${r.message} stack: ${r.stack}`:String(r);await Uy(this.ctx,{message:i,server:n.name}),this.MCPServersMap.set(n.name,{status:"error",server:null,error:i}),this.ctx.get(ja).showWarningMessageOnlyOnce(`${n.name}.initialize`,`Failed to initialize MCP server '${n.name}'. Please check the logs for more details.`)}}async notifyClient(){let n=this.getAllTools();await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{servers:n})}registerTools(){for(let n of this.cachedMCPServerTools){let{name:r,tools:i}=n;for(let o of i)this.registerTool(r,o)}}registerTool(n,r){let{name:i,description:o,inputSchema:a,_status:l,_nameForModel:c,annotations:u}=r;ou.debug(this.ctx,"register MCP Tool:",{...r}),l!=="disabled"&&this.ctx.get(eu).registerTool(new Xz({serverName:n,name:c,displayName:i,description:o||"",displayDescription:o||"",inputSchema:a,annotations:u},d=>(ou.debug(this.ctx,"copilot MCP Invoker:",n,i,d),this.callTool(n,i,d))))}unregisterAllTools(){for(let n of this.cachedMCPServerTools){let{name:r,tools:i}=n;for(let o of i){let{name:a}=o;this.unregisterTool(r,a)}}}unregisterTool(n,r){this.ctx.get(eu).unregisterTool(`${n}.${r}`)}async clearAllServers(){this.unregisterAllTools();for(let n of this.MCPServersMap.keys()){let{status:r,server:i}=this.MCPServersMap.get(n);r==="running"&&i&&(await t3(this.ctx,{message:`Stopping server ${n}`,server:n}),await i.cleanup())}this.MCPServersMap.clear()}};f();var Oze=Ve(Ta());var eY=class t extends Hm{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new Oze.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var nY=Ve(Ta());var HHt=new nY.ProtocolRequestType("copilot/showMessageRequest"),jHt=new nY.ProtocolNotificationType("copilot/showMessage"),tY=class extends Q4{constructor(n){super();this.ctx=n}static{s(this,"CopilotMessageSender")}async sendMessageNotification(n){return this.ctx.get(Cn).connection.sendNotification(jHt,n)}async sendMessageRequest(n){let r=this.ctx.get(Cn).connection,i;try{i=await r.sendRequest(HHt,n)}catch(l){throw new Error(`Request copilot/showMessageRequest failed with message: ${Y9(l)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var VHt=new _t("fetcher"),$Ht="https://default.exp-tas.com/",rY=class extends rr{constructor(n,r,i,o){super();this.ctx=n;this.defaultFetcher=r;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(n,r){try{return await this.defaultFetcher.fetch(n,r)}catch(i){if(Bc(i)||`${n}/`.startsWith($Ht))throw i;VHt.info(this.ctx,`Request to <${n}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(n,r);return this.onFallbackSuccess(),o}}set proxySettings(n){this.defaultFetcher.proxySettings=n}get proxySettings(){return this.defaultFetcher.proxySettings}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}makeAbortController(){return this.defaultFetcher.makeAbortController()}};var Uze=new _t("fetcher"),iY=class extends rr{constructor(n,r=new KR(n),i=new ZR(n)){super();this.ctx=n;this.helixFetcher=r;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new rY(n,r,i,()=>{Uze.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),n.get(Ty).once(()=>{this.updateFetcher()}),n.get(j0).onConfigChange(mt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=Nr(n,mt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(Go).getCapabilities().fetch??!1}updateFetcher(){let n,r;if(!this.editorFetcherCapability)r="Using Helix fetcher, editor does not have fetch capability.",n=this.helixFetcher;else if(this.fetchStrategy==="client")r="Using editor fetcher, fetch strategy set to client.",n=this.editorFetcher;else if(this.fetchStrategy==="native")r="Using Helix fetcher, fetch strategy set to native.",n=this.helixFetcher;else{let i=Nr(this.ctx,mt.DebugUseEditorFetcher);i?.toString()==="true"?(r="Using editor fetcher, debug flag is enabled.",n=this.editorFetcher):i?.toString()==="false"?(r="Using Helix fetcher, debug flag is disabled.",n=this.helixFetcher):(r="Editor fetcher capability available, will fallback if needed.",n=this.fallbackFetcher)}this.currentFetcher!=n&&(Uze.debug(this.ctx,r),this.currentFetcher=n)}get name(){return this.currentFetcher.name}set proxySettings(n){this.helixFetcher.proxySettings=n}get proxySettings(){return this.helixFetcher.proxySettings}set rejectUnauthorized(n){super.rejectUnauthorized=n,this.helixFetcher.rejectUnauthorized=n}get rejectUnauthorized(){return super.rejectUnauthorized}fetch(n,r){return this.currentFetcher.fetch(n,r)}disconnectAll(){return this.currentFetcher.disconnectAll()}makeAbortController(){return this.currentFetcher.makeAbortController()}};f();var oY=class extends ja{constructor(n){super();this.ctx=n}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Cn).connection}showWarningMessage(n,...r){return this.connection.window.showWarningMessage(n,...r)}};f();f();var qze=Ve(require("crypto")),Wze=require("os");var zHt=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function YHt(t){let e=t.replace(/-/g,":").toLowerCase();return!zHt.has(e)}s(YHt,"validateMacAddress");function KHt(){let t=(0,Wze.networkInterfaces)();for(let e in t){let n=t[e];if(n){for(let{mac:r}of n)if(YHt(r))return r}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(KHt,"getMac");var yme;function JHt(){try{let t=KHt();return qze.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(JHt,"getMacMachineId");function Gze(){return yme||(yme=JHt()||an()),yme}s(Gze,"getMachineId");var XHt=an()+Date.now(),Hze=new Rs(XHt,Gze());f();f();var I6=Ve(require("node:process"),1),kme=require("node:buffer"),Bme=Ve(require("node:path"),1),cYe=require("node:url"),uYe=Ve(require("node:util"),1),Dme=Ve(require("node:child_process"),1),zT=Ve(require("node:fs/promises"),1);f();var Eme=Ve(require("node:process"),1),$ze=Ve(require("node:os"),1),zze=Ve(require("node:fs"),1);f();var jze=Ve(require("node:fs"),1);f();var xme=Ve(require("node:fs"),1);var Cme;function ZHt(){try{return xme.default.statSync("/.dockerenv"),!0}catch{return!1}}s(ZHt,"hasDockerEnv");function ejt(){try{return xme.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}s(ejt,"hasDockerCGroup");function vme(){return Cme===void 0&&(Cme=ZHt()||ejt()),Cme}s(vme,"isDocker");var bme,tjt=s(()=>{try{return jze.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");function f3(){return bme===void 0&&(bme=tjt()||vme()),bme}s(f3,"isInsideContainer");var Vze=s(()=>{if(Eme.default.platform!=="linux")return!1;if($ze.default.release().toLowerCase().includes("microsoft"))return!f3();try{return zze.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!f3():!1}catch{return!1}},"isWsl"),p3=Eme.default.env.__IS_WSL_TEST__?Vze:Vze();f();function $T(t,e,n){let r=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=n();return r(i),i},set(i){r(i)}}),t}s($T,"defineLazyProperty");f();var rYe=require("node:util"),aY=Ve(require("node:process"),1),iYe=require("node:child_process");f();var Yze=require("node:util"),Kze=Ve(require("node:process"),1),Jze=require("node:child_process");var njt=(0,Yze.promisify)(Jze.execFile);async function Ime(){if(Kze.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await njt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}s(Ime,"defaultBrowserId");f();f();var Xze=Ve(require("node:process"),1),Zze=require("node:util"),Tme=require("node:child_process");var rjt=(0,Zze.promisify)(Tme.execFile);async function eYe(t,{humanReadableOutput:e=!0}={}){if(Xze.default.platform!=="darwin")throw new Error("macOS only");let n=e?[]:["-ss"],{stdout:r}=await rjt("osascript",["-e",t,n]);return r.trim()}s(eYe,"runAppleScript");async function wme(t){return eYe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}s(wme,"bundleName");f();var tYe=require("node:util"),nYe=require("node:child_process");var ijt=(0,tYe.promisify)(nYe.execFile),ojt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},sY=class extends Error{static{s(this,"UnknownBrowserError")}};async function _me(t=ijt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),n=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!n)throw new sY(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:r}=n.groups,i=ojt[r];if(!i)throw new sY(`Unknown browser ID: ${r}`);return i}s(_me,"defaultBrowser");var sjt=(0,rYe.promisify)(iYe.execFile),ajt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");async function Sme(){if(aY.default.platform==="darwin"){let t=await Ime();return{name:await wme(t),id:t}}if(aY.default.platform==="linux"){let{stdout:t}=await sjt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:ajt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(aY.default.platform==="win32")return _me();throw new Error("Only macOS, Linux, and Windows are supported")}s(Sme,"defaultBrowser");var ljt=uYe.default.promisify(Dme.default.execFile),Rme=Bme.default.dirname((0,cYe.fileURLToPath)(importMetaUrlShim)),oYe=Bme.default.join(Rme,"xdg-open"),{platform:m3,arch:sYe}=I6.default,cjt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let n="/etc/wsl.conf",r=!1;try{await zT.default.access(n,zT.constants.F_OK),r=!0}catch{}if(!r)return t;let i=await zT.default.readFile(n,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),dYe=s(async()=>`${await cjt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");async function ujt(){let t=await dYe(),n=kme.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:r}=await ljt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",n],{encoding:"utf8"}),i=r.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}s(ujt,"getWindowsDefaultBrowserFromWsl");var aYe=s(async(t,e)=>{let n;for(let r of t)try{return await e(r)}catch(i){n=i}throw n},"pTryEach"),lY=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return aYe(t.app,l=>lY({...t,app:l}));let{name:e,arguments:n=[]}=t.app??{};if(n=[...n],Array.isArray(e))return aYe(e,l=>lY({...t,app:{name:l,arguments:n}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},c={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=p3?await ujt():await Sme();if(u.id in l){let d=l[u.id];return e==="browserPrivate"&&n.push(c[d]),lY({...t,app:{name:h3[d],arguments:n}})}throw new Error(`${u.name} is not supported as a default browser`)}let r,i=[],o={};if(m3==="darwin")r="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(m3==="win32"||p3&&!f3()&&!e){r=p3?await dYe():`${I6.default.env.SYSTEMROOT||I6.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),p3||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&n.push(t.target)):t.target&&l.push(`"${t.target}"`),n.length>0&&(n=n.map(c=>`"\`"${c}\`""`),l.push("-ArgumentList",n.join(","))),t.target=kme.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)r=e;else{let l=!Rme||Rme==="/",c=!1;try{await zT.default.access(oYe,zT.constants.X_OK),c=!0}catch{}r=I6.default.versions.electron??(m3==="android"||l||!c)?"xdg-open":oYe}n.length>0&&i.push(...n),t.wait||(o.stdio="ignore",o.detached=!0)}m3==="darwin"&&n.length>0&&i.push("--args",...n),t.target&&i.push(t.target);let a=Dme.default.spawn(r,i,o);return t.wait?new Promise((l,c)=>{a.once("error",c),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}l(a)})}):(a.unref(),a)},"baseOpen"),djt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return lY({...e,target:t})},"open");function lYe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[sYe]:e}=t;if(!e)throw new Error(`${sYe} is not supported`);return e}s(lYe,"detectArchBinary");function Pme({[m3]:t},{wsl:e}){if(e&&p3)return lYe(e);if(!t)throw new Error(`${m3} is not supported`);return lYe(t)}s(Pme,"detectPlatformBinary");var h3={};$T(h3,"chrome",()=>Pme({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));$T(h3,"firefox",()=>Pme({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));$T(h3,"edge",()=>Pme({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));$T(h3,"browser",()=>"browser");$T(h3,"browserPrivate",()=>"browserPrivate");var cY=djt;var uY=class extends cc{constructor(n,r=new Nme){super();this.ctx=n;this.fallback=r}static{s(this,"AgentUrlOpener")}async open(n){let r=this.ctx.get(Cn);if(!(r.clientCapabilities?.window?.showDocument?.support&&(await r.connection.window.showDocument({uri:n,external:!0})).success))return this.fallback.open(n)}},Nme=class extends cc{static{s(this,"SpawnUrlOpener")}async open(e){await cY(e)}};f();f();var dY=class extends gj{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(th).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(th).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(th).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let r=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(r.length){let a=r.map(l=>l.document).filter(l=>l!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(l=>l.document).filter(l=>l!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var fY=class extends Xc{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new dY(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Go).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function fYe(t){let e=new j0(process.env),n=MLe(e);n.set(j0,e),n.set(Ty,new Ty),n.set(rr,new iY(n)),n.set(Js,new Js(n)),Hfe(n,{});let r=_Qe();n.set(Cc,r);let i=new p6(n);n.set(Mn,i),n.set(p6,i);let o=new I8(n,r);n.set(I8,o),n.set(dr,new dr(o,i,process.env)),n.set(UI,new UI),n.set(Rs,Hze),n.set(ur,new jj),n.set(ST,jVe()),n.set(ns,new ns),n.set(go,p$e),n.set(i2,new hz(n)),n.set(Xc,new fY(n)),n.set(th,new th(n)),n.set(Pl,new Pl),n.set(Ra,zO(n,uHe)),n.set(Yf,new Yf(n)),n.set(gg,new i5),PQe(n),Aj(n),JQe(n),Q5e(n),n.set(Cn,new Cn(n,t)),n.set(ja,new oY(n)),n.set(Q4,new tY(n)),n.set(cc,new uY(n)),n.set(Yi,new Sz(n)),n.set(h6,new h6(n));let a=new Mb(n);return n.set(kn,a),n.set(Mb,a),n.set(ul,new M4(n,process.env)),n.set(jc,new jc(n)),s$e(n),KLe(n),n.set(Gu,new Gu),n.set(Db,new Db),n.set(sh,new sh),n.set(A0,new gz),n.set(bA,new bA),n.set(vg,new Av(n)),n.set(Zm,new Zm(n)),n.set(cy,new cy(n)),n.set(tl,new tl(n)),n.set(yc,new Tz(n)),n.set(Jv,new _z(n)),n.set(zg,new wz(n)),n.set(eu,new eu(n)),n.set(vy,new vy(n)),n.set(eh,new eh(n)),n.set(M0,new Zz(n)),n.set(Hm,new eY(n)),n.set(Yg,new Yg),n}s(fYe,"createLanguageServerContext");f();var Lme=require("events"),T6=Ve(require("fs"));var mY=Ve(Ta());f();var mYe=Ve(require("fs")),hYe=Ve(require("http")),g3=Ve(require("path"));var pY=class{constructor(e,n){this.port=e;let r;this.server=hYe.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":n.on("read",l=>{pYe(o,JSON.stringify(l))});return;case"/stdout":n.on("write",l=>{pYe(o,JSON.stringify(l))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;g3.basename(__dirname)!=="debug"&&(a=g3.dirname(__dirname)),r??=mYe.readFileSync(g3.join(a,"dist","debugServer.html")).toString(),o.write(r),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function pYe(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(pYe,"writeData");var Fme=class extends mY.AbstractMessageWriter{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageWriter")}async write(n){return this.ev.emit("write",n),this.delegate.write(n)}end(){this.ev.emit("end"),this.delegate.end()}},Mme=class extends mY.AbstractMessageReader{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageReader")}listen(n){return this.delegate.listen(r=>{this.ev.emit("read",r),n(r)})}};async function gYe(t,e,n){let r,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){r??=new Lme.EventEmitter;let l=new pY(i,r).listen();i===0&&await cY(`http://localhost:${l.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let l=Date.now().toString();o==="1"||o==="true"?a=T6.openSync(`stdio${l}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=T6.openSync(o.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(a){let l=s(c=>{a&&T6.appendFile(a,c,u=>{u&&(a=void 0,console.error(u))})},"log");r??=new Lme.EventEmitter,r.on("read",c=>l(`<-- ${JSON.stringify(c)}
`)),r.on("write",c=>l(`--> ${JSON.stringify(c)}
`))}return r&&(e=new Mme(e,r),n=new Fme(n,r)),[e,n]}s(gYe,"wrapTransports");async function xYe(){let t=Bwe(process.argv.slice(2)).version(new co().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),n,r;e["node-ipc"]?(n=new Rp.IPCMessageReader(process),r=new Rp.IPCMessageWriter(process)):e.stdio?(n=new Rp.StreamMessageReader(process.stdin),r=new Rp.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await AYe.mkdtemp(yYe.default.tmpdir()+"/github-copilot-"));let i=(0,Rp.createConnection)(Rp.ProposedFeatures.all,...await gYe(process.env,n,r)),o=fYe(i);console=P2e(o);let a=o.get(Cn);n.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(xYe,"main");CYe.isMainThread?require.main===module&&xYe():B2e()&&D2e();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cdric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
